!(function (a) {
    var b;
    "object" == typeof exports ? (module.exports = a()) : ("undefined" != typeof window ? (b = window) : "undefined" != typeof global ? (b = global) : "undefined" != typeof self && (b = self), (b.p2 = a()));
})(function () {
    return (function a(b, c, d) {
        function e(g, h) {
            if (!c[g]) {
                if (!b[g]) {
                    var i = "function" == typeof require && require;
                    if (!h && i) return i(g, !0);
                    if (f) return f(g, !0);
                    throw new Error("Cannot find module '" + g + "'");
                }
                var j = (c[g] = { exports: {} });
                b[g][0].call(
                    j.exports,
                    function (a) {
                        return e(b[g][1][a] || a);
                    },
                    j,
                    j.exports,
                    a,
                    b,
                    c,
                    d
                );
            }
            return c[g].exports;
        }
        for (var f = "function" == typeof require && require, g = 0; g < d.length; g++) e(d[g]);
        return e;
    })(
        {
            1: [
                function (a, b, c) {
                    function d() {}
                    var e = a("./Scalar");
                    ((b.exports = d).lineInt = function (a, b, c) {
                        c = c || 0;
                        var d,
                            f,
                            g,
                            h,
                            i,
                            j,
                            k,
                            l = [0, 0];
                        return (
                            (d = a[1][1] - a[0][1]),
                            (f = a[0][0] - a[1][0]),
                            (g = d * a[0][0] + f * a[0][1]),
                            (h = b[1][1] - b[0][1]),
                            (i = b[0][0] - b[1][0]),
                            (j = h * b[0][0] + i * b[0][1]),
                            (k = d * i - h * f),
                            e.eq(k, 0, c) || ((l[0] = (i * g - f * j) / k), (l[1] = (d * j - h * g) / k)),
                            l
                        );
                    }),
                        (d.segmentsIntersect = function (a, b, c, d) {
                            var e = b[0] - a[0],
                                f = b[1] - a[1],
                                g = d[0] - c[0],
                                h = d[1] - c[1];
                            if (g * f - h * e == 0) return !1;
                            var i = (e * (c[1] - a[1]) + f * (a[0] - c[0])) / (g * f - h * e),
                                j = (g * (a[1] - c[1]) + h * (c[0] - a[0])) / (h * e - g * f);
                            return 0 <= i && i <= 1 && 0 <= j && j <= 1;
                        });
                },
                { "./Scalar": 4 },
            ],
            2: [
                function (a, b, c) {
                    function d() {}
                    ((b.exports = d).area = function (a, b, c) {
                        return (b[0] - a[0]) * (c[1] - a[1]) - (c[0] - a[0]) * (b[1] - a[1]);
                    }),
                        (d.left = function (a, b, c) {
                            return 0 < d.area(a, b, c);
                        }),
                        (d.leftOn = function (a, b, c) {
                            return 0 <= d.area(a, b, c);
                        }),
                        (d.right = function (a, b, c) {
                            return d.area(a, b, c) < 0;
                        }),
                        (d.rightOn = function (a, b, c) {
                            return d.area(a, b, c) <= 0;
                        });
                    var e = [],
                        f = [];
                    (d.collinear = function (a, b, c, g) {
                        if (g) {
                            var h = e,
                                i = f;
                            (h[0] = b[0] - a[0]), (h[1] = b[1] - a[1]), (i[0] = c[0] - b[0]), (i[1] = c[1] - b[1]);
                            var j = h[0] * i[0] + h[1] * i[1],
                                k = Math.sqrt(h[0] * h[0] + h[1] * h[1]),
                                l = Math.sqrt(i[0] * i[0] + i[1] * i[1]);
                            return Math.acos(j / (k * l)) < g;
                        }
                        return 0 == d.area(a, b, c);
                    }),
                        (d.sqdist = function (a, b) {
                            var c = b[0] - a[0],
                                d = b[1] - a[1];
                            return c * c + d * d;
                        });
                },
                {},
            ],
            3: [
                function (a, b, c) {
                    function d() {
                        this.vertices = [];
                    }
                    function e(a, b, c, d, e) {
                        e = e || 0;
                        var f = b[1] - a[1],
                            g = a[0] - b[0],
                            i = f * a[0] + g * a[1],
                            j = d[1] - c[1],
                            k = c[0] - d[0],
                            l = j * c[0] + k * c[1],
                            m = f * k - j * g;
                        return h.eq(m, 0, e) ? [0, 0] : [(k * i - g * l) / m, (f * l - j * i) / m];
                    }
                    var f = a("./Line"),
                        g = a("./Point"),
                        h = a("./Scalar");
                    ((b.exports = d).prototype.at = function (a) {
                        var b = this.vertices,
                            c = b.length;
                        return b[a < 0 ? (a % c) + c : a % c];
                    }),
                        (d.prototype.first = function () {
                            return this.vertices[0];
                        }),
                        (d.prototype.last = function () {
                            return this.vertices[this.vertices.length - 1];
                        }),
                        (d.prototype.clear = function () {
                            this.vertices.length = 0;
                        }),
                        (d.prototype.append = function (a, b, c) {
                            if (void 0 === b) throw new Error("From is not given!");
                            if (void 0 === c) throw new Error("To is not given!");
                            if (c - 1 < b) throw new Error("lol1");
                            if (c > a.vertices.length) throw new Error("lol2");
                            if (b < 0) throw new Error("lol3");
                            for (var d = b; d < c; d++) this.vertices.push(a.vertices[d]);
                        }),
                        (d.prototype.makeCCW = function () {
                            for (var a = 0, b = this.vertices, c = 1; c < this.vertices.length; ++c) (b[c][1] < b[a][1] || (b[c][1] == b[a][1] && b[c][0] > b[a][0])) && (a = c);
                            g.left(this.at(a - 1), this.at(a), this.at(a + 1)) || this.reverse();
                        }),
                        (d.prototype.reverse = function () {
                            for (var a = [], b = 0, c = this.vertices.length; b !== c; b++) a.push(this.vertices.pop());
                            this.vertices = a;
                        }),
                        (d.prototype.isReflex = function (a) {
                            return g.right(this.at(a - 1), this.at(a), this.at(a + 1));
                        });
                    var i = [],
                        j = [];
                    (d.prototype.canSee = function (a, b) {
                        var c,
                            d,
                            e = i,
                            h = j;
                        if (g.leftOn(this.at(a + 1), this.at(a), this.at(b)) && g.rightOn(this.at(a - 1), this.at(a), this.at(b))) return !1;
                        d = g.sqdist(this.at(a), this.at(b));
                        for (var k = 0; k !== this.vertices.length; ++k)
                            if (
                                (k + 1) % this.vertices.length !== a &&
                                k !== a &&
                                g.leftOn(this.at(a), this.at(b), this.at(k + 1)) &&
                                g.rightOn(this.at(a), this.at(b), this.at(k)) &&
                                ((e[0] = this.at(a)), (e[1] = this.at(b)), (h[0] = this.at(k)), (h[1] = this.at(k + 1)), (c = f.lineInt(e, h)), g.sqdist(this.at(a), c) < d)
                            )
                                return !1;
                        return !0;
                    }),
                        (d.prototype.copy = function (a, b, c) {
                            var e = c || new d();
                            if ((e.clear(), a < b)) for (var f = a; f <= b; f++) e.vertices.push(this.vertices[f]);
                            else {
                                for (f = 0; f <= b; f++) e.vertices.push(this.vertices[f]);
                                for (f = a; f < this.vertices.length; f++) e.vertices.push(this.vertices[f]);
                            }
                            return e;
                        }),
                        (d.prototype.getCutEdges = function () {
                            for (var a = [], b = [], c = [], e = new d(), f = Number.MAX_VALUE, g = 0; g < this.vertices.length; ++g)
                                if (this.isReflex(g))
                                    for (var h = 0; h < this.vertices.length; ++h)
                                        if (this.canSee(g, h)) {
                                            (b = this.copy(g, h, e).getCutEdges()), (c = this.copy(h, g, e).getCutEdges());
                                            for (var i = 0; i < c.length; i++) b.push(c[i]);
                                            b.length < f && ((f = (a = b).length), a.push([this.at(g), this.at(h)]));
                                        }
                            return a;
                        }),
                        (d.prototype.decomp = function () {
                            var a = this.getCutEdges();
                            return 0 < a.length ? this.slice(a) : [this];
                        }),
                        (d.prototype.slice = function (a) {
                            if (0 == a.length) return [this];
                            if (a instanceof Array && a.length && a[0] instanceof Array && 2 == a[0].length && a[0][0] instanceof Array) {
                                for (var b = [this], c = 0; c < a.length; c++)
                                    for (var d = a[c], e = 0; e < b.length; e++) {
                                        var g = b[e].slice(d);
                                        if (g) {
                                            b.splice(e, 1), b.push(g[0], g[1]);
                                            break;
                                        }
                                    }
                                return b;
                            }
                            (d = a), (c = this.vertices.indexOf(d[0])), (e = this.vertices.indexOf(d[1]));
                            return -1 != c && -1 != e && [this.copy(c, e), this.copy(e, c)];
                        }),
                        (d.prototype.isSimple = function () {
                            for (var a = this.vertices, b = 0; b < a.length - 1; b++) for (var c = 0; c < b - 1; c++) if (f.segmentsIntersect(a[b], a[b + 1], a[c], a[c + 1])) return !1;
                            for (b = 1; b < a.length - 2; b++) if (f.segmentsIntersect(a[0], a[a.length - 1], a[b], a[b + 1])) return !1;
                            return !0;
                        }),
                        (d.prototype.quickDecomp = function (a, b, c, f, h, i) {
                            (h = h || 100), (i = i || 0), (f = f || 25), (a = void 0 !== a ? a : []), (b = b || []), (c = c || []);
                            var j = [0, 0],
                                k = [0, 0],
                                l = [0, 0],
                                m = 0,
                                n = 0,
                                o = 0,
                                p = 0,
                                q = 0,
                                r = 0,
                                s = 0,
                                t = new d(),
                                u = new d(),
                                v = this,
                                w = this.vertices;
                            if (w.length < 3) return a;
                            if (++i > h) return a;
                            for (var x = 0; x < this.vertices.length; ++x)
                                if (v.isReflex(x)) {
                                    b.push(v.vertices[x]), (m = n = Number.MAX_VALUE);
                                    for (var y = 0; y < this.vertices.length; ++y)
                                        g.left(v.at(x - 1), v.at(x), v.at(y)) &&
                                            g.rightOn(v.at(x - 1), v.at(x), v.at(y - 1)) &&
                                            ((l = e(v.at(x - 1), v.at(x), v.at(y), v.at(y - 1))), g.right(v.at(x + 1), v.at(x), l) && (o = g.sqdist(v.vertices[x], l)) < n && ((n = o), (k = l), (r = y))),
                                            g.left(v.at(x + 1), v.at(x), v.at(y + 1)) &&
                                                g.rightOn(v.at(x + 1), v.at(x), v.at(y)) &&
                                                ((l = e(v.at(x + 1), v.at(x), v.at(y), v.at(y + 1))), g.left(v.at(x - 1), v.at(x), l) && (o = g.sqdist(v.vertices[x], l)) < m && ((m = o), (j = l), (q = y)));
                                    if (r == (q + 1) % this.vertices.length)
                                        (l[0] = (k[0] + j[0]) / 2),
                                            (l[1] = (k[1] + j[1]) / 2),
                                            c.push(l),
                                            x < q
                                                ? (t.append(v, x, q + 1), t.vertices.push(l), u.vertices.push(l), 0 != r && u.append(v, r, v.vertices.length), u.append(v, 0, x + 1))
                                                : (0 != x && t.append(v, x, v.vertices.length), t.append(v, 0, q + 1), t.vertices.push(l), u.vertices.push(l), u.append(v, r, x + 1));
                                    else {
                                        if ((q < r && (q += this.vertices.length), (p = Number.MAX_VALUE), q < r)) return a;
                                        for (y = r; y <= q; ++y) g.leftOn(v.at(x - 1), v.at(x), v.at(y)) && g.rightOn(v.at(x + 1), v.at(x), v.at(y)) && (o = g.sqdist(v.at(x), v.at(y))) < p && ((p = o), (s = y % this.vertices.length));
                                        x < s ? (t.append(v, x, s + 1), 0 != s && u.append(v, s, w.length), u.append(v, 0, x + 1)) : (0 != x && t.append(v, x, w.length), t.append(v, 0, s + 1), u.append(v, s, x + 1));
                                    }
                                    return t.vertices.length < u.vertices.length ? (t.quickDecomp(a, b, c, f, h, i), u.quickDecomp(a, b, c, f, h, i)) : (u.quickDecomp(a, b, c, f, h, i), t.quickDecomp(a, b, c, f, h, i)), a;
                                }
                            return a.push(this), a;
                        }),
                        (d.prototype.removeCollinearPoints = function (a) {
                            for (var b = 0, c = this.vertices.length - 1; 3 < this.vertices.length && 0 <= c; --c) g.collinear(this.at(c - 1), this.at(c), this.at(c + 1), a) && (this.vertices.splice(c % this.vertices.length, 1), c--, b++);
                            return b;
                        });
                },
                { "./Line": 1, "./Point": 2, "./Scalar": 4 },
            ],
            4: [
                function (a, b, c) {
                    function d() {}
                    (b.exports = d).eq = function (a, b, c) {
                        return (c = c || 0), Math.abs(a - b) < c;
                    };
                },
                {},
            ],
            5: [
                function (a, b, c) {
                    b.exports = { Polygon: a("./Polygon"), Point: a("./Point") };
                },
                { "./Point": 2, "./Polygon": 3 },
            ],
            6: [
                function (a, b, c) {
                    b.exports = {
                        name: "p2",
                        version: "0.7.0",
                        description: "A JavaScript 2D physics engine.",
                        author: "Stefan Hedman <schteppe@gmail.com> (http://steffe.se)",
                        keywords: ["p2.js", "p2", "physics", "engine", "2d"],
                        main: "./src/p2.js",
                        engines: { node: "*" },
                        repository: { type: "git", url: "https://github.com/schteppe/p2.js.git" },
                        bugs: { url: "https://github.com/schteppe/p2.js/issues" },
                        licenses: [{ type: "MIT" }],
                        devDependencies: {
                            grunt: "^0.4.5",
                            "grunt-contrib-jshint": "^0.11.2",
                            "grunt-contrib-nodeunit": "^0.4.1",
                            "grunt-contrib-uglify": "~0.4.0",
                            "grunt-contrib-watch": "~0.5.0",
                            "grunt-browserify": "~2.0.1",
                            "grunt-contrib-concat": "^0.4.0",
                        },
                        dependencies: { "poly-decomp": "0.1.0" },
                    };
                },
                {},
            ],
            7: [
                function (a, b, c) {
                    function d(a) {
                        (this.lowerBound = e.create()), a && a.lowerBound && e.copy(this.lowerBound, a.lowerBound), (this.upperBound = e.create()), a && a.upperBound && e.copy(this.upperBound, a.upperBound);
                    }
                    var e = a("../math/vec2");
                    a("../utils/Utils"), (b.exports = d);
                    var f = e.create();
                    (d.prototype.setFromPoints = function (a, b, c, d) {
                        var g = this.lowerBound,
                            h = this.upperBound;
                        "number" != typeof c && (c = 0), 0 !== c ? e.rotate(g, a[0], c) : e.copy(g, a[0]), e.copy(h, g);
                        for (var i = Math.cos(c), j = Math.sin(c), k = 1; k < a.length; k++) {
                            var l = a[k];
                            if (0 !== c) {
                                var m = l[0],
                                    n = l[1];
                                (f[0] = i * m - j * n), (f[1] = j * m + i * n), (l = f);
                            }
                            for (var o = 0; o < 2; o++) l[o] > h[o] && (h[o] = l[o]), l[o] < g[o] && (g[o] = l[o]);
                        }
                        b && (e.add(this.lowerBound, this.lowerBound, b), e.add(this.upperBound, this.upperBound, b)), d && ((this.lowerBound[0] -= d), (this.lowerBound[1] -= d), (this.upperBound[0] += d), (this.upperBound[1] += d));
                    }),
                        (d.prototype.copy = function (a) {
                            e.copy(this.lowerBound, a.lowerBound), e.copy(this.upperBound, a.upperBound);
                        }),
                        (d.prototype.extend = function (a) {
                            for (var b = 2; b--; ) {
                                var c = a.lowerBound[b];
                                this.lowerBound[b] > c && (this.lowerBound[b] = c);
                                var d = a.upperBound[b];
                                this.upperBound[b] < d && (this.upperBound[b] = d);
                            }
                        }),
                        (d.prototype.overlaps = function (a) {
                            var b = this.lowerBound,
                                c = this.upperBound,
                                d = a.lowerBound,
                                e = a.upperBound;
                            return ((d[0] <= c[0] && c[0] <= e[0]) || (b[0] <= e[0] && e[0] <= c[0])) && ((d[1] <= c[1] && c[1] <= e[1]) || (b[1] <= e[1] && e[1] <= c[1]));
                        }),
                        (d.prototype.containsPoint = function (a) {
                            var b = this.lowerBound,
                                c = this.upperBound;
                            return b[0] <= a[0] && a[0] <= c[0] && b[1] <= a[1] && a[1] <= c[1];
                        }),
                        (d.prototype.overlapsRay = function (a) {
                            var b = 1 / a.direction[0],
                                c = 1 / a.direction[1],
                                d = (this.lowerBound[0] - a.from[0]) * b,
                                e = (this.upperBound[0] - a.from[0]) * b,
                                f = (this.lowerBound[1] - a.from[1]) * c,
                                g = (this.upperBound[1] - a.from[1]) * c,
                                h = Math.max(Math.max(Math.min(d, e), Math.min(f, g))),
                                i = Math.min(Math.min(Math.max(d, e), Math.max(f, g)));
                            return i < 0 ? -1 : i < h ? -1 : h;
                        });
                },
                { "../math/vec2": 30, "../utils/Utils": 57 },
            ],
            8: [
                function (a, b, c) {
                    function d(a) {
                        (this.type = a), (this.result = []), (this.world = null), (this.boundingVolumeType = d.AABB);
                    }
                    var e = a("../math/vec2"),
                        f = a("../objects/Body");
                    ((b.exports = d).AABB = 1),
                        (d.BOUNDING_CIRCLE = 2),
                        (d.prototype.setWorld = function (a) {
                            this.world = a;
                        }),
                        (d.prototype.getCollisionPairs = function (a) {});
                    var g = e.create();
                    (d.boundingRadiusCheck = function (a, b) {
                        e.sub(g, a.position, b.position);
                        var c = e.squaredLength(g),
                            d = a.boundingRadius + b.boundingRadius;
                        return c <= d * d;
                    }),
                        (d.aabbCheck = function (a, b) {
                            return a.getAABB().overlaps(b.getAABB());
                        }),
                        (d.prototype.boundingVolumeCheck = function (a, b) {
                            var c;
                            switch (this.boundingVolumeType) {
                                case d.BOUNDING_CIRCLE:
                                    c = d.boundingRadiusCheck(a, b);
                                    break;
                                case d.AABB:
                                    c = d.aabbCheck(a, b);
                                    break;
                                default:
                                    throw new Error("Bounding volume type not recognized: " + this.boundingVolumeType);
                            }
                            return c;
                        }),
                        (d.canCollide = function (a, b) {
                            var c = f.KINEMATIC,
                                d = f.STATIC;
                            return !(
                                (a.type === d && b.type === d) ||
                                (a.type === c && b.type === d) ||
                                (a.type === d && b.type === c) ||
                                (a.type === c && b.type === c) ||
                                (a.sleepState === f.SLEEPING && b.sleepState === f.SLEEPING) ||
                                (a.sleepState === f.SLEEPING && b.type === d) ||
                                (b.sleepState === f.SLEEPING && a.type === d)
                            );
                        }),
                        (d.NAIVE = 1),
                        (d.SAP = 2);
                },
                { "../math/vec2": 30, "../objects/Body": 31 },
            ],
            9: [
                function (a, b, c) {
                    function d() {
                        e.call(this, e.NAIVE);
                    }
                    var e = (a("../shapes/Circle"), a("../shapes/Plane"), a("../shapes/Shape"), a("../shapes/Particle"), a("../collision/Broadphase"));
                    a("../math/vec2"),
                        ((((b.exports = d).prototype = new e()).constructor = d).prototype.getCollisionPairs = function (a) {
                            for (var b = a.bodies, c = this.result, d = (c.length = 0), f = b.length; d !== f; d++)
                                for (var g = b[d], h = 0; h < d; h++) {
                                    var i = b[h];
                                    e.canCollide(g, i) && this.boundingVolumeCheck(g, i) && c.push(g, i);
                                }
                            return c;
                        }),
                        (d.prototype.aabbQuery = function (a, b, c) {
                            c = c || [];
                            for (var d = a.bodies, e = 0; e < d.length; e++) {
                                var f = d[e];
                                f.aabbNeedsUpdate && f.updateAABB(), f.aabb.overlaps(b) && c.push(f);
                            }
                            return c;
                        });
                },
                { "../collision/Broadphase": 8, "../math/vec2": 30, "../shapes/Circle": 39, "../shapes/Particle": 43, "../shapes/Plane": 44, "../shapes/Shape": 45 },
            ],
            10: [
                function (a, b, c) {
                    function d() {
                        (this.contactEquations = []),
                            (this.frictionEquations = []),
                            (this.enableFriction = !0),
                            (this.enabledEquations = !0),
                            (this.slipForce = 10),
                            (this.frictionCoefficient = 0.3),
                            (this.surfaceVelocity = 0),
                            (this.contactEquationPool = new k({ size: 32 })),
                            (this.frictionEquationPool = new l({ size: 64 })),
                            (this.restitution = 0),
                            (this.stiffness = n.DEFAULT_STIFFNESS),
                            (this.relaxation = n.DEFAULT_RELAXATION),
                            (this.frictionStiffness = n.DEFAULT_STIFFNESS),
                            (this.frictionRelaxation = n.DEFAULT_RELAXATION),
                            (this.enableFrictionReduction = !0),
                            (this.collidingBodiesLastStep = new m()),
                            (this.contactSkinSize = 0.01);
                    }
                    function e(a, b) {
                        g.set(a.vertices[0], 0.5 * -b.length, -b.radius), g.set(a.vertices[1], 0.5 * b.length, -b.radius), g.set(a.vertices[2], 0.5 * b.length, b.radius), g.set(a.vertices[3], 0.5 * -b.length, b.radius);
                    }
                    function f(a, b, c, d) {
                        for (var e = T, f = U, j = V, k = W, l = a, m = b.vertices, n = null, o = 0; o !== m.length + 1; o++) {
                            var p = m[o % m.length],
                                q = m[(o + 1) % m.length];
                            g.rotate(e, p, d), g.rotate(f, q, d), i(e, e, c), i(f, f, c), h(j, e, l), h(k, f, l);
                            var r = g.crossLength(j, k);
                            if ((null === n && (n = r), r * n <= 0)) return !1;
                            n = r;
                        }
                        return !0;
                    }
                    var g = a("../math/vec2"),
                        h = g.sub,
                        i = g.add,
                        j = g.dot,
                        k = (a("../utils/Utils"), a("../utils/ContactEquationPool")),
                        l = a("../utils/FrictionEquationPool"),
                        m = a("../utils/TupleDictionary"),
                        n = a("../equations/Equation"),
                        o = (a("../equations/ContactEquation"), a("../equations/FrictionEquation"), a("../shapes/Circle")),
                        p = a("../shapes/Convex"),
                        q = a("../shapes/Shape"),
                        r = (a("../objects/Body"), a("../shapes/Box"));
                    b.exports = d;
                    var s = g.fromValues(0, 1),
                        t = g.fromValues(0, 0),
                        u = g.fromValues(0, 0),
                        v = g.fromValues(0, 0),
                        w = g.fromValues(0, 0),
                        x = g.fromValues(0, 0),
                        y = g.fromValues(0, 0),
                        z = g.fromValues(0, 0),
                        A = g.fromValues(0, 0),
                        B = g.fromValues(0, 0),
                        C = g.fromValues(0, 0),
                        D = g.fromValues(0, 0),
                        E = g.fromValues(0, 0),
                        F = g.fromValues(0, 0),
                        G = g.fromValues(0, 0),
                        H = g.fromValues(0, 0),
                        I = g.fromValues(0, 0),
                        J = g.fromValues(0, 0),
                        K = g.fromValues(0, 0),
                        L = [],
                        M = g.create(),
                        N = g.create();
                    (d.prototype.bodiesOverlap = function (a, b) {
                        for (var c = M, d = N, e = 0, f = a.shapes.length; e !== f; e++) {
                            var g = a.shapes[e];
                            a.toWorldFrame(c, g.position);
                            for (var h = 0, i = b.shapes.length; h !== i; h++) {
                                var j = b.shapes[h];
                                if ((b.toWorldFrame(d, j.position), this[g.type | j.type](a, g, c, g.angle + a.angle, b, j, d, j.angle + b.angle, !0))) return !0;
                            }
                        }
                        return !1;
                    }),
                        (d.prototype.collidedLastStep = function (a, b) {
                            var c = 0 | a.id,
                                d = 0 | b.id;
                            return !!this.collidingBodiesLastStep.get(c, d);
                        }),
                        (d.prototype.reset = function () {
                            this.collidingBodiesLastStep.reset();
                            for (var a = this.contactEquations, b = a.length; b--; ) {
                                var c = a[b],
                                    d = c.bodyA.id,
                                    e = c.bodyB.id;
                                this.collidingBodiesLastStep.set(d, e, !0);
                            }
                            for (var f = this.contactEquations, g = this.frictionEquations, h = 0; h < f.length; h++) this.contactEquationPool.release(f[h]);
                            for (h = 0; h < g.length; h++) this.frictionEquationPool.release(g[h]);
                            this.contactEquations.length = this.frictionEquations.length = 0;
                        }),
                        (d.prototype.createContactEquation = function (a, b, c, d) {
                            var e = this.contactEquationPool.get();
                            return (
                                (e.bodyA = a),
                                (e.bodyB = b),
                                (e.shapeA = c),
                                (e.shapeB = d),
                                (e.restitution = this.restitution),
                                (e.firstImpact = !this.collidedLastStep(a, b)),
                                (e.stiffness = this.stiffness),
                                (e.relaxation = this.relaxation),
                                (e.needsUpdate = !0),
                                (e.enabled = this.enabledEquations),
                                (e.offset = this.contactSkinSize),
                                e
                            );
                        }),
                        (d.prototype.createFrictionEquation = function (a, b, c, d) {
                            var e = this.frictionEquationPool.get();
                            return (
                                (e.bodyA = a),
                                (e.bodyB = b),
                                (e.shapeA = c),
                                (e.shapeB = d),
                                e.setSlipForce(this.slipForce),
                                (e.frictionCoefficient = this.frictionCoefficient),
                                (e.relativeVelocity = this.surfaceVelocity),
                                (e.enabled = this.enabledEquations),
                                (e.needsUpdate = !0),
                                (e.stiffness = this.frictionStiffness),
                                (e.relaxation = this.frictionRelaxation),
                                (e.contactEquations.length = 0),
                                e
                            );
                        }),
                        (d.prototype.createFrictionFromContact = function (a) {
                            var b = this.createFrictionEquation(a.bodyA, a.bodyB, a.shapeA, a.shapeB);
                            return g.copy(b.contactPointA, a.contactPointA), g.copy(b.contactPointB, a.contactPointB), g.rotate90cw(b.t, a.normalA), b.contactEquations.push(a), b;
                        }),
                        (d.prototype.createFrictionFromAverage = function (a) {
                            var b = this.contactEquations[this.contactEquations.length - 1],
                                c = this.createFrictionEquation(b.bodyA, b.bodyB, b.shapeA, b.shapeB),
                                d = b.bodyA;
                            b.bodyB, g.set(c.contactPointA, 0, 0), g.set(c.contactPointB, 0, 0), g.set(c.t, 0, 0);
                            for (var e = 0; e !== a; e++)
                                (b = this.contactEquations[this.contactEquations.length - 1 - e]).bodyA === d
                                    ? (g.add(c.t, c.t, b.normalA), g.add(c.contactPointA, c.contactPointA, b.contactPointA), g.add(c.contactPointB, c.contactPointB, b.contactPointB))
                                    : (g.sub(c.t, c.t, b.normalA), g.add(c.contactPointA, c.contactPointA, b.contactPointB), g.add(c.contactPointB, c.contactPointB, b.contactPointA)),
                                    c.contactEquations.push(b);
                            var f = 1 / a;
                            return g.scale(c.contactPointA, c.contactPointA, f), g.scale(c.contactPointB, c.contactPointB, f), g.normalize(c.t, c.t), g.rotate90cw(c.t, c.t), c;
                        }),
                        (d.prototype[q.LINE | q.CONVEX] = d.prototype.convexLine = function (a, b, c, d, e, f, g, h, i) {
                            return !i && 0;
                        }),
                        (d.prototype[q.LINE | q.BOX] = d.prototype.lineBox = function (a, b, c, d, e, f, g, h, i) {
                            return !i && 0;
                        });
                    var O = new r({ width: 1, height: 1 }),
                        P = g.create();
                    (d.prototype[q.CAPSULE | q.CONVEX] = d.prototype[q.CAPSULE | q.BOX] = d.prototype.convexCapsule = function (a, b, c, d, f, h, i, j, k) {
                        var l = P;
                        g.set(l, h.length / 2, 0), g.rotate(l, l, j), g.add(l, l, i);
                        var m = this.circleConvex(f, h, l, j, a, b, c, d, k, h.radius);
                        g.set(l, -h.length / 2, 0), g.rotate(l, l, j), g.add(l, l, i);
                        var n = this.circleConvex(f, h, l, j, a, b, c, d, k, h.radius);
                        if (k && (m || n)) return !0;
                        var o = O;
                        return e(o, h), this.convexConvex(a, b, c, d, f, o, i, j, k) + m + n;
                    }),
                        (d.prototype[q.CAPSULE | q.LINE] = d.prototype.lineCapsule = function (a, b, c, d, e, f, g, h, i) {
                            return !i && 0;
                        });
                    var Q = g.create(),
                        R = g.create(),
                        S = new r({ width: 1, height: 1 });
                    (d.prototype[q.CAPSULE | q.CAPSULE] = d.prototype.capsuleCapsule = function (a, b, c, d, f, h, i, j, k) {
                        for (var m = Q, n = R, o = 0, p = 0; p < 2; p++) {
                            g.set(m, ((0 === p ? -1 : 1) * b.length) / 2, 0), g.rotate(m, m, d), g.add(m, m, c);
                            for (var q = 0; q < 2; q++) {
                                g.set(n, ((0 === q ? -1 : 1) * h.length) / 2, 0), g.rotate(n, n, j), g.add(n, n, i), this.enableFrictionReduction && ((l = this.enableFriction), (this.enableFriction = !1));
                                var r = this.circleCircle(a, b, m, d, f, h, n, j, k, b.radius, h.radius);
                                if ((this.enableFrictionReduction && (this.enableFriction = l), k && r)) return !0;
                                o += r;
                            }
                        }
                        this.enableFrictionReduction && ((l = this.enableFriction), (this.enableFriction = !1));
                        var s = S;
                        e(s, b);
                        var t = this.convexCapsule(a, s, c, d, f, h, i, j, k);
                        if ((this.enableFrictionReduction && (this.enableFriction = l), k && t)) return !0;
                        if (((o += t), this.enableFrictionReduction)) {
                            var l = this.enableFriction;
                            this.enableFriction = !1;
                        }
                        e(s, h);
                        var u = this.convexCapsule(f, s, i, j, a, b, c, d, k);
                        return (
                            this.enableFrictionReduction && (this.enableFriction = l), !(!k || !u) || ((o += u), this.enableFrictionReduction && o && this.enableFriction && this.frictionEquations.push(this.createFrictionFromAverage(o)), o)
                        );
                    }),
                        (d.prototype[q.LINE | q.LINE] = d.prototype.lineLine = function (a, b, c, d, e, f, g, h, i) {
                            return !i && 0;
                        }),
                        (d.prototype[q.PLANE | q.LINE] = d.prototype.planeLine = function (a, b, c, d, e, f, k, l, m) {
                            var n = t,
                                o = u,
                                p = v,
                                q = w,
                                r = x,
                                C = y,
                                D = z,
                                E = A,
                                F = B,
                                G = L,
                                H = 0;
                            g.set(n, -f.length / 2, 0),
                                g.set(o, f.length / 2, 0),
                                g.rotate(p, n, l),
                                g.rotate(q, o, l),
                                i(p, p, k),
                                i(q, q, k),
                                g.copy(n, p),
                                g.copy(o, q),
                                h(r, o, n),
                                g.normalize(C, r),
                                g.rotate90cw(F, C),
                                g.rotate(E, s, d),
                                (G[0] = n),
                                (G[1] = o);
                            for (var I = 0; I < G.length; I++) {
                                var J = G[I];
                                h(D, J, c);
                                var K = j(D, E);
                                if (K < 0) {
                                    if (m) return !0;
                                    var M = this.createContactEquation(a, e, b, f);
                                    H++,
                                        g.copy(M.normalA, E),
                                        g.normalize(M.normalA, M.normalA),
                                        g.scale(D, E, K),
                                        h(M.contactPointA, J, D),
                                        h(M.contactPointA, M.contactPointA, a.position),
                                        h(M.contactPointB, J, k),
                                        i(M.contactPointB, M.contactPointB, k),
                                        h(M.contactPointB, M.contactPointB, e.position),
                                        this.contactEquations.push(M),
                                        this.enableFrictionReduction || (this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(M)));
                                }
                            }
                            return !m && (this.enableFrictionReduction || (H && this.enableFriction && this.frictionEquations.push(this.createFrictionFromAverage(H))), H);
                        }),
                        (d.prototype[q.PARTICLE | q.CAPSULE] = d.prototype.particleCapsule = function (a, b, c, d, e, f, g, h, i) {
                            return this.circleLine(a, b, c, d, e, f, g, h, i, f.radius, 0);
                        }),
                        (d.prototype[q.CIRCLE | q.LINE] = d.prototype.circleLine = function (a, b, c, d, e, f, k, l, m, n, o) {
                            (n = n || 0), (o = void 0 !== o ? o : b.radius);
                            var p = t,
                                q = u,
                                r = v,
                                s = w,
                                H = x,
                                I = y,
                                J = z,
                                K = A,
                                M = B,
                                N = C,
                                O = D,
                                P = E,
                                Q = F,
                                R = G,
                                S = L;
                            g.set(K, -f.length / 2, 0), g.set(M, f.length / 2, 0), g.rotate(N, K, l), g.rotate(O, M, l), i(N, N, k), i(O, O, k), g.copy(K, N), g.copy(M, O), h(I, M, K), g.normalize(J, I), g.rotate90cw(H, J), h(P, c, K);
                            var T = j(P, H);
                            h(s, K, k), h(Q, c, k);
                            var U = o + n;
                            if (Math.abs(T) < U) {
                                g.scale(p, H, T), h(r, c, p), g.scale(q, H, j(H, Q)), g.normalize(q, q), g.scale(q, q, n), i(r, r, q);
                                var V = j(J, r),
                                    W = j(J, K),
                                    X = j(J, M);
                                if (W < V && V < X) {
                                    if (m) return !0;
                                    var Y = this.createContactEquation(a, e, b, f);
                                    return (
                                        g.scale(Y.normalA, p, -1),
                                        g.normalize(Y.normalA, Y.normalA),
                                        g.scale(Y.contactPointA, Y.normalA, o),
                                        i(Y.contactPointA, Y.contactPointA, c),
                                        h(Y.contactPointA, Y.contactPointA, a.position),
                                        h(Y.contactPointB, r, k),
                                        i(Y.contactPointB, Y.contactPointB, k),
                                        h(Y.contactPointB, Y.contactPointB, e.position),
                                        this.contactEquations.push(Y),
                                        this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(Y)),
                                        1
                                    );
                                }
                            }
                            (S[0] = K), (S[1] = M);
                            for (var Z = 0; Z < S.length; Z++) {
                                var $ = S[Z];
                                if ((h(P, $, c), g.squaredLength(P) < Math.pow(U, 2))) {
                                    if (m) return !0;
                                    Y = this.createContactEquation(a, e, b, f);
                                    return (
                                        g.copy(Y.normalA, P),
                                        g.normalize(Y.normalA, Y.normalA),
                                        g.scale(Y.contactPointA, Y.normalA, o),
                                        i(Y.contactPointA, Y.contactPointA, c),
                                        h(Y.contactPointA, Y.contactPointA, a.position),
                                        h(Y.contactPointB, $, k),
                                        g.scale(R, Y.normalA, -n),
                                        i(Y.contactPointB, Y.contactPointB, R),
                                        i(Y.contactPointB, Y.contactPointB, k),
                                        h(Y.contactPointB, Y.contactPointB, e.position),
                                        this.contactEquations.push(Y),
                                        this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(Y)),
                                        1
                                    );
                                }
                            }
                            return 0;
                        }),
                        (d.prototype[q.CIRCLE | q.CAPSULE] = d.prototype.circleCapsule = function (a, b, c, d, e, f, g, h, i) {
                            return this.circleLine(a, b, c, d, e, f, g, h, i, f.radius);
                        }),
                        (d.prototype[q.CIRCLE | q.CONVEX] = d.prototype[q.CIRCLE | q.BOX] = d.prototype.circleConvex = function (a, b, c, d, e, j, k, l, m, n) {
                            n = "number" == typeof n ? n : b.radius;
                            for (var o = t, p = u, q = v, r = w, s = x, y = C, z = D, A = F, B = G, E = H, J = I, K = !1, L = Number.MAX_VALUE, M = j.vertices, N = 0; N !== M.length + 1; N++) {
                                var O = M[N % M.length],
                                    P = M[(N + 1) % M.length];
                                if ((g.rotate(o, O, l), g.rotate(p, P, l), i(o, o, k), i(p, p, k), h(q, p, o), g.normalize(r, q), g.rotate90cw(s, r), g.scale(B, s, -b.radius), i(B, B, c), f(B, j, k, l))) {
                                    g.sub(E, o, B);
                                    var Q = Math.abs(g.dot(E, s));
                                    Q < L && (g.copy(J, B), (L = Q), g.scale(A, s, Q), g.add(A, A, B), (K = !0));
                                }
                            }
                            if (K) {
                                if (m) return !0;
                                var R = this.createContactEquation(a, e, b, j);
                                return (
                                    g.sub(R.normalA, J, c),
                                    g.normalize(R.normalA, R.normalA),
                                    g.scale(R.contactPointA, R.normalA, n),
                                    i(R.contactPointA, R.contactPointA, c),
                                    h(R.contactPointA, R.contactPointA, a.position),
                                    h(R.contactPointB, A, k),
                                    i(R.contactPointB, R.contactPointB, k),
                                    h(R.contactPointB, R.contactPointB, e.position),
                                    this.contactEquations.push(R),
                                    this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(R)),
                                    1
                                );
                            }
                            if (0 < n)
                                for (N = 0; N < M.length; N++) {
                                    var S = M[N];
                                    if ((g.rotate(z, S, l), i(z, z, k), h(y, z, c), g.squaredLength(y) < Math.pow(n, 2))) {
                                        if (m) return !0;
                                        R = this.createContactEquation(a, e, b, j);
                                        return (
                                            g.copy(R.normalA, y),
                                            g.normalize(R.normalA, R.normalA),
                                            g.scale(R.contactPointA, R.normalA, n),
                                            i(R.contactPointA, R.contactPointA, c),
                                            h(R.contactPointA, R.contactPointA, a.position),
                                            h(R.contactPointB, z, k),
                                            i(R.contactPointB, R.contactPointB, k),
                                            h(R.contactPointB, R.contactPointB, e.position),
                                            this.contactEquations.push(R),
                                            this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(R)),
                                            1
                                        );
                                    }
                                }
                            return 0;
                        });
                    var T = g.create(),
                        U = g.create(),
                        V = g.create(),
                        W = g.create();
                    (d.prototype[q.PARTICLE | q.CONVEX] = d.prototype[q.PARTICLE | q.BOX] = d.prototype.particleConvex = function (a, b, c, d, e, k, l, m, n) {
                        var o = t,
                            p = u,
                            q = v,
                            r = w,
                            s = x,
                            A = y,
                            B = z,
                            D = C,
                            E = F,
                            G = J,
                            H = K,
                            I = Number.MAX_VALUE,
                            L = !1,
                            M = k.vertices;
                        if (!f(c, k, l, m)) return 0;
                        if (n) return !0;
                        for (var N = 0; N !== M.length + 1; N++) {
                            var O = M[N % M.length],
                                P = M[(N + 1) % M.length];
                            g.rotate(o, O, m), g.rotate(p, P, m), i(o, o, l), i(p, p, l), h(q, p, o), g.normalize(r, q), g.rotate90cw(s, r), h(D, c, o), j(D, s), h(A, o, l), h(B, c, l), g.sub(G, o, c);
                            var Q = Math.abs(g.dot(G, s));
                            Q < I && ((I = Q), g.scale(E, s, Q), g.add(E, E, c), g.copy(H, s), (L = !0));
                        }
                        if (L) {
                            var R = this.createContactEquation(a, e, b, k);
                            return (
                                g.scale(R.normalA, H, -1),
                                g.normalize(R.normalA, R.normalA),
                                g.set(R.contactPointA, 0, 0),
                                i(R.contactPointA, R.contactPointA, c),
                                h(R.contactPointA, R.contactPointA, a.position),
                                h(R.contactPointB, E, l),
                                i(R.contactPointB, R.contactPointB, l),
                                h(R.contactPointB, R.contactPointB, e.position),
                                this.contactEquations.push(R),
                                this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(R)),
                                1
                            );
                        }
                        return 0;
                    }),
                        (d.prototype[q.CIRCLE] = d.prototype.circleCircle = function (a, b, c, d, e, f, j, k, l, m, n) {
                            var o = t;
                            (m = m || b.radius), (n = n || f.radius);
                            h(o, c, j);
                            var p = m + n;
                            if (g.squaredLength(o) > Math.pow(p, 2)) return 0;
                            if (l) return !0;
                            var q = this.createContactEquation(a, e, b, f);
                            return (
                                h(q.normalA, j, c),
                                g.normalize(q.normalA, q.normalA),
                                g.scale(q.contactPointA, q.normalA, m),
                                g.scale(q.contactPointB, q.normalA, -n),
                                i(q.contactPointA, q.contactPointA, c),
                                h(q.contactPointA, q.contactPointA, a.position),
                                i(q.contactPointB, q.contactPointB, j),
                                h(q.contactPointB, q.contactPointB, e.position),
                                this.contactEquations.push(q),
                                this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(q)),
                                1
                            );
                        }),
                        (d.prototype[q.PLANE | q.CONVEX] = d.prototype[q.PLANE | q.BOX] = d.prototype.planeConvex = function (a, b, c, d, e, f, k, l, m) {
                            var n = t,
                                o = u,
                                p = v,
                                q = 0;
                            g.rotate(o, s, d);
                            for (var r = 0; r !== f.vertices.length; r++) {
                                var w = f.vertices[r];
                                if ((g.rotate(n, w, l), i(n, n, k), h(p, n, c), j(p, o) <= 0)) {
                                    if (m) return !0;
                                    q++;
                                    var x = this.createContactEquation(a, e, b, f);
                                    h(p, n, c), g.copy(x.normalA, o);
                                    var y = j(p, x.normalA);
                                    g.scale(p, x.normalA, y),
                                        h(x.contactPointB, n, e.position),
                                        h(x.contactPointA, n, p),
                                        h(x.contactPointA, x.contactPointA, a.position),
                                        this.contactEquations.push(x),
                                        this.enableFrictionReduction || (this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(x)));
                                }
                            }
                            return this.enableFrictionReduction && this.enableFriction && q && this.frictionEquations.push(this.createFrictionFromAverage(q)), q;
                        }),
                        (d.prototype[q.PARTICLE | q.PLANE] = d.prototype.particlePlane = function (a, b, c, d, e, f, i, k, l) {
                            var m = t,
                                n = u;
                            (k = k || 0), h(m, c, i), g.rotate(n, s, k);
                            var o = j(m, n);
                            if (0 < o) return 0;
                            if (l) return !0;
                            var p = this.createContactEquation(e, a, f, b);
                            return (
                                g.copy(p.normalA, n),
                                g.scale(m, p.normalA, o),
                                h(p.contactPointA, c, m),
                                h(p.contactPointA, p.contactPointA, e.position),
                                h(p.contactPointB, c, a.position),
                                this.contactEquations.push(p),
                                this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(p)),
                                1
                            );
                        }),
                        (d.prototype[q.CIRCLE | q.PARTICLE] = d.prototype.circleParticle = function (a, b, c, d, e, f, j, k, l) {
                            var m = t;
                            if ((h(m, j, c), g.squaredLength(m) > Math.pow(b.radius, 2))) return 0;
                            if (l) return !0;
                            var n = this.createContactEquation(a, e, b, f);
                            return (
                                g.copy(n.normalA, m),
                                g.normalize(n.normalA, n.normalA),
                                g.scale(n.contactPointA, n.normalA, b.radius),
                                i(n.contactPointA, n.contactPointA, c),
                                h(n.contactPointA, n.contactPointA, a.position),
                                h(n.contactPointB, j, e.position),
                                this.contactEquations.push(n),
                                this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(n)),
                                1
                            );
                        });
                    var X = new o({ radius: 1 }),
                        Y = g.create(),
                        Z = g.create();
                    g.create(),
                        (d.prototype[q.PLANE | q.CAPSULE] = d.prototype.planeCapsule = function (a, b, c, d, e, f, h, j, k) {
                            var o,
                                l = Y,
                                m = Z,
                                n = X;
                            g.set(l, -f.length / 2, 0),
                                g.rotate(l, l, j),
                                i(l, l, h),
                                g.set(m, f.length / 2, 0),
                                g.rotate(m, m, j),
                                i(m, m, h),
                                (n.radius = f.radius),
                                this.enableFrictionReduction && ((o = this.enableFriction), (this.enableFriction = !1));
                            var p = this.circlePlane(e, n, l, 0, a, b, c, d, k),
                                q = this.circlePlane(e, n, m, 0, a, b, c, d, k);
                            if ((this.enableFrictionReduction && (this.enableFriction = o), k)) return p || q;
                            var r = p + q;
                            return this.enableFrictionReduction && r && this.frictionEquations.push(this.createFrictionFromAverage(r)), r;
                        }),
                        (d.prototype[q.CIRCLE | q.PLANE] = d.prototype.circlePlane = function (a, b, c, d, e, f, k, l, m) {
                            var n = a,
                                o = b,
                                p = c,
                                q = e,
                                r = k,
                                w = l;
                            w = w || 0;
                            var x = t,
                                y = u,
                                z = v;
                            h(x, p, r), g.rotate(y, s, w);
                            var A = j(y, x);
                            if (A > o.radius) return 0;
                            if (m) return !0;
                            var B = this.createContactEquation(q, n, f, b);
                            return (
                                g.copy(B.normalA, y),
                                g.scale(B.contactPointB, B.normalA, -o.radius),
                                i(B.contactPointB, B.contactPointB, p),
                                h(B.contactPointB, B.contactPointB, n.position),
                                g.scale(z, B.normalA, A),
                                h(B.contactPointA, x, z),
                                i(B.contactPointA, B.contactPointA, r),
                                h(B.contactPointA, B.contactPointA, q.position),
                                this.contactEquations.push(B),
                                this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(B)),
                                1
                            );
                        }),
                        (d.prototype[q.CONVEX] = d.prototype[q.CONVEX | q.BOX] = d.prototype[q.BOX] = d.prototype.convexConvex = function (a, b, c, e, f, k, l, m, n, o) {
                            var p = t,
                                q = u,
                                r = v,
                                s = w,
                                y = x,
                                C = z,
                                D = A,
                                E = B,
                                F = 0;
                            o = "number" == typeof o ? o : 0;
                            if (!d.findSeparatingAxis(b, c, e, k, l, m, p)) return 0;
                            h(D, l, c), 0 < j(p, D) && g.scale(p, p, -1);
                            var G = d.getClosestEdge(b, e, p, !0),
                                H = d.getClosestEdge(k, m, p);
                            if (-1 === G || -1 === H) return 0;
                            for (var I = 0; I < 2; I++) {
                                var T,
                                    J = G,
                                    K = H,
                                    L = b,
                                    M = k,
                                    N = c,
                                    O = l,
                                    P = e,
                                    Q = m,
                                    R = a,
                                    S = f;
                                if (0 === I) (T = J), (J = K), (K = T), (T = L), (L = M), (M = T), (T = N), (N = O), (O = T), (T = P), (P = Q), (Q = T), (T = R), (R = S), (S = T);
                                for (var U = K; U < K + 2; U++) {
                                    var V = M.vertices[(U + M.vertices.length) % M.vertices.length];
                                    g.rotate(q, V, Q), i(q, q, O);
                                    for (var W = 0, X = J - 1; X < J + 2; X++) {
                                        var Y = L.vertices[(X + L.vertices.length) % L.vertices.length],
                                            Z = L.vertices[(X + 1 + L.vertices.length) % L.vertices.length];
                                        g.rotate(r, Y, P), g.rotate(s, Z, P), i(r, r, N), i(s, s, N), h(y, s, r), g.rotate90cw(E, y), g.normalize(E, E), h(D, q, r);
                                        var $ = j(E, D);
                                        ((X === J && $ <= o) || (X !== J && $ <= 0)) && W++;
                                    }
                                    if (3 <= W) {
                                        if (n) return !0;
                                        var _ = this.createContactEquation(R, S, L, M);
                                        F++;
                                        (Y = L.vertices[J % L.vertices.length]), (Z = L.vertices[(J + 1) % L.vertices.length]);
                                        g.rotate(r, Y, P), g.rotate(s, Z, P), i(r, r, N), i(s, s, N), h(y, s, r), g.rotate90cw(_.normalA, y), g.normalize(_.normalA, _.normalA), h(D, q, r);
                                        $ = j(_.normalA, D);
                                        g.scale(C, _.normalA, $),
                                            h(_.contactPointA, q, N),
                                            h(_.contactPointA, _.contactPointA, C),
                                            i(_.contactPointA, _.contactPointA, N),
                                            h(_.contactPointA, _.contactPointA, R.position),
                                            h(_.contactPointB, q, O),
                                            i(_.contactPointB, _.contactPointB, O),
                                            h(_.contactPointB, _.contactPointB, S.position),
                                            this.contactEquations.push(_),
                                            this.enableFrictionReduction || (this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(_)));
                                    }
                                }
                            }
                            return this.enableFrictionReduction && this.enableFriction && F && this.frictionEquations.push(this.createFrictionFromAverage(F)), F;
                        });
                    var $ = g.fromValues(0, 0);
                    d.projectConvexOntoAxis = function (a, b, c, d, e) {
                        var f,
                            h,
                            i = null,
                            k = null,
                            l = $;
                        g.rotate(l, d, -c);
                        for (var m = 0; m < a.vertices.length; m++) (f = a.vertices[m]), (h = j(f, l)), (null === i || i < h) && (i = h), (null === k || h < k) && (k = h);
                        if (i < k) {
                            var n = k;
                            (k = i), (i = n);
                        }
                        var o = j(b, d);
                        g.set(e, k + o, i + o);
                    };
                    var _ = g.fromValues(0, 0),
                        aa = g.fromValues(0, 0),
                        ba = g.fromValues(0, 0),
                        ca = g.fromValues(0, 0),
                        da = g.fromValues(0, 0),
                        ea = g.fromValues(0, 0);
                    d.findSeparatingAxis = function (a, b, c, e, f, i, j) {
                        var k = null,
                            l = !1,
                            m = !1,
                            n = _,
                            o = aa,
                            p = ba,
                            q = ca,
                            s = da,
                            t = ea;
                        if (a instanceof r && e instanceof r)
                            for (var u = 0; 2 !== u; u++) {
                                var v = a,
                                    w = c;
                                1 === u && ((v = e), (w = i));
                                for (var x = 0; 2 !== x; x++) {
                                    0 === x ? g.set(q, 0, 1) : 1 === x && g.set(q, 1, 0), 0 !== w && g.rotate(q, q, w), d.projectConvexOntoAxis(a, b, c, q, s), d.projectConvexOntoAxis(e, f, i, q, t);
                                    var y = s,
                                        z = t;
                                    s[0] > t[0] && ((z = s), (y = t)), (l = (A = z[0] - y[1]) <= 0), (null === k || k < A) && (g.copy(j, q), (k = A), (m = l));
                                }
                            }
                        else
                            for (u = 0; 2 !== u; u++) {
                                (v = a), (w = c);
                                1 === u && ((v = e), (w = i));
                                for (x = 0; x !== v.vertices.length; x++) {
                                    g.rotate(o, v.vertices[x], w),
                                        g.rotate(p, v.vertices[(x + 1) % v.vertices.length], w),
                                        h(n, p, o),
                                        g.rotate90cw(q, n),
                                        g.normalize(q, q),
                                        d.projectConvexOntoAxis(a, b, c, q, s),
                                        d.projectConvexOntoAxis(e, f, i, q, t);
                                    var A;
                                    (y = s), (z = t);
                                    s[0] > t[0] && ((z = s), (y = t)), (l = (A = z[0] - y[1]) <= 0), (null === k || k < A) && (g.copy(j, q), (k = A), (m = l));
                                }
                            }
                        return m;
                    };
                    var fa = g.fromValues(0, 0),
                        ga = g.fromValues(0, 0),
                        ha = g.fromValues(0, 0);
                    d.getClosestEdge = function (a, b, c, d) {
                        var e = fa,
                            f = ga,
                            i = ha;
                        g.rotate(e, c, -b), d && g.scale(e, e, -1);
                        for (var k = -1, l = a.vertices.length, m = -1, n = 0; n !== l; n++) {
                            h(f, a.vertices[(n + 1) % l], a.vertices[n % l]), g.rotate90cw(i, f), g.normalize(i, i);
                            var o = j(i, e);
                            (-1 === k || m < o) && ((k = n % l), (m = o));
                        }
                        return k;
                    };
                    var ia = g.create(),
                        ja = g.create(),
                        ka = g.create(),
                        la = g.create(),
                        ma = g.create(),
                        na = g.create(),
                        oa = g.create();
                    d.prototype[q.CIRCLE | q.HEIGHTFIELD] = d.prototype.circleHeightfield = function (a, b, c, d, e, f, j, k, l, m) {
                        var n = f.heights,
                            o = ((m = m || b.radius), f.elementWidth),
                            p = ja,
                            q = ia,
                            r = ma,
                            s = oa,
                            t = na,
                            u = ka,
                            v = la,
                            w = Math.floor((c[0] - m - j[0]) / o),
                            x = Math.ceil((c[0] + m - j[0]) / o);
                        w < 0 && (w = 0), x >= n.length && (x = n.length - 1);
                        for (var y = n[w], z = n[x], A = w; A < x; A++) n[A] < z && (z = n[A]), n[A] > y && (y = n[A]);
                        if (c[1] - m > y) return !l && 0;
                        var B = !1;
                        for (A = w; A < x; A++) {
                            g.set(u, A * o, n[A]), g.set(v, (A + 1) * o, n[A + 1]), g.add(u, u, j), g.add(v, v, j), g.sub(t, v, u), g.rotate(t, t, Math.PI / 2), g.normalize(t, t), g.scale(q, t, -m), g.add(q, q, c), g.sub(p, q, u);
                            var C = g.dot(p, t);
                            if (q[0] >= u[0] && q[0] < v[0] && C <= 0) {
                                if (l) return !0;
                                (B = !0), g.scale(p, t, -C), g.add(r, q, p), g.copy(s, t);
                                var D = this.createContactEquation(e, a, f, b);
                                g.copy(D.normalA, s),
                                    g.scale(D.contactPointB, D.normalA, -m),
                                    i(D.contactPointB, D.contactPointB, c),
                                    h(D.contactPointB, D.contactPointB, a.position),
                                    g.copy(D.contactPointA, r),
                                    g.sub(D.contactPointA, D.contactPointA, e.position),
                                    this.contactEquations.push(D),
                                    this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(D));
                            }
                        }
                        if (((B = !1), 0 < m))
                            for (A = w; A <= x; A++)
                                if ((g.set(u, A * o, n[A]), g.add(u, u, j), g.sub(p, c, u), g.squaredLength(p) < Math.pow(m, 2))) {
                                    if (l) return !0;
                                    B = !0;
                                    D = this.createContactEquation(e, a, f, b);
                                    g.copy(D.normalA, p),
                                        g.normalize(D.normalA, D.normalA),
                                        g.scale(D.contactPointB, D.normalA, -m),
                                        i(D.contactPointB, D.contactPointB, c),
                                        h(D.contactPointB, D.contactPointB, a.position),
                                        h(D.contactPointA, u, j),
                                        i(D.contactPointA, D.contactPointA, j),
                                        h(D.contactPointA, D.contactPointA, e.position),
                                        this.contactEquations.push(D),
                                        this.enableFriction && this.frictionEquations.push(this.createFrictionFromContact(D));
                                }
                        return B ? 1 : 0;
                    };
                    var pa = g.create(),
                        qa = g.create(),
                        ra = g.create(),
                        sa = new p({ vertices: [g.create(), g.create(), g.create(), g.create()] });
                    d.prototype[q.BOX | q.HEIGHTFIELD] = d.prototype[q.CONVEX | q.HEIGHTFIELD] = d.prototype.convexHeightfield = function (a, b, c, d, e, f, h, i, j) {
                        var k = f.heights,
                            l = f.elementWidth,
                            m = pa,
                            n = qa,
                            o = ra,
                            p = sa,
                            q = Math.floor((a.aabb.lowerBound[0] - h[0]) / l),
                            r = Math.ceil((a.aabb.upperBound[0] - h[0]) / l);
                        q < 0 && (q = 0), r >= k.length && (r = k.length - 1);
                        for (var s = k[q], t = k[r], u = q; u < r; u++) k[u] < t && (t = k[u]), k[u] > s && (s = k[u]);
                        if (a.aabb.lowerBound[1] > s) return !j && 0;
                        var v = 0;
                        for (u = q; u < r; u++) {
                            g.set(m, u * l, k[u]), g.set(n, (u + 1) * l, k[u + 1]), g.add(m, m, h), g.add(n, n, h);
                            g.set(o, 0.5 * (n[0] + m[0]), 0.5 * (n[1] + m[1] - 100)),
                                g.sub(p.vertices[0], n, o),
                                g.sub(p.vertices[1], m, o),
                                g.copy(p.vertices[2], p.vertices[1]),
                                g.copy(p.vertices[3], p.vertices[0]),
                                (p.vertices[2][1] -= 100),
                                (p.vertices[3][1] -= 100),
                                (v += this.convexConvex(a, b, c, d, e, p, o, 0, j));
                        }
                        return v;
                    };
                },
                {
                    "../equations/ContactEquation": 21,
                    "../equations/Equation": 22,
                    "../equations/FrictionEquation": 23,
                    "../math/vec2": 30,
                    "../objects/Body": 31,
                    "../shapes/Box": 37,
                    "../shapes/Circle": 39,
                    "../shapes/Convex": 40,
                    "../shapes/Shape": 45,
                    "../utils/ContactEquationPool": 48,
                    "../utils/FrictionEquationPool": 49,
                    "../utils/TupleDictionary": 56,
                    "../utils/Utils": 57,
                },
            ],
            11: [
                function (a, b, c) {
                    function d(a) {
                        (a = a || {}),
                            (this.from = a.from ? f.fromValues(a.from[0], a.from[1]) : f.create()),
                            (this.to = a.to ? f.fromValues(a.to[0], a.to[1]) : f.create()),
                            (this.checkCollisionResponse = void 0 === a.checkCollisionResponse || a.checkCollisionResponse),
                            (this.skipBackfaces = !!a.skipBackfaces),
                            (this.collisionMask = void 0 !== a.collisionMask ? a.collisionMask : -1),
                            (this.collisionGroup = void 0 !== a.collisionGroup ? a.collisionGroup : -1),
                            (this.mode = void 0 !== a.mode ? a.mode : d.ANY),
                            (this.callback = a.callback || function (a) {}),
                            (this.direction = f.create()),
                            (this.length = 1),
                            this.update();
                    }
                    function e(a, b, c) {
                        f.sub(h, c, a);
                        var d = f.dot(h, b);
                        return f.scale(i, b, d), f.add(i, i, a), f.squaredDistance(c, i);
                    }
                    b.exports = d;
                    var f = a("../math/vec2");
                    a("../collision/RaycastResult"),
                        a("../shapes/Shape"),
                        a("../collision/AABB"),
                        ((d.prototype.constructor = d).CLOSEST = 1),
                        (d.ANY = 2),
                        (d.ALL = 4),
                        (d.prototype.update = function () {
                            var a = this.direction;
                            f.sub(a, this.to, this.from), (this.length = f.length(a)), f.normalize(a, a);
                        }),
                        (d.prototype.intersectBodies = function (a, b) {
                            for (var c = 0, d = b.length; !a.shouldStop(this) && c < d; c++) {
                                var e = b[c],
                                    f = e.getAABB();
                                (0 <= f.overlapsRay(this) || f.containsPoint(this.from)) && this.intersectBody(a, e);
                            }
                        });
                    var g = f.create();
                    (d.prototype.intersectBody = function (a, b) {
                        var c = this.checkCollisionResponse;
                        if (!c || b.collisionResponse)
                            for (var d = g, e = 0, h = b.shapes.length; e < h; e++) {
                                var i = b.shapes[e];
                                if ((!c || i.collisionResponse) && 0 != (this.collisionGroup & i.collisionMask) && 0 != (i.collisionGroup & this.collisionMask)) {
                                    f.rotate(d, i.position, b.angle), f.add(d, d, b.position);
                                    var j = i.angle + b.angle;
                                    if ((this.intersectShape(a, i, j, d, b), a.shouldStop(this))) break;
                                }
                            }
                    }),
                        (d.prototype.intersectShape = function (a, b, c, d, f) {
                            e(this.from, this.direction, d) > b.boundingRadius * b.boundingRadius || ((this._currentBody = f), (this._currentShape = b).raycast(a, this, d, c), (this._currentBody = this._currentShape = null));
                        }),
                        (d.prototype.getAABB = function (a) {
                            var b = this.to,
                                c = this.from;
                            f.set(a.lowerBound, Math.min(b[0], c[0]), Math.min(b[1], c[1])), f.set(a.upperBound, Math.max(b[0], c[0]), Math.max(b[1], c[1]));
                        }),
                        f.create(),
                        (d.prototype.reportIntersection = function (a, b, c, e) {
                            var g = (this.from, this.to, this._currentShape),
                                h = this._currentBody;
                            if (!(this.skipBackfaces && 0 < f.dot(c, this.direction)))
                                switch (this.mode) {
                                    case d.ALL:
                                        a.set(c, g, h, b, e), this.callback(a);
                                        break;
                                    case d.CLOSEST:
                                        (b < a.fraction || !a.hasHit()) && a.set(c, g, h, b, e);
                                        break;
                                    case d.ANY:
                                        a.set(c, g, h, b, e);
                                }
                        });
                    var h = f.create(),
                        i = f.create();
                },
                { "../collision/AABB": 7, "../collision/RaycastResult": 12, "../math/vec2": 30, "../shapes/Shape": 45 },
            ],
            12: [
                function (a, b, c) {
                    function d() {
                        (this.normal = e.create()), (this.shape = null), (this.body = null), (this.faceIndex = -1), (this.fraction = -1), (this.isStopped = !1);
                    }
                    var e = a("../math/vec2"),
                        f = a("../collision/Ray");
                    ((b.exports = d).prototype.reset = function () {
                        e.set(this.normal, 0, 0), (this.shape = null), (this.body = null), (this.faceIndex = -1), (this.fraction = -1), (this.isStopped = !1);
                    }),
                        (d.prototype.getHitDistance = function (a) {
                            return e.distance(a.from, a.to) * this.fraction;
                        }),
                        (d.prototype.hasHit = function () {
                            return -1 !== this.fraction;
                        }),
                        (d.prototype.getHitPoint = function (a, b) {
                            e.lerp(a, b.from, b.to, this.fraction);
                        }),
                        (d.prototype.stop = function () {
                            this.isStopped = !0;
                        }),
                        (d.prototype.shouldStop = function (a) {
                            return this.isStopped || (-1 !== this.fraction && a.mode === f.ANY);
                        }),
                        (d.prototype.set = function (a, b, c, d, f) {
                            e.copy(this.normal, a), (this.shape = b), (this.body = c), (this.fraction = d), (this.faceIndex = f);
                        });
                },
                { "../collision/Ray": 11, "../math/vec2": 30 },
            ],
            13: [
                function (a, b, c) {
                    function d() {
                        f.call(this, f.SAP), (this.axisList = []), (this.axisIndex = 0);
                        var a = this;
                        (this._addBodyHandler = function (b) {
                            a.axisList.push(b.body);
                        }),
                            (this._removeBodyHandler = function (b) {
                                var c = a.axisList.indexOf(b.body);
                                -1 !== c && a.axisList.splice(c, 1);
                            });
                    }
                    var e = a("../utils/Utils"),
                        f = a("../collision/Broadphase");
                    ((((b.exports = d).prototype = new f()).constructor = d).prototype.setWorld = function (a) {
                        (this.axisList.length = 0),
                            e.appendArray(this.axisList, a.bodies),
                            a.off("addBody", this._addBodyHandler).off("removeBody", this._removeBodyHandler),
                            a.on("addBody", this._addBodyHandler).on("removeBody", this._removeBodyHandler),
                            (this.world = a);
                    }),
                        (d.sortAxisList = function (a, b) {
                            b |= 0;
                            for (var c = 1, d = a.length; c < d; c++) {
                                for (var e = a[c], f = c - 1; 0 <= f && !(a[f].aabb.lowerBound[b] <= e.aabb.lowerBound[b]); f--) a[f + 1] = a[f];
                                a[f + 1] = e;
                            }
                            return a;
                        }),
                        (d.prototype.sortList = function () {
                            var a = this.axisList,
                                b = this.axisIndex;
                            d.sortAxisList(a, b);
                        }),
                        (d.prototype.getCollisionPairs = function (a) {
                            var b = this.axisList,
                                c = this.result,
                                d = this.axisIndex;
                            c.length = 0;
                            for (var e = b.length; e--; ) {
                                var g = b[e];
                                g.aabbNeedsUpdate && g.updateAABB();
                            }
                            this.sortList();
                            for (var h = 0, i = 0 | b.length; h !== i; h++)
                                for (var j = b[h], k = h + 1; k < i; k++) {
                                    var l = b[k];
                                    if (!(l.aabb.lowerBound[d] <= j.aabb.upperBound[d])) break;
                                    f.canCollide(j, l) && this.boundingVolumeCheck(j, l) && c.push(j, l);
                                }
                            return c;
                        }),
                        (d.prototype.aabbQuery = function (a, b, c) {
                            (c = c || []), this.sortList();
                            var d = this.axisIndex,
                                e = "x";
                            1 === d && (e = "y"), 2 === d && (e = "z");
                            for (var f = this.axisList, g = (b.lowerBound[e], b.upperBound[e], 0); g < f.length; g++) {
                                var h = f[g];
                                h.aabbNeedsUpdate && h.updateAABB(), h.aabb.overlaps(b) && c.push(h);
                            }
                            return c;
                        });
                },
                { "../collision/Broadphase": 8, "../utils/Utils": 57 },
            ],
            14: [
                function (a, b, c) {
                    function d(a, b, c, d) {
                        (this.type = c),
                            (d = e.defaults(d, { collideConnected: !0, wakeUpBodies: !0 })),
                            (this.equations = []),
                            (this.bodyA = a),
                            (this.bodyB = b),
                            (this.collideConnected = d.collideConnected),
                            d.wakeUpBodies && (a && a.wakeUp(), b && b.wakeUp());
                    }
                    b.exports = d;
                    var e = a("../utils/Utils");
                    (d.prototype.update = function () {
                        throw new Error("method update() not implmemented in this Constraint subclass!");
                    }),
                        (d.DISTANCE = 1),
                        (d.GEAR = 2),
                        (d.LOCK = 3),
                        (d.PRISMATIC = 4),
                        (d.REVOLUTE = 5),
                        (d.prototype.setStiffness = function (a) {
                            for (var b = this.equations, c = 0; c !== b.length; c++) {
                                var d = b[c];
                                (d.stiffness = a), (d.needsUpdate = !0);
                            }
                        }),
                        (d.prototype.setRelaxation = function (a) {
                            for (var b = this.equations, c = 0; c !== b.length; c++) {
                                var d = b[c];
                                (d.relaxation = a), (d.needsUpdate = !0);
                            }
                        });
                },
                { "../utils/Utils": 57 },
            ],
            15: [
                function (a, b, c) {
                    function d(a, b, c) {
                        (c = h.defaults(c, { localAnchorA: [0, 0], localAnchorB: [0, 0] })),
                            e.call(this, a, b, e.DISTANCE, c),
                            (this.localAnchorA = g.fromValues(c.localAnchorA[0], c.localAnchorA[1])),
                            (this.localAnchorB = g.fromValues(c.localAnchorB[0], c.localAnchorB[1]));
                        var m,
                            d = this.localAnchorA,
                            i = this.localAnchorB;
                        if (((this.distance = 0), "number" == typeof c.distance)) this.distance = c.distance;
                        else {
                            var j = g.create(),
                                k = g.create(),
                                l = g.create();
                            g.rotate(j, d, a.angle), g.rotate(k, i, b.angle), g.add(l, b.position, k), g.sub(l, l, j), g.sub(l, l, a.position), (this.distance = g.length(l));
                        }
                        m = void 0 === c.maxForce ? Number.MAX_VALUE : c.maxForce;
                        var n = new f(a, b, -m, m);
                        (this.equations = [n]), (this.maxForce = m);
                        l = g.create();
                        var o = g.create(),
                            p = g.create(),
                            q = this;
                        (n.computeGq = function () {
                            var a = this.bodyA,
                                b = this.bodyB,
                                c = a.position,
                                e = b.position;
                            return g.rotate(o, d, a.angle), g.rotate(p, i, b.angle), g.add(l, e, p), g.sub(l, l, o), g.sub(l, l, c), g.length(l) - q.distance;
                        }),
                            this.setMaxForce(m),
                            (this.upperLimitEnabled = !1),
                            (this.upperLimit = 1),
                            (this.lowerLimitEnabled = !1),
                            (this.lowerLimit = 0),
                            (this.position = 0);
                    }
                    var e = a("./Constraint"),
                        f = a("../equations/Equation"),
                        g = a("../math/vec2"),
                        h = a("../utils/Utils");
                    ((b.exports = d).prototype = new e()).constructor = d;
                    var i = g.create(),
                        j = g.create(),
                        k = g.create();
                    (d.prototype.update = function () {
                        var a = this.equations[0],
                            b = this.bodyA,
                            c = this.bodyB,
                            d = (this.distance, b.position),
                            e = c.position,
                            f = this.equations[0],
                            h = a.G;
                        g.rotate(j, this.localAnchorA, b.angle), g.rotate(k, this.localAnchorB, c.angle), g.add(i, e, k), g.sub(i, i, j), g.sub(i, i, d), (this.position = g.length(i));
                        var l = !1;
                        if (
                            (this.upperLimitEnabled && this.position > this.upperLimit && ((f.maxForce = 0), (f.minForce = -this.maxForce), (this.distance = this.upperLimit), (l = !0)),
                            this.lowerLimitEnabled && this.position < this.lowerLimit && ((f.maxForce = this.maxForce), (f.minForce = 0), (this.distance = this.lowerLimit), (l = !0)),
                            (!this.lowerLimitEnabled && !this.upperLimitEnabled) || l)
                        ) {
                            (f.enabled = !0), g.normalize(i, i);
                            var m = g.crossLength(j, i),
                                n = g.crossLength(k, i);
                            (h[0] = -i[0]), (h[1] = -i[1]), (h[2] = -m), (h[3] = i[0]), (h[4] = i[1]), (h[5] = n);
                        } else f.enabled = !1;
                    }),
                        (d.prototype.setMaxForce = function (a) {
                            var b = this.equations[0];
                            (b.minForce = -a), (b.maxForce = a);
                        }),
                        (d.prototype.getMaxForce = function () {
                            return this.equations[0].maxForce;
                        });
                },
                { "../equations/Equation": 22, "../math/vec2": 30, "../utils/Utils": 57, "./Constraint": 14 },
            ],
            16: [
                function (a, b, c) {
                    function d(a, b, c) {
                        (c = c || {}),
                            e.call(this, a, b, e.GEAR, c),
                            (this.ratio = void 0 !== c.ratio ? c.ratio : 1),
                            (this.angle = void 0 !== c.angle ? c.angle : b.angle - this.ratio * a.angle),
                            (c.angle = this.angle),
                            (c.ratio = this.ratio),
                            (this.equations = [new f(a, b, c)]),
                            void 0 !== c.maxTorque && this.setMaxTorque(c.maxTorque);
                    }
                    var e = a("./Constraint"),
                        f = (a("../equations/Equation"), a("../equations/AngleLockEquation"));
                    a("../math/vec2"),
                        ((((b.exports = d).prototype = new e()).constructor = d).prototype.update = function () {
                            var a = this.equations[0];
                            a.ratio !== this.ratio && a.setRatio(this.ratio), (a.angle = this.angle);
                        }),
                        (d.prototype.setMaxTorque = function (a) {
                            this.equations[0].setMaxTorque(a);
                        }),
                        (d.prototype.getMaxTorque = function (a) {
                            return this.equations[0].maxForce;
                        });
                },
                { "../equations/AngleLockEquation": 20, "../equations/Equation": 22, "../math/vec2": 30, "./Constraint": 14 },
            ],
            17: [
                function (a, b, c) {
                    function d(a, b, c) {
                        (c = c || {}), e.call(this, a, b, e.LOCK, c);
                        var d = void 0 === c.maxForce ? Number.MAX_VALUE : c.maxForce,
                            h = (c.localAngleB, new g(a, b, -d, d)),
                            i = new g(a, b, -d, d),
                            j = new g(a, b, -d, d),
                            k = f.create(),
                            l = f.create(),
                            m = this;
                        (h.computeGq = function () {
                            return f.rotate(k, m.localOffsetB, a.angle), f.sub(l, b.position, a.position), f.sub(l, l, k), l[0];
                        }),
                            (i.computeGq = function () {
                                return f.rotate(k, m.localOffsetB, a.angle), f.sub(l, b.position, a.position), f.sub(l, l, k), l[1];
                            });
                        var n = f.create(),
                            o = f.create();
                        (j.computeGq = function () {
                            return f.rotate(n, m.localOffsetB, b.angle - m.localAngleB), f.scale(n, n, -1), f.sub(l, a.position, b.position), f.add(l, l, n), f.rotate(o, n, -Math.PI / 2), f.normalize(o, o), f.dot(l, o);
                        }),
                            (this.localOffsetB = f.create()),
                            c.localOffsetB ? f.copy(this.localOffsetB, c.localOffsetB) : (f.sub(this.localOffsetB, b.position, a.position), f.rotate(this.localOffsetB, this.localOffsetB, -a.angle)),
                            (this.localAngleB = 0),
                            "number" == typeof c.localAngleB ? (this.localAngleB = c.localAngleB) : (this.localAngleB = b.angle - a.angle),
                            this.equations.push(h, i, j),
                            this.setMaxForce(d);
                    }
                    var e = a("./Constraint"),
                        f = a("../math/vec2"),
                        g = a("../equations/Equation");
                    ((((b.exports = d).prototype = new e()).constructor = d).prototype.setMaxForce = function (a) {
                        for (var b = this.equations, c = 0; c < this.equations.length; c++) (b[c].maxForce = a), (b[c].minForce = -a);
                    }),
                        (d.prototype.getMaxForce = function () {
                            return this.equations[0].maxForce;
                        });
                    var h = f.create(),
                        i = f.create(),
                        j = f.create(),
                        k = f.fromValues(1, 0),
                        l = f.fromValues(0, 1);
                    d.prototype.update = function () {
                        var a = this.equations[0],
                            b = this.equations[1],
                            c = this.equations[2],
                            d = this.bodyA,
                            e = this.bodyB;
                        f.rotate(h, this.localOffsetB, d.angle),
                            f.rotate(i, this.localOffsetB, e.angle - this.localAngleB),
                            f.scale(i, i, -1),
                            f.rotate(j, i, Math.PI / 2),
                            f.normalize(j, j),
                            (a.G[0] = -1),
                            (a.G[1] = 0),
                            (a.G[2] = -f.crossLength(h, k)),
                            (a.G[3] = 1),
                            (b.G[0] = 0),
                            (b.G[1] = -1),
                            (b.G[2] = -f.crossLength(h, l)),
                            (b.G[4] = 1),
                            (c.G[0] = -j[0]),
                            (c.G[1] = -j[1]),
                            (c.G[3] = j[0]),
                            (c.G[4] = j[1]),
                            (c.G[5] = f.crossLength(i, j));
                    };
                },
                { "../equations/Equation": 22, "../math/vec2": 30, "./Constraint": 14 },
            ],
            18: [
                function (a, b, c) {
                    function d(a, b, c) {
                        (c = c || {}), e.call(this, a, b, e.PRISMATIC, c);
                        var d = h.fromValues(0, 0),
                            j = h.fromValues(1, 0),
                            k = h.fromValues(0, 0);
                        c.localAnchorA && h.copy(d, c.localAnchorA), c.localAxisA && h.copy(j, c.localAxisA), c.localAnchorB && h.copy(k, c.localAnchorB), (this.localAnchorA = d), (this.localAnchorB = k), (this.localAxisA = j);
                        var l = (this.maxForce = void 0 !== c.maxForce ? c.maxForce : Number.MAX_VALUE),
                            m = new g(a, b, -l, l),
                            n = new h.create(),
                            o = new h.create(),
                            p = new h.create(),
                            q = new h.create();
                        if (
                            ((m.computeGq = function () {
                                return h.dot(p, q);
                            }),
                            (m.updateJacobian = function () {
                                var c = this.G,
                                    e = a.position,
                                    f = b.position;
                                h.rotate(n, d, a.angle),
                                    h.rotate(o, k, b.angle),
                                    h.add(p, f, o),
                                    h.sub(p, p, e),
                                    h.sub(p, p, n),
                                    h.rotate(q, j, a.angle + Math.PI / 2),
                                    (c[0] = -q[0]),
                                    (c[1] = -q[1]),
                                    (c[2] = -h.crossLength(n, q) + h.crossLength(q, p)),
                                    (c[3] = q[0]),
                                    (c[4] = q[1]),
                                    (c[5] = h.crossLength(o, q));
                            }),
                            this.equations.push(m),
                            !c.disableRotationalLock)
                        ) {
                            var r = new i(a, b, -l, l);
                            this.equations.push(r);
                        }
                        (this.position = 0),
                            (this.velocity = 0),
                            (this.lowerLimitEnabled = void 0 !== c.lowerLimit),
                            (this.upperLimitEnabled = void 0 !== c.upperLimit),
                            (this.lowerLimit = void 0 !== c.lowerLimit ? c.lowerLimit : 0),
                            (this.upperLimit = void 0 !== c.upperLimit ? c.upperLimit : 1),
                            (this.upperLimitEquation = new f(a, b)),
                            (this.lowerLimitEquation = new f(a, b)),
                            (this.upperLimitEquation.minForce = this.lowerLimitEquation.minForce = 0),
                            (this.upperLimitEquation.maxForce = this.lowerLimitEquation.maxForce = l),
                            (this.motorEquation = new g(a, b)),
                            (this.motorEnabled = !1),
                            (this.motorSpeed = 0);
                        var s = this,
                            t = this.motorEquation;
                        t.computeGW,
                            (t.computeGq = function () {
                                return 0;
                            }),
                            (t.computeGW = function () {
                                var a = this.G,
                                    b = this.bodyA,
                                    c = this.bodyB,
                                    d = b.velocity,
                                    e = c.velocity,
                                    f = b.angularVelocity,
                                    g = c.angularVelocity;
                                return this.gmult(a, d, f, e, g) + s.motorSpeed;
                            });
                    }
                    var e = a("./Constraint"),
                        f = a("../equations/ContactEquation"),
                        g = a("../equations/Equation"),
                        h = a("../math/vec2"),
                        i = a("../equations/RotationalLockEquation");
                    ((b.exports = d).prototype = new e()).constructor = d;
                    var j = h.create(),
                        k = h.create(),
                        l = h.create(),
                        m = h.create(),
                        n = h.create(),
                        o = h.create();
                    (d.prototype.update = function () {
                        var a = this.equations,
                            b = a[0],
                            c = this.upperLimit,
                            d = this.lowerLimit,
                            e = this.upperLimitEquation,
                            f = this.lowerLimitEquation,
                            g = this.bodyA,
                            i = this.bodyB,
                            p = this.localAxisA,
                            q = this.localAnchorA,
                            r = this.localAnchorB;
                        b.updateJacobian(), h.rotate(j, p, g.angle), h.rotate(m, q, g.angle), h.add(k, m, g.position), h.rotate(n, r, i.angle), h.add(l, n, i.position);
                        var u,
                            s = (this.position = h.dot(l, j) - h.dot(k, j));
                        if (this.motorEnabled) {
                            var t = this.motorEquation.G;
                            (t[0] = j[0]), (t[1] = j[1]), (t[2] = h.crossLength(j, n)), (t[3] = -j[0]), (t[4] = -j[1]), (t[5] = -h.crossLength(j, m));
                        }
                        this.upperLimitEnabled && c < s
                            ? (h.scale(e.normalA, j, -1), h.sub(e.contactPointA, k, g.position), h.sub(e.contactPointB, l, i.position), h.scale(o, j, c), h.add(e.contactPointA, e.contactPointA, o), -1 === a.indexOf(e) && a.push(e))
                            : -1 !== (u = a.indexOf(e)) && a.splice(u, 1);
                        this.lowerLimitEnabled && s < d
                            ? (h.scale(f.normalA, j, 1), h.sub(f.contactPointA, k, g.position), h.sub(f.contactPointB, l, i.position), h.scale(o, j, d), h.sub(f.contactPointB, f.contactPointB, o), -1 === a.indexOf(f) && a.push(f))
                            : -1 !== (u = a.indexOf(f)) && a.splice(u, 1);
                    }),
                        (d.prototype.enableMotor = function () {
                            this.motorEnabled || (this.equations.push(this.motorEquation), (this.motorEnabled = !0));
                        }),
                        (d.prototype.disableMotor = function () {
                            if (this.motorEnabled) {
                                var a = this.equations.indexOf(this.motorEquation);
                                this.equations.splice(a, 1), (this.motorEnabled = !1);
                            }
                        }),
                        (d.prototype.setLimits = function (a, b) {
                            "number" == typeof a ? ((this.lowerLimit = a), (this.lowerLimitEnabled = !0)) : ((this.lowerLimit = a), (this.lowerLimitEnabled = !1)),
                                "number" == typeof b ? ((this.upperLimit = b), (this.upperLimitEnabled = !0)) : ((this.upperLimit = b), (this.upperLimitEnabled = !1));
                        });
                },
                { "../equations/ContactEquation": 21, "../equations/Equation": 22, "../equations/RotationalLockEquation": 24, "../math/vec2": 30, "./Constraint": 14 },
            ],
            19: [
                function (a, b, c) {
                    function d(a, b, c) {
                        (c = c || {}), e.call(this, a, b, e.REVOLUTE, c);
                        var d = (this.maxForce = void 0 !== c.maxForce ? c.maxForce : Number.MAX_VALUE);
                        (this.pivotA = i.create()),
                            (this.pivotB = i.create()),
                            c.worldPivot
                                ? (i.sub(this.pivotA, c.worldPivot, a.position), i.sub(this.pivotB, c.worldPivot, b.position), i.rotate(this.pivotA, this.pivotA, -a.angle), i.rotate(this.pivotB, this.pivotB, -b.angle))
                                : (i.copy(this.pivotA, c.localPivotA), i.copy(this.pivotB, c.localPivotB));
                        var o = (this.equations = [new f(a, b, -d, d), new f(a, b, -d, d)]),
                            p = o[0],
                            q = o[1],
                            r = this;
                        (p.computeGq = function () {
                            return i.rotate(j, r.pivotA, a.angle), i.rotate(k, r.pivotB, b.angle), i.add(n, b.position, k), i.sub(n, n, a.position), i.sub(n, n, j), i.dot(n, l);
                        }),
                            (q.computeGq = function () {
                                return i.rotate(j, r.pivotA, a.angle), i.rotate(k, r.pivotB, b.angle), i.add(n, b.position, k), i.sub(n, n, a.position), i.sub(n, n, j), i.dot(n, m);
                            }),
                            (q.minForce = p.minForce = -d),
                            (q.maxForce = p.maxForce = d),
                            (this.motorEquation = new g(a, b)),
                            (this.motorEnabled = !1),
                            (this.angle = 0),
                            (this.lowerLimitEnabled = !1),
                            (this.upperLimitEnabled = !1),
                            (this.lowerLimit = 0),
                            (this.upperLimit = 0),
                            (this.upperLimitEquation = new h(a, b)),
                            (this.lowerLimitEquation = new h(a, b)),
                            (this.upperLimitEquation.minForce = 0),
                            (this.lowerLimitEquation.maxForce = 0);
                    }
                    var e = a("./Constraint"),
                        f = a("../equations/Equation"),
                        g = a("../equations/RotationalVelocityEquation"),
                        h = a("../equations/RotationalLockEquation"),
                        i = a("../math/vec2");
                    b.exports = d;
                    var j = i.create(),
                        k = i.create(),
                        l = i.fromValues(1, 0),
                        m = i.fromValues(0, 1),
                        n = i.create();
                    (((d.prototype = new e()).constructor = d).prototype.setLimits = function (a, b) {
                        "number" == typeof a ? ((this.lowerLimit = a), (this.lowerLimitEnabled = !0)) : ((this.lowerLimit = a), (this.lowerLimitEnabled = !1)),
                            "number" == typeof b ? ((this.upperLimit = b), (this.upperLimitEnabled = !0)) : ((this.upperLimit = b), (this.upperLimitEnabled = !1));
                    }),
                        (d.prototype.update = function () {
                            var r,
                                a = this.bodyA,
                                b = this.bodyB,
                                c = this.pivotA,
                                d = this.pivotB,
                                e = this.equations,
                                f = (e[0], e[1], e[0]),
                                g = e[1],
                                h = this.upperLimit,
                                n = this.lowerLimit,
                                o = this.upperLimitEquation,
                                p = this.lowerLimitEquation,
                                q = (this.angle = b.angle - a.angle);
                            this.upperLimitEnabled && h < q ? ((o.angle = h), -1 === e.indexOf(o) && e.push(o)) : -1 !== (r = e.indexOf(o)) && e.splice(r, 1);
                            this.lowerLimitEnabled && q < n ? ((p.angle = n), -1 === e.indexOf(p) && e.push(p)) : -1 !== (r = e.indexOf(p)) && e.splice(r, 1);
                            i.rotate(j, c, a.angle),
                                i.rotate(k, d, b.angle),
                                (f.G[0] = -1),
                                (f.G[1] = 0),
                                (f.G[2] = -i.crossLength(j, l)),
                                (f.G[3] = 1),
                                (f.G[4] = 0),
                                (f.G[5] = i.crossLength(k, l)),
                                (g.G[0] = 0),
                                (g.G[1] = -1),
                                (g.G[2] = -i.crossLength(j, m)),
                                (g.G[3] = 0),
                                (g.G[4] = 1),
                                (g.G[5] = i.crossLength(k, m));
                        }),
                        (d.prototype.enableMotor = function () {
                            this.motorEnabled || (this.equations.push(this.motorEquation), (this.motorEnabled = !0));
                        }),
                        (d.prototype.disableMotor = function () {
                            if (this.motorEnabled) {
                                var a = this.equations.indexOf(this.motorEquation);
                                this.equations.splice(a, 1), (this.motorEnabled = !1);
                            }
                        }),
                        (d.prototype.motorIsEnabled = function () {
                            return !!this.motorEnabled;
                        }),
                        (d.prototype.setMotorSpeed = function (a) {
                            if (this.motorEnabled) {
                                var b = this.equations.indexOf(this.motorEquation);
                                this.equations[b].relativeVelocity = a;
                            }
                        }),
                        (d.prototype.getMotorSpeed = function () {
                            return !!this.motorEnabled && this.motorEquation.relativeVelocity;
                        });
                },
                { "../equations/Equation": 22, "../equations/RotationalLockEquation": 24, "../equations/RotationalVelocityEquation": 25, "../math/vec2": 30, "./Constraint": 14 },
            ],
            20: [
                function (a, b, c) {
                    function d(a, b, c) {
                        (c = c || {}), e.call(this, a, b, -Number.MAX_VALUE, Number.MAX_VALUE), (this.angle = c.angle || 0), (this.ratio = "number" == typeof c.ratio ? c.ratio : 1), this.setRatio(this.ratio);
                    }
                    var e = a("./Equation");
                    a("../math/vec2"),
                        ((((b.exports = d).prototype = new e()).constructor = d).prototype.computeGq = function () {
                            return this.ratio * this.bodyA.angle - this.bodyB.angle + this.angle;
                        }),
                        (d.prototype.setRatio = function (a) {
                            var b = this.G;
                            (b[2] = a), (b[5] = -1), (this.ratio = a);
                        }),
                        (d.prototype.setMaxTorque = function (a) {
                            (this.maxForce = a), (this.minForce = -a);
                        });
                },
                { "../math/vec2": 30, "./Equation": 22 },
            ],
            21: [
                function (a, b, c) {
                    function d(a, b) {
                        e.call(this, a, b, 0, Number.MAX_VALUE),
                            (this.contactPointA = f.create()),
                            (this.penetrationVec = f.create()),
                            (this.contactPointB = f.create()),
                            (this.normalA = f.create()),
                            (this.restitution = 0),
                            (this.firstImpact = !1),
                            (this.shapeA = null),
                            (this.shapeB = null);
                    }
                    var e = a("./Equation"),
                        f = a("../math/vec2");
                    (((b.exports = d).prototype = new e()).constructor = d).prototype.computeB = function (a, b, c) {
                        var p,
                            q,
                            d = this.bodyA,
                            e = this.bodyB,
                            g = this.contactPointA,
                            h = this.contactPointB,
                            i = d.position,
                            j = e.position,
                            k = this.penetrationVec,
                            l = this.normalA,
                            m = this.G,
                            n = f.crossLength(g, l),
                            o = f.crossLength(h, l);
                        return (
                            (m[0] = -l[0]),
                            (m[1] = -l[1]),
                            (m[2] = -n),
                            (m[3] = l[0]),
                            (m[4] = l[1]),
                            (m[5] = o),
                            f.add(k, j, h),
                            f.sub(k, k, i),
                            f.sub(k, k, g),
                            (p = this.firstImpact && 0 !== this.restitution ? ((q = 0), (1 / b) * (1 + this.restitution) * this.computeGW()) : ((q = f.dot(l, k) + this.offset), this.computeGW())),
                            -q * a - p * b - c * this.computeGiMf()
                        );
                    };
                },
                { "../math/vec2": 30, "./Equation": 22 },
            ],
            22: [
                function (a, b, c) {
                    function d(a, b, c, e) {
                        (this.minForce = void 0 === c ? -Number.MAX_VALUE : c),
                            (this.maxForce = void 0 === e ? Number.MAX_VALUE : e),
                            (this.bodyA = a),
                            (this.bodyB = b),
                            (this.stiffness = d.DEFAULT_STIFFNESS),
                            (this.relaxation = d.DEFAULT_RELAXATION),
                            (this.G = new f.ARRAY_TYPE(6));
                        for (var g = 0; g < 6; g++) this.G[g] = 0;
                        (this.offset = 0), (this.a = 0), (this.b = 0), (this.epsilon = 0), (this.timeStep = 1 / 60), (this.needsUpdate = !0), (this.multiplier = 0), (this.relativeVelocity = 0), (this.enabled = !0);
                    }
                    b.exports = d;
                    var e = a("../math/vec2"),
                        f = a("../utils/Utils");
                    a("../objects/Body"),
                        ((d.prototype.constructor = d).DEFAULT_STIFFNESS = 1e6),
                        (d.DEFAULT_RELAXATION = 4),
                        (d.prototype.update = function () {
                            var a = this.stiffness,
                                b = this.relaxation,
                                c = this.timeStep;
                            (this.a = 4 / (c * (1 + 4 * b))), (this.b = (4 * b) / (1 + 4 * b)), (this.epsilon = 4 / (c * c * a * (1 + 4 * b))), (this.needsUpdate = !1);
                        }),
                        (d.prototype.gmult = function (a, b, c, d, e) {
                            return a[0] * b[0] + a[1] * b[1] + a[2] * c + a[3] * d[0] + a[4] * d[1] + a[5] * e;
                        }),
                        (d.prototype.computeB = function (a, b, c) {
                            var d = this.computeGW();
                            return -this.computeGq() * a - d * b - this.computeGiMf() * c;
                        });
                    var g = e.create(),
                        h = e.create();
                    (d.prototype.computeGq = function () {
                        var a = this.G,
                            b = this.bodyA,
                            c = this.bodyB,
                            d = (b.position, c.position, b.angle),
                            e = c.angle;
                        return this.gmult(a, g, d, h, e) + this.offset;
                    }),
                        (d.prototype.computeGW = function () {
                            var a = this.G,
                                b = this.bodyA,
                                c = this.bodyB,
                                d = b.velocity,
                                e = c.velocity,
                                f = b.angularVelocity,
                                g = c.angularVelocity;
                            return this.gmult(a, d, f, e, g) + this.relativeVelocity;
                        }),
                        (d.prototype.computeGWlambda = function () {
                            var a = this.G,
                                b = this.bodyA,
                                c = this.bodyB,
                                d = b.vlambda,
                                e = c.vlambda,
                                f = b.wlambda,
                                g = c.wlambda;
                            return this.gmult(a, d, f, e, g);
                        });
                    var i = e.create(),
                        j = e.create();
                    (d.prototype.computeGiMf = function () {
                        var a = this.bodyA,
                            b = this.bodyB,
                            c = a.force,
                            d = a.angularForce,
                            f = b.force,
                            g = b.angularForce,
                            h = a.invMassSolve,
                            k = b.invMassSolve,
                            l = a.invInertiaSolve,
                            m = b.invInertiaSolve,
                            n = this.G;
                        return e.scale(i, c, h), e.multiply(i, a.massMultiplier, i), e.scale(j, f, k), e.multiply(j, b.massMultiplier, j), this.gmult(n, i, d * l, j, g * m);
                    }),
                        (d.prototype.computeGiMGt = function () {
                            var a = this.bodyA,
                                b = this.bodyB,
                                c = a.invMassSolve,
                                d = b.invMassSolve,
                                e = a.invInertiaSolve,
                                f = b.invInertiaSolve,
                                g = this.G;
                            return g[0] * g[0] * c * a.massMultiplier[0] + g[1] * g[1] * c * a.massMultiplier[1] + g[2] * g[2] * e + g[3] * g[3] * d * b.massMultiplier[0] + g[4] * g[4] * d * b.massMultiplier[1] + g[5] * g[5] * f;
                        });
                    var k = e.create(),
                        l = e.create(),
                        m = e.create();
                    e.create(),
                        e.create(),
                        e.create(),
                        (d.prototype.addToWlambda = function (a) {
                            var b = this.bodyA,
                                c = this.bodyB,
                                d = k,
                                f = l,
                                g = m,
                                h = b.invMassSolve,
                                i = c.invMassSolve,
                                j = b.invInertiaSolve,
                                n = c.invInertiaSolve,
                                o = this.G;
                            (f[0] = o[0]),
                                (f[1] = o[1]),
                                (g[0] = o[3]),
                                (g[1] = o[4]),
                                e.scale(d, f, h * a),
                                e.multiply(d, d, b.massMultiplier),
                                e.add(b.vlambda, b.vlambda, d),
                                (b.wlambda += j * o[2] * a),
                                e.scale(d, g, i * a),
                                e.multiply(d, d, c.massMultiplier),
                                e.add(c.vlambda, c.vlambda, d),
                                (c.wlambda += n * o[5] * a);
                        }),
                        (d.prototype.computeInvC = function (a) {
                            return 1 / (this.computeGiMGt() + a);
                        });
                },
                { "../math/vec2": 30, "../objects/Body": 31, "../utils/Utils": 57 },
            ],
            23: [
                function (a, b, c) {
                    function d(a, b, c) {
                        f.call(this, a, b, -c, c),
                            (this.contactPointA = e.create()),
                            (this.contactPointB = e.create()),
                            (this.t = e.create()),
                            (this.contactEquations = []),
                            (this.shapeA = null),
                            (this.shapeB = null),
                            (this.frictionCoefficient = 0.3);
                    }
                    var e = a("../math/vec2"),
                        f = a("./Equation");
                    a("../utils/Utils"),
                        ((((b.exports = d).prototype = new f()).constructor = d).prototype.setSlipForce = function (a) {
                            (this.maxForce = a), (this.minForce = -a);
                        }),
                        (d.prototype.getSlipForce = function () {
                            return this.maxForce;
                        }),
                        (d.prototype.computeB = function (a, b, c) {
                            var d = (this.bodyA, this.bodyB, this.contactPointA),
                                f = this.contactPointB,
                                g = this.t,
                                h = this.G;
                            return (h[0] = -g[0]), (h[1] = -g[1]), (h[2] = -e.crossLength(d, g)), (h[3] = g[0]), (h[4] = g[1]), (h[5] = e.crossLength(f, g)), -this.computeGW() * b - c * this.computeGiMf();
                        });
                },
                { "../math/vec2": 30, "../utils/Utils": 57, "./Equation": 22 },
            ],
            24: [
                function (a, b, c) {
                    function d(a, b, c) {
                        (c = c || {}), e.call(this, a, b, -Number.MAX_VALUE, Number.MAX_VALUE), (this.angle = c.angle || 0);
                        var d = this.G;
                        (d[2] = 1), (d[5] = -1);
                    }
                    var e = a("./Equation"),
                        f = a("../math/vec2");
                    ((b.exports = d).prototype = new e()).constructor = d;
                    var g = f.create(),
                        h = f.create(),
                        i = f.fromValues(1, 0),
                        j = f.fromValues(0, 1);
                    d.prototype.computeGq = function () {
                        return f.rotate(g, i, this.bodyA.angle + this.angle), f.rotate(h, j, this.bodyB.angle), f.dot(g, h);
                    };
                },
                { "../math/vec2": 30, "./Equation": 22 },
            ],
            25: [
                function (a, b, c) {
                    function d(a, b) {
                        e.call(this, a, b, -Number.MAX_VALUE, Number.MAX_VALUE), (this.relativeVelocity = 1), (this.ratio = 1);
                    }
                    var e = a("./Equation");
                    a("../math/vec2"),
                        ((((b.exports = d).prototype = new e()).constructor = d).prototype.computeB = function (a, b, c) {
                            var d = this.G;
                            (d[2] = -1), (d[5] = this.ratio);
                            var e = this.computeGiMf();
                            return -this.computeGW() * b - c * e;
                        });
                },
                { "../math/vec2": 30, "./Equation": 22 },
            ],
            26: [
                function (a, b, c) {
                    var d = function () {};
                    (b.exports = d).prototype = {
                        constructor: d,
                        on: function (a, b, c) {
                            (b.context = c || this), void 0 === this._listeners && (this._listeners = {});
                            var d = this._listeners;
                            return void 0 === d[a] && (d[a] = []), -1 === d[a].indexOf(b) && d[a].push(b), this;
                        },
                        has: function (a, b) {
                            if (void 0 === this._listeners) return !1;
                            var c = this._listeners;
                            if (b) {
                                if (void 0 !== c[a] && -1 !== c[a].indexOf(b)) return !0;
                            } else if (void 0 !== c[a]) return !0;
                            return !1;
                        },
                        off: function (a, b) {
                            if (void 0 === this._listeners) return this;
                            var c = this._listeners,
                                d = c[a].indexOf(b);
                            return -1 !== d && c[a].splice(d, 1), this;
                        },
                        emit: function (a) {
                            if (void 0 === this._listeners) return this;
                            var c = this._listeners[a.type];
                            if (void 0 !== c) {
                                a.target = this;
                                for (var d = 0, e = c.length; d < e; d++) {
                                    var f = c[d];
                                    f.call(f.context, a);
                                }
                            }
                            return this;
                        },
                    };
                },
                {},
            ],
            27: [
                function (a, b, c) {
                    function d(a, b, c) {
                        if (((c = c || {}), !(a instanceof e && b instanceof e))) throw new Error("First two arguments must be Material instances.");
                        (this.id = d.idCounter++),
                            (this.materialA = a),
                            (this.materialB = b),
                            (this.friction = void 0 !== c.friction ? Number(c.friction) : 0.3),
                            (this.restitution = void 0 !== c.restitution ? Number(c.restitution) : 0),
                            (this.stiffness = void 0 !== c.stiffness ? Number(c.stiffness) : f.DEFAULT_STIFFNESS),
                            (this.relaxation = void 0 !== c.relaxation ? Number(c.relaxation) : f.DEFAULT_RELAXATION),
                            (this.frictionStiffness = void 0 !== c.frictionStiffness ? Number(c.frictionStiffness) : f.DEFAULT_STIFFNESS),
                            (this.frictionRelaxation = void 0 !== c.frictionRelaxation ? Number(c.frictionRelaxation) : f.DEFAULT_RELAXATION),
                            (this.surfaceVelocity = void 0 !== c.surfaceVelocity ? Number(c.surfaceVelocity) : 0),
                            (this.contactSkinSize = 0.005);
                    }
                    var e = a("./Material"),
                        f = a("../equations/Equation");
                    (b.exports = d).idCounter = 0;
                },
                { "../equations/Equation": 22, "./Material": 28 },
            ],
            28: [
                function (a, b, c) {
                    function d(a) {
                        this.id = a || d.idCounter++;
                    }
                    (b.exports = d).idCounter = 0;
                },
                {},
            ],
            29: [
                function (a, b, c) {
                    var d = {
                        GetArea: function (a) {
                            if (a.length < 6) return 0;
                            for (var b = a.length - 2, c = 0, d = 0; d < b; d += 2) c += (a[d + 2] - a[d]) * (a[d + 1] + a[d + 3]);
                            return 0.5 * -(c += (a[0] - a[b]) * (a[b + 1] + a[1]));
                        },
                        Triangulate: function (a) {
                            var b = a.length >> 1;
                            if (b < 3) return [];
                            for (var c = [], e = [], f = 0; f < b; f++) e.push(f);
                            f = 0;
                            for (var g = b; 3 < g; ) {
                                var h = e[(f + 0) % g],
                                    i = e[(f + 1) % g],
                                    j = e[(f + 2) % g],
                                    k = a[2 * h],
                                    l = a[2 * h + 1],
                                    m = a[2 * i],
                                    n = a[2 * i + 1],
                                    o = a[2 * j],
                                    p = a[2 * j + 1],
                                    q = !1;
                                if (d._convex(k, l, m, n, o, p)) {
                                    q = !0;
                                    for (var r = 0; r < g; r++) {
                                        var s = e[r];
                                        if (s != h && s != i && s != j && d._PointInTriangle(a[2 * s], a[2 * s + 1], k, l, m, n, o, p)) {
                                            q = !1;
                                            break;
                                        }
                                    }
                                }
                                if (q) c.push(h, i, j), e.splice((f + 1) % g, 1), g--, (f = 0);
                                else if (f++ > 3 * g) break;
                            }
                            return c.push(e[0], e[1], e[2]), c;
                        },
                        _PointInTriangle: function (a, b, c, d, e, f, g, h) {
                            var i = g - c,
                                j = h - d,
                                k = e - c,
                                l = f - d,
                                m = a - c,
                                n = b - d,
                                o = i * i + j * j,
                                p = i * k + j * l,
                                q = i * m + j * n,
                                r = k * k + l * l,
                                s = k * m + l * n,
                                t = 1 / (o * r - p * p),
                                u = (r * q - p * s) * t,
                                v = (o * s - p * q) * t;
                            return 0 <= u && 0 <= v && u + v < 1;
                        },
                        _convex: function (a, b, c, d, e, f) {
                            return 0 <= (b - d) * (e - c) + (c - a) * (f - d);
                        },
                    };
                    b.exports = d;
                },
                {},
            ],
            30: [
                function (a, b, c) {
                    var d = (b.exports = {}),
                        e = a("../utils/Utils");
                    (d.crossLength = function (a, b) {
                        return a[0] * b[1] - a[1] * b[0];
                    }),
                        (d.crossVZ = function (a, b, c) {
                            return d.rotate(a, b, -Math.PI / 2), d.scale(a, a, c), a;
                        }),
                        (d.crossZV = function (a, b, c) {
                            return d.rotate(a, c, Math.PI / 2), d.scale(a, a, b), a;
                        }),
                        (d.rotate = function (a, b, c) {
                            if (0 !== c) {
                                var d = Math.cos(c),
                                    e = Math.sin(c),
                                    f = b[0],
                                    g = b[1];
                                (a[0] = d * f - e * g), (a[1] = e * f + d * g);
                            } else (a[0] = b[0]), (a[1] = b[1]);
                        }),
                        (d.rotate90cw = function (a, b) {
                            var c = b[0],
                                d = b[1];
                            (a[0] = d), (a[1] = -c);
                        }),
                        (d.toLocalFrame = function (a, b, c, e) {
                            d.copy(a, b), d.sub(a, a, c), d.rotate(a, a, -e);
                        }),
                        (d.toGlobalFrame = function (a, b, c, e) {
                            d.copy(a, b), d.rotate(a, a, e), d.add(a, a, c);
                        }),
                        (d.vectorToLocalFrame = function (a, b, c) {
                            d.rotate(a, b, -c);
                        }),
                        (d.vectorToGlobalFrame = function (a, b, c) {
                            d.rotate(a, b, c);
                        }),
                        (d.centroid = function (a, b, c, e) {
                            return d.add(a, b, c), d.add(a, a, e), d.scale(a, a, 1 / 3), a;
                        }),
                        (d.create = function () {
                            var a = new e.ARRAY_TYPE(2);
                            return (a[0] = 0), (a[1] = 0), a;
                        }),
                        (d.clone = function (a) {
                            var b = new e.ARRAY_TYPE(2);
                            return (b[0] = a[0]), (b[1] = a[1]), b;
                        }),
                        (d.fromValues = function (a, b) {
                            var c = new e.ARRAY_TYPE(2);
                            return (c[0] = a), (c[1] = b), c;
                        }),
                        (d.copy = function (a, b) {
                            return (a[0] = b[0]), (a[1] = b[1]), a;
                        }),
                        (d.set = function (a, b, c) {
                            return (a[0] = b), (a[1] = c), a;
                        }),
                        (d.add = function (a, b, c) {
                            return (a[0] = b[0] + c[0]), (a[1] = b[1] + c[1]), a;
                        }),
                        (d.subtract = function (a, b, c) {
                            return (a[0] = b[0] - c[0]), (a[1] = b[1] - c[1]), a;
                        }),
                        (d.sub = d.subtract),
                        (d.multiply = function (a, b, c) {
                            return (a[0] = b[0] * c[0]), (a[1] = b[1] * c[1]), a;
                        }),
                        (d.mul = d.multiply),
                        (d.divide = function (a, b, c) {
                            return (a[0] = b[0] / c[0]), (a[1] = b[1] / c[1]), a;
                        }),
                        (d.div = d.divide),
                        (d.scale = function (a, b, c) {
                            return (a[0] = b[0] * c), (a[1] = b[1] * c), a;
                        }),
                        (d.distance = function (a, b) {
                            var c = b[0] - a[0],
                                d = b[1] - a[1];
                            return Math.sqrt(c * c + d * d);
                        }),
                        (d.dist = d.distance),
                        (d.squaredDistance = function (a, b) {
                            var c = b[0] - a[0],
                                d = b[1] - a[1];
                            return c * c + d * d;
                        }),
                        (d.sqrDist = d.squaredDistance),
                        (d.length = function (a) {
                            var b = a[0],
                                c = a[1];
                            return Math.sqrt(b * b + c * c);
                        }),
                        (d.len = d.length),
                        (d.squaredLength = function (a) {
                            var b = a[0],
                                c = a[1];
                            return b * b + c * c;
                        }),
                        (d.sqrLen = d.squaredLength),
                        (d.negate = function (a, b) {
                            return (a[0] = -b[0]), (a[1] = -b[1]), a;
                        }),
                        (d.normalize = function (a, b) {
                            var c = b[0],
                                d = b[1],
                                e = c * c + d * d;
                            return 0 < e && ((e = 1 / Math.sqrt(e)), (a[0] = b[0] * e), (a[1] = b[1] * e)), a;
                        }),
                        (d.dot = function (a, b) {
                            return a[0] * b[0] + a[1] * b[1];
                        }),
                        (d.str = function (a) {
                            return "vec2(" + a[0] + ", " + a[1] + ")";
                        }),
                        (d.lerp = function (a, b, c, d) {
                            var e = b[0],
                                f = b[1];
                            return (a[0] = e + d * (c[0] - e)), (a[1] = f + d * (c[1] - f)), a;
                        }),
                        (d.reflect = function (a, b, c) {
                            var d = b[0] * c[0] + b[1] * c[1];
                            (a[0] = b[0] - 2 * c[0] * d), (a[1] = b[1] - 2 * c[1] * d);
                        }),
                        (d.getLineSegmentsIntersection = function (a, b, c, e, f) {
                            var g = d.getLineSegmentsIntersectionFraction(b, c, e, f);
                            return !(g < 0 || ((a[0] = b[0] + g * (c[0] - b[0])), (a[1] = b[1] + g * (c[1] - b[1])), 0));
                        }),
                        (d.getLineSegmentsIntersectionFraction = function (a, b, c, d) {
                            var e,
                                f,
                                g = b[0] - a[0],
                                h = b[1] - a[1],
                                i = d[0] - c[0],
                                j = d[1] - c[1];
                            return (e = (-h * (a[0] - c[0]) + g * (a[1] - c[1])) / (-i * h + g * j)), (f = (i * (a[1] - c[1]) - j * (a[0] - c[0])) / (-i * h + g * j)), 0 <= e && e <= 1 && 0 <= f && f <= 1 ? f : -1;
                        });
                },
                { "../utils/Utils": 57 },
            ],
            31: [
                function (a, b, c) {
                    function d(a) {
                        (a = a || {}),
                            k.call(this),
                            (this.id = a.id || ++d._idCounter),
                            (this.world = null),
                            (this.shapes = []),
                            (this.mass = a.mass || 0),
                            (this.invMass = 0),
                            (this.inertia = 0),
                            (this.invInertia = 0),
                            (this.invMassSolve = 0),
                            (this.invInertiaSolve = 0),
                            (this.fixedRotation = !!a.fixedRotation),
                            (this.fixedX = !!a.fixedX),
                            (this.fixedY = !!a.fixedY),
                            (this.massMultiplier = e.create()),
                            (this.position = e.fromValues(0, 0)),
                            a.position && e.copy(this.position, a.position),
                            (this.interpolatedPosition = e.fromValues(0, 0)),
                            (this.interpolatedAngle = 0),
                            (this.previousPosition = e.fromValues(0, 0)),
                            (this.previousAngle = 0),
                            (this.velocity = e.fromValues(0, 0)),
                            a.velocity && e.copy(this.velocity, a.velocity),
                            (this.vlambda = e.fromValues(0, 0)),
                            (this.wlambda = 0),
                            (this.angle = a.angle || 0),
                            (this.angularVelocity = a.angularVelocity || 0),
                            (this.force = e.create()),
                            a.force && e.copy(this.force, a.force),
                            (this.angularForce = a.angularForce || 0),
                            (this.damping = "number" == typeof a.damping ? a.damping : 0.1),
                            (this.angularDamping = "number" == typeof a.angularDamping ? a.angularDamping : 0.1),
                            (this.type = d.STATIC),
                            void 0 !== a.type ? (this.type = a.type) : a.mass ? (this.type = d.DYNAMIC) : (this.type = d.STATIC),
                            (this.boundingRadius = 0),
                            (this.aabb = new j()),
                            (this.aabbNeedsUpdate = !0),
                            (this.allowSleep = void 0 === a.allowSleep || a.allowSleep),
                            (this.wantsToSleep = !1),
                            (this.sleepState = d.AWAKE),
                            (this.sleepSpeedLimit = void 0 !== a.sleepSpeedLimit ? a.sleepSpeedLimit : 0.2),
                            (this.sleepTimeLimit = void 0 !== a.sleepTimeLimit ? a.sleepTimeLimit : 1),
                            (this.gravityScale = void 0 !== a.gravityScale ? a.gravityScale : 1),
                            (this.collisionResponse = void 0 === a.collisionResponse || a.collisionResponse),
                            (this.idleTime = 0),
                            (this.timeLastSleepy = 0),
                            (this.ccdSpeedThreshold = void 0 !== a.ccdSpeedThreshold ? a.ccdSpeedThreshold : -1),
                            (this.ccdIterations = void 0 !== a.ccdIterations ? a.ccdIterations : 10),
                            (this.concavePath = null),
                            (this._wakeUpAfterNarrowphase = !1),
                            this.updateMassProperties();
                    }
                    var e = a("../math/vec2"),
                        f = a("poly-decomp"),
                        g = a("../shapes/Convex"),
                        h = a("../collision/RaycastResult"),
                        i = a("../collision/Ray"),
                        j = a("../collision/AABB"),
                        k = a("../events/EventEmitter");
                    ((((b.exports = d).prototype = new k()).constructor = d)._idCounter = 0),
                        (d.prototype.updateSolveMassProperties = function () {
                            this.sleepState === d.SLEEPING || this.type === d.KINEMATIC ? ((this.invMassSolve = 0), (this.invInertiaSolve = 0)) : ((this.invMassSolve = this.invMass), (this.invInertiaSolve = this.invInertia));
                        }),
                        (d.prototype.setDensity = function (a) {
                            var b = this.getArea();
                            (this.mass = b * a), this.updateMassProperties();
                        }),
                        (d.prototype.getArea = function () {
                            for (var a = 0, b = 0; b < this.shapes.length; b++) a += this.shapes[b].area;
                            return a;
                        }),
                        (d.prototype.getAABB = function () {
                            return this.aabbNeedsUpdate && this.updateAABB(), this.aabb;
                        });
                    var l = new j(),
                        m = e.create();
                    (d.prototype.updateAABB = function () {
                        for (var a = this.shapes, b = a.length, c = m, d = this.angle, f = 0; f !== b; f++) {
                            var g = a[f],
                                h = g.angle + d;
                            e.rotate(c, g.position, d), e.add(c, c, this.position), g.computeAABB(l, c, h), 0 === f ? this.aabb.copy(l) : this.aabb.extend(l);
                        }
                        this.aabbNeedsUpdate = !1;
                    }),
                        (d.prototype.updateBoundingRadius = function () {
                            for (var a = this.shapes, b = a.length, c = 0, d = 0; d !== b; d++) {
                                var f = a[d],
                                    g = e.length(f.position),
                                    h = f.boundingRadius;
                                c < g + h && (c = g + h);
                            }
                            this.boundingRadius = c;
                        }),
                        (d.prototype.addShape = function (a, b, c) {
                            if (a.body) throw new Error("A shape can only be added to one body.");
                            (a.body = this), b ? e.copy(a.position, b) : e.set(a.position, 0, 0), (a.angle = c || 0), this.shapes.push(a), this.updateMassProperties(), this.updateBoundingRadius(), (this.aabbNeedsUpdate = !0);
                        }),
                        (d.prototype.removeShape = function (a) {
                            var b = this.shapes.indexOf(a);
                            return -1 !== b && (this.shapes.splice(b, 1), (this.aabbNeedsUpdate = !0), !(a.body = null));
                        }),
                        (d.prototype.updateMassProperties = function () {
                            if (this.type === d.STATIC || this.type === d.KINEMATIC) (this.mass = Number.MAX_VALUE), (this.invMass = 0), (this.inertia = Number.MAX_VALUE), (this.invInertia = 0);
                            else {
                                var a = this.shapes,
                                    b = a.length,
                                    c = this.mass / b,
                                    f = 0;
                                if (this.fixedRotation) (this.inertia = Number.MAX_VALUE), (this.invInertia = 0);
                                else {
                                    for (var g = 0; g < b; g++) {
                                        var h = a[g],
                                            i = e.squaredLength(h.position);
                                        f += h.computeMomentOfInertia(c) + c * i;
                                    }
                                    (this.inertia = f), (this.invInertia = 0 < f ? 1 / f : 0);
                                }
                                (this.invMass = 1 / this.mass), e.set(this.massMultiplier, this.fixedX ? 0 : 1, this.fixedY ? 0 : 1);
                            }
                        }),
                        e.create(),
                        (d.prototype.applyForce = function (a, b) {
                            if ((e.add(this.force, this.force, a), b)) {
                                var c = e.crossLength(b, a);
                                this.angularForce += c;
                            }
                        });
                    var n = e.create(),
                        o = e.create(),
                        p = e.create();
                    d.prototype.applyForceLocal = function (a, b) {
                        b = b || p;
                        var c = n,
                            d = o;
                        this.vectorToWorldFrame(c, a), this.vectorToWorldFrame(d, b), this.applyForce(c, d);
                    };
                    var q = e.create();
                    d.prototype.applyImpulse = function (a, b) {
                        if (this.type === d.DYNAMIC) {
                            var c = q;
                            if ((e.scale(c, a, this.invMass), e.multiply(c, this.massMultiplier, c), e.add(this.velocity, c, this.velocity), b)) {
                                var f = e.crossLength(b, a);
                                (f *= this.invInertia), (this.angularVelocity += f);
                            }
                        }
                    };
                    var r = e.create(),
                        s = e.create(),
                        t = e.create();
                    (d.prototype.applyImpulseLocal = function (a, b) {
                        b = b || t;
                        var c = r,
                            d = s;
                        this.vectorToWorldFrame(c, a), this.vectorToWorldFrame(d, b), this.applyImpulse(c, d);
                    }),
                        (d.prototype.toLocalFrame = function (a, b) {
                            e.toLocalFrame(a, b, this.position, this.angle);
                        }),
                        (d.prototype.toWorldFrame = function (a, b) {
                            e.toGlobalFrame(a, b, this.position, this.angle);
                        }),
                        (d.prototype.vectorToLocalFrame = function (a, b) {
                            e.vectorToLocalFrame(a, b, this.angle);
                        }),
                        (d.prototype.vectorToWorldFrame = function (a, b) {
                            e.vectorToGlobalFrame(a, b, this.angle);
                        }),
                        (d.prototype.fromPolygon = function (a, b) {
                            b = b || {};
                            for (var c = this.shapes.length; 0 <= c; --c) this.removeShape(this.shapes[c]);
                            var i,
                                d = new f.Polygon();
                            if (((d.vertices = a), d.makeCCW(), "number" == typeof b.removeCollinearPoints && d.removeCollinearPoints(b.removeCollinearPoints), void 0 === b.skipSimpleCheck && !d.isSimple())) return !1;
                            this.concavePath = d.vertices.slice(0);
                            for (c = 0; c < this.concavePath.length; c++) {
                                var h = [0, 0];
                                e.copy(h, this.concavePath[c]), (this.concavePath[c] = h);
                            }
                            i = b.optimalDecomp ? d.decomp() : d.quickDecomp();
                            var j = e.create();
                            for (c = 0; c !== i.length; c++) {
                                for (var k = new g({ vertices: i[c].vertices }), l = 0; l !== k.vertices.length; l++) {
                                    h = k.vertices[l];
                                    e.sub(h, h, k.centerOfMass);
                                }
                                e.scale(j, k.centerOfMass, 1), k.updateTriangles(), k.updateCenterOfMass(), k.updateBoundingRadius(), this.addShape(k, j);
                            }
                            return this.adjustCenterOfMass(), (this.aabbNeedsUpdate = !0);
                        });
                    var u = (e.fromValues(0, 0), e.fromValues(0, 0)),
                        v = e.fromValues(0, 0),
                        w = e.fromValues(0, 0);
                    (d.prototype.adjustCenterOfMass = function () {
                        var a = u,
                            b = v,
                            c = w,
                            d = 0;
                        e.set(b, 0, 0);
                        for (var f = 0; f !== this.shapes.length; f++) {
                            var g = this.shapes[f];
                            e.scale(a, g.position, g.area), e.add(b, b, a), (d += g.area);
                        }
                        e.scale(c, b, 1 / d);
                        for (f = 0; f !== this.shapes.length; f++) {
                            g = this.shapes[f];
                            e.sub(g.position, g.position, c);
                        }
                        e.add(this.position, this.position, c);
                        for (f = 0; this.concavePath && f < this.concavePath.length; f++) e.sub(this.concavePath[f], this.concavePath[f], c);
                        this.updateMassProperties(), this.updateBoundingRadius();
                    }),
                        (d.prototype.setZeroForce = function () {
                            e.set(this.force, 0, 0), (this.angularForce = 0);
                        }),
                        (d.prototype.resetConstraintVelocity = function () {
                            var b = this.vlambda;
                            e.set(b, 0, 0), (this.wlambda = 0);
                        }),
                        (d.prototype.addConstraintVelocity = function () {
                            var a = this,
                                b = a.velocity;
                            e.add(b, b, a.vlambda), (a.angularVelocity += a.wlambda);
                        }),
                        (d.prototype.applyDamping = function (a) {
                            if (this.type === d.DYNAMIC) {
                                var b = this.velocity;
                                e.scale(b, b, Math.pow(1 - this.damping, a)), (this.angularVelocity *= Math.pow(1 - this.angularDamping, a));
                            }
                        }),
                        (d.prototype.wakeUp = function () {
                            var a = this.sleepState;
                            (this.sleepState = d.AWAKE), (this.idleTime = 0), a !== d.AWAKE && this.emit(d.wakeUpEvent);
                        }),
                        (d.prototype.sleep = function () {
                            (this.sleepState = d.SLEEPING), (this.angularVelocity = 0), (this.angularForce = 0), e.set(this.velocity, 0, 0), e.set(this.force, 0, 0), this.emit(d.sleepEvent);
                        }),
                        (d.prototype.sleepTick = function (a, b, c) {
                            this.allowSleep &&
                                this.type !== d.SLEEPING &&
                                ((this.wantsToSleep = !1),
                                this.sleepState,
                                e.squaredLength(this.velocity) + Math.pow(this.angularVelocity, 2) >= Math.pow(this.sleepSpeedLimit, 2)
                                    ? ((this.idleTime = 0), (this.sleepState = d.AWAKE))
                                    : ((this.idleTime += c), (this.sleepState = d.SLEEPY)),
                                this.idleTime > this.sleepTimeLimit && (b ? (this.wantsToSleep = !0) : this.sleep()));
                        }),
                        (d.prototype.overlaps = function (a) {
                            return this.world.overlapKeeper.bodiesAreOverlapping(this, a);
                        });
                    var x = e.create(),
                        y = e.create();
                    d.prototype.integrate = function (a) {
                        var b = this.invMass,
                            c = this.force,
                            d = this.position,
                            f = this.velocity;
                        e.copy(this.previousPosition, this.position),
                            (this.previousAngle = this.angle),
                            this.fixedRotation || (this.angularVelocity += this.angularForce * this.invInertia * a),
                            e.scale(x, c, a * b),
                            e.multiply(x, this.massMultiplier, x),
                            e.add(f, x, f),
                            this.integrateToTimeOfImpact(a) || (e.scale(y, f, a), e.add(d, d, y), this.fixedRotation || (this.angle += this.angularVelocity * a)),
                            (this.aabbNeedsUpdate = !0);
                    };
                    var z = new h(),
                        A = new i({ mode: i.ALL }),
                        B = e.create(),
                        C = e.create(),
                        D = e.create(),
                        E = e.create();
                    (d.prototype.integrateToTimeOfImpact = function (a) {
                        if (this.ccdSpeedThreshold < 0 || e.squaredLength(this.velocity) < Math.pow(this.ccdSpeedThreshold, 2)) return !1;
                        e.normalize(B, this.velocity), e.scale(C, this.velocity, a), e.add(C, C, this.position), e.sub(D, C, this.position);
                        var b,
                            c = this.angularVelocity * a,
                            d = e.length(D),
                            f = 1,
                            g = this;
                        if (
                            (z.reset(),
                            (A.callback = function (a) {
                                a.body !== g && ((b = a.body), a.getHitPoint(C, A), e.sub(D, C, g.position), (f = e.length(D) / d), a.stop());
                            }),
                            e.copy(A.from, this.position),
                            e.copy(A.to, C),
                            A.update(),
                            this.world.raycast(z, A),
                            !b)
                        )
                            return !1;
                        var h = this.angle;
                        e.copy(E, this.position);
                        for (var i = 0, j = 0, k = 0, l = f; j <= l && i < this.ccdIterations; )
                            i++, (k = (l - j) / 2), e.scale(y, D, f), e.add(this.position, E, y), (this.angle = h + c * f), this.updateAABB(), this.aabb.overlaps(b.aabb) && this.world.narrowphase.bodiesOverlap(this, b) ? (j = k) : (l = k);
                        return (f = k), e.copy(this.position, E), (this.angle = h), e.scale(y, D, f), e.add(this.position, this.position, y), this.fixedRotation || (this.angle += c * f), !0;
                    }),
                        (d.prototype.getVelocityAtPoint = function (a, b) {
                            return e.crossVZ(a, b, this.angularVelocity), e.subtract(a, this.velocity, a), a;
                        }),
                        (d.sleepyEvent = { type: "sleepy" }),
                        (d.sleepEvent = { type: "sleep" }),
                        (d.wakeUpEvent = { type: "wakeup" }),
                        (d.DYNAMIC = 1),
                        (d.STATIC = 2),
                        (d.KINEMATIC = 4),
                        (d.AWAKE = 0),
                        (d.SLEEPY = 1),
                        (d.SLEEPING = 2);
                },
                { "../collision/AABB": 7, "../collision/Ray": 11, "../collision/RaycastResult": 12, "../events/EventEmitter": 26, "../math/vec2": 30, "../shapes/Convex": 40, "poly-decomp": 5 },
            ],
            32: [
                function (a, b, c) {
                    function d(a, b, c) {
                        (c = c || {}),
                            f.call(this, a, b, c),
                            (this.localAnchorA = e.fromValues(0, 0)),
                            (this.localAnchorB = e.fromValues(0, 0)),
                            c.localAnchorA && e.copy(this.localAnchorA, c.localAnchorA),
                            c.localAnchorB && e.copy(this.localAnchorB, c.localAnchorB),
                            c.worldAnchorA && this.setWorldAnchorA(c.worldAnchorA),
                            c.worldAnchorB && this.setWorldAnchorB(c.worldAnchorB);
                        var d = e.create(),
                            g = e.create();
                        this.getWorldAnchorA(d), this.getWorldAnchorB(g);
                        var h = e.distance(d, g);
                        this.restLength = "number" == typeof c.restLength ? c.restLength : h;
                    }
                    var e = a("../math/vec2"),
                        f = a("./Spring");
                    a("../utils/Utils"),
                        ((((b.exports = d).prototype = new f()).constructor = d).prototype.setWorldAnchorA = function (a) {
                            this.bodyA.toLocalFrame(this.localAnchorA, a);
                        }),
                        (d.prototype.setWorldAnchorB = function (a) {
                            this.bodyB.toLocalFrame(this.localAnchorB, a);
                        }),
                        (d.prototype.getWorldAnchorA = function (a) {
                            this.bodyA.toWorldFrame(a, this.localAnchorA);
                        }),
                        (d.prototype.getWorldAnchorB = function (a) {
                            this.bodyB.toWorldFrame(a, this.localAnchorB);
                        });
                    var g = e.create(),
                        h = e.create(),
                        i = e.create(),
                        j = e.create(),
                        k = e.create(),
                        l = e.create(),
                        m = e.create(),
                        n = e.create(),
                        o = e.create();
                    d.prototype.applyForce = function () {
                        var a = this.stiffness,
                            b = this.damping,
                            c = this.restLength,
                            d = this.bodyA,
                            f = this.bodyB,
                            p = g,
                            q = h,
                            r = i,
                            s = j,
                            t = o,
                            u = k,
                            v = l,
                            w = m,
                            x = n;
                        this.getWorldAnchorA(u), this.getWorldAnchorB(v), e.sub(w, u, d.position), e.sub(x, v, f.position), e.sub(p, v, u);
                        var y = e.len(p);
                        e.normalize(q, p),
                            e.sub(r, f.velocity, d.velocity),
                            e.crossZV(t, f.angularVelocity, x),
                            e.add(r, r, t),
                            e.crossZV(t, d.angularVelocity, w),
                            e.sub(r, r, t),
                            e.scale(s, q, -a * (y - c) - b * e.dot(r, q)),
                            e.sub(d.force, d.force, s),
                            e.add(f.force, f.force, s);
                        var z = e.crossLength(w, s),
                            A = e.crossLength(x, s);
                        (d.angularForce -= z), (f.angularForce += A);
                    };
                },
                { "../math/vec2": 30, "../utils/Utils": 57, "./Spring": 34 },
            ],
            33: [
                function (a, b, c) {
                    function d(a, b, c) {
                        (c = c || {}), e.call(this, a, b, c), (this.restAngle = "number" == typeof c.restAngle ? c.restAngle : b.angle - a.angle);
                    }
                    var e = (a("../math/vec2"), a("./Spring"));
                    (((b.exports = d).prototype = new e()).constructor = d).prototype.applyForce = function () {
                        var a = this.stiffness,
                            b = this.damping,
                            c = this.restAngle,
                            d = this.bodyA,
                            e = this.bodyB,
                            h = -a * (e.angle - d.angle - c) - b * (e.angularVelocity - d.angularVelocity) * 0;
                        (d.angularForce -= h), (e.angularForce += h);
                    };
                },
                { "../math/vec2": 30, "./Spring": 34 },
            ],
            34: [
                function (a, b, c) {
                    function d(a, b, c) {
                        (c = e.defaults(c, { stiffness: 100, damping: 1 })), (this.stiffness = c.stiffness), (this.damping = c.damping), (this.bodyA = a), (this.bodyB = b);
                    }
                    var e = (a("../math/vec2"), a("../utils/Utils"));
                    (b.exports = d).prototype.applyForce = function () {};
                },
                { "../math/vec2": 30, "../utils/Utils": 57 },
            ],
            35: [
                function (a, b, c) {
                    function d(a, b) {
                        (b = b || {}), (this.chassisBody = a), (this.wheels = []), (this.groundBody = new i({ mass: 0 })), (this.world = null);
                        var c = this;
                        this.preStepCallback = function () {
                            c.update();
                        };
                    }
                    function e(a, b) {
                        (b = b || {}),
                            (this.vehicle = a),
                            (this.forwardEquation = new h(a.chassisBody, a.groundBody)),
                            (this.sideEquation = new h(a.chassisBody, a.groundBody)),
                            (this.steerValue = 0),
                            (this.engineForce = 0),
                            this.setSideFriction(void 0 !== b.sideFriction ? b.sideFriction : 5),
                            (this.localForwardVector = f.fromValues(0, 1)),
                            b.localForwardVector && f.copy(this.localForwardVector, b.localForwardVector),
                            (this.localPosition = f.fromValues(0, 0)),
                            b.localPosition && f.copy(this.localPosition, b.localPosition),
                            g.apply(this, a.chassisBody, a.groundBody),
                            this.equations.push(this.forwardEquation, this.sideEquation),
                            this.setBrakeForce(0);
                    }
                    var f = a("../math/vec2"),
                        g = (a("../utils/Utils"), a("../constraints/Constraint")),
                        h = a("../equations/FrictionEquation"),
                        i = a("../objects/Body");
                    ((b.exports = d).prototype.addToWorld = function (a) {
                        (this.world = a).addBody(this.groundBody), a.on("preStep", this.preStepCallback);
                        for (var b = 0; b < this.wheels.length; b++) {
                            var c = this.wheels[b];
                            a.addConstraint(c);
                        }
                    }),
                        (d.prototype.removeFromWorld = function () {
                            var a = this.world;
                            a.removeBody(this.groundBody), a.off("preStep", this.preStepCallback);
                            for (var b = 0; b < this.wheels.length; b++) {
                                var c = this.wheels[b];
                                a.removeConstraint(c);
                            }
                            this.world = null;
                        }),
                        (d.prototype.addWheel = function (a) {
                            var b = new e(this, a);
                            return this.wheels.push(b), b;
                        }),
                        (d.prototype.update = function () {
                            for (var a = 0; a < this.wheels.length; a++) this.wheels[a].update();
                        }),
                        ((e.prototype = new g()).setBrakeForce = function (a) {
                            this.forwardEquation.setSlipForce(a);
                        }),
                        (e.prototype.setSideFriction = function (a) {
                            this.sideEquation.setSlipForce(a);
                        });
                    var j = f.create(),
                        k = f.create();
                    e.prototype.getSpeed = function () {
                        return this.vehicle.chassisBody.vectorToWorldFrame(k, this.localForwardVector), this.vehicle.chassisBody.getVelocityAtPoint(j, k), f.dot(j, k);
                    };
                    var l = f.create();
                    e.prototype.update = function () {
                        this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.t, this.localForwardVector),
                            f.rotate(this.sideEquation.t, this.localForwardVector, Math.PI / 2),
                            this.vehicle.chassisBody.vectorToWorldFrame(this.sideEquation.t, this.sideEquation.t),
                            f.rotate(this.forwardEquation.t, this.forwardEquation.t, this.steerValue),
                            f.rotate(this.sideEquation.t, this.sideEquation.t, this.steerValue),
                            this.vehicle.chassisBody.toWorldFrame(this.forwardEquation.contactPointB, this.localPosition),
                            f.copy(this.sideEquation.contactPointB, this.forwardEquation.contactPointB),
                            this.vehicle.chassisBody.vectorToWorldFrame(this.forwardEquation.contactPointA, this.localPosition),
                            f.copy(this.sideEquation.contactPointA, this.forwardEquation.contactPointA),
                            f.normalize(l, this.forwardEquation.t),
                            f.scale(l, l, this.engineForce),
                            this.vehicle.chassisBody.applyForce(l, this.forwardEquation.contactPointA);
                    };
                },
                { "../constraints/Constraint": 14, "../equations/FrictionEquation": 23, "../math/vec2": 30, "../objects/Body": 31, "../utils/Utils": 57 },
            ],
            36: [
                function (a, b, c) {
                    var d = (b.exports = {
                        AABB: a("./collision/AABB"),
                        AngleLockEquation: a("./equations/AngleLockEquation"),
                        Body: a("./objects/Body"),
                        Broadphase: a("./collision/Broadphase"),
                        Capsule: a("./shapes/Capsule"),
                        Circle: a("./shapes/Circle"),
                        Constraint: a("./constraints/Constraint"),
                        ContactEquation: a("./equations/ContactEquation"),
                        ContactEquationPool: a("./utils/ContactEquationPool"),
                        ContactMaterial: a("./material/ContactMaterial"),
                        Convex: a("./shapes/Convex"),
                        DistanceConstraint: a("./constraints/DistanceConstraint"),
                        Equation: a("./equations/Equation"),
                        EventEmitter: a("./events/EventEmitter"),
                        FrictionEquation: a("./equations/FrictionEquation"),
                        FrictionEquationPool: a("./utils/FrictionEquationPool"),
                        GearConstraint: a("./constraints/GearConstraint"),
                        GSSolver: a("./solver/GSSolver"),
                        Heightfield: a("./shapes/Heightfield"),
                        Line: a("./shapes/Line"),
                        LockConstraint: a("./constraints/LockConstraint"),
                        Material: a("./material/Material"),
                        Narrowphase: a("./collision/Narrowphase"),
                        NaiveBroadphase: a("./collision/NaiveBroadphase"),
                        Particle: a("./shapes/Particle"),
                        Plane: a("./shapes/Plane"),
                        Pool: a("./utils/Pool"),
                        RevoluteConstraint: a("./constraints/RevoluteConstraint"),
                        PrismaticConstraint: a("./constraints/PrismaticConstraint"),
                        Ray: a("./collision/Ray"),
                        RaycastResult: a("./collision/RaycastResult"),
                        Box: a("./shapes/Box"),
                        RotationalVelocityEquation: a("./equations/RotationalVelocityEquation"),
                        SAPBroadphase: a("./collision/SAPBroadphase"),
                        Shape: a("./shapes/Shape"),
                        Solver: a("./solver/Solver"),
                        Spring: a("./objects/Spring"),
                        TopDownVehicle: a("./objects/TopDownVehicle"),
                        LinearSpring: a("./objects/LinearSpring"),
                        RotationalSpring: a("./objects/RotationalSpring"),
                        Utils: a("./utils/Utils"),
                        World: a("./world/World"),
                        vec2: a("./math/vec2"),
                        version: a("../package.json").version,
                    });
                    Object.defineProperty(d, "Rectangle", {
                        get: function () {
                            return this.Box;
                        },
                    });
                },
                {
                    "../package.json": 6,
                    "./collision/AABB": 7,
                    "./collision/Broadphase": 8,
                    "./collision/NaiveBroadphase": 9,
                    "./collision/Narrowphase": 10,
                    "./collision/Ray": 11,
                    "./collision/RaycastResult": 12,
                    "./collision/SAPBroadphase": 13,
                    "./constraints/Constraint": 14,
                    "./constraints/DistanceConstraint": 15,
                    "./constraints/GearConstraint": 16,
                    "./constraints/LockConstraint": 17,
                    "./constraints/PrismaticConstraint": 18,
                    "./constraints/RevoluteConstraint": 19,
                    "./equations/AngleLockEquation": 20,
                    "./equations/ContactEquation": 21,
                    "./equations/Equation": 22,
                    "./equations/FrictionEquation": 23,
                    "./equations/RotationalVelocityEquation": 25,
                    "./events/EventEmitter": 26,
                    "./material/ContactMaterial": 27,
                    "./material/Material": 28,
                    "./math/vec2": 30,
                    "./objects/Body": 31,
                    "./objects/LinearSpring": 32,
                    "./objects/RotationalSpring": 33,
                    "./objects/Spring": 34,
                    "./objects/TopDownVehicle": 35,
                    "./shapes/Box": 37,
                    "./shapes/Capsule": 38,
                    "./shapes/Circle": 39,
                    "./shapes/Convex": 40,
                    "./shapes/Heightfield": 41,
                    "./shapes/Line": 42,
                    "./shapes/Particle": 43,
                    "./shapes/Plane": 44,
                    "./shapes/Shape": 45,
                    "./solver/GSSolver": 46,
                    "./solver/Solver": 47,
                    "./utils/ContactEquationPool": 48,
                    "./utils/FrictionEquationPool": 49,
                    "./utils/Pool": 55,
                    "./utils/Utils": 57,
                    "./world/World": 61,
                },
            ],
            37: [
                function (a, b, c) {
                    function d(a) {
                        "number" == typeof a && "number" == typeof arguments[1] && (a = { width: a, height: arguments[1] }), (a = a || {});
                        var b = (this.width = a.width || 1),
                            c = (this.height = a.height || 1),
                            d = [e.fromValues(-b / 2, -c / 2), e.fromValues(b / 2, -c / 2), e.fromValues(b / 2, c / 2), e.fromValues(-b / 2, c / 2)],
                            h = [e.fromValues(1, 0), e.fromValues(0, 1)];
                        (a.vertices = d), (a.axes = h), (a.type = f.BOX), g.call(this, a);
                    }
                    var e = a("../math/vec2"),
                        f = a("./Shape"),
                        g = a("./Convex");
                    ((((b.exports = d).prototype = new g()).constructor = d).prototype.computeMomentOfInertia = function (a) {
                        var b = this.width,
                            c = this.height;
                        return (a * (c * c + b * b)) / 12;
                    }),
                        (d.prototype.updateBoundingRadius = function () {
                            var a = this.width,
                                b = this.height;
                            this.boundingRadius = Math.sqrt(a * a + b * b) / 2;
                        }),
                        e.create(),
                        e.create(),
                        e.create(),
                        e.create(),
                        (d.prototype.computeAABB = function (a, b, c) {
                            a.setFromPoints(this.vertices, b, c, 0);
                        }),
                        (d.prototype.updateArea = function () {
                            this.area = this.width * this.height;
                        });
                },
                { "../math/vec2": 30, "./Convex": 40, "./Shape": 45 },
            ],
            38: [
                function (a, b, c) {
                    function d(a) {
                        "number" == typeof a && "number" == typeof arguments[1] && (a = { length: a, radius: arguments[1] }),
                            (a = a || {}),
                            (this.length = a.length || 1),
                            (this.radius = a.radius || 1),
                            (a.type = e.CAPSULE),
                            e.call(this, a);
                    }
                    var e = a("./Shape"),
                        f = a("../math/vec2");
                    ((((b.exports = d).prototype = new e()).constructor = d).prototype.computeMomentOfInertia = function (a) {
                        var b = this.radius,
                            c = this.length + b,
                            d = 2 * b;
                        return (a * (d * d + c * c)) / 12;
                    }),
                        (d.prototype.updateBoundingRadius = function () {
                            this.boundingRadius = this.radius + this.length / 2;
                        }),
                        (d.prototype.updateArea = function () {
                            this.area = Math.PI * this.radius * this.radius + 2 * this.radius * this.length;
                        });
                    var g = f.create();
                    d.prototype.computeAABB = function (a, b, c) {
                        var d = this.radius;
                        f.set(g, this.length / 2, 0),
                            0 !== c && f.rotate(g, g, c),
                            f.set(a.upperBound, Math.max(g[0] + d, -g[0] + d), Math.max(g[1] + d, -g[1] + d)),
                            f.set(a.lowerBound, Math.min(g[0] - d, -g[0] - d), Math.min(g[1] - d, -g[1] - d)),
                            f.add(a.lowerBound, a.lowerBound, b),
                            f.add(a.upperBound, a.upperBound, b);
                    };
                    var h = f.create(),
                        i = f.create(),
                        j = f.create(),
                        k = f.create(),
                        l = f.fromValues(0, 1);
                    d.prototype.raycast = function (a, b, c, d) {
                        for (var e = b.from, g = b.to, m = (b.direction, h), n = i, o = j, p = k, q = this.length / 2, r = 0; r < 2; r++) {
                            var s = this.radius * (2 * r - 1);
                            if (
                                (f.set(o, -q, s),
                                f.set(p, q, s),
                                f.toGlobalFrame(o, o, c, d),
                                f.toGlobalFrame(p, p, c, d),
                                0 <= (t = f.getLineSegmentsIntersectionFraction(e, g, o, p)) && (f.rotate(n, l, d), f.scale(n, n, 2 * r - 1), b.reportIntersection(a, t, n, -1), a.shouldStop(b)))
                            )
                                return;
                        }
                        var u = Math.pow(this.radius, 2) + Math.pow(q, 2);
                        for (r = 0; r < 2; r++) {
                            f.set(o, q * (2 * r - 1), 0), f.toGlobalFrame(o, o, c, d);
                            var t,
                                v = Math.pow(g[0] - e[0], 2) + Math.pow(g[1] - e[1], 2),
                                w = 2 * ((g[0] - e[0]) * (e[0] - o[0]) + (g[1] - e[1]) * (e[1] - o[1])),
                                x = Math.pow(e[0] - o[0], 2) + Math.pow(e[1] - o[1], 2) - Math.pow(this.radius, 2);
                            if (!((t = Math.pow(w, 2) - 4 * v * x) < 0))
                                if (0 === t) {
                                    if ((f.lerp(m, e, g, t), f.squaredDistance(m, c) > u && (f.sub(n, m, o), f.normalize(n, n), b.reportIntersection(a, t, n, -1), a.shouldStop(b)))) return;
                                } else {
                                    var y = Math.sqrt(t),
                                        z = 1 / (2 * v),
                                        A = (-w - y) * z,
                                        B = (-w + y) * z;
                                    if (0 <= A && A <= 1 && (f.lerp(m, e, g, A), f.squaredDistance(m, c) > u && (f.sub(n, m, o), f.normalize(n, n), b.reportIntersection(a, A, n, -1), a.shouldStop(b)))) return;
                                    if (0 <= B && B <= 1 && (f.lerp(m, e, g, B), f.squaredDistance(m, c) > u && (f.sub(n, m, o), f.normalize(n, n), b.reportIntersection(a, B, n, -1), a.shouldStop(b)))) return;
                                }
                        }
                    };
                },
                { "../math/vec2": 30, "./Shape": 45 },
            ],
            39: [
                function (a, b, c) {
                    function d(a) {
                        "number" == typeof a && (a = { radius: a }), (a = a || {}), (this.radius = a.radius || 1), (a.type = e.CIRCLE), e.call(this, a);
                    }
                    var e = a("./Shape"),
                        f = a("../math/vec2");
                    ((((b.exports = d).prototype = new e()).constructor = d).prototype.computeMomentOfInertia = function (a) {
                        var b = this.radius;
                        return (a * b * b) / 2;
                    }),
                        (d.prototype.updateBoundingRadius = function () {
                            this.boundingRadius = this.radius;
                        }),
                        (d.prototype.updateArea = function () {
                            this.area = Math.PI * this.radius * this.radius;
                        }),
                        (d.prototype.computeAABB = function (a, b, c) {
                            var d = this.radius;
                            f.set(a.upperBound, d, d), f.set(a.lowerBound, -d, -d), b && (f.add(a.lowerBound, a.lowerBound, b), f.add(a.upperBound, a.upperBound, b));
                        });
                    var g = f.create(),
                        h = f.create();
                    d.prototype.raycast = function (a, b, c, d) {
                        var e = b.from,
                            i = b.to,
                            j = this.radius,
                            k = Math.pow(i[0] - e[0], 2) + Math.pow(i[1] - e[1], 2),
                            l = 2 * ((i[0] - e[0]) * (e[0] - c[0]) + (i[1] - e[1]) * (e[1] - c[1])),
                            m = Math.pow(e[0] - c[0], 2) + Math.pow(e[1] - c[1], 2) - Math.pow(j, 2),
                            n = Math.pow(l, 2) - 4 * k * m,
                            o = g,
                            p = h;
                        if (!(n < 0))
                            if (0 === n) f.lerp(o, e, i, n), f.sub(p, o, c), f.normalize(p, p), b.reportIntersection(a, n, p, -1);
                            else {
                                var q = Math.sqrt(n),
                                    r = 1 / (2 * k),
                                    s = (-l - q) * r,
                                    t = (-l + q) * r;
                                if (0 <= s && s <= 1 && (f.lerp(o, e, i, s), f.sub(p, o, c), f.normalize(p, p), b.reportIntersection(a, s, p, -1), a.shouldStop(b))) return;
                                0 <= t && t <= 1 && (f.lerp(o, e, i, t), f.sub(p, o, c), f.normalize(p, p), b.reportIntersection(a, t, p, -1));
                            }
                    };
                },
                { "../math/vec2": 30, "./Shape": 45 },
            ],
            40: [
                function (a, b, c) {
                    function d(a) {
                        Array.isArray(a) && (a = { vertices: a, axes: arguments[1] }), (a = a || {}), (this.vertices = []);
                        for (var b = void 0 !== a.vertices ? a.vertices : [], c = 0; c < b.length; c++) {
                            var d = f.create();
                            f.copy(d, b[c]), this.vertices.push(d);
                        }
                        if (((this.axes = []), a.axes))
                            for (c = 0; c < a.axes.length; c++) {
                                var g = f.create();
                                f.copy(g, a.axes[c]), this.axes.push(g);
                            }
                        else
                            for (c = 0; c < this.vertices.length; c++) {
                                var h = this.vertices[c],
                                    i = this.vertices[(c + 1) % this.vertices.length],
                                    j = f.create();
                                f.sub(j, i, h), f.rotate90cw(j, j), f.normalize(j, j), this.axes.push(j);
                            }
                        if (
                            ((this.centerOfMass = f.fromValues(0, 0)),
                            (this.triangles = []),
                            this.vertices.length && (this.updateTriangles(), this.updateCenterOfMass()),
                            (this.boundingRadius = 0),
                            (a.type = e.CONVEX),
                            e.call(this, a),
                            this.updateBoundingRadius(),
                            this.updateArea(),
                            this.area < 0)
                        )
                            throw new Error("Convex vertices must be given in conter-clockwise winding.");
                    }
                    var e = a("./Shape"),
                        f = a("../math/vec2"),
                        g = a("../math/polyk");
                    a("poly-decomp"), (((b.exports = d).prototype = new e()).constructor = d);
                    var h = f.create(),
                        i = f.create();
                    (d.prototype.projectOntoLocalAxis = function (a, b) {
                        for (var c, d, e = null, g = null, i = ((a = h), 0); i < this.vertices.length; i++) (c = this.vertices[i]), (d = f.dot(c, a)), (null === e || e < d) && (e = d), (null === g || d < g) && (g = d);
                        if (e < g) {
                            var j = g;
                            (g = e), (e = j);
                        }
                        f.set(b, g, e);
                    }),
                        (d.prototype.projectOntoWorldAxis = function (a, b, c, d) {
                            var e = i;
                            this.projectOntoLocalAxis(a, d), 0 !== c ? f.rotate(e, a, c) : (e = a);
                            var g = f.dot(b, e);
                            f.set(d, d[0] + g, d[1] + g);
                        }),
                        (d.prototype.updateTriangles = function () {
                            for (var a = [], b = (this.triangles.length = 0); b < this.vertices.length; b++) {
                                var c = this.vertices[b];
                                a.push(c[0], c[1]);
                            }
                            var d = g.Triangulate(a);
                            for (b = 0; b < d.length; b += 3) {
                                var e = d[b],
                                    f = d[b + 1],
                                    h = d[b + 2];
                                this.triangles.push([e, f, h]);
                            }
                        });
                    var j = f.create(),
                        k = f.create(),
                        l = f.create(),
                        m = f.create(),
                        n = f.create();
                    f.create(),
                        f.create(),
                        f.create(),
                        f.create(),
                        (d.prototype.updateCenterOfMass = function () {
                            var a = this.triangles,
                                b = this.vertices,
                                c = this.centerOfMass,
                                e = j,
                                g = l,
                                h = m,
                                i = n,
                                o = k;
                            f.set(c, 0, 0);
                            for (var p = 0, q = 0; q !== a.length; q++) {
                                var r = a[q];
                                (g = b[r[0]]), (h = b[r[1]]), (i = b[r[2]]);
                                f.centroid(e, g, h, i);
                                var s = d.triangleArea(g, h, i);
                                (p += s), f.scale(o, e, s), f.add(c, c, o);
                            }
                            f.scale(c, c, 1 / p);
                        }),
                        (d.prototype.computeMomentOfInertia = function (a) {
                            for (var b = 0, c = 0, d = this.vertices.length, e = d - 1, g = 0; g < d; e = g, g++) {
                                var h = this.vertices[e],
                                    i = this.vertices[g],
                                    j = Math.abs(f.crossLength(h, i));
                                (b += j * (f.dot(i, i) + f.dot(i, h) + f.dot(h, h))), (c += j);
                            }
                            return (a / 6) * (b / c);
                        }),
                        (d.prototype.updateBoundingRadius = function () {
                            for (var a = this.vertices, b = 0, c = 0; c !== a.length; c++) {
                                var d = f.squaredLength(a[c]);
                                b < d && (b = d);
                            }
                            this.boundingRadius = Math.sqrt(b);
                        }),
                        (d.triangleArea = function (a, b, c) {
                            return 0.5 * ((b[0] - a[0]) * (c[1] - a[1]) - (c[0] - a[0]) * (b[1] - a[1]));
                        }),
                        (d.prototype.updateArea = function () {
                            this.updateTriangles(), (this.area = 0);
                            for (var a = this.triangles, b = this.vertices, c = 0; c !== a.length; c++) {
                                var e = a[c],
                                    f = b[e[0]],
                                    g = b[e[1]],
                                    h = b[e[2]],
                                    i = d.triangleArea(f, g, h);
                                this.area += i;
                            }
                        }),
                        (d.prototype.computeAABB = function (a, b, c) {
                            a.setFromPoints(this.vertices, b, c, 0);
                        });
                    var o = f.create(),
                        p = f.create(),
                        q = f.create();
                    d.prototype.raycast = function (a, b, c, d) {
                        var e = o,
                            g = p,
                            h = q,
                            i = this.vertices;
                        f.toLocalFrame(e, b.from, c, d), f.toLocalFrame(g, b.to, c, d);
                        for (var j = i.length, k = 0; k < j && !a.shouldStop(b); k++) {
                            var l = i[k],
                                m = i[(k + 1) % j],
                                n = f.getLineSegmentsIntersectionFraction(e, g, l, m);
                            0 <= n && (f.sub(h, m, l), f.rotate(h, h, -Math.PI / 2 + d), f.normalize(h, h), b.reportIntersection(a, n, h, k));
                        }
                    };
                },
                { "../math/polyk": 29, "../math/vec2": 30, "./Shape": 45, "poly-decomp": 5 },
            ],
            41: [
                function (a, b, c) {
                    function d(a) {
                        if (Array.isArray(a) && ((a = { heights: a }), "object" == typeof arguments[1])) for (var b in arguments[1]) a[b] = arguments[1][b];
                        (a = a || {}),
                            (this.heights = a.heights ? a.heights.slice(0) : []),
                            (this.maxValue = a.maxValue || null),
                            (this.minValue = a.minValue || null),
                            (this.elementWidth = a.elementWidth || 0.1),
                            (void 0 !== a.maxValue && void 0 !== a.minValue) || this.updateMaxMinValues(),
                            (a.type = e.HEIGHTFIELD),
                            e.call(this, a);
                    }
                    var e = a("./Shape"),
                        f = a("../math/vec2");
                    a("../utils/Utils"),
                        ((((b.exports = d).prototype = new e()).constructor = d).prototype.updateMaxMinValues = function () {
                            for (var a = this.heights, b = a[0], c = a[0], d = 0; d !== a.length; d++) {
                                var e = a[d];
                                b < e && (b = e), e < c && (c = e);
                            }
                            (this.maxValue = b), (this.minValue = c);
                        }),
                        (d.prototype.computeMomentOfInertia = function (a) {
                            return Number.MAX_VALUE;
                        }),
                        (d.prototype.updateBoundingRadius = function () {
                            this.boundingRadius = Number.MAX_VALUE;
                        }),
                        (d.prototype.updateArea = function () {
                            for (var a = this.heights, b = 0, c = 0; c < a.length - 1; c++) b += ((a[c] + a[c + 1]) / 2) * this.elementWidth;
                            this.area = b;
                        });
                    var g = [f.create(), f.create(), f.create(), f.create()];
                    (d.prototype.computeAABB = function (a, b, c) {
                        f.set(g[0], 0, this.maxValue),
                            f.set(g[1], this.elementWidth * this.heights.length, this.maxValue),
                            f.set(g[2], this.elementWidth * this.heights.length, this.minValue),
                            f.set(g[3], 0, this.minValue),
                            a.setFromPoints(g, b, c);
                    }),
                        (d.prototype.getLineSegment = function (a, b, c) {
                            var d = this.heights,
                                e = this.elementWidth;
                            f.set(a, c * e, d[c]), f.set(b, (c + 1) * e, d[c + 1]);
                        }),
                        (d.prototype.getSegmentIndex = function (a) {
                            return Math.floor(a[0] / this.elementWidth);
                        }),
                        (d.prototype.getClampedSegmentIndex = function (a) {
                            var b = this.getSegmentIndex(a);
                            return Math.min(this.heights.length, Math.max(b, 0));
                        });
                    var h = (f.create(), f.create()),
                        i = f.create(),
                        j = f.create(),
                        k = f.create(),
                        l = f.create();
                    f.fromValues(0, 1),
                        (d.prototype.raycast = function (a, b, c, d) {
                            var e = b.from,
                                g = b.to,
                                m = (b.direction, h),
                                n = i,
                                o = j,
                                p = k,
                                q = l;
                            f.toLocalFrame(p, e, c, d), f.toLocalFrame(q, g, c, d);
                            var r = this.getClampedSegmentIndex(p),
                                s = this.getClampedSegmentIndex(q);
                            if (s < r) {
                                var t = r;
                                (r = s), (s = t);
                            }
                            for (var u = 0; u < this.heights.length - 1; u++) {
                                this.getLineSegment(n, o, u);
                                var v = f.getLineSegmentsIntersectionFraction(p, q, n, o);
                                if (0 <= v && (f.sub(m, o, n), f.rotate(m, m, d + Math.PI / 2), f.normalize(m, m), b.reportIntersection(a, v, m, -1), a.shouldStop(b))) return;
                            }
                        });
                },
                { "../math/vec2": 30, "../utils/Utils": 57, "./Shape": 45 },
            ],
            42: [
                function (a, b, c) {
                    function d(a) {
                        "number" == typeof a && (a = { length: a }), (a = a || {}), (this.length = a.length || 1), (a.type = e.LINE), e.call(this, a);
                    }
                    var e = a("./Shape"),
                        f = a("../math/vec2");
                    ((((b.exports = d).prototype = new e()).constructor = d).prototype.computeMomentOfInertia = function (a) {
                        return (a * Math.pow(this.length, 2)) / 12;
                    }),
                        (d.prototype.updateBoundingRadius = function () {
                            this.boundingRadius = this.length / 2;
                        });
                    var g = [f.create(), f.create()];
                    d.prototype.computeAABB = function (a, b, c) {
                        var d = this.length / 2;
                        f.set(g[0], -d, 0), f.set(g[1], d, 0), a.setFromPoints(g, b, c, 0);
                    };
                    var h = (f.create(), f.create()),
                        i = f.create(),
                        j = f.create(),
                        k = f.fromValues(0, 1);
                    d.prototype.raycast = function (a, b, c, d) {
                        var e = b.from,
                            g = b.to,
                            l = i,
                            m = j,
                            n = this.length / 2;
                        f.set(l, -n, 0), f.set(m, n, 0), f.toGlobalFrame(l, l, c, d), f.toGlobalFrame(m, m, c, d);
                        var o = f.getLineSegmentsIntersectionFraction(l, m, e, g);
                        if (0 <= o) {
                            var p = h;
                            f.rotate(p, k, d), b.reportIntersection(a, o, p, -1);
                        }
                    };
                },
                { "../math/vec2": 30, "./Shape": 45 },
            ],
            43: [
                function (a, b, c) {
                    function d(a) {
                        ((a = a || {}).type = e.PARTICLE), e.call(this, a);
                    }
                    var e = a("./Shape"),
                        f = a("../math/vec2");
                    ((((b.exports = d).prototype = new e()).constructor = d).prototype.computeMomentOfInertia = function (a) {
                        return 0;
                    }),
                        (d.prototype.updateBoundingRadius = function () {
                            this.boundingRadius = 0;
                        }),
                        (d.prototype.computeAABB = function (a, b, c) {
                            f.copy(a.lowerBound, b), f.copy(a.upperBound, b);
                        });
                },
                { "../math/vec2": 30, "./Shape": 45 },
            ],
            44: [
                function (a, b, c) {
                    function d(a) {
                        ((a = a || {}).type = e.PLANE), e.call(this, a);
                    }
                    var e = a("./Shape"),
                        f = a("../math/vec2");
                    a("../utils/Utils"),
                        ((((b.exports = d).prototype = new e()).constructor = d).prototype.computeMomentOfInertia = function (a) {
                            return 0;
                        }),
                        (d.prototype.updateBoundingRadius = function () {
                            this.boundingRadius = Number.MAX_VALUE;
                        }),
                        (d.prototype.computeAABB = function (a, b, c) {
                            var d = c % (2 * Math.PI),
                                e = f.set,
                                g = Number.MAX_VALUE,
                                h = a.lowerBound,
                                i = a.upperBound;
                            0 === d
                                ? (e(h, -g, -g), e(i, g, 0))
                                : d === Math.PI / 2
                                ? (e(h, 0, -g), e(i, g, g))
                                : d === Math.PI
                                ? (e(h, -g, 0), e(i, g, g))
                                : d === (3 * Math.PI) / 2
                                ? (e(h, -g, -g), e(i, 0, g))
                                : (e(h, -g, -g), e(i, g, g)),
                                f.add(h, h, b),
                                f.add(i, i, b);
                        }),
                        (d.prototype.updateArea = function () {
                            this.area = Number.MAX_VALUE;
                        });
                    var g = f.create(),
                        h = (f.create(), f.create(), f.create()),
                        i = f.create();
                    d.prototype.raycast = function (a, b, c, d) {
                        var e = b.from,
                            j = b.to,
                            k = b.direction,
                            l = g,
                            m = h,
                            n = i;
                        f.set(m, 0, 1), f.rotate(m, m, d), f.sub(n, e, c);
                        var o = f.dot(n, m);
                        if ((f.sub(n, j, c), !(0 < o * f.dot(n, m) || f.squaredDistance(e, j) < o * o))) {
                            var p = f.dot(m, k);
                            f.sub(l, e, c);
                            var q = -f.dot(m, l) / p / b.length;
                            b.reportIntersection(a, q, m, -1);
                        }
                    };
                },
                { "../math/vec2": 30, "../utils/Utils": 57, "./Shape": 45 },
            ],
            45: [
                function (a, b, c) {
                    function d(a) {
                        (a = a || {}),
                            (this.body = null),
                            (this.position = e.fromValues(0, 0)),
                            a.position && e.copy(this.position, a.position),
                            (this.angle = a.angle || 0),
                            (this.type = a.type || 0),
                            (this.id = d.idCounter++),
                            (this.boundingRadius = 0),
                            (this.collisionGroup = void 0 !== a.collisionGroup ? a.collisionGroup : 1),
                            (this.collisionResponse = void 0 === a.collisionResponse || a.collisionResponse),
                            (this.collisionMask = void 0 !== a.collisionMask ? a.collisionMask : 1),
                            (this.material = a.material || null),
                            (this.area = 0),
                            (this.sensor = void 0 !== a.sensor && a.sensor),
                            this.type && this.updateBoundingRadius(),
                            this.updateArea();
                    }
                    b.exports = d;
                    var e = a("../math/vec2");
                    (d.idCounter = 0),
                        (d.CIRCLE = 1),
                        (d.PARTICLE = 2),
                        (d.PLANE = 4),
                        (d.CONVEX = 8),
                        (d.LINE = 16),
                        (d.BOX = 32),
                        Object.defineProperty(d, "RECTANGLE", {
                            get: function () {
                                return d.BOX;
                            },
                        }),
                        (d.CAPSULE = 64),
                        (d.HEIGHTFIELD = 128),
                        (d.prototype.computeMomentOfInertia = function (a) {}),
                        (d.prototype.updateBoundingRadius = function () {}),
                        (d.prototype.updateArea = function () {}),
                        (d.prototype.computeAABB = function (a, b, c) {}),
                        (d.prototype.raycast = function (a, b, c, d) {});
                },
                { "../math/vec2": 30 },
            ],
            46: [
                function (a, b, c) {
                    function d(a) {
                        g.call(this, a, g.GS),
                            (a = a || {}),
                            (this.iterations = a.iterations || 10),
                            (this.tolerance = a.tolerance || 1e-7),
                            (this.arrayStep = 30),
                            (this.lambda = new h.ARRAY_TYPE(this.arrayStep)),
                            (this.Bs = new h.ARRAY_TYPE(this.arrayStep)),
                            (this.invCs = new h.ARRAY_TYPE(this.arrayStep)),
                            (this.useZeroRHS = !1),
                            (this.frictionIterations = 0),
                            (this.usedIterations = 0);
                    }
                    var f = a("../math/vec2"),
                        g = a("./Solver"),
                        h = a("../utils/Utils"),
                        i = a("../equations/FrictionEquation");
                    ((((b.exports = d).prototype = new g()).constructor = d).prototype.solve = function (a, b) {
                        this.sortEquations();
                        var w,
                            x,
                            c = 0,
                            g = this.iterations,
                            j = this.frictionIterations,
                            k = this.equations,
                            l = k.length,
                            m = Math.pow(this.tolerance * l, 2),
                            n = b.bodies,
                            o = b.bodies.length,
                            p = (f.add, f.set, this.useZeroRHS),
                            q = this.lambda;
                        if (((this.usedIterations = 0), l))
                            for (var r = 0; r !== o; r++) {
                                n[r].updateSolveMassProperties();
                            }
                        q.length < l && ((q = this.lambda = new h.ARRAY_TYPE(l + this.arrayStep)), (this.Bs = new h.ARRAY_TYPE(l + this.arrayStep)), (this.invCs = new h.ARRAY_TYPE(l + this.arrayStep))),
                            (function (a) {
                                for (var b = a.length; b--; ) a[b] = 0;
                            })(q);
                        for (var t = this.invCs, u = this.Bs, r = ((q = this.lambda), 0); r !== k.length; r++) {
                            var v;
                            ((v = k[r]).timeStep !== a || v.needsUpdate) && ((v.timeStep = a), v.update()), (u[r] = v.computeB(v.a, v.b, a)), (t[r] = v.computeInvC(v.epsilon));
                        }
                        if (0 !== l) {
                            for (r = 0; r !== o; r++) {
                                n[r].resetConstraintVelocity();
                            }
                            if (j) {
                                for (c = 0; c !== j; c++) {
                                    for (x = w = 0; x !== l; x++) {
                                        v = k[x];
                                        var y = d.iterateEquation(x, v, v.epsilon, u, t, q, p, a, c);
                                        w += Math.abs(y);
                                    }
                                    if ((this.usedIterations++, w * w <= m)) break;
                                }
                                for (d.updateMultipliers(k, q, 1 / a), x = 0; x !== l; x++) {
                                    var z = k[x];
                                    if (z instanceof i) {
                                        for (var A = 0, B = 0; B !== z.contactEquations.length; B++) A += z.contactEquations[B].multiplier;
                                        (A *= z.frictionCoefficient / z.contactEquations.length), (z.maxForce = A), (z.minForce = -A);
                                    }
                                }
                            }
                            for (c = 0; c !== g; c++) {
                                for (x = w = 0; x !== l; x++) {
                                    v = k[x];
                                    y = d.iterateEquation(x, v, v.epsilon, u, t, q, p, a, c);
                                    w += Math.abs(y);
                                }
                                if ((this.usedIterations++, w * w <= m)) break;
                            }
                            for (r = 0; r !== o; r++) n[r].addConstraintVelocity();
                            d.updateMultipliers(k, q, 1 / a);
                        }
                    }),
                        (d.updateMultipliers = function (a, b, c) {
                            for (var d = a.length; d--; ) a[d].multiplier = b[d] * c;
                        }),
                        (d.iterateEquation = function (a, b, c, d, e, f, g, h, i) {
                            var j = d[a],
                                k = e[a],
                                l = f[a],
                                m = b.computeGWlambda(),
                                n = b.maxForce,
                                o = b.minForce;
                            g && (j = 0);
                            var p = k * (j - m - c * l),
                                q = l + p;
                            return q < o * h ? (p = o * h - l) : n * h < q && (p = n * h - l), (f[a] += p), b.addToWlambda(p), p;
                        });
                },
                { "../equations/FrictionEquation": 23, "../math/vec2": 30, "../utils/Utils": 57, "./Solver": 47 },
            ],
            47: [
                function (a, b, c) {
                    function d(a, b) {
                        (a = a || {}), e.call(this), (this.type = b), (this.equations = []), (this.equationSortFunction = a.equationSortFunction || !1);
                    }
                    var e = (a("../utils/Utils"), a("../events/EventEmitter"));
                    (((b.exports = d).prototype = new e()).constructor = d).prototype.solve = function (a, b) {
                        throw new Error("Solver.solve should be implemented by subclasses!");
                    };
                    var f = { bodies: [] };
                    (d.prototype.solveIsland = function (a, b) {
                        this.removeAllEquations(), b.equations.length && (this.addEquations(b.equations), (f.bodies.length = 0), b.getBodies(f.bodies), f.bodies.length && this.solve(a, f));
                    }),
                        (d.prototype.sortEquations = function () {
                            this.equationSortFunction && this.equations.sort(this.equationSortFunction);
                        }),
                        (d.prototype.addEquation = function (a) {
                            a.enabled && this.equations.push(a);
                        }),
                        (d.prototype.addEquations = function (a) {
                            for (var b = 0, c = a.length; b !== c; b++) {
                                var d = a[b];
                                d.enabled && this.equations.push(d);
                            }
                        }),
                        (d.prototype.removeEquation = function (a) {
                            var b = this.equations.indexOf(a);
                            -1 !== b && this.equations.splice(b, 1);
                        }),
                        (d.prototype.removeAllEquations = function () {
                            this.equations.length = 0;
                        }),
                        (d.GS = 1),
                        (d.ISLAND = 2);
                },
                { "../events/EventEmitter": 26, "../utils/Utils": 57 },
            ],
            48: [
                function (a, b, c) {
                    function d() {
                        f.apply(this, arguments);
                    }
                    var e = a("../equations/ContactEquation"),
                        f = a("./Pool");
                    ((((b.exports = d).prototype = new f()).constructor = d).prototype.create = function () {
                        return new e();
                    }),
                        (d.prototype.destroy = function (a) {
                            return (a.bodyA = a.bodyB = null), this;
                        });
                },
                { "../equations/ContactEquation": 21, "./Pool": 55 },
            ],
            49: [
                function (a, b, c) {
                    function d() {
                        f.apply(this, arguments);
                    }
                    var e = a("../equations/FrictionEquation"),
                        f = a("./Pool");
                    ((((b.exports = d).prototype = new f()).constructor = d).prototype.create = function () {
                        return new e();
                    }),
                        (d.prototype.destroy = function (a) {
                            return (a.bodyA = a.bodyB = null), this;
                        });
                },
                { "../equations/FrictionEquation": 23, "./Pool": 55 },
            ],
            50: [
                function (a, b, c) {
                    function d() {
                        f.apply(this, arguments);
                    }
                    var e = a("../world/IslandNode"),
                        f = a("./Pool");
                    ((((b.exports = d).prototype = new f()).constructor = d).prototype.create = function () {
                        return new e();
                    }),
                        (d.prototype.destroy = function (a) {
                            return a.reset(), this;
                        });
                },
                { "../world/IslandNode": 60, "./Pool": 55 },
            ],
            51: [
                function (a, b, c) {
                    function d() {
                        f.apply(this, arguments);
                    }
                    var e = a("../world/Island"),
                        f = a("./Pool");
                    ((((b.exports = d).prototype = new f()).constructor = d).prototype.create = function () {
                        return new e();
                    }),
                        (d.prototype.destroy = function (a) {
                            return a.reset(), this;
                        });
                },
                { "../world/Island": 58, "./Pool": 55 },
            ],
            52: [
                function (a, b, c) {
                    function d() {
                        (this.overlappingShapesLastState = new e()), (this.overlappingShapesCurrentState = new e()), (this.recordPool = new f({ size: 16 })), (this.tmpDict = new e()), (this.tmpArray1 = []);
                    }
                    var e = a("./TupleDictionary"),
                        f = (a("./OverlapKeeperRecord"), a("./OverlapKeeperRecordPool"));
                    a("./Utils"),
                        ((b.exports = d).prototype.tick = function () {
                            for (var a = this.overlappingShapesLastState, b = this.overlappingShapesCurrentState, c = a.keys.length; c--; ) {
                                var d = a.keys[c],
                                    e = a.getByKey(d);
                                b.getByKey(d), e && this.recordPool.release(e);
                            }
                            a.reset(), a.copy(b), b.reset();
                        }),
                        (d.prototype.setOverlapping = function (a, b, c, d) {
                            var e = (this.overlappingShapesLastState, this.overlappingShapesCurrentState);
                            if (!e.get(b.id, d.id)) {
                                var f = this.recordPool.get();
                                f.set(a, b, c, d), e.set(b.id, d.id, f);
                            }
                        }),
                        (d.prototype.getNewOverlaps = function (a) {
                            return this.getDiff(this.overlappingShapesLastState, this.overlappingShapesCurrentState, a);
                        }),
                        (d.prototype.getEndOverlaps = function (a) {
                            return this.getDiff(this.overlappingShapesCurrentState, this.overlappingShapesLastState, a);
                        }),
                        (d.prototype.bodiesAreOverlapping = function (a, b) {
                            for (var c = this.overlappingShapesCurrentState, d = c.keys.length; d--; ) {
                                var e = c.keys[d],
                                    f = c.data[e];
                                if ((f.bodyA === a && f.bodyB === b) || (f.bodyA === b && f.bodyB === a)) return !0;
                            }
                            return !1;
                        }),
                        (d.prototype.getDiff = function (a, b, c) {
                            var d = a,
                                e = b;
                            (c = c || []).length = 0;
                            for (var f = e.keys.length; f--; ) {
                                var g = e.keys[f],
                                    h = e.data[g];
                                if (!h) throw new Error("Key " + g + " had no data!");
                                d.data[g] || c.push(h);
                            }
                            return c;
                        }),
                        (d.prototype.isNewOverlap = function (a, b) {
                            var c = 0 | a.id,
                                d = 0 | b.id,
                                e = this.overlappingShapesLastState,
                                f = this.overlappingShapesCurrentState;
                            return !e.get(c, d) && !!f.get(c, d);
                        }),
                        (d.prototype.getNewBodyOverlaps = function (a) {
                            this.tmpArray1.length = 0;
                            var b = this.getNewOverlaps(this.tmpArray1);
                            return this.getBodyDiff(b, a);
                        }),
                        (d.prototype.getEndBodyOverlaps = function (a) {
                            this.tmpArray1.length = 0;
                            var b = this.getEndOverlaps(this.tmpArray1);
                            return this.getBodyDiff(b, a);
                        }),
                        (d.prototype.getBodyDiff = function (a, b) {
                            b = b || [];
                            for (var c = this.tmpDict, d = a.length; d--; ) {
                                var e = a[d];
                                c.set(0 | e.bodyA.id, 0 | e.bodyB.id, e);
                            }
                            for (d = c.keys.length; d--; ) {
                                (e = c.getByKey(c.keys[d])) && b.push(e.bodyA, e.bodyB);
                            }
                            return c.reset(), b;
                        });
                },
                { "./OverlapKeeperRecord": 53, "./OverlapKeeperRecordPool": 54, "./TupleDictionary": 56, "./Utils": 57 },
            ],
            53: [
                function (a, b, c) {
                    function d(a, b, c, d) {
                        (this.shapeA = b), (this.shapeB = d), (this.bodyA = a), (this.bodyB = c);
                    }
                    (b.exports = d).prototype.set = function (a, b, c, e) {
                        d.call(this, a, b, c, e);
                    };
                },
                {},
            ],
            54: [
                function (a, b, c) {
                    function d() {
                        f.apply(this, arguments);
                    }
                    var e = a("./OverlapKeeperRecord"),
                        f = a("./Pool");
                    ((((b.exports = d).prototype = new f()).constructor = d).prototype.create = function () {
                        return new e();
                    }),
                        (d.prototype.destroy = function (a) {
                            return (a.bodyA = a.bodyB = a.shapeA = a.shapeB = null), this;
                        });
                },
                { "./OverlapKeeperRecord": 53, "./Pool": 55 },
            ],
            55: [
                function (a, b, c) {
                    function d(a) {
                        (a = a || {}), (this.objects = []), void 0 !== a.size && this.resize(a.size);
                    }
                    ((b.exports = d).prototype.resize = function (a) {
                        for (var b = this.objects; b.length > a; ) b.pop();
                        for (; b.length < a; ) b.push(this.create());
                        return this;
                    }),
                        (d.prototype.get = function () {
                            var a = this.objects;
                            return a.length ? a.pop() : this.create();
                        }),
                        (d.prototype.release = function (a) {
                            return this.destroy(a), this.objects.push(a), this;
                        });
                },
                {},
            ],
            56: [
                function (a, b, c) {
                    function d() {
                        (this.data = {}), (this.keys = []);
                    }
                    var e = a("./Utils");
                    ((b.exports = d).prototype.getKey = function (a, b) {
                        return (0 | (a |= 0)) == (0 | (b |= 0)) ? -1 : 0 | ((0 | b) < (0 | a) ? (a << 16) | (65535 & b) : (b << 16) | (65535 & a));
                    }),
                        (d.prototype.getByKey = function (a) {
                            return (a |= 0), this.data[a];
                        }),
                        (d.prototype.get = function (a, b) {
                            return this.data[this.getKey(a, b)];
                        }),
                        (d.prototype.set = function (a, b, c) {
                            if (!c) throw new Error("No data!");
                            var d = this.getKey(a, b);
                            return this.data[d] || this.keys.push(d), (this.data[d] = c), d;
                        }),
                        (d.prototype.reset = function () {
                            for (var a = this.data, b = this.keys, c = b.length; c--; ) delete a[b[c]];
                            b.length = 0;
                        }),
                        (d.prototype.copy = function (a) {
                            this.reset(), e.appendArray(this.keys, a.keys);
                            for (var b = a.keys.length; b--; ) {
                                var c = a.keys[b];
                                this.data[c] = a.data[c];
                            }
                        });
                },
                { "./Utils": 57 },
            ],
            57: [
                function (a, b, c) {
                    function d() {}
                    ((b.exports = d).appendArray = function (a, b) {
                        if (b.length < 15e4) a.push.apply(a, b);
                        else for (var c = 0, d = b.length; c !== d; ++c) a.push(b[c]);
                    }),
                        (d.splice = function (a, b, c) {
                            c = c || 1;
                            for (var d = b, e = a.length - c; d < e; d++) a[d] = a[d + c];
                            a.length = e;
                        }),
                        (d.ARRAY_TYPE = "undefined" != typeof P2_ARRAY_TYPE ? P2_ARRAY_TYPE : "undefined" != typeof Float32Array ? Float32Array : Array),
                        (d.extend = function (a, b) {
                            for (var c in b) a[c] = b[c];
                        }),
                        (d.defaults = function (a, b) {
                            for (var c in ((a = a || {}), b)) c in a || (a[c] = b[c]);
                            return a;
                        });
                },
                {},
            ],
            58: [
                function (a, b, c) {
                    function d() {
                        (this.equations = []), (this.bodies = []);
                    }
                    var e = a("../objects/Body");
                    (b.exports = d).prototype.reset = function () {
                        this.equations.length = this.bodies.length = 0;
                    };
                    var f = [];
                    (d.prototype.getBodies = function (a) {
                        for (var b = a || [], c = this.equations, d = (f.length = 0); d !== c.length; d++) {
                            var e = c[d];
                            -1 === f.indexOf(e.bodyA.id) && (b.push(e.bodyA), f.push(e.bodyA.id)), -1 === f.indexOf(e.bodyB.id) && (b.push(e.bodyB), f.push(e.bodyB.id));
                        }
                        return b;
                    }),
                        (d.prototype.wantsToSleep = function () {
                            for (var a = 0; a < this.bodies.length; a++) {
                                var b = this.bodies[a];
                                if (b.type === e.DYNAMIC && !b.wantsToSleep) return !1;
                            }
                            return !0;
                        }),
                        (d.prototype.sleep = function () {
                            for (var a = 0; a < this.bodies.length; a++) this.bodies[a].sleep();
                            return !0;
                        });
                },
                { "../objects/Body": 31 },
            ],
            59: [
                function (a, b, c) {
                    function d(a) {
                        (this.nodePool = new e({ size: 16 })), (this.islandPool = new f({ size: 8 })), (this.equations = []), (this.islands = []), (this.nodes = []), (this.queue = []);
                    }
                    var e = (a("../math/vec2"), a("./Island"), a("./IslandNode"), a("./../utils/IslandNodePool")),
                        f = a("./../utils/IslandPool"),
                        g = a("../objects/Body");
                    ((b.exports = d).getUnvisitedNode = function (a) {
                        for (var b = a.length, c = 0; c !== b; c++) {
                            var d = a[c];
                            if (!d.visited && d.body.type === g.DYNAMIC) return d;
                        }
                        return !1;
                    }),
                        (d.prototype.visit = function (a, b, c) {
                            b.push(a.body);
                            for (var d = a.equations.length, e = 0; e !== d; e++) {
                                var f = a.equations[e];
                                -1 === c.indexOf(f) && c.push(f);
                            }
                        }),
                        (d.prototype.bfs = function (a, b, c) {
                            var e = this.queue;
                            for (e.length = 0, e.push(a), a.visited = !0, this.visit(a, b, c); e.length; )
                                for (var f, h = e.pop(); (f = d.getUnvisitedNode(h.neighbors)); ) (f.visited = !0), this.visit(f, b, c), f.body.type === g.DYNAMIC && e.push(f);
                        }),
                        (d.prototype.split = function (a) {
                            for (var b = a.bodies, c = this.nodes, e = this.equations; c.length; ) this.nodePool.release(c.pop());
                            for (var f = 0; f !== b.length; f++) {
                                var g = this.nodePool.get();
                                (g.body = b[f]), c.push(g);
                            }
                            for (var h = 0; h !== e.length; h++) {
                                var i = e[h],
                                    j = ((f = b.indexOf(i.bodyA)), b.indexOf(i.bodyB)),
                                    k = c[f],
                                    l = c[j];
                                k.neighbors.push(l), l.neighbors.push(k), k.equations.push(i), l.equations.push(i);
                            }
                            var m = this.islands;
                            for (f = 0; f < m.length; f++) this.islandPool.release(m[f]);
                            m.length = 0;
                            for (var n; (n = d.getUnvisitedNode(c)); ) {
                                var o = this.islandPool.get();
                                this.bfs(n, o.bodies, o.equations), m.push(o);
                            }
                            return m;
                        });
                },
                { "../math/vec2": 30, "../objects/Body": 31, "./../utils/IslandNodePool": 50, "./../utils/IslandPool": 51, "./Island": 58, "./IslandNode": 60 },
            ],
            60: [
                function (a, b, c) {
                    function d(a) {
                        (this.body = a), (this.neighbors = []), (this.equations = []), (this.visited = !1);
                    }
                    (b.exports = d).prototype.reset = function () {
                        (this.equations.length = 0), (this.neighbors.length = 0), (this.visited = !1), (this.body = null);
                    };
                },
                {},
            ],
            61: [
                function (a, b, c) {
                    function d(a) {
                        l.apply(this),
                            (a = a || {}),
                            (this.springs = []),
                            (this.bodies = []),
                            (this.disabledBodyCollisionPairs = []),
                            (this.solver = a.solver || new e()),
                            (this.narrowphase = new r(this)),
                            (this.islandManager = new u()),
                            (this.gravity = f.fromValues(0, -9.78)),
                            a.gravity && f.copy(this.gravity, a.gravity),
                            (this.frictionGravity = f.length(this.gravity) || 10),
                            (this.useWorldGravityAsFrictionGravity = !0),
                            (this.useFrictionGravityOnZeroGravity = !0),
                            (this.broadphase = a.broadphase || new q()),
                            this.broadphase.setWorld(this),
                            (this.constraints = []),
                            (this.defaultMaterial = new n()),
                            (this.defaultContactMaterial = new o(this.defaultMaterial, this.defaultMaterial)),
                            (this.lastTimeStep = 1 / 60),
                            (this.applySpringForces = !0),
                            (this.applyDamping = !0),
                            (this.applyGravity = !0),
                            (this.solveConstraints = !0),
                            (this.contactMaterials = []),
                            (this.time = 0),
                            (this.accumulator = 0),
                            (this.stepping = !1),
                            (this.bodiesToBeRemoved = []),
                            (this.islandSplit = void 0 === a.islandSplit || !!a.islandSplit),
                            (this.emitImpactEvent = !0),
                            (this._constraintIdCounter = 0),
                            (this._bodyIdCounter = 0),
                            (this.postStepEvent = { type: "postStep" }),
                            (this.addBodyEvent = { type: "addBody", body: null }),
                            (this.removeBodyEvent = { type: "removeBody", body: null }),
                            (this.addSpringEvent = { type: "addSpring", spring: null }),
                            (this.impactEvent = { type: "impact", bodyA: null, bodyB: null, shapeA: null, shapeB: null, contactEquation: null }),
                            (this.postBroadphaseEvent = { type: "postBroadphase", pairs: null }),
                            (this.sleepMode = d.NO_SLEEPING),
                            (this.beginContactEvent = { type: "beginContact", shapeA: null, shapeB: null, bodyA: null, bodyB: null, contactEquations: [] }),
                            (this.endContactEvent = { type: "endContact", shapeA: null, shapeB: null, bodyA: null, bodyB: null }),
                            (this.preSolveEvent = { type: "preSolve", contactEquations: null, frictionEquations: null }),
                            (this.overlappingShapesLastState = { keys: [] }),
                            (this.overlappingShapesCurrentState = { keys: [] }),
                            (this.overlapKeeper = new t());
                    }
                    var e = a("../solver/GSSolver"),
                        f = (a("../solver/Solver"), a("../collision/Ray"), a("../math/vec2")),
                        g = a("../shapes/Circle"),
                        h = a("../shapes/Convex"),
                        i = (a("../shapes/Line"), a("../shapes/Plane")),
                        j = a("../shapes/Capsule"),
                        k = a("../shapes/Particle"),
                        l = a("../events/EventEmitter"),
                        m = a("../objects/Body"),
                        n = (a("../shapes/Shape"), a("../objects/LinearSpring"), a("../material/Material")),
                        o = a("../material/ContactMaterial"),
                        p =
                            (a("../constraints/DistanceConstraint"),
                            a("../constraints/Constraint"),
                            a("../constraints/LockConstraint"),
                            a("../constraints/RevoluteConstraint"),
                            a("../constraints/PrismaticConstraint"),
                            a("../constraints/GearConstraint"),
                            a("../../package.json"),
                            a("../collision/Broadphase"),
                            a("../collision/AABB")),
                        q = a("../collision/SAPBroadphase"),
                        r = a("../collision/Narrowphase"),
                        s = a("../utils/Utils"),
                        t = a("../utils/OverlapKeeper"),
                        u = a("./IslandManager");
                    a("../objects/RotationalSpring"),
                        ((((b.exports = d).prototype = new Object(l.prototype)).constructor = d).NO_SLEEPING = 1),
                        (d.BODY_SLEEPING = 2),
                        (d.ISLAND_SLEEPING = 4),
                        (d.prototype.addConstraint = function (a) {
                            this.constraints.push(a);
                        }),
                        (d.prototype.addContactMaterial = function (a) {
                            this.contactMaterials.push(a);
                        }),
                        (d.prototype.removeContactMaterial = function (a) {
                            var b = this.contactMaterials.indexOf(a);
                            -1 !== b && s.splice(this.contactMaterials, b, 1);
                        }),
                        (d.prototype.getContactMaterial = function (a, b) {
                            for (var c = this.contactMaterials, d = 0, e = c.length; d !== e; d++) {
                                var f = c[d];
                                if ((f.materialA.id === a.id && f.materialB.id === b.id) || (f.materialA.id === b.id && f.materialB.id === a.id)) return f;
                            }
                            return !1;
                        }),
                        (d.prototype.removeConstraint = function (a) {
                            var b = this.constraints.indexOf(a);
                            -1 !== b && s.splice(this.constraints, b, 1);
                        });
                    var v = (f.create(), f.create(), f.create(), f.create(), f.create(), f.create(), f.create()),
                        w = f.fromValues(0, 0),
                        x = f.fromValues(0, 0);
                    f.fromValues(0, 0),
                        f.fromValues(0, 0),
                        (d.prototype.step = function (a, b, c) {
                            if (((c = c || 10), 0 === (b = b || 0))) this.internalStep(a), (this.time += a);
                            else {
                                this.accumulator += b;
                                for (var d = 0; this.accumulator >= a && d < c; ) this.internalStep(a), (this.time += a), (this.accumulator -= a), d++;
                                for (var e = (this.accumulator % a) / a, g = 0; g !== this.bodies.length; g++) {
                                    var h = this.bodies[g];
                                    f.lerp(h.interpolatedPosition, h.previousPosition, h.position, e), (h.interpolatedAngle = h.previousAngle + e * (h.angle - h.previousAngle));
                                }
                            }
                        });
                    var y = [];
                    (d.prototype.internalStep = function (a) {
                        this.stepping = !0;
                        var b = this.springs.length,
                            c = this.springs,
                            e = this.bodies,
                            g = this.gravity,
                            h = this.solver,
                            i = this.bodies.length,
                            j = this.broadphase,
                            k = this.narrowphase,
                            l = this.constraints,
                            n = v,
                            o = (f.scale, f.add),
                            p = (f.rotate, this.islandManager);
                        if ((this.overlapKeeper.tick(), (this.lastTimeStep = a), this.useWorldGravityAsFrictionGravity)) {
                            var q = f.length(this.gravity);
                            (0 === q && this.useFrictionGravityOnZeroGravity) || (this.frictionGravity = q);
                        }
                        if (this.applyGravity)
                            for (var r = 0; r !== i; r++) {
                                var u = (t = e[r]).force;
                                t.type === m.DYNAMIC && t.sleepState !== m.SLEEPING && (f.scale(n, g, t.mass * t.gravityScale), o(u, u, n));
                            }
                        if (this.applySpringForces)
                            for (r = 0; r !== b; r++) {
                                c[r].applyForce();
                            }
                        if (this.applyDamping)
                            for (r = 0; r !== i; r++) {
                                var t;
                                (t = e[r]).type === m.DYNAMIC && t.applyDamping(a);
                            }
                        var x = j.getCollisionPairs(this),
                            z = this.disabledBodyCollisionPairs;
                        for (r = z.length - 2; 0 <= r; r -= 2) for (var A = x.length - 2; 0 <= A; A -= 2) ((z[r] === x[A] && z[r + 1] === x[A + 1]) || (z[r + 1] === x[A] && z[r] === x[A + 1])) && x.splice(A, 2);
                        var B = l.length;
                        for (r = 0; r !== B; r++) {
                            var C = l[r];
                            if (!C.collideConnected) for (A = x.length - 2; 0 <= A; A -= 2) ((C.bodyA === x[A] && C.bodyB === x[A + 1]) || (C.bodyB === x[A] && C.bodyA === x[A + 1])) && x.splice(A, 2);
                        }
                        (this.postBroadphaseEvent.pairs = x), this.emit(this.postBroadphaseEvent), (this.postBroadphaseEvent.pairs = null), k.reset(this);
                        r = 0;
                        for (var D = x.length; r !== D; r += 2)
                            for (var E = x[r], F = x[r + 1], G = 0, H = E.shapes.length; G !== H; G++)
                                for (var I = E.shapes[G], J = I.position, K = I.angle, L = 0, M = F.shapes.length; L !== M; L++) {
                                    var N = F.shapes[L],
                                        O = N.position,
                                        P = N.angle,
                                        Q = this.defaultContactMaterial;
                                    if (I.material && N.material) {
                                        var R = this.getContactMaterial(I.material, N.material);
                                        R && (Q = R);
                                    }
                                    this.runNarrowphase(k, E, I, J, K, F, N, O, P, Q, this.frictionGravity);
                                }
                        for (r = 0; r !== i; r++) {
                            (S = e[r])._wakeUpAfterNarrowphase && (S.wakeUp(), (S._wakeUpAfterNarrowphase = !1));
                        }
                        if (this.has("endContact")) {
                            this.overlapKeeper.getEndOverlaps(y);
                            var T = this.endContactEvent;
                            for (L = y.length; L--; ) {
                                var U = y[L];
                                (T.shapeA = U.shapeA), (T.shapeB = U.shapeB), (T.bodyA = U.bodyA), (T.bodyB = U.bodyB), this.emit(T);
                            }
                            y.length = 0;
                        }
                        var V = this.preSolveEvent;
                        (V.contactEquations = k.contactEquations), (V.frictionEquations = k.frictionEquations), this.emit(V), (V.contactEquations = V.frictionEquations = null);
                        B = l.length;
                        for (r = 0; r !== B; r++) l[r].update();
                        if (k.contactEquations.length || k.frictionEquations.length || B)
                            if (this.islandSplit) {
                                for (p.equations.length = 0, s.appendArray(p.equations, k.contactEquations), s.appendArray(p.equations, k.frictionEquations), r = 0; r !== B; r++) s.appendArray(p.equations, l[r].equations);
                                p.split(this);
                                for (r = 0; r !== p.islands.length; r++) {
                                    (W = p.islands[r]).equations.length && h.solveIsland(a, W);
                                }
                            } else {
                                for (h.addEquations(k.contactEquations), h.addEquations(k.frictionEquations), r = 0; r !== B; r++) h.addEquations(l[r].equations);
                                this.solveConstraints && h.solve(a, this), h.removeAllEquations();
                            }
                        for (r = 0; r !== i; r++) {
                            var S;
                            (S = e[r]).integrate(a);
                        }
                        for (r = 0; r !== i; r++) e[r].setZeroForce();
                        if (this.emitImpactEvent && this.has("impact")) {
                            var X = this.impactEvent;
                            for (r = 0; r !== k.contactEquations.length; r++) {
                                var Y = k.contactEquations[r];
                                Y.firstImpact && ((X.bodyA = Y.bodyA), (X.bodyB = Y.bodyB), (X.shapeA = Y.shapeA), (X.shapeB = Y.shapeB), (X.contactEquation = Y), this.emit(X));
                            }
                        }
                        if (this.sleepMode === d.BODY_SLEEPING) for (r = 0; r !== i; r++) e[r].sleepTick(this.time, !1, a);
                        else if (this.sleepMode === d.ISLAND_SLEEPING && this.islandSplit) {
                            for (r = 0; r !== i; r++) e[r].sleepTick(this.time, !0, a);
                            for (r = 0; r < this.islandManager.islands.length; r++) {
                                var W;
                                (W = this.islandManager.islands[r]).wantsToSleep() && W.sleep();
                            }
                        }
                        this.stepping = !1;
                        var Z = this.bodiesToBeRemoved;
                        for (r = 0; r !== Z.length; r++) this.removeBody(Z[r]);
                        (Z.length = 0), this.emit(this.postStepEvent);
                    }),
                        (d.prototype.runNarrowphase = function (a, b, c, d, e, g, h, i, j, k, l) {
                            if (0 != (c.collisionGroup & h.collisionMask) && 0 != (h.collisionGroup & c.collisionMask)) {
                                f.rotate(w, d, b.angle), f.rotate(x, i, g.angle), f.add(w, w, b.position), f.add(x, x, g.position);
                                var p,
                                    n = e + b.angle,
                                    o = j + g.angle;
                                (a.enableFriction = 0 < k.friction),
                                    (a.frictionCoefficient = k.friction),
                                    (p = b.type === m.STATIC || b.type === m.KINEMATIC ? g.mass : g.type === m.STATIC || g.type === m.KINEMATIC ? b.mass : (b.mass * g.mass) / (b.mass + g.mass)),
                                    (a.slipForce = k.friction * l * p),
                                    (a.restitution = k.restitution),
                                    (a.surfaceVelocity = k.surfaceVelocity),
                                    (a.frictionStiffness = k.frictionStiffness),
                                    (a.frictionRelaxation = k.frictionRelaxation),
                                    (a.stiffness = k.stiffness),
                                    (a.relaxation = k.relaxation),
                                    (a.contactSkinSize = k.contactSkinSize),
                                    (a.enabledEquations = b.collisionResponse && g.collisionResponse && c.collisionResponse && h.collisionResponse);
                                var q = a[c.type | h.type],
                                    r = 0;
                                if (q) {
                                    var s = c.sensor || h.sensor,
                                        t = a.frictionEquations.length;
                                    r = c.type < h.type ? q.call(a, b, c, w, n, g, h, x, o, s) : q.call(a, g, h, x, o, b, c, w, n, s);
                                    var u = a.frictionEquations.length - t;
                                    if (r) {
                                        if (
                                            (b.allowSleep &&
                                                b.type === m.DYNAMIC &&
                                                b.sleepState === m.SLEEPING &&
                                                g.sleepState === m.AWAKE &&
                                                g.type !== m.STATIC &&
                                                f.squaredLength(g.velocity) + Math.pow(g.angularVelocity, 2) >= 2 * Math.pow(g.sleepSpeedLimit, 2) &&
                                                (b._wakeUpAfterNarrowphase = !0),
                                            g.allowSleep &&
                                                g.type === m.DYNAMIC &&
                                                g.sleepState === m.SLEEPING &&
                                                b.sleepState === m.AWAKE &&
                                                b.type !== m.STATIC &&
                                                f.squaredLength(b.velocity) + Math.pow(b.angularVelocity, 2) >= 2 * Math.pow(b.sleepSpeedLimit, 2) &&
                                                (g._wakeUpAfterNarrowphase = !0),
                                            this.overlapKeeper.setOverlapping(b, c, g, h),
                                            this.has("beginContact") && this.overlapKeeper.isNewOverlap(c, h))
                                        ) {
                                            var v = this.beginContactEvent;
                                            if (((v.shapeA = c), (v.shapeB = h), (v.bodyA = b), (v.bodyB = g), (v.contactEquations.length = 0), "number" == typeof r))
                                                for (var y = a.contactEquations.length - r; y < a.contactEquations.length; y++) v.contactEquations.push(a.contactEquations[y]);
                                            this.emit(v);
                                        }
                                        if ("number" == typeof r && 1 < u)
                                            for (y = a.frictionEquations.length - u; y < a.frictionEquations.length; y++) {
                                                var z = a.frictionEquations[y];
                                                z.setSlipForce(z.getSlipForce() / u);
                                            }
                                    }
                                }
                            }
                        }),
                        (d.prototype.addSpring = function (a) {
                            this.springs.push(a);
                            var b = this.addSpringEvent;
                            (b.spring = a), this.emit(b), (b.spring = null);
                        }),
                        (d.prototype.removeSpring = function (a) {
                            var b = this.springs.indexOf(a);
                            -1 !== b && s.splice(this.springs, b, 1);
                        }),
                        (d.prototype.addBody = function (a) {
                            if (-1 === this.bodies.indexOf(a)) {
                                this.bodies.push(a);
                                var b = (a.world = this).addBodyEvent;
                                (b.body = a), this.emit(b), (b.body = null);
                            }
                        }),
                        (d.prototype.removeBody = function (a) {
                            if (this.stepping) this.bodiesToBeRemoved.push(a);
                            else {
                                a.world = null;
                                var b = this.bodies.indexOf(a);
                                -1 !== b && (s.splice(this.bodies, b, 1), (this.removeBodyEvent.body = a).resetConstraintVelocity(), this.emit(this.removeBodyEvent), (this.removeBodyEvent.body = null));
                            }
                        }),
                        (d.prototype.getBodyById = function (a) {
                            for (var b = this.bodies, c = 0; c < b.length; c++) {
                                var d = b[c];
                                if (d.id === a) return d;
                            }
                            return !1;
                        }),
                        (d.prototype.disableBodyCollision = function (a, b) {
                            this.disabledBodyCollisionPairs.push(a, b);
                        }),
                        (d.prototype.enableBodyCollision = function (a, b) {
                            for (var c = this.disabledBodyCollisionPairs, d = 0; d < c.length; d += 2) if ((c[d] === a && c[d + 1] === b) || (c[d + 1] === a && c[d] === b)) return void c.splice(d, 2);
                        }),
                        (d.prototype.clear = function () {
                            (this.time = 0), this.solver && this.solver.equations.length && this.solver.removeAllEquations();
                            for (var a = this.constraints, b = a.length - 1; 0 <= b; b--) this.removeConstraint(a[b]);
                            var c = this.bodies;
                            for (b = c.length - 1; 0 <= b; b--) this.removeBody(c[b]);
                            var e = this.springs;
                            for (b = e.length - 1; 0 <= b; b--) this.removeSpring(e[b]);
                            var f = this.contactMaterials;
                            for (b = f.length - 1; 0 <= b; b--) this.removeContactMaterial(f[b]);
                            d.apply(this);
                        });
                    var z = f.create(),
                        A = (f.fromValues(0, 0), f.fromValues(0, 0));
                    (d.prototype.hitTest = function (a, b, c) {
                        c = c || 0;
                        var d = new m({ position: a }),
                            e = new k(),
                            l = a,
                            o = z,
                            p = A;
                        d.addShape(e);
                        for (var q = this.narrowphase, r = [], s = 0, t = b.length; s !== t; s++)
                            for (var u = b[s], v = 0, w = u.shapes.length; v !== w; v++) {
                                var x = u.shapes[v];
                                f.rotate(o, x.position, u.angle), f.add(o, o, u.position);
                                var y = x.angle + u.angle;
                                ((x instanceof g && q.circleParticle(u, x, o, y, d, e, l, 0, !0)) ||
                                    (x instanceof h && q.particleConvex(d, e, l, 0, u, x, o, y, !0)) ||
                                    (x instanceof i && q.particlePlane(d, e, l, 0, u, x, o, y, !0)) ||
                                    (x instanceof j && q.particleCapsule(d, e, l, 0, u, x, o, y, !0)) ||
                                    (x instanceof k && f.squaredLength(f.sub(p, o, a)) < c * c)) &&
                                    r.push(u);
                            }
                        return r;
                    }),
                        (d.prototype.setGlobalStiffness = function (a) {
                            for (var b = this.constraints, c = 0; c !== b.length; c++)
                                for (var d = b[c], e = 0; e !== d.equations.length; e++) {
                                    var f = d.equations[e];
                                    (f.stiffness = a), (f.needsUpdate = !0);
                                }
                            var g = this.contactMaterials;
                            for (c = 0; c !== g.length; c++) {
                                (d = g[c]).stiffness = d.frictionStiffness = a;
                            }
                            (d = this.defaultContactMaterial).stiffness = d.frictionStiffness = a;
                        }),
                        (d.prototype.setGlobalRelaxation = function (a) {
                            for (var b = 0; b !== this.constraints.length; b++)
                                for (var c = this.constraints[b], d = 0; d !== c.equations.length; d++) {
                                    var e = c.equations[d];
                                    (e.relaxation = a), (e.needsUpdate = !0);
                                }
                            for (b = 0; b !== this.contactMaterials.length; b++) {
                                (c = this.contactMaterials[b]).relaxation = c.frictionRelaxation = a;
                            }
                            (c = this.defaultContactMaterial).relaxation = c.frictionRelaxation = a;
                        });
                    var B = new p(),
                        C = [];
                    d.prototype.raycast = function (a, b) {
                        return b.getAABB(B), this.broadphase.aabbQuery(this, B, C), b.intersectBodies(a, C), (C.length = 0), a.hasHit();
                    };
                },
                {
                    "../../package.json": 6,
                    "../collision/AABB": 7,
                    "../collision/Broadphase": 8,
                    "../collision/Narrowphase": 10,
                    "../collision/Ray": 11,
                    "../collision/SAPBroadphase": 13,
                    "../constraints/Constraint": 14,
                    "../constraints/DistanceConstraint": 15,
                    "../constraints/GearConstraint": 16,
                    "../constraints/LockConstraint": 17,
                    "../constraints/PrismaticConstraint": 18,
                    "../constraints/RevoluteConstraint": 19,
                    "../events/EventEmitter": 26,
                    "../material/ContactMaterial": 27,
                    "../material/Material": 28,
                    "../math/vec2": 30,
                    "../objects/Body": 31,
                    "../objects/LinearSpring": 32,
                    "../objects/RotationalSpring": 33,
                    "../shapes/Capsule": 38,
                    "../shapes/Circle": 39,
                    "../shapes/Convex": 40,
                    "../shapes/Line": 42,
                    "../shapes/Particle": 43,
                    "../shapes/Plane": 44,
                    "../shapes/Shape": 45,
                    "../solver/GSSolver": 46,
                    "../solver/Solver": 47,
                    "../utils/OverlapKeeper": 52,
                    "../utils/Utils": 57,
                    "./IslandManager": 59,
                },
            ],
        },
        {},
        [36]
    )(36);
}),
    function () {
        var a = this,
            b = b || {};
        return (
            (b.game = null),
            (b.WEBGL_RENDERER = 0),
            (b.CANVAS_RENDERER = 1),
            (b.VERSION = "v2.2.9"),
            (b._UID = 0),
            "undefined" != typeof Float32Array ? ((b.Float32Array = Float32Array), (b.Uint16Array = Uint16Array), (b.Uint32Array = Uint32Array), (b.ArrayBuffer = ArrayBuffer)) : ((b.Float32Array = Array), (b.Uint16Array = Array)),
            (b.PI_2 = 2 * Math.PI),
            (b.RAD_TO_DEG = 180 / Math.PI),
            (b.DEG_TO_RAD = Math.PI / 180),
            (b.RETINA_PREFIX = "@2x"),
            (b.DisplayObject = function () {
                (this.position = new b.Point(0, 0)),
                    (this.scale = new b.Point(1, 1)),
                    (this.pivot = new b.Point(0, 0)),
                    (this.rotation = 0),
                    (this.alpha = 1),
                    (this.visible = !0),
                    (this.hitArea = null),
                    (this.renderable = !1),
                    (this.parent = null),
                    (this.worldAlpha = 1),
                    (this.worldTransform = new b.Matrix()),
                    (this.worldPosition = new b.Point(0, 0)),
                    (this.worldScale = new b.Point(1, 1)),
                    (this.worldRotation = 0),
                    (this.filterArea = null),
                    (this._sr = 0),
                    (this._cr = 1),
                    (this._bounds = new b.Rectangle(0, 0, 0, 0)),
                    (this._currentBounds = null),
                    (this._mask = null),
                    (this._cacheAsBitmap = !1),
                    (this._cacheIsDirty = !1);
            }),
            (b.DisplayObject.prototype.constructor = b.DisplayObject),
            (b.DisplayObject.prototype = {
                destroy: function () {
                    if (this.children) {
                        for (var a = this.children.length; a--; ) this.children[a].destroy();
                        this.children = [];
                    }
                    (this.hitArea = null),
                        (this.parent = null),
                        (this.worldTransform = null),
                        (this.filterArea = null),
                        (this.renderable = !1),
                        (this._bounds = null),
                        (this._currentBounds = null),
                        (this._mask = null),
                        this._destroyCachedSprite();
                },
                updateTransform: function (a) {
                    if (!a && !this.parent && !this.game) return this;
                    var c = this.parent;
                    a ? (c = a) : this.parent || (c = this.game.world);
                    var d,
                        e,
                        f,
                        g,
                        h,
                        i,
                        j = c.worldTransform,
                        k = this.worldTransform;
                    return (
                        this.rotation % b.PI_2
                            ? (this.rotation !== this.rotationCache && ((this.rotationCache = this.rotation), (this._sr = Math.sin(this.rotation)), (this._cr = Math.cos(this.rotation))),
                              (d = this._cr * this.scale.x),
                              (e = this._sr * this.scale.x),
                              (f = -this._sr * this.scale.y),
                              (g = this._cr * this.scale.y),
                              (h = this.position.x),
                              (i = this.position.y),
                              (this.pivot.x || this.pivot.y) && ((h -= this.pivot.x * d + this.pivot.y * f), (i -= this.pivot.x * e + this.pivot.y * g)),
                              (k.a = d * j.a + e * j.c),
                              (k.b = d * j.b + e * j.d),
                              (k.c = f * j.a + g * j.c),
                              (k.d = f * j.b + g * j.d))
                            : ((d = this.scale.x), (g = this.scale.y), (h = this.position.x - this.pivot.x * d), (i = this.position.y - this.pivot.y * g), (k.a = d * j.a), (k.b = d * j.b), (k.c = g * j.c), (k.d = g * j.d)),
                        (k.tx = h * j.a + i * j.c + j.tx),
                        (k.ty = h * j.b + i * j.d + j.ty),
                        (this.worldAlpha = this.alpha * c.worldAlpha),
                        this.worldPosition.set(k.tx, k.ty),
                        this.worldScale.set(this.scale.x * Math.sqrt(k.a * k.a + k.c * k.c), this.scale.y * Math.sqrt(k.b * k.b + k.d * k.d)),
                        (this.worldRotation = Math.atan2(-k.c, k.d)),
                        (this._currentBounds = null),
                        this.transformCallback && this.transformCallback.call(this.transformCallbackContext, k, j),
                        this
                    );
                },
                preUpdate: function () {},
                generateTexture: function (a, c, d) {
                    var e = this.getLocalBounds(),
                        f = new b.RenderTexture(0 | e.width, 0 | e.height, d, c, a);
                    return (b.DisplayObject._tempMatrix.tx = -e.x), (b.DisplayObject._tempMatrix.ty = -e.y), f.render(this, b.DisplayObject._tempMatrix), f;
                },
                updateCache: function () {
                    return this._generateCachedSprite(), this;
                },
                toGlobal: function (a) {
                    return this.updateTransform(), this.worldTransform.apply(a);
                },
                toLocal: function (a, b) {
                    return b && (a = b.toGlobal(a)), this.updateTransform(), this.worldTransform.applyInverse(a);
                },
                _renderCachedSprite: function (a) {
                    (this._cachedSprite.worldAlpha = this.worldAlpha), a.gl ? b.Sprite.prototype._renderWebGL.call(this._cachedSprite, a) : b.Sprite.prototype._renderCanvas.call(this._cachedSprite, a);
                },
                _generateCachedSprite: function () {
                    this._cacheAsBitmap = !1;
                    var a = this.getLocalBounds();
                    if (((a.width = Math.max(1, Math.ceil(a.width))), (a.height = Math.max(1, Math.ceil(a.height))), this.updateTransform(), this._cachedSprite)) this._cachedSprite.texture.resize(a.width, a.height);
                    else {
                        var c = new b.RenderTexture(a.width, a.height);
                        (this._cachedSprite = new b.Sprite(c)), (this._cachedSprite.worldTransform = this.worldTransform);
                    }
                    var d = this._filters;
                    (this._filters = null),
                        (this._cachedSprite.filters = d),
                        (b.DisplayObject._tempMatrix.tx = -a.x),
                        (b.DisplayObject._tempMatrix.ty = -a.y),
                        this._cachedSprite.texture.render(this, b.DisplayObject._tempMatrix, !0),
                        (this._cachedSprite.anchor.x = -a.x / a.width),
                        (this._cachedSprite.anchor.y = -a.y / a.height),
                        (this._filters = d),
                        (this._cacheAsBitmap = !0);
                },
                _destroyCachedSprite: function () {
                    this._cachedSprite && (this._cachedSprite.texture.destroy(!0), (this._cachedSprite = null));
                },
            }),
            (b.DisplayObject.prototype.displayObjectUpdateTransform = b.DisplayObject.prototype.updateTransform),
            Object.defineProperties(b.DisplayObject.prototype, {
                x: {
                    get: function () {
                        return this.position.x;
                    },
                    set: function (a) {
                        this.position.x = a;
                    },
                },
                y: {
                    get: function () {
                        return this.position.y;
                    },
                    set: function (a) {
                        this.position.y = a;
                    },
                },
                worldVisible: {
                    get: function () {
                        if (this.visible) {
                            var a = this.parent;
                            if (!a) return this.visible;
                            do {
                                if (!a.visible) return !1;
                                a = a.parent;
                            } while (a);
                            return !0;
                        }
                        return !1;
                    },
                },
                mask: {
                    get: function () {
                        return this._mask;
                    },
                    set: function (a) {
                        this._mask && (this._mask.isMask = !1), (this._mask = a) && (this._mask.isMask = !0);
                    },
                },
                filters: {
                    get: function () {
                        return this._filters;
                    },
                    set: function (a) {
                        if (Array.isArray(a)) {
                            for (var c = [], d = 0; d < a.length; d++) for (var e = a[d].passes, f = 0; f < e.length; f++) c.push(e[f]);
                            this._filterBlock = { target: this, filterPasses: c };
                        }
                        (this._filters = a), this.blendMode && this.blendMode === b.blendModes.MULTIPLY && (this.blendMode = b.blendModes.NORMAL);
                    },
                },
                cacheAsBitmap: {
                    get: function () {
                        return this._cacheAsBitmap;
                    },
                    set: function (a) {
                        this._cacheAsBitmap !== a && (a ? this._generateCachedSprite() : this._destroyCachedSprite(), (this._cacheAsBitmap = a));
                    },
                },
            }),
            (b.DisplayObjectContainer = function () {
                b.DisplayObject.call(this), (this.children = []), (this.ignoreChildInput = !1);
            }),
            (b.DisplayObjectContainer.prototype = Object.create(b.DisplayObject.prototype)),
            (b.DisplayObjectContainer.prototype.constructor = b.DisplayObjectContainer),
            (b.DisplayObjectContainer.prototype.addChild = function (a) {
                return this.addChildAt(a, this.children.length);
            }),
            (b.DisplayObjectContainer.prototype.addChildAt = function (a, b) {
                if (0 <= b && b <= this.children.length) return a.parent && a.parent.removeChild(a), (a.parent = this).children.splice(b, 0, a), a;
                throw new Error(a + "addChildAt: The index " + b + " supplied is out of bounds " + this.children.length);
            }),
            (b.DisplayObjectContainer.prototype.swapChildren = function (a, b) {
                if (a !== b) {
                    var c = this.getChildIndex(a),
                        d = this.getChildIndex(b);
                    if (c < 0 || d < 0) throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");
                    (this.children[c] = b), (this.children[d] = a);
                }
            }),
            (b.DisplayObjectContainer.prototype.getChildIndex = function (a) {
                var b = this.children.indexOf(a);
                if (-1 === b) throw new Error("The supplied DisplayObject must be a child of the caller");
                return b;
            }),
            (b.DisplayObjectContainer.prototype.setChildIndex = function (a, b) {
                if (b < 0 || b >= this.children.length) throw new Error("The supplied index is out of bounds");
                var c = this.getChildIndex(a);
                this.children.splice(c, 1), this.children.splice(b, 0, a);
            }),
            (b.DisplayObjectContainer.prototype.getChildAt = function (a) {
                if (a < 0 || a >= this.children.length) throw new Error("getChildAt: Supplied index " + a + " does not exist in the child list, or the supplied DisplayObject must be a child of the caller");
                return this.children[a];
            }),
            (b.DisplayObjectContainer.prototype.removeChild = function (a) {
                var b = this.children.indexOf(a);
                if (-1 !== b) return this.removeChildAt(b);
            }),
            (b.DisplayObjectContainer.prototype.removeChildAt = function (a) {
                var b = this.getChildAt(a);
                return b && ((b.parent = void 0), this.children.splice(a, 1)), b;
            }),
            (b.DisplayObjectContainer.prototype.removeChildren = function (a, b) {
                void 0 === a && (a = 0), void 0 === b && (b = this.children.length);
                var c = b - a;
                if (0 < c && c <= b) {
                    for (var d = this.children.splice(a, c), e = 0; e < d.length; e++) d[e].parent = void 0;
                    return d;
                }
                if (0 === c && 0 === this.children.length) return [];
                throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range");
            }),
            (b.DisplayObjectContainer.prototype.updateTransform = function () {
                if (this.visible && (this.displayObjectUpdateTransform(), !this._cacheAsBitmap)) for (var a = 0; a < this.children.length; a++) this.children[a].updateTransform();
            }),
            (b.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform = b.DisplayObjectContainer.prototype.updateTransform),
            (b.DisplayObjectContainer.prototype.getBounds = function (a) {
                var e,
                    c = a && a instanceof b.DisplayObject,
                    d = !0;
                if ((c ? (d = a instanceof b.DisplayObjectContainer && a.contains(this)) : (a = this), c)) {
                    var f = a.worldTransform;
                    for (a.worldTransform = b.identityMatrix, e = 0; e < a.children.length; e++) a.children[e].updateTransform();
                }
                var g,
                    h,
                    i,
                    j = 1 / 0,
                    k = 1 / 0,
                    l = -1 / 0,
                    m = -1 / 0,
                    n = !1;
                for (e = 0; e < this.children.length; e++)
                    this.children[e].visible && ((n = !0), (j = j < (g = this.children[e].getBounds()).x ? j : g.x), (k = k < g.y ? k : g.y), (l = (h = g.width + g.x) < l ? l : h), (m = (i = g.height + g.y) < m ? m : i));
                var o = this._bounds;
                if (!n) {
                    var p = (o = new b.Rectangle()).x,
                        q = o.width + o.x,
                        r = o.y,
                        s = o.height + o.y,
                        t = this.worldTransform,
                        u = t.a,
                        v = t.b,
                        w = t.c,
                        x = t.d,
                        y = t.tx,
                        z = t.ty,
                        A = u * q + w * s + y,
                        B = x * s + v * q + z,
                        C = u * p + w * s + y,
                        D = x * s + v * p + z,
                        E = u * p + w * r + y,
                        F = x * r + v * p + z,
                        G = u * q + w * r + y,
                        H = x * r + v * q + z;
                    (j = G < (j = E < (j = C < (j = l = A) ? C : j) ? E : j) ? G : j),
                        (k = H < (k = F < (k = D < (k = m = B) ? D : k) ? F : k) ? H : k),
                        (l = (l = (l = l < C ? C : l) < E ? E : l) < G ? G : l),
                        (m = (m = (m = m < D ? D : m) < F ? F : m) < H ? H : m);
                }
                if (((o.x = j), (o.y = k), (o.width = l - j), (o.height = m - k), c)) for (a.worldTransform = f, e = 0; e < a.children.length; e++) a.children[e].updateTransform();
                if (!d) {
                    var I = a.getBounds();
                    (o.x -= I.x), (o.y -= I.y);
                }
                return o;
            }),
            (b.DisplayObjectContainer.prototype.getLocalBounds = function () {
                return this.getBounds(this);
            }),
            (b.DisplayObjectContainer.prototype.contains = function (a) {
                return !!a && (a === this || this.contains(a.parent));
            }),
            (b.DisplayObjectContainer.prototype._renderWebGL = function (a) {
                if (this.visible && !(this.alpha <= 0)) {
                    if (this._cacheAsBitmap) return void this._renderCachedSprite(a);
                    var b;
                    if (this._mask || this._filters) {
                        for (
                            this._filters && (a.spriteBatch.flush(), a.filterManager.pushFilter(this._filterBlock)), this._mask && (a.spriteBatch.stop(), a.maskManager.pushMask(this.mask, a), a.spriteBatch.start()), b = 0;
                            b < this.children.length;
                            b++
                        )
                            this.children[b]._renderWebGL(a);
                        a.spriteBatch.stop(), this._mask && a.maskManager.popMask(this._mask, a), this._filters && a.filterManager.popFilter(), a.spriteBatch.start();
                    } else for (b = 0; b < this.children.length; b++) this.children[b]._renderWebGL(a);
                }
            }),
            (b.DisplayObjectContainer.prototype._renderCanvas = function (a) {
                if (!1 !== this.visible && 0 !== this.alpha) {
                    if (this._cacheAsBitmap) return void this._renderCachedSprite(a);
                    this._mask && a.maskManager.pushMask(this._mask, a);
                    for (var b = 0; b < this.children.length; b++) this.children[b]._renderCanvas(a);
                    this._mask && a.maskManager.popMask(a);
                }
            }),
            Object.defineProperty(b.DisplayObjectContainer.prototype, "width", {
                get: function () {
                    return this.getLocalBounds().width * this.scale.x;
                },
                set: function (a) {
                    var b = this.getLocalBounds().width;
                    (this.scale.x = 0 !== b ? a / b : 1), (this._width = a);
                },
            }),
            Object.defineProperty(b.DisplayObjectContainer.prototype, "height", {
                get: function () {
                    return this.getLocalBounds().height * this.scale.y;
                },
                set: function (a) {
                    var b = this.getLocalBounds().height;
                    (this.scale.y = 0 !== b ? a / b : 1), (this._height = a);
                },
            }),
            (b.Sprite = function (a) {
                b.DisplayObjectContainer.call(this),
                    (this.anchor = new b.Point()),
                    (this.texture = a || b.Texture.emptyTexture),
                    (this._width = 0),
                    (this._height = 0),
                    (this.tint = 16777215),
                    (this.cachedTint = -1),
                    (this.tintedTexture = null),
                    (this.blendMode = b.blendModes.NORMAL),
                    (this.shader = null),
                    (this.exists = !0),
                    this.texture.baseTexture.hasLoaded && this.onTextureUpdate(),
                    (this.renderable = !0);
            }),
            (b.Sprite.prototype = Object.create(b.DisplayObjectContainer.prototype)),
            (b.Sprite.prototype.constructor = b.Sprite),
            Object.defineProperty(b.Sprite.prototype, "width", {
                get: function () {
                    return this.scale.x * this.texture.frame.width;
                },
                set: function (a) {
                    (this.scale.x = a / this.texture.frame.width), (this._width = a);
                },
            }),
            Object.defineProperty(b.Sprite.prototype, "height", {
                get: function () {
                    return this.scale.y * this.texture.frame.height;
                },
                set: function (a) {
                    (this.scale.y = a / this.texture.frame.height), (this._height = a);
                },
            }),
            (b.Sprite.prototype.setTexture = function (a, b) {
                void 0 !== b && this.texture.baseTexture.destroy(), (this.texture.baseTexture.skipRender = !1), (this.texture = a), (this.texture.valid = !0), (this.cachedTint = -1);
            }),
            (b.Sprite.prototype.onTextureUpdate = function () {
                this._width && (this.scale.x = this._width / this.texture.frame.width), this._height && (this.scale.y = this._height / this.texture.frame.height);
            }),
            (b.Sprite.prototype.getBounds = function (a) {
                var b = this.texture.frame.width,
                    c = this.texture.frame.height,
                    d = b * (1 - this.anchor.x),
                    e = b * -this.anchor.x,
                    f = c * (1 - this.anchor.y),
                    g = c * -this.anchor.y,
                    h = a || this.worldTransform,
                    i = h.a,
                    j = h.b,
                    k = h.c,
                    l = h.d,
                    m = h.tx,
                    n = h.ty,
                    o = -1 / 0,
                    p = -1 / 0,
                    q = 1 / 0,
                    r = 1 / 0;
                if (0 === j && 0 === k) {
                    if (i < 0) {
                        i *= -1;
                        var s = d;
                        (d = -e), (e = -s);
                    }
                    if (l < 0) {
                        l *= -1;
                        s = f;
                        (f = -g), (g = -s);
                    }
                    (q = i * e + m), (o = i * d + m), (r = l * g + n), (p = l * f + n);
                } else {
                    var t = i * e + k * g + m,
                        u = l * g + j * e + n,
                        v = i * d + k * g + m,
                        w = l * g + j * d + n,
                        x = i * d + k * f + m,
                        y = l * f + j * d + n,
                        z = i * e + k * f + m,
                        A = l * f + j * e + n;
                    (q = z < (q = x < (q = v < (q = t < q ? t : q) ? v : q) ? x : q) ? z : q),
                        (r = A < (r = y < (r = w < (r = u < r ? u : r) ? w : r) ? y : r) ? A : r),
                        (o = (o = (o = (o = o < t ? t : o) < v ? v : o) < x ? x : o) < z ? z : o),
                        (p = (p = (p = (p = p < u ? u : p) < w ? w : p) < y ? y : p) < A ? A : p);
                }
                var B = this._bounds;
                return (B.x = q), (B.width = o - q), (B.y = r), (B.height = p - r), (this._currentBounds = B);
            }),
            (b.Sprite.prototype.getLocalBounds = function () {
                var a = this.worldTransform;
                this.worldTransform = b.identityMatrix;
                for (var c = 0; c < this.children.length; c++) this.children[c].updateTransform();
                var d = this.getBounds();
                for (this.worldTransform = a, c = 0; c < this.children.length; c++) this.children[c].updateTransform();
                return d;
            }),
            (b.Sprite.prototype._renderWebGL = function (a, b) {
                if (this.visible && !(this.alpha <= 0) && this.renderable) {
                    var c = this.worldTransform;
                    if ((b && (c = b), this._mask || this._filters)) {
                        var d = a.spriteBatch;
                        this._filters && (d.flush(), a.filterManager.pushFilter(this._filterBlock)), this._mask && (d.stop(), a.maskManager.pushMask(this.mask, a), d.start()), d.render(this);
                        for (var e = 0; e < this.children.length; e++) this.children[e]._renderWebGL(a);
                        d.stop(), this._mask && a.maskManager.popMask(this._mask, a), this._filters && a.filterManager.popFilter(), d.start();
                    } else {
                        a.spriteBatch.render(this);
                        for (e = 0; e < this.children.length; e++) this.children[e]._renderWebGL(a, c);
                    }
                }
            }),
            (b.Sprite.prototype._renderCanvas = function (a, c) {
                if (!(!this.visible || 0 === this.alpha || !this.renderable || this.texture.crop.width <= 0 || this.texture.crop.height <= 0)) {
                    var d = this.worldTransform;
                    if (
                        (c && (d = c),
                        this.blendMode !== a.currentBlendMode && ((a.currentBlendMode = this.blendMode), (a.context.globalCompositeOperation = b.blendModesCanvas[a.currentBlendMode])),
                        this._mask && a.maskManager.pushMask(this._mask, a),
                        this.texture.valid)
                    ) {
                        var e = this.texture.baseTexture.resolution / a.resolution;
                        (a.context.globalAlpha = this.worldAlpha),
                            a.smoothProperty && a.scaleMode !== this.texture.baseTexture.scaleMode && ((a.scaleMode = this.texture.baseTexture.scaleMode), (a.context[a.smoothProperty] = a.scaleMode === b.scaleModes.LINEAR));
                        var f = this.texture.trim ? this.texture.trim.x - this.anchor.x * this.texture.trim.width : this.anchor.x * -this.texture.frame.width,
                            g = this.texture.trim ? this.texture.trim.y - this.anchor.y * this.texture.trim.height : this.anchor.y * -this.texture.frame.height,
                            h = d.tx * a.resolution + a.shakeX,
                            i = d.ty * a.resolution + a.shakeY;
                        a.roundPixels ? (a.context.setTransform(d.a, d.b, d.c, d.d, 0 | h, 0 | i), (f |= 0), (g |= 0)) : a.context.setTransform(d.a, d.b, d.c, d.d, h, i);
                        var j = this.texture.crop.width,
                            k = this.texture.crop.height;
                        if (((f /= e), (g /= e), 16777215 !== this.tint))
                            (this.texture.requiresReTint || this.cachedTint !== this.tint) && ((this.tintedTexture = b.CanvasTinter.getTintedTexture(this, this.tint)), (this.cachedTint = this.tint), (this.texture.requiresReTint = !1)),
                                a.context.drawImage(this.tintedTexture, 0, 0, j, k, f, g, j / e, k / e);
                        else {
                            var l = this.texture.crop.x,
                                m = this.texture.crop.y;
                            a.context.drawImage(this.texture.baseTexture.source, l, m, j, k, f, g, j / e, k / e);
                        }
                    }
                    for (var n = 0; n < this.children.length; n++) this.children[n]._renderCanvas(a);
                    this._mask && a.maskManager.popMask(a);
                }
            }),
            (b.SpriteBatch = function (a) {
                b.DisplayObjectContainer.call(this), (this.textureThing = a), (this.ready = !1);
            }),
            (b.SpriteBatch.prototype = Object.create(b.DisplayObjectContainer.prototype)),
            (b.SpriteBatch.prototype.constructor = b.SpriteBatch),
            (b.SpriteBatch.prototype.initWebGL = function (a) {
                (this.fastSpriteBatch = new b.WebGLFastSpriteBatch(a)), (this.ready = !0);
            }),
            (b.SpriteBatch.prototype.updateTransform = function () {
                this.displayObjectUpdateTransform();
            }),
            (b.SpriteBatch.prototype._renderWebGL = function (a) {
                !this.visible ||
                    this.alpha <= 0 ||
                    !this.children.length ||
                    (this.ready || this.initWebGL(a.gl),
                    this.fastSpriteBatch.gl !== a.gl && this.fastSpriteBatch.setContext(a.gl),
                    a.spriteBatch.stop(),
                    a.shaderManager.setShader(a.shaderManager.fastShader),
                    this.fastSpriteBatch.begin(this, a),
                    this.fastSpriteBatch.render(this),
                    a.spriteBatch.start());
            }),
            (b.SpriteBatch.prototype._renderCanvas = function (a) {
                if (this.visible && !(this.alpha <= 0) && this.children.length) {
                    var b = a.context;
                    (b.globalAlpha = this.worldAlpha), this.displayObjectUpdateTransform();
                    for (var c = this.worldTransform, d = !0, e = 0; e < this.children.length; e++) {
                        var f = this.children[e];
                        if (f.visible) {
                            var g = f.texture,
                                h = g.frame;
                            if (((b.globalAlpha = this.worldAlpha * f.alpha), f.rotation % (2 * Math.PI) == 0))
                                d && (b.setTransform(c.a, c.b, c.c, c.d, c.tx, c.ty), (d = !1)),
                                    b.drawImage(
                                        g.baseTexture.source,
                                        h.x,
                                        h.y,
                                        h.width,
                                        h.height,
                                        (f.anchor.x * (-h.width * f.scale.x) + f.position.x + 0.5 + a.shakeX) | 0,
                                        (f.anchor.y * (-h.height * f.scale.y) + f.position.y + 0.5 + a.shakeY) | 0,
                                        h.width * f.scale.x,
                                        h.height * f.scale.y
                                    );
                            else {
                                d || (d = !0), f.displayObjectUpdateTransform();
                                var i = f.worldTransform,
                                    j = i.tx * a.resolution + a.shakeX,
                                    k = i.ty * a.resolution + a.shakeY;
                                a.roundPixels ? b.setTransform(i.a, i.b, i.c, i.d, 0 | j, 0 | k) : b.setTransform(i.a, i.b, i.c, i.d, j, k),
                                    b.drawImage(g.baseTexture.source, h.x, h.y, h.width, h.height, (f.anchor.x * -h.width + 0.5) | 0, (f.anchor.y * -h.height + 0.5) | 0, h.width, h.height);
                            }
                        }
                    }
                }
            }),
            (b.hex2rgb = function (a) {
                return [((a >> 16) & 255) / 255, ((a >> 8) & 255) / 255, (255 & a) / 255];
            }),
            (b.rgb2hex = function (a) {
                return ((255 * a[0]) << 16) + ((255 * a[1]) << 8) + 255 * a[2];
            }),
            (b.canUseNewCanvasBlendModes = function () {
                if (void 0 === document) return !1;
                var a = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",
                    c = "AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",
                    d = new Image();
                d.src = a + "AP804Oa6" + c;
                var e = new Image();
                e.src = a + "/wCKxvRF" + c;
                var g = b.CanvasPool.create(this, 6, 1).getContext("2d");
                if (((g.globalCompositeOperation = "multiply"), g.drawImage(d, 0, 0), g.drawImage(e, 2, 0), !g.getImageData(2, 0, 1, 1))) return !1;
                var h = g.getImageData(2, 0, 1, 1).data;
                return b.CanvasPool.remove(this), 255 === h[0] && 0 === h[1] && 0 === h[2];
            }),
            (b.getNextPowerOfTwo = function (a) {
                if (0 < a && 0 == (a & (a - 1))) return a;
                for (var b = 1; b < a; ) b <<= 1;
                return b;
            }),
            (b.isPowerOfTwo = function (a, b) {
                return 0 < a && 0 == (a & (a - 1)) && 0 < b && 0 == (b & (b - 1));
            }),
            (b.CanvasPool = {
                create: function (a, c, d) {
                    var e,
                        f = b.CanvasPool.getFirst();
                    if (-1 === f) {
                        var g = { parent: a, canvas: document.createElement("canvas") };
                        b.CanvasPool.pool.push(g), (e = g.canvas);
                    } else (b.CanvasPool.pool[f].parent = a), (e = b.CanvasPool.pool[f].canvas);
                    return void 0 !== c && ((e.width = c), (e.height = d)), e;
                },
                getFirst: function () {
                    for (var a = b.CanvasPool.pool, c = 0; c < a.length; c++) if (!a[c].parent) return c;
                    return -1;
                },
                remove: function (a) {
                    for (var c = b.CanvasPool.pool, d = 0; d < c.length; d++) c[d].parent === a && ((c[d].parent = null), (c[d].canvas.width = 1), (c[d].canvas.height = 1));
                },
                removeByCanvas: function (a) {
                    for (var c = b.CanvasPool.pool, d = 0; d < c.length; d++) c[d].canvas === a && ((c[d].parent = null), (c[d].canvas.width = 1), (c[d].canvas.height = 1));
                },
                getTotal: function () {
                    for (var a = b.CanvasPool.pool, c = 0, d = 0; d < a.length; d++) a[d].parent && c++;
                    return c;
                },
                getFree: function () {
                    for (var a = b.CanvasPool.pool, c = 0, d = 0; d < a.length; d++) a[d].parent || c++;
                    return c;
                },
            }),
            (b.CanvasPool.pool = []),
            (b.initDefaultShaders = function () {}),
            (b.CompileVertexShader = function (a, c) {
                return b._CompileShader(a, c, a.VERTEX_SHADER);
            }),
            (b.CompileFragmentShader = function (a, c) {
                return b._CompileShader(a, c, a.FRAGMENT_SHADER);
            }),
            (b._CompileShader = function (a, b, c) {
                var d = b;
                Array.isArray(b) && (d = b.join("\n"));
                var e = a.createShader(c);
                return a.shaderSource(e, d), a.compileShader(e), a.getShaderParameter(e, a.COMPILE_STATUS) ? e : (window.console.log(a.getShaderInfoLog(e)), null);
            }),
            (b.compileProgram = function (a, c, d) {
                var e = b.CompileFragmentShader(a, d),
                    f = b.CompileVertexShader(a, c),
                    g = a.createProgram();
                return a.attachShader(g, f), a.attachShader(g, e), a.linkProgram(g), a.getProgramParameter(g, a.LINK_STATUS) || (window.console.log(a.getProgramInfoLog(g)), window.console.log("Could not initialise shaders")), g;
            }),
            (b.PixiShader = function (a) {
                (this._UID = b._UID++),
                    (this.gl = a),
                    (this.program = null),
                    (this.fragmentSrc = [
                        "precision lowp float;",
                        "varying vec2 vTextureCoord;",
                        "varying vec4 vColor;",
                        "uniform sampler2D uSampler;",
                        "void main(void) {",
                        "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;",
                        "}",
                    ]),
                    (this.textureCount = 0),
                    (this.firstRun = !0),
                    (this.dirty = !0),
                    (this.attributes = []),
                    this.init();
            }),
            (b.PixiShader.prototype.constructor = b.PixiShader),
            (b.PixiShader.prototype.init = function () {
                var a = this.gl,
                    c = b.compileProgram(a, this.vertexSrc || b.PixiShader.defaultVertexSrc, this.fragmentSrc);
                for (var d in (a.useProgram(c),
                (this.uSampler = a.getUniformLocation(c, "uSampler")),
                (this.projectionVector = a.getUniformLocation(c, "projectionVector")),
                (this.offsetVector = a.getUniformLocation(c, "offsetVector")),
                (this.dimensions = a.getUniformLocation(c, "dimensions")),
                (this.aVertexPosition = a.getAttribLocation(c, "aVertexPosition")),
                (this.aTextureCoord = a.getAttribLocation(c, "aTextureCoord")),
                (this.colorAttribute = a.getAttribLocation(c, "aColor")),
                -1 === this.colorAttribute && (this.colorAttribute = 2),
                (this.attributes = [this.aVertexPosition, this.aTextureCoord, this.colorAttribute]),
                this.uniforms))
                    this.uniforms[d].uniformLocation = a.getUniformLocation(c, d);
                this.initUniforms(), (this.program = c);
            }),
            (b.PixiShader.prototype.initUniforms = function () {
                this.textureCount = 1;
                var a,
                    b = this.gl;
                for (var c in this.uniforms) {
                    var d = (a = this.uniforms[c]).type;
                    "sampler2D" === d
                        ? ((a._init = !1), null !== a.value && this.initSampler2D(a))
                        : "mat2" === d || "mat3" === d || "mat4" === d
                        ? ((a.glMatrix = !0), (a.glValueLength = 1), "mat2" === d ? (a.glFunc = b.uniformMatrix2fv) : "mat3" === d ? (a.glFunc = b.uniformMatrix3fv) : "mat4" === d && (a.glFunc = b.uniformMatrix4fv))
                        : ((a.glFunc = b["uniform" + d]), (a.glValueLength = "2f" === d || "2i" === d ? 2 : "3f" === d || "3i" === d ? 3 : "4f" === d || "4i" === d ? 4 : 1));
                }
            }),
            (b.PixiShader.prototype.initSampler2D = function (a) {
                if (a.value && a.value.baseTexture && a.value.baseTexture.hasLoaded) {
                    var b = this.gl;
                    if ((b.activeTexture(b["TEXTURE" + this.textureCount]), b.bindTexture(b.TEXTURE_2D, a.value.baseTexture._glTextures[b.id]), a.textureData)) {
                        var c = a.textureData,
                            d = c.magFilter ? c.magFilter : b.LINEAR,
                            e = c.minFilter ? c.minFilter : b.LINEAR,
                            f = c.wrapS ? c.wrapS : b.CLAMP_TO_EDGE,
                            g = c.wrapT ? c.wrapT : b.CLAMP_TO_EDGE,
                            h = c.luminance ? b.LUMINANCE : b.RGBA;
                        if ((c.repeat && ((f = b.REPEAT), (g = b.REPEAT)), b.pixelStorei(b.UNPACK_FLIP_Y_WEBGL, !!c.flipY), c.width)) {
                            var i = c.width ? c.width : 512,
                                j = c.height ? c.height : 2,
                                k = c.border ? c.border : 0;
                            b.texImage2D(b.TEXTURE_2D, 0, h, i, j, k, h, b.UNSIGNED_BYTE, null);
                        } else b.texImage2D(b.TEXTURE_2D, 0, h, b.RGBA, b.UNSIGNED_BYTE, a.value.baseTexture.source);
                        b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MAG_FILTER, d), b.texParameteri(b.TEXTURE_2D, b.TEXTURE_MIN_FILTER, e), b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_S, f), b.texParameteri(b.TEXTURE_2D, b.TEXTURE_WRAP_T, g);
                    }
                    b.uniform1i(a.uniformLocation, this.textureCount), (a._init = !0), this.textureCount++;
                }
            }),
            (b.PixiShader.prototype.syncUniforms = function () {
                this.textureCount = 1;
                var a,
                    c = this.gl;
                for (var d in this.uniforms)
                    1 === (a = this.uniforms[d]).glValueLength
                        ? !0 === a.glMatrix
                            ? a.glFunc.call(c, a.uniformLocation, a.transpose, a.value)
                            : a.glFunc.call(c, a.uniformLocation, a.value)
                        : 2 === a.glValueLength
                        ? a.glFunc.call(c, a.uniformLocation, a.value.x, a.value.y)
                        : 3 === a.glValueLength
                        ? a.glFunc.call(c, a.uniformLocation, a.value.x, a.value.y, a.value.z)
                        : 4 === a.glValueLength
                        ? a.glFunc.call(c, a.uniformLocation, a.value.x, a.value.y, a.value.z, a.value.w)
                        : "sampler2D" === a.type &&
                          (a._init
                              ? (c.activeTexture(c["TEXTURE" + this.textureCount]),
                                a.value.baseTexture._dirty[c.id] ? b.instances[c.id].updateTexture(a.value.baseTexture) : c.bindTexture(c.TEXTURE_2D, a.value.baseTexture._glTextures[c.id]),
                                c.uniform1i(a.uniformLocation, this.textureCount),
                                this.textureCount++)
                              : this.initSampler2D(a));
            }),
            (b.PixiShader.prototype.destroy = function () {
                this.gl.deleteProgram(this.program), (this.uniforms = null), (this.gl = null), (this.attributes = null);
            }),
            (b.PixiShader.defaultVertexSrc = [
                "attribute vec2 aVertexPosition;",
                "attribute vec2 aTextureCoord;",
                "attribute vec4 aColor;",
                "uniform vec2 projectionVector;",
                "uniform vec2 offsetVector;",
                "varying vec2 vTextureCoord;",
                "varying vec4 vColor;",
                "const vec2 center = vec2(-1.0, 1.0);",
                "void main(void) {",
                "   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);",
                "   vTextureCoord = aTextureCoord;",
                "   vColor = vec4(aColor.rgb * aColor.a, aColor.a);",
                "}",
            ]),
            (b.PixiFastShader = function (a) {
                (this._UID = b._UID++),
                    (this.gl = a),
                    (this.program = null),
                    (this.fragmentSrc = [
                        "precision lowp float;",
                        "varying vec2 vTextureCoord;",
                        "varying float vColor;",
                        "uniform sampler2D uSampler;",
                        "void main(void) {",
                        "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;",
                        "}",
                    ]),
                    (this.vertexSrc = [
                        "attribute vec2 aVertexPosition;",
                        "attribute vec2 aPositionCoord;",
                        "attribute vec2 aScale;",
                        "attribute float aRotation;",
                        "attribute vec2 aTextureCoord;",
                        "attribute float aColor;",
                        "uniform vec2 projectionVector;",
                        "uniform vec2 offsetVector;",
                        "uniform mat3 uMatrix;",
                        "varying vec2 vTextureCoord;",
                        "varying float vColor;",
                        "const vec2 center = vec2(-1.0, 1.0);",
                        "void main(void) {",
                        "   vec2 v;",
                        "   vec2 sv = aVertexPosition * aScale;",
                        "   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);",
                        "   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);",
                        "   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;",
                        "   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);",
                        "   vTextureCoord = aTextureCoord;",
                        "   vColor = aColor;",
                        "}",
                    ]),
                    (this.textureCount = 0),
                    this.init();
            }),
            (b.PixiFastShader.prototype.constructor = b.PixiFastShader),
            (b.PixiFastShader.prototype.init = function () {
                var a = this.gl,
                    c = b.compileProgram(a, this.vertexSrc, this.fragmentSrc);
                a.useProgram(c),
                    (this.uSampler = a.getUniformLocation(c, "uSampler")),
                    (this.projectionVector = a.getUniformLocation(c, "projectionVector")),
                    (this.offsetVector = a.getUniformLocation(c, "offsetVector")),
                    (this.dimensions = a.getUniformLocation(c, "dimensions")),
                    (this.uMatrix = a.getUniformLocation(c, "uMatrix")),
                    (this.aVertexPosition = a.getAttribLocation(c, "aVertexPosition")),
                    (this.aPositionCoord = a.getAttribLocation(c, "aPositionCoord")),
                    (this.aScale = a.getAttribLocation(c, "aScale")),
                    (this.aRotation = a.getAttribLocation(c, "aRotation")),
                    (this.aTextureCoord = a.getAttribLocation(c, "aTextureCoord")),
                    (this.colorAttribute = a.getAttribLocation(c, "aColor")),
                    -1 === this.colorAttribute && (this.colorAttribute = 2),
                    (this.attributes = [this.aVertexPosition, this.aPositionCoord, this.aScale, this.aRotation, this.aTextureCoord, this.colorAttribute]),
                    (this.program = c);
            }),
            (b.PixiFastShader.prototype.destroy = function () {
                this.gl.deleteProgram(this.program), (this.uniforms = null), (this.gl = null), (this.attributes = null);
            }),
            (b.StripShader = function (a) {
                (this._UID = b._UID++),
                    (this.gl = a),
                    (this.program = null),
                    (this.fragmentSrc = [
                        "precision mediump float;",
                        "varying vec2 vTextureCoord;",
                        "uniform float alpha;",
                        "uniform sampler2D uSampler;",
                        "void main(void) {",
                        "   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y)) * alpha;",
                        "}",
                    ]),
                    (this.vertexSrc = [
                        "attribute vec2 aVertexPosition;",
                        "attribute vec2 aTextureCoord;",
                        "uniform mat3 translationMatrix;",
                        "uniform vec2 projectionVector;",
                        "uniform vec2 offsetVector;",
                        "varying vec2 vTextureCoord;",
                        "void main(void) {",
                        "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);",
                        "   v -= offsetVector.xyx;",
                        "   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);",
                        "   vTextureCoord = aTextureCoord;",
                        "}",
                    ]),
                    this.init();
            }),
            (b.StripShader.prototype.constructor = b.StripShader),
            (b.StripShader.prototype.init = function () {
                var a = this.gl,
                    c = b.compileProgram(a, this.vertexSrc, this.fragmentSrc);
                a.useProgram(c),
                    (this.uSampler = a.getUniformLocation(c, "uSampler")),
                    (this.projectionVector = a.getUniformLocation(c, "projectionVector")),
                    (this.offsetVector = a.getUniformLocation(c, "offsetVector")),
                    (this.colorAttribute = a.getAttribLocation(c, "aColor")),
                    (this.aVertexPosition = a.getAttribLocation(c, "aVertexPosition")),
                    (this.aTextureCoord = a.getAttribLocation(c, "aTextureCoord")),
                    (this.attributes = [this.aVertexPosition, this.aTextureCoord]),
                    (this.translationMatrix = a.getUniformLocation(c, "translationMatrix")),
                    (this.alpha = a.getUniformLocation(c, "alpha")),
                    (this.program = c);
            }),
            (b.StripShader.prototype.destroy = function () {
                this.gl.deleteProgram(this.program), (this.uniforms = null), (this.gl = null), (this.attribute = null);
            }),
            (b.PrimitiveShader = function (a) {
                (this._UID = b._UID++),
                    (this.gl = a),
                    (this.program = null),
                    (this.fragmentSrc = ["precision mediump float;", "varying vec4 vColor;", "void main(void) {", "   gl_FragColor = vColor;", "}"]),
                    (this.vertexSrc = [
                        "attribute vec2 aVertexPosition;",
                        "attribute vec4 aColor;",
                        "uniform mat3 translationMatrix;",
                        "uniform vec2 projectionVector;",
                        "uniform vec2 offsetVector;",
                        "uniform float alpha;",
                        "uniform float flipY;",
                        "uniform vec3 tint;",
                        "varying vec4 vColor;",
                        "void main(void) {",
                        "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);",
                        "   v -= offsetVector.xyx;",
                        "   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);",
                        "   vColor = aColor * vec4(tint * alpha, alpha);",
                        "}",
                    ]),
                    this.init();
            }),
            (b.PrimitiveShader.prototype.constructor = b.PrimitiveShader),
            (b.PrimitiveShader.prototype.init = function () {
                var a = this.gl,
                    c = b.compileProgram(a, this.vertexSrc, this.fragmentSrc);
                a.useProgram(c),
                    (this.projectionVector = a.getUniformLocation(c, "projectionVector")),
                    (this.offsetVector = a.getUniformLocation(c, "offsetVector")),
                    (this.tintColor = a.getUniformLocation(c, "tint")),
                    (this.flipY = a.getUniformLocation(c, "flipY")),
                    (this.aVertexPosition = a.getAttribLocation(c, "aVertexPosition")),
                    (this.colorAttribute = a.getAttribLocation(c, "aColor")),
                    (this.attributes = [this.aVertexPosition, this.colorAttribute]),
                    (this.translationMatrix = a.getUniformLocation(c, "translationMatrix")),
                    (this.alpha = a.getUniformLocation(c, "alpha")),
                    (this.program = c);
            }),
            (b.PrimitiveShader.prototype.destroy = function () {
                this.gl.deleteProgram(this.program), (this.uniforms = null), (this.gl = null), (this.attributes = null);
            }),
            (b.ComplexPrimitiveShader = function (a) {
                (this._UID = b._UID++),
                    (this.gl = a),
                    (this.program = null),
                    (this.fragmentSrc = ["precision mediump float;", "varying vec4 vColor;", "void main(void) {", "   gl_FragColor = vColor;", "}"]),
                    (this.vertexSrc = [
                        "attribute vec2 aVertexPosition;",
                        "uniform mat3 translationMatrix;",
                        "uniform vec2 projectionVector;",
                        "uniform vec2 offsetVector;",
                        "uniform vec3 tint;",
                        "uniform float alpha;",
                        "uniform vec3 color;",
                        "uniform float flipY;",
                        "varying vec4 vColor;",
                        "void main(void) {",
                        "   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);",
                        "   v -= offsetVector.xyx;",
                        "   gl_Position = vec4( v.x / projectionVector.x -1.0, (v.y / projectionVector.y * -flipY) + flipY , 0.0, 1.0);",
                        "   vColor = vec4(color * alpha * tint, alpha);",
                        "}",
                    ]),
                    this.init();
            }),
            (b.ComplexPrimitiveShader.prototype.constructor = b.ComplexPrimitiveShader),
            (b.ComplexPrimitiveShader.prototype.init = function () {
                var a = this.gl,
                    c = b.compileProgram(a, this.vertexSrc, this.fragmentSrc);
                a.useProgram(c),
                    (this.projectionVector = a.getUniformLocation(c, "projectionVector")),
                    (this.offsetVector = a.getUniformLocation(c, "offsetVector")),
                    (this.tintColor = a.getUniformLocation(c, "tint")),
                    (this.color = a.getUniformLocation(c, "color")),
                    (this.flipY = a.getUniformLocation(c, "flipY")),
                    (this.aVertexPosition = a.getAttribLocation(c, "aVertexPosition")),
                    (this.attributes = [this.aVertexPosition, this.colorAttribute]),
                    (this.translationMatrix = a.getUniformLocation(c, "translationMatrix")),
                    (this.alpha = a.getUniformLocation(c, "alpha")),
                    (this.program = c);
            }),
            (b.ComplexPrimitiveShader.prototype.destroy = function () {
                this.gl.deleteProgram(this.program), (this.uniforms = null), (this.gl = null), (this.attribute = null);
            }),
            (b.glContexts = []),
            (b.instances = []),
            (b.WebGLRenderer = function (a) {
                (this.game = a),
                    b.defaultRenderer || (b.defaultRenderer = this),
                    (this.type = b.WEBGL_RENDERER),
                    (this.resolution = a.resolution),
                    (this.transparent = a.transparent),
                    (this.autoResize = !1),
                    (this.preserveDrawingBuffer = a.preserveDrawingBuffer),
                    (this.clearBeforeRender = a.clearBeforeRender),
                    (this.width = a.width),
                    (this.height = a.height),
                    (this.view = a.canvas),
                    (this._contextOptions = { alpha: this.transparent, antialias: a.antialias, premultipliedAlpha: this.transparent && "notMultiplied" !== this.transparent, stencil: !0, preserveDrawingBuffer: this.preserveDrawingBuffer }),
                    (this.projection = new b.Point()),
                    (this.offset = new b.Point()),
                    (this.shaderManager = new b.WebGLShaderManager()),
                    (this.spriteBatch = new b.WebGLSpriteBatch()),
                    (this.maskManager = new b.WebGLMaskManager()),
                    (this.filterManager = new b.WebGLFilterManager()),
                    (this.stencilManager = new b.WebGLStencilManager()),
                    (this.blendModeManager = new b.WebGLBlendModeManager()),
                    (this.renderSession = {}),
                    (this.renderSession.game = this.game),
                    (this.renderSession.gl = this.gl),
                    (this.renderSession.drawCount = 0),
                    (this.renderSession.shaderManager = this.shaderManager),
                    (this.renderSession.maskManager = this.maskManager),
                    (this.renderSession.filterManager = this.filterManager),
                    (this.renderSession.blendModeManager = this.blendModeManager),
                    (this.renderSession.spriteBatch = this.spriteBatch),
                    (this.renderSession.stencilManager = this.stencilManager),
                    ((this.renderSession.renderer = this).renderSession.resolution = this.resolution),
                    this.initContext(),
                    this.mapBlendModes();
            }),
            (b.WebGLRenderer.prototype.constructor = b.WebGLRenderer),
            (b.WebGLRenderer.prototype.initContext = function () {
                var a = this.view.getContext("webgl", this._contextOptions) || this.view.getContext("experimental-webgl", this._contextOptions);
                if (!(this.gl = a)) throw new Error("This browser does not support webGL. Try using the canvas renderer");
                (this.glContextId = a.id = b.WebGLRenderer.glContextId++),
                    (b.glContexts[this.glContextId] = a),
                    (b.instances[this.glContextId] = this),
                    a.disable(a.DEPTH_TEST),
                    a.disable(a.CULL_FACE),
                    a.enable(a.BLEND),
                    this.shaderManager.setContext(a),
                    this.spriteBatch.setContext(a),
                    this.maskManager.setContext(a),
                    this.filterManager.setContext(a),
                    this.blendModeManager.setContext(a),
                    this.stencilManager.setContext(a),
                    (this.renderSession.gl = this.gl),
                    this.resize(this.width, this.height);
            }),
            (b.WebGLRenderer.prototype.render = function (a) {
                if (!this.contextLost) {
                    var b = this.gl;
                    b.viewport(0, 0, this.width, this.height),
                        b.bindFramebuffer(b.FRAMEBUFFER, null),
                        this.game.clearBeforeRender && (b.clearColor(a._bgColor.r, a._bgColor.g, a._bgColor.b, a._bgColor.a), b.clear(b.COLOR_BUFFER_BIT)),
                        (this.offset.x = this.game.camera._shake.x),
                        (this.offset.y = this.game.camera._shake.y),
                        this.renderDisplayObject(a, this.projection);
                }
            }),
            (b.WebGLRenderer.prototype.renderDisplayObject = function (a, c, d, e) {
                this.renderSession.blendModeManager.setBlendMode(b.blendModes.NORMAL),
                    (this.renderSession.drawCount = 0),
                    (this.renderSession.flipY = d ? -1 : 1),
                    (this.renderSession.projection = c),
                    (this.renderSession.offset = this.offset),
                    this.spriteBatch.begin(this.renderSession),
                    this.filterManager.begin(this.renderSession, d),
                    a._renderWebGL(this.renderSession, e),
                    this.spriteBatch.end();
            }),
            (b.WebGLRenderer.prototype.resize = function (a, b) {
                (this.width = a * this.resolution),
                    (this.height = b * this.resolution),
                    (this.view.width = this.width),
                    (this.view.height = this.height),
                    this.autoResize && ((this.view.style.width = this.width / this.resolution + "px"), (this.view.style.height = this.height / this.resolution + "px")),
                    this.gl.viewport(0, 0, this.width, this.height),
                    (this.projection.x = this.width / 2 / this.resolution),
                    (this.projection.y = -this.height / 2 / this.resolution);
            }),
            (b.WebGLRenderer.prototype.updateTexture = function (a) {
                if (!a.hasLoaded) return !1;
                var c = this.gl;
                return (
                    a._glTextures[c.id] || (a._glTextures[c.id] = c.createTexture()),
                    c.bindTexture(c.TEXTURE_2D, a._glTextures[c.id]),
                    c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL, a.premultipliedAlpha),
                    c.texImage2D(c.TEXTURE_2D, 0, c.RGBA, c.RGBA, c.UNSIGNED_BYTE, a.source),
                    c.texParameteri(c.TEXTURE_2D, c.TEXTURE_MAG_FILTER, a.scaleMode === b.scaleModes.LINEAR ? c.LINEAR : c.NEAREST),
                    a.mipmap && b.isPowerOfTwo(a.width, a.height)
                        ? (c.texParameteri(c.TEXTURE_2D, c.TEXTURE_MIN_FILTER, a.scaleMode === b.scaleModes.LINEAR ? c.LINEAR_MIPMAP_LINEAR : c.NEAREST_MIPMAP_NEAREST), c.generateMipmap(c.TEXTURE_2D))
                        : c.texParameteri(c.TEXTURE_2D, c.TEXTURE_MIN_FILTER, a.scaleMode === b.scaleModes.LINEAR ? c.LINEAR : c.NEAREST),
                    a._powerOf2
                        ? (c.texParameteri(c.TEXTURE_2D, c.TEXTURE_WRAP_S, c.REPEAT), c.texParameteri(c.TEXTURE_2D, c.TEXTURE_WRAP_T, c.REPEAT))
                        : (c.texParameteri(c.TEXTURE_2D, c.TEXTURE_WRAP_S, c.CLAMP_TO_EDGE), c.texParameteri(c.TEXTURE_2D, c.TEXTURE_WRAP_T, c.CLAMP_TO_EDGE)),
                    !(a._dirty[c.id] = !1)
                );
            }),
            (b.WebGLRenderer.prototype.destroy = function () {
                (b.glContexts[this.glContextId] = null),
                    (this.projection = null),
                    (this.offset = null),
                    this.shaderManager.destroy(),
                    this.spriteBatch.destroy(),
                    this.maskManager.destroy(),
                    this.filterManager.destroy(),
                    (this.shaderManager = null),
                    (this.spriteBatch = null),
                    (this.maskManager = null),
                    (this.filterManager = null),
                    (this.gl = null),
                    (this.renderSession = null),
                    b.CanvasPool.remove(this),
                    (b.instances[this.glContextId] = null),
                    b.WebGLRenderer.glContextId--;
            }),
            (b.WebGLRenderer.prototype.mapBlendModes = function () {
                var a = this.gl;
                if (!b.blendModesWebGL) {
                    var c = [],
                        d = b.blendModes;
                    (c[d.NORMAL] = [a.ONE, a.ONE_MINUS_SRC_ALPHA]),
                        (c[d.ADD] = [a.SRC_ALPHA, a.DST_ALPHA]),
                        (c[d.MULTIPLY] = [a.DST_COLOR, a.ONE_MINUS_SRC_ALPHA]),
                        (c[d.SCREEN] = [a.SRC_ALPHA, a.ONE]),
                        (c[d.OVERLAY] = [a.ONE, a.ONE_MINUS_SRC_ALPHA]),
                        (c[d.DARKEN] = [a.ONE, a.ONE_MINUS_SRC_ALPHA]),
                        (c[d.LIGHTEN] = [a.ONE, a.ONE_MINUS_SRC_ALPHA]),
                        (c[d.COLOR_DODGE] = [a.ONE, a.ONE_MINUS_SRC_ALPHA]),
                        (c[d.COLOR_BURN] = [a.ONE, a.ONE_MINUS_SRC_ALPHA]),
                        (c[d.HARD_LIGHT] = [a.ONE, a.ONE_MINUS_SRC_ALPHA]),
                        (c[d.SOFT_LIGHT] = [a.ONE, a.ONE_MINUS_SRC_ALPHA]),
                        (c[d.DIFFERENCE] = [a.ONE, a.ONE_MINUS_SRC_ALPHA]),
                        (c[d.EXCLUSION] = [a.ONE, a.ONE_MINUS_SRC_ALPHA]),
                        (c[d.HUE] = [a.ONE, a.ONE_MINUS_SRC_ALPHA]),
                        (c[d.SATURATION] = [a.ONE, a.ONE_MINUS_SRC_ALPHA]),
                        (c[d.COLOR] = [a.ONE, a.ONE_MINUS_SRC_ALPHA]),
                        (c[d.LUMINOSITY] = [a.ONE, a.ONE_MINUS_SRC_ALPHA]),
                        (b.blendModesWebGL = c);
                }
            }),
            (b.WebGLRenderer.glContextId = 0),
            (b.WebGLBlendModeManager = function () {
                this.currentBlendMode = 99999;
            }),
            (b.WebGLBlendModeManager.prototype.constructor = b.WebGLBlendModeManager),
            (b.WebGLBlendModeManager.prototype.setContext = function (a) {
                this.gl = a;
            }),
            (b.WebGLBlendModeManager.prototype.setBlendMode = function (a) {
                if (this.currentBlendMode === a) return !1;
                this.currentBlendMode = a;
                var c = b.blendModesWebGL[this.currentBlendMode];
                return c && this.gl.blendFunc(c[0], c[1]), !0;
            }),
            (b.WebGLBlendModeManager.prototype.destroy = function () {
                this.gl = null;
            }),
            (b.WebGLMaskManager = function () {}),
            (b.WebGLMaskManager.prototype.constructor = b.WebGLMaskManager),
            (b.WebGLMaskManager.prototype.setContext = function (a) {
                this.gl = a;
            }),
            (b.WebGLMaskManager.prototype.pushMask = function (a, c) {
                var d = c.gl;
                a.dirty && b.WebGLGraphics.updateGraphics(a, d), void 0 !== a._webGL[d.id] && void 0 !== a._webGL[d.id].data && 0 !== a._webGL[d.id].data.length && c.stencilManager.pushStencil(a, a._webGL[d.id].data[0], c);
            }),
            (b.WebGLMaskManager.prototype.popMask = function (a, b) {
                var c = this.gl;
                void 0 !== a._webGL[c.id] && void 0 !== a._webGL[c.id].data && 0 !== a._webGL[c.id].data.length && b.stencilManager.popStencil(a, a._webGL[c.id].data[0], b);
            }),
            (b.WebGLMaskManager.prototype.destroy = function () {
                this.gl = null;
            }),
            (b.WebGLStencilManager = function () {
                (this.stencilStack = []), (this.reverse = !0), (this.count = 0);
            }),
            (b.WebGLStencilManager.prototype.setContext = function (a) {
                this.gl = a;
            }),
            (b.WebGLStencilManager.prototype.pushStencil = function (a, b, c) {
                var d = this.gl;
                this.bindGraphics(a, b, c), 0 === this.stencilStack.length && (d.enable(d.STENCIL_TEST), d.clear(d.STENCIL_BUFFER_BIT), (this.reverse = !0), (this.count = 0)), this.stencilStack.push(b);
                var e = this.count;
                d.colorMask(!1, !1, !1, !1),
                    d.stencilFunc(d.ALWAYS, 0, 255),
                    d.stencilOp(d.KEEP, d.KEEP, d.INVERT),
                    1 === b.mode
                        ? (d.drawElements(d.TRIANGLE_FAN, b.indices.length - 4, d.UNSIGNED_SHORT, 0),
                          this.reverse ? (d.stencilFunc(d.EQUAL, 255 - e, 255), d.stencilOp(d.KEEP, d.KEEP, d.DECR)) : (d.stencilFunc(d.EQUAL, e, 255), d.stencilOp(d.KEEP, d.KEEP, d.INCR)),
                          d.drawElements(d.TRIANGLE_FAN, 4, d.UNSIGNED_SHORT, 2 * (b.indices.length - 4)),
                          this.reverse ? d.stencilFunc(d.EQUAL, 255 - (e + 1), 255) : d.stencilFunc(d.EQUAL, e + 1, 255),
                          (this.reverse = !this.reverse))
                        : (this.reverse ? (d.stencilFunc(d.EQUAL, e, 255), d.stencilOp(d.KEEP, d.KEEP, d.INCR)) : (d.stencilFunc(d.EQUAL, 255 - e, 255), d.stencilOp(d.KEEP, d.KEEP, d.DECR)),
                          d.drawElements(d.TRIANGLE_STRIP, b.indices.length, d.UNSIGNED_SHORT, 0),
                          this.reverse ? d.stencilFunc(d.EQUAL, e + 1, 255) : d.stencilFunc(d.EQUAL, 255 - (e + 1), 255)),
                    d.colorMask(!0, !0, !0, !0),
                    d.stencilOp(d.KEEP, d.KEEP, d.KEEP),
                    this.count++;
            }),
            (b.WebGLStencilManager.prototype.bindGraphics = function (a, c, d) {
                this._currentGraphics = a;
                var e,
                    f = this.gl,
                    g = d.projection,
                    h = d.offset;
                1 === c.mode
                    ? ((e = d.shaderManager.complexPrimitiveShader),
                      d.shaderManager.setShader(e),
                      f.uniform1f(e.flipY, d.flipY),
                      f.uniformMatrix3fv(e.translationMatrix, !1, a.worldTransform.toArray(!0)),
                      f.uniform2f(e.projectionVector, g.x, -g.y),
                      f.uniform2f(e.offsetVector, -h.x, -h.y),
                      f.uniform3fv(e.tintColor, b.hex2rgb(a.tint)),
                      f.uniform3fv(e.color, c.color),
                      f.uniform1f(e.alpha, a.worldAlpha * c.alpha),
                      f.bindBuffer(f.ARRAY_BUFFER, c.buffer),
                      f.vertexAttribPointer(e.aVertexPosition, 2, f.FLOAT, !1, 8, 0))
                    : ((e = d.shaderManager.primitiveShader),
                      d.shaderManager.setShader(e),
                      f.uniformMatrix3fv(e.translationMatrix, !1, a.worldTransform.toArray(!0)),
                      f.uniform1f(e.flipY, d.flipY),
                      f.uniform2f(e.projectionVector, g.x, -g.y),
                      f.uniform2f(e.offsetVector, -h.x, -h.y),
                      f.uniform3fv(e.tintColor, b.hex2rgb(a.tint)),
                      f.uniform1f(e.alpha, a.worldAlpha),
                      f.bindBuffer(f.ARRAY_BUFFER, c.buffer),
                      f.vertexAttribPointer(e.aVertexPosition, 2, f.FLOAT, !1, 24, 0),
                      f.vertexAttribPointer(e.colorAttribute, 4, f.FLOAT, !1, 24, 8)),
                    f.bindBuffer(f.ELEMENT_ARRAY_BUFFER, c.indexBuffer);
            }),
            (b.WebGLStencilManager.prototype.popStencil = function (a, b, c) {
                var d = this.gl;
                if ((this.stencilStack.pop(), this.count--, 0 === this.stencilStack.length)) d.disable(d.STENCIL_TEST);
                else {
                    var e = this.count;
                    this.bindGraphics(a, b, c),
                        d.colorMask(!1, !1, !1, !1),
                        1 === b.mode
                            ? ((this.reverse = !this.reverse),
                              this.reverse ? (d.stencilFunc(d.EQUAL, 255 - (e + 1), 255), d.stencilOp(d.KEEP, d.KEEP, d.INCR)) : (d.stencilFunc(d.EQUAL, e + 1, 255), d.stencilOp(d.KEEP, d.KEEP, d.DECR)),
                              d.drawElements(d.TRIANGLE_FAN, 4, d.UNSIGNED_SHORT, 2 * (b.indices.length - 4)),
                              d.stencilFunc(d.ALWAYS, 0, 255),
                              d.stencilOp(d.KEEP, d.KEEP, d.INVERT),
                              d.drawElements(d.TRIANGLE_FAN, b.indices.length - 4, d.UNSIGNED_SHORT, 0))
                            : (this.reverse ? (d.stencilFunc(d.EQUAL, e + 1, 255), d.stencilOp(d.KEEP, d.KEEP, d.DECR)) : (d.stencilFunc(d.EQUAL, 255 - (e + 1), 255), d.stencilOp(d.KEEP, d.KEEP, d.INCR)),
                              d.drawElements(d.TRIANGLE_STRIP, b.indices.length, d.UNSIGNED_SHORT, 0)),
                        this.reverse ? d.stencilFunc(d.EQUAL, e, 255) : d.stencilFunc(d.EQUAL, 255 - e, 255),
                        d.colorMask(!0, !0, !0, !0),
                        d.stencilOp(d.KEEP, d.KEEP, d.KEEP);
                }
            }),
            (b.WebGLStencilManager.prototype.destroy = function () {
                (this.stencilStack = null), (this.gl = null);
            }),
            (b.WebGLShaderManager = function () {
                (this.maxAttibs = 10), (this.attribState = []), (this.tempAttribState = []);
                for (var a = 0; a < this.maxAttibs; a++) this.attribState[a] = !1;
                this.stack = [];
            }),
            (b.WebGLShaderManager.prototype.constructor = b.WebGLShaderManager),
            (b.WebGLShaderManager.prototype.setContext = function (a) {
                (this.gl = a),
                    (this.primitiveShader = new b.PrimitiveShader(a)),
                    (this.complexPrimitiveShader = new b.ComplexPrimitiveShader(a)),
                    (this.defaultShader = new b.PixiShader(a)),
                    (this.fastShader = new b.PixiFastShader(a)),
                    (this.stripShader = new b.StripShader(a)),
                    this.setShader(this.defaultShader);
            }),
            (b.WebGLShaderManager.prototype.setAttribs = function (a) {
                var b;
                for (b = 0; b < this.tempAttribState.length; b++) this.tempAttribState[b] = !1;
                for (b = 0; b < a.length; b++) {
                    var c = a[b];
                    this.tempAttribState[c] = !0;
                }
                var d = this.gl;
                for (b = 0; b < this.attribState.length; b++)
                    this.attribState[b] !== this.tempAttribState[b] && ((this.attribState[b] = this.tempAttribState[b]), this.tempAttribState[b] ? d.enableVertexAttribArray(b) : d.disableVertexAttribArray(b));
            }),
            (b.WebGLShaderManager.prototype.setShader = function (a) {
                return this._currentId !== a._UID && ((this._currentId = a._UID), (this.currentShader = a), this.gl.useProgram(a.program), this.setAttribs(a.attributes), !0);
            }),
            (b.WebGLShaderManager.prototype.destroy = function () {
                (this.attribState = null),
                    (this.tempAttribState = null),
                    this.primitiveShader.destroy(),
                    this.complexPrimitiveShader.destroy(),
                    this.defaultShader.destroy(),
                    this.fastShader.destroy(),
                    this.stripShader.destroy(),
                    (this.gl = null);
            }),
            (b.WebGLSpriteBatch = function () {
                (this.vertSize = 5), (this.size = 2e3);
                var a = 4 * this.size * 4 * this.vertSize,
                    c = 6 * this.size;
                (this.vertices = new b.ArrayBuffer(a)), (this.positions = new b.Float32Array(this.vertices)), (this.colors = new b.Uint32Array(this.vertices)), (this.indices = new b.Uint16Array(c));
                for (var d = (this.lastIndexCount = 0), e = 0; d < c; d += 6, e += 4)
                    (this.indices[d + 0] = e + 0), (this.indices[d + 1] = e + 1), (this.indices[d + 2] = e + 2), (this.indices[d + 3] = e + 0), (this.indices[d + 4] = e + 2), (this.indices[d + 5] = e + 3);
                (this.drawing = !1),
                    (this.currentBatchSize = 0),
                    (this.currentBaseTexture = null),
                    (this.dirty = !0),
                    (this.textures = []),
                    (this.blendModes = []),
                    (this.shaders = []),
                    (this.sprites = []),
                    (this.defaultShader = new b.AbstractFilter([
                        "precision lowp float;",
                        "varying vec2 vTextureCoord;",
                        "varying vec4 vColor;",
                        "uniform sampler2D uSampler;",
                        "void main(void) {",
                        "   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;",
                        "}",
                    ]));
            }),
            (b.WebGLSpriteBatch.prototype.setContext = function (a) {
                (this.gl = a),
                    (this.vertexBuffer = a.createBuffer()),
                    (this.indexBuffer = a.createBuffer()),
                    a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
                    a.bufferData(a.ELEMENT_ARRAY_BUFFER, this.indices, a.STATIC_DRAW),
                    a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer),
                    a.bufferData(a.ARRAY_BUFFER, this.vertices, a.DYNAMIC_DRAW),
                    (this.currentBlendMode = 99999);
                var c = new b.PixiShader(a);
                (c.fragmentSrc = this.defaultShader.fragmentSrc), (c.uniforms = {}), c.init(), (this.defaultShader.shaders[a.id] = c);
            }),
            (b.WebGLSpriteBatch.prototype.begin = function (a) {
                (this.renderSession = a), (this.shader = this.renderSession.shaderManager.defaultShader), this.start();
            }),
            (b.WebGLSpriteBatch.prototype.end = function () {
                this.flush();
            }),
            (b.WebGLSpriteBatch.prototype.render = function (a, b) {
                var c = a.texture,
                    d = a.worldTransform;
                b && (d = b), this.currentBatchSize >= this.size && (this.flush(), (this.currentBaseTexture = c.baseTexture));
                var e = c._uvs;
                if (e) {
                    var f,
                        g,
                        h,
                        i,
                        j = a.anchor.x,
                        k = a.anchor.y;
                    if (c.trim) {
                        var l = c.trim;
                        (f = (g = l.x - j * l.width) + c.crop.width), (h = (i = l.y - k * l.height) + c.crop.height);
                    } else (f = c.frame.width * (1 - j)), (g = c.frame.width * -j), (h = c.frame.height * (1 - k)), (i = c.frame.height * -k);
                    var m = 4 * this.currentBatchSize * this.vertSize,
                        n = c.baseTexture.resolution,
                        o = d.a / n,
                        p = d.b / n,
                        q = d.c / n,
                        r = d.d / n,
                        s = d.tx,
                        t = d.ty,
                        u = this.colors,
                        v = this.positions;
                    this.renderSession.roundPixels
                        ? ((v[m] = (o * g + q * i + s) | 0),
                          (v[m + 1] = (r * i + p * g + t) | 0),
                          (v[m + 5] = (o * f + q * i + s) | 0),
                          (v[m + 6] = (r * i + p * f + t) | 0),
                          (v[m + 10] = (o * f + q * h + s) | 0),
                          (v[m + 11] = (r * h + p * f + t) | 0),
                          (v[m + 15] = (o * g + q * h + s) | 0),
                          (v[m + 16] = (r * h + p * g + t) | 0))
                        : ((v[m] = o * g + q * i + s),
                          (v[m + 1] = r * i + p * g + t),
                          (v[m + 5] = o * f + q * i + s),
                          (v[m + 6] = r * i + p * f + t),
                          (v[m + 10] = o * f + q * h + s),
                          (v[m + 11] = r * h + p * f + t),
                          (v[m + 15] = o * g + q * h + s),
                          (v[m + 16] = r * h + p * g + t)),
                        (v[m + 2] = e.x0),
                        (v[m + 3] = e.y0),
                        (v[m + 7] = e.x1),
                        (v[m + 8] = e.y1),
                        (v[m + 12] = e.x2),
                        (v[m + 13] = e.y2),
                        (v[m + 17] = e.x3),
                        (v[m + 18] = e.y3);
                    var w = a.tint;
                    (u[m + 4] = u[m + 9] = u[m + 14] = u[m + 19] = (w >> 16) + (65280 & w) + ((255 & w) << 16) + ((255 * a.worldAlpha) << 24)), (this.sprites[this.currentBatchSize++] = a);
                }
            }),
            (b.WebGLSpriteBatch.prototype.renderTilingSprite = function (a) {
                var c = a.tilingTexture;
                this.currentBatchSize >= this.size && (this.flush(), (this.currentBaseTexture = c.baseTexture)), a._uvs || (a._uvs = new b.TextureUvs());
                var d = a._uvs,
                    e = c.baseTexture.width,
                    f = c.baseTexture.height;
                (a.tilePosition.x %= e * a.tileScaleOffset.x), (a.tilePosition.y %= f * a.tileScaleOffset.y);
                var g = a.tilePosition.x / (e * a.tileScaleOffset.x),
                    h = a.tilePosition.y / (f * a.tileScaleOffset.y),
                    i = a.width / e / (a.tileScale.x * a.tileScaleOffset.x),
                    j = a.height / f / (a.tileScale.y * a.tileScaleOffset.y);
                (d.x0 = 0 - g), (d.y0 = 0 - h), (d.x1 = 1 * i - g), (d.y1 = 0 - h), (d.x2 = 1 * i - g), (d.y2 = 1 * j - h), (d.x3 = 0 - g), (d.y3 = 1 * j - h);
                var k = a.tint,
                    l = (k >> 16) + (65280 & k) + ((255 & k) << 16) + ((255 * a.worldAlpha) << 24),
                    m = this.positions,
                    n = this.colors,
                    o = a.width,
                    p = a.height,
                    q = a.anchor.x,
                    r = a.anchor.y,
                    s = o * (1 - q),
                    t = o * -q,
                    u = p * (1 - r),
                    v = p * -r,
                    w = 4 * this.currentBatchSize * this.vertSize,
                    x = c.baseTexture.resolution,
                    y = a.worldTransform,
                    z = y.a / x,
                    A = y.b / x,
                    B = y.c / x,
                    C = y.d / x,
                    D = y.tx,
                    E = y.ty;
                (m[w++] = z * t + B * v + D),
                    (m[w++] = C * v + A * t + E),
                    (m[w++] = d.x0),
                    (m[w++] = d.y0),
                    (n[w++] = l),
                    (m[w++] = z * s + B * v + D),
                    (m[w++] = C * v + A * s + E),
                    (m[w++] = d.x1),
                    (m[w++] = d.y1),
                    (n[w++] = l),
                    (m[w++] = z * s + B * u + D),
                    (m[w++] = C * u + A * s + E),
                    (m[w++] = d.x2),
                    (m[w++] = d.y2),
                    (n[w++] = l),
                    (m[w++] = z * t + B * u + D),
                    (m[w++] = C * u + A * t + E),
                    (m[w++] = d.x3),
                    (m[w++] = d.y3),
                    (n[w++] = l),
                    (this.sprites[this.currentBatchSize++] = a);
            }),
            (b.WebGLSpriteBatch.prototype.flush = function () {
                if (0 !== this.currentBatchSize) {
                    var a,
                        c = this.gl;
                    if (this.dirty) {
                        (this.dirty = !1), c.activeTexture(c.TEXTURE0), c.bindBuffer(c.ARRAY_BUFFER, this.vertexBuffer), c.bindBuffer(c.ELEMENT_ARRAY_BUFFER, this.indexBuffer), (a = this.defaultShader.shaders[c.id]);
                        var d = 4 * this.vertSize;
                        c.vertexAttribPointer(a.aVertexPosition, 2, c.FLOAT, !1, d, 0), c.vertexAttribPointer(a.aTextureCoord, 2, c.FLOAT, !1, d, 8), c.vertexAttribPointer(a.colorAttribute, 4, c.UNSIGNED_BYTE, !0, d, 16);
                    }
                    if (this.currentBatchSize > 0.5 * this.size) c.bufferSubData(c.ARRAY_BUFFER, 0, this.vertices);
                    else {
                        var e = this.positions.subarray(0, 4 * this.currentBatchSize * this.vertSize);
                        c.bufferSubData(c.ARRAY_BUFFER, 0, e);
                    }
                    for (var f, g, h, i, j = 0, k = 0, l = null, m = this.renderSession.blendModeManager.currentBlendMode, n = null, o = !1, p = !1, q = 0, r = this.currentBatchSize; q < r; q++) {
                        (f = (i = this.sprites[q]).tilingTexture ? i.tilingTexture.baseTexture : i.texture.baseTexture), (o = m !== (g = i.blendMode)), (p = n !== (h = i.shader || this.defaultShader));
                        var s = f.skipRender;
                        if ((s && 0 < i.children.length && (s = !1), ((l !== f && !s) || o || p) && (this.renderBatch(l, j, k), (k = q), (j = 0), (l = f), o && ((m = g), this.renderSession.blendModeManager.setBlendMode(m)), p))) {
                            (a = (n = h).shaders[c.id]) || (((a = new b.PixiShader(c)).fragmentSrc = n.fragmentSrc), (a.uniforms = n.uniforms), a.init(), (n.shaders[c.id] = a)),
                                this.renderSession.shaderManager.setShader(a),
                                a.dirty && a.syncUniforms();
                            var t = this.renderSession.projection;
                            c.uniform2f(a.projectionVector, t.x, t.y);
                            var u = this.renderSession.offset;
                            c.uniform2f(a.offsetVector, u.x, u.y);
                        }
                        j++;
                    }
                    this.renderBatch(l, j, k), (this.currentBatchSize = 0);
                }
            }),
            (b.WebGLSpriteBatch.prototype.renderBatch = function (a, b, c) {
                if (0 !== b) {
                    var d = this.gl;
                    if (a._dirty[d.id]) {
                        if (!this.renderSession.renderer.updateTexture(a)) return;
                    } else d.bindTexture(d.TEXTURE_2D, a._glTextures[d.id]);
                    d.drawElements(d.TRIANGLES, 6 * b, d.UNSIGNED_SHORT, 6 * c * 2), this.renderSession.drawCount++;
                }
            }),
            (b.WebGLSpriteBatch.prototype.stop = function () {
                this.flush(), (this.dirty = !0);
            }),
            (b.WebGLSpriteBatch.prototype.start = function () {
                this.dirty = !0;
            }),
            (b.WebGLSpriteBatch.prototype.destroy = function () {
                (this.vertices = null), (this.indices = null), this.gl.deleteBuffer(this.vertexBuffer), this.gl.deleteBuffer(this.indexBuffer), (this.currentBaseTexture = null), (this.gl = null);
            }),
            (b.WebGLFastSpriteBatch = function (a) {
                (this.vertSize = 10), (this.maxSize = 6e3), (this.size = this.maxSize);
                var c = 4 * this.size * this.vertSize,
                    d = 6 * this.maxSize;
                (this.vertices = new b.Float32Array(c)), (this.indices = new b.Uint16Array(d)), (this.vertexBuffer = null), (this.indexBuffer = null);
                for (var e = (this.lastIndexCount = 0), f = 0; e < d; e += 6, f += 4)
                    (this.indices[e + 0] = f + 0), (this.indices[e + 1] = f + 1), (this.indices[e + 2] = f + 2), (this.indices[e + 3] = f + 0), (this.indices[e + 4] = f + 2), (this.indices[e + 5] = f + 3);
                (this.drawing = !1), (this.currentBatchSize = 0), (this.currentBaseTexture = null), (this.currentBlendMode = 0), (this.renderSession = null), (this.shader = null), (this.matrix = null), this.setContext(a);
            }),
            (b.WebGLFastSpriteBatch.prototype.constructor = b.WebGLFastSpriteBatch),
            (b.WebGLFastSpriteBatch.prototype.setContext = function (a) {
                (this.gl = a),
                    (this.vertexBuffer = a.createBuffer()),
                    (this.indexBuffer = a.createBuffer()),
                    a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
                    a.bufferData(a.ELEMENT_ARRAY_BUFFER, this.indices, a.STATIC_DRAW),
                    a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer),
                    a.bufferData(a.ARRAY_BUFFER, this.vertices, a.DYNAMIC_DRAW);
            }),
            (b.WebGLFastSpriteBatch.prototype.begin = function (a, b) {
                (this.renderSession = b), (this.shader = this.renderSession.shaderManager.fastShader), (this.matrix = a.worldTransform.toArray(!0)), this.start();
            }),
            (b.WebGLFastSpriteBatch.prototype.end = function () {
                this.flush();
            }),
            (b.WebGLFastSpriteBatch.prototype.render = function (a) {
                var b = a.children,
                    c = b[0];
                if (c.texture._uvs) {
                    (this.currentBaseTexture = c.texture.baseTexture), c.blendMode !== this.renderSession.blendModeManager.currentBlendMode && (this.flush(), this.renderSession.blendModeManager.setBlendMode(c.blendMode));
                    for (var d = 0, e = b.length; d < e; d++) this.renderSprite(b[d]);
                    this.flush();
                }
            }),
            (b.WebGLFastSpriteBatch.prototype.renderSprite = function (a) {
                if (a.visible && (a.texture.baseTexture === this.currentBaseTexture || a.texture.baseTexture.skipRender || (this.flush(), (this.currentBaseTexture = a.texture.baseTexture), a.texture._uvs))) {
                    var b,
                        c,
                        d,
                        e,
                        f,
                        g,
                        h = this.vertices;
                    if (((b = a.texture._uvs), a.texture.frame.width, a.texture.frame.height, a.texture.trim)) {
                        var i = a.texture.trim;
                        (c = (d = i.x - a.anchor.x * i.width) + a.texture.crop.width), (e = (f = i.y - a.anchor.y * i.height) + a.texture.crop.height);
                    } else (c = a.texture.frame.width * (1 - a.anchor.x)), (d = a.texture.frame.width * -a.anchor.x), (e = a.texture.frame.height * (1 - a.anchor.y)), (f = a.texture.frame.height * -a.anchor.y);
                    (g = 4 * this.currentBatchSize * this.vertSize),
                        (h[g++] = d),
                        (h[g++] = f),
                        (h[g++] = a.position.x),
                        (h[g++] = a.position.y),
                        (h[g++] = a.scale.x),
                        (h[g++] = a.scale.y),
                        (h[g++] = a.rotation),
                        (h[g++] = b.x0),
                        (h[g++] = b.y1),
                        (h[g++] = a.alpha),
                        (h[g++] = c),
                        (h[g++] = f),
                        (h[g++] = a.position.x),
                        (h[g++] = a.position.y),
                        (h[g++] = a.scale.x),
                        (h[g++] = a.scale.y),
                        (h[g++] = a.rotation),
                        (h[g++] = b.x1),
                        (h[g++] = b.y1),
                        (h[g++] = a.alpha),
                        (h[g++] = c),
                        (h[g++] = e),
                        (h[g++] = a.position.x),
                        (h[g++] = a.position.y),
                        (h[g++] = a.scale.x),
                        (h[g++] = a.scale.y),
                        (h[g++] = a.rotation),
                        (h[g++] = b.x2),
                        (h[g++] = b.y2),
                        (h[g++] = a.alpha),
                        (h[g++] = d),
                        (h[g++] = e),
                        (h[g++] = a.position.x),
                        (h[g++] = a.position.y),
                        (h[g++] = a.scale.x),
                        (h[g++] = a.scale.y),
                        (h[g++] = a.rotation),
                        (h[g++] = b.x3),
                        (h[g++] = b.y3),
                        (h[g++] = a.alpha),
                        this.currentBatchSize++,
                        this.currentBatchSize >= this.size && this.flush();
                }
            }),
            (b.WebGLFastSpriteBatch.prototype.flush = function () {
                if (0 !== this.currentBatchSize) {
                    var a = this.gl;
                    if (
                        (this.currentBaseTexture._glTextures[a.id] || this.renderSession.renderer.updateTexture(this.currentBaseTexture, a),
                        a.bindTexture(a.TEXTURE_2D, this.currentBaseTexture._glTextures[a.id]),
                        this.currentBatchSize > 0.5 * this.size)
                    )
                        a.bufferSubData(a.ARRAY_BUFFER, 0, this.vertices);
                    else {
                        var b = this.vertices.subarray(0, 4 * this.currentBatchSize * this.vertSize);
                        a.bufferSubData(a.ARRAY_BUFFER, 0, b);
                    }
                    a.drawElements(a.TRIANGLES, 6 * this.currentBatchSize, a.UNSIGNED_SHORT, 0), (this.currentBatchSize = 0), this.renderSession.drawCount++;
                }
            }),
            (b.WebGLFastSpriteBatch.prototype.stop = function () {
                this.flush();
            }),
            (b.WebGLFastSpriteBatch.prototype.start = function () {
                var a = this.gl;
                a.activeTexture(a.TEXTURE0), a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer), a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer);
                var b = this.renderSession.projection;
                a.uniform2f(this.shader.projectionVector, b.x, b.y), a.uniformMatrix3fv(this.shader.uMatrix, !1, this.matrix);
                var c = 4 * this.vertSize;
                a.vertexAttribPointer(this.shader.aVertexPosition, 2, a.FLOAT, !1, c, 0),
                    a.vertexAttribPointer(this.shader.aPositionCoord, 2, a.FLOAT, !1, c, 8),
                    a.vertexAttribPointer(this.shader.aScale, 2, a.FLOAT, !1, c, 16),
                    a.vertexAttribPointer(this.shader.aRotation, 1, a.FLOAT, !1, c, 24),
                    a.vertexAttribPointer(this.shader.aTextureCoord, 2, a.FLOAT, !1, c, 28),
                    a.vertexAttribPointer(this.shader.colorAttribute, 1, a.FLOAT, !1, c, 36);
            }),
            (b.WebGLFilterManager = function () {
                (this.filterStack = []), (this.offsetX = 0), (this.offsetY = 0);
            }),
            (b.WebGLFilterManager.prototype.constructor = b.WebGLFilterManager),
            (b.WebGLFilterManager.prototype.setContext = function (a) {
                (this.gl = a), (this.texturePool = []), this.initShaderBuffers();
            }),
            (b.WebGLFilterManager.prototype.begin = function (a, b) {
                (this.renderSession = a), (this.defaultShader = a.shaderManager.defaultShader);
                var c = this.renderSession.projection;
                (this.width = 2 * c.x), (this.height = 2 * -c.y), (this.buffer = b);
            }),
            (b.WebGLFilterManager.prototype.pushFilter = function (a) {
                var c = this.gl,
                    d = this.renderSession.projection,
                    e = this.renderSession.offset;
                (a._filterArea = a.target.filterArea || a.target.getBounds()),
                    (a._previous_stencil_mgr = this.renderSession.stencilManager),
                    (this.renderSession.stencilManager = new b.WebGLStencilManager()),
                    this.renderSession.stencilManager.setContext(c),
                    c.disable(c.STENCIL_TEST),
                    this.filterStack.push(a);
                var f = a.filterPasses[0];
                (this.offsetX += a._filterArea.x), (this.offsetY += a._filterArea.y);
                var g = this.texturePool.pop();
                g
                    ? g.resize(this.width * this.renderSession.resolution, this.height * this.renderSession.resolution)
                    : (g = new b.FilterTexture(this.gl, this.width * this.renderSession.resolution, this.height * this.renderSession.resolution)),
                    c.bindTexture(c.TEXTURE_2D, g.texture);
                var h = a._filterArea,
                    i = f.padding;
                (h.x -= i),
                    (h.y -= i),
                    (h.width += 2 * i),
                    (h.height += 2 * i),
                    h.x < 0 && (h.x = 0),
                    h.width > this.width && (h.width = this.width),
                    h.y < 0 && (h.y = 0),
                    h.height > this.height && (h.height = this.height),
                    c.bindFramebuffer(c.FRAMEBUFFER, g.frameBuffer),
                    c.viewport(0, 0, h.width * this.renderSession.resolution, h.height * this.renderSession.resolution),
                    (d.x = h.width / 2),
                    (d.y = -h.height / 2),
                    (e.x = -h.x),
                    (e.y = -h.y),
                    c.colorMask(!0, !0, !0, !0),
                    c.clearColor(0, 0, 0, 0),
                    c.clear(c.COLOR_BUFFER_BIT),
                    (a._glFilterTexture = g);
            }),
            (b.WebGLFilterManager.prototype.popFilter = function () {
                var a = this.gl,
                    c = this.filterStack.pop(),
                    d = c._filterArea,
                    e = c._glFilterTexture,
                    f = this.renderSession.projection,
                    g = this.renderSession.offset;
                if (1 < c.filterPasses.length) {
                    a.viewport(0, 0, d.width * this.renderSession.resolution, d.height * this.renderSession.resolution),
                        a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer),
                        (this.vertexArray[0] = 0),
                        (this.vertexArray[1] = d.height),
                        (this.vertexArray[2] = d.width),
                        (this.vertexArray[3] = d.height),
                        (this.vertexArray[4] = 0),
                        (this.vertexArray[5] = 0),
                        (this.vertexArray[6] = d.width),
                        (this.vertexArray[7] = 0),
                        a.bufferSubData(a.ARRAY_BUFFER, 0, this.vertexArray),
                        a.bindBuffer(a.ARRAY_BUFFER, this.uvBuffer),
                        (this.uvArray[2] = d.width / this.width),
                        (this.uvArray[5] = d.height / this.height),
                        (this.uvArray[6] = d.width / this.width),
                        (this.uvArray[7] = d.height / this.height),
                        a.bufferSubData(a.ARRAY_BUFFER, 0, this.uvArray);
                    var h = e,
                        i = this.texturePool.pop();
                    i || (i = new b.FilterTexture(this.gl, this.width * this.renderSession.resolution, this.height * this.renderSession.resolution)),
                        i.resize(this.width * this.renderSession.resolution, this.height * this.renderSession.resolution),
                        a.bindFramebuffer(a.FRAMEBUFFER, i.frameBuffer),
                        a.clear(a.COLOR_BUFFER_BIT),
                        a.disable(a.BLEND);
                    for (var j = 0; j < c.filterPasses.length - 1; j++) {
                        var k = c.filterPasses[j];
                        a.bindFramebuffer(a.FRAMEBUFFER, i.frameBuffer), a.activeTexture(a.TEXTURE0), a.bindTexture(a.TEXTURE_2D, h.texture), this.applyFilterPass(k, d, d.width, d.height);
                        var l = h;
                        (h = i), (i = l);
                    }
                    a.enable(a.BLEND), (e = h), this.texturePool.push(i);
                }
                var m = c.filterPasses[c.filterPasses.length - 1];
                (this.offsetX -= d.x), (this.offsetY -= d.y);
                var n = this.width,
                    o = this.height,
                    p = 0,
                    q = 0,
                    r = this.buffer;
                if (0 === this.filterStack.length) a.colorMask(!0, !0, !0, !0);
                else {
                    var s = this.filterStack[this.filterStack.length - 1];
                    (n = (d = s._filterArea).width), (o = d.height), (p = d.x), (q = d.y), (r = s._glFilterTexture.frameBuffer);
                }
                (f.x = n / 2), (f.y = -o / 2), (g.x = p), (g.y = q);
                var t = (d = c._filterArea).x - p,
                    u = d.y - q;
                a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer),
                    (this.vertexArray[0] = t),
                    (this.vertexArray[1] = u + d.height),
                    (this.vertexArray[2] = t + d.width),
                    (this.vertexArray[3] = u + d.height),
                    (this.vertexArray[4] = t),
                    (this.vertexArray[5] = u),
                    (this.vertexArray[6] = t + d.width),
                    (this.vertexArray[7] = u),
                    a.bufferSubData(a.ARRAY_BUFFER, 0, this.vertexArray),
                    a.bindBuffer(a.ARRAY_BUFFER, this.uvBuffer),
                    (this.uvArray[2] = d.width / this.width),
                    (this.uvArray[5] = d.height / this.height),
                    (this.uvArray[6] = d.width / this.width),
                    (this.uvArray[7] = d.height / this.height),
                    a.bufferSubData(a.ARRAY_BUFFER, 0, this.uvArray),
                    a.viewport(0, 0, n * this.renderSession.resolution, o * this.renderSession.resolution),
                    a.bindFramebuffer(a.FRAMEBUFFER, r),
                    a.activeTexture(a.TEXTURE0),
                    a.bindTexture(a.TEXTURE_2D, e.texture),
                    this.renderSession.stencilManager && this.renderSession.stencilManager.destroy(),
                    (this.renderSession.stencilManager = c._previous_stencil_mgr),
                    (c._previous_stencil_mgr = null),
                    0 < this.renderSession.stencilManager.count ? a.enable(a.STENCIL_TEST) : a.disable(a.STENCIL_TEST),
                    this.applyFilterPass(m, d, n, o),
                    this.texturePool.push(e),
                    (c._glFilterTexture = null);
            }),
            (b.WebGLFilterManager.prototype.applyFilterPass = function (a, c, d, e) {
                var f = this.gl,
                    g = a.shaders[f.id];
                g || (((g = new b.PixiShader(f)).fragmentSrc = a.fragmentSrc), (g.uniforms = a.uniforms), g.init(), (a.shaders[f.id] = g)),
                    this.renderSession.shaderManager.setShader(g),
                    f.uniform2f(g.projectionVector, d / 2, -e / 2),
                    f.uniform2f(g.offsetVector, 0, 0),
                    a.uniforms.dimensions &&
                        ((a.uniforms.dimensions.value[0] = this.width), (a.uniforms.dimensions.value[1] = this.height), (a.uniforms.dimensions.value[2] = this.vertexArray[0]), (a.uniforms.dimensions.value[3] = this.vertexArray[5])),
                    g.syncUniforms(),
                    f.bindBuffer(f.ARRAY_BUFFER, this.vertexBuffer),
                    f.vertexAttribPointer(g.aVertexPosition, 2, f.FLOAT, !1, 0, 0),
                    f.bindBuffer(f.ARRAY_BUFFER, this.uvBuffer),
                    f.vertexAttribPointer(g.aTextureCoord, 2, f.FLOAT, !1, 0, 0),
                    f.bindBuffer(f.ARRAY_BUFFER, this.colorBuffer),
                    f.vertexAttribPointer(g.colorAttribute, 2, f.FLOAT, !1, 0, 0),
                    f.bindBuffer(f.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
                    f.drawElements(f.TRIANGLES, 6, f.UNSIGNED_SHORT, 0),
                    this.renderSession.drawCount++;
            }),
            (b.WebGLFilterManager.prototype.initShaderBuffers = function () {
                var a = this.gl;
                (this.vertexBuffer = a.createBuffer()),
                    (this.uvBuffer = a.createBuffer()),
                    (this.colorBuffer = a.createBuffer()),
                    (this.indexBuffer = a.createBuffer()),
                    (this.vertexArray = new b.Float32Array([0, 0, 1, 0, 0, 1, 1, 1])),
                    a.bindBuffer(a.ARRAY_BUFFER, this.vertexBuffer),
                    a.bufferData(a.ARRAY_BUFFER, this.vertexArray, a.STATIC_DRAW),
                    (this.uvArray = new b.Float32Array([0, 0, 1, 0, 0, 1, 1, 1])),
                    a.bindBuffer(a.ARRAY_BUFFER, this.uvBuffer),
                    a.bufferData(a.ARRAY_BUFFER, this.uvArray, a.STATIC_DRAW),
                    (this.colorArray = new b.Float32Array([1, 16777215, 1, 16777215, 1, 16777215, 1, 16777215])),
                    a.bindBuffer(a.ARRAY_BUFFER, this.colorBuffer),
                    a.bufferData(a.ARRAY_BUFFER, this.colorArray, a.STATIC_DRAW),
                    a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
                    a.bufferData(a.ELEMENT_ARRAY_BUFFER, new Uint16Array([0, 1, 2, 1, 3, 2]), a.STATIC_DRAW);
            }),
            (b.WebGLFilterManager.prototype.destroy = function () {
                var a = this.gl;
                (this.filterStack = null), (this.offsetX = 0);
                for (var b = (this.offsetY = 0); b < this.texturePool.length; b++) this.texturePool[b].destroy();
                (this.texturePool = null), a.deleteBuffer(this.vertexBuffer), a.deleteBuffer(this.uvBuffer), a.deleteBuffer(this.colorBuffer), a.deleteBuffer(this.indexBuffer);
            }),
            (b.FilterTexture = function (a, c, d, e) {
                (this.gl = a),
                    (this.frameBuffer = a.createFramebuffer()),
                    (this.texture = a.createTexture()),
                    (e = e || b.scaleModes.DEFAULT),
                    a.bindTexture(a.TEXTURE_2D, this.texture),
                    a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MAG_FILTER, e === b.scaleModes.LINEAR ? a.LINEAR : a.NEAREST),
                    a.texParameteri(a.TEXTURE_2D, a.TEXTURE_MIN_FILTER, e === b.scaleModes.LINEAR ? a.LINEAR : a.NEAREST),
                    a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_S, a.CLAMP_TO_EDGE),
                    a.texParameteri(a.TEXTURE_2D, a.TEXTURE_WRAP_T, a.CLAMP_TO_EDGE),
                    a.bindFramebuffer(a.FRAMEBUFFER, this.frameBuffer),
                    a.bindFramebuffer(a.FRAMEBUFFER, this.frameBuffer),
                    a.framebufferTexture2D(a.FRAMEBUFFER, a.COLOR_ATTACHMENT0, a.TEXTURE_2D, this.texture, 0),
                    (this.renderBuffer = a.createRenderbuffer()),
                    a.bindRenderbuffer(a.RENDERBUFFER, this.renderBuffer),
                    a.framebufferRenderbuffer(a.FRAMEBUFFER, a.DEPTH_STENCIL_ATTACHMENT, a.RENDERBUFFER, this.renderBuffer),
                    this.resize(c, d);
            }),
            (b.FilterTexture.prototype.constructor = b.FilterTexture),
            (b.FilterTexture.prototype.clear = function () {
                var a = this.gl;
                a.clearColor(0, 0, 0, 0), a.clear(a.COLOR_BUFFER_BIT);
            }),
            (b.FilterTexture.prototype.resize = function (a, b) {
                if (this.width !== a || this.height !== b) {
                    (this.width = a), (this.height = b);
                    var c = this.gl;
                    c.bindTexture(c.TEXTURE_2D, this.texture),
                        c.texImage2D(c.TEXTURE_2D, 0, c.RGBA, a, b, 0, c.RGBA, c.UNSIGNED_BYTE, null),
                        c.bindRenderbuffer(c.RENDERBUFFER, this.renderBuffer),
                        c.renderbufferStorage(c.RENDERBUFFER, c.DEPTH_STENCIL, a, b);
                }
            }),
            (b.FilterTexture.prototype.destroy = function () {
                var a = this.gl;
                a.deleteFramebuffer(this.frameBuffer), a.deleteTexture(this.texture), (this.frameBuffer = null), (this.texture = null);
            }),
            (b.CanvasBuffer = function (a, c) {
                (this.width = a), (this.height = c), (this.canvas = b.CanvasPool.create(this, this.width, this.height)), (this.context = this.canvas.getContext("2d")), (this.canvas.width = a), (this.canvas.height = c);
            }),
            (b.CanvasBuffer.prototype.constructor = b.CanvasBuffer),
            (b.CanvasBuffer.prototype.clear = function () {
                this.context.setTransform(1, 0, 0, 1, 0, 0), this.context.clearRect(0, 0, this.width, this.height);
            }),
            (b.CanvasBuffer.prototype.resize = function (a, b) {
                (this.width = this.canvas.width = a), (this.height = this.canvas.height = b);
            }),
            (b.CanvasBuffer.prototype.destroy = function () {
                b.CanvasPool.remove(this);
            }),
            (b.CanvasMaskManager = function () {}),
            (b.CanvasMaskManager.prototype.constructor = b.CanvasMaskManager),
            (b.CanvasMaskManager.prototype.pushMask = function (a, c) {
                var d = c.context;
                d.save();
                var e = a.alpha,
                    f = a.worldTransform,
                    g = c.resolution;
                d.setTransform(f.a * g, f.b * g, f.c * g, f.d * g, f.tx * g, f.ty * g), b.CanvasGraphics.renderGraphicsMask(a, d), d.clip(), (a.worldAlpha = e);
            }),
            (b.CanvasMaskManager.prototype.popMask = function (a) {
                a.context.restore();
            }),
            (b.CanvasTinter = function () {}),
            (b.CanvasTinter.getTintedTexture = function (a, c) {
                var d = a.tintedTexture || b.CanvasPool.create(this);
                return b.CanvasTinter.tintMethod(a.texture, c, d), d;
            }),
            (b.CanvasTinter.tintWithMultiply = function (a, b, c) {
                var d = c.getContext("2d"),
                    e = a.crop;
                (c.width === e.width && c.height === e.height) || ((c.width = e.width), (c.height = e.height)),
                    d.clearRect(0, 0, e.width, e.height),
                    (d.fillStyle = "#" + ("00000" + (0 | b).toString(16)).substr(-6)),
                    d.fillRect(0, 0, e.width, e.height),
                    (d.globalCompositeOperation = "multiply"),
                    d.drawImage(a.baseTexture.source, e.x, e.y, e.width, e.height, 0, 0, e.width, e.height),
                    (d.globalCompositeOperation = "destination-atop"),
                    d.drawImage(a.baseTexture.source, e.x, e.y, e.width, e.height, 0, 0, e.width, e.height);
            }),
            (b.CanvasTinter.tintWithPerPixel = function (a, c, d) {
                var e = d.getContext("2d"),
                    f = a.crop;
                (d.width = f.width), (d.height = f.height), (e.globalCompositeOperation = "copy"), e.drawImage(a.baseTexture.source, f.x, f.y, f.width, f.height, 0, 0, f.width, f.height);
                for (var g = b.hex2rgb(c), h = g[0], i = g[1], j = g[2], k = e.getImageData(0, 0, f.width, f.height), l = k.data, m = 0; m < l.length; m += 4)
                    if (((l[m + 0] *= h), (l[m + 1] *= i), (l[m + 2] *= j), !b.CanvasTinter.canHandleAlpha)) {
                        var n = l[m + 3];
                        (l[m + 0] /= 255 / n), (l[m + 1] /= 255 / n), (l[m + 2] /= 255 / n);
                    }
                e.putImageData(k, 0, 0);
            }),
            (b.CanvasTinter.checkInverseAlpha = function () {
                var a = new b.CanvasBuffer(2, 1);
                (a.context.fillStyle = "rgba(10, 20, 30, 0.5)"), a.context.fillRect(0, 0, 1, 1);
                var c = a.context.getImageData(0, 0, 1, 1);
                if (null === c) return !1;
                a.context.putImageData(c, 1, 0);
                var d = a.context.getImageData(1, 0, 1, 1);
                return d.data[0] === c.data[0] && d.data[1] === c.data[1] && d.data[2] === c.data[2] && d.data[3] === c.data[3];
            }),
            (b.CanvasTinter.canHandleAlpha = b.CanvasTinter.checkInverseAlpha()),
            (b.CanvasTinter.canUseMultiply = b.canUseNewCanvasBlendModes()),
            (b.CanvasTinter.tintMethod = b.CanvasTinter.canUseMultiply ? b.CanvasTinter.tintWithMultiply : b.CanvasTinter.tintWithPerPixel),
            (b.CanvasRenderer = function (a) {
                (this.game = a),
                    b.defaultRenderer || (b.defaultRenderer = this),
                    (this.type = b.CANVAS_RENDERER),
                    (this.resolution = a.resolution),
                    (this.clearBeforeRender = a.clearBeforeRender),
                    (this.transparent = a.transparent),
                    (this.autoResize = !1),
                    (this.width = a.width * this.resolution),
                    (this.height = a.height * this.resolution),
                    (this.view = a.canvas),
                    (this.context = this.view.getContext("2d", { alpha: this.transparent })),
                    (this.refresh = !0),
                    (this.count = 0),
                    (this.maskManager = new b.CanvasMaskManager()),
                    (this.renderSession = { context: this.context, maskManager: this.maskManager, scaleMode: null, smoothProperty: Phaser.Canvas.getSmoothingPrefix(this.context), roundPixels: !1 }),
                    this.mapBlendModes(),
                    this.resize(this.width, this.height);
            }),
            (b.CanvasRenderer.prototype.constructor = b.CanvasRenderer),
            (b.CanvasRenderer.prototype.render = function (a) {
                this.context.setTransform(1, 0, 0, 1, 0, 0),
                    (this.context.globalAlpha = 1),
                    (this.renderSession.currentBlendMode = 0),
                    (this.renderSession.shakeX = this.game.camera._shake.x),
                    (this.renderSession.shakeY = this.game.camera._shake.y),
                    (this.context.globalCompositeOperation = "source-over"),
                    navigator.isCocoonJS && this.view.screencanvas && ((this.context.fillStyle = "black"), this.context.clear()),
                    this.clearBeforeRender && (this.transparent ? this.context.clearRect(0, 0, this.width, this.height) : a._bgColor && ((this.context.fillStyle = a._bgColor.rgba), this.context.fillRect(0, 0, this.width, this.height))),
                    this.renderDisplayObject(a);
            }),
            (b.CanvasRenderer.prototype.destroy = function (a) {
                void 0 === a && (a = !0), a && this.view.parent && this.view.parent.removeChild(this.view), (this.view = null), (this.context = null), (this.maskManager = null), (this.renderSession = null);
            }),
            (b.CanvasRenderer.prototype.resize = function (a, c) {
                (this.width = a * this.resolution),
                    (this.height = c * this.resolution),
                    (this.view.width = this.width),
                    (this.view.height = this.height),
                    this.autoResize && ((this.view.style.width = this.width / this.resolution + "px"), (this.view.style.height = this.height / this.resolution + "px")),
                    this.renderSession.smoothProperty && (this.context[this.renderSession.smoothProperty] = this.renderSession.scaleMode === b.scaleModes.LINEAR);
            }),
            (b.CanvasRenderer.prototype.renderDisplayObject = function (a, b, c) {
                (this.renderSession.context = b || this.context), (this.renderSession.resolution = this.resolution), a._renderCanvas(this.renderSession, c);
            }),
            (b.CanvasRenderer.prototype.mapBlendModes = function () {
                if (!b.blendModesCanvas) {
                    var a = [],
                        c = b.blendModes,
                        d = b.canUseNewCanvasBlendModes();
                    (a[c.NORMAL] = "source-over"),
                        (a[c.ADD] = "lighter"),
                        (a[c.MULTIPLY] = d ? "multiply" : "source-over"),
                        (a[c.SCREEN] = d ? "screen" : "source-over"),
                        (a[c.OVERLAY] = d ? "overlay" : "source-over"),
                        (a[c.DARKEN] = d ? "darken" : "source-over"),
                        (a[c.LIGHTEN] = d ? "lighten" : "source-over"),
                        (a[c.COLOR_DODGE] = d ? "color-dodge" : "source-over"),
                        (a[c.COLOR_BURN] = d ? "color-burn" : "source-over"),
                        (a[c.HARD_LIGHT] = d ? "hard-light" : "source-over"),
                        (a[c.SOFT_LIGHT] = d ? "soft-light" : "source-over"),
                        (a[c.DIFFERENCE] = d ? "difference" : "source-over"),
                        (a[c.EXCLUSION] = d ? "exclusion" : "source-over"),
                        (a[c.HUE] = d ? "hue" : "source-over"),
                        (a[c.SATURATION] = d ? "saturation" : "source-over"),
                        (a[c.COLOR] = d ? "color" : "source-over"),
                        (a[c.LUMINOSITY] = d ? "luminosity" : "source-over"),
                        (b.blendModesCanvas = a);
                }
            }),
            (b.BaseTexture = function (a, c) {
                (this.resolution = 1),
                    (this.width = 100),
                    (this.height = 100),
                    (this.scaleMode = c || b.scaleModes.DEFAULT),
                    (this.hasLoaded = !1),
                    (this.source = a),
                    (this.premultipliedAlpha = !0),
                    (this._glTextures = []),
                    (this.mipmap = !1),
                    (this._dirty = [!0, !0, !0, !0]),
                    a &&
                        ((this.source.complete || this.source.getContext) &&
                            this.source.width &&
                            this.source.height &&
                            ((this.hasLoaded = !0), (this.width = this.source.naturalWidth || this.source.width), (this.height = this.source.naturalHeight || this.source.height), this.dirty()),
                        (this.skipRender = !1),
                        (this._powerOf2 = !1));
            }),
            (b.BaseTexture.prototype.constructor = b.BaseTexture),
            (b.BaseTexture.prototype.forceLoaded = function (a, b) {
                (this.hasLoaded = !0), (this.width = a), (this.height = b), this.dirty();
            }),
            (b.BaseTexture.prototype.destroy = function () {
                this.source && b.CanvasPool.removeByCanvas(this.source), (this.source = null), this.unloadFromGPU();
            }),
            (b.BaseTexture.prototype.updateSourceImage = function (a) {}),
            (b.BaseTexture.prototype.dirty = function () {
                for (var a = 0; a < this._glTextures.length; a++) this._dirty[a] = !0;
            }),
            (b.BaseTexture.prototype.unloadFromGPU = function () {
                this.dirty();
                for (var a = this._glTextures.length - 1; 0 <= a; a--) {
                    var c = this._glTextures[a],
                        d = b.glContexts[a];
                    d && c && d.deleteTexture(c);
                }
                (this._glTextures.length = 0), this.dirty();
            }),
            (b.BaseTexture.fromCanvas = function (a, c) {
                return 0 === a.width && (a.width = 1), 0 === a.height && (a.height = 1), new b.BaseTexture(a, c);
            }),
            (b.TextureSilentFail = !1),
            (b.Texture = function (a, c, d, e) {
                (this.noFrame = !1),
                    c || ((this.noFrame = !0), (c = new b.Rectangle(0, 0, 1, 1))),
                    a instanceof b.Texture && (a = a.baseTexture),
                    (this.baseTexture = a),
                    (this.frame = c),
                    (this.trim = e),
                    (this.valid = !1),
                    (this.isTiling = !1),
                    (this.requiresUpdate = !1),
                    (this.requiresReTint = !1),
                    (this._uvs = null),
                    (this.width = 0),
                    (this.height = 0),
                    (this.crop = d || new b.Rectangle(0, 0, 1, 1)),
                    a.hasLoaded && (this.noFrame && (c = new b.Rectangle(0, 0, a.width, a.height)), this.setFrame(c));
            }),
            (b.Texture.prototype.constructor = b.Texture),
            (b.Texture.prototype.onBaseTextureLoaded = function () {
                var a = this.baseTexture;
                this.noFrame && (this.frame = new b.Rectangle(0, 0, a.width, a.height)), this.setFrame(this.frame);
            }),
            (b.Texture.prototype.destroy = function (a) {
                a && this.baseTexture.destroy(), (this.valid = !1);
            }),
            (b.Texture.prototype.setFrame = function (a) {
                if (
                    ((this.noFrame = !1),
                    (this.frame = a),
                    (this.width = a.width),
                    (this.height = a.height),
                    (this.crop.x = a.x),
                    (this.crop.y = a.y),
                    (this.crop.width = a.width),
                    (this.crop.height = a.height),
                    this.trim || !(a.x + a.width > this.baseTexture.width || a.y + a.height > this.baseTexture.height))
                )
                    (this.valid = a && a.width && a.height && this.baseTexture.source && this.baseTexture.hasLoaded),
                        this.trim && ((this.width = this.trim.width), (this.height = this.trim.height), (this.frame.width = this.trim.width), (this.frame.height = this.trim.height)),
                        this.valid && this._updateUvs();
                else {
                    if (!b.TextureSilentFail) throw new Error("Texture Error: frame does not fit inside the base Texture dimensions " + this);
                    this.valid = !1;
                }
            }),
            (b.Texture.prototype._updateUvs = function () {
                this._uvs || (this._uvs = new b.TextureUvs());
                var a = this.crop,
                    c = this.baseTexture.width,
                    d = this.baseTexture.height;
                (this._uvs.x0 = a.x / c),
                    (this._uvs.y0 = a.y / d),
                    (this._uvs.x1 = (a.x + a.width) / c),
                    (this._uvs.y1 = a.y / d),
                    (this._uvs.x2 = (a.x + a.width) / c),
                    (this._uvs.y2 = (a.y + a.height) / d),
                    (this._uvs.x3 = a.x / c),
                    (this._uvs.y3 = (a.y + a.height) / d);
            }),
            (b.Texture.fromCanvas = function (a, c) {
                var d = b.BaseTexture.fromCanvas(a, c);
                return new b.Texture(d);
            }),
            (b.TextureUvs = function () {
                (this.x0 = 0), (this.y0 = 0), (this.x1 = 0), (this.y1 = 0), (this.x2 = 0), (this.y2 = 0), (this.x3 = 0), (this.y3 = 0);
            }),
            (b.RenderTexture = function (a, c, d, e, f) {
                if (
                    ((this.width = a || 100),
                    (this.height = c || 100),
                    (this.resolution = f || 1),
                    (this.frame = new b.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution)),
                    (this.crop = new b.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution)),
                    (this.baseTexture = new b.BaseTexture()),
                    (this.baseTexture.width = this.width * this.resolution),
                    (this.baseTexture.height = this.height * this.resolution),
                    (this.baseTexture._glTextures = []),
                    (this.baseTexture.resolution = this.resolution),
                    (this.baseTexture.scaleMode = e || b.scaleModes.DEFAULT),
                    (this.baseTexture.hasLoaded = !0),
                    b.Texture.call(this, this.baseTexture, new b.Rectangle(0, 0, this.width * this.resolution, this.height * this.resolution)),
                    (this.renderer = d || b.defaultRenderer),
                    this.renderer.type === b.WEBGL_RENDERER)
                ) {
                    var g = this.renderer.gl;
                    (this.baseTexture._dirty[g.id] = !1),
                        (this.textureBuffer = new b.FilterTexture(g, this.width, this.height, this.baseTexture.scaleMode)),
                        (this.baseTexture._glTextures[g.id] = this.textureBuffer.texture),
                        (this.render = this.renderWebGL),
                        (this.projection = new b.Point(0.5 * this.width, 0.5 * -this.height));
                } else (this.render = this.renderCanvas), (this.textureBuffer = new b.CanvasBuffer(this.width * this.resolution, this.height * this.resolution)), (this.baseTexture.source = this.textureBuffer.canvas);
                (this.valid = !0), (this.tempMatrix = new Phaser.Matrix()), this._updateUvs();
            }),
            (b.RenderTexture.prototype = Object.create(b.Texture.prototype)),
            (b.RenderTexture.prototype.constructor = b.RenderTexture),
            (b.RenderTexture.prototype.resize = function (a, c, d) {
                (a === this.width && c === this.height) ||
                    ((this.valid = 0 < a && 0 < c),
                    (this.width = a),
                    (this.height = c),
                    (this.frame.width = this.crop.width = a * this.resolution),
                    (this.frame.height = this.crop.height = c * this.resolution),
                    d && ((this.baseTexture.width = this.width * this.resolution), (this.baseTexture.height = this.height * this.resolution)),
                    this.renderer.type === b.WEBGL_RENDERER && ((this.projection.x = this.width / 2), (this.projection.y = -this.height / 2)),
                    this.valid && this.textureBuffer.resize(this.width, this.height));
            }),
            (b.RenderTexture.prototype.clear = function () {
                this.valid && (this.renderer.type === b.WEBGL_RENDERER && this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER, this.textureBuffer.frameBuffer), this.textureBuffer.clear());
            }),
            (b.RenderTexture.prototype.renderWebGL = function (a, b, c) {
                if (this.valid && 0 !== a.alpha) {
                    var d = a.worldTransform;
                    d.identity(), d.translate(0, 2 * this.projection.y), b && d.append(b), d.scale(1, -1);
                    for (var e = 0; e < a.children.length; e++) a.children[e].updateTransform();
                    var f = this.renderer.gl;
                    f.viewport(0, 0, this.width * this.resolution, this.height * this.resolution),
                        f.bindFramebuffer(f.FRAMEBUFFER, this.textureBuffer.frameBuffer),
                        c && this.textureBuffer.clear(),
                        (this.renderer.spriteBatch.dirty = !0),
                        this.renderer.renderDisplayObject(a, this.projection, this.textureBuffer.frameBuffer, b),
                        (this.renderer.spriteBatch.dirty = !0);
                }
            }),
            (b.RenderTexture.prototype.renderCanvas = function (a, b, c) {
                if (this.valid && 0 !== a.alpha) {
                    var d = a.worldTransform;
                    d.identity(), b && d.append(b);
                    for (var e = 0; e < a.children.length; e++) a.children[e].updateTransform();
                    c && this.textureBuffer.clear();
                    var f = this.renderer.resolution;
                    (this.renderer.resolution = this.resolution), this.renderer.renderDisplayObject(a, this.textureBuffer.context, b), (this.renderer.resolution = f);
                }
            }),
            (b.RenderTexture.prototype.getImage = function () {
                var a = new Image();
                return (a.src = this.getBase64()), a;
            }),
            (b.RenderTexture.prototype.getBase64 = function () {
                return this.getCanvas().toDataURL();
            }),
            (b.RenderTexture.prototype.getCanvas = function () {
                if (this.renderer.type !== b.WEBGL_RENDERER) return this.textureBuffer.canvas;
                var a = this.renderer.gl,
                    c = this.textureBuffer.width,
                    d = this.textureBuffer.height,
                    e = new Uint8Array(4 * c * d);
                a.bindFramebuffer(a.FRAMEBUFFER, this.textureBuffer.frameBuffer), a.readPixels(0, 0, c, d, a.RGBA, a.UNSIGNED_BYTE, e), a.bindFramebuffer(a.FRAMEBUFFER, null);
                var f = new b.CanvasBuffer(c, d),
                    g = f.context.getImageData(0, 0, c, d);
                return g.data.set(e), f.context.putImageData(g, 0, 0), f.canvas;
            }),
            (b.AbstractFilter = function (a, b) {
                (this.passes = [this]), (this.shaders = []), (this.dirty = !0), (this.padding = 0), (this.uniforms = b || {}), (this.fragmentSrc = a || []);
            }),
            (b.AbstractFilter.prototype.constructor = b.AbstractFilter),
            (b.AbstractFilter.prototype.syncUniforms = function () {
                for (var a = 0, b = this.shaders.length; a < b; a++) this.shaders[a].dirty = !0;
            }),
            (b.Strip = function (a) {
                b.DisplayObjectContainer.call(this),
                    (this.texture = a),
                    (this.uvs = new b.Float32Array([0, 1, 1, 1, 1, 0, 0, 1])),
                    (this.vertices = new b.Float32Array([0, 0, 100, 0, 100, 100, 0, 100])),
                    (this.colors = new b.Float32Array([1, 1, 1, 1])),
                    (this.indices = new b.Uint16Array([0, 1, 2, 3])),
                    (this.dirty = !0),
                    (this.blendMode = b.blendModes.NORMAL),
                    (this.canvasPadding = 0),
                    (this.drawMode = b.Strip.DrawModes.TRIANGLE_STRIP);
            }),
            (b.Strip.prototype = Object.create(b.DisplayObjectContainer.prototype)),
            (b.Strip.prototype.constructor = b.Strip),
            (b.Strip.prototype._renderWebGL = function (a) {
                !this.visible || this.alpha <= 0 || (a.spriteBatch.stop(), this._vertexBuffer || this._initWebGL(a), a.shaderManager.setShader(a.shaderManager.stripShader), this._renderStrip(a), a.spriteBatch.start());
            }),
            (b.Strip.prototype._initWebGL = function (a) {
                var b = a.gl;
                (this._vertexBuffer = b.createBuffer()),
                    (this._indexBuffer = b.createBuffer()),
                    (this._uvBuffer = b.createBuffer()),
                    (this._colorBuffer = b.createBuffer()),
                    b.bindBuffer(b.ARRAY_BUFFER, this._vertexBuffer),
                    b.bufferData(b.ARRAY_BUFFER, this.vertices, b.DYNAMIC_DRAW),
                    b.bindBuffer(b.ARRAY_BUFFER, this._uvBuffer),
                    b.bufferData(b.ARRAY_BUFFER, this.uvs, b.STATIC_DRAW),
                    b.bindBuffer(b.ARRAY_BUFFER, this._colorBuffer),
                    b.bufferData(b.ARRAY_BUFFER, this.colors, b.STATIC_DRAW),
                    b.bindBuffer(b.ELEMENT_ARRAY_BUFFER, this._indexBuffer),
                    b.bufferData(b.ELEMENT_ARRAY_BUFFER, this.indices, b.STATIC_DRAW);
            }),
            (b.Strip.prototype._renderStrip = function (a) {
                var c = a.gl,
                    d = a.projection,
                    e = a.offset,
                    f = a.shaderManager.stripShader,
                    g = this.drawMode === b.Strip.DrawModes.TRIANGLE_STRIP ? c.TRIANGLE_STRIP : c.TRIANGLES;
                a.blendModeManager.setBlendMode(this.blendMode),
                    c.uniformMatrix3fv(f.translationMatrix, !1, this.worldTransform.toArray(!0)),
                    c.uniform2f(f.projectionVector, d.x, -d.y),
                    c.uniform2f(f.offsetVector, -e.x, -e.y),
                    c.uniform1f(f.alpha, this.worldAlpha),
                    this.dirty
                        ? ((this.dirty = !1),
                          c.bindBuffer(c.ARRAY_BUFFER, this._vertexBuffer),
                          c.bufferData(c.ARRAY_BUFFER, this.vertices, c.STATIC_DRAW),
                          c.vertexAttribPointer(f.aVertexPosition, 2, c.FLOAT, !1, 0, 0),
                          c.bindBuffer(c.ARRAY_BUFFER, this._uvBuffer),
                          c.bufferData(c.ARRAY_BUFFER, this.uvs, c.STATIC_DRAW),
                          c.vertexAttribPointer(f.aTextureCoord, 2, c.FLOAT, !1, 0, 0),
                          c.activeTexture(c.TEXTURE0),
                          this.texture.baseTexture._dirty[c.id] ? a.renderer.updateTexture(this.texture.baseTexture) : c.bindTexture(c.TEXTURE_2D, this.texture.baseTexture._glTextures[c.id]),
                          c.bindBuffer(c.ELEMENT_ARRAY_BUFFER, this._indexBuffer),
                          c.bufferData(c.ELEMENT_ARRAY_BUFFER, this.indices, c.STATIC_DRAW))
                        : (c.bindBuffer(c.ARRAY_BUFFER, this._vertexBuffer),
                          c.bufferSubData(c.ARRAY_BUFFER, 0, this.vertices),
                          c.vertexAttribPointer(f.aVertexPosition, 2, c.FLOAT, !1, 0, 0),
                          c.bindBuffer(c.ARRAY_BUFFER, this._uvBuffer),
                          c.vertexAttribPointer(f.aTextureCoord, 2, c.FLOAT, !1, 0, 0),
                          c.activeTexture(c.TEXTURE0),
                          this.texture.baseTexture._dirty[c.id] ? a.renderer.updateTexture(this.texture.baseTexture) : c.bindTexture(c.TEXTURE_2D, this.texture.baseTexture._glTextures[c.id]),
                          c.bindBuffer(c.ELEMENT_ARRAY_BUFFER, this._indexBuffer)),
                    c.drawElements(g, this.indices.length, c.UNSIGNED_SHORT, 0);
            }),
            (b.Strip.prototype._renderCanvas = function (a) {
                var c = a.context,
                    d = this.worldTransform,
                    e = d.tx * a.resolution + a.shakeX,
                    f = d.ty * a.resolution + a.shakeY;
                a.roundPixels ? c.setTransform(d.a, d.b, d.c, d.d, 0 | e, 0 | f) : c.setTransform(d.a, d.b, d.c, d.d, e, f),
                    this.drawMode === b.Strip.DrawModes.TRIANGLE_STRIP ? this._renderCanvasTriangleStrip(c) : this._renderCanvasTriangles(c);
            }),
            (b.Strip.prototype._renderCanvasTriangleStrip = function (a) {
                var b = this.vertices,
                    c = this.uvs,
                    d = b.length / 2;
                this.count++;
                for (var e = 0; e < d - 2; e++) {
                    var f = 2 * e;
                    this._renderCanvasDrawTriangle(a, b, c, f, f + 2, f + 4);
                }
            }),
            (b.Strip.prototype._renderCanvasTriangles = function (a) {
                var b = this.vertices,
                    c = this.uvs,
                    d = this.indices,
                    e = d.length;
                this.count++;
                for (var f = 0; f < e; f += 3) {
                    var g = 2 * d[f],
                        h = 2 * d[f + 1],
                        i = 2 * d[f + 2];
                    this._renderCanvasDrawTriangle(a, b, c, g, h, i);
                }
            }),
            (b.Strip.prototype._renderCanvasDrawTriangle = function (a, b, c, d, e, f) {
                var g = this.texture.baseTexture.source,
                    h = this.texture.width,
                    i = this.texture.height,
                    j = b[d],
                    k = b[e],
                    l = b[f],
                    m = b[d + 1],
                    n = b[e + 1],
                    o = b[f + 1],
                    p = c[d] * h,
                    q = c[e] * h,
                    r = c[f] * h,
                    s = c[d + 1] * i,
                    t = c[e + 1] * i,
                    u = c[f + 1] * i;
                if (0 < this.canvasPadding) {
                    var v = this.canvasPadding / this.worldTransform.a,
                        w = this.canvasPadding / this.worldTransform.d,
                        x = (j + k + l) / 3,
                        y = (m + n + o) / 3,
                        z = j - x,
                        A = m - y,
                        B = Math.sqrt(z * z + A * A);
                    (j = x + (z / B) * (B + v)),
                        (m = y + (A / B) * (B + w)),
                        (A = n - y),
                        (k = x + ((z = k - x) / (B = Math.sqrt(z * z + A * A))) * (B + v)),
                        (n = y + (A / B) * (B + w)),
                        (A = o - y),
                        (l = x + ((z = l - x) / (B = Math.sqrt(z * z + A * A))) * (B + v)),
                        (o = y + (A / B) * (B + w));
                }
                a.save(), a.beginPath(), a.moveTo(j, m), a.lineTo(k, n), a.lineTo(l, o), a.closePath(), a.clip();
                var C = p * t + s * r + q * u - t * r - s * q - p * u,
                    D = j * t + s * l + k * u - t * l - s * k - j * u,
                    E = p * k + j * r + q * l - k * r - j * q - p * l,
                    F = p * t * l + s * k * r + j * q * u - j * t * r - s * q * l - p * k * u,
                    G = m * t + s * o + n * u - t * o - s * n - m * u,
                    H = p * n + m * r + q * o - n * r - m * q - p * o,
                    I = p * t * o + s * n * r + m * q * u - m * t * r - s * q * o - p * n * u;
                a.transform(D / C, G / C, E / C, H / C, F / C, I / C), a.drawImage(g, 0, 0), a.restore();
            }),
            (b.Strip.prototype.renderStripFlat = function (a) {
                var b = this.context,
                    c = a.vertices,
                    d = c.length / 2;
                this.count++, b.beginPath();
                for (var e = 1; e < d - 2; e++) {
                    var f = 2 * e,
                        g = c[f],
                        h = c[f + 2],
                        i = c[f + 4],
                        j = c[f + 1],
                        k = c[f + 3],
                        l = c[f + 5];
                    b.moveTo(g, j), b.lineTo(h, k), b.lineTo(i, l);
                }
                (b.fillStyle = "#FF0000"), b.fill(), b.closePath();
            }),
            (b.Strip.prototype.onTextureUpdate = function () {
                this.updateFrame = !0;
            }),
            (b.Strip.prototype.getBounds = function (a) {
                for (var c = a || this.worldTransform, d = c.a, e = c.b, f = c.c, g = c.d, h = c.tx, i = c.ty, j = -1 / 0, k = -1 / 0, l = 1 / 0, m = 1 / 0, n = this.vertices, o = 0, p = n.length; o < p; o += 2) {
                    var q = n[o],
                        r = n[o + 1],
                        s = d * q + f * r + h,
                        t = g * r + e * q + i;
                    (l = s < l ? s : l), (m = t < m ? t : m), (j = j < s ? s : j), (k = k < t ? t : k);
                }
                if (l === -1 / 0 || k === 1 / 0) return b.EmptyRectangle;
                var u = this._bounds;
                return (u.x = l), (u.width = j - l), (u.y = m), (u.height = k - m), (this._currentBounds = u);
            }),
            (b.Strip.DrawModes = { TRIANGLE_STRIP: 0, TRIANGLES: 1 }),
            (b.Rope = function (a, c) {
                b.Strip.call(this, a),
                    (this.points = c),
                    (this.vertices = new b.Float32Array(4 * c.length)),
                    (this.uvs = new b.Float32Array(4 * c.length)),
                    (this.colors = new b.Float32Array(2 * c.length)),
                    (this.indices = new b.Uint16Array(2 * c.length)),
                    this.refresh();
            }),
            (b.Rope.prototype = Object.create(b.Strip.prototype)),
            (b.Rope.prototype.constructor = b.Rope),
            (b.Rope.prototype.refresh = function () {
                var a = this.points;
                if (!(a.length < 1)) {
                    var b = this.uvs,
                        c = (a[0], this.indices),
                        d = this.colors;
                    (this.count -= 0.2), (b[0] = 0), (b[1] = 0), (b[2] = 0), (b[3] = 1), (d[0] = 1), (d[1] = 1), (c[0] = 0), (c[1] = 1);
                    for (var f, g, h = a.length, i = 1; i < h; i++)
                        a[i], (g = i / (h - 1)), (b[(f = 4 * i)] = g), (b[f + 1] = 0), (b[f + 2] = g), (b[f + 3] = 1), (d[(f = 2 * i)] = 1), (d[f + 1] = 1), (c[(f = 2 * i)] = f), (c[f + 1] = f + 1);
                }
            }),
            (b.Rope.prototype.updateTransform = function () {
                var a = this.points;
                if (!(a.length < 1)) {
                    var c,
                        d = a[0],
                        e = { x: 0, y: 0 };
                    this.count -= 0.2;
                    for (var f, g, i, j, k = this.vertices, l = a.length, m = 0; m < l; m++)
                        (f = a[m]),
                            (g = 4 * m),
                            (c = m < a.length - 1 ? a[m + 1] : f),
                            (e.y = -(c.x - d.x)),
                            (e.x = c.y - d.y),
                            1 < 10 * (1 - m / (l - 1)) && 1,
                            (i = Math.sqrt(e.x * e.x + e.y * e.y)),
                            (j = this.texture.height / 2),
                            (e.x /= i),
                            (e.y /= i),
                            (e.x *= j),
                            (e.y *= j),
                            (k[g] = f.x + e.x),
                            (k[g + 1] = f.y + e.y),
                            (k[g + 2] = f.x - e.x),
                            (k[g + 3] = f.y - e.y),
                            (d = f);
                    b.DisplayObjectContainer.prototype.updateTransform.call(this);
                }
            }),
            (b.Rope.prototype.setTexture = function (a) {
                this.texture = a;
            }),
            (b.TilingSprite = function (a, c, d) {
                b.Sprite.call(this, a),
                    (this._width = c || 128),
                    (this._height = d || 128),
                    (this.tileScale = new b.Point(1, 1)),
                    (this.tileScaleOffset = new b.Point(1, 1)),
                    (this.tilePosition = new b.Point()),
                    (this.renderable = !0),
                    (this.tint = 16777215),
                    (this.textureDebug = !1),
                    (this.blendMode = b.blendModes.NORMAL),
                    (this.canvasBuffer = null),
                    (this.tilingTexture = null),
                    (this.tilePattern = null),
                    (this.refreshTexture = !0),
                    (this.frameWidth = 0),
                    (this.frameHeight = 0);
            }),
            (b.TilingSprite.prototype = Object.create(b.Sprite.prototype)),
            (b.TilingSprite.prototype.constructor = b.TilingSprite),
            (b.TilingSprite.prototype.setTexture = function (a) {
                this.texture !== a && ((this.texture = a), (this.refreshTexture = !0), (this.cachedTint = 16777215));
            }),
            (b.TilingSprite.prototype._renderWebGL = function (a) {
                if (this.visible && this.renderable && 0 !== this.alpha) {
                    if ((this._mask && (a.spriteBatch.stop(), a.maskManager.pushMask(this.mask, a), a.spriteBatch.start()), this._filters && (a.spriteBatch.flush(), a.filterManager.pushFilter(this._filterBlock)), this.refreshTexture)) {
                        if ((this.generateTilingTexture(!0, a), !this.tilingTexture)) return;
                        this.tilingTexture.needsUpdate && (a.renderer.updateTexture(this.tilingTexture.baseTexture), (this.tilingTexture.needsUpdate = !1));
                    }
                    a.spriteBatch.renderTilingSprite(this);
                    for (var b = 0; b < this.children.length; b++) this.children[b]._renderWebGL(a);
                    a.spriteBatch.stop(), this._filters && a.filterManager.popFilter(), this._mask && a.maskManager.popMask(this._mask, a), a.spriteBatch.start();
                }
            }),
            (b.TilingSprite.prototype._renderCanvas = function (a) {
                if (this.visible && this.renderable && 0 !== this.alpha) {
                    var c = a.context;
                    this._mask && a.maskManager.pushMask(this._mask, a), (c.globalAlpha = this.worldAlpha);
                    var d = this.worldTransform,
                        e = a.resolution,
                        f = d.tx * e + a.shakeX,
                        g = d.ty * e + a.shakeY;
                    if ((c.setTransform(d.a * e, d.b * e, d.c * e, d.d * e, f, g), this.refreshTexture)) {
                        if ((this.generateTilingTexture(!1, a), !this.tilingTexture)) return;
                        this.tilePattern = c.createPattern(this.tilingTexture.baseTexture.source, "repeat");
                    }
                    var h = a.currentBlendMode;
                    this.blendMode !== a.currentBlendMode && ((a.currentBlendMode = this.blendMode), (c.globalCompositeOperation = b.blendModesCanvas[a.currentBlendMode]));
                    var i = this.tilePosition,
                        j = this.tileScale;
                    (i.x %= this.tilingTexture.baseTexture.width),
                        (i.y %= this.tilingTexture.baseTexture.height),
                        c.scale(j.x, j.y),
                        c.translate(i.x + this.anchor.x * -this._width, i.y + this.anchor.y * -this._height),
                        (c.fillStyle = this.tilePattern);
                    (f = -i.x), (g = -i.y);
                    var k = this._width / j.x,
                        l = this._height / j.y;
                    a.roundPixels && ((f |= 0), (g |= 0), (k |= 0), (l |= 0)),
                        c.fillRect(f, g, k, l),
                        c.scale(1 / j.x, 1 / j.y),
                        c.translate(-i.x + this.anchor.x * this._width, -i.y + this.anchor.y * this._height),
                        this._mask && a.maskManager.popMask(a);
                    for (var m = 0; m < this.children.length; m++) this.children[m]._renderCanvas(a);
                    h !== this.blendMode && ((a.currentBlendMode = h), (c.globalCompositeOperation = b.blendModesCanvas[h]));
                }
            }),
            (b.TilingSprite.prototype.onTextureUpdate = function () {}),
            (b.TilingSprite.prototype.generateTilingTexture = function (a, c) {
                if (this.texture.baseTexture.hasLoaded) {
                    var d = this.texture,
                        e = d.frame,
                        f = this._frame.sourceSizeW || this._frame.width,
                        g = this._frame.sourceSizeH || this._frame.height,
                        h = 0,
                        i = 0;
                    this._frame.trimmed && ((h = this._frame.spriteSourceSizeX), (i = this._frame.spriteSourceSizeY)),
                        a && ((f = b.getNextPowerOfTwo(f)), (g = b.getNextPowerOfTwo(g))),
                        this.canvasBuffer
                            ? (this.canvasBuffer.resize(f, g), (this.tilingTexture.baseTexture.width = f), (this.tilingTexture.baseTexture.height = g))
                            : ((this.canvasBuffer = new b.CanvasBuffer(f, g)), (this.tilingTexture = b.Texture.fromCanvas(this.canvasBuffer.canvas)), (this.tilingTexture.isTiling = !0)),
                        (this.tilingTexture.needsUpdate = !0),
                        this.textureDebug && ((this.canvasBuffer.context.strokeStyle = "#00ff00"), this.canvasBuffer.context.strokeRect(0, 0, f, g));
                    var j = d.crop.width,
                        k = d.crop.height;
                    (j === f && k === g) || ((j = f), (k = g)),
                        this.canvasBuffer.context.drawImage(d.baseTexture.source, d.crop.x, d.crop.y, d.crop.width, d.crop.height, h, i, j, k),
                        (this.tileScaleOffset.x = e.width / f),
                        (this.tileScaleOffset.y = e.height / g),
                        (this.refreshTexture = !1),
                        (this.tilingTexture.baseTexture._powerOf2 = !0);
                }
            }),
            (b.TilingSprite.prototype.getBounds = function () {
                var a = this._width,
                    b = this._height,
                    c = a * (1 - this.anchor.x),
                    d = a * -this.anchor.x,
                    e = b * (1 - this.anchor.y),
                    f = b * -this.anchor.y,
                    g = this.worldTransform,
                    h = g.a,
                    i = g.b,
                    j = g.c,
                    k = g.d,
                    l = g.tx,
                    m = g.ty,
                    n = h * d + j * f + l,
                    o = k * f + i * d + m,
                    p = h * c + j * f + l,
                    q = k * f + i * c + m,
                    r = h * c + j * e + l,
                    s = k * e + i * c + m,
                    t = h * d + j * e + l,
                    u = k * e + i * d + m,
                    v = -1 / 0,
                    w = -1 / 0,
                    x = 1 / 0,
                    y = 1 / 0;
                (x = t < (x = r < (x = p < (x = n < x ? n : x) ? p : x) ? r : x) ? t : x),
                    (y = u < (y = s < (y = q < (y = o < y ? o : y) ? q : y) ? s : y) ? u : y),
                    (v = (v = (v = (v = v < n ? n : v) < p ? p : v) < r ? r : v) < t ? t : v),
                    (w = (w = (w = (w = w < o ? o : w) < q ? q : w) < s ? s : w) < u ? u : w);
                var z = this._bounds;
                return (z.x = x), (z.width = v - x), (z.y = y), (z.height = w - y), (this._currentBounds = z);
            }),
            (b.TilingSprite.prototype.destroy = function () {
                b.Sprite.prototype.destroy.call(this),
                    this.canvasBuffer && (this.canvasBuffer.destroy(), (this.canvasBuffer = null)),
                    (this.tileScale = null),
                    (this.tileScaleOffset = null),
                    (this.tilePosition = null),
                    this.tilingTexture && (this.tilingTexture.destroy(!0), (this.tilingTexture = null));
            }),
            Object.defineProperty(b.TilingSprite.prototype, "width", {
                get: function () {
                    return this._width;
                },
                set: function (a) {
                    this._width = a;
                },
            }),
            Object.defineProperty(b.TilingSprite.prototype, "height", {
                get: function () {
                    return this._height;
                },
                set: function (a) {
                    this._height = a;
                },
            }),
            "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = b), (exports.PIXI = b)) : "undefined" != typeof define && define.amd ? define("PIXI", (a.PIXI = b)) : (a.PIXI = b),
            b
        );
    }.call(this),
    function () {
        function a(a, b) {
            (this._scaleFactor = a), (this._deltaMode = b), (this.originalEvent = null);
        }
        var b = this,
            c = c || {
                VERSION: "2.6.15",
                GAMES: [],
                AUTO: 0,
                CANVAS: 1,
                WEBGL: 2,
                HEADLESS: 3,
                NONE: 0,
                LEFT: 1,
                RIGHT: 2,
                UP: 3,
                DOWN: 4,
                SPRITE: 0,
                BUTTON: 1,
                IMAGE: 2,
                GRAPHICS: 3,
                TEXT: 4,
                TILESPRITE: 5,
                BITMAPTEXT: 6,
                GROUP: 7,
                RENDERTEXTURE: 8,
                TILEMAP: 9,
                TILEMAPLAYER: 10,
                EMITTER: 11,
                POLYGON: 12,
                BITMAPDATA: 13,
                CANVAS_FILTER: 14,
                WEBGL_FILTER: 15,
                ELLIPSE: 16,
                SPRITEBATCH: 17,
                RETROFONT: 18,
                POINTER: 19,
                ROPE: 20,
                CIRCLE: 21,
                RECTANGLE: 22,
                LINE: 23,
                MATRIX: 24,
                POINT: 25,
                ROUNDEDRECTANGLE: 26,
                CREATURE: 27,
                VIDEO: 28,
                PENDING_ATLAS: -1,
                HORIZONTAL: 0,
                VERTICAL: 1,
                LANDSCAPE: 0,
                PORTRAIT: 1,
                ANGLE_UP: 270,
                ANGLE_DOWN: 90,
                ANGLE_LEFT: 180,
                ANGLE_RIGHT: 0,
                ANGLE_NORTH_EAST: 315,
                ANGLE_NORTH_WEST: 225,
                ANGLE_SOUTH_EAST: 45,
                ANGLE_SOUTH_WEST: 135,
                TOP_LEFT: 0,
                TOP_CENTER: 1,
                TOP_RIGHT: 2,
                LEFT_TOP: 3,
                LEFT_CENTER: 4,
                LEFT_BOTTOM: 5,
                CENTER: 6,
                RIGHT_TOP: 7,
                RIGHT_CENTER: 8,
                RIGHT_BOTTOM: 9,
                BOTTOM_LEFT: 10,
                BOTTOM_CENTER: 11,
                BOTTOM_RIGHT: 12,
                blendModes: {
                    NORMAL: 0,
                    ADD: 1,
                    MULTIPLY: 2,
                    SCREEN: 3,
                    OVERLAY: 4,
                    DARKEN: 5,
                    LIGHTEN: 6,
                    COLOR_DODGE: 7,
                    COLOR_BURN: 8,
                    HARD_LIGHT: 9,
                    SOFT_LIGHT: 10,
                    DIFFERENCE: 11,
                    EXCLUSION: 12,
                    HUE: 13,
                    SATURATION: 14,
                    COLOR: 15,
                    LUMINOSITY: 16,
                },
                scaleModes: { DEFAULT: 0, LINEAR: 0, NEAREST: 1 },
                PIXI: PIXI || {},
            };
        if (
            (Math.trunc ||
                (Math.trunc = function (a) {
                    return a < 0 ? Math.ceil(a) : Math.floor(a);
                }),
            Function.prototype.bind ||
                (Function.prototype.bind = (function () {
                    var a = Array.prototype.slice;
                    return function (b) {
                        function c() {
                            var f = e.concat(a.call(arguments));
                            d.apply(this instanceof c ? this : b, f);
                        }
                        var d = this,
                            e = a.call(arguments, 1);
                        if ("function" != typeof d) throw new TypeError();
                        return (
                            (c.prototype = (function a(b) {
                                if ((b && (a.prototype = b), !(this instanceof a))) return new a();
                            })(d.prototype)),
                            c
                        );
                    };
                })()),
            Array.isArray ||
                (Array.isArray = function (a) {
                    return "[object Array]" === Object.prototype.toString.call(a);
                }),
            Array.prototype.forEach ||
                (Array.prototype.forEach = function (a) {
                    "use strict";
                    if (null == this) throw new TypeError();
                    var b = Object(this),
                        c = b.length >>> 0;
                    if ("function" != typeof a) throw new TypeError();
                    for (var d = 2 <= arguments.length ? arguments[1] : void 0, e = 0; e < c; e++) e in b && a.call(d, b[e], e, b);
                }),
            "function" != typeof window.Uint32Array && "object" != typeof window.Uint32Array)
        ) {
            var d = function (a) {
                var b = new Array();
                (window[a] = function (a) {
                    if ("number" == typeof a) {
                        Array.call(this, a), (this.length = a);
                        for (var b = 0; b < this.length; b++) this[b] = 0;
                    } else {
                        Array.call(this, a.length), (this.length = a.length);
                        for (b = 0; b < this.length; b++) this[b] = a[b];
                    }
                }),
                    (window[a].prototype = b),
                    (window[a].constructor = window[a]);
            };
            d("Uint32Array"), d("Int16Array");
        }
        for (var e in (window.console || ((window.console = {}), (window.console.log = window.console.assert = function () {}), (window.console.warn = window.console.assert = function () {})),
        /firefox/i.test(navigator.userAgent) &&
            ((window.oldGetComputedStyle = window.getComputedStyle),
            (window.getComputedStyle = function (a, b) {
                var c = window.oldGetComputedStyle(a, b);
                return null === c ? { getPropertyValue: function () {} } : c;
            })),
        (c.Utils = {
            reverseString: function (a) {
                return a.split("").reverse().join("");
            },
            getProperty: function (a, b) {
                for (var c = b.split("."), d = c.pop(), e = c.length, f = 1, g = c[0]; f < e && (a = a[g]); ) (g = c[f]), f++;
                return a ? a[d] : null;
            },
            setProperty: function (a, b, c) {
                for (var d = b.split("."), e = d.pop(), f = d.length, g = 1, h = d[0]; g < f && (a = a[h]); ) (h = d[g]), g++;
                return a && (a[e] = c), a;
            },
            chanceRoll: function (a) {
                return void 0 === a && (a = 50), 0 < a && 100 * Math.random() <= a;
            },
            randomChoice: function (a, b) {
                return Math.random() < 0.5 ? a : b;
            },
            parseDimension: function (a, b) {
                var c = 0;
                return "string" == typeof a ? ("%" === a.substr(-1) ? ((c = parseInt(a, 10) / 100), 0 === b ? window.innerWidth * c : window.innerHeight * c) : parseInt(a, 10)) : a;
            },
            pad: function (a, b, c, d) {
                if (void 0 === b) b = 0;
                if (void 0 === c) c = " ";
                if (void 0 === d) d = 3;
                var e = 0;
                if (b + 1 >= (a = a.toString()).length)
                    switch (d) {
                        case 1:
                            a = new Array(b + 1 - a.length).join(c) + a;
                            break;
                        case 3:
                            var f = Math.ceil((e = b - a.length) / 2);
                            a = new Array(e - f + 1).join(c) + a + new Array(f + 1).join(c);
                            break;
                        default:
                            a += new Array(b + 1 - a.length).join(c);
                    }
                return a;
            },
            isPlainObject: function (a) {
                if ("object" != typeof a || a.nodeType || a === a.window) return !1;
                try {
                    if (a.constructor && !{}.hasOwnProperty.call(a.constructor.prototype, "isPrototypeOf")) return !1;
                } catch (a) {
                    return !1;
                }
                return !0;
            },
            extend: function () {
                var a,
                    b,
                    d,
                    e,
                    f,
                    g,
                    h = arguments[0] || {},
                    i = 1,
                    j = arguments.length,
                    k = !1;
                for ("boolean" == typeof h && ((k = h), (h = arguments[1] || {}), (i = 2)), j === i && ((h = this), --i); i < j; i++)
                    if (null != (a = arguments[i]))
                        for (b in a)
                            (d = h[b]),
                                h !== (e = a[b]) &&
                                    (k && e && (c.Utils.isPlainObject(e) || (f = Array.isArray(e)))
                                        ? ((g = f ? ((f = !1), d && Array.isArray(d) ? d : []) : d && c.Utils.isPlainObject(d) ? d : {}), (h[b] = c.Utils.extend(k, g, e)))
                                        : void 0 !== e && (h[b] = e));
                return h;
            },
            mixinPrototype: function (a, b, c) {
                void 0 === c && (c = !1);
                for (var d = Object.keys(b), e = 0; e < d.length; e++) {
                    var f = d[e],
                        g = b[f];
                    (!c && f in a) || (!g || ("function" != typeof g.get && "function" != typeof g.set) ? (a[f] = g) : "function" == typeof g.clone ? (a[f] = g.clone()) : Object.defineProperty(a, f, g));
                }
            },
            mixin: function (a, b) {
                if (!a || "object" != typeof a) return b;
                for (var d in a) {
                    var e = a[d];
                    if (!e.childNodes && !e.cloneNode) {
                        var f = typeof a[d];
                        a[d] && "object" === f ? (typeof b[d] === f ? (b[d] = c.Utils.mixin(a[d], b[d])) : (b[d] = c.Utils.mixin(a[d], new e.constructor()))) : (b[d] = a[d]);
                    }
                }
                return b;
            },
        }),
        (c.Circle = function (a, b, d) {
            (a = a || 0), (b = b || 0), (d = d || 0), (this.x = a), (this.y = b), (this._diameter = d), (this._radius = 0) < d && (this._radius = 0.5 * d), (this.type = c.CIRCLE);
        }),
        (c.Circle.prototype = {
            circumference: function () {
                return Math.PI * this._radius * 2;
            },
            random: function (a) {
                void 0 === a && (a = new c.Point());
                var b = 2 * Math.PI * Math.random(),
                    d = Math.random() + Math.random(),
                    e = 1 < d ? 2 - d : d,
                    f = e * Math.cos(b),
                    g = e * Math.sin(b);
                return (a.x = this.x + f * this.radius), (a.y = this.y + g * this.radius), a;
            },
            getBounds: function () {
                return new c.Rectangle(this.x - this.radius, this.y - this.radius, this.diameter, this.diameter);
            },
            setTo: function (a, b, c) {
                return (this.x = a), (this.y = b), (this._diameter = c), (this._radius = 0.5 * c), this;
            },
            copyFrom: function (a) {
                return this.setTo(a.x, a.y, a.diameter);
            },
            copyTo: function (a) {
                return (a.x = this.x), (a.y = this.y), (a.diameter = this._diameter), a;
            },
            distance: function (a, b) {
                var d = c.Math.distance(this.x, this.y, a.x, a.y);
                return b ? Math.round(d) : d;
            },
            clone: function (a) {
                return null == a ? (a = new c.Circle(this.x, this.y, this.diameter)) : a.setTo(this.x, this.y, this.diameter), a;
            },
            contains: function (a, b) {
                return c.Circle.contains(this, a, b);
            },
            circumferencePoint: function (a, b, d) {
                return c.Circle.circumferencePoint(this, a, b, d);
            },
            offset: function (a, b) {
                return (this.x += a), (this.y += b), this;
            },
            offsetPoint: function (a) {
                return this.offset(a.x, a.y);
            },
            toString: function () {
                return "[{Phaser.Circle (x=" + this.x + " y=" + this.y + " diameter=" + this.diameter + " radius=" + this.radius + ")}]";
            },
        }),
        (c.Circle.prototype.constructor = c.Circle),
        Object.defineProperty(c.Circle.prototype, "diameter", {
            get: function () {
                return this._diameter;
            },
            set: function (a) {
                0 < a && ((this._diameter = a), (this._radius = 0.5 * a));
            },
        }),
        Object.defineProperty(c.Circle.prototype, "radius", {
            get: function () {
                return this._radius;
            },
            set: function (a) {
                0 < a && ((this._radius = a), (this._diameter = 2 * a));
            },
        }),
        Object.defineProperty(c.Circle.prototype, "left", {
            get: function () {
                return this.x - this._radius;
            },
            set: function (a) {
                a > this.x ? ((this._radius = 0), (this._diameter = 0)) : (this.radius = this.x - a);
            },
        }),
        Object.defineProperty(c.Circle.prototype, "right", {
            get: function () {
                return this.x + this._radius;
            },
            set: function (a) {
                a < this.x ? ((this._radius = 0), (this._diameter = 0)) : (this.radius = a - this.x);
            },
        }),
        Object.defineProperty(c.Circle.prototype, "top", {
            get: function () {
                return this.y - this._radius;
            },
            set: function (a) {
                a > this.y ? ((this._radius = 0), (this._diameter = 0)) : (this.radius = this.y - a);
            },
        }),
        Object.defineProperty(c.Circle.prototype, "bottom", {
            get: function () {
                return this.y + this._radius;
            },
            set: function (a) {
                a < this.y ? ((this._radius = 0), (this._diameter = 0)) : (this.radius = a - this.y);
            },
        }),
        Object.defineProperty(c.Circle.prototype, "area", {
            get: function () {
                return 0 < this._radius ? Math.PI * this._radius * this._radius : 0;
            },
        }),
        Object.defineProperty(c.Circle.prototype, "empty", {
            get: function () {
                return 0 === this._diameter;
            },
            set: function (a) {
                !0 === a && this.setTo(0, 0, 0);
            },
        }),
        (c.Circle.contains = function (a, b, c) {
            return 0 < a.radius && b >= a.left && b <= a.right && c >= a.top && c <= a.bottom && (a.x - b) * (a.x - b) + (a.y - c) * (a.y - c) <= a.radius * a.radius;
        }),
        (c.Circle.equals = function (a, b) {
            return a.x === b.x && a.y === b.y && a.diameter === b.diameter;
        }),
        (c.Circle.intersects = function (a, b) {
            return c.Math.distance(a.x, a.y, b.x, b.y) <= a.radius + b.radius;
        }),
        (c.Circle.circumferencePoint = function (a, b, d, e) {
            return void 0 === d && (d = !1), void 0 === e && (e = new c.Point()), !0 === d && (b = c.Math.degToRad(b)), (e.x = a.x + a.radius * Math.cos(b)), (e.y = a.y + a.radius * Math.sin(b)), e;
        }),
        (c.Circle.intersectsRectangle = function (a, b) {
            var c = Math.abs(a.x - b.x - b.halfWidth);
            if (c > b.halfWidth + a.radius) return !1;
            var d = Math.abs(a.y - b.y - b.halfHeight);
            if (d > b.halfHeight + a.radius) return !1;
            if (c <= b.halfWidth || d <= b.halfHeight) return !0;
            var e = c - b.halfWidth,
                f = d - b.halfHeight;
            return e * e + f * f <= a.radius * a.radius;
        }),
        (PIXI.Circle = c.Circle),
        (c.Ellipse = function (a, b, d, e) {
            (a = a || 0), (b = b || 0), (d = d || 0), (e = e || 0), (this.x = a), (this.y = b), (this.width = d), (this.height = e), (this.type = c.ELLIPSE);
        }),
        (c.Ellipse.prototype = {
            setTo: function (a, b, c, d) {
                return (this.x = a), (this.y = b), (this.width = c), (this.height = d), this;
            },
            getBounds: function () {
                return new c.Rectangle(this.x - this.width, this.y - this.height, this.width, this.height);
            },
            copyFrom: function (a) {
                return this.setTo(a.x, a.y, a.width, a.height);
            },
            copyTo: function (a) {
                return (a.x = this.x), (a.y = this.y), (a.width = this.width), (a.height = this.height), a;
            },
            clone: function (a) {
                return null == a ? (a = new c.Ellipse(this.x, this.y, this.width, this.height)) : a.setTo(this.x, this.y, this.width, this.height), a;
            },
            contains: function (a, b) {
                return c.Ellipse.contains(this, a, b);
            },
            random: function (a) {
                void 0 === a && (a = new c.Point());
                var b = Math.random() * Math.PI * 2,
                    d = Math.random();
                return (a.x = Math.sqrt(d) * Math.cos(b)), (a.y = Math.sqrt(d) * Math.sin(b)), (a.x = this.x + (a.x * this.width) / 2), (a.y = this.y + (a.y * this.height) / 2), a;
            },
            toString: function () {
                return "[{Phaser.Ellipse (x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + ")}]";
            },
        }),
        (c.Ellipse.prototype.constructor = c.Ellipse),
        Object.defineProperty(c.Ellipse.prototype, "left", {
            get: function () {
                return this.x;
            },
            set: function (a) {
                this.x = a;
            },
        }),
        Object.defineProperty(c.Ellipse.prototype, "right", {
            get: function () {
                return this.x + this.width;
            },
            set: function (a) {
                a < this.x ? (this.width = 0) : (this.width = a - this.x);
            },
        }),
        Object.defineProperty(c.Ellipse.prototype, "top", {
            get: function () {
                return this.y;
            },
            set: function (a) {
                this.y = a;
            },
        }),
        Object.defineProperty(c.Ellipse.prototype, "bottom", {
            get: function () {
                return this.y + this.height;
            },
            set: function (a) {
                a < this.y ? (this.height = 0) : (this.height = a - this.y);
            },
        }),
        Object.defineProperty(c.Ellipse.prototype, "empty", {
            get: function () {
                return 0 === this.width || 0 === this.height;
            },
            set: function (a) {
                !0 === a && this.setTo(0, 0, 0, 0);
            },
        }),
        (c.Ellipse.contains = function (a, b, c) {
            if (a.width <= 0 || a.height <= 0) return !1;
            var d = (b - a.x) / a.width - 0.5,
                e = (c - a.y) / a.height - 0.5;
            return (d *= d) + (e *= e) < 0.25;
        }),
        (PIXI.Ellipse = c.Ellipse),
        (c.Line = function (a, b, d, e) {
            (a = a || 0), (b = b || 0), (d = d || 0), (e = e || 0), (this.start = new c.Point(a, b)), (this.end = new c.Point(d, e)), (this.type = c.LINE);
        }),
        (c.Line.prototype = {
            setTo: function (a, b, c, d) {
                return this.start.setTo(a, b), this.end.setTo(c, d), this;
            },
            fromSprite: function (a, b, c) {
                return void 0 === c && (c = !1), c ? this.setTo(a.center.x, a.center.y, b.center.x, b.center.y) : this.setTo(a.x, a.y, b.x, b.y);
            },
            fromAngle: function (a, b, c, d) {
                return this.start.setTo(a, b), this.end.setTo(a + Math.cos(c) * d, b + Math.sin(c) * d), this;
            },
            rotate: function (a, b) {
                var c = (this.start.x + this.end.x) / 2,
                    d = (this.start.y + this.end.y) / 2;
                return this.start.rotate(c, d, a, b), this.end.rotate(c, d, a, b), this;
            },
            rotateAround: function (a, b, c, d) {
                return this.start.rotate(a, b, c, d), this.end.rotate(a, b, c, d), this;
            },
            intersects: function (a, b, d) {
                return c.Line.intersectsPoints(this.start, this.end, a.start, a.end, b, d);
            },
            reflect: function (a) {
                return c.Line.reflect(this, a);
            },
            midPoint: function (a) {
                return void 0 === a && (a = new c.Point()), (a.x = (this.start.x + this.end.x) / 2), (a.y = (this.start.y + this.end.y) / 2), a;
            },
            centerOn: function (a, b) {
                var e = a - (this.start.x + this.end.x) / 2,
                    f = b - (this.start.y + this.end.y) / 2;
                this.start.add(e, f), this.end.add(e, f);
            },
            pointOnLine: function (a, b) {
                return (a - this.start.x) * (this.end.y - this.start.y) == (this.end.x - this.start.x) * (b - this.start.y);
            },
            pointOnSegment: function (a, b) {
                var c = Math.min(this.start.x, this.end.x),
                    d = Math.max(this.start.x, this.end.x),
                    e = Math.min(this.start.y, this.end.y),
                    f = Math.max(this.start.y, this.end.y);
                return this.pointOnLine(a, b) && c <= a && a <= d && e <= b && b <= f;
            },
            random: function (a) {
                void 0 === a && (a = new c.Point());
                var b = Math.random();
                return (a.x = this.start.x + b * (this.end.x - this.start.x)), (a.y = this.start.y + b * (this.end.y - this.start.y)), a;
            },
            coordinatesOnLine: function (a, b) {
                void 0 === a && (a = 1), void 0 === b && (b = []);
                var c = Math.round(this.start.x),
                    d = Math.round(this.start.y),
                    e = Math.round(this.end.x),
                    f = Math.round(this.end.y),
                    g = Math.abs(e - c),
                    h = Math.abs(f - d),
                    i = c < e ? 1 : -1,
                    j = d < f ? 1 : -1,
                    k = g - h;
                b.push([c, d]);
                for (var l = 1; c !== e || d !== f; ) {
                    var m = k << 1;
                    -h < m && ((k -= h), (c += i)), m < g && ((k += g), (d += j)), l % a == 0 && b.push([c, d]), l++;
                }
                return b;
            },
            clone: function (a) {
                return null == a ? (a = new c.Line(this.start.x, this.start.y, this.end.x, this.end.y)) : a.setTo(this.start.x, this.start.y, this.end.x, this.end.y), a;
            },
        }),
        Object.defineProperty(c.Line.prototype, "length", {
            get: function () {
                return Math.sqrt((this.end.x - this.start.x) * (this.end.x - this.start.x) + (this.end.y - this.start.y) * (this.end.y - this.start.y));
            },
        }),
        Object.defineProperty(c.Line.prototype, "angle", {
            get: function () {
                return Math.atan2(this.end.y - this.start.y, this.end.x - this.start.x);
            },
        }),
        Object.defineProperty(c.Line.prototype, "slope", {
            get: function () {
                return (this.end.y - this.start.y) / (this.end.x - this.start.x);
            },
        }),
        Object.defineProperty(c.Line.prototype, "perpSlope", {
            get: function () {
                return -(this.end.x - this.start.x) / (this.end.y - this.start.y);
            },
        }),
        Object.defineProperty(c.Line.prototype, "x", {
            get: function () {
                return Math.min(this.start.x, this.end.x);
            },
        }),
        Object.defineProperty(c.Line.prototype, "y", {
            get: function () {
                return Math.min(this.start.y, this.end.y);
            },
        }),
        Object.defineProperty(c.Line.prototype, "left", {
            get: function () {
                return Math.min(this.start.x, this.end.x);
            },
        }),
        Object.defineProperty(c.Line.prototype, "right", {
            get: function () {
                return Math.max(this.start.x, this.end.x);
            },
        }),
        Object.defineProperty(c.Line.prototype, "top", {
            get: function () {
                return Math.min(this.start.y, this.end.y);
            },
        }),
        Object.defineProperty(c.Line.prototype, "bottom", {
            get: function () {
                return Math.max(this.start.y, this.end.y);
            },
        }),
        Object.defineProperty(c.Line.prototype, "width", {
            get: function () {
                return Math.abs(this.start.x - this.end.x);
            },
        }),
        Object.defineProperty(c.Line.prototype, "height", {
            get: function () {
                return Math.abs(this.start.y - this.end.y);
            },
        }),
        Object.defineProperty(c.Line.prototype, "normalX", {
            get: function () {
                return Math.cos(this.angle - 1.5707963267948966);
            },
        }),
        Object.defineProperty(c.Line.prototype, "normalY", {
            get: function () {
                return Math.sin(this.angle - 1.5707963267948966);
            },
        }),
        Object.defineProperty(c.Line.prototype, "normalAngle", {
            get: function () {
                return c.Math.wrap(this.angle - 1.5707963267948966, -Math.PI, Math.PI);
            },
        }),
        (c.Line.intersectsPoints = function (a, b, d, e, f, g) {
            void 0 === f && (f = !0), void 0 === g && (g = new c.Point());
            var h = b.y - a.y,
                i = e.y - d.y,
                j = a.x - b.x,
                k = d.x - e.x,
                l = b.x * a.y - a.x * b.y,
                m = e.x * d.y - d.x * e.y,
                n = h * k - i * j;
            if (0 === n) return null;
            if (((g.x = (j * m - k * l) / n), (g.y = (i * l - h * m) / n), f)) {
                var o = (e.y - d.y) * (b.x - a.x) - (e.x - d.x) * (b.y - a.y),
                    p = ((e.x - d.x) * (a.y - d.y) - (e.y - d.y) * (a.x - d.x)) / o,
                    q = ((b.x - a.x) * (a.y - d.y) - (b.y - a.y) * (a.x - d.x)) / o;
                return 0 <= p && p <= 1 && 0 <= q && q <= 1 ? g : null;
            }
            return g;
        }),
        (c.Line.intersects = function (a, b, d, e) {
            return c.Line.intersectsPoints(a.start, a.end, b.start, b.end, d, e);
        }),
        (c.Line.intersectsRectangle = function (a, b) {
            if (!c.Rectangle.intersects(a, b)) return !1;
            var d = a.start.x,
                e = a.start.y,
                f = a.end.x,
                g = a.end.y,
                h = b.x,
                i = b.y,
                j = b.right,
                k = b.bottom,
                l = 0;
            if ((h <= d && d <= j && i <= e && e <= k) || (h <= f && f <= j && i <= g && g <= k)) return !0;
            if (d < h && h <= f) {
                if ((l = e + ((g - e) * (h - d)) / (f - d)) > i && l <= k) return !0;
            } else if (j < d && f <= j && (l = e + ((g - e) * (j - d)) / (f - d)) >= i && l <= k) return !0;
            if (e < i && i <= g) {
                if ((l = d + ((f - d) * (i - e)) / (g - e)) >= h && l <= j) return !0;
            } else if (k < e && g <= k && (l = d + ((f - d) * (k - e)) / (g - e)) >= h && l <= j) return !0;
            return !1;
        }),
        (c.Line.reflect = function (a, b) {
            return 2 * b.normalAngle - 3.141592653589793 - a.angle;
        }),
        (c.Matrix = function (a, b, d, e, f, g) {
            null != a || (a = 1),
                null != b || (b = 0),
                null != d || (d = 0),
                null != e || (e = 1),
                null != f || (f = 0),
                null != g || (g = 0),
                (this.a = a),
                (this.b = b),
                (this.c = d),
                (this.d = e),
                (this.tx = f),
                (this.ty = g),
                (this.type = c.MATRIX);
        }),
        (c.Matrix.prototype = {
            fromArray: function (a) {
                return this.setTo(a[0], a[1], a[3], a[4], a[2], a[5]);
            },
            setTo: function (a, b, c, d, e, f) {
                return (this.a = a), (this.b = b), (this.c = c), (this.d = d), (this.tx = e), (this.ty = f), this;
            },
            clone: function (a) {
                return null == a ? (a = new c.Matrix(this.a, this.b, this.c, this.d, this.tx, this.ty)) : ((a.a = this.a), (a.b = this.b), (a.c = this.c), (a.d = this.d), (a.tx = this.tx), (a.ty = this.ty)), a;
            },
            copyTo: function (a) {
                return a.copyFrom(this), a;
            },
            copyFrom: function (a) {
                return (this.a = a.a), (this.b = a.b), (this.c = a.c), (this.d = a.d), (this.tx = a.tx), (this.ty = a.ty), this;
            },
            toArray: function (a, b) {
                return (
                    void 0 === b && (b = new PIXI.Float32Array(9)),
                    a
                        ? ((b[0] = this.a), (b[1] = this.b), (b[2] = 0), (b[3] = this.c), (b[4] = this.d), (b[5] = 0), (b[6] = this.tx), (b[7] = this.ty))
                        : ((b[0] = this.a), (b[1] = this.c), (b[2] = this.tx), (b[3] = this.b), (b[4] = this.d), (b[5] = this.ty), (b[6] = 0), (b[7] = 0)),
                    (b[8] = 1),
                    b
                );
            },
            apply: function (a, b) {
                return void 0 === b && (b = new c.Point()), (b.x = this.a * a.x + this.c * a.y + this.tx), (b.y = this.b * a.x + this.d * a.y + this.ty), b;
            },
            applyInverse: function (a, b) {
                void 0 === b && (b = new c.Point());
                var d = 1 / (this.a * this.d + this.c * -this.b),
                    e = a.x,
                    f = a.y;
                return (b.x = this.d * d * e + -this.c * d * f + (this.ty * this.c - this.tx * this.d) * d), (b.y = this.a * d * f + -this.b * d * e + (-this.ty * this.a + this.tx * this.b) * d), b;
            },
            translate: function (a, b) {
                return (this.tx += a), (this.ty += b), this;
            },
            scale: function (a, b) {
                return (this.a *= a), (this.d *= b), (this.c *= a), (this.b *= b), (this.tx *= a), (this.ty *= b), this;
            },
            rotate: function (a) {
                var b = Math.cos(a),
                    c = Math.sin(a),
                    d = this.a,
                    e = this.c,
                    f = this.tx;
                return (this.a = d * b - this.b * c), (this.b = d * c + this.b * b), (this.c = e * b - this.d * c), (this.d = e * c + this.d * b), (this.tx = f * b - this.ty * c), (this.ty = f * c + this.ty * b), this;
            },
            append: function (a) {
                var b = this.a,
                    c = this.b,
                    d = this.c,
                    e = this.d;
                return (this.a = a.a * b + a.b * d), (this.b = a.a * c + a.b * e), (this.c = a.c * b + a.d * d), (this.d = a.c * c + a.d * e), (this.tx = a.tx * b + a.ty * d + this.tx), (this.ty = a.tx * c + a.ty * e + this.ty), this;
            },
            identity: function () {
                return this.setTo(1, 0, 0, 1, 0, 0);
            },
        }),
        (c.identityMatrix = new c.Matrix()),
        (PIXI.Matrix = c.Matrix),
        (PIXI.identityMatrix = c.identityMatrix),
        (c.Point = function (a, b) {
            (a = a || 0), (b = b || 0), (this.x = a), (this.y = b), (this.type = c.POINT);
        }),
        (c.Point.prototype = {
            copyFrom: function (a) {
                return this.setTo(a.x, a.y);
            },
            invert: function () {
                return this.setTo(this.y, this.x);
            },
            setTo: function (a, b) {
                return (this.x = a || 0), (this.y = b || (0 !== b ? this.x : 0)), this;
            },
            set: function (a, b) {
                return (this.x = a || 0), (this.y = b || (0 !== b ? this.x : 0)), this;
            },
            add: function (a, b) {
                return (this.x += a), (this.y += b), this;
            },
            subtract: function (a, b) {
                return (this.x -= a), (this.y -= b), this;
            },
            multiply: function (a, b) {
                return (this.x *= a), (this.y *= b), this;
            },
            divide: function (a, b) {
                return (this.x /= a), (this.y /= b), this;
            },
            clampX: function (a, b) {
                return (this.x = c.Math.clamp(this.x, a, b)), this;
            },
            clampY: function (a, b) {
                return (this.y = c.Math.clamp(this.y, a, b)), this;
            },
            clamp: function (a, b) {
                return (this.x = c.Math.clamp(this.x, a, b)), (this.y = c.Math.clamp(this.y, a, b)), this;
            },
            clone: function (a) {
                return null == a ? (a = new c.Point(this.x, this.y)) : a.setTo(this.x, this.y), a;
            },
            copyTo: function (a) {
                return (a.x = this.x), (a.y = this.y), a;
            },
            distance: function (a, b) {
                return c.Point.distance(this, a, b);
            },
            equals: function (a) {
                return a.x === this.x && a.y === this.y;
            },
            angle: function (a, b) {
                return void 0 === b && (b = !1), b ? c.Math.radToDeg(Math.atan2(a.y - this.y, a.x - this.x)) : Math.atan2(a.y - this.y, a.x - this.x);
            },
            rotate: function (a, b, d, e, f) {
                return c.Point.rotate(this, a, b, d, e, f);
            },
            getMagnitude: function () {
                return Math.sqrt(this.x * this.x + this.y * this.y);
            },
            getMagnitudeSq: function () {
                return this.x * this.x + this.y * this.y;
            },
            setMagnitude: function (a) {
                return this.normalize().multiply(a, a);
            },
            normalize: function () {
                if (!this.isZero()) {
                    var a = this.getMagnitude();
                    (this.x /= a), (this.y /= a);
                }
                return this;
            },
            isZero: function () {
                return 0 === this.x && 0 === this.y;
            },
            dot: function (a) {
                return this.x * a.x + this.y * a.y;
            },
            cross: function (a) {
                return this.x * a.y - this.y * a.x;
            },
            perp: function () {
                return this.setTo(-this.y, this.x);
            },
            rperp: function () {
                return this.setTo(this.y, -this.x);
            },
            normalRightHand: function () {
                return this.setTo(-1 * this.y, this.x);
            },
            floor: function () {
                return this.setTo(Math.floor(this.x), Math.floor(this.y));
            },
            ceil: function () {
                return this.setTo(Math.ceil(this.x), Math.ceil(this.y));
            },
            toString: function () {
                return "[{Point (x=" + this.x + " y=" + this.y + ")}]";
            },
        }),
        (c.Point.prototype.constructor = c.Point),
        (c.Point.add = function (a, b, d) {
            return void 0 === d && (d = new c.Point()), (d.x = a.x + b.x), (d.y = a.y + b.y), d;
        }),
        (c.Point.subtract = function (a, b, d) {
            return void 0 === d && (d = new c.Point()), (d.x = a.x - b.x), (d.y = a.y - b.y), d;
        }),
        (c.Point.multiply = function (a, b, d) {
            return void 0 === d && (d = new c.Point()), (d.x = a.x * b.x), (d.y = a.y * b.y), d;
        }),
        (c.Point.divide = function (a, b, d) {
            return void 0 === d && (d = new c.Point()), (d.x = a.x / b.x), (d.y = a.y / b.y), d;
        }),
        (c.Point.equals = function (a, b) {
            return a.x === b.x && a.y === b.y;
        }),
        (c.Point.angle = function (a, b) {
            return Math.atan2(a.y - b.y, a.x - b.x);
        }),
        (c.Point.negative = function (a, b) {
            return void 0 === b && (b = new c.Point()), b.setTo(-a.x, -a.y);
        }),
        (c.Point.multiplyAdd = function (a, b, d, e) {
            return void 0 === e && (e = new c.Point()), e.setTo(a.x + b.x * d, a.y + b.y * d);
        }),
        (c.Point.interpolate = function (a, b, d, e) {
            return void 0 === e && (e = new c.Point()), e.setTo(a.x + (b.x - a.x) * d, a.y + (b.y - a.y) * d);
        }),
        (c.Point.perp = function (a, b) {
            return void 0 === b && (b = new c.Point()), b.setTo(-a.y, a.x);
        }),
        (c.Point.rperp = function (a, b) {
            return void 0 === b && (b = new c.Point()), b.setTo(a.y, -a.x);
        }),
        (c.Point.distance = function (a, b, d) {
            var e = c.Math.distance(a.x, a.y, b.x, b.y);
            return d ? Math.round(e) : e;
        }),
        (c.Point.project = function (a, b, d) {
            void 0 === d && (d = new c.Point());
            var e = a.dot(b) / b.getMagnitudeSq();
            return 0 !== e && d.setTo(e * b.x, e * b.y), d;
        }),
        (c.Point.projectUnit = function (a, b, d) {
            void 0 === d && (d = new c.Point());
            var e = a.dot(b);
            return 0 !== e && d.setTo(e * b.x, e * b.y), d;
        }),
        (c.Point.normalRightHand = function (a, b) {
            return void 0 === b && (b = new c.Point()), b.setTo(-1 * a.y, a.x);
        }),
        (c.Point.normalize = function (a, b) {
            void 0 === b && (b = new c.Point());
            var d = a.getMagnitude();
            return 0 !== d && b.setTo(a.x / d, a.y / d), b;
        }),
        (c.Point.rotate = function (a, b, d, e, f, g) {
            if ((f && (e = c.Math.degToRad(e)), void 0 === g)) {
                a.subtract(b, d);
                var h = Math.sin(e),
                    i = Math.cos(e),
                    j = i * a.x - h * a.y,
                    k = h * a.x + i * a.y;
                (a.x = j + b), (a.y = k + d);
            } else {
                var l = e + Math.atan2(a.y - d, a.x - b);
                (a.x = b + g * Math.cos(l)), (a.y = d + g * Math.sin(l));
            }
            return a;
        }),
        (c.Point.centroid = function (a, b) {
            if ((void 0 === b && (b = new c.Point()), "[object Array]" !== Object.prototype.toString.call(a))) throw new Error("Phaser.Point. Parameter 'points' must be an array");
            var d = a.length;
            if (d < 1) throw new Error("Phaser.Point. Parameter 'points' array must not be empty");
            if (1 === d) return b.copyFrom(a[0]), b;
            for (var e = 0; e < d; e++) c.Point.add(b, a[e], b);
            return b.divide(d, d), b;
        }),
        (c.Point.parse = function (a, b, d) {
            (b = b || "x"), (d = d || "y");
            var e = new c.Point();
            return a[b] && (e.x = parseInt(a[b], 10)), a[d] && (e.y = parseInt(a[d], 10)), e;
        }),
        (PIXI.Point = c.Point),
        (c.Polygon = function () {
            (this.area = 0), (this._points = []), 0 < arguments.length && this.setTo.apply(this, arguments), (this.closed = !0), (this.flattened = !1), (this.type = c.POLYGON);
        }),
        (c.Polygon.prototype = {
            toNumberArray: function (a) {
                void 0 === a && (a = []);
                for (var b = 0; b < this._points.length; b++) "number" == typeof this._points[b] ? (a.push(this._points[b]), a.push(this._points[b + 1]), b++) : (a.push(this._points[b].x), a.push(this._points[b].y));
                return a;
            },
            flatten: function () {
                return (this._points = this.toNumberArray()), (this.flattened = !0), this;
            },
            clone: function (a) {
                var b = this._points.slice();
                return null == a ? (a = new c.Polygon(b)) : a.setTo(b), a;
            },
            contains: function (a, b) {
                var c = !1;
                if (this.flattened)
                    for (var d = -2, e = this._points.length - 2; (d += 2) < this._points.length; e = d) {
                        var f = this._points[d],
                            g = this._points[d + 1],
                            h = this._points[e],
                            i = this._points[e + 1];
                        ((g <= b && b < i) || (i <= b && b < g)) && a < ((h - f) * (b - g)) / (i - g) + f && (c = !c);
                    }
                else
                    for (d = -1, e = this._points.length - 1; ++d < this._points.length; e = d) {
                        (f = this._points[d].x), (g = this._points[d].y), (h = this._points[e].x), (i = this._points[e].y);
                        ((g <= b && b < i) || (i <= b && b < g)) && a < ((h - f) * (b - g)) / (i - g) + f && (c = !c);
                    }
                return c;
            },
            setTo: function (a) {
                if (((this.area = 0), (this._points = []), 0 < arguments.length)) {
                    Array.isArray(a) || (a = Array.prototype.slice.call(arguments));
                    for (var b = Number.MAX_VALUE, c = 0, d = a.length; c < d; c++) {
                        if ("number" == typeof a[c]) {
                            var e = new PIXI.Point(a[c], a[c + 1]);
                            c++;
                        } else if (Array.isArray(a[c])) e = new PIXI.Point(a[c][0], a[c][1]);
                        else e = new PIXI.Point(a[c].x, a[c].y);
                        this._points.push(e), e.y < b && (b = e.y);
                    }
                    this.calculateArea(b);
                }
                return this;
            },
            calculateArea: function (a) {
                for (var b, c, d, e, f = 0, g = this._points.length; f < g; f++) (b = this._points[f]), (c = f === g - 1 ? this._points[0] : this._points[f + 1]), (d = (b.y - a + (c.y - a)) / 2), (e = b.x - c.x), (this.area += d * e);
                return this.area;
            },
        }),
        (c.Polygon.prototype.constructor = c.Polygon),
        Object.defineProperty(c.Polygon.prototype, "points", {
            get: function () {
                return this._points;
            },
            set: function (a) {
                null != a ? this.setTo(a) : this.setTo();
            },
        }),
        (PIXI.Polygon = c.Polygon),
        (c.Rectangle = function (a, b, d, e) {
            (a = a || 0), (b = b || 0), (d = d || 0), (e = e || 0), (this.x = a), (this.y = b), (this.width = d), (this.height = e), (this.type = c.RECTANGLE);
        }),
        (c.Rectangle.prototype = {
            offset: function (a, b) {
                return (this.x += a), (this.y += b), this;
            },
            offsetPoint: function (a) {
                return this.offset(a.x, a.y);
            },
            setTo: function (a, b, c, d) {
                return (this.x = a), (this.y = b), (this.width = c), (this.height = d), this;
            },
            scale: function (a, b) {
                return void 0 === b && (b = a), (this.width *= a), (this.height *= b), this;
            },
            centerOn: function (a, b) {
                return (this.centerX = a), (this.centerY = b), this;
            },
            floor: function () {
                (this.x = Math.floor(this.x)), (this.y = Math.floor(this.y));
            },
            floorAll: function () {
                (this.x = Math.floor(this.x)), (this.y = Math.floor(this.y)), (this.width = Math.floor(this.width)), (this.height = Math.floor(this.height));
            },
            ceil: function () {
                (this.x = Math.ceil(this.x)), (this.y = Math.ceil(this.y));
            },
            ceilAll: function () {
                (this.x = Math.ceil(this.x)), (this.y = Math.ceil(this.y)), (this.width = Math.ceil(this.width)), (this.height = Math.ceil(this.height));
            },
            copyFrom: function (a) {
                return this.setTo(a.x, a.y, a.width, a.height);
            },
            copyTo: function (a) {
                return (a.x = this.x), (a.y = this.y), (a.width = this.width), (a.height = this.height), a;
            },
            inflate: function (a, b) {
                return c.Rectangle.inflate(this, a, b);
            },
            size: function (a) {
                return c.Rectangle.size(this, a);
            },
            resize: function (a, b) {
                return (this.width = a), (this.height = b), this;
            },
            clone: function (a) {
                return c.Rectangle.clone(this, a);
            },
            contains: function (a, b) {
                return c.Rectangle.contains(this, a, b);
            },
            containsRect: function (a) {
                return c.Rectangle.containsRect(a, this);
            },
            equals: function (a) {
                return c.Rectangle.equals(this, a);
            },
            intersection: function (a, b) {
                return c.Rectangle.intersection(this, a, b);
            },
            intersects: function (a) {
                return c.Rectangle.intersects(this, a);
            },
            intersectsRaw: function (a, b, d, e, f) {
                return c.Rectangle.intersectsRaw(this, a, b, d, e, f);
            },
            union: function (a, b) {
                return c.Rectangle.union(this, a, b);
            },
            random: function (a) {
                return void 0 === a && (a = new c.Point()), (a.x = this.randomX), (a.y = this.randomY), a;
            },
            getPoint: function (a, b) {
                switch ((void 0 === b && (b = new c.Point()), a)) {
                    default:
                    case c.TOP_LEFT:
                        return b.set(this.x, this.y);
                    case c.TOP_CENTER:
                        return b.set(this.centerX, this.y);
                    case c.TOP_RIGHT:
                        return b.set(this.right, this.y);
                    case c.LEFT_CENTER:
                        return b.set(this.x, this.centerY);
                    case c.CENTER:
                        return b.set(this.centerX, this.centerY);
                    case c.RIGHT_CENTER:
                        return b.set(this.right, this.centerY);
                    case c.BOTTOM_LEFT:
                        return b.set(this.x, this.bottom);
                    case c.BOTTOM_CENTER:
                        return b.set(this.centerX, this.bottom);
                    case c.BOTTOM_RIGHT:
                        return b.set(this.right, this.bottom);
                }
            },
            toString: function () {
                return "[{Rectangle (x=" + this.x + " y=" + this.y + " width=" + this.width + " height=" + this.height + " empty=" + this.empty + ")}]";
            },
        }),
        Object.defineProperty(c.Rectangle.prototype, "halfWidth", {
            get: function () {
                return Math.round(this.width / 2);
            },
        }),
        Object.defineProperty(c.Rectangle.prototype, "halfHeight", {
            get: function () {
                return Math.round(this.height / 2);
            },
        }),
        Object.defineProperty(c.Rectangle.prototype, "bottom", {
            get: function () {
                return this.y + this.height;
            },
            set: function (a) {
                a <= this.y ? (this.height = 0) : (this.height = a - this.y);
            },
        }),
        Object.defineProperty(c.Rectangle.prototype, "bottomLeft", {
            get: function () {
                return new c.Point(this.x, this.bottom);
            },
            set: function (a) {
                (this.x = a.x), (this.bottom = a.y);
            },
        }),
        Object.defineProperty(c.Rectangle.prototype, "bottomRight", {
            get: function () {
                return new c.Point(this.right, this.bottom);
            },
            set: function (a) {
                (this.right = a.x), (this.bottom = a.y);
            },
        }),
        Object.defineProperty(c.Rectangle.prototype, "left", {
            get: function () {
                return this.x;
            },
            set: function (a) {
                a >= this.right ? (this.width = 0) : (this.width = this.right - a), (this.x = a);
            },
        }),
        Object.defineProperty(c.Rectangle.prototype, "right", {
            get: function () {
                return this.x + this.width;
            },
            set: function (a) {
                a <= this.x ? (this.width = 0) : (this.width = a - this.x);
            },
        }),
        Object.defineProperty(c.Rectangle.prototype, "volume", {
            get: function () {
                return this.width * this.height;
            },
        }),
        Object.defineProperty(c.Rectangle.prototype, "perimeter", {
            get: function () {
                return 2 * this.width + 2 * this.height;
            },
        }),
        Object.defineProperty(c.Rectangle.prototype, "centerX", {
            get: function () {
                return this.x + this.halfWidth;
            },
            set: function (a) {
                this.x = a - this.halfWidth;
            },
        }),
        Object.defineProperty(c.Rectangle.prototype, "centerY", {
            get: function () {
                return this.y + this.halfHeight;
            },
            set: function (a) {
                this.y = a - this.halfHeight;
            },
        }),
        Object.defineProperty(c.Rectangle.prototype, "randomX", {
            get: function () {
                return this.x + Math.random() * this.width;
            },
        }),
        Object.defineProperty(c.Rectangle.prototype, "randomY", {
            get: function () {
                return this.y + Math.random() * this.height;
            },
        }),
        Object.defineProperty(c.Rectangle.prototype, "top", {
            get: function () {
                return this.y;
            },
            set: function (a) {
                a >= this.bottom ? ((this.height = 0), (this.y = a)) : (this.height = this.bottom - a);
            },
        }),
        Object.defineProperty(c.Rectangle.prototype, "topLeft", {
            get: function () {
                return new c.Point(this.x, this.y);
            },
            set: function (a) {
                (this.x = a.x), (this.y = a.y);
            },
        }),
        Object.defineProperty(c.Rectangle.prototype, "topRight", {
            get: function () {
                return new c.Point(this.x + this.width, this.y);
            },
            set: function (a) {
                (this.right = a.x), (this.y = a.y);
            },
        }),
        Object.defineProperty(c.Rectangle.prototype, "empty", {
            get: function () {
                return !this.width || !this.height;
            },
            set: function (a) {
                !0 === a && this.setTo(0, 0, 0, 0);
            },
        }),
        (c.Rectangle.prototype.constructor = c.Rectangle),
        (c.Rectangle.inflate = function (a, b, c) {
            return (a.x -= b), (a.width += 2 * b), (a.y -= c), (a.height += 2 * c), a;
        }),
        (c.Rectangle.inflatePoint = function (a, b) {
            return c.Rectangle.inflate(a, b.x, b.y);
        }),
        (c.Rectangle.size = function (a, b) {
            return null == b ? (b = new c.Point(a.width, a.height)) : b.setTo(a.width, a.height), b;
        }),
        (c.Rectangle.clone = function (a, b) {
            return null == b ? (b = new c.Rectangle(a.x, a.y, a.width, a.height)) : b.setTo(a.x, a.y, a.width, a.height), b;
        }),
        (c.Rectangle.contains = function (a, b, c) {
            return !(a.width <= 0 || a.height <= 0) && b >= a.x && b < a.right && c >= a.y && c < a.bottom;
        }),
        (c.Rectangle.containsRaw = function (a, b, c, d, e, f) {
            return a <= e && e < a + c && b <= f && f < b + d;
        }),
        (c.Rectangle.containsPoint = function (a, b) {
            return c.Rectangle.contains(a, b.x, b.y);
        }),
        (c.Rectangle.containsRect = function (a, b) {
            return !(a.volume > b.volume) && a.x >= b.x && a.y >= b.y && a.right < b.right && a.bottom < b.bottom;
        }),
        (c.Rectangle.equals = function (a, b) {
            return a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height;
        }),
        (c.Rectangle.sameDimensions = function (a, b) {
            return a.width === b.width && a.height === b.height;
        }),
        (c.Rectangle.intersection = function (a, b, d) {
            return (
                void 0 === d && (d = new c.Rectangle()),
                c.Rectangle.intersects(a, b) && ((d.x = Math.max(a.x, b.x)), (d.y = Math.max(a.y, b.y)), (d.width = Math.min(a.right, b.right) - d.x), (d.height = Math.min(a.bottom, b.bottom) - d.y)),
                d
            );
        }),
        (c.Rectangle.intersects = function (a, b) {
            return !(a.width <= 0 || a.height <= 0 || b.width <= 0 || b.height <= 0 || a.right < b.x || a.bottom < b.y || a.x > b.right || a.y > b.bottom);
        }),
        (c.Rectangle.intersectsRaw = function (a, b, c, d, e, f) {
            return void 0 === f && (f = 0), !(b > a.right + f || c < a.left - f || d > a.bottom + f || e < a.top - f);
        }),
        (c.Rectangle.union = function (a, b, d) {
            return void 0 === d && (d = new c.Rectangle()), d.setTo(Math.min(a.x, b.x), Math.min(a.y, b.y), Math.max(a.right, b.right) - Math.min(a.left, b.left), Math.max(a.bottom, b.bottom) - Math.min(a.top, b.top));
        }),
        (c.Rectangle.aabb = function (a, b) {
            void 0 === b && (b = new c.Rectangle());
            var d = Number.NEGATIVE_INFINITY,
                e = Number.POSITIVE_INFINITY,
                f = Number.NEGATIVE_INFINITY,
                g = Number.POSITIVE_INFINITY;
            return (
                a.forEach(function (a) {
                    a.x > d && (d = a.x), a.x < e && (e = a.x), a.y > f && (f = a.y), a.y < g && (g = a.y);
                }),
                b.setTo(e, g, d - e, f - g),
                b
            );
        }),
        (PIXI.Rectangle = c.Rectangle),
        (PIXI.EmptyRectangle = new c.Rectangle(0, 0, 0, 0)),
        (c.RoundedRectangle = function (a, b, d, e, f) {
            void 0 === a && (a = 0),
                void 0 === b && (b = 0),
                void 0 === d && (d = 0),
                void 0 === e && (e = 0),
                void 0 === f && (f = 20),
                (this.x = a),
                (this.y = b),
                (this.width = d),
                (this.height = e),
                (this.radius = f || 20),
                (this.type = c.ROUNDEDRECTANGLE);
        }),
        (c.RoundedRectangle.prototype = {
            clone: function () {
                return new c.RoundedRectangle(this.x, this.y, this.width, this.height, this.radius);
            },
            contains: function (a, b) {
                if (this.width <= 0 || this.height <= 0) return !1;
                var c = this.x;
                if (c <= a && a <= c + this.width) {
                    var d = this.y;
                    if (d <= b && b <= d + this.height) return !0;
                }
                return !1;
            },
        }),
        (c.RoundedRectangle.prototype.constructor = c.RoundedRectangle),
        (PIXI.RoundedRectangle = c.RoundedRectangle),
        (c.Camera = function (a, b, d, e, f, g) {
            (this.game = a),
                (this.world = a.world),
                (this.id = 0),
                (this.view = new c.Rectangle(d, e, f, g)),
                (this.bounds = new c.Rectangle(d, e, f, g)),
                (this.deadzone = null),
                (this.visible = !0),
                (this.roundPx = !0),
                (this.atLimit = { x: !1, y: !1 }),
                (this.target = null),
                (this.displayObject = null),
                (this.scale = null),
                (this.totalInView = 0),
                (this.lerp = new c.Point(1, 1)),
                (this.onShakeComplete = new c.Signal()),
                (this.onFlashComplete = new c.Signal()),
                (this.onFadeComplete = new c.Signal()),
                (this.fx = null),
                (this._targetPosition = new c.Point()),
                (this._edge = 0),
                (this._position = new c.Point()),
                (this._shake = { intensity: 0, duration: 0, horizontal: !1, vertical: !1, shakeBounds: !0, x: 0, y: 0 }),
                (this._fxDuration = 0),
                (this._fxType = 0);
        }),
        (c.Camera.FOLLOW_LOCKON = 0),
        (c.Camera.FOLLOW_PLATFORMER = 1),
        (c.Camera.FOLLOW_TOPDOWN = 2),
        (c.Camera.FOLLOW_TOPDOWN_TIGHT = 3),
        (c.Camera.SHAKE_BOTH = 4),
        (c.Camera.SHAKE_HORIZONTAL = 5),
        (c.Camera.SHAKE_VERTICAL = 6),
        (c.Camera.ENABLE_FX = !0),
        (c.Camera.prototype = {
            boot: function () {
                (this.displayObject = this.game.world), (this.scale = this.game.world.scale), (this.game.camera = this), c.Graphics && c.Camera.ENABLE_FX && ((this.fx = new c.Graphics(this.game)), this.game.stage.addChild(this.fx));
            },
            preUpdate: function () {
                this.totalInView = 0;
            },
            follow: function (a, b, d, e) {
                var f;
                switch ((void 0 === b && (b = c.Camera.FOLLOW_LOCKON), void 0 === d && (d = 1), void 0 === e && (e = 1), (this.target = a), this.lerp.set(d, e), b)) {
                    case c.Camera.FOLLOW_PLATFORMER:
                        var g = this.width / 8,
                            h = this.height / 3;
                        this.deadzone = new c.Rectangle((this.width - g) / 2, (this.height - h) / 2 - 0.25 * h, g, h);
                        break;
                    case c.Camera.FOLLOW_TOPDOWN:
                        (f = Math.max(this.width, this.height) / 4), (this.deadzone = new c.Rectangle((this.width - f) / 2, (this.height - f) / 2, f, f));
                        break;
                    case c.Camera.FOLLOW_TOPDOWN_TIGHT:
                        (f = Math.max(this.width, this.height) / 8), (this.deadzone = new c.Rectangle((this.width - f) / 2, (this.height - f) / 2, f, f));
                        break;
                    case c.Camera.FOLLOW_LOCKON:
                    default:
                        this.deadzone = null;
                }
            },
            unfollow: function () {
                this.target = null;
            },
            focusOn: function (a) {
                this.setPosition(Math.round(a.x - this.view.halfWidth), Math.round(a.y - this.view.halfHeight));
            },
            focusOnXY: function (a, b) {
                this.setPosition(Math.round(a - this.view.halfWidth), Math.round(b - this.view.halfHeight));
            },
            shake: function (a, b, d, e, f) {
                return (
                    void 0 === a && (a = 0.05),
                    void 0 === b && (b = 500),
                    void 0 === d && (d = !0),
                    void 0 === e && (e = c.Camera.SHAKE_BOTH),
                    void 0 === f && (f = !0),
                    !(
                        (!d && 0 < this._shake.duration) ||
                        ((this._shake.intensity = a),
                        (this._shake.duration = b),
                        (this._shake.shakeBounds = f),
                        (this._shake.x = 0),
                        (this._shake.y = 0),
                        (this._shake.horizontal = e === c.Camera.SHAKE_BOTH || e === c.Camera.SHAKE_HORIZONTAL),
                        (this._shake.vertical = e === c.Camera.SHAKE_BOTH || e === c.Camera.SHAKE_VERTICAL),
                        0)
                    )
                );
            },
            flash: function (a, b, c) {
                return (
                    void 0 === a && (a = 16777215),
                    void 0 === b && (b = 500),
                    void 0 === c && (c = !1),
                    !(!this.fx || (!c && 0 < this._fxDuration) || (this.fx.clear(), this.fx.beginFill(a), this.fx.drawRect(0, 0, this.width, this.height), this.fx.endFill(), (this.fx.alpha = 1), (this._fxDuration = b), (this._fxType = 0)))
                );
            },
            fade: function (a, b, c) {
                return (
                    void 0 === a && (a = 0),
                    void 0 === b && (b = 500),
                    void 0 === c && (c = !1),
                    !(
                        !this.fx ||
                        (!c && 0 < this._fxDuration) ||
                        (this.fx.clear(), this.fx.beginFill(a), this.fx.drawRect(0, 0, this.width, this.height), this.fx.endFill(), (this.fx.alpha = 0), (this._fxDuration = b), (this._fxType = 1), 0)
                    )
                );
            },
            update: function () {
                0 < this._fxDuration && this.updateFX(),
                    0 < this._shake.duration && this.updateShake(),
                    this.bounds && this.checkBounds(),
                    this.roundPx && (this.view.floor(), (this._shake.x = Math.floor(this._shake.x)), (this._shake.y = Math.floor(this._shake.y))),
                    (this.displayObject.position.x = -this.view.x),
                    (this.displayObject.position.y = -this.view.y);
            },
            updateFX: function () {
                0 === this._fxType
                    ? ((this.fx.alpha -= this.game.time.elapsedMS / this._fxDuration), this.fx.alpha <= 0 && ((this._fxDuration = 0), (this.fx.alpha = 0), this.onFlashComplete.dispatch()))
                    : ((this.fx.alpha += this.game.time.elapsedMS / this._fxDuration), 1 <= this.fx.alpha && ((this._fxDuration = 0), (this.fx.alpha = 1), this.onFadeComplete.dispatch()));
            },
            updateShake: function () {
                (this._shake.duration -= this.game.time.elapsedMS),
                    this._shake.duration <= 0
                        ? (this.onShakeComplete.dispatch(), (this._shake.x = 0), (this._shake.y = 0))
                        : (this._shake.horizontal && (this._shake.x = this.game.rnd.frac() * this._shake.intensity * this.view.width * 2 - this._shake.intensity * this.view.width),
                          this._shake.vertical && (this._shake.y = this.game.rnd.frac() * this._shake.intensity * this.view.height * 2 - this._shake.intensity * this.view.height));
            },
            updateTarget: function () {
                (this._targetPosition.x = this.view.x + this.target.worldPosition.x),
                    (this._targetPosition.y = this.view.y + this.target.worldPosition.y),
                    this.deadzone
                        ? ((this._edge = this._targetPosition.x - this.view.x),
                          this._edge < this.deadzone.left
                              ? (this.view.x = this.game.math.linear(this.view.x, this._targetPosition.x - this.deadzone.left, this.lerp.x))
                              : this._edge > this.deadzone.right && (this.view.x = this.game.math.linear(this.view.x, this._targetPosition.x - this.deadzone.right, this.lerp.x)),
                          (this._edge = this._targetPosition.y - this.view.y),
                          this._edge < this.deadzone.top
                              ? (this.view.y = this.game.math.linear(this.view.y, this._targetPosition.y - this.deadzone.top, this.lerp.y))
                              : this._edge > this.deadzone.bottom && (this.view.y = this.game.math.linear(this.view.y, this._targetPosition.y - this.deadzone.bottom, this.lerp.y)))
                        : ((this.view.x = this.game.math.linear(this.view.x, this._targetPosition.x - this.view.halfWidth, this.lerp.x)),
                          (this.view.y = this.game.math.linear(this.view.y, this._targetPosition.y - this.view.halfHeight, this.lerp.y))),
                    this.bounds && this.checkBounds(),
                    this.roundPx && this.view.floor(),
                    (this.displayObject.position.x = -this.view.x),
                    (this.displayObject.position.y = -this.view.y);
            },
            setBoundsToWorld: function () {
                this.bounds && this.bounds.copyFrom(this.game.world.bounds);
            },
            checkBounds: function () {
                (this.atLimit.x = !1), (this.atLimit.y = !1);
                var a = this.view.x + this._shake.x,
                    b = this.view.right + this._shake.x,
                    c = this.view.y + this._shake.y,
                    d = this.view.bottom + this._shake.y;
                a <= this.bounds.x * this.scale.x && ((this.atLimit.x = !0), (this.view.x = this.bounds.x * this.scale.x), this._shake.shakeBounds || (this._shake.x = 0)),
                    b >= this.bounds.right * this.scale.x && ((this.atLimit.x = !0), (this.view.x = this.bounds.right * this.scale.x - this.width), this._shake.shakeBounds || (this._shake.x = 0)),
                    c <= this.bounds.top * this.scale.y && ((this.atLimit.y = !0), (this.view.y = this.bounds.top * this.scale.y), this._shake.shakeBounds || (this._shake.y = 0)),
                    d >= this.bounds.bottom * this.scale.y && ((this.atLimit.y = !0), (this.view.y = this.bounds.bottom * this.scale.y - this.height), this._shake.shakeBounds || (this._shake.y = 0));
            },
            setPosition: function (a, b) {
                (this.view.x = a), (this.view.y = b), this.bounds && this.checkBounds();
            },
            setSize: function (a, b) {
                (this.view.width = a), (this.view.height = b);
            },
            reset: function () {
                (this.target = null), (this.view.x = 0), (this.view.y = 0), (this._shake.duration = 0), this.resetFX();
            },
            resetFX: function () {
                this.fx && (this.fx.clear(), (this.fx.alpha = 0), (this._fxDuration = 0));
            },
        }),
        (c.Camera.prototype.constructor = c.Camera),
        Object.defineProperty(c.Camera.prototype, "x", {
            get: function () {
                return this.view.x;
            },
            set: function (a) {
                (this.view.x = a), this.bounds && this.checkBounds();
            },
        }),
        Object.defineProperty(c.Camera.prototype, "y", {
            get: function () {
                return this.view.y;
            },
            set: function (a) {
                (this.view.y = a), this.bounds && this.checkBounds();
            },
        }),
        Object.defineProperty(c.Camera.prototype, "position", {
            get: function () {
                return this._position.set(this.view.x, this.view.y), this._position;
            },
            set: function (a) {
                void 0 !== a.x && (this.view.x = a.x), void 0 !== a.y && (this.view.y = a.y), this.bounds && this.checkBounds();
            },
        }),
        Object.defineProperty(c.Camera.prototype, "width", {
            get: function () {
                return this.view.width;
            },
            set: function (a) {
                this.view.width = a;
            },
        }),
        Object.defineProperty(c.Camera.prototype, "height", {
            get: function () {
                return this.view.height;
            },
            set: function (a) {
                this.view.height = a;
            },
        }),
        Object.defineProperty(c.Camera.prototype, "shakeIntensity", {
            get: function () {
                return this._shake.intensity;
            },
            set: function (a) {
                this._shake.intensity = a;
            },
        }),
        (c.State = function () {
            (this.game = null),
                (this.key = ""),
                (this.add = null),
                (this.make = null),
                (this.camera = null),
                (this.cache = null),
                (this.input = null),
                (this.load = null),
                (this.math = null),
                (this.sound = null),
                (this.scale = null),
                (this.stage = null),
                (this.state = null),
                (this.time = null),
                (this.tweens = null),
                (this.world = null),
                (this.particles = null),
                (this.physics = null),
                (this.rnd = null);
        }),
        (c.State.prototype = {
            init: function () {},
            preload: function () {},
            loadUpdate: function () {},
            loadRender: function () {},
            create: function () {},
            update: function () {},
            preRender: function () {},
            render: function () {},
            resize: function () {},
            paused: function () {},
            resumed: function () {},
            pauseUpdate: function () {},
            shutdown: function () {},
        }),
        (c.State.prototype.constructor = c.State),
        (c.StateManager = function (a, b) {
            (this.game = a),
                (this.states = {}),
                (this._pendingState = null) != b && (this._pendingState = b),
                (this._clearWorld = !1),
                (this._clearCache = !1),
                (this._created = !1),
                (this._args = []),
                (this.current = ""),
                (this.onStateChange = new c.Signal()),
                (this.onInitCallback = null),
                (this.onPreloadCallback = null),
                (this.onCreateCallback = null),
                (this.onUpdateCallback = null),
                (this.onRenderCallback = null),
                (this.onResizeCallback = null),
                (this.onPreRenderCallback = null),
                (this.onLoadUpdateCallback = null),
                (this.onLoadRenderCallback = null),
                (this.onPausedCallback = null),
                (this.onResumedCallback = null),
                (this.onPauseUpdateCallback = null),
                (this.onShutDownCallback = null);
        }),
        (c.StateManager.prototype = {
            boot: function () {
                this.game.onPause.add(this.pause, this), this.game.onResume.add(this.resume, this), null !== this._pendingState && "string" != typeof this._pendingState && this.add("default", this._pendingState, !0);
            },
            add: function (a, b, d) {
                var e;
                return (
                    void 0 === d && (d = !1),
                    b instanceof c.State ? (e = b) : "object" == typeof b ? ((e = b).game = this.game) : "function" == typeof b && (e = new b(this.game)),
                    (this.states[a] = e),
                    d && (this.game.isBooted ? this.start(a) : (this._pendingState = a)),
                    e
                );
            },
            remove: function (a) {
                this.current === a &&
                    ((this.callbackContext = null),
                    (this.onInitCallback = null),
                    (this.onShutDownCallback = null),
                    (this.onPreloadCallback = null),
                    (this.onLoadRenderCallback = null),
                    (this.onLoadUpdateCallback = null),
                    (this.onCreateCallback = null),
                    (this.onUpdateCallback = null),
                    (this.onPreRenderCallback = null),
                    (this.onRenderCallback = null),
                    (this.onResizeCallback = null),
                    (this.onPausedCallback = null),
                    (this.onResumedCallback = null),
                    (this.onPauseUpdateCallback = null)),
                    delete this.states[a];
            },
            start: function (a, b, c) {
                void 0 === b && (b = !0),
                    void 0 === c && (c = !1),
                    this.checkState(a) && ((this._pendingState = a), (this._clearWorld = b), (this._clearCache = c), 3 < arguments.length && (this._args = Array.prototype.splice.call(arguments, 3)));
            },
            restart: function (a, b) {
                void 0 === a && (a = !0), void 0 === b && (b = !1), (this._pendingState = this.current), (this._clearWorld = a), (this._clearCache = b), 2 < arguments.length && (this._args = Array.prototype.slice.call(arguments, 2));
            },
            dummy: function () {},
            preUpdate: function () {
                if (this._pendingState && this.game.isBooted) {
                    var a = this.current;
                    if ((this.clearCurrentState(), this.setCurrentState(this._pendingState), this.onStateChange.dispatch(this.current, a), this.current !== this._pendingState)) return;
                    (this._pendingState = null),
                        this.onPreloadCallback
                            ? (this.game.load.reset(!0),
                              this.onPreloadCallback.call(this.callbackContext, this.game),
                              0 === this.game.load.totalQueuedFiles() && 0 === this.game.load.totalQueuedPacks() ? this.loadComplete() : this.game.load.start())
                            : this.loadComplete();
                }
            },
            clearCurrentState: function () {
                this.current &&
                    (this.onShutDownCallback && this.onShutDownCallback.call(this.callbackContext, this.game),
                    this.game.tweens.removeAll(),
                    this.game.camera.reset(),
                    this.game.input.reset(!0),
                    this.game.physics.clear(),
                    this.game.time.removeAll(),
                    this.game.scale.reset(this._clearWorld),
                    this.game.debug && this.game.debug.reset(),
                    this._clearWorld && (this.game.world.shutdown(), this._clearCache && this.game.cache.destroy()));
            },
            checkState: function (a) {
                return (this.states[a] && !!(this.states[a].preload || this.states[a].create || this.states[a].update || this.states[a].render)) || !1;
            },
            link: function (a) {
                (this.states[a].game = this.game),
                    (this.states[a].add = this.game.add),
                    (this.states[a].make = this.game.make),
                    (this.states[a].camera = this.game.camera),
                    (this.states[a].cache = this.game.cache),
                    (this.states[a].input = this.game.input),
                    (this.states[a].load = this.game.load),
                    (this.states[a].math = this.game.math),
                    (this.states[a].sound = this.game.sound),
                    (this.states[a].scale = this.game.scale),
                    ((this.states[a].state = this).states[a].stage = this.game.stage),
                    (this.states[a].time = this.game.time),
                    (this.states[a].tweens = this.game.tweens),
                    (this.states[a].world = this.game.world),
                    (this.states[a].particles = this.game.particles),
                    (this.states[a].rnd = this.game.rnd),
                    (this.states[a].physics = this.game.physics),
                    (this.states[a].key = a);
            },
            unlink: function (a) {
                this.states[a] &&
                    ((this.states[a].game = null),
                    (this.states[a].add = null),
                    (this.states[a].make = null),
                    (this.states[a].camera = null),
                    (this.states[a].cache = null),
                    (this.states[a].input = null),
                    (this.states[a].load = null),
                    (this.states[a].math = null),
                    (this.states[a].sound = null),
                    (this.states[a].scale = null),
                    (this.states[a].state = null),
                    (this.states[a].stage = null),
                    (this.states[a].time = null),
                    (this.states[a].tweens = null),
                    (this.states[a].world = null),
                    (this.states[a].particles = null),
                    (this.states[a].rnd = null),
                    (this.states[a].physics = null));
            },
            setCurrentState: function (a) {
                (this.callbackContext = this.states[a]),
                    this.link(a),
                    (this.onInitCallback = this.states[a].init || this.dummy),
                    (this.onPreloadCallback = this.states[a].preload || null),
                    (this.onLoadRenderCallback = this.states[a].loadRender || null),
                    (this.onLoadUpdateCallback = this.states[a].loadUpdate || null),
                    (this.onCreateCallback = this.states[a].create || null),
                    (this.onUpdateCallback = this.states[a].update || null),
                    (this.onPreRenderCallback = this.states[a].preRender || null),
                    (this.onRenderCallback = this.states[a].render || null),
                    (this.onResizeCallback = this.states[a].resize || null),
                    (this.onPausedCallback = this.states[a].paused || null),
                    (this.onResumedCallback = this.states[a].resumed || null),
                    (this.onPauseUpdateCallback = this.states[a].pauseUpdate || null),
                    (this.onShutDownCallback = this.states[a].shutdown || this.dummy),
                    "" !== this.current && this.game.physics.reset(),
                    (this.current = a),
                    (this._created = !1),
                    this.onInitCallback.apply(this.callbackContext, this._args),
                    a === this._pendingState && (this._args = []),
                    (this.game._kickstart = !0);
            },
            getCurrentState: function () {
                return this.states[this.current];
            },
            loadComplete: function () {
                !1 === this._created && this.onLoadUpdateCallback && this.onLoadUpdateCallback.call(this.callbackContext, this.game),
                    !1 === this._created && this.onCreateCallback ? ((this._created = !0), this.onCreateCallback.call(this.callbackContext, this.game)) : (this._created = !0);
            },
            pause: function () {
                this._created && this.onPausedCallback && this.onPausedCallback.call(this.callbackContext, this.game);
            },
            resume: function () {
                this._created && this.onResumedCallback && this.onResumedCallback.call(this.callbackContext, this.game);
            },
            update: function () {
                this._created ? this.onUpdateCallback && this.onUpdateCallback.call(this.callbackContext, this.game) : this.onLoadUpdateCallback && this.onLoadUpdateCallback.call(this.callbackContext, this.game);
            },
            pauseUpdate: function () {
                this._created ? this.onPauseUpdateCallback && this.onPauseUpdateCallback.call(this.callbackContext, this.game) : this.onLoadUpdateCallback && this.onLoadUpdateCallback.call(this.callbackContext, this.game);
            },
            preRender: function (a) {
                this._created && this.onPreRenderCallback && this.onPreRenderCallback.call(this.callbackContext, this.game, a);
            },
            resize: function (a, b) {
                this.onResizeCallback && this.onResizeCallback.call(this.callbackContext, a, b);
            },
            render: function () {
                this._created
                    ? this.onRenderCallback &&
                      (this.game.renderType === c.CANVAS
                          ? (this.game.context.save(), this.game.context.setTransform(1, 0, 0, 1, 0, 0), this.onRenderCallback.call(this.callbackContext, this.game), this.game.context.restore())
                          : this.onRenderCallback.call(this.callbackContext, this.game))
                    : this.onLoadRenderCallback && this.onLoadRenderCallback.call(this.callbackContext, this.game);
            },
            destroy: function () {
                (this._clearWorld = !0),
                    (this._clearCache = !0),
                    this.clearCurrentState(),
                    (this.callbackContext = null),
                    (this.onInitCallback = null),
                    (this.onShutDownCallback = null),
                    (this.onPreloadCallback = null),
                    (this.onLoadRenderCallback = null),
                    (this.onLoadUpdateCallback = null),
                    (this.onCreateCallback = null),
                    (this.onUpdateCallback = null),
                    (this.onRenderCallback = null),
                    (this.onPausedCallback = null),
                    (this.onResumedCallback = null),
                    (this.onPauseUpdateCallback = null),
                    (this.game = null),
                    (this.states = {}),
                    (this._pendingState = null),
                    (this.current = "");
            },
        }),
        (c.StateManager.prototype.constructor = c.StateManager),
        Object.defineProperty(c.StateManager.prototype, "created", {
            get: function () {
                return this._created;
            },
        }),
        (c.Signal = function () {}),
        (c.Signal.prototype = {
            _bindings: null,
            _prevParams: null,
            memorize: !1,
            _shouldPropagate: !0,
            active: !0,
            _boundDispatch: !1,
            validateListener: function (a, b) {
                if ("function" != typeof a) throw new Error("Phaser.Signal: listener is a required param of {fn}() and should be a Function.".replace("{fn}", b));
            },
            _registerListener: function (a, b, d, e, f) {
                var g,
                    h = this._indexOfListener(a, d);
                if (-1 !== h) {
                    if ((g = this._bindings[h]).isOnce() !== b) throw new Error("You cannot add" + (b ? "" : "Once") + "() then add" + (b ? "Once" : "") + "() the same listener without removing the relationship first.");
                } else (g = new c.SignalBinding(this, a, b, d, e, f)), this._addBinding(g);
                return this.memorize && this._prevParams && g.execute(this._prevParams), g;
            },
            _addBinding: function (a) {
                this._bindings || (this._bindings = []);
                for (var b = this._bindings.length; b--, this._bindings[b] && a._priority <= this._bindings[b]._priority; );
                this._bindings.splice(b + 1, 0, a);
            },
            _indexOfListener: function (a, b) {
                if (!this._bindings) return -1;
                void 0 === b && (b = null);
                for (var c, d = this._bindings.length; d--; ) if ((c = this._bindings[d])._listener === a && c.context === b) return d;
                return -1;
            },
            has: function (a, b) {
                return -1 !== this._indexOfListener(a, b);
            },
            add: function (a, b, c) {
                this.validateListener(a, "add");
                var d = [];
                if (3 < arguments.length) for (var e = 3; e < arguments.length; e++) d.push(arguments[e]);
                return this._registerListener(a, !1, b, c, d);
            },
            addOnce: function (a, b, c) {
                this.validateListener(a, "addOnce");
                var d = [];
                if (3 < arguments.length) for (var e = 3; e < arguments.length; e++) d.push(arguments[e]);
                return this._registerListener(a, !0, b, c, d);
            },
            remove: function (a, b) {
                this.validateListener(a, "remove");
                var c = this._indexOfListener(a, b);
                return -1 !== c && (this._bindings[c]._destroy(), this._bindings.splice(c, 1)), a;
            },
            removeAll: function (a) {
                if ((void 0 === a && (a = null), this._bindings)) {
                    for (var b = this._bindings.length; b--; ) a ? this._bindings[b].context === a && (this._bindings[b]._destroy(), this._bindings.splice(b, 1)) : this._bindings[b]._destroy();
                    a || (this._bindings.length = 0);
                }
            },
            getNumListeners: function () {
                return this._bindings ? this._bindings.length : 0;
            },
            halt: function () {
                this._shouldPropagate = !1;
            },
            dispatch: function () {
                if (this.active && this._bindings) {
                    var a,
                        b = Array.prototype.slice.call(arguments),
                        c = this._bindings.length;
                    if ((this.memorize && (this._prevParams = b), c)) for (a = this._bindings.slice(), this._shouldPropagate = !0; a[--c] && this._shouldPropagate && !1 !== a[c].execute(b); );
                }
            },
            forget: function () {
                this._prevParams && (this._prevParams = null);
            },
            dispose: function () {
                this.removeAll(), (this._bindings = null), this._prevParams && (this._prevParams = null);
            },
            toString: function () {
                return "[Phaser.Signal active:" + this.active + " numListeners:" + this.getNumListeners() + "]";
            },
        }),
        Object.defineProperty(c.Signal.prototype, "boundDispatch", {
            get: function () {
                var a = this;
                return (
                    this._boundDispatch ||
                    (this._boundDispatch = function () {
                        return a.dispatch.apply(a, arguments);
                    })
                );
            },
        }),
        (c.Signal.prototype.constructor = c.Signal),
        (c.SignalBinding = function (a, b, c, d, e, f) {
            (this._listener = b), c && (this._isOnce = !0), null != d && (this.context = d), (this._signal = a), e && (this._priority = e), f && f.length && (this._args = f);
        }),
        (c.SignalBinding.prototype = {
            context: null,
            _isOnce: !1,
            _priority: 0,
            _args: null,
            callCount: 0,
            active: !0,
            params: null,
            execute: function (a) {
                var b, c;
                return (
                    this.active && this._listener && ((c = this.params ? this.params.concat(a) : a), this._args && (c = c.concat(this._args)), (b = this._listener.apply(this.context, c)), this.callCount++, this._isOnce && this.detach()), b
                );
            },
            detach: function () {
                return this.isBound() ? this._signal.remove(this._listener, this.context) : null;
            },
            isBound: function () {
                return !!this._signal && !!this._listener;
            },
            isOnce: function () {
                return this._isOnce;
            },
            getListener: function () {
                return this._listener;
            },
            getSignal: function () {
                return this._signal;
            },
            _destroy: function () {
                delete this._signal, delete this._listener, delete this.context;
            },
            toString: function () {
                return "[Phaser.SignalBinding isOnce:" + this._isOnce + ", isBound:" + this.isBound() + ", active:" + this.active + "]";
            },
        }),
        (c.SignalBinding.prototype.constructor = c.SignalBinding),
        (c.Filter = function (a, b, d) {
            (this.game = a), (this.type = c.WEBGL_FILTER), (this.passes = [this]), (this.shaders = []), (this.dirty = !0), (this.padding = 0), (this.prevPoint = new c.Point());
            var e = new Date();
            if (
                ((this.uniforms = {
                    resolution: { type: "2f", value: { x: 256, y: 256 } },
                    time: { type: "1f", value: 0 },
                    mouse: { type: "2f", value: { x: 0, y: 0 } },
                    date: { type: "4fv", value: [e.getFullYear(), e.getMonth(), e.getDate(), 60 * e.getHours() * 60 + 60 * e.getMinutes() + e.getSeconds()] },
                    sampleRate: { type: "1f", value: 44100 },
                    iChannel0: { type: "sampler2D", value: null, textureData: { repeat: !0 } },
                    iChannel1: { type: "sampler2D", value: null, textureData: { repeat: !0 } },
                    iChannel2: { type: "sampler2D", value: null, textureData: { repeat: !0 } },
                    iChannel3: { type: "sampler2D", value: null, textureData: { repeat: !0 } },
                }),
                b)
            )
                for (var f in b) this.uniforms[f] = b[f];
            this.fragmentSrc = d || "";
        }),
        (c.Filter.prototype = {
            init: function () {},
            setResolution: function (a, b) {
                (this.uniforms.resolution.value.x = a), (this.uniforms.resolution.value.y = b);
            },
            update: function (a) {
                if (void 0 !== a) {
                    var b = a.x / this.game.width,
                        c = 1 - a.y / this.game.height;
                    (b === this.prevPoint.x && c === this.prevPoint.y) || ((this.uniforms.mouse.value.x = b.toFixed(2)), (this.uniforms.mouse.value.y = c.toFixed(2)), this.prevPoint.set(b, c));
                }
                this.uniforms.time.value = this.game.time.totalElapsedSeconds();
            },
            addToWorld: function (a, b, c, d, e, f) {
                void 0 === e && (e = 0), void 0 === f && (f = 0), null != c ? (this.width = c) : (c = this.width), null != d ? (this.height = d) : (d = this.height);
                var g = this.game.add.image(a, b, "__default");
                return (g.width = c), (g.height = d), g.anchor.set(e, f), (g.filters = [this]), g;
            },
            destroy: function () {
                this.game = null;
            },
        }),
        (c.Filter.prototype.constructor = c.Filter),
        Object.defineProperty(c.Filter.prototype, "width", {
            get: function () {
                return this.uniforms.resolution.value.x;
            },
            set: function (a) {
                this.uniforms.resolution.value.x = a;
            },
        }),
        Object.defineProperty(c.Filter.prototype, "height", {
            get: function () {
                return this.uniforms.resolution.value.y;
            },
            set: function (a) {
                this.uniforms.resolution.value.y = a;
            },
        }),
        (c.Plugin = function (a, b) {
            void 0 === b && (b = null),
                (this.game = a),
                (this.parent = b),
                (this.active = !1),
                (this.visible = !1),
                (this.hasPreUpdate = !1),
                (this.hasUpdate = !1),
                (this.hasPostUpdate = !1),
                (this.hasRender = !1),
                (this.hasPostRender = !1);
        }),
        (c.Plugin.prototype = {
            preUpdate: function () {},
            update: function () {},
            render: function () {},
            postRender: function () {},
            destroy: function () {
                (this.game = null), (this.parent = null), (this.active = !1), (this.visible = !1);
            },
        }),
        (c.Plugin.prototype.constructor = c.Plugin),
        (c.PluginManager = function (a) {
            (this.game = a), (this.plugins = []), (this._len = 0), (this._i = 0);
        }),
        (c.PluginManager.prototype = {
            add: function (a) {
                var b = Array.prototype.slice.call(arguments, 1),
                    c = !1;
                return (
                    "function" == typeof a ? (a = new a(this.game, this)) : ((a.game = this.game), (a.parent = this)),
                    "function" == typeof a.preUpdate && (c = a.hasPreUpdate = !0),
                    "function" == typeof a.update && (c = a.hasUpdate = !0),
                    "function" == typeof a.postUpdate && (c = a.hasPostUpdate = !0),
                    "function" == typeof a.render && (c = a.hasRender = !0),
                    "function" == typeof a.postRender && (c = a.hasPostRender = !0),
                    c
                        ? ((a.hasPreUpdate || a.hasUpdate || a.hasPostUpdate) && (a.active = !0),
                          (a.hasRender || a.hasPostRender) && (a.visible = !0),
                          (this._len = this.plugins.push(a)),
                          "function" == typeof a.init && a.init.apply(a, b),
                          a)
                        : null
                );
            },
            remove: function (a, b) {
                for (void 0 === b && (b = !0), this._i = this._len; this._i--; ) if (this.plugins[this._i] === a) return b && a.destroy(), this.plugins.splice(this._i, 1), void this._len--;
            },
            removeAll: function () {
                for (this._i = this._len; this._i--; ) this.plugins[this._i].destroy();
                (this.plugins.length = 0), (this._len = 0);
            },
            preUpdate: function () {
                for (this._i = this._len; this._i--; ) this.plugins[this._i].active && this.plugins[this._i].hasPreUpdate && this.plugins[this._i].preUpdate();
            },
            update: function () {
                for (this._i = this._len; this._i--; ) this.plugins[this._i].active && this.plugins[this._i].hasUpdate && this.plugins[this._i].update();
            },
            postUpdate: function () {
                for (this._i = this._len; this._i--; ) this.plugins[this._i].active && this.plugins[this._i].hasPostUpdate && this.plugins[this._i].postUpdate();
            },
            render: function () {
                for (this._i = this._len; this._i--; ) this.plugins[this._i].visible && this.plugins[this._i].hasRender && this.plugins[this._i].render();
            },
            postRender: function () {
                for (this._i = this._len; this._i--; ) this.plugins[this._i].visible && this.plugins[this._i].hasPostRender && this.plugins[this._i].postRender();
            },
            destroy: function () {
                this.removeAll(), (this.game = null);
            },
        }),
        (c.PluginManager.prototype.constructor = c.PluginManager),
        (c.Stage = function (a) {
            (this.game = a),
                PIXI.DisplayObjectContainer.call(this),
                (this.name = "_stage_root"),
                (this.disableVisibilityChange = !1),
                (this.exists = !0),
                (this.worldTransform = new PIXI.Matrix()),
                ((this.stage = this).currentRenderOrderID = 0),
                (this._hiddenVar = "hidden"),
                (this._onChange = null),
                (this._bgColor = { r: 0, g: 0, b: 0, a: 0, color: 0, rgba: "#000000" }),
                this.game.transparent || (this._bgColor.a = 1),
                a.config && this.parseConfig(a.config);
        }),
        (c.Stage.prototype = Object.create(PIXI.DisplayObjectContainer.prototype)),
        (c.Stage.prototype.constructor = c.Stage),
        (c.Stage.prototype.parseConfig = function (a) {
            a.disableVisibilityChange && (this.disableVisibilityChange = a.disableVisibilityChange), a.backgroundColor && this.setBackgroundColor(a.backgroundColor);
        }),
        (c.Stage.prototype.boot = function () {
            c.DOM.getOffset(this.game.canvas, this.offset), c.Canvas.setUserSelect(this.game.canvas, "none"), c.Canvas.setTouchAction(this.game.canvas, "none"), this.checkVisibility();
        }),
        (c.Stage.prototype.preUpdate = function () {
            for (var a = (this.currentRenderOrderID = 0); a < this.children.length; ) {
                var b = this.children[a];
                b.preUpdate(), this === b.parent && a++;
            }
        }),
        (c.Stage.prototype.update = function () {
            for (var a = this.children.length; a--; ) this.children[a].update();
        }),
        (c.Stage.prototype.postUpdate = function () {
            this.game.camera.update(), this.game.camera.target && (this.game.camera.target.postUpdate(), this.updateTransform(), this.game.camera.updateTarget());
            for (var a = 0; a < this.children.length; a++) this.children[a].postUpdate();
            this.updateTransform();
        }),
        (c.Stage.prototype.updateTransform = function () {
            this.worldAlpha = 1;
            for (var a = 0; a < this.children.length; a++) this.children[a].updateTransform();
        }),
        (c.Stage.prototype.checkVisibility = function () {
            void 0 !== document.hidden
                ? (this._hiddenVar = "visibilitychange")
                : void 0 !== document.webkitHidden
                ? (this._hiddenVar = "webkitvisibilitychange")
                : void 0 !== document.mozHidden
                ? (this._hiddenVar = "mozvisibilitychange")
                : void 0 !== document.msHidden
                ? (this._hiddenVar = "msvisibilitychange")
                : (this._hiddenVar = null);
            var a = this;
            (this._onChange = function (b) {
                return a.visibilityChange(b);
            }),
                (this._onClick = function (b) {
                    document.hasFocus() || a.visibilityChange(b);
                }),
                this._hiddenVar && document.addEventListener(this._hiddenVar, this._onChange, !1),
                (window.onblur = this._onChange),
                (window.onfocus = this._onChange),
                (window.onpagehide = this._onChange),
                (window.onpageshow = this._onChange),
                window.addEventListener("click", this._onClick),
                this.game.device.cocoonJSApp &&
                    (CocoonJS.App.onSuspended.addEventListener(function () {
                        c.Stage.prototype.visibilityChange.call(a, { type: "pause" });
                    }),
                    CocoonJS.App.onActivated.addEventListener(function () {
                        c.Stage.prototype.visibilityChange.call(a, { type: "resume" });
                    }));
        }),
        (c.Stage.prototype.visibilityChange = function (a) {
            switch (a.type) {
                case "blur":
                case "pagehide":
                    return void this.game.focusLoss(a);
                case "click":
                case "focus":
                case "pageshow":
                    return void this.game.focusGain(a);
            }
            this.disableVisibilityChange || (document.hidden || document.mozHidden || document.msHidden || document.webkitHidden || "pause" === a.type ? this.game.gamePaused(a) : this.game.gameResumed(a));
        }),
        (c.Stage.prototype.setBackgroundColor = function (a) {
            this.game.transparent || (c.Color.valueToColor(a, this._bgColor), c.Color.updateColor(this._bgColor), (this._bgColor.r /= 255), (this._bgColor.g /= 255), (this._bgColor.b /= 255), (this._bgColor.a = 1));
        }),
        (c.Stage.prototype.destroy = function () {
            this._hiddenVar && document.removeEventListener(this._hiddenVar, this._onChange, !1),
                (window.onpagehide = null),
                (window.onpageshow = null),
                (window.onblur = null),
                (window.onfocus = null),
                window.removeEventListener("click", this._onClick);
        }),
        Object.defineProperty(c.Stage.prototype, "backgroundColor", {
            get: function () {
                return this._bgColor.color;
            },
            set: function (a) {
                this.setBackgroundColor(a);
            },
        }),
        Object.defineProperty(c.Stage.prototype, "smoothed", {
            get: function () {
                return PIXI.scaleModes.DEFAULT === PIXI.scaleModes.LINEAR;
            },
            set: function (a) {
                PIXI.scaleModes.DEFAULT = a ? PIXI.scaleModes.LINEAR : PIXI.scaleModes.NEAREST;
            },
        }),
        (c.Group = function (a, b, d, e, f, g) {
            void 0 === e && (e = !1),
                void 0 === f && (f = !1),
                void 0 === g && (g = c.Physics.ARCADE),
                (this.game = a),
                void 0 === b && (b = a.world),
                (this.name = d || "group"),
                (this.z = 0),
                PIXI.DisplayObjectContainer.call(this),
                e ? (this.game.stage.addChild(this), (this.z = this.game.stage.children.length)) : b && (b.addChild(this), (this.z = b.children.length)),
                (this.type = c.GROUP),
                (this.physicsType = c.GROUP),
                (this.alive = !0),
                (this.exists = !0),
                (this.ignoreDestroy = !1),
                (this.pendingDestroy = !1),
                (this.classType = c.Sprite),
                (this.cursor = null),
                (this.inputEnableChildren = !1),
                (this.onChildInputDown = new c.Signal()),
                (this.onChildInputUp = new c.Signal()),
                (this.onChildInputOver = new c.Signal()),
                (this.onChildInputOut = new c.Signal()),
                (this.enableBody = f),
                (this.enableBodyDebug = !1),
                (this.physicsBodyType = g),
                (this.physicsSortDirection = null),
                (this.onDestroy = new c.Signal()),
                (this.cursorIndex = 0),
                (this.fixedToCamera = !1),
                (this.cameraOffset = new c.Point()),
                (this.hash = []),
                (this._sortProperty = "z");
        }),
        (c.Group.prototype = Object.create(PIXI.DisplayObjectContainer.prototype)),
        (c.Group.prototype.constructor = c.Group),
        (c.Group.RETURN_NONE = 0),
        (c.Group.RETURN_TOTAL = 1),
        (c.Group.RETURN_CHILD = 2),
        (c.Group.RETURN_ALL = 3),
        (c.Group.SORT_ASCENDING = -1),
        (c.Group.SORT_DESCENDING = 1),
        (c.Group.prototype.add = function (a, b, c) {
            return (
                void 0 === b && (b = !1),
                a.parent === this ||
                    (a.body && a.parent && a.parent.hash && a.parent.removeFromHash(a),
                    void 0 === c ? ((a.z = this.children.length), this.addChild(a)) : (this.addChildAt(a, c), this.updateZ()),
                    this.enableBody && a.hasOwnProperty("body") && null === a.body ? this.game.physics.enable(a, this.physicsBodyType) : a.body && this.addToHash(a),
                    !this.inputEnableChildren || (a.input && !a.inputEnabled) || (a.inputEnabled = !0),
                    !b && a.events && a.events.onAddedToGroup$dispatch(a, this),
                    null === this.cursor && (this.cursor = a)),
                a
            );
        }),
        (c.Group.prototype.addAt = function (a, b, c) {
            this.add(a, c, b);
        }),
        (c.Group.prototype.addToHash = function (a) {
            return a.parent === this && -1 === this.hash.indexOf(a) && (this.hash.push(a), !0);
        }),
        (c.Group.prototype.removeFromHash = function (a) {
            if (a) {
                var b = this.hash.indexOf(a);
                if (-1 !== b) return this.hash.splice(b, 1), !0;
            }
            return !1;
        }),
        (c.Group.prototype.addMultiple = function (a, b) {
            if (a instanceof c.Group) a.moveAll(this, b);
            else if (Array.isArray(a)) for (var d = 0; d < a.length; d++) this.add(a[d], b);
            return a;
        }),
        (c.Group.prototype.getAt = function (a) {
            return a < 0 || a >= this.children.length ? -1 : this.getChildAt(a);
        }),
        (c.Group.prototype.create = function (a, b, c, d, e, f) {
            void 0 === e && (e = !0);
            var g = new this.classType(this.game, a, b, c, d);
            return (g.exists = e), (g.visible = e), (g.alive = e), this.add(g, !1, f);
        }),
        (c.Group.prototype.createMultiple = function (a, b, c, d) {
            void 0 === c && (c = 0), void 0 === d && (d = !1), Array.isArray(b) || (b = [b]), Array.isArray(c) || (c = [c]);
            var e = this,
                f = [];
            return (
                b.forEach(function (b) {
                    c.forEach(function (c) {
                        for (var g = 0; g < a; g++) f.push(e.create(0, 0, b, c, d));
                    });
                }),
                f
            );
        }),
        (c.Group.prototype.updateZ = function () {
            for (var a = this.children.length; a--; ) this.children[a].z = a;
        }),
        (c.Group.prototype.align = function (a, b, d, e, f, g) {
            if ((void 0 === f && (f = c.TOP_LEFT), void 0 === g && (g = 0), 0 === this.children.length || g > this.children.length || (-1 === a && -1 === b))) return !1;
            for (var h = new c.Rectangle(0, 0, d, e), i = a * d, j = b * e, k = g; k < this.children.length; k++) {
                var l = this.children[k];
                if (l.alignIn)
                    if ((l.alignIn(h, f), -1 === a)) (h.y += e), h.y === j && ((h.x += d), (h.y = 0));
                    else if (-1 === b) (h.x += d), h.x === i && ((h.x = 0), (h.y += e));
                    else if (((h.x += d), h.x === i && ((h.x = 0), (h.y += e), h.y === j))) return !0;
            }
            return !0;
        }),
        (c.Group.prototype.resetCursor = function (a) {
            if ((void 0 === a && (a = 0), a > this.children.length - 1 && (a = 0), this.cursor)) return (this.cursorIndex = a), (this.cursor = this.children[this.cursorIndex]), this.cursor;
        }),
        (c.Group.prototype.next = function () {
            if (this.cursor) return this.cursorIndex >= this.children.length - 1 ? (this.cursorIndex = 0) : this.cursorIndex++, (this.cursor = this.children[this.cursorIndex]), this.cursor;
        }),
        (c.Group.prototype.previous = function () {
            if (this.cursor) return 0 === this.cursorIndex ? (this.cursorIndex = this.children.length - 1) : this.cursorIndex--, (this.cursor = this.children[this.cursorIndex]), this.cursor;
        }),
        (c.Group.prototype.swap = function (a, b) {
            this.swapChildren(a, b), this.updateZ();
        }),
        (c.Group.prototype.bringToTop = function (a) {
            return a.parent === this && this.getIndex(a) < this.children.length && (this.remove(a, !1, !0), this.add(a, !0)), a;
        }),
        (c.Group.prototype.sendToBack = function (a) {
            return a.parent === this && 0 < this.getIndex(a) && (this.remove(a, !1, !0), this.addAt(a, 0, !0)), a;
        }),
        (c.Group.prototype.moveUp = function (a) {
            if (a.parent === this && this.getIndex(a) < this.children.length - 1) {
                var b = this.getIndex(a),
                    c = this.getAt(b + 1);
                c && this.swap(a, c);
            }
            return a;
        }),
        (c.Group.prototype.moveDown = function (a) {
            if (a.parent === this && 0 < this.getIndex(a)) {
                var b = this.getIndex(a),
                    c = this.getAt(b - 1);
                c && this.swap(a, c);
            }
            return a;
        }),
        (c.Group.prototype.xy = function (a, b, c) {
            if (a < 0 || a > this.children.length) return -1;
            (this.getChildAt(a).x = b), (this.getChildAt(a).y = c);
        }),
        (c.Group.prototype.reverse = function () {
            this.children.reverse(), this.updateZ();
        }),
        (c.Group.prototype.getIndex = function (a) {
            return this.children.indexOf(a);
        }),
        (c.Group.prototype.getByName = function (a) {
            for (var b = 0; b < this.children.length; b++) if (this.children[b].name === a) return this.children[b];
            return null;
        }),
        (c.Group.prototype.replace = function (a, b) {
            var d = this.getIndex(a);
            if (-1 !== d) return b.parent && (b.parent instanceof c.Group ? b.parent.remove(b) : b.parent.removeChild(b)), this.remove(a), this.addAt(b, d), a;
        }),
        (c.Group.prototype.hasProperty = function (a, b) {
            var c = b.length;
            return (
                (1 === c && b[0] in a) ||
                (2 === c && b[0] in a && b[1] in a[b[0]]) ||
                (3 === c && b[0] in a && b[1] in a[b[0]] && b[2] in a[b[0]][b[1]]) ||
                (4 === c && b[0] in a && b[1] in a[b[0]] && b[2] in a[b[0]][b[1]] && b[3] in a[b[0]][b[1]][b[2]])
            );
        }),
        (c.Group.prototype.setProperty = function (a, b, c, d, e) {
            if ((void 0 === e && (e = !1), (d = d || 0), !this.hasProperty(a, b) && (!e || 0 < d))) return !1;
            var f = b.length;
            return (
                1 === f
                    ? 0 === d
                        ? (a[b[0]] = c)
                        : 1 === d
                        ? (a[b[0]] += c)
                        : 2 === d
                        ? (a[b[0]] -= c)
                        : 3 === d
                        ? (a[b[0]] *= c)
                        : 4 === d && (a[b[0]] /= c)
                    : 2 === f
                    ? 0 === d
                        ? (a[b[0]][b[1]] = c)
                        : 1 === d
                        ? (a[b[0]][b[1]] += c)
                        : 2 === d
                        ? (a[b[0]][b[1]] -= c)
                        : 3 === d
                        ? (a[b[0]][b[1]] *= c)
                        : 4 === d && (a[b[0]][b[1]] /= c)
                    : 3 === f
                    ? 0 === d
                        ? (a[b[0]][b[1]][b[2]] = c)
                        : 1 === d
                        ? (a[b[0]][b[1]][b[2]] += c)
                        : 2 === d
                        ? (a[b[0]][b[1]][b[2]] -= c)
                        : 3 === d
                        ? (a[b[0]][b[1]][b[2]] *= c)
                        : 4 === d && (a[b[0]][b[1]][b[2]] /= c)
                    : 4 === f &&
                      (0 === d
                          ? (a[b[0]][b[1]][b[2]][b[3]] = c)
                          : 1 === d
                          ? (a[b[0]][b[1]][b[2]][b[3]] += c)
                          : 2 === d
                          ? (a[b[0]][b[1]][b[2]][b[3]] -= c)
                          : 3 === d
                          ? (a[b[0]][b[1]][b[2]][b[3]] *= c)
                          : 4 === d && (a[b[0]][b[1]][b[2]][b[3]] /= c)),
                !0
            );
        }),
        (c.Group.prototype.checkProperty = function (a, b, d, e) {
            return void 0 === e && (e = !1), !(!c.Utils.getProperty(a, b) && e) && c.Utils.getProperty(a, b) === d;
        }),
        (c.Group.prototype.set = function (a, b, c, d, e, f, g) {
            if ((void 0 === g && (g = !1), (b = b.split(".")), void 0 === d && (d = !1), void 0 === e && (e = !1), (!1 === d || (d && a.alive)) && (!1 === e || (e && a.visible)))) return this.setProperty(a, b, c, f, g);
        }),
        (c.Group.prototype.setAll = function (a, b, c, d, e, f) {
            void 0 === c && (c = !1), void 0 === d && (d = !1), void 0 === f && (f = !1), (a = a.split(".")), (e = e || 0);
            for (var g = 0; g < this.children.length; g++) (!c || (c && this.children[g].alive)) && (!d || (d && this.children[g].visible)) && this.setProperty(this.children[g], a, b, e, f);
        }),
        (c.Group.prototype.setAllChildren = function (a, b, d, e, f, g) {
            void 0 === d && (d = !1), void 0 === e && (e = !1), void 0 === g && (g = !1), (f = f || 0);
            for (var h = 0; h < this.children.length; h++)
                (!d || (d && this.children[h].alive)) &&
                    (!e || (e && this.children[h].visible)) &&
                    (this.children[h] instanceof c.Group ? this.children[h].setAllChildren(a, b, d, e, f, g) : this.setProperty(this.children[h], a.split("."), b, f, g));
        }),
        (c.Group.prototype.checkAll = function (a, b, c, d, e) {
            void 0 === c && (c = !1), void 0 === d && (d = !1), void 0 === e && (e = !1);
            for (var f = 0; f < this.children.length; f++) if ((!c || (c && this.children[f].alive)) && (!d || (d && this.children[f].visible)) && !this.checkProperty(this.children[f], a, b, e)) return !1;
            return !0;
        }),
        (c.Group.prototype.addAll = function (a, b, c, d) {
            this.setAll(a, b, c, d, 1);
        }),
        (c.Group.prototype.subAll = function (a, b, c, d) {
            this.setAll(a, b, c, d, 2);
        }),
        (c.Group.prototype.multiplyAll = function (a, b, c, d) {
            this.setAll(a, b, c, d, 3);
        }),
        (c.Group.prototype.divideAll = function (a, b, c, d) {
            this.setAll(a, b, c, d, 4);
        }),
        (c.Group.prototype.callAllExists = function (a, b) {
            var c;
            if (2 < arguments.length) {
                c = [];
                for (var d = 2; d < arguments.length; d++) c.push(arguments[d]);
            }
            for (d = 0; d < this.children.length; d++) this.children[d].exists === b && this.children[d][a] && this.children[d][a].apply(this.children[d], c);
        }),
        (c.Group.prototype.callbackFromArray = function (a, b, c) {
            if (1 === c) {
                if (a[b[0]]) return a[b[0]];
            } else if (2 === c) {
                if (a[b[0]][b[1]]) return a[b[0]][b[1]];
            } else if (3 === c) {
                if (a[b[0]][b[1]][b[2]]) return a[b[0]][b[1]][b[2]];
            } else if (4 === c) {
                if (a[b[0]][b[1]][b[2]][b[3]]) return a[b[0]][b[1]][b[2]][b[3]];
            } else if (a[b]) return a[b];
            return !1;
        }),
        (c.Group.prototype.callAll = function (a, b) {
            if (void 0 !== a) {
                var e,
                    c = (a = a.split(".")).length;
                if (null == b || "" === b) b = null;
                else if ("string" == typeof b) var d = (b = b.split(".")).length;
                if (2 < arguments.length) {
                    e = [];
                    for (var f = 2; f < arguments.length; f++) e.push(arguments[f]);
                }
                var g = null,
                    h = null;
                for (f = 0; f < this.children.length; f++) (g = this.callbackFromArray(this.children[f], a, c)), b && g ? ((h = this.callbackFromArray(this.children[f], b, d)), g && g.apply(h, e)) : g && g.apply(this.children[f], e);
            }
        }),
        (c.Group.prototype.preUpdate = function () {
            if (this.pendingDestroy) return this.destroy(), !1;
            if (!this.exists || !this.parent.exists) return !(this.renderOrderID = -1);
            for (var a = 0; a < this.children.length; a++) this.children[a].preUpdate();
            return !0;
        }),
        (c.Group.prototype.update = function () {
            for (var a = this.children.length; a--; ) this.children[a].update();
        }),
        (c.Group.prototype.postUpdate = function () {
            this.fixedToCamera && ((this.x = this.game.camera.view.x + this.cameraOffset.x), (this.y = this.game.camera.view.y + this.cameraOffset.y));
            for (var a = 0; a < this.children.length; a++) this.children[a].postUpdate();
        }),
        (c.Group.prototype.filter = function (a, b) {
            for (var d = -1, e = this.children.length, f = []; ++d < e; ) {
                var g = this.children[d];
                (!b || (b && g.exists)) && a(g, d, this.children) && f.push(g);
            }
            return new c.ArraySet(f);
        }),
        (c.Group.prototype.forEach = function (a, b, c) {
            if ((void 0 === c && (c = !1), arguments.length <= 3)) for (var d = 0; d < this.children.length; d++) (!c || (c && this.children[d].exists)) && a.call(b, this.children[d]);
            else {
                var e = [null];
                for (d = 3; d < arguments.length; d++) e.push(arguments[d]);
                for (d = 0; d < this.children.length; d++) (!c || (c && this.children[d].exists)) && ((e[0] = this.children[d]), a.apply(b, e));
            }
        }),
        (c.Group.prototype.forEachExists = function (a, b) {
            var d;
            if (2 < arguments.length) {
                d = [null];
                for (var e = 2; e < arguments.length; e++) d.push(arguments[e]);
            }
            this.iterate("exists", !0, c.Group.RETURN_TOTAL, a, b, d);
        }),
        (c.Group.prototype.forEachAlive = function (a, b) {
            var d;
            if (2 < arguments.length) {
                d = [null];
                for (var e = 2; e < arguments.length; e++) d.push(arguments[e]);
            }
            this.iterate("alive", !0, c.Group.RETURN_TOTAL, a, b, d);
        }),
        (c.Group.prototype.forEachDead = function (a, b) {
            var d;
            if (2 < arguments.length) {
                d = [null];
                for (var e = 2; e < arguments.length; e++) d.push(arguments[e]);
            }
            this.iterate("alive", !1, c.Group.RETURN_TOTAL, a, b, d);
        }),
        (c.Group.prototype.sort = function (a, b) {
            this.children.length < 2 ||
                (void 0 === a && (a = "z"),
                void 0 === b && (b = c.Group.SORT_ASCENDING),
                (this._sortProperty = a),
                b === c.Group.SORT_ASCENDING ? this.children.sort(this.ascendingSortHandler.bind(this)) : this.children.sort(this.descendingSortHandler.bind(this)),
                this.updateZ());
        }),
        (c.Group.prototype.customSort = function (a, b) {
            this.children.length < 2 || (this.children.sort(a.bind(b)), this.updateZ());
        }),
        (c.Group.prototype.ascendingSortHandler = function (a, b) {
            return a[this._sortProperty] < b[this._sortProperty] ? -1 : a[this._sortProperty] > b[this._sortProperty] ? 1 : a.z < b.z ? -1 : 1;
        }),
        (c.Group.prototype.descendingSortHandler = function (a, b) {
            return a[this._sortProperty] < b[this._sortProperty] ? 1 : a[this._sortProperty] > b[this._sortProperty] ? -1 : 0;
        }),
        (c.Group.prototype.iterate = function (a, b, d, e, f, g) {
            if (0 === this.children.length) {
                if (d === c.Group.RETURN_TOTAL) return 0;
                if (d === c.Group.RETURN_ALL) return [];
            }
            var h = 0;
            if (d === c.Group.RETURN_ALL) var i = [];
            for (var j = 0; j < this.children.length; j++)
                if (this.children[j][a] === b) {
                    if ((h++, e && (g ? ((g[0] = this.children[j]), e.apply(f, g)) : e.call(f, this.children[j])), d === c.Group.RETURN_CHILD)) return this.children[j];
                    d === c.Group.RETURN_ALL && i.push(this.children[j]);
                }
            return d === c.Group.RETURN_TOTAL ? h : d === c.Group.RETURN_ALL ? i : null;
        }),
        (c.Group.prototype.getFirstExists = function (a, b, d, e, f, g) {
            void 0 === b && (b = !1), "boolean" != typeof a && (a = !0);
            var h = this.iterate("exists", a, c.Group.RETURN_CHILD);
            return null === h && b ? this.create(d, e, f, g) : this.resetChild(h, d, e, f, g);
        }),
        (c.Group.prototype.getFirstAlive = function (a, b, d, e, f) {
            void 0 === a && (a = !1);
            var g = this.iterate("alive", !0, c.Group.RETURN_CHILD);
            return null === g && a ? this.create(b, d, e, f) : this.resetChild(g, b, d, e, f);
        }),
        (c.Group.prototype.getFirstDead = function (a, b, d, e, f) {
            void 0 === a && (a = !1);
            var g = this.iterate("alive", !1, c.Group.RETURN_CHILD);
            return null === g && a ? this.create(b, d, e, f) : this.resetChild(g, b, d, e, f);
        }),
        (c.Group.prototype.resetChild = function (a, b, c, d, e) {
            return null === a ? null : (void 0 === b && (b = null), void 0 === c && (c = null), null !== b && null !== c && a.reset(b, c), void 0 !== d && a.loadTexture(d, e), a);
        }),
        (c.Group.prototype.getTop = function () {
            if (0 < this.children.length) return this.children[this.children.length - 1];
        }),
        (c.Group.prototype.getBottom = function () {
            if (0 < this.children.length) return this.children[0];
        }),
        (c.Group.prototype.getClosestTo = function (a, b, d) {
            for (var e = Number.MAX_VALUE, f = 0, g = null, h = 0; h < this.children.length; h++) {
                var i = this.children[h];
                i.exists && (f = Math.abs(c.Point.distance(a, i))) < e && (!b || b.call(d, i, f)) && ((e = f), (g = i));
            }
            return g;
        }),
        (c.Group.prototype.getFurthestFrom = function (a, b, d) {
            for (var e = 0, f = 0, g = null, h = 0; h < this.children.length; h++) {
                var i = this.children[h];
                i.exists && (f = Math.abs(c.Point.distance(a, i))) > e && (!b || b.call(d, i, f)) && ((e = f), (g = i));
            }
            return g;
        }),
        (c.Group.prototype.countLiving = function () {
            return this.iterate("alive", !0, c.Group.RETURN_TOTAL);
        }),
        (c.Group.prototype.countDead = function () {
            return this.iterate("alive", !1, c.Group.RETURN_TOTAL);
        }),
        (c.Group.prototype.getRandom = function (a, b) {
            return void 0 === a && (a = 0), void 0 === b && (b = this.children.length), 0 === b ? null : c.ArrayUtils.getRandomItem(this.children, a, b);
        }),
        (c.Group.prototype.getRandomExists = function (a, b) {
            var c = this.getAll("exists", !0, a, b);
            return this.game.rnd.pick(c);
        }),
        (c.Group.prototype.getAll = function (a, b, c, d) {
            void 0 === c && (c = 0), void 0 === d && (d = this.children.length);
            for (var e = [], f = c; f < d; f++) {
                var g = this.children[f];
                a && g[a] === b && e.push(g);
            }
            return e;
        }),
        (c.Group.prototype.remove = function (a, b, c) {
            if ((void 0 === b && (b = !1), void 0 === c && (c = !1), 0 === this.children.length || -1 === this.children.indexOf(a))) return !1;
            c || !a.events || a.destroyPhase || a.events.onRemovedFromGroup$dispatch(a, this);
            var d = this.removeChild(a);
            return this.removeFromHash(a), this.updateZ(), this.cursor === a && this.next(), b && d && d.destroy(!0), !0;
        }),
        (c.Group.prototype.moveAll = function (a, b) {
            if ((void 0 === b && (b = !1), 0 < this.children.length && a instanceof c.Group)) {
                for (; a.add(this.children[0], b), 0 < this.children.length; );
                (this.hash = []), (this.cursor = null);
            }
            return a;
        }),
        (c.Group.prototype.removeAll = function (a, b, c) {
            if ((void 0 === a && (a = !1), void 0 === b && (b = !1), void 0 === c && (c = !1), 0 !== this.children.length)) {
                do {
                    !b && this.children[0].events && this.children[0].events.onRemovedFromGroup$dispatch(this.children[0], this);
                    var d = this.removeChild(this.children[0]);
                    this.removeFromHash(d), a && d && d.destroy(!0, c);
                } while (0 < this.children.length);
                (this.hash = []), (this.cursor = null);
            }
        }),
        (c.Group.prototype.removeBetween = function (a, b, c, d) {
            if ((void 0 === b && (b = this.children.length - 1), void 0 === c && (c = !1), void 0 === d && (d = !1), 0 !== this.children.length)) {
                if (b < a || a < 0 || b > this.children.length) return !1;
                for (var e = b; a <= e; ) {
                    !d && this.children[e].events && this.children[e].events.onRemovedFromGroup$dispatch(this.children[e], this);
                    var f = this.removeChild(this.children[e]);
                    this.removeFromHash(f), c && f && f.destroy(!0), this.cursor === this.children[e] && (this.cursor = null), e--;
                }
                this.updateZ();
            }
        }),
        (c.Group.prototype.destroy = function (a, b) {
            null === this.game ||
                this.ignoreDestroy ||
                (void 0 === a && (a = !0),
                void 0 === b && (b = !1),
                this.onDestroy.dispatch(this, a, b),
                this.removeAll(a),
                (this.cursor = null),
                (this.filters = null),
                (this.pendingDestroy = !1),
                b || (this.parent && this.parent.removeChild(this), (this.game = null), (this.exists = !1)));
        }),
        Object.defineProperty(c.Group.prototype, "total", {
            get: function () {
                return this.iterate("exists", !0, c.Group.RETURN_TOTAL);
            },
        }),
        Object.defineProperty(c.Group.prototype, "length", {
            get: function () {
                return this.children.length;
            },
        }),
        Object.defineProperty(c.Group.prototype, "angle", {
            get: function () {
                return c.Math.radToDeg(this.rotation);
            },
            set: function (a) {
                this.rotation = c.Math.degToRad(a);
            },
        }),
        Object.defineProperty(c.Group.prototype, "centerX", {
            get: function () {
                return this.getBounds(this.parent).centerX;
            },
            set: function (a) {
                var b = this.getBounds(this.parent),
                    c = this.x - b.x;
                this.x = a + c - b.halfWidth;
            },
        }),
        Object.defineProperty(c.Group.prototype, "centerY", {
            get: function () {
                return this.getBounds(this.parent).centerY;
            },
            set: function (a) {
                var b = this.getBounds(this.parent),
                    c = this.y - b.y;
                this.y = a + c - b.halfHeight;
            },
        }),
        Object.defineProperty(c.Group.prototype, "left", {
            get: function () {
                return this.getBounds(this.parent).left;
            },
            set: function (a) {
                var b = this.getBounds(this.parent),
                    c = this.x - b.x;
                this.x = a + c;
            },
        }),
        Object.defineProperty(c.Group.prototype, "right", {
            get: function () {
                return this.getBounds(this.parent).right;
            },
            set: function (a) {
                var b = this.getBounds(this.parent),
                    c = this.x - b.x;
                this.x = a + c - b.width;
            },
        }),
        Object.defineProperty(c.Group.prototype, "top", {
            get: function () {
                return this.getBounds(this.parent).top;
            },
            set: function (a) {
                var b = this.getBounds(this.parent),
                    c = this.y - b.y;
                this.y = a + c;
            },
        }),
        Object.defineProperty(c.Group.prototype, "bottom", {
            get: function () {
                return this.getBounds(this.parent).bottom;
            },
            set: function (a) {
                var b = this.getBounds(this.parent),
                    c = this.y - b.y;
                this.y = a + c - b.height;
            },
        }),
        (c.World = function (a) {
            c.Group.call(this, a, null, "__world", !1),
                (this.bounds = new c.Rectangle(0, 0, a.width, a.height)),
                (this.camera = null),
                (this._definedSize = !1),
                (this._width = a.width),
                (this._height = a.height),
                this.game.state.onStateChange.add(this.stateChange, this);
        }),
        (c.World.prototype = Object.create(c.Group.prototype)),
        (c.World.prototype.constructor = c.World),
        (c.World.prototype.boot = function () {
            (this.camera = new c.Camera(this.game, 0, 0, 0, this.game.width, this.game.height)), this.game.stage.addChild(this), this.camera.boot();
        }),
        (c.World.prototype.stateChange = function () {
            (this.x = 0), (this.y = 0), this.camera.reset();
        }),
        (c.World.prototype.setBounds = function (a, b, c, d) {
            (this._definedSize = !0),
                (this._width = c),
                (this._height = d),
                this.bounds.setTo(a, b, c, d),
                (this.x = a),
                (this.y = b),
                this.camera.bounds && this.camera.bounds.setTo(a, b, Math.max(c, this.game.width), Math.max(d, this.game.height)),
                this.game.physics.setBoundsToWorld();
        }),
        (c.World.prototype.resize = function (a, b) {
            this._definedSize && (a < this._width && (a = this._width), b < this._height && (b = this._height)), (this.bounds.width = a), (this.bounds.height = b), this.game.camera.setBoundsToWorld(), this.game.physics.setBoundsToWorld();
        }),
        (c.World.prototype.shutdown = function () {
            this.destroy(!0, !0);
        }),
        (c.World.prototype.wrap = function (a, b, c, d, e) {
            void 0 === b && (b = 0),
                void 0 === c && (c = !1),
                void 0 === d && (d = !0),
                void 0 === e && (e = !0),
                c
                    ? (a.getBounds(),
                      d && (a.x + a._currentBounds.width < this.bounds.x ? (a.x = this.bounds.right) : a.x > this.bounds.right && (a.x = this.bounds.left)),
                      e && (a.y + a._currentBounds.height < this.bounds.top ? (a.y = this.bounds.bottom) : a.y > this.bounds.bottom && (a.y = this.bounds.top)))
                    : (d && a.x + b < this.bounds.x ? (a.x = this.bounds.right + b) : d && a.x - b > this.bounds.right && (a.x = this.bounds.left - b),
                      e && a.y + b < this.bounds.top ? (a.y = this.bounds.bottom + b) : e && a.y - b > this.bounds.bottom && (a.y = this.bounds.top - b));
        }),
        Object.defineProperty(c.World.prototype, "width", {
            get: function () {
                return this.bounds.width;
            },
            set: function (a) {
                a < this.game.width && (a = this.game.width), (this.bounds.width = a), (this._width = a), (this._definedSize = !0);
            },
        }),
        Object.defineProperty(c.World.prototype, "height", {
            get: function () {
                return this.bounds.height;
            },
            set: function (a) {
                a < this.game.height && (a = this.game.height), (this.bounds.height = a), (this._height = a), (this._definedSize = !0);
            },
        }),
        Object.defineProperty(c.World.prototype, "centerX", {
            get: function () {
                return this.bounds.halfWidth + this.bounds.x;
            },
        }),
        Object.defineProperty(c.World.prototype, "centerY", {
            get: function () {
                return this.bounds.halfHeight + this.bounds.y;
            },
        }),
        Object.defineProperty(c.World.prototype, "randomX", {
            get: function () {
                return this.bounds.x < 0 ? this.game.rnd.between(this.bounds.x, this.bounds.width - Math.abs(this.bounds.x)) : this.game.rnd.between(this.bounds.x, this.bounds.width);
            },
        }),
        Object.defineProperty(c.World.prototype, "randomY", {
            get: function () {
                return this.bounds.y < 0 ? this.game.rnd.between(this.bounds.y, this.bounds.height - Math.abs(this.bounds.y)) : this.game.rnd.between(this.bounds.y, this.bounds.height);
            },
        }),
        (c.Game = function (a, b, d, e, f, g, h, i) {
            return (
                (this.id = c.GAMES.push(this) - 1),
                (this.config = null),
                (this.physicsConfig = i),
                (this.parent = ""),
                (this.width = 800),
                (this.height = 600),
                (this.resolution = 1),
                (this._width = 800),
                (this._height = 600),
                (this.transparent = !1),
                (this.antialias = !0),
                (this.preserveDrawingBuffer = !1),
                (this.clearBeforeRender = !0),
                (this.renderer = null),
                (this.renderType = c.AUTO),
                (this.state = null),
                (this.isBooted = !1),
                (this.isRunning = !1),
                (this.raf = null),
                (this.add = null),
                (this.make = null),
                (this.cache = null),
                (this.input = null),
                (this.load = null),
                (this.math = null),
                (this.net = null),
                (this.scale = null),
                (this.sound = null),
                (this.stage = null),
                (this.time = null),
                (this.tweens = null),
                (this.world = null),
                (this.physics = null),
                (this.plugins = null),
                (this.rnd = null),
                (this.device = c.Device),
                (this.camera = null),
                (this.canvas = null),
                (this.context = null),
                (this.debug = null),
                (this.particles = null),
                (this.create = null),
                (this.lockRender = !1),
                (this.stepping = !1),
                (this.pendingStep = !1),
                (this.stepCount = 0),
                (this.onPause = null),
                (this.onResume = null),
                (this.onBlur = null),
                (this.onFocus = null),
                (this._paused = !1),
                (this._codePaused = !1),
                (this.currentUpdateID = 0),
                (this.updatesThisFrame = 1),
                (this._deltaTime = 0),
                (this._lastCount = 0),
                (this._spiraling = 0),
                (this._kickstart = !0),
                (this.fpsProblemNotifier = new c.Signal()),
                (this.forceSingleUpdate = !0),
                (this._nextFpsNotification = 0),
                1 === arguments.length && "object" == typeof a
                    ? this.parseConfig(a)
                    : ((this.config = { enableDebug: !0 }),
                      void 0 !== a && (this._width = a),
                      void 0 !== b && (this._height = b),
                      void 0 !== d && (this.renderType = d),
                      void 0 !== e && (this.parent = e),
                      void 0 !== g && (this.transparent = g),
                      void 0 !== h && (this.antialias = h),
                      (this.rnd = new c.RandomDataGenerator([(Date.now() * Math.random()).toString()])),
                      (this.state = new c.StateManager(this, f))),
                this.device.whenReady(this.boot, this),
                this
            );
        }),
        (c.Game.prototype = {
            parseConfig: function (a) {
                void 0 === (this.config = a).enableDebug && (this.config.enableDebug = !0),
                    a.width && (this._width = a.width),
                    a.height && (this._height = a.height),
                    a.renderer && (this.renderType = a.renderer),
                    a.parent && (this.parent = a.parent),
                    void 0 !== a.transparent && (this.transparent = a.transparent),
                    void 0 !== a.antialias && (this.antialias = a.antialias),
                    a.resolution && (this.resolution = a.resolution),
                    void 0 !== a.preserveDrawingBuffer && (this.preserveDrawingBuffer = a.preserveDrawingBuffer),
                    a.physicsConfig && (this.physicsConfig = a.physicsConfig);
                var b = [(Date.now() * Math.random()).toString()];
                a.seed && (b = a.seed), (this.rnd = new c.RandomDataGenerator(b));
                var d = null;
                a.state && (d = a.state), (this.state = new c.StateManager(this, d));
            },
            boot: function () {
                this.isBooted ||
                    ((this.onPause = new c.Signal()),
                    (this.onResume = new c.Signal()),
                    (this.onBlur = new c.Signal()),
                    (this.onFocus = new c.Signal()),
                    (this.isBooted = !0),
                    ((PIXI.game = this).math = c.Math),
                    (this.scale = new c.ScaleManager(this, this._width, this._height)),
                    (this.stage = new c.Stage(this)),
                    this.setUpRenderer(),
                    (this.world = new c.World(this)),
                    (this.add = new c.GameObjectFactory(this)),
                    (this.make = new c.GameObjectCreator(this)),
                    (this.cache = new c.Cache(this)),
                    (this.load = new c.Loader(this)),
                    (this.time = new c.Time(this)),
                    (this.tweens = new c.TweenManager(this)),
                    (this.input = new c.Input(this)),
                    (this.sound = new c.SoundManager(this)),
                    (this.physics = new c.Physics(this, this.physicsConfig)),
                    (this.particles = new c.Particles(this)),
                    (this.create = new c.Create(this)),
                    (this.plugins = new c.PluginManager(this)),
                    (this.net = new c.Net(this)),
                    this.time.boot(),
                    this.stage.boot(),
                    this.world.boot(),
                    this.scale.boot(),
                    this.input.boot(),
                    this.sound.boot(),
                    this.state.boot(),
                    this.config.enableDebug ? ((this.debug = new c.Utils.Debug(this)), this.debug.boot()) : (this.debug = { preUpdate: function () {}, update: function () {}, reset: function () {} }),
                    this.showDebugHeader(),
                    (this.isRunning = !0),
                    this.config && this.config.forceSetTimeOut ? (this.raf = new c.RequestAnimationFrame(this, this.config.forceSetTimeOut)) : (this.raf = new c.RequestAnimationFrame(this, !1)),
                    (this._kickstart = !0),
                    window.focus && (!window.PhaserGlobal || (window.PhaserGlobal && !window.PhaserGlobal.stopFocus)) && window.focus(),
                    this.raf.start());
            },
            showDebugHeader: function () {
                if (!window.PhaserGlobal || !window.PhaserGlobal.hideBanner) {
                    var a = c.VERSION,
                        b = "Canvas",
                        d = "HTML Audio",
                        e = 1;
                    if ((this.renderType === c.WEBGL ? ((b = "WebGL"), e++) : this.renderType === c.HEADLESS && (b = "Headless"), this.device.webAudio && ((d = "WebAudio"), e++), this.device.chrome))
                        for (
                            var f = [
                                    "%c %c %c @azerion/phaser v" + a + " | Pixi.js | " + b + " | " + d + "  %c %c %c https://github.com/azerion / https://www.azerion.com %c%c%c",
                                    "background: #7ab3eb",
                                    "background: #378ce1",
                                    "color: #ffffff; background: #207cd8;",
                                    "background: #378ce1",
                                    "background: #7ab3eb",
                                    "background: #ffffff",
                                ],
                                g = 0;
                            g < 3;
                            g++
                        )
                            g < e ? f.push("color: #ff2424; background: #fff") : f.push("color: #959595; background: #fff");
                    else window.console;
                }
            },
            setUpRenderer: function () {
                if (
                    (this.config.canvas ? (this.canvas = this.config.canvas) : (this.canvas = c.Canvas.create(this, this.width, this.height, this.config.canvasID, !0)),
                    this.config.canvasStyle ? (this.canvas.style = this.config.canvasStyle) : (this.canvas.style["-webkit-full-screen"] = "width: 100%; height: 100%"),
                    this.renderType === c.HEADLESS || this.renderType === c.CANVAS || (this.renderType === c.AUTO && !this.device.webGL))
                ) {
                    if (!this.device.canvas) throw new Error("Phaser.Game - Cannot create Canvas or WebGL context, aborting.");
                    (this.renderType = c.CANVAS), (this.renderer = new PIXI.CanvasRenderer(this)), (this.context = this.renderer.context);
                } else
                    (this.renderType = c.WEBGL),
                        (this.renderer = new PIXI.WebGLRenderer(this)),
                        (this.context = null),
                        this.canvas.addEventListener("webglcontextlost", this.contextLost.bind(this), !1),
                        this.canvas.addEventListener("webglcontextrestored", this.contextRestored.bind(this), !1);
                this.device.cocoonJS && (this.canvas.screencanvas = this.renderType === c.CANVAS),
                    this.renderType !== c.HEADLESS && ((this.stage.smoothed = this.antialias), c.Canvas.addToDOM(this.canvas, this.parent, !1), c.Canvas.setTouchAction(this.canvas));
            },
            contextLost: function (a) {
                a.preventDefault(), (this.renderer.contextLost = !0);
            },
            contextRestored: function () {
                this.renderer.initContext(), this.cache.clearGLTextures(), (this.renderer.contextLost = !1);
            },
            update: function (a) {
                if ((this.time.update(a), this._kickstart)) return this.updateLogic(this.time.desiredFpsMult), this.updateRender(this.time.slowMotion * this.time.desiredFps), void (this._kickstart = !1);
                if (1 < this._spiraling && !this.forceSingleUpdate)
                    this.time.time > this._nextFpsNotification && ((this._nextFpsNotification = this.time.time + 1e4), this.fpsProblemNotifier.dispatch()),
                        (this._deltaTime = 0),
                        (this._spiraling = 0),
                        this.updateRender(this.time.slowMotion * this.time.desiredFps);
                else {
                    var b = (1e3 * this.time.slowMotion) / this.time.desiredFps;
                    this._deltaTime += Math.max(Math.min(3 * b, this.time.elapsed), 0);
                    var c = 0;
                    for (
                        this.updatesThisFrame = Math.floor(this._deltaTime / b), this.forceSingleUpdate && (this.updatesThisFrame = Math.min(1, this.updatesThisFrame));
                        this._deltaTime >= b && ((this._deltaTime -= b), (this.currentUpdateID = c), this.updateLogic(this.time.desiredFpsMult), c++, !this.forceSingleUpdate || 1 !== c);

                    )
                        this.time.refresh();
                    c > this._lastCount ? this._spiraling++ : c < this._lastCount && (this._spiraling = 0), (this._lastCount = c), this.updateRender(this._deltaTime / b);
                }
            },
            updateLogic: function (a) {
                this._paused || this.pendingStep
                    ? (this.scale.pauseUpdate(), this.state.pauseUpdate(), this.debug.preUpdate())
                    : (this.stepping && (this.pendingStep = !0),
                      this.scale.preUpdate(),
                      this.debug.preUpdate(),
                      this.camera.preUpdate(),
                      this.physics.preUpdate(),
                      this.state.preUpdate(a),
                      this.plugins.preUpdate(a),
                      this.stage.preUpdate(),
                      this.state.update(),
                      this.stage.update(),
                      this.tweens.update(),
                      this.sound.update(),
                      this.input.update(),
                      this.physics.update(),
                      this.particles.update(),
                      this.plugins.update(),
                      this.stage.postUpdate(),
                      this.plugins.postUpdate()),
                    this.stage.updateTransform();
            },
            updateRender: function (a) {
                this.lockRender || (this.state.preRender(a), this.renderType !== c.HEADLESS && (this.renderer.render(this.stage), this.plugins.render(a), this.state.render(a)), this.plugins.postRender(a));
            },
            enableStep: function () {
                (this.stepping = !0), (this.pendingStep = !1), (this.stepCount = 0);
            },
            disableStep: function () {
                (this.stepping = !1), (this.pendingStep = !1);
            },
            step: function () {
                (this.pendingStep = !1), this.stepCount++;
            },
            destroy: function () {
                this.raf.stop(),
                    this.state.destroy(),
                    this.sound.destroy(),
                    this.scale.destroy(),
                    this.stage.destroy(),
                    this.input.destroy(),
                    this.physics.destroy(),
                    this.plugins.destroy(),
                    (this.state = null),
                    (this.sound = null),
                    (this.scale = null),
                    (this.stage = null),
                    (this.input = null),
                    (this.physics = null),
                    (this.plugins = null),
                    (this.cache = null),
                    (this.load = null),
                    (this.time = null),
                    (this.world = null),
                    (this.isBooted = !1),
                    this.renderer.destroy(!1),
                    c.Canvas.removeFromDOM(this.canvas),
                    (PIXI.defaultRenderer = null),
                    (c.GAMES[this.id] = null);
            },
            gamePaused: function (a) {
                this._paused || ((this._paused = !0), this.time.gamePaused(), this.sound.muteOnPause && this.sound.setMute(), this.onPause.dispatch(a), this.device.cordova && this.device.iOS && (this.lockRender = !0));
            },
            gameResumed: function (a) {
                this._paused &&
                    !this._codePaused &&
                    ((this._paused = !1), this.time.gameResumed(), this.input.reset(), this.sound.muteOnPause && this.sound.unsetMute(), this.onResume.dispatch(a), this.device.cordova && this.device.iOS && (this.lockRender = !1));
            },
            focusLoss: function (a) {
                this.onBlur.dispatch(a), this.stage.disableVisibilityChange || this.gamePaused(a);
            },
            focusGain: function (a) {
                this.onFocus.dispatch(a), this.stage.disableVisibilityChange || this.gameResumed(a);
            },
        }),
        (c.Game.prototype.constructor = c.Game),
        Object.defineProperty(c.Game.prototype, "paused", {
            get: function () {
                return this._paused;
            },
            set: function (a) {
                !0 === a
                    ? (!1 === this._paused && ((this._paused = !0), this.sound.setMute(), this.time.gamePaused(), this.onPause.dispatch(this)), (this._codePaused = !0))
                    : (this._paused && ((this._paused = !1), this.input.reset(), this.sound.unsetMute(), this.time.gameResumed(), this.onResume.dispatch(this)), (this._codePaused = !1));
            },
        }),
        (c.Input = function (a) {
            (this.game = a),
                (this.hitCanvas = null),
                (this.hitContext = null),
                (this.moveCallbacks = []),
                (this.customCandidateHandler = null),
                (this.customCandidateHandlerContext = null),
                (this.pollRate = 0),
                (this.enabled = !0),
                (this.multiInputOverride = c.Input.MOUSE_TOUCH_COMBINE),
                (this.position = null),
                (this.speed = null),
                (this.circle = null),
                (this.scale = null),
                (this.maxPointers = -1),
                (this.tapRate = 200),
                (this.doubleTapRate = 300),
                (this.holdRate = 2e3),
                (this.justPressedRate = 200),
                (this.justReleasedRate = 200),
                (this.recordPointerHistory = !1),
                (this.recordRate = 100),
                (this.recordLimit = 100),
                (this.pointer1 = null),
                (this.pointer2 = null),
                (this.pointer3 = null),
                (this.pointer4 = null),
                (this.pointer5 = null),
                (this.pointer6 = null),
                (this.pointer7 = null),
                (this.pointer8 = null),
                (this.pointer9 = null),
                (this.pointer10 = null),
                (this.pointers = []),
                (this.activePointer = null),
                (this.mousePointer = null),
                (this.mouse = null),
                (this.keyboard = null),
                (this.touch = null),
                (this.mspointer = null),
                (this.gamepad = null),
                (this.resetLocked = !1),
                (this.onDown = null),
                (this.onUp = null),
                (this.onTap = null),
                (this.onHold = null),
                (this.minPriorityID = 0),
                (this.interactiveItems = new c.ArraySet()),
                (this._localPoint = new c.Point()),
                (this._pollCounter = 0),
                (this._oldPosition = null),
                (this._x = 0),
                (this._y = 0);
        }),
        (c.Input.MOUSE_OVERRIDES_TOUCH = 0),
        (c.Input.TOUCH_OVERRIDES_MOUSE = 1),
        (c.Input.MOUSE_TOUCH_COMBINE = 2),
        (c.Input.MAX_POINTERS = 10),
        (c.Input.prototype = {
            boot: function () {
                (this.mousePointer = new c.Pointer(this.game, 0, c.PointerMode.CURSOR)),
                    this.addPointer(),
                    this.addPointer(),
                    (this.mouse = new c.Mouse(this.game)),
                    (this.touch = new c.Touch(this.game)),
                    (this.mspointer = new c.MSPointer(this.game)),
                    c.Keyboard && (this.keyboard = new c.Keyboard(this.game)),
                    c.Gamepad && (this.gamepad = new c.Gamepad(this.game)),
                    (this.onDown = new c.Signal()),
                    (this.onUp = new c.Signal()),
                    (this.onTap = new c.Signal()),
                    (this.onHold = new c.Signal()),
                    (this.scale = new c.Point(1, 1)),
                    (this.speed = new c.Point()),
                    (this.position = new c.Point()),
                    (this._oldPosition = new c.Point()),
                    (this.circle = new c.Circle(0, 0, 45)),
                    (this.activePointer = this.mousePointer),
                    (this.hitCanvas = PIXI.CanvasPool.create(this, 1, 1)),
                    (this.hitContext = this.hitCanvas.getContext("2d")),
                    this.game.device.mspointer ? this.mspointer.start() : this.game.device.touch && this.touch.start(),
                    this.mspointer.active || this.mouse.start(),
                    (this.mousePointer.active = !0),
                    this.keyboard && this.keyboard.start();
                var a = this;
                (this._onClickTrampoline = function (b) {
                    a.onClickTrampoline(b);
                }),
                    this.game.canvas.addEventListener("click", this._onClickTrampoline, !1);
            },
            destroy: function () {
                this.mouse.stop(),
                    this.touch.stop(),
                    this.mspointer.stop(),
                    this.keyboard && this.keyboard.stop(),
                    this.gamepad && this.gamepad.stop(),
                    (this.moveCallbacks = []),
                    PIXI.CanvasPool.remove(this),
                    this.game.canvas.removeEventListener("click", this._onClickTrampoline);
            },
            setInteractiveCandidateHandler: function (a, b) {
                (this.customCandidateHandler = a), (this.customCandidateHandlerContext = b);
            },
            addMoveCallback: function (a, b) {
                this.moveCallbacks.push({ callback: a, context: b });
            },
            deleteMoveCallback: function (a, b) {
                for (var c = this.moveCallbacks.length; c--; ) if (this.moveCallbacks[c].callback === a && this.moveCallbacks[c].context === b) return void this.moveCallbacks.splice(c, 1);
            },
            addPointer: function () {
                if (this.pointers.length >= c.Input.MAX_POINTERS) return null;
                var a = this.pointers.length + 1,
                    b = new c.Pointer(this.game, a, c.PointerMode.TOUCH);
                return this.pointers.push(b), (this["pointer" + a] = b);
            },
            update: function () {
                if ((this.keyboard && this.keyboard.update(), 0 < this.pollRate && this._pollCounter < this.pollRate)) this._pollCounter++;
                else {
                    (this.speed.x = this.position.x - this._oldPosition.x),
                        (this.speed.y = this.position.y - this._oldPosition.y),
                        this._oldPosition.copyFrom(this.position),
                        this.mousePointer.update(),
                        this.gamepad && this.gamepad.active && this.gamepad.update();
                    for (var a = 0; a < this.pointers.length; a++) this.pointers[a].update();
                    this._pollCounter = 0;
                }
            },
            reset: function (a) {
                if (this.game.isBooted && !this.resetLocked) {
                    void 0 === a && (a = !1), this.mousePointer.reset(), this.keyboard && this.keyboard.reset(a), this.gamepad && this.gamepad.reset();
                    for (var b = 0; b < this.pointers.length; b++) this.pointers[b].reset();
                    "none" !== this.game.canvas.style.cursor && (this.game.canvas.style.cursor = "inherit"),
                        a &&
                            (this.onDown.dispose(),
                            this.onUp.dispose(),
                            this.onTap.dispose(),
                            this.onHold.dispose(),
                            (this.onDown = new c.Signal()),
                            (this.onUp = new c.Signal()),
                            (this.onTap = new c.Signal()),
                            (this.onHold = new c.Signal()),
                            (this.moveCallbacks = [])),
                        (this._pollCounter = 0);
                }
            },
            resetSpeed: function (a, b) {
                this._oldPosition.setTo(a, b), this.speed.setTo(0, 0);
            },
            startPointer: function (a) {
                if (0 <= this.maxPointers && this.countActivePointers(this.maxPointers) >= this.maxPointers) return null;
                if (!this.pointer1.active) return this.pointer1.start(a);
                if (!this.pointer2.active) return this.pointer2.start(a);
                for (var b = 2; b < this.pointers.length; b++) {
                    var c = this.pointers[b];
                    if (!c.active) return c.start(a);
                }
                return null;
            },
            updatePointer: function (a) {
                if (this.pointer1.active && this.pointer1.identifier === a.identifier) return this.pointer1.move(a);
                if (this.pointer2.active && this.pointer2.identifier === a.identifier) return this.pointer2.move(a);
                for (var b = 2; b < this.pointers.length; b++) {
                    var c = this.pointers[b];
                    if (c.active && c.identifier === a.identifier) return c.move(a);
                }
                return null;
            },
            stopPointer: function (a) {
                if (this.pointer1.active && this.pointer1.identifier === a.identifier) return this.pointer1.stop(a);
                if (this.pointer2.active && this.pointer2.identifier === a.identifier) return this.pointer2.stop(a);
                for (var b = 2; b < this.pointers.length; b++) {
                    var c = this.pointers[b];
                    if (c.active && c.identifier === a.identifier) return c.stop(a);
                }
                return null;
            },
            countActivePointers: function (a) {
                void 0 === a && (a = this.pointers.length);
                for (var b = a, c = 0; c < this.pointers.length && 0 < b; c++) this.pointers[c].active && b--;
                return a - b;
            },
            getPointer: function (a) {
                void 0 === a && (a = !1);
                for (var b = 0; b < this.pointers.length; b++) {
                    var c = this.pointers[b];
                    if (c.active === a) return c;
                }
                return null;
            },
            getPointerFromIdentifier: function (a) {
                for (var b = 0; b < this.pointers.length; b++) {
                    var c = this.pointers[b];
                    if (c.identifier === a) return c;
                }
                return null;
            },
            getPointerFromId: function (a) {
                for (var b = 0; b < this.pointers.length; b++) {
                    var c = this.pointers[b];
                    if (c.pointerId === a) return c;
                }
                return null;
            },
            getLocalPosition: function (a, b, d) {
                void 0 === d && (d = new c.Point());
                var e = a.worldTransform,
                    f = 1 / (e.a * e.d + e.c * -e.b);
                return d.setTo(e.d * f * b.x + -e.c * f * b.y + (e.ty * e.c - e.tx * e.d) * f, e.a * f * b.y + -e.b * f * b.x + (-e.ty * e.a + e.tx * e.b) * f);
            },
            hitTest: function (a, b, d) {
                if (!a.worldVisible) return !1;
                if ((this.getLocalPosition(a, b, this._localPoint), d.copyFrom(this._localPoint), a.hitArea && a.hitArea.contains)) return a.hitArea.contains(this._localPoint.x, this._localPoint.y);
                if (a instanceof c.TileSprite) {
                    var e = a.width,
                        f = a.height,
                        g = -e * a.anchor.x;
                    if (this._localPoint.x >= g && this._localPoint.x < g + e) {
                        var h = -f * a.anchor.y;
                        if (this._localPoint.y >= h && this._localPoint.y < h + f) return !0;
                    }
                } else if (a instanceof PIXI.Sprite) {
                    (e = a.texture.frame.width), (f = a.texture.frame.height), (g = -e * a.anchor.x);
                    if (this._localPoint.x >= g && this._localPoint.x < g + e) {
                        h = -f * a.anchor.y;
                        if (this._localPoint.y >= h && this._localPoint.y < h + f) return !0;
                    }
                } else if (c.Graphics && a instanceof c.Graphics)
                    for (var i = 0; i < a.graphicsData.length; i++) {
                        var j = a.graphicsData[i];
                        if (j.fill && j.shape && j.shape.contains(this._localPoint.x, this._localPoint.y)) return !0;
                    }
                for (i = 0; i < a.children.length; i++) if (this.hitTest(a.children[i], b, d)) return !0;
                return !1;
            },
            onClickTrampoline: function () {
                this.activePointer.processClickTrampolines();
            },
        }),
        (c.Input.prototype.constructor = c.Input),
        Object.defineProperty(c.Input.prototype, "x", {
            get: function () {
                return this._x;
            },
            set: function (a) {
                this._x = Math.floor(a);
            },
        }),
        Object.defineProperty(c.Input.prototype, "y", {
            get: function () {
                return this._y;
            },
            set: function (a) {
                this._y = Math.floor(a);
            },
        }),
        Object.defineProperty(c.Input.prototype, "pollLocked", {
            get: function () {
                return 0 < this.pollRate && this._pollCounter < this.pollRate;
            },
        }),
        Object.defineProperty(c.Input.prototype, "totalInactivePointers", {
            get: function () {
                return this.pointers.length - this.countActivePointers();
            },
        }),
        Object.defineProperty(c.Input.prototype, "totalActivePointers", {
            get: function () {
                return this.countActivePointers();
            },
        }),
        Object.defineProperty(c.Input.prototype, "worldX", {
            get: function () {
                return this.game.camera.view.x + this.x;
            },
        }),
        Object.defineProperty(c.Input.prototype, "worldY", {
            get: function () {
                return this.game.camera.view.y + this.y;
            },
        }),
        (c.Mouse = function (a) {
            (this.game = a),
                (this.input = a.input),
                (this.callbackContext = this.game),
                (this.mouseDownCallback = null),
                (this.mouseUpCallback = null),
                (this.mouseOutCallback = null),
                (this.mouseOverCallback = null),
                (this.mouseWheelCallback = null),
                (this.capture = !1),
                (this.button = -1),
                (this.wheelDelta = 0),
                (this.enabled = !0),
                (this.locked = !1),
                (this.stopOnGameOut = !1),
                (this.pointerLock = new c.Signal()),
                (this.event = null),
                (this._onMouseDown = null),
                (this._onMouseMove = null),
                (this._onMouseUp = null),
                (this._onMouseOut = null),
                (this._onMouseOver = null),
                (this._onMouseWheel = null),
                (this._wheelEvent = null);
        }),
        (c.Mouse.NO_BUTTON = -1),
        (c.Mouse.LEFT_BUTTON = 0),
        (c.Mouse.MIDDLE_BUTTON = 1),
        (c.Mouse.RIGHT_BUTTON = 2),
        (c.Mouse.BACK_BUTTON = 3),
        (c.Mouse.FORWARD_BUTTON = 4),
        (c.Mouse.WHEEL_UP = 1),
        (c.Mouse.WHEEL_DOWN = -1),
        (c.Mouse.prototype = {
            start: function () {
                if ((!this.game.device.android || !1 !== this.game.device.chrome) && null === this._onMouseDown) {
                    var b = this;
                    (this._onMouseDown = function (a) {
                        return b.onMouseDown(a);
                    }),
                        (this._onMouseMove = function (a) {
                            return b.onMouseMove(a);
                        }),
                        (this._onMouseUp = function (a) {
                            return b.onMouseUp(a);
                        }),
                        (this._onMouseUpGlobal = function (a) {
                            return b.onMouseUpGlobal(a);
                        }),
                        (this._onMouseOutGlobal = function (a) {
                            return b.onMouseOutGlobal(a);
                        }),
                        (this._onMouseOut = function (a) {
                            return b.onMouseOut(a);
                        }),
                        (this._onMouseOver = function (a) {
                            return b.onMouseOver(a);
                        }),
                        (this._onMouseWheel = function (a) {
                            return b.onMouseWheel(a);
                        });
                    var c = this.game.canvas;
                    c.addEventListener("mousedown", this._onMouseDown, !0),
                        c.addEventListener("mousemove", this._onMouseMove, !0),
                        c.addEventListener("mouseup", this._onMouseUp, !0),
                        this.game.device.cocoonJS ||
                            (window.addEventListener("mouseup", this._onMouseUpGlobal, !0),
                            window.addEventListener("mouseout", this._onMouseOutGlobal, !0),
                            c.addEventListener("mouseover", this._onMouseOver, !0),
                            c.addEventListener("mouseout", this._onMouseOut, !0));
                    var d = this.game.device.wheelEvent;
                    d && (c.addEventListener(d, this._onMouseWheel, !0), "mousewheel" === d ? (this._wheelEvent = new a(-0.025, 1)) : "DOMMouseScroll" === d && (this._wheelEvent = new a(1, 1)));
                }
            },
            onMouseDown: function (a) {
                (this.event = a),
                    this.capture && a.preventDefault(),
                    this.mouseDownCallback && this.mouseDownCallback.call(this.callbackContext, a),
                    this.input.enabled && this.enabled && ((a.identifier = 0), this.input.mousePointer.start(a));
            },
            onMouseMove: function (a) {
                (this.event = a),
                    this.capture && a.preventDefault(),
                    this.mouseMoveCallback && this.mouseMoveCallback.call(this.callbackContext, a),
                    this.input.enabled && this.enabled && ((a.identifier = 0), this.input.mousePointer.move(a));
            },
            onMouseUp: function (a) {
                (this.event = a), this.capture && a.preventDefault(), this.mouseUpCallback && this.mouseUpCallback.call(this.callbackContext, a), this.input.enabled && this.enabled && ((a.identifier = 0), this.input.mousePointer.stop(a));
            },
            onMouseUpGlobal: function (a) {
                this.input.mousePointer.withinGame || (this.mouseUpCallback && this.mouseUpCallback.call(this.callbackContext, a), (a.identifier = 0), this.input.mousePointer.stop(a));
            },
            onMouseOutGlobal: function (a) {
                (this.event = a),
                    this.capture && a.preventDefault(),
                    (this.input.mousePointer.withinGame = !1),
                    this.input.enabled && this.enabled && (this.input.mousePointer.stop(a), this.input.mousePointer.leftButton.stop(a), this.input.mousePointer.rightButton.stop(a));
            },
            onMouseOut: function (a) {
                (this.event = a),
                    this.capture && a.preventDefault(),
                    (this.input.mousePointer.withinGame = !1),
                    this.mouseOutCallback && this.mouseOutCallback.call(this.callbackContext, a),
                    this.input.enabled && this.enabled && this.stopOnGameOut && ((a.identifier = 0), this.input.mousePointer.stop(a));
            },
            onMouseOver: function (a) {
                (this.event = a), this.capture && a.preventDefault(), (this.input.mousePointer.withinGame = !0), this.mouseOverCallback && this.mouseOverCallback.call(this.callbackContext, a);
            },
            onMouseWheel: function (a) {
                this._wheelEvent && (a = this._wheelEvent.bindEvent(a)),
                    (this.event = a),
                    this.capture && a.preventDefault(),
                    (this.wheelDelta = c.Math.clamp(-a.deltaY, -1, 1)),
                    this.mouseWheelCallback && this.mouseWheelCallback.call(this.callbackContext, a);
            },
            requestPointerLock: function () {
                if (this.game.device.pointerLock) {
                    var a = this.game.canvas;
                    (a.requestPointerLock = a.requestPointerLock || a.mozRequestPointerLock || a.webkitRequestPointerLock), a.requestPointerLock();
                    var b = this;
                    (this._pointerLockChange = function (a) {
                        return b.pointerLockChange(a);
                    }),
                        document.addEventListener("pointerlockchange", this._pointerLockChange, !0),
                        document.addEventListener("mozpointerlockchange", this._pointerLockChange, !0),
                        document.addEventListener("webkitpointerlockchange", this._pointerLockChange, !0);
                }
            },
            pointerLockChange: function (a) {
                var b = this.game.canvas;
                document.pointerLockElement === b || document.mozPointerLockElement === b || document.webkitPointerLockElement === b
                    ? ((this.locked = !0), this.pointerLock.dispatch(!0, a))
                    : ((this.locked = !1), this.pointerLock.dispatch(!1, a));
            },
            releasePointerLock: function () {
                (document.exitPointerLock = document.exitPointerLock || document.mozExitPointerLock || document.webkitExitPointerLock),
                    document.exitPointerLock(),
                    document.removeEventListener("pointerlockchange", this._pointerLockChange, !0),
                    document.removeEventListener("mozpointerlockchange", this._pointerLockChange, !0),
                    document.removeEventListener("webkitpointerlockchange", this._pointerLockChange, !0);
            },
            stop: function () {
                var a = this.game.canvas;
                a.removeEventListener("mousedown", this._onMouseDown, !0),
                    a.removeEventListener("mousemove", this._onMouseMove, !0),
                    a.removeEventListener("mouseup", this._onMouseUp, !0),
                    a.removeEventListener("mouseover", this._onMouseOver, !0),
                    a.removeEventListener("mouseout", this._onMouseOut, !0);
                var b = this.game.device.wheelEvent;
                b && a.removeEventListener(b, this._onMouseWheel, !0),
                    window.removeEventListener("mouseup", this._onMouseUpGlobal, !0),
                    window.removeEventListener("mouseout", this._onMouseOutGlobal, !0),
                    document.removeEventListener("pointerlockchange", this._pointerLockChange, !0),
                    document.removeEventListener("mozpointerlockchange", this._pointerLockChange, !0),
                    document.removeEventListener("webkitpointerlockchange", this._pointerLockChange, !0);
            },
        }),
        (c.Mouse.prototype.constructor = c.Mouse),
        (((a.prototype = {}).constructor = a).prototype.bindEvent = function (b) {
            if (!a._stubsGenerated && b) {
                var c = function (a) {
                    return function () {
                        var b = this.originalEvent[a];
                        return "function" != typeof b ? b : b.bind(this.originalEvent);
                    };
                };
                for (var d in b) d in a.prototype || Object.defineProperty(a.prototype, d, { get: c(d) });
                a._stubsGenerated = !0;
            }
            return (this.originalEvent = b), this;
        }),
        Object.defineProperties(a.prototype, {
            type: { value: "wheel" },
            deltaMode: {
                get: function () {
                    return this._deltaMode;
                },
            },
            deltaY: {
                get: function () {
                    return this._scaleFactor * (this.originalEvent.wheelDelta || this.originalEvent.detail) || 0;
                },
            },
            deltaX: {
                get: function () {
                    return this._scaleFactor * this.originalEvent.wheelDeltaX || 0;
                },
            },
            deltaZ: { value: 0 },
        }),
        (c.MSPointer = function (a) {
            (this.game = a),
                (this.input = a.input),
                (this.callbackContext = this.game),
                (this.pointerDownCallback = null),
                (this.pointerMoveCallback = null),
                (this.pointerUpCallback = null),
                (this.capture = !1),
                (this.event = null),
                (this.active = !1),
                (this.enabled = !0),
                (this._onMSPointerDown = null),
                (this._onMSPointerMove = null),
                (this._onMSPointerUp = null),
                (this._onMSPointerUpGlobal = null),
                (this._onMSPointerOut = null),
                (this._onMSPointerOver = null);
        }),
        (c.MSPointer.prototype = {
            start: function () {
                if (!this.game.device.mspointer) return !1;
                if (null !== this._onMSPointerDown) return !1;
                var a = this;
                (this._onMSPointerDown = function (b) {
                    return a.onPointerDown(b);
                }),
                    (this._onMSPointerMove = function (b) {
                        return a.onPointerMove(b);
                    }),
                    (this._onMSPointerUp = function (b) {
                        return a.onPointerUp(b);
                    }),
                    (this._onMSPointerUpGlobal = function (b) {
                        return a.onPointerUpGlobal(b);
                    }),
                    (this._onMSPointerOut = function (b) {
                        return a.onPointerOut(b);
                    }),
                    (this._onMSPointerOver = function (b) {
                        return a.onPointerOver(b);
                    });
                var b = this.game.canvas;
                return (
                    b.addEventListener("MSPointerDown", this._onMSPointerDown, !1),
                    b.addEventListener("MSPointerMove", this._onMSPointerMove, !1),
                    b.addEventListener("MSPointerUp", this._onMSPointerUp, !1),
                    b.addEventListener("pointerdown", this._onMSPointerDown, !1),
                    b.addEventListener("pointermove", this._onMSPointerMove, !1),
                    b.addEventListener("pointerup", this._onMSPointerUp, !1),
                    (b.style["-ms-content-zooming"] = "none"),
                    (b.style["-ms-touch-action"] = "none"),
                    this.game.device.cocoonJS ||
                        (window.addEventListener("MSPointerUp", this._onMSPointerUpGlobal, !0),
                        b.addEventListener("MSPointerOver", this._onMSPointerOver, !0),
                        b.addEventListener("MSPointerOut", this._onMSPointerOut, !0),
                        window.addEventListener("pointerup", this._onMSPointerUpGlobal, !0),
                        b.addEventListener("pointerover", this._onMSPointerOver, !0),
                        b.addEventListener("pointerout", this._onMSPointerOut, !0)),
                    (this.active = !0)
                );
            },
            onPointerDown: function (a) {
                (this.event = a),
                    this.capture && a.preventDefault(),
                    this.pointerDownCallback && this.pointerDownCallback.call(this.callbackContext, a),
                    this.input.enabled && this.enabled && ((a.identifier = a.pointerId), "mouse" === a.pointerType || 4 === a.pointerType ? this.input.mousePointer.start(a) : this.input.startPointer(a));
            },
            onPointerMove: function (a) {
                (this.event = a),
                    this.capture && a.preventDefault(),
                    this.pointerMoveCallback && this.pointerMoveCallback.call(this.callbackContext, a),
                    this.input.enabled && this.enabled && ((a.identifier = a.pointerId), "mouse" === a.pointerType || 4 === a.pointerType ? this.input.mousePointer.move(a) : this.input.updatePointer(a));
            },
            onPointerUp: function (a) {
                (this.event = a),
                    this.capture && a.preventDefault(),
                    this.pointerUpCallback && this.pointerUpCallback.call(this.callbackContext, a),
                    this.input.enabled && this.enabled && ((a.identifier = a.pointerId), "mouse" === a.pointerType || 4 === a.pointerType ? this.input.mousePointer.stop(a) : this.input.stopPointer(a));
            },
            onPointerUpGlobal: function (a) {
                if (("mouse" !== a.pointerType && 4 !== a.pointerType) || this.input.mousePointer.withinGame) {
                    var b = this.input.getPointerFromIdentifier(a.identifier);
                    b && b.withinGame && this.onPointerUp(a);
                } else this.onPointerUp(a);
            },
            onPointerOut: function (a) {
                if (((this.event = a), this.capture && a.preventDefault(), "mouse" === a.pointerType || 4 === a.pointerType)) this.input.mousePointer.withinGame = !1;
                else {
                    var b = this.input.getPointerFromIdentifier(a.identifier);
                    b && (b.withinGame = !1);
                }
                this.input.mouse.mouseOutCallback && this.input.mouse.mouseOutCallback.call(this.input.mouse.callbackContext, a),
                    this.input.enabled && this.enabled && this.input.mouse.stopOnGameOut && ((a.identifier = 0), b ? b.stop(a) : this.input.mousePointer.stop(a));
            },
            onPointerOver: function (a) {
                if (((this.event = a), this.capture && a.preventDefault(), "mouse" === a.pointerType || 4 === a.pointerType)) this.input.mousePointer.withinGame = !0;
                else {
                    var b = this.input.getPointerFromIdentifier(a.identifier);
                    b && (b.withinGame = !0);
                }
                this.input.mouse.mouseOverCallback && this.input.mouse.mouseOverCallback.call(this.input.mouse.callbackContext, a);
            },
            stop: function () {
                var a = this.game.canvas;
                a.removeEventListener("MSPointerDown", this._onMSPointerDown, !1),
                    a.removeEventListener("MSPointerMove", this._onMSPointerMove, !1),
                    a.removeEventListener("MSPointerUp", this._onMSPointerUp, !1),
                    a.removeEventListener("pointerdown", this._onMSPointerDown, !1),
                    a.removeEventListener("pointermove", this._onMSPointerMove, !1),
                    a.removeEventListener("pointerup", this._onMSPointerUp, !1),
                    window.removeEventListener("MSPointerUp", this._onMSPointerUpGlobal, !0),
                    a.removeEventListener("MSPointerOver", this._onMSPointerOver, !0),
                    a.removeEventListener("MSPointerOut", this._onMSPointerOut, !0),
                    window.removeEventListener("pointerup", this._onMSPointerUpGlobal, !0),
                    a.removeEventListener("pointerover", this._onMSPointerOver, !0),
                    a.removeEventListener("pointerout", this._onMSPointerOut, !0),
                    (this.active = !1);
            },
        }),
        (c.MSPointer.prototype.constructor = c.MSPointer),
        (c.DeviceButton = function (a, b) {
            (this.parent = a),
                (this.game = a.game),
                (this.event = null),
                (this.isDown = !1),
                (this.isUp = !0),
                (this.timeDown = 0),
                (this.timeUp = 0),
                (this.repeats = 0),
                (this.altKey = !1),
                (this.shiftKey = !1),
                (this.ctrlKey = !1),
                (this.value = 0),
                (this.buttonCode = b),
                (this.onDown = new c.Signal()),
                (this.onUp = new c.Signal()),
                (this.onFloat = new c.Signal());
        }),
        (c.DeviceButton.prototype = {
            start: function (a, b) {
                this.isDown ||
                    ((this.isDown = !0),
                    (this.isUp = !1),
                    (this.timeDown = this.game.time.time),
                    (this.repeats = 0),
                    (this.event = a),
                    (this.value = b),
                    a && ((this.altKey = a.altKey), (this.shiftKey = a.shiftKey), (this.ctrlKey = a.ctrlKey)),
                    this.onDown.dispatch(this, b));
            },
            stop: function (a, b) {
                this.isUp ||
                    ((this.isDown = !1),
                    (this.isUp = !0),
                    (this.timeUp = this.game.time.time),
                    (this.event = a),
                    (this.value = b),
                    a && ((this.altKey = a.altKey), (this.shiftKey = a.shiftKey), (this.ctrlKey = a.ctrlKey)),
                    this.onUp.dispatch(this, b));
            },
            padFloat: function (a) {
                (this.value = a), this.onFloat.dispatch(this, a);
            },
            justPressed: function (a) {
                return (a = a || 250), this.isDown && this.timeDown + a > this.game.time.time;
            },
            justReleased: function (a) {
                return (a = a || 250), this.isUp && this.timeUp + a > this.game.time.time;
            },
            reset: function () {
                (this.isDown = !1), (this.isUp = !0), (this.timeDown = this.game.time.time), (this.repeats = 0), (this.altKey = !1), (this.shiftKey = !1), (this.ctrlKey = !1);
            },
            destroy: function () {
                this.onDown.dispose(), this.onUp.dispose(), this.onFloat.dispose(), (this.parent = null), (this.game = null);
            },
        }),
        (c.DeviceButton.prototype.constructor = c.DeviceButton),
        Object.defineProperty(c.DeviceButton.prototype, "duration", {
            get: function () {
                return this.isUp ? -1 : this.game.time.time - this.timeDown;
            },
        }),
        (c.Pointer = function (a, b, d) {
            (this.game = a),
                (this.id = b),
                (this.type = c.POINTER),
                (this.exists = !0),
                (this.identifier = 0),
                (this.pointerId = null),
                (this.pointerMode = d || c.PointerMode.CURSOR | c.PointerMode.CONTACT),
                (this.target = null),
                (this.button = null),
                (this.leftButton = new c.DeviceButton(this, c.Pointer.LEFT_BUTTON)),
                (this.middleButton = new c.DeviceButton(this, c.Pointer.MIDDLE_BUTTON)),
                (this.rightButton = new c.DeviceButton(this, c.Pointer.RIGHT_BUTTON)),
                (this.backButton = new c.DeviceButton(this, c.Pointer.BACK_BUTTON)),
                (this.forwardButton = new c.DeviceButton(this, c.Pointer.FORWARD_BUTTON)),
                (this.eraserButton = new c.DeviceButton(this, c.Pointer.ERASER_BUTTON)),
                (this._holdSent = !1),
                (this._history = []),
                (this._nextDrop = 0),
                (this._stateReset = !1),
                (this.withinGame = !1),
                (this.clientX = -1),
                (this.clientY = -1),
                (this.pageX = -1),
                (this.pageY = -1),
                (this.screenX = -1),
                (this.screenY = -1),
                (this.rawMovementX = 0),
                (this.rawMovementY = 0),
                (this.movementX = 0),
                (this.movementY = 0),
                (this.x = -1),
                (this.y = -1),
                (this.isMouse = 0 === b),
                (this.isDown = !1),
                (this.isUp = !0),
                (this.timeDown = 0),
                (this.timeUp = 0),
                (this.previousTapTime = 0),
                (this.totalTouches = 0),
                (this.msSinceLastClick = Number.MAX_VALUE),
                (this.targetObject = null),
                (this.interactiveCandidates = []),
                (this.active = !1),
                (this.dirty = !1),
                (this.position = new c.Point()),
                (this.positionDown = new c.Point()),
                (this.positionUp = new c.Point()),
                (this.circle = new c.Circle(0, 0, 44)),
                (this._clickTrampolines = null),
                (this._trampolineTargetObject = null);
        }),
        (c.Pointer.NO_BUTTON = 0),
        (c.Pointer.LEFT_BUTTON = 1),
        (c.Pointer.RIGHT_BUTTON = 2),
        (c.Pointer.MIDDLE_BUTTON = 4),
        (c.Pointer.BACK_BUTTON = 8),
        (c.Pointer.FORWARD_BUTTON = 16),
        (c.Pointer.ERASER_BUTTON = 32),
        (c.Pointer.prototype = {
            resetButtons: function () {
                (this.isDown = !1), (this.isUp = !0), this.isMouse && (this.leftButton.reset(), this.middleButton.reset(), this.rightButton.reset(), this.backButton.reset(), this.forwardButton.reset(), this.eraserButton.reset());
            },
            processButtonsDown: function (a, b) {
                c.Pointer.LEFT_BUTTON & a && this.leftButton.start(b),
                    c.Pointer.RIGHT_BUTTON & a && this.rightButton.start(b),
                    c.Pointer.MIDDLE_BUTTON & a && this.middleButton.start(b),
                    c.Pointer.BACK_BUTTON & a && this.backButton.start(b),
                    c.Pointer.FORWARD_BUTTON & a && this.forwardButton.start(b),
                    c.Pointer.ERASER_BUTTON & a && this.eraserButton.start(b);
            },
            processButtonsUp: function (a, b) {
                a === c.Mouse.LEFT_BUTTON && this.leftButton.stop(b),
                    a === c.Mouse.RIGHT_BUTTON && this.rightButton.stop(b),
                    a === c.Mouse.MIDDLE_BUTTON && this.middleButton.stop(b),
                    a === c.Mouse.BACK_BUTTON && this.backButton.stop(b),
                    a === c.Mouse.FORWARD_BUTTON && this.forwardButton.stop(b),
                    5 === a && this.eraserButton.stop(b);
            },
            updateButtons: function (a) {
                this.button = a.button;
                var b = "down" === a.type.toLowerCase().substr(-4);
                void 0 !== a.buttons ? (b ? this.processButtonsDown(a.buttons, a) : this.processButtonsUp(a.button, a)) : b ? this.leftButton.start(a) : (this.leftButton.stop(a), this.rightButton.stop(a)),
                    1 === a.buttons && a.ctrlKey && this.leftButton.isDown && (this.leftButton.stop(a), this.rightButton.start(a)),
                    (this.isUp = !0),
                    (this.isDown = !1),
                    (this.leftButton.isDown || this.rightButton.isDown || this.middleButton.isDown || this.backButton.isDown || this.forwardButton.isDown || this.eraserButton.isDown) && ((this.isUp = !1), (this.isDown = !0));
            },
            start: function (a) {
                var b = this.game.input;
                return (
                    a.pointerId && (this.pointerId = a.pointerId),
                    (this.identifier = a.identifier),
                    (this.target = a.target),
                    this.isMouse ? this.updateButtons(a) : ((this.isDown = !0), (this.isUp = !1)),
                    (this.active = !0),
                    (this.withinGame = !0),
                    (this.dirty = !1),
                    (this._history = []),
                    (this._clickTrampolines = null),
                    (this._trampolineTargetObject = null),
                    (this.msSinceLastClick = this.game.time.time - this.timeDown),
                    (this.timeDown = this.game.time.time),
                    (this._holdSent = !1),
                    this.move(a, !0),
                    this.positionDown.setTo(this.x, this.y),
                    (b.multiInputOverride === c.Input.MOUSE_OVERRIDES_TOUCH || b.multiInputOverride === c.Input.MOUSE_TOUCH_COMBINE || (b.multiInputOverride === c.Input.TOUCH_OVERRIDES_MOUSE && 0 === b.totalActivePointers)) &&
                        ((b.x = this.x), (b.y = this.y), b.position.setTo(this.x, this.y), b.onDown.dispatch(this, a), b.resetSpeed(this.x, this.y)),
                    (this._stateReset = !1),
                    this.totalTouches++,
                    null !== this.targetObject && this.targetObject._touchedHandler(this),
                    this
                );
            },
            update: function () {
                var a = this.game.input;
                this.active &&
                    (this.dirty && (0 < a.interactiveItems.total && this.processInteractiveObjects(!1), (this.dirty = !1)),
                    !1 === this._holdSent &&
                        this.duration >= a.holdRate &&
                        ((a.multiInputOverride === c.Input.MOUSE_OVERRIDES_TOUCH || a.multiInputOverride === c.Input.MOUSE_TOUCH_COMBINE || (a.multiInputOverride === c.Input.TOUCH_OVERRIDES_MOUSE && 0 === a.totalActivePointers)) &&
                            a.onHold.dispatch(this),
                        (this._holdSent = !0)),
                    a.recordPointerHistory &&
                        this.game.time.time >= this._nextDrop &&
                        ((this._nextDrop = this.game.time.time + a.recordRate), this._history.push({ x: this.position.x, y: this.position.y }), this._history.length > a.recordLimit && this._history.shift()));
            },
            move: function (a, b) {
                var d = this.game.input;
                if (!d.pollLocked) {
                    void 0 === b && (b = !1),
                        void 0 !== a.button && (this.button = a.button),
                        b && this.isMouse && this.updateButtons(a),
                        (this.clientX = a.clientX),
                        (this.clientY = a.clientY),
                        (this.pageX = a.pageX),
                        (this.pageY = a.pageY),
                        (this.screenX = a.screenX),
                        (this.screenY = a.screenY),
                        this.isMouse &&
                            d.mouse.locked &&
                            !b &&
                            ((this.rawMovementX = a.movementX || a.mozMovementX || a.webkitMovementX || 0),
                            (this.rawMovementY = a.movementY || a.mozMovementY || a.webkitMovementY || 0),
                            (this.movementX += this.rawMovementX),
                            (this.movementY += this.rawMovementY)),
                        (this.x = (this.pageX - this.game.scale.offset.x) * d.scale.x),
                        (this.y = (this.pageY - this.game.scale.offset.y) * d.scale.y),
                        this.position.setTo(this.x, this.y),
                        (this.circle.x = this.x),
                        (this.circle.y = this.y),
                        (d.multiInputOverride === c.Input.MOUSE_OVERRIDES_TOUCH || d.multiInputOverride === c.Input.MOUSE_TOUCH_COMBINE || (d.multiInputOverride === c.Input.TOUCH_OVERRIDES_MOUSE && 0 === d.totalActivePointers)) &&
                            ((d.activePointer = this), (d.x = this.x), (d.y = this.y), d.position.setTo(d.x, d.y), (d.circle.x = d.x), (d.circle.y = d.y)),
                        (this.withinGame = this.game.scale.bounds.contains(this.pageX, this.pageY));
                    for (var e = d.moveCallbacks.length; e--; ) d.moveCallbacks[e].callback.call(d.moveCallbacks[e].context, this, this.x, this.y, b);
                    return null !== this.targetObject && !0 === this.targetObject.isDragged ? !1 === this.targetObject.update(this) && (this.targetObject = null) : 0 < d.interactiveItems.total && this.processInteractiveObjects(b), this;
                }
            },
            processInteractiveObjects: function (a) {
                var b = 0,
                    c = -1,
                    d = null,
                    e = this.game.input.interactiveItems.first;
                for (this.interactiveCandidates = []; e; )
                    (e.checked = !1),
                        e.validForInput(c, b, !1) &&
                            ((e.checked = !0), ((a && e.checkPointerDown(this, !0)) || (!a && e.checkPointerOver(this, !0))) && ((b = e.sprite.renderOrderID), (c = e.priorityID), (d = e), this.interactiveCandidates.push(e))),
                        (e = this.game.input.interactiveItems.next);
                for (e = this.game.input.interactiveItems.first; e; )
                    !e.checked && e.validForInput(c, b, !0) && ((a && e.checkPointerDown(this, !1)) || (!a && e.checkPointerOver(this, !1))) && ((b = e.sprite.renderOrderID), (c = e.priorityID), (d = e), this.interactiveCandidates.push(e)),
                        (e = this.game.input.interactiveItems.next);
                return (
                    this.game.input.customCandidateHandler && (d = this.game.input.customCandidateHandler.call(this.game.input.customCandidateHandlerContext, this, this.interactiveCandidates, d)),
                    this.swapTarget(d, !1),
                    null !== this.targetObject
                );
            },
            swapTarget: function (a, b) {
                void 0 === b && (b = !1),
                    null === a
                        ? this.targetObject && (this.targetObject._pointerOutHandler(this, b), (this.targetObject = null))
                        : null === this.targetObject
                        ? (this.targetObject = a)._pointerOverHandler(this, b)
                        : this.targetObject === a
                        ? !1 === a.update(this) && (this.targetObject = null)
                        : (this.targetObject._pointerOutHandler(this, b), (this.targetObject = a), this.targetObject._pointerOverHandler(this, b));
            },
            leave: function (a) {
                (this.withinGame = !1), this.move(a, !1);
            },
            stop: function (a) {
                var b = this.game.input;
                return this._stateReset && this.withinGame
                    ? void a.preventDefault()
                    : ((this.timeUp = this.game.time.time),
                      (b.multiInputOverride === c.Input.MOUSE_OVERRIDES_TOUCH || b.multiInputOverride === c.Input.MOUSE_TOUCH_COMBINE || (b.multiInputOverride === c.Input.TOUCH_OVERRIDES_MOUSE && 0 === b.totalActivePointers)) &&
                          (b.onUp.dispatch(this, a),
                          0 <= this.duration && this.duration <= b.tapRate && (this.timeUp - this.previousTapTime < b.doubleTapRate ? b.onTap.dispatch(this, !0) : b.onTap.dispatch(this, !1), (this.previousTapTime = this.timeUp))),
                      this.isMouse ? this.updateButtons(a) : ((this.isDown = !1), (this.isUp = !0)),
                      0 < this.id && (this.active = !1),
                      (this.withinGame = this.game.scale.bounds.contains(a.pageX, a.pageY)),
                      (this.pointerId = null),
                      (this.identifier = null),
                      this.positionUp.setTo(this.x, this.y),
                      !1 === this.isMouse && b.currentPointers--,
                      b.interactiveItems.callAll("_releasedHandler", this),
                      this._clickTrampolines && (this._trampolineTargetObject = this.targetObject),
                      (this.targetObject = null),
                      this);
            },
            justPressed: function (a) {
                return (a = a || this.game.input.justPressedRate), !0 === this.isDown && this.timeDown + a > this.game.time.time;
            },
            justReleased: function (a) {
                return (a = a || this.game.input.justReleasedRate), this.isUp && this.timeUp + a > this.game.time.time;
            },
            addClickTrampoline: function (a, b, c, d) {
                if (this.isDown) {
                    for (var e = (this._clickTrampolines = this._clickTrampolines || []), f = 0; f < e.length; f++)
                        if (e[f].name === a) {
                            e.splice(f, 1);
                            break;
                        }
                    e.push({ name: a, targetObject: this.targetObject, callback: b, callbackContext: c, callbackArgs: d });
                }
            },
            processClickTrampolines: function () {
                var a = this._clickTrampolines;
                if (a) {
                    for (var b = 0; b < a.length; b++) {
                        var c = a[b];
                        c.targetObject === this._trampolineTargetObject && c.callback.apply(c.callbackContext, c.callbackArgs);
                    }
                    (this._clickTrampolines = null), (this._trampolineTargetObject = null);
                }
            },
            reset: function () {
                !1 === this.isMouse && (this.active = !1),
                    (this.pointerId = null),
                    (this.identifier = null),
                    (this.dirty = !1),
                    (this.totalTouches = 0),
                    (this._holdSent = !1),
                    (this._history.length = 0),
                    (this._stateReset = !0),
                    this.resetButtons(),
                    this.targetObject && this.targetObject._releasedHandler(this),
                    (this.targetObject = null);
            },
            resetMovement: function () {
                (this.movementX = 0), (this.movementY = 0);
            },
        }),
        (c.Pointer.prototype.constructor = c.Pointer),
        Object.defineProperty(c.Pointer.prototype, "duration", {
            get: function () {
                return this.isUp ? -1 : this.game.time.time - this.timeDown;
            },
        }),
        Object.defineProperty(c.Pointer.prototype, "worldX", {
            get: function () {
                return this.game.world.camera.x + this.x;
            },
        }),
        Object.defineProperty(c.Pointer.prototype, "worldY", {
            get: function () {
                return this.game.world.camera.y + this.y;
            },
        }),
        (c.PointerMode = { CURSOR: 1, CONTACT: 2 }),
        (c.Touch = function (a) {
            (this.game = a),
                (this.enabled = !0),
                (this.touchLockCallbacks = []),
                (this.callbackContext = this.game),
                (this.touchStartCallback = null),
                (this.touchMoveCallback = null),
                (this.touchEndCallback = null),
                (this.touchEnterCallback = null),
                (this.touchLeaveCallback = null),
                (this.touchCancelCallback = null),
                (this.preventDefault = !0),
                (this.event = null),
                (this._onTouchStart = null),
                (this._onTouchMove = null),
                (this._onTouchEnd = null),
                (this._onTouchEnter = null),
                (this._onTouchLeave = null),
                (this._onTouchCancel = null),
                (this._onTouchMove = null);
        }),
        (c.Touch.prototype = {
            start: function () {
                if (null === this._onTouchStart) {
                    var a = this;
                    this.game.device.touch &&
                        ((this._onTouchStart = function (b) {
                            return a.onTouchStart(b);
                        }),
                        (this._onTouchMove = function (b) {
                            return a.onTouchMove(b);
                        }),
                        (this._onTouchEnd = function (b) {
                            return a.onTouchEnd(b);
                        }),
                        (this._onTouchEnter = function (b) {
                            return a.onTouchEnter(b);
                        }),
                        (this._onTouchLeave = function (b) {
                            return a.onTouchLeave(b);
                        }),
                        (this._onTouchCancel = function (b) {
                            return a.onTouchCancel(b);
                        }),
                        this.game.canvas.addEventListener("touchstart", this._onTouchStart, !1),
                        this.game.canvas.addEventListener("touchmove", this._onTouchMove, !1),
                        this.game.canvas.addEventListener("touchend", this._onTouchEnd, !1),
                        this.game.canvas.addEventListener("touchcancel", this._onTouchCancel, !1),
                        this.game.device.cocoonJS || (this.game.canvas.addEventListener("touchenter", this._onTouchEnter, !1), this.game.canvas.addEventListener("touchleave", this._onTouchLeave, !1)));
                }
            },
            consumeDocumentTouches: function () {
                (this._documentTouchMove = function (a) {
                    a.preventDefault();
                }),
                    document.addEventListener("touchmove", this._documentTouchMove, !1);
            },
            addTouchLockCallback: function (a, b, c) {
                void 0 === c && (c = !1), this.touchLockCallbacks.push({ callback: a, context: b, onEnd: c });
            },
            removeTouchLockCallback: function (a, b) {
                for (var c = this.touchLockCallbacks.length; c--; ) if (this.touchLockCallbacks[c].callback === a && this.touchLockCallbacks[c].context === b) return this.touchLockCallbacks.splice(c, 1), !0;
                return !1;
            },
            onTouchStart: function (a) {
                for (var b = this.touchLockCallbacks.length; b--; ) {
                    var c = this.touchLockCallbacks[b];
                    !c.onEnd && c.callback.call(c.context, this, a) && this.touchLockCallbacks.splice(b, 1);
                }
                if (((this.event = a), this.game.input.enabled && this.enabled)) {
                    this.touchStartCallback && this.touchStartCallback.call(this.callbackContext, a), this.preventDefault && a.preventDefault();
                    for (b = 0; b < a.changedTouches.length; b++) this.game.input.startPointer(a.changedTouches[b]);
                }
            },
            onTouchCancel: function (a) {
                if (((this.event = a), this.touchCancelCallback && this.touchCancelCallback.call(this.callbackContext, a), this.game.input.enabled && this.enabled)) {
                    this.preventDefault && a.preventDefault();
                    for (var b = 0; b < a.changedTouches.length; b++) this.game.input.stopPointer(a.changedTouches[b]);
                }
            },
            onTouchEnter: function (a) {
                (this.event = a), this.touchEnterCallback && this.touchEnterCallback.call(this.callbackContext, a), this.game.input.enabled && this.enabled && this.preventDefault && a.preventDefault();
            },
            onTouchLeave: function (a) {
                (this.event = a), this.touchLeaveCallback && this.touchLeaveCallback.call(this.callbackContext, a), this.preventDefault && a.preventDefault();
            },
            onTouchMove: function (a) {
                (this.event = a), this.touchMoveCallback && this.touchMoveCallback.call(this.callbackContext, a), this.preventDefault && a.preventDefault();
                for (var b = 0; b < a.changedTouches.length; b++) this.game.input.updatePointer(a.changedTouches[b]);
            },
            onTouchEnd: function (a) {
                for (var b = this.touchLockCallbacks.length; b--; ) {
                    var c = this.touchLockCallbacks[b];
                    c.onEnd && c.callback.call(c.context, this, a) && this.touchLockCallbacks.splice(b, 1);
                }
                (this.event = a), this.touchEndCallback && this.touchEndCallback.call(this.callbackContext, a), this.preventDefault && a.preventDefault();
                for (b = 0; b < a.changedTouches.length; b++) this.game.input.stopPointer(a.changedTouches[b]);
            },
            stop: function () {
                this.game.device.touch &&
                    (this.game.canvas.removeEventListener("touchstart", this._onTouchStart),
                    this.game.canvas.removeEventListener("touchmove", this._onTouchMove),
                    this.game.canvas.removeEventListener("touchend", this._onTouchEnd),
                    this.game.canvas.removeEventListener("touchenter", this._onTouchEnter),
                    this.game.canvas.removeEventListener("touchleave", this._onTouchLeave),
                    this.game.canvas.removeEventListener("touchcancel", this._onTouchCancel));
            },
        }),
        (c.Touch.prototype.constructor = c.Touch),
        (c.InputHandler = function (a) {
            (this.sprite = a),
                (this.game = a.game),
                (this.enabled = !1),
                (this.checked = !1),
                (this.priorityID = 0),
                (this.useHandCursor = !1),
                (this._setHandCursor = !1),
                (this.isDragged = !1),
                (this.allowHorizontalDrag = !0),
                (this.allowVerticalDrag = !0),
                (this.bringToTop = !1),
                (this.snapOffset = null),
                (this.snapOnDrag = !1),
                (this.snapOnRelease = !1),
                (this.snapX = 0),
                (this.snapY = 0),
                (this.snapOffsetX = 0),
                (this.snapOffsetY = 0),
                (this.pixelPerfectOver = !1),
                (this.pixelPerfectClick = !1),
                (this.pixelPerfectAlpha = 255),
                (this.draggable = !1),
                (this.boundsRect = null),
                (this.boundsSprite = null),
                (this.scaleLayer = !1),
                (this.dragOffset = new c.Point()),
                (this.dragFromCenter = !1),
                (this.dragStopBlocksInputUp = !1),
                (this.dragStartPoint = new c.Point()),
                (this.dragDistanceThreshold = 0),
                (this.dragTimeThreshold = 0),
                (this.downPoint = new c.Point()),
                (this.snapPoint = new c.Point()),
                (this._dragPoint = new c.Point()),
                (this._dragPhase = !1),
                (this._pendingDrag = !1),
                (this._dragTimePass = !1),
                (this._dragDistancePass = !1),
                (this._wasEnabled = !1),
                (this._tempPoint = new c.Point()),
                (this._pointerData = []),
                this._pointerData.push({ id: 0, x: 0, y: 0, camX: 0, camY: 0, isDown: !1, isUp: !1, isOver: !1, isOut: !1, timeOver: 0, timeOut: 0, timeDown: 0, timeUp: 0, downDuration: 0, isDragged: !1 });
        }),
        (c.InputHandler.prototype = {
            start: function (a, b) {
                if (((a = a || 0), void 0 === b && (b = !1), !1 === this.enabled)) {
                    this.game.input.interactiveItems.add(this), (this.useHandCursor = b), (this.priorityID = a);
                    for (var d = 0; d < 10; d++) this._pointerData[d] = { id: d, x: 0, y: 0, isDown: !1, isUp: !1, isOver: !1, isOut: !1, timeOver: 0, timeOut: 0, timeDown: 0, timeUp: 0, downDuration: 0, isDragged: !1 };
                    (this.snapOffset = new c.Point()), (this.enabled = !0), (this._wasEnabled = !0);
                }
                return this.sprite.events.onAddedToGroup.add(this.addedToGroup, this), this.sprite.events.onRemovedFromGroup.add(this.removedFromGroup, this), this.sprite;
            },
            addedToGroup: function () {
                this._dragPhase || (this._wasEnabled && !this.enabled && this.start());
            },
            removedFromGroup: function () {
                this._dragPhase || (this.enabled ? ((this._wasEnabled = !0), this.stop()) : (this._wasEnabled = !1));
            },
            reset: function () {
                this.enabled = !1;
                for (var a = 0; a < 10; a++) this._pointerData[a] = { id: a, x: 0, y: 0, isDown: !1, isUp: !1, isOver: !1, isOut: !1, timeOver: 0, timeOut: 0, timeDown: 0, timeUp: 0, downDuration: 0, isDragged: !1 };
            },
            stop: function () {
                !1 !== this.enabled && ((this.enabled = !1), this.game.input.interactiveItems.remove(this));
            },
            destroy: function () {
                this.sprite &&
                    (this._setHandCursor && ((this.game.canvas.style.cursor = "default"), (this._setHandCursor = !1)),
                    (this.enabled = !1),
                    this.game.input.interactiveItems.remove(this),
                    (this._pointerData.length = 0),
                    (this.boundsRect = null),
                    (this.boundsSprite = null),
                    (this.sprite = null));
            },
            validForInput: function (a, b, c) {
                return (
                    void 0 === c && (c = !0),
                    !(
                        !this.enabled ||
                        0 === this.sprite.scale.x ||
                        0 === this.sprite.scale.y ||
                        this.priorityID < this.game.input.minPriorityID ||
                        (this.sprite.parent && this.sprite.parent.ignoreChildInput) ||
                        (!c && (this.pixelPerfectClick || this.pixelPerfectOver)) ||
                        !(this.priorityID > a || (this.priorityID === a && this.sprite.renderOrderID > b))
                    )
                );
            },
            isPixelPerfect: function () {
                return this.pixelPerfectClick || this.pixelPerfectOver;
            },
            pointerX: function (a) {
                return (a = a || 0), this._pointerData[a].x;
            },
            pointerY: function (a) {
                return (a = a || 0), this._pointerData[a].y;
            },
            pointerDown: function (a) {
                return (a = a || 0), this._pointerData[a].isDown;
            },
            pointerUp: function (a) {
                return (a = a || 0), this._pointerData[a].isUp;
            },
            pointerTimeDown: function (a) {
                return (a = a || 0), this._pointerData[a].timeDown;
            },
            pointerTimeUp: function (a) {
                return (a = a || 0), this._pointerData[a].timeUp;
            },
            pointerOver: function (a) {
                if (!this.enabled) return !1;
                if (void 0 !== a) return this._pointerData[a].isOver;
                for (var b = 0; b < 10; b++) if (this._pointerData[b].isOver) return !0;
                return !1;
            },
            pointerOut: function (a) {
                if (!this.enabled) return !1;
                if (void 0 !== a) return this._pointerData[a].isOut;
                for (var b = 0; b < 10; b++) if (this._pointerData[b].isOut) return !0;
            },
            pointerTimeOver: function (a) {
                return (a = a || 0), this._pointerData[a].timeOver;
            },
            pointerTimeOut: function (a) {
                return (a = a || 0), this._pointerData[a].timeOut;
            },
            pointerDragged: function (a) {
                return (a = a || 0), this._pointerData[a].isDragged;
            },
            checkPointerDown: function (a, b) {
                return (
                    !!(a.isDown && this.enabled && this.sprite && this.sprite.parent && this.sprite.visible && this.sprite.parent.visible && 0 !== this.sprite.worldScale.x && 0 !== this.sprite.worldScale.y) &&
                    !!this.game.input.hitTest(this.sprite, a, this._tempPoint) &&
                    (void 0 === b && (b = !1), !(!b && this.pixelPerfectClick) || this.checkPixel(this._tempPoint.x, this._tempPoint.y))
                );
            },
            checkPointerOver: function (a, b) {
                return (
                    !!(this.enabled && this.sprite && this.sprite.parent && this.sprite.visible && this.sprite.parent.visible && 0 !== this.sprite.worldScale.x && 0 !== this.sprite.worldScale.y) &&
                    !!this.game.input.hitTest(this.sprite, a, this._tempPoint) &&
                    (void 0 === b && (b = !1), !(!b && this.pixelPerfectOver) || this.checkPixel(this._tempPoint.x, this._tempPoint.y))
                );
            },
            checkPixel: function (a, b, c) {
                if (this.sprite.texture.baseTexture.source) {
                    if (null === a && null === b) {
                        this.game.input.getLocalPosition(this.sprite, c, this._tempPoint);
                        (a = this._tempPoint.x), (b = this._tempPoint.y);
                    }
                    if (
                        (0 !== this.sprite.anchor.x && (a -= -this.sprite.texture.frame.width * this.sprite.anchor.x),
                        0 !== this.sprite.anchor.y && (b -= -this.sprite.texture.frame.height * this.sprite.anchor.y),
                        (a += this.sprite.texture.frame.x),
                        (b += this.sprite.texture.frame.y),
                        this.sprite.texture.trim &&
                            ((a -= this.sprite.texture.trim.x),
                            (b -= this.sprite.texture.trim.y),
                            a < this.sprite.texture.crop.x || a > this.sprite.texture.crop.right || b < this.sprite.texture.crop.y || b > this.sprite.texture.crop.bottom))
                    )
                        return (this._dx = a), (this._dy = b), !1;
                    if (
                        ((this._dx = a),
                        (this._dy = b),
                        this.game.input.hitContext.clearRect(0, 0, 1, 1),
                        this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source, a, b, 1, 1, 0, 0, 1, 1),
                        this.game.input.hitContext.getImageData(0, 0, 1, 1).data[3] >= this.pixelPerfectAlpha)
                    )
                        return !0;
                }
                return !1;
            },
            update: function (a) {
                if (null !== this.sprite && void 0 !== this.sprite.parent)
                    return this.enabled && this.sprite.visible && this.sprite.parent.visible
                        ? this._pendingDrag
                            ? (this._dragDistancePass || (this._dragDistancePass = c.Math.distance(a.x, a.y, this.downPoint.x, this.downPoint.y) >= this.dragDistanceThreshold),
                              this._dragDistancePass && this._dragTimePass && this.startDrag(a),
                              !0)
                            : this.draggable && this._draggedPointerID === a.id
                            ? this.updateDrag(a, !1)
                            : this._pointerData[a.id].isOver
                            ? this.checkPointerOver(a)
                                ? ((this._pointerData[a.id].x = a.x - this.sprite.x), (this._pointerData[a.id].y = a.y - this.sprite.y), !0)
                                : (this._pointerOutHandler(a), !1)
                            : void 0
                        : (this._pointerOutHandler(a), !1);
            },
            _pointerOverHandler: function (a, b) {
                if (null !== this.sprite) {
                    var d = this._pointerData[a.id];
                    if (!1 === d.isOver || a.dirty) {
                        var e = !1 === d.isOver;
                        (d.isOver = !0),
                            (d.isOut = !1),
                            (d.timeOver = this.game.time.time),
                            (d.x = a.x - this.sprite.x),
                            (d.y = a.y - this.sprite.y),
                            this.useHandCursor && !1 === d.isDragged && ((this.game.canvas.style.cursor = "pointer"), (this._setHandCursor = !0)),
                            !b && e && this.sprite && this.sprite.events && this.sprite.events.onInputOver$dispatch(this.sprite, a),
                            this.sprite.parent && this.sprite.parent.type === c.GROUP && this.sprite.parent.onChildInputOver.dispatch(this.sprite, a);
                    }
                }
            },
            _pointerOutHandler: function (a, b) {
                if (null !== this.sprite) {
                    var d = this._pointerData[a.id];
                    (d.isOver = !1),
                        (d.isOut = !0),
                        (d.timeOut = this.game.time.time),
                        this.useHandCursor && !1 === d.isDragged && ((this.game.canvas.style.cursor = "default"), (this._setHandCursor = !1)),
                        !b &&
                            this.sprite &&
                            this.sprite.events &&
                            (this.sprite.events.onInputOut$dispatch(this.sprite, a), this.sprite && this.sprite.parent && this.sprite.parent.type === c.GROUP && this.sprite.parent.onChildInputOut.dispatch(this.sprite, a));
                }
            },
            _touchedHandler: function (a) {
                if (null !== this.sprite) {
                    var b = this._pointerData[a.id];
                    if (!b.isDown && b.isOver) {
                        if (this.pixelPerfectClick && !this.checkPixel(null, null, a)) return;
                        if (
                            ((b.isDown = !0),
                            (b.isUp = !1),
                            (b.timeDown = this.game.time.time),
                            this.downPoint.set(a.x, a.y),
                            (a.dirty = !0),
                            this.sprite &&
                                this.sprite.events &&
                                (this.sprite.events.onInputDown$dispatch(this.sprite, a),
                                this.sprite && this.sprite.parent && this.sprite.parent.type === c.GROUP && this.sprite.parent.onChildInputDown.dispatch(this.sprite, a),
                                null === this.sprite))
                        )
                            return;
                        this.draggable &&
                            !1 === this.isDragged &&
                            (0 === this.dragTimeThreshold && 0 === this.dragDistanceThreshold
                                ? this.startDrag(a)
                                : ((this._pendingDrag = !0),
                                  (this._dragDistancePass = 0 === this.dragDistanceThreshold),
                                  0 < this.dragTimeThreshold ? ((this._dragTimePass = !1), this.game.time.events.add(this.dragTimeThreshold, this.dragTimeElapsed, this, a)) : (this._dragTimePass = !0))),
                            this.bringToTop && this.sprite.bringToTop();
                    }
                }
            },
            dragTimeElapsed: function (a) {
                (this._dragTimePass = !0), this._pendingDrag && this.sprite && this._dragDistancePass && this.startDrag(a);
            },
            _releasedHandler: function (a) {
                if (null !== this.sprite) {
                    var b = this._pointerData[a.id];
                    if (b.isDown && a.isUp) {
                        (b.isDown = !1), (b.isUp = !0), (b.timeUp = this.game.time.time), (b.downDuration = b.timeUp - b.timeDown);
                        var d = this.checkPointerOver(a);
                        this.sprite &&
                            this.sprite.events &&
                            ((this.dragStopBlocksInputUp && (!this.dragStopBlocksInputUp || (this.draggable && this.isDragged && this._draggedPointerID === a.id))) || this.sprite.events.onInputUp$dispatch(this.sprite, a, d),
                            this.sprite && this.sprite.parent && this.sprite.parent.type === c.GROUP && this.sprite.parent.onChildInputUp.dispatch(this.sprite, a, d),
                            d && (d = this.checkPointerOver(a))),
                            !(b.isOver = d) && this.useHandCursor && ((this.game.canvas.style.cursor = "default"), (this._setHandCursor = !1)),
                            (a.dirty = !0),
                            (this._pendingDrag = !1),
                            this.draggable && this.isDragged && this._draggedPointerID === a.id && this.stopDrag(a);
                    }
                }
            },
            updateDrag: function (a, b) {
                if ((void 0 === b && (b = !1), a.isUp)) return this.stopDrag(a), !1;
                var c = this.globalToLocalX(a.x) + this._dragPoint.x + this.dragOffset.x,
                    d = this.globalToLocalY(a.y) + this._dragPoint.y + this.dragOffset.y;
                if (this.sprite.fixedToCamera)
                    this.allowHorizontalDrag && (this.sprite.cameraOffset.x = c),
                        this.allowVerticalDrag && (this.sprite.cameraOffset.y = d),
                        this.boundsRect && this.checkBoundsRect(),
                        this.boundsSprite && this.checkBoundsSprite(),
                        this.snapOnDrag &&
                            ((this.sprite.cameraOffset.x = Math.round((this.sprite.cameraOffset.x - (this.snapOffsetX % this.snapX)) / this.snapX) * this.snapX + (this.snapOffsetX % this.snapX)),
                            (this.sprite.cameraOffset.y = Math.round((this.sprite.cameraOffset.y - (this.snapOffsetY % this.snapY)) / this.snapY) * this.snapY + (this.snapOffsetY % this.snapY)),
                            this.snapPoint.set(this.sprite.cameraOffset.x, this.sprite.cameraOffset.y));
                else {
                    var e = this.game.camera.x - this._pointerData[a.id].camX,
                        f = this.game.camera.y - this._pointerData[a.id].camY;
                    this.allowHorizontalDrag && (this.sprite.x = c + e),
                        this.allowVerticalDrag && (this.sprite.y = d + f),
                        this.boundsRect && this.checkBoundsRect(),
                        this.boundsSprite && this.checkBoundsSprite(),
                        this.snapOnDrag &&
                            ((this.sprite.x = Math.round((this.sprite.x - (this.snapOffsetX % this.snapX)) / this.snapX) * this.snapX + (this.snapOffsetX % this.snapX)),
                            (this.sprite.y = Math.round((this.sprite.y - (this.snapOffsetY % this.snapY)) / this.snapY) * this.snapY + (this.snapOffsetY % this.snapY)),
                            this.snapPoint.set(this.sprite.x, this.sprite.y));
                }
                return this.sprite.events.onDragUpdate.dispatch(this.sprite, a, c, d, this.snapPoint, b), !0;
            },
            justOver: function (a, b) {
                return (a = a || 0), (b = b || 500), this._pointerData[a].isOver && this.overDuration(a) < b;
            },
            justOut: function (a, b) {
                return (a = a || 0), (b = b || 500), this._pointerData[a].isOut && this.game.time.time - this._pointerData[a].timeOut < b;
            },
            justPressed: function (a, b) {
                return (a = a || 0), (b = b || 500), this._pointerData[a].isDown && this.downDuration(a) < b;
            },
            justReleased: function (a, b) {
                return (a = a || 0), (b = b || 500), this._pointerData[a].isUp && this.game.time.time - this._pointerData[a].timeUp < b;
            },
            overDuration: function (a) {
                return (a = a || 0), this._pointerData[a].isOver ? this.game.time.time - this._pointerData[a].timeOver : -1;
            },
            downDuration: function (a) {
                return (a = a || 0), this._pointerData[a].isDown ? this.game.time.time - this._pointerData[a].timeDown : -1;
            },
            enableDrag: function (a, b, d, e, f, g) {
                void 0 === a && (a = !1),
                    void 0 === b && (b = !1),
                    void 0 === d && (d = !1),
                    void 0 === e && (e = 255),
                    void 0 === f && (f = null),
                    void 0 === g && (g = null),
                    (this._dragPoint = new c.Point()),
                    (this.draggable = !0),
                    (this.bringToTop = b),
                    (this.dragOffset = new c.Point()),
                    (this.dragFromCenter = a),
                    (this.pixelPerfectClick = d),
                    (this.pixelPerfectAlpha = e),
                    f && (this.boundsRect = f),
                    g && (this.boundsSprite = g);
            },
            disableDrag: function () {
                if (this._pointerData) for (var a = 0; a < 10; a++) this._pointerData[a].isDragged = !1;
                (this.draggable = !1), (this.isDragged = !1), (this._draggedPointerID = -1), (this._pendingDrag = !1);
            },
            startDrag: function (a) {
                var b = this.sprite.x,
                    c = this.sprite.y;
                if (
                    ((this.isDragged = !0),
                    (this._draggedPointerID = a.id),
                    (this._pointerData[a.id].camX = this.game.camera.x),
                    (this._pointerData[a.id].camY = this.game.camera.y),
                    (this._pointerData[a.id].isDragged = !0),
                    this.sprite.fixedToCamera)
                ) {
                    if (this.dragFromCenter) {
                        var d = this.sprite.getBounds();
                        (this.sprite.cameraOffset.x = this.globalToLocalX(a.x) + (this.sprite.cameraOffset.x - d.centerX)), (this.sprite.cameraOffset.y = this.globalToLocalY(a.y) + (this.sprite.cameraOffset.y - d.centerY));
                    }
                    this._dragPoint.setTo(this.sprite.cameraOffset.x - a.x, this.sprite.cameraOffset.y - a.y);
                } else {
                    if (this.dragFromCenter) {
                        d = this.sprite.getBounds();
                        (this.sprite.x = this.globalToLocalX(a.x) + (this.sprite.x - d.centerX)), (this.sprite.y = this.globalToLocalY(a.y) + (this.sprite.y - d.centerY));
                    }
                    this._dragPoint.setTo(this.sprite.x - this.globalToLocalX(a.x), this.sprite.y - this.globalToLocalY(a.y));
                }
                this.updateDrag(a, !0), this.bringToTop && ((this._dragPhase = !0), this.sprite.bringToTop()), this.dragStartPoint.set(b, c), this.sprite.events.onDragStart$dispatch(this.sprite, a, b, c), (this._pendingDrag = !1);
            },
            globalToLocalX: function (a) {
                return this.scaleLayer && ((a -= this.game.scale.grid.boundsFluid.x), (a *= this.game.scale.grid.scaleFluidInversed.x)), a;
            },
            globalToLocalY: function (a) {
                return this.scaleLayer && ((a -= this.game.scale.grid.boundsFluid.y), (a *= this.game.scale.grid.scaleFluidInversed.y)), a;
            },
            stopDrag: function (a) {
                (this.isDragged = !1),
                    (this._draggedPointerID = -1),
                    (this._pointerData[a.id].isDragged = !1),
                    (this._dragPhase = !1),
                    (this._pendingDrag = !1),
                    this.snapOnRelease &&
                        (this.sprite.fixedToCamera
                            ? ((this.sprite.cameraOffset.x = Math.round((this.sprite.cameraOffset.x - (this.snapOffsetX % this.snapX)) / this.snapX) * this.snapX + (this.snapOffsetX % this.snapX)),
                              (this.sprite.cameraOffset.y = Math.round((this.sprite.cameraOffset.y - (this.snapOffsetY % this.snapY)) / this.snapY) * this.snapY + (this.snapOffsetY % this.snapY)))
                            : ((this.sprite.x = Math.round((this.sprite.x - (this.snapOffsetX % this.snapX)) / this.snapX) * this.snapX + (this.snapOffsetX % this.snapX)),
                              (this.sprite.y = Math.round((this.sprite.y - (this.snapOffsetY % this.snapY)) / this.snapY) * this.snapY + (this.snapOffsetY % this.snapY)))),
                    this.sprite.events.onDragStop$dispatch(this.sprite, a),
                    !1 === this.checkPointerOver(a) && this._pointerOutHandler(a);
            },
            setDragLock: function (a, b) {
                void 0 === a && (a = !0), void 0 === b && (b = !0), (this.allowHorizontalDrag = a), (this.allowVerticalDrag = b);
            },
            enableSnap: function (a, b, c, d, e, f) {
                void 0 === c && (c = !0),
                    void 0 === d && (d = !1),
                    void 0 === e && (e = 0),
                    void 0 === f && (f = 0),
                    (this.snapX = a),
                    (this.snapY = b),
                    (this.snapOffsetX = e),
                    (this.snapOffsetY = f),
                    (this.snapOnDrag = c),
                    (this.snapOnRelease = d);
            },
            disableSnap: function () {
                (this.snapOnDrag = !1), (this.snapOnRelease = !1);
            },
            checkBoundsRect: function () {
                this.sprite.fixedToCamera
                    ? (this.sprite.cameraOffset.x < this.boundsRect.left
                          ? (this.sprite.cameraOffset.x = this.boundsRect.left)
                          : this.sprite.cameraOffset.x + this.sprite.width > this.boundsRect.right && (this.sprite.cameraOffset.x = this.boundsRect.right - this.sprite.width),
                      this.sprite.cameraOffset.y < this.boundsRect.top
                          ? (this.sprite.cameraOffset.y = this.boundsRect.top)
                          : this.sprite.cameraOffset.y + this.sprite.height > this.boundsRect.bottom && (this.sprite.cameraOffset.y = this.boundsRect.bottom - this.sprite.height))
                    : (this.sprite.left < this.boundsRect.left
                          ? (this.sprite.x = this.boundsRect.x + this.sprite.offsetX)
                          : this.sprite.right > this.boundsRect.right && (this.sprite.x = this.boundsRect.right - (this.sprite.width - this.sprite.offsetX)),
                      this.sprite.top < this.boundsRect.top
                          ? (this.sprite.y = this.boundsRect.top + this.sprite.offsetY)
                          : this.sprite.bottom > this.boundsRect.bottom && (this.sprite.y = this.boundsRect.bottom - (this.sprite.height - this.sprite.offsetY)));
            },
            checkBoundsSprite: function () {
                this.sprite.fixedToCamera && this.boundsSprite.fixedToCamera
                    ? (this.sprite.cameraOffset.x < this.boundsSprite.cameraOffset.x
                          ? (this.sprite.cameraOffset.x = this.boundsSprite.cameraOffset.x)
                          : this.sprite.cameraOffset.x + this.sprite.width > this.boundsSprite.cameraOffset.x + this.boundsSprite.width &&
                            (this.sprite.cameraOffset.x = this.boundsSprite.cameraOffset.x + this.boundsSprite.width - this.sprite.width),
                      this.sprite.cameraOffset.y < this.boundsSprite.cameraOffset.y
                          ? (this.sprite.cameraOffset.y = this.boundsSprite.cameraOffset.y)
                          : this.sprite.cameraOffset.y + this.sprite.height > this.boundsSprite.cameraOffset.y + this.boundsSprite.height &&
                            (this.sprite.cameraOffset.y = this.boundsSprite.cameraOffset.y + this.boundsSprite.height - this.sprite.height))
                    : (this.sprite.left < this.boundsSprite.left
                          ? (this.sprite.x = this.boundsSprite.left + this.sprite.offsetX)
                          : this.sprite.right > this.boundsSprite.right && (this.sprite.x = this.boundsSprite.right - (this.sprite.width - this.sprite.offsetX)),
                      this.sprite.top < this.boundsSprite.top
                          ? (this.sprite.y = this.boundsSprite.top + this.sprite.offsetY)
                          : this.sprite.bottom > this.boundsSprite.bottom && (this.sprite.y = this.boundsSprite.bottom - (this.sprite.height - this.sprite.offsetY)));
            },
        }),
        (c.InputHandler.prototype.constructor = c.InputHandler),
        (c.Gamepad = function (a) {
            (this.game = a),
                (this._gamepadIndexMap = {}),
                (this._rawPads = []),
                (this._active = !1),
                (this.enabled = !0),
                (this._gamepadSupportAvailable = !!navigator.webkitGetGamepads || !!navigator.webkitGamepads || -1 !== navigator.userAgent.indexOf("Firefox/") || !!navigator.getGamepads),
                (this._prevRawGamepadTypes = []),
                (this._prevTimestamps = []),
                ((this.callbackContext = this).onConnectCallback = null),
                (this.onDisconnectCallback = null),
                (this.onDownCallback = null),
                (this.onUpCallback = null),
                (this.onAxisCallback = null),
                (this.onFloatCallback = null),
                (this._ongamepadconnected = null),
                (this._gamepaddisconnected = null),
                (this._gamepads = [new c.SinglePad(a, this), new c.SinglePad(a, this), new c.SinglePad(a, this), new c.SinglePad(a, this)]);
        }),
        (c.Gamepad.prototype = {
            addCallbacks: function (a, b) {
                void 0 !== b &&
                    ((this.onConnectCallback = "function" == typeof b.onConnect ? b.onConnect : this.onConnectCallback),
                    (this.onDisconnectCallback = "function" == typeof b.onDisconnect ? b.onDisconnect : this.onDisconnectCallback),
                    (this.onDownCallback = "function" == typeof b.onDown ? b.onDown : this.onDownCallback),
                    (this.onUpCallback = "function" == typeof b.onUp ? b.onUp : this.onUpCallback),
                    (this.onAxisCallback = "function" == typeof b.onAxis ? b.onAxis : this.onAxisCallback),
                    (this.onFloatCallback = "function" == typeof b.onFloat ? b.onFloat : this.onFloatCallback),
                    (this.callbackContext = a));
            },
            start: function () {
                if (!this._active) {
                    this._active = !0;
                    var a = this;
                    (this._onGamepadConnected = function (b) {
                        return a.onGamepadConnected(b);
                    }),
                        (this._onGamepadDisconnected = function (b) {
                            return a.onGamepadDisconnected(b);
                        }),
                        window.addEventListener("gamepadconnected", this._onGamepadConnected, !1),
                        window.addEventListener("gamepaddisconnected", this._onGamepadDisconnected, !1);
                }
            },
            onGamepadConnected: function (a) {
                var b = a.gamepad;
                this._rawPads.push(b), this._gamepads[b.index].connect(b);
            },
            onGamepadDisconnected: function (a) {
                var b = a.gamepad;
                for (var c in this._rawPads) this._rawPads[c].index === b.index && this._rawPads.splice(c, 1);
                this._gamepads[b.index].disconnect();
            },
            update: function () {
                this._pollGamepads(), this.pad1.pollStatus(), this.pad2.pollStatus(), this.pad3.pollStatus(), this.pad4.pollStatus();
            },
            _pollGamepads: function () {
                if (this._active) {
                    if (navigator.getGamepads) var a = navigator.getGamepads();
                    else if (navigator.webkitGetGamepads) a = navigator.webkitGetGamepads();
                    else if (navigator.webkitGamepads) a = navigator.webkitGamepads();
                    if (a) {
                        for (var b = !(this._rawPads = []), c = 0; c < a.length && (typeof a[c] !== this._prevRawGamepadTypes[c] && ((b = !0), (this._prevRawGamepadTypes[c] = typeof a[c])), a[c] && this._rawPads.push(a[c]), 3 !== c); c++);
                        for (var d = 0; d < this._gamepads.length; d++) this._gamepads[d]._rawPad = this._rawPads[d];
                        if (b) {
                            for (var e, f = { rawIndices: {}, padIndices: {} }, g = 0; g < this._gamepads.length; g++)
                                if ((e = this._gamepads[g]).connected) for (var h = 0; h < this._rawPads.length; h++) this._rawPads[h].index === e.index && ((f.rawIndices[e.index] = !0), (f.padIndices[g] = !0));
                            for (var i = 0; i < this._gamepads.length; i++)
                                if (((e = this._gamepads[i]), !f.padIndices[i])) {
                                    this._rawPads.length < 1 && e.disconnect();
                                    for (var j = 0; j < this._rawPads.length && !f.padIndices[i]; j++) {
                                        var k = this._rawPads[j];
                                        if (k) {
                                            if (f.rawIndices[k.index]) {
                                                e.disconnect();
                                                continue;
                                            }
                                            e.connect(k), (f.rawIndices[k.index] = !0), (f.padIndices[i] = !0);
                                        } else e.disconnect();
                                    }
                                }
                        }
                    }
                }
            },
            setDeadZones: function (a) {
                for (var b = 0; b < this._gamepads.length; b++) this._gamepads[b].deadZone = a;
            },
            stop: function () {
                (this._active = !1), window.removeEventListener("gamepadconnected", this._onGamepadConnected), window.removeEventListener("gamepaddisconnected", this._onGamepadDisconnected);
            },
            reset: function () {
                this.update();
                for (var a = 0; a < this._gamepads.length; a++) this._gamepads[a].reset();
            },
            justPressed: function (a, b) {
                for (var c = 0; c < this._gamepads.length; c++) if (!0 === this._gamepads[c].justPressed(a, b)) return !0;
                return !1;
            },
            justReleased: function (a, b) {
                for (var c = 0; c < this._gamepads.length; c++) if (!0 === this._gamepads[c].justReleased(a, b)) return !0;
                return !1;
            },
            isDown: function (a) {
                for (var b = 0; b < this._gamepads.length; b++) if (!0 === this._gamepads[b].isDown(a)) return !0;
                return !1;
            },
            destroy: function () {
                this.stop();
                for (var a = 0; a < this._gamepads.length; a++) this._gamepads[a].destroy();
            },
        }),
        (c.Gamepad.prototype.constructor = c.Gamepad),
        Object.defineProperty(c.Gamepad.prototype, "active", {
            get: function () {
                return this._active;
            },
        }),
        Object.defineProperty(c.Gamepad.prototype, "supported", {
            get: function () {
                return this._gamepadSupportAvailable;
            },
        }),
        Object.defineProperty(c.Gamepad.prototype, "padsConnected", {
            get: function () {
                return this._rawPads.length;
            },
        }),
        Object.defineProperty(c.Gamepad.prototype, "pad1", {
            get: function () {
                return this._gamepads[0];
            },
        }),
        Object.defineProperty(c.Gamepad.prototype, "pad2", {
            get: function () {
                return this._gamepads[1];
            },
        }),
        Object.defineProperty(c.Gamepad.prototype, "pad3", {
            get: function () {
                return this._gamepads[2];
            },
        }),
        Object.defineProperty(c.Gamepad.prototype, "pad4", {
            get: function () {
                return this._gamepads[3];
            },
        }),
        (c.Gamepad.BUTTON_0 = 0),
        (c.Gamepad.BUTTON_1 = 1),
        (c.Gamepad.BUTTON_2 = 2),
        (c.Gamepad.BUTTON_3 = 3),
        (c.Gamepad.BUTTON_4 = 4),
        (c.Gamepad.BUTTON_5 = 5),
        (c.Gamepad.BUTTON_6 = 6),
        (c.Gamepad.BUTTON_7 = 7),
        (c.Gamepad.BUTTON_8 = 8),
        (c.Gamepad.BUTTON_9 = 9),
        (c.Gamepad.BUTTON_10 = 10),
        (c.Gamepad.BUTTON_11 = 11),
        (c.Gamepad.BUTTON_12 = 12),
        (c.Gamepad.BUTTON_13 = 13),
        (c.Gamepad.BUTTON_14 = 14),
        (c.Gamepad.BUTTON_15 = 15),
        (c.Gamepad.AXIS_0 = 0),
        (c.Gamepad.AXIS_1 = 1),
        (c.Gamepad.AXIS_2 = 2),
        (c.Gamepad.AXIS_3 = 3),
        (c.Gamepad.AXIS_4 = 4),
        (c.Gamepad.AXIS_5 = 5),
        (c.Gamepad.AXIS_6 = 6),
        (c.Gamepad.AXIS_7 = 7),
        (c.Gamepad.AXIS_8 = 8),
        (c.Gamepad.AXIS_9 = 9),
        (c.Gamepad.XBOX360_A = 0),
        (c.Gamepad.XBOX360_B = 1),
        (c.Gamepad.XBOX360_X = 2),
        (c.Gamepad.XBOX360_Y = 3),
        (c.Gamepad.XBOX360_LEFT_BUMPER = 4),
        (c.Gamepad.XBOX360_RIGHT_BUMPER = 5),
        (c.Gamepad.XBOX360_LEFT_TRIGGER = 6),
        (c.Gamepad.XBOX360_RIGHT_TRIGGER = 7),
        (c.Gamepad.XBOX360_BACK = 8),
        (c.Gamepad.XBOX360_START = 9),
        (c.Gamepad.XBOX360_STICK_LEFT_BUTTON = 10),
        (c.Gamepad.XBOX360_STICK_RIGHT_BUTTON = 11),
        (c.Gamepad.XBOX360_DPAD_LEFT = 14),
        (c.Gamepad.XBOX360_DPAD_RIGHT = 15),
        (c.Gamepad.XBOX360_DPAD_UP = 12),
        (c.Gamepad.XBOX360_DPAD_DOWN = 13),
        (c.Gamepad.XBOX360_STICK_LEFT_X = 0),
        (c.Gamepad.XBOX360_STICK_LEFT_Y = 1),
        (c.Gamepad.XBOX360_STICK_RIGHT_X = 2),
        (c.Gamepad.XBOX360_STICK_RIGHT_Y = 3),
        (c.Gamepad.PS3XC_X = 0),
        (c.Gamepad.PS3XC_CIRCLE = 1),
        (c.Gamepad.PS3XC_SQUARE = 2),
        (c.Gamepad.PS3XC_TRIANGLE = 3),
        (c.Gamepad.PS3XC_L1 = 4),
        (c.Gamepad.PS3XC_R1 = 5),
        (c.Gamepad.PS3XC_L2 = 6),
        (c.Gamepad.PS3XC_R2 = 7),
        (c.Gamepad.PS3XC_SELECT = 8),
        (c.Gamepad.PS3XC_START = 9),
        (c.Gamepad.PS3XC_STICK_LEFT_BUTTON = 10),
        (c.Gamepad.PS3XC_STICK_RIGHT_BUTTON = 11),
        (c.Gamepad.PS3XC_DPAD_UP = 12),
        (c.Gamepad.PS3XC_DPAD_DOWN = 13),
        (c.Gamepad.PS3XC_DPAD_LEFT = 14),
        (c.Gamepad.PS3XC_DPAD_RIGHT = 15),
        (c.Gamepad.PS3XC_STICK_LEFT_X = 0),
        (c.Gamepad.PS3XC_STICK_LEFT_Y = 1),
        (c.Gamepad.PS3XC_STICK_RIGHT_X = 2),
        (c.Gamepad.PS3XC_STICK_RIGHT_Y = 3),
        (c.SinglePad = function (a, b) {
            (this.game = a),
                (this.index = null),
                (this.connected = !1),
                ((this.callbackContext = this).onConnectCallback = null),
                (this.onDisconnectCallback = null),
                (this.onDownCallback = null),
                (this.onUpCallback = null),
                (this.onAxisCallback = null),
                (this.onFloatCallback = null),
                (this.deadZone = 0.26),
                (this._padParent = b),
                (this._rawPad = null),
                (this._prevTimestamp = null),
                (this._buttons = []),
                (this._buttonsLen = 0),
                (this._axes = []),
                (this._axesLen = 0);
        }),
        (c.SinglePad.prototype = {
            addCallbacks: function (a, b) {
                void 0 !== b &&
                    ((this.onConnectCallback = "function" == typeof b.onConnect ? b.onConnect : this.onConnectCallback),
                    (this.onDisconnectCallback = "function" == typeof b.onDisconnect ? b.onDisconnect : this.onDisconnectCallback),
                    (this.onDownCallback = "function" == typeof b.onDown ? b.onDown : this.onDownCallback),
                    (this.onUpCallback = "function" == typeof b.onUp ? b.onUp : this.onUpCallback),
                    (this.onAxisCallback = "function" == typeof b.onAxis ? b.onAxis : this.onAxisCallback),
                    (this.onFloatCallback = "function" == typeof b.onFloat ? b.onFloat : this.onFloatCallback),
                    (this.callbackContext = a));
            },
            getButton: function (a) {
                return this._buttons[a] ? this._buttons[a] : null;
            },
            pollStatus: function () {
                if (this.connected && this.game.input.enabled && this.game.input.gamepad.enabled && (!this._rawPad.timestamp || this._rawPad.timestamp !== this._prevTimestamp)) {
                    for (var a = 0; a < this._buttonsLen; a++) {
                        var b = isNaN(this._rawPad.buttons[a]) ? this._rawPad.buttons[a].value : this._rawPad.buttons[a];
                        b !== this._buttons[a].value && (1 === b ? this.processButtonDown(a, b) : 0 === b ? this.processButtonUp(a, b) : this.processButtonFloat(a, b));
                    }
                    for (var c = 0; c < this._axesLen; c++) {
                        var d = this._rawPad.axes[c];
                        (0 < d && d > this.deadZone) || (d < 0 && d < -this.deadZone) ? this.processAxisChange(c, d) : this.processAxisChange(c, 0);
                    }
                    this._prevTimestamp = this._rawPad.timestamp;
                }
            },
            connect: function (a) {
                var b = !this.connected;
                (this.connected = !0), (this.index = a.index), (this._rawPad = a), (this._buttons = []), (this._buttonsLen = a.buttons.length), (this._axes = []), (this._axesLen = a.axes.length);
                for (var d = 0; d < this._axesLen; d++) this._axes[d] = a.axes[d];
                for (var e in a.buttons) (e = parseInt(e, 10)), (this._buttons[e] = new c.DeviceButton(this, e));
                b && this._padParent.onConnectCallback && this._padParent.onConnectCallback.call(this._padParent.callbackContext, this.index), b && this.onConnectCallback && this.onConnectCallback.call(this.callbackContext);
            },
            disconnect: function () {
                var a = this.connected,
                    b = this.index;
                (this.connected = !1), (this.index = null), (this._rawPad = void 0);
                for (var c = 0; c < this._buttonsLen; c++) this._buttons[c].destroy();
                (this._buttons = []),
                    (this._buttonsLen = 0),
                    (this._axes = []),
                    (this._axesLen = 0),
                    a && this._padParent.onDisconnectCallback && this._padParent.onDisconnectCallback.call(this._padParent.callbackContext, b),
                    a && this.onDisconnectCallback && this.onDisconnectCallback.call(this.callbackContext);
            },
            destroy: function () {
                this._rawPad = void 0;
                for (var a = 0; a < this._buttonsLen; a++) this._buttons[a].destroy();
                (this._buttons = []),
                    (this._buttonsLen = 0),
                    (this._axes = []),
                    (this._axesLen = 0),
                    (this.onConnectCallback = null),
                    (this.onDisconnectCallback = null),
                    (this.onDownCallback = null),
                    (this.onUpCallback = null),
                    (this.onAxisCallback = null),
                    (this.onFloatCallback = null);
            },
            processAxisChange: function (a, b) {
                this._axes[a] !== b &&
                    ((this._axes[a] = b),
                    this._padParent.onAxisCallback && this._padParent.onAxisCallback.call(this._padParent.callbackContext, this, a, b),
                    this.onAxisCallback && this.onAxisCallback.call(this.callbackContext, this, a, b));
            },
            processButtonDown: function (a, b) {
                this._buttons[a] && this._buttons[a].start(null, b),
                    this._padParent.onDownCallback && this._padParent.onDownCallback.call(this._padParent.callbackContext, a, b, this.index),
                    this.onDownCallback && this.onDownCallback.call(this.callbackContext, a, b);
            },
            processButtonUp: function (a, b) {
                this._padParent.onUpCallback && this._padParent.onUpCallback.call(this._padParent.callbackContext, a, b, this.index),
                    this.onUpCallback && this.onUpCallback.call(this.callbackContext, a, b),
                    this._buttons[a] && this._buttons[a].stop(null, b);
            },
            processButtonFloat: function (a, b) {
                this._padParent.onFloatCallback && this._padParent.onFloatCallback.call(this._padParent.callbackContext, a, b, this.index),
                    this.onFloatCallback && this.onFloatCallback.call(this.callbackContext, a, b),
                    this._buttons[a] && this._buttons[a].padFloat(b);
            },
            axis: function (a) {
                return !!this._axes[a] && this._axes[a];
            },
            isDown: function (a) {
                return !!this._buttons[a] && this._buttons[a].isDown;
            },
            isUp: function (a) {
                return !!this._buttons[a] && this._buttons[a].isUp;
            },
            justReleased: function (a, b) {
                if (this._buttons[a]) return this._buttons[a].justReleased(b);
            },
            justPressed: function (a, b) {
                if (this._buttons[a]) return this._buttons[a].justPressed(b);
            },
            buttonValue: function (a) {
                return this._buttons[a] ? this._buttons[a].value : null;
            },
            reset: function () {
                for (var a = 0; a < this._axes.length; a++) this._axes[a] = 0;
            },
        }),
        (c.SinglePad.prototype.constructor = c.SinglePad),
        (c.Key = function (a, b) {
            (this.game = a),
                (this._enabled = !0),
                (this.event = null),
                (this.isDown = !1),
                (this.isUp = !0),
                (this.altKey = !1),
                (this.ctrlKey = !1),
                (this.shiftKey = !1),
                (this.timeDown = 0),
                (this.duration = 0),
                (this.timeUp = -2500),
                (this.repeats = 0),
                (this.keyCode = b),
                (this.onDown = new c.Signal()),
                (this.onHoldCallback = null),
                (this.onHoldContext = null),
                (this.onUp = new c.Signal()),
                (this._justDown = !1),
                (this._justUp = !1);
        }),
        (c.Key.prototype = {
            update: function () {
                this._enabled && this.isDown && ((this.duration = this.game.time.time - this.timeDown), this.repeats++, this.onHoldCallback && this.onHoldCallback.call(this.onHoldContext, this));
            },
            processKeyDown: function (a) {
                this._enabled &&
                    ((this.event = a),
                    this.isDown ||
                        ((this.altKey = a.altKey),
                        (this.ctrlKey = a.ctrlKey),
                        (this.shiftKey = a.shiftKey),
                        (this.isDown = !0),
                        (this.isUp = !1),
                        (this.timeDown = this.game.time.time),
                        (this.duration = 0),
                        (this.repeats = 0),
                        (this._justDown = !0),
                        this.onDown.dispatch(this)));
            },
            processKeyUp: function (a) {
                this._enabled &&
                    ((this.event = a), this.isUp || ((this.isDown = !1), (this.isUp = !0), (this.timeUp = this.game.time.time), (this.duration = this.game.time.time - this.timeDown), (this._justUp = !0), this.onUp.dispatch(this)));
            },
            reset: function (a) {
                void 0 === a && (a = !0),
                    (this.isDown = !1),
                    (this.isUp = !0),
                    (this.timeUp = this.game.time.time),
                    (this.duration = 0),
                    (this._enabled = !0),
                    (this._justDown = !1),
                    (this._justUp = !1),
                    a && (this.onDown.removeAll(), this.onUp.removeAll(), (this.onHoldCallback = null), (this.onHoldContext = null));
            },
            downDuration: function (a) {
                return void 0 === a && (a = 50), this.isDown && this.duration < a;
            },
            upDuration: function (a) {
                return void 0 === a && (a = 50), !this.isDown && this.game.time.time - this.timeUp < a;
            },
        }),
        Object.defineProperty(c.Key.prototype, "justDown", {
            get: function () {
                var a = this._justDown;
                return (this._justDown = !1), a;
            },
        }),
        Object.defineProperty(c.Key.prototype, "justUp", {
            get: function () {
                var a = this._justUp;
                return (this._justUp = !1), a;
            },
        }),
        Object.defineProperty(c.Key.prototype, "enabled", {
            get: function () {
                return this._enabled;
            },
            set: function (a) {
                (a = !!a) !== this._enabled && (a || this.reset(!1), (this._enabled = a));
            },
        }),
        (c.Key.prototype.constructor = c.Key),
        (c.Keyboard = function (a) {
            (this.game = a),
                (this.enabled = !0),
                (this.event = null),
                (this.pressEvent = null),
                ((this.callbackContext = this).onDownCallback = null),
                (this.onPressCallback = null),
                (this.onUpCallback = null),
                (this._keys = []),
                (this._capture = []),
                (this._onKeyDown = null),
                (this._onKeyPress = null),
                (this._onKeyUp = null),
                (this._i = 0),
                (this._k = 0);
        }),
        (c.Keyboard.prototype = {
            addCallbacks: function (a, b, c, d) {
                (this.callbackContext = a), null != b && (this.onDownCallback = b), null != c && (this.onUpCallback = c), null != d && (this.onPressCallback = d);
            },
            addKey: function (a) {
                return this._keys[a] || ((this._keys[a] = new c.Key(this.game, a)), this.addKeyCapture(a)), this._keys[a];
            },
            addKeys: function (a) {
                var b = {};
                for (var c in a) b[c] = this.addKey(a[c]);
                return b;
            },
            removeKey: function (a) {
                this._keys[a] && ((this._keys[a] = null), this.removeKeyCapture(a));
            },
            createCursorKeys: function () {
                return this.addKeys({ up: c.KeyCode.UP, down: c.KeyCode.DOWN, left: c.KeyCode.LEFT, right: c.KeyCode.RIGHT });
            },
            start: function () {
                if (!this.game.device.cocoonJS && null === this._onKeyDown) {
                    var a = this;
                    (this._onKeyDown = function (b) {
                        return a.processKeyDown(b);
                    }),
                        (this._onKeyUp = function (b) {
                            return a.processKeyUp(b);
                        }),
                        (this._onKeyPress = function (b) {
                            return a.processKeyPress(b);
                        }),
                        window.addEventListener("keydown", this._onKeyDown, !1),
                        window.addEventListener("keyup", this._onKeyUp, !1),
                        window.addEventListener("keypress", this._onKeyPress, !1);
                }
            },
            stop: function () {
                window.removeEventListener("keydown", this._onKeyDown),
                    window.removeEventListener("keyup", this._onKeyUp),
                    window.removeEventListener("keypress", this._onKeyPress),
                    (this._onKeyDown = null),
                    (this._onKeyUp = null),
                    (this._onKeyPress = null);
            },
            destroy: function () {
                this.stop(), this.clearCaptures(), (this._keys.length = 0), (this._i = 0);
            },
            addKeyCapture: function (a) {
                if ("object" == typeof a) for (var b in a) this._capture[a[b]] = !0;
                else this._capture[a] = !0;
            },
            removeKeyCapture: function (a) {
                delete this._capture[a];
            },
            clearCaptures: function () {
                this._capture = {};
            },
            update: function () {
                for (this._i = this._keys.length; this._i--; ) this._keys[this._i] && this._keys[this._i].update();
            },
            processKeyDown: function (a) {
                if (((this.event = a), this.game.input.enabled && this.enabled)) {
                    var b = a.keyCode;
                    this._capture[b] && a.preventDefault(),
                        this._keys[b] || (this._keys[b] = new c.Key(this.game, b)),
                        this._keys[b].processKeyDown(a),
                        (this._k = b),
                        this.onDownCallback && this.onDownCallback.call(this.callbackContext, a);
                }
            },
            processKeyPress: function (a) {
                (this.pressEvent = a), this.game.input.enabled && this.enabled && this.onPressCallback && this.onPressCallback.call(this.callbackContext, String.fromCharCode(a.charCode), a);
            },
            processKeyUp: function (a) {
                if (((this.event = a), this.game.input.enabled && this.enabled)) {
                    var b = a.keyCode;
                    this._capture[b] && a.preventDefault(), this._keys[b] || (this._keys[b] = new c.Key(this.game, b)), this._keys[b].processKeyUp(a), this.onUpCallback && this.onUpCallback.call(this.callbackContext, a);
                }
            },
            reset: function (a) {
                void 0 === a && (a = !0), (this.event = null);
                for (var b = this._keys.length; b--; ) this._keys[b] && this._keys[b].reset(a);
            },
            downDuration: function (a, b) {
                return this._keys[a] ? this._keys[a].downDuration(b) : null;
            },
            upDuration: function (a, b) {
                return this._keys[a] ? this._keys[a].upDuration(b) : null;
            },
            isDown: function (a) {
                return this._keys[a] ? this._keys[a].isDown : null;
            },
        }),
        Object.defineProperty(c.Keyboard.prototype, "lastChar", {
            get: function () {
                return 32 === this.event.charCode ? "" : String.fromCharCode(this.pressEvent.charCode);
            },
        }),
        Object.defineProperty(c.Keyboard.prototype, "lastKey", {
            get: function () {
                return this._keys[this._k];
            },
        }),
        (c.Keyboard.prototype.constructor = c.Keyboard),
        (c.KeyCode = {
            A: "A".charCodeAt(0),
            B: "B".charCodeAt(0),
            C: "C".charCodeAt(0),
            D: "D".charCodeAt(0),
            E: "E".charCodeAt(0),
            F: "F".charCodeAt(0),
            G: "G".charCodeAt(0),
            H: "H".charCodeAt(0),
            I: "I".charCodeAt(0),
            J: "J".charCodeAt(0),
            K: "K".charCodeAt(0),
            L: "L".charCodeAt(0),
            M: "M".charCodeAt(0),
            N: "N".charCodeAt(0),
            O: "O".charCodeAt(0),
            P: "P".charCodeAt(0),
            Q: "Q".charCodeAt(0),
            R: "R".charCodeAt(0),
            S: "S".charCodeAt(0),
            T: "T".charCodeAt(0),
            U: "U".charCodeAt(0),
            V: "V".charCodeAt(0),
            W: "W".charCodeAt(0),
            X: "X".charCodeAt(0),
            Y: "Y".charCodeAt(0),
            Z: "Z".charCodeAt(0),
            ZERO: "0".charCodeAt(0),
            ONE: "1".charCodeAt(0),
            TWO: "2".charCodeAt(0),
            THREE: "3".charCodeAt(0),
            FOUR: "4".charCodeAt(0),
            FIVE: "5".charCodeAt(0),
            SIX: "6".charCodeAt(0),
            SEVEN: "7".charCodeAt(0),
            EIGHT: "8".charCodeAt(0),
            NINE: "9".charCodeAt(0),
            NUMPAD_0: 96,
            NUMPAD_1: 97,
            NUMPAD_2: 98,
            NUMPAD_3: 99,
            NUMPAD_4: 100,
            NUMPAD_5: 101,
            NUMPAD_6: 102,
            NUMPAD_7: 103,
            NUMPAD_8: 104,
            NUMPAD_9: 105,
            NUMPAD_MULTIPLY: 106,
            NUMPAD_ADD: 107,
            NUMPAD_ENTER: 108,
            NUMPAD_SUBTRACT: 109,
            NUMPAD_DECIMAL: 110,
            NUMPAD_DIVIDE: 111,
            F1: 112,
            F2: 113,
            F3: 114,
            F4: 115,
            F5: 116,
            F6: 117,
            F7: 118,
            F8: 119,
            F9: 120,
            F10: 121,
            F11: 122,
            F12: 123,
            F13: 124,
            F14: 125,
            F15: 126,
            COLON: 186,
            EQUALS: 187,
            COMMA: 188,
            UNDERSCORE: 189,
            PERIOD: 190,
            QUESTION_MARK: 191,
            TILDE: 192,
            OPEN_BRACKET: 219,
            BACKWARD_SLASH: 220,
            CLOSED_BRACKET: 221,
            QUOTES: 222,
            BACKSPACE: 8,
            TAB: 9,
            CLEAR: 12,
            ENTER: 13,
            SHIFT: 16,
            CONTROL: 17,
            ALT: 18,
            CAPS_LOCK: 20,
            ESC: 27,
            SPACEBAR: 32,
            PAGE_UP: 33,
            PAGE_DOWN: 34,
            END: 35,
            HOME: 36,
            LEFT: 37,
            UP: 38,
            RIGHT: 39,
            DOWN: 40,
            PLUS: 43,
            MINUS: 44,
            INSERT: 45,
            DELETE: 46,
            HELP: 47,
            NUM_LOCK: 144,
        }),
        c.KeyCode))
            c.KeyCode.hasOwnProperty(e) && !e.match(/[a-z]/) && (c.Keyboard[e] = c.KeyCode[e]);
        for (var f in ((c.Component = function () {}),
        (c.Component.Angle = function () {}),
        (c.Component.Angle.prototype = {
            angle: {
                get: function () {
                    return c.Math.wrapAngle(c.Math.radToDeg(this.rotation));
                },
                set: function (a) {
                    this.rotation = c.Math.degToRad(c.Math.wrapAngle(a));
                },
            },
        }),
        (c.Component.Animation = function () {}),
        (c.Component.Animation.prototype = {
            play: function (a, b, c, d) {
                if (this.animations) return this.animations.play(a, b, c, d);
            },
        }),
        (c.Component.AutoCull = function () {}),
        (c.Component.AutoCull.prototype = {
            autoCull: !1,
            inCamera: {
                get: function () {
                    return (
                        this.autoCull || this.checkWorldBounds || (this._bounds.copyFrom(this.getBounds()), (this._bounds.x += this.game.camera.view.x), (this._bounds.y += this.game.camera.view.y)),
                        this.game.world.camera.view.intersects(this._bounds)
                    );
                },
            },
        }),
        (c.Component.Bounds = function () {}),
        (c.Component.Bounds.prototype = {
            offsetX: {
                get: function () {
                    return this.anchor.x * this.width;
                },
            },
            offsetY: {
                get: function () {
                    return this.anchor.y * this.height;
                },
            },
            centerX: {
                get: function () {
                    return this.x - this.offsetX + 0.5 * this.width;
                },
                set: function (a) {
                    this.x = a + this.offsetX - 0.5 * this.width;
                },
            },
            centerY: {
                get: function () {
                    return this.y - this.offsetY + 0.5 * this.height;
                },
                set: function (a) {
                    this.y = a + this.offsetY - 0.5 * this.height;
                },
            },
            left: {
                get: function () {
                    return this.x - this.offsetX;
                },
                set: function (a) {
                    this.x = a + this.offsetX;
                },
            },
            right: {
                get: function () {
                    return this.x + this.width - this.offsetX;
                },
                set: function (a) {
                    this.x = a - this.width + this.offsetX;
                },
            },
            top: {
                get: function () {
                    return this.y - this.offsetY;
                },
                set: function (a) {
                    this.y = a + this.offsetY;
                },
            },
            bottom: {
                get: function () {
                    return this.y + this.height - this.offsetY;
                },
                set: function (a) {
                    this.y = a - this.height + this.offsetY;
                },
            },
            alignIn: function (a, b, d, e) {
                switch ((void 0 === d && (d = 0), void 0 === e && (e = 0), b)) {
                    default:
                    case c.TOP_LEFT:
                        (this.left = a.left - d), (this.top = a.top - e);
                        break;
                    case c.TOP_CENTER:
                        (this.centerX = a.centerX + d), (this.top = a.top - e);
                        break;
                    case c.TOP_RIGHT:
                        (this.right = a.right + d), (this.top = a.top - e);
                        break;
                    case c.LEFT_CENTER:
                        (this.left = a.left - d), (this.centerY = a.centerY + e);
                        break;
                    case c.CENTER:
                        (this.centerX = a.centerX + d), (this.centerY = a.centerY + e);
                        break;
                    case c.RIGHT_CENTER:
                        (this.right = a.right + d), (this.centerY = a.centerY + e);
                        break;
                    case c.BOTTOM_LEFT:
                        (this.left = a.left - d), (this.bottom = a.bottom + e);
                        break;
                    case c.BOTTOM_CENTER:
                        (this.centerX = a.centerX + d), (this.bottom = a.bottom + e);
                        break;
                    case c.BOTTOM_RIGHT:
                        (this.right = a.right + d), (this.bottom = a.bottom + e);
                }
                return this;
            },
            alignTo: function (a, b, d, e) {
                switch ((void 0 === d && (d = 0), void 0 === e && (e = 0), b)) {
                    default:
                    case c.TOP_LEFT:
                        (this.left = a.left - d), (this.bottom = a.top - e);
                        break;
                    case c.TOP_CENTER:
                        (this.centerX = a.centerX + d), (this.bottom = a.top - e);
                        break;
                    case c.TOP_RIGHT:
                        (this.right = a.right + d), (this.bottom = a.top - e);
                        break;
                    case c.LEFT_TOP:
                        (this.right = a.left - d), (this.top = a.top - e);
                        break;
                    case c.LEFT_CENTER:
                        (this.right = a.left - d), (this.centerY = a.centerY + e);
                        break;
                    case c.LEFT_BOTTOM:
                        (this.right = a.left - d), (this.bottom = a.bottom + e);
                        break;
                    case c.RIGHT_TOP:
                        (this.left = a.right + d), (this.top = a.top - e);
                        break;
                    case c.RIGHT_CENTER:
                        (this.left = a.right + d), (this.centerY = a.centerY + e);
                        break;
                    case c.RIGHT_BOTTOM:
                        (this.left = a.right + d), (this.bottom = a.bottom + e);
                        break;
                    case c.BOTTOM_LEFT:
                        (this.left = a.left - d), (this.top = a.bottom + e);
                        break;
                    case c.BOTTOM_CENTER:
                        (this.centerX = a.centerX + d), (this.top = a.bottom + e);
                        break;
                    case c.BOTTOM_RIGHT:
                        (this.right = a.right + d), (this.top = a.bottom + e);
                }
                return this;
            },
        }),
        (c.Group.prototype.alignIn = c.Component.Bounds.prototype.alignIn),
        (c.Group.prototype.alignTo = c.Component.Bounds.prototype.alignTo),
        (c.Component.BringToTop = function () {}),
        (c.Component.BringToTop.prototype.bringToTop = function () {
            return this.parent && this.parent.bringToTop(this), this;
        }),
        (c.Component.BringToTop.prototype.sendToBack = function () {
            return this.parent && this.parent.sendToBack(this), this;
        }),
        (c.Component.BringToTop.prototype.moveUp = function () {
            return this.parent && this.parent.moveUp(this), this;
        }),
        (c.Component.BringToTop.prototype.moveDown = function () {
            return this.parent && this.parent.moveDown(this), this;
        }),
        (c.Component.Core = function () {}),
        (c.Component.Core.install = function (a) {
            c.Utils.mixinPrototype(this, c.Component.Core.prototype), (this.components = {});
            for (var b = 0; b < a.length; b++) {
                var d = a[b],
                    e = !1;
                "Destroy" === d && (e = !0), c.Utils.mixinPrototype(this, c.Component[d].prototype, e), (this.components[d] = !0);
            }
        }),
        (c.Component.Core.init = function (a, b, d, e, f) {
            (this.game = a),
                (this.key = e),
                (this.data = {}),
                this.position.set(b, d),
                (this.world = new c.Point(b, d)),
                (this.previousPosition = new c.Point(b, d)),
                (this.events = new c.Events(this)),
                (this._bounds = new c.Rectangle()),
                this.components.PhysicsBody && (this.body = this.body),
                this.components.Animation && (this.animations = new c.AnimationManager(this)),
                this.components.LoadTexture && null !== e && this.loadTexture(e, f),
                this.components.FixedToCamera && (this.cameraOffset = new c.Point(b, d));
        }),
        (c.Component.Core.preUpdate = function () {
            if (!this.pendingDestroy) {
                if ((this.previousPosition.set(this.world.x, this.world.y), (this.previousRotation = this.rotation), !this.exists || !this.parent.exists)) return !(this.renderOrderID = -1);
                this.world.setTo(this.game.camera.x + this.worldTransform.tx, this.game.camera.y + this.worldTransform.ty),
                    this.visible && (this.renderOrderID = this.game.stage.currentRenderOrderID++),
                    this.animations && this.animations.update(),
                    this.body && this.body.preUpdate();
                for (var a = 0; a < this.children.length; a++) this.children[a].preUpdate();
                return !0;
            }
            this.destroy();
        }),
        (c.Component.Core.prototype = {
            game: null,
            name: "",
            data: {},
            components: {},
            z: 0,
            events: void 0,
            animations: void 0,
            key: "",
            world: null,
            debug: !1,
            previousPosition: null,
            previousRotation: 0,
            renderOrderID: 0,
            fresh: !0,
            pendingDestroy: !1,
            _bounds: null,
            _exists: !0,
            exists: {
                get: function () {
                    return this._exists;
                },
                set: function (a) {
                    a
                        ? ((this._exists = !0), this.body && this.body.type === c.Physics.P2JS && this.body.addToWorld(), (this.visible = !0))
                        : ((this._exists = !1), this.body && this.body.type === c.Physics.P2JS && this.body.removeFromWorld(), (this.visible = !1));
                },
            },
            update: function () {},
            postUpdate: function () {
                this.customRender && this.key.render(), this.components.PhysicsBody && c.Component.PhysicsBody.postUpdate.call(this), this.components.FixedToCamera && c.Component.FixedToCamera.postUpdate.call(this);
                for (var a = 0; a < this.children.length; a++) this.children[a].postUpdate();
            },
        }),
        (c.Component.Crop = function () {}),
        (c.Component.Crop.prototype = {
            cropRect: null,
            _crop: null,
            crop: function (a, b) {
                void 0 === b && (b = !1),
                    a
                        ? (b && null !== this.cropRect ? this.cropRect.setTo(a.x, a.y, a.width, a.height) : b && null === this.cropRect ? (this.cropRect = new c.Rectangle(a.x, a.y, a.width, a.height)) : (this.cropRect = a),
                          this.updateCrop())
                        : ((this._crop = null), (this.cropRect = null), this.resetFrame());
            },
            updateCrop: function () {
                if (this.cropRect) {
                    var a = this.texture.crop.x,
                        b = this.texture.crop.y,
                        d = this.texture.crop.width,
                        e = this.texture.crop.height;
                    (this._crop = c.Rectangle.clone(this.cropRect, this._crop)), (this._crop.x += this._frame.x), (this._crop.y += this._frame.y);
                    var f = Math.max(this._frame.x, this._crop.x),
                        g = Math.max(this._frame.y, this._crop.y),
                        h = Math.min(this._frame.right, this._crop.right) - f,
                        i = Math.min(this._frame.bottom, this._crop.bottom) - g;
                    (this.texture.crop.x = f),
                        (this.texture.crop.y = g),
                        (this.texture.crop.width = h),
                        (this.texture.crop.height = i),
                        (this.texture.frame.width = Math.min(h, this.cropRect.width)),
                        (this.texture.frame.height = Math.min(i, this.cropRect.height)),
                        (this.texture.width = this.texture.frame.width),
                        (this.texture.height = this.texture.frame.height),
                        this.texture._updateUvs(),
                        16777215 === this.tint || (a === f && b === g && d === h && e === i) || (this.texture.requiresReTint = !0);
                }
            },
        }),
        (c.Component.Delta = function () {}),
        (c.Component.Delta.prototype = {
            deltaX: {
                get: function () {
                    return this.world.x - this.previousPosition.x;
                },
            },
            deltaY: {
                get: function () {
                    return this.world.y - this.previousPosition.y;
                },
            },
            deltaZ: {
                get: function () {
                    return this.rotation - this.previousRotation;
                },
            },
        }),
        (c.Component.Destroy = function () {}),
        (c.Component.Destroy.prototype = {
            destroyPhase: !1,
            destroy: function (a, b) {
                if (null !== this.game && !this.destroyPhase) {
                    void 0 === a && (a = !0),
                        void 0 === b && (b = !1),
                        (this.destroyPhase = !0),
                        this.events && this.events.onDestroy$dispatch(this),
                        this.parent && (this.parent instanceof c.Group ? this.parent.remove(this) : this.parent.removeChild(this)),
                        this.input && this.input.destroy(),
                        this.animations && this.animations.destroy(),
                        this.body && this.body.destroy(),
                        this.events && this.events.destroy(),
                        this.game.tweens.removeFrom(this);
                    var d = this.children.length;
                    if (a) for (; d--; ) this.children[d].destroy(a);
                    else for (; d--; ) this.removeChild(this.children[d]);
                    this._crop && ((this._crop = null), (this.cropRect = null)),
                        this._frame && (this._frame = null),
                        c.Video && this.key instanceof c.Video && this.key.onChangeSource.remove(this.resizeFrame, this),
                        c.BitmapText && this._glyphs && (this._glyphs = []),
                        (this.alive = !1),
                        (this.exists = !1),
                        (this.visible = !1),
                        (this.filters = null),
                        (this.mask = null),
                        (this.game = null),
                        (this.data = {}),
                        (this.renderable = !1),
                        this.transformCallback && ((this.transformCallback = null), (this.transformCallbackContext = null)),
                        (this.hitArea = null),
                        (this.parent = null),
                        (this.stage = null),
                        (this.worldTransform = null),
                        (this.filterArea = null),
                        (this._bounds = null),
                        (this._currentBounds = null),
                        (this._mask = null),
                        this._destroyCachedSprite(),
                        b && this.texture.destroy(!0),
                        (this.destroyPhase = !1),
                        (this.pendingDestroy = !1);
                }
            },
        }),
        (c.Events = function (a) {
            this.parent = a;
        }),
        (c.Events.prototype = {
            destroy: function () {
                (this._parent = null),
                    this._onDestroy && this._onDestroy.dispose(),
                    this._onAddedToGroup && this._onAddedToGroup.dispose(),
                    this._onRemovedFromGroup && this._onRemovedFromGroup.dispose(),
                    this._onRemovedFromWorld && this._onRemovedFromWorld.dispose(),
                    this._onKilled && this._onKilled.dispose(),
                    this._onRevived && this._onRevived.dispose(),
                    this._onEnterBounds && this._onEnterBounds.dispose(),
                    this._onOutOfBounds && this._onOutOfBounds.dispose(),
                    this._onInputOver && this._onInputOver.dispose(),
                    this._onInputOut && this._onInputOut.dispose(),
                    this._onInputDown && this._onInputDown.dispose(),
                    this._onInputUp && this._onInputUp.dispose(),
                    this._onDragStart && this._onDragStart.dispose(),
                    this._onDragUpdate && this._onDragUpdate.dispose(),
                    this._onDragStop && this._onDragStop.dispose(),
                    this._onAnimationStart && this._onAnimationStart.dispose(),
                    this._onAnimationComplete && this._onAnimationComplete.dispose(),
                    this._onAnimationLoop && this._onAnimationLoop.dispose();
            },
            onAddedToGroup: null,
            onRemovedFromGroup: null,
            onRemovedFromWorld: null,
            onDestroy: null,
            onKilled: null,
            onRevived: null,
            onOutOfBounds: null,
            onEnterBounds: null,
            onInputOver: null,
            onInputOut: null,
            onInputDown: null,
            onInputUp: null,
            onDragStart: null,
            onDragUpdate: null,
            onDragStop: null,
            onAnimationStart: null,
            onAnimationComplete: null,
            onAnimationLoop: null,
        }),
        (c.Events.prototype.constructor = c.Events),
        c.Events.prototype))
            c.Events.prototype.hasOwnProperty(f) &&
                0 === f.indexOf("on") &&
                null === c.Events.prototype[f] &&
                (function (a, b) {
                    "use strict";
                    Object.defineProperty(c.Events.prototype, a, {
                        get: function () {
                            return this[b] || (this[b] = new c.Signal());
                        },
                    }),
                        (c.Events.prototype[a + "$dispatch"] = function () {
                            return this[b] ? this[b].dispatch.apply(this[b], arguments) : null;
                        });
                })(f, "_" + f);
        (c.Component.FixedToCamera = function () {}),
            (c.Component.FixedToCamera.postUpdate = function () {
                this.fixedToCamera && ((this.position.x = (this.game.camera.view.x + this.cameraOffset.x) / this.game.camera.scale.x), (this.position.y = (this.game.camera.view.y + this.cameraOffset.y) / this.game.camera.scale.y));
            }),
            (c.Component.FixedToCamera.prototype = {
                _fixedToCamera: !1,
                fixedToCamera: {
                    get: function () {
                        return this._fixedToCamera;
                    },
                    set: function (a) {
                        a ? ((this._fixedToCamera = !0), this.cameraOffset.set(this.x, this.y)) : (this._fixedToCamera = !1);
                    },
                },
                cameraOffset: new c.Point(),
            }),
            (c.Component.Health = function () {}),
            (c.Component.Health.prototype = {
                health: 1,
                maxHealth: 100,
                damage: function (a) {
                    return this.alive && ((this.health -= a), this.health <= 0 && this.kill()), this;
                },
                setHealth: function (a) {
                    return (this.health = a), this.health > this.maxHealth && (this.health = this.maxHealth), this;
                },
                heal: function (a) {
                    return this.alive && ((this.health += a), this.health > this.maxHealth && (this.health = this.maxHealth)), this;
                },
            }),
            (c.Component.InCamera = function () {}),
            (c.Component.InCamera.prototype = {
                inCamera: {
                    get: function () {
                        return this.game.world.camera.view.intersects(this._bounds);
                    },
                },
            }),
            (c.Component.InputEnabled = function () {}),
            (c.Component.InputEnabled.prototype = {
                input: null,
                inputEnabled: {
                    get: function () {
                        return this.input && this.input.enabled;
                    },
                    set: function (a) {
                        a ? (null === this.input ? ((this.input = new c.InputHandler(this)), this.input.start()) : this.input && !this.input.enabled && this.input.start()) : this.input && this.input.enabled && this.input.stop();
                    },
                },
            }),
            (c.Component.InWorld = function () {}),
            (c.Component.InWorld.preUpdate = function () {
                if (this.autoCull || this.checkWorldBounds) {
                    if ((this._bounds.copyFrom(this.getBounds()), (this._bounds.x += this.game.camera.view.x), (this._bounds.y += this.game.camera.view.y), this.autoCull))
                        if (this.game.world.camera.view.intersects(this._bounds)) (this.renderable = !0), this.game.world.camera.totalInView++;
                        else if (((this.renderable = !1), this.outOfCameraBoundsKill)) return this.kill(), !1;
                    if (this.checkWorldBounds)
                        if (this._outOfBoundsFired && this.game.world.bounds.intersects(this._bounds)) (this._outOfBoundsFired = !1), this.events.onEnterBounds$dispatch(this);
                        else if (!this._outOfBoundsFired && !this.game.world.bounds.intersects(this._bounds) && ((this._outOfBoundsFired = !0), this.events.onOutOfBounds$dispatch(this), this.outOfBoundsKill)) return this.kill(), !1;
                }
                return !0;
            }),
            (c.Component.InWorld.prototype = {
                checkWorldBounds: !1,
                outOfBoundsKill: !1,
                outOfCameraBoundsKill: !1,
                _outOfBoundsFired: !1,
                inWorld: {
                    get: function () {
                        return this.game.world.bounds.intersects(this.getBounds());
                    },
                },
            }),
            (c.Component.LifeSpan = function () {}),
            (c.Component.LifeSpan.preUpdate = function () {
                return !(0 < this.lifespan && ((this.lifespan -= this.game.time.physicsElapsedMS), this.lifespan <= 0) && (this.kill(), 1));
            }),
            (c.Component.LifeSpan.prototype = {
                alive: !0,
                lifespan: 0,
                revive: function (a) {
                    return void 0 === a && (a = 100), (this.alive = !0), (this.exists = !0), (this.visible = !0), "function" == typeof this.setHealth && this.setHealth(a), this.events && this.events.onRevived$dispatch(this), this;
                },
                kill: function () {
                    return (this.alive = !1), (this.exists = !1), (this.visible = !1), this.events && this.events.onKilled$dispatch(this), this;
                },
            }),
            (c.Component.LoadTexture = function () {}),
            (c.Component.LoadTexture.prototype = {
                customRender: !1,
                _frame: null,
                loadTexture: function (a, b, d) {
                    (b = a === c.PENDING_ATLAS ? ((a = b), 0) : b || 0), (d || void 0 === d) && this.animations && this.animations.stop(), (this.key = a), (this.customRender = !1);
                    var e = this.game.cache,
                        f = !0,
                        g = !this.texture.baseTexture.scaleMode;
                    if (c.RenderTexture && a instanceof c.RenderTexture) (this.key = a.key), this.setTexture(a);
                    else if (c.BitmapData && a instanceof c.BitmapData)
                        (this.customRender = !0),
                            this.setTexture(a.texture),
                            (f = e.hasFrameData(a.key, c.Cache.BITMAPDATA) ? !this.animations.loadFrameData(e.getFrameData(a.key, c.Cache.BITMAPDATA), b) : !this.animations.loadFrameData(a.frameData, 0));
                    else if (c.Video && a instanceof c.Video) {
                        this.customRender = !0;
                        var h = a.texture.valid;
                        this.setTexture(a.texture), this.setFrame(a.texture.frame.clone()), a.onChangeSource.add(this.resizeFrame, this), (this.texture.valid = h);
                    } else if (c.Tilemap && a instanceof c.TilemapLayer) this.setTexture(PIXI.Texture.fromCanvas(a.canvas));
                    else if (a instanceof PIXI.Texture) this.setTexture(a);
                    else {
                        var i = e.getImage(a, !0);
                        (this.key = i.key), this.setTexture(new PIXI.Texture(i.base)), (this.texture.baseTexture.skipRender = "__default" === a), (f = !this.animations.loadFrameData(i.frameData, b));
                    }
                    f && (this._frame = c.Rectangle.clone(this.texture.frame)), g || (this.texture.baseTexture.scaleMode = 1);
                },
                setFrame: function (a) {
                    (this._frame = a),
                        (this.texture.frame.x = a.x),
                        (this.texture.frame.y = a.y),
                        (this.texture.frame.width = a.width),
                        (this.texture.frame.height = a.height),
                        (this.texture.crop.x = a.x),
                        (this.texture.crop.y = a.y),
                        (this.texture.crop.width = a.width),
                        (this.texture.crop.height = a.height),
                        a.trimmed
                            ? (this.texture.trim
                                  ? ((this.texture.trim.x = a.spriteSourceSizeX), (this.texture.trim.y = a.spriteSourceSizeY), (this.texture.trim.width = a.sourceSizeW), (this.texture.trim.height = a.sourceSizeH))
                                  : (this.texture.trim = { x: a.spriteSourceSizeX, y: a.spriteSourceSizeY, width: a.sourceSizeW, height: a.sourceSizeH }),
                              (this.texture.width = a.sourceSizeW),
                              (this.texture.height = a.sourceSizeH),
                              (this.texture.frame.width = a.sourceSizeW),
                              (this.texture.frame.height = a.sourceSizeH))
                            : !a.trimmed && this.texture.trim && (this.texture.trim = null),
                        this.cropRect && this.updateCrop(),
                        (this.texture.requiresReTint = !0),
                        this.texture._updateUvs(),
                        this.tilingTexture && (this.refreshTexture = !0);
                },
                resizeFrame: function (a, b, c) {
                    this.texture.frame.resize(b, c), this.texture.setFrame(this.texture.frame);
                },
                resetFrame: function () {
                    this._frame && this.setFrame(this._frame);
                },
                frame: {
                    get: function () {
                        return this.animations.frame;
                    },
                    set: function (a) {
                        this.animations.frame = a;
                    },
                },
                frameName: {
                    get: function () {
                        return this.animations.frameName;
                    },
                    set: function (a) {
                        this.animations.frameName = a;
                    },
                },
            }),
            (c.Component.Overlap = function () {}),
            (c.Component.Overlap.prototype = {
                overlap: function (a) {
                    return c.Rectangle.intersects(this.getBounds(), a.getBounds());
                },
            }),
            (c.Component.PhysicsBody = function () {}),
            (c.Component.PhysicsBody.preUpdate = function () {
                return this.fresh && this.exists
                    ? (this.world.setTo(this.parent.position.x + this.position.x, this.parent.position.y + this.position.y),
                      (this.worldTransform.tx = this.world.x),
                      (this.worldTransform.ty = this.world.y),
                      this.previousPosition.set(this.world.x, this.world.y),
                      (this.previousRotation = this.rotation),
                      this.body && this.body.preUpdate(),
                      (this.fresh = !1))
                    : (this.previousPosition.set(this.world.x, this.world.y), (this.previousRotation = this.rotation), !(!this._exists || !this.parent.exists) || !(this.renderOrderID = -1));
            }),
            (c.Component.PhysicsBody.postUpdate = function () {
                this.exists && this.body && this.body.postUpdate();
            }),
            (c.Component.PhysicsBody.prototype = {
                body: null,
                x: {
                    get: function () {
                        return this.position.x;
                    },
                    set: function (a) {
                        (this.position.x = a), this.body && !this.body.dirty && (this.body._reset = !0);
                    },
                },
                y: {
                    get: function () {
                        return this.position.y;
                    },
                    set: function (a) {
                        (this.position.y = a), this.body && !this.body.dirty && (this.body._reset = !0);
                    },
                },
            }),
            (c.Component.Reset = function () {}),
            (c.Component.Reset.prototype.reset = function (a, b, c) {
                return (
                    void 0 === c && (c = 1),
                    this.world.set(a, b),
                    this.position.set(a, b),
                    (this.fresh = !0),
                    (this.exists = !0),
                    (this.visible = !0),
                    (this.renderable = !0),
                    this.components.InWorld && (this._outOfBoundsFired = !1),
                    this.components.LifeSpan && ((this.alive = !0), (this.health = c)),
                    this.components.PhysicsBody && this.body && this.body.reset(a, b, !1, !1),
                    this
                );
            }),
            (c.Component.ScaleMinMax = function () {}),
            (c.Component.ScaleMinMax.prototype = {
                transformCallback: null,
                transformCallbackContext: this,
                scaleMin: null,
                scaleMax: null,
                checkTransform: function (a) {
                    this.scaleMin && (a.a < this.scaleMin.x && (a.a = this.scaleMin.x), a.d < this.scaleMin.y && (a.d = this.scaleMin.y)),
                        this.scaleMax && (a.a > this.scaleMax.x && (a.a = this.scaleMax.x), a.d > this.scaleMax.y && (a.d = this.scaleMax.y));
                },
                setScaleMinMax: function (a, b, d, e) {
                    void 0 === b ? (b = d = e = a) : void 0 === d && ((d = e = b), (b = a)),
                        null === a ? (this.scaleMin = null) : this.scaleMin ? this.scaleMin.set(a, b) : (this.scaleMin = new c.Point(a, b)),
                        null === d ? (this.scaleMax = null) : this.scaleMax ? this.scaleMax.set(d, e) : (this.scaleMax = new c.Point(d, e)),
                        null === this.scaleMin ? (this.transformCallback = null) : ((this.transformCallback = this.checkTransform), (this.transformCallbackContext = this));
                },
            }),
            (c.Component.Smoothed = function () {}),
            (c.Component.Smoothed.prototype = {
                smoothed: {
                    get: function () {
                        return !this.texture.baseTexture.scaleMode;
                    },
                    set: function (a) {
                        a ? this.texture && (this.texture.baseTexture.scaleMode = 0) : this.texture && (this.texture.baseTexture.scaleMode = 1);
                    },
                },
            }),
            (c.GameObjectFactory = function (a) {
                (this.game = a), (this.world = this.game.world);
            }),
            (c.GameObjectFactory.prototype = {
                existing: function (a) {
                    return this.world.add(a);
                },
                weapon: function (a, b, d, e) {
                    var f = this.game.plugins.add(c.Weapon);
                    return f.createBullets(a, b, d, e), f;
                },
                image: function (a, b, d, e, f) {
                    return void 0 === f && (f = this.world), f.add(new c.Image(this.game, a, b, d, e));
                },
                sprite: function (a, b, c, d, e) {
                    return void 0 === e && (e = this.world), e.create(a, b, c, d);
                },
                creature: function (a, b, d, e, f) {
                    void 0 === f && (f = this.world);
                    var g = new c.Creature(this.game, a, b, d, e);
                    return f.add(g), g;
                },
                tween: function (a) {
                    return this.game.tweens.create(a);
                },
                group: function (a, b, d, e, f) {
                    return new c.Group(this.game, a, b, d, e, f);
                },
                physicsGroup: function (a, b, d, e) {
                    return new c.Group(this.game, b, d, e, !0, a);
                },
                spriteBatch: function (a, b, d) {
                    return void 0 === a && (a = null), void 0 === b && (b = "group"), void 0 === d && (d = !1), new c.SpriteBatch(this.game, a, b, d);
                },
                audio: function (a, b, c, d) {
                    return this.game.sound.add(a, b, c, d);
                },
                sound: function (a, b, c, d) {
                    return this.game.sound.add(a, b, c, d);
                },
                audioSprite: function (a) {
                    return this.game.sound.addSprite(a);
                },
                tileSprite: function (a, b, d, e, f, g, h) {
                    return void 0 === h && (h = this.world), h.add(new c.TileSprite(this.game, a, b, d, e, f, g));
                },
                rope: function (a, b, d, e, f, g) {
                    return void 0 === g && (g = this.world), g.add(new c.Rope(this.game, a, b, d, e, f));
                },
                text: function (a, b, d, e, f) {
                    return void 0 === f && (f = this.world), f.add(new c.Text(this.game, a, b, d, e));
                },
                button: function (a, b, d, e, f, g, h, i, j, k) {
                    return void 0 === k && (k = this.world), k.add(new c.Button(this.game, a, b, d, e, f, g, h, i, j));
                },
                graphics: function (a, b, d) {
                    return void 0 === d && (d = this.world), d.add(new c.Graphics(this.game, a, b));
                },
                emitter: function (a, b, d) {
                    return this.game.particles.add(new c.Particles.Arcade.Emitter(this.game, a, b, d));
                },
                retroFont: function (a, b, d, e, f, g, h, i, j) {
                    return new c.RetroFont(this.game, a, b, d, e, f, g, h, i, j);
                },
                bitmapText: function (a, b, d, e, f, g) {
                    return void 0 === g && (g = this.world), g.add(new c.BitmapText(this.game, a, b, d, e, f));
                },
                tilemap: function (a, b, d, e, f) {
                    return new c.Tilemap(this.game, a, b, d, e, f);
                },
                renderTexture: function (a, b, d, e) {
                    (void 0 !== d && "" !== d) || (d = this.game.rnd.uuid()), void 0 === e && (e = !1);
                    var f = new c.RenderTexture(this.game, a, b, d);
                    return e && this.game.cache.addRenderTexture(d, f), f;
                },
                video: function (a, b) {
                    return new c.Video(this.game, a, b);
                },
                bitmapData: function (a, b, d, e) {
                    void 0 === e && (e = !1), (void 0 !== d && "" !== d) || (d = this.game.rnd.uuid());
                    var f = new c.BitmapData(this.game, d, a, b);
                    return e && this.game.cache.addBitmapData(d, f), f;
                },
                filter: function (a) {
                    var b = Array.prototype.slice.call(arguments, 1);
                    return (a = new c.Filter[a](this.game)).init.apply(a, b), a;
                },
                plugin: function (a) {
                    return this.game.plugins.add(a);
                },
            }),
            (c.GameObjectFactory.prototype.constructor = c.GameObjectFactory),
            (c.GameObjectCreator = function (a) {
                (this.game = a), (this.world = this.game.world);
            }),
            (c.GameObjectCreator.prototype = {
                image: function (a, b, d, e) {
                    return new c.Image(this.game, a, b, d, e);
                },
                sprite: function (a, b, d, e) {
                    return new c.Sprite(this.game, a, b, d, e);
                },
                tween: function (a) {
                    return new c.Tween(a, this.game, this.game.tweens);
                },
                group: function (a, b, d, e, f) {
                    return new c.Group(this.game, a, b, d, e, f);
                },
                spriteBatch: function (a, b, d) {
                    return void 0 === b && (b = "group"), void 0 === d && (d = !1), new c.SpriteBatch(this.game, a, b, d);
                },
                audio: function (a, b, c, d) {
                    return this.game.sound.add(a, b, c, d);
                },
                audioSprite: function (a) {
                    return this.game.sound.addSprite(a);
                },
                sound: function (a, b, c, d) {
                    return this.game.sound.add(a, b, c, d);
                },
                tileSprite: function (a, b, d, e, f, g) {
                    return new c.TileSprite(this.game, a, b, d, e, f, g);
                },
                rope: function (a, b, d, e, f) {
                    return new c.Rope(this.game, a, b, d, e, f);
                },
                text: function (a, b, d, e) {
                    return new c.Text(this.game, a, b, d, e);
                },
                button: function (a, b, d, e, f, g, h, i, j) {
                    return new c.Button(this.game, a, b, d, e, f, g, h, i, j);
                },
                graphics: function (a, b) {
                    return new c.Graphics(this.game, a, b);
                },
                emitter: function (a, b, d) {
                    return new c.Particles.Arcade.Emitter(this.game, a, b, d);
                },
                retroFont: function (a, b, d, e, f, g, h, i, j) {
                    return new c.RetroFont(this.game, a, b, d, e, f, g, h, i, j);
                },
                bitmapText: function (a, b, d, e, f, g) {
                    return new c.BitmapText(this.game, a, b, d, e, f, g);
                },
                tilemap: function (a, b, d, e, f) {
                    return new c.Tilemap(this.game, a, b, d, e, f);
                },
                renderTexture: function (a, b, d, e) {
                    (void 0 !== d && "" !== d) || (d = this.game.rnd.uuid()), void 0 === e && (e = !1);
                    var f = new c.RenderTexture(this.game, a, b, d);
                    return e && this.game.cache.addRenderTexture(d, f), f;
                },
                bitmapData: function (a, b, d, e) {
                    void 0 === e && (e = !1), (void 0 !== d && "" !== d) || (d = this.game.rnd.uuid());
                    var f = new c.BitmapData(this.game, d, a, b);
                    return e && this.game.cache.addBitmapData(d, f), f;
                },
                filter: function (a) {
                    var b = Array.prototype.slice.call(arguments, 1);
                    return (a = new c.Filter[a](this.game)).init.apply(a, b), a;
                },
            }),
            (c.GameObjectCreator.prototype.constructor = c.GameObjectCreator),
            (c.Sprite = function (a, b, d, e, f) {
                (b = b || 0), (d = d || 0), (e = e || null), (f = f || null), (this.type = c.SPRITE), (this.physicsType = c.SPRITE), PIXI.Sprite.call(this, c.Cache.DEFAULT), c.Component.Core.init.call(this, a, b, d, e, f);
            }),
            (c.Sprite.prototype = Object.create(PIXI.Sprite.prototype)),
            (c.Sprite.prototype.constructor = c.Sprite),
            c.Component.Core.install.call(c.Sprite.prototype, [
                "Angle",
                "Animation",
                "AutoCull",
                "Bounds",
                "BringToTop",
                "Crop",
                "Delta",
                "Destroy",
                "FixedToCamera",
                "Health",
                "InCamera",
                "InputEnabled",
                "InWorld",
                "LifeSpan",
                "LoadTexture",
                "Overlap",
                "PhysicsBody",
                "Reset",
                "ScaleMinMax",
                "Smoothed",
            ]),
            (c.Sprite.prototype.preUpdatePhysics = c.Component.PhysicsBody.preUpdate),
            (c.Sprite.prototype.preUpdateLifeSpan = c.Component.LifeSpan.preUpdate),
            (c.Sprite.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate),
            (c.Sprite.prototype.preUpdateCore = c.Component.Core.preUpdate),
            (c.Sprite.prototype.preUpdate = function () {
                return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore();
            }),
            (c.Image = function (a, b, d, e, f) {
                (b = b || 0), (d = d || 0), (e = e || null), (f = f || null), (this.type = c.IMAGE), PIXI.Sprite.call(this, c.Cache.DEFAULT), c.Component.Core.init.call(this, a, b, d, e, f);
            }),
            (c.Image.prototype = Object.create(PIXI.Sprite.prototype)),
            (c.Image.prototype.constructor = c.Image),
            c.Component.Core.install.call(c.Image.prototype, [
                "Angle",
                "Animation",
                "AutoCull",
                "Bounds",
                "BringToTop",
                "Crop",
                "Destroy",
                "FixedToCamera",
                "InputEnabled",
                "LifeSpan",
                "LoadTexture",
                "Overlap",
                "Reset",
                "ScaleMinMax",
                "Smoothed",
            ]),
            (c.Image.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate),
            (c.Image.prototype.preUpdateCore = c.Component.Core.preUpdate),
            (c.Image.prototype.preUpdate = function () {
                return !!this.preUpdateInWorld() && this.preUpdateCore();
            }),
            (c.Button = function (a, b, d, e, f, g, h, i, j, k) {
                (b = b || 0),
                    (d = d || 0),
                    (e = e || null),
                    (f = f || null),
                    (g = g || this),
                    c.Image.call(this, a, b, d, e, i),
                    (this.type = c.BUTTON),
                    (this.physicsType = c.SPRITE),
                    (this._onOverFrame = null),
                    (this._onOutFrame = null),
                    (this._onDownFrame = null),
                    (this._onUpFrame = null),
                    (this.onOverSound = null),
                    (this.onOutSound = null),
                    (this.onDownSound = null),
                    (this.onUpSound = null),
                    (this.onOverSoundMarker = ""),
                    (this.onOutSoundMarker = ""),
                    (this.onDownSoundMarker = ""),
                    (this.onUpSoundMarker = ""),
                    (this.onInputOver = new c.Signal()),
                    (this.onInputOut = new c.Signal()),
                    (this.onInputDown = new c.Signal()),
                    (this.onInputUp = new c.Signal()),
                    (this.onOverMouseOnly = !0),
                    (this.justReleasedPreventsOver = c.PointerMode.TOUCH),
                    (this.freezeFrames = !1),
                    (this.forceOut = !1),
                    (this.inputEnabled = !0),
                    this.input.start(0, !0),
                    (this.input.useHandCursor = !0),
                    this.setFrames(h, i, j, k),
                    null !== f && this.onInputUp.add(f, g),
                    this.events.onInputOver.add(this.onInputOverHandler, this),
                    this.events.onInputOut.add(this.onInputOutHandler, this),
                    this.events.onInputDown.add(this.onInputDownHandler, this),
                    this.events.onInputUp.add(this.onInputUpHandler, this),
                    this.events.onRemovedFromWorld.add(this.removedFromWorld, this);
            }),
            (c.Button.prototype = Object.create(c.Image.prototype)),
            (c.Button.prototype.constructor = c.Button);
        var g = "Over",
            h = "Out",
            i = "Down",
            j = "Up";
        (c.Button.prototype.clearFrames = function () {
            this.setFrames(null, null, null, null);
        }),
            (c.Button.prototype.removedFromWorld = function () {
                this.inputEnabled = !1;
            }),
            (c.Button.prototype.setStateFrame = function (a, b, c) {
                var d = "_on" + a + "Frame";
                null !== b ? ((this[d] = b), c && this.changeStateFrame(a)) : (this[d] = null);
            }),
            (c.Button.prototype.changeStateFrame = function (a) {
                if (this.freezeFrames) return !1;
                var c = this["_on" + a + "Frame"];
                return "string" == typeof c ? ((this.frameName = c), !0) : "number" == typeof c && ((this.frame = c), !0);
            }),
            (c.Button.prototype.setFrames = function (a, b, c, d) {
                this.setStateFrame(g, a, this.input.pointerOver()), this.setStateFrame(h, b, !this.input.pointerOver()), this.setStateFrame(i, c, this.input.pointerDown()), this.setStateFrame(j, d, this.input.pointerUp());
            }),
            (c.Button.prototype.setStateSound = function (a, b, d) {
                var e = "on" + a + "Sound",
                    f = "on" + a + "SoundMarker";
                b instanceof c.Sound || b instanceof c.AudioSprite ? ((this[e] = b), (this[f] = "string" == typeof d ? d : "")) : ((this[e] = null), (this[f] = ""));
            }),
            (c.Button.prototype.playStateSound = function (a) {
                var c = this["on" + a + "Sound"];
                if (c) {
                    var e = this["on" + a + "SoundMarker"];
                    return c.play(e), !0;
                }
                return !1;
            }),
            (c.Button.prototype.setSounds = function (a, b, c, d, e, f, k, l) {
                this.setStateSound(g, a, b), this.setStateSound(h, e, f), this.setStateSound(i, c, d), this.setStateSound(j, k, l);
            }),
            (c.Button.prototype.setOverSound = function (a, b) {
                this.setStateSound(g, a, b);
            }),
            (c.Button.prototype.setOutSound = function (a, b) {
                this.setStateSound(h, a, b);
            }),
            (c.Button.prototype.setDownSound = function (a, b) {
                this.setStateSound(i, a, b);
            }),
            (c.Button.prototype.setUpSound = function (a, b) {
                this.setStateSound(j, a, b);
            }),
            (c.Button.prototype.onInputOverHandler = function (a, b) {
                (b.justReleased() && (this.justReleasedPreventsOver & b.pointerMode) === b.pointerMode) ||
                    (this.changeStateFrame(g), (this.onOverMouseOnly && !b.isMouse) || (this.playStateSound(g), this.onInputOver && this.onInputOver.dispatch(this, b)));
            }),
            (c.Button.prototype.onInputOutHandler = function (a, b) {
                this.changeStateFrame(h), this.playStateSound(h), this.onInputOut && this.onInputOut.dispatch(this, b);
            }),
            (c.Button.prototype.onInputDownHandler = function (a, b) {
                this.changeStateFrame(i), this.playStateSound(i), this.onInputDown && this.onInputDown.dispatch(this, b);
            }),
            (c.Button.prototype.onInputUpHandler = function (a, b, c) {
                if ((this.playStateSound(j), this.onInputUp && this.onInputUp.dispatch(this, b, c), !this.freezeFrames))
                    if (!0 === this.forceOut || (this.forceOut & b.pointerMode) === b.pointerMode) this.changeStateFrame(h);
                    else {
                        this.changeStateFrame(j) || (c ? this.changeStateFrame(g) : this.changeStateFrame(h));
                    }
            }),
            (c.SpriteBatch = function (a, b, d, e) {
                null != b || (b = a.world), PIXI.SpriteBatch.call(this), c.Group.call(this, a, b, d, e), (this.type = c.SPRITEBATCH);
            }),
            (c.SpriteBatch.prototype = c.Utils.extend(!0, c.SpriteBatch.prototype, PIXI.SpriteBatch.prototype, c.Group.prototype)),
            (c.SpriteBatch.prototype.constructor = c.SpriteBatch),
            (c.BitmapData = function (a, b, d, e, f) {
                (void 0 !== d && 0 !== d) || (d = 256),
                    (void 0 !== e && 0 !== e) || (e = 256),
                    void 0 === f && (f = !1),
                    (this.game = a),
                    (this.key = b),
                    (this.width = d),
                    (this.height = e),
                    (this.canvas = c.Canvas.create(this, d, e, null, f)),
                    (this.context = this.canvas.getContext("2d", { alpha: !0 })),
                    (this.ctx = this.context),
                    (this.smoothProperty = a.renderType === c.CANVAS ? a.renderer.renderSession.smoothProperty : c.Canvas.getSmoothingPrefix(this.context)),
                    (this.imageData = this.context.getImageData(0, 0, d, e)),
                    (this.data = null),
                    this.imageData && (this.data = this.imageData.data),
                    (this.pixels = null),
                    this.data &&
                        (this.imageData.data.buffer
                            ? ((this.buffer = this.imageData.data.buffer), (this.pixels = new Uint32Array(this.buffer)))
                            : window.ArrayBuffer
                            ? ((this.buffer = new ArrayBuffer(this.imageData.data.length)), (this.pixels = new Uint32Array(this.buffer)))
                            : (this.pixels = this.imageData.data)),
                    (this.baseTexture = new PIXI.BaseTexture(this.canvas)),
                    (this.texture = new PIXI.Texture(this.baseTexture)),
                    (this.frameData = new c.FrameData()),
                    (this.textureFrame = this.frameData.addFrame(new c.Frame(0, 0, 0, d, e, "bitmapData"))),
                    (this.texture.frame = this.textureFrame),
                    (this.type = c.BITMAPDATA),
                    (this.disableTextureUpload = !1),
                    (this.dirty = !1),
                    (this.cls = this.clear),
                    (this._image = null),
                    (this._pos = new c.Point()),
                    (this._size = new c.Point()),
                    (this._scale = new c.Point()),
                    (this._rotate = 0),
                    (this._alpha = { prev: 1, current: 1 }),
                    (this._anchor = new c.Point()),
                    (this._tempR = 0),
                    (this._tempG = 0),
                    (this._tempB = 0),
                    (this._circle = new c.Circle()),
                    (this._swapCanvas = void 0);
            }),
            (c.BitmapData.prototype = {
                move: function (a, b, c) {
                    return 0 !== a && this.moveH(a, c), 0 !== b && this.moveV(b, c), this;
                },
                moveH: function (a, b) {
                    void 0 === b && (b = !0), void 0 === this._swapCanvas && (this._swapCanvas = PIXI.CanvasPool.create(this, this.width, this.height));
                    var d = this._swapCanvas.getContext("2d"),
                        e = this.height,
                        f = this.canvas;
                    if ((d.clearRect(0, 0, this.width, this.height), a < 0)) {
                        a = Math.abs(a);
                        var g = this.width - a;
                        b && d.drawImage(f, 0, 0, a, e, g, 0, a, e), d.drawImage(f, a, 0, g, e, 0, 0, g, e);
                    } else {
                        g = this.width - a;
                        b && d.drawImage(f, g, 0, a, e, 0, 0, a, e), d.drawImage(f, 0, 0, g, e, a, 0, g, e);
                    }
                    return this.clear(), this.copy(this._swapCanvas);
                },
                moveV: function (a, b) {
                    void 0 === b && (b = !0), void 0 === this._swapCanvas && (this._swapCanvas = PIXI.CanvasPool.create(this, this.width, this.height));
                    var d = this._swapCanvas.getContext("2d"),
                        e = this.width,
                        f = this.canvas;
                    if ((d.clearRect(0, 0, this.width, this.height), a < 0)) {
                        a = Math.abs(a);
                        var g = this.height - a;
                        b && d.drawImage(f, 0, 0, e, a, 0, g, e, a), d.drawImage(f, 0, a, e, g, 0, 0, e, g);
                    } else {
                        g = this.height - a;
                        b && d.drawImage(f, 0, g, e, a, 0, 0, e, a), d.drawImage(f, 0, 0, e, g, 0, a, e, g);
                    }
                    return this.clear(), this.copy(this._swapCanvas);
                },
                add: function (a) {
                    if (Array.isArray(a)) for (var b = 0; b < a.length; b++) a[b].loadTexture && a[b].loadTexture(this);
                    else a.loadTexture(this);
                    return this;
                },
                load: function (a) {
                    if (("string" == typeof a && (a = this.game.cache.getImage(a)), a)) return this.resize(a.width, a.height), this.cls(), this.draw(a), this.update(), this;
                },
                clear: function (a, b, c, d) {
                    return void 0 === a && (a = 0), void 0 === b && (b = 0), void 0 === c && (c = this.width), void 0 === d && (d = this.height), this.context.clearRect(a, b, c, d), (this.dirty = !0), this;
                },
                fill: function (a, b, c, d) {
                    return void 0 === d && (d = 1), (this.context.fillStyle = "rgba(" + a + "," + b + "," + c + "," + d + ")"), this.context.fillRect(0, 0, this.width, this.height), (this.dirty = !0), this;
                },
                generateTexture: function (a) {
                    var b = new Image();
                    b.src = this.canvas.toDataURL("image/png");
                    var c = this.game.cache.addImage(a, "", b);
                    return new PIXI.Texture(c.base);
                },
                resize: function (a, b) {
                    return (
                        (a === this.width && b === this.height) ||
                            ((this.width = a),
                            (this.height = b),
                            (this.canvas.width = a),
                            (this.canvas.height = b),
                            void 0 !== this._swapCanvas && ((this._swapCanvas.width = a), (this._swapCanvas.height = b)),
                            (this.baseTexture.width = a),
                            (this.baseTexture.height = b),
                            (this.textureFrame.width = a),
                            (this.textureFrame.height = b),
                            (this.texture.width = a),
                            (this.texture.height = b),
                            (this.texture.crop.width = a),
                            (this.texture.crop.height = b),
                            this.update(),
                            (this.dirty = !0)),
                        this
                    );
                },
                update: function (a, b, c, d) {
                    return (
                        void 0 === a && (a = 0),
                        void 0 === b && (b = 0),
                        void 0 === c && (c = Math.max(1, this.width)),
                        void 0 === d && (d = Math.max(1, this.height)),
                        (this.imageData = this.context.getImageData(a, b, c, d)),
                        (this.data = this.imageData.data),
                        this.imageData.data.buffer
                            ? ((this.buffer = this.imageData.data.buffer), (this.pixels = new Uint32Array(this.buffer)))
                            : window.ArrayBuffer
                            ? ((this.buffer = new ArrayBuffer(this.imageData.data.length)), (this.pixels = new Uint32Array(this.buffer)))
                            : (this.pixels = this.imageData.data),
                        this
                    );
                },
                processPixelRGB: function (a, b, d, e, f, g) {
                    void 0 === d && (d = 0), void 0 === e && (e = 0), void 0 === f && (f = this.width), void 0 === g && (g = this.height);
                    for (var h = d + f, i = e + g, j = c.Color.createColor(), k = { r: 0, g: 0, b: 0, a: 0 }, l = !1, m = e; m < i; m++)
                        for (var n = d; n < h; n++) c.Color.unpackPixel(this.getPixel32(n, m), j), !1 !== (k = a.call(b, j, n, m)) && null != k && (this.setPixel32(n, m, k.r, k.g, k.b, k.a, !1), (l = !0));
                    return l && (this.context.putImageData(this.imageData, 0, 0), (this.dirty = !0)), this;
                },
                processPixel: function (a, b, c, d, e, f) {
                    void 0 === c && (c = 0), void 0 === d && (d = 0), void 0 === e && (e = this.width), void 0 === f && (f = this.height);
                    for (var g = c + e, h = d + f, i = 0, j = 0, k = !1, l = d; l < h; l++) for (var m = c; m < g; m++) (i = this.getPixel32(m, l)), (j = a.call(b, i, m, l)) !== i && ((this.pixels[l * this.width + m] = j), (k = !0));
                    return k && (this.context.putImageData(this.imageData, 0, 0), (this.dirty = !0)), this;
                },
                replaceRGB: function (a, b, d, e, f, g, h, i, j) {
                    var k = 0,
                        l = 0,
                        m = this.width,
                        n = this.height,
                        o = c.Color.packPixel(a, b, d, e);
                    void 0 !== j && j instanceof c.Rectangle && ((k = j.x), (l = j.y), (m = j.width), (n = j.height));
                    for (var p = 0; p < n; p++) for (var q = 0; q < m; q++) this.getPixel32(k + q, l + p) === o && this.setPixel32(k + q, l + p, f, g, h, i, !1);
                    return this.context.putImageData(this.imageData, 0, 0), (this.dirty = !0), this;
                },
                setHSL: function (a, b, d, e) {
                    var f = a || 0 === a,
                        g = b || 0 === b,
                        h = d || 0 === d;
                    if (f || g || h) {
                        void 0 === e && (e = new c.Rectangle(0, 0, this.width, this.height));
                        for (var i = c.Color.createColor(), j = e.y; j < e.bottom; j++)
                            for (var k = e.x; k < e.right; k++)
                                c.Color.unpackPixel(this.getPixel32(k, j), i, !0), f && (i.h = a), g && (i.s = b), h && (i.l = d), c.Color.HSLtoRGB(i.h, i.s, i.l, i), this.setPixel32(k, j, i.r, i.g, i.b, i.a, !1);
                        return this.context.putImageData(this.imageData, 0, 0), (this.dirty = !0), this;
                    }
                },
                shiftHSL: function (a, b, d, e) {
                    if ((null != a || (a = !1), null != b || (b = !1), null != d || (d = !1), a || b || d)) {
                        void 0 === e && (e = new c.Rectangle(0, 0, this.width, this.height));
                        for (var f = c.Color.createColor(), g = e.y; g < e.bottom; g++)
                            for (var h = e.x; h < e.right; h++)
                                c.Color.unpackPixel(this.getPixel32(h, g), f, !0),
                                    a && (f.h = this.game.math.wrap(f.h + a, 0, 1)),
                                    b && (f.s = this.game.math.clamp(f.s + b, 0, 1)),
                                    d && (f.l = this.game.math.clamp(f.l + d, 0, 1)),
                                    c.Color.HSLtoRGB(f.h, f.s, f.l, f),
                                    this.setPixel32(h, g, f.r, f.g, f.b, f.a, !1);
                        return this.context.putImageData(this.imageData, 0, 0), (this.dirty = !0), this;
                    }
                },
                setPixel32: function (a, b, d, e, f, g, h) {
                    return (
                        void 0 === h && (h = !0),
                        0 <= a &&
                            a <= this.width &&
                            0 <= b &&
                            b <= this.height &&
                            (c.Device.LITTLE_ENDIAN ? (this.pixels[b * this.width + a] = (g << 24) | (f << 16) | (e << 8) | d) : (this.pixels[b * this.width + a] = (d << 24) | (e << 16) | (f << 8) | g),
                            h && (this.context.putImageData(this.imageData, 0, 0), (this.dirty = !0))),
                        this
                    );
                },
                setPixel: function (a, b, c, d, e, f) {
                    return this.setPixel32(a, b, c, d, e, 255, f);
                },
                getPixel: function (a, b, d) {
                    d || (d = c.Color.createColor());
                    var e = ~~(a + b * this.width);
                    return (e *= 4), (d.r = this.data[e]), (d.g = this.data[++e]), (d.b = this.data[++e]), (d.a = this.data[++e]), d;
                },
                getPixel32: function (a, b) {
                    if (0 <= a && a <= this.width && 0 <= b && b <= this.height) return this.pixels[b * this.width + a];
                },
                getPixelRGB: function (a, b, d, e, f) {
                    return c.Color.unpackPixel(this.getPixel32(a, b), d, e, f);
                },
                getPixels: function (a) {
                    return this.context.getImageData(a.x, a.y, a.width, a.height);
                },
                getFirstPixel: function (a) {
                    void 0 === a && (a = 0);
                    var b = c.Color.createColor(),
                        d = 0,
                        e = 0,
                        f = 1,
                        g = !1;
                    for (
                        1 === a ? ((f = -1), (e = this.height)) : 3 === a && ((f = -1), (d = this.width));
                        c.Color.unpackPixel(this.getPixel32(d, e), b),
                            0 === a || 1 === a ? ++d === this.width && ((d = 0), ((e += f) >= this.height || e <= 0) && (g = !0)) : (2 !== a && 3 !== a) || (++e === this.height && ((e = 0), ((d += f) >= this.width || d <= 0) && (g = !0))),
                            0 === b.a && !g;

                    );
                    return (b.x = d), (b.y = e), b;
                },
                getBounds: function (a) {
                    return (
                        void 0 === a && (a = new c.Rectangle()),
                        (a.x = this.getFirstPixel(2).x),
                        a.x === this.width ? a.setTo(0, 0, 0, 0) : ((a.y = this.getFirstPixel(0).y), (a.width = this.getFirstPixel(3).x - a.x + 1), (a.height = this.getFirstPixel(1).y - a.y + 1), a)
                    );
                },
                addToWorld: function (a, b, c, d, e, f) {
                    (e = e || 1), (f = f || 1);
                    var g = this.game.add.image(a, b, this);
                    return g.anchor.set(c, d), g.scale.set(e, f), g;
                },
                copy: function (a, b, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r) {
                    if (
                        (null != a || (a = this),
                        (a instanceof c.RenderTexture || a instanceof PIXI.RenderTexture) && (a = a.getCanvas()),
                        (this._image = a) instanceof c.Sprite || a instanceof c.Image || a instanceof c.Text || a instanceof PIXI.Sprite)
                    )
                        this._pos.set(a.texture.crop.x, a.texture.crop.y),
                            this._size.set(a.texture.crop.width, a.texture.crop.height),
                            this._scale.set(a.scale.x, a.scale.y),
                            this._anchor.set(a.anchor.x, a.anchor.y),
                            (this._rotate = a.rotation),
                            (this._alpha.current = a.alpha),
                            a.texture instanceof c.RenderTexture || a.texture instanceof PIXI.RenderTexture ? (this._image = a.texture.getCanvas()) : (this._image = a.texture.baseTexture.source),
                            null != g || (g = a.x),
                            null != h || (h = a.y),
                            a.texture.trim && ((g += a.texture.trim.x - a.anchor.x * a.texture.trim.width), (h += a.texture.trim.y - a.anchor.y * a.texture.trim.height)),
                            16777215 !== a.tint && (a.cachedTint !== a.tint && ((a.cachedTint = a.tint), (a.tintedTexture = PIXI.CanvasTinter.getTintedTexture(a, a.tint))), (this._image = a.tintedTexture), this._pos.set(0));
                    else {
                        if ((this._pos.set(0), this._scale.set(1), this._anchor.set(0), (this._rotate = 0), (this._alpha.current = 1), a instanceof c.BitmapData)) this._image = a.canvas;
                        else if ("string" == typeof a) {
                            if (null === (a = this.game.cache.getImage(a))) return;
                            this._image = a;
                        }
                        this._size.set(this._image.width, this._image.height);
                    }
                    if (
                        (null != b || (b = 0),
                        null != d || (d = 0),
                        e && (this._size.x = e),
                        f && (this._size.y = f),
                        null != g || (g = b),
                        null != h || (h = d),
                        null != i || (i = this._size.x),
                        null != j || (j = this._size.y),
                        "number" == typeof k && (this._rotate = k),
                        "number" == typeof l && (this._anchor.x = l),
                        "number" == typeof m && (this._anchor.y = m),
                        "number" == typeof n && (this._scale.x = n),
                        "number" == typeof o && (this._scale.y = o),
                        "number" == typeof p && (this._alpha.current = p),
                        void 0 === q && (q = null),
                        void 0 === r && (r = !1),
                        !(this._alpha.current <= 0 || 0 === this._scale.x || 0 === this._scale.y || 0 === this._size.x || 0 === this._size.y))
                    ) {
                        var s = this.context;
                        return (
                            (this._alpha.prev = s.globalAlpha),
                            s.save(),
                            (s.globalAlpha = this._alpha.current),
                            q && (this.op = q),
                            r && ((g |= 0), (h |= 0)),
                            s.translate(g, h),
                            s.scale(this._scale.x, this._scale.y),
                            s.rotate(this._rotate),
                            s.drawImage(this._image, this._pos.x + b, this._pos.y + d, this._size.x, this._size.y, -i * this._anchor.x, -j * this._anchor.y, i, j),
                            s.restore(),
                            (s.globalAlpha = this._alpha.prev),
                            (this.dirty = !0),
                            this
                        );
                    }
                },
                copyTransform: function (a, b, d) {
                    if ((void 0 === b && (b = null), void 0 === d && (d = !1), !a.hasOwnProperty("worldTransform") || !a.worldVisible || 0 === a.worldAlpha)) return this;
                    var e = a.worldTransform;
                    if ((this._pos.set(a.texture.crop.x, a.texture.crop.y), this._size.set(a.texture.crop.width, a.texture.crop.height), 0 === e.a || 0 === e.d || 0 === this._size.x || 0 === this._size.y)) return this;
                    a.texture instanceof c.RenderTexture || a.texture instanceof PIXI.RenderTexture ? (this._image = a.texture.getCanvas()) : (this._image = a.texture.baseTexture.source);
                    var f = e.tx,
                        g = e.ty;
                    a.texture.trim && ((f += a.texture.trim.x - a.anchor.x * a.texture.trim.width), (g += a.texture.trim.y - a.anchor.y * a.texture.trim.height)),
                        16777215 !== a.tint && (a.cachedTint !== a.tint && ((a.cachedTint = a.tint), (a.tintedTexture = PIXI.CanvasTinter.getTintedTexture(a, a.tint))), (this._image = a.tintedTexture), this._pos.set(0)),
                        d && ((f |= 0), (g |= 0));
                    var h = this.context;
                    return (
                        (this._alpha.prev = h.globalAlpha),
                        h.save(),
                        (h.globalAlpha = this._alpha.current),
                        b && (this.op = b),
                        (h[this.smoothProperty] = a.texture.baseTexture.scaleMode === PIXI.scaleModes.LINEAR),
                        h.setTransform(e.a, e.b, e.c, e.d, f, g),
                        h.drawImage(this._image, this._pos.x, this._pos.y, this._size.x, this._size.y, -this._size.x * a.anchor.x, -this._size.y * a.anchor.y, this._size.x, this._size.y),
                        h.restore(),
                        (h.globalAlpha = this._alpha.prev),
                        (this.dirty = !0),
                        this
                    );
                },
                copyRect: function (a, b, c, d, e, f, g) {
                    return this.copy(a, b.x, b.y, b.width, b.height, c, d, b.width, b.height, 0, 0, 0, 1, 1, e, f, g);
                },
                draw: function (a, b, c, d, e, f, g) {
                    return this.copy(a, null, null, null, null, b, c, d, e, null, null, null, null, null, null, f, g);
                },
                drawGroup: function (a, b, c) {
                    return 0 < a.total && a.forEachExists(this.drawGroupProxy, this, b, c), this;
                },
                drawGroupProxy: function (a, b, d) {
                    if ((a.hasOwnProperty("texture") && this.copyTransform(a, b, d), a.type === c.GROUP && a.exists)) this.drawGroup(a, b, d);
                    else if (a.hasOwnProperty("children") && 0 < a.children.length) for (var e = 0; e < a.children.length; e++) a.children[e].exists && this.copyTransform(a.children[e], b, d);
                },
                drawFull: function (a, b, d) {
                    if (!1 === a.worldVisible || 0 === a.worldAlpha || (a.hasOwnProperty("exists") && !1 === a.exists)) return this;
                    if (a.type !== c.GROUP && a.type !== c.EMITTER && a.type !== c.BITMAPTEXT)
                        if (a.type === c.GRAPHICS) {
                            var e = a.getBounds();
                            this.ctx.save(), this.ctx.translate(e.x, e.y), PIXI.CanvasGraphics.renderGraphics(a, this.ctx), this.ctx.restore();
                        } else this.copy(a, null, null, null, null, a.worldPosition.x, a.worldPosition.y, null, null, a.worldRotation, null, null, a.worldScale.x, a.worldScale.y, a.worldAlpha, b, d);
                    if (a.children) for (var f = 0; f < a.children.length; f++) this.drawFull(a.children[f], b, d);
                    return this;
                },
                shadow: function (a, b, c, d) {
                    var e = this.context;
                    return null == a ? (e.shadowColor = "rgba(0,0,0,0)") : ((e.shadowColor = a), (e.shadowBlur = b || 5), (e.shadowOffsetX = c || 10), (e.shadowOffsetY = d || 10)), this;
                },
                alphaMask: function (a, b, c, d) {
                    return null == d ? this.draw(b).blendSourceAtop() : this.draw(b, d.x, d.y, d.width, d.height).blendSourceAtop(), null == c ? this.draw(a).blendReset() : this.draw(a, c.x, c.y, c.width, c.height).blendReset(), this;
                },
                extract: function (a, b, c, d, e, f, g, h, i) {
                    return (
                        void 0 === e && (e = 255),
                        void 0 === f && (f = !1),
                        void 0 === g && (g = b),
                        void 0 === h && (h = c),
                        void 0 === i && (i = d),
                        f && a.resize(this.width, this.height),
                        this.processPixelRGB(function (f, j, k) {
                            return f.r === b && f.g === c && f.b === d && a.setPixel32(j, k, g, h, i, e, !1), !1;
                        }, this),
                        a.context.putImageData(a.imageData, 0, 0),
                        (a.dirty = !0),
                        a
                    );
                },
                rect: function (a, b, c, d, e) {
                    return void 0 !== e && (this.context.fillStyle = e), this.context.fillRect(a, b, c, d), this;
                },
                text: function (a, b, c, d, e, f) {
                    void 0 === b && (b = 0), void 0 === c && (c = 0), void 0 === d && (d = "14px Courier"), void 0 === e && (e = "rgb(255,255,255)"), void 0 === f && (f = !0);
                    var g = this.context,
                        h = g.font;
                    return (g.font = d), f && ((g.fillStyle = "rgb(0,0,0)"), g.fillText(a, b + 1, c + 1)), (g.fillStyle = e), g.fillText(a, b, c), (g.font = h), this;
                },
                circle: function (a, b, c, d) {
                    var e = this.context;
                    return void 0 !== d && (e.fillStyle = d), e.beginPath(), e.arc(a, b, c, 0, 2 * Math.PI, !1), e.closePath(), e.fill(), this;
                },
                line: function (a, b, c, d, e, f) {
                    void 0 === e && (e = "#fff"), void 0 === f && (f = 1);
                    var g = this.context;
                    return g.beginPath(), g.moveTo(a, b), g.lineTo(c, d), (g.lineWidth = f), (g.strokeStyle = e), g.stroke(), g.closePath(), this;
                },
                textureLine: function (a, b, d) {
                    if ((void 0 === d && (d = "repeat-x"), "string" != typeof b || (b = this.game.cache.getImage(b)))) {
                        var e = a.length;
                        "no-repeat" === d && e > b.width && (e = b.width);
                        var f = this.context;
                        return (
                            (f.fillStyle = f.createPattern(b, d)),
                            (this._circle = new c.Circle(a.start.x, a.start.y, b.height)),
                            this._circle.circumferencePoint(a.angle - 1.5707963267948966, !1, this._pos),
                            f.save(),
                            f.translate(this._pos.x, this._pos.y),
                            f.rotate(a.angle),
                            f.fillRect(0, 0, e, b.height),
                            f.restore(),
                            (this.dirty = !0),
                            this
                        );
                    }
                },
                render: function () {
                    return !this.disableTextureUpload && this.dirty && (this.baseTexture.dirty(), (this.dirty = !1)), this;
                },
                destroy: function () {
                    this.frameData.destroy(), this.texture.destroy(!0), PIXI.CanvasPool.remove(this);
                },
                blendReset: function () {
                    return (this.op = "source-over"), this;
                },
                blendSourceOver: function () {
                    return (this.op = "source-over"), this;
                },
                blendSourceIn: function () {
                    return (this.op = "source-in"), this;
                },
                blendSourceOut: function () {
                    return (this.op = "source-out"), this;
                },
                blendSourceAtop: function () {
                    return (this.op = "source-atop"), this;
                },
                blendDestinationOver: function () {
                    return (this.op = "destination-over"), this;
                },
                blendDestinationIn: function () {
                    return (this.op = "destination-in"), this;
                },
                blendDestinationOut: function () {
                    return (this.op = "destination-out"), this;
                },
                blendDestinationAtop: function () {
                    return (this.op = "destination-atop"), this;
                },
                blendXor: function () {
                    return (this.op = "xor"), this;
                },
                blendAdd: function () {
                    return (this.op = "lighter"), this;
                },
                blendMultiply: function () {
                    return (this.op = "multiply"), this;
                },
                blendScreen: function () {
                    return (this.op = "screen"), this;
                },
                blendOverlay: function () {
                    return (this.op = "overlay"), this;
                },
                blendDarken: function () {
                    return (this.op = "darken"), this;
                },
                blendLighten: function () {
                    return (this.op = "lighten"), this;
                },
                blendColorDodge: function () {
                    return (this.op = "color-dodge"), this;
                },
                blendColorBurn: function () {
                    return (this.op = "color-burn"), this;
                },
                blendHardLight: function () {
                    return (this.op = "hard-light"), this;
                },
                blendSoftLight: function () {
                    return (this.op = "soft-light"), this;
                },
                blendDifference: function () {
                    return (this.op = "difference"), this;
                },
                blendExclusion: function () {
                    return (this.op = "exclusion"), this;
                },
                blendHue: function () {
                    return (this.op = "hue"), this;
                },
                blendSaturation: function () {
                    return (this.op = "saturation"), this;
                },
                blendColor: function () {
                    return (this.op = "color"), this;
                },
                blendLuminosity: function () {
                    return (this.op = "luminosity"), this;
                },
            }),
            Object.defineProperty(c.BitmapData.prototype, "smoothed", {
                get: function () {
                    c.Canvas.getSmoothingEnabled(this.context);
                },
                set: function (a) {
                    c.Canvas.setSmoothingEnabled(this.context, a);
                },
            }),
            Object.defineProperty(c.BitmapData.prototype, "op", {
                get: function () {
                    return this.context.globalCompositeOperation;
                },
                set: function (a) {
                    this.context.globalCompositeOperation = a;
                },
            }),
            (c.BitmapData.getTransform = function (a, b, c, d, e, f) {
                return (
                    "number" != typeof a && (a = 0),
                    "number" != typeof b && (b = 0),
                    "number" != typeof c && (c = 1),
                    "number" != typeof d && (d = 1),
                    "number" != typeof e && (e = 0),
                    "number" != typeof f && (f = 0),
                    { sx: c, sy: d, scaleX: c, scaleY: d, skewX: e, skewY: f, translateX: a, translateY: b, tx: a, ty: b }
                );
            }),
            (c.BitmapData.prototype.constructor = c.BitmapData),
            (PIXI.Graphics = function () {
                PIXI.DisplayObjectContainer.call(this),
                    (this.renderable = !0),
                    (this.fillAlpha = 1),
                    (this.lineWidth = 0),
                    (this.lineColor = 0),
                    (this.graphicsData = []),
                    (this.tint = 16777215),
                    (this.blendMode = PIXI.blendModes.NORMAL),
                    (this.currentPath = null),
                    (this._webGL = []),
                    (this.isMask = !1),
                    (this.boundsPadding = 0),
                    (this._localBounds = new PIXI.Rectangle(0, 0, 1, 1)),
                    (this.dirty = !0),
                    (this._boundsDirty = !1),
                    (this.webGLDirty = !1),
                    (this.cachedSpriteDirty = !1);
            }),
            (PIXI.Graphics.prototype = Object.create(PIXI.DisplayObjectContainer.prototype)),
            (PIXI.Graphics.prototype.constructor = PIXI.Graphics),
            (PIXI.Graphics.prototype.lineStyle = function (a, b, c) {
                return (
                    (this.lineWidth = a || 0),
                    (this.lineColor = b || 0),
                    (this.lineAlpha = void 0 === c ? 1 : c),
                    this.currentPath &&
                        (this.currentPath.shape.points.length
                            ? this.drawShape(new PIXI.Polygon(this.currentPath.shape.points.slice(-2)))
                            : ((this.currentPath.lineWidth = this.lineWidth), (this.currentPath.lineColor = this.lineColor), (this.currentPath.lineAlpha = this.lineAlpha))),
                    this
                );
            }),
            (PIXI.Graphics.prototype.moveTo = function (a, b) {
                return this.drawShape(new PIXI.Polygon([a, b])), this;
            }),
            (PIXI.Graphics.prototype.lineTo = function (a, b) {
                return this.currentPath || this.moveTo(0, 0), this.currentPath.shape.points.push(a, b), (this.dirty = !0), (this._boundsDirty = !0), this;
            }),
            (PIXI.Graphics.prototype.quadraticCurveTo = function (a, b, c, d) {
                this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0);
                var e,
                    f,
                    h = this.currentPath.shape.points;
                0 === h.length && this.moveTo(0, 0);
                for (var i = h[h.length - 2], j = h[h.length - 1], k = 0, l = 1; l <= 20; ++l) (e = i + (a - i) * (k = l / 20)), (f = j + (b - j) * k), h.push(e + (a + (c - a) * k - e) * k, f + (b + (d - b) * k - f) * k);
                return (this.dirty = !0), (this._boundsDirty = !0), this;
            }),
            (PIXI.Graphics.prototype.bezierCurveTo = function (a, b, c, d, e, f) {
                this.currentPath ? 0 === this.currentPath.shape.points.length && (this.currentPath.shape.points = [0, 0]) : this.moveTo(0, 0);
                for (var g, h, i, j, k, m = this.currentPath.shape.points, n = m[m.length - 2], o = m[m.length - 1], p = 0, q = 1; q <= 20; ++q)
                    (i = (h = (g = 1 - (p = q / 20)) * g) * g), (k = (j = p * p) * p), m.push(i * n + 3 * h * p * a + 3 * g * j * c + k * e, i * o + 3 * h * p * b + 3 * g * j * d + k * f);
                return (this.dirty = !0), (this._boundsDirty = !0), this;
            }),
            (PIXI.Graphics.prototype.arcTo = function (a, b, c, d, e) {
                this.currentPath ? 0 === this.currentPath.shape.points.length && this.currentPath.shape.points.push(a, b) : this.moveTo(a, b);
                var f = this.currentPath.shape.points,
                    g = f[f.length - 2],
                    i = f[f.length - 1] - b,
                    j = g - a,
                    k = d - b,
                    l = c - a,
                    m = Math.abs(i * l - j * k);
                if (m < 1e-8 || 0 === e) (f[f.length - 2] === a && f[f.length - 1] === b) || f.push(a, b);
                else {
                    var n = i * i + j * j,
                        o = k * k + l * l,
                        p = i * k + j * l,
                        q = (e * Math.sqrt(n)) / m,
                        r = (e * Math.sqrt(o)) / m,
                        s = (q * p) / n,
                        t = (r * p) / o,
                        u = q * l + r * j,
                        v = q * k + r * i,
                        w = j * (r + s),
                        x = i * (r + s),
                        y = l * (q + t),
                        z = k * (q + t),
                        A = Math.atan2(x - v, w - u),
                        B = Math.atan2(z - v, y - u);
                    this.arc(u + a, v + b, e, A, B, l * i < j * k);
                }
                return (this.dirty = !0), (this._boundsDirty = !0), this;
            }),
            (PIXI.Graphics.prototype.arc = function (a, b, c, d, e, f, g) {
                if (d === e) return this;
                void 0 === f && (f = !1), void 0 === g && (g = 40), !f && e <= d ? (e += 2 * Math.PI) : f && d <= e && (d += 2 * Math.PI);
                var h = f ? -1 * (d - e) : e - d,
                    i = Math.ceil(Math.abs(h) / (2 * Math.PI)) * g;
                if (0 === h) return this;
                var j = a + Math.cos(d) * c,
                    k = b + Math.sin(d) * c;
                f && this.filling ? this.moveTo(a, b) : this.moveTo(j, k);
                for (var l = this.currentPath.shape.points, m = h / (2 * i), n = 2 * m, o = Math.cos(m), p = Math.sin(m), q = i - 1, r = (q % 1) / q, s = 0; s <= q; s++) {
                    var u = m + d + n * (s + r * s),
                        v = Math.cos(u),
                        w = -Math.sin(u);
                    l.push((o * v + p * w) * c + a, (o * -w + p * v) * c + b);
                }
                return (this.dirty = !0), (this._boundsDirty = !0), this;
            }),
            (PIXI.Graphics.prototype.beginFill = function (a, b) {
                return (
                    (this.filling = !0),
                    (this.fillColor = a || 0),
                    (this.fillAlpha = void 0 === b ? 1 : b),
                    this.currentPath && this.currentPath.shape.points.length <= 2 && ((this.currentPath.fill = this.filling), (this.currentPath.fillColor = this.fillColor), (this.currentPath.fillAlpha = this.fillAlpha)),
                    this
                );
            }),
            (PIXI.Graphics.prototype.endFill = function () {
                return (this.filling = !1), (this.fillColor = null), (this.fillAlpha = 1), this;
            }),
            (PIXI.Graphics.prototype.drawRect = function (a, b, c, d) {
                return this.drawShape(new PIXI.Rectangle(a, b, c, d)), this;
            }),
            (PIXI.Graphics.prototype.drawRoundedRect = function (a, b, c, d, e) {
                return this.drawShape(new PIXI.RoundedRectangle(a, b, c, d, e)), this;
            }),
            (PIXI.Graphics.prototype.drawCircle = function (a, b, c) {
                return this.drawShape(new PIXI.Circle(a, b, c)), this;
            }),
            (PIXI.Graphics.prototype.drawEllipse = function (a, b, c, d) {
                return this.drawShape(new PIXI.Ellipse(a, b, c, d)), this;
            }),
            (PIXI.Graphics.prototype.drawPolygon = function (a) {
                (a instanceof c.Polygon || a instanceof PIXI.Polygon) && (a = a.points);
                var b = a;
                if (!Array.isArray(b)) {
                    b = new Array(arguments.length);
                    for (var d = 0; d < b.length; ++d) b[d] = arguments[d];
                }
                return this.drawShape(new c.Polygon(b)), this;
            }),
            (PIXI.Graphics.prototype.clear = function () {
                return (this.lineWidth = 0), (this.filling = !1), (this.dirty = !0), (this._boundsDirty = !0), (this.clearDirty = !0), (this.graphicsData = []), this.updateLocalBounds(), this;
            }),
            (PIXI.Graphics.prototype.generateTexture = function (a, b, c) {
                void 0 === a && (a = 1), void 0 === b && (b = PIXI.scaleModes.DEFAULT), void 0 === c && (c = 0);
                var d = this.getBounds();
                (d.width += c), (d.height += c);
                var e = new PIXI.CanvasBuffer(d.width * a, d.height * a),
                    f = PIXI.Texture.fromCanvas(e.canvas, b);
                return (f.baseTexture.resolution = a), e.context.scale(a, a), e.context.translate(-d.x, -d.y), PIXI.CanvasGraphics.renderGraphics(this, e.context), f;
            }),
            (PIXI.Graphics.prototype._renderWebGL = function (a) {
                if (!1 !== this.visible && 0 !== this.alpha && !0 !== this.isMask) {
                    if (this._cacheAsBitmap)
                        return (
                            (this.dirty || this.cachedSpriteDirty) && (this._generateCachedSprite(), this.updateCachedSpriteTexture(), (this.cachedSpriteDirty = !1), (this.dirty = !1)),
                            (this._cachedSprite.worldAlpha = this.worldAlpha),
                            void PIXI.Sprite.prototype._renderWebGL.call(this._cachedSprite, a)
                        );
                    if (
                        (a.spriteBatch.stop(),
                        a.blendModeManager.setBlendMode(this.blendMode),
                        this._mask && a.maskManager.pushMask(this._mask, a),
                        this._filters && a.filterManager.pushFilter(this._filterBlock),
                        this.blendMode !== a.spriteBatch.currentBlendMode)
                    ) {
                        a.spriteBatch.currentBlendMode = this.blendMode;
                        var b = PIXI.blendModesWebGL[a.spriteBatch.currentBlendMode];
                        a.spriteBatch.gl.blendFunc(b[0], b[1]);
                    }
                    if ((this.webGLDirty && ((this.dirty = !0), (this.webGLDirty = !1)), PIXI.WebGLGraphics.renderGraphics(this, a), this.children.length)) {
                        a.spriteBatch.start();
                        for (var c = 0; c < this.children.length; c++) this.children[c]._renderWebGL(a);
                        a.spriteBatch.stop();
                    }
                    this._filters && a.filterManager.popFilter(), this._mask && a.maskManager.popMask(this.mask, a), a.drawCount++, a.spriteBatch.start();
                }
            }),
            (PIXI.Graphics.prototype._renderCanvas = function (a) {
                if (!1 !== this.visible && 0 !== this.alpha && !0 !== this.isMask) {
                    if ((this._prevTint !== this.tint && ((this.dirty = !0), (this._prevTint = this.tint)), this._cacheAsBitmap))
                        return (
                            (this.dirty || this.cachedSpriteDirty) && (this._generateCachedSprite(), this.updateCachedSpriteTexture(), (this.cachedSpriteDirty = !1), (this.dirty = !1)),
                            (this._cachedSprite.alpha = this.alpha),
                            void PIXI.Sprite.prototype._renderCanvas.call(this._cachedSprite, a)
                        );
                    var b = a.context,
                        c = this.worldTransform;
                    this.blendMode !== a.currentBlendMode && ((a.currentBlendMode = this.blendMode), (b.globalCompositeOperation = PIXI.blendModesCanvas[a.currentBlendMode])), this._mask && a.maskManager.pushMask(this._mask, a);
                    var d = a.resolution,
                        e = c.tx * a.resolution + a.shakeX,
                        f = c.ty * a.resolution + a.shakeY;
                    b.setTransform(c.a * d, c.b * d, c.c * d, c.d * d, e, f), PIXI.CanvasGraphics.renderGraphics(this, b);
                    for (var g = 0; g < this.children.length; g++) this.children[g]._renderCanvas(a);
                    this._mask && a.maskManager.popMask(a);
                }
            }),
            (PIXI.Graphics.prototype.getBounds = function (a) {
                if (!this._currentBounds) {
                    if (!this.renderable) return PIXI.EmptyRectangle;
                    this.dirty && (this.updateLocalBounds(), (this.webGLDirty = !0), (this.cachedSpriteDirty = !0), (this.dirty = !1));
                    var b = this._localBounds,
                        c = b.x,
                        d = b.width + b.x,
                        e = b.y,
                        f = b.height + b.y,
                        g = a || this.worldTransform,
                        h = g.a,
                        i = g.b,
                        j = g.c,
                        k = g.d,
                        l = g.tx,
                        m = g.ty,
                        n = h * d + j * f + l,
                        o = k * f + i * d + m,
                        p = h * c + j * f + l,
                        q = k * f + i * c + m,
                        r = h * c + j * e + l,
                        s = k * e + i * c + m,
                        t = h * d + j * e + l,
                        u = k * e + i * d + m,
                        v = n,
                        w = o,
                        x = n,
                        y = o;
                    (x = t < (x = r < (x = p < x ? p : x) ? r : x) ? t : x),
                        (y = u < (y = s < (y = q < y ? q : y) ? s : y) ? u : y),
                        (v = (v = (v = v < p ? p : v) < r ? r : v) < t ? t : v),
                        (w = (w = (w = w < q ? q : w) < s ? s : w) < u ? u : w),
                        (this._bounds.x = x),
                        (this._bounds.width = v - x),
                        (this._bounds.y = y),
                        (this._bounds.height = w - y),
                        (this._currentBounds = this._bounds);
                }
                return this._currentBounds;
            }),
            (PIXI.Graphics.prototype.getLocalBounds = function () {
                var a = this.worldTransform;
                this.worldTransform = PIXI.identityMatrix;
                for (var b = 0; b < this.children.length; b++) this.children[b].updateTransform();
                var c = this.getBounds();
                for (this.worldTransform = a, b = 0; b < this.children.length; b++) this.children[b].updateTransform();
                return c;
            }),
            (PIXI.Graphics.prototype.containsPoint = function (a) {
                this.worldTransform.applyInverse(a, tempPoint);
                for (var b = this.graphicsData, c = 0; c < b.length; c++) {
                    var d = b[c];
                    if (d.fill && d.shape && d.shape.contains(tempPoint.x, tempPoint.y)) return !0;
                }
                return !1;
            }),
            (PIXI.Graphics.prototype.updateLocalBounds = function () {
                var a = 1 / 0,
                    b = -1 / 0,
                    d = 1 / 0,
                    e = -1 / 0;
                if (this.graphicsData.length)
                    for (var f, g, h, i, j, k, l = 0; l < this.graphicsData.length; l++) {
                        var m = this.graphicsData[l],
                            n = m.type,
                            o = m.lineWidth;
                        if (((f = m.shape), n === PIXI.Graphics.RECT || n === PIXI.Graphics.RREC))
                            (h = f.x - o / 2), (i = f.y - o / 2), (a = h < a ? h : a), (b = b < h + (j = f.width + o) ? h + j : b), (d = i < d ? i : d), (e = e < i + (k = f.height + o) ? i + k : e);
                        else if (n === PIXI.Graphics.CIRC) (h = f.x), (i = f.y), (a = h - (j = f.radius + o / 2) < a ? h - j : a), (b = b < h + j ? h + j : b), (d = i - (k = f.radius + o / 2) < d ? i - k : d), (e = e < i + k ? i + k : e);
                        else if (n === PIXI.Graphics.ELIP) (h = f.x), (i = f.y), (a = h - (j = f.width + o / 2) < a ? h - j : a), (b = b < h + j ? h + j : b), (d = i - (k = f.height + o / 2) < d ? i - k : d), (e = e < i + k ? i + k : e);
                        else {
                            g = f.points;
                            for (var p = 0; p < g.length; p++)
                                g[p] instanceof c.Point ? ((h = g[p].x), (i = g[p].y)) : ((h = g[p]), (i = g[p + 1]), p < g.length - 1 && p++),
                                    (a = h - o < a ? h - o : a),
                                    (b = b < h + o ? h + o : b),
                                    (d = i - o < d ? i - o : d),
                                    (e = e < i + o ? i + o : e);
                        }
                    }
                else e = d = b = a = 0;
                var q = this.boundsPadding;
                (this._localBounds.x = a - q), (this._localBounds.width = b - a + 2 * q), (this._localBounds.y = d - q), (this._localBounds.height = e - d + 2 * q);
            }),
            (PIXI.Graphics.prototype._generateCachedSprite = function () {
                var a = this.getLocalBounds();
                if (this._cachedSprite) this._cachedSprite.buffer.resize(a.width, a.height);
                else {
                    var b = new PIXI.CanvasBuffer(a.width, a.height),
                        c = PIXI.Texture.fromCanvas(b.canvas);
                    (this._cachedSprite = new PIXI.Sprite(c)), (this._cachedSprite.buffer = b), (this._cachedSprite.worldTransform = this.worldTransform);
                }
                (this._cachedSprite.anchor.x = -a.x / a.width),
                    (this._cachedSprite.anchor.y = -a.y / a.height),
                    this._cachedSprite.buffer.context.translate(-a.x, -a.y),
                    (this.worldAlpha = 1),
                    PIXI.CanvasGraphics.renderGraphics(this, this._cachedSprite.buffer.context),
                    (this._cachedSprite.alpha = this.alpha);
            }),
            (PIXI.Graphics.prototype.updateCachedSpriteTexture = function () {
                var a = this._cachedSprite,
                    b = a.texture,
                    c = a.buffer.canvas;
                (b.baseTexture.width = c.width), (b.baseTexture.height = c.height), (b.crop.width = b.frame.width = c.width), (b.crop.height = b.frame.height = c.height), (a._width = c.width), (a._height = c.height), b.baseTexture.dirty();
            }),
            (PIXI.Graphics.prototype.destroyCachedSprite = function () {
                this._cachedSprite.texture.destroy(!0), (this._cachedSprite = null);
            }),
            (PIXI.Graphics.prototype.drawShape = function (a) {
                this.currentPath && this.currentPath.shape.points.length <= 2 && this.graphicsData.pop(), (this.currentPath = null), a instanceof c.Polygon && (a = a.clone()).flatten();
                var b = new PIXI.GraphicsData(this.lineWidth, this.lineColor, this.lineAlpha, this.fillColor, this.fillAlpha, this.filling, a);
                return this.graphicsData.push(b), b.type === PIXI.Graphics.POLY && ((b.shape.closed = this.filling), (this.currentPath = b)), (this.dirty = !0), (this._boundsDirty = !0), b;
            }),
            Object.defineProperty(PIXI.Graphics.prototype, "cacheAsBitmap", {
                get: function () {
                    return this._cacheAsBitmap;
                },
                set: function (a) {
                    (this._cacheAsBitmap = a), this._cacheAsBitmap ? this._generateCachedSprite() : this.destroyCachedSprite(), (this.dirty = !0), (this.webGLDirty = !0);
                },
            }),
            (PIXI.GraphicsData = function (a, b, c, d, e, f, g) {
                (this.lineWidth = a), (this.lineColor = b), (this.lineAlpha = c), (this._lineTint = b), (this.fillColor = d), (this.fillAlpha = e), (this._fillTint = d), (this.fill = f), (this.shape = g), (this.type = g.type);
            }),
            (PIXI.GraphicsData.prototype.constructor = PIXI.GraphicsData),
            (PIXI.GraphicsData.prototype.clone = function () {
                return new GraphicsData(this.lineWidth, this.lineColor, this.lineAlpha, this.fillColor, this.fillAlpha, this.fill, this.shape);
            }),
            (PIXI.EarCut = {}),
            (PIXI.EarCut.Triangulate = function (a, b, c) {
                c = c || 2;
                var h,
                    i,
                    j,
                    k,
                    l,
                    m,
                    n,
                    d = b && b.length,
                    e = d ? b[0] * c : a.length,
                    f = PIXI.EarCut.linkedList(a, 0, e, c, !0),
                    g = [];
                if (!f) return g;
                if ((d && (f = PIXI.EarCut.eliminateHoles(a, b, f, c)), a.length > 80 * c)) {
                    (h = j = a[0]), (i = k = a[1]);
                    for (var o = c; o < e; o += c) (l = a[o]) < h && (h = l), (m = a[o + 1]) < i && (i = m), j < l && (j = l), k < m && (k = m);
                    n = Math.max(j - h, k - i);
                }
                return PIXI.EarCut.earcutLinked(f, g, c, h, i, n), g;
            }),
            (PIXI.EarCut.linkedList = function (a, b, c, d, e) {
                var f,
                    g,
                    h,
                    i = 0;
                for (f = b, g = c - d; f < c; f += d) (i += (a[g] - a[f]) * (a[f + 1] + a[g + 1])), (g = f);
                if (e === 0 < i) for (f = b; f < c; f += d) h = PIXI.EarCut.insertNode(f, a[f], a[f + 1], h);
                else for (f = c - d; b <= f; f -= d) h = PIXI.EarCut.insertNode(f, a[f], a[f + 1], h);
                return h;
            }),
            (PIXI.EarCut.filterPoints = function (a, b) {
                if (!a) return a;
                b || (b = a);
                var c,
                    d = a;
                do {
                    if (((c = !1), d.steiner || (!PIXI.EarCut.equals(d, d.next) && 0 !== PIXI.EarCut.area(d.prev, d, d.next)))) d = d.next;
                    else {
                        if ((PIXI.EarCut.removeNode(d), (d = b = d.prev) === d.next)) return null;
                        c = !0;
                    }
                } while (c || d !== b);
                return b;
            }),
            (PIXI.EarCut.earcutLinked = function (a, b, c, d, e, f, g) {
                if (a) {
                    !g && f && PIXI.EarCut.indexCurve(a, d, e, f);
                    for (var h, i, j = a; a.prev !== a.next; )
                        if (((h = a.prev), (i = a.next), f ? PIXI.EarCut.isEarHashed(a, d, e, f) : PIXI.EarCut.isEar(a))) b.push(h.i / c), b.push(a.i / c), b.push(i.i / c), PIXI.EarCut.removeNode(a), (a = i.next), (j = i.next);
                        else if ((a = i) === j) {
                            g
                                ? 1 === g
                                    ? ((a = PIXI.EarCut.cureLocalIntersections(a, b, c)), PIXI.EarCut.earcutLinked(a, b, c, d, e, f, 2))
                                    : 2 === g && PIXI.EarCut.splitEarcut(a, b, c, d, e, f)
                                : PIXI.EarCut.earcutLinked(PIXI.EarCut.filterPoints(a), b, c, d, e, f, 1);
                            break;
                        }
                }
            }),
            (PIXI.EarCut.isEar = function (a) {
                var b = a.prev,
                    c = a,
                    d = a.next;
                if (0 <= PIXI.EarCut.area(b, c, d)) return !1;
                for (var e = a.next.next; e !== a.prev; ) {
                    if (PIXI.EarCut.pointInTriangle(b.x, b.y, c.x, c.y, d.x, d.y, e.x, e.y) && 0 <= PIXI.EarCut.area(e.prev, e, e.next)) return !1;
                    e = e.next;
                }
                return !0;
            }),
            (PIXI.EarCut.isEarHashed = function (a, b, c, d) {
                var e = a.prev,
                    f = a,
                    g = a.next;
                if (0 <= PIXI.EarCut.area(e, f, g)) return !1;
                for (
                    var h = e.x < f.x ? (e.x < g.x ? e.x : g.x) : f.x < g.x ? f.x : g.x,
                        i = e.y < f.y ? (e.y < g.y ? e.y : g.y) : f.y < g.y ? f.y : g.y,
                        j = e.x > f.x ? (e.x > g.x ? e.x : g.x) : f.x > g.x ? f.x : g.x,
                        k = e.y > f.y ? (e.y > g.y ? e.y : g.y) : f.y > g.y ? f.y : g.y,
                        l = PIXI.EarCut.zOrder(h, i, b, c, d),
                        m = PIXI.EarCut.zOrder(j, k, b, c, d),
                        n = a.nextZ;
                    n && n.z <= m;

                ) {
                    if (n !== a.prev && n !== a.next && PIXI.EarCut.pointInTriangle(e.x, e.y, f.x, f.y, g.x, g.y, n.x, n.y) && 0 <= PIXI.EarCut.area(n.prev, n, n.next)) return !1;
                    n = n.nextZ;
                }
                for (n = a.prevZ; n && n.z >= l; ) {
                    if (n !== a.prev && n !== a.next && PIXI.EarCut.pointInTriangle(e.x, e.y, f.x, f.y, g.x, g.y, n.x, n.y) && 0 <= PIXI.EarCut.area(n.prev, n, n.next)) return !1;
                    n = n.prevZ;
                }
                return !0;
            }),
            (PIXI.EarCut.cureLocalIntersections = function (a, b, c) {
                var d = a;
                do {
                    var e = d.prev,
                        f = d.next.next;
                    PIXI.EarCut.intersects(e, d, d.next, f) &&
                        PIXI.EarCut.locallyInside(e, f) &&
                        PIXI.EarCut.locallyInside(f, e) &&
                        (b.push(e.i / c), b.push(d.i / c), b.push(f.i / c), PIXI.EarCut.removeNode(d), PIXI.EarCut.removeNode(d.next), (d = a = f)),
                        (d = d.next);
                } while (d !== a);
                return d;
            }),
            (PIXI.EarCut.splitEarcut = function (a, b, c, d, e, f) {
                var g = a;
                do {
                    for (var h = g.next.next; h !== g.prev; ) {
                        if (g.i !== h.i && PIXI.EarCut.isValidDiagonal(g, h)) {
                            var i = PIXI.EarCut.splitPolygon(g, h);
                            return (g = PIXI.EarCut.filterPoints(g, g.next)), (i = PIXI.EarCut.filterPoints(i, i.next)), PIXI.EarCut.earcutLinked(g, b, c, d, e, f), void PIXI.EarCut.earcutLinked(i, b, c, d, e, f);
                        }
                        h = h.next;
                    }
                    g = g.next;
                } while (g !== a);
            }),
            (PIXI.EarCut.eliminateHoles = function (a, b, c, d) {
                var e,
                    f,
                    g,
                    h,
                    i,
                    j = [];
                for (e = 0, f = b.length; e < f; e++) (g = b[e] * d), (h = e < f - 1 ? b[e + 1] * d : a.length), (i = PIXI.EarCut.linkedList(a, g, h, d, !1)) === i.next && (i.steiner = !0), j.push(PIXI.EarCut.getLeftmost(i));
                for (j.sort(compareX), e = 0; e < j.length; e++) PIXI.EarCut.eliminateHole(j[e], c), (c = PIXI.EarCut.filterPoints(c, c.next));
                return c;
            }),
            (PIXI.EarCut.compareX = function (a, b) {
                return a.x - b.x;
            }),
            (PIXI.EarCut.eliminateHole = function (a, b) {
                if ((b = PIXI.EarCut.findHoleBridge(a, b))) {
                    var c = PIXI.EarCut.splitPolygon(b, a);
                    PIXI.EarCut.filterPoints(c, c.next);
                }
            }),
            (PIXI.EarCut.findHoleBridge = function (a, b) {
                var c,
                    d = b,
                    e = a.x,
                    f = a.y,
                    g = -1 / 0;
                do {
                    if (f <= d.y && f >= d.next.y) {
                        var h = d.x + ((f - d.y) * (d.next.x - d.x)) / (d.next.y - d.y);
                        h <= e && g < h && ((g = h), (c = d.x < d.next.x ? d : d.next));
                    }
                    d = d.next;
                } while (d !== b);
                if (!c) return null;
                if (a.x === c.x) return c.prev;
                var i,
                    j = c,
                    k = 1 / 0;
                for (d = c.next; d !== j; )
                    e >= d.x &&
                        d.x >= c.x &&
                        PIXI.EarCut.pointInTriangle(f < c.y ? e : g, f, c.x, c.y, f < c.y ? g : e, f, d.x, d.y) &&
                        ((i = Math.abs(f - d.y) / (e - d.x)) < k || (i === k && d.x > c.x)) &&
                        PIXI.EarCut.locallyInside(d, a) &&
                        ((c = d), (k = i)),
                        (d = d.next);
                return c;
            }),
            (PIXI.EarCut.indexCurve = function (a, b, c, d) {
                for (var e = a; null === e.z && (e.z = PIXI.EarCut.zOrder(e.x, e.y, b, c, d)), (e.prevZ = e.prev), (e.nextZ = e.next), (e = e.next) !== a; );
                (e.prevZ.nextZ = null), (e.prevZ = null), PIXI.EarCut.sortLinked(e);
            }),
            (PIXI.EarCut.sortLinked = function (a) {
                var b,
                    c,
                    d,
                    e,
                    f,
                    g,
                    h,
                    i,
                    j = 1;
                do {
                    for (c = a, f = a = null, g = 0; c; ) {
                        for (g++, d = c, b = h = 0; b < j && (h++, (d = d.nextZ)); b++);
                        for (i = j; 0 < h || (0 < i && d); )
                            0 === h ? ((d = (e = d).nextZ), i--) : 0 !== i && d ? (c.z <= d.z ? ((c = (e = c).nextZ), h--) : ((d = (e = d).nextZ), i--)) : ((c = (e = c).nextZ), h--), f ? (f.nextZ = e) : (a = e), (e.prevZ = f), (f = e);
                        c = d;
                    }
                    (f.nextZ = null), (j *= 2);
                } while (1 < g);
                return a;
            }),
            (PIXI.EarCut.zOrder = function (a, b, c, d, e) {
                return (
                    (a = 1431655765 & ((a = 858993459 & ((a = 252645135 & ((a = 16711935 & ((a = (32767 * (a - c)) / e) | (a << 8))) | (a << 4))) | (a << 2))) | (a << 1))) |
                    ((b = 1431655765 & ((b = 858993459 & ((b = 252645135 & ((b = 16711935 & ((b = (32767 * (b - d)) / e) | (b << 8))) | (b << 4))) | (b << 2))) | (b << 1))) << 1)
                );
            }),
            (PIXI.EarCut.getLeftmost = function (a) {
                for (var b = a, c = a; b.x < c.x && (c = b), (b = b.next) !== a; );
                return c;
            }),
            (PIXI.EarCut.pointInTriangle = function (a, b, c, d, e, f, g, h) {
                return 0 <= (e - g) * (b - h) - (a - g) * (f - h) && 0 <= (a - g) * (d - h) - (c - g) * (b - h) && 0 <= (c - g) * (f - h) - (e - g) * (d - h);
            }),
            (PIXI.EarCut.isValidDiagonal = function (a, b) {
                return PIXI.EarCut.equals(a, b) || (a.next.i !== b.i && a.prev.i !== b.i && !PIXI.EarCut.intersectsPolygon(a, b) && PIXI.EarCut.locallyInside(a, b) && PIXI.EarCut.locallyInside(b, a) && PIXI.EarCut.middleInside(a, b));
            }),
            (PIXI.EarCut.area = function (a, b, c) {
                return (b.y - a.y) * (c.x - b.x) - (b.x - a.x) * (c.y - b.y);
            }),
            (PIXI.EarCut.equals = function (a, b) {
                return a.x === b.x && a.y === b.y;
            }),
            (PIXI.EarCut.intersects = function (a, b, c, d) {
                return 0 < PIXI.EarCut.area(a, b, c) != 0 < PIXI.EarCut.area(a, b, d) && 0 < PIXI.EarCut.area(c, d, a) != 0 < PIXI.EarCut.area(c, d, b);
            }),
            (PIXI.EarCut.intersectsPolygon = function (a, b) {
                var c = a;
                do {
                    if (c.i !== a.i && c.next.i !== a.i && c.i !== b.i && c.next.i !== b.i && PIXI.EarCut.intersects(c, c.next, a, b)) return !0;
                    c = c.next;
                } while (c !== a);
                return !1;
            }),
            (PIXI.EarCut.locallyInside = function (a, b) {
                return PIXI.EarCut.area(a.prev, a, a.next) < 0 ? 0 <= PIXI.EarCut.area(a, b, a.next) && 0 <= PIXI.EarCut.area(a, a.prev, b) : PIXI.EarCut.area(a, b, a.prev) < 0 || PIXI.EarCut.area(a, a.next, b) < 0;
            }),
            (PIXI.EarCut.middleInside = function (a, b) {
                for (var c = a, d = !1, e = (a.x + b.x) / 2, f = (a.y + b.y) / 2; c.y > f != c.next.y > f && e < ((c.next.x - c.x) * (f - c.y)) / (c.next.y - c.y) + c.x && (d = !d), (c = c.next) !== a; );
                return d;
            }),
            (PIXI.EarCut.splitPolygon = function (a, b) {
                var c = new PIXI.EarCut.Node(a.i, a.x, a.y),
                    d = new PIXI.EarCut.Node(b.i, b.x, b.y),
                    e = a.next,
                    f = b.prev;
                return ((a.next = b).prev = a), ((c.next = e).prev = c), ((d.next = c).prev = d), ((f.next = d).prev = f), d;
            }),
            (PIXI.EarCut.insertNode = function (a, b, c, d) {
                var e = new PIXI.EarCut.Node(a, b, c);
                return d ? ((e.next = d.next), ((e.prev = d).next.prev = e), (d.next = e)) : ((e.prev = e).next = e), e;
            }),
            (PIXI.EarCut.removeNode = function (a) {
                (a.next.prev = a.prev), (a.prev.next = a.next), a.prevZ && (a.prevZ.nextZ = a.nextZ), a.nextZ && (a.nextZ.prevZ = a.prevZ);
            }),
            (PIXI.EarCut.Node = function (a, b, c) {
                (this.i = a), (this.x = b), (this.y = c), (this.prev = null), (this.next = null), (this.z = null), (this.prevZ = null), (this.nextZ = null), (this.steiner = !1);
            }),
            (PIXI.WebGLGraphics = function () {}),
            (PIXI.WebGLGraphics.stencilBufferLimit = 6),
            (PIXI.WebGLGraphics.renderGraphics = function (a, b) {
                var c,
                    d = b.gl,
                    e = b.projection,
                    f = b.offset,
                    g = b.shaderManager.primitiveShader;
                a.dirty && PIXI.WebGLGraphics.updateGraphics(a, d);
                for (var h = a._webGL[d.id], i = 0; i < h.data.length; i++)
                    1 === h.data[i].mode
                        ? ((c = h.data[i]), b.stencilManager.pushStencil(a, c, b), d.drawElements(d.TRIANGLE_FAN, 4, d.UNSIGNED_SHORT, 2 * (c.indices.length - 4)), b.stencilManager.popStencil(a, c, b))
                        : ((c = h.data[i]),
                          b.shaderManager.setShader(g),
                          (g = b.shaderManager.primitiveShader),
                          d.uniformMatrix3fv(g.translationMatrix, !1, a.worldTransform.toArray(!0)),
                          d.uniform1f(g.flipY, 1),
                          d.uniform2f(g.projectionVector, e.x, -e.y),
                          d.uniform2f(g.offsetVector, -f.x, -f.y),
                          d.uniform3fv(g.tintColor, PIXI.hex2rgb(a.tint)),
                          d.uniform1f(g.alpha, a.worldAlpha),
                          d.bindBuffer(d.ARRAY_BUFFER, c.buffer),
                          d.vertexAttribPointer(g.aVertexPosition, 2, d.FLOAT, !1, 24, 0),
                          d.vertexAttribPointer(g.colorAttribute, 4, d.FLOAT, !1, 24, 8),
                          d.bindBuffer(d.ELEMENT_ARRAY_BUFFER, c.indexBuffer),
                          d.drawElements(d.TRIANGLE_STRIP, c.indices.length, d.UNSIGNED_SHORT, 0));
            }),
            (PIXI.WebGLGraphics.updateGraphics = function (a, b) {
                var d,
                    f,
                    c = a._webGL[b.id];
                if ((c || (c = a._webGL[b.id] = { lastIndex: 0, data: [], gl: b }), (a.dirty = !1), a.clearDirty)) {
                    for (a.clearDirty = !1, d = 0; d < c.data.length; d++) {
                        var e = c.data[d];
                        e.reset(), PIXI.WebGLGraphics.graphicsDataPool.push(e);
                    }
                    (c.data = []), (c.lastIndex = 0);
                }
                for (d = c.lastIndex; d < a.graphicsData.length; d++) {
                    var g = a.graphicsData[d];
                    if (g.type === PIXI.Graphics.POLY) {
                        if (
                            ((g.points = g.shape.points.slice()),
                            g.shape.closed && ((g.points[0] === g.points[g.points.length - 2] && g.points[1] === g.points[g.points.length - 1]) || g.points.push(g.points[0], g.points[1])),
                            g.fill && g.points.length >= PIXI.WebGLGraphics.stencilBufferLimit)
                        )
                            if (g.points.length < 2 * PIXI.WebGLGraphics.stencilBufferLimit) {
                                (f = PIXI.WebGLGraphics.switchMode(c, 0)), PIXI.WebGLGraphics.buildPoly(g, f) || ((f = PIXI.WebGLGraphics.switchMode(c, 1)), PIXI.WebGLGraphics.buildComplexPoly(g, f));
                            } else (f = PIXI.WebGLGraphics.switchMode(c, 1)), PIXI.WebGLGraphics.buildComplexPoly(g, f);
                        0 < g.lineWidth && ((f = PIXI.WebGLGraphics.switchMode(c, 0)), PIXI.WebGLGraphics.buildLine(g, f));
                    } else
                        (f = PIXI.WebGLGraphics.switchMode(c, 0)),
                            g.type === PIXI.Graphics.RECT
                                ? PIXI.WebGLGraphics.buildRectangle(g, f)
                                : g.type === PIXI.Graphics.CIRC || g.type === PIXI.Graphics.ELIP
                                ? PIXI.WebGLGraphics.buildCircle(g, f)
                                : g.type === PIXI.Graphics.RREC && PIXI.WebGLGraphics.buildRoundedRectangle(g, f);
                    c.lastIndex++;
                }
                for (d = 0; d < c.data.length; d++) (f = c.data[d]).dirty && f.upload();
            }),
            (PIXI.WebGLGraphics.switchMode = function (a, b) {
                var c;
                return (
                    a.data.length
                        ? ((c = a.data[a.data.length - 1]).mode === b && 1 !== b) || (((c = PIXI.WebGLGraphics.graphicsDataPool.pop() || new PIXI.WebGLGraphicsData(a.gl)).mode = b), a.data.push(c))
                        : (((c = PIXI.WebGLGraphics.graphicsDataPool.pop() || new PIXI.WebGLGraphicsData(a.gl)).mode = b), a.data.push(c)),
                    (c.dirty = !0),
                    c
                );
            }),
            (PIXI.WebGLGraphics.buildRectangle = function (a, b) {
                var c = a.shape,
                    d = c.x,
                    e = c.y,
                    f = c.width,
                    g = c.height;
                if (a.fill) {
                    var h = PIXI.hex2rgb(a.fillColor),
                        i = a.fillAlpha,
                        j = h[0] * i,
                        k = h[1] * i,
                        l = h[2] * i,
                        m = b.points,
                        n = b.indices,
                        o = m.length / 6;
                    m.push(d, e), m.push(j, k, l, i), m.push(d + f, e), m.push(j, k, l, i), m.push(d, e + g), m.push(j, k, l, i), m.push(d + f, e + g), m.push(j, k, l, i), n.push(o, o, o + 1, o + 2, o + 3, o + 3);
                }
                if (a.lineWidth) {
                    var p = a.points;
                    (a.points = [d, e, d + f, e, d + f, e + g, d, e + g, d, e]), PIXI.WebGLGraphics.buildLine(a, b), (a.points = p);
                }
            }),
            (PIXI.WebGLGraphics.buildRoundedRectangle = function (a, b) {
                var c = a.shape,
                    d = c.x,
                    e = c.y,
                    f = c.width,
                    g = c.height,
                    h = c.radius,
                    i = [];
                if (
                    (i.push(d, e + h),
                    (i = (i = (i = (i = i.concat(PIXI.WebGLGraphics.quadraticBezierCurve(d, e + g - h, d, e + g, d + h, e + g))).concat(PIXI.WebGLGraphics.quadraticBezierCurve(d + f - h, e + g, d + f, e + g, d + f, e + g - h))).concat(
                        PIXI.WebGLGraphics.quadraticBezierCurve(d + f, e + h, d + f, e, d + f - h, e)
                    )).concat(PIXI.WebGLGraphics.quadraticBezierCurve(d + h, e, d, e, d, e + h))),
                    a.fill)
                ) {
                    var j = PIXI.hex2rgb(a.fillColor),
                        k = a.fillAlpha,
                        l = j[0] * k,
                        m = j[1] * k,
                        n = j[2] * k,
                        o = b.points,
                        p = b.indices,
                        q = o.length / 6,
                        r = PIXI.EarCut.Triangulate(i, null, 2),
                        s = 0;
                    for (s = 0; s < r.length; s += 3) p.push(r[s] + q), p.push(r[s] + q), p.push(r[s + 1] + q), p.push(r[s + 2] + q), p.push(r[s + 2] + q);
                    for (s = 0; s < i.length; s++) o.push(i[s], i[++s], l, m, n, k);
                }
                if (a.lineWidth) {
                    var t = a.points;
                    (a.points = i), PIXI.WebGLGraphics.buildLine(a, b), (a.points = t);
                }
            }),
            (PIXI.WebGLGraphics.quadraticBezierCurve = function (a, b, c, d, e, f) {
                function g(a, b, c) {
                    return a + (b - a) * c;
                }
                for (var h, i, j, k, l, m, o = [], p = 0, q = 0; q <= 20; q++) (h = g(a, c, (p = q / 20))), (i = g(b, d, p)), (j = g(c, e, p)), (k = g(d, f, p)), (l = g(h, j, p)), (m = g(i, k, p)), o.push(l, m);
                return o;
            }),
            (PIXI.WebGLGraphics.buildCircle = function (a, b) {
                var c,
                    d,
                    e = a.shape,
                    f = e.x,
                    g = e.y;
                d = a.type === PIXI.Graphics.CIRC ? ((c = e.radius), e.radius) : ((c = e.width), e.height);
                var i = (2 * Math.PI) / 40,
                    j = 0;
                if (a.fill) {
                    var k = PIXI.hex2rgb(a.fillColor),
                        l = a.fillAlpha,
                        m = k[0] * l,
                        n = k[1] * l,
                        o = k[2] * l,
                        p = b.points,
                        q = b.indices,
                        r = p.length / 6;
                    for (q.push(r), j = 0; j < 41; j++) p.push(f, g, m, n, o, l), p.push(f + Math.sin(i * j) * c, g + Math.cos(i * j) * d, m, n, o, l), q.push(r++, r++);
                    q.push(r - 1);
                }
                if (a.lineWidth) {
                    var s = a.points;
                    for (a.points = [], j = 0; j < 41; j++) a.points.push(f + Math.sin(i * j) * c, g + Math.cos(i * j) * d);
                    PIXI.WebGLGraphics.buildLine(a, b), (a.points = s);
                }
            }),
            (PIXI.WebGLGraphics.buildLine = function (a, b) {
                var c = 0,
                    d = a.points;
                if (0 !== d.length) {
                    if (a.lineWidth % 2) for (c = 0; c < d.length; c++) d[c] += 0.5;
                    var e = new PIXI.Point(d[0], d[1]),
                        f = new PIXI.Point(d[d.length - 2], d[d.length - 1]);
                    if (e.x === f.x && e.y === f.y) {
                        (d = d.slice()).pop(), d.pop();
                        var g = (f = new PIXI.Point(d[d.length - 2], d[d.length - 1])).x + 0.5 * (e.x - f.x),
                            h = f.y + 0.5 * (e.y - f.y);
                        d.unshift(g, h), d.push(g, h);
                    }
                    var i,
                        j,
                        k,
                        l,
                        m,
                        n,
                        o,
                        p,
                        q,
                        r,
                        s,
                        t,
                        u,
                        v,
                        w,
                        x,
                        y,
                        z,
                        A,
                        B,
                        C,
                        E,
                        F = b.points,
                        G = b.indices,
                        H = d.length / 2,
                        I = d.length,
                        J = F.length / 6,
                        K = a.lineWidth / 2,
                        L = PIXI.hex2rgb(a.lineColor),
                        M = a.lineAlpha,
                        N = L[0] * M,
                        O = L[1] * M,
                        P = L[2] * M;
                    for (k = d[0], l = d[1], m = d[2], q = -(l - (n = d[3])), r = k - m, q /= E = Math.sqrt(q * q + r * r), r /= E, q *= K, r *= K, F.push(k - q, l - r, N, O, P, M), F.push(k + q, l + r, N, O, P, M), c = 1; c < H - 1; c++)
                        (k = d[2 * (c - 1)]),
                            (l = d[2 * (c - 1) + 1]),
                            (m = d[2 * c]),
                            (n = d[2 * c + 1]),
                            (o = d[2 * (c + 1)]),
                            (p = d[2 * (c + 1) + 1]),
                            (q = -(l - n)),
                            (r = k - m),
                            (q /= E = Math.sqrt(q * q + r * r)),
                            (r /= E),
                            (q *= K),
                            (r *= K),
                            (s = -(n - p)),
                            (t = m - o),
                            (s /= E = Math.sqrt(s * s + t * t)),
                            (t /= E),
                            (y = (-q + k) * (-r + n) - (-q + m) * (-r + l)),
                            (B = (-(s *= K) + o) * (-(t *= K) + n) - (-s + m) * (-t + p)),
                            (C = (w = -r + l - (-r + n)) * (A = -s + m - (-s + o)) - (z = -t + p - (-t + n)) * (x = -q + m - (-q + k))),
                            Math.abs(C) < 0.1
                                ? ((C += 10.1), F.push(m - q, n - r, N, O, P, M), F.push(m + q, n + r, N, O, P, M))
                                : 19600 < ((i = (x * B - A * y) / C) - m) * (i - m) + ((j = (z * y - w * B) / C) - n) + (j - n)
                                ? ((u = q - s),
                                  (v = r - t),
                                  (u /= E = Math.sqrt(u * u + v * v)),
                                  (v /= E),
                                  (u *= K),
                                  (v *= K),
                                  F.push(m - u, n - v),
                                  F.push(N, O, P, M),
                                  F.push(m + u, n + v),
                                  F.push(N, O, P, M),
                                  F.push(m - u, n - v),
                                  F.push(N, O, P, M),
                                  I++)
                                : (F.push(i, j), F.push(N, O, P, M), F.push(m - (i - m), n - (j - n)), F.push(N, O, P, M));
                    for (
                        k = d[2 * (H - 2)],
                            l = d[2 * (H - 2) + 1],
                            m = d[2 * (H - 1)],
                            q = -(l - (n = d[2 * (H - 1) + 1])),
                            r = k - m,
                            q /= E = Math.sqrt(q * q + r * r),
                            r /= E,
                            q *= K,
                            r *= K,
                            F.push(m - q, n - r),
                            F.push(N, O, P, M),
                            F.push(m + q, n + r),
                            F.push(N, O, P, M),
                            G.push(J),
                            c = 0;
                        c < I;
                        c++
                    )
                        G.push(J++);
                    G.push(J - 1);
                }
            }),
            (PIXI.WebGLGraphics.buildComplexPoly = function (a, b) {
                var c = a.points.slice();
                if (!(c.length < 6)) {
                    var d = b.indices;
                    (b.points = c), (b.alpha = a.fillAlpha), (b.color = PIXI.hex2rgb(a.fillColor));
                    for (var e, f, g = 1 / 0, h = -1 / 0, i = 1 / 0, j = -1 / 0, k = 0; k < c.length; k += 2) (g = (e = c[k]) < g ? e : g), (h = h < e ? e : h), (i = (f = c[k + 1]) < i ? f : i), (j = j < f ? f : j);
                    c.push(g, i, h, i, h, j, g, j);
                    var l = c.length / 2;
                    for (k = 0; k < l; k++) d.push(k);
                }
            }),
            (PIXI.WebGLGraphics.buildPoly = function (a, b) {
                var c = a.points;
                if (!(c.length < 6)) {
                    var d = b.points,
                        e = b.indices,
                        f = c.length / 2,
                        g = PIXI.hex2rgb(a.fillColor),
                        h = a.fillAlpha,
                        i = g[0] * h,
                        j = g[1] * h,
                        k = g[2] * h,
                        l = PIXI.EarCut.Triangulate(c, null, 2);
                    if (!l) return !1;
                    var m = d.length / 6,
                        n = 0;
                    for (n = 0; n < l.length; n += 3) e.push(l[n] + m), e.push(l[n] + m), e.push(l[n + 1] + m), e.push(l[n + 2] + m), e.push(l[n + 2] + m);
                    for (n = 0; n < f; n++) d.push(c[2 * n], c[2 * n + 1], i, j, k, h);
                    return !0;
                }
            }),
            (PIXI.WebGLGraphics.graphicsDataPool = []),
            (PIXI.WebGLGraphicsData = function (a) {
                (this.gl = a), (this.color = [0, 0, 0]), (this.points = []), (this.indices = []), (this.buffer = a.createBuffer()), (this.indexBuffer = a.createBuffer()), (this.mode = 1), (this.alpha = 1), (this.dirty = !0);
            }),
            (PIXI.WebGLGraphicsData.prototype.reset = function () {
                (this.points = []), (this.indices = []);
            }),
            (PIXI.WebGLGraphicsData.prototype.upload = function () {
                var a = this.gl;
                (this.glPoints = new PIXI.Float32Array(this.points)),
                    a.bindBuffer(a.ARRAY_BUFFER, this.buffer),
                    a.bufferData(a.ARRAY_BUFFER, this.glPoints, a.STATIC_DRAW),
                    (this.glIndicies = new PIXI.Uint16Array(this.indices)),
                    a.bindBuffer(a.ELEMENT_ARRAY_BUFFER, this.indexBuffer),
                    a.bufferData(a.ELEMENT_ARRAY_BUFFER, this.glIndicies, a.STATIC_DRAW),
                    (this.dirty = !1);
            }),
            (PIXI.CanvasGraphics = function () {}),
            (PIXI.CanvasGraphics.renderGraphics = function (a, b) {
                var c = a.worldAlpha;
                a.dirty && (this.updateGraphicsTint(a), (a.dirty = !1));
                for (var d = 0; d < a.graphicsData.length; d++) {
                    var e = a.graphicsData[d],
                        f = e.shape,
                        g = e._fillTint,
                        h = e._lineTint;
                    if (((b.lineWidth = e.lineWidth), e.type === PIXI.Graphics.POLY)) {
                        b.beginPath();
                        var i = f.points;
                        b.moveTo(i[0], i[1]);
                        for (var j = 1; j < i.length / 2; j++) b.lineTo(i[2 * j], i[2 * j + 1]);
                        f.closed && b.lineTo(i[0], i[1]),
                            i[0] === i[i.length - 2] && i[1] === i[i.length - 1] && b.closePath(),
                            e.fill && ((b.globalAlpha = e.fillAlpha * c), (b.fillStyle = "#" + ("00000" + (0 | g).toString(16)).substr(-6)), b.fill()),
                            e.lineWidth && ((b.globalAlpha = e.lineAlpha * c), (b.strokeStyle = "#" + ("00000" + (0 | h).toString(16)).substr(-6)), b.stroke());
                    } else if (e.type === PIXI.Graphics.RECT)
                        (e.fillColor || 0 === e.fillColor) && ((b.globalAlpha = e.fillAlpha * c), (b.fillStyle = "#" + ("00000" + (0 | g).toString(16)).substr(-6)), b.fillRect(f.x, f.y, f.width, f.height)),
                            e.lineWidth && ((b.globalAlpha = e.lineAlpha * c), (b.strokeStyle = "#" + ("00000" + (0 | h).toString(16)).substr(-6)), b.strokeRect(f.x, f.y, f.width, f.height));
                    else if (e.type === PIXI.Graphics.CIRC)
                        b.beginPath(),
                            b.arc(f.x, f.y, f.radius, 0, 2 * Math.PI),
                            b.closePath(),
                            e.fill && ((b.globalAlpha = e.fillAlpha * c), (b.fillStyle = "#" + ("00000" + (0 | g).toString(16)).substr(-6)), b.fill()),
                            e.lineWidth && ((b.globalAlpha = e.lineAlpha * c), (b.strokeStyle = "#" + ("00000" + (0 | h).toString(16)).substr(-6)), b.stroke());
                    else if (e.type === PIXI.Graphics.ELIP) {
                        var k = 2 * f.width,
                            l = 2 * f.height,
                            m = f.x - k / 2,
                            n = f.y - l / 2;
                        b.beginPath();
                        var o = 0.5522848,
                            p = (k / 2) * o,
                            q = (l / 2) * o,
                            r = m + k,
                            s = n + l,
                            t = m + k / 2,
                            u = n + l / 2;
                        b.moveTo(m, u),
                            b.bezierCurveTo(m, u - q, t - p, n, t, n),
                            b.bezierCurveTo(t + p, n, r, u - q, r, u),
                            b.bezierCurveTo(r, u + q, t + p, s, t, s),
                            b.bezierCurveTo(t - p, s, m, u + q, m, u),
                            b.closePath(),
                            e.fill && ((b.globalAlpha = e.fillAlpha * c), (b.fillStyle = "#" + ("00000" + (0 | g).toString(16)).substr(-6)), b.fill()),
                            e.lineWidth && ((b.globalAlpha = e.lineAlpha * c), (b.strokeStyle = "#" + ("00000" + (0 | h).toString(16)).substr(-6)), b.stroke());
                    } else if (e.type === PIXI.Graphics.RREC) {
                        var v = f.x,
                            w = f.y,
                            x = f.width,
                            y = f.height,
                            z = f.radius,
                            A = (Math.min(x, y) / 2) | 0;
                        (z = A < z ? A : z),
                            b.beginPath(),
                            b.moveTo(v, w + z),
                            b.lineTo(v, w + y - z),
                            b.quadraticCurveTo(v, w + y, v + z, w + y),
                            b.lineTo(v + x - z, w + y),
                            b.quadraticCurveTo(v + x, w + y, v + x, w + y - z),
                            b.lineTo(v + x, w + z),
                            b.quadraticCurveTo(v + x, w, v + x - z, w),
                            b.lineTo(v + z, w),
                            b.quadraticCurveTo(v, w, v, w + z),
                            b.closePath(),
                            (e.fillColor || 0 === e.fillColor) && ((b.globalAlpha = e.fillAlpha * c), (b.fillStyle = "#" + ("00000" + (0 | g).toString(16)).substr(-6)), b.fill()),
                            e.lineWidth && ((b.globalAlpha = e.lineAlpha * c), (b.strokeStyle = "#" + ("00000" + (0 | h).toString(16)).substr(-6)), b.stroke());
                    }
                }
            }),
            (PIXI.CanvasGraphics.renderGraphicsMask = function (a, b) {
                var c = a.graphicsData.length;
                if (0 !== c) {
                    b.beginPath();
                    for (var d = 0; d < c; d++) {
                        var e = a.graphicsData[d],
                            f = e.shape;
                        if (e.type === PIXI.Graphics.POLY) {
                            var g = f.points;
                            b.moveTo(g[0], g[1]);
                            for (var h = 1; h < g.length / 2; h++) b.lineTo(g[2 * h], g[2 * h + 1]);
                            g[0] === g[g.length - 2] && g[1] === g[g.length - 1] && b.closePath();
                        } else if (e.type === PIXI.Graphics.RECT) b.rect(f.x, f.y, f.width, f.height), b.closePath();
                        else if (e.type === PIXI.Graphics.CIRC) b.arc(f.x, f.y, f.radius, 0, 2 * Math.PI), b.closePath();
                        else if (e.type === PIXI.Graphics.ELIP) {
                            var i = 2 * f.width,
                                j = 2 * f.height,
                                k = f.x - i / 2,
                                l = f.y - j / 2,
                                m = 0.5522848,
                                n = (i / 2) * m,
                                o = (j / 2) * m,
                                p = k + i,
                                q = l + j,
                                r = k + i / 2,
                                s = l + j / 2;
                            b.moveTo(k, s), b.bezierCurveTo(k, s - o, r - n, l, r, l), b.bezierCurveTo(r + n, l, p, s - o, p, s), b.bezierCurveTo(p, s + o, r + n, q, r, q), b.bezierCurveTo(r - n, q, k, s + o, k, s), b.closePath();
                        } else if (e.type === PIXI.Graphics.RREC) {
                            var t = f.x,
                                u = f.y,
                                v = f.width,
                                w = f.height,
                                x = f.radius,
                                y = (Math.min(v, w) / 2) | 0;
                            (x = y < x ? y : x),
                                b.moveTo(t, u + x),
                                b.lineTo(t, u + w - x),
                                b.quadraticCurveTo(t, u + w, t + x, u + w),
                                b.lineTo(t + v - x, u + w),
                                b.quadraticCurveTo(t + v, u + w, t + v, u + w - x),
                                b.lineTo(t + v, u + x),
                                b.quadraticCurveTo(t + v, u, t + v - x, u),
                                b.lineTo(t + x, u),
                                b.quadraticCurveTo(t, u, t, u + x),
                                b.closePath();
                        }
                    }
                }
            }),
            (PIXI.CanvasGraphics.updateGraphicsTint = function (a) {
                if (16777215 !== a.tint)
                    for (var b = ((a.tint >> 16) & 255) / 255, c = ((a.tint >> 8) & 255) / 255, d = (255 & a.tint) / 255, e = 0; e < a.graphicsData.length; e++) {
                        var f = a.graphicsData[e],
                            g = 0 | f.fillColor,
                            h = 0 | f.lineColor;
                        (f._fillTint = (((((g >> 16) & 255) / 255) * b * 255) << 16) + (((((g >> 8) & 255) / 255) * c * 255) << 8) + ((255 & g) / 255) * d * 255),
                            (f._lineTint = (((((h >> 16) & 255) / 255) * b * 255) << 16) + (((((h >> 8) & 255) / 255) * c * 255) << 8) + ((255 & h) / 255) * d * 255);
                    }
            }),
            (c.Graphics = function (a, b, d) {
                void 0 === b && (b = 0), void 0 === d && (d = 0), (this.type = c.GRAPHICS), (this.physicsType = c.SPRITE), (this.anchor = new c.Point()), PIXI.Graphics.call(this), c.Component.Core.init.call(this, a, b, d, "", null);
            }),
            (c.Graphics.prototype = Object.create(PIXI.Graphics.prototype)),
            (c.Graphics.prototype.constructor = c.Graphics),
            c.Component.Core.install.call(c.Graphics.prototype, ["Angle", "AutoCull", "Bounds", "Destroy", "FixedToCamera", "InputEnabled", "InWorld", "LifeSpan", "PhysicsBody", "Reset"]),
            (c.Graphics.prototype.preUpdatePhysics = c.Component.PhysicsBody.preUpdate),
            (c.Graphics.prototype.preUpdateLifeSpan = c.Component.LifeSpan.preUpdate),
            (c.Graphics.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate),
            (c.Graphics.prototype.preUpdateCore = c.Component.Core.preUpdate),
            (c.Graphics.prototype.preUpdate = function () {
                return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore();
            }),
            (c.Graphics.prototype.postUpdate = function () {
                c.Component.PhysicsBody.postUpdate.call(this), c.Component.FixedToCamera.postUpdate.call(this), this._boundsDirty && (this.updateLocalBounds(), (this._boundsDirty = !1));
                for (var a = 0; a < this.children.length; a++) this.children[a].postUpdate();
            }),
            (c.Graphics.prototype.destroy = function (a) {
                this.clear(), c.Component.Destroy.prototype.destroy.call(this, a);
            }),
            (c.Graphics.prototype.drawTriangle = function (a, b) {
                void 0 === b && (b = !1);
                var d = new c.Polygon(a);
                if (b) {
                    var e = new c.Point(this.game.camera.x - a[0].x, this.game.camera.y - a[0].y),
                        f = new c.Point(a[1].x - a[0].x, a[1].y - a[0].y),
                        h = new c.Point(a[1].x - a[2].x, a[1].y - a[2].y).cross(f);
                    0 < e.dot(h) && this.drawPolygon(d);
                } else this.drawPolygon(d);
            }),
            (c.Graphics.prototype.drawTriangles = function (a, b, d) {
                void 0 === d && (d = !1);
                var e,
                    f = new c.Point(),
                    g = new c.Point(),
                    h = new c.Point(),
                    i = [];
                if (b)
                    if (a[0] instanceof c.Point) for (e = 0; e < b.length / 3; e++) i.push(a[b[3 * e]]), i.push(a[b[3 * e + 1]]), i.push(a[b[3 * e + 2]]), 3 === i.length && (this.drawTriangle(i, d), (i = []));
                    else for (e = 0; e < b.length; e++) (f.x = a[2 * b[e]]), (f.y = a[2 * b[e] + 1]), i.push(f.copyTo({})), 3 === i.length && (this.drawTriangle(i, d), (i = []));
                else if (a[0] instanceof c.Point) for (e = 0; e < a.length / 3; e++) this.drawTriangle([a[3 * e], a[3 * e + 1], a[3 * e + 2]], d);
                else for (e = 0; e < a.length / 6; e++) (f.x = a[6 * e + 0]), (f.y = a[6 * e + 1]), (g.x = a[6 * e + 2]), (g.y = a[6 * e + 3]), (h.x = a[6 * e + 4]), (h.y = a[6 * e + 5]), this.drawTriangle([f, g, h], d);
            }),
            (c.RenderTexture = function (a, b, d, e, f, g) {
                void 0 === e && (e = ""),
                    void 0 === f && (f = c.scaleModes.DEFAULT),
                    void 0 === g && (g = 1),
                    (this.game = a),
                    (this.key = e),
                    (this.type = c.RENDERTEXTURE),
                    (this._tempMatrix = new PIXI.Matrix()),
                    PIXI.RenderTexture.call(this, b, d, this.game.renderer, f, g),
                    (this.render = c.RenderTexture.prototype.render);
            }),
            (c.RenderTexture.prototype = Object.create(PIXI.RenderTexture.prototype)),
            (c.RenderTexture.prototype.constructor = c.RenderTexture),
            (c.RenderTexture.prototype.renderXY = function (a, b, c, d) {
                a.updateTransform(),
                    this._tempMatrix.copyFrom(a.worldTransform),
                    (this._tempMatrix.tx = b),
                    (this._tempMatrix.ty = c),
                    this.renderer.type === PIXI.WEBGL_RENDERER ? this.renderWebGL(a, this._tempMatrix, d) : this.renderCanvas(a, this._tempMatrix, d);
            }),
            (c.RenderTexture.prototype.renderRawXY = function (a, b, c, d) {
                this._tempMatrix.identity().translate(b, c), this.renderer.type === PIXI.WEBGL_RENDERER ? this.renderWebGL(a, this._tempMatrix, d) : this.renderCanvas(a, this._tempMatrix, d);
            }),
            (c.RenderTexture.prototype.render = function (a, b, c) {
                null == b ? this._tempMatrix.copyFrom(a.worldTransform) : this._tempMatrix.copyFrom(b), this.renderer.type === PIXI.WEBGL_RENDERER ? this.renderWebGL(a, this._tempMatrix, c) : this.renderCanvas(a, this._tempMatrix, c);
            }),
            (c.Text = function (a, b, d, e, f) {
                (b = b || 0),
                    (d = d || 0),
                    (e = null == e ? "" : e.toString()),
                    (f = c.Utils.extend({}, f)),
                    (this.type = c.TEXT),
                    (this.physicsType = c.SPRITE),
                    (this.padding = new c.Point()),
                    (this.textBounds = null),
                    (this.canvas = PIXI.CanvasPool.create(this)),
                    (this.context = this.canvas.getContext("2d")),
                    (this.colors = []),
                    (this.strokeColors = []),
                    (this.fontStyles = []),
                    (this.fontWeights = []),
                    (this.autoRound = !1),
                    (this.useAdvancedWrap = !1),
                    (this._res = a.renderer.resolution),
                    (this._text = e),
                    (this._fontComponents = null),
                    (this._lineSpacing = 0),
                    (this._charCount = 0),
                    (this._width = 0),
                    (this._height = 0),
                    c.Sprite.call(this, a, b, d, PIXI.Texture.fromCanvas(this.canvas)),
                    this.setStyle(f),
                    "" !== e && this.updateText();
            }),
            (c.Text.prototype = Object.create(c.Sprite.prototype)),
            (c.Text.prototype.constructor = c.Text),
            (c.Text.prototype.preUpdate = function () {
                return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore();
            }),
            (c.Text.prototype.update = function () {}),
            (c.Text.prototype.destroy = function (a) {
                this.texture.destroy(!0), c.Component.Destroy.prototype.destroy.call(this, a);
            }),
            (c.Text.prototype.setShadow = function (a, b, c, d, e, f) {
                return (
                    void 0 === a && (a = 0),
                    void 0 === b && (b = 0),
                    void 0 === c && (c = "rgba(0, 0, 0, 1)"),
                    void 0 === d && (d = 0),
                    void 0 === e && (e = !0),
                    void 0 === f && (f = !0),
                    (this.style.shadowOffsetX = a),
                    (this.style.shadowOffsetY = b),
                    (this.style.shadowColor = c),
                    (this.style.shadowBlur = d),
                    (this.style.shadowStroke = e),
                    (this.style.shadowFill = f),
                    (this.dirty = !0),
                    this
                );
            }),
            (c.Text.prototype.setStyle = function (a, b) {
                void 0 === b && (b = !1),
                    ((a = a || {}).font = a.font || "bold 20pt Arial"),
                    (a.backgroundColor = a.backgroundColor || null),
                    (a.fill = a.fill || "black"),
                    (a.align = a.align || "left"),
                    (a.boundsAlignH = a.boundsAlignH || "left"),
                    (a.boundsAlignV = a.boundsAlignV || "top"),
                    (a.stroke = a.stroke || "black"),
                    (a.strokeThickness = a.strokeThickness || 0),
                    (a.wordWrap = a.wordWrap || !1),
                    (a.wordWrapWidth = a.wordWrapWidth || 100),
                    (a.maxLines = a.maxLines || 0),
                    (a.shadowOffsetX = a.shadowOffsetX || 0),
                    (a.shadowOffsetY = a.shadowOffsetY || 0),
                    (a.shadowColor = a.shadowColor || "rgba(0,0,0,0)"),
                    (a.shadowBlur = a.shadowBlur || 0),
                    (a.tabs = a.tabs || 0);
                var c = this.fontToComponents(a.font);
                return (
                    a.fontStyle && (c.fontStyle = a.fontStyle),
                    a.fontVariant && (c.fontVariant = a.fontVariant),
                    a.fontWeight && (c.fontWeight = a.fontWeight),
                    a.fontSize && ("number" == typeof a.fontSize && (a.fontSize = a.fontSize + "px"), (c.fontSize = a.fontSize)),
                    (this._fontComponents = c),
                    (a.font = this.componentsToFont(this._fontComponents)),
                    (this.style = a),
                    (this.dirty = !0),
                    b && this.updateText(),
                    this
                );
            }),
            (c.Text.prototype.updateText = function () {
                (this.texture.baseTexture.resolution = this._res), (this.context.font = this.style.font);
                var a = this.text;
                this.style.wordWrap && (a = this.runWordWrap(this.text));
                var b = a.split(/(?:\r\n|\r|\n)/),
                    c = this.style.tabs,
                    d = [],
                    e = 0,
                    f = this.determineFontProperties(this.style.font),
                    g = b.length;
                0 < this.style.maxLines && this.style.maxLines < b.length && (g = this.style.maxLines);
                for (var h = (this._charCount = 0); h < g; h++) {
                    if (0 === c) {
                        var i = this.style.strokeThickness + this.padding.x;
                        0 < this.colors.length || 0 < this.strokeColors.length || 0 < this.fontWeights.length || 0 < this.fontStyles.length ? (i += this.measureLine(b[h])) : (i += this.context.measureText(b[h]).width),
                            this.style.wordWrap && (i -= this.context.measureText(" ").width);
                    } else {
                        var j = b[h].split(/(?:\t)/);
                        i = this.padding.x + this.style.strokeThickness;
                        if (Array.isArray(c))
                            for (var k = 0, l = 0; l < j.length; l++) {
                                var m;
                                (m = 0 < this.colors.length || 0 < this.strokeColors.length || 0 < this.fontWeights.length || 0 < this.fontStyles.length ? this.measureLine(j[l]) : Math.ceil(this.context.measureText(j[l]).width)),
                                    0 < l && (k += c[l - 1]),
                                    (i = k + m);
                            }
                        else
                            for (l = 0; l < j.length; l++) {
                                0 < this.colors.length || 0 < this.strokeColors.length || 0 < this.fontWeights.length || 0 < this.fontStyles.length ? (i += this.measureLine(j[l])) : (i += Math.ceil(this.context.measureText(j[l]).width)),
                                    (i += this.game.math.snapToCeil(i, c) - i);
                            }
                    }
                    (d[h] = Math.ceil(i)), (e = Math.max(e, d[h]));
                }
                this.canvas.width = e * this._res;
                var r,
                    s,
                    o = f.fontSize + this.style.strokeThickness + this.padding.y,
                    p = o * g,
                    q = this._lineSpacing;
                for (
                    q < 0 && Math.abs(q) > o && (q = -o),
                        0 !== q && (p += 0 < q ? q * b.length : q * (b.length - 1)),
                        this.canvas.height = p * this._res,
                        this.context.scale(this._res, this._res),
                        navigator.isCocoonJS && this.context.clearRect(0, 0, this.canvas.width, this.canvas.height),
                        this.style.backgroundColor && ((this.context.fillStyle = this.style.backgroundColor), this.context.fillRect(0, 0, this.canvas.width, this.canvas.height)),
                        this.context.fillStyle = this.style.fill,
                        this.context.font = this.style.font,
                        this.context.strokeStyle = this.style.stroke,
                        this.context.textBaseline = "alphabetic",
                        this.context.lineWidth = this.style.strokeThickness,
                        this.context.lineCap = "round",
                        this.context.lineJoin = "round",
                        h = this._charCount = 0;
                    h < g;
                    h++
                )
                    (r = this.style.strokeThickness / 2),
                        (s = this.style.strokeThickness / 2 + h * o + f.ascent),
                        0 < h && (s += q * h),
                        "right" === this.style.align ? (r += e - d[h]) : "center" === this.style.align && (r += (e - d[h]) / 2),
                        this.autoRound && ((r = Math.round(r)), (s = Math.round(s))),
                        0 < this.colors.length || 0 < this.strokeColors.length || 0 < this.fontWeights.length || 0 < this.fontStyles.length
                            ? this.updateLine(b[h], r, s)
                            : (this.style.stroke && this.style.strokeThickness && (this.updateShadow(this.style.shadowStroke), 0 === c ? this.context.strokeText(b[h], r, s) : this.renderTabLine(b[h], r, s, !1)),
                              this.style.fill && (this.updateShadow(this.style.shadowFill), 0 === c ? this.context.fillText(b[h], r, s) : this.renderTabLine(b[h], r, s, !0)));
                this.updateTexture(), (this.dirty = !1);
            }),
            (c.Text.prototype.renderTabLine = function (a, b, c, d) {
                var e = a.split(/(?:\t)/),
                    f = this.style.tabs,
                    g = 0;
                if (Array.isArray(f)) for (var h = 0, i = 0; i < e.length; i++) 0 < i && (h += f[i - 1]), (g = b + h), d ? this.context.fillText(e[i], g, c) : this.context.strokeText(e[i], g, c);
                else
                    for (i = 0; i < e.length; i++) {
                        var j = Math.ceil(this.context.measureText(e[i]).width);
                        (g = this.game.math.snapToCeil(b, f)), d ? this.context.fillText(e[i], g, c) : this.context.strokeText(e[i], g, c), (b = g + j);
                    }
            }),
            (c.Text.prototype.updateShadow = function (a) {
                a
                    ? ((this.context.shadowOffsetX = this.style.shadowOffsetX), (this.context.shadowOffsetY = this.style.shadowOffsetY), (this.context.shadowColor = this.style.shadowColor), (this.context.shadowBlur = this.style.shadowBlur))
                    : ((this.context.shadowOffsetX = 0), (this.context.shadowOffsetY = 0), (this.context.shadowColor = 0), (this.context.shadowBlur = 0));
            }),
            (c.Text.prototype.measureLine = function (a) {
                for (var b = 0, c = 0; c < a.length; c++) {
                    var d = a[c];
                    if (0 < this.fontWeights.length || 0 < this.fontStyles.length) {
                        var e = this.fontToComponents(this.context.font);
                        this.fontStyles[this._charCount] && (e.fontStyle = this.fontStyles[this._charCount]),
                            this.fontWeights[this._charCount] && (e.fontWeight = this.fontWeights[this._charCount]),
                            (this.context.font = this.componentsToFont(e));
                    }
                    this.style.stroke && this.style.strokeThickness && (this.strokeColors[this._charCount] && (this.context.strokeStyle = this.strokeColors[this._charCount]), this.updateShadow(this.style.shadowStroke)),
                        this.style.fill && (this.colors[this._charCount] && (this.context.fillStyle = this.colors[this._charCount]), this.updateShadow(this.style.shadowFill)),
                        (b += this.context.measureText(d).width),
                        this._charCount++;
                }
                return Math.ceil(b);
            }),
            (c.Text.prototype.updateLine = function (a, b, c) {
                for (var d = 0; d < a.length; d++) {
                    var e = a[d];
                    if (0 < this.fontWeights.length || 0 < this.fontStyles.length) {
                        var f = this.fontToComponents(this.context.font);
                        this.fontStyles[this._charCount] && (f.fontStyle = this.fontStyles[this._charCount]),
                            this.fontWeights[this._charCount] && (f.fontWeight = this.fontWeights[this._charCount]),
                            (this.context.font = this.componentsToFont(f));
                    }
                    this.style.stroke &&
                        this.style.strokeThickness &&
                        (this.strokeColors[this._charCount] && (this.context.strokeStyle = this.strokeColors[this._charCount]), this.updateShadow(this.style.shadowStroke), this.context.strokeText(e, b, c)),
                        this.style.fill && (this.colors[this._charCount] && (this.context.fillStyle = this.colors[this._charCount]), this.updateShadow(this.style.shadowFill), this.context.fillText(e, b, c)),
                        (b += this.context.measureText(e).width),
                        this._charCount++;
                }
            }),
            (c.Text.prototype.clearColors = function () {
                return (this.colors = []), (this.strokeColors = []), (this.dirty = !0), this;
            }),
            (c.Text.prototype.clearFontValues = function () {
                return (this.fontStyles = []), (this.fontWeights = []), (this.dirty = !0), this;
            }),
            (c.Text.prototype.addColor = function (a, b) {
                return (this.colors[b] = a), (this.dirty = !0), this;
            }),
            (c.Text.prototype.addStrokeColor = function (a, b) {
                return (this.strokeColors[b] = a), (this.dirty = !0), this;
            }),
            (c.Text.prototype.addFontStyle = function (a, b) {
                return (this.fontStyles[b] = a), (this.dirty = !0), this;
            }),
            (c.Text.prototype.addFontWeight = function (a, b) {
                return (this.fontWeights[b] = a), (this.dirty = !0), this;
            }),
            (c.Text.prototype.precalculateWordWrap = function (a) {
                return (this.texture.baseTexture.resolution = this._res), (this.context.font = this.style.font), this.runWordWrap(a).split(/(?:\r\n|\r|\n)/);
            }),
            (c.Text.prototype.runWordWrap = function (a) {
                return this.useAdvancedWrap ? this.advancedWordWrap(a) : this.basicWordWrap(a);
            }),
            (c.Text.prototype.advancedWordWrap = function (a) {
                for (var b = this.context, c = this.style.wordWrapWidth, d = "", e = a.replace(/ +/gi, " ").split(/\r?\n/gi), f = e.length, g = 0; g < f; g++) {
                    var h = e[g],
                        i = "";
                    if (((h = h.replace(/^ *|\s*$/gi, "")), b.measureText(h).width < c)) d += h + "\n";
                    else {
                        for (var j = c, k = h.split(" "), l = 0; l < k.length; l++) {
                            var m = k[l],
                                n = m + " ",
                                o = b.measureText(n).width;
                            if (j < o) {
                                if (0 === l) {
                                    for (var p = n; p.length && ((p = p.slice(0, -1)), !((o = b.measureText(p).width) <= j)); );
                                    if (!p.length) throw new Error("This text's wordWrapWidth setting is less than a single character!");
                                    var q = m.substr(p.length);
                                    (k[l] = q), (i += p);
                                }
                                var r = k[l].length ? l : l + 1,
                                    s = k
                                        .slice(r)
                                        .join(" ")
                                        .replace(/[ \n]*$/gi, "");
                                (e[g + 1] = s + " " + (e[g + 1] || "")), (f = e.length);
                                break;
                            }
                            (i += n), (j -= o);
                        }
                        d += i.replace(/[ \n]*$/gi, "") + "\n";
                    }
                }
                return d.replace(/[\s|\n]*$/gi, "");
            }),
            (c.Text.prototype.basicWordWrap = function (a) {
                for (var b = "", c = a.split("\n"), d = 0; d < c.length; d++) {
                    for (var e = this.style.wordWrapWidth, f = c[d].split(" "), g = 0; g < f.length; g++) {
                        var h = this.context.measureText(f[g]).width,
                            i = h + this.context.measureText(" ").width;
                        e < i ? (0 < g && (b += "\n"), (b += f[g] + " "), (e = this.style.wordWrapWidth - h)) : ((e -= i), (b += f[g] + " "));
                    }
                    d < c.length - 1 && (b += "\n");
                }
                return b;
            }),
            (c.Text.prototype.updateFont = function (a) {
                var b = this.componentsToFont(a);
                this.style.font !== b && ((this.style.font = b), (this.dirty = !0), this.parent && this.updateTransform());
            }),
            (c.Text.prototype.fontToComponents = function (a) {
                var b = a.match(
                    /^\s*(?:\b(normal|italic|oblique|inherit)?\b)\s*(?:\b(normal|small-caps|inherit)?\b)\s*(?:\b(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit)?\b)\s*(?:\b(xx-small|x-small|small|medium|large|x-large|xx-large|larger|smaller|0|\d*(?:[.]\d*)?(?:%|[a-z]{2,5}))?\b)\s*(.*)\s*$/
                );
                if (b) {
                    var c = b[5].trim();
                    return (
                        /^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(c) || /['",]/.exec(c) || (c = "'" + c + "'"),
                        { font: a, fontStyle: b[1] || "normal", fontVariant: b[2] || "normal", fontWeight: b[3] || "normal", fontSize: b[4] || "medium", fontFamily: c }
                    );
                }
                return { font: a };
            }),
            (c.Text.prototype.componentsToFont = function (a) {
                var b,
                    c = [];
                return (
                    (b = a.fontStyle) && "normal" !== b && c.push(b),
                    (b = a.fontVariant) && "normal" !== b && c.push(b),
                    (b = a.fontWeight) && "normal" !== b && c.push(b),
                    (b = a.fontSize) && "medium" !== b && c.push(b),
                    (b = a.fontFamily) && c.push(b),
                    c.length || c.push(a.font),
                    c.join(" ")
                );
            }),
            (c.Text.prototype.setText = function (a, b) {
                return void 0 === b && (b = !1), (this.text = a.toString() || ""), b ? this.updateText() : (this.dirty = !0), this;
            }),
            (c.Text.prototype.parseList = function (a) {
                if (!Array.isArray(a)) return this;
                for (var b = "", c = 0; c < a.length; c++) Array.isArray(a[c]) ? ((b += a[c].join("\t")), c < a.length - 1 && (b += "\n")) : ((b += a[c]), c < a.length - 1 && (b += "\t"));
                return (this.text = b), (this.dirty = !0), this;
            }),
            (c.Text.prototype.setTextBounds = function (a, b, d, e) {
                return (
                    void 0 === a ? (this.textBounds = null) : (this.textBounds ? this.textBounds.setTo(a, b, d, e) : (this.textBounds = new c.Rectangle(a, b, d, e)), this.style.wordWrapWidth > d && (this.style.wordWrapWidth = d)),
                    this.updateTexture(),
                    this
                );
            }),
            (c.Text.prototype.updateTexture = function () {
                var a = this.texture.baseTexture,
                    b = this.texture.crop,
                    c = this.texture.frame,
                    d = this.canvas.width,
                    e = this.canvas.height;
                if (((a.width = d), (a.height = e), (b.width = d), (b.height = e), (c.width = d), (c.height = e), (this.texture.width = d), (this.texture.height = e), (this._width = d), (this._height = e), this.textBounds)) {
                    var f = this.textBounds.x,
                        g = this.textBounds.y;
                    "right" === this.style.boundsAlignH
                        ? (f += this.textBounds.width - this.canvas.width / this.resolution)
                        : "center" === this.style.boundsAlignH && (f += this.textBounds.halfWidth - this.canvas.width / this.resolution / 2),
                        "bottom" === this.style.boundsAlignV
                            ? (g += this.textBounds.height - this.canvas.height / this.resolution)
                            : "middle" === this.style.boundsAlignV && (g += this.textBounds.halfHeight - this.canvas.height / this.resolution / 2),
                        (this.pivot.x = -f),
                        (this.pivot.y = -g);
                }
                (this.renderable = 0 !== d && 0 !== e), (this.texture.requiresReTint = !0), this.texture.baseTexture.dirty();
            }),
            (c.Text.prototype._renderWebGL = function (a) {
                this.dirty && (this.updateText(), (this.dirty = !1)), PIXI.Sprite.prototype._renderWebGL.call(this, a);
            }),
            (c.Text.prototype._renderCanvas = function (a) {
                this.dirty && (this.updateText(), (this.dirty = !1)), PIXI.Sprite.prototype._renderCanvas.call(this, a);
            }),
            (c.Text.prototype.determineFontProperties = function (a) {
                var b = c.Text.fontPropertiesCache[a];
                if (!b) {
                    b = {};
                    var d = c.Text.fontPropertiesCanvas,
                        e = c.Text.fontPropertiesContext;
                    e.font = a;
                    var f = Math.ceil(e.measureText("|Mq").width),
                        g = Math.ceil(e.measureText("|Mq").width),
                        h = 2 * g;
                    if (
                        ((g = (1.4 * g) | 0),
                        (d.width = f),
                        (d.height = h),
                        (e.fillStyle = "#f00"),
                        e.fillRect(0, 0, f, h),
                        (e.font = a),
                        (e.textBaseline = "alphabetic"),
                        (e.fillStyle = "#000"),
                        e.fillText("|Mq", 0, g),
                        !e.getImageData(0, 0, f, h))
                    )
                        return (b.ascent = g), (b.descent = g + 6), (b.fontSize = b.ascent + b.descent), (c.Text.fontPropertiesCache[a] = b);
                    var i,
                        j,
                        k = e.getImageData(0, 0, f, h).data,
                        l = k.length,
                        m = 4 * f,
                        n = 0,
                        o = !1;
                    for (i = 0; i < g; i++) {
                        for (j = 0; j < m; j += 4)
                            if (255 !== k[n + j]) {
                                o = !0;
                                break;
                            }
                        if (o) break;
                        n += m;
                    }
                    for (b.ascent = g - i, n = l - m, o = !1, i = h; g < i; i--) {
                        for (j = 0; j < m; j += 4)
                            if (255 !== k[n + j]) {
                                o = !0;
                                break;
                            }
                        if (o) break;
                        n -= m;
                    }
                    (b.descent = i - g), (b.descent += 6), (b.fontSize = b.ascent + b.descent), (c.Text.fontPropertiesCache[a] = b);
                }
                return b;
            }),
            (c.Text.prototype.getBounds = function (a) {
                return this.dirty && (this.updateText(), (this.dirty = !1)), PIXI.Sprite.prototype.getBounds.call(this, a);
            }),
            Object.defineProperty(c.Text.prototype, "text", {
                get: function () {
                    return this._text;
                },
                set: function (a) {
                    a !== this._text && ((this._text = a.toString() || ""), (this.dirty = !0), this.parent && this.updateTransform());
                },
            }),
            Object.defineProperty(c.Text.prototype, "cssFont", {
                get: function () {
                    return this.componentsToFont(this._fontComponents);
                },
                set: function (a) {
                    (a = a || "bold 20pt Arial"), (this._fontComponents = this.fontToComponents(a)), this.updateFont(this._fontComponents);
                },
            }),
            Object.defineProperty(c.Text.prototype, "font", {
                get: function () {
                    return this._fontComponents.fontFamily;
                },
                set: function (a) {
                    (a = (a = a || "Arial").trim()), /^(?:inherit|serif|sans-serif|cursive|fantasy|monospace)$/.exec(a) || /['",]/.exec(a) || (a = "'" + a + "'"), (this._fontComponents.fontFamily = a), this.updateFont(this._fontComponents);
                },
            }),
            Object.defineProperty(c.Text.prototype, "fontSize", {
                get: function () {
                    var a = this._fontComponents.fontSize;
                    return a && /(?:^0$|px$)/.exec(a) ? parseInt(a, 10) : a;
                },
                set: function (a) {
                    "number" == typeof (a = a || "0") && (a += "px"), (this._fontComponents.fontSize = a), this.updateFont(this._fontComponents);
                },
            }),
            Object.defineProperty(c.Text.prototype, "fontWeight", {
                get: function () {
                    return this._fontComponents.fontWeight || "normal";
                },
                set: function (a) {
                    (a = a || "normal"), (this._fontComponents.fontWeight = a), this.updateFont(this._fontComponents);
                },
            }),
            Object.defineProperty(c.Text.prototype, "fontStyle", {
                get: function () {
                    return this._fontComponents.fontStyle || "normal";
                },
                set: function (a) {
                    (a = a || "normal"), (this._fontComponents.fontStyle = a), this.updateFont(this._fontComponents);
                },
            }),
            Object.defineProperty(c.Text.prototype, "fontVariant", {
                get: function () {
                    return this._fontComponents.fontVariant || "normal";
                },
                set: function (a) {
                    (a = a || "normal"), (this._fontComponents.fontVariant = a), this.updateFont(this._fontComponents);
                },
            }),
            Object.defineProperty(c.Text.prototype, "fill", {
                get: function () {
                    return this.style.fill;
                },
                set: function (a) {
                    a !== this.style.fill && ((this.style.fill = a), (this.dirty = !0));
                },
            }),
            Object.defineProperty(c.Text.prototype, "align", {
                get: function () {
                    return this.style.align;
                },
                set: function (a) {
                    a !== this.style.align && ((this.style.align = a), (this.dirty = !0));
                },
            }),
            Object.defineProperty(c.Text.prototype, "resolution", {
                get: function () {
                    return this._res;
                },
                set: function (a) {
                    a !== this._res && ((this._res = a), (this.dirty = !0));
                },
            }),
            Object.defineProperty(c.Text.prototype, "tabs", {
                get: function () {
                    return this.style.tabs;
                },
                set: function (a) {
                    a !== this.style.tabs && ((this.style.tabs = a), (this.dirty = !0));
                },
            }),
            Object.defineProperty(c.Text.prototype, "boundsAlignH", {
                get: function () {
                    return this.style.boundsAlignH;
                },
                set: function (a) {
                    a !== this.style.boundsAlignH && ((this.style.boundsAlignH = a), (this.dirty = !0));
                },
            }),
            Object.defineProperty(c.Text.prototype, "boundsAlignV", {
                get: function () {
                    return this.style.boundsAlignV;
                },
                set: function (a) {
                    a !== this.style.boundsAlignV && ((this.style.boundsAlignV = a), (this.dirty = !0));
                },
            }),
            Object.defineProperty(c.Text.prototype, "stroke", {
                get: function () {
                    return this.style.stroke;
                },
                set: function (a) {
                    a !== this.style.stroke && ((this.style.stroke = a), (this.dirty = !0));
                },
            }),
            Object.defineProperty(c.Text.prototype, "strokeThickness", {
                get: function () {
                    return this.style.strokeThickness;
                },
                set: function (a) {
                    a !== this.style.strokeThickness && ((this.style.strokeThickness = a), (this.dirty = !0));
                },
            }),
            Object.defineProperty(c.Text.prototype, "wordWrap", {
                get: function () {
                    return this.style.wordWrap;
                },
                set: function (a) {
                    a !== this.style.wordWrap && ((this.style.wordWrap = a), (this.dirty = !0));
                },
            }),
            Object.defineProperty(c.Text.prototype, "wordWrapWidth", {
                get: function () {
                    return this.style.wordWrapWidth;
                },
                set: function (a) {
                    a !== this.style.wordWrapWidth && ((this.style.wordWrapWidth = a), (this.dirty = !0));
                },
            }),
            Object.defineProperty(c.Text.prototype, "lineSpacing", {
                get: function () {
                    return this._lineSpacing;
                },
                set: function (a) {
                    a !== this._lineSpacing && ((this._lineSpacing = parseFloat(a)), (this.dirty = !0), this.parent && this.updateTransform());
                },
            }),
            Object.defineProperty(c.Text.prototype, "shadowOffsetX", {
                get: function () {
                    return this.style.shadowOffsetX;
                },
                set: function (a) {
                    a !== this.style.shadowOffsetX && ((this.style.shadowOffsetX = a), (this.dirty = !0));
                },
            }),
            Object.defineProperty(c.Text.prototype, "shadowOffsetY", {
                get: function () {
                    return this.style.shadowOffsetY;
                },
                set: function (a) {
                    a !== this.style.shadowOffsetY && ((this.style.shadowOffsetY = a), (this.dirty = !0));
                },
            }),
            Object.defineProperty(c.Text.prototype, "shadowColor", {
                get: function () {
                    return this.style.shadowColor;
                },
                set: function (a) {
                    a !== this.style.shadowColor && ((this.style.shadowColor = a), (this.dirty = !0));
                },
            }),
            Object.defineProperty(c.Text.prototype, "shadowBlur", {
                get: function () {
                    return this.style.shadowBlur;
                },
                set: function (a) {
                    a !== this.style.shadowBlur && ((this.style.shadowBlur = a), (this.dirty = !0));
                },
            }),
            Object.defineProperty(c.Text.prototype, "shadowStroke", {
                get: function () {
                    return this.style.shadowStroke;
                },
                set: function (a) {
                    a !== this.style.shadowStroke && ((this.style.shadowStroke = a), (this.dirty = !0));
                },
            }),
            Object.defineProperty(c.Text.prototype, "shadowFill", {
                get: function () {
                    return this.style.shadowFill;
                },
                set: function (a) {
                    a !== this.style.shadowFill && ((this.style.shadowFill = a), (this.dirty = !0));
                },
            }),
            Object.defineProperty(c.Text.prototype, "width", {
                get: function () {
                    return this.dirty && (this.updateText(), (this.dirty = !1)), this.scale.x * this.texture.frame.width;
                },
                set: function (a) {
                    (this.scale.x = a / this.texture.frame.width), (this._width = a);
                },
            }),
            Object.defineProperty(c.Text.prototype, "height", {
                get: function () {
                    return this.dirty && (this.updateText(), (this.dirty = !1)), this.scale.y * this.texture.frame.height;
                },
                set: function (a) {
                    (this.scale.y = a / this.texture.frame.height), (this._height = a);
                },
            }),
            (c.Text.fontPropertiesCache = {}),
            (c.Text.fontPropertiesCanvas = document.createElement("canvas")),
            (c.Text.fontPropertiesContext = c.Text.fontPropertiesCanvas.getContext("2d")),
            (c.BitmapText = function (a, b, d, e, f, g, h) {
                (b = b || 0),
                    (d = d || 0),
                    (e = e || ""),
                    (f = f || ""),
                    (g = g || 32),
                    (h = h || "left"),
                    PIXI.DisplayObjectContainer.call(this),
                    (this.type = c.BITMAPTEXT),
                    (this.physicsType = c.SPRITE),
                    (this.textWidth = 0),
                    (this.textHeight = 0),
                    (this.anchor = new c.Point()),
                    (this._prevAnchor = new c.Point()),
                    (this._glyphs = []),
                    (this._maxWidth = 0),
                    (this._text = f.toString() || ""),
                    (this._data = a.cache.getBitmapFont(e)),
                    (this._font = e),
                    (this._fontSize = g),
                    (this._align = h),
                    (this._tint = 16777215),
                    this.updateText(),
                    (this.dirty = !1),
                    c.Component.Core.init.call(this, a, b, d, "", null);
            }),
            (c.BitmapText.prototype = Object.create(PIXI.DisplayObjectContainer.prototype)),
            (c.BitmapText.prototype.constructor = c.BitmapText),
            c.Component.Core.install.call(c.BitmapText.prototype, ["Angle", "AutoCull", "Bounds", "Destroy", "FixedToCamera", "InputEnabled", "InWorld", "LifeSpan", "PhysicsBody", "Reset"]),
            (c.BitmapText.prototype.preUpdatePhysics = c.Component.PhysicsBody.preUpdate),
            (c.BitmapText.prototype.preUpdateLifeSpan = c.Component.LifeSpan.preUpdate),
            (c.BitmapText.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate),
            (c.BitmapText.prototype.preUpdateCore = c.Component.Core.preUpdate),
            (c.BitmapText.prototype.preUpdate = function () {
                return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore();
            }),
            (c.BitmapText.prototype.postUpdate = function () {
                c.Component.PhysicsBody.postUpdate.call(this),
                    c.Component.FixedToCamera.postUpdate.call(this),
                    this.body && this.body.type === c.Physics.ARCADE && ((this.textWidth === this.body.sourceWidth && this.textHeight === this.body.sourceHeight) || this.body.setSize(this.textWidth, this.textHeight));
            }),
            (c.BitmapText.prototype.setText = function (a) {
                this.text = a;
            }),
            (c.BitmapText.prototype.scanLine = function (a, b, c) {
                for (var d = 0, e = 0, f = -1, g = 0, h = null, i = 0 < this._maxWidth ? this._maxWidth : null, j = [], k = 0; k < c.length; k++) {
                    var l = k === c.length - 1;
                    if (/(?:\r\n|\r|\n)/.test(c.charAt(k))) return { width: e, text: c.substr(0, k), end: l, chars: j };
                    var o,
                        m = c.charCodeAt(k),
                        n = a.chars[m];
                    void 0 === n && ((m = 32), (n = a.chars[m]));
                    var p = h && n.kerning[h] ? n.kerning[h] : 0;
                    if ((/(\s)/.test(c.charAt(k)) && ((f = k), (g = e)), (o = (p + n.texture.width + n.xOffset) * b), i && i <= e + o && -1 < f)) return { width: g || e, text: c.substr(0, k - (k - f)), end: l, chars: j };
                    (e += (n.xAdvance + p) * b), j.push(d + (n.xOffset + p) * b), (d += (n.xAdvance + p) * b), (h = m);
                }
                return { width: e, text: c, end: l, chars: j };
            }),
            (c.BitmapText.prototype.cleanText = function (a, b) {
                void 0 === b && (b = "");
                var c = this._data.font;
                if (!c) return "";
                for (var e = a.replace(/\r\n|\n\r|\n|\r/g, "\n").split("\n"), f = 0; f < e.length; f++) {
                    for (var g = "", h = e[f], i = 0; i < h.length; i++) g = c.chars[h.charCodeAt(i)] ? g.concat(h[i]) : g.concat(b);
                    e[f] = g;
                }
                return e.join("\n");
            }),
            (c.BitmapText.prototype.updateText = function () {
                var a = this._data.font;
                if (a) {
                    var b = this.text,
                        c = this._fontSize / a.size,
                        d = [],
                        e = 0;
                    this.textWidth = 0;
                    do {
                        ((f = this.scanLine(a, c, b)).y = e), d.push(f), f.width > this.textWidth && (this.textWidth = f.width), (e += a.lineHeight * c), (b = b.substr(f.text.length + 1));
                    } while (!1 === f.end);
                    this.textHeight = e;
                    for (var g = 0, h = 0, i = this.textWidth * this.anchor.x, j = this.textHeight * this.anchor.y, k = 0; k < d.length; k++) {
                        var f = d[k];
                        "right" === this._align ? (h = this.textWidth - f.width) : "center" === this._align && (h = (this.textWidth - f.width) / 2);
                        for (var l = 0; l < f.text.length; l++) {
                            var m = f.text.charCodeAt(l),
                                n = a.chars[m];
                            void 0 === n && ((m = 32), (n = a.chars[m]));
                            var o = this._glyphs[g];
                            o ? (o.texture = n.texture) : (((o = new PIXI.Sprite(n.texture)).name = f.text[l]), this._glyphs.push(o)),
                                (o.position.x = f.chars[l] + h - i),
                                (o.position.y = f.y + n.yOffset * c - j),
                                o.scale.set(c),
                                (o.tint = this.tint),
                                (o.texture.requiresReTint = !0),
                                o.parent || this.addChild(o),
                                g++;
                        }
                    }
                    for (k = g; k < this._glyphs.length; k++) this.removeChild(this._glyphs[k]);
                }
            }),
            (c.BitmapText.prototype.purgeGlyphs = function () {
                for (var a = this._glyphs.length, b = [], c = 0; c < this._glyphs.length; c++) this._glyphs[c].parent !== this ? this._glyphs[c].destroy() : b.push(this._glyphs[c]);
                return (this._glyphs = []), (this._glyphs = b), this.updateText(), a - b.length;
            }),
            (c.BitmapText.prototype.updateTransform = function () {
                (!this.dirty && this.anchor.equals(this._prevAnchor)) || (this.updateText(), (this.dirty = !1), this._prevAnchor.copyFrom(this.anchor)), PIXI.DisplayObjectContainer.prototype.updateTransform.call(this);
            }),
            Object.defineProperty(c.BitmapText.prototype, "align", {
                get: function () {
                    return this._align;
                },
                set: function (a) {
                    a === this._align || ("left" !== a && "center" !== a && "right" !== a) || ((this._align = a), this.updateText());
                },
            }),
            Object.defineProperty(c.BitmapText.prototype, "tint", {
                get: function () {
                    return this._tint;
                },
                set: function (a) {
                    a !== this._tint && ((this._tint = a), this.updateText());
                },
            }),
            Object.defineProperty(c.BitmapText.prototype, "font", {
                get: function () {
                    return this._font;
                },
                set: function (a) {
                    a !== this._font && ((this._font = a.trim()), (this._data = this.game.cache.getBitmapFont(this._font)), this.updateText());
                },
            }),
            Object.defineProperty(c.BitmapText.prototype, "fontSize", {
                get: function () {
                    return this._fontSize;
                },
                set: function (a) {
                    (a = parseInt(a, 10)) !== this._fontSize && 0 < a && ((this._fontSize = a), this.updateText());
                },
            }),
            Object.defineProperty(c.BitmapText.prototype, "text", {
                get: function () {
                    return this._text;
                },
                set: function (a) {
                    a !== this._text && ((this._text = a.toString() || ""), this.updateText());
                },
            }),
            Object.defineProperty(c.BitmapText.prototype, "maxWidth", {
                get: function () {
                    return this._maxWidth;
                },
                set: function (a) {
                    a !== this._maxWidth && ((this._maxWidth = a), this.updateText());
                },
            }),
            Object.defineProperty(c.BitmapText.prototype, "smoothed", {
                get: function () {
                    return !this._data.base.scaleMode;
                },
                set: function (a) {
                    this._data.base.scaleMode = a ? 0 : 1;
                },
            }),
            (c.RetroFont = function (a, b, d, e, f, g, h, i, j, k) {
                if (!a.cache.checkImageKey(b)) return !1;
                null != g || (g = a.cache.getImage(b).width / d),
                    (this.characterWidth = d),
                    (this.characterHeight = e),
                    (this.characterSpacingX = h || 0),
                    (this.characterSpacingY = i || 0),
                    (this.characterPerRow = g),
                    (this.offsetX = j || 0),
                    (this.offsetY = k || 0),
                    (this.align = "left"),
                    (this.multiLine = !1),
                    (this.autoUpperCase = !0),
                    (this.customSpacingX = 0),
                    (this.customSpacingY = 0),
                    (this.fixedWidth = 0),
                    (this.fontSet = a.cache.getImage(b)),
                    (this._text = ""),
                    (this.grabData = []),
                    (this.frameData = new c.FrameData());
                for (var l = this.offsetX, m = this.offsetY, n = 0, o = 0; o < f.length; o++) {
                    var p = this.frameData.addFrame(new c.Frame(o, l, m, this.characterWidth, this.characterHeight));
                    (this.grabData[f.charCodeAt(o)] = p.index), ++n === this.characterPerRow ? ((n = 0), (l = this.offsetX), (m += this.characterHeight + this.characterSpacingY)) : (l += this.characterWidth + this.characterSpacingX);
                }
                a.cache.updateFrameData(b, this.frameData), (this.stamp = new c.Image(a, 0, 0, b, 0)), c.RenderTexture.call(this, a, 100, 100, "", c.scaleModes.NEAREST), (this.type = c.RETROFONT);
            }),
            (c.RetroFont.prototype = Object.create(c.RenderTexture.prototype)),
            (c.RetroFont.prototype.constructor = c.RetroFont),
            (c.RetroFont.ALIGN_LEFT = "left"),
            (c.RetroFont.ALIGN_RIGHT = "right"),
            (c.RetroFont.ALIGN_CENTER = "center"),
            (c.RetroFont.TEXT_SET1 = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~"),
            (c.RetroFont.TEXT_SET2 = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ"),
            (c.RetroFont.TEXT_SET3 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 "),
            (c.RetroFont.TEXT_SET4 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789"),
            (c.RetroFont.TEXT_SET5 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789"),
            (c.RetroFont.TEXT_SET6 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' "),
            (c.RetroFont.TEXT_SET7 = "AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39"),
            (c.RetroFont.TEXT_SET8 = "0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ"),
            (c.RetroFont.TEXT_SET9 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!"),
            (c.RetroFont.TEXT_SET10 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"),
            (c.RetroFont.TEXT_SET11 = "ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"),
            (c.RetroFont.prototype.setFixedWidth = function (a, b) {
                void 0 === b && (b = "left"), (this.fixedWidth = a), (this.align = b);
            }),
            (c.RetroFont.prototype.setText = function (a, b, c, d, e, f) {
                (this.multiLine = b || !1), (this.customSpacingX = c || 0), (this.customSpacingY = d || 0), (this.align = e || "left"), (this.autoUpperCase = !f), 0 < a.length && (this.text = a);
            }),
            (c.RetroFont.prototype.buildRetroFontText = function () {
                var a = 0,
                    b = 0;
                if ((this.clear(), this.multiLine)) {
                    var d = this._text.split("\n");
                    0 < this.fixedWidth
                        ? this.resize(this.fixedWidth, d.length * (this.characterHeight + this.customSpacingY) - this.customSpacingY, !0)
                        : this.resize(this.getLongestLine() * (this.characterWidth + this.customSpacingX), d.length * (this.characterHeight + this.customSpacingY) - this.customSpacingY, !0);
                    for (var e = 0; e < d.length; e++)
                        (a = 0),
                            this.align === c.RetroFont.ALIGN_RIGHT
                                ? (a = this.width - d[e].length * (this.characterWidth + this.customSpacingX))
                                : this.align === c.RetroFont.ALIGN_CENTER && ((a = this.width / 2 - (d[e].length * (this.characterWidth + this.customSpacingX)) / 2), (a += this.customSpacingX / 2)),
                            a < 0 && (a = 0),
                            this.pasteLine(d[e], a, b, this.customSpacingX),
                            (b += this.characterHeight + this.customSpacingY);
                } else
                    0 < this.fixedWidth ? this.resize(this.fixedWidth, this.characterHeight, !0) : this.resize(this._text.length * (this.characterWidth + this.customSpacingX), this.characterHeight, !0),
                        (a = 0),
                        this.align === c.RetroFont.ALIGN_RIGHT
                            ? (a = this.width - this._text.length * (this.characterWidth + this.customSpacingX))
                            : this.align === c.RetroFont.ALIGN_CENTER && ((a = this.width / 2 - (this._text.length * (this.characterWidth + this.customSpacingX)) / 2), (a += this.customSpacingX / 2)),
                        a < 0 && (a = 0),
                        this.pasteLine(this._text, a, 0, this.customSpacingX);
                this.requiresReTint = !0;
            }),
            (c.RetroFont.prototype.pasteLine = function (a, b, c, d) {
                for (var e = 0; e < a.length; e++)
                    if (" " === a.charAt(e)) b += this.characterWidth + d;
                    else if (0 <= this.grabData[a.charCodeAt(e)] && ((this.stamp.frame = this.grabData[a.charCodeAt(e)]), this.renderXY(this.stamp, b, c, !1), (b += this.characterWidth + d) > this.width)) break;
            }),
            (c.RetroFont.prototype.getLongestLine = function () {
                var a = 0;
                if (0 < this._text.length) for (var b = this._text.split("\n"), c = 0; c < b.length; c++) b[c].length > a && (a = b[c].length);
                return a;
            }),
            (c.RetroFont.prototype.removeUnsupportedCharacters = function (a) {
                for (var b = "", c = 0; c < this._text.length; c++) {
                    var d = this._text[c],
                        e = d.charCodeAt(0);
                    (0 <= this.grabData[e] || (!a && "\n" === d)) && (b = b.concat(d));
                }
                return b;
            }),
            (c.RetroFont.prototype.updateOffset = function (a, b) {
                if (this.offsetX !== a || this.offsetY !== b) {
                    for (var c = a - this.offsetX, d = b - this.offsetY, e = this.game.cache.getFrameData(this.stamp.key).getFrames(), f = e.length; f--; ) (e[f].x += c), (e[f].y += d);
                    this.buildRetroFontText();
                }
            }),
            Object.defineProperty(c.RetroFont.prototype, "text", {
                get: function () {
                    return this._text;
                },
                set: function (a) {
                    var b;
                    (b = this.autoUpperCase ? a.toUpperCase() : a) !== this._text && ((this._text = b), this.removeUnsupportedCharacters(this.multiLine), this.buildRetroFontText());
                },
            }),
            Object.defineProperty(c.RetroFont.prototype, "smoothed", {
                get: function () {
                    return this.stamp.smoothed;
                },
                set: function (a) {
                    (this.stamp.smoothed = a), this.buildRetroFontText();
                },
            }),
            (c.Rope = function (a, b, d, e, f, g) {
                (this.points = []),
                    (this.points = g),
                    (this._hasUpdateAnimation = !1),
                    (this._updateAnimationCallback = null),
                    (b = b || 0),
                    (d = d || 0),
                    (e = e || null),
                    (f = f || null),
                    (this.type = c.ROPE),
                    PIXI.Rope.call(this, c.Cache.DEFAULT, this.points),
                    c.Component.Core.init.call(this, a, b, d, e, f);
            }),
            (c.Rope.prototype = Object.create(PIXI.Rope.prototype)),
            (c.Rope.prototype.constructor = c.Rope),
            c.Component.Core.install.call(c.Rope.prototype, [
                "Angle",
                "Animation",
                "AutoCull",
                "Bounds",
                "BringToTop",
                "Crop",
                "Delta",
                "Destroy",
                "FixedToCamera",
                "InWorld",
                "LifeSpan",
                "LoadTexture",
                "Overlap",
                "PhysicsBody",
                "Reset",
                "ScaleMinMax",
                "Smoothed",
            ]),
            (c.Rope.prototype.preUpdatePhysics = c.Component.PhysicsBody.preUpdate),
            (c.Rope.prototype.preUpdateLifeSpan = c.Component.LifeSpan.preUpdate),
            (c.Rope.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate),
            (c.Rope.prototype.preUpdateCore = c.Component.Core.preUpdate),
            (c.Rope.prototype.preUpdate = function () {
                return !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore();
            }),
            (c.Rope.prototype.update = function () {
                this._hasUpdateAnimation && this.updateAnimation.call(this);
            }),
            (c.Rope.prototype.reset = function (a, b) {
                return c.Component.Reset.prototype.reset.call(this, a, b), this;
            }),
            Object.defineProperty(c.Rope.prototype, "updateAnimation", {
                get: function () {
                    return this._updateAnimation;
                },
                set: function (a) {
                    a && "function" == typeof a ? ((this._hasUpdateAnimation = !0), (this._updateAnimation = a)) : ((this._hasUpdateAnimation = !1), (this._updateAnimation = null));
                },
            }),
            Object.defineProperty(c.Rope.prototype, "segments", {
                get: function () {
                    for (var a, b, d, e, f, g, h, i, j = [], k = 0; k < this.points.length; k++)
                        (a = 4 * k),
                            (b = this.vertices[a] * this.scale.x),
                            (d = this.vertices[a + 1] * this.scale.y),
                            (e = this.vertices[a + 4] * this.scale.x),
                            (f = this.vertices[a + 3] * this.scale.y),
                            (g = c.Math.difference(b, e)),
                            (h = c.Math.difference(d, f)),
                            (b += this.world.x),
                            (d += this.world.y),
                            (i = new c.Rectangle(b, d, g, h)),
                            j.push(i);
                    return j;
                },
            }),
            (c.TileSprite = function (a, b, d, e, f, g, h) {
                (b = b || 0), (d = d || 0), (e = e || 256), (f = f || 256), (g = g || null), (h = h || null), (this.type = c.TILESPRITE), (this.physicsType = c.SPRITE), (this._scroll = new c.Point());
                var i = a.cache.getImage("__default", !0);
                PIXI.TilingSprite.call(this, new PIXI.Texture(i.base), e, f), c.Component.Core.init.call(this, a, b, d, g, h);
            }),
            (c.TileSprite.prototype = Object.create(PIXI.TilingSprite.prototype)),
            (c.TileSprite.prototype.constructor = c.TileSprite),
            c.Component.Core.install.call(c.TileSprite.prototype, [
                "Angle",
                "Animation",
                "AutoCull",
                "Bounds",
                "BringToTop",
                "Destroy",
                "FixedToCamera",
                "Health",
                "InCamera",
                "InputEnabled",
                "InWorld",
                "LifeSpan",
                "LoadTexture",
                "Overlap",
                "PhysicsBody",
                "Reset",
                "Smoothed",
            ]),
            (c.TileSprite.prototype.preUpdatePhysics = c.Component.PhysicsBody.preUpdate),
            (c.TileSprite.prototype.preUpdateLifeSpan = c.Component.LifeSpan.preUpdate),
            (c.TileSprite.prototype.preUpdateInWorld = c.Component.InWorld.preUpdate),
            (c.TileSprite.prototype.preUpdateCore = c.Component.Core.preUpdate),
            (c.TileSprite.prototype.preUpdate = function () {
                return (
                    0 !== this._scroll.x && (this.tilePosition.x += this._scroll.x * this.game.time.physicsElapsed),
                    0 !== this._scroll.y && (this.tilePosition.y += this._scroll.y * this.game.time.physicsElapsed),
                    !!(this.preUpdatePhysics() && this.preUpdateLifeSpan() && this.preUpdateInWorld()) && this.preUpdateCore()
                );
            }),
            (c.TileSprite.prototype.autoScroll = function (a, b) {
                this._scroll.set(a, b);
            }),
            (c.TileSprite.prototype.stopScroll = function () {
                this._scroll.set(0, 0);
            }),
            (c.TileSprite.prototype.destroy = function (a) {
                c.Component.Destroy.prototype.destroy.call(this, a), PIXI.TilingSprite.prototype.destroy.call(this);
            }),
            (c.TileSprite.prototype.reset = function (a, b) {
                return c.Component.Reset.prototype.reset.call(this, a, b), (this.tilePosition.x = 0), (this.tilePosition.y = 0), this;
            }),
            (c.Device = function () {
                (this.deviceReadyAt = 0),
                    (this.initialized = !1),
                    (this.desktop = !1),
                    (this.iOS = !1),
                    (this.iOSVersion = 0),
                    (this.cocoonJS = !1),
                    (this.cocoonJSApp = !1),
                    (this.wechatMinigame = !1),
                    (this.cordova = !1),
                    (this.node = !1),
                    (this.nodeWebkit = !1),
                    (this.electron = !1),
                    (this.ejecta = !1),
                    (this.crosswalk = !1),
                    (this.android = !1),
                    (this.chromeOS = !1),
                    (this.linux = !1),
                    (this.macOS = !1),
                    (this.windows = !1),
                    (this.windowsPhone = !1),
                    (this.canvas = !1),
                    (this.canvasBitBltShift = null),
                    (this.webGL = !1),
                    (this.file = !1),
                    (this.fileSystem = !1),
                    (this.localStorage = !1),
                    (this.worker = !1),
                    (this.css3D = !1),
                    (this.pointerLock = !1),
                    (this.typedArray = !1),
                    (this.vibration = !1),
                    (this.getUserMedia = !0),
                    (this.quirksMode = !1),
                    (this.touch = !1),
                    (this.mspointer = !1),
                    (this.wheelEvent = null),
                    (this.arora = !1),
                    (this.chrome = !1),
                    (this.chromeVersion = 0),
                    (this.epiphany = !1),
                    (this.firefox = !1),
                    (this.firefoxVersion = 0),
                    (this.ie = !1),
                    (this.ieVersion = 0),
                    (this.trident = !1),
                    (this.tridentVersion = 0),
                    (this.edge = !1),
                    (this.mobileSafari = !1),
                    (this.midori = !1),
                    (this.opera = !1),
                    (this.safari = !1),
                    (this.safariVersion = 0),
                    (this.webApp = !1),
                    (this.silk = !1),
                    (this.audioData = !1),
                    (this.webAudio = !1),
                    (this.ogg = !1),
                    (this.opus = !1),
                    (this.mp3 = !1),
                    (this.wav = !1),
                    (this.m4a = !1),
                    (this.webm = !1),
                    (this.dolby = !1),
                    (this.oggVideo = !1),
                    (this.h264Video = !1),
                    (this.mp4Video = !1),
                    (this.webmVideo = !1),
                    (this.vp9Video = !1),
                    (this.hlsVideo = !1),
                    (this.iPhone = !1),
                    (this.iPhone4 = !1),
                    (this.iPad = !1),
                    (this.pixelRatio = 0),
                    (this.littleEndian = !1),
                    (this.LITTLE_ENDIAN = !1),
                    (this.support32bit = !1),
                    (this.fullscreen = !1),
                    (this.requestFullscreen = ""),
                    (this.cancelFullscreen = ""),
                    (this.fullscreenKeyboard = !1);
            }),
            (c.Device = new c.Device()),
            (c.Device.onInitialized = new c.Signal()),
            (c.Device.whenReady = function (a, b, c) {
                var d = this._readyCheck;
                if (this.deviceReadyAt || !d) a.call(b, this);
                else if (d._monitor || c) (d._queue = d._queue || []), d._queue.push([a, b]);
                else {
                    (d._monitor = d.bind(this)), (d._queue = d._queue || []), d._queue.push([a, b]);
                    var e = void 0 !== window.cordova,
                        f = navigator.isCocoonJS;
                    "complete" === document.readyState || "interactive" === document.readyState
                        ? window.setTimeout(d._monitor, 0)
                        : e && !f
                        ? document.addEventListener("deviceready", d._monitor, !1)
                        : (document.addEventListener("DOMContentLoaded", d._monitor, !1), window.addEventListener("load", d._monitor, !1));
                }
            }),
            (c.Device._readyCheck = function () {
                var a = this._readyCheck;
                if (document.body) {
                    if (!this.deviceReadyAt) {
                        (this.deviceReadyAt = Date.now()),
                            document.removeEventListener("deviceready", a._monitor),
                            document.removeEventListener("DOMContentLoaded", a._monitor),
                            window.removeEventListener("load", a._monitor),
                            this._initialize(),
                            (this.initialized = !0),
                            this.onInitialized.dispatch(this);
                        for (var b; (b = a._queue.shift()); ) {
                            var c = b[0],
                                d = b[1];
                            c.call(d, this);
                        }
                        (this._readyCheck = null), (this._initialize = null), (this.onInitialized = null);
                    }
                } else window.setTimeout(a._monitor, 20);
            }),
            (c.Device._initialize = function () {
                var m = this;
                (function () {
                    var a = navigator.userAgent;
                    /Playstation Vita/.test(a)
                        ? (m.vita = !0)
                        : /Kindle/.test(a) || /\bKF[A-Z][A-Z]+/.test(a) || /Silk.*Mobile Safari/.test(a)
                        ? (m.kindle = !0)
                        : /Android/.test(a)
                        ? (m.android = !0)
                        : /CrOS/.test(a)
                        ? (m.chromeOS = !0)
                        : /iP[ao]d|iPhone/i.test(a)
                        ? ((m.iOS = !0), navigator.appVersion.match(/OS (\d+)/), (m.iOSVersion = parseInt(RegExp.$1, 10)))
                        : /Linux/.test(a)
                        ? (m.linux = !0)
                        : /Mac OS/.test(a)
                        ? (m.macOS = !0)
                        : /Windows/.test(a) && (m.windows = !0),
                        (/Windows Phone/i.test(a) || /IEMobile/i.test(a)) && ((m.android = !1), (m.iOS = !1), (m.macOS = !1), (m.windows = !0), (m.windowsPhone = !0));
                    var b = /Silk/.test(a);
                    (m.windows || m.macOS || (m.linux && !b) || m.chromeOS) && (m.desktop = !0), (m.windowsPhone || (/Windows NT/i.test(a) && /Touch/i.test(a))) && (m.desktop = !1);
                })(),
                    (function () {
                        var a = navigator.userAgent;
                        if (
                            (/Arora/.test(a)
                                ? (m.arora = !0)
                                : /Edge\/\d+/.test(a)
                                ? (m.edge = !0)
                                : /Chrome\/(\d+)/.test(a) && !m.windowsPhone
                                ? ((m.chrome = !0), (m.chromeVersion = parseInt(RegExp.$1, 10)))
                                : /Epiphany/.test(a)
                                ? (m.epiphany = !0)
                                : /Firefox\D+(\d+)/.test(a)
                                ? ((m.firefox = !0), (m.firefoxVersion = parseInt(RegExp.$1, 10)))
                                : /AppleWebKit/.test(a) && m.iOS
                                ? (m.mobileSafari = !0)
                                : /MSIE (\d+\.\d+);/.test(a)
                                ? ((m.ie = !0), (m.ieVersion = parseInt(RegExp.$1, 10)))
                                : /Midori/.test(a)
                                ? (m.midori = !0)
                                : /Opera/.test(a)
                                ? (m.opera = !0)
                                : /Safari\/(\d+)/.test(a) && !m.windowsPhone
                                ? ((m.safari = !0), /Version\/(\d+)\./.test(a) && (m.safariVersion = parseInt(RegExp.$1, 10)))
                                : /Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(a) && ((m.ie = !0), (m.trident = !0), (m.tridentVersion = parseInt(RegExp.$1, 10)), (m.ieVersion = parseInt(RegExp.$3, 10))),
                            /Silk/.test(a) && (m.silk = !0),
                            navigator.standalone && (m.webApp = !0),
                            void 0 !== window.cordova && (m.cordova = !0),
                            "undefined" != typeof process && "undefined" != typeof require && (m.node = !0),
                            m.node && "object" == typeof process.versions && ((m.nodeWebkit = !!process.versions["node-webkit"]), (m.electron = !!process.versions.electron)),
                            navigator.isCocoonJS && (m.cocoonJS = !0),
                            void 0 !== window.wx && (m.wechatMinigame = !0),
                            m.cocoonJS)
                        )
                            try {
                                m.cocoonJSApp = "undefined" != typeof CocoonJS;
                            } catch (a) {
                                m.cocoonJSApp = !1;
                            }
                        void 0 !== window.ejecta && (m.ejecta = !0), /Crosswalk/.test(a) && (m.crosswalk = !0);
                    })(),
                    (function () {
                        (m.audioData = !!window.Audio), (m.webAudio = !(!window.AudioContext && !window.webkitAudioContext));
                        var a = document.createElement("audio");
                        try {
                            if (
                                a.canPlayType &&
                                (a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, "") && (m.ogg = !0),
                                (a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/, "") || a.canPlayType("audio/opus;").replace(/^no$/, "")) && (m.opus = !0),
                                a.canPlayType("audio/mpeg;").replace(/^no$/, "") && (m.mp3 = !0),
                                a.canPlayType('audio/wav; codecs="1"').replace(/^no$/, "") && (m.wav = !0),
                                (a.canPlayType("audio/x-m4a;") || a.canPlayType("audio/aac;").replace(/^no$/, "")) && (m.m4a = !0),
                                a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/, "") && (m.webm = !0),
                                "" !== a.canPlayType('audio/mp4;codecs="ec-3"'))
                            )
                                if (m.edge) m.dolby = !0;
                                else if (m.safari && 9 <= m.safariVersion && /Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)) {
                                    var b = parseInt(RegExp.$1, 10),
                                        c = parseInt(RegExp.$2, 10);
                                    ((10 === b && 11 <= c) || 10 < b) && (m.dolby = !0);
                                }
                        } catch (a) {}
                    })(),
                    (function () {
                        var a = document.createElement("video");
                        try {
                            a.canPlayType &&
                                (a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/, "") && (m.oggVideo = !0),
                                a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/, "") && ((m.h264Video = !0), (m.mp4Video = !0)),
                                a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/, "") && (m.webmVideo = !0),
                                a.canPlayType('video/webm; codecs="vp9"').replace(/^no$/, "") && (m.vp9Video = !0),
                                a.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/, "") && (m.hlsVideo = !0));
                        } catch (a) {}
                    })(),
                    (function () {
                        var a,
                            b = document.createElement("p"),
                            c = { webkitTransform: "-webkit-transform", OTransform: "-o-transform", msTransform: "-ms-transform", MozTransform: "-moz-transform", transform: "transform" };
                        for (var d in (document.body.insertBefore(b, null), c)) void 0 !== b.style[d] && ((b.style[d] = "translate3d(1px,1px,1px)"), (a = window.getComputedStyle(b).getPropertyValue(c[d])));
                        document.body.removeChild(b), (m.css3D = void 0 !== a && 0 < a.length && "none" !== a);
                    })(),
                    (function () {
                        var a;
                        (m.pixelRatio = window.devicePixelRatio || 1),
                            (m.iPhone = -1 !== navigator.userAgent.toLowerCase().indexOf("iphone")),
                            (m.iPhone4 = 2 === m.pixelRatio && m.iPhone),
                            (m.iPad = !!(!(a = -1 !== navigator.userAgent.toLowerCase().indexOf("ipad")) && navigator.userAgent.match(/Mac/) && navigator.maxTouchPoints && 2 < navigator.maxTouchPoints) || a),
                            "undefined" != typeof Int8Array ? (m.typedArray = !0) : (m.typedArray = !1),
                            "undefined" != typeof ArrayBuffer &&
                                "undefined" != typeof Uint8Array &&
                                "undefined" != typeof Uint32Array &&
                                ((m.littleEndian = (function () {
                                    var a = new ArrayBuffer(4),
                                        b = new Uint8Array(a),
                                        c = new Uint32Array(a);
                                    return (b[0] = 161), (b[1] = 178), (b[2] = 195), (b[3] = 212), 3569595041 === c[0] || (2712847316 !== c[0] && null);
                                })()),
                                (m.LITTLE_ENDIAN = m.littleEndian)),
                            (m.support32bit =
                                "undefined" != typeof ArrayBuffer &&
                                "undefined" != typeof Uint8ClampedArray &&
                                "undefined" != typeof Int32Array &&
                                null !== m.littleEndian &&
                                (function () {
                                    if (void 0 === Uint8ClampedArray) return !1;
                                    var b = PIXI.CanvasPool.create(this, 1, 1).getContext("2d");
                                    if (!b) return !1;
                                    var c = b.createImageData(1, 1);
                                    return PIXI.CanvasPool.remove(this), c.data instanceof Uint8ClampedArray;
                                })()),
                            (navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate),
                            navigator.vibrate && (m.vibration = !0);
                    })(),
                    (function () {
                        m.canvas = !!window.CanvasRenderingContext2D || m.cocoonJS;
                        try {
                            m.localStorage = !!localStorage.getItem;
                        } catch (a) {
                            m.localStorage = !1;
                        }
                        (m.file = !!(window.File && window.FileReader && window.FileList && window.Blob)), (m.fileSystem = !!window.requestFileSystem);
                        var a = { stencil: !0 };
                        (m.webGL = (function () {
                            try {
                                var b = document.createElement("canvas");
                                return (b.screencanvas = !1), !!window.WebGLRenderingContext && (b.getContext("webgl", a) || b.getContext("experimental-webgl", a));
                            } catch (a) {
                                return !1;
                            }
                        })()),
                            (m.webGL = !!m.webGL),
                            (m.worker = !!window.Worker),
                            (m.pointerLock = "pointerLockElement" in document || "mozPointerLockElement" in document || "webkitPointerLockElement" in document),
                            (m.quirksMode = "CSS1Compat" !== document.compatMode),
                            (navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia || navigator.oGetUserMedia),
                            (window.URL = window.URL || window.webkitURL || window.mozURL || window.msURL),
                            (m.getUserMedia = m.getUserMedia && !!navigator.getUserMedia && !!window.URL),
                            m.firefox && m.firefoxVersion < 21 && (m.getUserMedia = !1),
                            !m.iOS && (m.ie || m.firefox || m.chrome) && (m.canvasBitBltShift = !0),
                            (m.safari || m.mobileSafari) && (m.canvasBitBltShift = !1);
                    })(),
                    (function () {
                        for (
                            var a = ["requestFullscreen", "requestFullScreen", "webkitRequestFullscreen", "webkitRequestFullScreen", "msRequestFullscreen", "msRequestFullScreen", "mozRequestFullScreen", "mozRequestFullscreen"],
                                b = document.createElement("div"),
                                c = 0;
                            c < a.length;
                            c++
                        )
                            if (b[a[c]]) {
                                (m.fullscreen = !0), (m.requestFullscreen = a[c]);
                                break;
                            }
                        var d = ["cancelFullScreen", "exitFullscreen", "webkitCancelFullScreen", "webkitExitFullscreen", "msCancelFullScreen", "msExitFullscreen", "mozCancelFullScreen", "mozExitFullscreen"];
                        if (m.fullscreen)
                            for (c = 0; c < d.length; c++)
                                if (document[d[c]]) {
                                    m.cancelFullscreen = d[c];
                                    break;
                                }
                        window.Element && Element.ALLOW_KEYBOARD_INPUT && (m.fullscreenKeyboard = !0);
                    })(),
                    ("ontouchstart" in document.documentElement || (window.navigator.maxTouchPoints && 1 <= window.navigator.maxTouchPoints)) && (m.touch = !0),
                    (window.PointerEvent || window.MSPointerEvent || window.navigator.msPointerEnabled || window.navigator.pointerEnabled) && (m.mspointer = !0),
                    m.cocoonJS ||
                        ("onwheel" in window || (m.ie && "WheelEvent" in window)
                            ? (m.wheelEvent = "wheel")
                            : "onmousewheel" in window
                            ? (m.wheelEvent = "mousewheel")
                            : m.firefox && "MouseScrollEvent" in window && (m.wheelEvent = "DOMMouseScroll"));
            }),
            (c.Device.canPlayAudio = function (a) {
                return !!(
                    ("mp3" === a && this.mp3) ||
                    ("ogg" === a && (this.ogg || this.opus)) ||
                    ("m4a" === a && this.m4a) ||
                    ("opus" === a && this.opus) ||
                    ("wav" === a && this.wav) ||
                    ("webm" === a && this.webm) ||
                    ("mp4" === a && this.dolby)
                );
            }),
            (c.Device.canPlayVideo = function (a) {
                return !!(("webm" === a && (this.webmVideo || this.vp9Video)) || ("mp4" === a && (this.mp4Video || this.h264Video)) || (("ogg" === a || "ogv" === a) && this.oggVideo) || ("mpeg" === a && this.hlsVideo));
            }),
            (c.Device.isConsoleOpen = function () {
                return !(!window.console || !window.console.firebug) || (!(!window.console || (console.clear, !console.profiles)) && 0 < console.profiles.length);
            }),
            (c.Device.isAndroidStockBrowser = function () {
                var a = window.navigator.userAgent.match(/Android.*AppleWebKit\/([\d.]+)/);
                return a && a[1] < 537;
            }),
            (c.Canvas = {
                create: function (a, b, c, d, e) {
                    (b = b || 256), (c = c || 256);
                    var f = e ? document.createElement("canvas") : PIXI.CanvasPool.create(a, b, c);
                    return "string" == typeof d && "" !== d && (f.id = d), (f.width = b), (f.height = c), (f.style.display = "block"), f;
                },
                setBackgroundColor: function (a, b) {
                    return (b = b || "rgb(0,0,0)"), (a.style.backgroundColor = b), a;
                },
                setTouchAction: function (a, b) {
                    return (b = b || "none"), (a.style.msTouchAction = b), (a.style["ms-touch-action"] = b), (a.style["touch-action"] = b), a;
                },
                setUserSelect: function (a, b) {
                    return (
                        (b = b || "none"),
                        (a.style["-webkit-touch-callout"] = b),
                        (a.style["-webkit-user-select"] = b),
                        (a.style["-khtml-user-select"] = b),
                        (a.style["-moz-user-select"] = b),
                        (a.style["-ms-user-select"] = b),
                        (a.style["user-select"] = b),
                        (a.style["-webkit-tap-highlight-color"] = "rgba(0, 0, 0, 0)"),
                        a
                    );
                },
                addToDOM: function (a, b, c) {
                    var d;
                    return (
                        void 0 === c && (c = !0),
                        b && ("string" == typeof b ? (d = document.getElementById(b)) : "object" == typeof b && 1 === b.nodeType && (d = b)),
                        d || (d = document.body),
                        c && d.style && (d.style.overflow = "hidden"),
                        d.appendChild(a),
                        a
                    );
                },
                removeFromDOM: function (a) {
                    a.parentNode && a.parentNode.removeChild(a);
                },
                setTransform: function (a, b, c, d, e, f, g) {
                    return a.setTransform(d, f, g, e, b, c), a;
                },
                setSmoothingEnabled: function (a, b) {
                    var d = c.Canvas.getSmoothingPrefix(a);
                    return d && (a[d] = b), a;
                },
                getSmoothingPrefix: function (a) {
                    var b = ["i", "webkitI", "msI", "mozI", "oI"];
                    for (var c in b) {
                        var d = b[c] + "mageSmoothingEnabled";
                        if (d in a) return d;
                    }
                    return null;
                },
                getSmoothingEnabled: function (a) {
                    var b = c.Canvas.getSmoothingPrefix(a);
                    if (b) return a[b];
                },
                setImageRenderingCrisp: function (a) {
                    for (var b = ["optimizeSpeed", "crisp-edges", "-moz-crisp-edges", "-webkit-optimize-contrast", "optimize-contrast", "pixelated"], c = 0; c < b.length; c++) a.style["image-rendering"] = b[c];
                    return (a.style.msInterpolationMode = "nearest-neighbor"), a;
                },
                setImageRenderingBicubic: function (a) {
                    return (a.style["image-rendering"] = "auto"), (a.style.msInterpolationMode = "bicubic"), a;
                },
            }),
            (c.RequestAnimationFrame = function (a, b) {
                void 0 === b && (b = !1), (this.game = a), (this.isRunning = !1), (this.forceSetTimeOut = b);
                for (var c = ["ms", "moz", "webkit", "o"], d = 0; d < c.length && !window.requestAnimationFrame; d++)
                    (window.requestAnimationFrame = window[c[d] + "RequestAnimationFrame"]), (window.cancelAnimationFrame = window[c[d] + "CancelAnimationFrame"]);
                (this._isSetTimeOut = !1), (this._onLoop = null), (this._timeOutID = null);
            }),
            (c.RequestAnimationFrame.prototype = {
                start: function () {
                    this.isRunning = !0;
                    var a = this;
                    !window.requestAnimationFrame || this.forceSetTimeOut
                        ? ((this._isSetTimeOut = !0),
                          (this._onLoop = function () {
                              return a.updateSetTimeout();
                          }),
                          (this._timeOutID = window.setTimeout(this._onLoop, 0)))
                        : ((this._isSetTimeOut = !1),
                          (this._onLoop = function (b) {
                              return a.updateRAF(b);
                          }),
                          (this._timeOutID = window.requestAnimationFrame(this._onLoop)));
                },
                updateRAF: function (a) {
                    this.isRunning && (this.game.update(Math.floor(a)), (this._timeOutID = window.requestAnimationFrame(this._onLoop)));
                },
                updateSetTimeout: function () {
                    this.isRunning && (this.game.update(Date.now()), (this._timeOutID = window.setTimeout(this._onLoop, this.game.time.timeToCall)));
                },
                stop: function () {
                    this._isSetTimeOut ? clearTimeout(this._timeOutID) : window.cancelAnimationFrame(this._timeOutID), (this.isRunning = !1);
                },
                isSetTimeOut: function () {
                    return this._isSetTimeOut;
                },
                isRAF: function () {
                    return !1 === this._isSetTimeOut;
                },
            }),
            (c.RequestAnimationFrame.prototype.constructor = c.RequestAnimationFrame),
            (c.Math = {
                PI2: 2 * Math.PI,
                between: function (a, b) {
                    return Math.floor(Math.random() * (b - a + 1) + a);
                },
                fuzzyEqual: function (a, b, c) {
                    return void 0 === c && (c = 1e-4), Math.abs(a - b) < c;
                },
                fuzzyLessThan: function (a, b, c) {
                    return void 0 === c && (c = 1e-4), a < b + c;
                },
                fuzzyGreaterThan: function (a, b, c) {
                    return void 0 === c && (c = 1e-4), b - c < a;
                },
                fuzzyCeil: function (a, b) {
                    return void 0 === b && (b = 1e-4), Math.ceil(a - b);
                },
                fuzzyFloor: function (a, b) {
                    return void 0 === b && (b = 1e-4), Math.floor(a + b);
                },
                average: function () {
                    for (var a = 0, b = arguments.length, c = 0; c < b; c++) a += +arguments[c];
                    return a / b;
                },
                shear: function (a) {
                    return a % 1;
                },
                snapTo: function (a, b, c) {
                    return void 0 === c && (c = 0), 0 === b ? a : ((a -= c), c + (a = b * Math.round(a / b)));
                },
                snapToFloor: function (a, b, c) {
                    return void 0 === c && (c = 0), 0 === b ? a : ((a -= c), c + (a = b * Math.floor(a / b)));
                },
                snapToCeil: function (a, b, c) {
                    return void 0 === c && (c = 0), 0 === b ? a : ((a -= c), c + (a = b * Math.ceil(a / b)));
                },
                roundTo: function (a, b, c) {
                    void 0 === b && (b = 0), void 0 === c && (c = 10);
                    var d = Math.pow(c, -b);
                    return Math.round(a * d) / d;
                },
                floorTo: function (a, b, c) {
                    void 0 === b && (b = 0), void 0 === c && (c = 10);
                    var d = Math.pow(c, -b);
                    return Math.floor(a * d) / d;
                },
                ceilTo: function (a, b, c) {
                    void 0 === b && (b = 0), void 0 === c && (c = 10);
                    var d = Math.pow(c, -b);
                    return Math.ceil(a * d) / d;
                },
                rotateToAngle: function (a, b, d) {
                    return (
                        void 0 === d && (d = 0.05),
                        a === b || (Math.abs(b - a) <= d || Math.abs(b - a) >= c.Math.PI2 - d ? (a = b) : (Math.abs(b - a) > Math.PI && (b < a ? (b += c.Math.PI2) : (b -= c.Math.PI2)), a < b ? (a += d) : b < a && (a -= d))),
                        a
                    );
                },
                getShortestAngle: function (a, b) {
                    var c = b - a;
                    return 0 === c ? 0 : c - 360 * Math.floor((c - -180) / 360);
                },
                angleBetween: function (a, b, c, d) {
                    return Math.atan2(d - b, c - a);
                },
                angleBetweenY: function (a, b, c, d) {
                    return Math.atan2(c - a, d - b);
                },
                angleBetweenPoints: function (a, b) {
                    return Math.atan2(b.y - a.y, b.x - a.x);
                },
                angleBetweenPointsY: function (a, b) {
                    return Math.atan2(b.x - a.x, b.y - a.y);
                },
                reverseAngle: function (a) {
                    return this.normalizeAngle(a + Math.PI, !0);
                },
                normalizeAngle: function (a) {
                    return 0 <= (a %= 2 * Math.PI) ? a : a + 2 * Math.PI;
                },
                maxAdd: function (a, b, c) {
                    return Math.min(a + b, c);
                },
                minSub: function (a, b, c) {
                    return Math.max(a - b, c);
                },
                wrap: function (a, b, c) {
                    var d = c - b;
                    if (d <= 0) return 0;
                    var e = (a - b) % d;
                    return e < 0 && (e += d), e + b;
                },
                wrapValue: function (a, b, c) {
                    return ((a = Math.abs(a)) + (b = Math.abs(b))) % (c = Math.abs(c));
                },
                isOdd: function (a) {
                    return !!(1 & a);
                },
                isEven: function (a) {
                    return !(1 & a);
                },
                min: function () {
                    if (1 === arguments.length && "object" == typeof arguments[0]) var a = arguments[0];
                    else a = arguments;
                    for (var b = 1, c = 0, d = a.length; b < d; b++) a[b] < a[c] && (c = b);
                    return a[c];
                },
                max: function () {
                    if (1 === arguments.length && "object" == typeof arguments[0]) var a = arguments[0];
                    else a = arguments;
                    for (var b = 1, c = 0, d = a.length; b < d; b++) a[b] > a[c] && (c = b);
                    return a[c];
                },
                minProperty: function (a) {
                    if (2 === arguments.length && "object" == typeof arguments[1]) var b = arguments[1];
                    else b = arguments.slice(1);
                    for (var c = 1, d = 0, e = b.length; c < e; c++) b[c][a] < b[d][a] && (d = c);
                    return b[d][a];
                },
                maxProperty: function (a) {
                    if (2 === arguments.length && "object" == typeof arguments[1]) var b = arguments[1];
                    else b = arguments.slice(1);
                    for (var c = 1, d = 0, e = b.length; c < e; c++) b[c][a] > b[d][a] && (d = c);
                    return b[d][a];
                },
                wrapAngle: function (a, b) {
                    return b ? this.wrap(a, -Math.PI, Math.PI) : this.wrap(a, -180, 180);
                },
                linearInterpolation: function (a, b) {
                    var c = a.length - 1,
                        d = c * b,
                        e = Math.floor(d);
                    return b < 0 ? this.linear(a[0], a[1], d) : 1 < b ? this.linear(a[c], a[c - 1], c - d) : this.linear(a[e], a[c < e + 1 ? c : e + 1], d - e);
                },
                bezierInterpolation: function (a, b) {
                    for (var c = 0, d = a.length - 1, e = 0; e <= d; e++) c += Math.pow(1 - b, d - e) * Math.pow(b, e) * a[e] * this.bernstein(d, e);
                    return c;
                },
                catmullRomInterpolation: function (a, b) {
                    var c = a.length - 1,
                        d = c * b,
                        e = Math.floor(d);
                    return a[0] === a[c]
                        ? (b < 0 && (e = Math.floor((d = c * (1 + b)))), this.catmullRom(a[(e - 1 + c) % c], a[e], a[(e + 1) % c], a[(e + 2) % c], d - e))
                        : b < 0
                        ? a[0] - (this.catmullRom(a[0], a[0], a[1], a[1], -d) - a[0])
                        : 1 < b
                        ? a[c] - (this.catmullRom(a[c], a[c], a[c - 1], a[c - 1], d - c) - a[c])
                        : this.catmullRom(a[e ? e - 1 : 0], a[e], a[c < e + 1 ? c : e + 1], a[c < e + 2 ? c : e + 2], d - e);
                },
                linear: function (a, b, c) {
                    return (b - a) * c + a;
                },
                bernstein: function (a, b) {
                    return this.factorial(a) / this.factorial(b) / this.factorial(a - b);
                },
                factorial: function (a) {
                    if (0 === a) return 1;
                    for (var b = a; --a; ) b *= a;
                    return b;
                },
                catmullRom: function (a, b, c, d, e) {
                    var f = 0.5 * (c - a),
                        g = 0.5 * (d - b),
                        h = e * e;
                    return (2 * b - 2 * c + f + g) * (e * h) + (-3 * b + 3 * c - 2 * f - g) * h + f * e + b;
                },
                difference: function (a, b) {
                    return Math.abs(a - b);
                },
                roundAwayFromZero: function (a) {
                    return 0 < a ? Math.ceil(a) : Math.floor(a);
                },
                sinCosGenerator: function (a, b, c, d) {
                    void 0 === b && (b = 1), void 0 === c && (c = 1), void 0 === d && (d = 1);
                    for (var e = b, f = c, g = (d * Math.PI) / a, h = [], i = [], j = 0; j < a; j++) (e += (f -= e * g) * g), (h[j] = f), (i[j] = e);
                    return { sin: i, cos: h, length: a };
                },
                distance: function (a, b, c, d) {
                    var e = a - c,
                        f = b - d;
                    return Math.sqrt(e * e + f * f);
                },
                distanceSq: function (a, b, c, d) {
                    var e = a - c,
                        f = b - d;
                    return e * e + f * f;
                },
                distancePow: function (a, b, c, d, e) {
                    return void 0 === e && (e = 2), Math.sqrt(Math.pow(c - a, e) + Math.pow(d - b, e));
                },
                clamp: function (a, b, c) {
                    return a < b ? b : c < a ? c : a;
                },
                clampBottom: function (a, b) {
                    return a < b ? b : a;
                },
                within: function (a, b, c) {
                    return Math.abs(a - b) <= c;
                },
                mapLinear: function (a, b, c, d, e) {
                    return d + ((a - b) * (e - d)) / (c - b);
                },
                smoothstep: function (a, b, c) {
                    return (a = Math.max(0, Math.min(1, (a - b) / (c - b)))) * a * (3 - 2 * a);
                },
                smootherstep: function (a, b, c) {
                    return (a = Math.max(0, Math.min(1, (a - b) / (c - b)))) * a * a * (a * (6 * a - 15) + 10);
                },
                sign: function (a) {
                    return a < 0 ? -1 : 0 < a ? 1 : 0;
                },
                percent: function (a, b, c) {
                    return void 0 === c && (c = 0), b < a || b < c ? 1 : a < c || a < c ? 0 : (a - c) / b;
                },
            });
        var k = Math.PI / 180,
            l = 180 / Math.PI;
        return (
            (c.Math.degToRad = function (a) {
                return a * k;
            }),
            (c.Math.radToDeg = function (a) {
                return a * l;
            }),
            (c.RandomDataGenerator = function (a) {
                void 0 === a && (a = []), (this.c = 1), (this.s0 = 0), (this.s1 = 0), (this.s2 = 0), "string" == typeof a ? this.state(a) : this.sow(a);
            }),
            (c.RandomDataGenerator.prototype = {
                rnd: function () {
                    var a = 2091639 * this.s0 + 2.3283064365386963e-10 * this.c;
                    return (this.c = 0 | a), (this.s0 = this.s1), (this.s1 = this.s2), (this.s2 = a - this.c), this.s2;
                },
                sow: function (a) {
                    if (((this.s0 = this.hash(" ")), (this.s1 = this.hash(this.s0)), (this.s2 = this.hash(this.s1)), (this.c = 1), a))
                        for (var b = 0; b < a.length && null != a[b]; b++) {
                            var c = a[b];
                            (this.s0 -= this.hash(c)), (this.s0 += ~~(this.s0 < 0)), (this.s1 -= this.hash(c)), (this.s1 += ~~(this.s1 < 0)), (this.s2 -= this.hash(c)), (this.s2 += ~~(this.s2 < 0));
                        }
                },
                hash: function (a) {
                    var b, c, d;
                    for (d = 4022871197, a = a.toString(), c = 0; c < a.length; c++) (b = 0.02519603282416938 * (d += a.charCodeAt(c))), (b -= d = b >>> 0), (d = (b *= d) >>> 0), (d += 4294967296 * (b -= d));
                    return 2.3283064365386963e-10 * (d >>> 0);
                },
                integer: function () {
                    return 4294967296 * this.rnd.apply(this);
                },
                frac: function () {
                    return this.rnd.apply(this) + 11102230246251565e-32 * ((2097152 * this.rnd.apply(this)) | 0);
                },
                real: function () {
                    return this.integer() + this.frac();
                },
                integerInRange: function (a, b) {
                    return Math.floor(this.realInRange(0, b - a + 1) + a);
                },
                between: function (a, b) {
                    return this.integerInRange(a, b);
                },
                realInRange: function (a, b) {
                    return this.frac() * (b - a) + a;
                },
                normal: function () {
                    return 1 - 2 * this.frac();
                },
                uuid: function () {
                    var a = "",
                        b = "";
                    for (b = a = ""; a++ < 36; b += ~a % 5 | ((3 * a) & 4) ? (15 ^ a ? 8 ^ (this.frac() * (20 ^ a ? 16 : 4)) : 4).toString(16) : "-");
                    return b;
                },
                pick: function (a) {
                    return a[this.integerInRange(0, a.length - 1)];
                },
                sign: function () {
                    return this.pick([-1, 1]);
                },
                weightedPick: function (a) {
                    return a[~~(Math.pow(this.frac(), 2) * (a.length - 1) + 0.5)];
                },
                timestamp: function (a, b) {
                    return this.realInRange(a || 9466848e5, b || 1577862e6);
                },
                angle: function () {
                    return this.integerInRange(-180, 180);
                },
                state: function (a) {
                    return (
                        "string" == typeof a && a.match(/^!rnd/) && ((a = a.split(",")), (this.c = parseFloat(a[1])), (this.s0 = parseFloat(a[2])), (this.s1 = parseFloat(a[3])), (this.s2 = parseFloat(a[4]))),
                        ["!rnd", this.c, this.s0, this.s1, this.s2].join(",")
                    );
                },
            }),
            (c.RandomDataGenerator.prototype.constructor = c.RandomDataGenerator),
            (c.QuadTree = function (a, b, c, d, e, f, g) {
                (this.maxObjects = 10), (this.maxLevels = 4), (this.level = 0), (this.bounds = {}), (this.objects = []), (this.nodes = []), (this._empty = []), this.reset(a, b, c, d, e, f, g);
            }),
            (c.QuadTree.prototype = {
                reset: function (a, b, c, d, e, f, g) {
                    (this.maxObjects = e || 10),
                        (this.maxLevels = f || 4),
                        (this.level = g || 0),
                        (this.bounds = {
                            x: Math.round(a),
                            y: Math.round(b),
                            width: c,
                            height: d,
                            subWidth: Math.floor(c / 2),
                            subHeight: Math.floor(d / 2),
                            right: Math.round(a) + Math.floor(c / 2),
                            bottom: Math.round(b) + Math.floor(d / 2),
                        }),
                        (this.objects.length = 0),
                        (this.nodes.length = 0);
                },
                populate: function (a) {
                    a.forEach(this.populateHandler, this, !0);
                },
                populateHandler: function (a) {
                    a.body && a.exists && this.insert(a.body);
                },
                split: function () {
                    (this.nodes[0] = new c.QuadTree(this.bounds.right, this.bounds.y, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1)),
                        (this.nodes[1] = new c.QuadTree(this.bounds.x, this.bounds.y, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1)),
                        (this.nodes[2] = new c.QuadTree(this.bounds.x, this.bounds.bottom, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1)),
                        (this.nodes[3] = new c.QuadTree(this.bounds.right, this.bounds.bottom, this.bounds.subWidth, this.bounds.subHeight, this.maxObjects, this.maxLevels, this.level + 1));
                },
                insert: function (a) {
                    var b,
                        c = 0;
                    if (null == this.nodes[0] || -1 === (b = this.getIndex(a))) {
                        if ((this.objects.push(a), this.objects.length > this.maxObjects && this.level < this.maxLevels))
                            for (null == this.nodes[0] && this.split(); c < this.objects.length; ) -1 !== (b = this.getIndex(this.objects[c])) ? this.nodes[b].insert(this.objects.splice(c, 1)[0]) : c++;
                    } else this.nodes[b].insert(a);
                },
                getIndex: function (a) {
                    var b = -1;
                    return (
                        a.x < this.bounds.right && a.right < this.bounds.right
                            ? a.y < this.bounds.bottom && a.bottom < this.bounds.bottom
                                ? (b = 1)
                                : a.y > this.bounds.bottom && (b = 2)
                            : a.x > this.bounds.right && (a.y < this.bounds.bottom && a.bottom < this.bounds.bottom ? (b = 0) : a.y > this.bounds.bottom && (b = 3)),
                        b
                    );
                },
                retrieve: function (a) {
                    if (a instanceof c.Rectangle)
                        var b = this.objects,
                            d = this.getIndex(a);
                    else {
                        if (!a.body) return this._empty;
                        (b = this.objects), (d = this.getIndex(a.body));
                    }
                    return (
                        this.nodes[0] &&
                            (b = -1 !== d ? b.concat(this.nodes[d].retrieve(a)) : (b = (b = (b = b.concat(this.nodes[0].retrieve(a))).concat(this.nodes[1].retrieve(a))).concat(this.nodes[2].retrieve(a))).concat(this.nodes[3].retrieve(a))),
                        b
                    );
                },
                clear: function () {
                    this.objects.length = 0;
                    for (var a = this.nodes.length; a--; ) this.nodes[a].clear(), this.nodes.splice(a, 1);
                    this.nodes.length = 0;
                },
            }),
            (c.QuadTree.prototype.constructor = c.QuadTree),
            (c.Net = function (a) {
                this.game = a;
            }),
            (c.Net.prototype = {
                getHostName: function () {
                    return window.location && window.location.hostname ? window.location.hostname : null;
                },
                checkDomainName: function (a) {
                    return -1 !== window.location.hostname.indexOf(a);
                },
                updateQueryString: function (a, b, c, d) {
                    void 0 === c && (c = !1), (void 0 !== d && "" !== d) || (d = window.location.href);
                    var e = "",
                        f = new RegExp("([?|&])" + a + "=.*?(&|#|$)(.*)", "gi");
                    if (f.test(d)) e = null != b ? d.replace(f, "$1" + a + "=" + b + "$2$3") : d.replace(f, "$1$3").replace(/(&|\?)$/, "");
                    else if (null != b) {
                        var g = -1 !== d.indexOf("?") ? "&" : "?",
                            h = d.split("#");
                        (d = h[0] + g + a + "=" + b), h[1] && (d += "#" + h[1]), (e = d);
                    } else e = d;
                    if (!c) return e;
                    window.location.href = e;
                },
                getQueryString: function (a) {
                    void 0 === a && (a = "");
                    var b = {},
                        c = location.search.substring(1).split("&");
                    for (var d in c) {
                        var e = c[d].split("=");
                        if (1 < e.length) {
                            if (a && a === this.decodeURI(e[0])) return this.decodeURI(e[1]);
                            b[this.decodeURI(e[0])] = this.decodeURI(e[1]);
                        }
                    }
                    return b;
                },
                decodeURI: function (a) {
                    return decodeURIComponent(a.replace(/\+/g, " "));
                },
            }),
            (c.Net.prototype.constructor = c.Net),
            (c.TweenManager = function (a) {
                (this.game = a),
                    (this.frameBased = !1),
                    (this._tweens = []),
                    (this._add = []),
                    (this.easeMap = {
                        Power0: c.Easing.Power0,
                        Power1: c.Easing.Power1,
                        Power2: c.Easing.Power2,
                        Power3: c.Easing.Power3,
                        Power4: c.Easing.Power4,
                        Linear: c.Easing.Linear.None,
                        Quad: c.Easing.Quadratic.Out,
                        Cubic: c.Easing.Cubic.Out,
                        Quart: c.Easing.Quartic.Out,
                        Quint: c.Easing.Quintic.Out,
                        Sine: c.Easing.Sinusoidal.Out,
                        Expo: c.Easing.Exponential.Out,
                        Circ: c.Easing.Circular.Out,
                        Elastic: c.Easing.Elastic.Out,
                        Back: c.Easing.Back.Out,
                        Bounce: c.Easing.Bounce.Out,
                        "Quad.easeIn": c.Easing.Quadratic.In,
                        "Cubic.easeIn": c.Easing.Cubic.In,
                        "Quart.easeIn": c.Easing.Quartic.In,
                        "Quint.easeIn": c.Easing.Quintic.In,
                        "Sine.easeIn": c.Easing.Sinusoidal.In,
                        "Expo.easeIn": c.Easing.Exponential.In,
                        "Circ.easeIn": c.Easing.Circular.In,
                        "Elastic.easeIn": c.Easing.Elastic.In,
                        "Back.easeIn": c.Easing.Back.In,
                        "Bounce.easeIn": c.Easing.Bounce.In,
                        "Quad.easeOut": c.Easing.Quadratic.Out,
                        "Cubic.easeOut": c.Easing.Cubic.Out,
                        "Quart.easeOut": c.Easing.Quartic.Out,
                        "Quint.easeOut": c.Easing.Quintic.Out,
                        "Sine.easeOut": c.Easing.Sinusoidal.Out,
                        "Expo.easeOut": c.Easing.Exponential.Out,
                        "Circ.easeOut": c.Easing.Circular.Out,
                        "Elastic.easeOut": c.Easing.Elastic.Out,
                        "Back.easeOut": c.Easing.Back.Out,
                        "Bounce.easeOut": c.Easing.Bounce.Out,
                        "Quad.easeInOut": c.Easing.Quadratic.InOut,
                        "Cubic.easeInOut": c.Easing.Cubic.InOut,
                        "Quart.easeInOut": c.Easing.Quartic.InOut,
                        "Quint.easeInOut": c.Easing.Quintic.InOut,
                        "Sine.easeInOut": c.Easing.Sinusoidal.InOut,
                        "Expo.easeInOut": c.Easing.Exponential.InOut,
                        "Circ.easeInOut": c.Easing.Circular.InOut,
                        "Elastic.easeInOut": c.Easing.Elastic.InOut,
                        "Back.easeInOut": c.Easing.Back.InOut,
                        "Bounce.easeInOut": c.Easing.Bounce.InOut,
                    }),
                    this.game.onPause.add(this._pauseAll, this),
                    this.game.onResume.add(this._resumeAll, this);
            }),
            (c.TweenManager.prototype = {
                getAll: function () {
                    return this._tweens;
                },
                removeAll: function () {
                    for (var a = 0; a < this._tweens.length; a++) this._tweens[a].pendingDelete = !0;
                    this._add = [];
                },
                removeFrom: function (a, b) {
                    if ((void 0 === b && (b = !0), Array.isArray(a))) for (d = 0, e = a.length; d < e; d++) this.removeFrom(a[d]);
                    else if (a.type === c.GROUP && b) for (var d = 0, e = a.children.length; d < e; d++) this.removeFrom(a.children[d]);
                    else {
                        for (d = 0, e = this._tweens.length; d < e; d++) a === this._tweens[d].target && this.remove(this._tweens[d]);
                        for (d = 0, e = this._add.length; d < e; d++) a === this._add[d].target && this.remove(this._add[d]);
                    }
                },
                add: function (a) {
                    (a._manager = this)._add.push(a);
                },
                create: function (a) {
                    return new c.Tween(a, this.game, this);
                },
                remove: function (a) {
                    var b = this._tweens.indexOf(a);
                    -1 !== b ? (this._tweens[b].pendingDelete = !0) : -1 !== (b = this._add.indexOf(a)) && (this._add[b].pendingDelete = !0);
                },
                update: function () {
                    var a = this._add.length,
                        b = this._tweens.length;
                    if (0 === b && 0 === a) return !1;
                    for (var c = 0; c < b; ) this._tweens[c].update(this.game.time.time) ? c++ : (this._tweens.splice(c, 1), b--);
                    return 0 < a && ((this._tweens = this._tweens.concat(this._add)), (this._add.length = 0)), !0;
                },
                isTweening: function (a) {
                    return this._tweens.some(function (b) {
                        return b.target === a;
                    });
                },
                _pauseAll: function () {
                    for (var a = this._tweens.length - 1; 0 <= a; a--) this._tweens[a]._pause();
                },
                _resumeAll: function () {
                    for (var a = this._tweens.length - 1; 0 <= a; a--) this._tweens[a]._resume();
                },
                pauseAll: function () {
                    for (var a = this._tweens.length - 1; 0 <= a; a--) this._tweens[a].pause();
                },
                resumeAll: function () {
                    for (var a = this._tweens.length - 1; 0 <= a; a--) this._tweens[a].resume(!0);
                },
            }),
            (c.TweenManager.prototype.constructor = c.TweenManager),
            (c.Tween = function (a, b, d) {
                (this.game = b),
                    (this.target = a),
                    (this.manager = d),
                    (this.timeline = []),
                    (this.reverse = !1),
                    (this.timeScale = 1),
                    (this.repeatCounter = 0),
                    (this.pendingDelete = !1),
                    (this.onStart = new c.Signal()),
                    (this.onLoop = new c.Signal()),
                    (this.onRepeat = new c.Signal()),
                    (this.onChildComplete = new c.Signal()),
                    (this.onComplete = new c.Signal()),
                    (this.isRunning = !1),
                    (this.current = 0),
                    (this.properties = {}),
                    (this.chainedTween = null),
                    (this.isPaused = !1),
                    (this.frameBased = d.frameBased),
                    (this._onUpdateCallback = null),
                    (this._onUpdateCallbackContext = null),
                    (this._pausedTime = 0),
                    (this._codePaused = !1),
                    (this._hasStarted = !1);
            }),
            (c.Tween.prototype = {
                to: function (a, b, d, e, f, g, h) {
                    return (
                        (void 0 === b || b <= 0) && (b = 1e3),
                        null != d || (d = c.Easing.Default),
                        void 0 === e && (e = !1),
                        void 0 === f && (f = 0),
                        void 0 === g && (g = 0),
                        void 0 === h && (h = !1),
                        "string" == typeof d && this.manager.easeMap[d] && (d = this.manager.easeMap[d]),
                        this.isRunning || (this.timeline.push(new c.TweenData(this).to(a, b, d, f, g, h)), e && this.start()),
                        this
                    );
                },
                from: function (a, b, d, e, f, g, h) {
                    return (
                        void 0 === b && (b = 1e3),
                        null != d || (d = c.Easing.Default),
                        void 0 === e && (e = !1),
                        void 0 === f && (f = 0),
                        void 0 === g && (g = 0),
                        void 0 === h && (h = !1),
                        "string" == typeof d && this.manager.easeMap[d] && (d = this.manager.easeMap[d]),
                        this.isRunning || (this.timeline.push(new c.TweenData(this).from(a, b, d, f, g, h)), e && this.start()),
                        this
                    );
                },
                start: function (a) {
                    if ((void 0 === a && (a = 0), null === this.game || null === this.target || 0 === this.timeline.length || this.isRunning)) return this;
                    for (var b = 0; b < this.timeline.length; b++) for (var c in this.timeline[b].vEnd) (this.properties[c] = this.target[c] || 0), Array.isArray(this.properties[c]) || (this.properties[c] *= 1);
                    for (b = 0; b < this.timeline.length; b++) this.timeline[b].loadValues();
                    return this.manager.add(this), (this.isRunning = !0), (a < 0 || a > this.timeline.length - 1) && (a = 0), (this.current = a), this.timeline[this.current].start(), this;
                },
                stop: function (a) {
                    return (
                        void 0 === a && (a = !1),
                        (this.isRunning = !1),
                        (this._onUpdateCallback = null),
                        (this._onUpdateCallbackContext = null),
                        a && (this.onComplete.dispatch(this.target, this), (this._hasStarted = !1), this.chainedTween && this.chainedTween.start()),
                        this.manager.remove(this),
                        this
                    );
                },
                updateTweenData: function (a, b, c) {
                    if (0 === this.timeline.length) return this;
                    if ((void 0 === c && (c = 0), -1 === c)) for (var d = 0; d < this.timeline.length; d++) this.timeline[d][a] = b;
                    else this.timeline[c][a] = b;
                    return this;
                },
                delay: function (a, b) {
                    return this.updateTweenData("delay", a, b);
                },
                repeat: function (a, b, c) {
                    return void 0 === b && (b = 0), this.updateTweenData("repeatCounter", a, c), this.updateTweenData("repeatDelay", b, c);
                },
                repeatDelay: function (a, b) {
                    return this.updateTweenData("repeatDelay", a, b);
                },
                yoyo: function (a, b, c) {
                    return void 0 === b && (b = 0), this.updateTweenData("yoyo", a, c), this.updateTweenData("yoyoDelay", b, c);
                },
                yoyoDelay: function (a, b) {
                    return this.updateTweenData("yoyoDelay", a, b);
                },
                easing: function (a, b) {
                    return "string" == typeof a && this.manager.easeMap[a] && (a = this.manager.easeMap[a]), this.updateTweenData("easingFunction", a, b);
                },
                interpolation: function (a, b, d) {
                    return void 0 === b && (b = c.Math), this.updateTweenData("interpolationFunction", a, d), this.updateTweenData("interpolationContext", b, d);
                },
                repeatAll: function (a) {
                    return void 0 === a && (a = 0), (this.repeatCounter = a), this;
                },
                chain: function () {
                    for (var a = arguments.length; a--; ) 0 < a ? (arguments[a - 1].chainedTween = arguments[a]) : (this.chainedTween = arguments[a]);
                    return this;
                },
                loop: function (a) {
                    return void 0 === a && (a = !0), (this.repeatCounter = a ? -1 : 0), this;
                },
                onUpdateCallback: function (a, b) {
                    return (this._onUpdateCallback = a), (this._onUpdateCallbackContext = b), this;
                },
                pause: function () {
                    (this.isPaused = !0), (this._codePaused = !0), (this._pausedTime = this.game.time.time);
                },
                _pause: function () {
                    this._codePaused || ((this.isPaused = !0), (this._pausedTime = this.game.time.time));
                },
                resume: function () {
                    if (this.isPaused) {
                        (this.isPaused = !1), (this._codePaused = !1);
                        for (var a = 0; a < this.timeline.length; a++) this.timeline[a].isRunning || (this.timeline[a].startTime += this.game.time.time - this._pausedTime);
                    }
                },
                _resume: function () {
                    this._codePaused || this.resume();
                },
                update: function (a) {
                    if (this.pendingDelete || !this.target) return !1;
                    if (this.isPaused) return !0;
                    var b = this.timeline[this.current].update(a);
                    if (b === c.TweenData.PENDING) return !0;
                    if (b === c.TweenData.RUNNING)
                        return (
                            this._hasStarted || (this.onStart.dispatch(this.target, this), (this._hasStarted = !0)),
                            null !== this._onUpdateCallback && this._onUpdateCallback.call(this._onUpdateCallbackContext, this, this.timeline[this.current].value, this.timeline[this.current]),
                            this.isRunning
                        );
                    if (b === c.TweenData.LOOPED) return -1 === this.timeline[this.current].repeatCounter ? this.onLoop.dispatch(this.target, this) : this.onRepeat.dispatch(this.target, this), !0;
                    if (b === c.TweenData.COMPLETE) {
                        var d = !1;
                        return (
                            this.reverse ? --this.current < 0 && ((this.current = this.timeline.length - 1), (d = !0)) : ++this.current === this.timeline.length && (d = !(this.current = 0)),
                            d
                                ? -1 === this.repeatCounter
                                    ? (this.timeline[this.current].start(), this.onLoop.dispatch(this.target, this), !0)
                                    : 0 < this.repeatCounter
                                    ? (this.repeatCounter--, this.timeline[this.current].start(), this.onRepeat.dispatch(this.target, this), !0)
                                    : ((this.isRunning = !1), this.onComplete.dispatch(this.target, this), (this._hasStarted = !1), this.chainedTween && this.chainedTween.start(), !1)
                                : (this.onChildComplete.dispatch(this.target, this), this.timeline[this.current].start(), !0)
                        );
                    }
                },
                generateData: function (a, b) {
                    if (null === this.game || null === this.target) return null;
                    void 0 === a && (a = 60), void 0 === b && (b = []);
                    for (var c = 0; c < this.timeline.length; c++) for (var d in this.timeline[c].vEnd) (this.properties[d] = this.target[d] || 0), Array.isArray(this.properties[d]) || (this.properties[d] *= 1);
                    for (c = 0; c < this.timeline.length; c++) this.timeline[c].loadValues();
                    for (c = 0; c < this.timeline.length; c++) b = b.concat(this.timeline[c].generateData(a));
                    return b;
                },
            }),
            Object.defineProperty(c.Tween.prototype, "totalDuration", {
                get: function () {
                    for (var a = 0, b = 0; b < this.timeline.length; b++) a += this.timeline[b].duration;
                    return a;
                },
            }),
            (c.Tween.prototype.constructor = c.Tween),
            (c.TweenData = function (a) {
                (this.parent = a),
                    (this.game = a.game),
                    (this.vStart = {}),
                    (this.vStartCache = {}),
                    (this.vEnd = {}),
                    (this.vEndCache = {}),
                    (this.duration = 1e3),
                    (this.percent = 0),
                    (this.value = 0),
                    (this.repeatCounter = 0),
                    (this.repeatDelay = 0),
                    (this.repeatTotal = 0),
                    (this.interpolate = !1),
                    (this.yoyo = !1),
                    (this.yoyoDelay = 0),
                    (this.inReverse = !1),
                    (this.delay = 0),
                    (this.dt = 0),
                    (this.startTime = null),
                    (this.easingFunction = c.Easing.Default),
                    (this.interpolationFunction = c.Math.linearInterpolation),
                    (this.interpolationContext = c.Math),
                    (this.isRunning = !1),
                    (this.isFrom = !1);
            }),
            (c.TweenData.PENDING = 0),
            (c.TweenData.RUNNING = 1),
            (c.TweenData.LOOPED = 2),
            (c.TweenData.COMPLETE = 3),
            (c.TweenData.prototype = {
                to: function (a, b, c, d, e, f) {
                    return (this.vEnd = a), (this.duration = b), (this.easingFunction = c), (this.delay = d), (this.repeatTotal = e), (this.yoyo = f), (this.isFrom = !1), this;
                },
                from: function (a, b, c, d, e, f) {
                    return (this.vEnd = a), (this.duration = b), (this.easingFunction = c), (this.delay = d), (this.repeatTotal = e), (this.yoyo = f), (this.isFrom = !0), this;
                },
                start: function () {
                    if (((this.startTime = this.game.time.time + this.delay), this.parent.reverse ? (this.dt = this.duration) : (this.dt = 0), 0 < this.delay ? (this.isRunning = !1) : (this.isRunning = !0), this.isFrom))
                        for (var a in this.vStartCache) (this.vStart[a] = this.vEndCache[a]), (this.vEnd[a] = this.vStartCache[a]), (this.parent.target[a] = this.vStart[a]);
                    return (this.value = 0), (this.yoyoCounter = 0), (this.repeatCounter = this.repeatTotal), this;
                },
                loadValues: function () {
                    for (var a in this.parent.properties) {
                        if (((this.vStart[a] = this.parent.properties[a]), Array.isArray(this.vEnd[a]))) {
                            if (0 === this.vEnd[a].length) continue;
                            0 === this.percent && (this.vEnd[a] = [this.vStart[a]].concat(this.vEnd[a]));
                        }
                        void 0 !== this.vEnd[a] ? ("string" == typeof this.vEnd[a] && (this.vEnd[a] = this.vStart[a] + parseFloat(this.vEnd[a], 10)), (this.parent.properties[a] = this.vEnd[a])) : (this.vEnd[a] = this.vStart[a]),
                            (this.vStartCache[a] = this.vStart[a]),
                            (this.vEndCache[a] = this.vEnd[a]);
                    }
                    return this;
                },
                update: function (a) {
                    if (this.isRunning) {
                        if (a < this.startTime) return c.TweenData.RUNNING;
                    } else {
                        if (!(a >= this.startTime)) return c.TweenData.PENDING;
                        this.isRunning = !0;
                    }
                    var b = this.parent.frameBased ? this.game.time.physicsElapsedMS : this.game.time.elapsedMS;
                    for (var d in (this.parent.reverse ? ((this.dt -= b * this.parent.timeScale), (this.dt = Math.max(this.dt, 0))) : ((this.dt += b * this.parent.timeScale), (this.dt = Math.min(this.dt, this.duration))),
                    (this.percent = this.dt / this.duration),
                    (this.value = this.easingFunction(this.percent)),
                    this.vEnd)) {
                        var e = this.vStart[d],
                            f = this.vEnd[d];
                        Array.isArray(f) ? (this.parent.target[d] = this.interpolationFunction.call(this.interpolationContext, f, this.value)) : (this.parent.target[d] = e + (f - e) * this.value);
                    }
                    return (!this.parent.reverse && 1 === this.percent) || (this.parent.reverse && 0 === this.percent) ? this.repeat() : c.TweenData.RUNNING;
                },
                generateData: function (a) {
                    this.parent.reverse ? (this.dt = this.duration) : (this.dt = 0);
                    var b = [],
                        c = !1,
                        d = (1 / a) * 1e3;
                    do {
                        this.parent.reverse ? ((this.dt -= d), (this.dt = Math.max(this.dt, 0))) : ((this.dt += d), (this.dt = Math.min(this.dt, this.duration))),
                            (this.percent = this.dt / this.duration),
                            (this.value = this.easingFunction(this.percent));
                        var e = {};
                        for (var f in this.vEnd) {
                            var g = this.vStart[f],
                                h = this.vEnd[f];
                            Array.isArray(h) ? (e[f] = this.interpolationFunction(h, this.value)) : (e[f] = g + (h - g) * this.value);
                        }
                        b.push(e), ((!this.parent.reverse && 1 === this.percent) || (this.parent.reverse && 0 === this.percent)) && (c = !0);
                    } while (!c);
                    if (this.yoyo) {
                        var i = b.slice();
                        i.reverse(), (b = b.concat(i));
                    }
                    return b;
                },
                repeat: function () {
                    if (this.yoyo) {
                        if (this.inReverse && 0 === this.repeatCounter) {
                            for (var a in this.vStartCache) (this.vStart[a] = this.vStartCache[a]), (this.vEnd[a] = this.vEndCache[a]);
                            return (this.inReverse = !1), c.TweenData.COMPLETE;
                        }
                        this.inReverse = !this.inReverse;
                    } else if (0 === this.repeatCounter) return c.TweenData.COMPLETE;
                    if (this.inReverse) for (var a in this.vStartCache) (this.vStart[a] = this.vEndCache[a]), (this.vEnd[a] = this.vStartCache[a]);
                    else {
                        for (var a in this.vStartCache) (this.vStart[a] = this.vStartCache[a]), (this.vEnd[a] = this.vEndCache[a]);
                        0 < this.repeatCounter && this.repeatCounter--;
                    }
                    return (
                        (this.startTime = this.game.time.time),
                        this.yoyo && this.inReverse ? (this.startTime += this.yoyoDelay) : this.inReverse || (this.startTime += this.repeatDelay),
                        this.parent.reverse ? (this.dt = this.duration) : (this.dt = 0),
                        c.TweenData.LOOPED
                    );
                },
            }),
            (c.TweenData.prototype.constructor = c.TweenData),
            (c.Easing = {
                Linear: {
                    None: function (a) {
                        return a;
                    },
                },
                Quadratic: {
                    In: function (a) {
                        return a * a;
                    },
                    Out: function (a) {
                        return a * (2 - a);
                    },
                    InOut: function (a) {
                        return (a *= 2) < 1 ? 0.5 * a * a : -0.5 * (--a * (a - 2) - 1);
                    },
                },
                Cubic: {
                    In: function (a) {
                        return a * a * a;
                    },
                    Out: function (a) {
                        return --a * a * a + 1;
                    },
                    InOut: function (a) {
                        return (a *= 2) < 1 ? 0.5 * a * a * a : 0.5 * ((a -= 2) * a * a + 2);
                    },
                },
                Quartic: {
                    In: function (a) {
                        return a * a * a * a;
                    },
                    Out: function (a) {
                        return 1 - --a * a * a * a;
                    },
                    InOut: function (a) {
                        return (a *= 2) < 1 ? 0.5 * a * a * a * a : -0.5 * ((a -= 2) * a * a * a - 2);
                    },
                },
                Quintic: {
                    In: function (a) {
                        return a * a * a * a * a;
                    },
                    Out: function (a) {
                        return --a * a * a * a * a + 1;
                    },
                    InOut: function (a) {
                        return (a *= 2) < 1 ? 0.5 * a * a * a * a * a : 0.5 * ((a -= 2) * a * a * a * a + 2);
                    },
                },
                Sinusoidal: {
                    In: function (a) {
                        return 0 === a ? 0 : 1 === a ? 1 : 1 - Math.cos((a * Math.PI) / 2);
                    },
                    Out: function (a) {
                        return 0 === a ? 0 : 1 === a ? 1 : Math.sin((a * Math.PI) / 2);
                    },
                    InOut: function (a) {
                        return 0 === a ? 0 : 1 === a ? 1 : 0.5 * (1 - Math.cos(Math.PI * a));
                    },
                },
                Exponential: {
                    In: function (a) {
                        return 0 === a ? 0 : Math.pow(1024, a - 1);
                    },
                    Out: function (a) {
                        return 1 === a ? 1 : 1 - Math.pow(2, -10 * a);
                    },
                    InOut: function (a) {
                        return 0 === a ? 0 : 1 === a ? 1 : (a *= 2) < 1 ? 0.5 * Math.pow(1024, a - 1) : 0.5 * (2 - Math.pow(2, -10 * (a - 1)));
                    },
                },
                Circular: {
                    In: function (a) {
                        return 1 - Math.sqrt(1 - a * a);
                    },
                    Out: function (a) {
                        return Math.sqrt(1 - --a * a);
                    },
                    InOut: function (a) {
                        return (a *= 2) < 1 ? -0.5 * (Math.sqrt(1 - a * a) - 1) : 0.5 * (Math.sqrt(1 - (a -= 2) * a) + 1);
                    },
                },
                Elastic: {
                    In: function (a) {
                        var b,
                            c = 0.1;
                        return 0 === a ? 0 : 1 === a ? 1 : ((b = !c || c < 1 ? ((c = 1), 0.1) : (0.4 * Math.asin(1 / c)) / (2 * Math.PI)), -c * Math.pow(2, 10 * (a -= 1)) * Math.sin(((a - b) * (2 * Math.PI)) / 0.4));
                    },
                    Out: function (a) {
                        var b,
                            c = 0.1;
                        return 0 === a ? 0 : 1 === a ? 1 : ((b = !c || c < 1 ? ((c = 1), 0.1) : (0.4 * Math.asin(1 / c)) / (2 * Math.PI)), c * Math.pow(2, -10 * a) * Math.sin(((a - b) * (2 * Math.PI)) / 0.4) + 1);
                    },
                    InOut: function (a) {
                        var b,
                            c = 0.1;
                        return 0 === a
                            ? 0
                            : 1 === a
                            ? 1
                            : ((b = !c || c < 1 ? ((c = 1), 0.1) : (0.4 * Math.asin(1 / c)) / (2 * Math.PI)),
                              (a *= 2) < 1 ? c * Math.pow(2, 10 * (a -= 1)) * Math.sin(((a - b) * (2 * Math.PI)) / 0.4) * -0.5 : c * Math.pow(2, -10 * (a -= 1)) * Math.sin(((a - b) * (2 * Math.PI)) / 0.4) * 0.5 + 1);
                    },
                },
                Back: {
                    In: function (a) {
                        var b = 1.70158;
                        return a * a * ((b + 1) * a - b);
                    },
                    Out: function (a) {
                        var b = 1.70158;
                        return --a * a * ((b + 1) * a + b) + 1;
                    },
                    InOut: function (a) {
                        var b = 2.5949095;
                        return (a *= 2) < 1 ? a * a * ((b + 1) * a - b) * 0.5 : 0.5 * ((a -= 2) * a * ((b + 1) * a + b) + 2);
                    },
                },
                Bounce: {
                    In: function (a) {
                        return 1 - c.Easing.Bounce.Out(1 - a);
                    },
                    Out: function (a) {
                        return a < 1 / 2.75 ? 7.5625 * a * a : a < 2 / 2.75 ? 7.5625 * (a -= 1.5 / 2.75) * a + 0.75 : a < 2.5 / 2.75 ? 7.5625 * (a -= 2.25 / 2.75) * a + 0.9375 : 7.5625 * (a -= 2.625 / 2.75) * a + 0.984375;
                    },
                    InOut: function (a) {
                        return a < 0.5 ? 0.5 * c.Easing.Bounce.In(2 * a) : 0.5 * c.Easing.Bounce.Out(2 * a - 1) + 0.5;
                    },
                },
            }),
            (c.Easing.Default = c.Easing.Linear.None),
            (c.Easing.Power0 = c.Easing.Linear.None),
            (c.Easing.Power1 = c.Easing.Quadratic.Out),
            (c.Easing.Power2 = c.Easing.Cubic.Out),
            (c.Easing.Power3 = c.Easing.Quartic.Out),
            (c.Easing.Power4 = c.Easing.Quintic.Out),
            (c.Time = function (a) {
                (this.game = a),
                    (this.time = 0),
                    (this.prevTime = 0),
                    (this.now = 0),
                    (this.elapsed = 0),
                    (this.elapsedMS = 0),
                    (this.physicsElapsed = 1 / 60),
                    (this.physicsElapsedMS = (1 / 60) * 1e3),
                    (this.desiredFpsMult = 1 / 60),
                    (this._desiredFps = 60),
                    (this.suggestedFps = this.desiredFps),
                    (this.slowMotion = 1),
                    (this.advancedTiming = !1),
                    (this.frames = 0),
                    (this.fps = 0),
                    (this.fpsMin = 1e3),
                    (this.fpsMax = 0),
                    (this.msMin = 1e3),
                    (this.msMax = 0),
                    (this.pauseDuration = 0),
                    (this.timeToCall = 0),
                    (this.timeExpected = 0),
                    (this.events = new c.Timer(this.game, !1)),
                    (this._frameCount = 0),
                    (this._elapsedAccumulator = 0),
                    (this._started = 0),
                    (this._timeLastSecond = 0),
                    (this._pauseStarted = 0),
                    (this._justResumed = !1),
                    (this._timers = []);
            }),
            (c.Time.prototype = {
                boot: function () {
                    (this._started = Date.now()), (this.time = Date.now()), this.events.start(), (this.timeExpected = this.time);
                },
                add: function (a) {
                    return this._timers.push(a), a;
                },
                create: function (a) {
                    void 0 === a && (a = !0);
                    var b = new c.Timer(this.game, a);
                    return this._timers.push(b), b;
                },
                removeAll: function () {
                    for (var a = 0; a < this._timers.length; a++) this._timers[a].destroy();
                    (this._timers = []), this.events.removeAll();
                },
                refresh: function () {
                    var a = this.time;
                    (this.time = Date.now()), (this.elapsedMS = this.time - a);
                },
                update: function (a) {
                    var b = this.time;
                    (this.time = Date.now()),
                        (this.elapsedMS = this.time - b),
                        (this.prevTime = this.now),
                        (this.now = a),
                        (this.elapsed = this.now - this.prevTime),
                        this.game.raf._isSetTimeOut && ((this.timeToCall = Math.floor(Math.max(0, 1e3 / this._desiredFps - (this.timeExpected - a)))), (this.timeExpected = a + this.timeToCall)),
                        this.advancedTiming && this.updateAdvancedTiming(),
                        this.game.paused || (this.events.update(this.time), this._timers.length && this.updateTimers());
                },
                updateTimers: function () {
                    for (var a = 0, b = this._timers.length; a < b; ) this._timers[a].update(this.time) ? a++ : (this._timers.splice(a, 1), b--);
                },
                updateAdvancedTiming: function () {
                    this._frameCount++,
                        (this._elapsedAccumulator += this.elapsed),
                        this._frameCount >= 2 * this._desiredFps && ((this.suggestedFps = 5 * Math.floor(200 / (this._elapsedAccumulator / this._frameCount))), (this._frameCount = 0), (this._elapsedAccumulator = 0)),
                        (this.msMin = Math.min(this.msMin, this.elapsed)),
                        (this.msMax = Math.max(this.msMax, this.elapsed)),
                        this.frames++,
                        this.now > this._timeLastSecond + 1e3 &&
                            ((this.fps = Math.round((1e3 * this.frames) / (this.now - this._timeLastSecond))),
                            (this.fpsMin = Math.min(this.fpsMin, this.fps)),
                            (this.fpsMax = Math.max(this.fpsMax, this.fps)),
                            (this._timeLastSecond = this.now),
                            (this.frames = 0));
                },
                gamePaused: function () {
                    (this._pauseStarted = Date.now()), this.events.pause();
                    for (var a = this._timers.length; a--; ) this._timers[a]._pause();
                },
                gameResumed: function () {
                    (this.time = Date.now()), (this.pauseDuration = this.time - this._pauseStarted), this.events.resume();
                    for (var a = this._timers.length; a--; ) this._timers[a]._resume();
                },
                totalElapsedSeconds: function () {
                    return 0.001 * (this.time - this._started);
                },
                elapsedSince: function (a) {
                    return this.time - a;
                },
                elapsedSecondsSince: function (a) {
                    return 0.001 * (this.time - a);
                },
                reset: function () {
                    (this._started = this.time), this.removeAll();
                },
            }),
            Object.defineProperty(c.Time.prototype, "desiredFps", {
                get: function () {
                    return this._desiredFps;
                },
                set: function (a) {
                    (this._desiredFps = a), (this.physicsElapsed = 1 / a), (this.physicsElapsedMS = 1e3 * this.physicsElapsed), (this.desiredFpsMult = 1 / a);
                },
            }),
            (c.Time.prototype.constructor = c.Time),
            (c.Timer = function (a, b) {
                void 0 === b && (b = !0),
                    (this.game = a),
                    (this.running = !1),
                    (this.autoDestroy = b),
                    (this.expired = !1),
                    (this.elapsed = 0),
                    (this.events = []),
                    (this.onComplete = new c.Signal()),
                    (this.nextTick = 0),
                    (this.timeCap = 1e3),
                    (this.paused = !1),
                    (this._codePaused = !1),
                    (this._started = 0),
                    (this._pauseStarted = 0),
                    (this._pauseTotal = 0),
                    (this._now = Date.now()),
                    (this._len = 0),
                    (this._marked = 0),
                    (this._i = 0),
                    (this._diff = 0),
                    (this._newTick = 0);
            }),
            (c.Timer.MINUTE = 6e4),
            (c.Timer.SECOND = 1e3),
            (c.Timer.HALF = 500),
            (c.Timer.QUARTER = 250),
            (c.Timer.prototype = {
                create: function (a, b, d, e, f, g) {
                    var h = (a = Math.round(a));
                    0 === this._now ? (h += this.game.time.time) : (h += this._now);
                    var i = new c.TimerEvent(this, a, h, d, b, e, f, g);
                    return this.events.push(i), this.order(), (this.expired = !1), i;
                },
                add: function (a, b, c) {
                    return this.create(a, !1, 0, b, c, Array.prototype.slice.call(arguments, 3));
                },
                repeat: function (a, b, c, d) {
                    return this.create(a, !1, b, c, d, Array.prototype.slice.call(arguments, 4));
                },
                loop: function (a, b, c) {
                    return this.create(a, !0, 0, b, c, Array.prototype.slice.call(arguments, 3));
                },
                start: function (a) {
                    if (!this.running) {
                        (this._started = this.game.time.time + (a || 0)), (this.running = !0);
                        for (var b = 0; b < this.events.length; b++) this.events[b].tick = this.events[b].delay + this._started;
                    }
                },
                stop: function (a) {
                    (this.running = !1), void 0 === a && (a = !0), a && (this.events.length = 0);
                },
                remove: function (a) {
                    for (var b = 0; b < this.events.length; b++) if (this.events[b] === a) return (this.events[b].pendingDelete = !0);
                    return !1;
                },
                order: function () {
                    0 < this.events.length && (this.events.sort(this.sortHandler), (this.nextTick = this.events[0].tick));
                },
                sortHandler: function (a, b) {
                    return a.tick < b.tick ? -1 : a.tick > b.tick ? 1 : 0;
                },
                clearPendingEvents: function () {
                    for (this._i = this.events.length; this._i--; ) this.events[this._i].pendingDelete && this.events.splice(this._i, 1);
                    (this._len = this.events.length), (this._i = 0);
                },
                update: function (a) {
                    if (this.paused) return !0;
                    if (
                        ((this.elapsed = a - this._now),
                        (this._now = a),
                        this.elapsed > this.timeCap && this.adjustEvents(a - this.elapsed),
                        (this._marked = 0),
                        this.clearPendingEvents(),
                        this.running && this._now >= this.nextTick && 0 < this._len)
                    ) {
                        for (; this._i < this._len && this.running && this._now >= this.events[this._i].tick && !this.events[this._i].pendingDelete; )
                            (this._newTick = this._now + this.events[this._i].delay - (this._now - this.events[this._i].tick)),
                                this._newTick < 0 && (this._newTick = this._now + this.events[this._i].delay),
                                !0 === this.events[this._i].loop
                                    ? (this.events[this._i].tick = this._newTick)
                                    : 0 < this.events[this._i].repeatCount
                                    ? (this.events[this._i].repeatCount--, (this.events[this._i].tick = this._newTick))
                                    : (this._marked++, (this.events[this._i].pendingDelete = !0)),
                                this.events[this._i].callback.apply(this.events[this._i].callbackContext, this.events[this._i].args),
                                this._i++;
                        this.events.length > this._marked ? this.order() : ((this.expired = !0), this.onComplete.dispatch(this));
                    }
                    return !this.expired || !this.autoDestroy;
                },
                pause: function () {
                    this.running && ((this._codePaused = !0), this.paused || ((this._pauseStarted = this.game.time.time), (this.paused = !0)));
                },
                _pause: function () {
                    !this.paused && this.running && ((this._pauseStarted = this.game.time.time), (this.paused = !0));
                },
                adjustEvents: function (a) {
                    for (var b = 0; b < this.events.length; b++)
                        if (!this.events[b].pendingDelete) {
                            var c = this.events[b].tick - a;
                            c < 0 && (c = 0), (this.events[b].tick = this._now + c);
                        }
                    var d = this.nextTick - a;
                    this.nextTick = d < 0 ? this._now : this._now + d;
                },
                resume: function () {
                    if (this.paused) {
                        var a = this.game.time.time;
                        (this._pauseTotal += a - this._now), (this._now = a), this.adjustEvents(this._pauseStarted), (this.paused = !1), (this._codePaused = !1);
                    }
                },
                _resume: function () {
                    this._codePaused || this.resume();
                },
                removeAll: function () {
                    this.onComplete.removeAll(), (this.events.length = 0), (this._len = 0), (this._i = 0);
                },
                destroy: function () {
                    this.onComplete.removeAll(), (this.running = !1), (this.events = []), (this._len = 0), (this._i = 0);
                },
            }),
            Object.defineProperty(c.Timer.prototype, "next", {
                get: function () {
                    return this.nextTick;
                },
            }),
            Object.defineProperty(c.Timer.prototype, "duration", {
                get: function () {
                    return this.running && this.nextTick > this._now ? this.nextTick - this._now : 0;
                },
            }),
            Object.defineProperty(c.Timer.prototype, "length", {
                get: function () {
                    return this.events.length;
                },
            }),
            Object.defineProperty(c.Timer.prototype, "ms", {
                get: function () {
                    return this.running ? this._now - this._started - this._pauseTotal : 0;
                },
            }),
            Object.defineProperty(c.Timer.prototype, "seconds", {
                get: function () {
                    return this.running ? 0.001 * this.ms : 0;
                },
            }),
            (c.Timer.prototype.constructor = c.Timer),
            (c.TimerEvent = function (a, b, c, d, e, f, g, h) {
                (this.timer = a), (this.delay = b), (this.tick = c), (this.repeatCount = d - 1), (this.loop = e), (this.callback = f), (this.callbackContext = g), (this.args = h), (this.pendingDelete = !1);
            }),
            (c.TimerEvent.prototype.constructor = c.TimerEvent),
            (c.AnimationManager = function (a) {
                (this.sprite = a), (this.game = a.game), (this.currentFrame = null), (this.currentAnim = null), (this.updateIfVisible = !0), (this.isLoaded = !1), (this._frameData = null), (this._anims = {}), (this._outputFrames = []);
            }),
            (c.AnimationManager.prototype = {
                loadFrameData: function (a, b) {
                    if (void 0 === a) return !1;
                    if (this.isLoaded) for (var c in this._anims) this._anims[c].updateFrameData(a);
                    return (this._frameData = a), null == b ? (this.frame = 0) : "string" == typeof b ? (this.frameName = b) : (this.frame = b), (this.isLoaded = !0);
                },
                copyFrameData: function (a, b) {
                    if (((this._frameData = a.clone()), this.isLoaded)) for (var c in this._anims) this._anims[c].updateFrameData(this._frameData);
                    return null == b ? (this.frame = 0) : "string" == typeof b ? (this.frameName = b) : (this.frame = b), (this.isLoaded = !0);
                },
                add: function (a, b, d, e, f) {
                    return (
                        (b = b || []),
                        (d = d || 60),
                        void 0 === e && (e = !1),
                        void 0 === f && (f = !(!b || "number" != typeof b[0])),
                        (this._outputFrames = []),
                        this._frameData.getFrameIndexes(b, f, this._outputFrames),
                        (this._anims[a] = new c.Animation(this.game, this.sprite, a, this._frameData, this._outputFrames, d, e)),
                        (this.currentAnim = this._anims[a]),
                        this.sprite.tilingTexture && (this.sprite.refreshTexture = !0),
                        this._anims[a]
                    );
                },
                validateFrames: function (a, b) {
                    void 0 === b && (b = !0);
                    for (var c = 0; c < a.length; c++)
                        if (!0 === b) {
                            if (a[c] > this._frameData.total) return !1;
                        } else if (!1 === this._frameData.checkFrameName(a[c])) return !1;
                    return !0;
                },
                play: function (a, b, c, d) {
                    if (this._anims[a])
                        return this.currentAnim === this._anims[a]
                            ? !1 === this.currentAnim.isPlaying
                                ? ((this.currentAnim.paused = !1), this.currentAnim.play(b, c, d))
                                : this.currentAnim
                            : (this.currentAnim && this.currentAnim.isPlaying && this.currentAnim.stop(),
                              (this.currentAnim = this._anims[a]),
                              (this.currentAnim.paused = !1),
                              (this.currentFrame = this.currentAnim.currentFrame),
                              this.currentAnim.play(b, c, d));
                },
                stop: function (a, b) {
                    void 0 === b && (b = !1), !this.currentAnim || ("string" == typeof a && a !== this.currentAnim.name) || this.currentAnim.stop(b);
                },
                update: function () {
                    return !((this.updateIfVisible && !this.sprite.visible) || !this.currentAnim || !this.currentAnim.update() || ((this.currentFrame = this.currentAnim.currentFrame), 0));
                },
                next: function (a) {
                    this.currentAnim && (this.currentAnim.next(a), (this.currentFrame = this.currentAnim.currentFrame));
                },
                previous: function (a) {
                    this.currentAnim && (this.currentAnim.previous(a), (this.currentFrame = this.currentAnim.currentFrame));
                },
                getAnimation: function (a) {
                    return "string" == typeof a && this._anims[a] ? this._anims[a] : null;
                },
                refreshFrame: function () {},
                destroy: function () {
                    var a = null;
                    for (var a in this._anims) this._anims.hasOwnProperty(a) && this._anims[a].destroy();
                    (this._anims = {}), (this._outputFrames = []), (this._frameData = null), (this.currentAnim = null), (this.currentFrame = null), (this.sprite = null), (this.game = null);
                },
            }),
            (c.AnimationManager.prototype.constructor = c.AnimationManager),
            Object.defineProperty(c.AnimationManager.prototype, "frameData", {
                get: function () {
                    return this._frameData;
                },
            }),
            Object.defineProperty(c.AnimationManager.prototype, "frameTotal", {
                get: function () {
                    return this._frameData.total;
                },
            }),
            Object.defineProperty(c.AnimationManager.prototype, "paused", {
                get: function () {
                    return this.currentAnim.isPaused;
                },
                set: function (a) {
                    this.currentAnim.paused = a;
                },
            }),
            Object.defineProperty(c.AnimationManager.prototype, "name", {
                get: function () {
                    if (this.currentAnim) return this.currentAnim.name;
                },
            }),
            Object.defineProperty(c.AnimationManager.prototype, "frame", {
                get: function () {
                    if (this.currentFrame) return this.currentFrame.index;
                },
                set: function (a) {
                    "number" == typeof a && this._frameData && null !== this._frameData.getFrame(a) && ((this.currentFrame = this._frameData.getFrame(a)), this.currentFrame && this.sprite.setFrame(this.currentFrame));
                },
            }),
            Object.defineProperty(c.AnimationManager.prototype, "frameName", {
                get: function () {
                    if (this.currentFrame) return this.currentFrame.name;
                },
                set: function (a) {
                    "string" == typeof a &&
                        this._frameData &&
                        null !== this._frameData.getFrameByName(a) &&
                        ((this.currentFrame = this._frameData.getFrameByName(a)), this.currentFrame && ((this._frameIndex = this.currentFrame.index), this.sprite.setFrame(this.currentFrame)));
                },
            }),
            (c.Animation = function (a, b, d, e, f, g, h) {
                void 0 === h && (h = !1),
                    (this.game = a),
                    (this._parent = b),
                    (this._frameData = e),
                    (this.name = d),
                    (this._frames = []),
                    (this._frames = this._frames.concat(f)),
                    (this.delay = 1e3 / g),
                    (this.loop = h),
                    (this.loopCount = 0),
                    (this.killOnComplete = !1),
                    (this.isFinished = !1),
                    (this.isPlaying = !1),
                    (this.isPaused = !1),
                    (this._pauseStartTime = 0),
                    (this._frameIndex = 0),
                    (this._frameDiff = 0),
                    (this._frameSkip = 1),
                    (this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex])),
                    (this.onStart = new c.Signal()),
                    (this.onUpdate = null),
                    (this.onComplete = new c.Signal()),
                    (this.onLoop = new c.Signal()),
                    (this.isReversed = !1),
                    this.game.onPause.add(this.onPause, this),
                    this.game.onResume.add(this.onResume, this);
            }),
            (c.Animation.prototype = {
                play: function (a, b, c) {
                    return (
                        "number" == typeof a && (this.delay = 1e3 / a),
                        "boolean" == typeof b && (this.loop = b),
                        void 0 !== c && (this.killOnComplete = c),
                        (this.isPlaying = !0),
                        (this.isFinished = !1),
                        (this.paused = !1),
                        (this.loopCount = 0),
                        (this._timeLastFrame = this.game.time.time),
                        (this._timeNextFrame = this.game.time.time + this.delay),
                        (this._frameIndex = this.isReversed ? this._frames.length - 1 : 0),
                        this.updateCurrentFrame(!1, !0),
                        this._parent.events.onAnimationStart$dispatch(this._parent, this),
                        this.onStart.dispatch(this._parent, this),
                        ((this._parent.animations.currentAnim = this)._parent.animations.currentFrame = this.currentFrame),
                        this
                    );
                },
                restart: function () {
                    (this.isPlaying = !0),
                        (this.isFinished = !1),
                        (this.paused = !1),
                        (this.loopCount = 0),
                        (this._timeLastFrame = this.game.time.time),
                        (this._timeNextFrame = this.game.time.time + this.delay),
                        (this._frameIndex = 0),
                        (this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex])),
                        this._parent.setFrame(this.currentFrame),
                        ((this._parent.animations.currentAnim = this)._parent.animations.currentFrame = this.currentFrame),
                        this.onStart.dispatch(this._parent, this);
                },
                reverse: function () {
                    return (this.reversed = !this.reversed), this;
                },
                reverseOnce: function () {
                    return this.onComplete.addOnce(this.reverse, this), this.reverse();
                },
                setFrame: function (a, b) {
                    var c;
                    if ((void 0 === b && (b = !1), "string" == typeof a)) for (var d = 0; d < this._frames.length; d++) this._frameData.getFrame(this._frames[d]).name === a && (c = d);
                    else if ("number" == typeof a)
                        if (b) c = a;
                        else for (d = 0; d < this._frames.length; d++) this._frames[d] === a && (c = d);
                    c && ((this._frameIndex = c - 1), (this._timeNextFrame = this.game.time.time), this.update());
                },
                stop: function (a, b) {
                    void 0 === a && (a = !1),
                        void 0 === b && (b = !1),
                        (this.isPlaying = !1),
                        (this.isFinished = !0),
                        (this.paused = !1),
                        a && ((this.currentFrame = this._frameData.getFrame(this._frames[0])), this._parent.setFrame(this.currentFrame)),
                        b && (this._parent.events.onAnimationComplete$dispatch(this._parent, this), this.onComplete.dispatch(this._parent, this));
                },
                onPause: function () {
                    this.isPlaying && (this._frameDiff = this._timeNextFrame - this.game.time.time);
                },
                onResume: function () {
                    this.isPlaying && (this._timeNextFrame = this.game.time.time + this._frameDiff);
                },
                update: function () {
                    return (
                        !this.isPaused &&
                        !!(this.isPlaying && this.game.time.time >= this._timeNextFrame) &&
                        ((this._frameSkip = 1),
                        (this._frameDiff = this.game.time.time - this._timeNextFrame),
                        (this._timeLastFrame = this.game.time.time),
                        this._frameDiff > this.delay && ((this._frameSkip = Math.floor(this._frameDiff / this.delay)), (this._frameDiff -= this._frameSkip * this.delay)),
                        (this._timeNextFrame = this.game.time.time + (this.delay - this._frameDiff)),
                        this.isReversed ? (this._frameIndex -= this._frameSkip) : (this._frameIndex += this._frameSkip),
                        (!this.isReversed && this._frameIndex >= this._frames.length) || (this.isReversed && this._frameIndex <= -1)
                            ? this.loop
                                ? ((this._frameIndex = Math.abs(this._frameIndex) % this._frames.length),
                                  this.isReversed && (this._frameIndex = this._frames.length - 1 - this._frameIndex),
                                  (this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex])),
                                  this.currentFrame && this._parent.setFrame(this.currentFrame),
                                  this.loopCount++,
                                  this._parent.events.onAnimationLoop$dispatch(this._parent, this),
                                  this.onLoop.dispatch(this._parent, this),
                                  !this.onUpdate || (this.onUpdate.dispatch(this, this.currentFrame), !!this._frameData))
                                : (this.complete(), !1)
                            : this.updateCurrentFrame(!0))
                    );
                },
                updateCurrentFrame: function (a, b) {
                    if ((void 0 === b && (b = !1), !this._frameData)) return !1;
                    var c = this.currentFrame.index;
                    return (
                        (this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex])),
                        this.currentFrame && (b || (!b && c !== this.currentFrame.index)) && this._parent.setFrame(this.currentFrame),
                        !this.onUpdate || !a || (this.onUpdate.dispatch(this, this.currentFrame), !!this._frameData)
                    );
                },
                next: function (a) {
                    void 0 === a && (a = 1);
                    var b = this._frameIndex + a;
                    b >= this._frames.length && (this.loop ? (b %= this._frames.length) : (b = this._frames.length - 1)), b !== this._frameIndex && ((this._frameIndex = b), this.updateCurrentFrame(!0));
                },
                previous: function (a) {
                    void 0 === a && (a = 1);
                    var b = this._frameIndex - a;
                    b < 0 && (this.loop ? (b = this._frames.length + b) : b++), b !== this._frameIndex && ((this._frameIndex = b), this.updateCurrentFrame(!0));
                },
                updateFrameData: function (a) {
                    (this._frameData = a), (this.currentFrame = this._frameData ? this._frameData.getFrame(this._frames[this._frameIndex % this._frames.length]) : null);
                },
                destroy: function () {
                    this._frameData &&
                        (this.game.onPause.remove(this.onPause, this),
                        this.game.onResume.remove(this.onResume, this),
                        (this.game = null),
                        (this._parent = null),
                        (this._frames = null),
                        (this._frameData = null),
                        (this.currentFrame = null),
                        (this.isPlaying = !1),
                        this.onStart.dispose(),
                        this.onLoop.dispose(),
                        this.onComplete.dispose(),
                        this.onUpdate && this.onUpdate.dispose());
                },
                complete: function () {
                    (this._frameIndex = this._frames.length - 1),
                        (this.currentFrame = this._frameData.getFrame(this._frames[this._frameIndex])),
                        (this.isPlaying = !1),
                        (this.isFinished = !0),
                        (this.paused = !1),
                        this._parent.events.onAnimationComplete$dispatch(this._parent, this),
                        this.onComplete.dispatch(this._parent, this),
                        this.killOnComplete && this._parent.kill();
                },
            }),
            (c.Animation.prototype.constructor = c.Animation),
            Object.defineProperty(c.Animation.prototype, "paused", {
                get: function () {
                    return this.isPaused;
                },
                set: function (a) {
                    (this.isPaused = a) ? (this._pauseStartTime = this.game.time.time) : this.isPlaying && (this._timeNextFrame = this.game.time.time + this.delay);
                },
            }),
            Object.defineProperty(c.Animation.prototype, "reversed", {
                get: function () {
                    return this.isReversed;
                },
                set: function (a) {
                    this.isReversed = a;
                },
            }),
            Object.defineProperty(c.Animation.prototype, "frameTotal", {
                get: function () {
                    return this._frames.length;
                },
            }),
            Object.defineProperty(c.Animation.prototype, "frame", {
                get: function () {
                    return null !== this.currentFrame ? this.currentFrame.index : this._frameIndex;
                },
                set: function (a) {
                    (this.currentFrame = this._frameData.getFrame(this._frames[a])),
                        null !== this.currentFrame && ((this._frameIndex = a), this._parent.setFrame(this.currentFrame), this.onUpdate && this.onUpdate.dispatch(this, this.currentFrame));
                },
            }),
            Object.defineProperty(c.Animation.prototype, "speed", {
                get: function () {
                    return 1e3 / this.delay;
                },
                set: function (a) {
                    0 < a && (this.delay = 1e3 / a);
                },
            }),
            Object.defineProperty(c.Animation.prototype, "enableUpdate", {
                get: function () {
                    return null !== this.onUpdate;
                },
                set: function (a) {
                    a && null === this.onUpdate ? (this.onUpdate = new c.Signal()) : a || null === this.onUpdate || (this.onUpdate.dispose(), (this.onUpdate = null));
                },
            }),
            (c.Animation.generateFrameNames = function (a, b, d, e, f) {
                void 0 === e && (e = "");
                var g = [],
                    h = "";
                if (b < d) for (var i = b; i <= d; i++) (h = a + (h = "number" == typeof f ? c.Utils.pad(i.toString(), f, "0", 1) : i.toString()) + e), g.push(h);
                else for (i = b; d <= i; i--) (h = a + (h = "number" == typeof f ? c.Utils.pad(i.toString(), f, "0", 1) : i.toString()) + e), g.push(h);
                return g;
            }),
            (c.Frame = function (a, b, d, e, f, g) {
                (this.index = a),
                    (this.x = b),
                    (this.y = d),
                    (this.width = e),
                    (this.height = f),
                    (this.name = g),
                    (this.centerX = Math.floor(e / 2)),
                    (this.centerY = Math.floor(f / 2)),
                    (this.distance = c.Math.distance(0, 0, e, f)),
                    (this.rotated = !1),
                    (this.rotationDirection = "cw"),
                    (this.trimmed = !1),
                    (this.sourceSizeW = e),
                    (this.sourceSizeH = f),
                    (this.spriteSourceSizeX = 0),
                    (this.spriteSourceSizeY = 0),
                    (this.spriteSourceSizeW = 0),
                    (this.spriteSourceSizeH = 0),
                    (this.right = this.x + this.width),
                    (this.bottom = this.y + this.height);
            }),
            (c.Frame.prototype = {
                resize: function (a, b) {
                    (this.width = a),
                        (this.height = b),
                        (this.centerX = Math.floor(a / 2)),
                        (this.centerY = Math.floor(b / 2)),
                        (this.distance = c.Math.distance(0, 0, a, b)),
                        (this.sourceSizeW = a),
                        (this.sourceSizeH = b),
                        (this.right = this.x + a),
                        (this.bottom = this.y + b);
                },
                setTrim: function (a, b, c, d, e, f, g) {
                    (this.trimmed = a) &&
                        ((this.sourceSizeW = b),
                        (this.sourceSizeH = c),
                        (this.centerX = Math.floor(b / 2)),
                        (this.centerY = Math.floor(c / 2)),
                        (this.spriteSourceSizeX = d),
                        (this.spriteSourceSizeY = e),
                        (this.spriteSourceSizeW = f),
                        (this.spriteSourceSizeH = g));
                },
                clone: function () {
                    var a = new c.Frame(this.index, this.x, this.y, this.width, this.height, this.name);
                    for (var b in this) this.hasOwnProperty(b) && (a[b] = this[b]);
                    return a;
                },
                getRect: function (a) {
                    return void 0 === a ? (a = new c.Rectangle(this.x, this.y, this.width, this.height)) : a.setTo(this.x, this.y, this.width, this.height), a;
                },
            }),
            (c.Frame.prototype.constructor = c.Frame),
            (c.FrameData = function () {
                (this._frames = []), (this._frameNames = []);
            }),
            (c.FrameData.prototype = {
                addFrame: function (a) {
                    return (a.index = this._frames.length), this._frames.push(a), "" !== a.name && (this._frameNames[a.name] = a.index), a;
                },
                getFrame: function (a) {
                    return a >= this._frames.length && (a = 0), this._frames[a];
                },
                getFrameByName: function (a) {
                    return "number" == typeof this._frameNames[a] ? this._frames[this._frameNames[a]] : null;
                },
                checkFrameName: function (a) {
                    return null != this._frameNames[a];
                },
                clone: function () {
                    for (var a = new c.FrameData(), b = 0; b < this._frames.length; b++) a._frames.push(this._frames[b].clone());
                    for (var d in this._frameNames) this._frameNames.hasOwnProperty(d) && a._frameNames.push(this._frameNames[d]);
                    return a;
                },
                getFrameRange: function (a, b, c) {
                    void 0 === c && (c = []);
                    for (var d = a; d <= b; d++) c.push(this._frames[d]);
                    return c;
                },
                getFrames: function (a, b, c) {
                    if ((void 0 === b && (b = !0), void 0 === c && (c = []), void 0 === a || 0 === a.length)) for (var d = 0; d < this._frames.length; d++) c.push(this._frames[d]);
                    else for (d = 0; d < a.length; d++) b ? c.push(this.getFrame(a[d])) : c.push(this.getFrameByName(a[d]));
                    return c;
                },
                getFrameIndexes: function (a, b, c) {
                    if ((void 0 === b && (b = !0), void 0 === c && (c = []), void 0 === a || 0 === a.length)) for (var d = 0; d < this._frames.length; d++) c.push(this._frames[d].index);
                    else for (d = 0; d < a.length; d++) b && this._frames[a[d]] ? c.push(this._frames[a[d]].index) : this.getFrameByName(a[d]) && c.push(this.getFrameByName(a[d]).index);
                    return c;
                },
                destroy: function () {
                    (this._frames = null), (this._frameNames = null);
                },
            }),
            (c.FrameData.prototype.constructor = c.FrameData),
            Object.defineProperty(c.FrameData.prototype, "total", {
                get: function () {
                    return this._frames.length;
                },
            }),
            (c.AnimationParser = {
                spriteSheet: function (a, b, d, e, f, g, h) {
                    var i = b;
                    if (("string" == typeof b && (i = a.cache.getImage(b)), null === i)) return null;
                    var j = i.width,
                        k = i.height;
                    d <= 0 && (d = Math.floor(-j / Math.min(-1, d))), e <= 0 && (e = Math.floor(-k / Math.min(-1, e)));
                    var n = Math.floor((j - g) / (d + h)) * Math.floor((k - g) / (e + h));
                    if ((-1 !== f && (n = f), 0 === j || 0 === k || j < d || k < e || 0 === n)) return null;
                    for (var o = new c.FrameData(), p = g, q = g, r = 0; r < n; r++) o.addFrame(new c.Frame(r, p, q, d, e, "")), (p += d + h) + d > j && ((p = g), (q += e + h));
                    return o;
                },
                JSONData: function (a, b) {
                    if (b.frames) {
                        for (var d, e = new c.FrameData(), f = b.frames, g = 0; g < f.length; g++)
                            (d = e.addFrame(new c.Frame(g, f[g].frame.x, f[g].frame.y, f[g].frame.w, f[g].frame.h, f[g].filename))),
                                f[g].trimmed && d.setTrim(f[g].trimmed, f[g].sourceSize.w, f[g].sourceSize.h, f[g].spriteSourceSize.x, f[g].spriteSourceSize.y, f[g].spriteSourceSize.w, f[g].spriteSourceSize.h);
                        return e;
                    }
                },
                JSONDataPyxel: function (a, b) {
                    if (
                        (["layers", "tilewidth", "tileheight", "tileswide", "tileshigh"].forEach(function (a) {
                            b[a];
                        }),
                        1 === b.layers.length)
                    ) {
                        for (var e = new c.FrameData(), f = b.tileheight, g = b.tilewidth, h = b.layers[0].tiles, i = 0; i < h.length; i++) e.addFrame(new c.Frame(i, h[i].x, h[i].y, g, f, "frame_" + i)).setTrim(!1);
                        return e;
                    }
                },
                JSONDataHash: function (a, b) {
                    if (b.frames) {
                        var d,
                            e = new c.FrameData(),
                            f = b.frames,
                            g = 0;
                        for (var h in f)
                            (d = e.addFrame(new c.Frame(g, f[h].frame.x, f[h].frame.y, f[h].frame.w, f[h].frame.h, h))),
                                f[h].trimmed && d.setTrim(f[h].trimmed, f[h].sourceSize.w, f[h].sourceSize.h, f[h].spriteSourceSize.x, f[h].spriteSourceSize.y, f[h].spriteSourceSize.w, f[h].spriteSourceSize.h),
                                g++;
                        return e;
                    }
                },
                XMLData: function (a, b) {
                    if (b.getElementsByTagName("TextureAtlas")) {
                        for (var d, e, f, g, h, i, j, k, l, m, n, o = new c.FrameData(), p = b.getElementsByTagName("SubTexture"), q = 0; q < p.length; q++)
                            (e = (f = p[q].attributes).name.value),
                                (g = parseInt(f.x.value, 10)),
                                (h = parseInt(f.y.value, 10)),
                                (i = parseInt(f.width.value, 10)),
                                (j = parseInt(f.height.value, 10)),
                                (l = k = null),
                                f.frameX && ((k = Math.abs(parseInt(f.frameX.value, 10))), (l = Math.abs(parseInt(f.frameY.value, 10))), (m = parseInt(f.frameWidth.value, 10)), (n = parseInt(f.frameHeight.value, 10))),
                                (d = o.addFrame(new c.Frame(q, g, h, i, j, e))),
                                (null === k && null === l) || d.setTrim(!0, i, j, k, l, m, n);
                        return o;
                    }
                },
            }),
            (c.Cache = function (a) {
                (this.game = a),
                    (this.autoResolveURL = !1),
                    (this._cache = { canvas: {}, image: {}, texture: {}, sound: {}, video: {}, text: {}, json: {}, xml: {}, physics: {}, tilemap: {}, binary: {}, bitmapData: {}, bitmapFont: {}, shader: {}, renderTexture: {} }),
                    (this._urlMap = {}),
                    (this._urlResolver = new Image()),
                    (this._urlTemp = null),
                    (this.onSoundUnlock = new c.Signal()),
                    (this._cacheMap = []),
                    (this._cacheMap[c.Cache.CANVAS] = this._cache.canvas),
                    (this._cacheMap[c.Cache.IMAGE] = this._cache.image),
                    (this._cacheMap[c.Cache.TEXTURE] = this._cache.texture),
                    (this._cacheMap[c.Cache.SOUND] = this._cache.sound),
                    (this._cacheMap[c.Cache.TEXT] = this._cache.text),
                    (this._cacheMap[c.Cache.PHYSICS] = this._cache.physics),
                    (this._cacheMap[c.Cache.TILEMAP] = this._cache.tilemap),
                    (this._cacheMap[c.Cache.BINARY] = this._cache.binary),
                    (this._cacheMap[c.Cache.BITMAPDATA] = this._cache.bitmapData),
                    (this._cacheMap[c.Cache.BITMAPFONT] = this._cache.bitmapFont),
                    (this._cacheMap[c.Cache.JSON] = this._cache.json),
                    (this._cacheMap[c.Cache.XML] = this._cache.xml),
                    (this._cacheMap[c.Cache.VIDEO] = this._cache.video),
                    (this._cacheMap[c.Cache.SHADER] = this._cache.shader),
                    (this._cacheMap[c.Cache.RENDER_TEXTURE] = this._cache.renderTexture),
                    this.addDefaultImage(),
                    this.addMissingImage();
            }),
            (c.Cache.CANVAS = 1),
            (c.Cache.IMAGE = 2),
            (c.Cache.TEXTURE = 3),
            (c.Cache.SOUND = 4),
            (c.Cache.TEXT = 5),
            (c.Cache.PHYSICS = 6),
            (c.Cache.TILEMAP = 7),
            (c.Cache.BINARY = 8),
            (c.Cache.BITMAPDATA = 9),
            (c.Cache.BITMAPFONT = 10),
            (c.Cache.JSON = 11),
            (c.Cache.XML = 12),
            (c.Cache.VIDEO = 13),
            (c.Cache.SHADER = 14),
            (c.Cache.RENDER_TEXTURE = 15),
            (c.Cache.DEFAULT = null),
            (c.Cache.MISSING = null),
            (c.Cache.prototype = {
                addCanvas: function (a, b, c) {
                    void 0 === c && (c = b.getContext("2d")), (this._cache.canvas[a] = { canvas: b, context: c });
                },
                addImage: function (a, b, d) {
                    this.checkImageKey(a) && this.removeImage(a);
                    var e = { key: a, url: b, data: d, base: new PIXI.BaseTexture(d), frame: new c.Frame(0, 0, 0, d.width, d.height, a), frameData: new c.FrameData() };
                    return (
                        e.frameData.addFrame(new c.Frame(0, 0, 0, d.width, d.height, b)),
                        (this._cache.image[a] = e),
                        this._resolveURL(b, e),
                        "__default" === a ? (c.Cache.DEFAULT = new PIXI.Texture(e.base)) : "__missing" === a && (c.Cache.MISSING = new PIXI.Texture(e.base)),
                        e
                    );
                },
                addDefaultImage: function () {
                    var a = new Image();
                    a.src = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==";
                    var b = this.addImage("__default", null, a);
                    (b.base.skipRender = !0), (c.Cache.DEFAULT = new PIXI.Texture(b.base));
                },
                addMissingImage: function () {
                    var a = new Image();
                    a.src =
                        "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==";
                    var b = this.addImage("__missing", null, a);
                    c.Cache.MISSING = new PIXI.Texture(b.base);
                },
                addSound: function (a, b, c, d, e) {
                    void 0 === d && (e = !(d = !0)), void 0 === e && (e = !(d = !1));
                    var f = !1;
                    e && (f = !0), (this._cache.sound[a] = { url: b, data: c, isDecoding: !1, decoded: f, webAudio: d, audioTag: e, locked: this.game.sound.touchLocked }), this._resolveURL(b, this._cache.sound[a]);
                },
                addText: function (a, b, c) {
                    (this._cache.text[a] = { url: b, data: c }), this._resolveURL(b, this._cache.text[a]);
                },
                addPhysicsData: function (a, b, c, d) {
                    (this._cache.physics[a] = { url: b, data: c, format: d }), this._resolveURL(b, this._cache.physics[a]);
                },
                addTilemap: function (a, b, c, d) {
                    (this._cache.tilemap[a] = { url: b, data: c, format: d }), this._resolveURL(b, this._cache.tilemap[a]);
                },
                addBinary: function (a, b) {
                    this._cache.binary[a] = b;
                },
                addBitmapData: function (a, b, d) {
                    return (b.key = a), void 0 === d && (d = new c.FrameData()).addFrame(b.textureFrame), (this._cache.bitmapData[a] = { data: b, frameData: d }), b;
                },
                addBitmapFont: function (a, b, d, e, f, g, h) {
                    var i = { url: b, data: d, font: null, base: new PIXI.BaseTexture(d) };
                    void 0 === g && (g = 0),
                        void 0 === h && (h = 0),
                        (i.font = "json" === f ? c.LoaderParser.jsonBitmapFont(e, i.base, g, h) : c.LoaderParser.xmlBitmapFont(e, i.base, g, h)),
                        (this._cache.bitmapFont[a] = i),
                        this._resolveURL(b, i);
                },
                addJSON: function (a, b, c) {
                    (this._cache.json[a] = { url: b, data: c }), this._resolveURL(b, this._cache.json[a]);
                },
                addXML: function (a, b, c) {
                    (this._cache.xml[a] = { url: b, data: c }), this._resolveURL(b, this._cache.xml[a]);
                },
                addVideo: function (a, b, c, d) {
                    (this._cache.video[a] = { url: b, data: c, isBlob: d, locked: !0 }), this._resolveURL(b, this._cache.video[a]);
                },
                addShader: function (a, b, c) {
                    (this._cache.shader[a] = { url: b, data: c }), this._resolveURL(b, this._cache.shader[a]);
                },
                addRenderTexture: function (a, b) {
                    this._cache.renderTexture[a] = { texture: b, frame: new c.Frame(0, 0, 0, b.width, b.height, "", "") };
                },
                addSpriteSheet: function (a, b, d, e, f, g, h, i) {
                    void 0 === g && (g = -1), void 0 === h && (h = 0), void 0 === i && (i = 0);
                    var j = { key: a, url: b, data: d, frameWidth: e, frameHeight: f, margin: h, spacing: i, base: new PIXI.BaseTexture(d), frameData: c.AnimationParser.spriteSheet(this.game, d, e, f, g, h, i) };
                    (this._cache.image[a] = j), this._resolveURL(b, j);
                },
                addTextureAtlas: function (a, b, d, e, f) {
                    var g = { key: a, url: b, data: d, base: new PIXI.BaseTexture(d) };
                    f === c.Loader.TEXTURE_ATLAS_XML_STARLING
                        ? (g.frameData = c.AnimationParser.XMLData(this.game, e, a))
                        : f === c.Loader.TEXTURE_ATLAS_JSON_PYXEL
                        ? (g.frameData = c.AnimationParser.JSONDataPyxel(this.game, e, a))
                        : Array.isArray(e.frames)
                        ? (g.frameData = c.AnimationParser.JSONData(this.game, e, a))
                        : (g.frameData = c.AnimationParser.JSONDataHash(this.game, e, a)),
                        (this._cache.image[a] = g),
                        this._resolveURL(b, g);
                },
                reloadSound: function (a) {
                    var b = this,
                        c = this.getSound(a);
                    c &&
                        ((c.data.src = c.url),
                        c.data.addEventListener(
                            "canplaythrough",
                            function () {
                                return b.reloadSoundComplete(a);
                            },
                            !1
                        ),
                        c.data.load());
                },
                reloadSoundComplete: function (a) {
                    var b = this.getSound(a);
                    b && ((b.locked = !1), this.onSoundUnlock.dispatch(a));
                },
                updateSound: function (a, b, c) {
                    var d = this.getSound(a);
                    d && (d[b] = c);
                },
                decodedSound: function (a, b) {
                    var c = this.getSound(a);
                    (c.data = b), (c.decoded = !0), (c.isDecoding = !1);
                },
                isSoundDecoded: function (a) {
                    var b = this.getItem(a, c.Cache.SOUND, "isSoundDecoded");
                    if (b) return b.decoded;
                },
                isSoundReady: function (a) {
                    var b = this.getItem(a, c.Cache.SOUND, "isSoundDecoded");
                    if (b) return b.decoded && !this.game.sound.touchLocked;
                },
                checkKey: function (a, b) {
                    return !!this._cacheMap[a][b];
                },
                checkURL: function (a) {
                    return !!this._urlMap[this._resolveURL(a)];
                },
                checkCanvasKey: function (a) {
                    return this.checkKey(c.Cache.CANVAS, a);
                },
                checkImageKey: function (a) {
                    return this.checkKey(c.Cache.IMAGE, a);
                },
                checkTextureKey: function (a) {
                    return this.checkKey(c.Cache.TEXTURE, a);
                },
                checkSoundKey: function (a) {
                    return this.checkKey(c.Cache.SOUND, a);
                },
                checkTextKey: function (a) {
                    return this.checkKey(c.Cache.TEXT, a);
                },
                checkPhysicsKey: function (a) {
                    return this.checkKey(c.Cache.PHYSICS, a);
                },
                checkTilemapKey: function (a) {
                    return this.checkKey(c.Cache.TILEMAP, a);
                },
                checkBinaryKey: function (a) {
                    return this.checkKey(c.Cache.BINARY, a);
                },
                checkBitmapDataKey: function (a) {
                    return this.checkKey(c.Cache.BITMAPDATA, a);
                },
                checkBitmapFontKey: function (a) {
                    return this.checkKey(c.Cache.BITMAPFONT, a);
                },
                checkJSONKey: function (a) {
                    return this.checkKey(c.Cache.JSON, a);
                },
                checkXMLKey: function (a) {
                    return this.checkKey(c.Cache.XML, a);
                },
                checkVideoKey: function (a) {
                    return this.checkKey(c.Cache.VIDEO, a);
                },
                checkShaderKey: function (a) {
                    return this.checkKey(c.Cache.SHADER, a);
                },
                checkRenderTextureKey: function (a) {
                    return this.checkKey(c.Cache.RENDER_TEXTURE, a);
                },
                getItem: function (a, b, c, d) {
                    return this.checkKey(b, a) ? (void 0 === d ? this._cacheMap[b][a] : this._cacheMap[b][a][d]) : null;
                },
                getCanvas: function (a) {
                    return this.getItem(a, c.Cache.CANVAS, "getCanvas", "canvas");
                },
                getImage: function (a, b) {
                    null != a || (a = "__default"), void 0 === b && (b = !1);
                    var d = this.getItem(a, c.Cache.IMAGE, "getImage");
                    return null === d && (d = this.getItem("__missing", c.Cache.IMAGE, "getImage")), b ? d : d.data;
                },
                getTextureFrame: function (a) {
                    return this.getItem(a, c.Cache.TEXTURE, "getTextureFrame", "frame");
                },
                getSound: function (a) {
                    return this.getItem(a, c.Cache.SOUND, "getSound");
                },
                getSoundData: function (a) {
                    return this.getItem(a, c.Cache.SOUND, "getSoundData", "data");
                },
                getText: function (a) {
                    return this.getItem(a, c.Cache.TEXT, "getText", "data");
                },
                getPhysicsData: function (a, b, d) {
                    var e = this.getItem(a, c.Cache.PHYSICS, "getPhysicsData", "data");
                    if (null === e || null == b) return e;
                    if (e[b]) {
                        var f = e[b];
                        if (!f || !d) return f;
                        for (var g in f) if ((g = f[g]).fixtureKey === d) return g;
                    }
                    return null;
                },
                getTilemapData: function (a) {
                    return this.getItem(a, c.Cache.TILEMAP, "getTilemapData");
                },
                getBinary: function (a) {
                    return this.getItem(a, c.Cache.BINARY, "getBinary");
                },
                getBitmapData: function (a) {
                    return this.getItem(a, c.Cache.BITMAPDATA, "getBitmapData", "data");
                },
                getBitmapFont: function (a) {
                    return this.getItem(a, c.Cache.BITMAPFONT, "getBitmapFont");
                },
                getJSON: function (a, b) {
                    var d = this.getItem(a, c.Cache.JSON, "getJSON", "data");
                    return d ? (b ? c.Utils.extend(!0, Array.isArray(d) ? [] : {}, d) : d) : null;
                },
                getXML: function (a) {
                    return this.getItem(a, c.Cache.XML, "getXML", "data");
                },
                getVideo: function (a) {
                    return this.getItem(a, c.Cache.VIDEO, "getVideo");
                },
                getShader: function (a) {
                    return this.getItem(a, c.Cache.SHADER, "getShader", "data");
                },
                getRenderTexture: function (a) {
                    return this.getItem(a, c.Cache.RENDER_TEXTURE, "getRenderTexture");
                },
                getBaseTexture: function (a, b) {
                    return void 0 === b && (b = c.Cache.IMAGE), this.getItem(a, b, "getBaseTexture", "base");
                },
                getFrame: function (a, b) {
                    return void 0 === b && (b = c.Cache.IMAGE), this.getItem(a, b, "getFrame", "frame");
                },
                getFrameCount: function (a, b) {
                    var c = this.getFrameData(a, b);
                    return c ? c.total : 0;
                },
                getFrameData: function (a, b) {
                    return void 0 === b && (b = c.Cache.IMAGE), this.getItem(a, b, "getFrameData", "frameData");
                },
                hasFrameData: function (a, b) {
                    return void 0 === b && (b = c.Cache.IMAGE), null !== this.getItem(a, b, "", "frameData");
                },
                updateFrameData: function (a, b, d) {
                    void 0 === d && (d = c.Cache.IMAGE), this._cacheMap[d][a] && (this._cacheMap[d][a].frameData = b);
                },
                getFrameByIndex: function (a, b, c) {
                    var d = this.getFrameData(a, c);
                    return d ? d.getFrame(b) : null;
                },
                getFrameByName: function (a, b, c) {
                    var d = this.getFrameData(a, c);
                    return d ? d.getFrameByName(b) : null;
                },
                getURL: function (a) {
                    return (a = this._resolveURL(a)) ? this._urlMap[a] : null;
                },
                getKeys: function (a) {
                    void 0 === a && (a = c.Cache.IMAGE);
                    var b = [];
                    if (this._cacheMap[a]) for (var d in this._cacheMap[a]) "__default" !== d && "__missing" !== d && b.push(d);
                    return b;
                },
                removeCanvas: function (a) {
                    delete this._cache.canvas[a];
                },
                removeImage: function (a, b) {
                    void 0 === b && (b = !0);
                    var c = this.getImage(a, !0);
                    b && c.base && c.base.destroy(), delete this._cache.image[a];
                },
                removeSound: function (a) {
                    delete this._cache.sound[a];
                },
                removeText: function (a) {
                    delete this._cache.text[a];
                },
                removePhysics: function (a) {
                    delete this._cache.physics[a];
                },
                removeTilemap: function (a) {
                    delete this._cache.tilemap[a];
                },
                removeBinary: function (a) {
                    delete this._cache.binary[a];
                },
                removeBitmapData: function (a) {
                    delete this._cache.bitmapData[a];
                },
                removeBitmapFont: function (a) {
                    delete this._cache.bitmapFont[a];
                },
                removeJSON: function (a) {
                    delete this._cache.json[a];
                },
                removeXML: function (a) {
                    delete this._cache.xml[a];
                },
                removeVideo: function (a) {
                    delete this._cache.video[a];
                },
                removeShader: function (a) {
                    delete this._cache.shader[a];
                },
                removeRenderTexture: function (a) {
                    delete this._cache.renderTexture[a];
                },
                removeSpriteSheet: function (a) {
                    delete this._cache.spriteSheet[a];
                },
                removeTextureAtlas: function (a) {
                    delete this._cache.atlas[a];
                },
                clearGLTextures: function () {
                    for (var a in this._cache.image) this._cache.image[a].base._glTextures = [];
                },
                _resolveURL: function (a, b) {
                    return this.autoResolveURL ? ((this._urlResolver.src = this.game.load.baseURL + a), (this._urlTemp = this._urlResolver.src), (this._urlResolver.src = ""), b && (this._urlMap[this._urlTemp] = b), this._urlTemp) : null;
                },
                destroy: function () {
                    for (var a = 0; a < this._cacheMap.length; a++) {
                        var b = this._cacheMap[a];
                        for (var c in b) "__default" !== c && "__missing" !== c && (b[c].destroy && b[c].destroy(), delete b[c]);
                    }
                    (this._urlMap = null), (this._urlResolver = null), (this._urlTemp = null);
                },
            }),
            (c.Cache.prototype.constructor = c.Cache),
            (c.Loader = function (a) {
                (this.game = a),
                    (this.cache = a.cache),
                    (this.resetLocked = !1),
                    (this.isLoading = !1),
                    (this.hasLoaded = !1),
                    (this.preloadSprite = null),
                    (this.crossOrigin = !1),
                    (this.baseURL = ""),
                    (this.path = ""),
                    (this.headers = { requestedWith: !1, json: "application/json", xml: "application/xml" }),
                    (this.onLoadStart = new c.Signal()),
                    (this.onLoadComplete = new c.Signal()),
                    (this.onPackComplete = new c.Signal()),
                    (this.onFileStart = new c.Signal()),
                    (this.onFileComplete = new c.Signal()),
                    (this.onFileError = new c.Signal()),
                    (this.useXDomainRequest = !1),
                    (this._warnedAboutXDomainRequest = !1),
                    (this.enableParallel = !0),
                    (this.maxParallelDownloads = 4),
                    (this._withSyncPointDepth = 0),
                    (this._fileList = []),
                    (this._flightQueue = []),
                    (this._processingHead = 0),
                    (this._fileLoadStarted = !1),
                    (this._totalPackCount = 0),
                    (this._totalFileCount = 0),
                    (this._loadedPackCount = 0),
                    (this._loadedFileCount = 0);
            }),
            (c.Loader.TEXTURE_ATLAS_JSON_ARRAY = 0),
            (c.Loader.TEXTURE_ATLAS_JSON_HASH = 1),
            (c.Loader.TEXTURE_ATLAS_XML_STARLING = 2),
            (c.Loader.PHYSICS_LIME_CORONA_JSON = 3),
            (c.Loader.PHYSICS_PHASER_JSON = 4),
            (c.Loader.TEXTURE_ATLAS_JSON_PYXEL = 5),
            (c.Loader.prototype = {
                setPreloadSprite: function (a, b) {
                    (b = b || 0),
                        (this.preloadSprite = { sprite: a, direction: b, width: a.width, height: a.height, rect: null }),
                        (this.preloadSprite.rect = 0 === b ? new c.Rectangle(0, 0, 1, a.height) : new c.Rectangle(0, 0, a.width, 1)),
                        a.crop(this.preloadSprite.rect),
                        (a.visible = !0);
                },
                resize: function () {
                    this.preloadSprite && this.preloadSprite.height !== this.preloadSprite.sprite.height && (this.preloadSprite.rect.height = this.preloadSprite.sprite.height);
                },
                checkKeyExists: function (a, b) {
                    return -1 < this.getAssetIndex(a, b);
                },
                getAssetIndex: function (a, b) {
                    for (var c = -1, d = 0; d < this._fileList.length; d++) {
                        var e = this._fileList[d];
                        if (e.type === a && e.key === b && ((c = d), !e.loaded && !e.loading)) break;
                    }
                    return c;
                },
                getAsset: function (a, b) {
                    var c = this.getAssetIndex(a, b);
                    return -1 < c && { index: c, file: this._fileList[c] };
                },
                reset: function (a, b) {
                    void 0 === b && (b = !1),
                        this.resetLocked ||
                            (a && (this.preloadSprite = null),
                            (this.isLoading = !1),
                            (this._processingHead = 0),
                            (this._fileList.length = 0),
                            (this._flightQueue.length = 0),
                            (this._fileLoadStarted = !1),
                            (this._totalFileCount = 0),
                            (this._totalPackCount = 0),
                            (this._loadedPackCount = 0),
                            (this._loadedFileCount = 0),
                            b && (this.onLoadStart.removeAll(), this.onLoadComplete.removeAll(), this.onPackComplete.removeAll(), this.onFileStart.removeAll(), this.onFileComplete.removeAll(), this.onFileError.removeAll()));
                },
                addToFileList: function (a, b, c, d, e, f) {
                    if ((void 0 === e && (e = !1), void 0 === b || "" === b)) return this;
                    if (null == c) {
                        if (!f) return this;
                        c = b + f;
                    }
                    var g = { type: a, key: b, path: this.path, url: c, syncPoint: 0 < this._withSyncPointDepth, data: null, loading: !1, loaded: !1, error: !1 };
                    if (d) for (var h in d) g[h] = d[h];
                    var i = this.getAssetIndex(a, b);
                    if (e && -1 < i) {
                        var j = this._fileList[i];
                        j.loading || j.loaded ? (this._fileList.push(g), this._totalFileCount++) : (this._fileList[i] = g);
                    } else -1 === i && (this._fileList.push(g), this._totalFileCount++);
                    return this;
                },
                replaceInFileList: function (a, b, c, d) {
                    return this.addToFileList(a, b, c, d, !0);
                },
                pack: function (a, b, c, d) {
                    if ((void 0 === b && (b = null), void 0 === c && (c = null), void 0 === d && (d = null), !b && !c)) return this;
                    var e = { type: "packfile", key: a, url: b, path: this.path, syncPoint: !0, data: null, loading: !1, loaded: !1, error: !1, callbackContext: d };
                    c && ("string" == typeof c && (c = JSON.parse(c)), (e.data = c || {}), (e.loaded = !0));
                    for (var f = 0; f < this._fileList.length + 1; f++) {
                        var g = this._fileList[f];
                        if (!g || (!g.loaded && !g.loading && "packfile" !== g.type)) {
                            this._fileList.splice(f, 0, e), this._totalPackCount++;
                            break;
                        }
                    }
                    return this;
                },
                image: function (a, b, c) {
                    return this.addToFileList("image", a, b, void 0, c, ".png");
                },
                images: function (a, b) {
                    if (Array.isArray(b)) for (var c = 0; c < a.length; c++) this.image(a[c], b[c]);
                    else for (c = 0; c < a.length; c++) this.image(a[c]);
                    return this;
                },
                text: function (a, b, c) {
                    return this.addToFileList("text", a, b, void 0, c, ".txt");
                },
                json: function (a, b, c) {
                    return this.addToFileList("json", a, b, void 0, c, ".json");
                },
                shader: function (a, b, c) {
                    return this.addToFileList("shader", a, b, void 0, c, ".frag");
                },
                xml: function (a, b, c) {
                    return this.addToFileList("xml", a, b, void 0, c, ".xml");
                },
                script: function (a, b, c, d) {
                    return void 0 === c && (c = !1), !1 !== c && void 0 === d && (d = this), this.addToFileList("script", a, b, { syncPoint: !0, callback: c, callbackContext: d }, !1, ".js");
                },
                binary: function (a, b, c, d) {
                    return void 0 === c && (c = !1), !1 !== c && void 0 === d && (d = c), this.addToFileList("binary", a, b, { callback: c, callbackContext: d }, !1, ".bin");
                },
                spritesheet: function (a, b, c, d, e, f, g) {
                    return void 0 === e && (e = -1), void 0 === f && (f = 0), void 0 === g && (g = 0), this.addToFileList("spritesheet", a, b, { frameWidth: c, frameHeight: d, frameMax: e, margin: f, spacing: g }, !1, ".png");
                },
                audio: function (a, b, c) {
                    return this.game.sound.noAudio ? this : (void 0 === c && (c = !0), "string" == typeof b && (b = [b]), this.addToFileList("audio", a, b, { buffer: null, autoDecode: c }));
                },
                audioSprite: function (a, b, c, d, e) {
                    return (
                        this.game.sound.noAudio ||
                            (void 0 === c && (c = null),
                            void 0 === d && (d = null),
                            void 0 === e && (e = !0),
                            this.audio(a, b, e),
                            c ? this.json(a + "-audioatlas", c) : d && ("string" == typeof d && (d = JSON.parse(d)), this.cache.addJSON(a + "-audioatlas", "", d))),
                        this
                    );
                },
                audiosprite: function (a, b, c, d, e) {
                    return this.audioSprite(a, b, c, d, e);
                },
                video: function (a, b, c, d) {
                    return (
                        void 0 === c && (c = this.game.device.firefox ? "loadeddata" : "canplaythrough"),
                        void 0 === d && (d = !1),
                        "string" == typeof b && (b = [b]),
                        this.addToFileList("video", a, b, { buffer: null, asBlob: d, loadEvent: c })
                    );
                },
                tilemap: function (a, b, d, e) {
                    if ((void 0 === b && (b = null), void 0 === d && (d = null), void 0 === e && (e = c.Tilemap.CSV), b || d || (b = e === c.Tilemap.CSV ? a + ".csv" : a + ".json"), d)) {
                        switch (e) {
                            case c.Tilemap.CSV:
                                break;
                            case c.Tilemap.TILED_JSON:
                                "string" == typeof d && (d = JSON.parse(d));
                        }
                        this.cache.addTilemap(a, null, d, e);
                    } else this.addToFileList("tilemap", a, b, { format: e });
                    return this;
                },
                physics: function (a, b, d, e) {
                    return (
                        void 0 === b && (b = null),
                        void 0 === d && (d = null),
                        void 0 === e && (e = c.Physics.LIME_CORONA_JSON),
                        b || d || (b = a + ".json"),
                        d ? ("string" == typeof d && (d = JSON.parse(d)), this.cache.addPhysicsData(a, null, d, e)) : this.addToFileList("physics", a, b, { format: e }),
                        this
                    );
                },
                bitmapFont: function (a, b, c, d, e, f) {
                    if ((null != b || (b = a + ".png"), void 0 === c && (c = null), void 0 === d && (d = null), null === c && null === d && (c = a + ".xml"), void 0 === e && (e = 0), void 0 === f && (f = 0), c))
                        this.addToFileList("bitmapfont", a, b, { atlasURL: c, xSpacing: e, ySpacing: f });
                    else if ("string" == typeof d) {
                        var g, h;
                        try {
                            g = JSON.parse(d);
                        } catch (a) {
                            h = this.parseXml(d);
                        }
                        if (!h && !g) throw new Error("Phaser.Loader. Invalid Bitmap Font atlas given");
                        this.addToFileList("bitmapfont", a, b, { atlasURL: null, atlasData: g || h, atlasType: g ? "json" : "xml", xSpacing: e, ySpacing: f });
                    }
                    return this;
                },
                atlasJSONArray: function (a, b, d, e) {
                    return this.atlas(a, b, d, e, c.Loader.TEXTURE_ATLAS_JSON_ARRAY);
                },
                atlasJSONHash: function (a, b, d, e) {
                    return this.atlas(a, b, d, e, c.Loader.TEXTURE_ATLAS_JSON_HASH);
                },
                atlasXML: function (a, b, d, e) {
                    return void 0 === d && (d = null), void 0 === e && (e = null), d || e || (d = a + ".xml"), this.atlas(a, b, d, e, c.Loader.TEXTURE_ATLAS_XML_STARLING);
                },
                atlas: function (a, b, d, e, f) {
                    if (
                        (null != b || (b = a + ".png"),
                        void 0 === d && (d = null),
                        void 0 === e && (e = null),
                        void 0 === f && (f = c.Loader.TEXTURE_ATLAS_JSON_ARRAY),
                        d || e || (d = f === c.Loader.TEXTURE_ATLAS_XML_STARLING ? a + ".xml" : a + ".json"),
                        d)
                    )
                        this.addToFileList("textureatlas", a, b, { atlasURL: d, format: f });
                    else {
                        switch (f) {
                            case c.Loader.TEXTURE_ATLAS_JSON_ARRAY:
                                "string" == typeof e && (e = JSON.parse(e));
                                break;
                            case c.Loader.TEXTURE_ATLAS_XML_STARLING:
                                if ("string" == typeof e) {
                                    var g = this.parseXml(e);
                                    if (!g) throw new Error("Phaser.Loader. Invalid Texture Atlas XML given");
                                    e = g;
                                }
                        }
                        this.addToFileList("textureatlas", a, b, { atlasURL: null, atlasData: e, format: f });
                    }
                    return this;
                },
                withSyncPoint: function (a, b) {
                    this._withSyncPointDepth++;
                    try {
                        a.call(b || this, this);
                    } finally {
                        this._withSyncPointDepth--;
                    }
                    return this;
                },
                addSyncPoint: function (a, b) {
                    var c = this.getAsset(a, b);
                    return c && (c.file.syncPoint = !0), this;
                },
                removeFile: function (a, b) {
                    var c = this.getAsset(a, b);
                    c && (c.loaded || c.loading || this._fileList.splice(c.index, 1));
                },
                removeAll: function () {
                    (this._fileList.length = 0), (this._flightQueue.length = 0);
                },
                start: function () {
                    this.isLoading || ((this.hasLoaded = !1), (this.isLoading = !0), this.updateProgress(), this.processLoadQueue());
                },
                processLoadQueue: function () {
                    if (this.isLoading) {
                        for (var a = 0; a < this._flightQueue.length; a++) {
                            ((b = this._flightQueue[a]).loaded || b.error) &&
                                (this._flightQueue.splice(a, 1),
                                a--,
                                (b.loading = !1),
                                (b.requestUrl = null),
                                (b.requestObject = null),
                                b.error && this.onFileError.dispatch(b.key, b),
                                "packfile" !== b.type
                                    ? (this._loadedFileCount++, this.onFileComplete.dispatch(this.progress, b.key, !b.error, this._loadedFileCount, this._totalFileCount))
                                    : "packfile" === b.type && b.error && (this._loadedPackCount++, this.onPackComplete.dispatch(b.key, !b.error, this._loadedPackCount, this._totalPackCount)));
                        }
                        var d = !1,
                            e = this.enableParallel ? c.Math.clamp(this.maxParallelDownloads, 1, 12) : 1;
                        for (a = this._processingHead; a < this._fileList.length; a++) {
                            var b;
                            if (
                                ("packfile" === (b = this._fileList[a]).type &&
                                    !b.error &&
                                    b.loaded &&
                                    a === this._processingHead &&
                                    (this.processPack(b), this._loadedPackCount++, this.onPackComplete.dispatch(b.key, !b.error, this._loadedPackCount, this._totalPackCount)),
                                b.loaded || b.error
                                    ? a === this._processingHead && (this._processingHead = a + 1)
                                    : !b.loading &&
                                      this._flightQueue.length < e &&
                                      ("packfile" !== b.type || b.data
                                          ? d ||
                                            (this._fileLoadStarted || ((this._fileLoadStarted = !0), this.onLoadStart.dispatch()),
                                            this._flightQueue.push(b),
                                            (b.loading = !0),
                                            this.onFileStart.dispatch(this.progress, b.key, b.url),
                                            this.loadFile(b))
                                          : (this._flightQueue.push(b), (b.loading = !0), this.loadFile(b))),
                                !b.loaded && b.syncPoint && (d = !0),
                                this._flightQueue.length >= e || (d && this._loadedPackCount === this._totalPackCount))
                            )
                                break;
                        }
                        if ((this.updateProgress(), this._processingHead >= this._fileList.length)) this.finishedLoading();
                        else if (!this._flightQueue.length) {
                            var f = this;
                            setTimeout(function () {
                                f.finishedLoading(!0);
                            }, 2e3);
                        }
                    } else this.finishedLoading(!0);
                },
                finishedLoading: function (a) {
                    this.hasLoaded ||
                        ((this.hasLoaded = !0), (this.isLoading = !1), a || this._fileLoadStarted || ((this._fileLoadStarted = !0), this.onLoadStart.dispatch()), this.onLoadComplete.dispatch(), this.game.state.loadComplete(), this.reset());
                },
                asyncComplete: function (a, b) {
                    void 0 === b && (b = ""), (a.loaded = !0), (a.error = !!b), b && (a.errorMessage = b), this.processLoadQueue();
                },
                processPack: function (a) {
                    var b = a.data[a.key];
                    if (b)
                        for (var d = 0; d < b.length; d++) {
                            var e = b[d];
                            switch (e.type) {
                                case "image":
                                    this.image(e.key, e.url, e.overwrite);
                                    break;
                                case "text":
                                    this.text(e.key, e.url, e.overwrite);
                                    break;
                                case "json":
                                    this.json(e.key, e.url, e.overwrite);
                                    break;
                                case "xml":
                                    this.xml(e.key, e.url, e.overwrite);
                                    break;
                                case "script":
                                    this.script(e.key, e.url, e.callback, a.callbackContext || this);
                                    break;
                                case "binary":
                                    this.binary(e.key, e.url, e.callback, a.callbackContext || this);
                                    break;
                                case "spritesheet":
                                    this.spritesheet(e.key, e.url, e.frameWidth, e.frameHeight, e.frameMax, e.margin, e.spacing);
                                    break;
                                case "video":
                                    this.video(e.key, e.urls);
                                    break;
                                case "audio":
                                    this.audio(e.key, e.urls, e.autoDecode);
                                    break;
                                case "audiosprite":
                                    this.audiosprite(e.key, e.urls, e.jsonURL, e.jsonData, e.autoDecode);
                                    break;
                                case "tilemap":
                                    this.tilemap(e.key, e.url, e.data, c.Tilemap[e.format]);
                                    break;
                                case "physics":
                                    this.physics(e.key, e.url, e.data, c.Loader[e.format]);
                                    break;
                                case "bitmapFont":
                                    this.bitmapFont(e.key, e.textureURL, e.atlasURL, e.atlasData, e.xSpacing, e.ySpacing);
                                    break;
                                case "atlasJSONArray":
                                    this.atlasJSONArray(e.key, e.textureURL, e.atlasURL, e.atlasData);
                                    break;
                                case "atlasJSONHash":
                                    this.atlasJSONHash(e.key, e.textureURL, e.atlasURL, e.atlasData);
                                    break;
                                case "atlasXML":
                                    this.atlasXML(e.key, e.textureURL, e.atlasURL, e.atlasData);
                                    break;
                                case "atlas":
                                    this.atlas(e.key, e.textureURL, e.atlasURL, e.atlasData, c.Loader[e.format]);
                                    break;
                                case "shader":
                                    this.shader(e.key, e.url, e.overwrite);
                            }
                        }
                },
                transformUrl: function (a, b) {
                    return !!a && (a.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/) ? a : this.baseURL + b.path + a);
                },
                loadFile: function (a) {
                    switch (a.type) {
                        case "packfile":
                            this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.fileComplete);
                            break;
                        case "image":
                        case "spritesheet":
                        case "textureatlas":
                        case "bitmapfont":
                            this.loadImageTag(a);
                            break;
                        case "audio":
                            (a.url = this.getAudioURL(a.url)),
                                a.url
                                    ? this.game.sound.usingWebAudio
                                        ? this.xhrLoad(a, this.transformUrl(a.url, a), "arraybuffer", this.fileComplete)
                                        : this.game.sound.usingAudioTag && this.loadAudioTag(a)
                                    : this.fileError(a, null, "No supported audio URL specified or device does not have audio playback support");
                            break;
                        case "video":
                            (a.url = this.getVideoURL(a.url)),
                                a.url
                                    ? a.asBlob
                                        ? this.xhrLoad(a, this.transformUrl(a.url, a), "blob", this.fileComplete)
                                        : this.loadVideoTag(a)
                                    : this.fileError(a, null, "No supported video URL specified or device does not have video playback support");
                            break;
                        case "json":
                            this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.jsonLoadComplete);
                            break;
                        case "xml":
                            this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.xmlLoadComplete);
                            break;
                        case "tilemap":
                            a.format === c.Tilemap.TILED_JSON
                                ? this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.jsonLoadComplete)
                                : a.format === c.Tilemap.CSV
                                ? this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.csvLoadComplete)
                                : this.asyncComplete(a, "invalid Tilemap format: " + a.format);
                            break;
                        case "text":
                        case "script":
                        case "shader":
                        case "physics":
                            this.xhrLoad(a, this.transformUrl(a.url, a), "text", this.fileComplete);
                            break;
                        case "binary":
                            this.xhrLoad(a, this.transformUrl(a.url, a), "arraybuffer", this.fileComplete);
                    }
                },
                loadImageTag: function (a) {
                    var b = this;
                    (a.data = new Image()),
                        (a.data.name = a.key),
                        this.crossOrigin && (a.data.crossOrigin = this.crossOrigin),
                        (a.data.onload = function () {
                            a.data.onload && ((a.data.onload = null), (a.data.onerror = null), b.fileComplete(a));
                        }),
                        (a.data.onerror = function () {
                            a.data.onload && ((a.data.onload = null), (a.data.onerror = null), b.fileError(a));
                        }),
                        (a.data.src = this.transformUrl(a.url, a)),
                        a.data.complete && a.data.width && a.data.height && ((a.data.onload = null), (a.data.onerror = null), this.fileComplete(a));
                },
                loadVideoTag: function (a) {
                    var b = this;
                    (a.data = document.createElement("video")), (a.data.name = a.key), (a.data.controls = !1), (a.data.autoplay = !1);
                    var d = function () {
                        a.data.removeEventListener(a.loadEvent, d, !1), (a.data.onerror = null), (a.data.canplay = !0), c.GAMES[b.game.id].load.fileComplete(a);
                    };
                    (a.data.onerror = function () {
                        a.data.removeEventListener(a.loadEvent, d, !1), (a.data.onerror = null), (a.data.canplay = !1), b.fileError(a);
                    }),
                        a.data.addEventListener(a.loadEvent, d, !1),
                        (a.data.src = this.transformUrl(a.url, a)),
                        a.data.load();
                },
                loadAudioTag: function (a) {
                    var b = this;
                    if (this.game.sound.touchLocked) (a.data = new Audio()), (a.data.name = a.key), (a.data.preload = "auto"), (a.data.src = this.transformUrl(a.url, a)), this.fileComplete(a);
                    else {
                        (a.data = new Audio()), (a.data.name = a.key);
                        var c = function () {
                            a.data.removeEventListener("canplaythrough", c, !1), (a.data.onerror = null), b.fileComplete(a);
                        };
                        (a.data.onerror = function () {
                            a.data.removeEventListener("canplaythrough", c, !1), (a.data.onerror = null), b.fileError(a);
                        }),
                            (a.data.preload = "auto"),
                            (a.data.src = this.transformUrl(a.url, a)),
                            a.data.addEventListener("canplaythrough", c, !1),
                            a.data.load();
                    }
                },
                xhrLoad: function (a, b, c, d, e) {
                    if (this.useXDomainRequest && window.XDomainRequest) this.xhrLoadWithXDR(a, b, c, d, e);
                    else {
                        var f = new XMLHttpRequest();
                        f.open("GET", b, !0),
                            (f.responseType = c),
                            !1 !== this.headers.requestedWith && f.setRequestHeader("X-Requested-With", this.headers.requestedWith),
                            this.headers[a.type] && f.setRequestHeader("Accept", this.headers[a.type]),
                            (e = e || this.fileError);
                        var g = this;
                        (f.onload = function () {
                            try {
                                return 4 === f.readyState && 400 <= f.status && f.status <= 599 ? e.call(g, a, f) : d.call(g, a, f);
                            } catch (b) {
                                g.hasLoaded ? window.console : g.asyncComplete(a, b.message || "Exception");
                            }
                        }),
                            (f.onerror = function () {
                                try {
                                    return e.call(g, a, f);
                                } catch (b) {
                                    g.hasLoaded ? window.console : g.asyncComplete(a, b.message || "Exception");
                                }
                            }),
                            (a.requestObject = f),
                            (a.requestUrl = b),
                            f.send();
                    }
                },
                xhrLoadWithXDR: function (a, b, c, d, e) {
                    this._warnedAboutXDomainRequest || (this.game.device.ie && !(10 <= this.game.device.ieVersion)) || (this._warnedAboutXDomainRequest = !0);
                    var f = new window.XDomainRequest();
                    f.open("GET", b, !0), (f.responseType = c), (f.timeout = 3e3), (e = e || this.fileError);
                    var g = this;
                    (f.onerror = function () {
                        try {
                            return e.call(g, a, f);
                        } catch (b) {
                            g.asyncComplete(a, b.message || "Exception");
                        }
                    }),
                        (f.ontimeout = function () {
                            try {
                                return e.call(g, a, f);
                            } catch (b) {
                                g.asyncComplete(a, b.message || "Exception");
                            }
                        }),
                        (f.onprogress = function () {}),
                        (f.onload = function () {
                            try {
                                return 4 === f.readyState && 400 <= f.status && f.status <= 599 ? e.call(g, a, f) : d.call(g, a, f);
                            } catch (b) {
                                g.asyncComplete(a, b.message || "Exception");
                            }
                        }),
                        (a.requestObject = f),
                        (a.requestUrl = b),
                        setTimeout(function () {
                            f.send();
                        }, 0);
                },
                getVideoURL: function (a) {
                    for (var b = 0; b < a.length; b++) {
                        var c,
                            d = a[b];
                        if (d.uri) {
                            if (((c = d.type), (d = d.uri), this.game.device.canPlayVideo(c))) return d;
                        } else {
                            if (0 === d.indexOf("blob:") || 0 === d.indexOf("data:")) return d;
                            if ((0 <= d.indexOf("?") && (d = d.substr(0, d.indexOf("?"))), (c = d.substr((Math.max(0, d.lastIndexOf(".")) || 1 / 0) + 1).toLowerCase()), this.game.device.canPlayVideo(c))) return a[b];
                        }
                    }
                    return null;
                },
                getAudioURL: function (a) {
                    if (this.game.sound.noAudio) return null;
                    for (var b = 0; b < a.length; b++) {
                        var c,
                            d = a[b];
                        if (d.uri) {
                            if (((c = d.type), (d = d.uri), this.game.device.canPlayAudio(c))) return d;
                        } else {
                            if (0 === d.indexOf("blob:") || 0 === d.indexOf("data:")) return d;
                            if ((0 <= d.indexOf("?") && (d = d.substr(0, d.indexOf("?"))), (c = d.substr((Math.max(0, d.lastIndexOf(".")) || 1 / 0) + 1).toLowerCase()), this.game.device.canPlayAudio(c))) return a[b];
                        }
                    }
                    return null;
                },
                fileError: function (a, b, c) {
                    var e = "error loading asset from URL " + (a.requestUrl || this.transformUrl(a.url, a));
                    !c && b && (c = b.status), c && (e = e + " (" + c + ")"), this.asyncComplete(a, e);
                },
                fileComplete: function (a, b) {
                    var d = !0;
                    switch (a.type) {
                        case "packfile":
                            var e = JSON.parse(b.responseText);
                            a.data = e || {};
                            break;
                        case "image":
                            this.cache.addImage(a.key, a.url, a.data);
                            break;
                        case "spritesheet":
                            this.cache.addSpriteSheet(a.key, a.url, a.data, a.frameWidth, a.frameHeight, a.frameMax, a.margin, a.spacing);
                            break;
                        case "textureatlas":
                            if (null == a.atlasURL) this.cache.addTextureAtlas(a.key, a.url, a.data, a.atlasData, a.format);
                            else if (((d = !1), a.format === c.Loader.TEXTURE_ATLAS_JSON_ARRAY || a.format === c.Loader.TEXTURE_ATLAS_JSON_HASH || a.format === c.Loader.TEXTURE_ATLAS_JSON_PYXEL))
                                this.xhrLoad(a, this.transformUrl(a.atlasURL, a), "text", this.jsonLoadComplete);
                            else {
                                if (a.format !== c.Loader.TEXTURE_ATLAS_XML_STARLING) throw new Error("Phaser.Loader. Invalid Texture Atlas format: " + a.format);
                                this.xhrLoad(a, this.transformUrl(a.atlasURL, a), "text", this.xmlLoadComplete);
                            }
                            break;
                        case "bitmapfont":
                            a.atlasURL
                                ? ((d = !1),
                                  this.xhrLoad(a, this.transformUrl(a.atlasURL, a), "text", function (a, b) {
                                      var c;
                                      try {
                                          c = JSON.parse(b.responseText);
                                      } catch (a) {}
                                      c ? ((a.atlasType = "json"), this.jsonLoadComplete(a, b)) : ((a.atlasType = "xml"), this.xmlLoadComplete(a, b));
                                  }))
                                : this.cache.addBitmapFont(a.key, a.url, a.data, a.atlasData, a.atlasType, a.xSpacing, a.ySpacing);
                            break;
                        case "video":
                            if (a.asBlob)
                                try {
                                    a.data = b.response;
                                } catch (b) {
                                    throw new Error("Phaser.Loader. Unable to parse video file as Blob: " + a.key);
                                }
                            this.cache.addVideo(a.key, a.url, a.data, a.asBlob);
                            break;
                        case "audio":
                            this.game.sound.usingWebAudio ? ((a.data = b.response), this.cache.addSound(a.key, a.url, a.data, !0, !1), a.autoDecode && this.game.sound.decode(a.key)) : this.cache.addSound(a.key, a.url, a.data, !1, !0);
                            break;
                        case "text":
                            (a.data = b.responseText), this.cache.addText(a.key, a.url, a.data);
                            break;
                        case "shader":
                            (a.data = b.responseText), this.cache.addShader(a.key, a.url, a.data);
                            break;
                        case "physics":
                            e = JSON.parse(b.responseText);
                            this.cache.addPhysicsData(a.key, a.url, e, a.format);
                            break;
                        case "script":
                            (a.data = document.createElement("script")),
                                (a.data.language = "javascript"),
                                (a.data.type = "text/javascript"),
                                (a.data.defer = !1),
                                (a.data.text = b.responseText),
                                document.head.appendChild(a.data),
                                a.callback && (a.data = a.callback.call(a.callbackContext, a.key, b.responseText));
                            break;
                        case "binary":
                            a.callback ? (a.data = a.callback.call(a.callbackContext, a.key, b.response)) : (a.data = b.response), this.cache.addBinary(a.key, a.data);
                    }
                    d && this.asyncComplete(a);
                },
                jsonLoadComplete: function (a, b) {
                    var c = JSON.parse(b.responseText);
                    "tilemap" === a.type
                        ? this.cache.addTilemap(a.key, a.url, c, a.format)
                        : "bitmapfont" === a.type
                        ? this.cache.addBitmapFont(a.key, a.url, a.data, c, a.atlasType, a.xSpacing, a.ySpacing)
                        : "json" === a.type
                        ? this.cache.addJSON(a.key, a.url, c)
                        : this.cache.addTextureAtlas(a.key, a.url, a.data, c, a.format),
                        this.asyncComplete(a);
                },
                csvLoadComplete: function (a, b) {
                    var c = b.responseText;
                    this.cache.addTilemap(a.key, a.url, c, a.format), this.asyncComplete(a);
                },
                xmlLoadComplete: function (a, b) {
                    var c = b.responseText,
                        d = this.parseXml(c);
                    if (d)
                        "bitmapfont" === a.type
                            ? this.cache.addBitmapFont(a.key, a.url, a.data, d, a.atlasType, a.xSpacing, a.ySpacing)
                            : "textureatlas" === a.type
                            ? this.cache.addTextureAtlas(a.key, a.url, a.data, d, a.format)
                            : "xml" === a.type && this.cache.addXML(a.key, a.url, d),
                            this.asyncComplete(a);
                    else {
                        b.responseType || b.contentType;
                        this.asyncComplete(a, "invalid XML");
                    }
                },
                parseXml: function (a) {
                    var b;
                    try {
                        if (window.DOMParser) b = new DOMParser().parseFromString(a, "text/xml");
                        else ((b = new ActiveXObject("Microsoft.XMLDOM")).async = "false"), b.loadXML(a);
                    } catch (a) {
                        b = null;
                    }
                    return b && b.documentElement && !b.getElementsByTagName("parsererror").length ? b : null;
                },
                updateProgress: function () {
                    this.preloadSprite &&
                        (0 === this.preloadSprite.direction
                            ? (this.preloadSprite.rect.width = Math.floor((this.preloadSprite.width / 100) * this.progress))
                            : (this.preloadSprite.rect.height = Math.floor((this.preloadSprite.height / 100) * this.progress)),
                        this.preloadSprite.sprite ? this.preloadSprite.sprite.updateCrop() : (this.preloadSprite = null));
                },
                totalLoadedFiles: function () {
                    return this._loadedFileCount;
                },
                totalQueuedFiles: function () {
                    return this._totalFileCount - this._loadedFileCount;
                },
                totalLoadedPacks: function () {
                    return this._totalPackCount;
                },
                totalQueuedPacks: function () {
                    return this._totalPackCount - this._loadedPackCount;
                },
            }),
            Object.defineProperty(c.Loader.prototype, "progressFloat", {
                get: function () {
                    var a = (this._loadedFileCount / this._totalFileCount) * 100;
                    return c.Math.clamp(a || 0, 0, 100);
                },
            }),
            Object.defineProperty(c.Loader.prototype, "progress", {
                get: function () {
                    return Math.round(this.progressFloat);
                },
            }),
            (c.Loader.prototype.constructor = c.Loader),
            (c.LoaderParser = {
                bitmapFont: function (a, b, c, d) {
                    return this.xmlBitmapFont(a, b, c, d);
                },
                xmlBitmapFont: function (a, b, c, d) {
                    var e = {},
                        f = a.getElementsByTagName("info")[0],
                        g = a.getElementsByTagName("common")[0];
                    (e.font = f.getAttribute("face")), (e.size = parseInt(f.getAttribute("size"), 10)), (e.lineHeight = parseInt(g.getAttribute("lineHeight"), 10) + d), (e.chars = {});
                    for (var h = a.getElementsByTagName("char"), i = 0; i < h.length; i++) {
                        var j = parseInt(h[i].getAttribute("id"), 10);
                        e.chars[j] = {
                            x: parseInt(h[i].getAttribute("x"), 10),
                            y: parseInt(h[i].getAttribute("y"), 10),
                            width: parseInt(h[i].getAttribute("width"), 10),
                            height: parseInt(h[i].getAttribute("height"), 10),
                            xOffset: parseInt(h[i].getAttribute("xoffset"), 10),
                            yOffset: parseInt(h[i].getAttribute("yoffset"), 10),
                            xAdvance: parseInt(h[i].getAttribute("xadvance"), 10) + c,
                            kerning: {},
                        };
                    }
                    var k = a.getElementsByTagName("kerning");
                    for (i = 0; i < k.length; i++) {
                        var l = parseInt(k[i].getAttribute("first"), 10),
                            m = parseInt(k[i].getAttribute("second"), 10),
                            n = parseInt(k[i].getAttribute("amount"), 10);
                        e.chars[m].kerning[l] = n;
                    }
                    return this.finalizeBitmapFont(b, e);
                },
                jsonBitmapFont: function (a, b, c, d) {
                    var e = { font: a.font.info._face, size: parseInt(a.font.info._size, 10), lineHeight: parseInt(a.font.common._lineHeight, 10) + d, chars: {} };
                    return (
                        a.font.chars.char.forEach(function (a) {
                            var b = parseInt(a._id, 10);
                            e.chars[b] = {
                                x: parseInt(a._x, 10),
                                y: parseInt(a._y, 10),
                                width: parseInt(a._width, 10),
                                height: parseInt(a._height, 10),
                                xOffset: parseInt(a._xoffset, 10),
                                yOffset: parseInt(a._yoffset, 10),
                                xAdvance: parseInt(a._xadvance, 10) + c,
                                kerning: {},
                            };
                        }),
                        a.font.kernings &&
                            a.font.kernings.kerning &&
                            a.font.kernings.kerning.forEach(function (a) {
                                e.chars[a._second].kerning[a._first] = parseInt(a._amount, 10);
                            }),
                        this.finalizeBitmapFont(b, e)
                    );
                },
                finalizeBitmapFont: function (a, b) {
                    return (
                        Object.keys(b.chars).forEach(function (d) {
                            var e = b.chars[d];
                            e.texture = new PIXI.Texture(a, new c.Rectangle(e.x, e.y, e.width, e.height));
                        }),
                        b
                    );
                },
            }),
            (c.AudioSprite = function (a, b) {
                for (var c in ((this.game = a), (this.key = b), (this.config = this.game.cache.getJSON(b + "-audioatlas")), (this.autoplayKey = null), (this.autoplay = !1), (this.sounds = {}), this.config.spritemap)) {
                    var d = this.config.spritemap[c],
                        e = this.game.add.sound(this.key);
                    e.addMarker(c, d.start, d.end - d.start, null, d.loop), (this.sounds[c] = e);
                }
                this.config.autoplay && ((this.autoplayKey = this.config.autoplay), this.play(this.autoplayKey), (this.autoplay = this.sounds[this.autoplayKey]));
            }),
            (c.AudioSprite.prototype = {
                play: function (a, b) {
                    return void 0 === b && (b = 1), this.sounds[a].play(a, null, b);
                },
                stop: function (a) {
                    if (a) this.sounds[a].stop();
                    else for (var b in this.sounds) this.sounds[b].stop();
                },
                get: function (a) {
                    return this.sounds[a];
                },
            }),
            (c.AudioSprite.prototype.constructor = c.AudioSprite),
            (c.Sound = function (a, b, d, e, f) {
                void 0 === d && (d = 1),
                    void 0 === e && (e = !1),
                    void 0 === f && (f = a.sound.connectToMaster),
                    (this.game = a),
                    (this.name = b),
                    (this.key = b),
                    (this.loop = e),
                    (this.markers = {}),
                    (this.context = null),
                    (this.autoplay = !1),
                    (this.totalDuration = 0),
                    (this.startTime = 0),
                    (this.currentTime = 0),
                    (this.duration = 0),
                    (this.durationMS = 0),
                    (this.position = 0),
                    (this.stopTime = 0),
                    (this.paused = !1),
                    (this.pausedPosition = 0),
                    (this.pausedTime = 0),
                    (this.isPlaying = !1),
                    (this.currentMarker = ""),
                    (this.fadeTween = null),
                    (this.pendingPlayback = !1),
                    (this.override = !1),
                    (this.allowMultiple = !1),
                    (this.usingWebAudio = this.game.sound.usingWebAudio),
                    (this.usingAudioTag = this.game.sound.usingAudioTag),
                    (this.externalNode = null),
                    (this.masterGainNode = null),
                    (this.gainNode = null),
                    (this._sound = null),
                    this.usingWebAudio
                        ? ((this.context = this.game.sound.context),
                          (this.masterGainNode = this.game.sound.masterGain),
                          void 0 === this.context.createGain ? (this.gainNode = this.context.createGainNode()) : (this.gainNode = this.context.createGain()),
                          (this.gainNode.gain.value = d * this.game.sound.volume),
                          f && this.gainNode.connect(this.masterGainNode))
                        : this.usingAudioTag &&
                          (this.game.cache.getSound(b) && this.game.cache.isSoundReady(b)
                              ? ((this._sound = this.game.cache.getSoundData(b)), (this.totalDuration = 0), this._sound.duration && (this.totalDuration = this._sound.duration))
                              : this.game.cache.onSoundUnlock.add(this.soundHasUnlocked, this)),
                    (this.onDecoded = new c.Signal()),
                    (this.onPlay = new c.Signal()),
                    (this.onPause = new c.Signal()),
                    (this.onResume = new c.Signal()),
                    (this.onLoop = new c.Signal()),
                    (this.onStop = new c.Signal()),
                    (this.onMute = new c.Signal()),
                    (this.onMarkerComplete = new c.Signal()),
                    (this.onFadeComplete = new c.Signal()),
                    (this._volume = d),
                    (this._buffer = null),
                    (this._muted = !1),
                    (this._tempMarker = 0),
                    (this._tempPosition = 0),
                    (this._tempVolume = 0),
                    (this._tempPause = 0),
                    (this._muteVolume = 0),
                    (this._tempLoop = 0),
                    (this._paused = !1),
                    (this._onDecodedEventDispatched = !1);
            }),
            (c.Sound.prototype = {
                soundHasUnlocked: function (a) {
                    a === this.key && ((this._sound = this.game.cache.getSoundData(this.key)), (this.totalDuration = this._sound.duration));
                },
                addMarker: function (a, b, c, d, e) {
                    null != c || (c = 1), null != d || (d = 1), void 0 === e && (e = !1), (this.markers[a] = { name: a, start: b, stop: b + c, volume: d, duration: c, durationMS: 1e3 * c, loop: e });
                },
                removeMarker: function (a) {
                    delete this.markers[a];
                },
                onEndedHandler: function () {
                    (this._sound.onended = null), (this.isPlaying = !1), (this.currentTime = this.durationMS), this.stop();
                },
                update: function () {
                    this.game.cache.checkSoundKey(this.key)
                        ? (this.isDecoded && !this._onDecodedEventDispatched && (this.onDecoded.dispatch(this), (this._onDecodedEventDispatched = !0)),
                          this.pendingPlayback && this.game.cache.isSoundReady(this.key) && ((this.pendingPlayback = !1), this.play(this._tempMarker, this._tempPosition, this._tempVolume, this._tempLoop)),
                          this.isPlaying &&
                              ((this.currentTime = this.game.time.time - this.startTime),
                              this.currentTime >= this.durationMS &&
                                  (this.usingWebAudio
                                      ? this.loop
                                          ? (this.onLoop.dispatch(this),
                                            (this.isPlaying = !1),
                                            "" === this.currentMarker
                                                ? ((this.currentTime = 0), (this.startTime = this.game.time.time), (this.isPlaying = !0))
                                                : (this.onMarkerComplete.dispatch(this.currentMarker, this), this.play(this.currentMarker, 0, this.volume, !0, !0)))
                                          : "" !== this.currentMarker && this.stop()
                                      : this.loop
                                      ? (this.onLoop.dispatch(this),
                                        "" === this.currentMarker && ((this.currentTime = 0), (this.startTime = this.game.time.time)),
                                        (this.isPlaying = !1),
                                        this.play(this.currentMarker, 0, this.volume, !0, !0))
                                      : this.stop())))
                        : this.destroy();
                },
                loopFull: function (a) {
                    return this.play(null, 0, a, !0);
                },
                play: function (a, b, c, d, e) {
                    if (((void 0 !== a && !1 !== a && null !== a) || (a = ""), void 0 === e && (e = !0), this.isPlaying && !this.allowMultiple && !e && !this.override)) return this;
                    if (this._sound && this.isPlaying && !this.allowMultiple && (this.override || e)) {
                        if (this.usingWebAudio) {
                            if (void 0 === this._sound.stop) this._sound.noteOff(0);
                            else
                                try {
                                    this._sound.stop(0);
                                } catch (a) {}
                            this.externalNode ? this._sound.disconnect(this.externalNode) : this.gainNode && this._sound.disconnect(this.gainNode);
                        } else this.usingAudioTag && (this._sound.pause(), (this._sound.currentTime = 0));
                        this.isPlaying = !1;
                    }
                    var f = Object.keys(this.markers);
                    if (("" === a && 1 === f.length && (a = f[0]), "" === a && 0 < f.length)) return this;
                    if ("" !== a) {
                        if (!this.markers[a]) return this;
                        (this.currentMarker = a),
                            (this.position = this.markers[a].start),
                            (this.volume = this.markers[a].volume),
                            (this.loop = this.markers[a].loop),
                            (this.duration = this.markers[a].duration),
                            (this.durationMS = this.markers[a].durationMS),
                            void 0 !== c && (this.volume = c),
                            void 0 !== d && (this.loop = d),
                            (this._tempMarker = a),
                            (this._tempPosition = this.position),
                            (this._tempVolume = this.volume),
                            (this._tempLoop = this.loop);
                    } else
                        (b = b || 0),
                            void 0 === c && (c = this._volume),
                            void 0 === d && (d = this.loop),
                            (this.position = Math.max(0, b)),
                            (this.volume = c),
                            (this.loop = d),
                            (this.duration = 0),
                            (this.durationMS = 0),
                            (this._tempMarker = a),
                            (this._tempPosition = b),
                            (this._tempVolume = c),
                            (this._tempLoop = d);
                    return (
                        this.usingWebAudio
                            ? this.game.cache.isSoundDecoded(this.key)
                                ? ((this._sound = this.context.createBufferSource()),
                                  this.externalNode ? this._sound.connect(this.externalNode) : this._sound.connect(this.gainNode),
                                  (this._buffer = this.game.cache.getSoundData(this.key)),
                                  (this._sound.buffer = this._buffer),
                                  this.loop && "" === a && (this._sound.loop = !0),
                                  this.loop || "" !== a || (this._sound.onended = this.onEndedHandler.bind(this)),
                                  (this.totalDuration = this._sound.buffer.duration),
                                  0 === this.duration && ((this.duration = this.totalDuration), (this.durationMS = Math.ceil(1e3 * this.totalDuration))),
                                  void 0 === this._sound.start ? this._sound.noteGrainOn(0, this.position, this.duration) : this.loop && "" === a ? this._sound.start(0, 0) : this._sound.start(0, this.position, this.duration),
                                  (this.isPlaying = !0),
                                  (this.startTime = this.game.time.time),
                                  (this.currentTime = 0),
                                  (this.stopTime = this.startTime + this.durationMS),
                                  this.onPlay.dispatch(this))
                                : ((this.pendingPlayback = !0), this.game.cache.getSound(this.key) && !1 === this.game.cache.getSound(this.key).isDecoding && this.game.sound.decode(this.key, this))
                            : this.game.cache.getSound(this.key) && this.game.cache.getSound(this.key).locked
                            ? (this.game.cache.reloadSound(this.key), (this.pendingPlayback = !0))
                            : this._sound && (this.game.device.wechatMinigame || this.game.device.cocoonJS || 4 === this._sound.readyState)
                            ? (this.loop && (this._sound.loop = !0),
                              !this.loop && "" === a && this.game.device.wechatMinigame && this._sound.addEventListener("ended", this.onEndedHandler.bind(this)),
                              this._sound.play(),
                              (this.totalDuration = this._sound.duration),
                              0 === this.duration && ((this.duration = this.totalDuration), (this.durationMS = 1e3 * this.totalDuration)),
                              (this._sound.currentTime = this.position),
                              (this._sound.muted = this._muted),
                              this._muted || this.game.sound.mute ? (this._sound.volume = 0) : (this._sound.volume = this._volume),
                              (this.isPlaying = !0),
                              (this.startTime = this.game.time.time),
                              (this.currentTime = 0),
                              (this.stopTime = this.startTime + this.durationMS),
                              this.onPlay.dispatch(this))
                            : (this.pendingPlayback = !0),
                        this
                    );
                },
                restart: function (a, b, c, d) {
                    (a = a || ""), (b = b || 0), (c = c || 1), void 0 === d && (d = !1), this.play(a, b, c, d, !0);
                },
                pause: function () {
                    this.isPlaying &&
                        this._sound &&
                        ((this.paused = !0), (this.pausedPosition = this.currentTime), (this.pausedTime = this.game.time.time), (this._tempPause = this._sound.currentTime), this.onPause.dispatch(this), this.stop());
                },
                resume: function () {
                    if (this.paused && this._sound) {
                        if (this.usingWebAudio) {
                            var a = Math.max(0, this.position + this.pausedPosition / 1e3);
                            (this._sound = this.context.createBufferSource()),
                                (this._sound.buffer = this._buffer),
                                this.externalNode ? this._sound.connect(this.externalNode) : this._sound.connect(this.gainNode),
                                this.loop && (this._sound.loop = !0),
                                this.loop || "" !== this.currentMarker || (this._sound.onended = this.onEndedHandler.bind(this));
                            var b = this.duration - this.pausedPosition / 1e3;
                            void 0 === this._sound.start
                                ? this._sound.noteGrainOn(0, a, b)
                                : this.loop && this.game.device.chrome
                                ? 42 === this.game.device.chromeVersion
                                    ? this._sound.start(0)
                                    : this._sound.start(0, a)
                                : this._sound.start(0, a, b);
                        } else (this._sound.currentTime = this._tempPause), this._sound.play();
                        (this.isPlaying = !0), (this.paused = !1), (this.startTime += this.game.time.time - this.pausedTime), this.onResume.dispatch(this);
                    }
                },
                stop: function () {
                    if (this.isPlaying && this._sound)
                        if (this.usingWebAudio) {
                            if (void 0 === this._sound.stop) this._sound.noteOff(0);
                            else
                                try {
                                    this._sound.stop(0);
                                } catch (a) {}
                            this.externalNode ? this._sound.disconnect(this.externalNode) : this.gainNode && this._sound.disconnect(this.gainNode);
                        } else this.usingAudioTag && (this._sound.pause(), (this._sound.currentTime = 0));
                    if (((this.pendingPlayback = !1), (this.isPlaying = !1), !this.paused)) {
                        var a = this.currentMarker;
                        "" !== this.currentMarker && this.onMarkerComplete.dispatch(this.currentMarker, this), (this.currentMarker = ""), null !== this.fadeTween && this.fadeTween.stop(), this.onStop.dispatch(this, a);
                    }
                },
                fadeIn: function (a, b, c) {
                    void 0 === b && (b = !1), void 0 === c && (c = this.currentMarker), this.paused || (this.play(c, 0, 0, b), this.fadeTo(a, 1));
                },
                fadeOut: function (a) {
                    this.fadeTo(a, 0);
                },
                fadeTo: function (a, b) {
                    if (this.isPlaying && !this.paused && b !== this.volume) {
                        if ((void 0 === a && (a = 1e3), void 0 === b)) return;
                        (this.fadeTween = this.game.add.tween(this).to({ volume: b }, a, c.Easing.Linear.None, !0)), this.fadeTween.onComplete.add(this.fadeComplete, this);
                    }
                },
                fadeComplete: function () {
                    this.onFadeComplete.dispatch(this, this.volume), 0 === this.volume && this.stop();
                },
                updateGlobalVolume: function (a) {
                    this.usingAudioTag && this._sound && (this._sound.volume = a * this._volume);
                },
                destroy: function (a) {
                    void 0 === a && (a = !0),
                        this.stop(),
                        a
                            ? this.game.sound.remove(this)
                            : ((this.markers = {}),
                              (this.context = null),
                              (this._buffer = null),
                              (this.externalNode = null),
                              this.onDecoded.dispose(),
                              this.onPlay.dispose(),
                              this.onPause.dispose(),
                              this.onResume.dispose(),
                              this.onLoop.dispose(),
                              this.onStop.dispose(),
                              this.onMute.dispose(),
                              this.onMarkerComplete.dispose());
                },
            }),
            (c.Sound.prototype.constructor = c.Sound),
            Object.defineProperty(c.Sound.prototype, "isDecoding", {
                get: function () {
                    return this.game.cache.getSound(this.key).isDecoding;
                },
            }),
            Object.defineProperty(c.Sound.prototype, "isDecoded", {
                get: function () {
                    return this.game.cache.isSoundDecoded(this.key);
                },
            }),
            Object.defineProperty(c.Sound.prototype, "mute", {
                get: function () {
                    return this._muted || this.game.sound.mute;
                },
                set: function (a) {
                    (a = a || !1) !== this._muted &&
                        (a
                            ? ((this._muted = !0),
                              (this._muteVolume = this._tempVolume),
                              this.game.device.wechatMinigame ? this._sound.pause() : this.usingWebAudio ? (this.gainNode.gain.value = 0) : this.usingAudioTag && this._sound && (this._sound.volume = 0))
                            : ((this._muted = !1),
                              this.game.device.wechatMinigame && this.isPlaying
                                  ? this._sound.play()
                                  : this.usingWebAudio
                                  ? (this.gainNode.gain.value = this._muteVolume)
                                  : this.usingAudioTag && this._sound && (this._sound.volume = this._muteVolume)),
                        this.onMute.dispatch(this));
                },
            }),
            Object.defineProperty(c.Sound.prototype, "volume", {
                get: function () {
                    return this._volume;
                },
                set: function (a) {
                    this.game.device.firefox && this.usingAudioTag && (a = this.game.math.clamp(a, 0, 1)),
                        this._muted ? (this._muteVolume = a) : ((this._tempVolume = a), (this._volume = a), this.usingWebAudio ? (this.gainNode.gain.value = a) : this.usingAudioTag && this._sound && (this._sound.volume = a));
                },
            }),
            (c.SoundManager = function (a) {
                (this.game = a),
                    (this.onSoundDecode = new c.Signal()),
                    (this.onVolumeChange = new c.Signal()),
                    (this.onMute = new c.Signal()),
                    (this.onUnMute = new c.Signal()),
                    (this.context = null),
                    (this.usingWebAudio = !1),
                    (this.usingAudioTag = !1),
                    (this.noAudio = !1),
                    (this.connectToMaster = !0),
                    (this.touchLocked = !1),
                    (this.channels = 32),
                    (this.muteOnPause = !0),
                    (this._codeMuted = !1),
                    (this._muted = !1),
                    (this._unlockSource = null),
                    (this._volume = 1),
                    (this._sounds = []),
                    (this._watchList = new c.ArraySet()),
                    (this._watching = !1),
                    (this._watchCallback = null),
                    (this._watchContext = null);
            }),
            (c.SoundManager.prototype = {
                boot: function () {
                    if ((this.game.device.iOS && !1 === this.game.device.webAudio && (this.channels = 1), window.PhaserGlobal)) {
                        if (!0 === window.PhaserGlobal.disableAudio) return (this.noAudio = !0), void (this.touchLocked = !1);
                        if (!0 === window.PhaserGlobal.disableWebAudio) return (this.usingAudioTag = !0), void (this.touchLocked = !1);
                    }
                    if (window.PhaserGlobal && window.PhaserGlobal.audioContext) this.context = window.PhaserGlobal.audioContext;
                    else if (window.AudioContext)
                        try {
                            this.context = new window.AudioContext();
                        } catch (a) {
                            (this.context = null), (this.usingWebAudio = !1), (this.touchLocked = !1);
                        }
                    else if (window.webkitAudioContext)
                        try {
                            this.context = new window.webkitAudioContext();
                        } catch (a) {
                            (this.context = null), (this.usingWebAudio = !1), (this.touchLocked = !1);
                        }
                    if (null === this.context) {
                        if (void 0 === window.Audio) return void (this.noAudio = !0);
                        this.usingAudioTag = !0;
                    } else
                        (this.usingWebAudio = !0),
                            void 0 === this.context.createGain ? (this.masterGain = this.context.createGainNode()) : (this.masterGain = this.context.createGain()),
                            (this.masterGain.gain.value = 1),
                            this.masterGain.connect(this.context.destination);
                    this.noAudio || (!this.game.device.cocoonJS && (this.game.device.chrome || this.game.device.iOS || (window.PhaserGlobal && window.PhaserGlobal.fakeiOSTouchLock)) && this.setTouchLock());
                },
                setTouchLock: function () {
                    this.noAudio ||
                        (window.PhaserGlobal && !0 === window.PhaserGlobal.disableAudio) ||
                        (8 < this.game.device.iOSVersion || 55 <= this.game.device.chromeVersion ? this.game.input.touch.addTouchLockCallback(this.unlock, this, !0) : this.game.input.touch.addTouchLockCallback(this.unlock, this),
                        (this.touchLocked = !0));
                },
                unlock: function () {
                    if (this.noAudio || !this.touchLocked || null !== this._unlockSource) return !0;
                    if (this.usingAudioTag) (this.touchLocked = !1), (this._unlockSource = null);
                    else if (this.usingWebAudio) {
                        var a = this.context.createBuffer(1, 1, 22050);
                        (this._unlockSource = this.context.createBufferSource()),
                            (this._unlockSource.buffer = a),
                            this._unlockSource.connect(this.context.destination),
                            void 0 === this._unlockSource.start ? this._unlockSource.noteOn(0) : this._unlockSource.start(0),
                            "suspended" === this._unlockSource.context.state && this._unlockSource.context.resume();
                    }
                    return !0;
                },
                stopAll: function () {
                    if (!this.noAudio) for (var a = 0; a < this._sounds.length; a++) this._sounds[a] && this._sounds[a].stop();
                },
                pauseAll: function () {
                    if (!this.noAudio) for (var a = 0; a < this._sounds.length; a++) this._sounds[a] && this._sounds[a].pause();
                },
                resumeAll: function () {
                    if (!this.noAudio) for (var a = 0; a < this._sounds.length; a++) this._sounds[a] && this._sounds[a].resume();
                },
                decode: function (a, b) {
                    b = b || null;
                    var c = this.game.cache.getSoundData(a);
                    if (c && !1 === this.game.cache.isSoundDecoded(a)) {
                        this.game.cache.updateSound(a, "isDecoding", !0);
                        var d = this;
                        try {
                            this.context.decodeAudioData(c, function (c) {
                                c && (d.game.cache.decodedSound(a, c), d.onSoundDecode.dispatch(a, b));
                            });
                        } catch (a) {}
                    }
                },
                setDecodedCallback: function (a, b, d) {
                    "string" == typeof a && (a = [a]), this._watchList.reset();
                    for (var e = 0; e < a.length; e++) a[e] instanceof c.Sound ? this.game.cache.isSoundDecoded(a[e].key) || this._watchList.add(a[e].key) : this.game.cache.isSoundDecoded(a[e]) || this._watchList.add(a[e]);
                    0 === this._watchList.total ? ((this._watching = !1), b.call(d)) : ((this._watching = !0), (this._watchCallback = b), (this._watchContext = d));
                },
                update: function () {
                    if (!this.noAudio) {
                        !this.touchLocked ||
                            null === this._unlockSource ||
                            (this._unlockSource.playbackState !== this._unlockSource.PLAYING_STATE && this._unlockSource.playbackState !== this._unlockSource.FINISHED_STATE) ||
                            ((this.touchLocked = !1), (this._unlockSource = null));
                        for (var a = 0; a < this._sounds.length; a++) this._sounds[a].update();
                        if (this._watching) {
                            for (var b = this._watchList.first; b; ) this.game.cache.isSoundDecoded(b) && this._watchList.remove(b), (b = this._watchList.next);
                            0 === this._watchList.total && ((this._watching = !1), this._watchCallback.call(this._watchContext));
                        }
                    }
                },
                add: function (a, b, d, e) {
                    void 0 === b && (b = 1), void 0 === d && (d = !1), void 0 === e && (e = this.connectToMaster);
                    var f = new c.Sound(this.game, a, b, d, e);
                    return this._sounds.push(f), f;
                },
                addSprite: function (a) {
                    return new c.AudioSprite(this.game, a);
                },
                remove: function (a) {
                    for (var b = this._sounds.length; b--; ) if (this._sounds[b] === a) return this._sounds[b].destroy(!1), this._sounds.splice(b, 1), !0;
                    return !1;
                },
                removeByKey: function (a) {
                    for (var b = this._sounds.length, c = 0; b--; ) this._sounds[b].key === a && (this._sounds[b].destroy(!1), this._sounds.splice(b, 1), c++);
                    return c;
                },
                play: function (a, b, c) {
                    if (!this.noAudio) {
                        var d = this.add(a, b, c);
                        return d.play(), d;
                    }
                },
                setMute: function () {
                    if (!this._muted) {
                        (this._muted = !0), this.usingWebAudio && ((this._muteVolume = this.masterGain.gain.value), (this.masterGain.gain.value = 0));
                        for (var a = 0; a < this._sounds.length; a++) this._sounds[a].usingAudioTag && (this._sounds[a].mute = !0);
                        this.onMute.dispatch();
                    }
                },
                unsetMute: function () {
                    if (this._muted && !this._codeMuted) {
                        (this._muted = !1), this.usingWebAudio && (this.masterGain.gain.value = this._muteVolume);
                        for (var a = 0; a < this._sounds.length; a++) this._sounds[a].usingAudioTag && (this._sounds[a].mute = !1);
                        this.onUnMute.dispatch();
                    }
                },
                destroy: function () {
                    this.stopAll();
                    for (var a = 0; a < this._sounds.length; a++) this._sounds[a] && this._sounds[a].destroy();
                    (this._sounds = []), this.onSoundDecode.dispose(), this.context && (window.PhaserGlobal ? (window.PhaserGlobal.audioContext = this.context) : this.context.close && this.context.close());
                },
            }),
            (c.SoundManager.prototype.constructor = c.SoundManager),
            Object.defineProperty(c.SoundManager.prototype, "mute", {
                get: function () {
                    return this._muted;
                },
                set: function (a) {
                    if ((a = a || !1)) {
                        if (this._muted) return;
                        (this._codeMuted = !0), this.setMute();
                    } else {
                        if (!this._muted) return;
                        (this._codeMuted = !1), this.unsetMute();
                    }
                },
            }),
            Object.defineProperty(c.SoundManager.prototype, "volume", {
                get: function () {
                    return this._volume;
                },
                set: function (a) {
                    if ((a < 0 ? (a = 0) : 1 < a && (a = 1), this._volume !== a)) {
                        if (((this._volume = a), this.usingWebAudio)) this.masterGain.gain.value = a;
                        else for (var b = 0; b < this._sounds.length; b++) this._sounds[b].usingAudioTag && this._sounds[b].updateGlobalVolume(a);
                        this.onVolumeChange.dispatch(a);
                    }
                },
            }),
            (c.ScaleManager = function (a, b, d) {
                (this.game = a),
                    (this.dom = c.DOM),
                    (this.grid = null),
                    (this.width = 0),
                    (this.height = 0),
                    (this.minWidth = null),
                    (this.maxWidth = null),
                    (this.minHeight = null),
                    (this.maxHeight = null),
                    (this.offset = new c.Point()),
                    (this.forceLandscape = !1),
                    (this.forcePortrait = !1),
                    (this.incorrectOrientation = !1),
                    (this._pageAlignHorizontally = !1),
                    (this._pageAlignVertically = !1),
                    (this.onOrientationChange = new c.Signal()),
                    (this.enterIncorrectOrientation = new c.Signal()),
                    (this.leaveIncorrectOrientation = new c.Signal()),
                    (this.hasPhaserSetFullScreen = !1),
                    (this.fullScreenTarget = null),
                    (this._createdFullScreenTarget = null),
                    (this.onFullScreenInit = new c.Signal()),
                    (this.onFullScreenChange = new c.Signal()),
                    (this.onFullScreenError = new c.Signal()),
                    (this.screenOrientation = this.dom.getScreenOrientation()),
                    (this.scaleFactor = new c.Point(1, 1)),
                    (this.scaleFactorInversed = new c.Point(1, 1)),
                    (this.margin = { left: 0, top: 0, right: 0, bottom: 0, x: 0, y: 0 }),
                    (this.bounds = new c.Rectangle()),
                    (this.aspectRatio = 0),
                    (this.sourceAspectRatio = 0),
                    (this.event = null),
                    (this.windowConstraints = { right: "layout", bottom: "" }),
                    (this.compatibility = { supportsFullScreen: !1, orientationFallback: null, noMargins: !1, scrollTo: null, forceMinimumDocumentHeight: !1, canExpandParent: !0, clickTrampoline: "" }),
                    (this._scaleMode = c.ScaleManager.NO_SCALE),
                    (this._fullScreenScaleMode = c.ScaleManager.NO_SCALE),
                    (this.parentIsWindow = !1),
                    (this.parentNode = null),
                    (this.parentScaleFactor = new c.Point(1, 1)),
                    (this.trackParentInterval = 2e3),
                    (this.onSizeChange = new c.Signal()),
                    (this.onResize = null),
                    (this.onResizeContext = null),
                    (this._pendingScaleMode = null),
                    (this._fullScreenRestore = null),
                    (this._gameSize = new c.Rectangle()),
                    (this._userScaleFactor = new c.Point(1, 1)),
                    (this._userScaleTrim = new c.Point(0, 0)),
                    (this._lastUpdate = 0),
                    (this._updateThrottle = 0),
                    (this._updateThrottleReset = 100),
                    (this._parentBounds = new c.Rectangle()),
                    (this._tempBounds = new c.Rectangle()),
                    (this._lastReportedCanvasSize = new c.Rectangle()),
                    (this._lastReportedGameSize = new c.Rectangle()),
                    (this._booted = !1),
                    a.config && this.parseConfig(a.config),
                    this.setupScale(b, d);
            }),
            (c.ScaleManager.EXACT_FIT = 0),
            (c.ScaleManager.NO_SCALE = 1),
            (c.ScaleManager.SHOW_ALL = 2),
            (c.ScaleManager.RESIZE = 3),
            (c.ScaleManager.USER_SCALE = 4),
            (c.ScaleManager.prototype = {
                boot: function () {
                    var a = this.compatibility;
                    (a.supportsFullScreen = this.game.device.fullscreen && !this.game.device.cocoonJS),
                        this.game.device.iPad || this.game.device.webApp || this.game.device.desktop || (this.game.device.android && !this.game.device.chrome ? (a.scrollTo = new c.Point(0, 1)) : (a.scrollTo = new c.Point(0, 0))),
                        this.game.device.desktop ? ((a.orientationFallback = "screen"), (a.clickTrampoline = "when-not-mouse")) : ((a.orientationFallback = ""), (a.clickTrampoline = ""));
                    var b = this;
                    (this._orientationChange = function (a) {
                        return b.orientationChange(a);
                    }),
                        (this._windowResize = function (a) {
                            return b.windowResize(a);
                        }),
                        window.addEventListener("orientationchange", this._orientationChange, !1),
                        window.addEventListener("resize", this._windowResize, !1),
                        this.compatibility.supportsFullScreen &&
                            ((this._fullScreenChange = function (a) {
                                return b.fullScreenChange(a);
                            }),
                            (this._fullScreenError = function (a) {
                                return b.fullScreenError(a);
                            }),
                            document.addEventListener("webkitfullscreenchange", this._fullScreenChange, !1),
                            document.addEventListener("mozfullscreenchange", this._fullScreenChange, !1),
                            document.addEventListener("MSFullscreenChange", this._fullScreenChange, !1),
                            document.addEventListener("fullscreenchange", this._fullScreenChange, !1),
                            document.addEventListener("webkitfullscreenerror", this._fullScreenError, !1),
                            document.addEventListener("mozfullscreenerror", this._fullScreenError, !1),
                            document.addEventListener("MSFullscreenError", this._fullScreenError, !1),
                            document.addEventListener("fullscreenerror", this._fullScreenError, !1)),
                        this.game.onResume.add(this._gameResumed, this),
                        this.dom.getOffset(this.game.canvas, this.offset),
                        this.bounds.setTo(this.offset.x, this.offset.y, this.width, this.height),
                        this.setGameSize(this.game.width, this.game.height),
                        (this.screenOrientation = this.dom.getScreenOrientation(this.compatibility.orientationFallback)),
                        c.FlexGrid && (this.grid = new c.FlexGrid(this, this.width, this.height)),
                        (this._booted = !0),
                        null !== this._pendingScaleMode && ((this.scaleMode = this._pendingScaleMode), (this._pendingScaleMode = null));
                },
                parseConfig: function (a) {
                    void 0 !== a.scaleMode && (this._booted ? (this.scaleMode = a.scaleMode) : (this._pendingScaleMode = a.scaleMode)),
                        void 0 !== a.fullScreenScaleMode && (this.fullScreenScaleMode = a.fullScreenScaleMode),
                        a.fullScreenTarget && (this.fullScreenTarget = a.fullScreenTarget);
                },
                setupScale: function (a, b) {
                    var d,
                        e = new c.Rectangle();
                    "" !== this.game.parent && ("string" == typeof this.game.parent ? (d = document.getElementById(this.game.parent)) : this.game.parent && 1 === this.game.parent.nodeType && (d = this.game.parent)),
                        d
                            ? ((this.parentNode = d),
                              (this.parentIsWindow = !1),
                              this.getParentBounds(this._parentBounds),
                              (e.width = this._parentBounds.width),
                              (e.height = this._parentBounds.height),
                              this.offset.set(this._parentBounds.x, this._parentBounds.y))
                            : ((this.parentNode = null), (this.parentIsWindow = !0), (e.width = this.dom.visualBounds.width), (e.height = this.dom.visualBounds.height), this.offset.set(0, 0));
                    var f = 0,
                        g = 0;
                    (f = "number" == typeof a ? a : ((this.parentScaleFactor.x = parseInt(a, 10) / 100), e.width * this.parentScaleFactor.x)),
                        (g = "number" == typeof b ? b : ((this.parentScaleFactor.y = parseInt(b, 10) / 100), e.height * this.parentScaleFactor.y)),
                        (f = Math.floor(f)),
                        (g = Math.floor(g)),
                        this._gameSize.setTo(0, 0, f, g),
                        this.updateDimensions(f, g, !1);
                },
                _gameResumed: function () {
                    this.queueUpdate(!0);
                },
                setGameSize: function (a, b) {
                    this._gameSize.setTo(0, 0, a, b), this.currentScaleMode !== c.ScaleManager.RESIZE && this.updateDimensions(a, b, !0), this.queueUpdate(!0);
                },
                setUserScale: function (a, b, c, d) {
                    this._userScaleFactor.setTo(a, b), this._userScaleTrim.setTo(0 | c, 0 | d), this.queueUpdate(!0);
                },
                setResizeCallback: function (a, b) {
                    (this.onResize = a), (this.onResizeContext = b);
                },
                signalSizeChange: function () {
                    if (!c.Rectangle.sameDimensions(this, this._lastReportedCanvasSize) || !c.Rectangle.sameDimensions(this.game, this._lastReportedGameSize)) {
                        var a = this.width,
                            b = this.height;
                        this._lastReportedCanvasSize.setTo(0, 0, a, b),
                            this._lastReportedGameSize.setTo(0, 0, this.game.width, this.game.height),
                            this.grid && this.grid.onResize(a, b),
                            this.onSizeChange.dispatch(this, a, b),
                            this.currentScaleMode === c.ScaleManager.RESIZE && (this.game.state.resize(a, b), this.game.load.resize(a, b));
                    }
                },
                setMinMax: function (a, b, c, d) {
                    (this.minWidth = a), (this.minHeight = b), void 0 !== c && (this.maxWidth = c), void 0 !== d && (this.maxHeight = d);
                },
                preUpdate: function () {
                    if (!(this.game.time.time < this._lastUpdate + this._updateThrottle)) {
                        var a = this._updateThrottle;
                        (this._updateThrottleReset = 400 <= a ? 0 : 100), this.dom.getOffset(this.game.canvas, this.offset);
                        var b = this._parentBounds.width,
                            d = this._parentBounds.height,
                            e = this.getParentBounds(this._parentBounds),
                            f = e.width !== b || e.height !== d,
                            g = this.updateOrientationState();
                        (f || g) && (this.onResize && this.onResize.call(this.onResizeContext, this, e), this.updateLayout(), this.signalSizeChange());
                        var h = 2 * this._updateThrottle;
                        this._updateThrottle < a && (h = Math.min(a, this._updateThrottleReset)), (this._updateThrottle = c.Math.clamp(h, 25, this.trackParentInterval)), (this._lastUpdate = this.game.time.time);
                    }
                },
                pauseUpdate: function () {
                    this.preUpdate(), (this._updateThrottle = this.trackParentInterval);
                },
                updateDimensions: function (a, b, c) {
                    (this.width = a * this.parentScaleFactor.x),
                        (this.height = b * this.parentScaleFactor.y),
                        (this.game.width = this.width),
                        (this.game.height = this.height),
                        (this.sourceAspectRatio = this.width / this.height),
                        this.updateScalingAndBounds(),
                        c && (this.game.renderer.resize(this.width, this.height), this.game.camera.setSize(this.width, this.height), this.game.world.resize(this.width, this.height));
                },
                updateScalingAndBounds: function () {
                    (this.scaleFactor.x = this.game.width / this.width),
                        (this.scaleFactor.y = this.game.height / this.height),
                        (this.scaleFactorInversed.x = this.width / this.game.width),
                        (this.scaleFactorInversed.y = this.height / this.game.height),
                        (this.aspectRatio = this.width / this.height),
                        this.game.canvas && this.dom.getOffset(this.game.canvas, this.offset),
                        this.bounds.setTo(this.offset.x, this.offset.y, this.width, this.height),
                        this.game.input && this.game.input.scale && this.game.input.scale.setTo(this.scaleFactor.x, this.scaleFactor.y);
                },
                forceOrientation: function (a, b) {
                    void 0 === b && (b = !1), (this.forceLandscape = a), (this.forcePortrait = b), this.queueUpdate(!0);
                },
                classifyOrientation: function (a) {
                    return "portrait-primary" === a || "portrait-secondary" === a ? "portrait" : "landscape-primary" === a || "landscape-secondary" === a ? "landscape" : null;
                },
                updateOrientationState: function () {
                    var a = this.screenOrientation,
                        b = this.incorrectOrientation;
                    (this.screenOrientation = this.dom.getScreenOrientation(this.compatibility.orientationFallback)), (this.incorrectOrientation = (this.forceLandscape && !this.isLandscape) || (this.forcePortrait && !this.isPortrait));
                    var c = a !== this.screenOrientation,
                        d = b !== this.incorrectOrientation;
                    return d && (this.incorrectOrientation ? this.enterIncorrectOrientation.dispatch() : this.leaveIncorrectOrientation.dispatch()), (c || d) && this.onOrientationChange.dispatch(this, a, b), c || d;
                },
                orientationChange: function (a) {
                    (this.event = a), this.queueUpdate(!0);
                },
                windowResize: function (a) {
                    (this.event = a), this.queueUpdate(!0);
                },
                scrollTop: function () {
                    var a = this.compatibility.scrollTo;
                    a && window.scrollTo(a.x, a.y);
                },
                refresh: function () {
                    this.scrollTop(), this.queueUpdate(!0);
                },
                updateLayout: function () {
                    var a = this.currentScaleMode;
                    if (a !== c.ScaleManager.RESIZE) {
                        if (
                            (this.scrollTop(),
                            this.compatibility.forceMinimumDocumentHeight && (document.documentElement.style.minHeight = window.innerHeight + "px"),
                            this.incorrectOrientation
                                ? this.setMaximum()
                                : a === c.ScaleManager.EXACT_FIT
                                ? this.setExactFit()
                                : a === c.ScaleManager.SHOW_ALL
                                ? (this.setShowAll(!0), this.resetCanvas(), this.setShowAll())
                                : a === c.ScaleManager.NO_SCALE
                                ? ((this.width = this.game.width), (this.height = this.game.height))
                                : a === c.ScaleManager.USER_SCALE && ((this.width = this.game.width * this._userScaleFactor.x - this._userScaleTrim.x), (this.height = this.game.height * this._userScaleFactor.y - this._userScaleTrim.y)),
                            !this.compatibility.canExpandParent && (a === c.ScaleManager.SHOW_ALL || a === c.ScaleManager.USER_SCALE))
                        ) {
                            var b = this.getParentBounds(this._tempBounds);
                            (this.width = Math.min(this.width, b.width)), (this.height = Math.min(this.height, b.height));
                        }
                        (this.width = 0 | this.width), (this.height = 0 | this.height), this.reflowCanvas();
                    } else this.reflowGame();
                },
                getParentBounds: function (a) {
                    var b = a || new c.Rectangle(),
                        d = this.boundingParent,
                        e = this.dom.visualBounds,
                        f = this.dom.layoutBounds;
                    if (d) {
                        var g = d.getBoundingClientRect(),
                            h = d.offsetParent ? d.offsetParent.getBoundingClientRect() : d.getBoundingClientRect();
                        b.setTo(g.left - h.left, g.top - h.top, g.width, g.height);
                        var i = this.windowConstraints;
                        if (i.right) {
                            var j = "layout" === i.right ? f : e;
                            b.right = Math.min(b.right, j.width);
                        }
                        if (i.bottom) {
                            j = "layout" === i.bottom ? f : e;
                            b.bottom = Math.min(b.bottom, j.height);
                        }
                    } else b.setTo(0, 0, e.width, e.height);
                    return b.setTo(Math.round(b.x), Math.round(b.y), Math.round(b.width), Math.round(b.height)), b;
                },
                alignCanvas: function (a, b) {
                    var c = this.getParentBounds(this._tempBounds),
                        d = this.game.canvas,
                        e = this.margin;
                    if (a) {
                        e.left = e.right = 0;
                        var f = d.getBoundingClientRect();
                        if (this.width < c.width && !this.incorrectOrientation) {
                            var g = f.left - c.x,
                                h = c.width / 2 - this.width / 2,
                                i = (h = Math.max(h, 0)) - g;
                            e.left = Math.round(i);
                        }
                        (d.style.marginLeft = e.left + "px"), 0 !== e.left && ((e.right = -(c.width - f.width - e.left)), (d.style.marginRight = e.right + "px"));
                    }
                    if (b) {
                        e.top = e.bottom = 0;
                        f = d.getBoundingClientRect();
                        if (this.height < c.height && !this.incorrectOrientation) {
                            (g = f.top - c.y), (h = c.height / 2 - this.height / 2), (i = (h = Math.max(h, 0)) - g);
                            e.top = Math.round(i);
                        }
                        (d.style.marginTop = e.top + "px"), 0 !== e.top && ((e.bottom = -(c.height - f.height - e.top)), (d.style.marginBottom = e.bottom + "px"));
                    }
                    (e.x = e.left), (e.y = e.top);
                },
                reflowGame: function () {
                    this.resetCanvas("", "");
                    var a = this.getParentBounds(this._tempBounds);
                    this.updateDimensions(a.width, a.height, !0);
                },
                reflowCanvas: function () {
                    this.incorrectOrientation || ((this.width = c.Math.clamp(this.width, this.minWidth || 0, this.maxWidth || this.width)), (this.height = c.Math.clamp(this.height, this.minHeight || 0, this.maxHeight || this.height))),
                        this.resetCanvas(),
                        this.compatibility.noMargins || (this.isFullScreen && this._createdFullScreenTarget ? this.alignCanvas(!0, !0) : this.alignCanvas(this.pageAlignHorizontally, this.pageAlignVertically)),
                        this.updateScalingAndBounds();
                },
                resetCanvas: function (a, b) {
                    void 0 === a && (a = this.width + "px"), void 0 === b && (b = this.height + "px");
                    var c = this.game.canvas;
                    this.compatibility.noMargins || ((c.style.marginLeft = ""), (c.style.marginTop = ""), (c.style.marginRight = ""), (c.style.marginBottom = "")), (c.style.width = a), (c.style.height = b);
                },
                queueUpdate: function (a) {
                    a && ((this._parentBounds.width = 0), (this._parentBounds.height = 0)), (this._updateThrottle = this._updateThrottleReset);
                },
                reset: function (a) {
                    a && this.grid && this.grid.reset();
                },
                setMaximum: function () {
                    (this.width = this.dom.visualBounds.width), (this.height = this.dom.visualBounds.height);
                },
                setShowAll: function (a) {
                    var b,
                        c = this.getParentBounds(this._tempBounds),
                        d = c.width,
                        e = c.height;
                    (b = a ? Math.max(e / this.game.height, d / this.game.width) : Math.min(e / this.game.height, d / this.game.width)), (this.width = Math.round(this.game.width * b)), (this.height = Math.round(this.game.height * b));
                },
                setExactFit: function () {
                    var a = this.getParentBounds(this._tempBounds);
                    (this.width = a.width), (this.height = a.height), this.isFullScreen || (this.maxWidth && (this.width = Math.min(this.width, this.maxWidth)), this.maxHeight && (this.height = Math.min(this.height, this.maxHeight)));
                },
                createFullScreenTarget: function () {
                    var a = document.createElement("div");
                    return (a.style.margin = "0"), (a.style.padding = "0"), (a.style.background = "#000"), a;
                },
                startFullScreen: function (a, b) {
                    if (this.isFullScreen) return !1;
                    if (this.compatibility.supportsFullScreen) {
                        if ("when-not-mouse" === this.compatibility.clickTrampoline) {
                            var e = this.game.input;
                            if (e.activePointer && e.activePointer !== e.mousePointer && (b || !1 !== b)) return void e.activePointer.addClickTrampoline("startFullScreen", this.startFullScreen, this, [a, !1]);
                        }
                        void 0 !== a && this.game.renderType === c.CANVAS && (this.game.stage.smoothed = a);
                        var f = this.fullScreenTarget;
                        f || (this.cleanupCreatedTarget(), (this._createdFullScreenTarget = this.createFullScreenTarget()), (f = this._createdFullScreenTarget));
                        var g = { targetElement: f };
                        if (((this.hasPhaserSetFullScreen = !0), this.onFullScreenInit.dispatch(this, g), this._createdFullScreenTarget)) {
                            var h = this.game.canvas;
                            h.parentNode.insertBefore(f, h), f.appendChild(h);
                        }
                        return this.game.device.fullscreenKeyboard ? f[this.game.device.requestFullscreen](Element.ALLOW_KEYBOARD_INPUT) : f[this.game.device.requestFullscreen](), !0;
                    }
                    var d = this;
                    setTimeout(function () {
                        d.fullScreenError();
                    }, 10);
                },
                stopFullScreen: function () {
                    return !(!this.isFullScreen || !this.compatibility.supportsFullScreen || ((this.hasPhaserSetFullScreen = !1), document[this.game.device.cancelFullscreen](), 0));
                },
                cleanupCreatedTarget: function () {
                    var a = this._createdFullScreenTarget;
                    if (a && a.parentNode) {
                        var b = a.parentNode;
                        b.insertBefore(this.game.canvas, a), b.removeChild(a);
                    }
                    this._createdFullScreenTarget = null;
                },
                prepScreenMode: function (a) {
                    var b = !!this._createdFullScreenTarget,
                        d = this._createdFullScreenTarget || this.fullScreenTarget;
                    a
                        ? (b || this.fullScreenScaleMode === c.ScaleManager.EXACT_FIT) &&
                          d !== this.game.canvas &&
                          ((this._fullScreenRestore = { targetWidth: d.style.width, targetHeight: d.style.height }), (d.style.width = "100%"), (d.style.height = "100%"))
                        : (this._fullScreenRestore && ((d.style.width = this._fullScreenRestore.targetWidth), (d.style.height = this._fullScreenRestore.targetHeight), (this._fullScreenRestore = null)),
                          this.updateDimensions(this._gameSize.width, this._gameSize.height, !0),
                          this.resetCanvas());
                },
                fullScreenChange: function (a) {
                    (this.event = a),
                        this.isFullScreen ? this.prepScreenMode(!0) : (this.prepScreenMode(!1), this.cleanupCreatedTarget()),
                        this.updateLayout(),
                        this.queueUpdate(!0),
                        this.onFullScreenChange.dispatch(this, this.width, this.height);
                },
                fullScreenError: function (a) {
                    (this.event = a), this.cleanupCreatedTarget(), this.onFullScreenError.dispatch(this);
                },
                scaleSprite: function (a, b, c, d) {
                    if ((void 0 === b && (b = this.width), void 0 === c && (c = this.height), void 0 === d && (d = !1), !a || !a.scale)) return a;
                    if (((a.scale.x = 1), (a.scale.y = 1), a.width <= 0 || a.height <= 0 || b <= 0 || c <= 0)) return a;
                    var e = b,
                        f = (a.height * b) / a.width,
                        g = (a.width * c) / a.height,
                        h = c,
                        i = b < g;
                    return (i = i ? d : !d) ? ((a.width = Math.floor(e)), (a.height = Math.floor(f))) : ((a.width = Math.floor(g)), (a.height = Math.floor(h))), a;
                },
                destroy: function () {
                    this.game.onResume.remove(this._gameResumed, this),
                        window.removeEventListener("orientationchange", this._orientationChange, !1),
                        window.removeEventListener("resize", this._windowResize, !1),
                        this.compatibility.supportsFullScreen &&
                            (document.removeEventListener("webkitfullscreenchange", this._fullScreenChange, !1),
                            document.removeEventListener("mozfullscreenchange", this._fullScreenChange, !1),
                            document.removeEventListener("MSFullscreenChange", this._fullScreenChange, !1),
                            document.removeEventListener("fullscreenchange", this._fullScreenChange, !1),
                            document.removeEventListener("webkitfullscreenerror", this._fullScreenError, !1),
                            document.removeEventListener("mozfullscreenerror", this._fullScreenError, !1),
                            document.removeEventListener("MSFullscreenError", this._fullScreenError, !1),
                            document.removeEventListener("fullscreenerror", this._fullScreenError, !1));
                },
            }),
            (c.ScaleManager.prototype.constructor = c.ScaleManager),
            Object.defineProperty(c.ScaleManager.prototype, "boundingParent", {
                get: function () {
                    return this.parentIsWindow || (this.isFullScreen && this.hasPhaserSetFullScreen && !this._createdFullScreenTarget) ? null : (this.game.canvas && this.game.canvas.parentNode) || null;
                },
            }),
            Object.defineProperty(c.ScaleManager.prototype, "scaleMode", {
                get: function () {
                    return this._scaleMode;
                },
                set: function (a) {
                    return a !== this._scaleMode && (this.isFullScreen || (this.updateDimensions(this._gameSize.width, this._gameSize.height, !0), this.queueUpdate(!0)), (this._scaleMode = a)), this._scaleMode;
                },
            }),
            Object.defineProperty(c.ScaleManager.prototype, "fullScreenScaleMode", {
                get: function () {
                    return this._fullScreenScaleMode;
                },
                set: function (a) {
                    return (
                        a !== this._fullScreenScaleMode && (this.isFullScreen ? (this.prepScreenMode(!1), (this._fullScreenScaleMode = a), this.prepScreenMode(!0), this.queueUpdate(!0)) : (this._fullScreenScaleMode = a)),
                        this._fullScreenScaleMode
                    );
                },
            }),
            Object.defineProperty(c.ScaleManager.prototype, "currentScaleMode", {
                get: function () {
                    return this.isFullScreen ? this._fullScreenScaleMode : this._scaleMode;
                },
            }),
            Object.defineProperty(c.ScaleManager.prototype, "pageAlignHorizontally", {
                get: function () {
                    return this._pageAlignHorizontally;
                },
                set: function (a) {
                    a !== this._pageAlignHorizontally && ((this._pageAlignHorizontally = a), this.queueUpdate(!0));
                },
            }),
            Object.defineProperty(c.ScaleManager.prototype, "pageAlignVertically", {
                get: function () {
                    return this._pageAlignVertically;
                },
                set: function (a) {
                    a !== this._pageAlignVertically && ((this._pageAlignVertically = a), this.queueUpdate(!0));
                },
            }),
            Object.defineProperty(c.ScaleManager.prototype, "isFullScreen", {
                get: function () {
                    return !!(document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement);
                },
            }),
            Object.defineProperty(c.ScaleManager.prototype, "isPortrait", {
                get: function () {
                    return "portrait" === this.classifyOrientation(this.screenOrientation);
                },
            }),
            Object.defineProperty(c.ScaleManager.prototype, "isLandscape", {
                get: function () {
                    return "landscape" === this.classifyOrientation(this.screenOrientation);
                },
            }),
            Object.defineProperty(c.ScaleManager.prototype, "isGamePortrait", {
                get: function () {
                    return this.height > this.width;
                },
            }),
            Object.defineProperty(c.ScaleManager.prototype, "isGameLandscape", {
                get: function () {
                    return this.width > this.height;
                },
            }),
            (c.Utils.Debug = function (a) {
                (this.game = a),
                    (this.sprite = null),
                    (this.bmd = null),
                    (this.canvas = null),
                    (this.context = null),
                    (this.font = "14px Courier"),
                    (this.columnWidth = 100),
                    (this.lineHeight = 16),
                    (this.renderShadow = !0),
                    (this.currentX = 0),
                    (this.currentY = 0),
                    (this.currentAlpha = 1),
                    (this.dirty = !1);
            }),
            (c.Utils.Debug.prototype = {
                boot: function () {
                    this.game.renderType === c.CANVAS
                        ? (this.context = this.game.context)
                        : ((this.bmd = new c.BitmapData(this.game, "__DEBUG", this.game.width, this.game.height, !0)),
                          (this.sprite = this.game.make.image(0, 0, this.bmd)),
                          this.game.stage.addChild(this.sprite),
                          this.game.scale.onSizeChange.add(this.resize, this),
                          (this.canvas = PIXI.CanvasPool.create(this, this.game.width, this.game.height)),
                          (this.context = this.canvas.getContext("2d")));
                },
                resize: function (a, b, c) {
                    this.bmd.resize(b, c), (this.canvas.width = b), (this.canvas.height = c);
                },
                preUpdate: function () {
                    this.dirty && this.sprite && (this.bmd.clear(), this.bmd.draw(this.canvas, 0, 0), this.context.clearRect(0, 0, this.game.width, this.game.height), (this.dirty = !1));
                },
                reset: function () {
                    this.context && this.context.clearRect(0, 0, this.game.width, this.game.height), this.sprite && this.bmd.clear();
                },
                start: function (a, b, c, d) {
                    "number" != typeof a && (a = 0),
                        "number" != typeof b && (b = 0),
                        (c = c || "rgb(255,255,255)"),
                        void 0 === d && (d = 0),
                        (this.currentX = a),
                        (this.currentY = b),
                        (this.currentColor = c),
                        (this.columnWidth = d),
                        (this.dirty = !0),
                        this.context.save(),
                        this.context.setTransform(1, 0, 0, 1, 0, 0),
                        (this.context.strokeStyle = c),
                        (this.context.fillStyle = c),
                        (this.context.font = this.font),
                        (this.context.globalAlpha = this.currentAlpha);
                },
                stop: function () {
                    this.context.restore();
                },
                line: function () {
                    for (var a = this.currentX, b = 0; b < arguments.length; b++)
                        this.renderShadow && ((this.context.fillStyle = "rgb(0,0,0)"), this.context.fillText(arguments[b], a + 1, this.currentY + 1), (this.context.fillStyle = this.currentColor)),
                            this.context.fillText(arguments[b], a, this.currentY),
                            (a += this.columnWidth);
                    this.currentY += this.lineHeight;
                },
                soundInfo: function (a, b, c, d) {
                    this.start(b, c, d),
                        this.line("Sound: " + a.key + " Locked: " + a.game.sound.touchLocked),
                        this.line("Is Ready?: " + this.game.cache.isSoundReady(a.key) + " Pending Playback: " + a.pendingPlayback),
                        this.line("Decoded: " + a.isDecoded + " Decoding: " + a.isDecoding),
                        this.line("Total Duration: " + a.totalDuration + " Playing: " + a.isPlaying),
                        this.line("Time: " + a.currentTime),
                        this.line("Volume: " + a.volume + " Muted: " + a.mute),
                        this.line("WebAudio: " + a.usingWebAudio + " Audio: " + a.usingAudioTag),
                        "" !== a.currentMarker &&
                            (this.line("Marker: " + a.currentMarker + " Duration: " + a.duration + " (ms: " + a.durationMS + ")"),
                            this.line("Start: " + a.markers[a.currentMarker].start + " Stop: " + a.markers[a.currentMarker].stop),
                            this.line("Position: " + a.position)),
                        this.stop();
                },
                cameraInfo: function (a, b, c, d) {
                    this.start(b, c, d),
                        this.line("Camera (" + a.width + " x " + a.height + ")"),
                        this.line("X: " + a.x + " Y: " + a.y),
                        a.bounds && this.line("Bounds x: " + a.bounds.x + " Y: " + a.bounds.y + " w: " + a.bounds.width + " h: " + a.bounds.height),
                        this.line("View x: " + a.view.x + " Y: " + a.view.y + " w: " + a.view.width + " h: " + a.view.height),
                        this.line("Total in view: " + a.totalInView),
                        this.stop();
                },
                timer: function (a, b, c, d) {
                    this.start(b, c, d),
                        this.line("Timer (running: " + a.running + " expired: " + a.expired + ")"),
                        this.line("Next Tick: " + a.next + " Duration: " + a.duration),
                        this.line("Paused: " + a.paused + " Length: " + a.length),
                        this.stop();
                },
                pointer: function (a, b, c, d, e) {
                    null != a &&
                        (void 0 === b && (b = !1),
                        (c = c || "rgba(0,255,0,0.5)"),
                        (d = d || "rgba(255,0,0,0.5)"),
                        (!0 === b && !0 === a.isUp) ||
                            (this.start(a.x, a.y - 100, e),
                            this.context.beginPath(),
                            this.context.arc(a.x, a.y, a.circle.radius, 0, 2 * Math.PI),
                            a.active ? (this.context.fillStyle = c) : (this.context.fillStyle = d),
                            this.context.fill(),
                            this.context.closePath(),
                            this.context.beginPath(),
                            this.context.moveTo(a.positionDown.x, a.positionDown.y),
                            this.context.lineTo(a.position.x, a.position.y),
                            (this.context.lineWidth = 2),
                            this.context.stroke(),
                            this.context.closePath(),
                            this.line("ID: " + a.id + " Active: " + a.active),
                            this.line("World X: " + a.worldX + " World Y: " + a.worldY),
                            this.line("Screen X: " + a.x + " Screen Y: " + a.y + " In: " + a.withinGame),
                            this.line("Duration: " + a.duration + " ms"),
                            this.line("is Down: " + a.isDown + " is Up: " + a.isUp),
                            this.stop()));
                },
                spriteInputInfo: function (a, b, c, d) {
                    this.start(b, c, d),
                        this.line("Sprite Input: (" + a.width + " x " + a.height + ")"),
                        this.line("x: " + a.input.pointerX().toFixed(1) + " y: " + a.input.pointerY().toFixed(1)),
                        this.line("over: " + a.input.pointerOver() + " duration: " + a.input.overDuration().toFixed(0)),
                        this.line("down: " + a.input.pointerDown() + " duration: " + a.input.downDuration().toFixed(0)),
                        this.line("just over: " + a.input.justOver() + " just out: " + a.input.justOut()),
                        this.stop();
                },
                key: function (a, b, c, d) {
                    this.start(b, c, d, 150),
                        this.line("Key:", a.keyCode, "isDown:", a.isDown),
                        this.line("justDown:", a.justDown, "justUp:", a.justUp),
                        this.line("Time Down:", a.timeDown.toFixed(0), "duration:", a.duration.toFixed(0)),
                        this.stop();
                },
                inputInfo: function (a, b, c) {
                    this.start(a, b, c),
                        this.line("Input"),
                        this.line("X: " + this.game.input.x + " Y: " + this.game.input.y),
                        this.line("World X: " + this.game.input.worldX + " World Y: " + this.game.input.worldY),
                        this.line("Scale X: " + this.game.input.scale.x.toFixed(1) + " Scale Y: " + this.game.input.scale.x.toFixed(1)),
                        this.line("Screen X: " + this.game.input.activePointer.screenX + " Screen Y: " + this.game.input.activePointer.screenY),
                        this.stop();
                },
                spriteBounds: function (a, b, c) {
                    var d = a.getBounds();
                    (d.x += this.game.camera.x), (d.y += this.game.camera.y), this.rectangle(d, b, c);
                },
                ropeSegments: function (a, b, c) {
                    var d = this;
                    a.segments.forEach(function (a) {
                        d.rectangle(a, b, c);
                    }, this);
                },
                spriteInfo: function (a, b, c, d) {
                    this.start(b, c, d),
                        this.line("Sprite:  (" + a.width + " x " + a.height + ") anchor: " + a.anchor.x + " x " + a.anchor.y),
                        this.line("x: " + a.x.toFixed(1) + " y: " + a.y.toFixed(1)),
                        this.line("angle: " + a.angle.toFixed(1) + " rotation: " + a.rotation.toFixed(1)),
                        this.line("visible: " + a.visible + " in camera: " + a.inCamera),
                        this.line("bounds x: " + a._bounds.x.toFixed(1) + " y: " + a._bounds.y.toFixed(1) + " w: " + a._bounds.width.toFixed(1) + " h: " + a._bounds.height.toFixed(1)),
                        this.stop();
                },
                spriteCoords: function (a, b, c, d) {
                    this.start(b, c, d, 100),
                        a.name && this.line(a.name),
                        this.line("x:", a.x.toFixed(2), "y:", a.y.toFixed(2)),
                        this.line("pos x:", a.position.x.toFixed(2), "pos y:", a.position.y.toFixed(2)),
                        this.line("world x:", a.world.x.toFixed(2), "world y:", a.world.y.toFixed(2)),
                        this.stop();
                },
                lineInfo: function (a, b, c, d) {
                    this.start(b, c, d, 80),
                        this.line("start.x:", a.start.x.toFixed(2), "start.y:", a.start.y.toFixed(2)),
                        this.line("end.x:", a.end.x.toFixed(2), "end.y:", a.end.y.toFixed(2)),
                        this.line("length:", a.length.toFixed(2), "angle:", a.angle),
                        this.stop();
                },
                pixel: function (a, b, c, d) {
                    (d = d || 2), this.start(), (this.context.fillStyle = c), this.context.fillRect(a, b, d, d), this.stop();
                },
                geom: function (a, b, d, e) {
                    void 0 === d && (d = !0),
                        void 0 === e && (e = 0),
                        (b = b || "rgba(0,255,0,0.4)"),
                        this.start(),
                        (this.context.fillStyle = b),
                        (this.context.strokeStyle = b),
                        a instanceof c.Rectangle || 1 === e
                            ? d
                                ? this.context.fillRect(a.x - this.game.camera.x, a.y - this.game.camera.y, a.width, a.height)
                                : this.context.strokeRect(a.x - this.game.camera.x, a.y - this.game.camera.y, a.width, a.height)
                            : a instanceof c.Circle || 2 === e
                            ? (this.context.beginPath(), this.context.arc(a.x - this.game.camera.x, a.y - this.game.camera.y, a.radius, 0, 2 * Math.PI, !1), this.context.closePath(), d ? this.context.fill() : this.context.stroke())
                            : a instanceof c.Point || 3 === e
                            ? this.context.fillRect(a.x - this.game.camera.x, a.y - this.game.camera.y, 4, 4)
                            : (a instanceof c.Line || 4 === e) &&
                              ((this.context.lineWidth = 1),
                              this.context.beginPath(),
                              this.context.moveTo(a.start.x + 0.5 - this.game.camera.x, a.start.y + 0.5 - this.game.camera.y),
                              this.context.lineTo(a.end.x + 0.5 - this.game.camera.x, a.end.y + 0.5 - this.game.camera.y),
                              this.context.closePath(),
                              this.context.stroke()),
                        this.stop();
                },
                rectangle: function (a, b, c) {
                    void 0 === c && (c = !0),
                        (b = b || "rgba(0, 255, 0, 0.4)"),
                        this.start(),
                        c
                            ? ((this.context.fillStyle = b), this.context.fillRect(a.x - this.game.camera.x, a.y - this.game.camera.y, a.width, a.height))
                            : ((this.context.strokeStyle = b), this.context.strokeRect(a.x - this.game.camera.x, a.y - this.game.camera.y, a.width, a.height)),
                        this.stop();
                },
                text: function (a, b, c, d, e) {
                    (d = d || "rgb(255,255,255)"),
                        (e = e || "16px Courier"),
                        this.start(),
                        (this.context.font = e),
                        this.renderShadow && ((this.context.fillStyle = "rgb(0,0,0)"), this.context.fillText(a, b + 1, c + 1)),
                        (this.context.fillStyle = d),
                        this.context.fillText(a, b, c),
                        this.stop();
                },
                quadTree: function (a, b) {
                    (b = b || "rgba(255,0,0,0.3)"), this.start();
                    var c = a.bounds;
                    if (0 === a.nodes.length) {
                        (this.context.strokeStyle = b),
                            this.context.strokeRect(c.x, c.y, c.width, c.height),
                            this.text("size: " + a.objects.length, c.x + 4, c.y + 16, "rgb(0,200,0)", "12px Courier"),
                            (this.context.strokeStyle = "rgb(0,255,0)");
                        for (var d = 0; d < a.objects.length; d++) this.context.strokeRect(a.objects[d].x, a.objects[d].y, a.objects[d].width, a.objects[d].height);
                    } else for (d = 0; d < a.nodes.length; d++) this.quadTree(a.nodes[d]);
                    this.stop();
                },
                body: function (a, b, d) {
                    a.body &&
                        (this.start(),
                        a.body.type === c.Physics.ARCADE
                            ? c.Physics.Arcade.Body.render(this.context, a.body, b, d)
                            : a.body.type === c.Physics.NINJA
                            ? c.Physics.Ninja.Body.render(this.context, a.body, b, d)
                            : a.body.type === c.Physics.BOX2D && c.Physics.Box2D.renderBody(this.context, a.body, b),
                        this.stop());
                },
                bodyInfo: function (a, b, d, e) {
                    a.body &&
                        (this.start(b, d, e, 210),
                        a.body.type === c.Physics.ARCADE ? c.Physics.Arcade.Body.renderBodyInfo(this, a.body) : a.body.type === c.Physics.BOX2D && this.game.physics.box2d.renderBodyInfo(this, a.body),
                        this.stop());
                },
                box2dWorld: function () {
                    this.start(), this.context.translate(-this.game.camera.view.x, -this.game.camera.view.y, 0), this.game.physics.box2d.renderDebugDraw(this.context), this.stop();
                },
                box2dBody: function (a, b) {
                    this.start(), c.Physics.Box2D.renderBody(this.context, a, b), this.stop();
                },
                displayList: function (a) {
                    if ((void 0 === a && (a = this.game.world), a.hasOwnProperty("renderOrderID"), a.children && 0 < a.children.length)) for (var b = 0; b < a.children.length; b++) this.game.debug.displayList(a.children[b]);
                },
                destroy: function () {
                    PIXI.CanvasPool.remove(this);
                },
            }),
            (c.Utils.Debug.prototype.constructor = c.Utils.Debug),
            (c.DOM = {
                getOffset: function (a, b) {
                    b = b || new c.Point();
                    var d = a.getBoundingClientRect(),
                        e = c.DOM.scrollY,
                        f = c.DOM.scrollX,
                        g = document.documentElement.clientTop,
                        h = document.documentElement.clientLeft;
                    return (b.x = d.left + f - h), (b.y = d.top + e - g), b;
                },
                getBounds: function (a, b) {
                    return void 0 === b && (b = 0), !(!(a = a && !a.nodeType ? a[0] : a) || 1 !== a.nodeType) && this.calibrate(a.getBoundingClientRect(), b);
                },
                calibrate: function (a, b) {
                    b = +b || 0;
                    var c = { width: 0, height: 0, left: 0, right: 0, top: 0, bottom: 0 };
                    return (c.width = (c.right = a.right + b) - (c.left = a.left - b)), (c.height = (c.bottom = a.bottom + b) - (c.top = a.top - b)), c;
                },
                getAspectRatio: function (a) {
                    var b = (a = null == a ? this.visualBounds : 1 === a.nodeType ? this.getBounds(a) : a).width,
                        c = a.height;
                    return "function" == typeof b && (b = b.call(a)), "function" == typeof c && (c = c.call(a)), b / c;
                },
                inLayoutViewport: function (a, b) {
                    var c = this.getBounds(a, b);
                    return !!c && 0 <= c.bottom && 0 <= c.right && c.top <= this.layoutBounds.width && c.left <= this.layoutBounds.height;
                },
                getScreenOrientation: function (a) {
                    var b = window.screen,
                        c = b.orientation || b.mozOrientation || b.msOrientation;
                    if (c && "string" == typeof c.type) return c.type;
                    if ("string" == typeof c) return c;
                    var d = "portrait-primary",
                        e = "landscape-primary";
                    if ("screen" === a) return b.height > b.width ? d : e;
                    if ("viewport" === a) return this.visualBounds.height > this.visualBounds.width ? d : e;
                    if ("window.orientation" === a && "number" == typeof window.orientation) return 0 === window.orientation || 180 === window.orientation ? d : e;
                    if (window.matchMedia) {
                        if (window.matchMedia("(orientation: portrait)").matches) return d;
                        if (window.matchMedia("(orientation: landscape)").matches) return e;
                    }
                    return this.visualBounds.height > this.visualBounds.width ? d : e;
                },
                visualBounds: new c.Rectangle(),
                layoutBounds: new c.Rectangle(),
                documentBounds: new c.Rectangle(),
            }),
            c.Device.whenReady(
                function (a) {
                    var b =
                            window && "pageXOffset" in window
                                ? function () {
                                      return window.pageXOffset;
                                  }
                                : function () {
                                      return document.documentElement.scrollLeft;
                                  },
                        d =
                            window && "pageYOffset" in window
                                ? function () {
                                      return window.pageYOffset;
                                  }
                                : function () {
                                      return document.documentElement.scrollTop;
                                  };
                    if (
                        (Object.defineProperty(c.DOM, "scrollX", { get: b }),
                        Object.defineProperty(c.DOM, "scrollY", { get: d }),
                        Object.defineProperty(c.DOM.visualBounds, "x", { get: b }),
                        Object.defineProperty(c.DOM.visualBounds, "y", { get: d }),
                        Object.defineProperty(c.DOM.layoutBounds, "x", { value: 0 }),
                        Object.defineProperty(c.DOM.layoutBounds, "y", { value: 0 }),
                        a.desktop && document.documentElement.clientWidth <= window.innerWidth && document.documentElement.clientHeight <= window.innerHeight)
                    ) {
                        var e = function () {
                                return Math.max(window.innerWidth, document.documentElement.clientWidth);
                            },
                            f = function () {
                                return Math.max(window.innerHeight, document.documentElement.clientHeight);
                            };
                        Object.defineProperty(c.DOM.visualBounds, "width", { get: e }),
                            Object.defineProperty(c.DOM.visualBounds, "height", { get: f }),
                            Object.defineProperty(c.DOM.layoutBounds, "width", { get: e }),
                            Object.defineProperty(c.DOM.layoutBounds, "height", { get: f });
                    } else
                        Object.defineProperty(c.DOM.visualBounds, "width", {
                            get: function () {
                                return window.innerWidth;
                            },
                        }),
                            Object.defineProperty(c.DOM.visualBounds, "height", {
                                get: function () {
                                    return window.innerHeight;
                                },
                            }),
                            Object.defineProperty(c.DOM.layoutBounds, "width", {
                                get: function () {
                                    var a = document.documentElement.clientWidth,
                                        b = window.innerWidth;
                                    return a < b ? b : a;
                                },
                            }),
                            Object.defineProperty(c.DOM.layoutBounds, "height", {
                                get: function () {
                                    var a = document.documentElement.clientHeight,
                                        b = window.innerHeight;
                                    return a < b ? b : a;
                                },
                            });
                    Object.defineProperty(c.DOM.documentBounds, "x", { value: 0 }),
                        Object.defineProperty(c.DOM.documentBounds, "y", { value: 0 }),
                        Object.defineProperty(c.DOM.documentBounds, "width", {
                            get: function () {
                                var a = document.documentElement;
                                return Math.max(a.clientWidth, a.offsetWidth, a.scrollWidth);
                            },
                        }),
                        Object.defineProperty(c.DOM.documentBounds, "height", {
                            get: function () {
                                var a = document.documentElement;
                                return Math.max(a.clientHeight, a.offsetHeight, a.scrollHeight);
                            },
                        });
                },
                null,
                !0
            ),
            (c.ArraySet = function (a) {
                (this.position = 0), (this.list = a || []);
            }),
            (c.ArraySet.prototype = {
                add: function (a) {
                    return this.exists(a) || this.list.push(a), a;
                },
                getIndex: function (a) {
                    return this.list.indexOf(a);
                },
                getByKey: function (a, b) {
                    for (var c = this.list.length; c--; ) if (this.list[c][a] === b) return this.list[c];
                    return null;
                },
                exists: function (a) {
                    return -1 < this.list.indexOf(a);
                },
                reset: function () {
                    this.list.length = 0;
                },
                remove: function (a) {
                    var b = this.list.indexOf(a);
                    if (-1 < b) return this.list.splice(b, 1), a;
                },
                setAll: function (a, b) {
                    for (var c = this.list.length; c--; ) this.list[c] && (this.list[c][a] = b);
                },
                callAll: function (a) {
                    for (var b = Array.prototype.slice.call(arguments, 1), c = this.list.length; c--; ) this.list[c] && this.list[c][a] && this.list[c][a].apply(this.list[c], b);
                },
                removeAll: function (a) {
                    void 0 === a && (a = !1);
                    for (var b = this.list.length; b--; )
                        if (this.list[b]) {
                            var c = this.remove(this.list[b]);
                            a && c.destroy();
                        }
                    (this.position = 0), (this.list = []);
                },
            }),
            Object.defineProperty(c.ArraySet.prototype, "total", {
                get: function () {
                    return this.list.length;
                },
            }),
            Object.defineProperty(c.ArraySet.prototype, "first", {
                get: function () {
                    return (this.position = 0) < this.list.length ? this.list[0] : null;
                },
            }),
            Object.defineProperty(c.ArraySet.prototype, "next", {
                get: function () {
                    return this.position < this.list.length ? (this.position++, this.list[this.position]) : null;
                },
            }),
            (c.ArraySet.prototype.constructor = c.ArraySet),
            (c.ArrayUtils = {
                getRandomItem: function (a, b, c) {
                    if (null === a) return null;
                    void 0 === b && (b = 0), void 0 === c && (c = a.length);
                    var d = b + Math.floor(Math.random() * c);
                    return void 0 === a[d] ? null : a[d];
                },
                removeRandomItem: function (a, b, c) {
                    if (null == a) return null;
                    void 0 === b && (b = 0), void 0 === c && (c = a.length);
                    var d = b + Math.floor(Math.random() * c);
                    if (d < a.length) {
                        var e = a.splice(d, 1);
                        return void 0 === e[0] ? null : e[0];
                    }
                    return null;
                },
                shuffle: function (a) {
                    for (var b = a.length - 1; 0 < b; b--) {
                        var c = Math.floor(Math.random() * (b + 1)),
                            d = a[b];
                        (a[b] = a[c]), (a[c] = d);
                    }
                    return a;
                },
                transposeMatrix: function (a) {
                    for (var b = a.length, c = a[0].length, d = new Array(c), e = 0; e < c; e++) {
                        d[e] = new Array(b);
                        for (var f = b - 1; -1 < f; f--) d[e][f] = a[f][e];
                    }
                    return d;
                },
                rotateMatrix: function (a, b) {
                    if (("string" != typeof b && (b = ((b % 360) + 360) % 360), 90 === b || -270 === b || "rotateLeft" === b)) a = (a = c.ArrayUtils.transposeMatrix(a)).reverse();
                    else if (-90 === b || 270 === b || "rotateRight" === b) (a = a.reverse()), (a = c.ArrayUtils.transposeMatrix(a));
                    else if (180 === Math.abs(b) || "rotate180" === b) {
                        for (var d = 0; d < a.length; d++) a[d].reverse();
                        a = a.reverse();
                    }
                    return a;
                },
                findClosest: function (a, b) {
                    if (!b.length) return NaN;
                    if (1 === b.length || a < b[0]) return b[0];
                    for (var c = 1; b[c] < a; ) c++;
                    var d = b[c - 1],
                        e = c < b.length ? b[c] : Number.POSITIVE_INFINITY;
                    return e - a <= a - d ? e : d;
                },
                rotateRight: function (a) {
                    var b = a.pop();
                    return a.unshift(b), b;
                },
                rotateLeft: function (a) {
                    var b = a.shift();
                    return a.push(b), b;
                },
                rotate: function (a) {
                    var b = a.shift();
                    return a.push(b), b;
                },
                numberArray: function (a, b) {
                    for (var c = [], d = a; d <= b; d++) c.push(d);
                    return c;
                },
                numberArrayStep: function (a, b, d) {
                    null != a || (a = 0), null != b || ((b = a), (a = 0)), void 0 === d && (d = 1);
                    for (var e = [], f = Math.max(c.Math.roundAwayFromZero((b - a) / (d || 1)), 0), g = 0; g < f; g++) e.push(a), (a += d);
                    return e;
                },
            }),
            (c.LinkedList = function () {
                (this.next = null), (this.prev = null), (this.first = null), (this.last = null), (this.total = 0);
            }),
            (c.LinkedList.prototype = {
                add: function (a) {
                    return 0 === this.total && null === this.first && null === this.last ? ((this.first = a), (this.last = a), ((this.next = a).prev = this)) : (((this.last.next = a).prev = this.last), (this.last = a)), this.total++, a;
                },
                reset: function () {
                    (this.first = null), (this.last = null), (this.next = null), (this.prev = null), (this.total = 0);
                },
                remove: function (a) {
                    if (1 === this.total) return this.reset(), void (a.next = a.prev = null);
                    a === this.first ? (this.first = this.first.next) : a === this.last && (this.last = this.last.prev),
                        a.prev && (a.prev.next = a.next),
                        a.next && (a.next.prev = a.prev),
                        (a.next = a.prev = null),
                        null === this.first && (this.last = null),
                        this.total--;
                },
                callAll: function (a) {
                    if (this.first && this.last) for (var b = this.first; b && b[a] && b[a].call(b), (b = b.next) !== this.last.next; );
                },
            }),
            (c.LinkedList.prototype.constructor = c.LinkedList),
            (c.Create = function (a) {
                (this.game = a),
                    (this.bmd = null),
                    (this.canvas = null),
                    (this.ctx = null),
                    (this.palettes = [
                        {
                            0: "#000",
                            1: "#9D9D9D",
                            2: "#FFF",
                            3: "#BE2633",
                            4: "#E06F8B",
                            5: "#493C2B",
                            6: "#A46422",
                            7: "#EB8931",
                            8: "#F7E26B",
                            9: "#2F484E",
                            A: "#44891A",
                            B: "#A3CE27",
                            C: "#1B2632",
                            D: "#005784",
                            E: "#31A2F2",
                            F: "#B2DCEF",
                        },
                        {
                            0: "#000",
                            1: "#191028",
                            2: "#46af45",
                            3: "#a1d685",
                            4: "#453e78",
                            5: "#7664fe",
                            6: "#833129",
                            7: "#9ec2e8",
                            8: "#dc534b",
                            9: "#e18d79",
                            A: "#d6b97b",
                            B: "#e9d8a1",
                            C: "#216c4b",
                            D: "#d365c8",
                            E: "#afaab9",
                            F: "#f5f4eb",
                        },
                        {
                            0: "#000",
                            1: "#2234d1",
                            2: "#0c7e45",
                            3: "#44aacc",
                            4: "#8a3622",
                            5: "#5c2e78",
                            6: "#aa5c3d",
                            7: "#b5b5b5",
                            8: "#5e606e",
                            9: "#4c81fb",
                            A: "#6cd947",
                            B: "#7be2f9",
                            C: "#eb8a60",
                            D: "#e23d69",
                            E: "#ffd93f",
                            F: "#fff",
                        },
                        {
                            0: "#000",
                            1: "#fff",
                            2: "#8b4131",
                            3: "#7bbdc5",
                            4: "#8b41ac",
                            5: "#6aac41",
                            6: "#3931a4",
                            7: "#d5de73",
                            8: "#945a20",
                            9: "#5a4100",
                            A: "#bd736a",
                            B: "#525252",
                            C: "#838383",
                            D: "#acee8b",
                            E: "#7b73de",
                            F: "#acacac",
                        },
                        {
                            0: "#000",
                            1: "#191028",
                            2: "#46af45",
                            3: "#a1d685",
                            4: "#453e78",
                            5: "#7664fe",
                            6: "#833129",
                            7: "#9ec2e8",
                            8: "#dc534b",
                            9: "#e18d79",
                            A: "#d6b97b",
                            B: "#e9d8a1",
                            C: "#216c4b",
                            D: "#d365c8",
                            E: "#afaab9",
                            F: "#fff",
                        },
                    ]);
            }),
            (c.Create.PALETTE_ARNE = 0),
            (c.Create.PALETTE_JMP = 1),
            (c.Create.PALETTE_CGA = 2),
            (c.Create.PALETTE_C64 = 3),
            (c.Create.PALETTE_JAPANESE_MACHINE = 4),
            (c.Create.prototype = {
                texture: function (a, b, c, d, e) {
                    void 0 === c && (c = 8), void 0 === d && (d = c), void 0 === e && (e = 0);
                    var f = b[0].length * c,
                        g = b.length * d;
                    null === this.bmd && ((this.bmd = this.game.make.bitmapData()), (this.canvas = this.bmd.canvas), (this.ctx = this.bmd.context)), this.bmd.resize(f, g), this.bmd.clear();
                    for (var h = 0; h < b.length; h++)
                        for (var i = b[h], j = 0; j < i.length; j++) {
                            var k = i[j];
                            "." !== k && " " !== k && ((this.ctx.fillStyle = this.palettes[e][k]), this.ctx.fillRect(j * c, h * d, c, d));
                        }
                    return this.bmd.generateTexture(a);
                },
                grid: function (a, b, c, d, e, f) {
                    null === this.bmd && ((this.bmd = this.game.make.bitmapData()), (this.canvas = this.bmd.canvas), (this.ctx = this.bmd.context)), this.bmd.resize(b, c), (this.ctx.fillStyle = f);
                    for (var g = 0; g < c; g += e) this.ctx.fillRect(0, g, b, 1);
                    for (var h = 0; h < b; h += d) this.ctx.fillRect(h, 0, 1, c);
                    return this.bmd.generateTexture(a);
                },
            }),
            (c.Create.prototype.constructor = c.Create),
            (c.FlexGrid = function (a, b, d) {
                (this.game = a.game),
                    (this.manager = a),
                    (this.width = b),
                    (this.height = d),
                    (this.boundsCustom = new c.Rectangle(0, 0, b, d)),
                    (this.boundsFluid = new c.Rectangle(0, 0, b, d)),
                    (this.boundsFull = new c.Rectangle(0, 0, b, d)),
                    (this.boundsNone = new c.Rectangle(0, 0, b, d)),
                    (this.positionCustom = new c.Point(0, 0)),
                    (this.positionFluid = new c.Point(0, 0)),
                    (this.positionFull = new c.Point(0, 0)),
                    (this.positionNone = new c.Point(0, 0)),
                    (this.scaleCustom = new c.Point(1, 1)),
                    (this.scaleFluid = new c.Point(1, 1)),
                    (this.scaleFluidInversed = new c.Point(1, 1)),
                    (this.scaleFull = new c.Point(1, 1)),
                    (this.scaleNone = new c.Point(1, 1)),
                    (this.customWidth = 0),
                    (this.customHeight = 0),
                    (this.customOffsetX = 0),
                    (this.customOffsetY = 0),
                    (this.ratioH = b / d),
                    (this.ratioV = d / b),
                    (this.multiplier = 0),
                    (this.layers = []);
            }),
            (c.FlexGrid.prototype = {
                setSize: function (a, b) {
                    (this.width = a), (this.height = b), (this.ratioH = a / b), (this.ratioV = b / a), (this.scaleNone = new c.Point(1, 1)), (this.boundsNone.width = this.width), (this.boundsNone.height = this.height), this.refresh();
                },
                createCustomLayer: function (a, b, d, e) {
                    void 0 === e && (e = !0), (this.customWidth = a), (this.customHeight = b), (this.boundsCustom.width = a), (this.boundsCustom.height = b);
                    var f = new c.FlexLayer(this, this.positionCustom, this.boundsCustom, this.scaleCustom);
                    return e && this.game.world.add(f), this.layers.push(f), void 0 !== d && null !== typeof d && f.addMultiple(d), f;
                },
                createFluidLayer: function (a, b) {
                    void 0 === b && (b = !0);
                    var d = new c.FlexLayer(this, this.positionFluid, this.boundsFluid, this.scaleFluid);
                    return b && this.game.world.add(d), this.layers.push(d), void 0 !== a && null !== typeof a && d.addMultiple(a), d;
                },
                createFullLayer: function (a) {
                    var b = new c.FlexLayer(this, this.positionFull, this.boundsFull, this.scaleFluid);
                    return this.game.world.add(b), this.layers.push(b), void 0 !== a && b.addMultiple(a), b;
                },
                createFixedLayer: function (a) {
                    var b = new c.FlexLayer(this, this.positionNone, this.boundsNone, this.scaleNone);
                    return this.game.world.add(b), this.layers.push(b), void 0 !== a && b.addMultiple(a), b;
                },
                reset: function () {
                    for (var a = this.layers.length; a--; ) this.layers[a].persist || ((this.layers[a].position = null), (this.layers[a].scale = null), this.layers.slice(a, 1));
                },
                onResize: function (a, b) {
                    (this.ratioH = a / b), (this.ratioV = b / a), this.refresh(a, b);
                },
                refresh: function () {
                    (this.multiplier = Math.min(this.manager.height / this.height, this.manager.width / this.width)),
                        (this.boundsFluid.width = Math.round(this.width * this.multiplier)),
                        (this.boundsFluid.height = Math.round(this.height * this.multiplier)),
                        this.scaleFluid.set(this.boundsFluid.width / this.width, this.boundsFluid.height / this.height),
                        this.scaleFluidInversed.set(this.width / this.boundsFluid.width, this.height / this.boundsFluid.height),
                        this.scaleFull.set(this.boundsFull.width / this.width, this.boundsFull.height / this.height),
                        (this.boundsFull.width = Math.round(this.manager.width * this.scaleFluidInversed.x)),
                        (this.boundsFull.height = Math.round(this.manager.height * this.scaleFluidInversed.y)),
                        this.boundsFluid.centerOn(this.manager.bounds.centerX, this.manager.bounds.centerY),
                        this.boundsNone.centerOn(this.manager.bounds.centerX, this.manager.bounds.centerY),
                        this.positionFluid.set(this.boundsFluid.x, this.boundsFluid.y),
                        this.positionNone.set(this.boundsNone.x, this.boundsNone.y);
                },
                fitSprite: function (a) {
                    this.manager.scaleSprite(a), (a.x = this.manager.bounds.centerX), (a.y = this.manager.bounds.centerY);
                },
                debug: function () {
                    this.game.debug.text(this.boundsFluid.width + " x " + this.boundsFluid.height, this.boundsFluid.x + 4, this.boundsFluid.y + 16), this.game.debug.geom(this.boundsFluid, "rgba(255,0,0,0.9", !1);
                },
            }),
            (c.FlexGrid.prototype.constructor = c.FlexGrid),
            (c.FlexLayer = function (a, b, d, e) {
                c.Group.call(this, a.game, null, "__flexLayer" + a.game.rnd.uuid(), !1),
                    (this.manager = a.manager),
                    (this.grid = a),
                    (this.persist = !1),
                    (this.position = b),
                    (this.bounds = d),
                    (this.scale = e),
                    (this.topLeft = d.topLeft),
                    (this.topMiddle = new c.Point(d.halfWidth, 0)),
                    (this.topRight = d.topRight),
                    (this.bottomLeft = d.bottomLeft),
                    (this.bottomMiddle = new c.Point(d.halfWidth, d.bottom)),
                    (this.bottomRight = d.bottomRight);
            }),
            (c.FlexLayer.prototype = Object.create(c.Group.prototype)),
            (c.FlexLayer.prototype.constructor = c.FlexLayer),
            (c.FlexLayer.prototype.resize = function () {}),
            (c.FlexLayer.prototype.debug = function () {
                this.game.debug.text(this.bounds.width + " x " + this.bounds.height, this.bounds.x + 4, this.bounds.y + 16),
                    this.game.debug.geom(this.bounds, "rgba(0,0,255,0.9", !1),
                    this.game.debug.geom(this.topLeft, "rgba(255,255,255,0.9"),
                    this.game.debug.geom(this.topMiddle, "rgba(255,255,255,0.9"),
                    this.game.debug.geom(this.topRight, "rgba(255,255,255,0.9");
            }),
            (c.Color = {
                packPixel: function (a, b, d, e) {
                    return c.Device.LITTLE_ENDIAN ? ((e << 24) | (d << 16) | (b << 8) | a) >>> 0 : ((a << 24) | (b << 16) | (d << 8) | e) >>> 0;
                },
                unpackPixel: function (a, b, d, e) {
                    return (
                        null != b || (b = c.Color.createColor()),
                        null != d || (d = !1),
                        null != e || (e = !1),
                        c.Device.LITTLE_ENDIAN
                            ? ((b.a = (4278190080 & a) >>> 24), (b.b = (16711680 & a) >>> 16), (b.g = (65280 & a) >>> 8), (b.r = 255 & a))
                            : ((b.r = (4278190080 & a) >>> 24), (b.g = (16711680 & a) >>> 16), (b.b = (65280 & a) >>> 8), (b.a = 255 & a)),
                        (b.color = a),
                        (b.rgba = "rgba(" + b.r + "," + b.g + "," + b.b + "," + b.a / 255 + ")"),
                        d && c.Color.RGBtoHSL(b.r, b.g, b.b, b),
                        e && c.Color.RGBtoHSV(b.r, b.g, b.b, b),
                        b
                    );
                },
                fromRGBA: function (a, b) {
                    return b || (b = c.Color.createColor()), (b.r = (4278190080 & a) >>> 24), (b.g = (16711680 & a) >>> 16), (b.b = (65280 & a) >>> 8), (b.a = 255 & a), (b.rgba = "rgba(" + b.r + "," + b.g + "," + b.b + "," + b.a + ")"), b;
                },
                toRGBA: function (a, b, c, d) {
                    return (a << 24) | (b << 16) | (c << 8) | d;
                },
                toABGR: function (a, b, c, d) {
                    return ((d << 24) | (c << 16) | (b << 8) | a) >>> 0;
                },
                RGBtoHSL: function (a, b, d, e) {
                    e || (e = c.Color.createColor(a, b, d, 1)), (a /= 255), (b /= 255), (d /= 255);
                    var f = Math.min(a, b, d),
                        g = Math.max(a, b, d);
                    if (((e.h = 0), (e.s = 0), (e.l = (g + f) / 2), g !== f)) {
                        var h = g - f;
                        (e.s = 0.5 < e.l ? h / (2 - g - f) : h / (g + f)), g === a ? (e.h = (b - d) / h + (b < d ? 6 : 0)) : g === b ? (e.h = (d - a) / h + 2) : g === d && (e.h = (a - b) / h + 4), (e.h /= 6);
                    }
                    return e;
                },
                HSLtoRGB: function (a, b, d, e) {
                    if ((e ? ((e.r = d), (e.g = d), (e.b = d)) : (e = c.Color.createColor(d, d, d)), 0 !== b)) {
                        var f = d < 0.5 ? d * (1 + b) : d + b - d * b,
                            g = 2 * d - f;
                        (e.r = c.Color.hueToColor(g, f, a + 1 / 3)), (e.g = c.Color.hueToColor(g, f, a)), (e.b = c.Color.hueToColor(g, f, a - 1 / 3));
                    }
                    return (e.r = Math.floor((255 * e.r) | 0)), (e.g = Math.floor((255 * e.g) | 0)), (e.b = Math.floor((255 * e.b) | 0)), c.Color.updateColor(e), e;
                },
                RGBtoHSV: function (a, b, d, e) {
                    e || (e = c.Color.createColor(a, b, d, 255)), (a /= 255), (b /= 255), (d /= 255);
                    var f = Math.min(a, b, d),
                        g = Math.max(a, b, d),
                        h = g - f;
                    return (e.h = 0), (e.s = 0 === g ? 0 : h / g), (e.v = g) !== f && (g === a ? (e.h = (b - d) / h + (b < d ? 6 : 0)) : g === b ? (e.h = (d - a) / h + 2) : g === d && (e.h = (a - b) / h + 4), (e.h /= 6)), e;
                },
                HSVtoRGB: function (a, b, d, e) {
                    void 0 === e && (e = c.Color.createColor(0, 0, 0, 1, a, b, 0, d));
                    var f,
                        g,
                        h,
                        i = Math.floor(6 * a),
                        j = 6 * a - i,
                        k = d * (1 - b),
                        l = d * (1 - j * b),
                        m = d * (1 - (1 - j) * b);
                    switch (i % 6) {
                        case 0:
                            (f = d), (g = m), (h = k);
                            break;
                        case 1:
                            (f = l), (g = d), (h = k);
                            break;
                        case 2:
                            (f = k), (g = d), (h = m);
                            break;
                        case 3:
                            (f = k), (g = l), (h = d);
                            break;
                        case 4:
                            (f = m), (g = k), (h = d);
                            break;
                        case 5:
                            (f = d), (g = k), (h = l);
                    }
                    return (e.r = Math.floor(255 * f)), (e.g = Math.floor(255 * g)), (e.b = Math.floor(255 * h)), c.Color.updateColor(e), e;
                },
                hueToColor: function (a, b, c) {
                    return c < 0 && (c += 1), 1 < c && (c -= 1), c < 1 / 6 ? a + 6 * (b - a) * c : c < 0.5 ? b : c < 2 / 3 ? a + (b - a) * (2 / 3 - c) * 6 : a;
                },
                createColor: function (a, b, d, e, f, g, h, i) {
                    var j = { r: a || 0, g: b || 0, b: d || 0, a: e || 1, h: f || 0, s: g || 0, l: h || 0, v: i || 0, color: 0, color32: 0, rgba: "" };
                    return c.Color.updateColor(j);
                },
                updateColor: function (a) {
                    return (
                        (a.rgba = "rgba(" + a.r.toString() + "," + a.g.toString() + "," + a.b.toString() + "," + a.a.toString() + ")"),
                        (a.color = c.Color.getColor(a.r, a.g, a.b)),
                        (a.color32 = c.Color.getColor32(255 * a.a, a.r, a.g, a.b)),
                        a
                    );
                },
                getColor32: function (a, b, c, d) {
                    return (a << 24) | (b << 16) | (c << 8) | d;
                },
                getColor: function (a, b, c) {
                    return (a << 16) | (b << 8) | c;
                },
                RGBtoString: function (a, b, d, e, f) {
                    return (
                        void 0 === e && (e = 255),
                        void 0 === f && (f = "#"),
                        "#" === f ? "#" + ((1 << 24) + (a << 16) + (b << 8) + d).toString(16).slice(1) : "0x" + c.Color.componentToHex(e) + c.Color.componentToHex(a) + c.Color.componentToHex(b) + c.Color.componentToHex(d)
                    );
                },
                hexToRGB: function (a) {
                    var b = c.Color.hexToColor(a);
                    if (b) return c.Color.getColor32(b.a, b.r, b.g, b.b);
                },
                hexToColor: function (a, b) {
                    a = a.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i, function (a, b, c, d) {
                        return b + b + c + c + d + d;
                    });
                    var d = /^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);
                    if (d) {
                        var e = parseInt(d[1], 16),
                            f = parseInt(d[2], 16),
                            g = parseInt(d[3], 16);
                        b ? ((b.r = e), (b.g = f), (b.b = g)) : (b = c.Color.createColor(e, f, g));
                    }
                    return b;
                },
                webToColor: function (a, b) {
                    b || (b = c.Color.createColor());
                    var d = /^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(a);
                    return d && ((b.r = parseInt(d[1], 10)), (b.g = parseInt(d[2], 10)), (b.b = parseInt(d[3], 10)), (b.a = void 0 !== d[4] ? parseFloat(d[4]) : 1), c.Color.updateColor(b)), b;
                },
                valueToColor: function (a, b) {
                    if ((b || (b = c.Color.createColor()), "string" == typeof a)) return 0 === a.indexOf("rgb") ? c.Color.webToColor(a, b) : ((b.a = 1), c.Color.hexToColor(a, b));
                    if ("number" != typeof a) return b;
                    var d = c.Color.getRGB(a);
                    return (b.r = d.r), (b.g = d.g), (b.b = d.b), (b.a = d.a / 255), b;
                },
                componentToHex: function (a) {
                    var b = a.toString(16);
                    return 1 === b.length ? "0" + b : b;
                },
                HSVColorWheel: function (a, b) {
                    void 0 === a && (a = 1), void 0 === b && (b = 1);
                    for (var d = [], e = 0; e <= 359; e++) d.push(c.Color.HSVtoRGB(e / 359, a, b));
                    return d;
                },
                HSLColorWheel: function (a, b) {
                    void 0 === a && (a = 0.5), void 0 === b && (b = 0.5);
                    for (var d = [], e = 0; e <= 359; e++) d.push(c.Color.HSLtoRGB(e / 359, a, b));
                    return d;
                },
                interpolateColor: function (a, b, d, e, f) {
                    void 0 === f && (f = 255);
                    var g = c.Color.getRGB(a),
                        h = c.Color.getRGB(b),
                        i = ((h.red - g.red) * e) / d + g.red,
                        j = ((h.green - g.green) * e) / d + g.green,
                        k = ((h.blue - g.blue) * e) / d + g.blue;
                    return c.Color.getColor32(f, i, j, k);
                },
                interpolateColorWithRGB: function (a, b, d, e, f, g) {
                    var h = c.Color.getRGB(a),
                        i = ((b - h.red) * g) / f + h.red,
                        j = ((d - h.green) * g) / f + h.green,
                        k = ((e - h.blue) * g) / f + h.blue;
                    return c.Color.getColor(i, j, k);
                },
                interpolateRGB: function (a, b, d, e, f, g, h, i) {
                    var j = ((e - a) * i) / h + a,
                        k = ((f - b) * i) / h + b,
                        l = ((g - d) * i) / h + d;
                    return c.Color.getColor(j, k, l);
                },
                getRandomColor: function (a, b, d) {
                    if ((void 0 === a && (a = 0), void 0 === b && (b = 255), void 0 === d && (d = 255), 255 < b || b < a)) return c.Color.getColor(255, 255, 255);
                    var e = a + Math.round(Math.random() * (b - a)),
                        f = a + Math.round(Math.random() * (b - a)),
                        g = a + Math.round(Math.random() * (b - a));
                    return c.Color.getColor32(d, e, f, g);
                },
                getRGB: function (a) {
                    return 16777215 < a
                        ? { alpha: a >>> 24, red: (a >> 16) & 255, green: (a >> 8) & 255, blue: 255 & a, a: a >>> 24, r: (a >> 16) & 255, g: (a >> 8) & 255, b: 255 & a }
                        : { alpha: 255, red: (a >> 16) & 255, green: (a >> 8) & 255, blue: 255 & a, a: 255, r: (a >> 16) & 255, g: (a >> 8) & 255, b: 255 & a };
                },
                getWebRGB: function (a) {
                    if ("object" == typeof a) return "rgba(" + a.r.toString() + "," + a.g.toString() + "," + a.b.toString() + "," + (a.a / 255).toString() + ")";
                    var b = c.Color.getRGB(a);
                    return "rgba(" + b.r.toString() + "," + b.g.toString() + "," + b.b.toString() + "," + (b.a / 255).toString() + ")";
                },
                getAlpha: function (a) {
                    return a >>> 24;
                },
                getAlphaFloat: function (a) {
                    return (a >>> 24) / 255;
                },
                getRed: function (a) {
                    return (a >> 16) & 255;
                },
                getGreen: function (a) {
                    return (a >> 8) & 255;
                },
                getBlue: function (a) {
                    return 255 & a;
                },
                blendNormal: function (a) {
                    return a;
                },
                blendLighten: function (a, b) {
                    return a < b ? b : a;
                },
                blendDarken: function (a, b) {
                    return a < b ? a : b;
                },
                blendMultiply: function (a, b) {
                    return (a * b) / 255;
                },
                blendAverage: function (a, b) {
                    return (a + b) / 2;
                },
                blendAdd: function (a, b) {
                    return Math.min(255, a + b);
                },
                blendSubtract: function (a, b) {
                    return Math.max(0, a + b - 255);
                },
                blendDifference: function (a, b) {
                    return Math.abs(a - b);
                },
                blendNegation: function (a, b) {
                    return 255 - Math.abs(255 - a - b);
                },
                blendScreen: function (a, b) {
                    return 255 - (((255 - a) * (255 - b)) >> 8);
                },
                blendExclusion: function (a, b) {
                    return a + b - (2 * a * b) / 255;
                },
                blendOverlay: function (a, b) {
                    return b < 128 ? (2 * a * b) / 255 : 255 - (2 * (255 - a) * (255 - b)) / 255;
                },
                blendSoftLight: function (a, b) {
                    return b < 128 ? 2 * (64 + (a >> 1)) * (b / 255) : 255 - (2 * (255 - (64 + (a >> 1))) * (255 - b)) / 255;
                },
                blendHardLight: function (a, b) {
                    return c.Color.blendOverlay(b, a);
                },
                blendColorDodge: function (a, b) {
                    return 255 === b ? b : Math.min(255, (a << 8) / (255 - b));
                },
                blendColorBurn: function (a, b) {
                    return 0 === b ? b : Math.max(0, 255 - ((255 - a) << 8) / b);
                },
                blendLinearDodge: function (a, b) {
                    return c.Color.blendAdd(a, b);
                },
                blendLinearBurn: function (a, b) {
                    return c.Color.blendSubtract(a, b);
                },
                blendLinearLight: function (a, b) {
                    return b < 128 ? c.Color.blendLinearBurn(a, 2 * b) : c.Color.blendLinearDodge(a, 2 * (b - 128));
                },
                blendVividLight: function (a, b) {
                    return b < 128 ? c.Color.blendColorBurn(a, 2 * b) : c.Color.blendColorDodge(a, 2 * (b - 128));
                },
                blendPinLight: function (a, b) {
                    return b < 128 ? c.Color.blendDarken(a, 2 * b) : c.Color.blendLighten(a, 2 * (b - 128));
                },
                blendHardMix: function (a, b) {
                    return c.Color.blendVividLight(a, b) < 128 ? 0 : 255;
                },
                blendReflect: function (a, b) {
                    return 255 === b ? b : Math.min(255, (a * a) / (255 - b));
                },
                blendGlow: function (a, b) {
                    return c.Color.blendReflect(b, a);
                },
                blendPhoenix: function (a, b) {
                    return Math.min(a, b) - Math.max(a, b) + 255;
                },
            }),
            (c.Physics = function (a, b) {
                (b = b || {}), (this.game = a), (this.config = b), (this.arcade = null), (this.p2 = null), (this.ninja = null), (this.box2d = null), (this.chipmunk = null), (this.matter = null), this.parseConfig();
            }),
            (c.Physics.ARCADE = 0),
            (c.Physics.P2JS = 1),
            (c.Physics.NINJA = 2),
            (c.Physics.BOX2D = 3),
            (c.Physics.CHIPMUNK = 4),
            (c.Physics.MATTERJS = 5),
            (c.Physics.prototype = {
                parseConfig: function () {
                    (this.config.hasOwnProperty("arcade") && !0 !== this.config.arcade) || !c.Physics.hasOwnProperty("Arcade") || (this.arcade = new c.Physics.Arcade(this.game)),
                        this.config.hasOwnProperty("ninja") && !0 === this.config.ninja && c.Physics.hasOwnProperty("Ninja") && (this.ninja = new c.Physics.Ninja(this.game)),
                        this.config.hasOwnProperty("p2") && !0 === this.config.p2 && c.Physics.hasOwnProperty("P2") && (this.p2 = new c.Physics.P2(this.game, this.config)),
                        this.config.hasOwnProperty("box2d") && !0 === this.config.box2d && c.Physics.hasOwnProperty("BOX2D") && (this.box2d = new c.Physics.BOX2D(this.game, this.config)),
                        this.config.hasOwnProperty("matter") && !0 === this.config.matter && c.Physics.hasOwnProperty("Matter") && (this.matter = new c.Physics.Matter(this.game, this.config));
                },
                startSystem: function (a) {
                    a === c.Physics.ARCADE
                        ? (this.arcade = new c.Physics.Arcade(this.game))
                        : a === c.Physics.P2JS
                        ? null === this.p2
                            ? (this.p2 = new c.Physics.P2(this.game, this.config))
                            : this.p2.reset()
                        : a === c.Physics.NINJA
                        ? (this.ninja = new c.Physics.Ninja(this.game))
                        : a === c.Physics.BOX2D
                        ? null === this.box2d
                            ? (this.box2d = new c.Physics.Box2D(this.game, this.config))
                            : this.box2d.reset()
                        : a === c.Physics.MATTERJS && (null === this.matter ? (this.matter = new c.Physics.Matter(this.game, this.config)) : this.matter.reset());
                },
                enable: function (a, b, d) {
                    void 0 === b && (b = c.Physics.ARCADE),
                        void 0 === d && (d = !1),
                        b === c.Physics.ARCADE
                            ? this.arcade.enable(a)
                            : b === c.Physics.P2JS && this.p2
                            ? this.p2.enable(a, d)
                            : b === c.Physics.NINJA && this.ninja
                            ? this.ninja.enableAABB(a)
                            : b === c.Physics.BOX2D && this.box2d
                            ? this.box2d.enable(a)
                            : b === c.Physics.MATTERJS && this.matter && this.matter.enable(a);
                },
                preUpdate: function () {
                    this.p2 && this.p2.preUpdate(), this.box2d && this.box2d.preUpdate(), this.matter && this.matter.preUpdate();
                },
                update: function () {
                    this.p2 && this.p2.update(), this.box2d && this.box2d.update(), this.matter && this.matter.update();
                },
                setBoundsToWorld: function () {
                    this.arcade && this.arcade.setBoundsToWorld(),
                        this.ninja && this.ninja.setBoundsToWorld(),
                        this.p2 && this.p2.setBoundsToWorld(),
                        this.box2d && this.box2d.setBoundsToWorld(),
                        this.matter && this.matter.setBoundsToWorld();
                },
                clear: function () {
                    this.p2 && this.p2.clear(), this.box2d && this.box2d.clear(), this.matter && this.matter.clear();
                },
                reset: function () {
                    this.p2 && this.p2.reset(), this.box2d && this.box2d.reset(), this.matter && this.matter.reset();
                },
                destroy: function () {
                    this.p2 && this.p2.destroy(), this.box2d && this.box2d.destroy(), this.matter && this.matter.destroy(), (this.arcade = null), (this.ninja = null), (this.p2 = null), (this.box2d = null), (this.matter = null);
                },
            }),
            (c.Physics.prototype.constructor = c.Physics),
            (c.Physics.Arcade = function (a) {
                (this.game = a),
                    (this.gravity = new c.Point()),
                    (this.bounds = new c.Rectangle(0, 0, a.world.width, a.world.height)),
                    (this.checkCollision = { up: !0, down: !0, left: !0, right: !0 }),
                    (this.maxObjects = 10),
                    (this.maxLevels = 4),
                    (this.OVERLAP_BIAS = 4),
                    (this.forceX = !1),
                    (this.sortDirection = c.Physics.Arcade.LEFT_RIGHT),
                    (this.skipQuadTree = !0),
                    (this.isPaused = !1),
                    (this.quadTree = new c.QuadTree(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height, this.maxObjects, this.maxLevels)),
                    (this._total = 0),
                    this.setBoundsToWorld();
            }),
            (c.Physics.Arcade.prototype.constructor = c.Physics.Arcade),
            (c.Physics.Arcade.SORT_NONE = 0),
            (c.Physics.Arcade.LEFT_RIGHT = 1),
            (c.Physics.Arcade.RIGHT_LEFT = 2),
            (c.Physics.Arcade.TOP_BOTTOM = 3),
            (c.Physics.Arcade.BOTTOM_TOP = 4),
            (c.Physics.Arcade.prototype = {
                setBounds: function (a, b, c, d) {
                    this.bounds.setTo(a, b, c, d);
                },
                setBoundsToWorld: function () {
                    this.bounds.copyFrom(this.game.world.bounds);
                },
                enable: function (a, b) {
                    void 0 === b && (b = !0);
                    var d = 1;
                    if (Array.isArray(a))
                        for (d = a.length; d--; ) a[d] instanceof c.Group ? this.enable(a[d].children, b) : (this.enableBody(a[d]), b && a[d].hasOwnProperty("children") && 0 < a[d].children.length && this.enable(a[d], !0));
                    else a instanceof c.Group ? this.enable(a.children, b) : (this.enableBody(a), b && a.hasOwnProperty("children") && 0 < a.children.length && this.enable(a.children, !0));
                },
                enableBody: function (a) {
                    a.hasOwnProperty("body") && null === a.body && ((a.body = new c.Physics.Arcade.Body(a)), a.parent && a.parent instanceof c.Group && a.parent.addToHash(a));
                },
                updateMotion: function (a) {
                    var b = this.computeVelocity(0, a, a.angularVelocity, a.angularAcceleration, a.angularDrag, a.maxAngular) - a.angularVelocity;
                    (a.angularVelocity += b),
                        (a.rotation += a.angularVelocity * this.game.time.physicsElapsed),
                        (a.velocity.x = this.computeVelocity(1, a, a.velocity.x, a.acceleration.x, a.drag.x, a.maxVelocity.x)),
                        (a.velocity.y = this.computeVelocity(2, a, a.velocity.y, a.acceleration.y, a.drag.y, a.maxVelocity.y));
                },
                computeVelocity: function (a, b, c, d, e, f) {
                    return (
                        void 0 === f && (f = 1e4),
                        1 === a && b.allowGravity ? (c += (this.gravity.x + b.gravity.x) * this.game.time.physicsElapsed) : 2 === a && b.allowGravity && (c += (this.gravity.y + b.gravity.y) * this.game.time.physicsElapsed),
                        d ? (c += d * this.game.time.physicsElapsed) : e && (0 < c - (e *= this.game.time.physicsElapsed) ? (c -= e) : c + e < 0 ? (c += e) : (c = 0)),
                        f < c ? (c = f) : c < -f && (c = -f),
                        c
                    );
                },
                overlap: function (a, b, c, d, e) {
                    if (((c = c || null), (d = d || null), (e = e || c), (this._total = 0), !Array.isArray(a) && Array.isArray(b))) for (var f = 0; f < b.length; f++) this.collideHandler(a, b[f], c, d, e, !0);
                    else if (Array.isArray(a) && !Array.isArray(b)) for (f = 0; f < a.length; f++) this.collideHandler(a[f], b, c, d, e, !0);
                    else if (Array.isArray(a) && Array.isArray(b)) for (f = 0; f < a.length; f++) for (var g = 0; g < b.length; g++) this.collideHandler(a[f], b[g], c, d, e, !0);
                    else this.collideHandler(a, b, c, d, e, !0);
                    return 0 < this._total;
                },
                collide: function (a, b, c, d, e) {
                    if (((c = c || null), (d = d || null), (e = e || c), (this._total = 0), !Array.isArray(a) && Array.isArray(b))) for (var f = 0; f < b.length; f++) this.collideHandler(a, b[f], c, d, e, !1);
                    else if (Array.isArray(a) && !Array.isArray(b)) for (f = 0; f < a.length; f++) this.collideHandler(a[f], b, c, d, e, !1);
                    else if (Array.isArray(a) && Array.isArray(b)) for (f = 0; f < a.length; f++) for (var g = 0; g < b.length; g++) this.collideHandler(a[f], b[g], c, d, e, !1);
                    else this.collideHandler(a, b, c, d, e, !1);
                    return 0 < this._total;
                },
                sortLeftRight: function (a, b) {
                    return a.body && b.body ? a.body.x - b.body.x : 0;
                },
                sortRightLeft: function (a, b) {
                    return a.body && b.body ? b.body.x - a.body.x : 0;
                },
                sortTopBottom: function (a, b) {
                    return a.body && b.body ? a.body.y - b.body.y : 0;
                },
                sortBottomTop: function (a, b) {
                    return a.body && b.body ? b.body.y - a.body.y : 0;
                },
                sort: function (a, b) {
                    null !== a.physicsSortDirection ? (b = a.physicsSortDirection) : void 0 === b && (b = this.sortDirection),
                        b === c.Physics.Arcade.LEFT_RIGHT
                            ? a.hash.sort(this.sortLeftRight)
                            : b === c.Physics.Arcade.RIGHT_LEFT
                            ? a.hash.sort(this.sortRightLeft)
                            : b === c.Physics.Arcade.TOP_BOTTOM
                            ? a.hash.sort(this.sortTopBottom)
                            : b === c.Physics.Arcade.BOTTOM_TOP && a.hash.sort(this.sortBottomTop);
                },
                collideHandler: function (a, b, d, e, f, g) {
                    if (void 0 === b && a.physicsType === c.GROUP) return this.sort(a), void this.collideGroupVsSelf(a, d, e, f, g);
                    a &&
                        b &&
                        a.exists &&
                        b.exists &&
                        (this.sortDirection !== c.Physics.Arcade.SORT_NONE && (a.physicsType === c.GROUP && this.sort(a), b.physicsType === c.GROUP && this.sort(b)),
                        a.physicsType === c.SPRITE
                            ? b.physicsType === c.SPRITE
                                ? this.collideSpriteVsSprite(a, b, d, e, f, g)
                                : b.physicsType === c.GROUP
                                ? this.collideSpriteVsGroup(a, b, d, e, f, g)
                                : b.physicsType === c.TILEMAPLAYER && this.collideSpriteVsTilemapLayer(a, b, d, e, f, g)
                            : a.physicsType === c.GROUP
                            ? b.physicsType === c.SPRITE
                                ? this.collideSpriteVsGroup(b, a, d, e, f, g)
                                : b.physicsType === c.GROUP
                                ? this.collideGroupVsGroup(a, b, d, e, f, g)
                                : b.physicsType === c.TILEMAPLAYER && this.collideGroupVsTilemapLayer(a, b, d, e, f, g)
                            : a.physicsType === c.TILEMAPLAYER && (b.physicsType === c.SPRITE ? this.collideSpriteVsTilemapLayer(b, a, d, e, f, g) : b.physicsType === c.GROUP && this.collideGroupVsTilemapLayer(b, a, d, e, f, g)));
                },
                collideSpriteVsSprite: function (a, b, c, d, e, f) {
                    return !(!a.body || !b.body || (this.separate(a.body, b.body, d, e, f) && (c && c.call(e, a, b), this._total++), 0));
                },
                collideSpriteVsGroup: function (a, b, d, e, f, g) {
                    if (0 !== b.length && a.body)
                        if (this.skipQuadTree || a.body.skipQuadTree)
                            for (var h = {}, i = 0; i < b.hash.length; i++) {
                                var j = b.hash[i];
                                if (j && j.exists && j.body) {
                                    if (((h = j.body.getBounds(h)), this.sortDirection === c.Physics.Arcade.LEFT_RIGHT)) {
                                        if (a.body.right < h.x) break;
                                        if (h.right < a.body.x) continue;
                                    } else if (this.sortDirection === c.Physics.Arcade.RIGHT_LEFT) {
                                        if (a.body.x > h.right) break;
                                        if (h.x > a.body.right) continue;
                                    } else if (this.sortDirection === c.Physics.Arcade.TOP_BOTTOM) {
                                        if (a.body.bottom < h.y) break;
                                        if (h.bottom < a.body.y) continue;
                                    } else if (this.sortDirection === c.Physics.Arcade.BOTTOM_TOP) {
                                        if (a.body.y > h.bottom) break;
                                        if (h.y > a.body.bottom) continue;
                                    }
                                    this.collideSpriteVsSprite(a, j, d, e, f, g);
                                }
                            }
                        else {
                            this.quadTree.clear(),
                                this.quadTree.reset(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height, this.maxObjects, this.maxLevels),
                                this.quadTree.populate(b);
                            var k = this.quadTree.retrieve(a);
                            for (i = 0; i < k.length; i++) this.separate(a.body, k[i], e, f, g) && (d && d.call(f, a, k[i].sprite), this._total++);
                        }
                },
                collideGroupVsSelf: function (a, b, d, e, f) {
                    if (0 !== a.length)
                        for (var g = 0; g < a.hash.length; g++) {
                            var h = {},
                                i = a.hash[g];
                            if (i && i.exists && i.body) {
                                h = i.body.getBounds(h);
                                for (var j = g + 1; j < a.hash.length; j++) {
                                    var k = {},
                                        l = a.hash[j];
                                    if (l && l.exists && l.body) {
                                        if (((k = l.body.getBounds(k)), this.sortDirection === c.Physics.Arcade.LEFT_RIGHT)) {
                                            if (h.right < k.x) break;
                                            if (k.right < h.x) continue;
                                        } else if (this.sortDirection === c.Physics.Arcade.RIGHT_LEFT) {
                                            if (h.x > k.right) continue;
                                            if (k.x > h.right) break;
                                        } else if (this.sortDirection === c.Physics.Arcade.TOP_BOTTOM) {
                                            if (h.bottom < k.y) continue;
                                            if (k.bottom < h.y) break;
                                        } else if (this.sortDirection === c.Physics.Arcade.BOTTOM_TOP) {
                                            if (h.y > k.bottom) continue;
                                            if (k.y > i.body.bottom) break;
                                        }
                                        this.collideSpriteVsSprite(i, l, b, d, e, f);
                                    }
                                }
                            }
                        }
                },
                collideGroupVsGroup: function (a, b, d, e, f, g) {
                    if (0 !== a.length && 0 !== b.length)
                        for (var h = 0; h < a.children.length; h++)
                            a.children[h].exists && (a.children[h].physicsType === c.GROUP ? this.collideGroupVsGroup(a.children[h], b, d, e, f, g) : this.collideSpriteVsGroup(a.children[h], b, d, e, f, g));
                },
                separate: function (a, b, c, d, e) {
                    if (!a.enable || !b.enable || a.checkCollision.none || b.checkCollision.none || !this.intersects(a, b)) return !1;
                    if (c && !1 === c.call(d, a.sprite, b.sprite)) return !1;
                    if (a.isCircle && b.isCircle) return this.separateCircle(a, b, e);
                    if (a.isCircle !== b.isCircle) {
                        var f = a.isCircle ? b : a,
                            g = a.isCircle ? a : b,
                            h_x = f.x,
                            h_y = f.y,
                            h_right = f.right,
                            h_bottom = f.bottom,
                            i_x = g.x + g.radius,
                            i_y = g.y + g.radius;
                        if ((i_y < h_y || h_bottom < i_y) && (i_x < h_x || h_right < i_x)) return this.separateCircle(a, b, e);
                    }
                    var j = !1,
                        k = !1;
                    this.forceX || Math.abs(this.gravity.y + a.gravity.y) < Math.abs(this.gravity.x + a.gravity.x)
                        ? ((j = this.separateX(a, b, e)), this.intersects(a, b) && (k = this.separateY(a, b, e)))
                        : ((k = this.separateY(a, b, e)), this.intersects(a, b) && (j = this.separateX(a, b, e)));
                    var l = j || k;
                    return (
                        l &&
                            (e
                                ? (a.onOverlap && a.onOverlap.dispatch(a.sprite, b.sprite), b.onOverlap && b.onOverlap.dispatch(b.sprite, a.sprite))
                                : (a.onCollide && a.onCollide.dispatch(a.sprite, b.sprite), b.onCollide && b.onCollide.dispatch(b.sprite, a.sprite))),
                        l
                    );
                },
                intersects: function (a, b) {
                    return (
                        a !== b &&
                        (a.isCircle
                            ? b.isCircle
                                ? c.Math.distance(a.center.x, a.center.y, b.center.x, b.center.y) <= a.radius + b.radius
                                : this.circleBodyIntersects(a, b)
                            : b.isCircle
                            ? this.circleBodyIntersects(b, a)
                            : !(a.right <= b.position.x || a.bottom <= b.position.y || a.position.x >= b.right || a.position.y >= b.bottom))
                    );
                },
                circleBodyIntersects: function (a, b) {
                    var d = c.Math.clamp(a.center.x, b.left, b.right),
                        e = c.Math.clamp(a.center.y, b.top, b.bottom);
                    return (a.center.x - d) * (a.center.x - d) + (a.center.y - e) * (a.center.y - e) <= a.radius * a.radius;
                },
                separateCircle: function (a, b, d) {
                    this.getOverlapX(a, b), this.getOverlapY(a, b);
                    var e = b.center.x - a.center.x,
                        f = b.center.y - a.center.y,
                        g = Math.atan2(f, e),
                        h = 0;
                    if (a.isCircle !== b.isCircle) {
                        var i = { x: b.isCircle ? a.position.x : b.position.x, y: b.isCircle ? a.position.y : b.position.y, right: b.isCircle ? a.right : b.right, bottom: b.isCircle ? a.bottom : b.bottom },
                            j = { x: a.isCircle ? a.position.x + a.radius : b.position.x + b.radius, y: a.isCircle ? a.position.y + a.radius : b.position.y + b.radius, radius: a.isCircle ? a.radius : b.radius };
                        j.y < i.y
                            ? j.x < i.x
                                ? (h = c.Math.distance(j.x, j.y, i.x, i.y) - j.radius)
                                : i.right < j.x && (h = c.Math.distance(j.x, j.y, i.right, i.y) - j.radius)
                            : i.bottom < j.y && (j.x < i.x ? (h = c.Math.distance(j.x, j.y, i.x, i.bottom) - j.radius) : i.right < j.x && (h = c.Math.distance(j.x, j.y, i.right, i.bottom) - j.radius)),
                            (h *= -1);
                    } else h = a.radius + b.radius - c.Math.distance(a.center.x, a.center.y, b.center.x, b.center.y);
                    if (d || 0 === h || (a.immovable && b.immovable) || a.customSeparateX || b.customSeparateX)
                        return 0 !== h && (a.onOverlap && a.onOverlap.dispatch(a.sprite, b.sprite), b.onOverlap && b.onOverlap.dispatch(b.sprite, a.sprite)), 0 !== h;
                    var k_x = a.velocity.x * Math.cos(g) + a.velocity.y * Math.sin(g),
                        k_y = a.velocity.x * Math.sin(g) - a.velocity.y * Math.cos(g),
                        l_x = b.velocity.x * Math.cos(g) + b.velocity.y * Math.sin(g),
                        l_y = b.velocity.x * Math.sin(g) - b.velocity.y * Math.cos(g),
                        m = ((a.mass - b.mass) * k_x + 2 * b.mass * l_x) / (a.mass + b.mass),
                        n = (2 * a.mass * k_x + (b.mass - a.mass) * l_x) / (a.mass + b.mass);
                    return (
                        a.immovable || ((a.velocity.x = (m * Math.cos(g) - k_y * Math.sin(g)) * a.bounce.x), (a.velocity.y = (k_y * Math.cos(g) + m * Math.sin(g)) * a.bounce.y)),
                        b.immovable || ((b.velocity.x = (n * Math.cos(g) - l_y * Math.sin(g)) * b.bounce.x), (b.velocity.y = (l_y * Math.cos(g) + n * Math.sin(g)) * b.bounce.y)),
                        Math.abs(g) < Math.PI / 2
                            ? 0 < a.velocity.x && !a.immovable && b.velocity.x > a.velocity.x
                                ? (a.velocity.x *= -1)
                                : b.velocity.x < 0 && !b.immovable && a.velocity.x < b.velocity.x
                                ? (b.velocity.x *= -1)
                                : 0 < a.velocity.y && !a.immovable && b.velocity.y > a.velocity.y
                                ? (a.velocity.y *= -1)
                                : b.velocity.y < 0 && !b.immovable && a.velocity.y < b.velocity.y && (b.velocity.y *= -1)
                            : Math.abs(g) > Math.PI / 2 &&
                              (a.velocity.x < 0 && !a.immovable && b.velocity.x < a.velocity.x
                                  ? (a.velocity.x *= -1)
                                  : 0 < b.velocity.x && !b.immovable && a.velocity.x > b.velocity.x
                                  ? (b.velocity.x *= -1)
                                  : a.velocity.y < 0 && !a.immovable && b.velocity.y < a.velocity.y
                                  ? (a.velocity.y *= -1)
                                  : 0 < b.velocity.y && !b.immovable && a.velocity.x > b.velocity.y && (b.velocity.y *= -1)),
                        a.immovable || ((a.x += a.velocity.x * this.game.time.physicsElapsed - h * Math.cos(g)), (a.y += a.velocity.y * this.game.time.physicsElapsed - h * Math.sin(g))),
                        b.immovable || ((b.x += b.velocity.x * this.game.time.physicsElapsed + h * Math.cos(g)), (b.y += b.velocity.y * this.game.time.physicsElapsed + h * Math.sin(g))),
                        a.onCollide && a.onCollide.dispatch(a.sprite, b.sprite),
                        b.onCollide && b.onCollide.dispatch(b.sprite, a.sprite),
                        !0
                    );
                },
                getOverlapX: function (a, b, c) {
                    var d = 0,
                        e = a.deltaAbsX() + b.deltaAbsX() + this.OVERLAP_BIAS;
                    return (
                        0 === a.deltaX() && 0 === b.deltaX()
                            ? ((a.embedded = !0), (b.embedded = !0))
                            : a.deltaX() > b.deltaX()
                            ? (e < (d = a.right - b.x) && !c) || !1 === a.checkCollision.right || !1 === b.checkCollision.left
                                ? (d = 0)
                                : ((a.touching.none = !1), (a.touching.right = !0), (b.touching.none = !1), (b.touching.left = !0))
                            : a.deltaX() < b.deltaX() &&
                              ((e < -(d = a.x - b.width - b.x) && !c) || !1 === a.checkCollision.left || !1 === b.checkCollision.right
                                  ? (d = 0)
                                  : ((a.touching.none = !1), (a.touching.left = !0), (b.touching.none = !1), (b.touching.right = !0))),
                        (a.overlapX = d),
                        (b.overlapX = d)
                    );
                },
                getOverlapY: function (a, b, c) {
                    var d = 0,
                        e = a.deltaAbsY() + b.deltaAbsY() + this.OVERLAP_BIAS;
                    return (
                        0 === a.deltaY() && 0 === b.deltaY()
                            ? ((a.embedded = !0), (b.embedded = !0))
                            : a.deltaY() > b.deltaY()
                            ? (e < (d = a.bottom - b.y) && !c) || !1 === a.checkCollision.down || !1 === b.checkCollision.up
                                ? (d = 0)
                                : ((a.touching.none = !1), (a.touching.down = !0), (b.touching.none = !1), (b.touching.up = !0))
                            : a.deltaY() < b.deltaY() &&
                              ((e < -(d = a.y - b.bottom) && !c) || !1 === a.checkCollision.up || !1 === b.checkCollision.down ? (d = 0) : ((a.touching.none = !1), (a.touching.up = !0), (b.touching.none = !1), (b.touching.down = !0))),
                        (a.overlapY = d),
                        (b.overlapY = d)
                    );
                },
                separateX: function (a, b, c) {
                    var d = this.getOverlapX(a, b, c);
                    if (c || 0 === d || (a.immovable && b.immovable) || a.customSeparateX || b.customSeparateX) return 0 !== d || (a.embedded && b.embedded);
                    var e = a.velocity.x,
                        f = b.velocity.x;
                    if (a.immovable || b.immovable)
                        a.immovable
                            ? ((b.x += d), (b.velocity.x = e - f * b.bounce.x), a.moves && (b.y += (a.y - a.prev.y) * a.friction.y))
                            : ((a.x -= d), (a.velocity.x = f - e * a.bounce.x), b.moves && (a.y += (b.y - b.prev.y) * b.friction.y));
                    else {
                        (d *= 0.5), (a.x -= d), (b.x += d);
                        var g = Math.sqrt((f * f * b.mass) / a.mass) * (0 < f ? 1 : -1),
                            h = Math.sqrt((e * e * a.mass) / b.mass) * (0 < e ? 1 : -1),
                            i = 0.5 * (g + h);
                        (g -= i), (h -= i), (a.velocity.x = i + g * a.bounce.x), (b.velocity.x = i + h * b.bounce.x);
                    }
                    return !0;
                },
                separateY: function (a, b, c) {
                    var d = this.getOverlapY(a, b, c);
                    if (c || 0 === d || (a.immovable && b.immovable) || a.customSeparateY || b.customSeparateY) return 0 !== d || (a.embedded && b.embedded);
                    var e = a.velocity.y,
                        f = b.velocity.y;
                    if (a.immovable || b.immovable)
                        a.immovable
                            ? ((b.y += d), (b.velocity.y = e - f * b.bounce.y), a.moves && (b.x += (a.x - a.prev.x) * a.friction.x))
                            : ((a.y -= d), (a.velocity.y = f - e * a.bounce.y), b.moves && (a.x += (b.x - b.prev.x) * b.friction.x));
                    else {
                        (d *= 0.5), (a.y -= d), (b.y += d);
                        var g = Math.sqrt((f * f * b.mass) / a.mass) * (0 < f ? 1 : -1),
                            h = Math.sqrt((e * e * a.mass) / b.mass) * (0 < e ? 1 : -1),
                            i = 0.5 * (g + h);
                        (g -= i), (h -= i), (a.velocity.y = i + g * a.bounce.y), (b.velocity.y = i + h * b.bounce.y);
                    }
                    return !0;
                },
                getObjectsUnderPointer: function (a, b, c, d) {
                    if (0 !== b.length && a.exists) return this.getObjectsAtLocation(a.x, a.y, b, c, d, a);
                },
                getObjectsAtLocation: function (a, b, d, e, f, g) {
                    this.quadTree.clear(), this.quadTree.reset(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height, this.maxObjects, this.maxLevels), this.quadTree.populate(d);
                    for (var h = new c.Rectangle(a, b, 1, 1), i = [], j = this.quadTree.retrieve(h), k = 0; k < j.length; k++) j[k].hitTest(a, b) && (e && e.call(f, g, j[k].sprite), i.push(j[k].sprite));
                    return i;
                },
                moveToObject: function (a, b, c, d) {
                    void 0 === c && (c = 60), void 0 === d && (d = 0);
                    var e = Math.atan2(b.y - a.y, b.x - a.x);
                    return 0 < d && (c = this.distanceBetween(a, b) / (d / 1e3)), (a.body.velocity.x = Math.cos(e) * c), (a.body.velocity.y = Math.sin(e) * c), e;
                },
                moveToPointer: function (a, b, c, d) {
                    void 0 === b && (b = 60), (c = c || this.game.input.activePointer), void 0 === d && (d = 0);
                    var e = this.angleToPointer(a, c);
                    return 0 < d && (b = this.distanceToPointer(a, c) / (d / 1e3)), (a.body.velocity.x = Math.cos(e) * b), (a.body.velocity.y = Math.sin(e) * b), e;
                },
                moveToXY: function (a, b, c, d, e) {
                    void 0 === d && (d = 60), void 0 === e && (e = 0);
                    var f = Math.atan2(c - a.y, b - a.x);
                    return 0 < e && (d = this.distanceToXY(a, b, c) / (e / 1e3)), (a.body.velocity.x = Math.cos(f) * d), (a.body.velocity.y = Math.sin(f) * d), f;
                },
                velocityFromAngle: function (a, b, d) {
                    return void 0 === b && (b = 60), (d = d || new c.Point()).setTo(Math.cos(this.game.math.degToRad(a)) * b, Math.sin(this.game.math.degToRad(a)) * b);
                },
                velocityFromRotation: function (a, b, d) {
                    return void 0 === b && (b = 60), (d = d || new c.Point()).setTo(Math.cos(a) * b, Math.sin(a) * b);
                },
                accelerationFromRotation: function (a, b, d) {
                    return void 0 === b && (b = 60), (d = d || new c.Point()).setTo(Math.cos(a) * b, Math.sin(a) * b);
                },
                accelerateToObject: function (a, b, c, d, e) {
                    void 0 === c && (c = 60), void 0 === d && (d = 1e3), void 0 === e && (e = 1e3);
                    var f = this.angleBetween(a, b);
                    return a.body.acceleration.setTo(Math.cos(f) * c, Math.sin(f) * c), a.body.maxVelocity.setTo(d, e), f;
                },
                accelerateToPointer: function (a, b, c, d, e) {
                    void 0 === c && (c = 60), void 0 === b && (b = this.game.input.activePointer), void 0 === d && (d = 1e3), void 0 === e && (e = 1e3);
                    var f = this.angleToPointer(a, b);
                    return a.body.acceleration.setTo(Math.cos(f) * c, Math.sin(f) * c), a.body.maxVelocity.setTo(d, e), f;
                },
                accelerateToXY: function (a, b, c, d, e, f) {
                    void 0 === d && (d = 60), void 0 === e && (e = 1e3), void 0 === f && (f = 1e3);
                    var g = this.angleToXY(a, b, c);
                    return a.body.acceleration.setTo(Math.cos(g) * d, Math.sin(g) * d), a.body.maxVelocity.setTo(e, f), g;
                },
                distanceBetween: function (a, b, c) {
                    void 0 === c && (c = !1);
                    var d = c ? a.world.x - b.world.x : a.x - b.x,
                        e = c ? a.world.y - b.world.y : a.y - b.y;
                    return Math.sqrt(d * d + e * e);
                },
                distanceToXY: function (a, b, c, d) {
                    void 0 === d && (d = !1);
                    var e = d ? a.world.x - b : a.x - b,
                        f = d ? a.world.y - c : a.y - c;
                    return Math.sqrt(e * e + f * f);
                },
                distanceToPointer: function (a, b, c) {
                    void 0 === b && (b = this.game.input.activePointer), void 0 === c && (c = !1);
                    var d = c ? a.world.x - b.worldX : a.x - b.worldX,
                        e = c ? a.world.y - b.worldY : a.y - b.worldY;
                    return Math.sqrt(d * d + e * e);
                },
                angleBetween: function (a, b, c) {
                    return void 0 === c && (c = !1), c ? Math.atan2(b.world.y - a.world.y, b.world.x - a.world.x) : Math.atan2(b.y - a.y, b.x - a.x);
                },
                angleBetweenCenters: function (a, b) {
                    var c = b.centerX - a.centerX,
                        d = b.centerY - a.centerY;
                    return Math.atan2(d, c);
                },
                angleToXY: function (a, b, c, d) {
                    return void 0 === d && (d = !1), d ? Math.atan2(c - a.world.y, b - a.world.x) : Math.atan2(c - a.y, b - a.x);
                },
                angleToPointer: function (a, b, c) {
                    return void 0 === b && (b = this.game.input.activePointer), void 0 === c && (c = !1), c ? Math.atan2(b.worldY - a.world.y, b.worldX - a.world.x) : Math.atan2(b.worldY - a.y, b.worldX - a.x);
                },
                worldAngleToPointer: function (a, b) {
                    return this.angleToPointer(a, b, !0);
                },
            }),
            (c.Physics.Arcade.Body = function (a) {
                (this.sprite = a),
                    (this.game = a.game),
                    (this.type = c.Physics.ARCADE),
                    (this.enable = !0),
                    (this.isCircle = !1),
                    (this.radius = 0),
                    (this.offset = new c.Point()),
                    (this.position = new c.Point(a.x, a.y)),
                    (this.prev = new c.Point(this.position.x, this.position.y)),
                    (this.allowRotation = !0),
                    (this.rotation = a.angle),
                    (this.preRotation = a.angle),
                    (this.width = a.width),
                    (this.height = a.height),
                    (this.sourceWidth = a.width),
                    (this.sourceHeight = a.height),
                    a.texture && ((this.sourceWidth = a.texture.frame.width), (this.sourceHeight = a.texture.frame.height)),
                    (this.halfWidth = Math.abs(a.width / 2)),
                    (this.halfHeight = Math.abs(a.height / 2)),
                    (this.center = new c.Point(a.x + this.halfWidth, a.y + this.halfHeight)),
                    (this.velocity = new c.Point()),
                    (this.newVelocity = new c.Point()),
                    (this.deltaMax = new c.Point()),
                    (this.acceleration = new c.Point()),
                    (this.drag = new c.Point()),
                    (this.allowGravity = !0),
                    (this.gravity = new c.Point()),
                    (this.bounce = new c.Point()),
                    (this.worldBounce = null),
                    (this.onWorldBounds = null),
                    (this.onCollide = null),
                    (this.onOverlap = null),
                    (this.maxVelocity = new c.Point(1e4, 1e4)),
                    (this.friction = new c.Point(1, 0)),
                    (this.angularVelocity = 0),
                    (this.angularAcceleration = 0),
                    (this.angularDrag = 0),
                    (this.maxAngular = 1e3),
                    (this.mass = 1),
                    (this.angle = 0),
                    (this.speed = 0),
                    (this.facing = c.NONE),
                    (this.immovable = !1),
                    (this.moves = !0),
                    (this.customSeparateX = !1),
                    (this.customSeparateY = !1),
                    (this.overlapX = 0),
                    (this.overlapY = 0),
                    (this.overlapR = 0),
                    (this.embedded = !1),
                    (this.collideWorldBounds = !1),
                    (this.checkCollision = { none: !1, any: !0, up: !0, down: !0, left: !0, right: !0 }),
                    (this.touching = { none: !0, up: !1, down: !1, left: !1, right: !1 }),
                    (this.wasTouching = { none: !0, up: !1, down: !1, left: !1, right: !1 }),
                    (this.blocked = { up: !1, down: !1, left: !1, right: !1 }),
                    (this.tilePadding = new c.Point()),
                    (this.dirty = !1),
                    (this.skipQuadTree = !1),
                    (this.syncBounds = !1),
                    (this.isMoving = !1),
                    (this.stopVelocityOnCollide = !0),
                    (this.moveTimer = 0),
                    (this.moveDistance = 0),
                    (this.moveDuration = 0),
                    (this.moveTarget = null),
                    (this.moveEnd = null),
                    (this.onMoveComplete = new c.Signal()),
                    (this.movementCallback = null),
                    (this.movementCallbackContext = null),
                    (this._reset = !0),
                    (this._sx = a.scale.x),
                    (this._sy = a.scale.y),
                    (this._dx = 0),
                    (this._dy = 0);
            }),
            (c.Physics.Arcade.Body.prototype = {
                updateBounds: function () {
                    if (this.syncBounds) {
                        var a = this.sprite.getBounds();
                        a.ceilAll(), (a.width === this.width && a.height === this.height) || ((this.width = a.width), (this.height = a.height), (this._reset = !0));
                    } else {
                        var b = Math.abs(this.sprite.scale.x),
                            c = Math.abs(this.sprite.scale.y);
                        (b === this._sx && c === this._sy) || ((this.width = this.sourceWidth * b), (this.height = this.sourceHeight * c), (this._sx = b), (this._sy = c), (this._reset = !0));
                    }
                    this._reset && ((this.halfWidth = Math.floor(this.width / 2)), (this.halfHeight = Math.floor(this.height / 2)), this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight));
                },
                preUpdate: function () {
                    this.enable &&
                        !this.game.physics.arcade.isPaused &&
                        ((this.dirty = !0),
                        (this.wasTouching.none = this.touching.none),
                        (this.wasTouching.up = this.touching.up),
                        (this.wasTouching.down = this.touching.down),
                        (this.wasTouching.left = this.touching.left),
                        (this.wasTouching.right = this.touching.right),
                        (this.touching.none = !0),
                        (this.touching.up = !1),
                        (this.touching.down = !1),
                        (this.touching.left = !1),
                        (this.touching.right = !1),
                        (this.blocked.up = !1),
                        (this.blocked.down = !1),
                        (this.blocked.left = !1),
                        (this.blocked.right = !1),
                        (this.embedded = !1),
                        this.updateBounds(),
                        (this.position.x = this.sprite.world.x - this.sprite.anchor.x * this.sprite.width + this.sprite.scale.x * this.offset.x),
                        (this.position.x -= this.sprite.scale.x < 0 ? this.width : 0),
                        (this.position.y = this.sprite.world.y - this.sprite.anchor.y * this.sprite.height + this.sprite.scale.y * this.offset.y),
                        (this.position.y -= this.sprite.scale.y < 0 ? this.height : 0),
                        (this.rotation = this.sprite.angle),
                        (this.preRotation = this.rotation),
                        (this._reset || this.sprite.fresh) && ((this.prev.x = this.position.x), (this.prev.y = this.position.y)),
                        this.moves &&
                            (this.game.physics.arcade.updateMotion(this),
                            this.newVelocity.set(this.velocity.x * this.game.time.physicsElapsed, this.velocity.y * this.game.time.physicsElapsed),
                            (this.position.x += this.newVelocity.x),
                            (this.position.y += this.newVelocity.y),
                            (this.position.x === this.prev.x && this.position.y === this.prev.y) || (this.angle = Math.atan2(this.velocity.y, this.velocity.x)),
                            (this.speed = Math.sqrt(this.velocity.x * this.velocity.x + this.velocity.y * this.velocity.y)),
                            this.collideWorldBounds && this.checkWorldBounds() && this.onWorldBounds && this.onWorldBounds.dispatch(this.sprite, this.blocked.up, this.blocked.down, this.blocked.left, this.blocked.right)),
                        (this._dx = this.deltaX()),
                        (this._dy = this.deltaY()),
                        (this._reset = !1));
                },
                updateMovement: function () {
                    var a = 0,
                        b = 0 !== this.overlapX || 0 !== this.overlapY;
                    if (
                        ((a =
                            0 < this.moveDuration
                                ? ((this.moveTimer += this.game.time.elapsedMS), this.moveTimer / this.moveDuration)
                                : (this.moveTarget.end.set(this.position.x, this.position.y), this.moveTarget.length / this.moveDistance)),
                        this.movementCallback)
                    )
                        var c = this.movementCallback.call(this.movementCallbackContext, this, this.velocity, a);
                    return !(b || 1 <= a || (void 0 !== c && !0 !== c)) || (this.stopMovement(1 <= a || (this.stopVelocityOnCollide && b)), !1);
                },
                stopMovement: function (a) {
                    this.isMoving && ((this.isMoving = !1), a && this.velocity.set(0), this.onMoveComplete.dispatch(this.sprite, 0 !== this.overlapX || 0 !== this.overlapY));
                },
                postUpdate: function () {
                    this.enable &&
                        this.dirty &&
                        (this.isMoving && this.updateMovement(),
                        (this.dirty = !1),
                        this.deltaX() < 0 ? (this.facing = c.LEFT) : 0 < this.deltaX() && (this.facing = c.RIGHT),
                        this.deltaY() < 0 ? (this.facing = c.UP) : 0 < this.deltaY() && (this.facing = c.DOWN),
                        this.moves &&
                            ((this._dx = this.deltaX()),
                            (this._dy = this.deltaY()),
                            0 !== this.deltaMax.x && 0 !== this._dx && (this._dx < 0 && this._dx < -this.deltaMax.x ? (this._dx = -this.deltaMax.x) : 0 < this._dx && this._dx > this.deltaMax.x && (this._dx = this.deltaMax.x)),
                            0 !== this.deltaMax.y && 0 !== this._dy && (this._dy < 0 && this._dy < -this.deltaMax.y ? (this._dy = -this.deltaMax.y) : 0 < this._dy && this._dy > this.deltaMax.y && (this._dy = this.deltaMax.y)),
                            (this.sprite.position.x += this._dx),
                            (this.sprite.position.y += this._dy),
                            (this._reset = !0)),
                        this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight),
                        this.allowRotation && (this.sprite.angle += this.deltaZ()),
                        (this.prev.x = this.position.x),
                        (this.prev.y = this.position.y));
                },
                checkWorldBounds: function () {
                    var a = this.position,
                        b = this.game.physics.arcade.bounds,
                        c = this.game.physics.arcade.checkCollision,
                        d = this.worldBounce ? -this.worldBounce.x : -this.bounce.x,
                        e = this.worldBounce ? -this.worldBounce.y : -this.bounce.y;
                    if (this.isCircle) {
                        var f_x = this.center.x - this.radius,
                            f_y = this.center.y - this.radius,
                            f_right = this.center.x + this.radius,
                            f_bottom = this.center.y + this.radius;
                        f_x < b.x && c.left
                            ? ((a.x = b.x - this.halfWidth + this.radius), (this.velocity.x *= d), (this.blocked.left = !0))
                            : f_right > b.right && c.right && ((a.x = b.right - this.halfWidth - this.radius), (this.velocity.x *= d), (this.blocked.right = !0)),
                            f_y < b.y && c.up
                                ? ((a.y = b.y - this.halfHeight + this.radius), (this.velocity.y *= e), (this.blocked.up = !0))
                                : f_bottom > b.bottom && c.down && ((a.y = b.bottom - this.halfHeight - this.radius), (this.velocity.y *= e), (this.blocked.down = !0));
                    } else
                        a.x < b.x && c.left ? ((a.x = b.x), (this.velocity.x *= d), (this.blocked.left = !0)) : this.right > b.right && c.right && ((a.x = b.right - this.width), (this.velocity.x *= d), (this.blocked.right = !0)),
                            a.y < b.y && c.up ? ((a.y = b.y), (this.velocity.y *= e), (this.blocked.up = !0)) : this.bottom > b.bottom && c.down && ((a.y = b.bottom - this.height), (this.velocity.y *= e), (this.blocked.down = !0));
                    return this.blocked.up || this.blocked.down || this.blocked.left || this.blocked.right;
                },
                moveFrom: function (a, b, c) {
                    return (
                        void 0 === b && (b = this.speed),
                        0 !== b &&
                            (void 0 === c ? ((d = this.angle), (c = this.game.math.radToDeg(d))) : (d = this.game.math.degToRad(c)),
                            (this.moveTimer = 0),
                            (this.moveDuration = a),
                            0 === c || 180 === c ? this.velocity.set(Math.cos(d) * b, 0) : 90 === c || 270 === c ? this.velocity.set(0, Math.sin(d) * b) : this.velocity.set(Math.cos(d) * b, Math.sin(d) * b),
                            (this.isMoving = !0))
                    );
                    var d;
                },
                moveTo: function (a, b, d) {
                    var f,
                        e = b / (a / 1e3);
                    return (
                        0 !== e &&
                        (void 0 === d ? ((f = this.angle), (d = this.game.math.radToDeg(f))) : (f = this.game.math.degToRad(d)),
                        (b = Math.abs(b)),
                        (this.moveDuration = 0),
                        (this.moveDistance = b),
                        null === this.moveTarget && ((this.moveTarget = new c.Line()), (this.moveEnd = new c.Point())),
                        this.moveTarget.fromAngle(this.x, this.y, f, b),
                        this.moveEnd.set(this.moveTarget.end.x, this.moveTarget.end.y),
                        this.moveTarget.setTo(this.x, this.y, this.x, this.y),
                        0 === d || 180 === d ? this.velocity.set(Math.cos(f) * e, 0) : 90 === d || 270 === d ? this.velocity.set(0, Math.sin(f) * e) : this.velocity.set(Math.cos(f) * e, Math.sin(f) * e),
                        (this.isMoving = !0))
                    );
                },
                setSize: function (a, b, c, d) {
                    void 0 === c && (c = this.offset.x),
                        void 0 === d && (d = this.offset.y),
                        (this.sourceWidth = a),
                        (this.sourceHeight = b),
                        (this.width = this.sourceWidth * this._sx),
                        (this.height = this.sourceHeight * this._sy),
                        (this.halfWidth = Math.floor(this.width / 2)),
                        (this.halfHeight = Math.floor(this.height / 2)),
                        this.offset.setTo(c, d),
                        this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight),
                        (this.isCircle = !1),
                        (this.radius = 0);
                },
                setCircle: function (a, b, c) {
                    void 0 === b && (b = this.offset.x),
                        void 0 === c && (c = this.offset.y),
                        0 < a
                            ? ((this.isCircle = !0),
                              (this.radius = a),
                              (this.sourceWidth = 2 * a),
                              (this.sourceHeight = 2 * a),
                              (this.width = this.sourceWidth * this._sx),
                              (this.height = this.sourceHeight * this._sy),
                              (this.halfWidth = Math.floor(this.width / 2)),
                              (this.halfHeight = Math.floor(this.height / 2)),
                              this.offset.setTo(b, c),
                              this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight))
                            : (this.isCircle = !1);
                },
                reset: function (a, b) {
                    this.velocity.set(0),
                        this.acceleration.set(0),
                        (this.speed = 0),
                        (this.angularVelocity = 0),
                        (this.angularAcceleration = 0),
                        (this.position.x = a - this.sprite.anchor.x * this.sprite.width + this.sprite.scale.x * this.offset.x),
                        (this.position.x -= this.sprite.scale.x < 0 ? this.width : 0),
                        (this.position.y = b - this.sprite.anchor.y * this.sprite.height + this.sprite.scale.y * this.offset.y),
                        (this.position.y -= this.sprite.scale.y < 0 ? this.height : 0),
                        (this.prev.x = this.position.x),
                        (this.prev.y = this.position.y),
                        (this.rotation = this.sprite.angle),
                        (this.preRotation = this.rotation),
                        (this._sx = this.sprite.scale.x),
                        (this._sy = this.sprite.scale.y),
                        this.center.setTo(this.position.x + this.halfWidth, this.position.y + this.halfHeight);
                },
                getBounds: function (a) {
                    return (
                        this.isCircle
                            ? ((a.x = this.center.x - this.radius), (a.y = this.center.y - this.radius), (a.right = this.center.x + this.radius), (a.bottom = this.center.y + this.radius))
                            : ((a.x = this.x), (a.y = this.y), (a.right = this.right), (a.bottom = this.bottom)),
                        a
                    );
                },
                hitTest: function (a, b) {
                    return this.isCircle ? c.Circle.contains(this, a, b) : c.Rectangle.contains(this, a, b);
                },
                onFloor: function () {
                    return this.blocked.down;
                },
                onCeiling: function () {
                    return this.blocked.up;
                },
                onWall: function () {
                    return this.blocked.left || this.blocked.right;
                },
                deltaAbsX: function () {
                    return 0 < this.deltaX() ? this.deltaX() : -this.deltaX();
                },
                deltaAbsY: function () {
                    return 0 < this.deltaY() ? this.deltaY() : -this.deltaY();
                },
                deltaX: function () {
                    return this.position.x - this.prev.x;
                },
                deltaY: function () {
                    return this.position.y - this.prev.y;
                },
                deltaZ: function () {
                    return this.rotation - this.preRotation;
                },
                destroy: function () {
                    this.sprite.parent && this.sprite.parent instanceof c.Group && this.sprite.parent.removeFromHash(this.sprite), (this.sprite.body = null), (this.sprite = null);
                },
            }),
            Object.defineProperty(c.Physics.Arcade.Body.prototype, "left", {
                get: function () {
                    return this.position.x;
                },
            }),
            Object.defineProperty(c.Physics.Arcade.Body.prototype, "right", {
                get: function () {
                    return this.position.x + this.width;
                },
            }),
            Object.defineProperty(c.Physics.Arcade.Body.prototype, "top", {
                get: function () {
                    return this.position.y;
                },
            }),
            Object.defineProperty(c.Physics.Arcade.Body.prototype, "bottom", {
                get: function () {
                    return this.position.y + this.height;
                },
            }),
            Object.defineProperty(c.Physics.Arcade.Body.prototype, "x", {
                get: function () {
                    return this.position.x;
                },
                set: function (a) {
                    this.position.x = a;
                },
            }),
            Object.defineProperty(c.Physics.Arcade.Body.prototype, "y", {
                get: function () {
                    return this.position.y;
                },
                set: function (a) {
                    this.position.y = a;
                },
            }),
            (c.Physics.Arcade.Body.render = function (a, b, c, d) {
                void 0 === d && (d = !0),
                    (c = c || "rgba(0,255,0,0.4)"),
                    (a.fillStyle = c),
                    (a.strokeStyle = c),
                    b.isCircle
                        ? (a.beginPath(), a.arc(b.center.x - b.game.camera.x, b.center.y - b.game.camera.y, b.radius, 0, 2 * Math.PI), d ? a.fill() : a.stroke())
                        : d
                        ? a.fillRect(b.position.x - b.game.camera.x, b.position.y - b.game.camera.y, b.width, b.height)
                        : a.strokeRect(b.position.x - b.game.camera.x, b.position.y - b.game.camera.y, b.width, b.height);
            }),
            (c.Physics.Arcade.Body.renderBodyInfo = function (a, b) {
                a.line("x: " + b.x.toFixed(2), "y: " + b.y.toFixed(2), "width: " + b.width, "height: " + b.height),
                    a.line("velocity x: " + b.velocity.x.toFixed(2), "y: " + b.velocity.y.toFixed(2), "deltaX: " + b._dx.toFixed(2), "deltaY: " + b._dy.toFixed(2)),
                    a.line("acceleration x: " + b.acceleration.x.toFixed(2), "y: " + b.acceleration.y.toFixed(2), "speed: " + b.speed.toFixed(2), "angle: " + b.angle.toFixed(2)),
                    a.line("gravity x: " + b.gravity.x, "y: " + b.gravity.y, "bounce x: " + b.bounce.x.toFixed(2), "y: " + b.bounce.y.toFixed(2)),
                    a.line("touching left: " + b.touching.left, "right: " + b.touching.right, "up: " + b.touching.up, "down: " + b.touching.down),
                    a.line("blocked left: " + b.blocked.left, "right: " + b.blocked.right, "up: " + b.blocked.up, "down: " + b.blocked.down);
            }),
            (c.Physics.Arcade.Body.prototype.constructor = c.Physics.Arcade.Body),
            (c.Physics.Arcade.TilemapCollision = function () {}),
            (c.Physics.Arcade.TilemapCollision.prototype = {
                TILE_BIAS: 16,
                collideSpriteVsTilemapLayer: function (a, b, c, d, e, f) {
                    if (a.body) {
                        var g = b.getTiles(a.body.position.x - a.body.tilePadding.x, a.body.position.y - a.body.tilePadding.y, a.body.width + a.body.tilePadding.x, a.body.height + a.body.tilePadding.y, !1, !1);
                        if (0 !== g.length)
                            for (var h = 0; h < g.length; h++)
                                d ? d.call(e, a, g[h]) && this.separateTile(h, a.body, g[h], b, f) && (this._total++, c && c.call(e, a, g[h])) : this.separateTile(h, a.body, g[h], b, f) && (this._total++, c && c.call(e, a, g[h]));
                    }
                },
                collideGroupVsTilemapLayer: function (a, b, c, d, e, f) {
                    if (0 !== a.length) for (var g = 0; g < a.children.length; g++) a.children[g].exists && this.collideSpriteVsTilemapLayer(a.children[g], b, c, d, e, f);
                },
                separateTile: function (a, b, c, d, e) {
                    if (!b.enable) return !1;
                    var f = d.fixedToCamera ? 0 : d.position.x,
                        g = d.fixedToCamera ? 0 : d.position.y;
                    if (!c.intersects(b.position.x - f, b.position.y - g, b.right - f, b.bottom - g)) return !1;
                    if (e) return !0;
                    if (c.collisionCallback && !c.collisionCallback.call(c.collisionCallbackContext, b.sprite, c)) return !1;
                    if (void 0 !== c.layer.callbacks && c.layer.callbacks[c.index] && !c.layer.callbacks[c.index].callback.call(c.layer.callbacks[c.index].callbackContext, b.sprite, c)) return !1;
                    if (!(c.faceLeft || c.faceRight || c.faceTop || c.faceBottom)) return !1;
                    var h = 0,
                        i = 0,
                        j = 0,
                        k = 1;
                    if (
                        (b.deltaAbsX() > b.deltaAbsY() ? (j = -1) : b.deltaAbsX() < b.deltaAbsY() && (k = -1),
                        0 !== b.deltaX() &&
                            0 !== b.deltaY() &&
                            (c.faceLeft || c.faceRight) &&
                            (c.faceTop || c.faceBottom) &&
                            ((j = Math.min(Math.abs(b.position.x - f - c.right), Math.abs(b.right - f - c.left))), (k = Math.min(Math.abs(b.position.y - g - c.bottom), Math.abs(b.bottom - g - c.top)))),
                        j < k)
                    ) {
                        if ((c.faceLeft || c.faceRight) && 0 !== (h = this.tileCheckX(b, c, d)) && !c.intersects(b.position.x - f, b.position.y - g, b.right - f, b.bottom - g)) return !0;
                        (c.faceTop || c.faceBottom) && (i = this.tileCheckY(b, c, d));
                    } else {
                        if ((c.faceTop || c.faceBottom) && 0 !== (i = this.tileCheckY(b, c, d)) && !c.intersects(b.position.x - f, b.position.y - g, b.right - f, b.bottom - g)) return !0;
                        (c.faceLeft || c.faceRight) && (h = this.tileCheckX(b, c, d));
                    }
                    return 0 !== h || 0 !== i;
                },
                tileCheckX: function (a, b, c) {
                    var d = 0,
                        e = c.fixedToCamera ? 0 : c.position.x;
                    return (
                        a.deltaX() < 0 && !a.blocked.left && b.collideRight && a.checkCollision.left
                            ? b.faceRight && a.x - e < b.right && (d = a.x - e - b.right) < -this.TILE_BIAS && (d = 0)
                            : 0 < a.deltaX() && !a.blocked.right && b.collideLeft && a.checkCollision.right && b.faceLeft && a.right - e > b.left && (d = a.right - e - b.left) > this.TILE_BIAS && (d = 0),
                        0 !== d && (a.customSeparateX ? (a.overlapX = d) : this.processTileSeparationX(a, d)),
                        d
                    );
                },
                tileCheckY: function (a, b, c) {
                    var d = 0,
                        e = c.fixedToCamera ? 0 : c.position.y;
                    return (
                        a.deltaY() < 0 && !a.blocked.up && b.collideDown && a.checkCollision.up
                            ? b.faceBottom && a.y - e < b.bottom && (d = a.y - e - b.bottom) < -this.TILE_BIAS && (d = 0)
                            : 0 < a.deltaY() && !a.blocked.down && b.collideUp && a.checkCollision.down && b.faceTop && a.bottom - e > b.top && (d = a.bottom - e - b.top) > this.TILE_BIAS && (d = 0),
                        0 !== d && (a.customSeparateY ? (a.overlapY = d) : this.processTileSeparationY(a, d)),
                        d
                    );
                },
                processTileSeparationX: function (a, b) {
                    b < 0 ? (a.blocked.left = !0) : 0 < b && (a.blocked.right = !0), (a.position.x -= b), 0 === a.bounce.x ? (a.velocity.x = 0) : (a.velocity.x = -a.velocity.x * a.bounce.x);
                },
                processTileSeparationY: function (a, b) {
                    b < 0 ? (a.blocked.up = !0) : 0 < b && (a.blocked.down = !0), (a.position.y -= b), 0 === a.bounce.y ? (a.velocity.y = 0) : (a.velocity.y = -a.velocity.y * a.bounce.y);
                },
            }),
            c.Utils.mixinPrototype(c.Physics.Arcade.prototype, c.Physics.Arcade.TilemapCollision.prototype),
            (p2.Body.prototype.parent = null),
            (p2.Spring.prototype.parent = null),
            (c.Physics.P2 = function (a, b) {
                (this.game = a),
                    void 0 === b ? (b = { gravity: [0, 0], broadphase: new p2.SAPBroadphase() }) : (b.hasOwnProperty("gravity") || (b.gravity = [0, 0]), b.hasOwnProperty("broadphase") || (b.broadphase = new p2.SAPBroadphase())),
                    (this.config = b),
                    (this.world = new p2.World(this.config)),
                    (this.frameRate = 1 / 60),
                    (this.useElapsedTime = !1),
                    (this.paused = !1),
                    (this.materials = []),
                    (this.gravity = new c.Physics.P2.InversePointProxy(this, this.world.gravity)),
                    (this.walls = { left: null, right: null, top: null, bottom: null }),
                    (this.onBodyAdded = new c.Signal()),
                    (this.onBodyRemoved = new c.Signal()),
                    (this.onSpringAdded = new c.Signal()),
                    (this.onSpringRemoved = new c.Signal()),
                    (this.onConstraintAdded = new c.Signal()),
                    (this.onConstraintRemoved = new c.Signal()),
                    (this.onContactMaterialAdded = new c.Signal()),
                    (this.onContactMaterialRemoved = new c.Signal()),
                    (this.postBroadphaseCallback = null),
                    (this.callbackContext = null),
                    (this.onBeginContact = new c.Signal()),
                    (this.onEndContact = new c.Signal()),
                    b.hasOwnProperty("mpx") && b.hasOwnProperty("pxm") && b.hasOwnProperty("mpxi") && b.hasOwnProperty("pxmi") && ((this.mpx = b.mpx), (this.mpxi = b.mpxi), (this.pxm = b.pxm), (this.pxmi = b.pxmi)),
                    this.world.on("beginContact", this.beginContactHandler, this),
                    this.world.on("endContact", this.endContactHandler, this),
                    (this.collisionGroups = []),
                    (this.nothingCollisionGroup = new c.Physics.P2.CollisionGroup(1)),
                    (this.boundsCollisionGroup = new c.Physics.P2.CollisionGroup(2)),
                    (this.everythingCollisionGroup = new c.Physics.P2.CollisionGroup(2147483648)),
                    (this.boundsCollidesWith = []),
                    (this._toRemove = []),
                    (this._collisionGroupID = 2),
                    (this._boundsLeft = !0),
                    (this._boundsRight = !0),
                    (this._boundsTop = !0),
                    (this._boundsBottom = !0),
                    (this._boundsOwnGroup = !1),
                    this.setBoundsToWorld(!0, !0, !0, !0, !1);
            }),
            (c.Physics.P2.prototype = {
                removeBodyNextStep: function (a) {
                    this._toRemove.push(a);
                },
                preUpdate: function () {
                    for (var a = this._toRemove.length; a--; ) this.removeBody(this._toRemove[a]);
                    this._toRemove.length = 0;
                },
                enable: function (a, b, d) {
                    void 0 === b && (b = !1), void 0 === d && (d = !0);
                    var e = 1;
                    if (Array.isArray(a))
                        for (e = a.length; e--; ) a[e] instanceof c.Group ? this.enable(a[e].children, b, d) : (this.enableBody(a[e], b), d && a[e].hasOwnProperty("children") && 0 < a[e].children.length && this.enable(a[e], b, !0));
                    else a instanceof c.Group ? this.enable(a.children, b, d) : (this.enableBody(a, b), d && a.hasOwnProperty("children") && 0 < a.children.length && this.enable(a.children, b, !0));
                },
                enableBody: function (a, b) {
                    a.hasOwnProperty("body") && null === a.body && ((a.body = new c.Physics.P2.Body(this.game, a, a.x, a.y, 1)), (a.body.debug = b), void 0 !== a.anchor && a.anchor.set(0.5));
                },
                setImpactEvents: function (a) {
                    a ? this.world.on("impact", this.impactHandler, this) : this.world.off("impact", this.impactHandler, this);
                },
                setPostBroadphaseCallback: function (a, b) {
                    (this.postBroadphaseCallback = a), (this.callbackContext = b), null !== a ? this.world.on("postBroadphase", this.postBroadphaseHandler, this) : this.world.off("postBroadphase", this.postBroadphaseHandler, this);
                },
                postBroadphaseHandler: function (a) {
                    if (this.postBroadphaseCallback && 0 !== a.pairs.length)
                        for (var b = a.pairs.length - 2; 0 <= b; b -= 2)
                            a.pairs[b].parent && a.pairs[b + 1].parent && !this.postBroadphaseCallback.call(this.callbackContext, a.pairs[b].parent, a.pairs[b + 1].parent) && a.pairs.splice(b, 2);
                },
                impactHandler: function (a) {
                    if (a.bodyA.parent && a.bodyB.parent) {
                        var b = a.bodyA.parent,
                            c = a.bodyB.parent;
                        b._bodyCallbacks[a.bodyB.id] && b._bodyCallbacks[a.bodyB.id].call(b._bodyCallbackContext[a.bodyB.id], b, c, a.shapeA, a.shapeB),
                            c._bodyCallbacks[a.bodyA.id] && c._bodyCallbacks[a.bodyA.id].call(c._bodyCallbackContext[a.bodyA.id], c, b, a.shapeB, a.shapeA),
                            b._groupCallbacks[a.shapeB.collisionGroup] && b._groupCallbacks[a.shapeB.collisionGroup].call(b._groupCallbackContext[a.shapeB.collisionGroup], b, c, a.shapeA, a.shapeB),
                            c._groupCallbacks[a.shapeA.collisionGroup] && c._groupCallbacks[a.shapeA.collisionGroup].call(c._groupCallbackContext[a.shapeA.collisionGroup], c, b, a.shapeB, a.shapeA);
                    }
                },
                beginContactHandler: function (a) {
                    a.bodyA &&
                        a.bodyB &&
                        (this.onBeginContact.dispatch(a.bodyA, a.bodyB, a.shapeA, a.shapeB, a.contactEquations),
                        a.bodyA.parent && a.bodyA.parent.onBeginContact.dispatch(a.bodyB.parent, a.bodyB, a.shapeA, a.shapeB, a.contactEquations),
                        a.bodyB.parent && a.bodyB.parent.onBeginContact.dispatch(a.bodyA.parent, a.bodyA, a.shapeB, a.shapeA, a.contactEquations));
                },
                endContactHandler: function (a) {
                    a.bodyA &&
                        a.bodyB &&
                        (this.onEndContact.dispatch(a.bodyA, a.bodyB, a.shapeA, a.shapeB),
                        a.bodyA.parent && a.bodyA.parent.onEndContact.dispatch(a.bodyB.parent, a.bodyB, a.shapeA, a.shapeB),
                        a.bodyB.parent && a.bodyB.parent.onEndContact.dispatch(a.bodyA.parent, a.bodyA, a.shapeB, a.shapeA));
                },
                setBoundsToWorld: function (a, b, c, d, e) {
                    this.setBounds(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height, a, b, c, d, e);
                },
                setWorldMaterial: function (a, b, c, d, e) {
                    void 0 === b && (b = !0),
                        void 0 === c && (c = !0),
                        void 0 === d && (d = !0),
                        void 0 === e && (e = !0),
                        b && this.walls.left && (this.walls.left.shapes[0].material = a),
                        c && this.walls.right && (this.walls.right.shapes[0].material = a),
                        d && this.walls.top && (this.walls.top.shapes[0].material = a),
                        e && this.walls.bottom && (this.walls.bottom.shapes[0].material = a);
                },
                updateBoundsCollisionGroup: function (a) {
                    void 0 === a && (a = !0);
                    var b = a ? this.boundsCollisionGroup.mask : this.everythingCollisionGroup.mask;
                    this.walls.left && (this.walls.left.shapes[0].collisionGroup = b),
                        this.walls.right && (this.walls.right.shapes[0].collisionGroup = b),
                        this.walls.top && (this.walls.top.shapes[0].collisionGroup = b),
                        this.walls.bottom && (this.walls.bottom.shapes[0].collisionGroup = b),
                        (this._boundsOwnGroup = a);
                },
                setBounds: function (a, b, c, d, e, f, g, h, i) {
                    void 0 === e && (e = this._boundsLeft),
                        void 0 === f && (f = this._boundsRight),
                        void 0 === g && (g = this._boundsTop),
                        void 0 === h && (h = this._boundsBottom),
                        void 0 === i && (i = this._boundsOwnGroup),
                        this.setupWall(e, "left", a, b, 1.5707963267948966, i),
                        this.setupWall(f, "right", a + c, b, -1.5707963267948966, i),
                        this.setupWall(g, "top", a, b, -3.141592653589793, i),
                        this.setupWall(h, "bottom", a, b + d, 0, i),
                        (this._boundsLeft = e),
                        (this._boundsRight = f),
                        (this._boundsTop = g),
                        (this._boundsBottom = h),
                        (this._boundsOwnGroup = i);
                },
                setupWall: function (a, b, c, d, e, f) {
                    a
                        ? (this.walls[b]
                              ? (this.walls[b].position = [this.pxmi(c), this.pxmi(d)])
                              : ((this.walls[b] = new p2.Body({ mass: 0, position: [this.pxmi(c), this.pxmi(d)], angle: e })), this.walls[b].addShape(new p2.Plane()), this.world.addBody(this.walls[b])),
                          f && (this.walls[b].shapes[0].collisionGroup = this.boundsCollisionGroup.mask))
                        : this.walls[b] && (this.world.removeBody(this.walls[b]), (this.walls[b] = null));
                },
                pause: function () {
                    this.paused = !0;
                },
                resume: function () {
                    this.paused = !1;
                },
                update: function () {
                    this.paused || (this.useElapsedTime ? this.world.step(this.game.time.physicsElapsed) : this.world.step(this.frameRate));
                },
                reset: function () {
                    this.world.on("beginContact", this.beginContactHandler, this),
                        this.world.on("endContact", this.endContactHandler, this),
                        (this.nothingCollisionGroup = new c.Physics.P2.CollisionGroup(1)),
                        (this.boundsCollisionGroup = new c.Physics.P2.CollisionGroup(2)),
                        (this.everythingCollisionGroup = new c.Physics.P2.CollisionGroup(2147483648)),
                        (this._collisionGroupID = 2),
                        this.setBoundsToWorld(!0, !0, !0, !0, !1);
                },
                clear: function () {
                    (this.world.time = 0), (this.world.fixedStepTime = 0), this.world.solver && this.world.solver.equations.length && this.world.solver.removeAllEquations();
                    for (var a = this.world.constraints, b = a.length - 1; 0 <= b; b--) this.world.removeConstraint(a[b]);
                    var c = this.world.bodies;
                    for (b = c.length - 1; 0 <= b; b--) this.world.removeBody(c[b]);
                    var d = this.world.springs;
                    for (b = d.length - 1; 0 <= b; b--) this.world.removeSpring(d[b]);
                    var e = this.world.contactMaterials;
                    for (b = e.length - 1; 0 <= b; b--) this.world.removeContactMaterial(e[b]);
                    this.world.off("beginContact", this.beginContactHandler, this),
                        this.world.off("endContact", this.endContactHandler, this),
                        (this.postBroadphaseCallback = null),
                        (this.callbackContext = null),
                        (this.impactCallback = null),
                        (this.collisionGroups = []),
                        (this._toRemove = []),
                        (this.boundsCollidesWith = []),
                        (this.walls = { left: null, right: null, top: null, bottom: null });
                },
                destroy: function () {
                    this.clear(), (this.game = null);
                },
                addBody: function (a) {
                    return !a.data.world && (this.world.addBody(a.data), this.onBodyAdded.dispatch(a), !0);
                },
                removeBody: function (a) {
                    return a.data.world === this.world && (this.world.removeBody(a.data), this.onBodyRemoved.dispatch(a)), a;
                },
                addSpring: function (a) {
                    return a instanceof c.Physics.P2.Spring || a instanceof c.Physics.P2.RotationalSpring ? this.world.addSpring(a.data) : this.world.addSpring(a), this.onSpringAdded.dispatch(a), a;
                },
                removeSpring: function (a) {
                    return a instanceof c.Physics.P2.Spring || a instanceof c.Physics.P2.RotationalSpring ? this.world.removeSpring(a.data) : this.world.removeSpring(a), this.onSpringRemoved.dispatch(a), a;
                },
                createDistanceConstraint: function (a, b, d, e, f, g) {
                    if (((a = this.getBody(a)), (b = this.getBody(b)), a && b)) return this.addConstraint(new c.Physics.P2.DistanceConstraint(this, a, b, d, e, f, g));
                },
                createGearConstraint: function (a, b, d, e) {
                    if (((a = this.getBody(a)), (b = this.getBody(b)), a && b)) return this.addConstraint(new c.Physics.P2.GearConstraint(this, a, b, d, e));
                },
                createRevoluteConstraint: function (a, b, d, e, f, g) {
                    if (((a = this.getBody(a)), (d = this.getBody(d)), a && d)) return this.addConstraint(new c.Physics.P2.RevoluteConstraint(this, a, b, d, e, f, g));
                },
                createLockConstraint: function (a, b, d, e, f) {
                    if (((a = this.getBody(a)), (b = this.getBody(b)), a && b)) return this.addConstraint(new c.Physics.P2.LockConstraint(this, a, b, d, e, f));
                },
                createPrismaticConstraint: function (a, b, d, e, f, g, h) {
                    if (((a = this.getBody(a)), (b = this.getBody(b)), a && b)) return this.addConstraint(new c.Physics.P2.PrismaticConstraint(this, a, b, d, e, f, g, h));
                },
                addConstraint: function (a) {
                    return this.world.addConstraint(a), this.onConstraintAdded.dispatch(a), a;
                },
                removeConstraint: function (a) {
                    return this.world.removeConstraint(a), this.onConstraintRemoved.dispatch(a), a;
                },
                addContactMaterial: function (a) {
                    return this.world.addContactMaterial(a), this.onContactMaterialAdded.dispatch(a), a;
                },
                removeContactMaterial: function (a) {
                    return this.world.removeContactMaterial(a), this.onContactMaterialRemoved.dispatch(a), a;
                },
                getContactMaterial: function (a, b) {
                    return this.world.getContactMaterial(a, b);
                },
                setMaterial: function (a, b) {
                    for (var c = b.length; c--; ) b[c].setMaterial(a);
                },
                createMaterial: function (a, b) {
                    a = a || "";
                    var d = new c.Physics.P2.Material(a);
                    return this.materials.push(d), void 0 !== b && b.setMaterial(d), d;
                },
                createContactMaterial: function (a, b, d) {
                    void 0 === a && (a = this.createMaterial()), void 0 === b && (b = this.createMaterial());
                    var e = new c.Physics.P2.ContactMaterial(a, b, d);
                    return this.addContactMaterial(e);
                },
                getBodies: function () {
                    for (var a = [], b = this.world.bodies.length; b--; ) a.push(this.world.bodies[b].parent);
                    return a;
                },
                getBody: function (a) {
                    return a instanceof p2.Body ? a : a instanceof c.Physics.P2.Body ? a.data : a.body && a.body.type === c.Physics.P2JS ? a.body.data : null;
                },
                getSprings: function () {
                    for (var a = [], b = this.world.springs.length; b--; ) a.push(this.world.springs[b].parent);
                    return a;
                },
                getConstraints: function () {
                    for (var a = [], b = this.world.constraints.length; b--; ) a.push(this.world.constraints[b]);
                    return a;
                },
                hitTest: function (a, b, d, e) {
                    void 0 === b && (b = this.world.bodies), void 0 === d && (d = 5), void 0 === e && (e = !1);
                    for (var f = [this.pxmi(a.x), this.pxmi(a.y)], g = [], h = b.length; h--; )
                        b[h] instanceof c.Physics.P2.Body && (!e || b[h].data.type !== p2.Body.STATIC)
                            ? g.push(b[h].data)
                            : b[h] instanceof p2.Body && b[h].parent && (!e || b[h].type !== p2.Body.STATIC)
                            ? g.push(b[h])
                            : b[h] instanceof c.Sprite && b[h].hasOwnProperty("body") && (!e || b[h].body.data.type !== p2.Body.STATIC) && g.push(b[h].body.data);
                    return this.world.hitTest(f, g, d);
                },
                toJSON: function () {
                    return this.world.toJSON();
                },
                createCollisionGroup: function (a) {
                    var b = Math.pow(2, this._collisionGroupID);
                    this.walls.left && (this.walls.left.shapes[0].collisionMask = this.walls.left.shapes[0].collisionMask | b),
                        this.walls.right && (this.walls.right.shapes[0].collisionMask = this.walls.right.shapes[0].collisionMask | b),
                        this.walls.top && (this.walls.top.shapes[0].collisionMask = this.walls.top.shapes[0].collisionMask | b),
                        this.walls.bottom && (this.walls.bottom.shapes[0].collisionMask = this.walls.bottom.shapes[0].collisionMask | b),
                        this._collisionGroupID++;
                    var d = new c.Physics.P2.CollisionGroup(b);
                    return this.collisionGroups.push(d), a && this.setCollisionGroup(a, d), d;
                },
                setCollisionGroup: function (a, b) {
                    if (a instanceof c.Group) for (var d = 0; d < a.total; d++) a.children[d].body && a.children[d].body.type === c.Physics.P2JS && a.children[d].body.setCollisionGroup(b);
                    else a.body.setCollisionGroup(b);
                },
                createSpring: function (a, b, d, e, f, g, h, i, j) {
                    if (((a = this.getBody(a)), (b = this.getBody(b)), a && b)) return this.addSpring(new c.Physics.P2.Spring(this, a, b, d, e, f, g, h, i, j));
                },
                createRotationalSpring: function (a, b, d, e, f) {
                    if (((a = this.getBody(a)), (b = this.getBody(b)), a && b)) return this.addSpring(new c.Physics.P2.RotationalSpring(this, a, b, d, e, f));
                },
                createBody: function (a, b, d, e, f, g) {
                    void 0 === e && (e = !1);
                    var h = new c.Physics.P2.Body(this.game, null, a, b, d);
                    return !(g && !h.addPolygon(f, g)) && (e && this.world.addBody(h.data), h);
                },
                createParticle: function (a, b, d, e, f, g) {
                    void 0 === e && (e = !1);
                    var h = new c.Physics.P2.Body(this.game, null, a, b, d);
                    return !(g && !h.addPolygon(f, g)) && (e && this.world.addBody(h.data), h);
                },
                convertCollisionObjects: function (a, b, c) {
                    void 0 === c && (c = !0);
                    for (var d = [], e = 0, f = a.collision[b].length; e < f; e++) {
                        var g = a.collision[b][e],
                            h = this.createBody(g.x, g.y, 0, c, {}, g.polyline);
                        h && d.push(h);
                    }
                    return d;
                },
                clearTilemapLayerBodies: function (a, b) {
                    b = a.getLayer(b);
                    for (var c = a.layers[b].bodies.length; c--; ) a.layers[b].bodies[c].destroy();
                    a.layers[b].bodies.length = 0;
                },
                convertTilemap: function (a, b, c, d) {
                    (b = a.getLayer(b)), void 0 === c && (c = !0), void 0 === d && (d = !0), this.clearTilemapLayerBodies(a, b);
                    for (var e = 0, f = 0, g = 0, h = 0, i = a.layers[b].height; h < i; h++)
                        for (var j = (e = 0), k = a.layers[b].width; j < k; j++) {
                            var l = a.layers[b].data[h][j];
                            if (l && -1 < l.index && l.collides)
                                if (d) {
                                    var m = a.getTileRight(b, j, h);
                                    if ((0 === e && ((f = l.x * l.width), (g = l.y * l.height), (e = l.width)), m && m.collides)) e += l.width;
                                    else (n = this.createBody(f, g, 0, !1)).addRectangle(e, l.height, e / 2, l.height / 2, 0), c && this.addBody(n), a.layers[b].bodies.push(n), (e = 0);
                                } else {
                                    var n;
                                    (n = this.createBody(l.x * l.width, l.y * l.height, 0, !1)).addRectangle(l.width, l.height, l.width / 2, l.height / 2, 0), c && this.addBody(n), a.layers[b].bodies.push(n);
                                }
                        }
                    return a.layers[b].bodies;
                },
                mpx: function (a) {
                    return 20 * a;
                },
                pxm: function (a) {
                    return 0.05 * a;
                },
                mpxi: function (a) {
                    return -20 * a;
                },
                pxmi: function (a) {
                    return -0.05 * a;
                },
            }),
            Object.defineProperty(c.Physics.P2.prototype, "friction", {
                get: function () {
                    return this.world.defaultContactMaterial.friction;
                },
                set: function (a) {
                    this.world.defaultContactMaterial.friction = a;
                },
            }),
            Object.defineProperty(c.Physics.P2.prototype, "restitution", {
                get: function () {
                    return this.world.defaultContactMaterial.restitution;
                },
                set: function (a) {
                    this.world.defaultContactMaterial.restitution = a;
                },
            }),
            Object.defineProperty(c.Physics.P2.prototype, "contactMaterial", {
                get: function () {
                    return this.world.defaultContactMaterial;
                },
                set: function (a) {
                    this.world.defaultContactMaterial = a;
                },
            }),
            Object.defineProperty(c.Physics.P2.prototype, "applySpringForces", {
                get: function () {
                    return this.world.applySpringForces;
                },
                set: function (a) {
                    this.world.applySpringForces = a;
                },
            }),
            Object.defineProperty(c.Physics.P2.prototype, "applyDamping", {
                get: function () {
                    return this.world.applyDamping;
                },
                set: function (a) {
                    this.world.applyDamping = a;
                },
            }),
            Object.defineProperty(c.Physics.P2.prototype, "applyGravity", {
                get: function () {
                    return this.world.applyGravity;
                },
                set: function (a) {
                    this.world.applyGravity = a;
                },
            }),
            Object.defineProperty(c.Physics.P2.prototype, "solveConstraints", {
                get: function () {
                    return this.world.solveConstraints;
                },
                set: function (a) {
                    this.world.solveConstraints = a;
                },
            }),
            Object.defineProperty(c.Physics.P2.prototype, "time", {
                get: function () {
                    return this.world.time;
                },
            }),
            Object.defineProperty(c.Physics.P2.prototype, "emitImpactEvent", {
                get: function () {
                    return this.world.emitImpactEvent;
                },
                set: function (a) {
                    this.world.emitImpactEvent = a;
                },
            }),
            Object.defineProperty(c.Physics.P2.prototype, "sleepMode", {
                get: function () {
                    return this.world.sleepMode;
                },
                set: function (a) {
                    this.world.sleepMode = a;
                },
            }),
            Object.defineProperty(c.Physics.P2.prototype, "total", {
                get: function () {
                    return this.world.bodies.length;
                },
            }),
            (c.Physics.P2.FixtureList = function (a) {
                Array.isArray(a) || (a = [a]), (this.rawList = a), this.init(), this.parse(this.rawList);
            }),
            (c.Physics.P2.FixtureList.prototype = {
                init: function () {
                    (this.namedFixtures = {}), (this.groupedFixtures = []), (this.allFixtures = []);
                },
                setCategory: function (a, b) {
                    this.getFixtures(b).forEach(function (b) {
                        b.collisionGroup = a;
                    });
                },
                setMask: function (a, b) {
                    this.getFixtures(b).forEach(function (b) {
                        b.collisionMask = a;
                    });
                },
                setSensor: function (a, b) {
                    this.getFixtures(b).forEach(function (b) {
                        b.sensor = a;
                    });
                },
                setMaterial: function (a, b) {
                    this.getFixtures(b).forEach(function (b) {
                        b.material = a;
                    });
                },
                getFixtures: function (a) {
                    var b = [];
                    if (a) {
                        a instanceof Array || (a = [a]);
                        var c = this;
                        return (
                            a.forEach(function (a) {
                                c.namedFixtures[a] && b.push(c.namedFixtures[a]);
                            }),
                            this.flatten(b)
                        );
                    }
                    return this.allFixtures;
                },
                getFixtureByKey: function (a) {
                    return this.namedFixtures[a];
                },
                getGroup: function (a) {
                    return this.groupedFixtures[a];
                },
                parse: function () {
                    var a, b, c, d;
                    for (a in ((d = []), (c = this.rawList)))
                        (b = c[a]),
                            isNaN(a - 0) ? (this.namedFixtures[a] = this.flatten(b)) : ((this.groupedFixtures[a] = this.groupedFixtures[a] || []), (this.groupedFixtures[a] = this.groupedFixtures[a].concat(b))),
                            d.push((this.allFixtures = this.flatten(this.groupedFixtures)));
                },
                flatten: function (a) {
                    var b, c;
                    return (
                        (b = []),
                        (c = arguments.callee),
                        a.forEach(function (a) {
                            return Array.prototype.push.apply(b, Array.isArray(a) ? c(a) : [a]);
                        }),
                        b
                    );
                },
            }),
            (c.Physics.P2.PointProxy = function (a, b) {
                (this.world = a), (this.destination = b);
            }),
            (c.Physics.P2.PointProxy.prototype.constructor = c.Physics.P2.PointProxy),
            Object.defineProperty(c.Physics.P2.PointProxy.prototype, "x", {
                get: function () {
                    return this.world.mpx(this.destination[0]);
                },
                set: function (a) {
                    this.destination[0] = this.world.pxm(a);
                },
            }),
            Object.defineProperty(c.Physics.P2.PointProxy.prototype, "y", {
                get: function () {
                    return this.world.mpx(this.destination[1]);
                },
                set: function (a) {
                    this.destination[1] = this.world.pxm(a);
                },
            }),
            Object.defineProperty(c.Physics.P2.PointProxy.prototype, "mx", {
                get: function () {
                    return this.destination[0];
                },
                set: function (a) {
                    this.destination[0] = a;
                },
            }),
            Object.defineProperty(c.Physics.P2.PointProxy.prototype, "my", {
                get: function () {
                    return this.destination[1];
                },
                set: function (a) {
                    this.destination[1] = a;
                },
            }),
            (c.Physics.P2.InversePointProxy = function (a, b) {
                (this.world = a), (this.destination = b);
            }),
            (c.Physics.P2.InversePointProxy.prototype.constructor = c.Physics.P2.InversePointProxy),
            Object.defineProperty(c.Physics.P2.InversePointProxy.prototype, "x", {
                get: function () {
                    return this.world.mpxi(this.destination[0]);
                },
                set: function (a) {
                    this.destination[0] = this.world.pxmi(a);
                },
            }),
            Object.defineProperty(c.Physics.P2.InversePointProxy.prototype, "y", {
                get: function () {
                    return this.world.mpxi(this.destination[1]);
                },
                set: function (a) {
                    this.destination[1] = this.world.pxmi(a);
                },
            }),
            Object.defineProperty(c.Physics.P2.InversePointProxy.prototype, "mx", {
                get: function () {
                    return this.destination[0];
                },
                set: function (a) {
                    this.destination[0] = -a;
                },
            }),
            Object.defineProperty(c.Physics.P2.InversePointProxy.prototype, "my", {
                get: function () {
                    return this.destination[1];
                },
                set: function (a) {
                    this.destination[1] = -a;
                },
            }),
            (c.Physics.P2.Body = function (a, b, d, e, f) {
                (b = b || null),
                    (d = d || 0),
                    (e = e || 0),
                    void 0 === f && (f = 1),
                    (this.game = a),
                    (this.world = a.physics.p2),
                    (this.sprite = b),
                    (this.type = c.Physics.P2JS),
                    (this.offset = new c.Point()),
                    (this.data = new p2.Body({ position: [this.world.pxmi(d), this.world.pxmi(e)], mass: f })),
                    ((this.data.parent = this).velocity = new c.Physics.P2.InversePointProxy(this.world, this.data.velocity)),
                    (this.force = new c.Physics.P2.InversePointProxy(this.world, this.data.force)),
                    (this.gravity = new c.Point()),
                    (this.onBeginContact = new c.Signal()),
                    (this.onEndContact = new c.Signal()),
                    (this.collidesWith = []),
                    (this.removeNextStep = !1),
                    (this.debugBody = null),
                    (this.dirty = !1),
                    (this._collideWorldBounds = !0),
                    (this._bodyCallbacks = {}),
                    (this._bodyCallbackContext = {}),
                    (this._groupCallbacks = {}),
                    (this._groupCallbackContext = {}),
                    (this._reset = !1),
                    b && (this.setRectangleFromSprite(b), b.exists && this.game.physics.p2.addBody(this));
            }),
            (c.Physics.P2.Body.prototype = {
                createBodyCallback: function (a, b, c) {
                    var d = -1;
                    a.id ? (d = a.id) : a.body && (d = a.body.id), -1 < d && (null === b ? (delete this._bodyCallbacks[d], delete this._bodyCallbackContext[d]) : ((this._bodyCallbacks[d] = b), (this._bodyCallbackContext[d] = c)));
                },
                createGroupCallback: function (a, b, c) {
                    null === b ? (delete this._groupCallbacks[a.mask], delete this._groupCallbackContext[a.mask]) : ((this._groupCallbacks[a.mask] = b), (this._groupCallbackContext[a.mask] = c));
                },
                getCollisionMask: function () {
                    var a = 0;
                    this._collideWorldBounds && (a = this.game.physics.p2.boundsCollisionGroup.mask);
                    for (var b = 0; b < this.collidesWith.length; b++) a |= this.collidesWith[b].mask;
                    return a;
                },
                updateCollisionMask: function (a) {
                    var b = this.getCollisionMask();
                    if (void 0 === a) for (var c = this.data.shapes.length - 1; 0 <= c; c--) this.data.shapes[c].collisionMask = b;
                    else a.collisionMask = b;
                },
                setCollisionGroup: function (a, b) {
                    var c = this.getCollisionMask();
                    if (void 0 === b) for (var d = this.data.shapes.length - 1; 0 <= d; d--) (this.data.shapes[d].collisionGroup = a.mask), (this.data.shapes[d].collisionMask = c);
                    else (b.collisionGroup = a.mask), (b.collisionMask = c);
                },
                clearCollision: function (a, b, c) {
                    if ((void 0 === a && (a = !0), void 0 === b && (b = !0), void 0 === c))
                        for (var d = this.data.shapes.length - 1; 0 <= d; d--) a && (this.data.shapes[d].collisionGroup = null), b && (this.data.shapes[d].collisionMask = null);
                    else a && (c.collisionGroup = null), b && (c.collisionMask = null);
                    a && (this.collidesWith.length = 0);
                },
                removeCollisionGroup: function (a, b, c) {
                    var d;
                    if ((void 0 === b && (b = !0), Array.isArray(a)))
                        for (var e = 0; e < a.length; e++) -1 < (d = this.collidesWith.indexOf(a[e])) && (this.collidesWith.splice(d, 1), b && (delete this._groupCallbacks[a.mask], delete this._groupCallbackContext[a.mask]));
                    else -1 < (d = this.collidesWith.indexOf(a)) && (this.collidesWith.splice(d, 1), b && (delete this._groupCallbacks[a.mask], delete this._groupCallbackContext[a.mask]));
                    var f = this.getCollisionMask();
                    if (void 0 === c) for (e = this.data.shapes.length - 1; 0 <= e; e--) this.data.shapes[e].collisionMask = f;
                    else c.collisionMask = f;
                },
                collides: function (a, b, c, d) {
                    if (Array.isArray(a)) for (var e = 0; e < a.length; e++) -1 === this.collidesWith.indexOf(a[e]) && (this.collidesWith.push(a[e]), b && this.createGroupCallback(a[e], b, c));
                    else -1 === this.collidesWith.indexOf(a) && (this.collidesWith.push(a), b && this.createGroupCallback(a, b, c));
                    var f = this.getCollisionMask();
                    if (void 0 === d) for (e = this.data.shapes.length - 1; 0 <= e; e--) this.data.shapes[e].collisionMask = f;
                    else d.collisionMask = f;
                },
                adjustCenterOfMass: function () {
                    this.data.adjustCenterOfMass(), this.shapeChanged();
                },
                getVelocityAtPoint: function (a, b) {
                    return this.data.getVelocityAtPoint(a, b);
                },
                applyDamping: function (a) {
                    this.data.applyDamping(a);
                },
                applyImpulse: function (a, b, c) {
                    this.data.applyImpulse(a, [this.world.pxmi(b), this.world.pxmi(c)]);
                },
                applyImpulseLocal: function (a, b, c) {
                    this.data.applyImpulseLocal(a, [this.world.pxmi(b), this.world.pxmi(c)]);
                },
                applyForce: function (a, b, c) {
                    this.data.applyForce(a, [this.world.pxmi(b), this.world.pxmi(c)]);
                },
                setZeroForce: function () {
                    this.data.setZeroForce();
                },
                setZeroRotation: function () {
                    this.data.angularVelocity = 0;
                },
                setZeroVelocity: function () {
                    (this.data.velocity[0] = 0), (this.data.velocity[1] = 0);
                },
                setZeroDamping: function () {
                    (this.data.damping = 0), (this.data.angularDamping = 0);
                },
                toLocalFrame: function (a, b) {
                    return this.data.toLocalFrame(a, b);
                },
                toWorldFrame: function (a, b) {
                    return this.data.toWorldFrame(a, b);
                },
                rotateLeft: function (a) {
                    this.data.angularVelocity = this.world.pxm(-a);
                },
                rotateRight: function (a) {
                    this.data.angularVelocity = this.world.pxm(a);
                },
                moveForward: function (a) {
                    var b = this.world.pxmi(-a),
                        c = this.data.angle + Math.PI / 2;
                    (this.data.velocity[0] = b * Math.cos(c)), (this.data.velocity[1] = b * Math.sin(c));
                },
                moveBackward: function (a) {
                    var b = this.world.pxmi(-a),
                        c = this.data.angle + Math.PI / 2;
                    (this.data.velocity[0] = -b * Math.cos(c)), (this.data.velocity[1] = -b * Math.sin(c));
                },
                thrust: function (a) {
                    var b = this.world.pxmi(-a),
                        c = this.data.angle + Math.PI / 2;
                    (this.data.force[0] += b * Math.cos(c)), (this.data.force[1] += b * Math.sin(c));
                },
                thrustLeft: function (a) {
                    var b = this.world.pxmi(-a),
                        c = this.data.angle;
                    (this.data.force[0] += b * Math.cos(c)), (this.data.force[1] += b * Math.sin(c));
                },
                thrustRight: function (a) {
                    var b = this.world.pxmi(-a),
                        c = this.data.angle;
                    (this.data.force[0] -= b * Math.cos(c)), (this.data.force[1] -= b * Math.sin(c));
                },
                reverse: function (a) {
                    var b = this.world.pxmi(-a),
                        c = this.data.angle + Math.PI / 2;
                    (this.data.force[0] -= b * Math.cos(c)), (this.data.force[1] -= b * Math.sin(c));
                },
                moveLeft: function (a) {
                    this.data.velocity[0] = this.world.pxmi(-a);
                },
                moveRight: function (a) {
                    this.data.velocity[0] = this.world.pxmi(a);
                },
                moveUp: function (a) {
                    this.data.velocity[1] = this.world.pxmi(-a);
                },
                moveDown: function (a) {
                    this.data.velocity[1] = this.world.pxmi(a);
                },
                preUpdate: function () {
                    (this.dirty = !0), this.removeNextStep && (this.removeFromWorld(), (this.removeNextStep = !1));
                },
                postUpdate: function () {
                    (this.sprite.x = this.world.mpxi(this.data.position[0]) + this.offset.x),
                        (this.sprite.y = this.world.mpxi(this.data.position[1]) + this.offset.y),
                        this.fixedRotation || (this.sprite.rotation = this.data.angle),
                        this.debugBody && this.debugBody.updateSpriteTransform(),
                        (this.dirty = !1);
                },
                reset: function (a, b, c, d) {
                    void 0 === c && (c = !1), void 0 === d && (d = !1), this.setZeroForce(), this.setZeroVelocity(), this.setZeroRotation(), c && this.setZeroDamping(), d && (this.mass = 1), (this.x = a), (this.y = b);
                },
                addToWorld: function () {
                    if (this.game.physics.p2._toRemove) for (var a = 0; a < this.game.physics.p2._toRemove.length; a++) this.game.physics.p2._toRemove[a] === this && this.game.physics.p2._toRemove.splice(a, 1);
                    this.data.world !== this.game.physics.p2.world && this.game.physics.p2.addBody(this);
                },
                removeFromWorld: function () {
                    this.data.world === this.game.physics.p2.world && this.game.physics.p2.removeBodyNextStep(this);
                },
                destroy: function () {
                    this.removeFromWorld(),
                        this.clearShapes(),
                        (this._bodyCallbacks = {}),
                        (this._bodyCallbackContext = {}),
                        (this._groupCallbacks = {}),
                        (this._groupCallbackContext = {}),
                        this.debugBody && this.debugBody.destroy(!0, !0),
                        (this.debugBody = null),
                        this.sprite && ((this.sprite.body = null), (this.sprite = null));
                },
                clearShapes: function () {
                    for (var a = this.data.shapes.length; a--; ) this.data.removeShape(this.data.shapes[a]);
                    this.shapeChanged();
                },
                addShape: function (a, b, c, d) {
                    return void 0 === b && (b = 0), void 0 === c && (c = 0), void 0 === d && (d = 0), this.data.addShape(a, [this.world.pxmi(b), this.world.pxmi(c)], d), this.shapeChanged(), a;
                },
                addCircle: function (a, b, c, d) {
                    var e = new p2.Circle({ radius: this.world.pxm(a) });
                    return this.addShape(e, b, c, d);
                },
                addRectangle: function (a, b, c, d, e) {
                    var f = new p2.Box({ width: this.world.pxm(a), height: this.world.pxm(b) });
                    return this.addShape(f, c, d, e);
                },
                addPlane: function (a, b, c) {
                    var d = new p2.Plane();
                    return this.addShape(d, a, b, c);
                },
                addParticle: function (a, b, c) {
                    var d = new p2.Particle();
                    return this.addShape(d, a, b, c);
                },
                addLine: function (a, b, c, d) {
                    var e = new p2.Line({ length: this.world.pxm(a) });
                    return this.addShape(e, b, c, d);
                },
                addCapsule: function (a, b, c, d, e) {
                    var f = new p2.Capsule({ length: this.world.pxm(a), radius: this.world.pxm(b) });
                    return this.addShape(f, c, d, e);
                },
                addPolygon: function (a, b) {
                    (a = a || {}), Array.isArray(b) || (b = Array.prototype.slice.call(arguments, 1));
                    var c = [];
                    if (1 === b.length && Array.isArray(b[0])) c = b[0].slice(0);
                    else if (Array.isArray(b[0])) c = b.slice();
                    else if ("number" == typeof b[0]) for (var d = 0, e = b.length; d < e; d += 2) c.push([b[d], b[d + 1]]);
                    var f = c.length - 1;
                    c[f][0] === c[0][0] && c[f][1] === c[0][1] && c.pop();
                    for (var g = 0; g < c.length; g++) (c[g][0] = this.world.pxmi(c[g][0])), (c[g][1] = this.world.pxmi(c[g][1]));
                    var h = this.data.fromPolygon(c, a);
                    return this.shapeChanged(), h;
                },
                removeShape: function (a) {
                    var b = this.data.removeShape(a);
                    return this.shapeChanged(), b;
                },
                setCircle: function (a, b, c, d) {
                    return this.clearShapes(), this.addCircle(a, b, c, d);
                },
                setRectangle: function (a, b, c, d, e) {
                    return void 0 === a && (a = 16), void 0 === b && (b = 16), this.clearShapes(), this.addRectangle(a, b, c, d, e);
                },
                setRectangleFromSprite: function (a) {
                    return void 0 === a && (a = this.sprite), this.clearShapes(), this.addRectangle(a.width, a.height, 0, 0, a.rotation);
                },
                setMaterial: function (a, b) {
                    if (void 0 === b) for (var c = this.data.shapes.length - 1; 0 <= c; c--) this.data.shapes[c].material = a;
                    else b.material = a;
                },
                shapeChanged: function () {
                    this.debugBody && this.debugBody.draw();
                },
                addPhaserPolygon: function (a, b) {
                    for (var c = this.game.cache.getPhysicsData(a, b), d = [], e = 0; e < c.length; e++) {
                        var f = c[e],
                            g = this.addFixture(f);
                        (d[f.filter.group] = d[f.filter.group] || []), (d[f.filter.group] = d[f.filter.group].concat(g)), f.fixtureKey && (d[f.fixtureKey] = g);
                    }
                    return (this.data.aabbNeedsUpdate = !0), this.shapeChanged(), d;
                },
                addFixture: function (a) {
                    var b = [];
                    if (a.circle) {
                        ((c = new p2.Circle({ radius: this.world.pxm(a.circle.radius) })).collisionGroup = a.filter.categoryBits), (c.collisionMask = a.filter.maskBits), (c.sensor = a.isSensor);
                        var d = p2.vec2.create();
                        (d[0] = this.world.pxmi(a.circle.position[0] - this.sprite.width / 2)), (d[1] = this.world.pxmi(a.circle.position[1] - this.sprite.height / 2)), this.data.addShape(c, d), b.push(c);
                    } else
                        for (var e = a.polygons, f = p2.vec2.create(), g = 0; g < e.length; g++) {
                            for (var h = e[g], i = [], j = 0; j < h.length; j += 2) i.push([this.world.pxmi(h[j]), this.world.pxmi(h[j + 1])]);
                            for (var c = new p2.Convex({ vertices: i }), k = 0; k !== c.vertices.length; k++) {
                                var l = c.vertices[k];
                                p2.vec2.sub(l, l, c.centerOfMass);
                            }
                            p2.vec2.scale(f, c.centerOfMass, 1),
                                (f[0] -= this.world.pxmi(this.sprite.width / 2)),
                                (f[1] -= this.world.pxmi(this.sprite.height / 2)),
                                c.updateTriangles(),
                                c.updateCenterOfMass(),
                                c.updateBoundingRadius(),
                                (c.collisionGroup = a.filter.categoryBits),
                                (c.collisionMask = a.filter.maskBits),
                                (c.sensor = a.isSensor),
                                this.data.addShape(c, f),
                                b.push(c);
                        }
                    return b;
                },
                loadPolygon: function (a, b) {
                    if (null === a) var c = b;
                    else c = this.game.cache.getPhysicsData(a, b);
                    for (var d = p2.vec2.create(), e = 0; e < c.length; e++) {
                        for (var f = [], g = 0; g < c[e].shape.length; g += 2) f.push([this.world.pxmi(c[e].shape[g]), this.world.pxmi(c[e].shape[g + 1])]);
                        for (var h = new p2.Convex({ vertices: f }), i = 0; i !== h.vertices.length; i++) {
                            var j = h.vertices[i];
                            p2.vec2.sub(j, j, h.centerOfMass);
                        }
                        p2.vec2.scale(d, h.centerOfMass, 1),
                            (d[0] -= this.world.pxmi(this.sprite.width / 2)),
                            (d[1] -= this.world.pxmi(this.sprite.height / 2)),
                            h.updateTriangles(),
                            h.updateCenterOfMass(),
                            h.updateBoundingRadius(),
                            this.data.addShape(h, d);
                    }
                    return (this.data.aabbNeedsUpdate = !0), this.shapeChanged(), !0;
                },
            }),
            (c.Physics.P2.Body.prototype.constructor = c.Physics.P2.Body),
            (c.Physics.P2.Body.DYNAMIC = 1),
            (c.Physics.P2.Body.STATIC = 2),
            (c.Physics.P2.Body.KINEMATIC = 4),
            Object.defineProperty(c.Physics.P2.Body.prototype, "static", {
                get: function () {
                    return this.data.type === c.Physics.P2.Body.STATIC;
                },
                set: function (a) {
                    a && this.data.type !== c.Physics.P2.Body.STATIC
                        ? ((this.data.type = c.Physics.P2.Body.STATIC), (this.mass = 0))
                        : a || this.data.type !== c.Physics.P2.Body.STATIC || ((this.data.type = c.Physics.P2.Body.DYNAMIC), (this.mass = 1));
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "dynamic", {
                get: function () {
                    return this.data.type === c.Physics.P2.Body.DYNAMIC;
                },
                set: function (a) {
                    a && this.data.type !== c.Physics.P2.Body.DYNAMIC
                        ? ((this.data.type = c.Physics.P2.Body.DYNAMIC), (this.mass = 1))
                        : a || this.data.type !== c.Physics.P2.Body.DYNAMIC || ((this.data.type = c.Physics.P2.Body.STATIC), (this.mass = 0));
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "kinematic", {
                get: function () {
                    return this.data.type === c.Physics.P2.Body.KINEMATIC;
                },
                set: function (a) {
                    a && this.data.type !== c.Physics.P2.Body.KINEMATIC
                        ? ((this.data.type = c.Physics.P2.Body.KINEMATIC), (this.mass = 4))
                        : a || this.data.type !== c.Physics.P2.Body.KINEMATIC || ((this.data.type = c.Physics.P2.Body.STATIC), (this.mass = 0));
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "allowSleep", {
                get: function () {
                    return this.data.allowSleep;
                },
                set: function (a) {
                    a !== this.data.allowSleep && (this.data.allowSleep = a);
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "angle", {
                get: function () {
                    return c.Math.wrapAngle(c.Math.radToDeg(this.data.angle));
                },
                set: function (a) {
                    this.data.angle = c.Math.degToRad(c.Math.wrapAngle(a));
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "angularDamping", {
                get: function () {
                    return this.data.angularDamping;
                },
                set: function (a) {
                    this.data.angularDamping = a;
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "angularForce", {
                get: function () {
                    return this.data.angularForce;
                },
                set: function (a) {
                    this.data.angularForce = a;
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "angularVelocity", {
                get: function () {
                    return this.data.angularVelocity;
                },
                set: function (a) {
                    this.data.angularVelocity = a;
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "damping", {
                get: function () {
                    return this.data.damping;
                },
                set: function (a) {
                    this.data.damping = a;
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "fixedRotation", {
                get: function () {
                    return this.data.fixedRotation;
                },
                set: function (a) {
                    a !== this.data.fixedRotation && (this.data.fixedRotation = a);
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "inertia", {
                get: function () {
                    return this.data.inertia;
                },
                set: function (a) {
                    this.data.inertia = a;
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "mass", {
                get: function () {
                    return this.data.mass;
                },
                set: function (a) {
                    a !== this.data.mass && ((this.data.mass = a), this.data.updateMassProperties());
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "motionState", {
                get: function () {
                    return this.data.type;
                },
                set: function (a) {
                    a !== this.data.type && (this.data.type = a);
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "rotation", {
                get: function () {
                    return this.data.angle;
                },
                set: function (a) {
                    this.data.angle = a;
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "sleepSpeedLimit", {
                get: function () {
                    return this.data.sleepSpeedLimit;
                },
                set: function (a) {
                    this.data.sleepSpeedLimit = a;
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "x", {
                get: function () {
                    return this.world.mpxi(this.data.position[0]);
                },
                set: function (a) {
                    this.data.position[0] = this.world.pxmi(a);
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "y", {
                get: function () {
                    return this.world.mpxi(this.data.position[1]);
                },
                set: function (a) {
                    this.data.position[1] = this.world.pxmi(a);
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "id", {
                get: function () {
                    return this.data.id;
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "debug", {
                get: function () {
                    return null !== this.debugBody;
                },
                set: function (a) {
                    a && !this.debugBody ? (this.debugBody = new c.Physics.P2.BodyDebug(this.game, this.data)) : !a && this.debugBody && (this.debugBody.destroy(), (this.debugBody = null));
                },
            }),
            Object.defineProperty(c.Physics.P2.Body.prototype, "collideWorldBounds", {
                get: function () {
                    return this._collideWorldBounds;
                },
                set: function (a) {
                    a && !this._collideWorldBounds ? ((this._collideWorldBounds = !0), this.updateCollisionMask()) : !a && this._collideWorldBounds && ((this._collideWorldBounds = !1), this.updateCollisionMask());
                },
            }),
            (c.Physics.P2.BodyDebug = function (a, b, d) {
                c.Group.call(this, a);
                var e = { pixelsPerLengthUnit: a.physics.p2.mpx(1), debugPolygons: !1, lineWidth: 1, alpha: 0.5 };
                (this.settings = c.Utils.extend(e, d)),
                    (this.ppu = this.settings.pixelsPerLengthUnit),
                    (this.ppu = -1 * this.ppu),
                    (this.body = b),
                    (this.canvas = new c.Graphics(a)),
                    (this.canvas.alpha = this.settings.alpha),
                    this.add(this.canvas),
                    this.draw(),
                    this.updateSpriteTransform();
            }),
            (c.Physics.P2.BodyDebug.prototype = Object.create(c.Group.prototype)),
            (c.Physics.P2.BodyDebug.prototype.constructor = c.Physics.P2.BodyDebug),
            c.Utils.extend(c.Physics.P2.BodyDebug.prototype, {
                updateSpriteTransform: function () {
                    (this.position.x = this.body.position[0] * this.ppu), (this.position.y = this.body.position[1] * this.ppu), (this.rotation = this.body.angle);
                },
                draw: function () {
                    var a, b, c, d, e, f, g, h, i, j, k, l, m, n, o;
                    if (((h = this.body), (j = this.canvas).clear(), (c = parseInt(this.randomPastelHex(), 16)), (f = 16711680), (g = this.lineWidth), h instanceof p2.Body && h.shapes.length)) {
                        var p = h.shapes.length;
                        for (d = 0; d !== p; ) {
                            if (((i = (b = h.shapes[d]).position || 0), (a = b.angle || 0), b instanceof p2.Circle)) this.drawCircle(j, i[0] * this.ppu, i[1] * this.ppu, a, b.radius * this.ppu, c, g);
                            else if (b instanceof p2.Capsule) this.drawCapsule(j, i[0] * this.ppu, i[1] * this.ppu, a, b.length * this.ppu, b.radius * this.ppu, f, c, g);
                            else if (b instanceof p2.Plane) this.drawPlane(j, i[0] * this.ppu, -i[1] * this.ppu, c, f, 5 * g, 10 * g, 10 * g, 100 * this.ppu, a);
                            else if (b instanceof p2.Line) this.drawLine(j, b.length * this.ppu, f, g);
                            else if (b instanceof p2.Box) this.drawRectangle(j, i[0] * this.ppu, i[1] * this.ppu, a, b.width * this.ppu, b.height * this.ppu, f, c, g);
                            else if (b instanceof p2.Convex) {
                                for (l = [], m = p2.vec2.create(), e = n = 0, o = b.vertices.length; 0 <= o ? n < o : o < n; e = 0 <= o ? ++n : --n)
                                    (k = b.vertices[e]), p2.vec2.rotate(m, k, a), l.push([(m[0] + i[0]) * this.ppu, -(m[1] + i[1]) * this.ppu]);
                                this.drawConvex(j, l, b.triangles, f, c, g, this.settings.debugPolygons, [i[0] * this.ppu, -i[1] * this.ppu]);
                            }
                            d++;
                        }
                    }
                },
                drawRectangle: function (a, b, c, d, e, f, g, h, i) {
                    void 0 === i && (i = 1), void 0 === g && (g = 0), a.lineStyle(i, g, 1), a.beginFill(h), a.drawRect(b - e / 2, c - f / 2, e, f);
                },
                drawCircle: function (a, b, c, d, e, f, g) {
                    void 0 === g && (g = 1), void 0 === f && (f = 16777215), a.lineStyle(g, 0, 1), a.beginFill(f, 1), a.drawCircle(b, c, 2 * -e), a.endFill(), a.moveTo(b, c), a.lineTo(b + e * Math.cos(-d), c + e * Math.sin(-d));
                },
                drawLine: function (a, b, c, d) {
                    void 0 === d && (d = 1), void 0 === c && (c = 0), a.lineStyle(5 * d, c, 1), a.moveTo(-b / 2, 0), a.lineTo(b / 2, 0);
                },
                drawConvex: function (a, b, c, d, e, f, g, h) {
                    var i, j, k, l, m, n, o, p, q, r, s;
                    if ((void 0 === f && (f = 1), void 0 === d && (d = 0), g)) {
                        for (i = [16711680, 65280, 255], j = 0; j !== b.length + 1; )
                            (l = b[j % b.length]), (m = b[(j + 1) % b.length]), (o = l[0]), (r = l[1]), (p = m[0]), (s = m[1]), a.lineStyle(f, i[j % i.length], 1), a.moveTo(o, -r), a.lineTo(p, -s), a.drawCircle(o, -r, 2 * f), j++;
                        return a.lineStyle(f, 0, 1), a.drawCircle(h[0], h[1], 2 * f);
                    }
                    for (a.lineStyle(f, d, 1), a.beginFill(e), j = 0; j !== b.length; ) (n = (k = b[j])[0]), (q = k[1]), 0 === j ? a.moveTo(n, -q) : a.lineTo(n, -q), j++;
                    if ((a.endFill(), 2 < b.length)) return a.moveTo(b[b.length - 1][0], -b[b.length - 1][1]), a.lineTo(b[0][0], -b[0][1]);
                },
                drawPath: function (a, b, c, d, e) {
                    var f, g, h, i, j, k, l, m, o, p, q;
                    for (void 0 === e && (e = 1), void 0 === c && (c = 0), a.lineStyle(e, c, 1), "number" == typeof d && a.beginFill(d), h = g = null, f = 0; f < b.length; )
                        (p = (o = b[f])[0]),
                            (q = o[1]),
                            (p === g && q === h) ||
                                (0 === f ? a.moveTo(p, q) : ((i = g), (j = h), (k = p), (l = q), (m = b[(f + 1) % b.length][0]), 0 != (k - i) * (b[(f + 1) % b.length][1] - j) - (m - i) * (l - j) && a.lineTo(p, q)), (g = p), (h = q)),
                            f++;
                    "number" == typeof d && a.endFill(), 2 < b.length && "number" == typeof d && (a.moveTo(b[b.length - 1][0], b[b.length - 1][1]), a.lineTo(b[0][0], b[0][1]));
                },
                drawPlane: function (a, b, c, d, e, f, g, h, i, j) {
                    var k, l;
                    void 0 === f && (f = 1),
                        void 0 === d && (d = 16777215),
                        a.lineStyle(f, e, 11),
                        a.beginFill(d),
                        a.moveTo(b, -c),
                        (k = b + Math.cos(j) * this.game.width),
                        (l = c + Math.sin(j) * this.game.height),
                        a.lineTo(k, -l),
                        a.moveTo(b, -c),
                        (k = b + Math.cos(j) * -this.game.width),
                        (l = c + Math.sin(j) * -this.game.height),
                        a.lineTo(k, -l);
                },
                drawCapsule: function (a, b, c, d, e, f, g, h, i) {
                    void 0 === i && (i = 1), void 0 === g && (g = 0), a.lineStyle(i, g, 1);
                    var j = Math.cos(d),
                        k = Math.sin(d);
                    a.beginFill(h, 1),
                        a.drawCircle((-e / 2) * j + b, (-e / 2) * k + c, 2 * -f),
                        a.drawCircle((e / 2) * j + b, (e / 2) * k + c, 2 * -f),
                        a.endFill(),
                        a.lineStyle(i, g, 0),
                        a.beginFill(h, 1),
                        a.moveTo((-e / 2) * j + f * k + b, (-e / 2) * k + f * j + c),
                        a.lineTo((e / 2) * j + f * k + b, (e / 2) * k + f * j + c),
                        a.lineTo((e / 2) * j - f * k + b, (e / 2) * k - f * j + c),
                        a.lineTo((-e / 2) * j - f * k + b, (-e / 2) * k - f * j + c),
                        a.endFill(),
                        a.lineStyle(i, g, 1),
                        a.moveTo((-e / 2) * j + f * k + b, (-e / 2) * k + f * j + c),
                        a.lineTo((e / 2) * j + f * k + b, (e / 2) * k + f * j + c),
                        a.moveTo((-e / 2) * j - f * k + b, (-e / 2) * k - f * j + c),
                        a.lineTo((e / 2) * j - f * k + b, (e / 2) * k - f * j + c);
                },
                randomPastelHex: function () {
                    var a, b, c, d;
                    return (
                        (c = [255, 255, 255]),
                        (d = Math.floor(256 * Math.random())),
                        (b = Math.floor(256 * Math.random())),
                        (a = Math.floor(256 * Math.random())),
                        (d = Math.floor((d + 3 * c[0]) / 4)),
                        (b = Math.floor((b + 3 * c[1]) / 4)),
                        (a = Math.floor((a + 3 * c[2]) / 4)),
                        this.rgbToHex(d, b, a)
                    );
                },
                rgbToHex: function (a, b, c) {
                    return this.componentToHex(a) + this.componentToHex(b) + this.componentToHex(c);
                },
                componentToHex: function (a) {
                    var b;
                    return 2 === (b = a.toString(16)).length ? b : b + "0";
                },
            }),
            (c.Physics.P2.Spring = function (a, b, c, d, e, f, g, h, i, j) {
                (this.game = a.game), void 0 === d && (d = 1), void 0 === e && (e = 100), void 0 === f && (f = 1);
                var k = { restLength: (d = (this.world = a).pxm(d)), stiffness: e, damping: f };
                null != g && (k.worldAnchorA = [a.pxm(g[0]), a.pxm(g[1])]),
                    null != h && (k.worldAnchorB = [a.pxm(h[0]), a.pxm(h[1])]),
                    null != i && (k.localAnchorA = [a.pxm(i[0]), a.pxm(i[1])]),
                    null != j && (k.localAnchorB = [a.pxm(j[0]), a.pxm(j[1])]),
                    (this.data = new p2.LinearSpring(b, c, k)),
                    (this.data.parent = this);
            }),
            (c.Physics.P2.Spring.prototype.constructor = c.Physics.P2.Spring),
            (c.Physics.P2.RotationalSpring = function (a, b, c, d, e, f) {
                (this.game = a.game), (this.world = a), void 0 === d && (d = null), void 0 === e && (e = 100), void 0 === f && (f = 1), d && (d = a.pxm(d));
                var g = { restAngle: d, stiffness: e, damping: f };
                (this.data = new p2.RotationalSpring(b, c, g)), (this.data.parent = this);
            }),
            (c.Physics.P2.Spring.prototype.constructor = c.Physics.P2.Spring),
            (c.Physics.P2.Material = function (a) {
                (this.name = a), p2.Material.call(this);
            }),
            (c.Physics.P2.Material.prototype = Object.create(p2.Material.prototype)),
            (c.Physics.P2.Material.prototype.constructor = c.Physics.P2.Material),
            (c.Physics.P2.ContactMaterial = function (a, b, c) {
                p2.ContactMaterial.call(this, a, b, c);
            }),
            (c.Physics.P2.ContactMaterial.prototype = Object.create(p2.ContactMaterial.prototype)),
            (c.Physics.P2.ContactMaterial.prototype.constructor = c.Physics.P2.ContactMaterial),
            (c.Physics.P2.CollisionGroup = function (a) {
                this.mask = a;
            }),
            (c.Physics.P2.DistanceConstraint = function (a, b, c, d, e, f, g) {
                void 0 === d && (d = 100), void 0 === e && (e = [0, 0]), void 0 === f && (f = [0, 0]), void 0 === g && (g = Number.MAX_VALUE), (this.game = a.game);
                var h = { distance: (d = (this.world = a).pxm(d)), localAnchorA: (e = [a.pxmi(e[0]), a.pxmi(e[1])]), localAnchorB: (f = [a.pxmi(f[0]), a.pxmi(f[1])]), maxForce: g };
                p2.DistanceConstraint.call(this, b, c, h);
            }),
            (c.Physics.P2.DistanceConstraint.prototype = Object.create(p2.DistanceConstraint.prototype)),
            (c.Physics.P2.DistanceConstraint.prototype.constructor = c.Physics.P2.DistanceConstraint),
            (c.Physics.P2.GearConstraint = function (a, b, c, d, e) {
                void 0 === d && (d = 0), void 0 === e && (e = 1), (this.game = a.game), (this.world = a);
                var f = { angle: d, ratio: e };
                p2.GearConstraint.call(this, b, c, f);
            }),
            (c.Physics.P2.GearConstraint.prototype = Object.create(p2.GearConstraint.prototype)),
            (c.Physics.P2.GearConstraint.prototype.constructor = c.Physics.P2.GearConstraint),
            (c.Physics.P2.LockConstraint = function (a, b, c, d, e, f) {
                void 0 === d && (d = [0, 0]), void 0 === e && (e = 0), void 0 === f && (f = Number.MAX_VALUE), (this.game = a.game);
                var g = { localOffsetB: (d = [(this.world = a).pxm(d[0]), a.pxm(d[1])]), localAngleB: e, maxForce: f };
                p2.LockConstraint.call(this, b, c, g);
            }),
            (c.Physics.P2.LockConstraint.prototype = Object.create(p2.LockConstraint.prototype)),
            (c.Physics.P2.LockConstraint.prototype.constructor = c.Physics.P2.LockConstraint),
            (c.Physics.P2.PrismaticConstraint = function (a, b, c, d, e, f, g, h) {
                void 0 === d && (d = !0), void 0 === e && (e = [0, 0]), void 0 === f && (f = [0, 0]), void 0 === g && (g = [0, 0]), void 0 === h && (h = Number.MAX_VALUE), (this.game = a.game);
                var i = { localAnchorA: (e = [(this.world = a).pxmi(e[0]), a.pxmi(e[1])]), localAnchorB: (f = [a.pxmi(f[0]), a.pxmi(f[1])]), localAxisA: g, maxForce: h, disableRotationalLock: !d };
                p2.PrismaticConstraint.call(this, b, c, i);
            }),
            (c.Physics.P2.PrismaticConstraint.prototype = Object.create(p2.PrismaticConstraint.prototype)),
            (c.Physics.P2.PrismaticConstraint.prototype.constructor = c.Physics.P2.PrismaticConstraint),
            (c.Physics.P2.RevoluteConstraint = function (a, b, c, d, e, f, g) {
                void 0 === f && (f = Number.MAX_VALUE), void 0 === g && (g = null), (this.game = a.game), (c = [(this.world = a).pxmi(c[0]), a.pxmi(c[1])]), (e = [a.pxmi(e[0]), a.pxmi(e[1])]), g && (g = [a.pxmi(g[0]), a.pxmi(g[1])]);
                var h = { worldPivot: g, localPivotA: c, localPivotB: e, maxForce: f };
                p2.RevoluteConstraint.call(this, b, d, h);
            }),
            (c.Physics.P2.RevoluteConstraint.prototype = Object.create(p2.RevoluteConstraint.prototype)),
            (c.Physics.P2.RevoluteConstraint.prototype.constructor = c.Physics.P2.RevoluteConstraint),
            (c.ImageCollection = function (a, b, c, d, e, f, g) {
                (void 0 === c || c <= 0) && (c = 32),
                    (void 0 === d || d <= 0) && (d = 32),
                    void 0 === e && (e = 0),
                    void 0 === f && (f = 0),
                    (this.name = a),
                    (this.firstgid = 0 | b),
                    (this.imageWidth = 0 | c),
                    (this.imageHeight = 0 | d),
                    (this.imageMargin = 0 | e),
                    (this.imageSpacing = 0 | f),
                    (this.properties = g || {}),
                    (this.images = []),
                    (this.total = 0);
            }),
            (c.ImageCollection.prototype = {
                containsImageIndex: function (a) {
                    return a >= this.firstgid && a < this.firstgid + this.total;
                },
                addImage: function (a, b) {
                    this.images.push({ gid: a, image: b }), this.total++;
                },
            }),
            (c.ImageCollection.prototype.constructor = c.ImageCollection),
            (c.Tile = function (a, b, c, d, e, f) {
                (this.layer = a),
                    (this.index = b),
                    (this.x = c),
                    (this.y = d),
                    (this.rotation = 0),
                    (this.flipped = !1),
                    (this.worldX = c * e),
                    (this.worldY = d * f),
                    (this.width = e),
                    (this.height = f),
                    (this.centerX = Math.abs(e / 2)),
                    (this.centerY = Math.abs(f / 2)),
                    (this.alpha = 1),
                    (this.properties = {}),
                    (this.scanned = !1),
                    (this.faceTop = !1),
                    (this.faceBottom = !1),
                    (this.faceLeft = !1),
                    (this.faceRight = !1),
                    (this.collideLeft = !1),
                    (this.collideRight = !1),
                    (this.collideUp = !1),
                    (this.collideDown = !1),
                    (this.collisionCallback = null),
                    (this.collisionCallbackContext = this);
            }),
            (c.Tile.prototype = {
                containsPoint: function (a, b) {
                    return !(a < this.worldX || b < this.worldY || a > this.right || b > this.bottom);
                },
                intersects: function (a, b, c, d) {
                    return !(c <= this.worldX || d <= this.worldY || a >= this.worldX + this.width || b >= this.worldY + this.height);
                },
                setCollisionCallback: function (a, b) {
                    (this.collisionCallback = a), (this.collisionCallbackContext = b);
                },
                destroy: function () {
                    (this.collisionCallback = null), (this.collisionCallbackContext = null), (this.properties = null);
                },
                setCollision: function (a, b, c, d) {
                    (this.collideLeft = a), (this.collideRight = b), (this.collideUp = c), (this.collideDown = d), (this.faceLeft = a), (this.faceRight = b), (this.faceTop = c), (this.faceBottom = d);
                },
                resetCollision: function () {
                    (this.collideLeft = !1), (this.collideRight = !1), (this.collideUp = !1), (this.collideDown = !1), (this.faceTop = !1), (this.faceBottom = !1), (this.faceLeft = !1), (this.faceRight = !1);
                },
                isInteresting: function (a, b) {
                    return a && b
                        ? this.collideLeft || this.collideRight || this.collideUp || this.collideDown || this.faceTop || this.faceBottom || this.faceLeft || this.faceRight || this.collisionCallback
                        : a
                        ? this.collideLeft || this.collideRight || this.collideUp || this.collideDown
                        : !!b && (this.faceTop || this.faceBottom || this.faceLeft || this.faceRight);
                },
                copy: function (a) {
                    (this.index = a.index),
                        (this.alpha = a.alpha),
                        (this.properties = a.properties),
                        (this.collideUp = a.collideUp),
                        (this.collideDown = a.collideDown),
                        (this.collideLeft = a.collideLeft),
                        (this.collideRight = a.collideRight),
                        (this.collisionCallback = a.collisionCallback),
                        (this.collisionCallbackContext = a.collisionCallbackContext);
                },
            }),
            (c.Tile.prototype.constructor = c.Tile),
            Object.defineProperty(c.Tile.prototype, "collides", {
                get: function () {
                    return this.collideLeft || this.collideRight || this.collideUp || this.collideDown;
                },
            }),
            Object.defineProperty(c.Tile.prototype, "canCollide", {
                get: function () {
                    return this.collideLeft || this.collideRight || this.collideUp || this.collideDown || this.collisionCallback;
                },
            }),
            Object.defineProperty(c.Tile.prototype, "left", {
                get: function () {
                    return this.worldX;
                },
            }),
            Object.defineProperty(c.Tile.prototype, "right", {
                get: function () {
                    return this.worldX + this.width;
                },
            }),
            Object.defineProperty(c.Tile.prototype, "top", {
                get: function () {
                    return this.worldY;
                },
            }),
            Object.defineProperty(c.Tile.prototype, "bottom", {
                get: function () {
                    return this.worldY + this.height;
                },
            }),
            (c.Tilemap = function (a, b, d, e, f, g) {
                (this.game = a), (this.key = b);
                var h = c.TilemapParser.parse(this.game, b, d, e, f, g);
                null !== h &&
                    ((this.width = h.width),
                    (this.height = h.height),
                    (this.tileWidth = h.tileWidth),
                    (this.tileHeight = h.tileHeight),
                    (this.orientation = h.orientation),
                    (this.format = h.format),
                    (this.version = h.version),
                    (this.properties = h.properties),
                    (this.widthInPixels = h.widthInPixels),
                    (this.heightInPixels = h.heightInPixels),
                    (this.layers = h.layers),
                    (this.tilesets = h.tilesets),
                    (this.imagecollections = h.imagecollections),
                    (this.tiles = h.tiles),
                    (this.objects = h.objects),
                    (this.collideIndexes = []),
                    (this.collision = h.collision),
                    (this.images = h.images),
                    (this.enableDebug = !1),
                    (this.currentLayer = 0),
                    (this.debugMap = []),
                    (this._results = []),
                    (this._tempA = 0),
                    (this._tempB = 0));
            }),
            (c.Tilemap.CSV = 0),
            (c.Tilemap.TILED_JSON = 1),
            (c.Tilemap.NORTH = 0),
            (c.Tilemap.EAST = 1),
            (c.Tilemap.SOUTH = 2),
            (c.Tilemap.WEST = 3),
            (c.Tilemap.prototype = {
                create: function (a, b, c, d, e, f) {
                    return void 0 === f && (f = this.game.world), (this.width = b), (this.height = c), this.setTileSize(d, e), (this.layers.length = 0), this.createBlankLayer(a, b, c, d, e, f);
                },
                setTileSize: function (a, b) {
                    (this.tileWidth = a), (this.tileHeight = b), (this.widthInPixels = this.width * a), (this.heightInPixels = this.height * b);
                },
                addTilesetImage: function (a, b, d, e, f, g, h) {
                    if (void 0 === a) return null;
                    void 0 === d && (d = this.tileWidth), void 0 === e && (e = this.tileHeight), void 0 === f && (f = 0), void 0 === g && (g = 0), void 0 === h && (h = 0), 0 === d && (d = 32), 0 === e && (e = 32);
                    var i = null;
                    if ((null != b || (b = a), b instanceof c.BitmapData)) i = b.canvas;
                    else {
                        if (!this.game.cache.checkImageKey(b)) return null;
                        i = this.game.cache.getImage(b);
                    }
                    var j = this.getTilesetIndex(a);
                    if (null === j && this.format === c.Tilemap.TILED_JSON) return null;
                    if (this.tilesets[j]) return this.tilesets[j].setImage(i), this.tilesets[j];
                    var k = new c.Tileset(a, h, d, e, f, g, {});
                    k.setImage(i), this.tilesets.push(k);
                    for (
                        var l = this.tilesets.length - 1, m = f, n = f, o = 0, p = 0, q = 0, r = h;
                        r < h + k.total && ((this.tiles[r] = [m, n, l]), (m += d + g), ++o !== k.total) && (++p !== k.columns || ((m = f), (n += e + g), (p = 0), ++q !== k.rows));
                        r++
                    );
                    return k;
                },
                createFromObjects: function (a, b, d, e, f, g, h, i, j) {
                    if ((void 0 === f && (f = !0), void 0 === g && (g = !1), void 0 === h && (h = this.game.world), void 0 === i && (i = c.Sprite), void 0 === j && (j = !0), this.objects[a]))
                        for (var k = 0; k < this.objects[a].length; k++) {
                            var l = !1,
                                m = this.objects[a][k];
                            if (
                                (void 0 !== m.gid && "number" == typeof b && m.gid === b ? (l = !0) : void 0 !== m.id && "number" == typeof b && m.id === b ? (l = !0) : void 0 !== m.name && "string" == typeof b && m.name === b && (l = !0),
                                l)
                            ) {
                                var n = new i(this.game, parseFloat(m.x, 10), parseFloat(m.y, 10), d, e);
                                for (var o in ((n.name = m.name),
                                (n.visible = m.visible),
                                (n.autoCull = g),
                                (n.exists = f),
                                m.width && (n.width = m.width),
                                m.height && (n.height = m.height),
                                m.rotation && (n.angle = m.rotation),
                                j && (n.y -= n.height),
                                h.add(n),
                                m.properties))
                                    h.set(n, o, m.properties[o], !1, !1, 0, !0);
                            }
                        }
                },
                createFromTiles: function (a, b, d, e, f, g) {
                    "number" == typeof a && (a = [a]),
                        null == b ? (b = []) : "number" == typeof b && (b = [b]),
                        (e = this.getLayer(e)),
                        void 0 === f && (f = this.game.world),
                        void 0 === g && (g = {}),
                        void 0 === g.customClass && (g.customClass = c.Sprite),
                        void 0 === g.adjustY && (g.adjustY = !0);
                    var h = this.layers[e].width,
                        i = this.layers[e].height;
                    if ((this.copy(0, 0, h, i, e), this._results.length < 2)) return 0;
                    for (var j, k = 0, l = 1, m = this._results.length; l < m; l++)
                        if (-1 !== a.indexOf(this._results[l].index)) {
                            for (var n in ((j = new g.customClass(this.game, this._results[l].worldX, this._results[l].worldY, d)), g)) j[n] = g[n];
                            f.add(j), k++;
                        }
                    if (1 === b.length) for (l = 0; l < a.length; l++) this.replace(a[l], b[0], 0, 0, h, i, e);
                    else if (1 < b.length) for (l = 0; l < a.length; l++) this.replace(a[l], b[l], 0, 0, h, i, e);
                    return k;
                },
                createLayer: function (a, b, d, e) {
                    void 0 === b && (b = this.game.width), void 0 === d && (d = this.game.height), void 0 === e && (e = this.game.world);
                    var f = a;
                    if (("string" == typeof a && (f = this.getLayerIndex(a)), !(null === f || f > this.layers.length))) {
                        void 0 === b || b <= 0 ? (b = Math.min(this.game.width, this.layers[f].widthInPixels)) : b > this.game.width && (b = this.game.width),
                            void 0 === d || d <= 0 ? (d = Math.min(this.game.height, this.layers[f].heightInPixels)) : d > this.game.height && (d = this.game.height),
                            this.enableDebug;
                        var g = e.add(new c.TilemapLayer(this.game, this, f, b, d));
                        return this.enableDebug, g;
                    }
                },
                createBlankLayer: function (a, b, d, e, f, g) {
                    if ((void 0 === g && (g = this.game.world), null === this.getLayerIndex(a))) {
                        for (
                            var h, i = { name: a, x: 0, y: 0, width: b, height: d, widthInPixels: b * e, heightInPixels: d * f, alpha: 1, visible: !0, properties: {}, indexes: [], callbacks: [], bodies: [], data: null }, j = [], k = 0;
                            k < d;
                            k++
                        ) {
                            h = [];
                            for (var l = 0; l < b; l++) h.push(new c.Tile(i, -1, l, k, e, f));
                            j.push(h);
                        }
                        (i.data = j), this.layers.push(i), (this.currentLayer = this.layers.length - 1);
                        var m = i.widthInPixels,
                            n = i.heightInPixels;
                        return m > this.game.width && (m = this.game.width), n > this.game.height && (n = this.game.height), ((j = new c.TilemapLayer(this.game, this, this.layers.length - 1, m, n)).name = a), g.add(j);
                    }
                },
                getIndex: function (a, b) {
                    for (var c = 0; c < a.length; c++) if (a[c].name === b) return c;
                    return null;
                },
                getLayerIndex: function (a) {
                    return this.getIndex(this.layers, a);
                },
                getTilesetIndex: function (a) {
                    return this.getIndex(this.tilesets, a);
                },
                getImageIndex: function (a) {
                    return this.getIndex(this.images, a);
                },
                setTileIndexCallback: function (a, b, c, d) {
                    if (((d = this.getLayer(d)), "number" == typeof a)) this.layers[d].callbacks[a] = { callback: b, callbackContext: c };
                    else for (var e = 0, f = a.length; e < f; e++) this.layers[d].callbacks[a[e]] = { callback: b, callbackContext: c };
                },
                setTileLocationCallback: function (a, b, c, d, e, f, g) {
                    if (((g = this.getLayer(g)), this.copy(a, b, c, d, g), !(this._results.length < 2))) for (var h = 1; h < this._results.length; h++) this._results[h].setCollisionCallback(e, f);
                },
                setCollision: function (a, b, c, d) {
                    if ((void 0 === b && (b = !0), void 0 === d && (d = !0), (c = this.getLayer(c)), "number" == typeof a)) return this.setCollisionByIndex(a, b, c, !0);
                    if (Array.isArray(a)) {
                        for (var e = 0; e < a.length; e++) this.setCollisionByIndex(a[e], b, c, !1);
                        d && this.calculateFaces(c);
                    }
                },
                setCollisionBetween: function (a, b, c, d, e) {
                    if ((void 0 === c && (c = !0), void 0 === e && (e = !0), (d = this.getLayer(d)), !(b < a))) {
                        for (var f = a; f <= b; f++) this.setCollisionByIndex(f, c, d, !1);
                        e && this.calculateFaces(d);
                    }
                },
                setCollisionByExclusion: function (a, b, c, d) {
                    void 0 === b && (b = !0), void 0 === d && (d = !0), (c = this.getLayer(c));
                    for (var e = 0, f = this.tiles.length; e < f; e++) -1 === a.indexOf(e) && this.setCollisionByIndex(e, b, c, !1);
                    d && this.calculateFaces(c);
                },
                setCollisionByIndex: function (a, b, c, d) {
                    if ((void 0 === b && (b = !0), void 0 === c && (c = this.currentLayer), void 0 === d && (d = !0), b)) this.collideIndexes.push(a);
                    else {
                        var e = this.collideIndexes.indexOf(a);
                        -1 < e && this.collideIndexes.splice(e, 1);
                    }
                    for (var f = 0; f < this.layers[c].height; f++)
                        for (var g = 0; g < this.layers[c].width; g++) {
                            var h = this.layers[c].data[f][g];
                            h && h.index === a && (b ? h.setCollision(!0, !0, !0, !0) : h.resetCollision(), (h.faceTop = b), (h.faceBottom = b), (h.faceLeft = b), (h.faceRight = b));
                        }
                    return d && this.calculateFaces(c), c;
                },
                getLayer: function (a) {
                    return void 0 === a ? (a = this.currentLayer) : "string" == typeof a ? (a = this.getLayerIndex(a)) : a instanceof c.TilemapLayer && (a = a.index), a;
                },
                setPreventRecalculate: function (a) {
                    if ((!0 === a && !0 !== this.preventingRecalculate && ((this.preventingRecalculate = !0), (this.needToRecalculate = {})), !1 === a && !0 === this.preventingRecalculate)) {
                        for (var b in ((this.preventingRecalculate = !1), this.needToRecalculate)) this.calculateFaces(b);
                        this.needToRecalculate = !1;
                    }
                },
                calculateFaces: function (a) {
                    if (this.preventingRecalculate) this.needToRecalculate[a] = !0;
                    else
                        for (var b = null, c = null, d = null, e = null, f = 0, g = this.layers[a].height; f < g; f++)
                            for (var h = 0, i = this.layers[a].width; h < i; h++) {
                                var j = this.layers[a].data[f][h];
                                j &&
                                    ((b = this.getTileAbove(a, h, f)),
                                    (c = this.getTileBelow(a, h, f)),
                                    (d = this.getTileLeft(a, h, f)),
                                    (e = this.getTileRight(a, h, f)),
                                    j.collides && ((j.faceTop = !0), (j.faceBottom = !0), (j.faceLeft = !0), (j.faceRight = !0)),
                                    b && b.collides && (j.faceTop = !1),
                                    c && c.collides && (j.faceBottom = !1),
                                    d && d.collides && (j.faceLeft = !1),
                                    e && e.collides && (j.faceRight = !1));
                            }
                },
                getTileAbove: function (a, b, c) {
                    return 0 < c ? this.layers[a].data[c - 1][b] : null;
                },
                getTileBelow: function (a, b, c) {
                    return c < this.layers[a].height - 1 ? this.layers[a].data[c + 1][b] : null;
                },
                getTileLeft: function (a, b, c) {
                    return 0 < b ? this.layers[a].data[c][b - 1] : null;
                },
                getTileRight: function (a, b, c) {
                    return b < this.layers[a].width - 1 ? this.layers[a].data[c][b + 1] : null;
                },
                setLayer: function (a) {
                    (a = this.getLayer(a)), this.layers[a] && (this.currentLayer = a);
                },
                hasTile: function (a, b, c) {
                    return (c = this.getLayer(c)), void 0 !== this.layers[c].data[b] && void 0 !== this.layers[c].data[b][a] && -1 < this.layers[c].data[b][a].index;
                },
                removeTile: function (a, b, d) {
                    if (((d = this.getLayer(d)), 0 <= a && a < this.layers[d].width && 0 <= b && b < this.layers[d].height && this.hasTile(a, b, d))) {
                        var e = this.layers[d].data[b][a];
                        return (this.layers[d].data[b][a] = new c.Tile(this.layers[d], -1, a, b, this.tileWidth, this.tileHeight)), (this.layers[d].dirty = !0), this.calculateFaces(d), e;
                    }
                },
                removeTileWorldXY: function (a, b, c, d, e) {
                    return (e = this.getLayer(e)), (a = this.game.math.snapToFloor(a, c) / c), (b = this.game.math.snapToFloor(b, d) / d), this.removeTile(a, b, e);
                },
                putTile: function (a, b, d, e) {
                    return null === a
                        ? this.removeTile(b, d, e)
                        : ((e = this.getLayer(e)),
                          0 <= b && b < this.layers[e].width && 0 <= d && d < this.layers[e].height
                              ? (a instanceof c.Tile
                                    ? ((f = a.index), this.hasTile(b, d, e) ? this.layers[e].data[d][b].copy(a) : (this.layers[e].data[d][b] = new c.Tile(e, f, b, d, a.width, a.height)))
                                    : ((f = a), this.hasTile(b, d, e) ? (this.layers[e].data[d][b].index = f) : (this.layers[e].data[d][b] = new c.Tile(this.layers[e], f, b, d, this.tileWidth, this.tileHeight))),
                                -1 < this.collideIndexes.indexOf(f) ? this.layers[e].data[d][b].setCollision(!0, !0, !0, !0) : this.layers[e].data[d][b].resetCollision(),
                                (this.layers[e].dirty = !0),
                                this.calculateFaces(e),
                                this.layers[e].data[d][b])
                              : null);
                    var f;
                },
                putTileWorldXY: function (a, b, c, d, e, f) {
                    return (f = this.getLayer(f)), (b = this.game.math.snapToFloor(b, d) / d), (c = this.game.math.snapToFloor(c, e) / e), this.putTile(a, b, c, f);
                },
                searchTileIndex: function (a, b, c, d) {
                    void 0 === b && (b = 0), void 0 === c && (c = !1), (d = this.getLayer(d));
                    var e = 0;
                    if (c) {
                        for (var f = this.layers[d].height - 1; 0 <= f; f--)
                            for (var g = this.layers[d].width - 1; 0 <= g; g--)
                                if (this.layers[d].data[f][g].index === a) {
                                    if (e === b) return this.layers[d].data[f][g];
                                    e++;
                                }
                    } else
                        for (f = 0; f < this.layers[d].height; f++)
                            for (g = 0; g < this.layers[d].width; g++)
                                if (this.layers[d].data[f][g].index === a) {
                                    if (e === b) return this.layers[d].data[f][g];
                                    e++;
                                }
                    return null;
                },
                getTile: function (a, b, c, d) {
                    return (
                        void 0 === d && (d = !1),
                        (c = this.getLayer(c)),
                        0 <= a && a < this.layers[c].width && 0 <= b && b < this.layers[c].height ? (-1 === this.layers[c].data[b][a].index ? (d ? this.layers[c].data[b][a] : null) : this.layers[c].data[b][a]) : null
                    );
                },
                getTileWorldXY: function (a, b, c, d, e, f) {
                    return (
                        void 0 === c && (c = this.tileWidth), void 0 === d && (d = this.tileHeight), (e = this.getLayer(e)), (a = this.game.math.snapToFloor(a, c) / c), (b = this.game.math.snapToFloor(b, d) / d), this.getTile(a, b, e, f)
                    );
                },
                copy: function (a, b, c, d, e) {
                    if (((e = this.getLayer(e)), this.layers[e])) {
                        void 0 === a && (a = 0),
                            void 0 === b && (b = 0),
                            void 0 === c && (c = this.layers[e].width),
                            void 0 === d && (d = this.layers[e].height),
                            a < 0 && (a = 0),
                            b < 0 && (b = 0),
                            c > this.layers[e].width && (c = this.layers[e].width),
                            d > this.layers[e].height && (d = this.layers[e].height),
                            (this._results.length = 0),
                            this._results.push({ x: a, y: b, width: c, height: d, layer: e });
                        for (var f = b; f < b + d; f++) for (var g = a; g < a + c; g++) this._results.push(this.layers[e].data[f][g]);
                        return this._results;
                    }
                    this._results.length = 0;
                },
                paste: function (a, b, c, d) {
                    if ((void 0 === a && (a = 0), void 0 === b && (b = 0), (d = this.getLayer(d)), c && !(c.length < 2))) {
                        for (var e = a - c[1].x, f = b - c[1].y, g = 1; g < c.length; g++) this.layers[d].data[f + c[g].y][e + c[g].x].copy(c[g]);
                        (this.layers[d].dirty = !0), this.calculateFaces(d);
                    }
                },
                swap: function (a, b, c, d, e, f, g) {
                    (g = this.getLayer(g)), this.copy(c, d, e, f, g), this._results.length < 2 || ((this._tempA = a), (this._tempB = b), this._results.forEach(this.swapHandler, this), this.paste(c, d, this._results, g));
                },
                swapHandler: function (a) {
                    a.index === this._tempA ? (a.index = this._tempB) : a.index === this._tempB && (a.index = this._tempA);
                },
                forEach: function (a, b, c, d, e, f, g) {
                    (g = this.getLayer(g)), this.copy(c, d, e, f, g), this._results.length < 2 || (this._results.forEach(a, b), this.paste(c, d, this._results, g));
                },
                replace: function (a, b, c, d, e, f, g) {
                    if (((g = this.getLayer(g)), this.copy(c, d, e, f, g), !(this._results.length < 2))) {
                        for (var h = 1; h < this._results.length; h++) this._results[h].index === a && (this._results[h].index = b);
                        this.paste(c, d, this._results, g);
                    }
                },
                random: function (a, b, c, d, e) {
                    if (((e = this.getLayer(e)), this.copy(a, b, c, d, e), !(this._results.length < 2))) {
                        for (var f = [], g = 1; g < this._results.length; g++)
                            if (this._results[g].index) {
                                var h = this._results[g].index;
                                -1 === f.indexOf(h) && f.push(h);
                            }
                        for (var i = 1; i < this._results.length; i++) this._results[i].index = this.game.rnd.pick(f);
                        this.paste(a, b, this._results, e);
                    }
                },
                shuffle: function (a, b, d, e, f) {
                    if (((f = this.getLayer(f)), this.copy(a, b, d, e, f), !(this._results.length < 2))) {
                        for (var g = [], h = 1; h < this._results.length; h++) this._results[h].index && g.push(this._results[h].index);
                        c.ArrayUtils.shuffle(g);
                        for (var i = 1; i < this._results.length; i++) this._results[i].index = g[i - 1];
                        this.paste(a, b, this._results, f);
                    }
                },
                fill: function (a, b, c, d, e, f) {
                    if (((f = this.getLayer(f)), this.copy(b, c, d, e, f), !(this._results.length < 2))) {
                        for (var g = 1; g < this._results.length; g++) this._results[g].index = a;
                        this.paste(b, c, this._results, f);
                    }
                },
                removeAllLayers: function () {
                    (this.layers.length = 0), (this.currentLayer = 0);
                },
                dump: function () {
                    for (var a = "", b = [""], c = 0; c < this.layers[this.currentLayer].height; c++) {
                        for (var d = 0; d < this.layers[this.currentLayer].width; d++)
                            (a += "%c  "),
                                1 < this.layers[this.currentLayer].data[c][d]
                                    ? this.debugMap[this.layers[this.currentLayer].data[c][d]]
                                        ? b.push("background: " + this.debugMap[this.layers[this.currentLayer].data[c][d]])
                                        : b.push("background: #ffffff")
                                    : b.push("background: rgb(0, 0, 0)");
                        a += "\n";
                    }
                    b[0] = a;
                },
                destroy: function () {
                    this.removeAllLayers(), (this.data = []), (this.game = null);
                },
            }),
            (c.Tilemap.prototype.constructor = c.Tilemap),
            Object.defineProperty(c.Tilemap.prototype, "layer", {
                get: function () {
                    return this.layers[this.currentLayer];
                },
                set: function (a) {
                    a !== this.currentLayer && this.setLayer(a);
                },
            }),
            (c.TilemapLayer = function (a, b, d, e, f) {
                (e |= 0),
                    (f |= 0),
                    c.Sprite.call(this, a, 0, 0),
                    (this.map = b),
                    (this.index = d),
                    (this.layer = b.layers[d]),
                    (this.canvas = PIXI.CanvasPool.create(this, e, f)),
                    (this.context = this.canvas.getContext("2d")),
                    this.setTexture(new PIXI.Texture(new PIXI.BaseTexture(this.canvas))),
                    (this.type = c.TILEMAPLAYER),
                    (this.physicsType = c.TILEMAPLAYER),
                    (this.renderSettings = { enableScrollDelta: !1, overdrawRatio: 0.2, copyCanvas: null }),
                    (this.debug = !1),
                    (this.exists = !0),
                    (this.debugSettings = {
                        missingImageFill: "rgb(255,255,255)",
                        debuggedTileOverfill: "rgba(0,255,0,0.4)",
                        forceFullRedraw: !0,
                        debugAlpha: 0.5,
                        facingEdgeStroke: "rgba(0,255,0,1)",
                        collidingTileOverfill: "rgba(0,255,0,0.2)",
                    }),
                    (this.scrollFactorX = 1),
                    (this.scrollFactorY = 1),
                    (this.dirty = !0),
                    (this.rayStepRate = 4),
                    (this._wrap = !1),
                    (this._mc = { scrollX: 0, scrollY: 0, renderWidth: 0, renderHeight: 0, tileWidth: b.tileWidth, tileHeight: b.tileHeight, cw: b.tileWidth, ch: b.tileHeight, tilesets: [] }),
                    (this._scrollX = 0),
                    (this._scrollY = 0),
                    (this._results = []),
                    a.device.canvasBitBltShift || (this.renderSettings.copyCanvas = c.TilemapLayer.ensureSharedCopyCanvas()),
                    (this.fixedToCamera = !0);
            }),
            (c.TilemapLayer.prototype = Object.create(c.Sprite.prototype)),
            (c.TilemapLayer.prototype.constructor = c.TilemapLayer),
            (c.TilemapLayer.prototype.preUpdateCore = c.Component.Core.preUpdate),
            (c.TilemapLayer.sharedCopyCanvas = null),
            (c.TilemapLayer.ensureSharedCopyCanvas = function () {
                return this.sharedCopyCanvas || (this.sharedCopyCanvas = PIXI.CanvasPool.create(this, 2, 2)), this.sharedCopyCanvas;
            }),
            (c.TilemapLayer.prototype.preUpdate = function () {
                return this.preUpdateCore();
            }),
            (c.TilemapLayer.prototype.postUpdate = function () {
                this.fixedToCamera && ((this.position.x = (this.game.camera.view.x + this.cameraOffset.x) / this.game.camera.scale.x), (this.position.y = (this.game.camera.view.y + this.cameraOffset.y) / this.game.camera.scale.y)),
                    (this._scrollX = (this.game.camera.view.x * this.scrollFactorX) / this.scale.x),
                    (this._scrollY = (this.game.camera.view.y * this.scrollFactorY) / this.scale.y);
            }),
            (c.TilemapLayer.prototype._renderCanvas = function (a) {
                this.fixedToCamera && ((this.position.x = (this.game.camera.view.x + this.cameraOffset.x) / this.game.camera.scale.x), (this.position.y = (this.game.camera.view.y + this.cameraOffset.y) / this.game.camera.scale.y)),
                    (this._scrollX = (this.game.camera.view.x * this.scrollFactorX) / this.scale.x),
                    (this._scrollY = (this.game.camera.view.y * this.scrollFactorY) / this.scale.y),
                    this.render(),
                    PIXI.Sprite.prototype._renderCanvas.call(this, a);
            }),
            (c.TilemapLayer.prototype._renderWebGL = function (a) {
                this.fixedToCamera && ((this.position.x = (this.game.camera.view.x + this.cameraOffset.x) / this.game.camera.scale.x), (this.position.y = (this.game.camera.view.y + this.cameraOffset.y) / this.game.camera.scale.y)),
                    (this._scrollX = (this.game.camera.view.x * this.scrollFactorX) / this.scale.x),
                    (this._scrollY = (this.game.camera.view.y * this.scrollFactorY) / this.scale.y),
                    this.render(),
                    PIXI.Sprite.prototype._renderWebGL.call(this, a);
            }),
            (c.TilemapLayer.prototype.destroy = function () {
                PIXI.CanvasPool.remove(this), c.Component.Destroy.prototype.destroy.call(this);
            }),
            (c.TilemapLayer.prototype.resize = function (a, b) {
                (this.canvas.width = a),
                    (this.canvas.height = b),
                    this.texture.frame.resize(a, b),
                    (this.texture.width = a),
                    (this.texture.height = b),
                    (this.texture.crop.width = a),
                    (this.texture.crop.height = b),
                    (this.texture.baseTexture.width = a),
                    (this.texture.baseTexture.height = b),
                    this.texture.baseTexture.dirty(),
                    (this.texture.requiresUpdate = !0),
                    this.texture._updateUvs(),
                    (this.dirty = !0);
            }),
            (c.TilemapLayer.prototype.resizeWorld = function () {
                this.game.world.setBounds(0, 0, this.layer.widthInPixels * this.scale.x, this.layer.heightInPixels * this.scale.y);
            }),
            (c.TilemapLayer.prototype._fixX = function (a) {
                return 1 === this.scrollFactorX || (0 === this.scrollFactorX && 0 === this.position.x) ? a : 0 === this.scrollFactorX && 0 !== this.position.x ? a - this.position.x : this._scrollX + (a - this._scrollX / this.scrollFactorX);
            }),
            (c.TilemapLayer.prototype._unfixX = function (a) {
                return 1 === this.scrollFactorX ? a : this._scrollX / this.scrollFactorX + (a - this._scrollX);
            }),
            (c.TilemapLayer.prototype._fixY = function (a) {
                return 1 === this.scrollFactorY || (0 === this.scrollFactorY && 0 === this.position.y) ? a : 0 === this.scrollFactorY && 0 !== this.position.y ? a - this.position.y : this._scrollY + (a - this._scrollY / this.scrollFactorY);
            }),
            (c.TilemapLayer.prototype._unfixY = function (a) {
                return 1 === this.scrollFactorY ? a : this._scrollY / this.scrollFactorY + (a - this._scrollY);
            }),
            (c.TilemapLayer.prototype.getTileX = function (a) {
                return Math.floor(this._fixX(a) / this._mc.tileWidth);
            }),
            (c.TilemapLayer.prototype.getTileY = function (a) {
                return Math.floor(this._fixY(a) / this._mc.tileHeight);
            }),
            (c.TilemapLayer.prototype.getTileXY = function (a, b, c) {
                return (c.x = this.getTileX(a)), (c.y = this.getTileY(b)), c;
            }),
            (c.TilemapLayer.prototype.getRayCastTiles = function (a, b, c, d) {
                b || (b = this.rayStepRate), void 0 === c && (c = !1), void 0 === d && (d = !1);
                var e = this.getTiles(a.x, a.y, a.width, a.height, c, d);
                if (0 === e.length) return [];
                for (var f = a.coordinatesOnLine(b), g = [], h = 0; h < e.length; h++)
                    for (var i = 0; i < f.length; i++) {
                        var j = e[h],
                            k = f[i];
                        if (j.containsPoint(k[0], k[1])) {
                            g.push(j);
                            break;
                        }
                    }
                return g;
            }),
            (c.TilemapLayer.prototype.getTiles = function (a, b, c, d, e, f) {
                void 0 === e && (e = !1), void 0 === f && (f = !1);
                var g = !(e || f);
                (a = this._fixX(a)), (b = this._fixY(b));
                for (
                    var h = Math.floor(a / (this._mc.cw * this.scale.x)),
                        i = Math.floor(b / (this._mc.ch * this.scale.y)),
                        j = Math.ceil((a + c) / (this._mc.cw * this.scale.x)) - h,
                        k = Math.ceil((b + d) / (this._mc.ch * this.scale.y)) - i;
                    this._results.length;

                )
                    this._results.pop();
                for (var l = i; l < i + k; l++)
                    for (var m = h; m < h + j; m++) {
                        var n = this.layer.data[l];
                        n && n[m] && (g || n[m].isInteresting(e, f)) && this._results.push(n[m]);
                    }
                return this._results.slice();
            }),
            (c.TilemapLayer.prototype.resolveTileset = function (a) {
                var b = this._mc.tilesets;
                if (a < 2e3) for (; b.length < a; ) b.push(void 0);
                var c = this.map.tiles[a] && this.map.tiles[a][2];
                if (null !== c) {
                    var d = this.map.tilesets[c];
                    if (d && d.containsTileIndex(a)) return (b[a] = d);
                }
                return (b[a] = null);
            }),
            (c.TilemapLayer.prototype.resetTilesetCache = function () {
                for (var a = this._mc.tilesets; a.length; ) a.pop();
            }),
            (c.TilemapLayer.prototype.setScale = function (a, b) {
                (a = a || 1), (b = b || a);
                for (var c = 0; c < this.layer.data.length; c++)
                    for (var d = this.layer.data[c], e = 0; e < d.length; e++) {
                        var f = d[e];
                        (f.width = this.map.tileWidth * a), (f.height = this.map.tileHeight * b), (f.worldX = f.x * f.width), (f.worldY = f.y * f.height);
                    }
                this.scale.setTo(a, b);
            }),
            (c.TilemapLayer.prototype.shiftCanvas = function (a, b, c) {
                var d = a.canvas,
                    e = d.width - Math.abs(b),
                    f = d.height - Math.abs(c),
                    g = 0,
                    h = 0,
                    i = b,
                    j = c;
                b < 0 && ((g = -b), (i = 0)), c < 0 && ((h = -c), (j = 0));
                var k = this.renderSettings.copyCanvas;
                if (k) {
                    (k.width < e || k.height < f) && ((k.width = e), (k.height = f));
                    var l = k.getContext("2d");
                    l.clearRect(0, 0, e, f), l.drawImage(d, g, h, e, f, 0, 0, e, f), a.clearRect(i, j, e, f), a.drawImage(k, 0, 0, e, f, i, j, e, f);
                } else a.save(), (a.globalCompositeOperation = "copy"), a.drawImage(d, g, h, e, f, i, j, e, f), a.restore();
            }),
            (c.TilemapLayer.prototype.renderRegion = function (a, b, c, d, e, f) {
                var g = this.context,
                    h = this.layer.width,
                    i = this.layer.height,
                    j = this._mc.tileWidth,
                    k = this._mc.tileHeight,
                    l = this._mc.tilesets,
                    m = NaN;
                this._wrap || (c <= e && ((c = Math.max(0, c)), (e = Math.min(h - 1, e))), d <= f && ((d = Math.max(0, d)), (f = Math.min(i - 1, f))));
                var n,
                    o,
                    p,
                    q,
                    r,
                    s,
                    t = c * j - a,
                    v = (c + (1 << 20) * h) % h;
                for (q = (d + (1 << 20) * i) % i, s = f - d, o = d * k - b; 0 <= s; q++, s--, o += k) {
                    i <= q && (q -= i);
                    var x = this.layer.data[q];
                    for (p = v, r = e - c, n = t; 0 <= r; p++, r--, n += j) {
                        h <= p && (p -= h);
                        var y = x[p];
                        if (y && !(y.index < 0)) {
                            var z = y.index,
                                A = l[z];
                            void 0 === A && (A = this.resolveTileset(z)),
                                y.alpha === m || this.debug || ((g.globalAlpha = y.alpha), (m = y.alpha)),
                                A
                                    ? y.rotation || y.flipped
                                        ? (g.save(), g.translate(n + y.centerX, o + y.centerY), g.rotate(y.rotation), y.flipped && g.scale(-1, 1), A.draw(g, -y.centerX, -y.centerY, z), g.restore())
                                        : A.draw(g, n, o, z)
                                    : this.debugSettings.missingImageFill && ((g.fillStyle = this.debugSettings.missingImageFill), g.fillRect(n, o, j, k)),
                                y.debug && this.debugSettings.debuggedTileOverfill && ((g.fillStyle = this.debugSettings.debuggedTileOverfill), g.fillRect(n, o, j, k));
                        }
                    }
                }
            }),
            (c.TilemapLayer.prototype.renderDeltaScroll = function (a, b) {
                var c = this._mc.scrollX,
                    d = this._mc.scrollY,
                    e = this.canvas.width,
                    f = this.canvas.height,
                    g = this._mc.tileWidth,
                    h = this._mc.tileHeight,
                    i = 0,
                    j = -g,
                    k = 0,
                    l = -h;
                if (
                    (a < 0 ? ((i = e + a), (j = e - 1)) : 0 < a && (j = a),
                    b < 0 ? ((k = f + b), (l = f - 1)) : 0 < b && (l = b),
                    this.shiftCanvas(this.context, a, b),
                    (i = Math.floor((i + c) / g)),
                    (j = Math.floor((j + c) / g)),
                    (k = Math.floor((k + d) / h)),
                    (l = Math.floor((l + d) / h)),
                    i <= j)
                ) {
                    this.context.clearRect(i * g - c, 0, (j - i + 1) * g, f);
                    var m = Math.floor((0 + d) / h),
                        n = Math.floor((f - 1 + d) / h);
                    this.renderRegion(c, d, i, m, j, n);
                }
                if (k <= l) {
                    this.context.clearRect(0, k * h - d, e, (l - k + 1) * h);
                    var o = Math.floor((0 + c) / g),
                        p = Math.floor((e - 1 + c) / g);
                    this.renderRegion(c, d, o, k, p, l);
                }
            }),
            (c.TilemapLayer.prototype.renderFull = function () {
                var a = this._mc.scrollX,
                    b = this._mc.scrollY,
                    c = this.canvas.width,
                    d = this.canvas.height,
                    e = this._mc.tileWidth,
                    f = this._mc.tileHeight,
                    g = Math.floor(a / e),
                    h = Math.floor((c - 1 + a) / e),
                    i = Math.floor(b / f),
                    j = Math.floor((d - 1 + b) / f);
                this.context.clearRect(0, 0, c, d), this.renderRegion(a, b, g, i, h, j);
            }),
            (c.TilemapLayer.prototype.render = function () {
                var a = !1;
                if (this.visible) {
                    (this.dirty || this.layer.dirty) && (a = !(this.layer.dirty = !1));
                    var b = this.canvas.width,
                        c = this.canvas.height,
                        d = 0 | this._scrollX,
                        e = 0 | this._scrollY,
                        f = this._mc,
                        g = f.scrollX - d,
                        h = f.scrollY - e;
                    if (a || 0 !== g || 0 !== h || f.renderWidth !== b || f.renderHeight !== c)
                        return (
                            this.context.save(),
                            (f.scrollX = d),
                            (f.scrollY = e),
                            (f.renderWidth === b && f.renderHeight === c) || ((f.renderWidth = b), (f.renderHeight = c)),
                            this.debug && ((this.context.globalAlpha = this.debugSettings.debugAlpha), this.debugSettings.forceFullRedraw && (a = !0)),
                            !a && this.renderSettings.enableScrollDelta && Math.abs(g) + Math.abs(h) < Math.min(b, c) ? this.renderDeltaScroll(g, h) : this.renderFull(),
                            this.debug && ((this.context.globalAlpha = 1), this.renderDebug()),
                            this.texture.baseTexture.dirty(),
                            (this.dirty = !1),
                            this.context.restore(),
                            !0
                        );
                }
            }),
            (c.TilemapLayer.prototype.renderDebug = function () {
                var a,
                    b,
                    c,
                    d,
                    e,
                    f,
                    g = this._mc.scrollX,
                    h = this._mc.scrollY,
                    i = this.context,
                    j = this.canvas.width,
                    k = this.canvas.height,
                    l = this.layer.width,
                    m = this.layer.height,
                    n = this._mc.tileWidth,
                    o = this._mc.tileHeight,
                    p = Math.floor(g / n),
                    q = Math.floor((j - 1 + g) / n),
                    r = Math.floor(h / o),
                    s = Math.floor((k - 1 + h) / o),
                    t = p * n - g,
                    u = r * o - h,
                    v = (p + (1 << 20) * l) % l,
                    w = (r + (1 << 20) * m) % m;
                for (i.strokeStyle = this.debugSettings.facingEdgeStroke, d = w, f = s - r, b = u; 0 <= f; d++, f--, b += o) {
                    m <= d && (d -= m);
                    var x = this.layer.data[d];
                    for (c = v, e = q - p, a = t; 0 <= e; c++, e--, a += n) {
                        l <= c && (c -= l);
                        var y = x[c];
                        !y ||
                            y.index < 0 ||
                            !y.collides ||
                            (this.debugSettings.collidingTileOverfill && ((i.fillStyle = this.debugSettings.collidingTileOverfill), i.fillRect(a, b, this._mc.cw, this._mc.ch)),
                            this.debugSettings.facingEdgeStroke &&
                                (i.beginPath(),
                                y.faceTop && (i.moveTo(a, b), i.lineTo(a + this._mc.cw, b)),
                                y.faceBottom && (i.moveTo(a, b + this._mc.ch), i.lineTo(a + this._mc.cw, b + this._mc.ch)),
                                y.faceLeft && (i.moveTo(a, b), i.lineTo(a, b + this._mc.ch)),
                                y.faceRight && (i.moveTo(a + this._mc.cw, b), i.lineTo(a + this._mc.cw, b + this._mc.ch)),
                                i.closePath(),
                                i.stroke()));
                    }
                }
            }),
            Object.defineProperty(c.TilemapLayer.prototype, "wrap", {
                get: function () {
                    return this._wrap;
                },
                set: function (a) {
                    (this._wrap = a), (this.dirty = !0);
                },
            }),
            Object.defineProperty(c.TilemapLayer.prototype, "scrollX", {
                get: function () {
                    return this._scrollX;
                },
                set: function (a) {
                    this._scrollX = a;
                },
            }),
            Object.defineProperty(c.TilemapLayer.prototype, "scrollY", {
                get: function () {
                    return this._scrollY;
                },
                set: function (a) {
                    this._scrollY = a;
                },
            }),
            Object.defineProperty(c.TilemapLayer.prototype, "collisionWidth", {
                get: function () {
                    return this._mc.cw;
                },
                set: function (a) {
                    (this._mc.cw = 0 | a), (this.dirty = !0);
                },
            }),
            Object.defineProperty(c.TilemapLayer.prototype, "collisionHeight", {
                get: function () {
                    return this._mc.ch;
                },
                set: function (a) {
                    (this._mc.ch = 0 | a), (this.dirty = !0);
                },
            }),
            (c.TilemapParser = {
                INSERT_NULL: !1,
                parse: function (a, b, d, e, f, g) {
                    if ((void 0 === d && (d = 32), void 0 === e && (e = 32), void 0 === f && (f = 10), void 0 === g && (g = 10), void 0 === b)) return this.getEmptyData();
                    if (null === b) return this.getEmptyData(d, e, f, g);
                    var h = a.cache.getTilemapData(b);
                    if (h) {
                        if (h.format === c.Tilemap.CSV) return this.parseCSV(b, h.data, d, e);
                        if (!h.format || h.format === c.Tilemap.TILED_JSON) return this.parseTiledJSON(h.data);
                    }
                },
                parseCSV: function (a, b, d, e) {
                    for (var f = this.getEmptyData(), g = [], h = (b = b.trim()).split("\n"), i = h.length, j = 0, k = 0; k < h.length; k++) {
                        g[k] = [];
                        for (var l = h[k].split(","), m = 0; m < l.length; m++) g[k][m] = new c.Tile(f.layers[0], parseInt(l[m], 10), m, k, d, e);
                        0 === j && (j = l.length);
                    }
                    return (
                        (f.format = c.Tilemap.CSV),
                        (f.name = a),
                        (f.width = j),
                        (f.height = i),
                        (f.tileWidth = d),
                        (f.tileHeight = e),
                        (f.widthInPixels = j * d),
                        (f.heightInPixels = i * e),
                        (f.layers[0].width = j),
                        (f.layers[0].height = i),
                        (f.layers[0].widthInPixels = f.widthInPixels),
                        (f.layers[0].heightInPixels = f.heightInPixels),
                        (f.layers[0].data = g),
                        f
                    );
                },
                getEmptyData: function (a, b, c, d) {
                    return {
                        width: null != c ? c : 0,
                        height: null != d ? d : 0,
                        tileWidth: null != a ? a : 0,
                        tileHeight: null != b ? b : 0,
                        orientation: "orthogonal",
                        version: "1",
                        properties: {},
                        widthInPixels: 0,
                        heightInPixels: 0,
                        layers: [{ name: "layer", x: 0, y: 0, width: 0, height: 0, widthInPixels: 0, heightInPixels: 0, alpha: 1, visible: !0, properties: {}, indexes: [], callbacks: [], bodies: [], data: [] }],
                        images: [],
                        objects: {},
                        collision: {},
                        tilesets: [],
                        tiles: [],
                    };
                },
                parseTiledJSON: function (a) {
                    function b(a, b) {
                        var c = {};
                        for (var d in b) {
                            var e = b[d];
                            void 0 !== a[e] && (c[e] = a[e]);
                        }
                        return c;
                    }
                    if ("orthogonal" !== a.orientation) return null;
                    for (
                        var d = {
                                width: a.width,
                                height: a.height,
                                tileWidth: a.tilewidth,
                                tileHeight: a.tileheight,
                                orientation: a.orientation,
                                format: c.Tilemap.TILED_JSON,
                                version: a.version,
                                properties: a.properties,
                                widthInPixels: a.width * a.tilewidth,
                                heightInPixels: a.height * a.tileheight,
                            },
                            e = [],
                            f = 0;
                        f < a.layers.length;
                        f++
                    )
                        if ("tilelayer" === a.layers[f].type) {
                            var g = a.layers[f];
                            if (!g.compression && g.encoding && "base64" === g.encoding) {
                                for (var h = window.atob(g.data), i = h.length, j = new Array(i), k = 0; k < i; k += 4)
                                    j[k / 4] = (h.charCodeAt(k) | (h.charCodeAt(k + 1) << 8) | (h.charCodeAt(k + 2) << 16) | (h.charCodeAt(k + 3) << 24)) >>> 0;
                                (g.data = j), delete g.encoding;
                            } else if (g.compression) continue;
                            var l = {
                                name: g.name,
                                x: g.x,
                                y: g.y,
                                width: g.width,
                                height: g.height,
                                widthInPixels: g.width * a.tilewidth,
                                heightInPixels: g.height * a.tileheight,
                                alpha: g.opacity,
                                visible: g.visible,
                                properties: {},
                                indexes: [],
                                callbacks: [],
                                bodies: [],
                            };
                            g.properties && (l.properties = g.properties);
                            var m,
                                n,
                                o,
                                q = 0,
                                r = [],
                                s = [],
                                t = 0;
                            for (i = g.data.length; t < i; t++) {
                                if (((n = !1), (o = m = 0), 536870912 < (p = g.data[t])))
                                    switch ((2147483648 < p && ((p -= 2147483648), (o += 4)), 1073741824 < p && ((p -= 1073741824), (o += 2)), 536870912 < p && ((p -= 536870912), (o += 1)), o)) {
                                        case 5:
                                            m = Math.PI / 2;
                                            break;
                                        case 6:
                                            m = Math.PI;
                                            break;
                                        case 3:
                                            m = (3 * Math.PI) / 2;
                                            break;
                                        case 4:
                                            n = !(m = 0);
                                            break;
                                        case 7:
                                            (m = Math.PI / 2), (n = !0);
                                            break;
                                        case 2:
                                            (m = Math.PI), (n = !0);
                                            break;
                                        case 1:
                                            (m = (3 * Math.PI) / 2), (n = !0);
                                    }
                                if (0 < p) ((u = new c.Tile(l, p, q, s.length, a.tilewidth, a.tileheight)).rotation = m), (u.flipped = n), 0 !== o && (u.flippedVal = o), r.push(u);
                                else c.TilemapParser.INSERT_NULL ? r.push(null) : r.push(new c.Tile(l, -1, q, s.length, a.tilewidth, a.tileheight));
                                ++q === g.width && (s.push(r), (q = 0), (r = []));
                            }
                            (l.data = s), e.push(l);
                        }
                    d.layers = e;
                    var v = [];
                    for (f = 0; f < a.layers.length; f++)
                        if ("imagelayer" === a.layers[f].type) {
                            var w = a.layers[f],
                                x = { name: w.name, image: w.image, x: w.x, y: w.y, alpha: w.opacity, visible: w.visible, properties: {} };
                            w.properties && (x.properties = w.properties), v.push(x);
                        }
                    d.images = v;
                    var y = [],
                        z = [],
                        A = null;
                    for (f = 0; f < a.tilesets.length; f++) {
                        if ((B = a.tilesets[f]).image) {
                            var C = new c.Tileset(B.name, B.firstgid, B.tilewidth, B.tileheight, B.margin, B.spacing, B.properties);
                            B.tileproperties && (C.tileProperties = B.tileproperties), C.updateTileData(B.imagewidth, B.imageheight), y.push(C);
                        } else {
                            var D = new c.ImageCollection(B.name, B.firstgid, B.tilewidth, B.tileheight, B.margin, B.spacing, B.properties);
                            for (var E in B.tiles) {
                                x = B.tiles[E].image;
                                var p = B.firstgid + parseInt(E, 10);
                                D.addImage(p, x);
                            }
                            z.push(D);
                        }
                        A && (A.lastgid = B.firstgid - 1), (A = B);
                    }
                    (d.tilesets = y), (d.imagecollections = z);
                    var F = {},
                        G = {};
                    for (f = 0; f < a.layers.length; f++)
                        if ("objectgroup" === a.layers[f].type) {
                            var H = a.layers[f];
                            (F[H.name] = []), (G[H.name] = []);
                            var I = 0;
                            for (i = H.objects.length; I < i; I++)
                                if (H.objects[I].gid) {
                                    var J = {
                                        gid: H.objects[I].gid,
                                        name: H.objects[I].name,
                                        type: H.objects[I].hasOwnProperty("type") ? H.objects[I].type : "",
                                        x: H.objects[I].x,
                                        y: H.objects[I].y,
                                        visible: H.objects[I].visible,
                                        properties: H.objects[I].properties,
                                    };
                                    H.objects[I].rotation && (J.rotation = H.objects[I].rotation), F[H.name].push(J);
                                } else if (H.objects[I].polyline) {
                                    J = {
                                        name: H.objects[I].name,
                                        type: H.objects[I].type,
                                        x: H.objects[I].x,
                                        y: H.objects[I].y,
                                        width: H.objects[I].width,
                                        height: H.objects[I].height,
                                        visible: H.objects[I].visible,
                                        properties: H.objects[I].properties,
                                    };
                                    H.objects[I].rotation && (J.rotation = H.objects[I].rotation), (J.polyline = []);
                                    for (var K = 0; K < H.objects[I].polyline.length; K++) J.polyline.push([H.objects[I].polyline[K].x, H.objects[I].polyline[K].y]);
                                    G[H.name].push(J), F[H.name].push(J);
                                } else if (H.objects[I].polygon) {
                                    (J = b(H.objects[I], ["name", "type", "x", "y", "visible", "rotation", "properties"])).polygon = [];
                                    for (K = 0; K < H.objects[I].polygon.length; K++) J.polygon.push([H.objects[I].polygon[K].x, H.objects[I].polygon[K].y]);
                                    F[H.name].push(J);
                                } else if (H.objects[I].ellipse) {
                                    J = b(H.objects[I], ["name", "type", "ellipse", "x", "y", "width", "height", "visible", "rotation", "properties"]);
                                    F[H.name].push(J);
                                } else {
                                    ((J = b(H.objects[I], ["name", "type", "x", "y", "width", "height", "visible", "rotation", "properties"])).rectangle = !0), F[H.name].push(J);
                                }
                        }
                    (d.objects = F), (d.collision = G), (d.tiles = []);
                    for (f = 0; f < d.tilesets.length; f++) {
                        q = (B = d.tilesets[f]).tileMargin;
                        var L = B.tileMargin,
                            M = 0,
                            N = 0,
                            O = 0;
                        for (
                            t = B.firstgid;
                            t < B.firstgid + B.total &&
                            ((d.tiles[t] = [q, L, f]), (q += B.tileWidth + B.tileSpacing), ++M !== B.total) &&
                            (++N !== B.columns || ((q = B.tileMargin), (L += B.tileHeight + B.tileSpacing), (N = 0), ++O !== B.rows));
                            t++
                        );
                    }
                    var u, P, B;
                    for (f = 0; f < d.layers.length; f++) {
                        (l = d.layers[f]), (B = null);
                        for (k = 0; k < l.data.length; k++) {
                            r = l.data[k];
                            for (var Q = 0; Q < r.length; Q++)
                                null === (u = r[Q]) ||
                                    u.index < 0 ||
                                    ((P = d.tiles[u.index][2]), (B = d.tilesets[P]).tileProperties && B.tileProperties[u.index - B.firstgid] && (u.properties = c.Utils.mixin(B.tileProperties[u.index - B.firstgid], u.properties)));
                        }
                    }
                    return d;
                },
            }),
            (c.Tileset = function (a, b, c, d, e, f, g) {
                (void 0 === c || c <= 0) && (c = 32),
                    (void 0 === d || d <= 0) && (d = 32),
                    void 0 === e && (e = 0),
                    void 0 === f && (f = 0),
                    (this.name = a),
                    (this.firstgid = 0 | b),
                    (this.tileWidth = 0 | c),
                    (this.tileHeight = 0 | d),
                    (this.tileMargin = 0 | e),
                    (this.tileSpacing = 0 | f),
                    (this.properties = g || {}),
                    (this.image = null),
                    (this.rows = 0),
                    (this.columns = 0),
                    (this.total = 0),
                    (this.drawCoords = []);
            }),
            (c.Tileset.prototype = {
                draw: function (a, b, c, d) {
                    var e = (d - this.firstgid) << 1;
                    0 <= e && e + 1 < this.drawCoords.length && a.drawImage(this.image, this.drawCoords[e], this.drawCoords[e + 1], this.tileWidth, this.tileHeight, b, c, this.tileWidth, this.tileHeight);
                },
                containsTileIndex: function (a) {
                    return a >= this.firstgid && a < this.firstgid + this.total;
                },
                setImage: function (a) {
                    (this.image = a), this.updateTileData(a.width, a.height);
                },
                setSpacing: function (a, b) {
                    (this.tileMargin = 0 | a), (this.tileSpacing = 0 | b), this.image && this.updateTileData(this.image.width, this.image.height);
                },
                updateTileData: function (a, b) {
                    var c = (b - 2 * this.tileMargin + this.tileSpacing) / (this.tileHeight + this.tileSpacing),
                        d = (a - 2 * this.tileMargin + this.tileSpacing) / (this.tileWidth + this.tileSpacing);
                    (c = Math.floor(c)), (d = Math.floor(d)), (this.rows && this.rows !== c) || (this.columns && this.columns), (this.rows = c), (this.columns = d), (this.total = c * d), (this.drawCoords.length = 0);
                    for (var e = this.tileMargin, f = this.tileMargin, g = 0; g < this.rows; g++) {
                        for (var h = 0; h < this.columns; h++) this.drawCoords.push(e), this.drawCoords.push(f), (e += this.tileWidth + this.tileSpacing);
                        (e = this.tileMargin), (f += this.tileHeight + this.tileSpacing);
                    }
                },
            }),
            (c.Tileset.prototype.constructor = c.Tileset),
            (c.Particle = function (a, b, d, e, f) {
                c.Sprite.call(this, a, b, d, e, f), (this.autoScale = !1), (this.scaleData = null), (this._s = 0), (this.autoAlpha = !1), (this.alphaData = null), (this._a = 0);
            }),
            (c.Particle.prototype = Object.create(c.Sprite.prototype)),
            (c.Particle.prototype.constructor = c.Particle),
            (c.Particle.prototype.update = function () {
                this.autoScale && (this._s--, this._s ? this.scale.set(this.scaleData[this._s].x, this.scaleData[this._s].y) : (this.autoScale = !1)),
                    this.autoAlpha && (this._a--, this._a ? (this.alpha = this.alphaData[this._a].v) : (this.autoAlpha = !1));
            }),
            (c.Particle.prototype.onEmit = function () {}),
            (c.Particle.prototype.setAlphaData = function (a) {
                (this.alphaData = a), (this._a = a.length - 1), (this.alpha = this.alphaData[this._a].v), (this.autoAlpha = !0);
            }),
            (c.Particle.prototype.setScaleData = function (a) {
                (this.scaleData = a), (this._s = a.length - 1), this.scale.set(this.scaleData[this._s].x, this.scaleData[this._s].y), (this.autoScale = !0);
            }),
            (c.Particle.prototype.reset = function (a, b, d) {
                return c.Component.Reset.prototype.reset.call(this, a, b, d), (this.alpha = 1), this.scale.set(1), (this.autoScale = !1), (this.autoAlpha = !1), this;
            }),
            (c.Particles = function (a) {
                (this.game = a), (this.emitters = {}), (this.ID = 0);
            }),
            (c.Particles.prototype = {
                add: function (a) {
                    return (this.emitters[a.name] = a);
                },
                remove: function (a) {
                    delete this.emitters[a.name];
                },
                update: function () {
                    for (var a in this.emitters) this.emitters[a].exists && this.emitters[a].update();
                },
            }),
            (c.Particles.prototype.constructor = c.Particles),
            (c.Particles.Arcade = {}),
            (c.Particles.Arcade.Emitter = function (a, b, d, e) {
                (this.maxParticles = e || 50),
                    c.Group.call(this, a),
                    (this.name = "emitter" + this.game.particles.ID++),
                    (this.type = c.EMITTER),
                    (this.physicsType = c.GROUP),
                    (this.area = new c.Rectangle(b, d, 1, 1)),
                    (this.minParticleSpeed = new c.Point(-100, -100)),
                    (this.maxParticleSpeed = new c.Point(100, 100)),
                    (this.minParticleScale = 1),
                    (this.maxParticleScale = 1),
                    (this.scaleData = null),
                    (this.minRotation = -360),
                    (this.maxRotation = 360),
                    (this.minParticleAlpha = 1),
                    (this.maxParticleAlpha = 1),
                    (this.alphaData = null),
                    (this.gravity = 100),
                    (this.particleClass = c.Particle),
                    (this.particleDrag = new c.Point()),
                    (this.angularDrag = 0),
                    (this.frequency = 100),
                    (this.lifespan = 2e3),
                    (this.bounce = new c.Point()),
                    (this.on = !1),
                    (this.particleAnchor = new c.Point(0.5, 0.5)),
                    (this.blendMode = c.blendModes.NORMAL),
                    (this.emitX = b),
                    (this.emitY = d),
                    (this.autoScale = !1),
                    (this.autoAlpha = !1),
                    (this.particleBringToTop = !1),
                    (this.particleSendToBack = !1),
                    (this._minParticleScale = new c.Point(1, 1)),
                    (this._maxParticleScale = new c.Point(1, 1)),
                    (this._quantity = 0),
                    (this._timer = 0),
                    (this._counter = 0),
                    (this._flowQuantity = 0),
                    (this._flowTotal = 0),
                    (this._explode = !0),
                    (this._frames = null);
            }),
            (c.Particles.Arcade.Emitter.prototype = Object.create(c.Group.prototype)),
            (c.Particles.Arcade.Emitter.prototype.constructor = c.Particles.Arcade.Emitter),
            (c.Particles.Arcade.Emitter.prototype.update = function () {
                if (this.on && this.game.time.time >= this._timer)
                    if (((this._timer = this.game.time.time + this.frequency * this.game.time.slowMotion), 0 !== this._flowTotal))
                        if (0 < this._flowQuantity) {
                            for (var a = 0; a < this._flowQuantity; a++)
                                if (this.emitParticle() && (this._counter++, -1 !== this._flowTotal && this._counter >= this._flowTotal)) {
                                    this.on = !1;
                                    break;
                                }
                        } else this.emitParticle() && (this._counter++, -1 !== this._flowTotal && this._counter >= this._flowTotal && (this.on = !1));
                    else this.emitParticle() && (this._counter++, 0 < this._quantity && this._counter >= this._quantity && (this.on = !1));
                for (a = this.children.length; a--; ) this.children[a].exists && this.children[a].update();
            }),
            (c.Particles.Arcade.Emitter.prototype.makeParticles = function (a, b, c, d, e) {
                void 0 === b && (b = 0), void 0 === c && (c = this.maxParticles), void 0 === d && (d = !1), void 0 === e && (e = !1);
                var f,
                    g = 0,
                    h = a,
                    i = b;
                for (this._frames = b, c > this.maxParticles && (this.maxParticles = c); g < c; )
                    Array.isArray(a) && (h = this.game.rnd.pick(a)),
                        Array.isArray(b) && (i = this.game.rnd.pick(b)),
                        (f = new this.particleClass(this.game, 0, 0, h, i)),
                        this.game.physics.arcade.enable(f, !1),
                        d ? ((f.body.checkCollision.any = !0), (f.body.checkCollision.none = !1)) : (f.body.checkCollision.none = !0),
                        (f.body.collideWorldBounds = e),
                        (f.body.skipQuadTree = !0),
                        (f.exists = !1),
                        (f.visible = !1),
                        f.anchor.copyFrom(this.particleAnchor),
                        this.add(f),
                        g++;
                return this;
            }),
            (c.Particles.Arcade.Emitter.prototype.kill = function () {
                return (this.on = !1), (this.alive = !1), (this.exists = !1), this;
            }),
            (c.Particles.Arcade.Emitter.prototype.revive = function () {
                return (this.alive = !0), (this.exists = !0), this;
            }),
            (c.Particles.Arcade.Emitter.prototype.explode = function (a, b) {
                return (this._flowTotal = 0), this.start(!0, a, 0, b, !1), this;
            }),
            (c.Particles.Arcade.Emitter.prototype.flow = function (a, b, c, d, e) {
                return (
                    (void 0 !== c && 0 !== c) || (c = 1),
                    void 0 === d && (d = -1),
                    void 0 === e && (e = !0),
                    c > this.maxParticles && (c = this.maxParticles),
                    (this._counter = 0),
                    (this._flowQuantity = c),
                    (this._flowTotal = d),
                    e ? (this.start(!0, a, b, c), (this._counter += c), (this.on = !0), (this._timer = this.game.time.time + b * this.game.time.slowMotion)) : this.start(!1, a, b, c),
                    this
                );
            }),
            (c.Particles.Arcade.Emitter.prototype.start = function (a, b, c, d, e) {
                if (
                    (void 0 === a && (a = !0),
                    void 0 === b && (b = 0),
                    null != c || (c = 250),
                    void 0 === d && (d = 0),
                    void 0 === e && (e = !1),
                    d > this.maxParticles && (d = this.maxParticles),
                    this.revive(),
                    (this.visible = !0),
                    (this.lifespan = b),
                    (this.frequency = c),
                    a || e)
                )
                    for (var f = 0; f < d; f++) this.emitParticle();
                else (this.on = !0), (this._quantity = d), (this._counter = 0), (this._timer = this.game.time.time + c * this.game.time.slowMotion);
                return this;
            }),
            (c.Particles.Arcade.Emitter.prototype.emitParticle = function (a, b, c, d) {
                void 0 === a && (a = null), void 0 === b && (b = null);
                var e = this.getFirstExists(!1);
                if (null === e) return !1;
                var f = this.game.rnd;
                void 0 !== c && void 0 !== d ? e.loadTexture(c, d) : void 0 !== c && e.loadTexture(c);
                var g = this.emitX,
                    h = this.emitY;
                null !== a ? (g = a) : 1 < this.width && (g = f.between(this.left, this.right)),
                    null !== b ? (h = b) : 1 < this.height && (h = f.between(this.top, this.bottom)),
                    e.reset(g, h),
                    (e.angle = 0),
                    (e.lifespan = this.lifespan),
                    this.particleBringToTop ? this.bringToTop(e) : this.particleSendToBack && this.sendToBack(e),
                    this.autoScale
                        ? e.setScaleData(this.scaleData)
                        : 1 !== this.minParticleScale || 1 !== this.maxParticleScale
                        ? e.scale.set(f.realInRange(this.minParticleScale, this.maxParticleScale))
                        : (this._minParticleScale.x === this._maxParticleScale.x && this._minParticleScale.y === this._maxParticleScale.y) ||
                          e.scale.set(f.realInRange(this._minParticleScale.x, this._maxParticleScale.x), f.realInRange(this._minParticleScale.y, this._maxParticleScale.y)),
                    void 0 === d && (Array.isArray(this._frames) ? (e.frame = this.game.rnd.pick(this._frames)) : (e.frame = this._frames)),
                    this.autoAlpha ? e.setAlphaData(this.alphaData) : (e.alpha = f.realInRange(this.minParticleAlpha, this.maxParticleAlpha)),
                    (e.blendMode = this.blendMode);
                var i = e.body;
                return (
                    i.updateBounds(),
                    i.bounce.copyFrom(this.bounce),
                    i.drag.copyFrom(this.particleDrag),
                    (i.velocity.x = f.between(this.minParticleSpeed.x, this.maxParticleSpeed.x)),
                    (i.velocity.y = f.between(this.minParticleSpeed.y, this.maxParticleSpeed.y)),
                    (i.angularVelocity = f.between(this.minRotation, this.maxRotation)),
                    (i.gravity.y = this.gravity),
                    (i.angularDrag = this.angularDrag),
                    e.onEmit(),
                    !0
                );
            }),
            (c.Particles.Arcade.Emitter.prototype.destroy = function () {
                this.game.particles.remove(this), c.Group.prototype.destroy.call(this, !0, !1);
            }),
            (c.Particles.Arcade.Emitter.prototype.setSize = function (a, b) {
                return (this.area.width = a), (this.area.height = b), this;
            }),
            (c.Particles.Arcade.Emitter.prototype.setXSpeed = function (a, b) {
                return (a = a || 0), (b = b || 0), (this.minParticleSpeed.x = a), (this.maxParticleSpeed.x = b), this;
            }),
            (c.Particles.Arcade.Emitter.prototype.setYSpeed = function (a, b) {
                return (a = a || 0), (b = b || 0), (this.minParticleSpeed.y = a), (this.maxParticleSpeed.y = b), this;
            }),
            (c.Particles.Arcade.Emitter.prototype.setRotation = function (a, b) {
                return (a = a || 0), (b = b || 0), (this.minRotation = a), (this.maxRotation = b), this;
            }),
            (c.Particles.Arcade.Emitter.prototype.setAlpha = function (a, b, d, e, f) {
                if (
                    (void 0 === a && (a = 1),
                    void 0 === b && (b = 1),
                    void 0 === d && (d = 0),
                    void 0 === e && (e = c.Easing.Linear.None),
                    void 0 === f && (f = !1),
                    (this.minParticleAlpha = a),
                    (this.maxParticleAlpha = b),
                    (this.autoAlpha = !1),
                    0 < d && a !== b)
                ) {
                    var g = { v: a },
                        h = this.game.make.tween(g).to({ v: b }, d, e);
                    h.yoyo(f), (this.alphaData = h.generateData(60)), this.alphaData.reverse(), (this.autoAlpha = !0);
                }
                return this;
            }),
            (c.Particles.Arcade.Emitter.prototype.setScale = function (a, b, d, e, f, g, h) {
                if (
                    (void 0 === a && (a = 1),
                    void 0 === b && (b = 1),
                    void 0 === d && (d = 1),
                    void 0 === e && (e = 1),
                    void 0 === f && (f = 0),
                    void 0 === g && (g = c.Easing.Linear.None),
                    void 0 === h && (h = !1),
                    (this.minParticleScale = 1),
                    (this.maxParticleScale = 1),
                    this._minParticleScale.set(a, d),
                    this._maxParticleScale.set(b, e),
                    (this.autoScale = !1),
                    0 < f && (a !== b || d !== e))
                ) {
                    var i = { x: a, y: d },
                        j = this.game.make.tween(i).to({ x: b, y: e }, f, g);
                    j.yoyo(h), (this.scaleData = j.generateData(60)), this.scaleData.reverse(), (this.autoScale = !0);
                }
                return this;
            }),
            (c.Particles.Arcade.Emitter.prototype.at = function (a) {
                return a.center ? ((this.emitX = a.center.x), (this.emitY = a.center.y)) : ((this.emitX = a.world.x + a.anchor.x * a.width), (this.emitY = a.world.y + a.anchor.y * a.height)), this;
            }),
            Object.defineProperty(c.Particles.Arcade.Emitter.prototype, "width", {
                get: function () {
                    return this.area.width;
                },
                set: function (a) {
                    this.area.width = a;
                },
            }),
            Object.defineProperty(c.Particles.Arcade.Emitter.prototype, "height", {
                get: function () {
                    return this.area.height;
                },
                set: function (a) {
                    this.area.height = a;
                },
            }),
            Object.defineProperty(c.Particles.Arcade.Emitter.prototype, "x", {
                get: function () {
                    return this.emitX;
                },
                set: function (a) {
                    this.emitX = a;
                },
            }),
            Object.defineProperty(c.Particles.Arcade.Emitter.prototype, "y", {
                get: function () {
                    return this.emitY;
                },
                set: function (a) {
                    this.emitY = a;
                },
            }),
            Object.defineProperty(c.Particles.Arcade.Emitter.prototype, "left", {
                get: function () {
                    return Math.floor(this.x - this.area.width / 2);
                },
            }),
            Object.defineProperty(c.Particles.Arcade.Emitter.prototype, "right", {
                get: function () {
                    return Math.floor(this.x + this.area.width / 2);
                },
            }),
            Object.defineProperty(c.Particles.Arcade.Emitter.prototype, "top", {
                get: function () {
                    return Math.floor(this.y - this.area.height / 2);
                },
            }),
            Object.defineProperty(c.Particles.Arcade.Emitter.prototype, "bottom", {
                get: function () {
                    return Math.floor(this.y + this.area.height / 2);
                },
            }),
            (c.Weapon = function (a, b) {
                c.Plugin.call(this, a, b),
                    (this.bullets = null),
                    (this.autoExpandBulletsGroup = !1),
                    (this.autofire = !1),
                    (this.shots = 0),
                    (this.fireLimit = 0),
                    (this.fireRate = 100),
                    (this.fireRateVariance = 0),
                    (this.fireFrom = new c.Rectangle(0, 0, 1, 1)),
                    (this.fireAngle = c.ANGLE_UP),
                    (this.bulletInheritSpriteSpeed = !1),
                    (this.bulletAnimation = ""),
                    (this.bulletFrameRandom = !1),
                    (this.bulletFrameCycle = !1),
                    (this.bulletWorldWrap = !1),
                    (this.bulletWorldWrapPadding = 0),
                    (this.bulletAngleOffset = 0),
                    (this.bulletAngleVariance = 0),
                    (this.bulletSpeed = 200),
                    (this.bulletSpeedVariance = 0),
                    (this.bulletLifespan = 0),
                    (this.bulletKillDistance = 0),
                    (this.bulletGravity = new c.Point(0, 0)),
                    (this.bulletRotateToVelocity = !1),
                    (this.bulletKey = ""),
                    (this.bulletFrame = ""),
                    (this._bulletClass = c.Bullet),
                    (this._bulletCollideWorldBounds = !1),
                    (this._bulletKillType = c.Weapon.KILL_WORLD_BOUNDS),
                    (this._data = { customBody: !1, width: 0, height: 0, offsetX: 0, offsetY: 0 }),
                    (this.bounds = new c.Rectangle()),
                    (this.bulletBounds = a.world.bounds),
                    (this.bulletFrames = []),
                    (this.bulletFrameIndex = 0),
                    (this.anims = {}),
                    (this.onFire = new c.Signal()),
                    (this.onKill = new c.Signal()),
                    (this.onFireLimit = new c.Signal()),
                    (this.trackedSprite = null),
                    (this.trackedPointer = null),
                    (this.trackRotation = !1),
                    (this.trackOffset = new c.Point()),
                    (this._nextFire = 0),
                    (this._rotatedPoint = new c.Point());
            }),
            (c.Weapon.prototype = Object.create(c.Plugin.prototype)),
            (c.Weapon.prototype.constructor = c.Weapon),
            (c.Weapon.KILL_NEVER = 0),
            (c.Weapon.KILL_LIFESPAN = 1),
            (c.Weapon.KILL_DISTANCE = 2),
            (c.Weapon.KILL_WEAPON_BOUNDS = 3),
            (c.Weapon.KILL_CAMERA_BOUNDS = 4),
            (c.Weapon.KILL_WORLD_BOUNDS = 5),
            (c.Weapon.KILL_STATIC_BOUNDS = 6),
            (c.Weapon.prototype.createBullets = function (a, b, d, e) {
                return (
                    void 0 === a && (a = 1),
                    void 0 === e && (e = this.game.world),
                    this.bullets || ((this.bullets = this.game.add.physicsGroup(c.Physics.ARCADE, e)), (this.bullets.classType = this._bulletClass)),
                    0 !== a && (-1 === a && ((this.autoExpandBulletsGroup = !0), (a = 1)), this.bullets.createMultiple(a, b, d), this.bullets.setAll("data.bulletManager", this), (this.bulletKey = b), (this.bulletFrame = d)),
                    this
                );
            }),
            (c.Weapon.prototype.forEach = function (a, b) {
                return this.bullets.forEachExists(a, b, arguments), this;
            }),
            (c.Weapon.prototype.pauseAll = function () {
                return this.bullets.setAll("body.enable", !1), this;
            }),
            (c.Weapon.prototype.resumeAll = function () {
                return this.bullets.setAll("body.enable", !0), this;
            }),
            (c.Weapon.prototype.killAll = function () {
                return this.bullets.callAllExists("kill", !0), this.bullets.setAll("body.enable", !0), this;
            }),
            (c.Weapon.prototype.resetShots = function (a) {
                return void (this.shots = 0) !== a && (this.fireLimit = a), this;
            }),
            (c.Weapon.prototype.destroy = function () {
                this.parent.remove(this, !1), this.bullets.destroy(), (this.game = null), (this.parent = null), (this.active = !1), (this.visible = !1);
            }),
            (c.Weapon.prototype.update = function () {
                this._bulletKillType === c.Weapon.KILL_WEAPON_BOUNDS &&
                    (this.trackedSprite
                        ? (this.trackedSprite.updateTransform(), this.bounds.centerOn(this.trackedSprite.worldPosition.x, this.trackedSprite.worldPosition.y))
                        : this.trackedPointer && this.bounds.centerOn(this.trackedPointer.worldX, this.trackedPointer.worldY)),
                    this.autofire && this.fire();
            }),
            (c.Weapon.prototype.trackSprite = function (a, b, c, d) {
                return void 0 === b && (b = 0), void 0 === c && (c = 0), void 0 === d && (d = !1), (this.trackedPointer = null), (this.trackedSprite = a), (this.trackRotation = d), this.trackOffset.set(b, c), this;
            }),
            (c.Weapon.prototype.trackPointer = function (a, b, c) {
                return (
                    void 0 === a && (a = this.game.input.activePointer), void 0 === b && (b = 0), void 0 === c && (c = 0), (this.trackedPointer = a), (this.trackedSprite = null), (this.trackRotation = !1), this.trackOffset.set(b, c), this
                );
            }),
            (c.Weapon.prototype.fire = function (a, b, d) {
                if (this.game.time.now < this._nextFire || (0 < this.fireLimit && this.shots === this.fireLimit)) return !1;
                var e = this.bulletSpeed;
                0 !== this.bulletSpeedVariance && (e += c.Math.between(-this.bulletSpeedVariance, this.bulletSpeedVariance)),
                    a
                        ? 1 < this.fireFrom.width
                            ? this.fireFrom.centerOn(a.x, a.y)
                            : ((this.fireFrom.x = a.x), (this.fireFrom.y = a.y))
                        : this.trackedSprite
                        ? (this.trackRotation
                              ? (this._rotatedPoint.set(this.trackedSprite.world.x + this.trackOffset.x, this.trackedSprite.world.y + this.trackOffset.y),
                                this._rotatedPoint.rotate(this.trackedSprite.world.x, this.trackedSprite.world.y, this.trackedSprite.rotation),
                                1 < this.fireFrom.width ? this.fireFrom.centerOn(this._rotatedPoint.x, this._rotatedPoint.y) : ((this.fireFrom.x = this._rotatedPoint.x), (this.fireFrom.y = this._rotatedPoint.y)))
                              : 1 < this.fireFrom.width
                              ? this.fireFrom.centerOn(this.trackedSprite.world.x + this.trackOffset.x, this.trackedSprite.world.y + this.trackOffset.y)
                              : ((this.fireFrom.x = this.trackedSprite.world.x + this.trackOffset.x), (this.fireFrom.y = this.trackedSprite.world.y + this.trackOffset.y)),
                          this.bulletInheritSpriteSpeed && (e += this.trackedSprite.body.speed))
                        : this.trackedPointer &&
                          (1 < this.fireFrom.width
                              ? this.fireFrom.centerOn(this.trackedPointer.world.x + this.trackOffset.x, this.trackedPointer.world.y + this.trackOffset.y)
                              : ((this.fireFrom.x = this.trackedPointer.world.x + this.trackOffset.x), (this.fireFrom.y = this.trackedPointer.world.y + this.trackOffset.y)));
                var f = 1 < this.fireFrom.width ? this.fireFrom.randomX : this.fireFrom.x,
                    g = 1 < this.fireFrom.height ? this.fireFrom.randomY : this.fireFrom.y,
                    h = this.trackRotation ? this.trackedSprite.angle : this.fireAngle;
                void 0 !== b && void 0 !== d && (h = this.game.math.radToDeg(Math.atan2(d - g, b - f))), 0 !== this.bulletAngleVariance && (h += c.Math.between(-this.bulletAngleVariance, this.bulletAngleVariance));
                var i = 0,
                    j = 0;
                0 === h || 180 === h ? (i = Math.cos(this.game.math.degToRad(h)) * e) : (j = (90 === h || 270 === h || (i = Math.cos(this.game.math.degToRad(h)) * e), Math.sin(this.game.math.degToRad(h)) * e));
                var k = null;
                if ((this.autoExpandBulletsGroup ? ((k = this.bullets.getFirstExists(!1, !0, f, g, this.bulletKey, this.bulletFrame)).data.bulletManager = this) : (k = this.bullets.getFirstExists(!1)), k)) {
                    if (
                        (k.reset(f, g),
                        (k.data.fromX = f),
                        (k.data.fromY = g),
                        (k.data.killType = this.bulletKillType),
                        (k.data.killDistance = this.bulletKillDistance),
                        (k.data.rotateToVelocity = this.bulletRotateToVelocity),
                        this.bulletKillType === c.Weapon.KILL_LIFESPAN && (k.lifespan = this.bulletLifespan),
                        (k.angle = h + this.bulletAngleOffset),
                        "" !== this.bulletAnimation)
                    ) {
                        if (null === k.animations.getAnimation(this.bulletAnimation)) {
                            var l = this.anims[this.bulletAnimation];
                            k.animations.add(l.name, l.frames, l.frameRate, l.loop, l.useNumericIndex);
                        }
                        k.animations.play(this.bulletAnimation);
                    } else
                        this.bulletFrameCycle
                            ? ((k.frame = this.bulletFrames[this.bulletFrameIndex]), ++this.bulletFrameIndex >= this.bulletFrames.length && (this.bulletFrameIndex = 0))
                            : this.bulletFrameRandom && (k.frame = this.bulletFrames[Math.floor(Math.random() * this.bulletFrames.length)]);
                    if (
                        (k.data.bodyDirty &&
                            (this._data.customBody && k.body.setSize(this._data.width, this._data.height, this._data.offsetX, this._data.offsetY), (k.body.collideWorldBounds = this.bulletCollideWorldBounds), (k.data.bodyDirty = !1)),
                        k.body.velocity.set(i, j),
                        k.body.gravity.set(this.bulletGravity.x, this.bulletGravity.y),
                        0 !== this.bulletSpeedVariance)
                    ) {
                        var m = this.fireRate;
                        (m += c.Math.between(-this.fireRateVariance, this.fireRateVariance)) < 0 && (m = 0), (this._nextFire = this.game.time.now + m);
                    } else this._nextFire = this.game.time.now + this.fireRate;
                    this.shots++, this.onFire.dispatch(k, this, e), 0 < this.fireLimit && this.shots === this.fireLimit && this.onFireLimit.dispatch(this, this.fireLimit);
                }
                return k;
            }),
            (c.Weapon.prototype.fireAtPointer = function (a) {
                return void 0 === a && (a = this.game.input.activePointer), this.fire(null, a.worldX, a.worldY);
            }),
            (c.Weapon.prototype.fireAtSprite = function (a) {
                return this.fire(null, a.world.x, a.world.y);
            }),
            (c.Weapon.prototype.fireAtXY = function (a, b) {
                return this.fire(null, a, b);
            }),
            (c.Weapon.prototype.setBulletBodyOffset = function (a, b, c, d) {
                return (
                    void 0 === c && (c = 0),
                    void 0 === d && (d = 0),
                    (this._data.customBody = !0),
                    (this._data.width = a),
                    (this._data.height = b),
                    (this._data.offsetX = c),
                    (this._data.offsetY = d),
                    this.bullets.callAll("body.setSize", "body", a, b, c, d),
                    this.bullets.setAll("data.bodyDirty", !1),
                    this
                );
            }),
            (c.Weapon.prototype.setBulletFrames = function (a, b, d, e) {
                return void 0 === d && (d = !0), void 0 === e && (e = !1), (this.bulletFrames = c.ArrayUtils.numberArray(a, b)), (this.bulletFrameIndex = 0), (this.bulletFrameCycle = d), (this.bulletFrameRandom = e), this;
            }),
            (c.Weapon.prototype.addBulletAnimation = function (a, b, c, d, e) {
                return (this.anims[a] = { name: a, frames: b, frameRate: c, loop: d, useNumericIndex: e }), this.bullets.callAll("animations.add", "animations", a, b, c, d, e), (this.bulletAnimation = a), this;
            }),
            (c.Weapon.prototype.debug = function (a, b, c) {
                void 0 === a && (a = 16),
                    void 0 === b && (b = 32),
                    void 0 === c && (c = !1),
                    this.game.debug.text("Weapon Plugin", a, b),
                    this.game.debug.text("Bullets Alive: " + this.bullets.total + " - Total: " + this.bullets.length, a, b + 24),
                    c && this.bullets.forEachExists(this.game.debug.body, this.game.debug, "rgba(255, 0, 255, 0.8)");
            }),
            Object.defineProperty(c.Weapon.prototype, "bulletClass", {
                get: function () {
                    return this._bulletClass;
                },
                set: function (a) {
                    (this._bulletClass = a), (this.bullets.classType = this._bulletClass);
                },
            }),
            Object.defineProperty(c.Weapon.prototype, "bulletKillType", {
                get: function () {
                    return this._bulletKillType;
                },
                set: function (a) {
                    switch (a) {
                        case c.Weapon.KILL_STATIC_BOUNDS:
                        case c.Weapon.KILL_WEAPON_BOUNDS:
                            this.bulletBounds = this.bounds;
                            break;
                        case c.Weapon.KILL_CAMERA_BOUNDS:
                            this.bulletBounds = this.game.camera.view;
                            break;
                        case c.Weapon.KILL_WORLD_BOUNDS:
                            this.bulletBounds = this.game.world.bounds;
                    }
                    this._bulletKillType = a;
                },
            }),
            Object.defineProperty(c.Weapon.prototype, "bulletCollideWorldBounds", {
                get: function () {
                    return this._bulletCollideWorldBounds;
                },
                set: function (a) {
                    (this._bulletCollideWorldBounds = a), this.bullets.setAll("body.collideWorldBounds", a), this.bullets.setAll("data.bodyDirty", !1);
                },
            }),
            Object.defineProperty(c.Weapon.prototype, "x", {
                get: function () {
                    return this.fireFrom.x;
                },
                set: function (a) {
                    this.fireFrom.x = a;
                },
            }),
            Object.defineProperty(c.Weapon.prototype, "y", {
                get: function () {
                    return this.fireFrom.y;
                },
                set: function (a) {
                    this.fireFrom.y = a;
                },
            }),
            (c.Bullet = function (a, b, d, e, f) {
                c.Sprite.call(this, a, b, d, e, f), this.anchor.set(0.5), (this.data = { bulletManager: null, fromX: 0, fromY: 0, bodyDirty: !0, rotateToVelocity: !1, killType: 0, killDistance: 0 });
            }),
            (c.Bullet.prototype = Object.create(c.Sprite.prototype)),
            (c.Bullet.prototype.constructor = c.Bullet),
            (c.Bullet.prototype.kill = function () {
                return (this.alive = !1), (this.exists = !1), (this.visible = !1), this.data.bulletManager.onKill.dispatch(this), this;
            }),
            (c.Bullet.prototype.update = function () {
                this.exists &&
                    (this.data.killType > c.Weapon.KILL_LIFESPAN &&
                        (this.data.killType === c.Weapon.KILL_DISTANCE
                            ? this.game.physics.arcade.distanceToXY(this, this.data.fromX, this.data.fromY, !0) > this.data.killDistance && this.kill()
                            : this.data.bulletManager.bulletBounds.intersects(this) || this.kill()),
                    this.data.rotateToVelocity && (this.rotation = Math.atan2(this.body.velocity.y, this.body.velocity.x)),
                    this.data.bulletManager.bulletWorldWrap && this.game.world.wrap(this, this.data.bulletManager.bulletWorldWrapPadding));
            }),
            (c.Video = function (a, b, d) {
                if (
                    (void 0 === b && (b = null),
                    void 0 === d && (d = null),
                    (this.game = a),
                    (this.key = b),
                    (this.width = 0),
                    (this.height = 0),
                    (this.type = c.VIDEO),
                    (this.disableTextureUpload = !1),
                    (this.touchLocked = !1),
                    (this.onPlay = new c.Signal()),
                    (this.onChangeSource = new c.Signal()),
                    (this.onComplete = new c.Signal()),
                    (this.onAccess = new c.Signal()),
                    (this.onError = new c.Signal()),
                    (this.onTimeout = new c.Signal()),
                    (this.timeout = 15e3),
                    (this._timeOutID = null),
                    (this.video = null),
                    (this.videoStream = null),
                    (this.isStreaming = !1),
                    (this.retryLimit = 20),
                    (this.retry = 0),
                    (this.retryInterval = 500),
                    (this._retryID = null),
                    (this._codeMuted = !1),
                    (this._muted = !1),
                    (this._codePaused = !1),
                    (this._paused = !1),
                    (this._pending = !1),
                    (this._autoplay = !1),
                    (this._endCallback = null),
                    (this._playCallback = null),
                    b && this.game.cache.checkVideoKey(b))
                ) {
                    var e = this.game.cache.getVideo(b);
                    e.isBlob ? this.createVideoFromBlob(e.data) : (this.video = e.data), (this.width = this.video.videoWidth), (this.height = this.video.videoHeight);
                } else d && this.createVideoFromURL(d, !1);
                this.video && !d ? (this.baseTexture = new PIXI.BaseTexture(this.video)) : (this.baseTexture = new PIXI.BaseTexture(c.Cache.DEFAULT.baseTexture.source)),
                    this.baseTexture.forceLoaded(this.width, this.height),
                    (this.texture = new PIXI.Texture(this.baseTexture)),
                    (this.textureFrame = new c.Frame(0, 0, 0, this.width, this.height, "video")),
                    this.texture.setFrame(this.textureFrame),
                    (this.texture.valid = !1),
                    null !== b && this.video && (this.texture.valid = this.video.canplay),
                    (this.snapshot = null),
                    c.BitmapData && (this.snapshot = new c.BitmapData(this.game, "", this.width, this.height)),
                    (!this.game.device.cocoonJS && (this.game.device.iOS || this.game.device.chrome)) || (window.PhaserGlobal && window.PhaserGlobal.fakeiOSTouchLock) ? this.setTouchLock() : e && (e.locked = !1);
            }),
            (c.Video.prototype = {
                connectToMediaStream: function (a, b) {
                    return (
                        a &&
                            b &&
                            ((this.video = a), (this.videoStream = b), (this.isStreaming = !0), (this.baseTexture.source = this.video), this.updateTexture(null, this.video.videoWidth, this.video.videoHeight), this.onAccess.dispatch(this)),
                        this
                    );
                },
                startMediaStream: function (a, b, c) {
                    if ((void 0 === a && (a = !1), void 0 === b && (b = null), void 0 === c && (c = null), !this.game.device.getUserMedia)) return this.onError.dispatch(this, "No getUserMedia"), !1;
                    null !== this.videoStream && (this.videoStream.active ? (this.videoStream.active = !1) : this.videoStream.stop()),
                        this.removeVideoElement(),
                        (this.video = document.createElement("video")),
                        this.video.setAttribute("autoplay", "autoplay"),
                        null !== b && (this.video.width = b),
                        null !== c && (this.video.height = c),
                        (this._timeOutID = window.setTimeout(this.getUserMediaTimeout.bind(this), this.timeout));
                    try {
                        navigator.getUserMedia({ audio: a, video: !0 }, this.getUserMediaSuccess.bind(this), this.getUserMediaError.bind(this));
                    } catch (a) {
                        this.getUserMediaError(a);
                    }
                    return this;
                },
                getUserMediaTimeout: function () {
                    clearTimeout(this._timeOutID), this.onTimeout.dispatch(this);
                },
                getUserMediaError: function (a) {
                    clearTimeout(this._timeOutID), this.onError.dispatch(this, a);
                },
                getUserMediaSuccess: function (a) {
                    clearTimeout(this._timeOutID), (this.videoStream = a), void 0 !== this.video.mozSrcObject ? (this.video.mozSrcObject = a) : (this.video.src = (window.URL && window.URL.createObjectURL(a)) || a);
                    var b = this;
                    this.video.onloadeddata = function () {
                        var c = 10;
                        !(function a() {
                            if (0 < c)
                                if (0 < b.video.videoWidth) {
                                    var d = b.video.videoWidth,
                                        e = b.video.videoHeight;
                                    isNaN(b.video.videoHeight) && (e = d / (4 / 3)), b.video.play(), (b.isStreaming = !0), (b.baseTexture.source = b.video), b.updateTexture(null, d, e), b.onAccess.dispatch(b);
                                } else window.setTimeout(a, 500);
                            c--;
                        })();
                    };
                },
                createVideoFromBlob: function (a) {
                    var b = this;
                    return (
                        (this.video = document.createElement("video")),
                        (this.video.controls = !1),
                        this.video.setAttribute("autoplay", "autoplay"),
                        this.video.addEventListener(
                            "loadeddata",
                            function (a) {
                                b.updateTexture(a);
                            },
                            !0
                        ),
                        (this.video.src = window.URL.createObjectURL(a)),
                        (this.video.canplay = !0),
                        this
                    );
                },
                createVideoFromURL: function (a, b) {
                    return (
                        void 0 === b && (b = !1),
                        this.texture && (this.texture.valid = !1),
                        (this.video = document.createElement("video")),
                        (this.video.controls = !1),
                        b && this.video.setAttribute("autoplay", "autoplay"),
                        (this.video.src = a),
                        (this.video.canplay = !0),
                        this.video.load(),
                        (this.retry = this.retryLimit),
                        (this._retryID = window.setTimeout(this.checkVideoProgress.bind(this), this.retryInterval)),
                        (this.key = a),
                        this
                    );
                },
                updateTexture: function (a, b, c) {
                    var d = !1;
                    null != b || ((b = this.video.videoWidth), (d = !0)),
                        null != c || (c = this.video.videoHeight),
                        (this.width = b),
                        (this.height = c),
                        this.baseTexture.source !== this.video && (this.baseTexture.source = this.video),
                        this.baseTexture.forceLoaded(b, c),
                        this.texture.frame.resize(b, c),
                        (this.texture.width = b),
                        (this.texture.height = c),
                        (this.texture.valid = !0),
                        this.snapshot && this.snapshot.resize(b, c),
                        d && null !== this.key && (this.onChangeSource.dispatch(this, b, c), this._autoplay && (this.video.play(), this.onPlay.dispatch(this, this.loop, this.playbackRate)));
                },
                complete: function () {
                    this.onComplete.dispatch(this);
                },
                play: function (a, b) {
                    return (
                        void 0 === a && (a = !1),
                        void 0 === b && (b = 1),
                        this.game.sound.onMute && (this.game.sound.onMute.add(this.setMute, this), this.game.sound.onUnMute.add(this.unsetMute, this), this.game.sound.mute && this.setMute()),
                        this.game.onPause.add(this.setPause, this),
                        this.game.onResume.add(this.setResume, this),
                        (this._endCallback = this.complete.bind(this)),
                        this.video.addEventListener("ended", this._endCallback, !0),
                        this.video.addEventListener("webkitendfullscreen", this._endCallback, !0),
                        (this.video.loop = a ? "loop" : ""),
                        (this.video.playbackRate = b),
                        this.touchLocked
                            ? (this._pending = !0)
                            : ((this._pending = !1),
                              null !== this.key &&
                                  (4 !== this.video.readyState
                                      ? ((this.retry = this.retryLimit), (this._retryID = window.setTimeout(this.checkVideoProgress.bind(this), this.retryInterval)))
                                      : ((this._playCallback = this.playHandler.bind(this)), this.video.addEventListener("playing", this._playCallback, !0))),
                              this.video.play(),
                              this.onPlay.dispatch(this, a, b)),
                        this
                    );
                },
                playHandler: function () {
                    this.video.removeEventListener("playing", this._playCallback, !0), this.updateTexture();
                },
                stop: function () {
                    return (
                        this.game.sound.onMute && (this.game.sound.onMute.remove(this.setMute, this), this.game.sound.onUnMute.remove(this.unsetMute, this)),
                        this.game.onPause.remove(this.setPause, this),
                        this.game.onResume.remove(this.setResume, this),
                        this.isStreaming
                            ? (this.video.mozSrcObject
                                  ? (this.video.mozSrcObject.stop(), (this.video.src = null))
                                  : ((this.video.src = ""),
                                    this.videoStream.active
                                        ? (this.videoStream.active = !1)
                                        : this.videoStream.getTracks
                                        ? this.videoStream.getTracks().forEach(function (a) {
                                              a.stop();
                                          })
                                        : this.videoStream.stop()),
                              (this.videoStream = null),
                              (this.isStreaming = !1))
                            : (this.video.removeEventListener("ended", this._endCallback, !0),
                              this.video.removeEventListener("webkitendfullscreen", this._endCallback, !0),
                              this.video.removeEventListener("playing", this._playCallback, !0),
                              this.touchLocked ? (this._pending = !1) : this.video.pause()),
                        this
                    );
                },
                add: function (a) {
                    if (Array.isArray(a)) for (var b = 0; b < a.length; b++) a[b].loadTexture && a[b].loadTexture(this);
                    else a.loadTexture(this);
                    return this;
                },
                addToWorld: function (a, b, c, d, e, f) {
                    (e = e || 1), (f = f || 1);
                    var g = this.game.add.image(a, b, this);
                    return g.anchor.set(c, d), g.scale.set(e, f), g;
                },
                render: function () {
                    !this.disableTextureUpload && this.playing && this.baseTexture.dirty();
                },
                setMute: function () {
                    this._muted || ((this._muted = !0), (this.video.muted = !0));
                },
                unsetMute: function () {
                    this._muted && !this._codeMuted && ((this._muted = !1), (this.video.muted = !1));
                },
                setPause: function () {
                    this._paused || this.touchLocked || ((this._paused = !0), this.video.pause());
                },
                setResume: function () {
                    !this._paused || this._codePaused || this.touchLocked || ((this._paused = !1), this.video.ended || this.video.play());
                },
                changeSource: function (a, b) {
                    return (
                        void 0 === b && (b = !0),
                        (this.texture.valid = !1),
                        this.video.pause(),
                        (this.retry = this.retryLimit),
                        (this._retryID = window.setTimeout(this.checkVideoProgress.bind(this), this.retryInterval)),
                        (this.video.src = a),
                        this.video.load(),
                        (this._autoplay = b) || (this.paused = !0),
                        this
                    );
                },
                checkVideoProgress: function () {
                    4 === this.video.readyState ? this.updateTexture() : (this.retry--, 0 < this.retry && (this._retryID = window.setTimeout(this.checkVideoProgress.bind(this), this.retryInterval)));
                },
                setTouchLock: function () {
                    this.game.input.touch.addTouchLockCallback(this.unlock, this), (this.touchLocked = !0);
                },
                unlock: function () {
                    if (((this.touchLocked = !1), this.video.play(), this.onPlay.dispatch(this, this.loop, this.playbackRate), this.key)) {
                        var a = this.game.cache.getVideo(this.key);
                        a && !a.isBlob && (a.locked = !1);
                    }
                    return !0;
                },
                grab: function (a, b, c) {
                    return (
                        void 0 === a && (a = !1),
                        void 0 === b && (b = 1),
                        void 0 === c && (c = null),
                        null === this.snapshot ? void 0 : (a && this.snapshot.cls(), this.snapshot.copy(this.video, 0, 0, this.width, this.height, 0, 0, this.width, this.height, 0, 0, 0, 1, 1, b, c), this.snapshot)
                    );
                },
                removeVideoElement: function () {
                    if (this.video) {
                        for (this.video.parentNode && this.video.parentNode.removeChild(this.video); this.video.hasChildNodes(); ) this.video.removeChild(this.video.firstChild);
                        this.video.removeAttribute("autoplay"), this.video.removeAttribute("src"), (this.video = null);
                    }
                },
                destroy: function () {
                    this.stop(), this.removeVideoElement(), this.touchLocked && this.game.input.touch.removeTouchLockCallback(this.unlock, this), this._retryID && window.clearTimeout(this._retryID);
                },
            }),
            Object.defineProperty(c.Video.prototype, "currentTime", {
                get: function () {
                    return this.video ? this.video.currentTime : 0;
                },
                set: function (a) {
                    this.video.currentTime = a;
                },
            }),
            Object.defineProperty(c.Video.prototype, "duration", {
                get: function () {
                    return this.video ? this.video.duration : 0;
                },
            }),
            Object.defineProperty(c.Video.prototype, "progress", {
                get: function () {
                    return this.video ? this.video.currentTime / this.video.duration : 0;
                },
            }),
            Object.defineProperty(c.Video.prototype, "mute", {
                get: function () {
                    return this._muted;
                },
                set: function (a) {
                    if ((a = a || null)) {
                        if (this._muted) return;
                        (this._codeMuted = !0), this.setMute();
                    } else {
                        if (!this._muted) return;
                        (this._codeMuted = !1), this.unsetMute();
                    }
                },
            }),
            Object.defineProperty(c.Video.prototype, "paused", {
                get: function () {
                    return this._paused;
                },
                set: function (a) {
                    if (((a = a || null), !this.touchLocked))
                        if (a) {
                            if (this._paused) return;
                            (this._codePaused = !0), this.setPause();
                        } else {
                            if (!this._paused) return;
                            (this._codePaused = !1), this.setResume();
                        }
                },
            }),
            Object.defineProperty(c.Video.prototype, "volume", {
                get: function () {
                    return this.video ? this.video.volume : 1;
                },
                set: function (a) {
                    a < 0 ? (a = 0) : 1 < a && (a = 1), this.video && (this.video.volume = a);
                },
            }),
            Object.defineProperty(c.Video.prototype, "playbackRate", {
                get: function () {
                    return this.video ? this.video.playbackRate : 1;
                },
                set: function (a) {
                    this.video && (this.video.playbackRate = a);
                },
            }),
            Object.defineProperty(c.Video.prototype, "loop", {
                get: function () {
                    return !!this.video && this.video.loop;
                },
                set: function (a) {
                    a && this.video ? (this.video.loop = "loop") : this.video && (this.video.loop = "");
                },
            }),
            Object.defineProperty(c.Video.prototype, "playing", {
                get: function () {
                    return !(this.video.paused && this.video.ended);
                },
            }),
            (c.Video.prototype.constructor = c.Video),
            void 0 === PIXI.blendModes && (PIXI.blendModes = c.blendModes),
            void 0 === PIXI.scaleModes && (PIXI.scaleModes = c.scaleModes),
            void 0 === PIXI.Texture.emptyTexture && (PIXI.Texture.emptyTexture = new PIXI.Texture(new PIXI.BaseTexture())),
            void 0 === PIXI.DisplayObject._tempMatrix && (PIXI.DisplayObject._tempMatrix = new PIXI.Matrix()),
            void 0 === PIXI.RenderTexture.tempMatrix && (PIXI.RenderTexture.tempMatrix = new PIXI.Matrix()),
            PIXI.Graphics &&
                void 0 === PIXI.Graphics.POLY &&
                ((PIXI.Graphics.POLY = c.POLYGON), (PIXI.Graphics.RECT = c.RECTANGLE), (PIXI.Graphics.CIRC = c.CIRCLE), (PIXI.Graphics.ELIP = c.ELLIPSE), (PIXI.Graphics.RREC = c.ROUNDEDRECTANGLE)),
            (PIXI.TextureSilentFail = !0),
            "undefined" != typeof exports
                ? ("undefined" != typeof module && module.exports && (exports = module.exports = c), (exports.Phaser = c))
                : "undefined" != typeof define && define.amd
                ? define("Phaser", (b.Phaser = c))
                : (b.Phaser = c),
            c
        );
    }.call(this);
var COMPILED = !1,
    goog = goog || {};
(goog.global = this),
    goog.global.CLOSURE_UNCOMPILED_DEFINES,
    goog.global.CLOSURE_DEFINES,
    (goog.isDef = function (a) {
        return void 0 !== a;
    }),
    (goog.exportPath_ = function (a, b, c) {
        var f,
            d = a.split("."),
            e = c || goog.global;
        d[0] in e || !e.execScript || e.execScript("var " + d[0]);
        for (; d.length && (f = d.shift()); ) !d.length && goog.isDef(b) ? (e[f] = b) : (e = e[f] ? e[f] : (e[f] = {}));
    }),
    (goog.define = function (a, b) {
        var c = b;
        COMPILED ||
            (goog.global.CLOSURE_UNCOMPILED_DEFINES && Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_UNCOMPILED_DEFINES, a)
                ? (c = goog.global.CLOSURE_UNCOMPILED_DEFINES[a])
                : goog.global.CLOSURE_DEFINES && Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES, a) && (c = goog.global.CLOSURE_DEFINES[a])),
            goog.exportPath_(a, c);
    }),
    (goog.DEBUG = !0),
    goog.define("goog.LOCALE", "en"),
    goog.define("goog.TRUSTED_SITE", !0),
    goog.define("goog.STRICT_MODE_COMPATIBLE", !1),
    (goog.provide = function (a) {
        if (!COMPILED) {
            if (goog.isProvided_(a)) throw Error('Namespace "' + a + '" already declared.');
            delete goog.implicitNamespaces_[a];
            for (var b = a; (b = b.substring(0, b.lastIndexOf("."))) && !goog.getObjectByName(b); ) goog.implicitNamespaces_[b] = !0;
        }
        goog.exportPath_(a);
    }),
    (goog.setTestOnly = function (a) {
        if (COMPILED && !goog.DEBUG) throw ((a = a || ""), Error("Importing test-only code into non-debug environment" + (a ? ": " + a : ".")));
    }),
    (goog.forwardDeclare = function () {}),
    COMPILED ||
        ((goog.isProvided_ = function (a) {
            return !goog.implicitNamespaces_[a] && goog.isDefAndNotNull(goog.getObjectByName(a));
        }),
        (goog.implicitNamespaces_ = {})),
    (goog.getObjectByName = function (a, b) {
        for (var c, d = a.split("."), e = b || goog.global; (c = d.shift()); ) {
            if (!goog.isDefAndNotNull(e[c])) return null;
            e = e[c];
        }
        return e;
    }),
    (goog.globalize = function (a, b) {
        var c = b || goog.global;
        for (var d in a) c[d] = a[d];
    }),
    (goog.addDependency = function (a, b, c) {
        if (goog.DEPENDENCIES_ENABLED) {
            for (var d, e, f = a.replace(/\\/g, "/"), g = goog.dependencies_, h = 0; (d = b[h]); h++) (g.nameToPath[d] = f) in g.pathToNames || (g.pathToNames[f] = {}), (g.pathToNames[f][d] = !0);
            for (var i = 0; (e = c[i]); i++) f in g.requires || (g.requires[f] = {}), (g.requires[f][e] = !0);
        }
    }),
    goog.define("goog.ENABLE_DEBUG_LOADER", !0),
    (goog.require = function (a) {
        if (!COMPILED) {
            if (goog.isProvided_(a)) return;
            if (goog.ENABLE_DEBUG_LOADER) {
                var b = goog.getPathFromDeps_(a);
                if (b) return (goog.included_[b] = !0), void goog.writeScripts_();
            }
            var c = "goog.require could not find: " + a;
            throw (goog.global.console && goog.global.console.error(c), Error(c));
        }
    }),
    (goog.basePath = ""),
    goog.global.CLOSURE_BASE_PATH,
    goog.global.CLOSURE_NO_DEPS,
    goog.global.CLOSURE_IMPORT_SCRIPT,
    (goog.nullFunction = function () {}),
    (goog.identityFunction = function (a) {
        return a;
    }),
    (goog.abstractMethod = function () {
        throw Error("unimplemented abstract method");
    }),
    (goog.addSingletonGetter = function (a) {
        a.getInstance = function () {
            return a.instance_ ? a.instance_ : (goog.DEBUG && (goog.instantiatedSingletons_[goog.instantiatedSingletons_.length] = a), (a.instance_ = new a()));
        };
    }),
    (goog.instantiatedSingletons_ = []),
    (goog.DEPENDENCIES_ENABLED = !COMPILED && goog.ENABLE_DEBUG_LOADER),
    goog.DEPENDENCIES_ENABLED &&
        ((goog.included_ = {}),
        (goog.dependencies_ = { pathToNames: {}, nameToPath: {}, requires: {}, visited: {}, written: {} }),
        (goog.inHtmlDocument_ = function () {
            var a = goog.global.document;
            return void 0 !== a && "write" in a;
        }),
        (goog.findBasePath_ = function () {
            if (goog.global.CLOSURE_BASE_PATH) goog.basePath = goog.global.CLOSURE_BASE_PATH;
            else if (goog.inHtmlDocument_())
                for (var b = goog.global.document.getElementsByTagName("script"), c = b.length - 1; 0 <= c; --c) {
                    var d = b[c].src,
                        e = d.lastIndexOf("?"),
                        f = -1 == e ? d.length : e;
                    if ("base.js" == d.substr(f - 7, 7)) return void (goog.basePath = d.substr(0, f - 7));
                }
        }),
        (goog.importScript_ = function (a) {
            var b = goog.global.CLOSURE_IMPORT_SCRIPT || goog.writeScriptTag_;
            !goog.dependencies_.written[a] && b(a) && (goog.dependencies_.written[a] = !0);
        }),
        (goog.writeScriptTag_ = function (a) {
            if (goog.inHtmlDocument_()) {
                var b = goog.global.document;
                if ("complete" != b.readyState) return b.write('<script type="text/javascript" src="' + a + '"></script>'), !0;
                if (/\bdeps.js$/.test(a)) return !1;
                throw Error('Cannot write "' + a + '" after document load');
            }
            return !1;
        }),
        (goog.writeScripts_ = function () {
            function a(e) {
                if (!(e in d.written)) {
                    if (e in d.visited) return void (e in c || ((c[e] = !0), b.push(e)));
                    if (((d.visited[e] = !0), e in d.requires))
                        for (var f in d.requires[e])
                            if (!goog.isProvided_(f)) {
                                if (!(f in d.nameToPath)) throw Error("Undefined nameToPath for " + f);
                                a(d.nameToPath[f]);
                            }
                    e in c || ((c[e] = !0), b.push(e));
                }
            }
            var b = [],
                c = {},
                d = goog.dependencies_;
            for (var e in goog.included_) d.written[e] || a(e);
            for (var f = 0; f < b.length; f++) {
                if (!b[f]) throw Error("Undefined script input");
                goog.importScript_(goog.basePath + b[f]);
            }
        }),
        (goog.getPathFromDeps_ = function (a) {
            return a in goog.dependencies_.nameToPath ? goog.dependencies_.nameToPath[a] : null;
        }),
        goog.findBasePath_()),
    (goog.typeOf = function (a) {
        var b = typeof a;
        if ("object" == b) {
            if (!a) return "null";
            if (a instanceof Array) return "array";
            if (a instanceof Object) return b;
            var c = Object.prototype.toString.call(a);
            if ("[object Window]" == c) return "object";
            if ("[object Array]" == c || ("number" == typeof a.length && void 0 !== a.splice && void 0 !== a.propertyIsEnumerable && !a.propertyIsEnumerable("splice"))) return "array";
            if ("[object Function]" == c || (void 0 !== a.call && void 0 !== a.propertyIsEnumerable && !a.propertyIsEnumerable("call"))) return "function";
        } else if ("function" == b && void 0 === a.call) return "object";
        return b;
    }),
    (goog.isNull = function (a) {
        return null === a;
    }),
    (goog.isDefAndNotNull = function (a) {
        return null != a;
    }),
    (goog.isArray = function (a) {
        return "array" == goog.typeOf(a);
    }),
    (goog.isArrayLike = function (a) {
        var b = goog.typeOf(a);
        return "array" == b || ("object" == b && "number" == typeof a.length);
    }),
    (goog.isDateLike = function (a) {
        return goog.isObject(a) && "function" == typeof a.getFullYear;
    }),
    (goog.isString = function (a) {
        return "string" == typeof a;
    }),
    (goog.isBoolean = function (a) {
        return "boolean" == typeof a;
    }),
    (goog.isNumber = function (a) {
        return "number" == typeof a;
    }),
    (goog.isFunction = function (a) {
        return "function" == goog.typeOf(a);
    }),
    (goog.isObject = function (a) {
        var b = typeof a;
        return ("object" == b && null != a) || "function" == b;
    }),
    (goog.getUid = function (a) {
        return a[goog.UID_PROPERTY_] || (a[goog.UID_PROPERTY_] = ++goog.uidCounter_);
    }),
    (goog.hasUid = function (a) {
        return !!a[goog.UID_PROPERTY_];
    }),
    (goog.removeUid = function (a) {
        "removeAttribute" in a && a.removeAttribute(goog.UID_PROPERTY_);
        try {
            delete a[goog.UID_PROPERTY_];
        } catch (b) {}
    }),
    (goog.UID_PROPERTY_ = "closure_uid_" + ((1e9 * Math.random()) >>> 0)),
    (goog.uidCounter_ = 0),
    (goog.getHashCode = goog.getUid),
    (goog.removeHashCode = goog.removeUid),
    (goog.cloneObject = function (a) {
        var b = goog.typeOf(a);
        if ("object" != b && "array" != b) return a;
        if (a.clone) return a.clone();
        var c = "array" == b ? [] : {};
        for (var d in a) c[d] = goog.cloneObject(a[d]);
        return c;
    }),
    (goog.bindNative_ = function (a) {
        return a.call.apply(a.bind, arguments);
    }),
    (goog.bindJs_ = function (a, b) {
        if (!a) throw new Error();
        if (2 < arguments.length) {
            var c = Array.prototype.slice.call(arguments, 2);
            return function () {
                var d = Array.prototype.slice.call(arguments);
                return Array.prototype.unshift.apply(d, c), a.apply(b, d);
            };
        }
        return function () {
            return a.apply(b, arguments);
        };
    }),
    (goog.bind = function () {
        return (goog.bind = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf("native code") ? goog.bindNative_ : goog.bindJs_), goog.bind.apply(null, arguments);
    }),
    (goog.partial = function (a) {
        var b = Array.prototype.slice.call(arguments, 1);
        return function () {
            var c = b.slice();
            return c.push.apply(c, arguments), a.apply(this, c);
        };
    }),
    (goog.mixin = function (a, b) {
        for (var c in b) a[c] = b[c];
    }),
    (goog.now =
        (goog.TRUSTED_SITE && Date.now) ||
        function () {
            return +new Date();
        }),
    (goog.globalEval = function (a) {
        if (goog.global.execScript) goog.global.execScript(a, "JavaScript");
        else {
            if (!goog.global.eval) throw Error("goog.globalEval not available");
            if (
                (null == goog.evalWorksForGlobals_ && (goog.global.eval("var _et_ = 1;"), void 0 !== goog.global._et_ ? (delete goog.global._et_, (goog.evalWorksForGlobals_ = !0)) : (goog.evalWorksForGlobals_ = !1)),
                goog.evalWorksForGlobals_)
            )
                goog.global.eval(a);
            else {
                var b = goog.global.document,
                    c = b.createElement("script");
                (c.type = "text/javascript"), (c.defer = !1), c.appendChild(b.createTextNode(a)), b.body.appendChild(c), b.body.removeChild(c);
            }
        }
    }),
    (goog.evalWorksForGlobals_ = null),
    goog.cssNameMapping_,
    goog.cssNameMappingStyle_,
    (goog.getCssName = function (a, b) {
        var c,
            d = function (a) {
                return goog.cssNameMapping_[a] || a;
            };
        return (
            (c = goog.cssNameMapping_
                ? "BY_WHOLE" == goog.cssNameMappingStyle_
                    ? d
                    : function (a) {
                          for (var b = a.split("-"), c = [], e = 0; e < b.length; e++) c.push(d(b[e]));
                          return c.join("-");
                      }
                : function (a) {
                      return a;
                  }),
            b ? a + "-" + c(b) : c(a)
        );
    }),
    (goog.setCssNameMapping = function (a, b) {
        (goog.cssNameMapping_ = a), (goog.cssNameMappingStyle_ = b);
    }),
    goog.global.CLOSURE_CSS_NAME_MAPPING,
    !COMPILED && goog.global.CLOSURE_CSS_NAME_MAPPING && (goog.cssNameMapping_ = goog.global.CLOSURE_CSS_NAME_MAPPING),
    (goog.getMsg = function (a, b) {
        return (
            b &&
                (a = a.replace(/\{\$([^}]+)}/g, function (a, c) {
                    return c in b ? b[c] : a;
                })),
            a
        );
    }),
    (goog.getMsgWithFallback = function (a) {
        return a;
    }),
    (goog.exportSymbol = function (a, b, c) {
        goog.exportPath_(a, b, c);
    }),
    (goog.exportProperty = function (a, b, c) {
        a[b] = c;
    }),
    (goog.inherits = function (a, b) {
        function c() {}
        (c.prototype = b.prototype),
            (a.superClass_ = b.prototype),
            (a.prototype = new c()),
            ((a.prototype.constructor = a).base = function (a, c) {
                var d = Array.prototype.slice.call(arguments, 2);
                return b.prototype[c].apply(a, d);
            });
    }),
    (goog.base = function (a, b) {
        var c = arguments.callee.caller;
        if (goog.STRICT_MODE_COMPATIBLE || (goog.DEBUG && !c)) throw Error("arguments.caller not defined.  goog.base() cannot be used with strict mode code. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");
        if (c.superClass_) return c.superClass_.constructor.apply(a, Array.prototype.slice.call(arguments, 1));
        for (var d = Array.prototype.slice.call(arguments, 2), e = !1, f = a.constructor; f; f = f.superClass_ && f.superClass_.constructor)
            if (f.prototype[b] === c) e = !0;
            else if (e) return f.prototype[b].apply(a, d);
        if (a[b] === c) return a.constructor.prototype[b].apply(a, d);
        throw Error("goog.base called from a method of one name to a method of a different name");
    }),
    (goog.scope = function (a) {
        a.call(goog.global);
    }),
    COMPILED || (goog.global.COMPILED = COMPILED),
    (goog.defineClass = function (a, b) {
        var c = b.constructor,
            d = b.statics;
        (c && c != Object.prototype.constructor) ||
            (c = function () {
                throw Error("cannot instantiate an interface (no constructor defined).");
            });
        var e = goog.defineClass.createSealingConstructor_(c, a);
        return a && goog.inherits(e, a), delete b.constructor, delete b.statics, goog.defineClass.applyProperties_(e.prototype, b), null != d && (d instanceof Function ? d(e) : goog.defineClass.applyProperties_(e, d)), e;
    }),
    goog.defineClass.ClassDescriptor,
    goog.define("goog.defineClass.SEAL_CLASS_INSTANCES", goog.DEBUG),
    (goog.defineClass.createSealingConstructor_ = function (a, b) {
        if (goog.defineClass.SEAL_CLASS_INSTANCES && Object.seal instanceof Function) {
            if (b && b.prototype && b.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]) return a;
            var c = function () {
                var b = a.apply(this, arguments) || this;
                return this.constructor === c && Object.seal(b), b;
            };
            return c;
        }
        return a;
    }),
    (goog.defineClass.OBJECT_PROTOTYPE_FIELDS_ = ["constructor", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "toLocaleString", "toString", "valueOf"]),
    (goog.defineClass.applyProperties_ = function (a, b) {
        var c;
        for (c in b) Object.prototype.hasOwnProperty.call(b, c) && (a[c] = b[c]);
        for (var d = 0; d < goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length; d++) (c = goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[d]), Object.prototype.hasOwnProperty.call(b, c) && (a[c] = b[c]);
    }),
    (goog.tagUnsealableClass = function (a) {
        !COMPILED && goog.defineClass.SEAL_CLASS_INSTANCES && (a.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_] = !0);
    }),
    (goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_ = "goog_defineClass_legacy_unsealable"),
    goog.provide("box2d.b2Settings"),
    Object.defineProperty ||
        (Object.defineProperty = function (a, b, c) {
            Object.__defineGetter__ && ("get" in c ? a.__defineGetter__(b, c.get) : "value" in c && a.__defineGetter__(b, c.value)),
                Object.__defineSetter__ && ("set" in c ? a.__defineSetter__(b, c.set) : "value" in c && a.__defineSetter__(b, c.value));
        }),
    (box2d.DEBUG = !1),
    (box2d.ENABLE_ASSERTS = box2d.DEBUG),
    (box2d.b2Assert = function (a) {
        box2d.DEBUG;
    }),
    (box2d.b2_maxFloat = 1e37),
    (box2d.b2_epsilon = 1e-5),
    (box2d.b2_epsilon_sq = box2d.b2_epsilon * box2d.b2_epsilon),
    (box2d.b2_pi = Math.PI),
    (box2d.b2_maxManifoldPoints = 2),
    (box2d.b2_maxPolygonVertices = 8),
    (box2d.b2_aabbExtension = 0.1),
    (box2d.b2_aabbMultiplier = 2),
    (box2d.b2_linearSlop = 0.008),
    (box2d.b2_angularSlop = (2 / 180) * box2d.b2_pi),
    (box2d.b2_polygonRadius = 2 * box2d.b2_linearSlop),
    (box2d.b2_maxSubSteps = 8),
    (box2d.b2_maxTOIContacts = 32),
    (box2d.b2_velocityThreshold = 1),
    (box2d.b2_maxLinearCorrection = 0.2),
    (box2d.b2_maxAngularCorrection = (8 / 180) * box2d.b2_pi),
    (box2d.b2_maxTranslation = 2),
    (box2d.b2_maxTranslationSquared = box2d.b2_maxTranslation * box2d.b2_maxTranslation),
    (box2d.b2_maxRotation = 0.5 * box2d.b2_pi),
    (box2d.b2_maxRotationSquared = box2d.b2_maxRotation * box2d.b2_maxRotation),
    (box2d.b2_baumgarte = 0.2),
    (box2d.b2_toiBaumgarte = 0.75),
    (box2d.b2_timeToSleep = 0.5),
    (box2d.b2_linearSleepTolerance = 0.01),
    (box2d.b2_angularSleepTolerance = (2 / 180) * box2d.b2_pi),
    (box2d.b2Alloc = function () {
        return null;
    }),
    (box2d.b2Free = function () {}),
    (box2d.b2Log = function () {
        goog.global.console.log.apply(null, arguments);
    }),
    (box2d.b2Version = function (a, b, c) {
        (this.major = a || 0), (this.minor = b || 0), (this.revision = c || 0);
    }),
    (box2d.b2Version.prototype.major = 0),
    (box2d.b2Version.prototype.minor = 0),
    (box2d.b2Version.prototype.revision = 0),
    (box2d.b2Version.prototype.toString = function () {
        return this.major + "." + this.minor + "." + this.revision;
    }),
    (box2d.b2_version = new box2d.b2Version(2, 3, 0)),
    (box2d.b2_changelist = 278),
    (box2d.b2ParseInt = function (a) {
        return parseInt(a, 10);
    }),
    (box2d.b2ParseUInt = function (a) {
        return box2d.b2Abs(parseInt(a, 10));
    }),
    (box2d.b2MakeArray = function (a, b) {
        void 0 === a && (a = 0);
        var c = new Array(a);
        if (void 0 !== b) for (var d = 0; d < a; ++d) c[d] = b(d);
        return c;
    }),
    (box2d.b2MakeNumberArray = function (a) {
        return box2d.b2MakeArray(a, function () {
            return 0;
        });
    }),
    goog.provide("box2d.b2Math"),
    goog.require("box2d.b2Settings"),
    (box2d.b2_pi_over_180 = box2d.b2_pi / 180),
    (box2d.b2_180_over_pi = 180 / box2d.b2_pi),
    (box2d.b2_two_pi = 2 * box2d.b2_pi),
    (box2d.b2Abs = function (a) {
        return a < 0 ? -a : a;
    }),
    (box2d.b2Min = function (a, b) {
        return a < b ? a : b;
    }),
    (box2d.b2Max = function (a, b) {
        return b < a ? a : b;
    }),
    (box2d.b2Clamp = function (a, b, c) {
        return a < b ? b : c < a ? c : a;
    }),
    (box2d.b2Swap = function (a, b) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(!1);
        var c = a[0];
        (a[0] = b[0]), (b[0] = c);
    }),
    (box2d.b2IsValid = function (a) {
        return isFinite(a);
    }),
    (box2d.b2Sq = function (a) {
        return a * a;
    }),
    (box2d.b2InvSqrt = function (a) {
        return 1 / Math.sqrt(a);
    }),
    (box2d.b2Sqrt = function (a) {
        return Math.sqrt(a);
    }),
    (box2d.b2Pow = function (a, b) {
        return Math.pow(a, b);
    }),
    (box2d.b2DegToRad = function (a) {
        return a * box2d.b2_pi_over_180;
    }),
    (box2d.b2RadToDeg = function (a) {
        return a * box2d.b2_180_over_pi;
    }),
    (box2d.b2Cos = function (a) {
        return Math.cos(a);
    }),
    (box2d.b2Sin = function (a) {
        return Math.sin(a);
    }),
    (box2d.b2Acos = function (a) {
        return Math.acos(a);
    }),
    (box2d.b2Asin = function (a) {
        return Math.asin(a);
    }),
    (box2d.b2Atan2 = function (a, b) {
        return Math.atan2(a, b);
    }),
    (box2d.b2NextPowerOfTwo = function (a) {
        return (a |= (a >> 1) & 2147483647), (a |= (a >> 2) & 1073741823), (a |= (a >> 4) & 268435455), (a |= (a >> 8) & 16777215), (a |= (a >> 16) & 65535) + 1;
    }),
    (box2d.b2IsPowerOfTwo = function (a) {
        return 0 < a && 0 == (a & (a - 1));
    }),
    (box2d.b2Random = function () {
        return 2 * Math.random() - 1;
    }),
    (box2d.b2RandomRange = function (a, b) {
        return (b - a) * Math.random() + a;
    }),
    (box2d.b2Vec2 = function (a, b) {
        (this.x = a || 0), (this.y = b || 0);
    }),
    (box2d.b2Vec2.prototype.x = 0),
    (box2d.b2Vec2.prototype.y = 0),
    (box2d.b2Vec2_zero = new box2d.b2Vec2()),
    (box2d.b2Vec2.ZERO = new box2d.b2Vec2()),
    (box2d.b2Vec2.UNITX = new box2d.b2Vec2(1, 0)),
    (box2d.b2Vec2.UNITY = new box2d.b2Vec2(0, 1)),
    (box2d.b2Vec2.s_t0 = new box2d.b2Vec2()),
    (box2d.b2Vec2.s_t1 = new box2d.b2Vec2()),
    (box2d.b2Vec2.s_t2 = new box2d.b2Vec2()),
    (box2d.b2Vec2.s_t3 = new box2d.b2Vec2()),
    (box2d.b2Vec2.MakeArray = function (a) {
        return box2d.b2MakeArray(a, function () {
            return new box2d.b2Vec2();
        });
    }),
    (box2d.b2Vec2.prototype.Clone = function () {
        return new box2d.b2Vec2(this.x, this.y);
    }),
    (box2d.b2Vec2.prototype.SetZero = function () {
        return (this.x = 0), (this.y = 0), this;
    }),
    (box2d.b2Vec2.prototype.SetXY = function (a, b) {
        return (this.x = a), (this.y = b), this;
    }),
    (box2d.b2Vec2.prototype.Copy = function (a) {
        return (this.x = a.x), (this.y = a.y), this;
    }),
    (box2d.b2Vec2.prototype.SelfAdd = function (a) {
        return (this.x += a.x), (this.y += a.y), this;
    }),
    (box2d.b2Vec2.prototype.SelfAddXY = function (a, b) {
        return (this.x += a), (this.y += b), this;
    }),
    (box2d.b2Vec2.prototype.SelfSub = function (a) {
        return (this.x -= a.x), (this.y -= a.y), this;
    }),
    (box2d.b2Vec2.prototype.SelfSubXY = function (a, b) {
        return (this.x -= a), (this.y -= b), this;
    }),
    (box2d.b2Vec2.prototype.SelfMul = function (a) {
        return (this.x *= a), (this.y *= a), this;
    }),
    (box2d.b2Vec2.prototype.SelfMulAdd = function (a, b) {
        return (this.x += a * b.x), (this.y += a * b.y), this;
    }),
    (box2d.b2Vec2.prototype.SelfMulSub = function (a, b) {
        return (this.x -= a * b.x), (this.y -= a * b.y), this;
    }),
    (box2d.b2Vec2.prototype.Dot = function (a) {
        return this.x * a.x + this.y * a.y;
    }),
    (box2d.b2Vec2.prototype.Cross = function (a) {
        return this.x * a.y - this.y * a.x;
    }),
    (box2d.b2Vec2.prototype.Length = function () {
        var a = this.x,
            b = this.y;
        return Math.sqrt(a * a + b * b);
    }),
    (box2d.b2Vec2.prototype.GetLength = box2d.b2Vec2.prototype.Length),
    (box2d.b2Vec2.prototype.LengthSquared = function () {
        var a = this.x,
            b = this.y;
        return a * a + b * b;
    }),
    (box2d.b2Vec2.prototype.GetLengthSquared = box2d.b2Vec2.prototype.LengthSquared),
    (box2d.b2Vec2.prototype.Normalize = function () {
        var a = this.GetLength();
        if (a >= box2d.b2_epsilon) {
            var b = 1 / a;
            (this.x *= b), (this.y *= b);
        }
        return a;
    }),
    (box2d.b2Vec2.prototype.SelfNormalize = function () {
        var a = this.GetLength();
        if (a >= box2d.b2_epsilon) {
            var b = 1 / a;
            (this.x *= b), (this.y *= b);
        }
        return this;
    }),
    (box2d.b2Vec2.prototype.SelfRotate = function (a, b) {
        var c = this.x,
            d = this.y;
        return (this.x = a * c - b * d), (this.y = b * c + a * d), this;
    }),
    (box2d.b2Vec2.prototype.SelfRotateRadians = function (a) {
        return this.SelfRotate(Math.cos(a), Math.sin(a));
    }),
    (box2d.b2Vec2.prototype.SelfRotateDegrees = function (a) {
        return this.SelfRotateRadians(box2d.b2DegToRad(a));
    }),
    (box2d.b2Vec2.prototype.IsValid = function () {
        return isFinite(this.x) && isFinite(this.y);
    }),
    (box2d.b2Vec2.prototype.SelfCrossVS = function (a) {
        var b = this.x;
        return (this.x = a * this.y), (this.y = -a * b), this;
    }),
    (box2d.b2Vec2.prototype.SelfCrossSV = function (a) {
        var b = this.x;
        return (this.x = -a * this.y), (this.y = a * b), this;
    }),
    (box2d.b2Vec2.prototype.SelfMinV = function (a) {
        return (this.x = box2d.b2Min(this.x, a.x)), (this.y = box2d.b2Min(this.y, a.y)), this;
    }),
    (box2d.b2Vec2.prototype.SelfMaxV = function (a) {
        return (this.x = box2d.b2Max(this.x, a.x)), (this.y = box2d.b2Max(this.y, a.y)), this;
    }),
    (box2d.b2Vec2.prototype.SelfAbs = function () {
        return (this.x = box2d.b2Abs(this.x)), (this.y = box2d.b2Abs(this.y)), this;
    }),
    (box2d.b2Vec2.prototype.SelfNeg = function () {
        return (this.x = -this.x), (this.y = -this.y), this;
    }),
    (box2d.b2Vec2.prototype.SelfSkew = function () {
        var a = this.x;
        return (this.x = -this.y), (this.y = a), this;
    }),
    (box2d.b2AbsV = function (a, b) {
        return (b.x = box2d.b2Abs(a.x)), (b.y = box2d.b2Abs(a.y)), b;
    }),
    (box2d.b2MinV = function (a, b, c) {
        return (c.x = box2d.b2Min(a.x, b.x)), (c.y = box2d.b2Min(a.y, b.y)), c;
    }),
    (box2d.b2MaxV = function (a, b, c) {
        return (c.x = box2d.b2Max(a.x, b.x)), (c.y = box2d.b2Max(a.y, b.y)), c;
    }),
    (box2d.b2ClampV = function (a, b, c, d) {
        return (d.x = box2d.b2Clamp(a.x, b.x, c.x)), (d.y = box2d.b2Clamp(a.y, b.y, c.y)), d;
    }),
    (box2d.b2RotateV = function (a, b, c, d) {
        var e = a.x,
            f = a.y;
        return (d.x = b * e - c * f), (d.y = c * e + b * f), d;
    }),
    (box2d.b2RotateRadiansV = function (a, b, c) {
        return box2d.b2RotateV(a, Math.cos(b), Math.sin(b), c);
    }),
    (box2d.b2RotateDegreesV = function (a, b, c) {
        return box2d.b2RotateRadiansV(a, box2d.b2DegToRad(b), c);
    }),
    (box2d.b2DotVV = function (a, b) {
        return a.x * b.x + a.y * b.y;
    }),
    (box2d.b2CrossVV = function (a, b) {
        return a.x * b.y - a.y * b.x;
    }),
    (box2d.b2CrossVS = function (a, b, c) {
        var d = a.x;
        return (c.x = b * a.y), (c.y = -b * d), c;
    }),
    (box2d.b2CrossVOne = function (a, b) {
        var c = a.x;
        return (b.x = a.y), (b.y = -c), b;
    }),
    (box2d.b2CrossSV = function (a, b, c) {
        var d = b.x;
        return (c.x = -a * b.y), (c.y = a * d), c;
    }),
    (box2d.b2CrossOneV = function (a, b) {
        var c = a.x;
        return (b.x = -a.y), (b.y = c), b;
    }),
    (box2d.b2AddVV = function (a, b, c) {
        return (c.x = a.x + b.x), (c.y = a.y + b.y), c;
    }),
    (box2d.b2SubVV = function (a, b, c) {
        return (c.x = a.x - b.x), (c.y = a.y - b.y), c;
    }),
    (box2d.b2MulSV = function (a, b, c) {
        return (c.x = b.x * a), (c.y = b.y * a), c;
    }),
    (box2d.b2AddVMulSV = function (a, b, c, d) {
        return (d.x = a.x + b * c.x), (d.y = a.y + b * c.y), d;
    }),
    (box2d.b2SubVMulSV = function (a, b, c, d) {
        return (d.x = a.x - b * c.x), (d.y = a.y - b * c.y), d;
    }),
    (box2d.b2AddVCrossSV = function (a, b, c, d) {
        var e = c.x;
        return (d.x = a.x - b * c.y), (d.y = a.y + b * e), d;
    }),
    (box2d.b2MidVV = function (a, b, c) {
        return (c.x = 0.5 * (a.x + b.x)), (c.y = 0.5 * (a.y + b.y)), c;
    }),
    (box2d.b2ExtVV = function (a, b, c) {
        return (c.x = 0.5 * (b.x - a.x)), (c.y = 0.5 * (b.y - a.y)), c;
    }),
    (box2d.b2IsEqualToV = function (a, b) {
        return a.x === b.x && a.y === b.y;
    }),
    (box2d.b2DistanceVV = function (a, b) {
        var c = a.x - b.x,
            d = a.y - b.y;
        return Math.sqrt(c * c + d * d);
    }),
    (box2d.b2DistanceSquaredVV = function (a, b) {
        var c = a.x - b.x,
            d = a.y - b.y;
        return c * c + d * d;
    }),
    (box2d.b2NegV = function (a, b) {
        return (b.x = -a.x), (b.y = -a.y), b;
    }),
    (box2d.b2Vec3 = function (a, b, c) {
        (this.x = a || 0), (this.y = b || 0), (this.z = c || 0);
    }),
    (box2d.b2Vec3.prototype.x = 0),
    (box2d.b2Vec3.prototype.y = 0),
    (box2d.b2Vec3.prototype.z = 0),
    (box2d.b2Vec3.ZERO = new box2d.b2Vec3()),
    (box2d.b2Vec3.s_t0 = new box2d.b2Vec3()),
    (box2d.b2Vec3.prototype.Clone = function () {
        return new box2d.b2Vec3(this.x, this.y, this.z);
    }),
    (box2d.b2Vec3.prototype.SetZero = function () {
        return (this.x = 0), (this.y = 0), (this.z = 0), this;
    }),
    (box2d.b2Vec3.prototype.SetXYZ = function (a, b, c) {
        return (this.x = a), (this.y = b), (this.z = c), this;
    }),
    (box2d.b2Vec3.prototype.Copy = function (a) {
        return (this.x = a.x), (this.y = a.y), (this.z = a.z), this;
    }),
    (box2d.b2Vec3.prototype.SelfNeg = function () {
        return (this.x = -this.x), (this.y = -this.y), (this.z = -this.z), this;
    }),
    (box2d.b2Vec3.prototype.SelfAdd = function (a) {
        return (this.x += a.x), (this.y += a.y), (this.z += a.z), this;
    }),
    (box2d.b2Vec3.prototype.SelfAddXYZ = function (a, b, c) {
        return (this.x += a), (this.y += b), (this.z += c), this;
    }),
    (box2d.b2Vec3.prototype.SelfSub = function (a) {
        return (this.x -= a.x), (this.y -= a.y), (this.z -= a.z), this;
    }),
    (box2d.b2Vec3.prototype.SelfSubXYZ = function (a, b, c) {
        return (this.x -= a), (this.y -= b), (this.z -= c), this;
    }),
    (box2d.b2Vec3.prototype.SelfMul = function (a) {
        return (this.x *= a), (this.y *= a), (this.z *= a), this;
    }),
    (box2d.b2DotV3V3 = function (a, b) {
        return a.x * b.x + a.y * b.y + a.z * b.z;
    }),
    (box2d.b2CrossV3V3 = function (a, b, c) {
        var d = a.x,
            e = a.y,
            f = a.z,
            g = b.x,
            h = b.y,
            i = b.z;
        return (c.x = e * i - f * h), (c.y = f * g - d * i), (c.z = d * h - e * g), c;
    }),
    (box2d.b2Mat22 = function () {
        (this.ex = new box2d.b2Vec2(1, 0)), (this.ey = new box2d.b2Vec2(0, 1));
    }),
    (box2d.b2Mat22.prototype.ex = null),
    (box2d.b2Mat22.prototype.ey = null),
    (box2d.b2Mat22.IDENTITY = new box2d.b2Mat22()),
    (box2d.b2Mat22.prototype.Clone = function () {
        return new box2d.b2Mat22().Copy(this);
    }),
    (box2d.b2Mat22.FromVV = function (a, b) {
        return new box2d.b2Mat22().SetVV(a, b);
    }),
    (box2d.b2Mat22.FromSSSS = function (a, b, c, d) {
        return new box2d.b2Mat22().SetSSSS(a, b, c, d);
    }),
    (box2d.b2Mat22.FromAngleRadians = function (a) {
        return new box2d.b2Mat22().SetAngleRadians(a);
    }),
    (box2d.b2Mat22.prototype.SetSSSS = function (a, b, c, d) {
        return this.ex.SetXY(a, c), this.ey.SetXY(b, d), this;
    }),
    (box2d.b2Mat22.prototype.SetVV = function (a, b) {
        return this.ex.Copy(a), this.ey.Copy(b), this;
    }),
    (box2d.b2Mat22.prototype.SetAngle = function (a) {
        var b = Math.cos(a),
            c = Math.sin(a);
        return this.ex.SetXY(b, c), this.ey.SetXY(-c, b), this;
    }),
    (box2d.b2Mat22.prototype.SetAngleRadians = box2d.b2Mat22.prototype.SetAngle),
    (box2d.b2Mat22.prototype.SetAngleDegrees = function (a) {
        return this.SetAngle(box2d.b2DegToRad(a));
    }),
    (box2d.b2Mat22.prototype.Copy = function (a) {
        return this.ex.Copy(a.ex), this.ey.Copy(a.ey), this;
    }),
    (box2d.b2Mat22.prototype.SetIdentity = function () {
        return this.ex.SetXY(1, 0), this.ey.SetXY(0, 1), this;
    }),
    (box2d.b2Mat22.prototype.SetZero = function () {
        return this.ex.SetZero(), this.ey.SetZero(), this;
    }),
    (box2d.b2Mat22.prototype.GetAngle = function () {
        return Math.atan2(this.ex.y, this.ex.x);
    }),
    (box2d.b2Mat22.prototype.GetAngleRadians = box2d.b2Mat22.prototype.GetAngle),
    (box2d.b2Mat22.prototype.GetInverse = function (a) {
        var b = this.ex.x,
            c = this.ey.x,
            d = this.ex.y,
            e = this.ey.y,
            f = b * e - c * d;
        return 0 !== f && (f = 1 / f), (a.ex.x = f * e), (a.ey.x = -f * c), (a.ex.y = -f * d), (a.ey.y = f * b), a;
    }),
    (box2d.b2Mat22.prototype.Solve = function (a, b, c) {
        var d = this.ex.x,
            e = this.ey.x,
            f = this.ex.y,
            g = this.ey.y,
            h = d * g - e * f;
        return 0 !== h && (h = 1 / h), (c.x = h * (g * a - e * b)), (c.y = h * (d * b - f * a)), c;
    }),
    (box2d.b2Mat22.prototype.SelfAbs = function () {
        return this.ex.SelfAbs(), this.ey.SelfAbs(), this;
    }),
    (box2d.b2Mat22.prototype.SelfInv = function () {
        return this.GetInverse(this);
    }),
    (box2d.b2Mat22.prototype.SelfAddM = function (a) {
        return this.ex.SelfAdd(a.ex), this.ey.SelfAdd(a.ey), this;
    }),
    (box2d.b2Mat22.prototype.SelfSubM = function (a) {
        return this.ex.SelfSub(a.ex), this.ey.SelfSub(a.ey), this;
    }),
    (box2d.b2AbsM = function (a, b) {
        var c = a.ex,
            d = a.ey;
        return (b.ex.x = box2d.b2Abs(c.x)), (b.ex.y = box2d.b2Abs(c.y)), (b.ey.x = box2d.b2Abs(d.x)), (b.ey.y = box2d.b2Abs(d.y)), b;
    }),
    (box2d.b2MulMV = function (a, b, c) {
        var d = a.ex,
            e = a.ey,
            f = b.x,
            g = b.y;
        return (c.x = d.x * f + e.x * g), (c.y = d.y * f + e.y * g), c;
    }),
    (box2d.b2MulTMV = function (a, b, c) {
        var d = a.ex,
            e = a.ey,
            f = b.x,
            g = b.y;
        return (c.x = d.x * f + d.y * g), (c.y = e.x * f + e.y * g), c;
    }),
    (box2d.b2AddMM = function (a, b, c) {
        var d = a.ex,
            e = a.ey,
            f = b.ex,
            g = b.ey;
        return (c.ex.x = d.x + f.x), (c.ex.y = d.y + f.y), (c.ey.x = e.x + g.x), (c.ey.y = e.y + g.y), c;
    }),
    (box2d.b2MulMM = function (a, b, c) {
        var d = a.ex.x,
            e = a.ex.y,
            f = a.ey.x,
            g = a.ey.y,
            h = b.ex.x,
            i = b.ex.y,
            j = b.ey.x,
            k = b.ey.y;
        return (c.ex.x = d * h + f * i), (c.ex.y = e * h + g * i), (c.ey.x = d * j + f * k), (c.ey.y = e * j + g * k), c;
    }),
    (box2d.b2MulTMM = function (a, b, c) {
        var d = a.ex.x,
            e = a.ex.y,
            f = a.ey.x,
            g = a.ey.y,
            h = b.ex.x,
            i = b.ex.y,
            j = b.ey.x,
            k = b.ey.y;
        return (c.ex.x = d * h + e * i), (c.ex.y = f * h + g * i), (c.ey.x = d * j + e * k), (c.ey.y = f * j + g * k), c;
    }),
    (box2d.b2Mat33 = function () {
        (this.ex = new box2d.b2Vec3(1, 0, 0)), (this.ey = new box2d.b2Vec3(0, 1, 0)), (this.ez = new box2d.b2Vec3(0, 0, 1));
    }),
    (box2d.b2Mat33.prototype.ex = null),
    (box2d.b2Mat33.prototype.ey = null),
    (box2d.b2Mat33.prototype.ez = null),
    (box2d.b2Mat33.IDENTITY = new box2d.b2Mat33()),
    (box2d.b2Mat33.prototype.Clone = function () {
        return new box2d.b2Mat33().Copy(this);
    }),
    (box2d.b2Mat33.prototype.SetVVV = function (a, b, c) {
        return this.ex.Copy(a), this.ey.Copy(b), this.ez.Copy(c), this;
    }),
    (box2d.b2Mat33.prototype.Copy = function (a) {
        return this.ex.Copy(a.ex), this.ey.Copy(a.ey), this.ez.Copy(a.ez), this;
    }),
    (box2d.b2Mat33.prototype.SetIdentity = function () {
        return this.ex.SetXYZ(1, 0, 0), this.ey.SetXYZ(0, 1, 0), this.ez.SetXYZ(0, 0, 1), this;
    }),
    (box2d.b2Mat33.prototype.SetZero = function () {
        return this.ex.SetZero(), this.ey.SetZero(), this.ez.SetZero(), this;
    }),
    (box2d.b2Mat33.prototype.SelfAddM = function (a) {
        return this.ex.SelfAdd(a.ex), this.ey.SelfAdd(a.ey), this.ez.SelfAdd(a.ez), this;
    }),
    (box2d.b2Mat33.prototype.Solve33 = function (a, b, c, d) {
        var e = this.ex.x,
            f = this.ex.y,
            g = this.ex.z,
            h = this.ey.x,
            i = this.ey.y,
            j = this.ey.z,
            k = this.ez.x,
            l = this.ez.y,
            m = this.ez.z,
            n = e * (i * m - j * l) + f * (j * k - h * m) + g * (h * l - i * k);
        return (
            0 !== n && (n = 1 / n),
            (d.x = n * (a * (i * m - j * l) + b * (j * k - h * m) + c * (h * l - i * k))),
            (d.y = n * (e * (b * m - c * l) + f * (c * k - a * m) + g * (a * l - b * k))),
            (d.z = n * (e * (i * c - j * b) + f * (j * a - h * c) + g * (h * b - i * a))),
            d
        );
    }),
    (box2d.b2Mat33.prototype.Solve22 = function (a, b, c) {
        var d = this.ex.x,
            e = this.ey.x,
            f = this.ex.y,
            g = this.ey.y,
            h = d * g - e * f;
        return 0 !== h && (h = 1 / h), (c.x = h * (g * a - e * b)), (c.y = h * (d * b - f * a)), c;
    }),
    (box2d.b2Mat33.prototype.GetInverse22 = function (a) {
        var b = this.ex.x,
            c = this.ey.x,
            d = this.ex.y,
            e = this.ey.y,
            f = b * e - c * d;
        0 !== f && (f = 1 / f), (a.ex.x = f * e), (a.ey.x = -f * c), (a.ex.z = 0), (a.ex.y = -f * d), (a.ey.y = f * b), (a.ey.z = 0), (a.ez.x = 0), (a.ez.y = 0), (a.ez.z = 0);
    }),
    (box2d.b2Mat33.prototype.GetSymInverse33 = function (a) {
        var b = box2d.b2DotV3V3(this.ex, box2d.b2CrossV3V3(this.ey, this.ez, box2d.b2Vec3.s_t0));
        0 !== b && (b = 1 / b);
        var c = this.ex.x,
            d = this.ey.x,
            e = this.ez.x,
            f = this.ey.y,
            g = this.ez.y,
            h = this.ez.z;
        (a.ex.x = b * (f * h - g * g)),
            (a.ex.y = b * (e * g - d * h)),
            (a.ex.z = b * (d * g - e * f)),
            (a.ey.x = a.ex.y),
            (a.ey.y = b * (c * h - e * e)),
            (a.ey.z = b * (e * d - c * g)),
            (a.ez.x = a.ex.z),
            (a.ez.y = a.ey.z),
            (a.ez.z = b * (c * f - d * d));
    }),
    (box2d.b2MulM33V3 = function (a, b, c) {
        var d = b.x,
            e = b.y,
            f = b.z;
        return (c.x = a.ex.x * d + a.ey.x * e + a.ez.x * f), (c.y = a.ex.y * d + a.ey.y * e + a.ez.y * f), (c.z = a.ex.z * d + a.ey.z * e + a.ez.z * f), c;
    }),
    (box2d.b2MulM33XYZ = function (a, b, c, d, e) {
        return (e.x = a.ex.x * b + a.ey.x * c + a.ez.x * d), (e.y = a.ex.y * b + a.ey.y * c + a.ez.y * d), (e.z = a.ex.z * b + a.ey.z * c + a.ez.z * d), e;
    }),
    (box2d.b2MulM33V2 = function (a, b, c) {
        var d = b.x,
            e = b.y;
        return (c.x = a.ex.x * d + a.ey.x * e), (c.y = a.ex.y * d + a.ey.y * e), c;
    }),
    (box2d.b2MulM33XY = function (a, b, c, d) {
        return (d.x = a.ex.x * b + a.ey.x * c), (d.y = a.ex.y * b + a.ey.y * c), d;
    }),
    (box2d.b2Rot = function (a) {
        a && ((this.angle = a), (this.s = Math.sin(a)), (this.c = Math.cos(a)));
    }),
    (box2d.b2Rot.prototype.angle = 0),
    (box2d.b2Rot.prototype.s = 0),
    (box2d.b2Rot.prototype.c = 1),
    (box2d.b2Rot.IDENTITY = new box2d.b2Rot()),
    (box2d.b2Rot.prototype.Clone = function () {
        return new box2d.b2Rot().Copy(this);
    }),
    (box2d.b2Rot.prototype.Copy = function (a) {
        return (this.angle = a.angle), (this.s = a.s), (this.c = a.c), this;
    }),
    (box2d.b2Rot.prototype.SetAngle = function (a) {
        return this.angle !== a && ((this.angle = a), (this.s = Math.sin(a)), (this.c = Math.cos(a))), this;
    }),
    (box2d.b2Rot.prototype.SetAngleRadians = box2d.b2Rot.prototype.SetAngle),
    (box2d.b2Rot.prototype.SetAngleDegrees = function (a) {
        return this.SetAngle(box2d.b2DegToRad(a));
    }),
    (box2d.b2Rot.prototype.SetIdentity = function () {
        return (this.angle = 0), (this.s = 0), (this.c = 1), this;
    }),
    (box2d.b2Rot.prototype.GetAngle = function () {
        return this.angle;
    }),
    (box2d.b2Rot.prototype.GetAngleRadians = box2d.b2Rot.prototype.GetAngle),
    (box2d.b2Rot.prototype.GetAngleDegrees = function () {
        return box2d.b2RadToDeg(this.GetAngle());
    }),
    (box2d.b2Rot.prototype.GetXAxis = function (a) {
        return (a.x = this.c), (a.y = this.s), a;
    }),
    (box2d.b2Rot.prototype.GetYAxis = function (a) {
        return (a.x = -this.s), (a.y = this.c), a;
    }),
    (box2d.b2MulRR = function (a, b, c) {
        var d = a.c,
            e = a.s,
            f = b.c,
            g = b.s;
        for (c.s = e * f + d * g, c.c = d * f - e * g, c.angle = a.angle + b.angle; c.angle < -box2d.b2_pi; ) c.angle += box2d.b2_two_pi;
        for (; c.angle >= box2d.b2_pi; ) c.angle -= box2d.b2_two_pi;
        return c;
    }),
    (box2d.b2MulTRR = function (a, b, c) {
        var d = a.c,
            e = a.s,
            f = b.c,
            g = b.s;
        for (c.s = d * g - e * f, c.c = d * f + e * g, c.angle = a.angle - b.angle; c.angle < -box2d.b2_pi; ) c.angle += box2d.b2_two_pi;
        for (; c.angle >= box2d.b2_pi; ) c.angle -= box2d.b2_two_pi;
        return c;
    }),
    (box2d.b2MulRV = function (a, b, c) {
        var d = a.c,
            e = a.s,
            f = b.x,
            g = b.y;
        return (c.x = d * f - e * g), (c.y = e * f + d * g), c;
    }),
    (box2d.b2MulTRV = function (a, b, c) {
        var d = a.c,
            e = a.s,
            f = b.x,
            g = b.y;
        return (c.x = d * f + e * g), (c.y = -e * f + d * g), c;
    }),
    (box2d.b2Transform = function () {
        (this.p = new box2d.b2Vec2()), (this.q = new box2d.b2Rot());
    }),
    (box2d.b2Transform.prototype.p = null),
    (box2d.b2Transform.prototype.q = null),
    (box2d.b2Transform.IDENTITY = new box2d.b2Transform()),
    (box2d.b2Transform.prototype.Clone = function () {
        return new box2d.b2Transform().Copy(this);
    }),
    (box2d.b2Transform.prototype.Copy = function (a) {
        return this.p.Copy(a.p), this.q.Copy(a.q), this;
    }),
    (box2d.b2Transform.prototype.SetIdentity = function () {
        return this.p.SetZero(), this.q.SetIdentity(), this;
    }),
    (box2d.b2Transform.prototype.SetPositionRotation = function (a, b) {
        return this.p.Copy(a), this.q.Copy(b), this;
    }),
    (box2d.b2Transform.prototype.SetPositionAngleRadians = function (a, b) {
        return this.p.Copy(a), this.q.SetAngleRadians(b), this;
    }),
    (box2d.b2Transform.prototype.SetPosition = function (a) {
        return this.p.Copy(a), this;
    }),
    (box2d.b2Transform.prototype.SetPositionXY = function (a, b) {
        return this.p.SetXY(a, b), this;
    }),
    (box2d.b2Transform.prototype.SetRotation = function (a) {
        return this.q.Copy(a), this;
    }),
    (box2d.b2Transform.prototype.SetRotationAngleRadians = function (a) {
        return this.q.SetAngleRadians(a), this;
    }),
    (box2d.b2Transform.prototype.GetPosition = function () {
        return this.p;
    }),
    (box2d.b2Transform.prototype.GetRotation = function () {
        return this.q;
    }),
    (box2d.b2Transform.prototype.GetRotationAngle = function () {
        return this.q.GetAngle();
    }),
    (box2d.b2Transform.prototype.GetRotationAngleRadians = box2d.b2Transform.prototype.GetRotationAngle),
    (box2d.b2Transform.prototype.GetAngle = function () {
        return this.q.GetAngle();
    }),
    (box2d.b2Transform.prototype.GetAngleRadians = box2d.b2Transform.prototype.GetAngle),
    (box2d.b2MulXV = function (a, b, c) {
        var d = a.q.c,
            e = a.q.s,
            f = b.x,
            g = b.y;
        return (c.x = d * f - e * g + a.p.x), (c.y = e * f + d * g + a.p.y), c;
    }),
    (box2d.b2MulTXV = function (a, b, c) {
        var d = a.q.c,
            e = a.q.s,
            f = b.x - a.p.x,
            g = b.y - a.p.y;
        return (c.x = d * f + e * g), (c.y = -e * f + d * g), c;
    }),
    (box2d.b2MulXX = function (a, b, c) {
        return box2d.b2MulRR(a.q, b.q, c.q), box2d.b2AddVV(box2d.b2MulRV(a.q, b.p, c.p), a.p, c.p), c;
    }),
    (box2d.b2MulTXX = function (a, b, c) {
        return box2d.b2MulTRR(a.q, b.q, c.q), box2d.b2MulTRV(a.q, box2d.b2SubVV(b.p, a.p, c.p), c.p), c;
    }),
    (box2d.b2Sweep = function () {
        (this.localCenter = new box2d.b2Vec2()), (this.c0 = new box2d.b2Vec2()), (this.c = new box2d.b2Vec2());
    }),
    (box2d.b2Sweep.prototype.localCenter = null),
    (box2d.b2Sweep.prototype.c0 = null),
    (box2d.b2Sweep.prototype.c = null),
    (box2d.b2Sweep.prototype.a0 = 0),
    (box2d.b2Sweep.prototype.a = 0),
    (box2d.b2Sweep.prototype.alpha0 = 0),
    (box2d.b2Sweep.prototype.Clone = function () {
        return new box2d.b2Sweep().Copy(this);
    }),
    (box2d.b2Sweep.prototype.Copy = function (a) {
        return this.localCenter.Copy(a.localCenter), this.c0.Copy(a.c0), this.c.Copy(a.c), (this.a0 = a.a0), (this.a = a.a), (this.alpha0 = a.alpha0), this;
    }),
    (box2d.b2Sweep.prototype.GetTransform = function (a, b) {
        var c = 1 - b;
        (a.p.x = c * this.c0.x + b * this.c.x), (a.p.y = c * this.c0.y + b * this.c.y);
        var d = c * this.a0 + b * this.a;
        return a.q.SetAngleRadians(d), a.p.SelfSub(box2d.b2MulRV(a.q, this.localCenter, box2d.b2Vec2.s_t0)), a;
    }),
    (box2d.b2Sweep.prototype.Advance = function (a) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(this.alpha0 < 1);
        var b = (a - this.alpha0) / (1 - this.alpha0);
        (this.c0.x += b * (this.c.x - this.c0.x)), (this.c0.y += b * (this.c.y - this.c0.y)), (this.a0 += b * (this.a - this.a0)), (this.alpha0 = a);
    }),
    (box2d.b2Sweep.prototype.Normalize = function () {
        var a = box2d.b2_two_pi * Math.floor(this.a0 / box2d.b2_two_pi);
        (this.a0 -= a), (this.a -= a);
    }),
    goog.provide("box2d.b2Controller"),
    goog.require("box2d.b2Settings"),
    (box2d.b2ControllerEdge = function () {}),
    (box2d.b2ControllerEdge.prototype.controller = null),
    (box2d.b2ControllerEdge.prototype.body = null),
    (box2d.b2ControllerEdge.prototype.prevBody = null),
    (box2d.b2ControllerEdge.prototype.nextBody = null),
    (box2d.b2ControllerEdge.prototype.prevController = null),
    (box2d.b2ControllerEdge.prototype.nextController = null),
    (box2d.b2Controller = function () {}),
    (box2d.b2Controller.prototype.m_world = null),
    (box2d.b2Controller.prototype.m_bodyList = null),
    (box2d.b2Controller.prototype.m_bodyCount = 0),
    (box2d.b2Controller.prototype.m_prev = null),
    (box2d.b2Controller.prototype.m_next = null),
    (box2d.b2Controller.prototype.Step = function () {}),
    (box2d.b2Controller.prototype.Draw = function () {}),
    (box2d.b2Controller.prototype.GetNext = function () {
        return this.m_next;
    }),
    (box2d.b2Controller.prototype.GetPrev = function () {
        return this.m_prev;
    }),
    (box2d.b2Controller.prototype.GetWorld = function () {
        return this.m_world;
    }),
    (box2d.b2Controller.prototype.GetBodyList = function () {
        return this.m_bodyList;
    }),
    (box2d.b2Controller.prototype.AddBody = function (a) {
        var b = new box2d.b2ControllerEdge();
        (b.body = a),
            (b.controller = this),
            (b.nextBody = this.m_bodyList),
            (b.prevBody = null),
            this.m_bodyList && (this.m_bodyList.prevBody = b),
            (this.m_bodyList = b),
            ++this.m_bodyCount,
            (b.nextController = a.m_controllerList),
            (b.prevController = null),
            a.m_controllerList && (a.m_controllerList.prevController = b),
            (a.m_controllerList = b),
            ++a.m_controllerCount;
    }),
    (box2d.b2Controller.prototype.RemoveBody = function (a) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(0 < this.m_bodyCount);
        for (var b = this.m_bodyList; b && b.body !== a; ) b = b.nextBody;
        box2d.ENABLE_ASSERTS && box2d.b2Assert(null !== b),
            b.prevBody && (b.prevBody.nextBody = b.nextBody),
            b.nextBody && (b.nextBody.prevBody = b.prevBody),
            this.m_bodyList === b && (this.m_bodyList = b.nextBody),
            --this.m_bodyCount,
            b.nextController && (b.nextController.prevController = b.prevController),
            b.prevController && (b.prevController.nextController = b.nextController),
            a.m_controllerList === b && (a.m_controllerList = b.nextController),
            --a.m_controllerCount;
    }),
    (box2d.b2Controller.prototype.Clear = function () {
        for (; this.m_bodyList; ) this.RemoveBody(this.m_bodyList.body);
        this.m_bodyCount = 0;
    }),
    goog.provide("box2d.b2ConstantAccelController"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Controller"),
    goog.require("box2d.b2Math"),
    (box2d.b2ConstantAccelController = function () {
        goog.base(this), (this.A = new box2d.b2Vec2(0, 0));
    }),
    goog.inherits(box2d.b2ConstantAccelController, box2d.b2Controller),
    (box2d.b2ConstantAccelController.prototype.A = null),
    (box2d.b2ConstantAccelController.prototype.Step = function (a) {
        for (var b = box2d.b2MulSV(a.dt, this.A, box2d.b2ConstantAccelController.prototype.Step.s_dtA), c = this.m_bodyList; c; c = c.nextBody) {
            var d = c.body;
            d.IsAwake() && d.SetLinearVelocity(box2d.b2AddVV(d.GetLinearVelocity(), b, box2d.b2Vec2.s_t0));
        }
    }),
    (box2d.b2ConstantAccelController.prototype.Step.s_dtA = new box2d.b2Vec2()),
    goog.provide("box2d.b2Joint"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Math"),
    (box2d.b2JointType = {
        e_unknownJoint: 0,
        e_revoluteJoint: 1,
        e_prismaticJoint: 2,
        e_distanceJoint: 3,
        e_pulleyJoint: 4,
        e_mouseJoint: 5,
        e_gearJoint: 6,
        e_wheelJoint: 7,
        e_weldJoint: 8,
        e_frictionJoint: 9,
        e_ropeJoint: 10,
        e_motorJoint: 11,
        e_areaJoint: 12,
    }),
    goog.exportProperty(box2d.b2JointType, "e_unknownJoint", box2d.b2JointType.e_unknownJoint),
    goog.exportProperty(box2d.b2JointType, "e_revoluteJoint", box2d.b2JointType.e_revoluteJoint),
    goog.exportProperty(box2d.b2JointType, "e_prismaticJoint", box2d.b2JointType.e_prismaticJoint),
    goog.exportProperty(box2d.b2JointType, "e_distanceJoint", box2d.b2JointType.e_distanceJoint),
    goog.exportProperty(box2d.b2JointType, "e_pulleyJoint", box2d.b2JointType.e_pulleyJoint),
    goog.exportProperty(box2d.b2JointType, "e_mouseJoint", box2d.b2JointType.e_mouseJoint),
    goog.exportProperty(box2d.b2JointType, "e_gearJoint", box2d.b2JointType.e_gearJoint),
    goog.exportProperty(box2d.b2JointType, "e_wheelJoint", box2d.b2JointType.e_wheelJoint),
    goog.exportProperty(box2d.b2JointType, "e_weldJoint", box2d.b2JointType.e_weldJoint),
    goog.exportProperty(box2d.b2JointType, "e_frictionJoint", box2d.b2JointType.e_frictionJoint),
    goog.exportProperty(box2d.b2JointType, "e_ropeJoint", box2d.b2JointType.e_ropeJoint),
    goog.exportProperty(box2d.b2JointType, "e_motorJoint", box2d.b2JointType.e_motorJoint),
    goog.exportProperty(box2d.b2JointType, "e_areaJoint", box2d.b2JointType.e_areaJoint),
    (box2d.b2LimitState = { e_inactiveLimit: 0, e_atLowerLimit: 1, e_atUpperLimit: 2, e_equalLimits: 3 }),
    goog.exportProperty(box2d.b2LimitState, "e_inactiveLimit", box2d.b2LimitState.e_inactiveLimit),
    goog.exportProperty(box2d.b2LimitState, "e_atLowerLimit", box2d.b2LimitState.e_atLowerLimit),
    goog.exportProperty(box2d.b2LimitState, "e_atUpperLimit", box2d.b2LimitState.e_atUpperLimit),
    goog.exportProperty(box2d.b2LimitState, "e_equalLimits", box2d.b2LimitState.e_equalLimits),
    (box2d.b2Jacobian = function () {
        this.linear = new box2d.b2Vec2();
    }),
    (box2d.b2Jacobian.prototype.linear = null),
    (box2d.b2Jacobian.prototype.angularA = 0),
    (box2d.b2Jacobian.prototype.angularB = 0),
    (box2d.b2Jacobian.prototype.SetZero = function () {
        return this.linear.SetZero(), (this.angularA = 0), (this.angularB = 0), this;
    }),
    (box2d.b2Jacobian.prototype.Set = function (a, b, c) {
        return this.linear.Copy(a), (this.angularA = b), (this.angularB = c), this;
    }),
    (box2d.b2JointEdge = function () {}),
    (box2d.b2JointEdge.prototype.other = null),
    (box2d.b2JointEdge.prototype.joint = null),
    (box2d.b2JointEdge.prototype.prev = null),
    (box2d.b2JointEdge.prototype.next = null),
    (box2d.b2JointDef = function (a) {
        this.type = a;
    }),
    (box2d.b2JointDef.prototype.type = box2d.b2JointType.e_unknownJoint),
    (box2d.b2JointDef.prototype.userData = null),
    (box2d.b2JointDef.prototype.bodyA = null),
    (box2d.b2JointDef.prototype.bodyB = null),
    (box2d.b2JointDef.prototype.collideConnected = !1),
    (box2d.b2Joint = function (a) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(a.bodyA !== a.bodyB),
            (this.m_type = a.type),
            (this.m_edgeA = new box2d.b2JointEdge()),
            (this.m_edgeB = new box2d.b2JointEdge()),
            (this.m_bodyA = a.bodyA),
            (this.m_bodyB = a.bodyB),
            (this.m_collideConnected = a.collideConnected),
            (this.m_userData = a.userData);
    }),
    (box2d.b2Joint.prototype.m_type = box2d.b2JointType.e_unknownJoint),
    (box2d.b2Joint.prototype.m_prev = null),
    (box2d.b2Joint.prototype.m_next = null),
    (box2d.b2Joint.prototype.m_edgeA = null),
    (box2d.b2Joint.prototype.m_edgeB = null),
    (box2d.b2Joint.prototype.m_bodyA = null),
    (box2d.b2Joint.prototype.m_bodyB = null),
    (box2d.b2Joint.prototype.m_index = 0),
    (box2d.b2Joint.prototype.m_islandFlag = !1),
    (box2d.b2Joint.prototype.m_collideConnected = !1),
    (box2d.b2Joint.prototype.m_userData = null),
    (box2d.b2Joint.prototype.GetAnchorA = function (a) {
        return a.SetZero();
    }),
    (box2d.b2Joint.prototype.GetAnchorB = function (a) {
        return a.SetZero();
    }),
    (box2d.b2Joint.prototype.GetReactionForce = function (a, b) {
        return b.SetZero();
    }),
    (box2d.b2Joint.prototype.GetReactionTorque = function () {
        return 0;
    }),
    (box2d.b2Joint.prototype.InitVelocityConstraints = function () {}),
    (box2d.b2Joint.prototype.SolveVelocityConstraints = function () {}),
    (box2d.b2Joint.prototype.SolvePositionConstraints = function () {
        return !1;
    }),
    (box2d.b2Joint.prototype.GetType = function () {
        return this.m_type;
    }),
    (box2d.b2Joint.prototype.GetBodyA = function () {
        return this.m_bodyA;
    }),
    (box2d.b2Joint.prototype.GetBodyB = function () {
        return this.m_bodyB;
    }),
    (box2d.b2Joint.prototype.GetNext = function () {
        return this.m_next;
    }),
    (box2d.b2Joint.prototype.GetUserData = function () {
        return this.m_userData;
    }),
    (box2d.b2Joint.prototype.SetUserData = function (a) {
        this.m_userData = a;
    }),
    (box2d.b2Joint.prototype.GetCollideConnected = function () {
        return this.m_collideConnected;
    }),
    (box2d.b2Joint.prototype.Dump = function () {
        box2d.DEBUG && box2d.b2Log("// Dump is not supported for this joint type.\n");
    }),
    (box2d.b2Joint.prototype.IsActive = function () {
        return this.m_bodyA.IsActive() && this.m_bodyB.IsActive();
    }),
    (box2d.b2Joint.prototype.ShiftOrigin = function () {}),
    goog.provide("box2d.b2RevoluteJoint"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Joint"),
    goog.require("box2d.b2Math"),
    (box2d.b2RevoluteJointDef = function () {
        goog.base(this, box2d.b2JointType.e_revoluteJoint), (this.localAnchorA = new box2d.b2Vec2(0, 0)), (this.localAnchorB = new box2d.b2Vec2(0, 0));
    }),
    goog.inherits(box2d.b2RevoluteJointDef, box2d.b2JointDef),
    (box2d.b2RevoluteJointDef.prototype.localAnchorA = null),
    (box2d.b2RevoluteJointDef.prototype.localAnchorB = null),
    (box2d.b2RevoluteJointDef.prototype.referenceAngle = 0),
    (box2d.b2RevoluteJointDef.prototype.enableLimit = !1),
    (box2d.b2RevoluteJointDef.prototype.lowerAngle = 0),
    (box2d.b2RevoluteJointDef.prototype.upperAngle = 0),
    (box2d.b2RevoluteJointDef.prototype.enableMotor = !1),
    (box2d.b2RevoluteJointDef.prototype.motorSpeed = 0),
    (box2d.b2RevoluteJointDef.prototype.maxMotorTorque = 0),
    (box2d.b2RevoluteJointDef.prototype.Initialize = function (a, b, c) {
        (this.bodyA = a), (this.bodyB = b), this.bodyA.GetLocalPoint(c, this.localAnchorA), this.bodyB.GetLocalPoint(c, this.localAnchorB), (this.referenceAngle = this.bodyB.GetAngleRadians() - this.bodyA.GetAngleRadians());
    }),
    (box2d.b2RevoluteJoint = function (a) {
        goog.base(this, a),
            (this.m_localAnchorA = new box2d.b2Vec2()),
            (this.m_localAnchorB = new box2d.b2Vec2()),
            (this.m_impulse = new box2d.b2Vec3()),
            (this.m_rA = new box2d.b2Vec2()),
            (this.m_rB = new box2d.b2Vec2()),
            (this.m_localCenterA = new box2d.b2Vec2()),
            (this.m_localCenterB = new box2d.b2Vec2()),
            (this.m_mass = new box2d.b2Mat33()),
            (this.m_qA = new box2d.b2Rot()),
            (this.m_qB = new box2d.b2Rot()),
            (this.m_lalcA = new box2d.b2Vec2()),
            (this.m_lalcB = new box2d.b2Vec2()),
            (this.m_K = new box2d.b2Mat22()),
            this.m_localAnchorA.Copy(a.localAnchorA),
            this.m_localAnchorB.Copy(a.localAnchorB),
            (this.m_referenceAngle = a.referenceAngle),
            this.m_impulse.SetZero(),
            (this.m_motorImpulse = 0),
            (this.m_lowerAngle = a.lowerAngle),
            (this.m_upperAngle = a.upperAngle),
            (this.m_maxMotorTorque = a.maxMotorTorque),
            (this.m_motorSpeed = a.motorSpeed),
            (this.m_enableLimit = a.enableLimit),
            (this.m_enableMotor = a.enableMotor),
            (this.m_limitState = box2d.b2LimitState.e_inactiveLimit);
    }),
    goog.inherits(box2d.b2RevoluteJoint, box2d.b2Joint),
    (box2d.b2RevoluteJoint.prototype.m_localAnchorA = null),
    (box2d.b2RevoluteJoint.prototype.m_localAnchorB = null),
    (box2d.b2RevoluteJoint.prototype.m_impulse = null),
    (box2d.b2RevoluteJoint.prototype.m_motorImpulse = 0),
    (box2d.b2RevoluteJoint.prototype.m_enableMotor = !1),
    (box2d.b2RevoluteJoint.prototype.m_maxMotorTorque = 0),
    (box2d.b2RevoluteJoint.prototype.m_motorSpeed = 0),
    (box2d.b2RevoluteJoint.prototype.m_enableLimit = !1),
    (box2d.b2RevoluteJoint.prototype.m_referenceAngle = 0),
    (box2d.b2RevoluteJoint.prototype.m_lowerAngle = 0),
    (box2d.b2RevoluteJoint.prototype.m_upperAngle = 0),
    (box2d.b2RevoluteJoint.prototype.m_indexA = 0),
    (box2d.b2RevoluteJoint.prototype.m_indexB = 0),
    (box2d.b2RevoluteJoint.prototype.m_rA = null),
    (box2d.b2RevoluteJoint.prototype.m_rB = null),
    (box2d.b2RevoluteJoint.prototype.m_localCenterA = null),
    (box2d.b2RevoluteJoint.prototype.m_localCenterB = null),
    (box2d.b2RevoluteJoint.prototype.m_invMassA = 0),
    (box2d.b2RevoluteJoint.prototype.m_invMassB = 0),
    (box2d.b2RevoluteJoint.prototype.m_invIA = 0),
    (box2d.b2RevoluteJoint.prototype.m_invIB = 0),
    (box2d.b2RevoluteJoint.prototype.m_mass = null),
    (box2d.b2RevoluteJoint.prototype.m_motorMass = 0),
    (box2d.b2RevoluteJoint.prototype.m_limitState = box2d.b2LimitState.e_inactiveLimit),
    (box2d.b2RevoluteJoint.prototype.m_qA = null),
    (box2d.b2RevoluteJoint.prototype.m_qB = null),
    (box2d.b2RevoluteJoint.prototype.m_lalcA = null),
    (box2d.b2RevoluteJoint.prototype.m_lalcB = null),
    (box2d.b2RevoluteJoint.prototype.m_K = null),
    (box2d.b2RevoluteJoint.prototype.InitVelocityConstraints = function (a) {
        (this.m_indexA = this.m_bodyA.m_islandIndex),
            (this.m_indexB = this.m_bodyB.m_islandIndex),
            this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),
            this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),
            (this.m_invMassA = this.m_bodyA.m_invMass),
            (this.m_invMassB = this.m_bodyB.m_invMass),
            (this.m_invIA = this.m_bodyA.m_invI),
            (this.m_invIB = this.m_bodyB.m_invI);
        var b = a.positions[this.m_indexA].a,
            c = a.velocities[this.m_indexA].v,
            d = a.velocities[this.m_indexA].w,
            e = a.positions[this.m_indexB].a,
            f = a.velocities[this.m_indexB].v,
            g = a.velocities[this.m_indexB].w,
            h = this.m_qA.SetAngleRadians(b),
            i = this.m_qB.SetAngleRadians(e);
        box2d.b2SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA), box2d.b2MulRV(h, this.m_lalcA, this.m_rA), box2d.b2SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB), box2d.b2MulRV(i, this.m_lalcB, this.m_rB);
        var j = this.m_invMassA,
            k = this.m_invMassB,
            l = this.m_invIA,
            m = this.m_invIB,
            n = l + m === 0;
        if (
            ((this.m_mass.ex.x = j + k + this.m_rA.y * this.m_rA.y * l + this.m_rB.y * this.m_rB.y * m),
            (this.m_mass.ey.x = -this.m_rA.y * this.m_rA.x * l - this.m_rB.y * this.m_rB.x * m),
            (this.m_mass.ez.x = -this.m_rA.y * l - this.m_rB.y * m),
            (this.m_mass.ex.y = this.m_mass.ey.x),
            (this.m_mass.ey.y = j + k + this.m_rA.x * this.m_rA.x * l + this.m_rB.x * this.m_rB.x * m),
            (this.m_mass.ez.y = this.m_rA.x * l + this.m_rB.x * m),
            (this.m_mass.ex.z = this.m_mass.ez.x),
            (this.m_mass.ey.z = this.m_mass.ez.y),
            (this.m_mass.ez.z = l + m),
            (this.m_motorMass = l + m),
            0 < this.m_motorMass && (this.m_motorMass = 1 / this.m_motorMass),
            (!1 === this.m_enableMotor || n) && (this.m_motorImpulse = 0),
            this.m_enableLimit && !1 === n)
        ) {
            var o = e - b - this.m_referenceAngle;
            box2d.b2Abs(this.m_upperAngle - this.m_lowerAngle) < 2 * box2d.b2_angularSlop
                ? (this.m_limitState = box2d.b2LimitState.e_equalLimits)
                : o <= this.m_lowerAngle
                ? (this.m_limitState !== box2d.b2LimitState.e_atLowerLimit && (this.m_impulse.z = 0), (this.m_limitState = box2d.b2LimitState.e_atLowerLimit))
                : o >= this.m_upperAngle
                ? (this.m_limitState !== box2d.b2LimitState.e_atUpperLimit && (this.m_impulse.z = 0), (this.m_limitState = box2d.b2LimitState.e_atUpperLimit))
                : ((this.m_limitState = box2d.b2LimitState.e_inactiveLimit), (this.m_impulse.z = 0));
        } else this.m_limitState = box2d.b2LimitState.e_inactiveLimit;
        if (a.step.warmStarting) {
            this.m_impulse.SelfMul(a.step.dtRatio), (this.m_motorImpulse *= a.step.dtRatio);
            var p = box2d.b2RevoluteJoint.prototype.InitVelocityConstraints.s_P.SetXY(this.m_impulse.x, this.m_impulse.y);
            c.SelfMulSub(j, p), (d -= l * (box2d.b2CrossVV(this.m_rA, p) + this.m_motorImpulse + this.m_impulse.z)), f.SelfMulAdd(k, p), (g += m * (box2d.b2CrossVV(this.m_rB, p) + this.m_motorImpulse + this.m_impulse.z));
        } else this.m_impulse.SetZero(), (this.m_motorImpulse = 0);
        (a.velocities[this.m_indexA].w = d), (a.velocities[this.m_indexB].w = g);
    }),
    (box2d.b2RevoluteJoint.prototype.InitVelocityConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints = function (a) {
        var b = a.velocities[this.m_indexA].v,
            c = a.velocities[this.m_indexA].w,
            d = a.velocities[this.m_indexB].v,
            e = a.velocities[this.m_indexB].w,
            f = this.m_invMassA,
            g = this.m_invMassB,
            h = this.m_invIA,
            i = this.m_invIB,
            j = h + i === 0;
        if (this.m_enableMotor && this.m_limitState !== box2d.b2LimitState.e_equalLimits && !1 === j) {
            var k = e - c - this.m_motorSpeed,
                l = -this.m_motorMass * k,
                m = this.m_motorImpulse,
                n = a.step.dt * this.m_maxMotorTorque;
            (this.m_motorImpulse = box2d.b2Clamp(this.m_motorImpulse + l, -n, n)), (c -= h * (l = this.m_motorImpulse - m)), (e += i * l);
        }
        if (this.m_enableLimit && this.m_limitState !== box2d.b2LimitState.e_inactiveLimit && !1 === j) {
            var o = box2d.b2SubVV(box2d.b2AddVCrossSV(d, e, this.m_rB, box2d.b2Vec2.s_t0), box2d.b2AddVCrossSV(b, c, this.m_rA, box2d.b2Vec2.s_t1), box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot1),
                p = e - c;
            l = this.m_mass.Solve33(o.x, o.y, p, box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse3).SelfNeg();
            if (this.m_limitState === box2d.b2LimitState.e_equalLimits) this.m_impulse.SelfAdd(l);
            else if (this.m_limitState === box2d.b2LimitState.e_atLowerLimit) {
                if (this.m_impulse.z + l.z < 0) {
                    var r = -o.x + this.m_impulse.z * this.m_mass.ez.x,
                        s = -o.y + this.m_impulse.z * this.m_mass.ez.y,
                        t = this.m_mass.Solve22(r, s, box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced);
                    (l.x = t.x), (l.y = t.y), (l.z = -this.m_impulse.z), (this.m_impulse.x += t.x), (this.m_impulse.y += t.y), (this.m_impulse.z = 0);
                } else this.m_impulse.SelfAdd(l);
            } else if (this.m_limitState === box2d.b2LimitState.e_atUpperLimit) {
                if (0 < this.m_impulse.z + l.z) {
                    (r = -o.x + this.m_impulse.z * this.m_mass.ez.x), (s = -o.y + this.m_impulse.z * this.m_mass.ez.y), (t = this.m_mass.Solve22(r, s, box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced));
                    (l.x = t.x), (l.y = t.y), (l.z = -this.m_impulse.z), (this.m_impulse.x += t.x), (this.m_impulse.y += t.y), (this.m_impulse.z = 0);
                } else this.m_impulse.SelfAdd(l);
            }
            var u = box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_P.SetXY(l.x, l.y);
            b.SelfMulSub(f, u), (c -= h * (box2d.b2CrossVV(this.m_rA, u) + l.z)), d.SelfMulAdd(g, u), (e += i * (box2d.b2CrossVV(this.m_rB, u) + l.z));
        } else {
            (k = box2d.b2SubVV(box2d.b2AddVCrossSV(d, e, this.m_rB, box2d.b2Vec2.s_t0), box2d.b2AddVCrossSV(b, c, this.m_rA, box2d.b2Vec2.s_t1), box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot)),
                (l = this.m_mass.Solve22(-k.x, -k.y, box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse2));
            (this.m_impulse.x += l.x), (this.m_impulse.y += l.y), b.SelfMulSub(f, l), (c -= h * box2d.b2CrossVV(this.m_rA, l)), d.SelfMulAdd(g, l), (e += i * box2d.b2CrossVV(this.m_rB, l));
        }
        (a.velocities[this.m_indexA].w = c), (a.velocities[this.m_indexB].w = e);
    }),
    (box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot = new box2d.b2Vec2()),
    (box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_Cdot1 = new box2d.b2Vec2()),
    (box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse3 = new box2d.b2Vec3()),
    (box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_reduced = new box2d.b2Vec2()),
    (box2d.b2RevoluteJoint.prototype.SolveVelocityConstraints.s_impulse2 = new box2d.b2Vec2()),
    (box2d.b2RevoluteJoint.prototype.SolvePositionConstraints = function (a) {
        var i,
            b = a.positions[this.m_indexA].c,
            c = a.positions[this.m_indexA].a,
            d = a.positions[this.m_indexB].c,
            e = a.positions[this.m_indexB].a,
            f = this.m_qA.SetAngleRadians(c),
            g = this.m_qB.SetAngleRadians(e),
            h = 0,
            j = this.m_invIA + this.m_invIB === 0;
        if (this.m_enableLimit && this.m_limitState !== box2d.b2LimitState.e_inactiveLimit && !1 === j) {
            var k = e - c - this.m_referenceAngle,
                l = 0;
            if (this.m_limitState === box2d.b2LimitState.e_equalLimits) {
                var m = box2d.b2Clamp(k - this.m_lowerAngle, -box2d.b2_maxAngularCorrection, box2d.b2_maxAngularCorrection);
                (l = -this.m_motorMass * m), (h = box2d.b2Abs(m));
            } else if (this.m_limitState === box2d.b2LimitState.e_atLowerLimit) {
                (h = -(m = k - this.m_lowerAngle)), (m = box2d.b2Clamp(m + box2d.b2_angularSlop, -box2d.b2_maxAngularCorrection, 0)), (l = -this.m_motorMass * m);
            } else if (this.m_limitState === box2d.b2LimitState.e_atUpperLimit) {
                (h = m = k - this.m_upperAngle), (m = box2d.b2Clamp(m - box2d.b2_angularSlop, 0, box2d.b2_maxAngularCorrection)), (l = -this.m_motorMass * m);
            }
            (c -= this.m_invIA * l), (e += this.m_invIB * l);
        }
        f.SetAngleRadians(c), g.SetAngleRadians(e), box2d.b2SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
        var n = box2d.b2MulRV(f, this.m_lalcA, this.m_rA);
        box2d.b2SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
        var o = box2d.b2MulRV(g, this.m_lalcB, this.m_rB);
        i = (m = box2d.b2SubVV(box2d.b2AddVV(d, o, box2d.b2Vec2.s_t0), box2d.b2AddVV(b, n, box2d.b2Vec2.s_t1), box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_C)).GetLength();
        var p = this.m_invMassA,
            q = this.m_invMassB,
            r = this.m_invIA,
            s = this.m_invIB,
            t = this.m_K;
        (t.ex.x = p + q + r * n.y * n.y + s * o.y * o.y), (t.ex.y = -r * n.x * n.y - s * o.x * o.y), (t.ey.x = t.ex.y), (t.ey.y = p + q + r * n.x * n.x + s * o.x * o.x);
        var u = t.Solve(m.x, m.y, box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_impulse).SelfNeg();
        return (
            b.SelfMulSub(p, u),
            (c -= r * box2d.b2CrossVV(n, u)),
            d.SelfMulAdd(q, u),
            (e += s * box2d.b2CrossVV(o, u)),
            (a.positions[this.m_indexA].a = c),
            (a.positions[this.m_indexB].a = e),
            i <= box2d.b2_linearSlop && h <= box2d.b2_angularSlop
        );
    }),
    (box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_C = new box2d.b2Vec2()),
    (box2d.b2RevoluteJoint.prototype.SolvePositionConstraints.s_impulse = new box2d.b2Vec2()),
    (box2d.b2RevoluteJoint.prototype.GetAnchorA = function (a) {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, a);
    }),
    (box2d.b2RevoluteJoint.prototype.GetAnchorB = function (a) {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, a);
    }),
    (box2d.b2RevoluteJoint.prototype.GetReactionForce = function (a, b) {
        return b.SetXY(a * this.m_impulse.x, a * this.m_impulse.y);
    }),
    (box2d.b2RevoluteJoint.prototype.GetReactionTorque = function (a) {
        return a * this.m_impulse.z;
    }),
    (box2d.b2RevoluteJoint.prototype.GetLocalAnchorA = function (a) {
        return a.Copy(this.m_localAnchorA);
    }),
    (box2d.b2RevoluteJoint.prototype.GetLocalAnchorB = function (a) {
        return a.Copy(this.m_localAnchorB);
    }),
    (box2d.b2RevoluteJoint.prototype.GetReferenceAngle = function () {
        return this.m_referenceAngle;
    }),
    (box2d.b2RevoluteJoint.prototype.GetJointAngleRadians = function () {
        return this.m_bodyB.m_sweep.a - this.m_bodyA.m_sweep.a - this.m_referenceAngle;
    }),
    (box2d.b2RevoluteJoint.prototype.GetJointSpeed = function () {
        return this.m_bodyB.m_angularVelocity - this.m_bodyA.m_angularVelocity;
    }),
    (box2d.b2RevoluteJoint.prototype.IsMotorEnabled = function () {
        return this.m_enableMotor;
    }),
    (box2d.b2RevoluteJoint.prototype.EnableMotor = function (a) {
        this.m_enableMotor !== a && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), (this.m_enableMotor = a));
    }),
    (box2d.b2RevoluteJoint.prototype.GetMotorTorque = function (a) {
        return a * this.m_motorImpulse;
    }),
    (box2d.b2RevoluteJoint.prototype.GetMotorSpeed = function () {
        return this.m_motorSpeed;
    }),
    (box2d.b2RevoluteJoint.prototype.SetMaxMotorTorque = function (a) {
        this.m_maxMotorTorque = a;
    }),
    (box2d.b2RevoluteJoint.prototype.GetMaxMotorTorque = function () {
        return this.m_maxMotorTorque;
    }),
    (box2d.b2RevoluteJoint.prototype.IsLimitEnabled = function () {
        return this.m_enableLimit;
    }),
    (box2d.b2RevoluteJoint.prototype.EnableLimit = function (a) {
        a !== this.m_enableLimit && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), (this.m_enableLimit = a), (this.m_impulse.z = 0));
    }),
    (box2d.b2RevoluteJoint.prototype.GetLowerLimit = function () {
        return this.m_lowerAngle;
    }),
    (box2d.b2RevoluteJoint.prototype.GetUpperLimit = function () {
        return this.m_upperAngle;
    }),
    (box2d.b2RevoluteJoint.prototype.SetLimits = function (a, b) {
        (a !== this.m_lowerAngle || b !== this.m_upperAngle) && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), (this.m_impulse.z = 0), (this.m_lowerAngle = a), (this.m_upperAngle = b));
    }),
    (box2d.b2RevoluteJoint.prototype.SetMotorSpeed = function (a) {
        this.m_motorSpeed !== a && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), (this.m_motorSpeed = a));
    }),
    (box2d.b2RevoluteJoint.prototype.Dump = function () {
        if (box2d.DEBUG) {
            var a = this.m_bodyA.m_islandIndex,
                b = this.m_bodyB.m_islandIndex;
            box2d.b2Log("  /*box2d.b2RevoluteJointDef*/ var jd = new box2d.b2RevoluteJointDef();\n"),
                box2d.b2Log("  jd.bodyA = bodies[%d];\n", a),
                box2d.b2Log("  jd.bodyB = bodies[%d];\n", b),
                box2d.b2Log("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"),
                box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n", this.m_localAnchorA.x, this.m_localAnchorA.y),
                box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n", this.m_localAnchorB.x, this.m_localAnchorB.y),
                box2d.b2Log("  jd.referenceAngle = %.15f;\n", this.m_referenceAngle),
                box2d.b2Log("  jd.enableLimit = %s;\n", this.m_enableLimit ? "true" : "false"),
                box2d.b2Log("  jd.lowerAngle = %.15f;\n", this.m_lowerAngle),
                box2d.b2Log("  jd.upperAngle = %.15f;\n", this.m_upperAngle),
                box2d.b2Log("  jd.enableMotor = %s;\n", this.m_enableMotor ? "true" : "false"),
                box2d.b2Log("  jd.motorSpeed = %.15f;\n", this.m_motorSpeed),
                box2d.b2Log("  jd.maxMotorTorque = %.15f;\n", this.m_maxMotorTorque),
                box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
        }
    }),
    goog.provide("box2d.b2PrismaticJoint"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Joint"),
    goog.require("box2d.b2Math"),
    (box2d.b2PrismaticJointDef = function () {
        goog.base(this, box2d.b2JointType.e_prismaticJoint), (this.localAnchorA = new box2d.b2Vec2()), (this.localAnchorB = new box2d.b2Vec2()), (this.localAxisA = new box2d.b2Vec2(1, 0));
    }),
    goog.inherits(box2d.b2PrismaticJointDef, box2d.b2JointDef),
    (box2d.b2PrismaticJointDef.prototype.localAnchorA = null),
    (box2d.b2PrismaticJointDef.prototype.localAnchorB = null),
    (box2d.b2PrismaticJointDef.prototype.localAxisA = null),
    (box2d.b2PrismaticJointDef.prototype.referenceAngle = 0),
    (box2d.b2PrismaticJointDef.prototype.enableLimit = !1),
    (box2d.b2PrismaticJointDef.prototype.lowerTranslation = 0),
    (box2d.b2PrismaticJointDef.prototype.upperTranslation = 0),
    (box2d.b2PrismaticJointDef.prototype.enableMotor = !1),
    (box2d.b2PrismaticJointDef.prototype.maxMotorForce = 0),
    (box2d.b2PrismaticJointDef.prototype.motorSpeed = 0),
    (box2d.b2PrismaticJointDef.prototype.Initialize = function (a, b, c, d) {
        (this.bodyA = a),
            (this.bodyB = b),
            this.bodyA.GetLocalPoint(c, this.localAnchorA),
            this.bodyB.GetLocalPoint(c, this.localAnchorB),
            this.bodyA.GetLocalVector(d, this.localAxisA),
            (this.referenceAngle = this.bodyB.GetAngleRadians() - this.bodyA.GetAngleRadians());
    }),
    (box2d.b2PrismaticJoint = function (a) {
        goog.base(this, a),
            (this.m_localAnchorA = a.localAnchorA.Clone()),
            (this.m_localAnchorB = a.localAnchorB.Clone()),
            (this.m_localXAxisA = a.localAxisA.Clone().SelfNormalize()),
            (this.m_localYAxisA = box2d.b2CrossOneV(this.m_localXAxisA, new box2d.b2Vec2())),
            (this.m_referenceAngle = a.referenceAngle),
            (this.m_impulse = new box2d.b2Vec3(0, 0, 0)),
            (this.m_lowerTranslation = a.lowerTranslation),
            (this.m_upperTranslation = a.upperTranslation),
            (this.m_maxMotorForce = a.maxMotorForce),
            (this.m_motorSpeed = a.motorSpeed),
            (this.m_enableLimit = a.enableLimit),
            (this.m_enableMotor = a.enableMotor),
            (this.m_localCenterA = new box2d.b2Vec2()),
            (this.m_localCenterB = new box2d.b2Vec2()),
            (this.m_axis = new box2d.b2Vec2(0, 0)),
            (this.m_perp = new box2d.b2Vec2(0, 0)),
            (this.m_K = new box2d.b2Mat33()),
            (this.m_K3 = new box2d.b2Mat33()),
            (this.m_K2 = new box2d.b2Mat22()),
            (this.m_qA = new box2d.b2Rot()),
            (this.m_qB = new box2d.b2Rot()),
            (this.m_lalcA = new box2d.b2Vec2()),
            (this.m_lalcB = new box2d.b2Vec2()),
            (this.m_rA = new box2d.b2Vec2()),
            (this.m_rB = new box2d.b2Vec2());
    }),
    goog.inherits(box2d.b2PrismaticJoint, box2d.b2Joint),
    (box2d.b2PrismaticJoint.prototype.m_localAnchorA = null),
    (box2d.b2PrismaticJoint.prototype.m_localAnchorB = null),
    (box2d.b2PrismaticJoint.prototype.m_localXAxisA = null),
    (box2d.b2PrismaticJoint.prototype.m_localYAxisA = null),
    (box2d.b2PrismaticJoint.prototype.m_referenceAngle = 0),
    (box2d.b2PrismaticJoint.prototype.m_impulse = null),
    (box2d.b2PrismaticJoint.prototype.m_motorImpulse = 0),
    (box2d.b2PrismaticJoint.prototype.m_lowerTranslation = 0),
    (box2d.b2PrismaticJoint.prototype.m_upperTranslation = 0),
    (box2d.b2PrismaticJoint.prototype.m_maxMotorForce = 0),
    (box2d.b2PrismaticJoint.prototype.m_motorSpeed = 0),
    (box2d.b2PrismaticJoint.prototype.m_enableLimit = !1),
    (box2d.b2PrismaticJoint.prototype.m_enableMotor = !1),
    (box2d.b2PrismaticJoint.prototype.m_limitState = box2d.b2LimitState.e_inactiveLimit),
    (box2d.b2PrismaticJoint.prototype.m_indexA = 0),
    (box2d.b2PrismaticJoint.prototype.m_indexB = 0),
    (box2d.b2PrismaticJoint.prototype.m_localCenterA = null),
    (box2d.b2PrismaticJoint.prototype.m_localCenterB = null),
    (box2d.b2PrismaticJoint.prototype.m_invMassA = 0),
    (box2d.b2PrismaticJoint.prototype.m_invMassB = 0),
    (box2d.b2PrismaticJoint.prototype.m_invIA = 0),
    (box2d.b2PrismaticJoint.prototype.m_invIB = 0),
    (box2d.b2PrismaticJoint.prototype.m_axis = null),
    (box2d.b2PrismaticJoint.prototype.m_perp = null),
    (box2d.b2PrismaticJoint.prototype.m_s1 = 0),
    (box2d.b2PrismaticJoint.prototype.m_s2 = 0),
    (box2d.b2PrismaticJoint.prototype.m_a1 = 0),
    (box2d.b2PrismaticJoint.prototype.m_a2 = 0),
    (box2d.b2PrismaticJoint.prototype.m_K = null),
    (box2d.b2PrismaticJoint.prototype.m_K3 = null),
    (box2d.b2PrismaticJoint.prototype.m_K2 = null),
    (box2d.b2PrismaticJoint.prototype.m_motorMass = 0),
    (box2d.b2PrismaticJoint.prototype.m_qA = null),
    (box2d.b2PrismaticJoint.prototype.m_qB = null),
    (box2d.b2PrismaticJoint.prototype.m_lalcA = null),
    (box2d.b2PrismaticJoint.prototype.m_lalcB = null),
    (box2d.b2PrismaticJoint.prototype.m_rA = null),
    (box2d.b2PrismaticJoint.prototype.m_rB = null),
    (box2d.b2PrismaticJoint.prototype.InitVelocityConstraints = function (a) {
        (this.m_indexA = this.m_bodyA.m_islandIndex),
            (this.m_indexB = this.m_bodyB.m_islandIndex),
            this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),
            this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),
            (this.m_invMassA = this.m_bodyA.m_invMass),
            (this.m_invMassB = this.m_bodyB.m_invMass),
            (this.m_invIA = this.m_bodyA.m_invI),
            (this.m_invIB = this.m_bodyB.m_invI);
        var b = a.positions[this.m_indexA].c,
            c = a.positions[this.m_indexA].a,
            d = a.velocities[this.m_indexA].v,
            e = a.velocities[this.m_indexA].w,
            f = a.positions[this.m_indexB].c,
            g = a.positions[this.m_indexB].a,
            h = a.velocities[this.m_indexB].v,
            i = a.velocities[this.m_indexB].w,
            j = this.m_qA.SetAngleRadians(c),
            k = this.m_qB.SetAngleRadians(g);
        box2d.b2SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
        var l = box2d.b2MulRV(j, this.m_lalcA, this.m_rA);
        box2d.b2SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
        var m = box2d.b2MulRV(k, this.m_lalcB, this.m_rB),
            n = box2d.b2AddVV(box2d.b2SubVV(f, b, box2d.b2Vec2.s_t0), box2d.b2SubVV(m, l, box2d.b2Vec2.s_t1), box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_d),
            o = this.m_invMassA,
            p = this.m_invMassB,
            q = this.m_invIA,
            r = this.m_invIB;
        if (
            (box2d.b2MulRV(j, this.m_localXAxisA, this.m_axis),
            (this.m_a1 = box2d.b2CrossVV(box2d.b2AddVV(n, l, box2d.b2Vec2.s_t0), this.m_axis)),
            (this.m_a2 = box2d.b2CrossVV(m, this.m_axis)),
            (this.m_motorMass = o + p + q * this.m_a1 * this.m_a1 + r * this.m_a2 * this.m_a2),
            0 < this.m_motorMass && (this.m_motorMass = 1 / this.m_motorMass),
            box2d.b2MulRV(j, this.m_localYAxisA, this.m_perp),
            (this.m_s1 = box2d.b2CrossVV(box2d.b2AddVV(n, l, box2d.b2Vec2.s_t0), this.m_perp)),
            (this.m_s2 = box2d.b2CrossVV(m, this.m_perp)),
            (this.m_K.ex.x = o + p + q * this.m_s1 * this.m_s1 + r * this.m_s2 * this.m_s2),
            (this.m_K.ex.y = q * this.m_s1 + r * this.m_s2),
            (this.m_K.ex.z = q * this.m_s1 * this.m_a1 + r * this.m_s2 * this.m_a2),
            (this.m_K.ey.x = this.m_K.ex.y),
            (this.m_K.ey.y = q + r),
            0 === this.m_K.ey.y && (this.m_K.ey.y = 1),
            (this.m_K.ey.z = q * this.m_a1 + r * this.m_a2),
            (this.m_K.ez.x = this.m_K.ex.z),
            (this.m_K.ez.y = this.m_K.ey.z),
            (this.m_K.ez.z = o + p + q * this.m_a1 * this.m_a1 + r * this.m_a2 * this.m_a2),
            this.m_enableLimit)
        ) {
            var s = box2d.b2DotVV(this.m_axis, n);
            box2d.b2Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2 * box2d.b2_linearSlop
                ? (this.m_limitState = box2d.b2LimitState.e_equalLimits)
                : s <= this.m_lowerTranslation
                ? this.m_limitState !== box2d.b2LimitState.e_atLowerLimit && ((this.m_limitState = box2d.b2LimitState.e_atLowerLimit), (this.m_impulse.z = 0))
                : s >= this.m_upperTranslation
                ? this.m_limitState !== box2d.b2LimitState.e_atUpperLimit && ((this.m_limitState = box2d.b2LimitState.e_atUpperLimit), (this.m_impulse.z = 0))
                : ((this.m_limitState = box2d.b2LimitState.e_inactiveLimit), (this.m_impulse.z = 0));
        } else (this.m_limitState = box2d.b2LimitState.e_inactiveLimit), (this.m_impulse.z = 0);
        if ((!1 === this.m_enableMotor && (this.m_motorImpulse = 0), a.step.warmStarting)) {
            this.m_impulse.SelfMul(a.step.dtRatio), (this.m_motorImpulse *= a.step.dtRatio);
            var t = box2d.b2AddVV(
                    box2d.b2MulSV(this.m_impulse.x, this.m_perp, box2d.b2Vec2.s_t0),
                    box2d.b2MulSV(this.m_motorImpulse + this.m_impulse.z, this.m_axis, box2d.b2Vec2.s_t1),
                    box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_P
                ),
                u = this.m_impulse.x * this.m_s1 + this.m_impulse.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_a1,
                v = this.m_impulse.x * this.m_s2 + this.m_impulse.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_a2;
            d.SelfMulSub(o, t), (e -= q * u), h.SelfMulAdd(p, t), (i += r * v);
        } else this.m_impulse.SetZero(), (this.m_motorImpulse = 0);
        (a.velocities[this.m_indexA].w = e), (a.velocities[this.m_indexB].w = i);
    }),
    (box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_d = new box2d.b2Vec2()),
    (box2d.b2PrismaticJoint.prototype.InitVelocityConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints = function (a) {
        var b = a.velocities[this.m_indexA].v,
            c = a.velocities[this.m_indexA].w,
            d = a.velocities[this.m_indexB].v,
            e = a.velocities[this.m_indexB].w,
            f = this.m_invMassA,
            g = this.m_invMassB,
            h = this.m_invIA,
            i = this.m_invIB;
        if (this.m_enableMotor && this.m_limitState !== box2d.b2LimitState.e_equalLimits) {
            var j = box2d.b2DotVV(this.m_axis, box2d.b2SubVV(d, b, box2d.b2Vec2.s_t0)) + this.m_a2 * e - this.m_a1 * c,
                k = this.m_motorMass * (this.m_motorSpeed - j),
                l = this.m_motorImpulse,
                m = a.step.dt * this.m_maxMotorForce;
            (this.m_motorImpulse = box2d.b2Clamp(this.m_motorImpulse + k, -m, m)), (k = this.m_motorImpulse - l);
            var n = box2d.b2MulSV(k, this.m_axis, box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P),
                o = k * this.m_a1,
                p = k * this.m_a2;
            b.SelfMulSub(f, n), (c -= h * o), d.SelfMulAdd(g, n), (e += i * p);
        }
        var q = box2d.b2DotVV(this.m_perp, box2d.b2SubVV(d, b, box2d.b2Vec2.s_t0)) + this.m_s2 * e - this.m_s1 * c,
            r = e - c;
        if (this.m_enableLimit && this.m_limitState !== box2d.b2LimitState.e_inactiveLimit) {
            var s = box2d.b2DotVV(this.m_axis, box2d.b2SubVV(d, b, box2d.b2Vec2.s_t0)) + this.m_a2 * e - this.m_a1 * c,
                t = box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f1.Copy(this.m_impulse),
                u = this.m_K.Solve33(-q, -r, -s, box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df3);
            this.m_impulse.SelfAdd(u),
                this.m_limitState === box2d.b2LimitState.e_atLowerLimit
                    ? (this.m_impulse.z = box2d.b2Max(this.m_impulse.z, 0))
                    : this.m_limitState === box2d.b2LimitState.e_atUpperLimit && (this.m_impulse.z = box2d.b2Min(this.m_impulse.z, 0));
            var v = -q - (this.m_impulse.z - t.z) * this.m_K.ez.x,
                w = -r - (this.m_impulse.z - t.z) * this.m_K.ez.y,
                x = this.m_K.Solve22(v, w, box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f2r);
            (x.x += t.x), (x.y += t.y), (this.m_impulse.x = x.x), (this.m_impulse.y = x.y), (u.x = this.m_impulse.x - t.x), (u.y = this.m_impulse.y - t.y), (u.z = this.m_impulse.z - t.z);
            (n = box2d.b2AddVV(box2d.b2MulSV(u.x, this.m_perp, box2d.b2Vec2.s_t0), box2d.b2MulSV(u.z, this.m_axis, box2d.b2Vec2.s_t1), box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P)),
                (o = u.x * this.m_s1 + u.y + u.z * this.m_a1),
                (p = u.x * this.m_s2 + u.y + u.z * this.m_a2);
            b.SelfMulSub(f, n), (c -= h * o), d.SelfMulAdd(g, n), (e += i * p);
        } else {
            u = this.m_K.Solve22(-q, -r, box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df2);
            (this.m_impulse.x += u.x), (this.m_impulse.y += u.y);
            (n = box2d.b2MulSV(u.x, this.m_perp, box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P)), (o = u.x * this.m_s1 + u.y), (p = u.x * this.m_s2 + u.y);
            b.SelfMulSub(f, n), (c -= h * o), d.SelfMulAdd(g, n), (e += i * p);
        }
        (a.velocities[this.m_indexA].w = c), (a.velocities[this.m_indexB].w = e);
    }),
    (box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f2r = new box2d.b2Vec2()),
    (box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_f1 = new box2d.b2Vec3()),
    (box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df3 = new box2d.b2Vec3()),
    (box2d.b2PrismaticJoint.prototype.SolveVelocityConstraints.s_df2 = new box2d.b2Vec2()),
    (box2d.b2PrismaticJoint.prototype.SolvePositionConstraints = function (a) {
        var b = a.positions[this.m_indexA].c,
            c = a.positions[this.m_indexA].a,
            d = a.positions[this.m_indexB].c,
            e = a.positions[this.m_indexB].a,
            f = this.m_qA.SetAngleRadians(c),
            g = this.m_qB.SetAngleRadians(e),
            h = this.m_invMassA,
            i = this.m_invMassB,
            j = this.m_invIA,
            k = this.m_invIB,
            l = box2d.b2MulRV(f, this.m_lalcA, this.m_rA),
            m = box2d.b2MulRV(g, this.m_lalcB, this.m_rB),
            n = box2d.b2SubVV(box2d.b2AddVV(d, m, box2d.b2Vec2.s_t0), box2d.b2AddVV(b, l, box2d.b2Vec2.s_t1), box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_d),
            o = box2d.b2MulRV(f, this.m_localXAxisA, this.m_axis),
            p = box2d.b2CrossVV(box2d.b2AddVV(n, l, box2d.b2Vec2.s_t0), o),
            q = box2d.b2CrossVV(m, o),
            r = box2d.b2MulRV(f, this.m_localYAxisA, this.m_perp),
            s = box2d.b2CrossVV(box2d.b2AddVV(n, l, box2d.b2Vec2.s_t0), r),
            t = box2d.b2CrossVV(m, r),
            u = box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse,
            v = box2d.b2DotVV(r, n),
            w = e - c - this.m_referenceAngle,
            x = box2d.b2Abs(v),
            y = box2d.b2Abs(w),
            z = !1,
            A = 0;
        if (this.m_enableLimit) {
            var B = box2d.b2DotVV(o, n);
            box2d.b2Abs(this.m_upperTranslation - this.m_lowerTranslation) < 2 * box2d.b2_linearSlop
                ? ((A = box2d.b2Clamp(B, -box2d.b2_maxLinearCorrection, box2d.b2_maxLinearCorrection)), (x = box2d.b2Max(x, box2d.b2Abs(B))), (z = !0))
                : B <= this.m_lowerTranslation
                ? ((A = box2d.b2Clamp(B - this.m_lowerTranslation + box2d.b2_linearSlop, -box2d.b2_maxLinearCorrection, 0)), (x = box2d.b2Max(x, this.m_lowerTranslation - B)), (z = !0))
                : B >= this.m_upperTranslation && ((A = box2d.b2Clamp(B - this.m_upperTranslation - box2d.b2_linearSlop, 0, box2d.b2_maxLinearCorrection)), (x = box2d.b2Max(x, B - this.m_upperTranslation)), (z = !0));
        }
        if (z) {
            var C = h + i + j * s * s + k * t * t,
                D = j * s + k * t,
                E = j * s * p + k * t * q;
            0 === (F = j + k) && (F = 1);
            var G = j * p + k * q,
                H = h + i + j * p * p + k * q * q,
                I = this.m_K3;
            I.ex.SetXYZ(C, D, E), I.ey.SetXYZ(D, F, G), I.ez.SetXYZ(E, G, H), (u = I.Solve33(-v, -w, -A, u));
        } else {
            var F;
            (C = h + i + j * s * s + k * t * t), (D = j * s + k * t);
            0 === (F = j + k) && (F = 1);
            var J = this.m_K2;
            J.ex.SetXY(C, D), J.ey.SetXY(D, F);
            var K = J.Solve(-v, -w, box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse1);
            (u.x = K.x), (u.y = K.y), (u.z = 0);
        }
        var L = box2d.b2AddVV(box2d.b2MulSV(u.x, r, box2d.b2Vec2.s_t0), box2d.b2MulSV(u.z, o, box2d.b2Vec2.s_t1), box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_P),
            M = u.x * s + u.y + u.z * p,
            N = u.x * t + u.y + u.z * q;
        return b.SelfMulSub(h, L), (c -= j * M), d.SelfMulAdd(i, L), (e += k * N), (a.positions[this.m_indexA].a = c), (a.positions[this.m_indexB].a = e), x <= box2d.b2_linearSlop && y <= box2d.b2_angularSlop;
    }),
    (box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_d = new box2d.b2Vec2()),
    (box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse = new box2d.b2Vec3()),
    (box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_impulse1 = new box2d.b2Vec2()),
    (box2d.b2PrismaticJoint.prototype.SolvePositionConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2PrismaticJoint.prototype.GetAnchorA = function (a) {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, a);
    }),
    (box2d.b2PrismaticJoint.prototype.GetAnchorB = function (a) {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, a);
    }),
    (box2d.b2PrismaticJoint.prototype.GetReactionForce = function (a, b) {
        return b.SetXY(a * (this.m_impulse.x * this.m_perp.x + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.x), a * (this.m_impulse.x * this.m_perp.y + (this.m_motorImpulse + this.m_impulse.z) * this.m_axis.y));
    }),
    (box2d.b2PrismaticJoint.prototype.GetReactionTorque = function (a) {
        return a * this.m_impulse.y;
    }),
    (box2d.b2PrismaticJoint.prototype.GetLocalAnchorA = function (a) {
        return a.Copy(this.m_localAnchorA);
    }),
    (box2d.b2PrismaticJoint.prototype.GetLocalAnchorB = function (a) {
        return a.Copy(this.m_localAnchorB);
    }),
    (box2d.b2PrismaticJoint.prototype.GetLocalAxisA = function (a) {
        return a.Copy(this.m_localXAxisA);
    }),
    (box2d.b2PrismaticJoint.prototype.GetReferenceAngle = function () {
        return this.m_referenceAngle;
    }),
    (box2d.b2PrismaticJoint.prototype.GetJointTranslation = function () {
        var a = this.m_bodyA.GetWorldPoint(this.m_localAnchorA, box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pA),
            b = this.m_bodyB.GetWorldPoint(this.m_localAnchorB, box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pB),
            c = box2d.b2SubVV(b, a, box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_d),
            d = this.m_bodyA.GetWorldVector(this.m_localXAxisA, box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_axis);
        return box2d.b2DotVV(c, d);
    }),
    (box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pA = new box2d.b2Vec2()),
    (box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_pB = new box2d.b2Vec2()),
    (box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_d = new box2d.b2Vec2()),
    (box2d.b2PrismaticJoint.prototype.GetJointTranslation.s_axis = new box2d.b2Vec2()),
    (box2d.b2PrismaticJoint.prototype.GetJointSpeed = function () {
        var a = this.m_bodyA,
            b = this.m_bodyB;
        box2d.b2SubVV(this.m_localAnchorA, a.m_sweep.localCenter, this.m_lalcA);
        var c = box2d.b2MulRV(a.m_xf.q, this.m_lalcA, this.m_rA);
        box2d.b2SubVV(this.m_localAnchorB, b.m_sweep.localCenter, this.m_lalcB);
        var d = box2d.b2MulRV(b.m_xf.q, this.m_lalcB, this.m_rB),
            e = box2d.b2AddVV(a.m_sweep.c, c, box2d.b2Vec2.s_t0),
            f = box2d.b2AddVV(b.m_sweep.c, d, box2d.b2Vec2.s_t1),
            g = box2d.b2SubVV(f, e, box2d.b2Vec2.s_t2),
            h = a.GetWorldVector(this.m_localXAxisA, this.m_axis),
            i = a.m_linearVelocity,
            j = b.m_linearVelocity,
            k = a.m_angularVelocity,
            l = b.m_angularVelocity;
        return box2d.b2DotVV(g, box2d.b2CrossSV(k, h, box2d.b2Vec2.s_t0)) + box2d.b2DotVV(h, box2d.b2SubVV(box2d.b2AddVCrossSV(j, l, d, box2d.b2Vec2.s_t0), box2d.b2AddVCrossSV(i, k, c, box2d.b2Vec2.s_t1), box2d.b2Vec2.s_t0));
    }),
    (box2d.b2PrismaticJoint.prototype.IsLimitEnabled = function () {
        return this.m_enableLimit;
    }),
    (box2d.b2PrismaticJoint.prototype.EnableLimit = function (a) {
        a !== this.m_enableLimit && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), (this.m_enableLimit = a), (this.m_impulse.z = 0));
    }),
    (box2d.b2PrismaticJoint.prototype.GetLowerLimit = function () {
        return this.m_lowerTranslation;
    }),
    (box2d.b2PrismaticJoint.prototype.GetUpperLimit = function () {
        return this.m_upperTranslation;
    }),
    (box2d.b2PrismaticJoint.prototype.SetLimits = function (a, b) {
        (a !== this.m_lowerTranslation || b !== this.m_upperTranslation) && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), (this.m_lowerTranslation = a), (this.m_upperTranslation = b), (this.m_impulse.z = 0));
    }),
    (box2d.b2PrismaticJoint.prototype.IsMotorEnabled = function () {
        return this.m_enableMotor;
    }),
    (box2d.b2PrismaticJoint.prototype.EnableMotor = function (a) {
        this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), (this.m_enableMotor = a);
    }),
    (box2d.b2PrismaticJoint.prototype.SetMotorSpeed = function (a) {
        this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), (this.m_motorSpeed = a);
    }),
    (box2d.b2PrismaticJoint.prototype.GetMotorSpeed = function () {
        return this.m_motorSpeed;
    }),
    (box2d.b2PrismaticJoint.prototype.SetMaxMotorForce = function (a) {
        this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), (this.m_maxMotorForce = a);
    }),
    (box2d.b2PrismaticJoint.prototype.GetMaxMotorForce = function () {
        return this.m_maxMotorForce;
    }),
    (box2d.b2PrismaticJoint.prototype.GetMotorForce = function (a) {
        return a * this.m_motorImpulse;
    }),
    (box2d.b2PrismaticJoint.prototype.Dump = function () {
        if (box2d.DEBUG) {
            var a = this.m_bodyA.m_islandIndex,
                b = this.m_bodyB.m_islandIndex;
            box2d.b2Log("  /*box2d.b2PrismaticJointDef*/ var jd = new box2d.b2PrismaticJointDef();\n"),
                box2d.b2Log("  jd.bodyA = bodies[%d];\n", a),
                box2d.b2Log("  jd.bodyB = bodies[%d];\n", b),
                box2d.b2Log("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"),
                box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n", this.m_localAnchorA.x, this.m_localAnchorA.y),
                box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n", this.m_localAnchorB.x, this.m_localAnchorB.y),
                box2d.b2Log("  jd.localAxisA.SetXY(%.15f, %.15f);\n", this.m_localXAxisA.x, this.m_localXAxisA.y),
                box2d.b2Log("  jd.referenceAngle = %.15f;\n", this.m_referenceAngle),
                box2d.b2Log("  jd.enableLimit = %s;\n", this.m_enableLimit ? "true" : "false"),
                box2d.b2Log("  jd.lowerTranslation = %.15f;\n", this.m_lowerTranslation),
                box2d.b2Log("  jd.upperTranslation = %.15f;\n", this.m_upperTranslation),
                box2d.b2Log("  jd.enableMotor = %s;\n", this.m_enableMotor ? "true" : "false"),
                box2d.b2Log("  jd.motorSpeed = %.15f;\n", this.m_motorSpeed),
                box2d.b2Log("  jd.maxMotorForce = %.15f;\n", this.m_maxMotorForce),
                box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
        }
    }),
    goog.provide("box2d.b2GearJoint"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Joint"),
    goog.require("box2d.b2Math"),
    goog.require("box2d.b2RevoluteJoint"),
    goog.require("box2d.b2PrismaticJoint"),
    (box2d.b2GearJointDef = function () {
        goog.base(this, box2d.b2JointType.e_gearJoint);
    }),
    goog.inherits(box2d.b2GearJointDef, box2d.b2JointDef),
    (box2d.b2GearJointDef.prototype.joint1 = null),
    (box2d.b2GearJointDef.prototype.joint2 = null),
    (box2d.b2GearJointDef.prototype.ratio = 1),
    (box2d.b2GearJoint = function (a) {
        var b, c;
        goog.base(this, a),
            (this.m_joint1 = a.joint1),
            (this.m_joint2 = a.joint2),
            (this.m_localAnchorA = new box2d.b2Vec2()),
            (this.m_localAnchorB = new box2d.b2Vec2()),
            (this.m_localAnchorC = new box2d.b2Vec2()),
            (this.m_localAnchorD = new box2d.b2Vec2()),
            (this.m_localAxisC = new box2d.b2Vec2()),
            (this.m_localAxisD = new box2d.b2Vec2()),
            (this.m_lcA = new box2d.b2Vec2()),
            (this.m_lcB = new box2d.b2Vec2()),
            (this.m_lcC = new box2d.b2Vec2()),
            (this.m_lcD = new box2d.b2Vec2()),
            (this.m_JvAC = new box2d.b2Vec2()),
            (this.m_JvBD = new box2d.b2Vec2()),
            (this.m_qA = new box2d.b2Rot()),
            (this.m_qB = new box2d.b2Rot()),
            (this.m_qC = new box2d.b2Rot()),
            (this.m_qD = new box2d.b2Rot()),
            (this.m_lalcA = new box2d.b2Vec2()),
            (this.m_lalcB = new box2d.b2Vec2()),
            (this.m_lalcC = new box2d.b2Vec2()),
            (this.m_lalcD = new box2d.b2Vec2()),
            (this.m_typeA = this.m_joint1.GetType()),
            (this.m_typeB = this.m_joint2.GetType()),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(this.m_typeA === box2d.b2JointType.e_revoluteJoint || this.m_typeA === box2d.b2JointType.e_prismaticJoint),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(this.m_typeB === box2d.b2JointType.e_revoluteJoint || this.m_typeB === box2d.b2JointType.e_prismaticJoint),
            (this.m_bodyC = this.m_joint1.GetBodyA()),
            (this.m_bodyA = this.m_joint1.GetBodyB());
        var d = this.m_bodyA.m_xf,
            e = this.m_bodyA.m_sweep.a,
            f = this.m_bodyC.m_xf,
            g = this.m_bodyC.m_sweep.a;
        if (this.m_typeA === box2d.b2JointType.e_revoluteJoint) {
            var h = a.joint1;
            this.m_localAnchorC.Copy(h.m_localAnchorA), this.m_localAnchorA.Copy(h.m_localAnchorB), (this.m_referenceAngleA = h.m_referenceAngle), this.m_localAxisC.SetZero(), (b = e - g - this.m_referenceAngleA);
        } else {
            var i = a.joint1;
            this.m_localAnchorC.Copy(i.m_localAnchorA), this.m_localAnchorA.Copy(i.m_localAnchorB), (this.m_referenceAngleA = i.m_referenceAngle), this.m_localAxisC.Copy(i.m_localXAxisA);
            var j = this.m_localAnchorC,
                k = box2d.b2MulTRV(f.q, box2d.b2AddVV(box2d.b2MulRV(d.q, this.m_localAnchorA, box2d.b2Vec2.s_t0), box2d.b2SubVV(d.p, f.p, box2d.b2Vec2.s_t1), box2d.b2Vec2.s_t0), box2d.b2Vec2.s_t0);
            b = box2d.b2DotVV(box2d.b2SubVV(k, j, box2d.b2Vec2.s_t0), this.m_localAxisC);
        }
        (this.m_bodyD = this.m_joint2.GetBodyA()), (this.m_bodyB = this.m_joint2.GetBodyB());
        var l = this.m_bodyB.m_xf,
            m = this.m_bodyB.m_sweep.a,
            n = this.m_bodyD.m_xf,
            o = this.m_bodyD.m_sweep.a;
        if (this.m_typeB === box2d.b2JointType.e_revoluteJoint) {
            h = a.joint2;
            this.m_localAnchorD.Copy(h.m_localAnchorA), this.m_localAnchorB.Copy(h.m_localAnchorB), (this.m_referenceAngleB = h.m_referenceAngle), this.m_localAxisD.SetZero(), (c = m - o - this.m_referenceAngleB);
        } else {
            i = a.joint2;
            this.m_localAnchorD.Copy(i.m_localAnchorA), this.m_localAnchorB.Copy(i.m_localAnchorB), (this.m_referenceAngleB = i.m_referenceAngle), this.m_localAxisD.Copy(i.m_localXAxisA);
            var p = this.m_localAnchorD,
                q = box2d.b2MulTRV(n.q, box2d.b2AddVV(box2d.b2MulRV(l.q, this.m_localAnchorB, box2d.b2Vec2.s_t0), box2d.b2SubVV(l.p, n.p, box2d.b2Vec2.s_t1), box2d.b2Vec2.s_t0), box2d.b2Vec2.s_t0);
            c = box2d.b2DotVV(box2d.b2SubVV(q, p, box2d.b2Vec2.s_t0), this.m_localAxisD);
        }
        (this.m_ratio = a.ratio), (this.m_constant = b + this.m_ratio * c), (this.m_impulse = 0);
    }),
    goog.inherits(box2d.b2GearJoint, box2d.b2Joint),
    (box2d.b2GearJoint.prototype.m_joint1 = null),
    (box2d.b2GearJoint.prototype.m_joint2 = null),
    (box2d.b2GearJoint.prototype.m_typeA = box2d.b2JointType.e_unknownJoint),
    (box2d.b2GearJoint.prototype.m_typeB = box2d.b2JointType.e_unknownJoint),
    (box2d.b2GearJoint.prototype.m_bodyC = null),
    (box2d.b2GearJoint.prototype.m_bodyD = null),
    (box2d.b2GearJoint.prototype.m_localAnchorA = null),
    (box2d.b2GearJoint.prototype.m_localAnchorB = null),
    (box2d.b2GearJoint.prototype.m_localAnchorC = null),
    (box2d.b2GearJoint.prototype.m_localAnchorD = null),
    (box2d.b2GearJoint.prototype.m_localAxisC = null),
    (box2d.b2GearJoint.prototype.m_localAxisD = null),
    (box2d.b2GearJoint.prototype.m_referenceAngleA = 0),
    (box2d.b2GearJoint.prototype.m_referenceAngleB = 0),
    (box2d.b2GearJoint.prototype.m_constant = 0),
    (box2d.b2GearJoint.prototype.m_ratio = 0),
    (box2d.b2GearJoint.prototype.m_impulse = 0),
    (box2d.b2GearJoint.prototype.m_indexA = 0),
    (box2d.b2GearJoint.prototype.m_indexB = 0),
    (box2d.b2GearJoint.prototype.m_indexC = 0),
    (box2d.b2GearJoint.prototype.m_indexD = 0),
    (box2d.b2GearJoint.prototype.m_lcA = null),
    (box2d.b2GearJoint.prototype.m_lcB = null),
    (box2d.b2GearJoint.prototype.m_lcC = null),
    (box2d.b2GearJoint.prototype.m_lcD = null),
    (box2d.b2GearJoint.prototype.m_mA = 0),
    (box2d.b2GearJoint.prototype.m_mB = 0),
    (box2d.b2GearJoint.prototype.m_mC = 0),
    (box2d.b2GearJoint.prototype.m_mD = 0),
    (box2d.b2GearJoint.prototype.m_iA = 0),
    (box2d.b2GearJoint.prototype.m_iB = 0),
    (box2d.b2GearJoint.prototype.m_iC = 0),
    (box2d.b2GearJoint.prototype.m_iD = 0),
    (box2d.b2GearJoint.prototype.m_JvAC = null),
    (box2d.b2GearJoint.prototype.m_JvBD = null),
    (box2d.b2GearJoint.prototype.m_JwA = 0),
    (box2d.b2GearJoint.prototype.m_JwB = 0),
    (box2d.b2GearJoint.prototype.m_JwC = 0),
    (box2d.b2GearJoint.prototype.m_JwD = 0),
    (box2d.b2GearJoint.prototype.m_mass = 0),
    (box2d.b2GearJoint.prototype.m_qA = null),
    (box2d.b2GearJoint.prototype.m_qB = null),
    (box2d.b2GearJoint.prototype.m_qC = null),
    (box2d.b2GearJoint.prototype.m_qD = null),
    (box2d.b2GearJoint.prototype.m_lalcA = null),
    (box2d.b2GearJoint.prototype.m_lalcB = null),
    (box2d.b2GearJoint.prototype.m_lalcC = null),
    (box2d.b2GearJoint.prototype.m_lalcD = null),
    (box2d.b2GearJoint.prototype.InitVelocityConstraints = function (a) {
        (this.m_indexA = this.m_bodyA.m_islandIndex),
            (this.m_indexB = this.m_bodyB.m_islandIndex),
            (this.m_indexC = this.m_bodyC.m_islandIndex),
            (this.m_indexD = this.m_bodyD.m_islandIndex),
            this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter),
            this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter),
            this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter),
            this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter),
            (this.m_mA = this.m_bodyA.m_invMass),
            (this.m_mB = this.m_bodyB.m_invMass),
            (this.m_mC = this.m_bodyC.m_invMass),
            (this.m_mD = this.m_bodyD.m_invMass),
            (this.m_iA = this.m_bodyA.m_invI),
            (this.m_iB = this.m_bodyB.m_invI),
            (this.m_iC = this.m_bodyC.m_invI),
            (this.m_iD = this.m_bodyD.m_invI);
        var b = a.positions[this.m_indexA].a,
            c = a.velocities[this.m_indexA].v,
            d = a.velocities[this.m_indexA].w,
            e = a.positions[this.m_indexB].a,
            f = a.velocities[this.m_indexB].v,
            g = a.velocities[this.m_indexB].w,
            h = a.positions[this.m_indexC].a,
            i = a.velocities[this.m_indexC].v,
            j = a.velocities[this.m_indexC].w,
            k = a.positions[this.m_indexD].a,
            l = a.velocities[this.m_indexD].v,
            m = a.velocities[this.m_indexD].w,
            n = this.m_qA.SetAngleRadians(b),
            o = this.m_qB.SetAngleRadians(e),
            p = this.m_qC.SetAngleRadians(h),
            q = this.m_qD.SetAngleRadians(k);
        if (((this.m_mass = 0), this.m_typeA === box2d.b2JointType.e_revoluteJoint)) this.m_JvAC.SetZero(), (this.m_JwA = 1), (this.m_JwC = 1), (this.m_mass += this.m_iA + this.m_iC);
        else {
            var r = box2d.b2MulRV(p, this.m_localAxisC, box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u);
            box2d.b2SubVV(this.m_localAnchorC, this.m_lcC, this.m_lalcC);
            var s = box2d.b2MulRV(p, this.m_lalcC, box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rC);
            box2d.b2SubVV(this.m_localAnchorA, this.m_lcA, this.m_lalcA);
            var t = box2d.b2MulRV(n, this.m_lalcA, box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rA);
            this.m_JvAC.Copy(r), (this.m_JwC = box2d.b2CrossVV(s, r)), (this.m_JwA = box2d.b2CrossVV(t, r)), (this.m_mass += this.m_mC + this.m_mA + this.m_iC * this.m_JwC * this.m_JwC + this.m_iA * this.m_JwA * this.m_JwA);
        }
        if (this.m_typeB === box2d.b2JointType.e_revoluteJoint) this.m_JvBD.SetZero(), (this.m_JwB = this.m_ratio), (this.m_JwD = this.m_ratio), (this.m_mass += this.m_ratio * this.m_ratio * (this.m_iB + this.m_iD));
        else {
            r = box2d.b2MulRV(q, this.m_localAxisD, box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u);
            box2d.b2SubVV(this.m_localAnchorD, this.m_lcD, this.m_lalcD);
            var u = box2d.b2MulRV(q, this.m_lalcD, box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rD);
            box2d.b2SubVV(this.m_localAnchorB, this.m_lcB, this.m_lalcB);
            var v = box2d.b2MulRV(o, this.m_lalcB, box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rB);
            box2d.b2MulSV(this.m_ratio, r, this.m_JvBD),
                (this.m_JwD = this.m_ratio * box2d.b2CrossVV(u, r)),
                (this.m_JwB = this.m_ratio * box2d.b2CrossVV(v, r)),
                (this.m_mass += this.m_ratio * this.m_ratio * (this.m_mD + this.m_mB) + this.m_iD * this.m_JwD * this.m_JwD + this.m_iB * this.m_JwB * this.m_JwB);
        }
        (this.m_mass = 0 < this.m_mass ? 1 / this.m_mass : 0),
            a.step.warmStarting
                ? (c.SelfMulAdd(this.m_mA * this.m_impulse, this.m_JvAC),
                  (d += this.m_iA * this.m_impulse * this.m_JwA),
                  f.SelfMulAdd(this.m_mB * this.m_impulse, this.m_JvBD),
                  (g += this.m_iB * this.m_impulse * this.m_JwB),
                  i.SelfMulSub(this.m_mC * this.m_impulse, this.m_JvAC),
                  (j -= this.m_iC * this.m_impulse * this.m_JwC),
                  l.SelfMulSub(this.m_mD * this.m_impulse, this.m_JvBD),
                  (m -= this.m_iD * this.m_impulse * this.m_JwD))
                : (this.m_impulse = 0),
            (a.velocities[this.m_indexA].w = d),
            (a.velocities[this.m_indexB].w = g),
            (a.velocities[this.m_indexC].w = j),
            (a.velocities[this.m_indexD].w = m);
    }),
    (box2d.b2GearJoint.prototype.InitVelocityConstraints.s_u = new box2d.b2Vec2()),
    (box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rA = new box2d.b2Vec2()),
    (box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rB = new box2d.b2Vec2()),
    (box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rC = new box2d.b2Vec2()),
    (box2d.b2GearJoint.prototype.InitVelocityConstraints.s_rD = new box2d.b2Vec2()),
    (box2d.b2GearJoint.prototype.SolveVelocityConstraints = function (a) {
        var b = a.velocities[this.m_indexA].v,
            c = a.velocities[this.m_indexA].w,
            d = a.velocities[this.m_indexB].v,
            e = a.velocities[this.m_indexB].w,
            f = a.velocities[this.m_indexC].v,
            g = a.velocities[this.m_indexC].w,
            h = a.velocities[this.m_indexD].v,
            i = a.velocities[this.m_indexD].w,
            j = box2d.b2DotVV(this.m_JvAC, box2d.b2SubVV(b, f, box2d.b2Vec2.s_t0)) + box2d.b2DotVV(this.m_JvBD, box2d.b2SubVV(d, h, box2d.b2Vec2.s_t0));
        j += this.m_JwA * c - this.m_JwC * g + (this.m_JwB * e - this.m_JwD * i);
        var k = -this.m_mass * j;
        (this.m_impulse += k),
            b.SelfMulAdd(this.m_mA * k, this.m_JvAC),
            (c += this.m_iA * k * this.m_JwA),
            d.SelfMulAdd(this.m_mB * k, this.m_JvBD),
            (e += this.m_iB * k * this.m_JwB),
            f.SelfMulSub(this.m_mC * k, this.m_JvAC),
            (g -= this.m_iC * k * this.m_JwC),
            h.SelfMulSub(this.m_mD * k, this.m_JvBD),
            (i -= this.m_iD * k * this.m_JwD),
            (a.velocities[this.m_indexA].w = c),
            (a.velocities[this.m_indexB].w = e),
            (a.velocities[this.m_indexC].w = g),
            (a.velocities[this.m_indexD].w = i);
    }),
    (box2d.b2GearJoint.prototype.SolvePositionConstraints = function (a) {
        var b,
            c,
            d,
            e,
            f,
            g,
            h = a.positions[this.m_indexA].c,
            i = a.positions[this.m_indexA].a,
            j = a.positions[this.m_indexB].c,
            k = a.positions[this.m_indexB].a,
            l = a.positions[this.m_indexC].c,
            m = a.positions[this.m_indexC].a,
            n = a.positions[this.m_indexD].c,
            o = a.positions[this.m_indexD].a,
            p = this.m_qA.SetAngleRadians(i),
            q = this.m_qB.SetAngleRadians(k),
            r = this.m_qC.SetAngleRadians(m),
            s = this.m_qD.SetAngleRadians(o),
            u = this.m_JvAC,
            v = this.m_JvBD,
            w = 0;
        if (this.m_typeA === box2d.b2JointType.e_revoluteJoint) u.SetZero(), (f = d = 1), (w += this.m_iA + this.m_iC), (b = i - m - this.m_referenceAngleA);
        else {
            var x = box2d.b2MulRV(r, this.m_localAxisC, box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u),
                y = box2d.b2MulRV(r, this.m_lalcC, box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rC),
                z = box2d.b2MulRV(p, this.m_lalcA, box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rA);
            u.Copy(x), (f = box2d.b2CrossVV(y, x)), (d = box2d.b2CrossVV(z, x)), (w += this.m_mC + this.m_mA + this.m_iC * f * f + this.m_iA * d * d);
            var A = this.m_lalcC,
                B = box2d.b2MulTRV(r, box2d.b2AddVV(z, box2d.b2SubVV(h, l, box2d.b2Vec2.s_t0), box2d.b2Vec2.s_t0), box2d.b2Vec2.s_t0);
            b = box2d.b2DotVV(box2d.b2SubVV(B, A, box2d.b2Vec2.s_t0), this.m_localAxisC);
        }
        if (this.m_typeB === box2d.b2JointType.e_revoluteJoint) v.SetZero(), (e = this.m_ratio), (g = this.m_ratio), (w += this.m_ratio * this.m_ratio * (this.m_iB + this.m_iD)), (c = k - o - this.m_referenceAngleB);
        else {
            x = box2d.b2MulRV(s, this.m_localAxisD, box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u);
            var C = box2d.b2MulRV(s, this.m_lalcD, box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rD),
                D = box2d.b2MulRV(q, this.m_lalcB, box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rB);
            box2d.b2MulSV(this.m_ratio, x, v), (g = this.m_ratio * box2d.b2CrossVV(C, x)), (e = this.m_ratio * box2d.b2CrossVV(D, x)), (w += this.m_ratio * this.m_ratio * (this.m_mD + this.m_mB) + this.m_iD * g * g + this.m_iB * e * e);
            var E = this.m_lalcD,
                F = box2d.b2MulTRV(s, box2d.b2AddVV(D, box2d.b2SubVV(j, n, box2d.b2Vec2.s_t0), box2d.b2Vec2.s_t0), box2d.b2Vec2.s_t0);
            c = box2d.b2DotVV(box2d.b2SubVV(F, E, box2d.b2Vec2.s_t0), this.m_localAxisD);
        }
        var G = b + this.m_ratio * c - this.m_constant,
            H = 0;
        return (
            0 < w && (H = -G / w),
            h.SelfMulAdd(this.m_mA * H, u),
            (i += this.m_iA * H * d),
            j.SelfMulAdd(this.m_mB * H, v),
            (k += this.m_iB * H * e),
            l.SelfMulSub(this.m_mC * H, u),
            (m -= this.m_iC * H * f),
            n.SelfMulSub(this.m_mD * H, v),
            (o -= this.m_iD * H * g),
            (a.positions[this.m_indexA].a = i),
            (a.positions[this.m_indexB].a = k),
            (a.positions[this.m_indexC].a = m),
            (a.positions[this.m_indexD].a = o),
            0 < box2d.b2_linearSlop
        );
    }),
    (box2d.b2GearJoint.prototype.SolvePositionConstraints.s_u = new box2d.b2Vec2()),
    (box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rA = new box2d.b2Vec2()),
    (box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rB = new box2d.b2Vec2()),
    (box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rC = new box2d.b2Vec2()),
    (box2d.b2GearJoint.prototype.SolvePositionConstraints.s_rD = new box2d.b2Vec2()),
    (box2d.b2GearJoint.prototype.GetAnchorA = function (a) {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, a);
    }),
    (box2d.b2GearJoint.prototype.GetAnchorB = function (a) {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, a);
    }),
    (box2d.b2GearJoint.prototype.GetReactionForce = function (a, b) {
        return box2d.b2MulSV(a * this.m_impulse, this.m_JvAC, b);
    }),
    (box2d.b2GearJoint.prototype.GetReactionTorque = function (a) {
        return a * this.m_impulse * this.m_JwA;
    }),
    (box2d.b2GearJoint.prototype.GetJoint1 = function () {
        return this.m_joint1;
    }),
    (box2d.b2GearJoint.prototype.GetJoint2 = function () {
        return this.m_joint2;
    }),
    (box2d.b2GearJoint.prototype.GetRatio = function () {
        return this.m_ratio;
    }),
    (box2d.b2GearJoint.prototype.SetRatio = function (a) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(box2d.b2IsValid(a)), (this.m_ratio = a);
    }),
    (box2d.b2GearJoint.prototype.Dump = function () {
        if (box2d.DEBUG) {
            var a = this.m_bodyA.m_islandIndex,
                b = this.m_bodyB.m_islandIndex,
                c = this.m_joint1.m_index,
                d = this.m_joint2.m_index;
            box2d.b2Log("  /*box2d.b2GearJointDef*/ var jd = new box2d.b2GearJointDef();\n"),
                box2d.b2Log("  jd.bodyA = bodies[%d];\n", a),
                box2d.b2Log("  jd.bodyB = bodies[%d];\n", b),
                box2d.b2Log("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"),
                box2d.b2Log("  jd.joint1 = joints[%d];\n", c),
                box2d.b2Log("  jd.joint2 = joints[%d];\n", d),
                box2d.b2Log("  jd.ratio = %.15f;\n", this.m_ratio),
                box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
        }
    }),
    goog.provide("box2d.b2Distance"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Math"),
    (box2d.b2DistanceProxy = function () {
        this.m_buffer = box2d.b2Vec2.MakeArray(2);
    }),
    (box2d.b2DistanceProxy.prototype.m_buffer = null),
    (box2d.b2DistanceProxy.prototype.m_vertices = null),
    (box2d.b2DistanceProxy.prototype.m_count = 0),
    (box2d.b2DistanceProxy.prototype.m_radius = 0),
    (box2d.b2DistanceProxy.prototype.Reset = function () {
        return (this.m_vertices = null), (this.m_count = 0), (this.m_radius = 0), this;
    }),
    (box2d.b2DistanceProxy.prototype.SetShape = function (a, b) {
        a.SetupDistanceProxy(this, b);
    }),
    (box2d.b2DistanceProxy.prototype.GetSupport = function (a) {
        for (var b = 0, c = box2d.b2DotVV(this.m_vertices[0], a), d = 1; d < this.m_count; ++d) {
            var e = box2d.b2DotVV(this.m_vertices[d], a);
            c < e && ((b = d), (c = e));
        }
        return b;
    }),
    (box2d.b2DistanceProxy.prototype.GetSupportVertex = function (a, b) {
        for (var c = 0, d = box2d.b2DotVV(this.m_vertices[0], a), e = 1; e < this.m_count; ++e) {
            var f = box2d.b2DotVV(this.m_vertices[e], a);
            d < f && ((c = e), (d = f));
        }
        return b.Copy(this.m_vertices[c]);
    }),
    (box2d.b2DistanceProxy.prototype.GetVertexCount = function () {
        return this.m_count;
    }),
    (box2d.b2DistanceProxy.prototype.GetVertex = function (a) {
        return box2d.ENABLE_ASSERTS && box2d.b2Assert(0 <= a && a < this.m_count), this.m_vertices[a];
    }),
    (box2d.b2SimplexCache = function () {
        (this.indexA = box2d.b2MakeNumberArray(3)), (this.indexB = box2d.b2MakeNumberArray(3));
    }),
    (box2d.b2SimplexCache.prototype.metric = 0),
    (box2d.b2SimplexCache.prototype.count = 0),
    (box2d.b2SimplexCache.prototype.indexA = null),
    (box2d.b2SimplexCache.prototype.indexB = null),
    (box2d.b2SimplexCache.prototype.Reset = function () {
        return (this.metric = 0), (this.count = 0), this;
    }),
    (box2d.b2DistanceInput = function () {
        (this.proxyA = new box2d.b2DistanceProxy()), (this.proxyB = new box2d.b2DistanceProxy()), (this.transformA = new box2d.b2Transform()), (this.transformB = new box2d.b2Transform());
    }),
    (box2d.b2DistanceInput.prototype.proxyA = null),
    (box2d.b2DistanceInput.prototype.proxyB = null),
    (box2d.b2DistanceInput.prototype.transformA = null),
    (box2d.b2DistanceInput.prototype.transformB = null),
    (box2d.b2DistanceInput.prototype.useRadii = !1),
    (box2d.b2DistanceInput.prototype.Reset = function () {
        return this.proxyA.Reset(), this.proxyB.Reset(), this.transformA.SetIdentity(), this.transformB.SetIdentity(), (this.useRadii = !1), this;
    }),
    (box2d.b2DistanceOutput = function () {
        (this.pointA = new box2d.b2Vec2()), (this.pointB = new box2d.b2Vec2());
    }),
    (box2d.b2DistanceOutput.prototype.pointA = null),
    (box2d.b2DistanceOutput.prototype.pointB = null),
    (box2d.b2DistanceOutput.prototype.distance = 0),
    (box2d.b2DistanceOutput.prototype.iterations = 0),
    (box2d.b2DistanceOutput.prototype.Reset = function () {
        return this.pointA.SetZero(), this.pointB.SetZero(), (this.distance = 0), (this.iterations = 0), this;
    }),
    (box2d.b2_gjkCalls = 0),
    (box2d.b2_gjkIters = 0),
    (box2d.b2_gjkMaxIters = 0),
    (box2d.b2SimplexVertex = function () {
        (this.wA = new box2d.b2Vec2()), (this.wB = new box2d.b2Vec2()), (this.w = new box2d.b2Vec2());
    }),
    (box2d.b2SimplexVertex.prototype.wA = null),
    (box2d.b2SimplexVertex.prototype.wB = null),
    (box2d.b2SimplexVertex.prototype.w = null),
    (box2d.b2SimplexVertex.prototype.a = 0),
    (box2d.b2SimplexVertex.prototype.indexA = 0),
    (box2d.b2SimplexVertex.prototype.indexB = 0),
    (box2d.b2SimplexVertex.prototype.Copy = function (a) {
        return this.wA.Copy(a.wA), this.wB.Copy(a.wB), this.w.Copy(a.w), (this.a = a.a), (this.indexA = a.indexA), (this.indexB = a.indexB), this;
    }),
    (box2d.b2Simplex = function () {
        (this.m_v1 = new box2d.b2SimplexVertex()),
            (this.m_v2 = new box2d.b2SimplexVertex()),
            (this.m_v3 = new box2d.b2SimplexVertex()),
            (this.m_vertices = new Array(3)),
            (this.m_vertices[0] = this.m_v1),
            (this.m_vertices[1] = this.m_v2),
            (this.m_vertices[2] = this.m_v3);
    }),
    (box2d.b2Simplex.prototype.m_v1 = null),
    (box2d.b2Simplex.prototype.m_v2 = null),
    (box2d.b2Simplex.prototype.m_v3 = null),
    (box2d.b2Simplex.prototype.m_vertices = null),
    (box2d.b2Simplex.prototype.m_count = 0),
    (box2d.b2Simplex.prototype.ReadCache = function (a, b, c, d, e) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(0 <= a.count && a.count <= 3), (this.m_count = a.count);
        for (var f = this.m_vertices, g = 0; g < this.m_count; ++g) {
            ((h = f[g]).indexA = a.indexA[g]), (h.indexB = a.indexB[g]);
            var i = b.GetVertex(h.indexA),
                j = d.GetVertex(h.indexB);
            box2d.b2MulXV(c, i, h.wA), box2d.b2MulXV(e, j, h.wB), box2d.b2SubVV(h.wB, h.wA, h.w), (h.a = 0);
        }
        if (1 < this.m_count) {
            var k = a.metric,
                l = this.GetMetric();
            (l < 0.5 * k || 2 * k < l || l < box2d.b2_epsilon) && (this.m_count = 0);
        }
        if (0 === this.m_count) {
            var h;
            ((h = f[0]).indexA = 0), (h.indexB = 0);
            (i = b.GetVertex(0)), (j = d.GetVertex(0));
            box2d.b2MulXV(c, i, h.wA), box2d.b2MulXV(e, j, h.wB), box2d.b2SubVV(h.wB, h.wA, h.w), (h.a = 1), (this.m_count = 1);
        }
    }),
    (box2d.b2Simplex.prototype.WriteCache = function (a) {
        (a.metric = this.GetMetric()), (a.count = this.m_count);
        for (var b = this.m_vertices, c = 0; c < this.m_count; ++c) (a.indexA[c] = b[c].indexA), (a.indexB[c] = b[c].indexB);
    }),
    (box2d.b2Simplex.prototype.GetSearchDirection = function (a) {
        switch (this.m_count) {
            case 1:
                return box2d.b2NegV(this.m_v1.w, a);
            case 2:
                var b = box2d.b2SubVV(this.m_v2.w, this.m_v1.w, a);
                return 0 < box2d.b2CrossVV(b, box2d.b2NegV(this.m_v1.w, box2d.b2Vec2.s_t0)) ? box2d.b2CrossOneV(b, a) : box2d.b2CrossVOne(b, a);
            default:
                return box2d.ENABLE_ASSERTS && box2d.b2Assert(!1), a.SetZero();
        }
    }),
    (box2d.b2Simplex.prototype.GetClosestPoint = function (a) {
        switch (this.m_count) {
            case 0:
                return box2d.ENABLE_ASSERTS && box2d.b2Assert(!1), a.SetZero();
            case 1:
                return a.Copy(this.m_v1.w);
            case 2:
                return a.SetXY(this.m_v1.a * this.m_v1.w.x + this.m_v2.a * this.m_v2.w.x, this.m_v1.a * this.m_v1.w.y + this.m_v2.a * this.m_v2.w.y);
            case 3:
                return a.SetZero();
            default:
                return box2d.ENABLE_ASSERTS && box2d.b2Assert(!1), a.SetZero();
        }
    }),
    (box2d.b2Simplex.prototype.GetWitnessPoints = function (a, b) {
        switch (this.m_count) {
            case 0:
                box2d.ENABLE_ASSERTS && box2d.b2Assert(!1);
                break;
            case 1:
                a.Copy(this.m_v1.wA), b.Copy(this.m_v1.wB);
                break;
            case 2:
                (a.x = this.m_v1.a * this.m_v1.wA.x + this.m_v2.a * this.m_v2.wA.x),
                    (a.y = this.m_v1.a * this.m_v1.wA.y + this.m_v2.a * this.m_v2.wA.y),
                    (b.x = this.m_v1.a * this.m_v1.wB.x + this.m_v2.a * this.m_v2.wB.x),
                    (b.y = this.m_v1.a * this.m_v1.wB.y + this.m_v2.a * this.m_v2.wB.y);
                break;
            case 3:
                (b.x = a.x = this.m_v1.a * this.m_v1.wA.x + this.m_v2.a * this.m_v2.wA.x + this.m_v3.a * this.m_v3.wA.x), (b.y = a.y = this.m_v1.a * this.m_v1.wA.y + this.m_v2.a * this.m_v2.wA.y + this.m_v3.a * this.m_v3.wA.y);
                break;
            default:
                box2d.ENABLE_ASSERTS && box2d.b2Assert(!1);
        }
    }),
    (box2d.b2Simplex.prototype.GetMetric = function () {
        switch (this.m_count) {
            case 0:
                return box2d.ENABLE_ASSERTS && box2d.b2Assert(!1), 0;
            case 1:
                return 0;
            case 2:
                return box2d.b2DistanceVV(this.m_v1.w, this.m_v2.w);
            case 3:
                return box2d.b2CrossVV(box2d.b2SubVV(this.m_v2.w, this.m_v1.w, box2d.b2Vec2.s_t0), box2d.b2SubVV(this.m_v3.w, this.m_v1.w, box2d.b2Vec2.s_t1));
            default:
                return box2d.ENABLE_ASSERTS && box2d.b2Assert(!1), 0;
        }
    }),
    (box2d.b2Simplex.prototype.Solve2 = function () {
        var a = this.m_v1.w,
            b = this.m_v2.w,
            c = box2d.b2SubVV(b, a, box2d.b2Simplex.s_e12),
            d = -box2d.b2DotVV(a, c);
        if (d <= 0) return (this.m_v1.a = 1), void (this.m_count = 1);
        var e = box2d.b2DotVV(b, c);
        if (e <= 0) return (this.m_v2.a = 1), (this.m_count = 1), void this.m_v1.Copy(this.m_v2);
        var f = 1 / (e + d);
        (this.m_v1.a = e * f), (this.m_v2.a = d * f), (this.m_count = 2);
    }),
    (box2d.b2Simplex.prototype.Solve3 = function () {
        var a = this.m_v1.w,
            b = this.m_v2.w,
            c = this.m_v3.w,
            d = box2d.b2SubVV(b, a, box2d.b2Simplex.s_e12),
            e = box2d.b2DotVV(a, d),
            g = box2d.b2DotVV(b, d),
            h = -e,
            i = box2d.b2SubVV(c, a, box2d.b2Simplex.s_e13),
            j = box2d.b2DotVV(a, i),
            l = box2d.b2DotVV(c, i),
            m = -j,
            n = box2d.b2SubVV(c, b, box2d.b2Simplex.s_e23),
            o = box2d.b2DotVV(b, n),
            q = box2d.b2DotVV(c, n),
            r = -o,
            s = box2d.b2CrossVV(d, i),
            t = s * box2d.b2CrossVV(b, c),
            u = s * box2d.b2CrossVV(c, a),
            v = s * box2d.b2CrossVV(a, b);
        if (h <= 0 && m <= 0) return (this.m_v1.a = 1), void (this.m_count = 1);
        if (0 < g && 0 < h && v <= 0) {
            var w = 1 / (g + h);
            return (this.m_v1.a = g * w), (this.m_v2.a = h * w), void (this.m_count = 2);
        }
        if (0 < l && 0 < m && u <= 0) {
            var x = 1 / (l + m);
            return (this.m_v1.a = l * x), (this.m_v3.a = m * x), (this.m_count = 2), void this.m_v2.Copy(this.m_v3);
        }
        if (g <= 0 && r <= 0) return (this.m_v2.a = 1), (this.m_count = 1), void this.m_v1.Copy(this.m_v2);
        if (l <= 0 && q <= 0) return (this.m_v3.a = 1), (this.m_count = 1), void this.m_v1.Copy(this.m_v3);
        if (0 < q && 0 < r && t <= 0) {
            var y = 1 / (q + r);
            return (this.m_v2.a = q * y), (this.m_v3.a = r * y), (this.m_count = 2), void this.m_v1.Copy(this.m_v3);
        }
        var z = 1 / (t + u + v);
        (this.m_v1.a = t * z), (this.m_v2.a = u * z), (this.m_v3.a = v * z), (this.m_count = 3);
    }),
    (box2d.b2Simplex.s_e12 = new box2d.b2Vec2()),
    (box2d.b2Simplex.s_e13 = new box2d.b2Vec2()),
    (box2d.b2Simplex.s_e23 = new box2d.b2Vec2()),
    (box2d.b2Distance = function (a, b, c) {
        ++box2d.b2_gjkCalls;
        var d = c.proxyA,
            e = c.proxyB,
            f = c.transformA,
            g = c.transformB,
            h = box2d.b2Distance.s_simplex;
        h.ReadCache(b, d, f, e, g);
        for (var i = h.m_vertices, k = box2d.b2Distance.s_saveA, l = box2d.b2Distance.s_saveB, m = 0, p = (box2d.b2_maxFloat, 0); p < 20; ) {
            m = h.m_count;
            for (var q = 0; q < m; ++q) (k[q] = i[q].indexA), (l[q] = i[q].indexB);
            switch (h.m_count) {
                case 1:
                    break;
                case 2:
                    h.Solve2();
                    break;
                case 3:
                    h.Solve3();
                    break;
                default:
                    box2d.ENABLE_ASSERTS && box2d.b2Assert(!1);
            }
            if (3 === h.m_count) break;
            (r = h.GetClosestPoint(box2d.b2Distance.s_p)).GetLengthSquared();
            var s = h.GetSearchDirection(box2d.b2Distance.s_d);
            if (s.GetLengthSquared() < box2d.b2_epsilon_sq) break;
            var t = i[h.m_count];
            (t.indexA = d.GetSupport(box2d.b2MulTRV(f.q, box2d.b2NegV(s, box2d.b2Vec2.s_t0), box2d.b2Distance.s_supportA))),
                box2d.b2MulXV(f, d.GetVertex(t.indexA), t.wA),
                (t.indexB = e.GetSupport(box2d.b2MulTRV(g.q, s, box2d.b2Distance.s_supportB))),
                box2d.b2MulXV(g, e.GetVertex(t.indexB), t.wB),
                box2d.b2SubVV(t.wB, t.wA, t.w),
                ++p,
                ++box2d.b2_gjkIters;
            var u = !1;
            for (q = 0; q < m; ++q)
                if (t.indexA === k[q] && t.indexB === l[q]) {
                    u = !0;
                    break;
                }
            if (u) break;
            ++h.m_count;
        }
        if (((box2d.b2_gjkMaxIters = box2d.b2Max(box2d.b2_gjkMaxIters, p)), h.GetWitnessPoints(a.pointA, a.pointB), (a.distance = box2d.b2DistanceVV(a.pointA, a.pointB)), (a.iterations = p), h.WriteCache(b), c.useRadii)) {
            var v = d.m_radius,
                w = e.m_radius;
            if (a.distance > v + w && a.distance > box2d.b2_epsilon) {
                a.distance -= v + w;
                var x = box2d.b2SubVV(a.pointB, a.pointA, box2d.b2Distance.s_normal);
                x.Normalize(), a.pointA.SelfMulAdd(v, x), a.pointB.SelfMulSub(w, x);
            } else {
                var r = box2d.b2MidVV(a.pointA, a.pointB, box2d.b2Distance.s_p);
                a.pointA.Copy(r), a.pointB.Copy(r), (a.distance = 0);
            }
        }
    }),
    (box2d.b2Distance.s_simplex = new box2d.b2Simplex()),
    (box2d.b2Distance.s_saveA = box2d.b2MakeNumberArray(3)),
    (box2d.b2Distance.s_saveB = box2d.b2MakeNumberArray(3)),
    (box2d.b2Distance.s_p = new box2d.b2Vec2()),
    (box2d.b2Distance.s_d = new box2d.b2Vec2()),
    (box2d.b2Distance.s_normal = new box2d.b2Vec2()),
    (box2d.b2Distance.s_supportA = new box2d.b2Vec2()),
    (box2d.b2Distance.s_supportB = new box2d.b2Vec2()),
    goog.provide("box2d.b2WeldJoint"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Joint"),
    goog.require("box2d.b2Math"),
    (box2d.b2WeldJointDef = function () {
        goog.base(this, box2d.b2JointType.e_weldJoint), (this.localAnchorA = new box2d.b2Vec2()), (this.localAnchorB = new box2d.b2Vec2());
    }),
    goog.inherits(box2d.b2WeldJointDef, box2d.b2JointDef),
    (box2d.b2WeldJointDef.prototype.localAnchorA = null),
    (box2d.b2WeldJointDef.prototype.localAnchorB = null),
    (box2d.b2WeldJointDef.prototype.referenceAngle = 0),
    (box2d.b2WeldJointDef.prototype.frequencyHz = 0),
    (box2d.b2WeldJointDef.prototype.dampingRatio = 0),
    (box2d.b2WeldJointDef.prototype.Initialize = function (a, b, c) {
        (this.bodyA = a), (this.bodyB = b), this.bodyA.GetLocalPoint(c, this.localAnchorA), this.bodyB.GetLocalPoint(c, this.localAnchorB), (this.referenceAngle = this.bodyB.GetAngleRadians() - this.bodyA.GetAngleRadians());
    }),
    (box2d.b2WeldJoint = function (a) {
        goog.base(this, a),
            (this.m_frequencyHz = a.frequencyHz),
            (this.m_dampingRatio = a.dampingRatio),
            (this.m_localAnchorA = a.localAnchorA.Clone()),
            (this.m_localAnchorB = a.localAnchorB.Clone()),
            (this.m_referenceAngle = a.referenceAngle),
            (this.m_impulse = new box2d.b2Vec3(0, 0, 0)),
            (this.m_rA = new box2d.b2Vec2()),
            (this.m_rB = new box2d.b2Vec2()),
            (this.m_localCenterA = new box2d.b2Vec2()),
            (this.m_localCenterB = new box2d.b2Vec2()),
            (this.m_mass = new box2d.b2Mat33()),
            (this.m_qA = new box2d.b2Rot()),
            (this.m_qB = new box2d.b2Rot()),
            (this.m_lalcA = new box2d.b2Vec2()),
            (this.m_lalcB = new box2d.b2Vec2()),
            (this.m_K = new box2d.b2Mat33());
    }),
    goog.inherits(box2d.b2WeldJoint, box2d.b2Joint),
    (box2d.b2WeldJoint.prototype.m_frequencyHz = 0),
    (box2d.b2WeldJoint.prototype.m_dampingRatio = 0),
    (box2d.b2WeldJoint.prototype.m_bias = 0),
    (box2d.b2WeldJoint.prototype.m_localAnchorA = null),
    (box2d.b2WeldJoint.prototype.m_localAnchorB = null),
    (box2d.b2WeldJoint.prototype.m_referenceAngle = 0),
    (box2d.b2WeldJoint.prototype.m_gamma = 0),
    (box2d.b2WeldJoint.prototype.m_impulse = null),
    (box2d.b2WeldJoint.prototype.m_indexA = 0),
    (box2d.b2WeldJoint.prototype.m_indexB = 0),
    (box2d.b2WeldJoint.prototype.m_rA = null),
    (box2d.b2WeldJoint.prototype.m_rB = null),
    (box2d.b2WeldJoint.prototype.m_localCenterA = null),
    (box2d.b2WeldJoint.prototype.m_localCenterB = null),
    (box2d.b2WeldJoint.prototype.m_invMassA = 0),
    (box2d.b2WeldJoint.prototype.m_invMassB = 0),
    (box2d.b2WeldJoint.prototype.m_invIA = 0),
    (box2d.b2WeldJoint.prototype.m_invIB = 0),
    (box2d.b2WeldJoint.prototype.m_mass = null),
    (box2d.b2WeldJoint.prototype.m_qA = null),
    (box2d.b2WeldJoint.prototype.m_qB = null),
    (box2d.b2WeldJoint.prototype.m_lalcA = null),
    (box2d.b2WeldJoint.prototype.m_lalcB = null),
    (box2d.b2WeldJoint.prototype.m_K = null),
    (box2d.b2WeldJoint.prototype.InitVelocityConstraints = function (a) {
        (this.m_indexA = this.m_bodyA.m_islandIndex),
            (this.m_indexB = this.m_bodyB.m_islandIndex),
            this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),
            this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),
            (this.m_invMassA = this.m_bodyA.m_invMass),
            (this.m_invMassB = this.m_bodyB.m_invMass),
            (this.m_invIA = this.m_bodyA.m_invI),
            (this.m_invIB = this.m_bodyB.m_invI);
        var b = a.positions[this.m_indexA].a,
            c = a.velocities[this.m_indexA].v,
            d = a.velocities[this.m_indexA].w,
            e = a.positions[this.m_indexB].a,
            f = a.velocities[this.m_indexB].v,
            g = a.velocities[this.m_indexB].w,
            h = this.m_qA.SetAngleRadians(b),
            i = this.m_qB.SetAngleRadians(e);
        box2d.b2SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA), box2d.b2MulRV(h, this.m_lalcA, this.m_rA), box2d.b2SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB), box2d.b2MulRV(i, this.m_lalcB, this.m_rB);
        var j = this.m_invMassA,
            k = this.m_invMassB,
            l = this.m_invIA,
            m = this.m_invIB,
            n = this.m_K;
        if (
            ((n.ex.x = j + k + this.m_rA.y * this.m_rA.y * l + this.m_rB.y * this.m_rB.y * m),
            (n.ey.x = -this.m_rA.y * this.m_rA.x * l - this.m_rB.y * this.m_rB.x * m),
            (n.ez.x = -this.m_rA.y * l - this.m_rB.y * m),
            (n.ex.y = n.ey.x),
            (n.ey.y = j + k + this.m_rA.x * this.m_rA.x * l + this.m_rB.x * this.m_rB.x * m),
            (n.ez.y = this.m_rA.x * l + this.m_rB.x * m),
            (n.ex.z = n.ez.x),
            (n.ey.z = n.ez.y),
            (n.ez.z = l + m),
            0 < this.m_frequencyHz)
        ) {
            n.GetInverse22(this.m_mass);
            var o = l + m,
                p = 0 < o ? 1 / o : 0,
                q = e - b - this.m_referenceAngle,
                r = 2 * box2d.b2_pi * this.m_frequencyHz,
                s = 2 * p * this.m_dampingRatio * r,
                t = p * r * r,
                u = a.step.dt;
            (this.m_gamma = u * (s + u * t)), (this.m_gamma = 0 !== this.m_gamma ? 1 / this.m_gamma : 0), (this.m_bias = q * u * t * this.m_gamma), (o += this.m_gamma), (this.m_mass.ez.z = 0 !== o ? 1 / o : 0);
        } else n.GetSymInverse33(this.m_mass), (this.m_gamma = 0), (this.m_bias = 0);
        if (a.step.warmStarting) {
            this.m_impulse.SelfMul(a.step.dtRatio);
            var v = box2d.b2WeldJoint.prototype.InitVelocityConstraints.s_P.SetXY(this.m_impulse.x, this.m_impulse.y);
            c.SelfMulSub(j, v), (d -= l * (box2d.b2CrossVV(this.m_rA, v) + this.m_impulse.z)), f.SelfMulAdd(k, v), (g += m * (box2d.b2CrossVV(this.m_rB, v) + this.m_impulse.z));
        } else this.m_impulse.SetZero();
        (a.velocities[this.m_indexA].w = d), (a.velocities[this.m_indexB].w = g);
    }),
    (box2d.b2WeldJoint.prototype.InitVelocityConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2WeldJoint.prototype.SolveVelocityConstraints = function (a) {
        var b = a.velocities[this.m_indexA].v,
            c = a.velocities[this.m_indexA].w,
            d = a.velocities[this.m_indexB].v,
            e = a.velocities[this.m_indexB].w,
            f = this.m_invMassA,
            g = this.m_invMassB,
            h = this.m_invIA,
            i = this.m_invIB;
        if (0 < this.m_frequencyHz) {
            var j = e - c,
                k = -this.m_mass.ez.z * (j + this.m_bias + this.m_gamma * this.m_impulse.z);
            (this.m_impulse.z += k), (c -= h * k), (e += i * k);
            var l = box2d.b2SubVV(box2d.b2AddVCrossSV(d, e, this.m_rB, box2d.b2Vec2.s_t0), box2d.b2AddVCrossSV(b, c, this.m_rA, box2d.b2Vec2.s_t1), box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1),
                m = box2d.b2MulM33XY(this.m_mass, l.x, l.y, box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse1).SelfNeg();
            (this.m_impulse.x += m.x), (this.m_impulse.y += m.y);
            var n = m;
            b.SelfMulSub(f, n), (c -= h * box2d.b2CrossVV(this.m_rA, n)), d.SelfMulAdd(g, n), (e += i * box2d.b2CrossVV(this.m_rB, n));
        } else {
            (l = box2d.b2SubVV(box2d.b2AddVCrossSV(d, e, this.m_rB, box2d.b2Vec2.s_t0), box2d.b2AddVCrossSV(b, c, this.m_rA, box2d.b2Vec2.s_t1), box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1)), (j = e - c);
            var o = box2d.b2MulM33XYZ(this.m_mass, l.x, l.y, j, box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse).SelfNeg();
            this.m_impulse.SelfAdd(o);
            n = box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_P.SetXY(o.x, o.y);
            b.SelfMulSub(f, n), (c -= h * (box2d.b2CrossVV(this.m_rA, n) + o.z)), d.SelfMulAdd(g, n), (e += i * (box2d.b2CrossVV(this.m_rB, n) + o.z));
        }
        (a.velocities[this.m_indexA].w = c), (a.velocities[this.m_indexB].w = e);
    }),
    (box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_Cdot1 = new box2d.b2Vec2()),
    (box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse1 = new box2d.b2Vec2()),
    (box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_impulse = new box2d.b2Vec3()),
    (box2d.b2WeldJoint.prototype.SolveVelocityConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2WeldJoint.prototype.SolvePositionConstraints = function (a) {
        var b = a.positions[this.m_indexA].c,
            c = a.positions[this.m_indexA].a,
            d = a.positions[this.m_indexB].c,
            e = a.positions[this.m_indexB].a,
            f = this.m_qA.SetAngleRadians(c),
            g = this.m_qB.SetAngleRadians(e),
            h = this.m_invMassA,
            i = this.m_invMassB,
            j = this.m_invIA,
            k = this.m_invIB;
        box2d.b2SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
        var l = box2d.b2MulRV(f, this.m_lalcA, this.m_rA);
        box2d.b2SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
        var m,
            n,
            o = box2d.b2MulRV(g, this.m_lalcB, this.m_rB),
            p = this.m_K;
        if (
            ((p.ex.x = h + i + l.y * l.y * j + o.y * o.y * k),
            (p.ey.x = -l.y * l.x * j - o.y * o.x * k),
            (p.ez.x = -l.y * j - o.y * k),
            (p.ex.y = p.ey.x),
            (p.ey.y = h + i + l.x * l.x * j + o.x * o.x * k),
            (p.ez.y = l.x * j + o.x * k),
            (p.ex.z = p.ez.x),
            (p.ey.z = p.ez.y),
            (p.ez.z = j + k),
            0 < this.m_frequencyHz)
        ) {
            (m = (q = box2d.b2SubVV(box2d.b2AddVV(d, o, box2d.b2Vec2.s_t0), box2d.b2AddVV(b, l, box2d.b2Vec2.s_t1), box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1)).GetLength()), (n = 0);
            var r = p.Solve22(q.x, q.y, box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P).SelfNeg();
            b.SelfMulSub(h, r), (c -= j * box2d.b2CrossVV(l, r)), d.SelfMulAdd(i, r), (e += k * box2d.b2CrossVV(o, r));
        } else {
            var q = box2d.b2SubVV(box2d.b2AddVV(d, o, box2d.b2Vec2.s_t0), box2d.b2AddVV(b, l, box2d.b2Vec2.s_t1), box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1),
                s = e - c - this.m_referenceAngle;
            (m = q.GetLength()), (n = box2d.b2Abs(s));
            var t = p.Solve33(q.x, q.y, s, box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_impulse).SelfNeg();
            r = box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P.SetXY(t.x, t.y);
            b.SelfMulSub(h, r), (c -= j * (box2d.b2CrossVV(this.m_rA, r) + t.z)), d.SelfMulAdd(i, r), (e += k * (box2d.b2CrossVV(this.m_rB, r) + t.z));
        }
        return (a.positions[this.m_indexA].a = c), (a.positions[this.m_indexB].a = e), m <= box2d.b2_linearSlop && n <= box2d.b2_angularSlop;
    }),
    (box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_C1 = new box2d.b2Vec2()),
    (box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2WeldJoint.prototype.SolvePositionConstraints.s_impulse = new box2d.b2Vec3()),
    (box2d.b2WeldJoint.prototype.GetAnchorA = function (a) {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, a);
    }),
    (box2d.b2WeldJoint.prototype.GetAnchorB = function (a) {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, a);
    }),
    (box2d.b2WeldJoint.prototype.GetReactionForce = function (a, b) {
        return b.SetXY(a * this.m_impulse.x, a * this.m_impulse.y);
    }),
    (box2d.b2WeldJoint.prototype.GetReactionTorque = function (a) {
        return a * this.m_impulse.z;
    }),
    (box2d.b2WeldJoint.prototype.GetLocalAnchorA = function (a) {
        return a.Copy(this.m_localAnchorA);
    }),
    (box2d.b2WeldJoint.prototype.GetLocalAnchorB = function (a) {
        return a.Copy(this.m_localAnchorB);
    }),
    (box2d.b2WeldJoint.prototype.GetReferenceAngle = function () {
        return this.m_referenceAngle;
    }),
    (box2d.b2WeldJoint.prototype.SetFrequency = function (a) {
        this.m_frequencyHz = a;
    }),
    (box2d.b2WeldJoint.prototype.GetFrequency = function () {
        return this.m_frequencyHz;
    }),
    (box2d.b2WeldJoint.prototype.SetDampingRatio = function (a) {
        this.m_dampingRatio = a;
    }),
    (box2d.b2WeldJoint.prototype.GetDampingRatio = function () {
        return this.m_dampingRatio;
    }),
    (box2d.b2WeldJoint.prototype.Dump = function () {
        if (box2d.DEBUG) {
            var a = this.m_bodyA.m_islandIndex,
                b = this.m_bodyB.m_islandIndex;
            box2d.b2Log("  /*box2d.b2WeldJointDef*/ var jd = new box2d.b2WeldJointDef();\n"),
                box2d.b2Log("  jd.bodyA = bodies[%d];\n", a),
                box2d.b2Log("  jd.bodyB = bodies[%d];\n", b),
                box2d.b2Log("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"),
                box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n", this.m_localAnchorA.x, this.m_localAnchorA.y),
                box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n", this.m_localAnchorB.x, this.m_localAnchorB.y),
                box2d.b2Log("  jd.referenceAngle = %.15f;\n", this.m_referenceAngle),
                box2d.b2Log("  jd.frequencyHz = %.15f;\n", this.m_frequencyHz),
                box2d.b2Log("  jd.dampingRatio = %.15f;\n", this.m_dampingRatio),
                box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
        }
    }),
    goog.provide("box2d.b2RopeJoint"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Joint"),
    goog.require("box2d.b2Math"),
    (box2d.b2RopeJointDef = function () {
        goog.base(this, box2d.b2JointType.e_ropeJoint), (this.localAnchorA = new box2d.b2Vec2(-1, 0)), (this.localAnchorB = new box2d.b2Vec2(1, 0));
    }),
    goog.inherits(box2d.b2RopeJointDef, box2d.b2JointDef),
    (box2d.b2RopeJointDef.prototype.localAnchorA = null),
    (box2d.b2RopeJointDef.prototype.localAnchorB = null),
    (box2d.b2RopeJointDef.prototype.maxLength = 0),
    (box2d.b2RopeJoint = function (a) {
        goog.base(this, a),
            (this.m_localAnchorA = a.localAnchorA.Clone()),
            (this.m_localAnchorB = a.localAnchorB.Clone()),
            (this.m_maxLength = a.maxLength),
            (this.m_u = new box2d.b2Vec2()),
            (this.m_rA = new box2d.b2Vec2()),
            (this.m_rB = new box2d.b2Vec2()),
            (this.m_localCenterA = new box2d.b2Vec2()),
            (this.m_localCenterB = new box2d.b2Vec2()),
            (this.m_qA = new box2d.b2Rot()),
            (this.m_qB = new box2d.b2Rot()),
            (this.m_lalcA = new box2d.b2Vec2()),
            (this.m_lalcB = new box2d.b2Vec2());
    }),
    goog.inherits(box2d.b2RopeJoint, box2d.b2Joint),
    (box2d.b2RopeJoint.prototype.m_localAnchorA = null),
    (box2d.b2RopeJoint.prototype.m_localAnchorB = null),
    (box2d.b2RopeJoint.prototype.m_maxLength = 0),
    (box2d.b2RopeJoint.prototype.m_length = 0),
    (box2d.b2RopeJoint.prototype.m_impulse = 0),
    (box2d.b2RopeJoint.prototype.m_indexA = 0),
    (box2d.b2RopeJoint.prototype.m_indexB = 0),
    (box2d.b2RopeJoint.prototype.m_u = null),
    (box2d.b2RopeJoint.prototype.m_rA = null),
    (box2d.b2RopeJoint.prototype.m_rB = null),
    (box2d.b2RopeJoint.prototype.m_localCenterA = null),
    (box2d.b2RopeJoint.prototype.m_localCenterB = null),
    (box2d.b2RopeJoint.prototype.m_invMassA = 0),
    (box2d.b2RopeJoint.prototype.m_invMassB = 0),
    (box2d.b2RopeJoint.prototype.m_invIA = 0),
    (box2d.b2RopeJoint.prototype.m_invIB = 0),
    (box2d.b2RopeJoint.prototype.m_mass = 0),
    (box2d.b2RopeJoint.prototype.m_state = box2d.b2LimitState.e_inactiveLimit),
    (box2d.b2RopeJoint.prototype.m_qA = null),
    (box2d.b2RopeJoint.prototype.m_qB = null),
    (box2d.b2RopeJoint.prototype.m_lalcA = null),
    (box2d.b2RopeJoint.prototype.m_lalcB = null),
    (box2d.b2RopeJoint.prototype.InitVelocityConstraints = function (a) {
        (this.m_indexA = this.m_bodyA.m_islandIndex),
            (this.m_indexB = this.m_bodyB.m_islandIndex),
            this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),
            this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),
            (this.m_invMassA = this.m_bodyA.m_invMass),
            (this.m_invMassB = this.m_bodyB.m_invMass),
            (this.m_invIA = this.m_bodyA.m_invI),
            (this.m_invIB = this.m_bodyB.m_invI);
        var b = a.positions[this.m_indexA].c,
            c = a.positions[this.m_indexA].a,
            d = a.velocities[this.m_indexA].v,
            e = a.velocities[this.m_indexA].w,
            f = a.positions[this.m_indexB].c,
            g = a.positions[this.m_indexB].a,
            h = a.velocities[this.m_indexB].v,
            i = a.velocities[this.m_indexB].w,
            j = this.m_qA.SetAngleRadians(c),
            k = this.m_qB.SetAngleRadians(g);
        box2d.b2SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA),
            box2d.b2MulRV(j, this.m_lalcA, this.m_rA),
            box2d.b2SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB),
            box2d.b2MulRV(k, this.m_lalcB, this.m_rB),
            this.m_u.Copy(f).SelfAdd(this.m_rB).SelfSub(b).SelfSub(this.m_rA),
            (this.m_length = this.m_u.GetLength());
        var l = this.m_length - this.m_maxLength;
        if (((this.m_state = 0 < l ? box2d.b2LimitState.e_atUpperLimit : box2d.b2LimitState.e_inactiveLimit), !(this.m_length > box2d.b2_linearSlop))) return this.m_u.SetZero(), (this.m_mass = 0), void (this.m_impulse = 0);
        this.m_u.SelfMul(1 / this.m_length);
        var m = box2d.b2CrossVV(this.m_rA, this.m_u),
            n = box2d.b2CrossVV(this.m_rB, this.m_u),
            o = this.m_invMassA + this.m_invIA * m * m + this.m_invMassB + this.m_invIB * n * n;
        if (((this.m_mass = 0 !== o ? 1 / o : 0), a.step.warmStarting)) {
            this.m_impulse *= a.step.dtRatio;
            var p = box2d.b2MulSV(this.m_impulse, this.m_u, box2d.b2RopeJoint.prototype.InitVelocityConstraints.s_P);
            d.SelfMulSub(this.m_invMassA, p), (e -= this.m_invIA * box2d.b2CrossVV(this.m_rA, p)), h.SelfMulAdd(this.m_invMassB, p), (i += this.m_invIB * box2d.b2CrossVV(this.m_rB, p));
        } else this.m_impulse = 0;
        (a.velocities[this.m_indexA].w = e), (a.velocities[this.m_indexB].w = i);
    }),
    (box2d.b2RopeJoint.prototype.InitVelocityConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2RopeJoint.prototype.SolveVelocityConstraints = function (a) {
        var b = a.velocities[this.m_indexA].v,
            c = a.velocities[this.m_indexA].w,
            d = a.velocities[this.m_indexB].v,
            e = a.velocities[this.m_indexB].w,
            f = box2d.b2AddVCrossSV(b, c, this.m_rA, box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpA),
            g = box2d.b2AddVCrossSV(d, e, this.m_rB, box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpB),
            h = this.m_length - this.m_maxLength,
            i = box2d.b2DotVV(this.m_u, box2d.b2SubVV(g, f, box2d.b2Vec2.s_t0));
        h < 0 && (i += a.step.inv_dt * h);
        var j = -this.m_mass * i,
            k = this.m_impulse;
        (this.m_impulse = box2d.b2Min(0, this.m_impulse + j)), (j = this.m_impulse - k);
        var l = box2d.b2MulSV(j, this.m_u, box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_P);
        b.SelfMulSub(this.m_invMassA, l),
            (c -= this.m_invIA * box2d.b2CrossVV(this.m_rA, l)),
            d.SelfMulAdd(this.m_invMassB, l),
            (e += this.m_invIB * box2d.b2CrossVV(this.m_rB, l)),
            (a.velocities[this.m_indexA].w = c),
            (a.velocities[this.m_indexB].w = e);
    }),
    (box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpA = new box2d.b2Vec2()),
    (box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_vpB = new box2d.b2Vec2()),
    (box2d.b2RopeJoint.prototype.SolveVelocityConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2RopeJoint.prototype.SolvePositionConstraints = function (a) {
        var b = a.positions[this.m_indexA].c,
            c = a.positions[this.m_indexA].a,
            d = a.positions[this.m_indexB].c,
            e = a.positions[this.m_indexB].a,
            f = this.m_qA.SetAngleRadians(c),
            g = this.m_qB.SetAngleRadians(e);
        box2d.b2SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
        var h = box2d.b2MulRV(f, this.m_lalcA, this.m_rA);
        box2d.b2SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
        var i = box2d.b2MulRV(g, this.m_lalcB, this.m_rB),
            j = this.m_u.Copy(d).SelfAdd(i).SelfSub(b).SelfSub(h),
            k = j.Normalize(),
            l = k - this.m_maxLength;
        l = box2d.b2Clamp(l, 0, box2d.b2_maxLinearCorrection);
        var m = -this.m_mass * l,
            n = box2d.b2MulSV(m, j, box2d.b2RopeJoint.prototype.SolvePositionConstraints.s_P);
        return (
            b.SelfMulSub(this.m_invMassA, n),
            (c -= this.m_invIA * box2d.b2CrossVV(h, n)),
            d.SelfMulAdd(this.m_invMassB, n),
            (e += this.m_invIB * box2d.b2CrossVV(i, n)),
            (a.positions[this.m_indexA].a = c),
            (a.positions[this.m_indexB].a = e),
            k - this.m_maxLength < box2d.b2_linearSlop
        );
    }),
    (box2d.b2RopeJoint.prototype.SolvePositionConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2RopeJoint.prototype.GetAnchorA = function (a) {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, a);
    }),
    (box2d.b2RopeJoint.prototype.GetAnchorB = function (a) {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, a);
    }),
    (box2d.b2RopeJoint.prototype.GetReactionForce = function (a, b) {
        return box2d.b2MulSV(a * this.m_impulse, this.m_u, b);
    }),
    (box2d.b2RopeJoint.prototype.GetReactionTorque = function () {
        return 0;
    }),
    (box2d.b2RopeJoint.prototype.GetLocalAnchorA = function (a) {
        return a.Copy(this.m_localAnchorA);
    }),
    (box2d.b2RopeJoint.prototype.GetLocalAnchorB = function (a) {
        return a.Copy(this.m_localAnchorB);
    }),
    (box2d.b2RopeJoint.prototype.SetMaxLength = function (a) {
        this.m_maxLength = a;
    }),
    (box2d.b2RopeJoint.prototype.GetMaxLength = function () {
        return this.m_maxLength;
    }),
    (box2d.b2RopeJoint.prototype.GetLimitState = function () {
        return this.m_state;
    }),
    (box2d.b2RopeJoint.prototype.Dump = function () {
        if (box2d.DEBUG) {
            var a = this.m_bodyA.m_islandIndex,
                b = this.m_bodyB.m_islandIndex;
            box2d.b2Log("  /*box2d.b2RopeJointDef*/ var jd = new box2d.b2RopeJointDef();\n"),
                box2d.b2Log("  jd.bodyA = bodies[%d];\n", a),
                box2d.b2Log("  jd.bodyB = bodies[%d];\n", b),
                box2d.b2Log("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"),
                box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n", this.m_localAnchorA.x, this.m_localAnchorA.y),
                box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n", this.m_localAnchorB.x, this.m_localAnchorB.y),
                box2d.b2Log("  jd.maxLength = %.15f;\n", this.m_maxLength),
                box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
        }
    }),
    goog.provide("box2d.b2GravityController"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Controller"),
    goog.require("box2d.b2Math"),
    (box2d.b2GravityController = function () {
        goog.base(this);
    }),
    goog.inherits(box2d.b2GravityController, box2d.b2Controller),
    (box2d.b2GravityController.prototype.G = 1),
    (box2d.b2GravityController.prototype.invSqr = !0),
    (box2d.b2GravityController.prototype.Step = function () {
        if (this.invSqr)
            for (var a = this.m_bodyList; a; a = a.nextBody)
                for (var c = (b = a.body).GetWorldCenter(), d = b.GetMass(), e = this.m_bodyList; e !== a; e = e.nextBody) {
                    var g = (f = e.body).GetWorldCenter(),
                        h = f.GetMass();
                    if (!((k = (i = g.x - c.x) * i + (j = g.y - c.y) * j) < box2d.b2_epsilon))
                        (l = box2d.b2GravityController.prototype.Step.s_f.SetXY(i, j)).SelfMul((this.G / k / box2d.b2Sqrt(k)) * d * h), b.IsAwake() && b.ApplyForce(l, c), f.IsAwake() && f.ApplyForce(l.SelfMul(-1), g);
                }
        else
            for (a = this.m_bodyList; a; a = a.nextBody) {
                var b;
                for (c = (b = a.body).GetWorldCenter(), d = b.GetMass(), e = this.m_bodyList; e !== a; e = e.nextBody) {
                    var f, i, j, k, l;
                    (g = (f = e.body).GetWorldCenter()), (h = f.GetMass());
                    if (!((k = (i = g.x - c.x) * i + (j = g.y - c.y) * j) < box2d.b2_epsilon))
                        (l = box2d.b2GravityController.prototype.Step.s_f.SetXY(i, j)).SelfMul((this.G / k) * d * h), b.IsAwake() && b.ApplyForce(l, c), f.IsAwake() && f.ApplyForce(l.SelfMul(-1), g);
                }
            }
    }),
    (box2d.b2GravityController.prototype.Step.s_f = new box2d.b2Vec2()),
    goog.provide("box2d.b2TimeStep"),
    goog.require("box2d.b2Settings"),
    (box2d.b2Profile = function () {}),
    (box2d.b2Profile.prototype.step = 0),
    (box2d.b2Profile.prototype.collide = 0),
    (box2d.b2Profile.prototype.solve = 0),
    (box2d.b2Profile.prototype.solveInit = 0),
    (box2d.b2Profile.prototype.solveVelocity = 0),
    (box2d.b2Profile.prototype.solvePosition = 0),
    (box2d.b2Profile.prototype.broadphase = 0),
    (box2d.b2Profile.prototype.solveTOI = 0),
    (box2d.b2Profile.prototype.Reset = function () {
        return (this.step = 0), (this.collide = 0), (this.solve = 0), (this.solveInit = 0), (this.solveVelocity = 0), (this.solvePosition = 0), (this.broadphase = 0), (this.solveTOI = 0), this;
    }),
    (box2d.b2TimeStep = function () {}),
    (box2d.b2TimeStep.prototype.dt = 0),
    (box2d.b2TimeStep.prototype.inv_dt = 0),
    (box2d.b2TimeStep.prototype.dtRatio = 0),
    (box2d.b2TimeStep.prototype.velocityIterations = 0),
    (box2d.b2TimeStep.prototype.positionIterations = 0),
    (box2d.b2TimeStep.prototype.warmStarting = !1),
    (box2d.b2TimeStep.prototype.Copy = function (a) {
        return (this.dt = a.dt), (this.inv_dt = a.inv_dt), (this.dtRatio = a.dtRatio), (this.positionIterations = a.positionIterations), (this.velocityIterations = a.velocityIterations), (this.warmStarting = a.warmStarting), this;
    }),
    (box2d.b2Position = function () {
        this.c = new box2d.b2Vec2();
    }),
    (box2d.b2Position.prototype.c = null),
    (box2d.b2Position.prototype.a = 0),
    (box2d.b2Position.MakeArray = function (a) {
        return box2d.b2MakeArray(a, function () {
            return new box2d.b2Position();
        });
    }),
    (box2d.b2Velocity = function () {
        this.v = new box2d.b2Vec2();
    }),
    (box2d.b2Velocity.prototype.v = null),
    (box2d.b2Velocity.prototype.w = 0),
    (box2d.b2Velocity.MakeArray = function (a) {
        return box2d.b2MakeArray(a, function () {
            return new box2d.b2Velocity();
        });
    }),
    (box2d.b2SolverData = function () {
        this.step = new box2d.b2TimeStep();
    }),
    (box2d.b2SolverData.prototype.step = null),
    (box2d.b2SolverData.prototype.positions = null),
    (box2d.b2SolverData.prototype.velocities = null),
    goog.provide("box2d.b2Collision"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Math"),
    goog.require("box2d.b2Distance"),
    (box2d.b2ContactFeatureType = { e_vertex: 0, e_face: 1 }),
    goog.exportProperty(box2d.b2ContactFeatureType, "e_vertex", box2d.b2ContactFeatureType.e_vertex),
    goog.exportProperty(box2d.b2ContactFeatureType, "e_face", box2d.b2ContactFeatureType.e_face),
    (box2d.b2ContactFeature = function (a) {
        this._id = a;
    }),
    (box2d.b2ContactFeature.prototype._id = null),
    (box2d.b2ContactFeature.prototype._indexA = 0),
    (box2d.b2ContactFeature.prototype._indexB = 0),
    (box2d.b2ContactFeature.prototype._typeA = 0),
    (box2d.b2ContactFeature.prototype._typeB = 0),
    Object.defineProperty(box2d.b2ContactFeature.prototype, "indexA", {
        enumerable: !1,
        configurable: !0,
        get: function () {
            return this._indexA;
        },
        set: function (a) {
            (this._indexA = a), (this._id._key = (4294967040 & this._id._key) | (255 & this._indexA));
        },
    }),
    Object.defineProperty(box2d.b2ContactFeature.prototype, "indexB", {
        enumerable: !1,
        configurable: !0,
        get: function () {
            return this._indexB;
        },
        set: function (a) {
            (this._indexB = a), (this._id._key = (4294902015 & this._id._key) | ((this._indexB << 8) & 65280));
        },
    }),
    Object.defineProperty(box2d.b2ContactFeature.prototype, "typeA", {
        enumerable: !1,
        configurable: !0,
        get: function () {
            return this._typeA;
        },
        set: function (a) {
            (this._typeA = a), (this._id._key = (4278255615 & this._id._key) | ((this._typeA << 16) & 16711680));
        },
    }),
    Object.defineProperty(box2d.b2ContactFeature.prototype, "typeB", {
        enumerable: !1,
        configurable: !0,
        get: function () {
            return this._typeB;
        },
        set: function (a) {
            (this._typeB = a), (this._id._key = (16777215 & this._id._key) | ((this._typeB << 24) & 4278190080));
        },
    }),
    (box2d.b2ContactID = function () {
        this.cf = new box2d.b2ContactFeature(this);
    }),
    (box2d.b2ContactID.prototype.cf = null),
    (box2d.b2ContactID.prototype.key = 0),
    (box2d.b2ContactID.prototype.Copy = function (a) {
        return (this.key = a.key), this;
    }),
    (box2d.b2ContactID.prototype.Clone = function () {
        return new box2d.b2ContactID().Copy(this);
    }),
    Object.defineProperty(box2d.b2ContactID.prototype, "key", {
        enumerable: !1,
        configurable: !0,
        get: function () {
            return this._key;
        },
        set: function (a) {
            (this._key = a), (this.cf._indexA = 255 & this._key), (this.cf._indexB = (this._key >> 8) & 255), (this.cf._typeA = (this._key >> 16) & 255), (this.cf._typeB = (this._key >> 24) & 255);
        },
    }),
    (box2d.b2ManifoldPoint = function () {
        (this.localPoint = new box2d.b2Vec2()), (this.id = new box2d.b2ContactID());
    }),
    (box2d.b2ManifoldPoint.prototype.localPoint = null),
    (box2d.b2ManifoldPoint.prototype.normalImpulse = 0),
    (box2d.b2ManifoldPoint.prototype.tangentImpulse = 0),
    (box2d.b2ManifoldPoint.prototype.id = null),
    (box2d.b2ManifoldPoint.MakeArray = function (a) {
        return box2d.b2MakeArray(a, function () {
            return new box2d.b2ManifoldPoint();
        });
    }),
    (box2d.b2ManifoldPoint.prototype.Reset = function () {
        this.localPoint.SetZero(), (this.normalImpulse = 0), (this.tangentImpulse = 0), (this.id.key = 0);
    }),
    (box2d.b2ManifoldPoint.prototype.Copy = function (a) {
        return this.localPoint.Copy(a.localPoint), (this.normalImpulse = a.normalImpulse), (this.tangentImpulse = a.tangentImpulse), this.id.Copy(a.id), this;
    }),
    (box2d.b2ManifoldType = { e_unknown: -1, e_circles: 0, e_faceA: 1, e_faceB: 2 }),
    goog.exportProperty(box2d.b2ManifoldType, "e_unknown", box2d.b2ManifoldType.e_unknown),
    goog.exportProperty(box2d.b2ManifoldType, "e_circles", box2d.b2ManifoldType.e_circles),
    goog.exportProperty(box2d.b2ManifoldType, "e_faceA", box2d.b2ManifoldType.e_faceA),
    goog.exportProperty(box2d.b2ManifoldType, "e_faceB", box2d.b2ManifoldType.e_faceB),
    (box2d.b2Manifold = function () {
        (this.points = box2d.b2ManifoldPoint.MakeArray(box2d.b2_maxManifoldPoints)), (this.localNormal = new box2d.b2Vec2()), (this.localPoint = new box2d.b2Vec2()), (this.type = box2d.b2ManifoldType.e_unknown), (this.pointCount = 0);
    }),
    (box2d.b2Manifold.prototype.points = null),
    (box2d.b2Manifold.prototype.localNormal = null),
    (box2d.b2Manifold.prototype.localPoint = null),
    (box2d.b2Manifold.prototype.type = box2d.b2ManifoldType.e_unknown),
    (box2d.b2Manifold.prototype.pointCount = 0),
    (box2d.b2Manifold.prototype.Reset = function () {
        for (var a = 0, b = box2d.b2_maxManifoldPoints; a < b; ++a) this.points[a].Reset();
        this.localNormal.SetZero(), this.localPoint.SetZero(), (this.type = box2d.b2ManifoldType.e_unknown), (this.pointCount = 0);
    }),
    (box2d.b2Manifold.prototype.Copy = function (a) {
        this.pointCount = a.pointCount;
        for (var b = 0, c = box2d.b2_maxManifoldPoints; b < c; ++b) this.points[b].Copy(a.points[b]);
        return this.localNormal.Copy(a.localNormal), this.localPoint.Copy(a.localPoint), (this.type = a.type), this;
    }),
    (box2d.b2Manifold.prototype.Clone = function () {
        return new box2d.b2Manifold().Copy(this);
    }),
    (box2d.b2WorldManifold = function () {
        (this.normal = new box2d.b2Vec2()), (this.points = box2d.b2Vec2.MakeArray(box2d.b2_maxManifoldPoints)), (this.separations = box2d.b2MakeNumberArray(box2d.b2_maxManifoldPoints));
    }),
    (box2d.b2WorldManifold.prototype.normal = null),
    (box2d.b2WorldManifold.prototype.points = null),
    (box2d.b2WorldManifold.prototype.separations = null),
    (box2d.b2WorldManifold.prototype.Initialize = function (a, b, c, d, e) {
        if (0 !== a.pointCount)
            switch (a.type) {
                case box2d.b2ManifoldType.e_circles:
                    this.normal.SetXY(1, 0);
                    var f = box2d.b2MulXV(b, a.localPoint, box2d.b2WorldManifold.prototype.Initialize.s_pointA),
                        g = box2d.b2MulXV(d, a.points[0].localPoint, box2d.b2WorldManifold.prototype.Initialize.s_pointB);
                    box2d.b2DistanceSquaredVV(f, g) > box2d.b2_epsilon_sq && box2d.b2SubVV(g, f, this.normal).SelfNormalize();
                    var h = box2d.b2AddVMulSV(f, c, this.normal, box2d.b2WorldManifold.prototype.Initialize.s_cA),
                        i = box2d.b2SubVMulSV(g, e, this.normal, box2d.b2WorldManifold.prototype.Initialize.s_cB);
                    box2d.b2MidVV(h, i, this.points[0]), (this.separations[0] = box2d.b2DotVV(box2d.b2SubVV(i, h, box2d.b2Vec2.s_t0), this.normal));
                    break;
                case box2d.b2ManifoldType.e_faceA:
                    box2d.b2MulRV(b.q, a.localNormal, this.normal);
                    for (var j = box2d.b2MulXV(b, a.localPoint, box2d.b2WorldManifold.prototype.Initialize.s_planePoint), k = 0, l = a.pointCount; k < l; ++k) {
                        var m = box2d.b2MulXV(d, a.points[k].localPoint, box2d.b2WorldManifold.prototype.Initialize.s_clipPoint),
                            n = c - box2d.b2DotVV(box2d.b2SubVV(m, j, box2d.b2Vec2.s_t0), this.normal);
                        (h = box2d.b2AddVMulSV(m, n, this.normal, box2d.b2WorldManifold.prototype.Initialize.s_cA)), (i = box2d.b2SubVMulSV(m, e, this.normal, box2d.b2WorldManifold.prototype.Initialize.s_cB));
                        box2d.b2MidVV(h, i, this.points[k]), (this.separations[k] = box2d.b2DotVV(box2d.b2SubVV(i, h, box2d.b2Vec2.s_t0), this.normal));
                    }
                    break;
                case box2d.b2ManifoldType.e_faceB:
                    box2d.b2MulRV(d.q, a.localNormal, this.normal);
                    for (j = box2d.b2MulXV(d, a.localPoint, box2d.b2WorldManifold.prototype.Initialize.s_planePoint), k = 0, l = a.pointCount; k < l; ++k) {
                        (m = box2d.b2MulXV(b, a.points[k].localPoint, box2d.b2WorldManifold.prototype.Initialize.s_clipPoint)),
                            (n = e - box2d.b2DotVV(box2d.b2SubVV(m, j, box2d.b2Vec2.s_t0), this.normal)),
                            (i = box2d.b2AddVMulSV(m, n, this.normal, box2d.b2WorldManifold.prototype.Initialize.s_cB)),
                            (h = box2d.b2SubVMulSV(m, c, this.normal, box2d.b2WorldManifold.prototype.Initialize.s_cA));
                        box2d.b2MidVV(h, i, this.points[k]), (this.separations[k] = box2d.b2DotVV(box2d.b2SubVV(h, i, box2d.b2Vec2.s_t0), this.normal));
                    }
                    this.normal.SelfNeg();
            }
    }),
    (box2d.b2WorldManifold.prototype.Initialize.s_pointA = new box2d.b2Vec2()),
    (box2d.b2WorldManifold.prototype.Initialize.s_pointB = new box2d.b2Vec2()),
    (box2d.b2WorldManifold.prototype.Initialize.s_cA = new box2d.b2Vec2()),
    (box2d.b2WorldManifold.prototype.Initialize.s_cB = new box2d.b2Vec2()),
    (box2d.b2WorldManifold.prototype.Initialize.s_planePoint = new box2d.b2Vec2()),
    (box2d.b2WorldManifold.prototype.Initialize.s_clipPoint = new box2d.b2Vec2()),
    (box2d.b2PointState = { b2_nullState: 0, b2_addState: 1, b2_persistState: 2, b2_removeState: 3 }),
    goog.exportProperty(box2d.b2PointState, "b2_nullState   ", box2d.b2PointState.b2_nullState),
    goog.exportProperty(box2d.b2PointState, "b2_addState    ", box2d.b2PointState.b2_addState),
    goog.exportProperty(box2d.b2PointState, "b2_persistState", box2d.b2PointState.b2_persistState),
    goog.exportProperty(box2d.b2PointState, "b2_removeState ", box2d.b2PointState.b2_removeState),
    (box2d.b2GetPointStates = function (a, b, c, d) {
        for (var e = 0, f = c.pointCount; e < f; ++e) {
            var h = c.points[e].id.key;
            a[e] = box2d.b2PointState.b2_removeState;
            for (var i = 0, j = d.pointCount; i < j; ++i)
                if (d.points[i].id.key === h) {
                    a[e] = box2d.b2PointState.b2_persistState;
                    break;
                }
        }
        for (f = box2d.b2_maxManifoldPoints; e < f; ++e) a[e] = box2d.b2PointState.b2_nullState;
        for (e = 0, f = d.pointCount; e < f; ++e) {
            h = d.points[e].id.key;
            b[e] = box2d.b2PointState.b2_addState;
            for (i = 0, j = c.pointCount; i < j; ++i)
                if (c.points[i].id.key === h) {
                    b[e] = box2d.b2PointState.b2_persistState;
                    break;
                }
        }
        for (f = box2d.b2_maxManifoldPoints; e < f; ++e) b[e] = box2d.b2PointState.b2_nullState;
    }),
    (box2d.b2ClipVertex = function () {
        (this.v = new box2d.b2Vec2()), (this.id = new box2d.b2ContactID());
    }),
    (box2d.b2ClipVertex.prototype.v = null),
    (box2d.b2ClipVertex.prototype.id = null),
    (box2d.b2ClipVertex.MakeArray = function (a) {
        return box2d.b2MakeArray(a, function () {
            return new box2d.b2ClipVertex();
        });
    }),
    (box2d.b2ClipVertex.prototype.Copy = function (a) {
        return this.v.Copy(a.v), this.id.Copy(a.id), this;
    }),
    (box2d.b2RayCastInput = function () {
        (this.p1 = new box2d.b2Vec2()), (this.p2 = new box2d.b2Vec2()), (this.maxFraction = 1);
    }),
    (box2d.b2RayCastInput.prototype.p1 = null),
    (box2d.b2RayCastInput.prototype.p2 = null),
    (box2d.b2RayCastInput.prototype.maxFraction = 1),
    (box2d.b2RayCastInput.prototype.Copy = function (a) {
        return this.p1.Copy(a.p1), this.p2.Copy(a.p2), (this.maxFraction = a.maxFraction), this;
    }),
    (box2d.b2RayCastOutput = function () {
        (this.normal = new box2d.b2Vec2()), (this.fraction = 0);
    }),
    (box2d.b2RayCastOutput.prototype.normal = null),
    (box2d.b2RayCastOutput.prototype.fraction = 0),
    (box2d.b2RayCastOutput.prototype.Copy = function (a) {
        return this.normal.Copy(a.normal), (this.fraction = a.fraction), this;
    }),
    (box2d.b2AABB = function () {
        (this.lowerBound = new box2d.b2Vec2()), (this.upperBound = new box2d.b2Vec2()), (this.m_out_center = new box2d.b2Vec2()), (this.m_out_extent = new box2d.b2Vec2());
    }),
    (box2d.b2AABB.prototype.lowerBound = null),
    (box2d.b2AABB.prototype.upperBound = null),
    (box2d.b2AABB.prototype.m_out_center = null),
    (box2d.b2AABB.prototype.m_out_extent = null),
    (box2d.b2AABB.prototype.Copy = function (a) {
        return this.lowerBound.Copy(a.lowerBound), this.upperBound.Copy(a.upperBound), this;
    }),
    (box2d.b2AABB.prototype.IsValid = function () {
        var a = this.upperBound.x - this.lowerBound.x,
            b = this.upperBound.y - this.lowerBound.y,
            c = 0 <= a && 0 <= b;
        return c && this.lowerBound.IsValid() && this.upperBound.IsValid();
    }),
    (box2d.b2AABB.prototype.GetCenter = function () {
        return box2d.b2MidVV(this.lowerBound, this.upperBound, this.m_out_center);
    }),
    (box2d.b2AABB.prototype.GetExtents = function () {
        return box2d.b2ExtVV(this.lowerBound, this.upperBound, this.m_out_extent);
    }),
    (box2d.b2AABB.prototype.GetPerimeter = function () {
        return 2 * (this.upperBound.x - this.lowerBound.x + (this.upperBound.y - this.lowerBound.y));
    }),
    (box2d.b2AABB.prototype.Combine1 = function (a) {
        return (
            (this.lowerBound.x = box2d.b2Min(this.lowerBound.x, a.lowerBound.x)),
            (this.lowerBound.y = box2d.b2Min(this.lowerBound.y, a.lowerBound.y)),
            (this.upperBound.x = box2d.b2Max(this.upperBound.x, a.upperBound.x)),
            (this.upperBound.y = box2d.b2Max(this.upperBound.y, a.upperBound.y)),
            this
        );
    }),
    (box2d.b2AABB.prototype.Combine2 = function (a, b) {
        return (
            (this.lowerBound.x = box2d.b2Min(a.lowerBound.x, b.lowerBound.x)),
            (this.lowerBound.y = box2d.b2Min(a.lowerBound.y, b.lowerBound.y)),
            (this.upperBound.x = box2d.b2Max(a.upperBound.x, b.upperBound.x)),
            (this.upperBound.y = box2d.b2Max(a.upperBound.y, b.upperBound.y)),
            this
        );
    }),
    (box2d.b2AABB.Combine = function (a, b, c) {
        return c.Combine2(a, b), c;
    }),
    (box2d.b2AABB.prototype.Contains = function (a) {
        var b = !0;
        return (b = (b = (b = b && this.lowerBound.x <= a.lowerBound.x) && this.lowerBound.y <= a.lowerBound.y) && a.upperBound.x <= this.upperBound.x) && a.upperBound.y <= this.upperBound.y;
    }),
    (box2d.b2AABB.prototype.RayCast = function (a, b) {
        var c = -box2d.b2_maxFloat,
            d = box2d.b2_maxFloat,
            e = b.p1.x,
            f = b.p1.y,
            g = b.p2.x - b.p1.x,
            h = b.p2.y - b.p1.y,
            i = box2d.b2Abs(g),
            j = box2d.b2Abs(h),
            k = a.normal;
        if (i < box2d.b2_epsilon) {
            if (e < this.lowerBound.x || this.upperBound.x < e) return !1;
        } else {
            var l = 1 / g,
                m = (this.lowerBound.x - e) * l,
                o = -1;
            if ((n = (this.upperBound.x - e) * l) < m) {
                var p = m;
                (m = n), (n = p), (o = 1);
            }
            if ((c < m && ((k.x = o), (k.y = 0), (c = m)), (d = box2d.b2Min(d, n)) < c)) return !1;
        }
        if (j < box2d.b2_epsilon) {
            if (f < this.lowerBound.y || this.upperBound.y < f) return !1;
        } else {
            var n;
            (l = 1 / h), (m = (this.lowerBound.y - f) * l), (o = -1);
            if ((n = (this.upperBound.y - f) * l) < m) {
                p = m;
                (m = n), (n = p), (o = 1);
            }
            if ((c < m && ((k.x = 0), (k.y = o), (c = m)), (d = box2d.b2Min(d, n)) < c)) return !1;
        }
        return !(c < 0 || b.maxFraction < c) && ((a.fraction = c), !0);
    }),
    (box2d.b2AABB.prototype.TestOverlap = function (a) {
        var b = a.lowerBound.x - this.upperBound.x,
            c = a.lowerBound.y - this.upperBound.y,
            d = this.lowerBound.x - a.upperBound.x,
            e = this.lowerBound.y - a.upperBound.y;
        return !(0 < b || 0 < c) && !(0 < d || 0 < e);
    }),
    (box2d.b2TestOverlapAABB = function (a, b) {
        var c = b.lowerBound.x - a.upperBound.x,
            d = b.lowerBound.y - a.upperBound.y,
            e = a.lowerBound.x - b.upperBound.x,
            f = a.lowerBound.y - b.upperBound.y;
        return !(0 < c || 0 < d) && !(0 < e || 0 < f);
    }),
    (box2d.b2ClipSegmentToLine = function (a, b, c, d, e) {
        var f = 0,
            g = b[0],
            h = b[1],
            i = box2d.b2DotVV(c, g.v) - d,
            j = box2d.b2DotVV(c, h.v) - d;
        if ((i <= 0 && a[f++].Copy(g), j <= 0 && a[f++].Copy(h), i * j < 0)) {
            var k = i / (i - j),
                l = a[f].v;
            (l.x = g.v.x + k * (h.v.x - g.v.x)), (l.y = g.v.y + k * (h.v.y - g.v.y));
            var m = a[f].id;
            (m.cf.indexA = e), (m.cf.indexB = g.id.cf.indexB), (m.cf.typeA = box2d.b2ContactFeatureType.e_vertex), (m.cf.typeB = box2d.b2ContactFeatureType.e_face), ++f;
        }
        return f;
    }),
    (box2d.b2TestOverlapShape = function (a, b, c, d, e, f) {
        var g = box2d.b2TestOverlapShape.s_input.Reset();
        g.proxyA.SetShape(a, b), g.proxyB.SetShape(c, d), g.transformA.Copy(e), g.transformB.Copy(f), (g.useRadii = !0);
        var h = box2d.b2TestOverlapShape.s_simplexCache.Reset();
        h.count = 0;
        var i = box2d.b2TestOverlapShape.s_output.Reset();
        return box2d.b2Distance(i, h, g), i.distance < 10 * box2d.b2_epsilon;
    }),
    (box2d.b2TestOverlapShape.s_input = new box2d.b2DistanceInput()),
    (box2d.b2TestOverlapShape.s_simplexCache = new box2d.b2SimplexCache()),
    (box2d.b2TestOverlapShape.s_output = new box2d.b2DistanceOutput()),
    goog.provide("box2d.b2Timer"),
    goog.require("box2d.b2Settings"),
    (box2d.b2Timer = function () {
        this.m_start = new Date().getTime();
    }),
    (box2d.b2Timer.prototype.m_start = 0),
    (box2d.b2Timer.prototype.Reset = function () {
        return (this.m_start = new Date().getTime()), this;
    }),
    (box2d.b2Timer.prototype.GetMilliseconds = function () {
        return new Date().getTime() - this.m_start;
    }),
    (box2d.b2Counter = function () {}),
    (box2d.b2Counter.prototype.m_count = 0),
    (box2d.b2Counter.prototype.m_min_count = 0),
    (box2d.b2Counter.prototype.m_max_count = 0),
    (box2d.b2Counter.prototype.GetCount = function () {
        return this.m_count;
    }),
    (box2d.b2Counter.prototype.GetMinCount = function () {
        return this.m_min_count;
    }),
    (box2d.b2Counter.prototype.GetMaxCount = function () {
        return this.m_max_count;
    }),
    (box2d.b2Counter.prototype.ResetCount = function () {
        var a = this.m_count;
        return (this.m_count = 0), a;
    }),
    (box2d.b2Counter.prototype.ResetMinCount = function () {
        this.m_min_count = 0;
    }),
    (box2d.b2Counter.prototype.ResetMaxCount = function () {
        this.m_max_count = 0;
    }),
    (box2d.b2Counter.prototype.Increment = function () {
        this.m_count++, this.m_max_count < this.m_count && (this.m_max_count = this.m_count);
    }),
    (box2d.b2Counter.prototype.Decrement = function () {
        this.m_count--, this.m_min_count > this.m_count && (this.m_min_count = this.m_count);
    }),
    goog.provide("box2d.b2TimeOfImpact"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Distance"),
    goog.require("box2d.b2Math"),
    goog.require("box2d.b2Timer"),
    (box2d.b2_toiTime = 0),
    (box2d.b2_toiMaxTime = 0),
    (box2d.b2_toiCalls = 0),
    (box2d.b2_toiIters = 0),
    (box2d.b2_toiMaxIters = 0),
    (box2d.b2_toiRootIters = 0),
    (box2d.b2_toiMaxRootIters = 0),
    (box2d.b2TOIInput = function () {
        (this.proxyA = new box2d.b2DistanceProxy()), (this.proxyB = new box2d.b2DistanceProxy()), (this.sweepA = new box2d.b2Sweep()), (this.sweepB = new box2d.b2Sweep());
    }),
    (box2d.b2TOIInput.prototype.proxyA = null),
    (box2d.b2TOIInput.prototype.proxyB = null),
    (box2d.b2TOIInput.prototype.sweepA = null),
    (box2d.b2TOIInput.prototype.sweepB = null),
    (box2d.b2TOIInput.prototype.tMax = 0),
    (box2d.b2TOIOutputState = { e_unknown: 0, e_failed: 1, e_overlapped: 2, e_touching: 3, e_separated: 4 }),
    goog.exportProperty(box2d.b2TOIOutputState, "e_unknown", box2d.b2TOIOutputState.e_unknown),
    goog.exportProperty(box2d.b2TOIOutputState, "e_failed", box2d.b2TOIOutputState.e_failed),
    goog.exportProperty(box2d.b2TOIOutputState, "e_overlapped", box2d.b2TOIOutputState.e_overlapped),
    goog.exportProperty(box2d.b2TOIOutputState, "e_touching", box2d.b2TOIOutputState.e_touching),
    goog.exportProperty(box2d.b2TOIOutputState, "e_separated", box2d.b2TOIOutputState.e_separated),
    (box2d.b2TOIOutput = function () {}),
    (box2d.b2TOIOutput.prototype.state = box2d.b2TOIOutputState.e_unknown),
    (box2d.b2TOIOutput.prototype.t = 0),
    (box2d.b2SeparationFunctionType = { e_unknown: -1, e_points: 0, e_faceA: 1, e_faceB: 2 }),
    goog.exportProperty(box2d.b2SeparationFunctionType, "e_unknown", box2d.b2SeparationFunctionType.e_unknown),
    goog.exportProperty(box2d.b2SeparationFunctionType, "e_points", box2d.b2SeparationFunctionType.e_points),
    goog.exportProperty(box2d.b2SeparationFunctionType, "e_faceA", box2d.b2SeparationFunctionType.e_faceA),
    goog.exportProperty(box2d.b2SeparationFunctionType, "e_faceB", box2d.b2SeparationFunctionType.e_faceB),
    (box2d.b2SeparationFunction = function () {
        (this.m_sweepA = new box2d.b2Sweep()), (this.m_sweepB = new box2d.b2Sweep()), (this.m_localPoint = new box2d.b2Vec2()), (this.m_axis = new box2d.b2Vec2());
    }),
    (box2d.b2SeparationFunction.prototype.m_proxyA = null),
    (box2d.b2SeparationFunction.prototype.m_proxyB = null),
    (box2d.b2SeparationFunction.prototype.m_sweepA = null),
    (box2d.b2SeparationFunction.prototype.m_sweepB = null),
    (box2d.b2SeparationFunction.prototype.m_type = box2d.b2SeparationFunctionType.e_unknown),
    (box2d.b2SeparationFunction.prototype.m_localPoint = null),
    (box2d.b2SeparationFunction.prototype.m_axis = null),
    (box2d.b2SeparationFunction.prototype.Initialize = function (a, b, c, d, e, f) {
        (this.m_proxyA = b), (this.m_proxyB = d);
        var g = a.count;
        box2d.ENABLE_ASSERTS && box2d.b2Assert(0 < g && g < 3), this.m_sweepA.Copy(c), this.m_sweepB.Copy(e);
        var h = box2d.b2TimeOfImpact.s_xfA,
            i = box2d.b2TimeOfImpact.s_xfB;
        if ((this.m_sweepA.GetTransform(h, f), this.m_sweepB.GetTransform(i, f), 1 === g)) {
            this.m_type = box2d.b2SeparationFunctionType.e_points;
            var j = this.m_proxyA.GetVertex(a.indexA[0]),
                k = this.m_proxyB.GetVertex(a.indexB[0]),
                l = box2d.b2MulXV(h, j, box2d.b2TimeOfImpact.s_pointA),
                m = box2d.b2MulXV(i, k, box2d.b2TimeOfImpact.s_pointB);
            return box2d.b2SubVV(m, l, this.m_axis), (n = this.m_axis.Normalize());
        }
        if (a.indexA[0] === a.indexA[1]) {
            this.m_type = box2d.b2SeparationFunctionType.e_faceB;
            var o = this.m_proxyB.GetVertex(a.indexB[0]),
                p = this.m_proxyB.GetVertex(a.indexB[1]);
            box2d.b2CrossVOne(box2d.b2SubVV(p, o, box2d.b2Vec2.s_t0), this.m_axis).SelfNormalize();
            var q = box2d.b2MulRV(i.q, this.m_axis, box2d.b2TimeOfImpact.s_normal);
            box2d.b2MidVV(o, p, this.m_localPoint);
            (m = box2d.b2MulXV(i, this.m_localPoint, box2d.b2TimeOfImpact.s_pointB)), (j = this.m_proxyA.GetVertex(a.indexA[0])), (l = box2d.b2MulXV(h, j, box2d.b2TimeOfImpact.s_pointA));
            return (n = box2d.b2DotVV(box2d.b2SubVV(l, m, box2d.b2Vec2.s_t0), q)) < 0 && (this.m_axis.SelfNeg(), (n = -n)), n;
        }
        this.m_type = box2d.b2SeparationFunctionType.e_faceA;
        var r = this.m_proxyA.GetVertex(a.indexA[0]),
            s = this.m_proxyA.GetVertex(a.indexA[1]);
        box2d.b2CrossVOne(box2d.b2SubVV(s, r, box2d.b2Vec2.s_t0), this.m_axis).SelfNormalize();
        q = box2d.b2MulRV(h.q, this.m_axis, box2d.b2TimeOfImpact.s_normal);
        box2d.b2MidVV(r, s, this.m_localPoint);
        var n;
        (l = box2d.b2MulXV(h, this.m_localPoint, box2d.b2TimeOfImpact.s_pointA)), (k = this.m_proxyB.GetVertex(a.indexB[0])), (m = box2d.b2MulXV(i, k, box2d.b2TimeOfImpact.s_pointB));
        return (n = box2d.b2DotVV(box2d.b2SubVV(m, l, box2d.b2Vec2.s_t0), q)) < 0 && (this.m_axis.SelfNeg(), (n = -n)), n;
    }),
    (box2d.b2SeparationFunction.prototype.FindMinSeparation = function (a, b, c) {
        var d = box2d.b2TimeOfImpact.s_xfA,
            e = box2d.b2TimeOfImpact.s_xfB;
        switch ((this.m_sweepA.GetTransform(d, c), this.m_sweepB.GetTransform(e, c), this.m_type)) {
            case box2d.b2SeparationFunctionType.e_points:
                var f = box2d.b2MulTRV(d.q, this.m_axis, box2d.b2TimeOfImpact.s_axisA),
                    g = box2d.b2MulTRV(e.q, box2d.b2NegV(this.m_axis, box2d.b2Vec2.s_t0), box2d.b2TimeOfImpact.s_axisB);
                (a[0] = this.m_proxyA.GetSupport(f)), (b[0] = this.m_proxyB.GetSupport(g));
                var h = this.m_proxyA.GetVertex(a[0]),
                    i = this.m_proxyB.GetVertex(b[0]),
                    j = box2d.b2MulXV(d, h, box2d.b2TimeOfImpact.s_pointA),
                    k = box2d.b2MulXV(e, i, box2d.b2TimeOfImpact.s_pointB);
                return box2d.b2DotVV(box2d.b2SubVV(k, j, box2d.b2Vec2.s_t0), this.m_axis);
            case box2d.b2SeparationFunctionType.e_faceA:
                var m = box2d.b2MulRV(d.q, this.m_axis, box2d.b2TimeOfImpact.s_normal);
                (j = box2d.b2MulXV(d, this.m_localPoint, box2d.b2TimeOfImpact.s_pointA)), (g = box2d.b2MulTRV(e.q, box2d.b2NegV(m, box2d.b2Vec2.s_t0), box2d.b2TimeOfImpact.s_axisB));
                (a[0] = -1), (b[0] = this.m_proxyB.GetSupport(g));
                (i = this.m_proxyB.GetVertex(b[0])), (k = box2d.b2MulXV(e, i, box2d.b2TimeOfImpact.s_pointB));
                return box2d.b2DotVV(box2d.b2SubVV(k, j, box2d.b2Vec2.s_t0), m);
            case box2d.b2SeparationFunctionType.e_faceB:
                (m = box2d.b2MulRV(e.q, this.m_axis, box2d.b2TimeOfImpact.s_normal)),
                    (k = box2d.b2MulXV(e, this.m_localPoint, box2d.b2TimeOfImpact.s_pointB)),
                    (f = box2d.b2MulTRV(d.q, box2d.b2NegV(m, box2d.b2Vec2.s_t0), box2d.b2TimeOfImpact.s_axisA));
                (b[0] = -1), (a[0] = this.m_proxyA.GetSupport(f));
                (h = this.m_proxyA.GetVertex(a[0])), (j = box2d.b2MulXV(d, h, box2d.b2TimeOfImpact.s_pointA));
                return box2d.b2DotVV(box2d.b2SubVV(j, k, box2d.b2Vec2.s_t0), m);
            default:
                return box2d.ENABLE_ASSERTS && box2d.b2Assert(!1), (a[0] = -1), (b[0] = -1), 0;
        }
    }),
    (box2d.b2SeparationFunction.prototype.Evaluate = function (a, b, c) {
        var d = box2d.b2TimeOfImpact.s_xfA,
            e = box2d.b2TimeOfImpact.s_xfB;
        switch ((this.m_sweepA.GetTransform(d, c), this.m_sweepB.GetTransform(e, c), this.m_type)) {
            case box2d.b2SeparationFunctionType.e_points:
                var f = this.m_proxyA.GetVertex(a),
                    g = this.m_proxyB.GetVertex(b),
                    h = box2d.b2MulXV(d, f, box2d.b2TimeOfImpact.s_pointA),
                    i = box2d.b2MulXV(e, g, box2d.b2TimeOfImpact.s_pointB);
                return box2d.b2DotVV(box2d.b2SubVV(i, h, box2d.b2Vec2.s_t0), this.m_axis);
            case box2d.b2SeparationFunctionType.e_faceA:
                var k = box2d.b2MulRV(d.q, this.m_axis, box2d.b2TimeOfImpact.s_normal);
                (h = box2d.b2MulXV(d, this.m_localPoint, box2d.b2TimeOfImpact.s_pointA)), (g = this.m_proxyB.GetVertex(b)), (i = box2d.b2MulXV(e, g, box2d.b2TimeOfImpact.s_pointB));
                return box2d.b2DotVV(box2d.b2SubVV(i, h, box2d.b2Vec2.s_t0), k);
            case box2d.b2SeparationFunctionType.e_faceB:
                (k = box2d.b2MulRV(e.q, this.m_axis, box2d.b2TimeOfImpact.s_normal)),
                    (i = box2d.b2MulXV(e, this.m_localPoint, box2d.b2TimeOfImpact.s_pointB)),
                    (f = this.m_proxyA.GetVertex(a)),
                    (h = box2d.b2MulXV(d, f, box2d.b2TimeOfImpact.s_pointA));
                return box2d.b2DotVV(box2d.b2SubVV(h, i, box2d.b2Vec2.s_t0), k);
            default:
                return box2d.ENABLE_ASSERTS && box2d.b2Assert(!1), 0;
        }
    }),
    (box2d.b2TimeOfImpact = function (a, b) {
        var c = box2d.b2TimeOfImpact.s_timer.Reset();
        ++box2d.b2_toiCalls, (a.state = box2d.b2TOIOutputState.e_unknown), (a.t = b.tMax);
        var d = b.proxyA,
            e = b.proxyB,
            f = box2d.b2TimeOfImpact.s_sweepA.Copy(b.sweepA),
            g = box2d.b2TimeOfImpact.s_sweepB.Copy(b.sweepB);
        f.Normalize(), g.Normalize();
        var h = b.tMax,
            i = d.m_radius + e.m_radius,
            j = box2d.b2Max(box2d.b2_linearSlop, i - 3 * box2d.b2_linearSlop),
            k = 0.25 * box2d.b2_linearSlop;
        box2d.ENABLE_ASSERTS && box2d.b2Assert(k < j);
        var l = 0,
            n = 0,
            o = box2d.b2TimeOfImpact.s_cache;
        o.count = 0;
        var p = box2d.b2TimeOfImpact.s_distanceInput;
        for (p.proxyA = b.proxyA, p.proxyB = b.proxyB, p.useRadii = !1; ; ) {
            var q = box2d.b2TimeOfImpact.s_xfA,
                r = box2d.b2TimeOfImpact.s_xfB;
            f.GetTransform(q, l), g.GetTransform(r, l), p.transformA.Copy(q), p.transformB.Copy(r);
            var s = box2d.b2TimeOfImpact.s_distanceOutput;
            if ((box2d.b2Distance(s, o, p), s.distance <= 0)) {
                (a.state = box2d.b2TOIOutputState.e_overlapped), (a.t = 0);
                break;
            }
            if (s.distance < j + k) {
                (a.state = box2d.b2TOIOutputState.e_touching), (a.t = l);
                break;
            }
            var t = box2d.b2TimeOfImpact.s_fcn;
            t.Initialize(o, d, f, e, g, l);
            for (var u = !1, v = h, w = 0; ; ) {
                var x = box2d.b2TimeOfImpact.s_indexA,
                    y = box2d.b2TimeOfImpact.s_indexB,
                    z = t.FindMinSeparation(x, y, v);
                if (j + k < z) {
                    (a.state = box2d.b2TOIOutputState.e_separated), (a.t = h), (u = !0);
                    break;
                }
                if (j - k < z) {
                    l = v;
                    break;
                }
                var A = t.Evaluate(x[0], y[0], l);
                if (A < j - k) {
                    (a.state = box2d.b2TOIOutputState.e_failed), (a.t = l), (u = !0);
                    break;
                }
                if (A <= j + k) {
                    (a.state = box2d.b2TOIOutputState.e_touching), (a.t = l), (u = !0);
                    break;
                }
                for (var B = 0, C = l, D = v; ; ) {
                    var E;
                    (E = 1 & B ? C + ((j - A) * (D - C)) / (z - A) : 0.5 * (C + D)), ++B, ++box2d.b2_toiRootIters;
                    var F = t.Evaluate(x[0], y[0], E);
                    if (box2d.b2Abs(F - j) < k) {
                        v = E;
                        break;
                    }
                    if ((j < F ? ((C = E), (A = F)) : ((D = E), (z = F)), 50 === B)) break;
                }
                if (((box2d.b2_toiMaxRootIters = box2d.b2Max(box2d.b2_toiMaxRootIters, B)), ++w === box2d.b2_maxPolygonVertices)) break;
            }
            if ((++n, ++box2d.b2_toiIters, u)) break;
            if (20 === n) {
                (a.state = box2d.b2TOIOutputState.e_failed), (a.t = l);
                break;
            }
        }
        box2d.b2_toiMaxIters = box2d.b2Max(box2d.b2_toiMaxIters, n);
        var G = c.GetMilliseconds();
        (box2d.b2_toiMaxTime = box2d.b2Max(box2d.b2_toiMaxTime, G)), (box2d.b2_toiTime += G);
    }),
    (box2d.b2TimeOfImpact.s_timer = new box2d.b2Timer()),
    (box2d.b2TimeOfImpact.s_cache = new box2d.b2SimplexCache()),
    (box2d.b2TimeOfImpact.s_distanceInput = new box2d.b2DistanceInput()),
    (box2d.b2TimeOfImpact.s_distanceOutput = new box2d.b2DistanceOutput()),
    (box2d.b2TimeOfImpact.s_xfA = new box2d.b2Transform()),
    (box2d.b2TimeOfImpact.s_xfB = new box2d.b2Transform()),
    (box2d.b2TimeOfImpact.s_indexA = box2d.b2MakeNumberArray(1)),
    (box2d.b2TimeOfImpact.s_indexB = box2d.b2MakeNumberArray(1)),
    (box2d.b2TimeOfImpact.s_fcn = new box2d.b2SeparationFunction()),
    (box2d.b2TimeOfImpact.s_sweepA = new box2d.b2Sweep()),
    (box2d.b2TimeOfImpact.s_sweepB = new box2d.b2Sweep()),
    (box2d.b2TimeOfImpact.s_pointA = new box2d.b2Vec2()),
    (box2d.b2TimeOfImpact.s_pointB = new box2d.b2Vec2()),
    (box2d.b2TimeOfImpact.s_normal = new box2d.b2Vec2()),
    (box2d.b2TimeOfImpact.s_axisA = new box2d.b2Vec2()),
    (box2d.b2TimeOfImpact.s_axisB = new box2d.b2Vec2()),
    goog.provide("box2d.b2Contact"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Collision"),
    goog.require("box2d.b2TimeOfImpact"),
    (box2d.b2MixFriction = function (a, b) {
        return box2d.b2Sqrt(a * b);
    }),
    (box2d.b2MixRestitution = function (a, b) {
        return b < a ? a : b;
    }),
    (box2d.b2ContactEdge = function () {}),
    (box2d.b2ContactEdge.prototype.other = null),
    (box2d.b2ContactEdge.prototype.contact = null),
    (box2d.b2ContactEdge.prototype.prev = null),
    (box2d.b2ContactEdge.prototype.next = null),
    (box2d.b2ContactFlag = { e_none: 0, e_islandFlag: 1, e_touchingFlag: 2, e_enabledFlag: 4, e_filterFlag: 8, e_bulletHitFlag: 16, e_toiFlag: 32 }),
    goog.exportProperty(box2d.b2ContactFlag, "e_none", box2d.b2ContactFlag.e_none),
    goog.exportProperty(box2d.b2ContactFlag, "e_islandFlag", box2d.b2ContactFlag.e_islandFlag),
    goog.exportProperty(box2d.b2ContactFlag, "e_touchingFlag", box2d.b2ContactFlag.e_touchingFlag),
    goog.exportProperty(box2d.b2ContactFlag, "e_enabledFlag", box2d.b2ContactFlag.e_enabledFlag),
    goog.exportProperty(box2d.b2ContactFlag, "e_filterFlag", box2d.b2ContactFlag.e_filterFlag),
    goog.exportProperty(box2d.b2ContactFlag, "e_bulletHitFlag", box2d.b2ContactFlag.e_bulletHitFlag),
    goog.exportProperty(box2d.b2ContactFlag, "e_toiFlag", box2d.b2ContactFlag.e_toiFlag),
    (box2d.b2Contact = function () {
        (this.m_nodeA = new box2d.b2ContactEdge()), (this.m_nodeB = new box2d.b2ContactEdge()), (this.m_manifold = new box2d.b2Manifold()), (this.m_oldManifold = new box2d.b2Manifold());
    }),
    (box2d.b2Contact.prototype.m_flags = box2d.b2ContactFlag.e_none),
    (box2d.b2Contact.prototype.m_prev = null),
    (box2d.b2Contact.prototype.m_next = null),
    (box2d.b2Contact.prototype.m_nodeA = null),
    (box2d.b2Contact.prototype.m_nodeB = null),
    (box2d.b2Contact.prototype.m_fixtureA = null),
    (box2d.b2Contact.prototype.m_fixtureB = null),
    (box2d.b2Contact.prototype.m_indexA = 0),
    (box2d.b2Contact.prototype.m_indexB = 0),
    (box2d.b2Contact.prototype.m_manifold = null),
    (box2d.b2Contact.prototype.m_toiCount = 0),
    (box2d.b2Contact.prototype.m_toi = 0),
    (box2d.b2Contact.prototype.m_friction = 0),
    (box2d.b2Contact.prototype.m_restitution = 0),
    (box2d.b2Contact.prototype.m_tangentSpeed = 0),
    (box2d.b2Contact.prototype.m_oldManifold = null),
    (box2d.b2Contact.prototype.GetManifold = function () {
        return this.m_manifold;
    }),
    (box2d.b2Contact.prototype.GetWorldManifold = function (a) {
        var b = this.m_fixtureA.GetBody(),
            c = this.m_fixtureB.GetBody(),
            d = this.m_fixtureA.GetShape(),
            e = this.m_fixtureB.GetShape();
        a.Initialize(this.m_manifold, b.GetTransform(), d.m_radius, c.GetTransform(), e.m_radius);
    }),
    (box2d.b2Contact.prototype.IsTouching = function () {
        return (this.m_flags & box2d.b2ContactFlag.e_touchingFlag) === box2d.b2ContactFlag.e_touchingFlag;
    }),
    (box2d.b2Contact.prototype.SetEnabled = function (a) {
        a ? (this.m_flags |= box2d.b2ContactFlag.e_enabledFlag) : (this.m_flags &= ~box2d.b2ContactFlag.e_enabledFlag);
    }),
    (box2d.b2Contact.prototype.IsEnabled = function () {
        return (this.m_flags & box2d.b2ContactFlag.e_enabledFlag) === box2d.b2ContactFlag.e_enabledFlag;
    }),
    (box2d.b2Contact.prototype.GetNext = function () {
        return this.m_next;
    }),
    (box2d.b2Contact.prototype.GetFixtureA = function () {
        return this.m_fixtureA;
    }),
    (box2d.b2Contact.prototype.GetChildIndexA = function () {
        return this.m_indexA;
    }),
    (box2d.b2Contact.prototype.GetFixtureB = function () {
        return this.m_fixtureB;
    }),
    (box2d.b2Contact.prototype.GetChildIndexB = function () {
        return this.m_indexB;
    }),
    (box2d.b2Contact.prototype.Evaluate = function () {}),
    (box2d.b2Contact.prototype.FlagForFiltering = function () {
        this.m_flags |= box2d.b2ContactFlag.e_filterFlag;
    }),
    (box2d.b2Contact.prototype.SetFriction = function (a) {
        this.m_friction = a;
    }),
    (box2d.b2Contact.prototype.GetFriction = function () {
        return this.m_friction;
    }),
    (box2d.b2Contact.prototype.ResetFriction = function () {
        this.m_friction = box2d.b2MixFriction(this.m_fixtureA.m_friction, this.m_fixtureB.m_friction);
    }),
    (box2d.b2Contact.prototype.SetRestitution = function (a) {
        this.m_restitution = a;
    }),
    (box2d.b2Contact.prototype.GetRestitution = function () {
        return this.m_restitution;
    }),
    (box2d.b2Contact.prototype.ResetRestitution = function () {
        this.m_restitution = box2d.b2MixRestitution(this.m_fixtureA.m_restitution, this.m_fixtureB.m_restitution);
    }),
    (box2d.b2Contact.prototype.SetTangentSpeed = function (a) {
        this.m_tangentSpeed = a;
    }),
    (box2d.b2Contact.prototype.GetTangentSpeed = function () {
        return this.m_tangentSpeed;
    }),
    (box2d.b2Contact.prototype.Reset = function (a, b, c, d) {
        (this.m_flags = box2d.b2ContactFlag.e_enabledFlag),
            (this.m_fixtureA = a),
            (this.m_fixtureB = c),
            (this.m_indexA = b),
            (this.m_indexB = d),
            (this.m_manifold.pointCount = 0),
            (this.m_prev = null),
            (this.m_next = null),
            (this.m_nodeA.contact = null),
            (this.m_nodeA.prev = null),
            (this.m_nodeA.next = null),
            (this.m_nodeA.other = null),
            (this.m_nodeB.contact = null),
            (this.m_nodeB.prev = null),
            (this.m_nodeB.next = null),
            (this.m_nodeB.other = null),
            (this.m_toiCount = 0),
            (this.m_friction = box2d.b2MixFriction(this.m_fixtureA.m_friction, this.m_fixtureB.m_friction)),
            (this.m_restitution = box2d.b2MixRestitution(this.m_fixtureA.m_restitution, this.m_fixtureB.m_restitution));
    }),
    (box2d.b2Contact.prototype.Update = function (a) {
        var b = this.m_oldManifold;
        (this.m_oldManifold = this.m_manifold), (this.m_manifold = b), (this.m_flags |= box2d.b2ContactFlag.e_enabledFlag);
        var c = !1,
            d = (this.m_flags & box2d.b2ContactFlag.e_touchingFlag) === box2d.b2ContactFlag.e_touchingFlag,
            e = this.m_fixtureA.IsSensor(),
            f = this.m_fixtureB.IsSensor(),
            g = e || f,
            h = this.m_fixtureA.GetBody(),
            i = this.m_fixtureB.GetBody(),
            j = h.GetTransform(),
            k = i.GetTransform();
        if (g) {
            var l = this.m_fixtureA.GetShape(),
                m = this.m_fixtureB.GetShape();
            (c = box2d.b2TestOverlapShape(l, this.m_indexA, m, this.m_indexB, j, k)), (this.m_manifold.pointCount = 0);
        } else {
            this.Evaluate(this.m_manifold, j, k), (c = 0 < this.m_manifold.pointCount);
            for (var n = 0; n < this.m_manifold.pointCount; ++n) {
                var o = this.m_manifold.points[n];
                (o.normalImpulse = 0), (o.tangentImpulse = 0);
                for (var p = o.id, q = 0; q < this.m_oldManifold.pointCount; ++q) {
                    var r = this.m_oldManifold.points[q];
                    if (r.id.key === p.key) {
                        (o.normalImpulse = r.normalImpulse), (o.tangentImpulse = r.tangentImpulse);
                        break;
                    }
                }
            }
            c !== d && (h.SetAwake(!0), i.SetAwake(!0));
        }
        c ? (this.m_flags |= box2d.b2ContactFlag.e_touchingFlag) : (this.m_flags &= ~box2d.b2ContactFlag.e_touchingFlag),
            !1 === d && !0 === c && a && a.BeginContact(this),
            !0 === d && !1 === c && a && a.EndContact(this),
            !1 === g && c && a && a.PreSolve(this, this.m_oldManifold);
    }),
    (box2d.b2Contact.prototype.ComputeTOI = function (a, b) {
        var c = box2d.b2Contact.prototype.ComputeTOI.s_input;
        c.proxyA.SetShape(this.m_fixtureA.GetShape(), this.m_indexA), c.proxyB.SetShape(this.m_fixtureB.GetShape(), this.m_indexB), c.sweepA.Copy(a), c.sweepB.Copy(b), (c.tMax = box2d.b2_linearSlop);
        var d = box2d.b2Contact.prototype.ComputeTOI.s_output;
        return box2d.b2TimeOfImpact(d, c), d.t;
    }),
    (box2d.b2Contact.prototype.ComputeTOI.s_input = new box2d.b2TOIInput()),
    (box2d.b2Contact.prototype.ComputeTOI.s_output = new box2d.b2TOIOutput()),
    goog.provide("box2d.b2PolygonAndCircleContact"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Contact"),
    (box2d.b2PolygonAndCircleContact = function () {
        goog.base(this);
    }),
    goog.inherits(box2d.b2PolygonAndCircleContact, box2d.b2Contact),
    (box2d.b2PolygonAndCircleContact.Create = function () {
        return new box2d.b2PolygonAndCircleContact();
    }),
    (box2d.b2PolygonAndCircleContact.Destroy = function () {}),
    (box2d.b2PolygonAndCircleContact.prototype.Reset = function (a, b, c, d) {
        goog.base(this, "Reset", a, b, c, d), box2d.ENABLE_ASSERTS && box2d.b2Assert(a.GetType() === box2d.b2ShapeType.e_polygonShape), box2d.ENABLE_ASSERTS && box2d.b2Assert(c.GetType() === box2d.b2ShapeType.e_circleShape);
    }),
    (box2d.b2PolygonAndCircleContact.prototype.Evaluate = function (a, b, c) {
        var d = this.m_fixtureA.GetShape(),
            e = this.m_fixtureB.GetShape();
        box2d.ENABLE_ASSERTS && box2d.b2Assert(d instanceof box2d.b2PolygonShape),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(e instanceof box2d.b2CircleShape),
            box2d.b2CollidePolygonAndCircle(a, d instanceof box2d.b2PolygonShape ? d : null, b, e instanceof box2d.b2CircleShape ? e : null, c);
    }),
    goog.provide("box2d.b2EdgeAndPolygonContact"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Contact"),
    (box2d.b2EdgeAndPolygonContact = function () {
        goog.base(this);
    }),
    goog.inherits(box2d.b2EdgeAndPolygonContact, box2d.b2Contact),
    (box2d.b2EdgeAndPolygonContact.Create = function () {
        return new box2d.b2EdgeAndPolygonContact();
    }),
    (box2d.b2EdgeAndPolygonContact.Destroy = function () {}),
    (box2d.b2EdgeAndPolygonContact.prototype.Reset = function (a, b, c, d) {
        goog.base(this, "Reset", a, b, c, d), box2d.ENABLE_ASSERTS && box2d.b2Assert(a.GetType() === box2d.b2ShapeType.e_edgeShape), box2d.ENABLE_ASSERTS && box2d.b2Assert(c.GetType() === box2d.b2ShapeType.e_polygonShape);
    }),
    (box2d.b2EdgeAndPolygonContact.prototype.Evaluate = function (a, b, c) {
        var d = this.m_fixtureA.GetShape(),
            e = this.m_fixtureB.GetShape();
        box2d.ENABLE_ASSERTS && box2d.b2Assert(d instanceof box2d.b2EdgeShape),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(e instanceof box2d.b2PolygonShape),
            box2d.b2CollideEdgeAndPolygon(a, d instanceof box2d.b2EdgeShape ? d : null, b, e instanceof box2d.b2PolygonShape ? e : null, c);
    }),
    goog.provide("box2d.b2Shape"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Math"),
    goog.require("box2d.b2Distance"),
    (box2d.b2MassData = function () {
        this.center = new box2d.b2Vec2(0, 0);
    }),
    (box2d.b2MassData.prototype.mass = 0),
    (box2d.b2MassData.prototype.center = null),
    (box2d.b2MassData.prototype.I = 0),
    (box2d.b2ShapeType = { e_unknown: -1, e_circleShape: 0, e_edgeShape: 1, e_polygonShape: 2, e_chainShape: 3, e_shapeTypeCount: 4 }),
    goog.exportProperty(box2d.b2ShapeType, "e_unknown", box2d.b2ShapeType.e_unknown),
    goog.exportProperty(box2d.b2ShapeType, "e_circleShape", box2d.b2ShapeType.e_circleShape),
    goog.exportProperty(box2d.b2ShapeType, "e_edgeShape", box2d.b2ShapeType.e_edgeShape),
    goog.exportProperty(box2d.b2ShapeType, "e_polygonShape", box2d.b2ShapeType.e_polygonShape),
    goog.exportProperty(box2d.b2ShapeType, "e_chainShape", box2d.b2ShapeType.e_chainShape),
    goog.exportProperty(box2d.b2ShapeType, "e_shapeTypeCount", box2d.b2ShapeType.e_shapeTypeCount),
    (box2d.b2Shape = function (a, b) {
        (this.m_type = a), (this.m_radius = b);
    }),
    (box2d.b2Shape.prototype.m_type = box2d.b2ShapeType.e_unknown),
    (box2d.b2Shape.prototype.m_radius = 0),
    (box2d.b2Shape.prototype.Clone = function () {
        return box2d.ENABLE_ASSERTS && box2d.b2Assert(!1), null;
    }),
    (box2d.b2Shape.prototype.Copy = function (a) {
        return box2d.ENABLE_ASSERTS && box2d.b2Assert(this.m_type === a.m_type), (this.m_radius = a.m_radius), this;
    }),
    (box2d.b2Shape.prototype.GetType = function () {
        return this.m_type;
    }),
    (box2d.b2Shape.prototype.GetChildCount = function () {
        return box2d.ENABLE_ASSERTS && box2d.b2Assert(!1, "pure virtual"), 0;
    }),
    (box2d.b2Shape.prototype.TestPoint = function () {
        return box2d.ENABLE_ASSERTS && box2d.b2Assert(!1, "pure virtual"), !1;
    }),
    (box2d.b2Shape.prototype.RayCast = function () {
        return box2d.ENABLE_ASSERTS && box2d.b2Assert(!1, "pure virtual"), !1;
    }),
    (box2d.b2Shape.prototype.ComputeAABB = function () {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(!1, "pure virtual");
    }),
    (box2d.b2Shape.prototype.ComputeMass = function () {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(!1, "pure virtual");
    }),
    (box2d.b2Shape.prototype.SetupDistanceProxy = function () {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(!1, "pure virtual");
    }),
    (box2d.b2Shape.prototype.ComputeSubmergedArea = function () {
        return box2d.ENABLE_ASSERTS && box2d.b2Assert(!1, "pure virtual"), 0;
    }),
    (box2d.b2Shape.prototype.Dump = function () {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(!1, "pure virtual");
    }),
    goog.provide("box2d.b2PolygonShape"),
    goog.require("box2d.b2Shape"),
    (box2d.b2PolygonShape = function () {
        goog.base(this, box2d.b2ShapeType.e_polygonShape, box2d.b2_polygonRadius),
            (this.m_centroid = new box2d.b2Vec2(0, 0)),
            (this.m_vertices = box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices)),
            (this.m_normals = box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices));
    }),
    goog.inherits(box2d.b2PolygonShape, box2d.b2Shape),
    (box2d.b2PolygonShape.prototype.m_centroid = null),
    (box2d.b2PolygonShape.prototype.m_vertices = null),
    (box2d.b2PolygonShape.prototype.m_normals = null),
    (box2d.b2PolygonShape.prototype.m_count = 0),
    (box2d.b2PolygonShape.prototype.Clone = function () {
        return new box2d.b2PolygonShape().Copy(this);
    }),
    (box2d.b2PolygonShape.prototype.Copy = function (a) {
        goog.base(this, "Copy", a), box2d.ENABLE_ASSERTS && box2d.b2Assert(a instanceof box2d.b2PolygonShape), this.m_centroid.Copy(a.m_centroid), (this.m_count = a.m_count);
        for (var b = 0, c = this.m_count; b < c; ++b) this.m_vertices[b].Copy(a.m_vertices[b]), this.m_normals[b].Copy(a.m_normals[b]);
        return this;
    }),
    (box2d.b2PolygonShape.prototype.SetAsBox = function (a, b) {
        return (
            (this.m_count = 4),
            this.m_vertices[0].SetXY(-a, -b),
            this.m_vertices[1].SetXY(a, -b),
            this.m_vertices[2].SetXY(a, b),
            this.m_vertices[3].SetXY(-a, b),
            this.m_normals[0].SetXY(0, -1),
            this.m_normals[1].SetXY(1, 0),
            this.m_normals[2].SetXY(0, 1),
            this.m_normals[3].SetXY(-1, 0),
            this.m_centroid.SetZero(),
            this
        );
    }),
    (box2d.b2PolygonShape.prototype.SetAsOrientedBox = function (a, b, c, d) {
        (this.m_count = 4),
            this.m_vertices[0].SetXY(-a, -b),
            this.m_vertices[1].SetXY(a, -b),
            this.m_vertices[2].SetXY(a, b),
            this.m_vertices[3].SetXY(-a, b),
            this.m_normals[0].SetXY(0, -1),
            this.m_normals[1].SetXY(1, 0),
            this.m_normals[2].SetXY(0, 1),
            this.m_normals[3].SetXY(-1, 0),
            this.m_centroid.Copy(c);
        var e = new box2d.b2Transform();
        e.SetPosition(c), e.SetRotationAngleRadians(d);
        for (var f = 0, g = this.m_count; f < g; ++f) box2d.b2MulXV(e, this.m_vertices[f], this.m_vertices[f]), box2d.b2MulRV(e.q, this.m_normals[f], this.m_normals[f]);
        return this;
    }),
    (box2d.b2PolygonShape.prototype.Set = function (a, b) {
        if ((void 0 === b && (b = a.length), box2d.ENABLE_ASSERTS && box2d.b2Assert(3 <= b && b <= box2d.b2_maxPolygonVertices), b < 3)) return this.SetAsBox(1, 1);
        for (var c = box2d.b2Min(b, box2d.b2_maxPolygonVertices), d = box2d.b2PolygonShape.prototype.Set.s_ps, e = 0, f = 0; f < c; ++f) {
            for (var g = a[f], h = !0, i = 0; i < e; ++i)
                if (box2d.b2DistanceSquaredVV(g, d[i]) < 0.5 * box2d.b2_linearSlop) {
                    h = !1;
                    break;
                }
            h && d[e++].Copy(g);
        }
        if ((c = e) < 3) return box2d.ENABLE_ASSERTS && box2d.b2Assert(!1), this.SetAsBox(1, 1);
        var j = 0,
            k = d[0].x;
        for (f = 1; f < c; ++f) {
            var l = d[f].x;
            (k < l || (l === k && d[f].y < d[j].y)) && ((j = f), (k = l));
        }
        for (var m = box2d.b2PolygonShape.prototype.Set.s_hull, n = 0, o = j; ; ) {
            m[n] = o;
            var p = 0;
            for (i = 1; i < c; ++i)
                if (p !== o) {
                    var q = box2d.b2SubVV(d[p], d[m[n]], box2d.b2PolygonShape.prototype.Set.s_r),
                        r = ((g = box2d.b2SubVV(d[i], d[m[n]], box2d.b2PolygonShape.prototype.Set.s_v)), box2d.b2CrossVV(q, g));
                    r < 0 && (p = i), 0 === r && g.GetLengthSquared() > q.GetLengthSquared() && (p = i);
                } else p = i;
            if ((++n, (o = p) === j)) break;
        }
        this.m_count = n;
        for (f = 0; f < n; ++f) this.m_vertices[f].Copy(d[m[f]]);
        f = 0;
        for (var s = n; f < s; ++f) {
            var t = this.m_vertices[f],
                u = this.m_vertices[(f + 1) % s],
                v = box2d.b2SubVV(u, t, box2d.b2Vec2.s_t0);
            box2d.ENABLE_ASSERTS && box2d.b2Assert(v.GetLengthSquared() > box2d.b2_epsilon_sq), box2d.b2CrossVOne(v, this.m_normals[f]).SelfNormalize();
        }
        return box2d.b2PolygonShape.ComputeCentroid(this.m_vertices, n, this.m_centroid), this;
    }),
    (box2d.b2PolygonShape.prototype.Set.s_ps = box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices)),
    (box2d.b2PolygonShape.prototype.Set.s_hull = box2d.b2MakeNumberArray(box2d.b2_maxPolygonVertices)),
    (box2d.b2PolygonShape.prototype.Set.s_r = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.prototype.Set.s_v = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.prototype.SetAsVector = function (a, b) {
        return this.Set(a, b), this;
    }),
    (box2d.b2PolygonShape.prototype.SetAsArray = function (a, b) {
        return this.Set(a, b), this;
    }),
    (box2d.b2PolygonShape.prototype.GetChildCount = function () {
        return 1;
    }),
    (box2d.b2PolygonShape.prototype.TestPoint = function (a, b) {
        for (var c = box2d.b2MulTXV(a, b, box2d.b2PolygonShape.prototype.TestPoint.s_pLocal), d = 0, e = this.m_count; d < e; ++d) {
            if (0 < box2d.b2DotVV(this.m_normals[d], box2d.b2SubVV(c, this.m_vertices[d], box2d.b2Vec2.s_t0))) return !1;
        }
        return !0;
    }),
    (box2d.b2PolygonShape.prototype.TestPoint.s_pLocal = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.prototype.RayCast = function (a, b, c) {
        for (
            var d = box2d.b2MulTXV(c, b.p1, box2d.b2PolygonShape.prototype.RayCast.s_p1),
                e = box2d.b2MulTXV(c, b.p2, box2d.b2PolygonShape.prototype.RayCast.s_p2),
                f = box2d.b2SubVV(e, d, box2d.b2PolygonShape.prototype.RayCast.s_d),
                g = 0,
                h = b.maxFraction,
                i = -1,
                j = 0,
                k = this.m_count;
            j < k;
            ++j
        ) {
            var l = box2d.b2DotVV(this.m_normals[j], box2d.b2SubVV(this.m_vertices[j], d, box2d.b2Vec2.s_t0)),
                m = box2d.b2DotVV(this.m_normals[j], f);
            if (0 === m) {
                if (l < 0) return !1;
            } else m < 0 && l < g * m ? ((g = l / m), (i = j)) : 0 < m && l < h * m && (h = l / m);
            if (h < g) return !1;
        }
        return box2d.ENABLE_ASSERTS && box2d.b2Assert(0 <= g && g <= b.maxFraction), 0 <= i && ((a.fraction = g), box2d.b2MulRV(c.q, this.m_normals[i], a.normal), !0);
    }),
    (box2d.b2PolygonShape.prototype.RayCast.s_p1 = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.prototype.RayCast.s_p2 = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.prototype.RayCast.s_d = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.prototype.ComputeAABB = function (a, b) {
        for (var c = box2d.b2MulXV(b, this.m_vertices[0], a.lowerBound), d = a.upperBound.Copy(c), e = 0, f = this.m_count; e < f; ++e) {
            var g = box2d.b2MulXV(b, this.m_vertices[e], box2d.b2PolygonShape.prototype.ComputeAABB.s_v);
            box2d.b2MinV(g, c, c), box2d.b2MaxV(g, d, d);
        }
        var h = this.m_radius;
        c.SelfSubXY(h, h), d.SelfAddXY(h, h);
    }),
    (box2d.b2PolygonShape.prototype.ComputeAABB.s_v = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.prototype.ComputeMass = function (a, b) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(3 <= this.m_count);
        for (var c = box2d.b2PolygonShape.prototype.ComputeMass.s_center.SetZero(), d = 0, e = 0, f = box2d.b2PolygonShape.prototype.ComputeMass.s_s.SetZero(), g = 0, h = this.m_count; g < h; ++g) f.SelfAdd(this.m_vertices[g]);
        f.SelfMul(1 / this.m_count);
        for (g = 0, h = this.m_count; g < h; ++g) {
            var j = box2d.b2SubVV(this.m_vertices[g], f, box2d.b2PolygonShape.prototype.ComputeMass.s_e1),
                k = box2d.b2SubVV(this.m_vertices[(g + 1) % h], f, box2d.b2PolygonShape.prototype.ComputeMass.s_e2),
                l = box2d.b2CrossVV(j, k),
                m = 0.5 * l;
            (d += m), c.SelfAdd(box2d.b2MulSV(m * (1 / 3), box2d.b2AddVV(j, k, box2d.b2Vec2.s_t0), box2d.b2Vec2.s_t1));
            var n = j.x,
                o = j.y,
                p = k.x,
                q = k.y;
            e += (1 / 3) * 0.25 * l * (n * n + p * n + p * p + (o * o + q * o + q * q));
        }
        (a.mass = b * d), box2d.ENABLE_ASSERTS && box2d.b2Assert(d > box2d.b2_epsilon), c.SelfMul(1 / d), box2d.b2AddVV(c, f, a.center), (a.I = b * e), (a.I += a.mass * (box2d.b2DotVV(a.center, a.center) - box2d.b2DotVV(c, c)));
    }),
    (box2d.b2PolygonShape.prototype.ComputeMass.s_center = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.prototype.ComputeMass.s_s = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.prototype.ComputeMass.s_e1 = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.prototype.ComputeMass.s_e2 = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.prototype.Validate = function () {
        for (var a = 0; a < this.m_count; ++a)
            for (var b = a, c = (a + 1) % this.m_count, d = this.m_vertices[b], e = box2d.b2SubVV(this.m_vertices[c], d, box2d.b2PolygonShape.prototype.Validate.s_e), f = 0; f < this.m_count; ++f)
                if (f !== b && f !== c) {
                    var g = box2d.b2SubVV(this.m_vertices[f], d, box2d.b2PolygonShape.prototype.Validate.s_v);
                    if (box2d.b2CrossVV(e, g) < 0) return !1;
                }
        return !0;
    }),
    (box2d.b2PolygonShape.prototype.Validate.s_e = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.prototype.Validate.s_v = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.prototype.SetupDistanceProxy = function (a) {
        (a.m_vertices = this.m_vertices), (a.m_count = this.m_count), (a.m_radius = this.m_radius);
    }),
    (box2d.b2PolygonShape.prototype.ComputeSubmergedArea = function (a, b, c, d) {
        for (
            var e = box2d.b2MulTRV(c.q, a, box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_normalL),
                f = b - box2d.b2DotVV(a, c.p),
                g = box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_depths,
                h = 0,
                i = -1,
                j = -1,
                k = !1,
                l = 0,
                m = this.m_count;
            l < m;
            ++l
        ) {
            g[l] = box2d.b2DotVV(e, this.m_vertices[l]) - f;
            var n = g[l] < -box2d.b2_epsilon;
            0 < l && (n ? k || ((i = l - 1), h++) : k && ((j = l - 1), h++)), (k = n);
        }
        switch (h) {
            case 0:
                if (k) {
                    var o = box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_md;
                    return this.ComputeMass(o, 1), box2d.b2MulXV(c, o.center, d), o.mass;
                }
                return 0;
            case 1:
                -1 === i ? (i = this.m_count - 1) : (j = this.m_count - 1);
        }
        var p = (i + 1) % this.m_count,
            q = (j + 1) % this.m_count,
            r = (0 - g[i]) / (g[p] - g[i]),
            s = (0 - g[j]) / (g[q] - g[j]),
            t = box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_intoVec.SetXY(this.m_vertices[i].x * (1 - r) + this.m_vertices[p].x * r, this.m_vertices[i].y * (1 - r) + this.m_vertices[p].y * r),
            u = box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_outoVec.SetXY(this.m_vertices[j].x * (1 - s) + this.m_vertices[q].x * s, this.m_vertices[j].y * (1 - s) + this.m_vertices[q].y * s),
            v = 0,
            w = box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_center.SetZero(),
            x = this.m_vertices[p],
            y = null;
        for (l = p; l !== q; ) {
            y = (l = (l + 1) % this.m_count) === q ? u : this.m_vertices[l];
            var z = 0.5 * ((x.x - t.x) * (y.y - t.y) - (x.y - t.y) * (y.x - t.x));
            (v += z), (w.x += (z * (t.x + x.x + y.x)) / 3), (w.y += (z * (t.y + x.y + y.y)) / 3), (x = y);
        }
        return w.SelfMul(1 / v), box2d.b2MulXV(c, w, d), v;
    }),
    (box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_normalL = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_depths = box2d.b2MakeNumberArray(box2d.b2_maxPolygonVertices)),
    (box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_md = new box2d.b2MassData()),
    (box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_intoVec = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_outoVec = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.prototype.ComputeSubmergedArea.s_center = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.prototype.Dump = function () {
        box2d.b2Log("    /*box2d.b2PolygonShape*/ var shape = new box2d.b2PolygonShape();\n"), box2d.b2Log("    /*box2d.b2Vec2[]*/ var vs = box2d.b2Vec2.MakeArray(%d);\n", box2d.b2_maxPolygonVertices);
        for (var a = 0; a < this.m_count; ++a) box2d.b2Log("    vs[%d].SetXY(%.15f, %.15f);\n", a, this.m_vertices[a].x, this.m_vertices[a].y);
        box2d.b2Log("    shape.Set(vs, %d);\n", this.m_count);
    }),
    (box2d.b2PolygonShape.ComputeCentroid = function (a, b, c) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(3 <= b);
        var d = c;
        d.SetZero();
        for (var e = 0, f = box2d.b2PolygonShape.ComputeCentroid.s_pRef.SetZero(), h = 0; h < b; ++h) {
            var i = f,
                j = a[h],
                k = a[(h + 1) % b],
                l = box2d.b2SubVV(j, i, box2d.b2PolygonShape.ComputeCentroid.s_e1),
                m = box2d.b2SubVV(k, i, box2d.b2PolygonShape.ComputeCentroid.s_e2),
                o = 0.5 * box2d.b2CrossVV(l, m);
            (e += o), (d.x += o * (1 / 3) * (i.x + j.x + k.x)), (d.y += o * (1 / 3) * (i.y + j.y + k.y));
        }
        return box2d.ENABLE_ASSERTS && box2d.b2Assert(e > box2d.b2_epsilon), d.SelfMul(1 / e), d;
    }),
    (box2d.b2PolygonShape.ComputeCentroid.s_pRef = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.ComputeCentroid.s_e1 = new box2d.b2Vec2()),
    (box2d.b2PolygonShape.ComputeCentroid.s_e2 = new box2d.b2Vec2()),
    goog.provide("box2d.b2CollideEdge"),
    goog.require("box2d.b2Collision"),
    (box2d.b2CollideEdgeAndCircle = function (a, b, c, d, e) {
        a.pointCount = 0;
        var f = box2d.b2MulTXV(c, box2d.b2MulXV(e, d.m_p, box2d.b2Vec2.s_t0), box2d.b2CollideEdgeAndCircle.s_Q),
            g = b.m_vertex1,
            h = b.m_vertex2,
            i = box2d.b2SubVV(h, g, box2d.b2CollideEdgeAndCircle.s_e),
            j = box2d.b2DotVV(i, box2d.b2SubVV(h, f, box2d.b2Vec2.s_t0)),
            k = box2d.b2DotVV(i, box2d.b2SubVV(f, g, box2d.b2Vec2.s_t0)),
            l = b.m_radius + d.m_radius,
            m = box2d.b2CollideEdgeAndCircle.s_id;
        if (((m.cf.indexB = 0), (m.cf.typeB = box2d.b2ContactFeatureType.e_vertex), k <= 0)) {
            var n = g,
                o = box2d.b2SubVV(f, n, box2d.b2CollideEdgeAndCircle.s_d);
            if (l * l < box2d.b2DotVV(o, o)) return;
            if (b.m_hasVertex0) {
                var q = b.m_vertex0,
                    r = g,
                    s = box2d.b2SubVV(r, q, box2d.b2CollideEdgeAndCircle.s_e1);
                if (0 < box2d.b2DotVV(s, box2d.b2SubVV(r, f, box2d.b2Vec2.s_t0))) return;
            }
            return (
                (m.cf.indexA = 0),
                (m.cf.typeA = box2d.b2ContactFeatureType.e_vertex),
                (a.pointCount = 1),
                (a.type = box2d.b2ManifoldType.e_circles),
                a.localNormal.SetZero(),
                a.localPoint.Copy(n),
                a.points[0].id.Copy(m),
                void a.points[0].localPoint.Copy(d.m_p)
            );
        }
        if (j <= 0) {
            (n = h), (o = box2d.b2SubVV(f, n, box2d.b2CollideEdgeAndCircle.s_d));
            if (l * l < box2d.b2DotVV(o, o)) return;
            if (b.m_hasVertex3) {
                var u = b.m_vertex3,
                    v = h,
                    w = box2d.b2SubVV(u, v, box2d.b2CollideEdgeAndCircle.s_e2);
                if (0 < box2d.b2DotVV(w, box2d.b2SubVV(f, v, box2d.b2Vec2.s_t0))) return;
            }
            return (
                (m.cf.indexA = 1),
                (m.cf.typeA = box2d.b2ContactFeatureType.e_vertex),
                (a.pointCount = 1),
                (a.type = box2d.b2ManifoldType.e_circles),
                a.localNormal.SetZero(),
                a.localPoint.Copy(n),
                a.points[0].id.Copy(m),
                void a.points[0].localPoint.Copy(d.m_p)
            );
        }
        var y = box2d.b2DotVV(i, i);
        box2d.ENABLE_ASSERTS && box2d.b2Assert(0 < y), ((n = box2d.b2CollideEdgeAndCircle.s_P).x = (1 / y) * (j * g.x + k * h.x)), (n.y = (1 / y) * (j * g.y + k * h.y));
        o = box2d.b2SubVV(f, n, box2d.b2CollideEdgeAndCircle.s_d);
        if (!(l * l < box2d.b2DotVV(o, o))) {
            var z = box2d.b2CollideEdgeAndCircle.s_n.SetXY(-i.y, i.x);
            box2d.b2DotVV(z, box2d.b2SubVV(f, g, box2d.b2Vec2.s_t0)) < 0 && z.SetXY(-z.x, -z.y),
                z.Normalize(),
                (m.cf.indexA = 0),
                (m.cf.typeA = box2d.b2ContactFeatureType.e_face),
                (a.pointCount = 1),
                (a.type = box2d.b2ManifoldType.e_faceA),
                a.localNormal.Copy(z),
                a.localPoint.Copy(g),
                a.points[0].id.Copy(m),
                a.points[0].localPoint.Copy(d.m_p);
        }
    }),
    (box2d.b2CollideEdgeAndCircle.s_Q = new box2d.b2Vec2()),
    (box2d.b2CollideEdgeAndCircle.s_e = new box2d.b2Vec2()),
    (box2d.b2CollideEdgeAndCircle.s_d = new box2d.b2Vec2()),
    (box2d.b2CollideEdgeAndCircle.s_e1 = new box2d.b2Vec2()),
    (box2d.b2CollideEdgeAndCircle.s_e2 = new box2d.b2Vec2()),
    (box2d.b2CollideEdgeAndCircle.s_P = new box2d.b2Vec2()),
    (box2d.b2CollideEdgeAndCircle.s_n = new box2d.b2Vec2()),
    (box2d.b2CollideEdgeAndCircle.s_id = new box2d.b2ContactID()),
    (box2d.b2EPAxisType = { e_unknown: 0, e_edgeA: 1, e_edgeB: 2 }),
    goog.exportProperty(box2d.b2EPAxisType, "e_unknown", box2d.b2EPAxisType.e_unknown),
    goog.exportProperty(box2d.b2EPAxisType, "e_edgeA", box2d.b2EPAxisType.e_edgeA),
    goog.exportProperty(box2d.b2EPAxisType, "e_edgeB", box2d.b2EPAxisType.e_edgeB),
    (box2d.b2EPAxis = function () {}),
    (box2d.b2EPAxis.prototype.type = box2d.b2EPAxisType.e_unknown),
    (box2d.b2EPAxis.prototype.index = 0),
    (box2d.b2EPAxis.prototype.separation = 0),
    (box2d.b2TempPolygon = function () {
        (this.vertices = box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices)), (this.normals = box2d.b2Vec2.MakeArray(box2d.b2_maxPolygonVertices)), (this.count = 0);
    }),
    (box2d.b2TempPolygon.prototype.vertices = null),
    (box2d.b2TempPolygon.prototype.normals = null),
    (box2d.b2TempPolygon.prototype.count = 0),
    (box2d.b2ReferenceFace = function () {
        (this.i1 = 0),
            (this.i2 = 0),
            (this.v1 = new box2d.b2Vec2()),
            (this.v2 = new box2d.b2Vec2()),
            (this.normal = new box2d.b2Vec2()),
            (this.sideNormal1 = new box2d.b2Vec2()),
            (this.sideOffset1 = 0),
            (this.sideNormal2 = new box2d.b2Vec2()),
            (this.sideOffset2 = 0);
    }),
    (box2d.b2ReferenceFace.prototype.i1 = 0),
    (box2d.b2ReferenceFace.prototype.i2 = 0),
    (box2d.b2ReferenceFace.prototype.v1 = null),
    (box2d.b2ReferenceFace.prototype.v2 = null),
    (box2d.b2ReferenceFace.prototype.normal = null),
    (box2d.b2ReferenceFace.prototype.sideNormal1 = null),
    (box2d.b2ReferenceFace.prototype.sideOffset1 = 0),
    (box2d.b2ReferenceFace.prototype.sideNormal2 = null),
    (box2d.b2ReferenceFace.prototype.sideOffset2 = 0),
    (box2d.b2EPColliderVertexType = { e_isolated: 0, e_concave: 1, e_convex: 2 }),
    goog.exportProperty(box2d.b2EPColliderVertexType, "e_isolated", box2d.b2EPColliderVertexType.e_isolated),
    goog.exportProperty(box2d.b2EPColliderVertexType, "e_concave", box2d.b2EPColliderVertexType.e_concave),
    goog.exportProperty(box2d.b2EPColliderVertexType, "e_convex", box2d.b2EPColliderVertexType.e_convex),
    (box2d.b2EPCollider = function () {
        (this.m_polygonB = new box2d.b2TempPolygon()),
            (this.m_xf = new box2d.b2Transform()),
            (this.m_centroidB = new box2d.b2Vec2()),
            (this.m_v0 = new box2d.b2Vec2()),
            (this.m_v1 = new box2d.b2Vec2()),
            (this.m_v2 = new box2d.b2Vec2()),
            (this.m_v3 = new box2d.b2Vec2()),
            (this.m_normal0 = new box2d.b2Vec2()),
            (this.m_normal1 = new box2d.b2Vec2()),
            (this.m_normal2 = new box2d.b2Vec2()),
            (this.m_normal = new box2d.b2Vec2()),
            (this.m_type1 = box2d.b2EPColliderVertexType.e_isolated),
            (this.m_type2 = box2d.b2EPColliderVertexType.e_isolated),
            (this.m_lowerLimit = new box2d.b2Vec2()),
            (this.m_upperLimit = new box2d.b2Vec2()),
            (this.m_radius = 0),
            (this.m_front = !1);
    }),
    (box2d.b2EPCollider.prototype.m_polygonB = null),
    (box2d.b2EPCollider.prototype.m_xf = null),
    (box2d.b2EPCollider.prototype.m_centroidB = null),
    (box2d.b2EPCollider.prototype.m_v0 = null),
    (box2d.b2EPCollider.prototype.m_v1 = null),
    (box2d.b2EPCollider.prototype.m_v2 = null),
    (box2d.b2EPCollider.prototype.m_v3 = null),
    (box2d.b2EPCollider.prototype.m_normal0 = null),
    (box2d.b2EPCollider.prototype.m_normal1 = null),
    (box2d.b2EPCollider.prototype.m_normal2 = null),
    (box2d.b2EPCollider.prototype.m_normal = null),
    (box2d.b2EPCollider.prototype.m_type1 = box2d.b2EPColliderVertexType.e_isolated),
    (box2d.b2EPCollider.prototype.m_type2 = box2d.b2EPColliderVertexType.e_isolated),
    (box2d.b2EPCollider.prototype.m_lowerLimit = null),
    (box2d.b2EPCollider.prototype.m_upperLimit = null),
    (box2d.b2EPCollider.prototype.m_radius = 0),
    (box2d.b2EPCollider.prototype.m_front = !1),
    (box2d.b2EPCollider.prototype.Collide = function (a, b, c, d, e) {
        box2d.b2MulTXX(c, e, this.m_xf), box2d.b2MulXV(this.m_xf, d.m_centroid, this.m_centroidB), this.m_v0.Copy(b.m_vertex0), this.m_v1.Copy(b.m_vertex1), this.m_v2.Copy(b.m_vertex2), this.m_v3.Copy(b.m_vertex3);
        var f = b.m_hasVertex0,
            g = b.m_hasVertex3,
            h = box2d.b2SubVV(this.m_v2, this.m_v1, box2d.b2EPCollider.s_edge1);
        h.Normalize(), this.m_normal1.SetXY(h.y, -h.x);
        var i = box2d.b2DotVV(this.m_normal1, box2d.b2SubVV(this.m_centroidB, this.m_v1, box2d.b2Vec2.s_t0)),
            j = 0,
            k = 0,
            l = !1,
            m = !1;
        if (f) {
            var n = box2d.b2SubVV(this.m_v1, this.m_v0, box2d.b2EPCollider.s_edge0);
            n.Normalize(), this.m_normal0.SetXY(n.y, -n.x), (l = 0 <= box2d.b2CrossVV(n, h)), (j = box2d.b2DotVV(this.m_normal0, box2d.b2SubVV(this.m_centroidB, this.m_v0, box2d.b2Vec2.s_t0)));
        }
        if (g) {
            var o = box2d.b2SubVV(this.m_v3, this.m_v2, box2d.b2EPCollider.s_edge2);
            o.Normalize(), this.m_normal2.SetXY(o.y, -o.x), (m = 0 < box2d.b2CrossVV(h, o)), (k = box2d.b2DotVV(this.m_normal2, box2d.b2SubVV(this.m_centroidB, this.m_v2, box2d.b2Vec2.s_t0)));
        }
        f && g
            ? l && m
                ? ((this.m_front = 0 <= j || 0 <= i || 0 <= k),
                  this.m_front
                      ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal0), this.m_upperLimit.Copy(this.m_normal2))
                      : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(), this.m_upperLimit.Copy(this.m_normal1).SelfNeg()))
                : l
                ? ((this.m_front = 0 <= j || (0 <= i && 0 <= k)),
                  this.m_front
                      ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal0), this.m_upperLimit.Copy(this.m_normal1))
                      : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(), this.m_upperLimit.Copy(this.m_normal1).SelfNeg()))
                : m
                ? ((this.m_front = 0 <= k || (0 <= j && 0 <= i)),
                  this.m_front
                      ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal1), this.m_upperLimit.Copy(this.m_normal2))
                      : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(), this.m_upperLimit.Copy(this.m_normal0).SelfNeg()))
                : ((this.m_front = 0 <= j && 0 <= i && 0 <= k),
                  this.m_front
                      ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal1), this.m_upperLimit.Copy(this.m_normal1))
                      : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(), this.m_upperLimit.Copy(this.m_normal0).SelfNeg()))
            : f
            ? l
                ? ((this.m_front = 0 <= j || 0 <= i),
                  this.m_front ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal0)) : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal1)),
                  this.m_upperLimit.Copy(this.m_normal1).SelfNeg())
                : ((this.m_front = 0 <= j && 0 <= i),
                  this.m_front
                      ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal1), this.m_upperLimit.Copy(this.m_normal1).SelfNeg())
                      : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal1), this.m_upperLimit.Copy(this.m_normal0).SelfNeg()))
            : g
            ? m
                ? ((this.m_front = 0 <= i || 0 <= k),
                  this.m_front
                      ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(), this.m_upperLimit.Copy(this.m_normal2))
                      : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(), this.m_upperLimit.Copy(this.m_normal1)))
                : ((this.m_front = 0 <= i && 0 <= k),
                  this.m_front ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal1).SelfNeg()) : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal2).SelfNeg()),
                  this.m_upperLimit.Copy(this.m_normal1))
            : ((this.m_front = 0 <= i),
              this.m_front
                  ? (this.m_normal.Copy(this.m_normal1), this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(), this.m_upperLimit.Copy(this.m_normal1).SelfNeg())
                  : (this.m_normal.Copy(this.m_normal1).SelfNeg(), this.m_lowerLimit.Copy(this.m_normal1), this.m_upperLimit.Copy(this.m_normal1))),
            (this.m_polygonB.count = d.m_count);
        for (var p = 0, q = d.m_count; p < q; ++p) box2d.b2MulXV(this.m_xf, d.m_vertices[p], this.m_polygonB.vertices[p]), box2d.b2MulRV(this.m_xf.q, d.m_normals[p], this.m_polygonB.normals[p]);
        (this.m_radius = 2 * box2d.b2_polygonRadius), (a.pointCount = 0);
        var r = this.ComputeEdgeSeparation(box2d.b2EPCollider.s_edgeAxis);
        if (r.type !== box2d.b2EPAxisType.e_unknown && !(r.separation > this.m_radius)) {
            var s = this.ComputePolygonSeparation(box2d.b2EPCollider.s_polygonAxis);
            if (!(s.type !== box2d.b2EPAxisType.e_unknown && s.separation > this.m_radius)) {
                var t;
                t = s.type === box2d.b2EPAxisType.e_unknown ? r : s.separation > 0.98 * r.separation + 0.001 ? s : r;
                var w = box2d.b2EPCollider.s_ie,
                    x = box2d.b2EPCollider.s_rf;
                if (t.type === box2d.b2EPAxisType.e_edgeA) {
                    a.type = box2d.b2ManifoldType.e_faceA;
                    var y = 0,
                        z = box2d.b2DotVV(this.m_normal, this.m_polygonB.normals[0]);
                    for (p = 1, q = this.m_polygonB.count; p < q; ++p) {
                        var A = box2d.b2DotVV(this.m_normal, this.m_polygonB.normals[p]);
                        A < z && ((z = A), (y = p));
                    }
                    var B = y,
                        C = (B + 1) % this.m_polygonB.count;
                    (D = w[0]).v.Copy(this.m_polygonB.vertices[B]),
                        (D.id.cf.indexA = 0),
                        (D.id.cf.indexB = B),
                        (D.id.cf.typeA = box2d.b2ContactFeatureType.e_face),
                        (D.id.cf.typeB = box2d.b2ContactFeatureType.e_vertex),
                        (E = w[1]).v.Copy(this.m_polygonB.vertices[C]),
                        (E.id.cf.indexA = 0),
                        (E.id.cf.indexB = C),
                        (E.id.cf.typeA = box2d.b2ContactFeatureType.e_face),
                        (E.id.cf.typeB = box2d.b2ContactFeatureType.e_vertex),
                        this.m_front
                            ? ((x.i1 = 0), (x.i2 = 1), x.v1.Copy(this.m_v1), x.v2.Copy(this.m_v2), x.normal.Copy(this.m_normal1))
                            : ((x.i1 = 1), (x.i2 = 0), x.v1.Copy(this.m_v2), x.v2.Copy(this.m_v1), x.normal.Copy(this.m_normal1).SelfNeg());
                } else {
                    var D, E;
                    (a.type = box2d.b2ManifoldType.e_faceB),
                        (D = w[0]).v.Copy(this.m_v1),
                        (D.id.cf.indexA = 0),
                        (D.id.cf.indexB = t.index),
                        (D.id.cf.typeA = box2d.b2ContactFeatureType.e_vertex),
                        (D.id.cf.typeB = box2d.b2ContactFeatureType.e_face),
                        (E = w[1]).v.Copy(this.m_v2),
                        (E.id.cf.indexA = 0),
                        (E.id.cf.indexB = t.index),
                        (E.id.cf.typeA = box2d.b2ContactFeatureType.e_vertex),
                        (E.id.cf.typeB = box2d.b2ContactFeatureType.e_face),
                        (x.i1 = t.index),
                        (x.i2 = (x.i1 + 1) % this.m_polygonB.count),
                        x.v1.Copy(this.m_polygonB.vertices[x.i1]),
                        x.v2.Copy(this.m_polygonB.vertices[x.i2]),
                        x.normal.Copy(this.m_polygonB.normals[x.i1]);
                }
                x.sideNormal1.SetXY(x.normal.y, -x.normal.x), x.sideNormal2.Copy(x.sideNormal1).SelfNeg(), (x.sideOffset1 = box2d.b2DotVV(x.sideNormal1, x.v1)), (x.sideOffset2 = box2d.b2DotVV(x.sideNormal2, x.v2));
                var F = box2d.b2EPCollider.s_clipPoints1,
                    G = box2d.b2EPCollider.s_clipPoints2;
                if (!(box2d.b2ClipSegmentToLine(F, w, x.sideNormal1, x.sideOffset1, x.i1) < box2d.b2_maxManifoldPoints || box2d.b2ClipSegmentToLine(G, F, x.sideNormal2, x.sideOffset2, x.i2) < box2d.b2_maxManifoldPoints)) {
                    t.type === box2d.b2EPAxisType.e_edgeA ? (a.localNormal.Copy(x.normal), a.localPoint.Copy(x.v1)) : (a.localNormal.Copy(d.m_normals[x.i1]), a.localPoint.Copy(d.m_vertices[x.i1]));
                    var I = 0;
                    for (p = 0, q = box2d.b2_maxManifoldPoints; p < q; ++p) {
                        if (box2d.b2DotVV(x.normal, box2d.b2SubVV(G[p].v, x.v1, box2d.b2Vec2.s_t0)) <= this.m_radius) {
                            var K = a.points[I];
                            t.type === box2d.b2EPAxisType.e_edgeA
                                ? (box2d.b2MulTXV(this.m_xf, G[p].v, K.localPoint), (K.id = G[p].id))
                                : (K.localPoint.Copy(G[p].v), (K.id.cf.typeA = G[p].id.cf.typeB), (K.id.cf.typeB = G[p].id.cf.typeA), (K.id.cf.indexA = G[p].id.cf.indexB), (K.id.cf.indexB = G[p].id.cf.indexA)),
                                ++I;
                        }
                    }
                    a.pointCount = I;
                }
            }
        }
    }),
    (box2d.b2EPCollider.s_edge1 = new box2d.b2Vec2()),
    (box2d.b2EPCollider.s_edge0 = new box2d.b2Vec2()),
    (box2d.b2EPCollider.s_edge2 = new box2d.b2Vec2()),
    (box2d.b2EPCollider.s_ie = box2d.b2ClipVertex.MakeArray(2)),
    (box2d.b2EPCollider.s_rf = new box2d.b2ReferenceFace()),
    (box2d.b2EPCollider.s_clipPoints1 = box2d.b2ClipVertex.MakeArray(2)),
    (box2d.b2EPCollider.s_clipPoints2 = box2d.b2ClipVertex.MakeArray(2)),
    (box2d.b2EPCollider.s_edgeAxis = new box2d.b2EPAxis()),
    (box2d.b2EPCollider.s_polygonAxis = new box2d.b2EPAxis()),
    (box2d.b2EPCollider.prototype.ComputeEdgeSeparation = function (a) {
        var b = a;
        (b.type = box2d.b2EPAxisType.e_edgeA), (b.index = this.m_front ? 0 : 1), (b.separation = box2d.b2_maxFloat);
        for (var c = 0, d = this.m_polygonB.count; c < d; ++c) {
            var e = box2d.b2DotVV(this.m_normal, box2d.b2SubVV(this.m_polygonB.vertices[c], this.m_v1, box2d.b2Vec2.s_t0));
            e < b.separation && (b.separation = e);
        }
        return b;
    }),
    (box2d.b2EPCollider.prototype.ComputePolygonSeparation = function (a) {
        var b = a;
        (b.type = box2d.b2EPAxisType.e_unknown), (b.index = -1), (b.separation = -box2d.b2_maxFloat);
        for (var c = box2d.b2EPCollider.s_perp.SetXY(-this.m_normal.y, this.m_normal.x), d = 0, e = this.m_polygonB.count; d < e; ++d) {
            var f = box2d.b2NegV(this.m_polygonB.normals[d], box2d.b2EPCollider.s_n),
                g = box2d.b2DotVV(f, box2d.b2SubVV(this.m_polygonB.vertices[d], this.m_v1, box2d.b2Vec2.s_t0)),
                h = box2d.b2DotVV(f, box2d.b2SubVV(this.m_polygonB.vertices[d], this.m_v2, box2d.b2Vec2.s_t0)),
                i = box2d.b2Min(g, h);
            if (i > this.m_radius) return (b.type = box2d.b2EPAxisType.e_edgeB), (b.index = d), (b.separation = i), b;
            if (0 <= box2d.b2DotVV(f, c)) {
                if (box2d.b2DotVV(box2d.b2SubVV(f, this.m_upperLimit, box2d.b2Vec2.s_t0), this.m_normal) < -box2d.b2_angularSlop) continue;
            } else if (box2d.b2DotVV(box2d.b2SubVV(f, this.m_lowerLimit, box2d.b2Vec2.s_t0), this.m_normal) < -box2d.b2_angularSlop) continue;
            i > b.separation && ((b.type = box2d.b2EPAxisType.e_edgeB), (b.index = d), (b.separation = i));
        }
        return b;
    }),
    (box2d.b2EPCollider.s_n = new box2d.b2Vec2()),
    (box2d.b2EPCollider.s_perp = new box2d.b2Vec2()),
    (box2d.b2CollideEdgeAndPolygon = function (a, b, c, d, e) {
        box2d.b2CollideEdgeAndPolygon.s_collider.Collide(a, b, c, d, e);
    }),
    (box2d.b2CollideEdgeAndPolygon.s_collider = new box2d.b2EPCollider()),
    goog.provide("box2d.b2EdgeShape"),
    goog.require("box2d.b2Shape"),
    (box2d.b2EdgeShape = function () {
        goog.base(this, box2d.b2ShapeType.e_edgeShape, box2d.b2_polygonRadius), (this.m_vertex1 = new box2d.b2Vec2()), (this.m_vertex2 = new box2d.b2Vec2()), (this.m_vertex0 = new box2d.b2Vec2()), (this.m_vertex3 = new box2d.b2Vec2());
    }),
    goog.inherits(box2d.b2EdgeShape, box2d.b2Shape),
    (box2d.b2EdgeShape.prototype.m_vertex1 = null),
    (box2d.b2EdgeShape.prototype.m_vertex2 = null),
    (box2d.b2EdgeShape.prototype.m_vertex0 = null),
    (box2d.b2EdgeShape.prototype.m_vertex3 = null),
    (box2d.b2EdgeShape.prototype.m_hasVertex0 = !1),
    (box2d.b2EdgeShape.prototype.m_hasVertex3 = !1),
    (box2d.b2EdgeShape.prototype.Set = function (a, b) {
        return this.m_vertex1.Copy(a), this.m_vertex2.Copy(b), (this.m_hasVertex0 = !1), (this.m_hasVertex3 = !1), this;
    }),
    (box2d.b2EdgeShape.prototype.SetAsEdge = box2d.b2EdgeShape.prototype.Set),
    (box2d.b2EdgeShape.prototype.Clone = function () {
        return new box2d.b2EdgeShape().Copy(this);
    }),
    (box2d.b2EdgeShape.prototype.Copy = function (a) {
        return (
            goog.base(this, "Copy", a),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(a instanceof box2d.b2EdgeShape),
            this.m_vertex1.Copy(a.m_vertex1),
            this.m_vertex2.Copy(a.m_vertex2),
            this.m_vertex0.Copy(a.m_vertex0),
            this.m_vertex3.Copy(a.m_vertex3),
            (this.m_hasVertex0 = a.m_hasVertex0),
            (this.m_hasVertex3 = a.m_hasVertex3),
            this
        );
    }),
    (box2d.b2EdgeShape.prototype.GetChildCount = function () {
        return 1;
    }),
    (box2d.b2EdgeShape.prototype.TestPoint = function () {
        return !1;
    }),
    (box2d.b2EdgeShape.prototype.RayCast = function (a, b, c) {
        var d = box2d.b2MulTXV(c, b.p1, box2d.b2EdgeShape.prototype.RayCast.s_p1),
            e = box2d.b2MulTXV(c, b.p2, box2d.b2EdgeShape.prototype.RayCast.s_p2),
            f = box2d.b2SubVV(e, d, box2d.b2EdgeShape.prototype.RayCast.s_d),
            g = this.m_vertex1,
            h = this.m_vertex2,
            i = box2d.b2SubVV(h, g, box2d.b2EdgeShape.prototype.RayCast.s_e),
            j = a.normal.SetXY(i.y, -i.x).SelfNormalize(),
            k = box2d.b2DotVV(j, box2d.b2SubVV(g, d, box2d.b2Vec2.s_t0)),
            l = box2d.b2DotVV(j, f);
        if (0 === l) return !1;
        var m = k / l;
        if (m < 0 || b.maxFraction < m) return !1;
        var n = box2d.b2AddVMulSV(d, m, f, box2d.b2EdgeShape.prototype.RayCast.s_q),
            o = box2d.b2SubVV(h, g, box2d.b2EdgeShape.prototype.RayCast.s_r),
            p = box2d.b2DotVV(o, o);
        if (0 === p) return !1;
        var q = box2d.b2DotVV(box2d.b2SubVV(n, g, box2d.b2Vec2.s_t0), o) / p;
        return !(q < 0 || 1 < q) && ((a.fraction = m), box2d.b2MulRV(c.q, a.normal, a.normal), 0 < k && a.normal.SelfNeg(), !0);
    }),
    (box2d.b2EdgeShape.prototype.RayCast.s_p1 = new box2d.b2Vec2()),
    (box2d.b2EdgeShape.prototype.RayCast.s_p2 = new box2d.b2Vec2()),
    (box2d.b2EdgeShape.prototype.RayCast.s_d = new box2d.b2Vec2()),
    (box2d.b2EdgeShape.prototype.RayCast.s_e = new box2d.b2Vec2()),
    (box2d.b2EdgeShape.prototype.RayCast.s_q = new box2d.b2Vec2()),
    (box2d.b2EdgeShape.prototype.RayCast.s_r = new box2d.b2Vec2()),
    (box2d.b2EdgeShape.prototype.ComputeAABB = function (a, b) {
        var c = box2d.b2MulXV(b, this.m_vertex1, box2d.b2EdgeShape.prototype.ComputeAABB.s_v1),
            d = box2d.b2MulXV(b, this.m_vertex2, box2d.b2EdgeShape.prototype.ComputeAABB.s_v2);
        box2d.b2MinV(c, d, a.lowerBound), box2d.b2MaxV(c, d, a.upperBound);
        var e = this.m_radius;
        a.lowerBound.SelfSubXY(e, e), a.upperBound.SelfAddXY(e, e);
    }),
    (box2d.b2EdgeShape.prototype.ComputeAABB.s_v1 = new box2d.b2Vec2()),
    (box2d.b2EdgeShape.prototype.ComputeAABB.s_v2 = new box2d.b2Vec2()),
    (box2d.b2EdgeShape.prototype.ComputeMass = function (a) {
        (a.mass = 0), box2d.b2MidVV(this.m_vertex1, this.m_vertex2, a.center), (a.I = 0);
    }),
    (box2d.b2EdgeShape.prototype.SetupDistanceProxy = function (a) {
        (a.m_vertices = new Array(2)), (a.m_vertices[0] = this.m_vertex1), (a.m_vertices[1] = this.m_vertex2), (a.m_count = 2), (a.m_radius = this.m_radius);
    }),
    (box2d.b2EdgeShape.prototype.ComputeSubmergedArea = function (a, b, c, d) {
        return d.SetZero(), 0;
    }),
    (box2d.b2EdgeShape.prototype.Dump = function () {
        box2d.b2Log("    /*box2d.b2EdgeShape*/ var shape = new box2d.b2EdgeShape();\n"),
            box2d.b2Log("    shape.m_radius = %.15f;\n", this.m_radius),
            box2d.b2Log("    shape.m_vertex0.SetXY(%.15f, %.15f);\n", this.m_vertex0.x, this.m_vertex0.y),
            box2d.b2Log("    shape.m_vertex1.SetXY(%.15f, %.15f);\n", this.m_vertex1.x, this.m_vertex1.y),
            box2d.b2Log("    shape.m_vertex2.SetXY(%.15f, %.15f);\n", this.m_vertex2.x, this.m_vertex2.y),
            box2d.b2Log("    shape.m_vertex3.SetXY(%.15f, %.15f);\n", this.m_vertex3.x, this.m_vertex3.y),
            box2d.b2Log("    shape.m_hasVertex0 = %s;\n", this.m_hasVertex0),
            box2d.b2Log("    shape.m_hasVertex3 = %s;\n", this.m_hasVertex3);
    }),
    goog.provide("box2d.b2ChainShape"),
    goog.require("box2d.b2Shape"),
    goog.require("box2d.b2EdgeShape"),
    (box2d.b2ChainShape = function () {
        goog.base(this, box2d.b2ShapeType.e_chainShape, box2d.b2_polygonRadius), (this.m_prevVertex = new box2d.b2Vec2()), (this.m_nextVertex = new box2d.b2Vec2());
    }),
    goog.inherits(box2d.b2ChainShape, box2d.b2Shape),
    (box2d.b2ChainShape.prototype.m_vertices = null),
    (box2d.b2ChainShape.prototype.m_count = 0),
    (box2d.b2ChainShape.prototype.m_prevVertex = null),
    (box2d.b2ChainShape.prototype.m_nextVertex = null),
    (box2d.b2ChainShape.prototype.m_hasPrevVertex = !1),
    (box2d.b2ChainShape.prototype.m_hasNextVertex = !1),
    (box2d.b2ChainShape.prototype.CreateLoop = function (a, b) {
        if (((b = b || a.length), box2d.ENABLE_ASSERTS && box2d.b2Assert(null === this.m_vertices && 0 === this.m_count), box2d.ENABLE_ASSERTS && box2d.b2Assert(3 <= b), box2d.ENABLE_ASSERTS))
            for (var c = 1; c < b; ++c) {
                var d = a[c - 1],
                    e = a[c];
                box2d.b2Assert(box2d.b2DistanceSquaredVV(d, e) > box2d.b2_linearSlop * box2d.b2_linearSlop);
            }
        (this.m_count = b + 1), (this.m_vertices = box2d.b2Vec2.MakeArray(this.m_count));
        for (c = 0; c < b; ++c) this.m_vertices[c].Copy(a[c]);
        return this.m_vertices[b].Copy(this.m_vertices[0]), this.m_prevVertex.Copy(this.m_vertices[this.m_count - 2]), this.m_nextVertex.Copy(this.m_vertices[1]), (this.m_hasPrevVertex = !0), (this.m_hasNextVertex = !0), this;
    }),
    (box2d.b2ChainShape.prototype.CreateChain = function (a, b) {
        if (((b = b || a.length), box2d.ENABLE_ASSERTS && box2d.b2Assert(null === this.m_vertices && 0 === this.m_count), box2d.ENABLE_ASSERTS && box2d.b2Assert(2 <= b), box2d.ENABLE_ASSERTS))
            for (var c = 1; c < b; ++c) {
                var d = a[c - 1],
                    e = a[c];
                box2d.b2Assert(box2d.b2DistanceSquaredVV(d, e) > box2d.b2_linearSlop * box2d.b2_linearSlop);
            }
        (this.m_count = b), (this.m_vertices = box2d.b2Vec2.MakeArray(b));
        for (c = 0; c < b; ++c) this.m_vertices[c].Copy(a[c]);
        return (this.m_hasPrevVertex = !1), (this.m_hasNextVertex = !1), this.m_prevVertex.SetZero(), this.m_nextVertex.SetZero(), this;
    }),
    (box2d.b2ChainShape.prototype.SetPrevVertex = function (a) {
        return this.m_prevVertex.Copy(a), (this.m_hasPrevVertex = !0), this;
    }),
    (box2d.b2ChainShape.prototype.SetNextVertex = function (a) {
        return this.m_nextVertex.Copy(a), (this.m_hasNextVertex = !0), this;
    }),
    (box2d.b2ChainShape.prototype.Clone = function () {
        return new box2d.b2ChainShape().Copy(this);
    }),
    (box2d.b2ChainShape.prototype.Copy = function (a) {
        return (
            goog.base(this, "Copy", a),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(a instanceof box2d.b2ChainShape),
            this.CreateChain(a.m_vertices, a.m_count),
            this.m_prevVertex.Copy(a.m_prevVertex),
            this.m_nextVertex.Copy(a.m_nextVertex),
            (this.m_hasPrevVertex = a.m_hasPrevVertex),
            (this.m_hasNextVertex = a.m_hasNextVertex),
            this
        );
    }),
    (box2d.b2ChainShape.prototype.GetChildCount = function () {
        return this.m_count - 1;
    }),
    (box2d.b2ChainShape.prototype.GetChildEdge = function (a, b) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(0 <= b && b < this.m_count - 1),
            (a.m_type = box2d.b2ShapeType.e_edgeShape),
            (a.m_radius = this.m_radius),
            a.m_vertex1.Copy(this.m_vertices[b]),
            a.m_vertex2.Copy(this.m_vertices[b + 1]),
            0 < b ? (a.m_vertex0.Copy(this.m_vertices[b - 1]), (a.m_hasVertex0 = !0)) : (a.m_vertex0.Copy(this.m_prevVertex), (a.m_hasVertex0 = this.m_hasPrevVertex)),
            b < this.m_count - 2 ? (a.m_vertex3.Copy(this.m_vertices[b + 2]), (a.m_hasVertex3 = !0)) : (a.m_vertex3.Copy(this.m_nextVertex), (a.m_hasVertex3 = this.m_hasNextVertex));
    }),
    (box2d.b2ChainShape.prototype.TestPoint = function () {
        return !1;
    }),
    (box2d.b2ChainShape.prototype.RayCast = function (a, b, c, d) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(d < this.m_count);
        var e = box2d.b2ChainShape.s_edgeShape;
        return e.m_vertex1.Copy(this.m_vertices[d]), e.m_vertex2.Copy(this.m_vertices[(d + 1) % this.m_count]), e.RayCast(a, b, c, 0);
    }),
    (box2d.b2ChainShape.s_edgeShape = new box2d.b2EdgeShape()),
    (box2d.b2ChainShape.prototype.ComputeAABB = function (a, b, c) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(c < this.m_count);
        var d = this.m_vertices[c],
            e = this.m_vertices[(c + 1) % this.m_count],
            f = box2d.b2MulXV(b, d, box2d.b2ChainShape.prototype.ComputeAABB.s_v1),
            g = box2d.b2MulXV(b, e, box2d.b2ChainShape.prototype.ComputeAABB.s_v2);
        box2d.b2MinV(f, g, a.lowerBound), box2d.b2MaxV(f, g, a.upperBound);
    }),
    (box2d.b2ChainShape.prototype.ComputeAABB.s_v1 = new box2d.b2Vec2()),
    (box2d.b2ChainShape.prototype.ComputeAABB.s_v2 = new box2d.b2Vec2()),
    (box2d.b2ChainShape.prototype.ComputeMass = function (a) {
        (a.mass = 0), a.center.SetZero(), (a.I = 0);
    }),
    (box2d.b2ChainShape.prototype.SetupDistanceProxy = function (a, b) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(0 <= b && b < this.m_count),
            a.m_buffer[0].Copy(this.m_vertices[b]),
            a.m_buffer[1].Copy(b + 1 < this.m_count ? this.m_vertices[b + 1] : this.m_vertices[0]),
            (a.m_vertices = a.m_buffer),
            (a.m_count = 2),
            (a.m_radius = this.m_radius);
    }),
    (box2d.b2ChainShape.prototype.ComputeSubmergedArea = function (a, b, c, d) {
        return d.SetZero(), 0;
    }),
    (box2d.b2ChainShape.prototype.Dump = function () {
        box2d.b2Log("    /*box2d.b2ChainShape*/ var shape = new box2d.b2ChainShape();\n"), box2d.b2Log("    /*box2d.b2Vec2[]*/ var vs = box2d.b2Vec2.MakeArray(%d);\n", box2d.b2_maxPolygonVertices);
        for (var a = 0; a < this.m_count; ++a) box2d.b2Log("    vs[%d].SetXY(%.15f, %.15f);\n", a, this.m_vertices[a].x, this.m_vertices[a].y);
        box2d.b2Log("    shape.CreateChain(vs, %d);\n", this.m_count),
            box2d.b2Log("    shape.m_prevVertex.SetXY(%.15f, %.15f);\n", this.m_prevVertex.x, this.m_prevVertex.y),
            box2d.b2Log("    shape.m_nextVertex.SetXY(%.15f, %.15f);\n", this.m_nextVertex.x, this.m_nextVertex.y),
            box2d.b2Log("    shape.m_hasPrevVertex = %s;\n", this.m_hasPrevVertex ? "true" : "false"),
            box2d.b2Log("    shape.m_hasNextVertex = %s;\n", this.m_hasNextVertex ? "true" : "false");
    }),
    goog.provide("box2d.b2ChainAndPolygonContact"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Contact"),
    goog.require("box2d.b2CollideEdge"),
    goog.require("box2d.b2ChainShape"),
    goog.require("box2d.b2PolygonShape"),
    (box2d.b2ChainAndPolygonContact = function () {
        goog.base(this);
    }),
    goog.inherits(box2d.b2ChainAndPolygonContact, box2d.b2Contact),
    (box2d.b2ChainAndPolygonContact.Create = function () {
        return new box2d.b2ChainAndPolygonContact();
    }),
    (box2d.b2ChainAndPolygonContact.Destroy = function () {}),
    (box2d.b2ChainAndPolygonContact.prototype.Reset = function (a, b, c, d) {
        goog.base(this, "Reset", a, b, c, d), box2d.ENABLE_ASSERTS && box2d.b2Assert(a.GetType() === box2d.b2ShapeType.e_chainShape), box2d.ENABLE_ASSERTS && box2d.b2Assert(c.GetType() === box2d.b2ShapeType.e_polygonShape);
    }),
    (box2d.b2ChainAndPolygonContact.prototype.Evaluate = function (a, b, c) {
        var d = this.m_fixtureA.GetShape(),
            e = this.m_fixtureB.GetShape();
        box2d.ENABLE_ASSERTS && box2d.b2Assert(d instanceof box2d.b2ChainShape), box2d.ENABLE_ASSERTS && box2d.b2Assert(e instanceof box2d.b2PolygonShape);
        var f = d instanceof box2d.b2ChainShape ? d : null,
            g = box2d.b2ChainAndPolygonContact.prototype.Evaluate.s_edge;
        f.GetChildEdge(g, this.m_indexA), box2d.b2CollideEdgeAndPolygon(a, g, b, e instanceof box2d.b2PolygonShape ? e : null, c);
    }),
    (box2d.b2ChainAndPolygonContact.prototype.Evaluate.s_edge = new box2d.b2EdgeShape()),
    goog.provide("box2d.b2CollidePolygon"),
    goog.require("box2d.b2Collision"),
    (box2d.b2FindMaxSeparation = function (a, b, c, d, e) {
        for (var f = b.m_count, g = d.m_count, h = b.m_normals, i = b.m_vertices, j = d.m_vertices, k = box2d.b2MulTXX(e, c, box2d.b2FindMaxSeparation.s_xf), l = 0, m = -box2d.b2_maxFloat, n = 0; n < f; ++n) {
            for (var o = box2d.b2MulRV(k.q, h[n], box2d.b2FindMaxSeparation.s_n), p = box2d.b2MulXV(k, i[n], box2d.b2FindMaxSeparation.s_v1), q = box2d.b2_maxFloat, r = 0; r < g; ++r) {
                var s = box2d.b2DotVV(o, box2d.b2SubVV(j[r], p, box2d.b2Vec2.s_t0));
                s < q && (q = s);
            }
            m < q && ((m = q), (l = n));
        }
        return (a[0] = l), m;
    }),
    (box2d.b2FindMaxSeparation.s_xf = new box2d.b2Transform()),
    (box2d.b2FindMaxSeparation.s_n = new box2d.b2Vec2()),
    (box2d.b2FindMaxSeparation.s_v1 = new box2d.b2Vec2()),
    (box2d.b2FindIncidentEdge = function (a, b, c, d, e, f) {
        var g = b.m_count,
            h = b.m_normals,
            i = e.m_count,
            j = e.m_vertices,
            k = e.m_normals;
        box2d.ENABLE_ASSERTS && box2d.b2Assert(0 <= d && d < g);
        for (var l = box2d.b2MulTRV(f.q, box2d.b2MulRV(c.q, h[d], box2d.b2Vec2.s_t0), box2d.b2FindIncidentEdge.s_normal1), m = 0, n = box2d.b2_maxFloat, o = 0; o < i; ++o) {
            var p = box2d.b2DotVV(l, k[o]);
            p < n && ((n = p), (m = o));
        }
        var q = m,
            r = (q + 1) % i,
            s = a[0];
        box2d.b2MulXV(f, j[q], s.v);
        var t = s.id.cf;
        (t.indexA = d), (t.indexB = q), (t.typeA = box2d.b2ContactFeatureType.e_face), (t.typeB = box2d.b2ContactFeatureType.e_vertex);
        var u = a[1];
        box2d.b2MulXV(f, j[r], u.v);
        var v = u.id.cf;
        (v.indexA = d), (v.indexB = r), (v.typeA = box2d.b2ContactFeatureType.e_face), (v.typeB = box2d.b2ContactFeatureType.e_vertex);
    }),
    (box2d.b2FindIncidentEdge.s_normal1 = new box2d.b2Vec2()),
    (box2d.b2CollidePolygons = function (a, b, c, d, e) {
        a.pointCount = 0;
        var f = b.m_radius + d.m_radius,
            g = box2d.b2CollidePolygons.s_edgeA;
        g[0] = 0;
        var h = box2d.b2FindMaxSeparation(g, b, c, d, e);
        if (!(f < h)) {
            var i = box2d.b2CollidePolygons.s_edgeB;
            i[0] = 0;
            var j = box2d.b2FindMaxSeparation(i, d, e, b, c);
            if (!(f < j)) {
                var k,
                    l,
                    m,
                    n,
                    o = 0,
                    p = 0;
                p = 0.98 * h + 0.001 < j ? ((k = d), (l = b), (m = e), (n = c), (o = i[0]), (a.type = box2d.b2ManifoldType.e_faceB), 1) : ((k = b), (l = d), (m = c), (n = e), (o = g[0]), (a.type = box2d.b2ManifoldType.e_faceA), 0);
                var s = box2d.b2CollidePolygons.s_incidentEdge;
                box2d.b2FindIncidentEdge(s, k, m, o, l, n);
                var t = k.m_count,
                    u = k.m_vertices,
                    v = o,
                    w = (o + 1) % t,
                    x = u[v],
                    y = u[w],
                    z = box2d.b2SubVV(y, x, box2d.b2CollidePolygons.s_localTangent);
                z.Normalize();
                var B = box2d.b2CrossVOne(z, box2d.b2CollidePolygons.s_localNormal),
                    C = box2d.b2MidVV(x, y, box2d.b2CollidePolygons.s_planePoint),
                    D = box2d.b2MulRV(m.q, z, box2d.b2CollidePolygons.s_tangent),
                    E = box2d.b2CrossVOne(D, box2d.b2CollidePolygons.s_normal),
                    F = box2d.b2MulXV(m, x, box2d.b2CollidePolygons.s_v11),
                    G = box2d.b2MulXV(m, y, box2d.b2CollidePolygons.s_v12),
                    H = box2d.b2DotVV(E, F),
                    I = -box2d.b2DotVV(D, F) + f,
                    J = box2d.b2DotVV(D, G) + f,
                    K = box2d.b2CollidePolygons.s_clipPoints1,
                    L = box2d.b2CollidePolygons.s_clipPoints2,
                    M = box2d.b2NegV(D, box2d.b2CollidePolygons.s_ntangent);
                if (!(box2d.b2ClipSegmentToLine(K, s, M, I, v) < 2 || box2d.b2ClipSegmentToLine(L, K, D, J, w) < 2)) {
                    a.localNormal.Copy(B), a.localPoint.Copy(C);
                    for (var N = 0, O = 0; O < box2d.b2_maxManifoldPoints; ++O) {
                        var P = L[O];
                        if (box2d.b2DotVV(E, P.v) - H <= f) {
                            var R = a.points[N];
                            if ((box2d.b2MulTXV(n, P.v, R.localPoint), R.id.Copy(P.id), p)) {
                                var S = R.id.cf;
                                (R.id.cf.indexA = S.indexB), (R.id.cf.indexB = S.indexA), (R.id.cf.typeA = S.typeB), (R.id.cf.typeB = S.typeA);
                            }
                            ++N;
                        }
                    }
                    a.pointCount = N;
                }
            }
        }
    }),
    (box2d.b2CollidePolygons.s_incidentEdge = box2d.b2ClipVertex.MakeArray(2)),
    (box2d.b2CollidePolygons.s_clipPoints1 = box2d.b2ClipVertex.MakeArray(2)),
    (box2d.b2CollidePolygons.s_clipPoints2 = box2d.b2ClipVertex.MakeArray(2)),
    (box2d.b2CollidePolygons.s_edgeA = box2d.b2MakeNumberArray(1)),
    (box2d.b2CollidePolygons.s_edgeB = box2d.b2MakeNumberArray(1)),
    (box2d.b2CollidePolygons.s_localTangent = new box2d.b2Vec2()),
    (box2d.b2CollidePolygons.s_localNormal = new box2d.b2Vec2()),
    (box2d.b2CollidePolygons.s_planePoint = new box2d.b2Vec2()),
    (box2d.b2CollidePolygons.s_normal = new box2d.b2Vec2()),
    (box2d.b2CollidePolygons.s_tangent = new box2d.b2Vec2()),
    (box2d.b2CollidePolygons.s_ntangent = new box2d.b2Vec2()),
    (box2d.b2CollidePolygons.s_v11 = new box2d.b2Vec2()),
    (box2d.b2CollidePolygons.s_v12 = new box2d.b2Vec2()),
    goog.provide("box2d.b2PolygonContact"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Contact"),
    goog.require("box2d.b2CollidePolygon"),
    (box2d.b2PolygonContact = function () {
        goog.base(this);
    }),
    goog.inherits(box2d.b2PolygonContact, box2d.b2Contact),
    (box2d.b2PolygonContact.Create = function () {
        return new box2d.b2PolygonContact();
    }),
    (box2d.b2PolygonContact.Destroy = function () {}),
    (box2d.b2PolygonContact.prototype.Reset = function (a, b, c, d) {
        goog.base(this, "Reset", a, b, c, d);
    }),
    (box2d.b2PolygonContact.prototype.Evaluate = function (a, b, c) {
        var d = this.m_fixtureA.GetShape(),
            e = this.m_fixtureB.GetShape();
        box2d.ENABLE_ASSERTS && box2d.b2Assert(d instanceof box2d.b2PolygonShape),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(e instanceof box2d.b2PolygonShape),
            box2d.b2CollidePolygons(a, d instanceof box2d.b2PolygonShape ? d : null, b, e instanceof box2d.b2PolygonShape ? e : null, c);
    }),
    goog.provide("box2d.b2CollideCircle"),
    goog.require("box2d.b2Collision"),
    (box2d.b2CollideCircles = function (a, b, c, d, e) {
        a.pointCount = 0;
        var f = box2d.b2MulXV(c, b.m_p, box2d.b2CollideCircles.s_pA),
            g = box2d.b2MulXV(e, d.m_p, box2d.b2CollideCircles.s_pB),
            h = box2d.b2DistanceSquaredVV(f, g),
            i = b.m_radius + d.m_radius;
        i * i < h || ((a.type = box2d.b2ManifoldType.e_circles), a.localPoint.Copy(b.m_p), a.localNormal.SetZero(), (a.pointCount = 1), a.points[0].localPoint.Copy(d.m_p), (a.points[0].id.key = 0));
    }),
    (box2d.b2CollideCircles.s_pA = new box2d.b2Vec2()),
    (box2d.b2CollideCircles.s_pB = new box2d.b2Vec2()),
    (box2d.b2CollidePolygonAndCircle = function (a, b, c, d, e) {
        a.pointCount = 0;
        for (
            var f = box2d.b2MulXV(e, d.m_p, box2d.b2CollidePolygonAndCircle.s_c),
                g = box2d.b2MulTXV(c, f, box2d.b2CollidePolygonAndCircle.s_cLocal),
                h = 0,
                i = -box2d.b2_maxFloat,
                j = b.m_radius + d.m_radius,
                k = b.m_count,
                l = b.m_vertices,
                m = b.m_normals,
                n = 0;
            n < k;
            ++n
        ) {
            var o = box2d.b2DotVV(m[n], box2d.b2SubVV(g, l[n], box2d.b2Vec2.s_t0));
            if (j < o) return;
            i < o && ((i = o), (h = n));
        }
        var p = h,
            q = (p + 1) % k,
            r = l[p],
            s = l[q];
        if (i < box2d.b2_epsilon) return (a.pointCount = 1), (a.type = box2d.b2ManifoldType.e_faceA), a.localNormal.Copy(m[h]), box2d.b2MidVV(r, s, a.localPoint), a.points[0].localPoint.Copy(d.m_p), void (a.points[0].id.key = 0);
        var t = box2d.b2DotVV(box2d.b2SubVV(g, r, box2d.b2Vec2.s_t0), box2d.b2SubVV(s, r, box2d.b2Vec2.s_t1)),
            u = box2d.b2DotVV(box2d.b2SubVV(g, s, box2d.b2Vec2.s_t0), box2d.b2SubVV(r, s, box2d.b2Vec2.s_t1));
        if (t <= 0) {
            if (box2d.b2DistanceSquaredVV(g, r) > j * j) return;
            (a.pointCount = 1), (a.type = box2d.b2ManifoldType.e_faceA), box2d.b2SubVV(g, r, a.localNormal).SelfNormalize(), a.localPoint.Copy(r), a.points[0].localPoint.Copy(d.m_p), (a.points[0].id.key = 0);
        } else if (u <= 0) {
            if (box2d.b2DistanceSquaredVV(g, s) > j * j) return;
            (a.pointCount = 1), (a.type = box2d.b2ManifoldType.e_faceA), box2d.b2SubVV(g, s, a.localNormal).SelfNormalize(), a.localPoint.Copy(s), a.points[0].localPoint.Copy(d.m_p), (a.points[0].id.key = 0);
        } else {
            var v = box2d.b2MidVV(r, s, box2d.b2CollidePolygonAndCircle.s_faceCenter);
            if (j < (i = box2d.b2DotVV(box2d.b2SubVV(g, v, box2d.b2Vec2.s_t1), m[p]))) return;
            (a.pointCount = 1), (a.type = box2d.b2ManifoldType.e_faceA), a.localNormal.Copy(m[p]).SelfNormalize(), a.localPoint.Copy(v), a.points[0].localPoint.Copy(d.m_p), (a.points[0].id.key = 0);
        }
    }),
    (box2d.b2CollidePolygonAndCircle.s_c = new box2d.b2Vec2()),
    (box2d.b2CollidePolygonAndCircle.s_cLocal = new box2d.b2Vec2()),
    (box2d.b2CollidePolygonAndCircle.s_faceCenter = new box2d.b2Vec2()),
    goog.provide("box2d.b2CircleContact"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Contact"),
    goog.require("box2d.b2CollideCircle"),
    (box2d.b2CircleContact = function () {
        goog.base(this);
    }),
    goog.inherits(box2d.b2CircleContact, box2d.b2Contact),
    (box2d.b2CircleContact.Create = function () {
        return new box2d.b2CircleContact();
    }),
    (box2d.b2CircleContact.Destroy = function () {}),
    (box2d.b2CircleContact.prototype.Reset = function (a, b, c, d) {
        goog.base(this, "Reset", a, b, c, d);
    }),
    (box2d.b2CircleContact.prototype.Evaluate = function (a, b, c) {
        var d = this.m_fixtureA.GetShape(),
            e = this.m_fixtureB.GetShape();
        box2d.ENABLE_ASSERTS && box2d.b2Assert(d instanceof box2d.b2CircleShape),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(e instanceof box2d.b2CircleShape),
            box2d.b2CollideCircles(a, d instanceof box2d.b2CircleShape ? d : null, b, e instanceof box2d.b2CircleShape ? e : null, c);
    }),
    goog.provide("box2d.b2ChainAndCircleContact"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Contact"),
    goog.require("box2d.b2CollideEdge"),
    (box2d.b2ChainAndCircleContact = function () {
        goog.base(this);
    }),
    goog.inherits(box2d.b2ChainAndCircleContact, box2d.b2Contact),
    (box2d.b2ChainAndCircleContact.Create = function () {
        return new box2d.b2ChainAndCircleContact();
    }),
    (box2d.b2ChainAndCircleContact.Destroy = function () {}),
    (box2d.b2ChainAndCircleContact.prototype.Reset = function (a, b, c, d) {
        goog.base(this, "Reset", a, b, c, d), box2d.ENABLE_ASSERTS && box2d.b2Assert(a.GetType() === box2d.b2ShapeType.e_chainShape), box2d.ENABLE_ASSERTS && box2d.b2Assert(c.GetType() === box2d.b2ShapeType.e_circleShape);
    }),
    (box2d.b2ChainAndCircleContact.prototype.Evaluate = function (a, b, c) {
        var d = this.m_fixtureA.GetShape(),
            e = this.m_fixtureB.GetShape();
        box2d.ENABLE_ASSERTS && box2d.b2Assert(d instanceof box2d.b2ChainShape), box2d.ENABLE_ASSERTS && box2d.b2Assert(e instanceof box2d.b2CircleShape);
        var f = d instanceof box2d.b2ChainShape ? d : null,
            g = box2d.b2ChainAndCircleContact.prototype.Evaluate.s_edge;
        f.GetChildEdge(g, this.m_indexA), box2d.b2CollideEdgeAndCircle(a, g, b, e instanceof box2d.b2CircleShape ? e : null, c);
    }),
    (box2d.b2ChainAndCircleContact.prototype.Evaluate.s_edge = new box2d.b2EdgeShape()),
    goog.provide("box2d.b2EdgeAndCircleContact"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Contact"),
    goog.require("box2d.b2CollideEdge"),
    (box2d.b2EdgeAndCircleContact = function () {
        goog.base(this);
    }),
    goog.inherits(box2d.b2EdgeAndCircleContact, box2d.b2Contact),
    (box2d.b2EdgeAndCircleContact.Create = function () {
        return new box2d.b2EdgeAndCircleContact();
    }),
    (box2d.b2EdgeAndCircleContact.Destroy = function () {}),
    (box2d.b2EdgeAndCircleContact.prototype.Reset = function (a, b, c, d) {
        goog.base(this, "Reset", a, b, c, d), box2d.ENABLE_ASSERTS && box2d.b2Assert(a.GetType() === box2d.b2ShapeType.e_edgeShape), box2d.ENABLE_ASSERTS && box2d.b2Assert(c.GetType() === box2d.b2ShapeType.e_circleShape);
    }),
    (box2d.b2EdgeAndCircleContact.prototype.Evaluate = function (a, b, c) {
        var d = this.m_fixtureA.GetShape(),
            e = this.m_fixtureB.GetShape();
        box2d.ENABLE_ASSERTS && box2d.b2Assert(d instanceof box2d.b2EdgeShape),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(e instanceof box2d.b2CircleShape),
            box2d.b2CollideEdgeAndCircle(a, d instanceof box2d.b2EdgeShape ? d : null, b, e instanceof box2d.b2CircleShape ? e : null, c);
    }),
    goog.provide("box2d.b2ContactSolver"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Math"),
    goog.require("box2d.b2Collision"),
    goog.require("box2d.b2CircleContact"),
    goog.require("box2d.b2PolygonAndCircleContact"),
    goog.require("box2d.b2PolygonContact"),
    goog.require("box2d.b2EdgeAndCircleContact"),
    goog.require("box2d.b2EdgeAndPolygonContact"),
    goog.require("box2d.b2ChainAndCircleContact"),
    goog.require("box2d.b2ChainAndPolygonContact"),
    (box2d.b2VelocityConstraintPoint = function () {
        (this.rA = new box2d.b2Vec2()), (this.rB = new box2d.b2Vec2());
    }),
    (box2d.b2VelocityConstraintPoint.prototype.rA = null),
    (box2d.b2VelocityConstraintPoint.prototype.rB = null),
    (box2d.b2VelocityConstraintPoint.prototype.normalImpulse = 0),
    (box2d.b2VelocityConstraintPoint.prototype.tangentImpulse = 0),
    (box2d.b2VelocityConstraintPoint.prototype.normalMass = 0),
    (box2d.b2VelocityConstraintPoint.prototype.tangentMass = 0),
    (box2d.b2VelocityConstraintPoint.prototype.velocityBias = 0),
    (box2d.b2VelocityConstraintPoint.MakeArray = function (a) {
        return box2d.b2MakeArray(a, function () {
            return new box2d.b2VelocityConstraintPoint();
        });
    }),
    (box2d.b2ContactVelocityConstraint = function () {
        (this.points = box2d.b2VelocityConstraintPoint.MakeArray(box2d.b2_maxManifoldPoints)), (this.normal = new box2d.b2Vec2()), (this.tangent = new box2d.b2Vec2()), (this.normalMass = new box2d.b2Mat22()), (this.K = new box2d.b2Mat22());
    }),
    (box2d.b2ContactVelocityConstraint.prototype.points = null),
    (box2d.b2ContactVelocityConstraint.prototype.normal = null),
    (box2d.b2ContactVelocityConstraint.prototype.tangent = null),
    (box2d.b2ContactVelocityConstraint.prototype.normalMass = null),
    (box2d.b2ContactVelocityConstraint.prototype.K = null),
    (box2d.b2ContactVelocityConstraint.prototype.indexA = 0),
    (box2d.b2ContactVelocityConstraint.prototype.indexB = 0),
    (box2d.b2ContactVelocityConstraint.prototype.invMassA = 0),
    (box2d.b2ContactVelocityConstraint.prototype.invMassB = 0),
    (box2d.b2ContactVelocityConstraint.prototype.invIA = 0),
    (box2d.b2ContactVelocityConstraint.prototype.invIB = 0),
    (box2d.b2ContactVelocityConstraint.prototype.friction = 0),
    (box2d.b2ContactVelocityConstraint.prototype.restitution = 0),
    (box2d.b2ContactVelocityConstraint.prototype.tangentSpeed = 0),
    (box2d.b2ContactVelocityConstraint.prototype.pointCount = 0),
    (box2d.b2ContactVelocityConstraint.prototype.contactIndex = 0),
    (box2d.b2ContactVelocityConstraint.MakeArray = function (a) {
        return box2d.b2MakeArray(a, function () {
            return new box2d.b2ContactVelocityConstraint();
        });
    }),
    (box2d.b2ContactPositionConstraint = function () {
        (this.localPoints = box2d.b2Vec2.MakeArray(box2d.b2_maxManifoldPoints)),
            (this.localNormal = new box2d.b2Vec2()),
            (this.localPoint = new box2d.b2Vec2()),
            (this.localCenterA = new box2d.b2Vec2()),
            (this.localCenterB = new box2d.b2Vec2());
    }),
    (box2d.b2ContactPositionConstraint.prototype.localPoints = null),
    (box2d.b2ContactPositionConstraint.prototype.localNormal = null),
    (box2d.b2ContactPositionConstraint.prototype.localPoint = null),
    (box2d.b2ContactPositionConstraint.prototype.indexA = 0),
    (box2d.b2ContactPositionConstraint.prototype.indexB = 0),
    (box2d.b2ContactPositionConstraint.prototype.invMassA = 0),
    (box2d.b2ContactPositionConstraint.prototype.invMassB = 0),
    (box2d.b2ContactPositionConstraint.prototype.localCenterA = null),
    (box2d.b2ContactPositionConstraint.prototype.localCenterB = null),
    (box2d.b2ContactPositionConstraint.prototype.invIA = 0),
    (box2d.b2ContactPositionConstraint.prototype.invIB = 0),
    (box2d.b2ContactPositionConstraint.prototype.type = box2d.b2ManifoldType.e_unknown),
    (box2d.b2ContactPositionConstraint.prototype.radiusA = 0),
    (box2d.b2ContactPositionConstraint.prototype.radiusB = 0),
    (box2d.b2ContactPositionConstraint.prototype.pointCount = 0),
    (box2d.b2ContactPositionConstraint.MakeArray = function (a) {
        return box2d.b2MakeArray(a, function () {
            return new box2d.b2ContactPositionConstraint();
        });
    }),
    (box2d.b2ContactSolverDef = function () {
        this.step = new box2d.b2TimeStep();
    }),
    (box2d.b2ContactSolverDef.prototype.step = null),
    (box2d.b2ContactSolverDef.prototype.contacts = null),
    (box2d.b2ContactSolverDef.prototype.count = 0),
    (box2d.b2ContactSolverDef.prototype.positions = null),
    (box2d.b2ContactSolverDef.prototype.velocities = null),
    (box2d.b2ContactSolverDef.prototype.allocator = null),
    (box2d.b2ContactSolver = function () {
        (this.m_step = new box2d.b2TimeStep()), (this.m_positionConstraints = box2d.b2ContactPositionConstraint.MakeArray(1024)), (this.m_velocityConstraints = box2d.b2ContactVelocityConstraint.MakeArray(1024));
    }),
    (box2d.b2ContactSolver.prototype.m_step = null),
    (box2d.b2ContactSolver.prototype.m_positions = null),
    (box2d.b2ContactSolver.prototype.m_velocities = null),
    (box2d.b2ContactSolver.prototype.m_allocator = null),
    (box2d.b2ContactSolver.prototype.m_positionConstraints = null),
    (box2d.b2ContactSolver.prototype.m_velocityConstraints = null),
    (box2d.b2ContactSolver.prototype.m_contacts = null),
    (box2d.b2ContactSolver.prototype.m_count = 0),
    (box2d.b2ContactSolver.prototype.Initialize = function (a) {
        if ((this.m_step.Copy(a.step), (this.m_allocator = a.allocator), (this.m_count = a.count), this.m_positionConstraints.length < this.m_count)) {
            var b = box2d.b2Max(2 * this.m_positionConstraints.length, this.m_count);
            for (box2d.DEBUG && window.console.log("box2d.b2ContactSolver.m_positionConstraints: " + b); this.m_positionConstraints.length < b; )
                this.m_positionConstraints[this.m_positionConstraints.length] = new box2d.b2ContactPositionConstraint();
        }
        if (this.m_velocityConstraints.length < this.m_count) {
            b = box2d.b2Max(2 * this.m_velocityConstraints.length, this.m_count);
            for (box2d.DEBUG && window.console.log("box2d.b2ContactSolver.m_velocityConstraints: " + b); this.m_velocityConstraints.length < b; )
                this.m_velocityConstraints[this.m_velocityConstraints.length] = new box2d.b2ContactVelocityConstraint();
        }
        var c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u;
        for (this.m_positions = a.positions, this.m_velocities = a.velocities, this.m_contacts = a.contacts, c = 0, d = this.m_count; c < d; ++c)
            for (
                h = (g = this.m_contacts[c]).m_fixtureA,
                    i = g.m_fixtureB,
                    j = h.GetShape(),
                    k = i.GetShape(),
                    l = j.m_radius,
                    m = k.m_radius,
                    n = h.GetBody(),
                    o = i.GetBody(),
                    q = (p = g.GetManifold()).pointCount,
                    box2d.ENABLE_ASSERTS && box2d.b2Assert(0 < q),
                    (r = this.m_velocityConstraints[c]).friction = g.m_friction,
                    r.restitution = g.m_restitution,
                    r.tangentSpeed = g.m_tangentSpeed,
                    r.indexA = n.m_islandIndex,
                    r.indexB = o.m_islandIndex,
                    r.invMassA = n.m_invMass,
                    r.invMassB = o.m_invMass,
                    r.invIA = n.m_invI,
                    r.invIB = o.m_invI,
                    r.contactIndex = c,
                    r.pointCount = q,
                    r.K.SetZero(),
                    r.normalMass.SetZero(),
                    (s = this.m_positionConstraints[c]).indexA = n.m_islandIndex,
                    s.indexB = o.m_islandIndex,
                    s.invMassA = n.m_invMass,
                    s.invMassB = o.m_invMass,
                    s.localCenterA.Copy(n.m_sweep.localCenter),
                    s.localCenterB.Copy(o.m_sweep.localCenter),
                    s.invIA = n.m_invI,
                    s.invIB = o.m_invI,
                    s.localNormal.Copy(p.localNormal),
                    s.localPoint.Copy(p.localPoint),
                    s.pointCount = q,
                    s.radiusA = l,
                    s.radiusB = m,
                    s.type = p.type,
                    e = 0,
                    f = q;
                e < f;
                ++e
            )
                (t = p.points[e]),
                    (u = r.points[e]),
                    this.m_step.warmStarting ? ((u.normalImpulse = this.m_step.dtRatio * t.normalImpulse), (u.tangentImpulse = this.m_step.dtRatio * t.tangentImpulse)) : ((u.normalImpulse = 0), (u.tangentImpulse = 0)),
                    u.rA.SetZero(),
                    u.rB.SetZero(),
                    (u.normalMass = 0),
                    (u.tangentMass = 0),
                    (u.velocityBias = 0),
                    s.localPoints[e].Copy(t.localPoint);
        return this;
    }),
    (box2d.b2ContactSolver.prototype.InitializeVelocityConstraints = function () {
        var a,
            b,
            c,
            d,
            e,
            f,
            g,
            h,
            i,
            j,
            k,
            l,
            m,
            n,
            o,
            p,
            q,
            r,
            s,
            t,
            u,
            v,
            w,
            x,
            y,
            A,
            B,
            C,
            D,
            E,
            F,
            G,
            H,
            I,
            J,
            K,
            L,
            M,
            N,
            O,
            P,
            Q,
            R,
            S = box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfA,
            T = box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfB,
            U = box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_worldManifold;
        for (a = 0, b = this.m_count; a < b; ++a) {
            for (
                e = this.m_velocityConstraints[a],
                    g = (f = this.m_positionConstraints[a]).radiusA,
                    h = f.radiusB,
                    i = this.m_contacts[e.contactIndex].GetManifold(),
                    j = e.indexA,
                    k = e.indexB,
                    l = e.invMassA,
                    m = e.invMassB,
                    n = e.invIA,
                    o = e.invIB,
                    p = f.localCenterA,
                    q = f.localCenterB,
                    r = this.m_positions[j].c,
                    s = this.m_positions[j].a,
                    t = this.m_velocities[j].v,
                    u = this.m_velocities[j].w,
                    v = this.m_positions[k].c,
                    w = this.m_positions[k].a,
                    x = this.m_velocities[k].v,
                    y = this.m_velocities[k].w,
                    box2d.ENABLE_ASSERTS && box2d.b2Assert(0 < i.pointCount),
                    S.q.SetAngleRadians(s),
                    T.q.SetAngleRadians(w),
                    box2d.b2SubVV(r, box2d.b2MulRV(S.q, p, box2d.b2Vec2.s_t0), S.p),
                    box2d.b2SubVV(v, box2d.b2MulRV(T.q, q, box2d.b2Vec2.s_t0), T.p),
                    U.Initialize(i, S, g, T, h),
                    e.normal.Copy(U.normal),
                    box2d.b2CrossVOne(e.normal, e.tangent),
                    c = 0,
                    d = e.pointCount;
                c < d;
                ++c
            )
                (A = e.points[c]),
                    box2d.b2SubVV(U.points[c], r, A.rA),
                    box2d.b2SubVV(U.points[c], v, A.rB),
                    (D = l + m + n * (B = box2d.b2CrossVV(A.rA, e.normal)) * B + o * (C = box2d.b2CrossVV(A.rB, e.normal)) * C),
                    (A.normalMass = 0 < D ? 1 / D : 0),
                    (E = e.tangent),
                    (H = l + m + n * (F = box2d.b2CrossVV(A.rA, E)) * F + o * (G = box2d.b2CrossVV(A.rB, E)) * G),
                    (A.tangentMass = 0 < H ? 1 / H : 0),
                    (A.velocityBias = 0),
                    (I = box2d.b2DotVV(e.normal, box2d.b2SubVV(box2d.b2AddVCrossSV(x, y, A.rB, box2d.b2Vec2.s_t0), box2d.b2AddVCrossSV(t, u, A.rA, box2d.b2Vec2.s_t1), box2d.b2Vec2.s_t0))) < -box2d.b2_velocityThreshold &&
                        (A.velocityBias += -e.restitution * I);
            2 === e.pointCount &&
                ((J = e.points[0]),
                (K = e.points[1]),
                (P = l + m + n * (L = box2d.b2CrossVV(J.rA, e.normal)) * L + o * (M = box2d.b2CrossVV(J.rB, e.normal)) * M) * P <
                1e3 * (P * (Q = l + m + n * (N = box2d.b2CrossVV(K.rA, e.normal)) * N + o * (O = box2d.b2CrossVV(K.rB, e.normal)) * O) - (R = l + m + n * L * N + o * M * O) * R)
                    ? (e.K.ex.SetXY(P, R), e.K.ey.SetXY(R, Q), e.K.GetInverse(e.normalMass))
                    : (e.pointCount = 1));
        }
    }),
    (box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfA = new box2d.b2Transform()),
    (box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_xfB = new box2d.b2Transform()),
    (box2d.b2ContactSolver.prototype.InitializeVelocityConstraints.s_worldManifold = new box2d.b2WorldManifold()),
    (box2d.b2ContactSolver.prototype.WarmStart = function () {
        var a,
            b,
            c,
            d,
            e,
            f,
            g,
            h,
            i,
            j,
            k,
            l,
            m,
            n,
            o,
            p,
            q,
            r,
            s,
            t = box2d.b2ContactSolver.prototype.WarmStart.s_P;
        for (a = 0, b = this.m_count; a < b; ++a) {
            for (
                f = (e = this.m_velocityConstraints[a]).indexA,
                    g = e.indexB,
                    h = e.invMassA,
                    i = e.invIA,
                    j = e.invMassB,
                    k = e.invIB,
                    l = e.pointCount,
                    m = this.m_velocities[f].v,
                    n = this.m_velocities[f].w,
                    o = this.m_velocities[g].v,
                    p = this.m_velocities[g].w,
                    q = e.normal,
                    r = e.tangent,
                    c = 0,
                    d = l;
                c < d;
                ++c
            )
                (s = e.points[c]),
                    box2d.b2AddVV(box2d.b2MulSV(s.normalImpulse, q, box2d.b2Vec2.s_t0), box2d.b2MulSV(s.tangentImpulse, r, box2d.b2Vec2.s_t1), t),
                    (n -= i * box2d.b2CrossVV(s.rA, t)),
                    m.SelfMulSub(h, t),
                    (p += k * box2d.b2CrossVV(s.rB, t)),
                    o.SelfMulAdd(j, t);
            (this.m_velocities[f].w = n), (this.m_velocities[g].w = p);
        }
    }),
    (box2d.b2ContactSolver.prototype.WarmStart.s_P = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.SolveVelocityConstraints = function () {
        var a,
            b,
            c,
            d,
            e,
            f,
            g,
            h,
            i,
            j,
            k,
            l,
            m,
            n,
            o,
            p,
            q,
            r,
            s,
            t,
            u,
            v,
            w,
            x,
            y,
            z,
            A,
            B,
            C,
            D = box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv,
            E = box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv1,
            F = box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv2,
            G = box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P,
            H = box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_a,
            I = box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_b,
            J = box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_x,
            K = box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_d,
            L = box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1,
            M = box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P2,
            N = box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1P2;
        for (a = 0, b = this.m_count; a < b; ++a) {
            for (
                f = (e = this.m_velocityConstraints[a]).indexA,
                    g = e.indexB,
                    h = e.invMassA,
                    i = e.invIA,
                    j = e.invMassB,
                    k = e.invIB,
                    l = e.pointCount,
                    m = this.m_velocities[f].v,
                    n = this.m_velocities[f].w,
                    o = this.m_velocities[g].v,
                    p = this.m_velocities[g].w,
                    q = e.normal,
                    r = e.tangent,
                    s = e.friction,
                    box2d.ENABLE_ASSERTS && box2d.b2Assert(1 === l || 2 === l),
                    c = 0,
                    d = l;
                c < d;
                ++c
            )
                (t = e.points[c]),
                    box2d.b2SubVV(box2d.b2AddVCrossSV(o, p, t.rB, box2d.b2Vec2.s_t0), box2d.b2AddVCrossSV(m, n, t.rA, box2d.b2Vec2.s_t1), D),
                    (u = box2d.b2DotVV(D, r) - e.tangentSpeed),
                    (w = t.tangentMass * -u),
                    (x = s * t.normalImpulse),
                    (w = (y = box2d.b2Clamp(t.tangentImpulse + w, -x, x)) - t.tangentImpulse),
                    (t.tangentImpulse = y),
                    box2d.b2MulSV(w, r, G),
                    m.SelfMulSub(h, G),
                    (n -= i * box2d.b2CrossVV(t.rA, G)),
                    o.SelfMulAdd(j, G),
                    (p += k * box2d.b2CrossVV(t.rB, G));
            if (1 === e.pointCount)
                (t = e.points[0]),
                    box2d.b2SubVV(box2d.b2AddVCrossSV(o, p, t.rB, box2d.b2Vec2.s_t0), box2d.b2AddVCrossSV(m, n, t.rA, box2d.b2Vec2.s_t1), D),
                    (v = box2d.b2DotVV(D, q)),
                    (w = -t.normalMass * (v - t.velocityBias)),
                    (w = (y = box2d.b2Max(t.normalImpulse + w, 0)) - t.normalImpulse),
                    (t.normalImpulse = y),
                    box2d.b2MulSV(w, q, G),
                    m.SelfMulSub(h, G),
                    (n -= i * box2d.b2CrossVV(t.rA, G)),
                    o.SelfMulAdd(j, G),
                    (p += k * box2d.b2CrossVV(t.rB, G));
            else
                for (
                    z = e.points[0],
                        A = e.points[1],
                        H.SetXY(z.normalImpulse, A.normalImpulse),
                        box2d.ENABLE_ASSERTS && box2d.b2Assert(0 <= H.x && 0 <= H.y),
                        box2d.b2SubVV(box2d.b2AddVCrossSV(o, p, z.rB, box2d.b2Vec2.s_t0), box2d.b2AddVCrossSV(m, n, z.rA, box2d.b2Vec2.s_t1), E),
                        box2d.b2SubVV(box2d.b2AddVCrossSV(o, p, A.rB, box2d.b2Vec2.s_t0), box2d.b2AddVCrossSV(m, n, A.rA, box2d.b2Vec2.s_t1), F),
                        B = box2d.b2DotVV(E, q),
                        C = box2d.b2DotVV(F, q),
                        I.x = B - z.velocityBias,
                        I.y = C - A.velocityBias,
                        I.SelfSub(box2d.b2MulMV(e.K, H, box2d.b2Vec2.s_t0));
                    ;

                ) {
                    if ((box2d.b2MulMV(e.normalMass, I, J).SelfNeg(), 0 <= J.x && 0 <= J.y)) {
                        box2d.b2SubVV(J, H, K),
                            box2d.b2MulSV(K.x, q, L),
                            box2d.b2MulSV(K.y, q, M),
                            box2d.b2AddVV(L, M, N),
                            m.SelfMulSub(h, N),
                            (n -= i * (box2d.b2CrossVV(z.rA, L) + box2d.b2CrossVV(A.rA, M))),
                            o.SelfMulAdd(j, N),
                            (p += k * (box2d.b2CrossVV(z.rB, L) + box2d.b2CrossVV(A.rB, M))),
                            (z.normalImpulse = J.x),
                            (A.normalImpulse = J.y);
                        break;
                    }
                    if (((J.x = -z.normalMass * I.x), (B = J.y = 0), (C = e.K.ex.y * J.x + I.y), 0 <= J.x && 0 <= C)) {
                        box2d.b2SubVV(J, H, K),
                            box2d.b2MulSV(K.x, q, L),
                            box2d.b2MulSV(K.y, q, M),
                            box2d.b2AddVV(L, M, N),
                            m.SelfMulSub(h, N),
                            (n -= i * (box2d.b2CrossVV(z.rA, L) + box2d.b2CrossVV(A.rA, M))),
                            o.SelfMulAdd(j, N),
                            (p += k * (box2d.b2CrossVV(z.rB, L) + box2d.b2CrossVV(A.rB, M))),
                            (z.normalImpulse = J.x),
                            (A.normalImpulse = J.y);
                        break;
                    }
                    if (((J.x = 0), (J.y = -A.normalMass * I.y), (B = e.K.ey.x * J.y + I.x), (C = 0) <= J.y && 0 <= B)) {
                        box2d.b2SubVV(J, H, K),
                            box2d.b2MulSV(K.x, q, L),
                            box2d.b2MulSV(K.y, q, M),
                            box2d.b2AddVV(L, M, N),
                            m.SelfMulSub(h, N),
                            (n -= i * (box2d.b2CrossVV(z.rA, L) + box2d.b2CrossVV(A.rA, M))),
                            o.SelfMulAdd(j, N),
                            (p += k * (box2d.b2CrossVV(z.rB, L) + box2d.b2CrossVV(A.rB, M))),
                            (z.normalImpulse = J.x),
                            (A.normalImpulse = J.y);
                        break;
                    }
                    if (((J.x = 0), (J.y = 0), (B = I.x), (C = I.y), 0 <= B && 0 <= C)) {
                        box2d.b2SubVV(J, H, K),
                            box2d.b2MulSV(K.x, q, L),
                            box2d.b2MulSV(K.y, q, M),
                            box2d.b2AddVV(L, M, N),
                            m.SelfMulSub(h, N),
                            (n -= i * (box2d.b2CrossVV(z.rA, L) + box2d.b2CrossVV(A.rA, M))),
                            o.SelfMulAdd(j, N),
                            (p += k * (box2d.b2CrossVV(z.rB, L) + box2d.b2CrossVV(A.rB, M))),
                            (z.normalImpulse = J.x),
                            (A.normalImpulse = J.y);
                        break;
                    }
                    break;
                }
            (this.m_velocities[f].w = n), (this.m_velocities[g].w = p);
        }
    }),
    (box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv1 = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_dv2 = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_a = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_b = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_x = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_d = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1 = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P2 = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.SolveVelocityConstraints.s_P1P2 = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.StoreImpulses = function () {
        var a, b, c, d, e, f;
        for (a = 0, b = this.m_count; a < b; ++a)
            for (e = this.m_velocityConstraints[a], f = this.m_contacts[e.contactIndex].GetManifold(), c = 0, d = e.pointCount; c < d; ++c)
                (f.points[c].normalImpulse = e.points[c].normalImpulse), (f.points[c].tangentImpulse = e.points[c].tangentImpulse);
    }),
    (box2d.b2PositionSolverManifold = function () {
        (this.normal = new box2d.b2Vec2()), (this.point = new box2d.b2Vec2());
    }),
    (box2d.b2PositionSolverManifold.prototype.normal = null),
    (box2d.b2PositionSolverManifold.prototype.point = null),
    (box2d.b2PositionSolverManifold.prototype.separation = 0),
    (box2d.b2PositionSolverManifold.prototype.Initialize = function (a, b, c, d) {
        var e = box2d.b2PositionSolverManifold.prototype.Initialize.s_pointA,
            f = box2d.b2PositionSolverManifold.prototype.Initialize.s_pointB,
            g = box2d.b2PositionSolverManifold.prototype.Initialize.s_planePoint,
            h = box2d.b2PositionSolverManifold.prototype.Initialize.s_clipPoint;
        switch ((box2d.ENABLE_ASSERTS && box2d.b2Assert(0 < a.pointCount), a.type)) {
            case box2d.b2ManifoldType.e_circles:
                box2d.b2MulXV(b, a.localPoint, e),
                    box2d.b2MulXV(c, a.localPoints[0], f),
                    box2d.b2SubVV(f, e, this.normal).SelfNormalize(),
                    box2d.b2MidVV(e, f, this.point),
                    (this.separation = box2d.b2DotVV(box2d.b2SubVV(f, e, box2d.b2Vec2.s_t0), this.normal) - a.radiusA - a.radiusB);
                break;
            case box2d.b2ManifoldType.e_faceA:
                box2d.b2MulRV(b.q, a.localNormal, this.normal),
                    box2d.b2MulXV(b, a.localPoint, g),
                    box2d.b2MulXV(c, a.localPoints[d], h),
                    (this.separation = box2d.b2DotVV(box2d.b2SubVV(h, g, box2d.b2Vec2.s_t0), this.normal) - a.radiusA - a.radiusB),
                    this.point.Copy(h);
                break;
            case box2d.b2ManifoldType.e_faceB:
                box2d.b2MulRV(c.q, a.localNormal, this.normal),
                    box2d.b2MulXV(c, a.localPoint, g),
                    box2d.b2MulXV(b, a.localPoints[d], h),
                    (this.separation = box2d.b2DotVV(box2d.b2SubVV(h, g, box2d.b2Vec2.s_t0), this.normal) - a.radiusA - a.radiusB),
                    this.point.Copy(h),
                    this.normal.SelfNeg();
        }
    }),
    (box2d.b2PositionSolverManifold.prototype.Initialize.s_pointA = new box2d.b2Vec2()),
    (box2d.b2PositionSolverManifold.prototype.Initialize.s_pointB = new box2d.b2Vec2()),
    (box2d.b2PositionSolverManifold.prototype.Initialize.s_planePoint = new box2d.b2Vec2()),
    (box2d.b2PositionSolverManifold.prototype.Initialize.s_clipPoint = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.SolvePositionConstraints = function () {
        var a,
            b,
            c,
            d,
            e,
            f,
            g,
            h,
            i,
            j,
            k,
            l,
            m,
            n,
            o,
            p,
            q,
            r,
            s,
            t,
            u,
            v,
            w,
            x,
            y,
            z,
            A = box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfA,
            B = box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfB,
            C = box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_psm,
            D = box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rA,
            E = box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rB,
            F = box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_P,
            G = 0;
        for (a = 0, b = this.m_count; a < b; ++a) {
            for (
                f = (e = this.m_positionConstraints[a]).indexA,
                    g = e.indexB,
                    h = e.localCenterA,
                    i = e.invMassA,
                    j = e.invIA,
                    k = e.localCenterB,
                    l = e.invMassB,
                    m = e.invIB,
                    n = e.pointCount,
                    o = this.m_positions[f].c,
                    p = this.m_positions[f].a,
                    q = this.m_positions[g].c,
                    r = this.m_positions[g].a,
                    c = 0,
                    d = n;
                c < d;
                ++c
            )
                A.q.SetAngleRadians(p),
                    B.q.SetAngleRadians(r),
                    box2d.b2SubVV(o, box2d.b2MulRV(A.q, h, box2d.b2Vec2.s_t0), A.p),
                    box2d.b2SubVV(q, box2d.b2MulRV(B.q, k, box2d.b2Vec2.s_t0), B.p),
                    C.Initialize(e, A, B, c),
                    (s = C.normal),
                    (t = C.point),
                    (u = C.separation),
                    box2d.b2SubVV(t, o, D),
                    box2d.b2SubVV(t, q, E),
                    (G = box2d.b2Min(G, u)),
                    (v = box2d.b2Clamp(box2d.b2_baumgarte * (u + box2d.b2_linearSlop), -box2d.b2_maxLinearCorrection, 0)),
                    (z = 0 < (y = i + l + j * (w = box2d.b2CrossVV(D, s)) * w + m * (x = box2d.b2CrossVV(E, s)) * x) ? -v / y : 0),
                    box2d.b2MulSV(z, s, F),
                    o.SelfMulSub(i, F),
                    (p -= j * box2d.b2CrossVV(D, F)),
                    q.SelfMulAdd(l, F),
                    (r += m * box2d.b2CrossVV(E, F));
            (this.m_positions[f].a = p), (this.m_positions[g].a = r);
        }
        return G > -3 * box2d.b2_linearSlop;
    }),
    (box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfA = new box2d.b2Transform()),
    (box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_xfB = new box2d.b2Transform()),
    (box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_psm = new box2d.b2PositionSolverManifold()),
    (box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rA = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_rB = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.SolvePositionConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints = function (a, b) {
        var c,
            d,
            e,
            f,
            g,
            h,
            i,
            j,
            k,
            l,
            m,
            n,
            o,
            p,
            q,
            r,
            s,
            t,
            u,
            v,
            w,
            x,
            y,
            z,
            A,
            B,
            C = box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfA,
            D = box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfB,
            E = box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_psm,
            F = box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rA,
            G = box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rB,
            H = box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_P,
            I = 0;
        for (c = 0, d = this.m_count; c < d; ++c) {
            for (
                h = (g = this.m_positionConstraints[c]).indexA,
                    i = g.indexB,
                    j = g.localCenterA,
                    k = g.localCenterB,
                    l = g.pointCount,
                    n = m = 0,
                    (h === a || h === b) && ((m = g.invMassA), (n = g.invIA)),
                    p = o = 0,
                    (i === a || i === b) && ((o = g.invMassB), (p = g.invIB)),
                    q = this.m_positions[h].c,
                    r = this.m_positions[h].a,
                    s = this.m_positions[i].c,
                    t = this.m_positions[i].a,
                    e = 0,
                    f = l;
                e < f;
                ++e
            )
                C.q.SetAngleRadians(r),
                    D.q.SetAngleRadians(t),
                    box2d.b2SubVV(q, box2d.b2MulRV(C.q, j, box2d.b2Vec2.s_t0), C.p),
                    box2d.b2SubVV(s, box2d.b2MulRV(D.q, k, box2d.b2Vec2.s_t0), D.p),
                    E.Initialize(g, C, D, e),
                    (u = E.normal),
                    (v = E.point),
                    (w = E.separation),
                    box2d.b2SubVV(v, q, F),
                    box2d.b2SubVV(v, s, G),
                    (I = box2d.b2Min(I, w)),
                    (x = box2d.b2Clamp(box2d.b2_toiBaumgarte * (w + box2d.b2_linearSlop), -box2d.b2_maxLinearCorrection, 0)),
                    (B = 0 < (A = m + o + n * (y = box2d.b2CrossVV(F, u)) * y + p * (z = box2d.b2CrossVV(G, u)) * z) ? -x / A : 0),
                    box2d.b2MulSV(B, u, H),
                    q.SelfMulSub(m, H),
                    (r -= n * box2d.b2CrossVV(F, H)),
                    s.SelfMulAdd(o, H),
                    (t += p * box2d.b2CrossVV(G, H));
            (this.m_positions[h].a = r), (this.m_positions[i].a = t);
        }
        return I >= -1.5 * box2d.b2_linearSlop;
    }),
    (box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfA = new box2d.b2Transform()),
    (box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_xfB = new box2d.b2Transform()),
    (box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_psm = new box2d.b2PositionSolverManifold()),
    (box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rA = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_rB = new box2d.b2Vec2()),
    (box2d.b2ContactSolver.prototype.SolveTOIPositionConstraints.s_P = new box2d.b2Vec2()),
    goog.provide("box2d.b2WorldCallbacks"),
    goog.require("box2d.b2Settings"),
    (box2d.b2DestructionListener = function () {}),
    (box2d.b2DestructionListener.prototype.SayGoodbyeJoint = function () {}),
    (box2d.b2DestructionListener.prototype.SayGoodbyeFixture = function () {}),
    (box2d.b2ContactFilter = function () {}),
    (box2d.b2ContactFilter.prototype.ShouldCollide = function (a, b) {
        var c = a.GetFilterData(),
            d = b.GetFilterData();
        return c.groupIndex === d.groupIndex && 0 !== c.groupIndex ? 0 < c.groupIndex : 0 != (c.maskBits & d.categoryBits) && 0 != (c.categoryBits & d.maskBits);
    }),
    (box2d.b2ContactFilter.b2_defaultFilter = new box2d.b2ContactFilter()),
    (box2d.b2ContactImpulse = function () {
        (this.normalImpulses = box2d.b2MakeNumberArray(box2d.b2_maxManifoldPoints)), (this.tangentImpulses = box2d.b2MakeNumberArray(box2d.b2_maxManifoldPoints));
    }),
    (box2d.b2ContactImpulse.prototype.normalImpulses = null),
    (box2d.b2ContactImpulse.prototype.tangentImpulses = null),
    (box2d.b2ContactImpulse.prototype.count = 0),
    (box2d.b2ContactListener = function () {}),
    (box2d.b2ContactListener.prototype.BeginContact = function () {}),
    (box2d.b2ContactListener.prototype.EndContact = function () {}),
    (box2d.b2ContactListener.prototype.PreSolve = function () {}),
    (box2d.b2ContactListener.prototype.PostSolve = function () {}),
    (box2d.b2ContactListener.b2_defaultListener = new box2d.b2ContactListener()),
    (box2d.b2QueryCallback = function () {}),
    (box2d.b2QueryCallback.prototype.ReportFixture = function () {
        return !0;
    }),
    (box2d.b2RayCastCallback = function () {}),
    (box2d.b2RayCastCallback.prototype.ReportFixture = function (a, b, c, d) {
        return d;
    }),
    goog.provide("box2d.b2Island"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Timer"),
    goog.require("box2d.b2TimeStep"),
    goog.require("box2d.b2WorldCallbacks"),
    goog.require("box2d.b2ContactSolver"),
    (box2d.b2Island = function () {
        (this.m_bodies = new Array(1024)), (this.m_contacts = new Array(1024)), (this.m_joints = new Array(1024)), (this.m_positions = box2d.b2Position.MakeArray(1024)), (this.m_velocities = box2d.b2Velocity.MakeArray(1024));
    }),
    (box2d.b2Island.prototype.m_allocator = null),
    (box2d.b2Island.prototype.m_listener = null),
    (box2d.b2Island.prototype.m_bodies = null),
    (box2d.b2Island.prototype.m_contacts = null),
    (box2d.b2Island.prototype.m_joints = null),
    (box2d.b2Island.prototype.m_positions = null),
    (box2d.b2Island.prototype.m_velocities = null),
    (box2d.b2Island.prototype.m_bodyCount = 0),
    (box2d.b2Island.prototype.m_jointCount = 0),
    (box2d.b2Island.prototype.m_contactCount = 0),
    (box2d.b2Island.prototype.m_bodyCapacity = 0),
    (box2d.b2Island.prototype.m_contactCapacity = 0),
    (box2d.b2Island.prototype.m_jointCapacity = 0),
    (box2d.b2Island.prototype.Initialize = function (a, b, c, d, e) {
        for (this.m_bodyCapacity = a, this.m_contactCapacity = b, this.m_jointCapacity = c, this.m_bodyCount = 0, this.m_contactCount = 0, this.m_jointCount = 0, this.m_allocator = d, this.m_listener = e; this.m_bodies.length < a; )
            this.m_bodies[this.m_bodies.length] = null;
        for (; this.m_contacts.length < b; ) this.m_contacts[this.m_contacts.length] = null;
        for (; this.m_joints.length < c; ) this.m_joints[this.m_joints.length] = null;
        if (this.m_positions.length < a) {
            var f = box2d.b2Max(2 * this.m_positions.length, a);
            for (box2d.DEBUG && window.console.log("box2d.b2Island.m_positions: " + f); this.m_positions.length < f; ) this.m_positions[this.m_positions.length] = new box2d.b2Position();
        }
        if (this.m_velocities.length < a) {
            f = box2d.b2Max(2 * this.m_velocities.length, a);
            for (box2d.DEBUG && window.console.log("box2d.b2Island.m_velocities: " + f); this.m_velocities.length < f; ) this.m_velocities[this.m_velocities.length] = new box2d.b2Velocity();
        }
    }),
    (box2d.b2Island.prototype.Clear = function () {
        (this.m_bodyCount = 0), (this.m_contactCount = 0), (this.m_jointCount = 0);
    }),
    (box2d.b2Island.prototype.AddBody = function (a) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(this.m_bodyCount < this.m_bodyCapacity), (a.m_islandIndex = this.m_bodyCount), (this.m_bodies[this.m_bodyCount++] = a);
    }),
    (box2d.b2Island.prototype.AddContact = function (a) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(this.m_contactCount < this.m_contactCapacity), (this.m_contacts[this.m_contactCount++] = a);
    }),
    (box2d.b2Island.prototype.AddJoint = function (a) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(this.m_jointCount < this.m_jointCapacity), (this.m_joints[this.m_jointCount++] = a);
    }),
    (box2d.b2Island.prototype.Solve = function (a, b, c, d) {
        for (var e = box2d.b2Island.s_timer.Reset(), f = b.dt, g = 0; g < this.m_bodyCount; ++g) {
            var h = this.m_bodies[g],
                i = this.m_positions[g].c.Copy(h.m_sweep.c),
                j = h.m_sweep.a,
                k = this.m_velocities[g].v.Copy(h.m_linearVelocity),
                l = h.m_angularVelocity;
            h.m_sweep.c0.Copy(h.m_sweep.c),
                (h.m_sweep.a0 = h.m_sweep.a),
                h.m_type === box2d.b2BodyType.b2_dynamicBody &&
                    ((k.x += f * (h.m_gravityScale * c.x + h.m_invMass * h.m_force.x)),
                    (k.y += f * (h.m_gravityScale * c.y + h.m_invMass * h.m_force.y)),
                    (l += f * h.m_invI * h.m_torque),
                    k.SelfMul(1 / (1 + f * h.m_linearDamping)),
                    (l *= 1 / (1 + f * h.m_angularDamping))),
                (this.m_positions[g].a = j),
                (this.m_velocities[g].w = l);
        }
        e.Reset();
        var m = box2d.b2Island.s_solverData;
        m.step.Copy(b), (m.positions = this.m_positions), (m.velocities = this.m_velocities);
        var n = box2d.b2Island.s_contactSolverDef;
        n.step.Copy(b), (n.contacts = this.m_contacts), (n.count = this.m_contactCount), (n.positions = this.m_positions), (n.velocities = this.m_velocities), (n.allocator = this.m_allocator);
        var o = box2d.b2Island.s_contactSolver.Initialize(n);
        o.InitializeVelocityConstraints(), b.warmStarting && o.WarmStart();
        for (g = 0; g < this.m_jointCount; ++g) this.m_joints[g].InitVelocityConstraints(m);
        (a.solveInit = e.GetMilliseconds()), e.Reset();
        for (g = 0; g < b.velocityIterations; ++g) {
            for (var p = 0; p < this.m_jointCount; ++p) this.m_joints[p].SolveVelocityConstraints(m);
            o.SolveVelocityConstraints();
        }
        o.StoreImpulses(), (a.solveVelocity = e.GetMilliseconds());
        for (g = 0; g < this.m_bodyCount; ++g) {
            (i = this.m_positions[g].c), (j = this.m_positions[g].a), (k = this.m_velocities[g].v), (l = this.m_velocities[g].w);
            var q = box2d.b2MulSV(f, k, box2d.b2Island.s_translation);
            if (box2d.b2DotVV(q, q) > box2d.b2_maxTranslationSquared) {
                var r = box2d.b2_maxTranslation / q.GetLength();
                k.SelfMul(r);
            }
            var s = f * l;
            if (s * s > box2d.b2_maxRotationSquared) l *= r = box2d.b2_maxRotation / box2d.b2Abs(s);
            (i.x += f * k.x), (i.y += f * k.y), (j += f * l), (this.m_positions[g].a = j), (this.m_velocities[g].w = l);
        }
        e.Reset();
        var t = !1;
        for (g = 0; g < b.positionIterations; ++g) {
            var u = o.SolvePositionConstraints(),
                v = !0;
            for (p = 0; p < this.m_jointCount; ++p) {
                var w = this.m_joints[p].SolvePositionConstraints(m);
                v = v && w;
            }
            if (u && v) {
                t = !0;
                break;
            }
        }
        for (g = 0; g < this.m_bodyCount; ++g) {
            var x = this.m_bodies[g];
            x.m_sweep.c.Copy(this.m_positions[g].c), (x.m_sweep.a = this.m_positions[g].a), x.m_linearVelocity.Copy(this.m_velocities[g].v), (x.m_angularVelocity = this.m_velocities[g].w), x.SynchronizeTransform();
        }
        if (((a.solvePosition = e.GetMilliseconds()), this.Report(o.m_velocityConstraints), d)) {
            var y = box2d.b2_maxFloat,
                z = box2d.b2_linearSleepTolerance * box2d.b2_linearSleepTolerance,
                A = box2d.b2_angularSleepTolerance * box2d.b2_angularSleepTolerance;
            for (g = 0; g < this.m_bodyCount; ++g) {
                (h = this.m_bodies[g]).GetType() !== box2d.b2BodyType.b2_staticBody &&
                    (y =
                        0 == (h.m_flags & box2d.b2BodyFlag.e_autoSleepFlag) || h.m_angularVelocity * h.m_angularVelocity > A || box2d.b2DotVV(h.m_linearVelocity, h.m_linearVelocity) > z
                            ? (h.m_sleepTime = 0)
                            : ((h.m_sleepTime += f), box2d.b2Min(y, h.m_sleepTime)));
            }
            if (y >= box2d.b2_timeToSleep && t)
                for (g = 0; g < this.m_bodyCount; ++g) {
                    (h = this.m_bodies[g]).SetAwake(!1);
                }
        }
    }),
    (box2d.b2Island.prototype.SolveTOI = function (a, b, c) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(b < this.m_bodyCount), box2d.ENABLE_ASSERTS && box2d.b2Assert(c < this.m_bodyCount);
        for (var d = 0; d < this.m_bodyCount; ++d) {
            var e = this.m_bodies[d];
            this.m_positions[d].c.Copy(e.m_sweep.c), (this.m_positions[d].a = e.m_sweep.a), this.m_velocities[d].v.Copy(e.m_linearVelocity), (this.m_velocities[d].w = e.m_angularVelocity);
        }
        var f = box2d.b2Island.s_contactSolverDef;
        (f.contacts = this.m_contacts), (f.count = this.m_contactCount), (f.allocator = this.m_allocator), f.step.Copy(a), (f.positions = this.m_positions), (f.velocities = this.m_velocities);
        var g = box2d.b2Island.s_contactSolver.Initialize(f);
        for (d = 0; d < a.positionIterations; ++d) {
            if (g.SolveTOIPositionConstraints(b, c)) break;
        }
        this.m_bodies[b].m_sweep.c0.Copy(this.m_positions[b].c),
            (this.m_bodies[b].m_sweep.a0 = this.m_positions[b].a),
            this.m_bodies[c].m_sweep.c0.Copy(this.m_positions[c].c),
            (this.m_bodies[c].m_sweep.a0 = this.m_positions[c].a),
            g.InitializeVelocityConstraints();
        for (d = 0; d < a.velocityIterations; ++d) g.SolveVelocityConstraints();
        var i = a.dt;
        for (d = 0; d < this.m_bodyCount; ++d) {
            var j = this.m_positions[d].c,
                k = this.m_positions[d].a,
                l = this.m_velocities[d].v,
                m = this.m_velocities[d].w,
                n = box2d.b2MulSV(i, l, box2d.b2Island.s_translation);
            if (box2d.b2DotVV(n, n) > box2d.b2_maxTranslationSquared) {
                var o = box2d.b2_maxTranslation / n.GetLength();
                l.SelfMul(o);
            }
            var p = i * m;
            if (p * p > box2d.b2_maxRotationSquared) m *= o = box2d.b2_maxRotation / box2d.b2Abs(p);
            j.SelfMulAdd(i, l), (k += i * m), (this.m_positions[d].a = k), (this.m_velocities[d].w = m);
            var q = this.m_bodies[d];
            q.m_sweep.c.Copy(j), (q.m_sweep.a = k), q.m_linearVelocity.Copy(l), (q.m_angularVelocity = m), q.SynchronizeTransform();
        }
        this.Report(g.m_velocityConstraints);
    }),
    (box2d.b2Island.prototype.Report = function (a) {
        if (null !== this.m_listener)
            for (var b = 0; b < this.m_contactCount; ++b) {
                var c = this.m_contacts[b];
                if (c) {
                    var d = a[b],
                        e = box2d.b2Island.s_impulse;
                    e.count = d.pointCount;
                    for (var f = 0; f < d.pointCount; ++f) (e.normalImpulses[f] = d.points[f].normalImpulse), (e.tangentImpulses[f] = d.points[f].tangentImpulse);
                    this.m_listener.PostSolve(c, e);
                }
            }
    }),
    (box2d.b2Island.s_timer = new box2d.b2Timer()),
    (box2d.b2Island.s_solverData = new box2d.b2SolverData()),
    (box2d.b2Island.s_contactSolverDef = new box2d.b2ContactSolverDef()),
    (box2d.b2Island.s_contactSolver = new box2d.b2ContactSolver()),
    (box2d.b2Island.s_translation = new box2d.b2Vec2()),
    (box2d.b2Island.s_impulse = new box2d.b2ContactImpulse()),
    goog.provide("box2d.b2ContactFactory"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Contact"),
    (box2d.b2ContactRegister = function () {}),
    (box2d.b2ContactRegister.prototype.createFcn = null),
    (box2d.b2ContactRegister.prototype.destroyFcn = null),
    (box2d.b2ContactRegister.prototype.primary = !1),
    (box2d.b2ContactFactory = function (a) {
        (this.m_allocator = a), this.InitializeRegisters();
    }),
    (box2d.b2ContactFactory.prototype.m_allocator = null),
    (box2d.b2ContactFactory.prototype.AddType = function (a, b, c, d) {
        var e = box2d.b2MakeArray(256, function () {
                return a();
            }),
            f = function (b) {
                return 0 < e.length ? e.pop() : a(b);
            },
            g = function (a) {
                e.push(a);
            };
        (this.m_registers[c][d].pool = e),
            (this.m_registers[c][d].createFcn = f),
            (this.m_registers[c][d].destroyFcn = g),
            (this.m_registers[c][d].primary = !0),
            c !== d && ((this.m_registers[d][c].pool = e), (this.m_registers[d][c].createFcn = f), (this.m_registers[d][c].destroyFcn = g), (this.m_registers[d][c].primary = !1));
    }),
    (box2d.b2ContactFactory.prototype.InitializeRegisters = function () {
        this.m_registers = new Array(box2d.b2ShapeType.e_shapeTypeCount);
        for (var a = 0; a < box2d.b2ShapeType.e_shapeTypeCount; a++) {
            this.m_registers[a] = new Array(box2d.b2ShapeType.e_shapeTypeCount);
            for (var b = 0; b < box2d.b2ShapeType.e_shapeTypeCount; b++) this.m_registers[a][b] = new box2d.b2ContactRegister();
        }
        this.AddType(box2d.b2CircleContact.Create, box2d.b2CircleContact.Destroy, box2d.b2ShapeType.e_circleShape, box2d.b2ShapeType.e_circleShape),
            this.AddType(box2d.b2PolygonAndCircleContact.Create, box2d.b2PolygonAndCircleContact.Destroy, box2d.b2ShapeType.e_polygonShape, box2d.b2ShapeType.e_circleShape),
            this.AddType(box2d.b2PolygonContact.Create, box2d.b2PolygonContact.Destroy, box2d.b2ShapeType.e_polygonShape, box2d.b2ShapeType.e_polygonShape),
            this.AddType(box2d.b2EdgeAndCircleContact.Create, box2d.b2EdgeAndCircleContact.Destroy, box2d.b2ShapeType.e_edgeShape, box2d.b2ShapeType.e_circleShape),
            this.AddType(box2d.b2EdgeAndPolygonContact.Create, box2d.b2EdgeAndPolygonContact.Destroy, box2d.b2ShapeType.e_edgeShape, box2d.b2ShapeType.e_polygonShape),
            this.AddType(box2d.b2ChainAndCircleContact.Create, box2d.b2ChainAndCircleContact.Destroy, box2d.b2ShapeType.e_chainShape, box2d.b2ShapeType.e_circleShape),
            this.AddType(box2d.b2ChainAndPolygonContact.Create, box2d.b2ChainAndPolygonContact.Destroy, box2d.b2ShapeType.e_chainShape, box2d.b2ShapeType.e_polygonShape);
    }),
    (box2d.b2ContactFactory.prototype.Create = function (a, b, c, d) {
        var e = a.GetType(),
            f = c.GetType();
        box2d.ENABLE_ASSERTS && box2d.b2Assert(0 <= e && e < box2d.b2ShapeType.e_shapeTypeCount), box2d.ENABLE_ASSERTS && box2d.b2Assert(0 <= f && f < box2d.b2ShapeType.e_shapeTypeCount);
        var i,
            g = this.m_registers[e][f],
            h = g.createFcn;
        return null === h ? null : (g.primary ? (i = h(this.m_allocator)).Reset(a, b, c, d) : (i = h(this.m_allocator)).Reset(c, d, a, b), i);
    }),
    (box2d.b2ContactFactory.prototype.Destroy = function (a) {
        var b = a.m_fixtureA,
            c = a.m_fixtureB;
        0 < a.m_manifold.pointCount && !1 === b.IsSensor() && !1 === c.IsSensor() && (b.GetBody().SetAwake(!0), c.GetBody().SetAwake(!0));
        var d = b.GetType(),
            e = c.GetType();
        box2d.ENABLE_ASSERTS && box2d.b2Assert(0 <= d && e < box2d.b2ShapeType.e_shapeTypeCount),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(0 <= d && e < box2d.b2ShapeType.e_shapeTypeCount),
            (0, this.m_registers[d][e].destroyFcn)(a, this.m_allocator);
    }),
    goog.provide("box2d.b2GrowableStack"),
    goog.require("box2d.b2Settings"),
    (box2d.b2GrowableStack = function (a) {
        this.m_stack = new Array(a);
    }),
    (box2d.b2GrowableStack.prototype.m_stack = null),
    (box2d.b2GrowableStack.prototype.m_count = 0),
    (box2d.b2GrowableStack.prototype.Reset = function () {
        return (this.m_count = 0), this;
    }),
    (box2d.b2GrowableStack.prototype.Push = function (a) {
        (this.m_stack[this.m_count] = a), ++this.m_count;
    }),
    (box2d.b2GrowableStack.prototype.Pop = function () {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(0 < this.m_count), --this.m_count;
        var a = this.m_stack[this.m_count];
        return (this.m_stack[this.m_count] = null), a;
    }),
    (box2d.b2GrowableStack.prototype.GetCount = function () {
        return this.m_count;
    }),
    goog.provide("box2d.b2DynamicTree"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Collision"),
    goog.require("box2d.b2GrowableStack"),
    (box2d.b2TreeNode = function (a) {
        (this.m_id = a || 0), (this.aabb = new box2d.b2AABB());
    }),
    (box2d.b2TreeNode.prototype.m_id = 0),
    (box2d.b2TreeNode.prototype.aabb = null),
    (box2d.b2TreeNode.prototype.userData = null),
    (box2d.b2TreeNode.prototype.parent = null),
    (box2d.b2TreeNode.prototype.child1 = null),
    (box2d.b2TreeNode.prototype.child2 = null),
    (box2d.b2TreeNode.prototype.height = 0),
    (box2d.b2TreeNode.prototype.IsLeaf = function () {
        return null === this.child1;
    }),
    (box2d.b2DynamicTree = function () {}),
    (box2d.b2DynamicTree.prototype.m_root = null),
    (box2d.b2DynamicTree.prototype.m_freeList = null),
    (box2d.b2DynamicTree.prototype.m_path = 0),
    (box2d.b2DynamicTree.prototype.m_insertionCount = 0),
    (box2d.b2DynamicTree.s_stack = new box2d.b2GrowableStack(256)),
    (box2d.b2DynamicTree.s_r = new box2d.b2Vec2()),
    (box2d.b2DynamicTree.s_v = new box2d.b2Vec2()),
    (box2d.b2DynamicTree.s_abs_v = new box2d.b2Vec2()),
    (box2d.b2DynamicTree.s_segmentAABB = new box2d.b2AABB()),
    (box2d.b2DynamicTree.s_subInput = new box2d.b2RayCastInput()),
    (box2d.b2DynamicTree.s_combinedAABB = new box2d.b2AABB()),
    (box2d.b2DynamicTree.s_aabb = new box2d.b2AABB()),
    (box2d.b2DynamicTree.prototype.GetUserData = function (a) {
        return box2d.ENABLE_ASSERTS && box2d.b2Assert(null !== a), a.userData;
    }),
    (box2d.b2DynamicTree.prototype.GetFatAABB = function (a) {
        return box2d.ENABLE_ASSERTS && box2d.b2Assert(null !== a), a.aabb;
    }),
    (box2d.b2DynamicTree.prototype.Query = function (a, b) {
        if (null !== this.m_root) {
            var c = box2d.b2DynamicTree.s_stack.Reset();
            for (c.Push(this.m_root); 0 < c.GetCount(); ) {
                var d = c.Pop();
                if (null !== d && d.aabb.TestOverlap(b))
                    if (d.IsLeaf()) {
                        if (!1 === a(d)) return;
                    } else c.Push(d.child1), c.Push(d.child2);
            }
        }
    }),
    (box2d.b2DynamicTree.prototype.RayCast = function (a, b) {
        if (null !== this.m_root) {
            var c = b.p1,
                d = b.p2,
                e = box2d.b2SubVV(d, c, box2d.b2DynamicTree.s_r);
            box2d.ENABLE_ASSERTS && box2d.b2Assert(0 < e.GetLengthSquared()), e.Normalize();
            var f = box2d.b2CrossOneV(e, box2d.b2DynamicTree.s_v),
                g = box2d.b2AbsV(f, box2d.b2DynamicTree.s_abs_v),
                h = b.maxFraction,
                i = box2d.b2DynamicTree.s_segmentAABB,
                j = c.x + h * (d.x - c.x),
                k = c.y + h * (d.y - c.y);
            (i.lowerBound.x = box2d.b2Min(c.x, j)), (i.lowerBound.y = box2d.b2Min(c.y, k)), (i.upperBound.x = box2d.b2Max(c.x, j)), (i.upperBound.y = box2d.b2Max(c.y, k));
            var l = box2d.b2DynamicTree.s_stack.Reset();
            for (l.Push(this.m_root); 0 < l.GetCount(); ) {
                var m = l.Pop();
                if (null !== m && !1 !== box2d.b2TestOverlapAABB(m.aabb, i)) {
                    var n = m.aabb.GetCenter(),
                        o = m.aabb.GetExtents();
                    if (!(0 < box2d.b2Abs(box2d.b2DotVV(f, box2d.b2SubVV(c, n, box2d.b2Vec2.s_t0))) - box2d.b2DotVV(g, o)))
                        if (m.IsLeaf()) {
                            var q = box2d.b2DynamicTree.s_subInput;
                            q.p1.Copy(b.p1), q.p2.Copy(b.p2), (q.maxFraction = h);
                            var r = a(q, m);
                            if (0 === r) return;
                            0 < r &&
                                ((h = r),
                                (j = c.x + h * (d.x - c.x)),
                                (k = c.y + h * (d.y - c.y)),
                                (i.lowerBound.x = box2d.b2Min(c.x, j)),
                                (i.lowerBound.y = box2d.b2Min(c.y, k)),
                                (i.upperBound.x = box2d.b2Max(c.x, j)),
                                (i.upperBound.y = box2d.b2Max(c.y, k)));
                        } else l.Push(m.child1), l.Push(m.child2);
                }
            }
        }
    }),
    (box2d.b2DynamicTree.prototype.AllocateNode = function () {
        if (this.m_freeList) {
            var a = this.m_freeList;
            return (this.m_freeList = a.parent), (a.parent = null), (a.child1 = null), (a.child2 = null), (a.height = 0), (a.userData = null), a;
        }
        return new box2d.b2TreeNode(box2d.b2DynamicTree.prototype.s_node_id++);
    }),
    (box2d.b2DynamicTree.prototype.s_node_id = 0),
    (box2d.b2DynamicTree.prototype.FreeNode = function (a) {
        (a.parent = this.m_freeList), (a.height = -1), (this.m_freeList = a);
    }),
    (box2d.b2DynamicTree.prototype.CreateProxy = function (a, b) {
        var c = this.AllocateNode(),
            d = box2d.b2_aabbExtension,
            e = box2d.b2_aabbExtension;
        return (
            (c.aabb.lowerBound.x = a.lowerBound.x - d),
            (c.aabb.lowerBound.y = a.lowerBound.y - e),
            (c.aabb.upperBound.x = a.upperBound.x + d),
            (c.aabb.upperBound.y = a.upperBound.y + e),
            (c.userData = b),
            (c.height = 0),
            this.InsertLeaf(c),
            c
        );
    }),
    (box2d.b2DynamicTree.prototype.DestroyProxy = function (a) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(a.IsLeaf()), this.RemoveLeaf(a), this.FreeNode(a);
    }),
    (box2d.b2DynamicTree.prototype.MoveProxy = function (a, b, c) {
        if ((box2d.ENABLE_ASSERTS && box2d.b2Assert(a.IsLeaf()), a.aabb.Contains(b))) return !1;
        this.RemoveLeaf(a);
        var d = box2d.b2_aabbExtension + box2d.b2_aabbMultiplier * (0 < c.x ? c.x : -c.x),
            e = box2d.b2_aabbExtension + box2d.b2_aabbMultiplier * (0 < c.y ? c.y : -c.y);
        return (a.aabb.lowerBound.x = b.lowerBound.x - d), (a.aabb.lowerBound.y = b.lowerBound.y - e), (a.aabb.upperBound.x = b.upperBound.x + d), (a.aabb.upperBound.y = b.upperBound.y + e), this.InsertLeaf(a), !0;
    }),
    (box2d.b2DynamicTree.prototype.InsertLeaf = function (a) {
        if ((++this.m_insertionCount, null === this.m_root)) return (this.m_root = a), void (this.m_root.parent = null);
        for (var b, c, d = a.aabb, e = (d.GetCenter(), this.m_root); !1 === e.IsLeaf(); ) {
            (b = e.child1), (c = e.child2);
            var f = e.aabb.GetPerimeter(),
                g = box2d.b2DynamicTree.s_combinedAABB;
            g.Combine2(e.aabb, d);
            var h,
                i,
                o,
                k = g.GetPerimeter(),
                l = 2 * k,
                m = 2 * (k - f),
                n = box2d.b2DynamicTree.s_aabb;
            if (
                ((h = b.IsLeaf() ? (n.Combine2(d, b.aabb), n.GetPerimeter() + m) : (n.Combine2(d, b.aabb), (i = b.aabb.GetPerimeter()), n.GetPerimeter() - i + m)),
                (o = c.IsLeaf() ? (n.Combine2(d, c.aabb), n.GetPerimeter() + m) : (n.Combine2(d, c.aabb), (i = c.aabb.GetPerimeter()), n.GetPerimeter() - i + m)),
                l < h && l < o)
            )
                break;
            e = h < o ? b : c;
        }
        var p = e,
            q = p.parent,
            r = this.AllocateNode();
        for (
            r.parent = q,
                r.userData = null,
                r.aabb.Combine2(d, p.aabb),
                r.height = p.height + 1,
                q ? (q.child1 === p ? (q.child1 = r) : (q.child2 = r), (r.child1 = p), (r.child2 = a), (p.parent = r), (a.parent = r)) : ((r.child1 = p), (r.child2 = a), (p.parent = r), (a.parent = r), (this.m_root = r)),
                e = a.parent;
            null !== e;

        )
            (b = (e = this.Balance(e)).child1),
                (c = e.child2),
                box2d.ENABLE_ASSERTS && box2d.b2Assert(null !== b),
                box2d.ENABLE_ASSERTS && box2d.b2Assert(null !== c),
                (e.height = 1 + box2d.b2Max(b.height, c.height)),
                e.aabb.Combine2(b.aabb, c.aabb),
                (e = e.parent);
    }),
    (box2d.b2DynamicTree.prototype.RemoveLeaf = function (a) {
        if (a !== this.m_root) {
            var b,
                c = a.parent,
                d = c.parent;
            if (((b = c.child1 === a ? c.child2 : c.child1), d)) {
                d.child1 === c ? (d.child1 = b) : (d.child2 = b), (b.parent = d), this.FreeNode(c);
                for (var e = d; e; ) {
                    var f = (e = this.Balance(e)).child1,
                        g = e.child2;
                    e.aabb.Combine2(f.aabb, g.aabb), (e.height = 1 + box2d.b2Max(f.height, g.height)), (e = e.parent);
                }
            } else ((this.m_root = b).parent = null), this.FreeNode(c);
        } else this.m_root = null;
    }),
    (box2d.b2DynamicTree.prototype.Balance = function (a) {
        if ((box2d.ENABLE_ASSERTS && box2d.b2Assert(null !== a), a.IsLeaf() || a.height < 2)) return a;
        var b = a.child1,
            c = a.child2,
            d = c.height - b.height;
        if (1 < d) {
            var e = c.child1,
                f = c.child2;
            return (
                (c.child1 = a),
                (c.parent = a.parent),
                null !== (a.parent = c).parent ? (c.parent.child1 === a ? (c.parent.child1 = c) : (box2d.ENABLE_ASSERTS && box2d.b2Assert(c.parent.child2 === a), (c.parent.child2 = c))) : (this.m_root = c),
                e.height > f.height
                    ? ((c.child2 = e), ((a.child2 = f).parent = a).aabb.Combine2(b.aabb, f.aabb), c.aabb.Combine2(a.aabb, e.aabb), (a.height = 1 + box2d.b2Max(b.height, f.height)), (c.height = 1 + box2d.b2Max(a.height, e.height)))
                    : ((c.child2 = f), ((a.child2 = e).parent = a).aabb.Combine2(b.aabb, e.aabb), c.aabb.Combine2(a.aabb, f.aabb), (a.height = 1 + box2d.b2Max(b.height, e.height)), (c.height = 1 + box2d.b2Max(a.height, f.height))),
                c
            );
        }
        if (d < -1) {
            var g = b.child1,
                h = b.child2;
            return (
                (b.child1 = a),
                (b.parent = a.parent),
                null !== (a.parent = b).parent ? (b.parent.child1 === a ? (b.parent.child1 = b) : (box2d.ENABLE_ASSERTS && box2d.b2Assert(b.parent.child2 === a), (b.parent.child2 = b))) : (this.m_root = b),
                g.height > h.height
                    ? ((b.child2 = g), ((a.child1 = h).parent = a).aabb.Combine2(c.aabb, h.aabb), b.aabb.Combine2(a.aabb, g.aabb), (a.height = 1 + box2d.b2Max(c.height, h.height)), (b.height = 1 + box2d.b2Max(a.height, g.height)))
                    : ((b.child2 = h), ((a.child1 = g).parent = a).aabb.Combine2(c.aabb, g.aabb), b.aabb.Combine2(a.aabb, h.aabb), (a.height = 1 + box2d.b2Max(c.height, g.height)), (b.height = 1 + box2d.b2Max(a.height, h.height))),
                b
            );
        }
        return a;
    }),
    (box2d.b2DynamicTree.prototype.GetHeight = function () {
        return null === this.m_root ? 0 : this.m_root.height;
    }),
    (box2d.b2DynamicTree.prototype.GetAreaRatio = function () {
        if (null === this.m_root) return 0;
        var b = this.m_root.aabb.GetPerimeter(),
            c = function (a) {
                if (null === a) return 0;
                if (a.IsLeaf()) return 0;
                var b = a.aabb.GetPerimeter();
                return (b += c(a.child1)) + c(a.child2);
            };
        return c(this.m_root) / b;
    }),
    (box2d.b2DynamicTree.prototype.ComputeHeightNode = function (a) {
        if (a.IsLeaf()) return 0;
        var b = this.ComputeHeightNode(a.child1),
            c = this.ComputeHeightNode(a.child2);
        return 1 + box2d.b2Max(b, c);
    }),
    (box2d.b2DynamicTree.prototype.ComputeHeight = function () {
        return this.ComputeHeightNode(this.m_root);
    }),
    (box2d.b2DynamicTree.prototype.ValidateStructure = function (a) {
        if (null !== a) {
            a === this.m_root && box2d.ENABLE_ASSERTS && box2d.b2Assert(null === a.parent);
            var b = a,
                c = b.child1,
                d = b.child2;
            if (b.IsLeaf()) return box2d.ENABLE_ASSERTS && box2d.b2Assert(null === c), box2d.ENABLE_ASSERTS && box2d.b2Assert(null === d), void (box2d.ENABLE_ASSERTS && box2d.b2Assert(0 === b.height));
            box2d.ENABLE_ASSERTS && box2d.b2Assert(c.parent === a), box2d.ENABLE_ASSERTS && box2d.b2Assert(d.parent === a), this.ValidateStructure(c), this.ValidateStructure(d);
        }
    }),
    (box2d.b2DynamicTree.prototype.ValidateMetrics = function (a) {
        if (null !== a) {
            var b = a,
                c = b.child1,
                d = b.child2;
            if (b.IsLeaf()) return box2d.ENABLE_ASSERTS && box2d.b2Assert(null === c), box2d.ENABLE_ASSERTS && box2d.b2Assert(null === d), void (box2d.ENABLE_ASSERTS && box2d.b2Assert(0 === b.height));
            var e,
                f = c.height,
                g = d.height;
            (e = 1 + box2d.b2Max(f, g)), box2d.ENABLE_ASSERTS && box2d.b2Assert(b.height === e);
            var h = box2d.b2DynamicTree.s_aabb;
            h.Combine2(c.aabb, d.aabb),
                box2d.ENABLE_ASSERTS && box2d.b2Assert(h.lowerBound === b.aabb.lowerBound),
                box2d.ENABLE_ASSERTS && box2d.b2Assert(h.upperBound === b.aabb.upperBound),
                this.ValidateMetrics(c),
                this.ValidateMetrics(d);
        }
    }),
    (box2d.b2DynamicTree.prototype.Validate = function () {
        this.ValidateStructure(this.m_root), this.ValidateMetrics(this.m_root);
        for (var b = this.m_freeList; null !== b; ) (b = b.parent), 0;
        box2d.ENABLE_ASSERTS && box2d.b2Assert(this.GetHeight() === this.ComputeHeight());
    }),
    (box2d.b2DynamicTree.prototype.GetMaxBalance = function () {
        return (function (a, b) {
            if (null === a) return b;
            if (a.height <= 1) return b;
            box2d.ENABLE_ASSERTS && box2d.b2Assert(!1 === a.IsLeaf());
            var c = a.child1,
                d = a.child2,
                e = box2d.b2Abs(d.height - c.height);
            return box2d.b2Max(b, e);
        })(this.m_root, 0);
    }),
    (box2d.b2DynamicTree.prototype.RebuildBottomUp = function () {
        this.Validate();
    }),
    (box2d.b2DynamicTree.prototype.ShiftOrigin = function (a) {
        var b = function (a, c) {
            if (null !== a && !(a.height <= 1)) {
                box2d.ENABLE_ASSERTS && box2d.b2Assert(!1 === a.IsLeaf());
                var d = a.child1,
                    e = a.child2;
                b(d, c), b(e, c), a.aabb.lowerBound.SelfSub(c), a.aabb.upperBound.SelfSub(c);
            }
        };
        b(this.m_root, a);
    }),
    goog.provide("box2d.b2BroadPhase"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2DynamicTree"),
    (box2d.b2Pair = function () {}),
    (box2d.b2Pair.prototype.proxyA = null),
    (box2d.b2Pair.prototype.proxyB = null),
    (box2d.b2BroadPhase = function () {
        (this.m_tree = new box2d.b2DynamicTree()), (this.m_moveBuffer = new Array()), (this.m_pairBuffer = new Array());
    }),
    (box2d.b2BroadPhase.prototype.m_tree = null),
    (box2d.b2BroadPhase.prototype.m_proxyCount = 0),
    (box2d.b2BroadPhase.prototype.m_moveCount = 0),
    (box2d.b2BroadPhase.prototype.m_moveBuffer = null),
    (box2d.b2BroadPhase.prototype.m_pairCount = 0),
    (box2d.b2BroadPhase.prototype.m_pairBuffer = null),
    (box2d.b2BroadPhase.prototype.CreateProxy = function (a, b) {
        var c = this.m_tree.CreateProxy(a, b);
        return ++this.m_proxyCount, this.BufferMove(c), c;
    }),
    (box2d.b2BroadPhase.prototype.DestroyProxy = function (a) {
        this.UnBufferMove(a), --this.m_proxyCount, this.m_tree.DestroyProxy(a);
    }),
    (box2d.b2BroadPhase.prototype.MoveProxy = function (a, b, c) {
        this.m_tree.MoveProxy(a, b, c) && this.BufferMove(a);
    }),
    (box2d.b2BroadPhase.prototype.TouchProxy = function (a) {
        this.BufferMove(a);
    }),
    (box2d.b2BroadPhase.prototype.GetFatAABB = function (a) {
        return this.m_tree.GetFatAABB(a);
    }),
    (box2d.b2BroadPhase.prototype.GetUserData = function (a) {
        return this.m_tree.GetUserData(a);
    }),
    (box2d.b2BroadPhase.prototype.TestOverlap = function (a, b) {
        var c = this.m_tree.GetFatAABB(a),
            d = this.m_tree.GetFatAABB(b);
        return box2d.b2TestOverlapAABB(c, d);
    }),
    (box2d.b2BroadPhase.prototype.GetProxyCount = function () {
        return this.m_proxyCount;
    }),
    (box2d.b2BroadPhase.prototype.GetTreeHeight = function () {
        return this.m_tree.GetHeight();
    }),
    (box2d.b2BroadPhase.prototype.GetTreeBalance = function () {
        return this.m_tree.GetMaxBalance();
    }),
    (box2d.b2BroadPhase.prototype.GetTreeQuality = function () {
        return this.m_tree.GetAreaRatio();
    }),
    (box2d.b2BroadPhase.prototype.ShiftOrigin = function (a) {
        this.m_tree.ShiftOrigin(a);
    }),
    (box2d.b2BroadPhase.prototype.UpdatePairs = function (a) {
        for (var b = (this.m_pairCount = 0); b < this.m_moveCount; ++b) {
            var c = this.m_moveBuffer[b];
            if (null !== c) {
                var d = this,
                    f = this.m_tree.GetFatAABB(c);
                this.m_tree.Query(function (a) {
                    if (a.m_id === c.m_id) return !0;
                    d.m_pairCount === d.m_pairBuffer.length && (d.m_pairBuffer[d.m_pairCount] = new box2d.b2Pair());
                    var b = d.m_pairBuffer[d.m_pairCount];
                    return a.m_id < c.m_id ? ((b.proxyA = a), (b.proxyB = c)) : ((b.proxyA = c), (b.proxyB = a)), ++d.m_pairCount, !0;
                }, f);
            }
        }
        (this.m_moveCount = 0), (this.m_pairBuffer.length = this.m_pairCount), this.m_pairBuffer.sort(box2d.b2PairLessThan);
        for (b = 0; b < this.m_pairCount; ) {
            var g = this.m_pairBuffer[b],
                h = this.m_tree.GetUserData(g.proxyA),
                i = this.m_tree.GetUserData(g.proxyB);
            for (a.AddPair(h, i), ++b; b < this.m_pairCount; ) {
                var j = this.m_pairBuffer[b];
                if (j.proxyA.m_id !== g.proxyA.m_id || j.proxyB.m_id !== g.proxyB.m_id) break;
                ++b;
            }
        }
    }),
    (box2d.b2BroadPhase.prototype.Query = function (a, b) {
        this.m_tree.Query(a, b);
    }),
    (box2d.b2BroadPhase.prototype.RayCast = function (a, b) {
        this.m_tree.RayCast(a, b);
    }),
    (box2d.b2BroadPhase.prototype.BufferMove = function (a) {
        (this.m_moveBuffer[this.m_moveCount] = a), ++this.m_moveCount;
    }),
    (box2d.b2BroadPhase.prototype.UnBufferMove = function (a) {
        var b = this.m_moveBuffer.indexOf(a);
        this.m_moveBuffer[b] = null;
    }),
    (box2d.b2PairLessThan = function (a, b) {
        return a.proxyA.m_id === b.proxyA.m_id ? a.proxyB.m_id - b.proxyB.m_id : a.proxyA.m_id - b.proxyA.m_id;
    }),
    goog.provide("box2d.b2ContactManager"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Math"),
    goog.require("box2d.b2Collision"),
    goog.require("box2d.b2BroadPhase"),
    goog.require("box2d.b2ContactFactory"),
    (box2d.b2ContactManager = function () {
        (this.m_broadPhase = new box2d.b2BroadPhase()), (this.m_contactFactory = new box2d.b2ContactFactory(this.m_allocator));
    }),
    (box2d.b2ContactManager.prototype.m_broadPhase = null),
    (box2d.b2ContactManager.prototype.m_contactList = null),
    (box2d.b2ContactManager.prototype.m_contactCount = 0),
    (box2d.b2ContactManager.prototype.m_contactFilter = box2d.b2ContactFilter.b2_defaultFilter),
    (box2d.b2ContactManager.prototype.m_contactListener = box2d.b2ContactListener.b2_defaultListener),
    (box2d.b2ContactManager.prototype.m_allocator = null),
    (box2d.b2ContactManager.prototype.m_contactFactory = null),
    (box2d.b2ContactManager.prototype.Destroy = function (a) {
        var b = a.GetFixtureA(),
            c = a.GetFixtureB(),
            d = b.GetBody(),
            e = c.GetBody();
        this.m_contactListener && a.IsTouching() && this.m_contactListener.EndContact(a),
            a.m_prev && (a.m_prev.m_next = a.m_next),
            a.m_next && (a.m_next.m_prev = a.m_prev),
            a === this.m_contactList && (this.m_contactList = a.m_next),
            a.m_nodeA.prev && (a.m_nodeA.prev.next = a.m_nodeA.next),
            a.m_nodeA.next && (a.m_nodeA.next.prev = a.m_nodeA.prev),
            a.m_nodeA === d.m_contactList && (d.m_contactList = a.m_nodeA.next),
            a.m_nodeB.prev && (a.m_nodeB.prev.next = a.m_nodeB.next),
            a.m_nodeB.next && (a.m_nodeB.next.prev = a.m_nodeB.prev),
            a.m_nodeB === e.m_contactList && (e.m_contactList = a.m_nodeB.next),
            this.m_contactFactory.Destroy(a),
            --this.m_contactCount;
    }),
    (box2d.b2ContactManager.prototype.Collide = function () {
        for (var a = this.m_contactList; a; ) {
            var b = a.GetFixtureA(),
                c = a.GetFixtureB(),
                d = a.GetChildIndexA(),
                e = a.GetChildIndexB(),
                f = b.GetBody(),
                g = c.GetBody();
            if (a.m_flags & box2d.b2ContactFlag.e_filterFlag) {
                if (!1 === g.ShouldCollide(f)) {
                    var h = a;
                    (a = h.m_next), this.Destroy(h);
                    continue;
                }
                if (this.m_contactFilter && !1 === this.m_contactFilter.ShouldCollide(b, c)) {
                    (a = (h = a).m_next), this.Destroy(h);
                    continue;
                }
                a.m_flags &= ~box2d.b2ContactFlag.e_filterFlag;
            }
            var i = f.IsAwake() && f.m_type !== box2d.b2BodyType.b2_staticBody,
                j = g.IsAwake() && g.m_type !== box2d.b2BodyType.b2_staticBody;
            if (!1 !== i || !1 !== j) {
                var k = b.m_proxies[d].proxy,
                    l = c.m_proxies[e].proxy;
                !1 !== this.m_broadPhase.TestOverlap(k, l) ? (a.Update(this.m_contactListener), (a = a.m_next)) : ((a = (h = a).m_next), this.Destroy(h));
            } else a = a.m_next;
        }
    }),
    (box2d.b2ContactManager.prototype.FindNewContacts = function () {
        this.m_broadPhase.UpdatePairs(this);
    }),
    (box2d.b2ContactManager.prototype.AddPair = function (a, b) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(a instanceof box2d.b2FixtureProxy), box2d.ENABLE_ASSERTS && box2d.b2Assert(b instanceof box2d.b2FixtureProxy);
        var c = a,
            d = b,
            e = c.fixture,
            f = d.fixture,
            g = c.childIndex,
            h = d.childIndex,
            i = e.GetBody(),
            j = f.GetBody();
        if (i !== j) {
            for (var k = j.GetContactList(); k; ) {
                if (k.other === i) {
                    var l = k.contact.GetFixtureA(),
                        m = k.contact.GetFixtureB(),
                        n = k.contact.GetChildIndexA(),
                        o = k.contact.GetChildIndexB();
                    if (l === e && m === f && n === g && o === h) return;
                    if (l === f && m === e && n === h && o === g) return;
                }
                k = k.next;
            }
            if (!1 !== j.ShouldCollide(i) && (!this.m_contactFilter || !1 !== this.m_contactFilter.ShouldCollide(e, f))) {
                var p = this.m_contactFactory.Create(e, g, f, h);
                null !== p &&
                    ((e = p.GetFixtureA()),
                    (f = p.GetFixtureB()),
                    (g = p.GetChildIndexA()),
                    (h = p.GetChildIndexB()),
                    (i = e.m_body),
                    (j = f.m_body),
                    (p.m_prev = null),
                    (p.m_next = this.m_contactList),
                    null !== this.m_contactList && (this.m_contactList.m_prev = p),
                    (((this.m_contactList = p).m_nodeA.contact = p).m_nodeA.other = j),
                    (p.m_nodeA.prev = null),
                    (p.m_nodeA.next = i.m_contactList),
                    null !== i.m_contactList && (i.m_contactList.prev = p.m_nodeA),
                    (i.m_contactList = p.m_nodeA),
                    ((p.m_nodeB.contact = p).m_nodeB.other = i),
                    (p.m_nodeB.prev = null),
                    (p.m_nodeB.next = j.m_contactList),
                    null !== j.m_contactList && (j.m_contactList.prev = p.m_nodeB),
                    (j.m_contactList = p.m_nodeB),
                    !1 === e.IsSensor() && !1 === f.IsSensor() && (i.SetAwake(!0), j.SetAwake(!0)),
                    ++this.m_contactCount);
            }
        }
    }),
    goog.provide("box2d.b2JointFactory"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Math"),
    goog.require("box2d.b2Joint"),
    (box2d.b2JointFactory.Create = function (a) {
        var b = null;
        switch (a.type) {
            case box2d.b2JointType.e_distanceJoint:
                b = new box2d.b2DistanceJoint(a instanceof box2d.b2DistanceJointDef ? a : null);
                break;
            case box2d.b2JointType.e_mouseJoint:
                b = new box2d.b2MouseJoint(a instanceof box2d.b2MouseJointDef ? a : null);
                break;
            case box2d.b2JointType.e_prismaticJoint:
                b = new box2d.b2PrismaticJoint(a instanceof box2d.b2PrismaticJointDef ? a : null);
                break;
            case box2d.b2JointType.e_revoluteJoint:
                b = new box2d.b2RevoluteJoint(a instanceof box2d.b2RevoluteJointDef ? a : null);
                break;
            case box2d.b2JointType.e_pulleyJoint:
                b = new box2d.b2PulleyJoint(a instanceof box2d.b2PulleyJointDef ? a : null);
                break;
            case box2d.b2JointType.e_gearJoint:
                b = new box2d.b2GearJoint(a instanceof box2d.b2GearJointDef ? a : null);
                break;
            case box2d.b2JointType.e_wheelJoint:
                b = new box2d.b2WheelJoint(a instanceof box2d.b2WheelJointDef ? a : null);
                break;
            case box2d.b2JointType.e_weldJoint:
                b = new box2d.b2WeldJoint(a instanceof box2d.b2WeldJointDef ? a : null);
                break;
            case box2d.b2JointType.e_frictionJoint:
                b = new box2d.b2FrictionJoint(a instanceof box2d.b2FrictionJointDef ? a : null);
                break;
            case box2d.b2JointType.e_ropeJoint:
                b = new box2d.b2RopeJoint(a instanceof box2d.b2RopeJointDef ? a : null);
                break;
            case box2d.b2JointType.e_motorJoint:
                b = new box2d.b2MotorJoint(a instanceof box2d.b2MotorJointDef ? a : null);
                break;
            case box2d.b2JointType.e_areaJoint:
                b = new box2d.b2AreaJoint(a instanceof box2d.b2AreaJointDef ? a : null);
                break;
            default:
                box2d.ENABLE_ASSERTS && box2d.b2Assert(!1);
        }
        return b;
    }),
    (box2d.b2JointFactory.Destroy = function () {}),
    goog.provide("box2d.b2Draw"),
    goog.require("box2d.b2Settings"),
    (box2d.b2Color = function (a, b, c) {
        (this.r = a), (this.g = b), (this.b = c);
    }),
    (box2d.b2Color.prototype.r = 0.5),
    (box2d.b2Color.prototype.g = 0.5),
    (box2d.b2Color.prototype.b = 0.5),
    (box2d.b2Color.prototype.SetRGB = function (a, b, c) {
        return (this.r = a), (this.g = b), (this.b = c), this;
    }),
    (box2d.b2Color.prototype.MakeStyleString = function (a) {
        var b = Math.round(Math.max(0, Math.min(255, 255 * this.r))),
            c = Math.round(Math.max(0, Math.min(255, 255 * this.g))),
            d = Math.round(Math.max(0, Math.min(255, 255 * this.b))),
            e = void 0 === a ? 1 : Math.max(0, Math.min(1, a));
        return box2d.b2Color.MakeStyleString(b, c, d, e);
    }),
    (box2d.b2Color.MakeStyleString = function (a, b, c, d) {
        return d < 1 ? "rgba(" + a + "," + b + "," + c + "," + d + ")" : "rgb(" + a + "," + b + "," + c + ")";
    }),
    (box2d.b2Color.RED = new box2d.b2Color(1, 0, 0)),
    (box2d.b2Color.GREEN = new box2d.b2Color(0, 1, 0)),
    (box2d.b2Color.BLUE = new box2d.b2Color(0, 0, 1)),
    (box2d.b2DrawFlags = { e_none: 0, e_shapeBit: 1, e_jointBit: 2, e_aabbBit: 4, e_pairBit: 8, e_centerOfMassBit: 16, e_controllerBit: 32, e_all: 63 }),
    goog.exportProperty(box2d.b2DrawFlags, "e_none", box2d.b2DrawFlags.e_none),
    goog.exportProperty(box2d.b2DrawFlags, "e_shapeBit", box2d.b2DrawFlags.e_shapeBit),
    goog.exportProperty(box2d.b2DrawFlags, "e_jointBit", box2d.b2DrawFlags.e_jointBit),
    goog.exportProperty(box2d.b2DrawFlags, "e_aabbBit", box2d.b2DrawFlags.e_aabbBit),
    goog.exportProperty(box2d.b2DrawFlags, "e_pairBit", box2d.b2DrawFlags.e_pairBit),
    goog.exportProperty(box2d.b2DrawFlags, "e_centerOfMassBit", box2d.b2DrawFlags.e_centerOfMassBit),
    goog.exportProperty(box2d.b2DrawFlags, "e_controllerBit", box2d.b2DrawFlags.e_controllerBit),
    goog.exportProperty(box2d.b2DrawFlags, "e_all", box2d.b2DrawFlags.e_all),
    (box2d.b2Draw = function () {}),
    (box2d.b2Draw.prototype.m_drawFlags = box2d.b2DrawFlags.e_none),
    (box2d.b2Draw.prototype.SetFlags = function (a) {
        this.m_drawFlags = a;
    }),
    (box2d.b2Draw.prototype.GetFlags = function () {
        return this.m_drawFlags;
    }),
    (box2d.b2Draw.prototype.AppendFlags = function (a) {
        this.m_drawFlags |= a;
    }),
    (box2d.b2Draw.prototype.ClearFlags = function (a) {
        this.m_drawFlags &= ~a;
    }),
    (box2d.b2Draw.prototype.PushTransform = function () {}),
    (box2d.b2Draw.prototype.PopTransform = function () {}),
    (box2d.b2Draw.prototype.DrawPolygon = function () {}),
    (box2d.b2Draw.prototype.DrawSolidPolygon = function () {}),
    (box2d.b2Draw.prototype.DrawCircle = function () {}),
    (box2d.b2Draw.prototype.DrawSolidCircle = function () {}),
    (box2d.b2Draw.prototype.DrawSegment = function () {}),
    (box2d.b2Draw.prototype.DrawTransform = function () {}),
    goog.provide("box2d.b2Fixture"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Collision"),
    goog.require("box2d.b2Shape"),
    (box2d.b2Filter = function () {}),
    (box2d.b2Filter.prototype.categoryBits = 1),
    (box2d.b2Filter.prototype.maskBits = 65535),
    (box2d.b2Filter.prototype.groupIndex = 0),
    (box2d.b2Filter.prototype.Clone = function () {
        return new box2d.b2Filter().Copy(this);
    }),
    (box2d.b2Filter.prototype.Copy = function (a) {
        return box2d.ENABLE_ASSERTS && box2d.b2Assert(this !== a), (this.categoryBits = a.categoryBits), (this.maskBits = a.maskBits), (this.groupIndex = a.groupIndex), this;
    }),
    (box2d.b2FixtureDef = function () {
        this.filter = new box2d.b2Filter();
    }),
    (box2d.b2FixtureDef.prototype.shape = null),
    (box2d.b2FixtureDef.prototype.userData = null),
    (box2d.b2FixtureDef.prototype.friction = 0.2),
    (box2d.b2FixtureDef.prototype.restitution = 0),
    (box2d.b2FixtureDef.prototype.density = 0),
    (box2d.b2FixtureDef.prototype.isSensor = !1),
    (box2d.b2FixtureDef.prototype.filter = null),
    (box2d.b2FixtureProxy = function () {
        this.aabb = new box2d.b2AABB();
    }),
    (box2d.b2FixtureProxy.prototype.aabb = null),
    (box2d.b2FixtureProxy.prototype.fixture = null),
    (box2d.b2FixtureProxy.prototype.childIndex = 0),
    (box2d.b2FixtureProxy.prototype.proxy = null),
    (box2d.b2FixtureProxy.MakeArray = function (a) {
        return box2d.b2MakeArray(a, function () {
            return new box2d.b2FixtureProxy();
        });
    }),
    (box2d.b2Fixture = function () {
        (this.m_proxyCount = 0), (this.m_filter = new box2d.b2Filter());
    }),
    (box2d.b2Fixture.prototype.m_density = 0),
    (box2d.b2Fixture.prototype.m_next = null),
    (box2d.b2Fixture.prototype.m_body = null),
    (box2d.b2Fixture.prototype.m_shape = null),
    (box2d.b2Fixture.prototype.m_friction = 0),
    (box2d.b2Fixture.prototype.m_restitution = 0),
    (box2d.b2Fixture.prototype.m_proxies = null),
    (box2d.b2Fixture.prototype.m_proxyCount = 0),
    (box2d.b2Fixture.prototype.m_filter = null),
    (box2d.b2Fixture.prototype.m_isSensor = !1),
    (box2d.b2Fixture.prototype.m_userData = null),
    (box2d.b2Fixture.prototype.GetType = function () {
        return this.m_shape.GetType();
    }),
    (box2d.b2Fixture.prototype.GetShape = function () {
        return this.m_shape;
    }),
    (box2d.b2Fixture.prototype.IsSensor = function () {
        return this.m_isSensor;
    }),
    (box2d.b2Fixture.prototype.GetFilterData = function () {
        return this.m_filter;
    }),
    (box2d.b2Fixture.prototype.GetUserData = function () {
        return this.m_userData;
    }),
    (box2d.b2Fixture.prototype.SetUserData = function (a) {
        this.m_userData = a;
    }),
    (box2d.b2Fixture.prototype.GetBody = function () {
        return this.m_body;
    }),
    (box2d.b2Fixture.prototype.GetNext = function () {
        return this.m_next;
    }),
    (box2d.b2Fixture.prototype.SetDensity = function (a) {
        this.m_density = a;
    }),
    (box2d.b2Fixture.prototype.GetDensity = function () {
        return this.m_density;
    }),
    (box2d.b2Fixture.prototype.GetFriction = function () {
        return this.m_friction;
    }),
    (box2d.b2Fixture.prototype.SetFriction = function (a) {
        this.m_friction = a;
    }),
    (box2d.b2Fixture.prototype.GetRestitution = function () {
        return this.m_restitution;
    }),
    (box2d.b2Fixture.prototype.SetRestitution = function (a) {
        this.m_restitution = a;
    }),
    (box2d.b2Fixture.prototype.TestPoint = function (a) {
        return this.m_shape.TestPoint(this.m_body.GetTransform(), a);
    }),
    (box2d.b2Fixture.prototype.RayCast = function (a, b, c) {
        return this.m_shape.RayCast(a, b, this.m_body.GetTransform(), c);
    }),
    (box2d.b2Fixture.prototype.GetMassData = function (a) {
        return (a = a || new box2d.b2MassData()), this.m_shape.ComputeMass(a, this.m_density), a;
    }),
    (box2d.b2Fixture.prototype.GetAABB = function (a) {
        return box2d.ENABLE_ASSERTS && box2d.b2Assert(0 <= a && a < this.m_proxyCount), this.m_proxies[a].aabb;
    }),
    (box2d.b2Fixture.prototype.Create = function (a, b) {
        (this.m_userData = b.userData),
            (this.m_friction = b.friction),
            (this.m_restitution = b.restitution),
            (this.m_body = a),
            (this.m_next = null),
            this.m_filter.Copy(b.filter),
            (this.m_isSensor = b.isSensor),
            (this.m_shape = b.shape.Clone()),
            (this.m_proxies = box2d.b2FixtureProxy.MakeArray(this.m_shape.GetChildCount())),
            (this.m_proxyCount = 0),
            (this.m_density = b.density);
    }),
    (box2d.b2Fixture.prototype.Destroy = function () {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(0 === this.m_proxyCount), (this.m_shape = null);
    }),
    (box2d.b2Fixture.prototype.CreateProxies = function (a, b) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(0 === this.m_proxyCount), (this.m_proxyCount = this.m_shape.GetChildCount());
        for (var c = 0; c < this.m_proxyCount; ++c) {
            var d = this.m_proxies[c];
            this.m_shape.ComputeAABB(d.aabb, b, c), (d.proxy = a.CreateProxy(d.aabb, d)), (d.fixture = this), (d.childIndex = c);
        }
    }),
    (box2d.b2Fixture.prototype.DestroyProxies = function (a) {
        for (var b = 0; b < this.m_proxyCount; ++b) {
            var c = this.m_proxies[b];
            a.DestroyProxy(c.proxy), (c.proxy = null);
        }
        this.m_proxyCount = 0;
    }),
    (box2d.b2Fixture.prototype.Synchronize = function (a, b, c) {
        if (0 !== this.m_proxyCount)
            for (var d = 0; d < this.m_proxyCount; ++d) {
                var e = this.m_proxies[d],
                    f = box2d.b2Fixture.prototype.Synchronize.s_aabb1,
                    g = box2d.b2Fixture.prototype.Synchronize.s_aabb2;
                this.m_shape.ComputeAABB(f, b, d), this.m_shape.ComputeAABB(g, c, d), e.aabb.Combine2(f, g);
                var h = box2d.b2SubVV(c.p, b.p, box2d.b2Fixture.prototype.Synchronize.s_displacement);
                a.MoveProxy(e.proxy, e.aabb, h);
            }
    }),
    (box2d.b2Fixture.prototype.Synchronize.s_aabb1 = new box2d.b2AABB()),
    (box2d.b2Fixture.prototype.Synchronize.s_aabb2 = new box2d.b2AABB()),
    (box2d.b2Fixture.prototype.Synchronize.s_displacement = new box2d.b2Vec2()),
    (box2d.b2Fixture.prototype.SetFilterData = function (a) {
        this.m_filter.Copy(a), this.Refilter();
    }),
    (box2d.b2Fixture.prototype.Refilter = function () {
        if (!this.m_body) {
            for (var a = this.m_body.GetContactList(); a; ) {
                var b = a.contact,
                    c = b.GetFixtureA(),
                    d = b.GetFixtureB();
                (c === this || d === this) && b.FlagForFiltering(), (a = a.next);
            }
            var e = this.m_body.GetWorld();
            if (null !== e) for (var f = e.m_contactManager.m_broadPhase, g = 0; g < this.m_proxyCount; ++g) f.TouchProxy(this.m_proxies[g].proxy);
        }
    }),
    (box2d.b2Fixture.prototype.SetSensor = function (a) {
        a !== this.m_isSensor && (this.m_body.SetAwake(!0), (this.m_isSensor = a));
    }),
    (box2d.b2Fixture.prototype.Dump = function (a) {
        box2d.DEBUG &&
            (box2d.b2Log("    /*box2d.b2FixtureDef*/ var fd = new box2d.b2FixtureDef();\n"),
            box2d.b2Log("    fd.friction = %.15f;\n", this.m_friction),
            box2d.b2Log("    fd.restitution = %.15f;\n", this.m_restitution),
            box2d.b2Log("    fd.density = %.15f;\n", this.m_density),
            box2d.b2Log("    fd.isSensor = %s;\n", this.m_isSensor ? "true" : "false"),
            box2d.b2Log("    fd.filter.categoryBits = %d;\n", this.m_filter.categoryBits),
            box2d.b2Log("    fd.filter.maskBits = %d;\n", this.m_filter.maskBits),
            box2d.b2Log("    fd.filter.groupIndex = %d;\n", this.m_filter.groupIndex),
            this.m_shape.Dump(),
            box2d.b2Log("\n"),
            box2d.b2Log("    fd.shape = shape;\n"),
            box2d.b2Log("\n"),
            box2d.b2Log("    bodies[%d].CreateFixture(fd);\n", a));
    }),
    goog.provide("box2d.b2Body"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Math"),
    goog.require("box2d.b2Fixture"),
    (box2d.b2BodyType = { b2_unknown: -1, b2_staticBody: 0, b2_kinematicBody: 1, b2_dynamicBody: 2, b2_bulletBody: 3 }),
    goog.exportProperty(box2d.b2BodyType, "b2_unknown", box2d.b2BodyType.b2_unknown),
    goog.exportProperty(box2d.b2BodyType, "b2_staticBody", box2d.b2BodyType.b2_staticBody),
    goog.exportProperty(box2d.b2BodyType, "b2_kinematicBody", box2d.b2BodyType.b2_kinematicBody),
    goog.exportProperty(box2d.b2BodyType, "b2_dynamicBody", box2d.b2BodyType.b2_dynamicBody),
    goog.exportProperty(box2d.b2BodyType, "b2_bulletBody", box2d.b2BodyType.b2_bulletBody),
    (box2d.b2BodyDef = function () {
        (this.position = new box2d.b2Vec2(0, 0)), (this.linearVelocity = new box2d.b2Vec2(0, 0));
    }),
    (box2d.b2BodyDef.prototype.type = box2d.b2BodyType.b2_staticBody),
    (box2d.b2BodyDef.prototype.position = null),
    (box2d.b2BodyDef.prototype.angle = 0),
    (box2d.b2BodyDef.prototype.linearVelocity = null),
    (box2d.b2BodyDef.prototype.angularVelocity = 0),
    (box2d.b2BodyDef.prototype.linearDamping = 0),
    (box2d.b2BodyDef.prototype.angularDamping = 0),
    (box2d.b2BodyDef.prototype.allowSleep = !0),
    (box2d.b2BodyDef.prototype.awake = !0),
    (box2d.b2BodyDef.prototype.fixedRotation = !1),
    (box2d.b2BodyDef.prototype.bullet = !1),
    (box2d.b2BodyDef.prototype.active = !0),
    (box2d.b2BodyDef.prototype.userData = null),
    (box2d.b2BodyDef.prototype.gravityScale = 1),
    (box2d.b2BodyFlag = { e_none: 0, e_islandFlag: 1, e_awakeFlag: 2, e_autoSleepFlag: 4, e_bulletFlag: 8, e_fixedRotationFlag: 16, e_activeFlag: 32, e_toiFlag: 64 }),
    goog.exportProperty(box2d.b2BodyFlag, "e_none", box2d.b2BodyFlag.e_none),
    goog.exportProperty(box2d.b2BodyFlag, "e_islandFlag", box2d.b2BodyFlag.e_islandFlag),
    goog.exportProperty(box2d.b2BodyFlag, "e_awakeFlag", box2d.b2BodyFlag.e_awakeFlag),
    goog.exportProperty(box2d.b2BodyFlag, "e_autoSleepFlag", box2d.b2BodyFlag.e_autoSleepFlag),
    goog.exportProperty(box2d.b2BodyFlag, "e_bulletFlag", box2d.b2BodyFlag.e_bulletFlag),
    goog.exportProperty(box2d.b2BodyFlag, "e_fixedRotationFlag", box2d.b2BodyFlag.e_fixedRotationFlag),
    goog.exportProperty(box2d.b2BodyFlag, "e_activeFlag", box2d.b2BodyFlag.e_activeFlag),
    goog.exportProperty(box2d.b2BodyFlag, "e_toiFlag", box2d.b2BodyFlag.e_toiFlag),
    (box2d.b2Body = function (a, b) {
        (this.m_xf = new box2d.b2Transform()),
            (this.m_out_xf = new box2d.b2Transform()),
            (this.m_sweep = new box2d.b2Sweep()),
            (this.m_out_sweep = new box2d.b2Sweep()),
            (this.m_linearVelocity = new box2d.b2Vec2()),
            (this.m_out_linearVelocity = new box2d.b2Vec2()),
            (this.m_force = new box2d.b2Vec2()),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(a.position.IsValid()),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(a.linearVelocity.IsValid()),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(box2d.b2IsValid(a.angle)),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(box2d.b2IsValid(a.angularVelocity)),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(box2d.b2IsValid(a.gravityScale) && 0 <= a.gravityScale),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(box2d.b2IsValid(a.angularDamping) && 0 <= a.angularDamping),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(box2d.b2IsValid(a.linearDamping) && 0 <= a.linearDamping),
            (this.m_flags = box2d.b2BodyFlag.e_none),
            a.bullet && (this.m_flags |= box2d.b2BodyFlag.e_bulletFlag),
            a.fixedRotation && (this.m_flags |= box2d.b2BodyFlag.e_fixedRotationFlag),
            a.allowSleep && (this.m_flags |= box2d.b2BodyFlag.e_autoSleepFlag),
            a.awake && (this.m_flags |= box2d.b2BodyFlag.e_awakeFlag),
            a.active && (this.m_flags |= box2d.b2BodyFlag.e_activeFlag),
            (this.m_world = b),
            this.m_xf.p.Copy(a.position),
            this.m_xf.q.SetAngleRadians(a.angle),
            this.m_sweep.localCenter.SetZero(),
            this.m_sweep.c0.Copy(this.m_xf.p),
            this.m_sweep.c.Copy(this.m_xf.p),
            (this.m_sweep.a0 = a.angle),
            (this.m_sweep.a = a.angle),
            (this.m_sweep.alpha0 = 0),
            this.m_linearVelocity.Copy(a.linearVelocity),
            (this.m_angularVelocity = a.angularVelocity),
            (this.m_linearDamping = a.linearDamping),
            (this.m_angularDamping = a.angularDamping),
            (this.m_gravityScale = a.gravityScale),
            this.m_force.SetZero(),
            (this.m_torque = 0),
            (this.m_sleepTime = 0),
            (this.m_type = a.type),
            a.type === box2d.b2BodyType.b2_dynamicBody ? ((this.m_mass = 1), (this.m_invMass = 1)) : ((this.m_mass = 0), (this.m_invMass = 0)),
            (this.m_I = 0),
            (this.m_invI = 0),
            (this.m_userData = a.userData),
            (this.m_fixtureList = null),
            (this.m_fixtureCount = 0),
            (this.m_controllerList = null),
            (this.m_controllerCount = 0);
    }),
    (box2d.b2Body.prototype.m_flags = box2d.b2BodyFlag.e_none),
    (box2d.b2Body.prototype.m_islandIndex = 0),
    (box2d.b2Body.prototype.m_world = null),
    (box2d.b2Body.prototype.m_xf = null),
    (box2d.b2Body.prototype.m_out_xf = null),
    (box2d.b2Body.prototype.m_sweep = null),
    (box2d.b2Body.prototype.m_out_sweep = null),
    (box2d.b2Body.prototype.m_jointList = null),
    (box2d.b2Body.prototype.m_contactList = null),
    (box2d.b2Body.prototype.m_prev = null),
    (box2d.b2Body.prototype.m_next = null),
    (box2d.b2Body.prototype.m_linearVelocity = null),
    (box2d.b2Body.prototype.m_out_linearVelocity = null),
    (box2d.b2Body.prototype.m_angularVelocity = 0),
    (box2d.b2Body.prototype.m_linearDamping = 0),
    (box2d.b2Body.prototype.m_angularDamping = 0),
    (box2d.b2Body.prototype.m_gravityScale = 1),
    (box2d.b2Body.prototype.m_force = null),
    (box2d.b2Body.prototype.m_torque = 0),
    (box2d.b2Body.prototype.m_sleepTime = 0),
    (box2d.b2Body.prototype.m_type = box2d.b2BodyType.b2_staticBody),
    (box2d.b2Body.prototype.m_mass = 1),
    (box2d.b2Body.prototype.m_invMass = 1),
    (box2d.b2Body.prototype.m_I = 0),
    (box2d.b2Body.prototype.m_invI = 0),
    (box2d.b2Body.prototype.m_userData = null),
    (box2d.b2Body.prototype.m_fixtureList = null),
    (box2d.b2Body.prototype.m_fixtureCount = 0),
    (box2d.b2Body.prototype.m_controllerList = null),
    (box2d.b2Body.prototype.m_controllerCount = 0),
    (box2d.b2Body.prototype.CreateFixture = function (a) {
        if ((box2d.ENABLE_ASSERTS && box2d.b2Assert(!1 === this.m_world.IsLocked()), !0 === this.m_world.IsLocked())) return null;
        var b = new box2d.b2Fixture();
        if ((b.Create(this, a), this.m_flags & box2d.b2BodyFlag.e_activeFlag)) {
            var c = this.m_world.m_contactManager.m_broadPhase;
            b.CreateProxies(c, this.m_xf);
        }
        return (b.m_next = this.m_fixtureList), (this.m_fixtureList = b), ++this.m_fixtureCount, (b.m_body = this), 0 < b.m_density && this.ResetMassData(), (this.m_world.m_flags |= box2d.b2WorldFlag.e_newFixture), b;
    }),
    (box2d.b2Body.prototype.CreateFixture2 = function (a, b) {
        void 0 === b && (b = 0);
        var c = box2d.b2Body.prototype.CreateFixture2.s_def;
        return (c.shape = a), (c.density = b), this.CreateFixture(c);
    }),
    (box2d.b2Body.prototype.CreateFixture2.s_def = new box2d.b2FixtureDef()),
    (box2d.b2Body.prototype.DestroyFixture = function (a) {
        if ((box2d.ENABLE_ASSERTS && box2d.b2Assert(!1 === this.m_world.IsLocked()), !0 !== this.m_world.IsLocked())) {
            box2d.ENABLE_ASSERTS && box2d.b2Assert(a.m_body === this), box2d.ENABLE_ASSERTS && box2d.b2Assert(0 < this.m_fixtureCount);
            for (var b = this.m_fixtureList, c = null, d = !1; null !== b; ) {
                if (b === a) {
                    c ? (c.m_next = a.m_next) : (this.m_fixtureList = a.m_next), (d = !0);
                    break;
                }
                b = (c = b).m_next;
            }
            box2d.ENABLE_ASSERTS && box2d.b2Assert(d);
            for (var e = this.m_contactList; e; ) {
                var f = e.contact;
                e = e.next;
                var g = f.GetFixtureA(),
                    h = f.GetFixtureB();
                (a === g || a === h) && this.m_world.m_contactManager.Destroy(f);
            }
            if (this.m_flags & box2d.b2BodyFlag.e_activeFlag) {
                var i = this.m_world.m_contactManager.m_broadPhase;
                a.DestroyProxies(i);
            }
            a.Destroy(), (a.m_body = null), (a.m_next = null), --this.m_fixtureCount, this.ResetMassData();
        }
    }),
    (box2d.b2Body.prototype.SetTransformVecRadians = function (a, b) {
        this.SetTransformXYRadians(a.x, a.y, b);
    }),
    (box2d.b2Body.prototype.SetTransformXYRadians = function (a, b, c) {
        if ((box2d.ENABLE_ASSERTS && box2d.b2Assert(!1 === this.m_world.IsLocked()), !0 !== this.m_world.IsLocked() && (this.m_xf.p.x !== a || this.m_xf.p.y !== b || this.m_xf.q.GetAngleRadians() !== c))) {
            this.m_xf.q.SetAngleRadians(c), this.m_xf.p.SetXY(a, b), box2d.b2MulXV(this.m_xf, this.m_sweep.localCenter, this.m_sweep.c), (this.m_sweep.a = c), this.m_sweep.c0.Copy(this.m_sweep.c), (this.m_sweep.a0 = c);
            for (var d = this.m_world.m_contactManager.m_broadPhase, e = this.m_fixtureList; e; e = e.m_next) e.Synchronize(d, this.m_xf, this.m_xf);
        }
    }),
    (box2d.b2Body.prototype.SetTransform = function (a) {
        this.SetTransformVecRadians(a.p, a.GetAngleRadians());
    }),
    (box2d.b2Body.prototype.GetTransform = function (a) {
        return (a = a || this.m_out_xf).Copy(this.m_xf);
    }),
    (box2d.b2Body.prototype.GetPosition = function (a) {
        return (a = a || this.m_out_xf.p).Copy(this.m_xf.p);
    }),
    (box2d.b2Body.prototype.SetPosition = function (a) {
        this.SetTransformVecRadians(a, this.GetAngleRadians());
    }),
    (box2d.b2Body.prototype.SetPositionXY = function (a, b) {
        this.SetTransformXYRadians(a, b, this.GetAngleRadians());
    }),
    (box2d.b2Body.prototype.GetAngle = function () {
        return this.m_sweep.a;
    }),
    (box2d.b2Body.prototype.GetAngleRadians = box2d.b2Body.prototype.GetAngle),
    (box2d.b2Body.prototype.GetAngleDegrees = function () {
        return box2d.b2RadToDeg(this.GetAngle());
    }),
    (box2d.b2Body.prototype.SetAngle = function (a) {
        this.SetTransformVecRadians(this.GetPosition(), a);
    }),
    (box2d.b2Body.prototype.SetAngleRadians = box2d.b2Body.prototype.SetAngle),
    (box2d.b2Body.prototype.SetAngleDegrees = function (a) {
        this.SetAngle(box2d.b2DegToRad(a));
    }),
    (box2d.b2Body.prototype.GetWorldCenter = function (a) {
        return (a = a || this.m_out_sweep.c).Copy(this.m_sweep.c);
    }),
    (box2d.b2Body.prototype.GetLocalCenter = function (a) {
        return (a = a || this.m_out_sweep.localCenter).Copy(this.m_sweep.localCenter);
    }),
    (box2d.b2Body.prototype.SetLinearVelocity = function (a) {
        this.m_type !== box2d.b2BodyType.b2_staticBody && (0 < box2d.b2DotVV(a, a) && this.SetAwake(!0), this.m_linearVelocity.Copy(a));
    }),
    (box2d.b2Body.prototype.GetLinearVelocity = function (a) {
        return (a = a || this.m_out_linearVelocity).Copy(this.m_linearVelocity);
    }),
    (box2d.b2Body.prototype.SetAngularVelocity = function (a) {
        this.m_type !== box2d.b2BodyType.b2_staticBody && (0 < a * a && this.SetAwake(!0), (this.m_angularVelocity = a));
    }),
    (box2d.b2Body.prototype.GetAngularVelocity = function () {
        return this.m_angularVelocity;
    }),
    (box2d.b2Body.prototype.GetDefinition = function (a) {
        return (
            (a.type = this.GetType()),
            (a.allowSleep = (this.m_flags & box2d.b2BodyFlag.e_autoSleepFlag) === box2d.b2BodyFlag.e_autoSleepFlag),
            (a.angle = this.GetAngleRadians()),
            (a.angularDamping = this.m_angularDamping),
            (a.gravityScale = this.m_gravityScale),
            (a.angularVelocity = this.m_angularVelocity),
            (a.fixedRotation = (this.m_flags & box2d.b2BodyFlag.e_fixedRotationFlag) === box2d.b2BodyFlag.e_fixedRotationFlag),
            (a.bullet = (this.m_flags & box2d.b2BodyFlag.e_bulletFlag) === box2d.b2BodyFlag.e_bulletFlag),
            (a.awake = (this.m_flags & box2d.b2BodyFlag.e_awakeFlag) === box2d.b2BodyFlag.e_awakeFlag),
            (a.linearDamping = this.m_linearDamping),
            a.linearVelocity.Copy(this.GetLinearVelocity()),
            a.position.Copy(this.GetPosition()),
            (a.userData = this.GetUserData()),
            a
        );
    }),
    (box2d.b2Body.prototype.ApplyForce = function (a, b, c) {
        (c = c || !0),
            this.m_type === box2d.b2BodyType.b2_dynamicBody &&
                (c && 0 == (this.m_flags & box2d.b2BodyFlag.e_awakeFlag) && this.SetAwake(!0),
                this.m_flags & box2d.b2BodyFlag.e_awakeFlag && ((this.m_force.x += a.x), (this.m_force.y += a.y), (this.m_torque += (b.x - this.m_sweep.c.x) * a.y - (b.y - this.m_sweep.c.y) * a.x)));
    }),
    (box2d.b2Body.prototype.ApplyForceToCenter = function (a, b) {
        (b = b || !0),
            this.m_type === box2d.b2BodyType.b2_dynamicBody &&
                (b && 0 == (this.m_flags & box2d.b2BodyFlag.e_awakeFlag) && this.SetAwake(!0), this.m_flags & box2d.b2BodyFlag.e_awakeFlag && ((this.m_force.x += a.x), (this.m_force.y += a.y)));
    }),
    (box2d.b2Body.prototype.ApplyTorque = function (a, b) {
        (b = b || !0), this.m_type === box2d.b2BodyType.b2_dynamicBody && (b && 0 == (this.m_flags & box2d.b2BodyFlag.e_awakeFlag) && this.SetAwake(!0), this.m_flags & box2d.b2BodyFlag.e_awakeFlag && (this.m_torque += a));
    }),
    (box2d.b2Body.prototype.ApplyLinearImpulse = function (a, b, c) {
        (c = c || !0),
            this.m_type === box2d.b2BodyType.b2_dynamicBody &&
                (c && 0 == (this.m_flags & box2d.b2BodyFlag.e_awakeFlag) && this.SetAwake(!0),
                this.m_flags & box2d.b2BodyFlag.e_awakeFlag &&
                    ((this.m_linearVelocity.x += this.m_invMass * a.x), (this.m_linearVelocity.y += this.m_invMass * a.y), (this.m_angularVelocity += this.m_invI * ((b.x - this.m_sweep.c.x) * a.y - (b.y - this.m_sweep.c.y) * a.x))));
    }),
    (box2d.b2Body.prototype.ApplyAngularImpulse = function (a, b) {
        (b = b || !0),
            this.m_type === box2d.b2BodyType.b2_dynamicBody && (b && 0 == (this.m_flags & box2d.b2BodyFlag.e_awakeFlag) && this.SetAwake(!0), this.m_flags & box2d.b2BodyFlag.e_awakeFlag && (this.m_angularVelocity += this.m_invI * a));
    }),
    (box2d.b2Body.prototype.GetMass = function () {
        return this.m_mass;
    }),
    (box2d.b2Body.prototype.GetInertia = function () {
        return this.m_I + this.m_mass * box2d.b2DotVV(this.m_sweep.localCenter, this.m_sweep.localCenter);
    }),
    (box2d.b2Body.prototype.GetMassData = function (a) {
        return (a.mass = this.m_mass), (a.I = this.m_I + this.m_mass * box2d.b2DotVV(this.m_sweep.localCenter, this.m_sweep.localCenter)), a.center.Copy(this.m_sweep.localCenter), a;
    }),
    (box2d.b2Body.prototype.SetMassData = function (a) {
        if ((box2d.ENABLE_ASSERTS && box2d.b2Assert(!1 === this.m_world.IsLocked()), !0 !== this.m_world.IsLocked() && this.m_type === box2d.b2BodyType.b2_dynamicBody)) {
            (this.m_invMass = 0),
                (this.m_I = 0),
                (this.m_invI = 0),
                (this.m_mass = a.mass),
                this.m_mass <= 0 && (this.m_mass = 1),
                (this.m_invMass = 1 / this.m_mass),
                0 < a.I &&
                    0 == (this.m_flags & box2d.b2BodyFlag.e_fixedRotationFlag) &&
                    ((this.m_I = a.I - this.m_mass * box2d.b2DotVV(a.center, a.center)), box2d.ENABLE_ASSERTS && box2d.b2Assert(0 < this.m_I), (this.m_invI = 1 / this.m_I));
            var b = box2d.b2Body.prototype.SetMassData.s_oldCenter.Copy(this.m_sweep.c);
            this.m_sweep.localCenter.Copy(a.center),
                box2d.b2MulXV(this.m_xf, this.m_sweep.localCenter, this.m_sweep.c),
                this.m_sweep.c0.Copy(this.m_sweep.c),
                box2d.b2AddVCrossSV(this.m_linearVelocity, this.m_angularVelocity, box2d.b2SubVV(this.m_sweep.c, b, box2d.b2Vec2.s_t0), this.m_linearVelocity);
        }
    }),
    (box2d.b2Body.prototype.SetMassData.s_oldCenter = new box2d.b2Vec2()),
    (box2d.b2Body.prototype.ResetMassData = function () {
        if (((this.m_mass = 0), (this.m_invMass = 0), (this.m_I = 0), (this.m_invI = 0), this.m_sweep.localCenter.SetZero(), this.m_type === box2d.b2BodyType.b2_staticBody || this.m_type === box2d.b2BodyType.b2_kinematicBody))
            return this.m_sweep.c0.Copy(this.m_xf.p), this.m_sweep.c.Copy(this.m_xf.p), void (this.m_sweep.a0 = this.m_sweep.a);
        box2d.ENABLE_ASSERTS && box2d.b2Assert(this.m_type === box2d.b2BodyType.b2_dynamicBody);
        for (var a = box2d.b2Body.prototype.ResetMassData.s_localCenter.SetZero(), b = this.m_fixtureList; b; b = b.m_next)
            if (0 !== b.m_density) {
                var c = b.GetMassData(box2d.b2Body.prototype.ResetMassData.s_massData);
                (this.m_mass += c.mass), (a.x += c.center.x * c.mass), (a.y += c.center.y * c.mass), (this.m_I += c.I);
            }
        0 < this.m_mass ? ((this.m_invMass = 1 / this.m_mass), (a.x *= this.m_invMass), (a.y *= this.m_invMass)) : ((this.m_mass = 1), (this.m_invMass = 1)),
            0 < this.m_I && 0 == (this.m_flags & box2d.b2BodyFlag.e_fixedRotationFlag)
                ? ((this.m_I -= this.m_mass * box2d.b2DotVV(a, a)), box2d.ENABLE_ASSERTS && box2d.b2Assert(0 < this.m_I), (this.m_invI = 1 / this.m_I))
                : ((this.m_I = 0), (this.m_invI = 0));
        var d = box2d.b2Body.prototype.ResetMassData.s_oldCenter.Copy(this.m_sweep.c);
        this.m_sweep.localCenter.Copy(a),
            box2d.b2MulXV(this.m_xf, this.m_sweep.localCenter, this.m_sweep.c),
            this.m_sweep.c0.Copy(this.m_sweep.c),
            box2d.b2AddVCrossSV(this.m_linearVelocity, this.m_angularVelocity, box2d.b2SubVV(this.m_sweep.c, d, box2d.b2Vec2.s_t0), this.m_linearVelocity);
    }),
    (box2d.b2Body.prototype.ResetMassData.s_localCenter = new box2d.b2Vec2()),
    (box2d.b2Body.prototype.ResetMassData.s_oldCenter = new box2d.b2Vec2()),
    (box2d.b2Body.prototype.ResetMassData.s_massData = new box2d.b2MassData()),
    (box2d.b2Body.prototype.GetWorldPoint = function (a, b) {
        return box2d.b2MulXV(this.m_xf, a, b);
    }),
    (box2d.b2Body.prototype.GetWorldVector = function (a, b) {
        return box2d.b2MulRV(this.m_xf.q, a, b);
    }),
    (box2d.b2Body.prototype.GetLocalPoint = function (a, b) {
        return box2d.b2MulTXV(this.m_xf, a, b);
    }),
    (box2d.b2Body.prototype.GetLocalVector = function (a, b) {
        return box2d.b2MulTRV(this.m_xf.q, a, b);
    }),
    (box2d.b2Body.prototype.GetLinearVelocityFromWorldPoint = function (a, b) {
        return box2d.b2AddVCrossSV(this.m_linearVelocity, this.m_angularVelocity, box2d.b2SubVV(a, this.m_sweep.c, box2d.b2Vec2.s_t0), b);
    }),
    (box2d.b2Body.prototype.GetLinearVelocityFromLocalPoint = function (a, b) {
        return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(a, b), b);
    }),
    (box2d.b2Body.prototype.GetLinearDamping = function () {
        return this.m_linearDamping;
    }),
    (box2d.b2Body.prototype.SetLinearDamping = function (a) {
        this.m_linearDamping = a;
    }),
    (box2d.b2Body.prototype.GetAngularDamping = function () {
        return this.m_angularDamping;
    }),
    (box2d.b2Body.prototype.SetAngularDamping = function (a) {
        this.m_angularDamping = a;
    }),
    (box2d.b2Body.prototype.GetGravityScale = function () {
        return this.m_gravityScale;
    }),
    (box2d.b2Body.prototype.SetGravityScale = function (a) {
        this.m_gravityScale = a;
    }),
    (box2d.b2Body.prototype.SetType = function (a) {
        if ((box2d.ENABLE_ASSERTS && box2d.b2Assert(!1 === this.m_world.IsLocked()), !0 !== this.m_world.IsLocked() && this.m_type !== a)) {
            (this.m_type = a),
                this.ResetMassData(),
                this.m_type === box2d.b2BodyType.b2_staticBody && (this.m_linearVelocity.SetZero(), (this.m_angularVelocity = 0), (this.m_sweep.a0 = this.m_sweep.a), this.m_sweep.c0.Copy(this.m_sweep.c), this.SynchronizeFixtures()),
                this.SetAwake(!0),
                this.m_force.SetZero(),
                (this.m_torque = 0);
            for (var b = this.m_contactList; b; ) {
                var c = b;
                (b = b.next), this.m_world.m_contactManager.Destroy(c.contact);
            }
            this.m_contactList = null;
            for (var d = this.m_world.m_contactManager.m_broadPhase, e = this.m_fixtureList; e; e = e.m_next) for (var f = e.m_proxyCount, g = 0; g < f; ++g) d.TouchProxy(e.m_proxies[g].proxy);
        }
    }),
    (box2d.b2Body.prototype.GetType = function () {
        return this.m_type;
    }),
    (box2d.b2Body.prototype.SetBullet = function (a) {
        a ? (this.m_flags |= box2d.b2BodyFlag.e_bulletFlag) : (this.m_flags &= ~box2d.b2BodyFlag.e_bulletFlag);
    }),
    (box2d.b2Body.prototype.IsBullet = function () {
        return (this.m_flags & box2d.b2BodyFlag.e_bulletFlag) === box2d.b2BodyFlag.e_bulletFlag;
    }),
    (box2d.b2Body.prototype.SetSleepingAllowed = function (a) {
        a ? (this.m_flags |= box2d.b2BodyFlag.e_autoSleepFlag) : ((this.m_flags &= ~box2d.b2BodyFlag.e_autoSleepFlag), this.SetAwake(!0));
    }),
    (box2d.b2Body.prototype.IsSleepingAllowed = function () {
        return (this.m_flags & box2d.b2BodyFlag.e_autoSleepFlag) === box2d.b2BodyFlag.e_autoSleepFlag;
    }),
    (box2d.b2Body.prototype.SetAwake = function (a) {
        a
            ? 0 == (this.m_flags & box2d.b2BodyFlag.e_awakeFlag) && ((this.m_flags |= box2d.b2BodyFlag.e_awakeFlag), (this.m_sleepTime = 0))
            : ((this.m_flags &= ~box2d.b2BodyFlag.e_awakeFlag), (this.m_sleepTime = 0), this.m_linearVelocity.SetZero(), (this.m_angularVelocity = 0), this.m_force.SetZero(), (this.m_torque = 0));
    }),
    (box2d.b2Body.prototype.IsAwake = function () {
        return (this.m_flags & box2d.b2BodyFlag.e_awakeFlag) === box2d.b2BodyFlag.e_awakeFlag;
    }),
    (box2d.b2Body.prototype.SetActive = function (a) {
        if ((box2d.ENABLE_ASSERTS && box2d.b2Assert(!1 === this.m_world.IsLocked()), a !== this.IsActive()))
            if (a) {
                this.m_flags |= box2d.b2BodyFlag.e_activeFlag;
                for (var b = this.m_world.m_contactManager.m_broadPhase, c = this.m_fixtureList; c; c = c.m_next) c.CreateProxies(b, this.m_xf);
            } else {
                this.m_flags &= ~box2d.b2BodyFlag.e_activeFlag;
                for (b = this.m_world.m_contactManager.m_broadPhase, c = this.m_fixtureList; c; c = c.m_next) c.DestroyProxies(b);
                for (var d = this.m_contactList; d; ) {
                    var e = d;
                    (d = d.next), this.m_world.m_contactManager.Destroy(e.contact);
                }
                this.m_contactList = null;
            }
    }),
    (box2d.b2Body.prototype.IsActive = function () {
        return (this.m_flags & box2d.b2BodyFlag.e_activeFlag) === box2d.b2BodyFlag.e_activeFlag;
    }),
    (box2d.b2Body.prototype.SetFixedRotation = function (a) {
        ((this.m_flags & box2d.b2BodyFlag.e_fixedRotationFlag) === box2d.b2BodyFlag.e_fixedRotationFlag) !== a &&
            (a ? (this.m_flags |= box2d.b2BodyFlag.e_fixedRotationFlag) : (this.m_flags &= ~box2d.b2BodyFlag.e_fixedRotationFlag), (this.m_angularVelocity = 0), this.ResetMassData());
    }),
    (box2d.b2Body.prototype.IsFixedRotation = function () {
        return (this.m_flags & box2d.b2BodyFlag.e_fixedRotationFlag) === box2d.b2BodyFlag.e_fixedRotationFlag;
    }),
    (box2d.b2Body.prototype.GetFixtureList = function () {
        return this.m_fixtureList;
    }),
    (box2d.b2Body.prototype.GetJointList = function () {
        return this.m_jointList;
    }),
    (box2d.b2Body.prototype.GetContactList = function () {
        return this.m_contactList;
    }),
    (box2d.b2Body.prototype.GetNext = function () {
        return this.m_next;
    }),
    (box2d.b2Body.prototype.GetUserData = function () {
        return this.m_userData;
    }),
    (box2d.b2Body.prototype.SetUserData = function (a) {
        this.m_userData = a;
    }),
    (box2d.b2Body.prototype.GetWorld = function () {
        return this.m_world;
    }),
    (box2d.b2Body.prototype.SynchronizeFixtures = function () {
        var a = box2d.b2Body.prototype.SynchronizeFixtures.s_xf1;
        a.q.SetAngleRadians(this.m_sweep.a0), box2d.b2MulRV(a.q, this.m_sweep.localCenter, a.p), box2d.b2SubVV(this.m_sweep.c0, a.p, a.p);
        for (var b = this.m_world.m_contactManager.m_broadPhase, c = this.m_fixtureList; c; c = c.m_next) c.Synchronize(b, a, this.m_xf);
    }),
    (box2d.b2Body.prototype.SynchronizeFixtures.s_xf1 = new box2d.b2Transform()),
    (box2d.b2Body.prototype.SynchronizeTransform = function () {
        this.m_xf.q.SetAngleRadians(this.m_sweep.a), box2d.b2MulRV(this.m_xf.q, this.m_sweep.localCenter, this.m_xf.p), box2d.b2SubVV(this.m_sweep.c, this.m_xf.p, this.m_xf.p);
    }),
    (box2d.b2Body.prototype.ShouldCollide = function (a) {
        if (this.m_type !== box2d.b2BodyType.b2_dynamicBody && a.m_type !== box2d.b2BodyType.b2_dynamicBody) return !1;
        for (var b = this.m_jointList; b; b = b.next) if (b.other === a && !1 === b.joint.m_collideConnected) return !1;
        return !0;
    }),
    (box2d.b2Body.prototype.Advance = function (a) {
        this.m_sweep.Advance(a),
            this.m_sweep.c.Copy(this.m_sweep.c0),
            (this.m_sweep.a = this.m_sweep.a0),
            this.m_xf.q.SetAngleRadians(this.m_sweep.a),
            box2d.b2MulRV(this.m_xf.q, this.m_sweep.localCenter, this.m_xf.p),
            box2d.b2SubVV(this.m_sweep.c, this.m_xf.p, this.m_xf.p);
    }),
    (box2d.b2Body.prototype.Dump = function () {
        if (box2d.DEBUG) {
            var a = this.m_islandIndex;
            box2d.b2Log("if (true)\n"), box2d.b2Log("{\n"), box2d.b2Log("  /*box2d.b2BodyDef*/ var bd = new box2d.b2BodyDef();\n");
            var b = "";
            switch (this.m_type) {
                case box2d.b2BodyType.b2_staticBody:
                    b = "box2d.b2BodyType.b2_staticBody";
                    break;
                case box2d.b2BodyType.b2_kinematicBody:
                    b = "box2d.b2BodyType.b2_kinematicBody";
                    break;
                case box2d.b2BodyType.b2_dynamicBody:
                    b = "box2d.b2BodyType.b2_dynamicBody";
                    break;
                default:
                    box2d.ENABLE_ASSERTS && box2d.b2Assert(!1);
            }
            box2d.b2Log("  bd.type = %s;\n", b),
                box2d.b2Log("  bd.position.SetXY(%.15f, %.15f);\n", this.m_xf.p.x, this.m_xf.p.y),
                box2d.b2Log("  bd.angle = %.15f;\n", this.m_sweep.a),
                box2d.b2Log("  bd.linearVelocity.SetXY(%.15f, %.15f);\n", this.m_linearVelocity.x, this.m_linearVelocity.y),
                box2d.b2Log("  bd.angularVelocity = %.15f;\n", this.m_angularVelocity),
                box2d.b2Log("  bd.linearDamping = %.15f;\n", this.m_linearDamping),
                box2d.b2Log("  bd.angularDamping = %.15f;\n", this.m_angularDamping),
                box2d.b2Log("  bd.allowSleep = %s;\n", this.m_flags & box2d.b2BodyFlag.e_autoSleepFlag ? "true" : "false"),
                box2d.b2Log("  bd.awake = %s;\n", this.m_flags & box2d.b2BodyFlag.e_awakeFlag ? "true" : "false"),
                box2d.b2Log("  bd.fixedRotation = %s;\n", this.m_flags & box2d.b2BodyFlag.e_fixedRotationFlag ? "true" : "false"),
                box2d.b2Log("  bd.bullet = %s;\n", this.m_flags & box2d.b2BodyFlag.e_bulletFlag ? "true" : "false"),
                box2d.b2Log("  bd.active = %s;\n", this.m_flags & box2d.b2BodyFlag.e_activeFlag ? "true" : "false"),
                box2d.b2Log("  bd.gravityScale = %.15f;\n", this.m_gravityScale),
                box2d.b2Log("\n"),
                box2d.b2Log("  bodies[%d] = this.m_world.CreateBody(bd);\n", this.m_islandIndex),
                box2d.b2Log("\n");
            for (var c = this.m_fixtureList; c; c = c.m_next) box2d.b2Log("  if (true)\n"), box2d.b2Log("  {\n"), c.Dump(a), box2d.b2Log("  }\n");
            box2d.b2Log("}\n");
        }
    }),
    (box2d.b2Body.prototype.GetControllerList = function () {
        return this.m_controllerList;
    }),
    (box2d.b2Body.prototype.GetControllerCount = function () {
        return this.m_controllerCount;
    }),
    goog.provide("box2d.b2World"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Draw"),
    goog.require("box2d.b2ContactManager"),
    goog.require("box2d.b2ContactSolver"),
    goog.require("box2d.b2Island"),
    goog.require("box2d.b2Body"),
    goog.require("box2d.b2Math"),
    goog.require("box2d.b2Collision"),
    goog.require("box2d.b2TimeStep"),
    goog.require("box2d.b2WorldCallbacks"),
    goog.require("box2d.b2JointFactory"),
    (box2d.b2WorldFlag = { e_none: 0, e_newFixture: 1, e_locked: 2, e_clearForces: 4 }),
    goog.exportProperty(box2d.b2WorldFlag, "e_none", box2d.b2WorldFlag.e_none),
    goog.exportProperty(box2d.b2WorldFlag, "e_newFixture", box2d.b2WorldFlag.e_newFixture),
    goog.exportProperty(box2d.b2WorldFlag, "e_locked", box2d.b2WorldFlag.e_locked),
    goog.exportProperty(box2d.b2WorldFlag, "e_clearForces", box2d.b2WorldFlag.e_clearForces),
    (box2d.b2World = function (a) {
        (this.m_flags = box2d.b2WorldFlag.e_clearForces),
            (this.m_contactManager = new box2d.b2ContactManager()),
            (this.m_gravity = a.Clone()),
            (this.m_out_gravity = new box2d.b2Vec2()),
            (this.m_allowSleep = !0),
            (this.m_destructionListener = null),
            (this.m_debugDraw = null),
            (this.m_warmStarting = !0),
            (this.m_continuousPhysics = !0),
            (this.m_subStepping = !1),
            (this.m_stepComplete = !0),
            (this.m_profile = new box2d.b2Profile()),
            (this.m_island = new box2d.b2Island()),
            (this.s_stack = new Array());
    }),
    (box2d.b2World.prototype.m_flags = box2d.b2WorldFlag.e_none),
    (box2d.b2World.prototype.m_contactManager = null),
    (box2d.b2World.prototype.m_bodyList = null),
    (box2d.b2World.prototype.m_jointList = null),
    (box2d.b2World.prototype.m_bodyCount = 0),
    (box2d.b2World.prototype.m_jointCount = 0),
    (box2d.b2World.prototype.m_gravity = null),
    (box2d.b2World.prototype.m_out_gravity = null),
    (box2d.b2World.prototype.m_allowSleep = !0),
    (box2d.b2World.prototype.m_destructionListener = null),
    (box2d.b2World.prototype.m_debugDraw = null),
    (box2d.b2World.prototype.m_inv_dt0 = 0),
    (box2d.b2World.prototype.m_warmStarting = !0),
    (box2d.b2World.prototype.m_continuousPhysics = !0),
    (box2d.b2World.prototype.m_subStepping = !1),
    (box2d.b2World.prototype.m_stepComplete = !0),
    (box2d.b2World.prototype.m_profile = null),
    (box2d.b2World.prototype.m_island = null),
    (box2d.b2World.prototype.s_stack = null),
    (box2d.b2World.prototype.m_controllerList = null),
    (box2d.b2World.prototype.m_controllerCount = 0),
    (box2d.b2World.prototype.SetAllowSleeping = function (a) {
        if (a !== this.m_allowSleep && ((this.m_allowSleep = a), !1 === this.m_allowSleep)) for (var b = this.m_bodyList; b; b = b.m_next) b.SetAwake(!0);
    }),
    (box2d.b2World.prototype.GetAllowSleeping = function () {
        return this.m_allowSleep;
    }),
    (box2d.b2World.prototype.SetWarmStarting = function (a) {
        this.m_warmStarting = a;
    }),
    (box2d.b2World.prototype.GetWarmStarting = function () {
        return this.m_warmStarting;
    }),
    (box2d.b2World.prototype.SetContinuousPhysics = function (a) {
        this.m_continuousPhysics = a;
    }),
    (box2d.b2World.prototype.GetContinuousPhysics = function () {
        return this.m_continuousPhysics;
    }),
    (box2d.b2World.prototype.SetSubStepping = function (a) {
        this.m_subStepping = a;
    }),
    (box2d.b2World.prototype.GetSubStepping = function () {
        return this.m_subStepping;
    }),
    (box2d.b2World.prototype.GetBodyList = function () {
        return this.m_bodyList;
    }),
    (box2d.b2World.prototype.GetJointList = function () {
        return this.m_jointList;
    }),
    (box2d.b2World.prototype.GetContactList = function () {
        return this.m_contactManager.m_contactList;
    }),
    (box2d.b2World.prototype.GetBodyCount = function () {
        return this.m_bodyCount;
    }),
    (box2d.b2World.prototype.GetJointCount = function () {
        return this.m_jointCount;
    }),
    (box2d.b2World.prototype.GetContactCount = function () {
        return this.m_contactManager.m_contactCount;
    }),
    (box2d.b2World.prototype.SetGravity = function (a, b) {
        if (((b = b || !0), (this.m_gravity.x !== a.x || this.m_gravity.y !== a.y) && (this.m_gravity.Copy(a), b))) for (var c = this.m_bodyList; c; c = c.m_next) c.SetAwake(!0);
    }),
    (box2d.b2World.prototype.GetGravity = function (a) {
        return (a = a || this.m_out_gravity).Copy(this.m_gravity);
    }),
    (box2d.b2World.prototype.IsLocked = function () {
        return 0 < (this.m_flags & box2d.b2WorldFlag.e_locked);
    }),
    (box2d.b2World.prototype.SetAutoClearForces = function (a) {
        a ? (this.m_flags |= box2d.b2WorldFlag.e_clearForces) : (this.m_flags &= ~box2d.b2WorldFlag.e_clearForces);
    }),
    (box2d.b2World.prototype.GetAutoClearForces = function () {
        return (this.m_flags & box2d.b2WorldFlag.e_clearForces) === box2d.b2WorldFlag.e_clearForces;
    }),
    (box2d.b2World.prototype.GetContactManager = function () {
        return this.m_contactManager;
    }),
    (box2d.b2World.prototype.GetProfile = function () {
        return this.m_profile;
    }),
    (box2d.b2World.prototype.SetDestructionListener = function (a) {
        this.m_destructionListener = a;
    }),
    (box2d.b2World.prototype.SetContactFilter = function (a) {
        this.m_contactManager.m_contactFilter = a;
    }),
    (box2d.b2World.prototype.SetContactListener = function (a) {
        this.m_contactManager.m_contactListener = a;
    }),
    (box2d.b2World.prototype.SetDebugDraw = function (a) {
        this.m_debugDraw = a;
    }),
    (box2d.b2World.prototype.CreateBody = function (a) {
        if ((box2d.ENABLE_ASSERTS && box2d.b2Assert(!1 === this.IsLocked()), this.IsLocked())) return null;
        var b = new box2d.b2Body(a, this);
        return (b.m_prev = null), (b.m_next = this.m_bodyList), this.m_bodyList && (this.m_bodyList.m_prev = b), (this.m_bodyList = b), ++this.m_bodyCount, b;
    }),
    (box2d.b2World.prototype.DestroyBody = function (a) {
        if ((box2d.ENABLE_ASSERTS && box2d.b2Assert(0 < this.m_bodyCount), box2d.ENABLE_ASSERTS && box2d.b2Assert(!1 === this.IsLocked()), !this.IsLocked())) {
            for (var b = a.m_jointList; b; ) {
                var c = b;
                (b = b.next), this.m_destructionListener && this.m_destructionListener.SayGoodbyeJoint(c.joint), this.DestroyJoint(c.joint), (a.m_jointList = b);
            }
            a.m_jointList = null;
            for (var d = a.m_controllerList; d; ) {
                var e = d;
                (d = d.nextController), e.controller.RemoveBody(a);
            }
            for (var f = a.m_contactList; f; ) {
                var g = f;
                (f = f.next), this.m_contactManager.Destroy(g.contact);
            }
            a.m_contactList = null;
            for (var h = a.m_fixtureList; h; ) {
                var i = h;
                (h = h.m_next), this.m_destructionListener && this.m_destructionListener.SayGoodbyeFixture(i), i.DestroyProxies(this.m_contactManager.m_broadPhase), i.Destroy(), (a.m_fixtureList = h), (a.m_fixtureCount -= 1);
            }
            (a.m_fixtureList = null), (a.m_fixtureCount = 0), a.m_prev && (a.m_prev.m_next = a.m_next), a.m_next && (a.m_next.m_prev = a.m_prev), a === this.m_bodyList && (this.m_bodyList = a.m_next), --this.m_bodyCount;
        }
    }),
    (box2d.b2World.prototype.CreateJoint = function (a) {
        if ((box2d.ENABLE_ASSERTS && box2d.b2Assert(!1 === this.IsLocked()), this.IsLocked())) return null;
        var b = box2d.b2JointFactory.Create(a, null);
        (b.m_prev = null),
            (b.m_next = this.m_jointList),
            this.m_jointList && (this.m_jointList.m_prev = b),
            (this.m_jointList = b),
            ++this.m_jointCount,
            ((b.m_edgeA.joint = b).m_edgeA.other = b.m_bodyB),
            (b.m_edgeA.prev = null),
            (b.m_edgeA.next = b.m_bodyA.m_jointList),
            b.m_bodyA.m_jointList && (b.m_bodyA.m_jointList.prev = b.m_edgeA),
            (b.m_bodyA.m_jointList = b.m_edgeA),
            ((b.m_edgeB.joint = b).m_edgeB.other = b.m_bodyA),
            (b.m_edgeB.prev = null),
            (b.m_edgeB.next = b.m_bodyB.m_jointList),
            b.m_bodyB.m_jointList && (b.m_bodyB.m_jointList.prev = b.m_edgeB),
            (b.m_bodyB.m_jointList = b.m_edgeB);
        var c = a.bodyA,
            d = a.bodyB;
        if (!1 === a.collideConnected) for (var e = d.GetContactList(); e; ) e.other === c && e.contact.FlagForFiltering(), (e = e.next);
        return b;
    }),
    (box2d.b2World.prototype.DestroyJoint = function (a) {
        if ((box2d.ENABLE_ASSERTS && box2d.b2Assert(!1 === this.IsLocked()), !this.IsLocked())) {
            var b = a.m_collideConnected;
            a.m_prev && (a.m_prev.m_next = a.m_next), a.m_next && (a.m_next.m_prev = a.m_prev), a === this.m_jointList && (this.m_jointList = a.m_next);
            var c = a.m_bodyA,
                d = a.m_bodyB;
            if (
                (c.SetAwake(!0),
                d.SetAwake(!0),
                a.m_edgeA.prev && (a.m_edgeA.prev.next = a.m_edgeA.next),
                a.m_edgeA.next && (a.m_edgeA.next.prev = a.m_edgeA.prev),
                a.m_edgeA === c.m_jointList && (c.m_jointList = a.m_edgeA.next),
                (a.m_edgeA.prev = null),
                (a.m_edgeA.next = null),
                a.m_edgeB.prev && (a.m_edgeB.prev.next = a.m_edgeB.next),
                a.m_edgeB.next && (a.m_edgeB.next.prev = a.m_edgeB.prev),
                a.m_edgeB === d.m_jointList && (d.m_jointList = a.m_edgeB.next),
                (a.m_edgeB.prev = null),
                (a.m_edgeB.next = null),
                box2d.b2JointFactory.Destroy(a, null),
                box2d.ENABLE_ASSERTS && box2d.b2Assert(0 < this.m_jointCount),
                --this.m_jointCount,
                !1 === b)
            )
                for (var e = d.GetContactList(); e; ) e.other === c && e.contact.FlagForFiltering(), (e = e.next);
        }
    }),
    (box2d.b2World.prototype.Solve = function (a) {
        for (var b = this.m_controllerList; b; b = b.m_next) b.Step(a);
        (this.m_profile.solveInit = 0), (this.m_profile.solveVelocity = 0), (this.m_profile.solvePosition = 0);
        var c = this.m_island;
        c.Initialize(this.m_bodyCount, this.m_contactManager.m_contactCount, this.m_jointCount, null, this.m_contactManager.m_contactListener);
        for (var d = this.m_bodyList; d; d = d.m_next) d.m_flags &= ~box2d.b2BodyFlag.e_islandFlag;
        for (var e = this.m_contactManager.m_contactList; e; e = e.m_next) e.m_flags &= ~box2d.b2ContactFlag.e_islandFlag;
        for (var f = this.m_jointList; f; f = f.m_next) f.m_islandFlag = !1;
        for (var g = this.m_bodyCount, h = this.s_stack, i = this.m_bodyList; i; i = i.m_next)
            if (!(i.m_flags & box2d.b2BodyFlag.e_islandFlag) && !1 !== i.IsAwake() && !1 !== i.IsActive() && i.GetType() !== box2d.b2BodyType.b2_staticBody) {
                c.Clear();
                var j = 0;
                for ((h[j++] = i).m_flags |= box2d.b2BodyFlag.e_islandFlag; 0 < j; ) {
                    d = h[--j];
                    if ((box2d.ENABLE_ASSERTS && box2d.b2Assert(!0 === d.IsActive()), c.AddBody(d), d.SetAwake(!0), d.GetType() !== box2d.b2BodyType.b2_staticBody)) {
                        for (var k = d.m_contactList; k; k = k.next) {
                            var l = k.contact;
                            if (!(l.m_flags & box2d.b2ContactFlag.e_islandFlag) && !1 !== l.IsEnabled() && !1 !== l.IsTouching()) {
                                var m = l.m_fixtureA.m_isSensor,
                                    n = l.m_fixtureB.m_isSensor;
                                if (!m && !n)
                                    c.AddContact(l),
                                        (l.m_flags |= box2d.b2ContactFlag.e_islandFlag),
                                        (o = k.other).m_flags & box2d.b2BodyFlag.e_islandFlag || (box2d.ENABLE_ASSERTS && box2d.b2Assert(j < g), ((h[j++] = o).m_flags |= box2d.b2BodyFlag.e_islandFlag));
                            }
                        }
                        for (var p = d.m_jointList; p; p = p.next)
                            if (!0 !== p.joint.m_islandFlag) {
                                var o;
                                !1 !== (o = p.other).IsActive() &&
                                    (c.AddJoint(p.joint), (p.joint.m_islandFlag = !0), o.m_flags & box2d.b2BodyFlag.e_islandFlag || (box2d.ENABLE_ASSERTS && box2d.b2Assert(j < g), ((h[j++] = o).m_flags |= box2d.b2BodyFlag.e_islandFlag)));
                            }
                    }
                }
                var q = new box2d.b2Profile();
                c.Solve(q, a, this.m_gravity, this.m_allowSleep), (this.m_profile.solveInit += q.solveInit), (this.m_profile.solveVelocity += q.solveVelocity), (this.m_profile.solvePosition += q.solvePosition);
                for (var r = 0; r < c.m_bodyCount; ++r) {
                    (d = c.m_bodies[r]).GetType() === box2d.b2BodyType.b2_staticBody && (d.m_flags &= ~box2d.b2BodyFlag.e_islandFlag);
                }
            }
        for (r = 0; r < h.length && h[r]; ++r) h[r] = null;
        var s = new box2d.b2Timer();
        for (d = this.m_bodyList; d; d = d.m_next) 0 != (d.m_flags & box2d.b2BodyFlag.e_islandFlag) && d.GetType() !== box2d.b2BodyType.b2_staticBody && d.SynchronizeFixtures();
        this.m_contactManager.FindNewContacts(), (this.m_profile.broadphase = s.GetMilliseconds());
    }),
    (box2d.b2World.prototype.SolveTOI = function (a) {
        var b = this.m_island;
        if ((b.Initialize(2 * box2d.b2_maxTOIContacts, box2d.b2_maxTOIContacts, 0, null, this.m_contactManager.m_contactListener), this.m_stepComplete)) {
            for (var c = this.m_bodyList; c; c = c.m_next) (c.m_flags &= ~box2d.b2BodyFlag.e_islandFlag), (c.m_sweep.alpha0 = 0);
            for (var d = this.m_contactManager.m_contactList; d; d = d.m_next) (d.m_flags &= ~(box2d.b2ContactFlag.e_toiFlag | box2d.b2ContactFlag.e_islandFlag)), (d.m_toiCount = 0), (d.m_toi = 1);
        }
        for (;;) {
            var e = null,
                f = 1;
            for (d = this.m_contactManager.m_contactList; d; d = d.m_next)
                if (!1 !== d.IsEnabled() && !(d.m_toiCount > box2d.b2_maxSubSteps)) {
                    var g = 1;
                    if (d.m_flags & box2d.b2ContactFlag.e_toiFlag) g = d.m_toi;
                    else {
                        var h = d.GetFixtureA(),
                            i = d.GetFixtureB();
                        if (h.IsSensor() || i.IsSensor()) continue;
                        var j = h.GetBody(),
                            k = i.GetBody(),
                            l = j.m_type,
                            m = k.m_type;
                        box2d.ENABLE_ASSERTS && box2d.b2Assert(l === box2d.b2BodyType.b2_dynamicBody || m === box2d.b2BodyType.b2_dynamicBody);
                        var n = j.IsAwake() && l !== box2d.b2BodyType.b2_staticBody,
                            o = k.IsAwake() && m !== box2d.b2BodyType.b2_staticBody;
                        if (!1 === n && !1 === o) continue;
                        var p = j.IsBullet() || l !== box2d.b2BodyType.b2_dynamicBody,
                            q = k.IsBullet() || m !== box2d.b2BodyType.b2_dynamicBody;
                        if (!1 === p && !1 === q) continue;
                        var r = j.m_sweep.alpha0;
                        j.m_sweep.alpha0 < k.m_sweep.alpha0 ? ((r = k.m_sweep.alpha0), j.m_sweep.Advance(r)) : k.m_sweep.alpha0 < j.m_sweep.alpha0 && ((r = j.m_sweep.alpha0), k.m_sweep.Advance(r)),
                            box2d.ENABLE_ASSERTS && box2d.b2Assert(r < 1);
                        var s = d.GetChildIndexA(),
                            t = d.GetChildIndexB(),
                            u = box2d.b2World.prototype.SolveTOI.s_toi_input;
                        u.proxyA.SetShape(h.GetShape(), s), u.proxyB.SetShape(i.GetShape(), t), u.sweepA.Copy(j.m_sweep), u.sweepB.Copy(k.m_sweep), (u.tMax = 1);
                        var v = box2d.b2World.prototype.SolveTOI.s_toi_output;
                        box2d.b2TimeOfImpact(v, u);
                        var w = v.t;
                        (g = v.state === box2d.b2TOIOutputState.e_touching ? box2d.b2Min(r + (1 - r) * w, 1) : 1), (d.m_toi = g), (d.m_flags |= box2d.b2ContactFlag.e_toiFlag);
                    }
                    g < f && ((e = d), (f = g));
                }
            if (null === e || 1 - 10 * box2d.b2_epsilon < f) {
                this.m_stepComplete = !0;
                break;
            }
            (h = e.GetFixtureA()), (i = e.GetFixtureB()), (j = h.GetBody()), (k = i.GetBody());
            var x = box2d.b2World.prototype.SolveTOI.s_backup1.Copy(j.m_sweep),
                y = box2d.b2World.prototype.SolveTOI.s_backup2.Copy(k.m_sweep);
            if ((j.Advance(f), k.Advance(f), e.Update(this.m_contactManager.m_contactListener), (e.m_flags &= ~box2d.b2ContactFlag.e_toiFlag), ++e.m_toiCount, !1 !== e.IsEnabled() && !1 !== e.IsTouching())) {
                j.SetAwake(!0),
                    k.SetAwake(!0),
                    b.Clear(),
                    b.AddBody(j),
                    b.AddBody(k),
                    b.AddContact(e),
                    (j.m_flags |= box2d.b2BodyFlag.e_islandFlag),
                    (k.m_flags |= box2d.b2BodyFlag.e_islandFlag),
                    (e.m_flags |= box2d.b2ContactFlag.e_islandFlag);
                for (var z = 0; z < 2; ++z) {
                    if ((A = 0 === z ? j : k).m_type === box2d.b2BodyType.b2_dynamicBody)
                        for (var B = A.m_contactList; B && b.m_bodyCount !== b.m_bodyCapacity && b.m_contactCount !== b.m_contactCapacity; B = B.next) {
                            var C = B.contact;
                            if (!(C.m_flags & box2d.b2ContactFlag.e_islandFlag)) {
                                var D = B.other;
                                if (D.m_type !== box2d.b2BodyType.b2_dynamicBody || !1 !== A.IsBullet() || !1 !== D.IsBullet()) {
                                    var E = C.m_fixtureA.m_isSensor,
                                        F = C.m_fixtureB.m_isSensor;
                                    if (!E && !F) {
                                        var G = box2d.b2World.prototype.SolveTOI.s_backup.Copy(D.m_sweep);
                                        0 == (D.m_flags & box2d.b2BodyFlag.e_islandFlag) && D.Advance(f),
                                            C.Update(this.m_contactManager.m_contactListener),
                                            !1 !== C.IsEnabled() && !1 !== C.IsTouching()
                                                ? ((C.m_flags |= box2d.b2ContactFlag.e_islandFlag),
                                                  b.AddContact(C),
                                                  D.m_flags & box2d.b2BodyFlag.e_islandFlag || ((D.m_flags |= box2d.b2BodyFlag.e_islandFlag), D.m_type !== box2d.b2BodyType.b2_staticBody && D.SetAwake(!0), b.AddBody(D)))
                                                : (D.m_sweep.Copy(G), D.SynchronizeTransform());
                                    }
                                }
                            }
                        }
                }
                var H = box2d.b2World.prototype.SolveTOI.s_subStep;
                (H.dt = (1 - f) * a.dt), (H.inv_dt = 1 / H.dt), (H.dtRatio = 1), (H.positionIterations = 20), (H.velocityIterations = a.velocityIterations), (H.warmStarting = !1), b.SolveTOI(H, j.m_islandIndex, k.m_islandIndex);
                for (z = 0; z < b.m_bodyCount; ++z) {
                    var A;
                    if ((((A = b.m_bodies[z]).m_flags &= ~box2d.b2BodyFlag.e_islandFlag), A.m_type === box2d.b2BodyType.b2_dynamicBody)) {
                        A.SynchronizeFixtures();
                        for (B = A.m_contactList; B; B = B.next) B.contact.m_flags &= ~(box2d.b2ContactFlag.e_toiFlag | box2d.b2ContactFlag.e_islandFlag);
                    }
                }
                if ((this.m_contactManager.FindNewContacts(), this.m_subStepping)) {
                    this.m_stepComplete = !1;
                    break;
                }
            } else e.SetEnabled(!1), j.m_sweep.Copy(x), k.m_sweep.Copy(y), j.SynchronizeTransform(), k.SynchronizeTransform();
        }
    }),
    (box2d.b2World.prototype.SolveTOI.s_subStep = new box2d.b2TimeStep()),
    (box2d.b2World.prototype.SolveTOI.s_backup = new box2d.b2Sweep()),
    (box2d.b2World.prototype.SolveTOI.s_backup1 = new box2d.b2Sweep()),
    (box2d.b2World.prototype.SolveTOI.s_backup2 = new box2d.b2Sweep()),
    (box2d.b2World.prototype.SolveTOI.s_toi_input = new box2d.b2TOIInput()),
    (box2d.b2World.prototype.SolveTOI.s_toi_output = new box2d.b2TOIOutput()),
    (box2d.b2World.prototype.Step = function (a, b, c) {
        var d = new box2d.b2Timer();
        this.m_flags & box2d.b2WorldFlag.e_newFixture && (this.m_contactManager.FindNewContacts(), (this.m_flags &= ~box2d.b2WorldFlag.e_newFixture)), (this.m_flags |= box2d.b2WorldFlag.e_locked);
        var e = box2d.b2World.prototype.Step.s_step;
        (e.dt = a), (e.velocityIterations = b), (e.positionIterations = c), (e.inv_dt = 0 < a ? 1 / a : 0), (e.dtRatio = this.m_inv_dt0 * a), (e.warmStarting = this.m_warmStarting);
        var f = new box2d.b2Timer();
        if ((this.m_contactManager.Collide(), (this.m_profile.collide = f.GetMilliseconds()), this.m_stepComplete && 0 < e.dt)) {
            f = new box2d.b2Timer();
            this.Solve(e), (this.m_profile.solve = f.GetMilliseconds());
        }
        if (this.m_continuousPhysics && 0 < e.dt) {
            f = new box2d.b2Timer();
            this.SolveTOI(e), (this.m_profile.solveTOI = f.GetMilliseconds());
        }
        0 < e.dt && (this.m_inv_dt0 = e.inv_dt), this.m_flags & box2d.b2WorldFlag.e_clearForces && this.ClearForces(), (this.m_flags &= ~box2d.b2WorldFlag.e_locked), (this.m_profile.step = d.GetMilliseconds());
    }),
    (box2d.b2World.prototype.Step.s_step = new box2d.b2TimeStep()),
    (box2d.b2World.prototype.ClearForces = function () {
        for (var a = this.m_bodyList; a; a = a.m_next) a.m_force.SetZero(), (a.m_torque = 0);
    }),
    (box2d.b2World.prototype.QueryAABB = function (a, b) {
        var c = this.m_contactManager.m_broadPhase;
        c.Query(function (b) {
            var d = c.GetUserData(b);
            box2d.ENABLE_ASSERTS && box2d.b2Assert(d instanceof box2d.b2FixtureProxy);
            var e = d.fixture;
            return d.childIndex, a instanceof box2d.b2QueryCallback ? a.ReportFixture(e) : a(e);
        }, b);
    }),
    (box2d.b2World.prototype.QueryShape = function (a, b, c) {
        var d = this.m_contactManager.m_broadPhase,
            f = box2d.b2World.prototype.QueryShape.s_aabb;
        b.ComputeAABB(f, c, 0),
            d.Query(function (e) {
                var f = d.GetUserData(e);
                box2d.ENABLE_ASSERTS && box2d.b2Assert(f instanceof box2d.b2FixtureProxy);
                var g = f.fixture;
                return f.childIndex, !box2d.b2TestOverlapShape(b, 0, g.GetShape(), 0, c, g.GetBody().GetTransform()) || (a instanceof box2d.b2QueryCallback ? a.ReportFixture(g) : a(g));
            }, f);
    }),
    (box2d.b2World.prototype.QueryShape.s_aabb = new box2d.b2AABB()),
    (box2d.b2World.prototype.QueryPoint = function (a, b) {
        var c = this.m_contactManager.m_broadPhase,
            e = box2d.b2World.prototype.QueryPoint.s_aabb;
        e.lowerBound.SetXY(b.x - box2d.b2_linearSlop, b.y - box2d.b2_linearSlop),
            e.upperBound.SetXY(b.x + box2d.b2_linearSlop, b.y + box2d.b2_linearSlop),
            c.Query(function (d) {
                var e = c.GetUserData(d);
                box2d.ENABLE_ASSERTS && box2d.b2Assert(e instanceof box2d.b2FixtureProxy);
                var f = e.fixture;
                return e.childIndex, !f.TestPoint(b) || (a instanceof box2d.b2QueryCallback ? a.ReportFixture(f) : a(f));
            }, e);
    }),
    (box2d.b2World.prototype.QueryPoint.s_aabb = new box2d.b2AABB()),
    (box2d.b2World.prototype.RayCast = function (a, b, c) {
        var d = this.m_contactManager.m_broadPhase,
            f = box2d.b2World.prototype.RayCast.s_input;
        (f.maxFraction = 1),
            f.p1.Copy(b),
            f.p2.Copy(c),
            d.RayCast(function (e, f) {
                var g = d.GetUserData(f);
                box2d.ENABLE_ASSERTS && box2d.b2Assert(g instanceof box2d.b2FixtureProxy);
                var h = g.fixture,
                    i = g.childIndex,
                    j = box2d.b2World.prototype.RayCast.s_output;
                if (h.RayCast(j, e, i)) {
                    var l = j.fraction,
                        m = box2d.b2World.prototype.RayCast.s_point;
                    return m.SetXY((1 - l) * b.x + l * c.x, (1 - l) * b.y + l * c.y), a instanceof box2d.b2RayCastCallback ? a.ReportFixture(h, m, j.normal, l) : a(h, m, j.normal, l);
                }
                return e.maxFraction;
            }, f);
    }),
    (box2d.b2World.prototype.RayCast.s_input = new box2d.b2RayCastInput()),
    (box2d.b2World.prototype.RayCast.s_output = new box2d.b2RayCastOutput()),
    (box2d.b2World.prototype.RayCast.s_point = new box2d.b2Vec2()),
    (box2d.b2World.prototype.RayCastOne = function (a, b) {
        var d = null,
            e = 1;
        return (
            this.RayCast(
                function (a, b, c, f) {
                    return f < e && ((e = f), (d = a)), e;
                },
                a,
                b
            ),
            d
        );
    }),
    (box2d.b2World.prototype.RayCastAll = function (a, b, c) {
        return (
            (c.length = 0),
            this.RayCast(
                function (a) {
                    return c.push(a), 1;
                },
                a,
                b
            ),
            c
        );
    }),
    (box2d.b2World.prototype.DrawShape = function (a, b) {
        var c = a.GetShape();
        switch (c.m_type) {
            case box2d.b2ShapeType.e_circleShape:
                var d = c instanceof box2d.b2CircleShape ? c : null,
                    e = d.m_p,
                    f = d.m_radius,
                    g = box2d.b2Vec2.UNITX;
                this.m_debugDraw.DrawSolidCircle(e, f, g, b);
                break;
            case box2d.b2ShapeType.e_edgeShape:
                var h = c instanceof box2d.b2EdgeShape ? c : null,
                    i = h.m_vertex1,
                    j = h.m_vertex2;
                this.m_debugDraw.DrawSegment(i, j, b);
                break;
            case box2d.b2ShapeType.e_chainShape:
                for (var k = c instanceof box2d.b2ChainShape ? c : null, l = k.m_count, n = ((i = (m = k.m_vertices)[0]), 0); n < l; ++n) {
                    j = m[n];
                    this.m_debugDraw.DrawSegment(i, j, b), this.m_debugDraw.DrawCircle(j, 0.05, b), (i = j);
                }
                break;
            case box2d.b2ShapeType.e_polygonShape:
                var o = c instanceof box2d.b2PolygonShape ? c : null,
                    p = o.m_count,
                    m = o.m_vertices;
                this.m_debugDraw.DrawSolidPolygon(m, p, b);
        }
    }),
    (box2d.b2World.prototype.DrawJoint = function (a) {
        var b = a.GetBodyA(),
            c = a.GetBodyB(),
            d = b.m_xf,
            e = c.m_xf,
            f = d.p,
            g = e.p,
            h = a.GetAnchorA(box2d.b2World.prototype.DrawJoint.s_p1),
            i = a.GetAnchorB(box2d.b2World.prototype.DrawJoint.s_p2),
            j = box2d.b2World.prototype.DrawJoint.s_color.SetRGB(0.5, 0.8, 0.8);
        switch (a.m_type) {
            case box2d.b2JointType.e_distanceJoint:
                this.m_debugDraw.DrawSegment(h, i, j);
                break;
            case box2d.b2JointType.e_pulleyJoint:
                var k = a instanceof box2d.b2PulleyJoint ? a : null,
                    l = k.GetGroundAnchorA(box2d.b2World.prototype.DrawJoint.s_s1),
                    m = k.GetGroundAnchorB(box2d.b2World.prototype.DrawJoint.s_s2);
                this.m_debugDraw.DrawSegment(l, h, j), this.m_debugDraw.DrawSegment(m, i, j), this.m_debugDraw.DrawSegment(l, m, j);
                break;
            case box2d.b2JointType.e_mouseJoint:
                this.m_debugDraw.DrawSegment(h, i, j);
                break;
            default:
                this.m_debugDraw.DrawSegment(f, h, j), this.m_debugDraw.DrawSegment(h, i, j), this.m_debugDraw.DrawSegment(g, i, j);
        }
    }),
    (box2d.b2World.prototype.DrawJoint.s_p1 = new box2d.b2Vec2()),
    (box2d.b2World.prototype.DrawJoint.s_p2 = new box2d.b2Vec2()),
    (box2d.b2World.prototype.DrawJoint.s_color = new box2d.b2Color(0.5, 0.8, 0.8)),
    (box2d.b2World.prototype.DrawJoint.s_s1 = new box2d.b2Vec2()),
    (box2d.b2World.prototype.DrawJoint.s_s2 = new box2d.b2Vec2()),
    (box2d.b2World.prototype.DrawDebugData = function () {
        if (null !== this.m_debugDraw) {
            var a = this.m_debugDraw.GetFlags(),
                b = box2d.b2World.prototype.DrawDebugData.s_color.SetRGB(0, 0, 0);
            if (a & box2d.b2DrawFlags.e_shapeBit)
                for (var c = this.m_bodyList; c; c = c.m_next) {
                    var d = c.m_xf;
                    this.m_debugDraw.PushTransform(d);
                    for (var e = c.GetFixtureList(); e; e = e.m_next)
                        !1 === c.IsActive()
                            ? b.SetRGB(0.5, 0.5, 0.3)
                            : c.GetType() === box2d.b2BodyType.b2_staticBody
                            ? b.SetRGB(0.5, 0.9, 0.5)
                            : c.GetType() === box2d.b2BodyType.b2_kinematicBody
                            ? b.SetRGB(0.5, 0.5, 0.9)
                            : !1 === c.IsAwake()
                            ? b.SetRGB(0.6, 0.6, 0.6)
                            : b.SetRGB(0.9, 0.7, 0.7),
                            this.DrawShape(e, b);
                    this.m_debugDraw.PopTransform(d);
                }
            if (a & box2d.b2DrawFlags.e_jointBit) for (var f = this.m_jointList; f; f = f.m_next) this.DrawJoint(f);
            if (a & box2d.b2DrawFlags.e_aabbBit) {
                b.SetRGB(0.9, 0.3, 0.9);
                var g = this.m_contactManager.m_broadPhase,
                    h = box2d.b2World.prototype.DrawDebugData.s_vs;
                for (c = this.m_bodyList; c; c = c.m_next)
                    if (!1 !== c.IsActive())
                        for (e = c.GetFixtureList(); e; e = e.m_next)
                            for (var i = 0; i < e.m_proxyCount; ++i) {
                                var j = e.m_proxies[i],
                                    k = g.GetFatAABB(j.proxy);
                                h[0].SetXY(k.lowerBound.x, k.lowerBound.y),
                                    h[1].SetXY(k.upperBound.x, k.lowerBound.y),
                                    h[2].SetXY(k.upperBound.x, k.upperBound.y),
                                    h[3].SetXY(k.lowerBound.x, k.upperBound.y),
                                    this.m_debugDraw.DrawPolygon(h, 4, b);
                            }
            }
            if (a & box2d.b2DrawFlags.e_centerOfMassBit)
                for (c = this.m_bodyList; c; c = c.m_next) {
                    (d = box2d.b2World.prototype.DrawDebugData.s_xf).q.Copy(c.m_xf.q), d.p.Copy(c.GetWorldCenter()), this.m_debugDraw.DrawTransform(d);
                }
            if (a & box2d.b2DrawFlags.e_controllerBit) for (var l = this.m_controllerList; l; l = l.m_next) l.Draw(this.m_debugDraw);
        }
    }),
    (box2d.b2World.prototype.DrawDebugData.s_color = new box2d.b2Color(0, 0, 0)),
    (box2d.b2World.prototype.DrawDebugData.s_vs = box2d.b2Vec2.MakeArray(4)),
    (box2d.b2World.prototype.DrawDebugData.s_xf = new box2d.b2Transform()),
    (box2d.b2World.prototype.SetBroadPhase = function (a) {
        var b = this.m_contactManager.m_broadPhase;
        this.m_contactManager.m_broadPhase = a;
        for (var c = this.m_bodyList; c; c = c.m_next) for (var d = c.m_fixtureList; d; d = d.m_next) d.m_proxy = a.CreateProxy(b.GetFatAABB(d.m_proxy), d);
    }),
    (box2d.b2World.prototype.GetProxyCount = function () {
        return this.m_contactManager.m_broadPhase.GetProxyCount();
    }),
    (box2d.b2World.prototype.GetTreeHeight = function () {
        return this.m_contactManager.m_broadPhase.GetTreeHeight();
    }),
    (box2d.b2World.prototype.GetTreeBalance = function () {
        return this.m_contactManager.m_broadPhase.GetTreeBalance();
    }),
    (box2d.b2World.prototype.GetTreeQuality = function () {
        return this.m_contactManager.m_broadPhase.GetTreeQuality();
    }),
    (box2d.b2World.prototype.ShiftOrigin = function (a) {
        if ((box2d.ENABLE_ASSERTS && box2d.b2Assert(!1 === this.IsLocked()), !this.IsLocked())) {
            for (var b = this.m_bodyList; b; b = b.m_next) b.m_xf.p.SelfSub(a), b.m_sweep.c0.SelfSub(a), b.m_sweep.c.SelfSub(a);
            for (var c = this.m_jointList; c; c = c.m_next) c.ShiftOrigin(a);
            this.m_contactManager.m_broadPhase.ShiftOrigin(a);
        }
    }),
    (box2d.b2World.prototype.Dump = function () {
        if (box2d.DEBUG) {
            if ((this.m_flags & box2d.b2WorldFlag.e_locked) === box2d.b2WorldFlag.e_locked) return;
            box2d.b2Log("/** @type {box2d.b2Vec2} */ var g = new box2d.b2Vec2(%.15f, %.15f);\n", this.m_gravity.x, this.m_gravity.y),
                box2d.b2Log("this.m_world.SetGravity(g);\n"),
                box2d.b2Log("/** @type {Array.<box2d.b2Body>} */ var bodies = new Array(%d);\n", this.m_bodyCount),
                box2d.b2Log("/** @type {Array.<box2d.b2Joint>} */ var joints = new Array(%d);\n", this.m_jointCount);
            for (var a = 0, b = this.m_bodyList; b; b = b.m_next) (b.m_islandIndex = a), b.Dump(), ++a;
            a = 0;
            for (var c = this.m_jointList; c; c = c.m_next) (c.m_index = a), ++a;
            for (c = this.m_jointList; c; c = c.m_next) c.m_type !== box2d.b2JointType.e_gearJoint && (box2d.b2Log("if (true)\n"), box2d.b2Log("{\n"), c.Dump(), box2d.b2Log("}\n"));
            for (c = this.m_jointList; c; c = c.m_next) c.m_type === box2d.b2JointType.e_gearJoint && (box2d.b2Log("if (true)\n"), box2d.b2Log("{\n"), c.Dump(), box2d.b2Log("}\n"));
        }
    }),
    (box2d.b2World.prototype.AddController = function (a) {
        return (
            box2d.ENABLE_ASSERTS && box2d.b2Assert(null === a.m_world, "Controller can only be a member of one world"),
            (a.m_world = this),
            (a.m_next = this.m_controllerList),
            (a.m_prev = null),
            this.m_controllerList && (this.m_controllerList.m_prev = a),
            (this.m_controllerList = a),
            ++this.m_controllerCount,
            a
        );
    }),
    (box2d.b2World.prototype.RemoveController = function (a) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(a.m_world === this, "Controller is not a member of this world"),
            a.m_prev && (a.m_prev.m_next = a.m_next),
            a.m_next && (a.m_next.m_prev = a.m_prev),
            this.m_controllerList === a && (this.m_controllerList = a.m_next),
            --this.m_controllerCount,
            (a.m_prev = null),
            (a.m_next = null),
            (a.m_world = null);
    }),
    goog.provide("box2d.b2AreaJoint"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Joint"),
    goog.require("box2d.b2Math"),
    (box2d.b2AreaJointDef = function () {
        goog.base(this, box2d.b2JointType.e_areaJoint), (this.bodies = new Array());
    }),
    goog.inherits(box2d.b2AreaJointDef, box2d.b2JointDef),
    (box2d.b2AreaJointDef.prototype.world = null),
    (box2d.b2AreaJointDef.prototype.bodies = null),
    (box2d.b2AreaJointDef.prototype.frequencyHz = 0),
    (box2d.b2AreaJointDef.prototype.dampingRatio = 0),
    (box2d.b2AreaJointDef.prototype.AddBody = function (a) {
        this.bodies.push(a), 1 === this.bodies.length ? (this.bodyA = a) : 2 === this.bodies.length && (this.bodyB = a);
    }),
    (box2d.b2AreaJoint = function (a) {
        goog.base(this, a),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(3 <= a.bodies.length, "You cannot create an area joint with less than three bodies."),
            (this.m_bodies = a.bodies),
            (this.m_frequencyHz = a.frequencyHz),
            (this.m_dampingRatio = a.dampingRatio),
            (this.m_targetLengths = box2d.b2MakeNumberArray(a.bodies.length)),
            (this.m_normals = box2d.b2Vec2.MakeArray(a.bodies.length)),
            (this.m_joints = new Array(a.bodies.length)),
            (this.m_deltas = box2d.b2Vec2.MakeArray(a.bodies.length)),
            (this.m_delta = new box2d.b2Vec2());
        var b = new box2d.b2DistanceJointDef();
        (b.frequencyHz = a.frequencyHz), (b.dampingRatio = a.dampingRatio);
        for (var c = (this.m_targetArea = 0), d = this.m_bodies.length; c < d; ++c) {
            var e = this.m_bodies[c],
                f = this.m_bodies[(c + 1) % d],
                g = e.GetWorldCenter(),
                h = f.GetWorldCenter();
            (this.m_targetLengths[c] = box2d.b2DistanceVV(g, h)), (this.m_targetArea += box2d.b2CrossVV(g, h)), b.Initialize(e, f, g, h), (this.m_joints[c] = a.world.CreateJoint(b));
        }
        this.m_targetArea *= 0.5;
    }),
    goog.inherits(box2d.b2AreaJoint, box2d.b2Joint),
    (box2d.b2AreaJoint.prototype.m_bodies = null),
    (box2d.b2AreaJoint.prototype.m_frequencyHz = 0),
    (box2d.b2AreaJoint.prototype.m_dampingRatio = 0),
    (box2d.b2AreaJoint.prototype.m_impulse = 0),
    (box2d.b2AreaJoint.prototype.m_targetLengths = null),
    (box2d.b2AreaJoint.prototype.m_targetArea = 0),
    (box2d.b2AreaJoint.prototype.m_normals = null),
    (box2d.b2AreaJoint.prototype.m_joints = null),
    (box2d.b2AreaJoint.prototype.m_deltas = null),
    (box2d.b2AreaJoint.prototype.m_delta = null),
    (box2d.b2AreaJoint.prototype.GetAnchorA = function (a) {
        return a.SetZero();
    }),
    (box2d.b2AreaJoint.prototype.GetAnchorB = function (a) {
        return a.SetZero();
    }),
    (box2d.b2AreaJoint.prototype.GetReactionForce = function (a, b) {
        return b.SetZero();
    }),
    (box2d.b2AreaJoint.prototype.GetReactionTorque = function () {
        return 0;
    }),
    (box2d.b2AreaJoint.prototype.SetFrequency = function (a) {
        this.m_frequencyHz = a;
        for (var b = 0, c = this.m_joints.length; b < c; ++b) this.m_joints[b].SetFrequency(a);
    }),
    (box2d.b2AreaJoint.prototype.GetFrequency = function () {
        return this.m_frequencyHz;
    }),
    (box2d.b2AreaJoint.prototype.SetDampingRatio = function (a) {
        this.m_dampingRatio = a;
        for (var b = 0, c = this.m_joints.length; b < c; ++b) this.m_joints[b].SetDampingRatio(a);
    }),
    (box2d.b2AreaJoint.prototype.GetDampingRatio = function () {
        return this.m_dampingRatio;
    }),
    (box2d.b2AreaJoint.prototype.Dump = function () {
        box2d.DEBUG && box2d.b2Log("Area joint dumping is not supported.\n");
    }),
    (box2d.b2AreaJoint.prototype.InitVelocityConstraints = function (a) {
        for (var b = 0, c = this.m_bodies.length; b < c; ++b) {
            var d = this.m_bodies[(b + c - 1) % c],
                e = this.m_bodies[(b + 1) % c],
                f = a.positions[d.m_islandIndex].c,
                g = a.positions[e.m_islandIndex].c,
                h = this.m_deltas[b];
            box2d.b2SubVV(g, f, h);
        }
        if (a.step.warmStarting) {
            this.m_impulse *= a.step.dtRatio;
            for (b = 0, c = this.m_bodies.length; b < c; ++b) {
                var i = this.m_bodies[b],
                    j = a.velocities[i.m_islandIndex].v;
                h = this.m_deltas[b];
                (j.x += i.m_invMass * h.y * 0.5 * this.m_impulse), (j.y += i.m_invMass * -h.x * 0.5 * this.m_impulse);
            }
        } else this.m_impulse = 0;
    }),
    (box2d.b2AreaJoint.prototype.SolveVelocityConstraints = function (a) {
        for (var b = 0, c = 0, d = 0, e = this.m_bodies.length; d < e; ++d) {
            var f = this.m_bodies[d],
                g = a.velocities[f.m_islandIndex].v;
            (b += (h = this.m_deltas[d]).GetLengthSquared() / f.GetMass()), (c += box2d.b2CrossVV(g, h));
        }
        var i = (-2 * c) / b;
        this.m_impulse += i;
        for (d = 0, e = this.m_bodies.length; d < e; ++d) {
            (f = this.m_bodies[d]), (g = a.velocities[f.m_islandIndex].v);
            var h = this.m_deltas[d];
            (g.x += f.m_invMass * h.y * 0.5 * i), (g.y += f.m_invMass * -h.x * 0.5 * i);
        }
    }),
    (box2d.b2AreaJoint.prototype.SolvePositionConstraints = function (a) {
        for (var b = 0, c = 0, d = 0, e = this.m_bodies.length; d < e; ++d) {
            var f = this.m_bodies[d],
                g = this.m_bodies[(d + 1) % e],
                h = a.positions[f.m_islandIndex].c,
                i = a.positions[g.m_islandIndex].c,
                k = (j = box2d.b2SubVV(i, h, this.m_delta)).GetLength();
            k < box2d.b2_epsilon && (k = 1), (this.m_normals[d].x = j.y / k), (this.m_normals[d].y = -j.x / k), (b += k), (c += box2d.b2CrossVV(h, i));
        }
        c *= 0.5;
        var m = (0.5 * (this.m_targetArea - c)) / b,
            n = !0;
        for (d = 0, e = this.m_bodies.length; d < e; ++d) {
            (f = this.m_bodies[d]), (h = a.positions[f.m_islandIndex].c);
            var j,
                o = (d + 1) % e;
            (j = box2d.b2AddVV(this.m_normals[d], this.m_normals[o], this.m_delta)).SelfMul(m);
            var p = j.GetLengthSquared();
            p > box2d.b2Sq(box2d.b2_maxLinearCorrection) && j.SelfMul(box2d.b2_maxLinearCorrection / box2d.b2Sqrt(p)), p > box2d.b2Sq(box2d.b2_linearSlop) && (n = !1), (h.x += j.x), (h.y += j.y);
        }
        return n;
    }),
    goog.provide("box2d.b2BuoyancyController"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Controller"),
    goog.require("box2d.b2Math"),
    goog.require("box2d.b2WorldCallbacks"),
    (box2d.b2BuoyancyController = function () {
        goog.base(this), (this.normal = new box2d.b2Vec2(0, 1)), (this.velocity = new box2d.b2Vec2(0, 0)), (this.gravity = new box2d.b2Vec2(0, 0));
    }),
    goog.inherits(box2d.b2BuoyancyController, box2d.b2Controller),
    (box2d.b2BuoyancyController.prototype.normal = null),
    (box2d.b2BuoyancyController.prototype.offset = 0),
    (box2d.b2BuoyancyController.prototype.density = 0),
    (box2d.b2BuoyancyController.prototype.velocity = null),
    (box2d.b2BuoyancyController.prototype.linearDrag = 0),
    (box2d.b2BuoyancyController.prototype.angularDrag = 0),
    (box2d.b2BuoyancyController.prototype.useDensity = !1),
    (box2d.b2BuoyancyController.prototype.useWorldGravity = !0),
    (box2d.b2BuoyancyController.prototype.gravity = null),
    (box2d.b2BuoyancyController.prototype.Step = function () {
        if (this.m_bodyList) {
            this.useWorldGravity && this.gravity.Copy(this.GetWorld().GetGravity());
            for (var a = this.m_bodyList; a; a = a.nextBody) {
                var b = a.body;
                if (!1 !== b.IsAwake()) {
                    for (var c = new box2d.b2Vec2(), d = new box2d.b2Vec2(), e = 0, f = 0, g = b.GetFixtureList(); g; g = g.m_next) {
                        var h = new box2d.b2Vec2(),
                            i = g.GetShape().ComputeSubmergedArea(this.normal, this.offset, b.GetTransform(), h);
                        (e += i), (c.x += i * h.x), (c.y += i * h.y);
                        var j;
                        (f += i * (j = this.useDensity ? g.GetDensity() : 1)), (d.x += i * h.x * j), (d.y += i * h.y * j);
                    }
                    if (((c.x /= e), (c.y /= e), (d.x /= f), (d.y /= f), !(e < box2d.b2_epsilon))) {
                        var k = box2d.b2NegV(this.gravity, new box2d.b2Vec2());
                        k.SelfMul(this.density * e), b.ApplyForce(k, d);
                        var l = b.GetLinearVelocityFromWorldPoint(c, new box2d.b2Vec2());
                        l.SelfSub(this.velocity), l.SelfMul(-this.linearDrag * e), b.ApplyForce(l, c), b.ApplyTorque((-b.GetInertia() / b.GetMass()) * e * b.GetAngularVelocity() * this.angularDrag);
                    }
                }
            }
        }
    }),
    (box2d.b2BuoyancyController.prototype.Draw = function (a) {
        var b = 100,
            c = new box2d.b2Vec2(),
            d = new box2d.b2Vec2();
        (c.x = this.normal.x * this.offset + this.normal.y * b), (c.y = this.normal.y * this.offset - this.normal.x * b), (d.x = this.normal.x * this.offset - this.normal.y * b), (d.y = this.normal.y * this.offset + this.normal.x * b);
        var e = new box2d.b2Color(0, 0, 0.8);
        a.DrawSegment(c, d, e);
    }),
    goog.provide("box2d.b2TensorDampingController"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Controller"),
    goog.require("box2d.b2Math"),
    (box2d.b2TensorDampingController = function () {
        goog.base(this), (this.T = new box2d.b2Mat22()), (this.maxTimestep = 0);
    }),
    goog.inherits(box2d.b2TensorDampingController, box2d.b2Controller),
    (box2d.b2TensorDampingController.prototype.T = new box2d.b2Mat22()),
    (box2d.b2TensorDampingController.prototype.maxTimestep = 0),
    (box2d.b2TensorDampingController.prototype.Step = function (a) {
        var b = a.dt;
        if (!(b <= box2d.b2_epsilon)) {
            b > this.maxTimestep && 0 < this.maxTimestep && (b = this.maxTimestep);
            for (var c = this.m_bodyList; c; c = c.nextBody) {
                var d = c.body;
                if (d.IsAwake()) {
                    var e = d.GetWorldVector(box2d.b2MulMV(this.T, d.GetLocalVector(d.GetLinearVelocity(), box2d.b2Vec2.s_t0), box2d.b2Vec2.s_t1), box2d.b2TensorDampingController.prototype.Step.s_damping);
                    d.SetLinearVelocity(box2d.b2AddVV(d.GetLinearVelocity(), box2d.b2MulSV(b, e, box2d.b2Vec2.s_t0), box2d.b2Vec2.s_t1));
                }
            }
        }
    }),
    (box2d.b2TensorDampingController.prototype.Step.s_damping = new box2d.b2Vec2()),
    (box2d.b2TensorDampingController.prototype.SetAxisAligned = function (a, b) {
        (this.T.ex.x = -a), (this.T.ex.y = 0), (this.T.ey.x = 0), (this.T.ey.y = -b), (this.maxTimestep = 0 < a || 0 < b ? 1 / box2d.b2Max(a, b) : 0);
    }),
    goog.provide("box2d.b2DistanceJoint"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Joint"),
    goog.require("box2d.b2Math"),
    (box2d.b2DistanceJointDef = function () {
        goog.base(this, box2d.b2JointType.e_distanceJoint), (this.localAnchorA = new box2d.b2Vec2()), (this.localAnchorB = new box2d.b2Vec2());
    }),
    goog.inherits(box2d.b2DistanceJointDef, box2d.b2JointDef),
    (box2d.b2DistanceJointDef.prototype.localAnchorA = null),
    (box2d.b2DistanceJointDef.prototype.localAnchorB = null),
    (box2d.b2DistanceJointDef.prototype.length = 1),
    (box2d.b2DistanceJointDef.prototype.frequencyHz = 0),
    (box2d.b2DistanceJointDef.prototype.dampingRatio = 0),
    (box2d.b2DistanceJointDef.prototype.Initialize = function (a, b, c, d) {
        (this.bodyA = a), (this.bodyB = b), this.bodyA.GetLocalPoint(c, this.localAnchorA), this.bodyB.GetLocalPoint(d, this.localAnchorB), (this.length = box2d.b2DistanceVV(c, d)), (this.frequencyHz = 0), (this.dampingRatio = 0);
    }),
    (box2d.b2DistanceJoint = function (a) {
        goog.base(this, a),
            (this.m_u = new box2d.b2Vec2()),
            (this.m_rA = new box2d.b2Vec2()),
            (this.m_rB = new box2d.b2Vec2()),
            (this.m_localCenterA = new box2d.b2Vec2()),
            (this.m_localCenterB = new box2d.b2Vec2()),
            (this.m_qA = new box2d.b2Rot()),
            (this.m_qB = new box2d.b2Rot()),
            (this.m_lalcA = new box2d.b2Vec2()),
            (this.m_lalcB = new box2d.b2Vec2()),
            (this.m_frequencyHz = a.frequencyHz),
            (this.m_dampingRatio = a.dampingRatio),
            (this.m_localAnchorA = a.localAnchorA.Clone()),
            (this.m_localAnchorB = a.localAnchorB.Clone()),
            (this.m_length = a.length);
    }),
    goog.inherits(box2d.b2DistanceJoint, box2d.b2Joint),
    (box2d.b2DistanceJoint.prototype.m_frequencyHz = 0),
    (box2d.b2DistanceJoint.prototype.m_dampingRatio = 0),
    (box2d.b2DistanceJoint.prototype.m_bias = 0),
    (box2d.b2DistanceJoint.prototype.m_localAnchorA = null),
    (box2d.b2DistanceJoint.prototype.m_localAnchorB = null),
    (box2d.b2DistanceJoint.prototype.m_gamma = 0),
    (box2d.b2DistanceJoint.prototype.m_impulse = 0),
    (box2d.b2DistanceJoint.prototype.m_length = 0),
    (box2d.b2DistanceJoint.prototype.m_indexA = 0),
    (box2d.b2DistanceJoint.prototype.m_indexB = 0),
    (box2d.b2DistanceJoint.prototype.m_u = null),
    (box2d.b2DistanceJoint.prototype.m_rA = null),
    (box2d.b2DistanceJoint.prototype.m_rB = null),
    (box2d.b2DistanceJoint.prototype.m_localCenterA = null),
    (box2d.b2DistanceJoint.prototype.m_localCenterB = null),
    (box2d.b2DistanceJoint.prototype.m_invMassA = 0),
    (box2d.b2DistanceJoint.prototype.m_invMassB = 0),
    (box2d.b2DistanceJoint.prototype.m_invIA = 0),
    (box2d.b2DistanceJoint.prototype.m_invIB = 0),
    (box2d.b2DistanceJoint.prototype.m_mass = 0),
    (box2d.b2DistanceJoint.prototype.m_qA = null),
    (box2d.b2DistanceJoint.prototype.m_qB = null),
    (box2d.b2DistanceJoint.prototype.m_lalcA = null),
    (box2d.b2DistanceJoint.prototype.m_lalcB = null),
    (box2d.b2DistanceJoint.prototype.GetAnchorA = function (a) {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, a);
    }),
    (box2d.b2DistanceJoint.prototype.GetAnchorB = function (a) {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, a);
    }),
    (box2d.b2DistanceJoint.prototype.GetReactionForce = function (a, b) {
        return b.SetXY(a * this.m_impulse * this.m_u.x, a * this.m_impulse * this.m_u.y);
    }),
    (box2d.b2DistanceJoint.prototype.GetReactionTorque = function () {
        return 0;
    }),
    (box2d.b2DistanceJoint.prototype.GetLocalAnchorA = function (a) {
        return a.Copy(this.m_localAnchorA);
    }),
    (box2d.b2DistanceJoint.prototype.GetLocalAnchorB = function (a) {
        return a.Copy(this.m_localAnchorB);
    }),
    (box2d.b2DistanceJoint.prototype.SetLength = function (a) {
        this.m_length = a;
    }),
    (box2d.b2DistanceJoint.prototype.GetLength = function () {
        return this.m_length;
    }),
    (box2d.b2DistanceJoint.prototype.SetFrequency = function (a) {
        this.m_frequencyHz = a;
    }),
    (box2d.b2DistanceJoint.prototype.GetFrequency = function () {
        return this.m_frequencyHz;
    }),
    (box2d.b2DistanceJoint.prototype.SetDampingRatio = function (a) {
        this.m_dampingRatio = a;
    }),
    (box2d.b2DistanceJoint.prototype.GetDampingRatio = function () {
        return this.m_dampingRatio;
    }),
    (box2d.b2DistanceJoint.prototype.Dump = function () {
        if (box2d.DEBUG) {
            var a = this.m_bodyA.m_islandIndex,
                b = this.m_bodyB.m_islandIndex;
            box2d.b2Log("  /*box2d.b2DistanceJointDef*/ var jd = new box2d.b2DistanceJointDef();\n"),
                box2d.b2Log("  jd.bodyA = bodies[%d];\n", a),
                box2d.b2Log("  jd.bodyB = bodies[%d];\n", b),
                box2d.b2Log("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"),
                box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n", this.m_localAnchorA.x, this.m_localAnchorA.y),
                box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n", this.m_localAnchorB.x, this.m_localAnchorB.y),
                box2d.b2Log("  jd.length = %.15f;\n", this.m_length),
                box2d.b2Log("  jd.frequencyHz = %.15f;\n", this.m_frequencyHz),
                box2d.b2Log("  jd.dampingRatio = %.15f;\n", this.m_dampingRatio),
                box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
        }
    }),
    (box2d.b2DistanceJoint.prototype.InitVelocityConstraints = function (a) {
        (this.m_indexA = this.m_bodyA.m_islandIndex),
            (this.m_indexB = this.m_bodyB.m_islandIndex),
            this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),
            this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),
            (this.m_invMassA = this.m_bodyA.m_invMass),
            (this.m_invMassB = this.m_bodyB.m_invMass),
            (this.m_invIA = this.m_bodyA.m_invI),
            (this.m_invIB = this.m_bodyB.m_invI);
        var b = a.positions[this.m_indexA].c,
            c = a.positions[this.m_indexA].a,
            d = a.velocities[this.m_indexA].v,
            e = a.velocities[this.m_indexA].w,
            f = a.positions[this.m_indexB].c,
            g = a.positions[this.m_indexB].a,
            h = a.velocities[this.m_indexB].v,
            i = a.velocities[this.m_indexB].w,
            j = this.m_qA.SetAngleRadians(c),
            k = this.m_qB.SetAngleRadians(g);
        box2d.b2SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA),
            box2d.b2MulRV(j, this.m_lalcA, this.m_rA),
            box2d.b2SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB),
            box2d.b2MulRV(k, this.m_lalcB, this.m_rB),
            (this.m_u.x = f.x + this.m_rB.x - b.x - this.m_rA.x),
            (this.m_u.y = f.y + this.m_rB.y - b.y - this.m_rA.y);
        var l = this.m_u.GetLength();
        l > box2d.b2_linearSlop ? this.m_u.SelfMul(1 / l) : this.m_u.SetZero();
        var m = box2d.b2CrossVV(this.m_rA, this.m_u),
            n = box2d.b2CrossVV(this.m_rB, this.m_u),
            o = this.m_invMassA + this.m_invIA * m * m + this.m_invMassB + this.m_invIB * n * n;
        if (((this.m_mass = 0 !== o ? 1 / o : 0), 0 < this.m_frequencyHz)) {
            var p = l - this.m_length,
                q = 2 * box2d.b2_pi * this.m_frequencyHz,
                r = 2 * this.m_mass * this.m_dampingRatio * q,
                s = this.m_mass * q * q,
                t = a.step.dt;
            (this.m_gamma = t * (r + t * s)), (this.m_gamma = 0 !== this.m_gamma ? 1 / this.m_gamma : 0), (this.m_bias = p * t * s * this.m_gamma), (o += this.m_gamma), (this.m_mass = 0 !== o ? 1 / o : 0);
        } else (this.m_gamma = 0), (this.m_bias = 0);
        if (a.step.warmStarting) {
            this.m_impulse *= a.step.dtRatio;
            var u = box2d.b2MulSV(this.m_impulse, this.m_u, box2d.b2DistanceJoint.prototype.InitVelocityConstraints.s_P);
            d.SelfMulSub(this.m_invMassA, u), (e -= this.m_invIA * box2d.b2CrossVV(this.m_rA, u)), h.SelfMulAdd(this.m_invMassB, u), (i += this.m_invIB * box2d.b2CrossVV(this.m_rB, u));
        } else this.m_impulse = 0;
        (a.velocities[this.m_indexA].w = e), (a.velocities[this.m_indexB].w = i);
    }),
    (box2d.b2DistanceJoint.prototype.InitVelocityConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2DistanceJoint.prototype.SolveVelocityConstraints = function (a) {
        var b = a.velocities[this.m_indexA].v,
            c = a.velocities[this.m_indexA].w,
            d = a.velocities[this.m_indexB].v,
            e = a.velocities[this.m_indexB].w,
            f = box2d.b2AddVCrossSV(b, c, this.m_rA, box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpA),
            g = box2d.b2AddVCrossSV(d, e, this.m_rB, box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpB),
            h = box2d.b2DotVV(this.m_u, box2d.b2SubVV(g, f, box2d.b2Vec2.s_t0)),
            i = -this.m_mass * (h + this.m_bias + this.m_gamma * this.m_impulse);
        this.m_impulse += i;
        var j = box2d.b2MulSV(i, this.m_u, box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_P);
        b.SelfMulSub(this.m_invMassA, j),
            (c -= this.m_invIA * box2d.b2CrossVV(this.m_rA, j)),
            d.SelfMulAdd(this.m_invMassB, j),
            (e += this.m_invIB * box2d.b2CrossVV(this.m_rB, j)),
            (a.velocities[this.m_indexA].w = c),
            (a.velocities[this.m_indexB].w = e);
    }),
    (box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpA = new box2d.b2Vec2()),
    (box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_vpB = new box2d.b2Vec2()),
    (box2d.b2DistanceJoint.prototype.SolveVelocityConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2DistanceJoint.prototype.SolvePositionConstraints = function (a) {
        if (0 < this.m_frequencyHz) return !0;
        var b = a.positions[this.m_indexA].c,
            c = a.positions[this.m_indexA].a,
            d = a.positions[this.m_indexB].c,
            e = a.positions[this.m_indexB].a,
            f = (this.m_qA.SetAngleRadians(c), this.m_qB.SetAngleRadians(e), box2d.b2MulRV(this.m_qA, this.m_lalcA, this.m_rA)),
            g = box2d.b2MulRV(this.m_qB, this.m_lalcB, this.m_rB),
            h = this.m_u;
        (h.x = d.x + g.x - b.x - f.x), (h.y = d.y + g.y - b.y - f.y);
        var j = this.m_u.Normalize() - this.m_length;
        j = box2d.b2Clamp(j, -box2d.b2_maxLinearCorrection, box2d.b2_maxLinearCorrection);
        var k = -this.m_mass * j,
            l = box2d.b2MulSV(k, h, box2d.b2DistanceJoint.prototype.SolvePositionConstraints.s_P);
        return (
            b.SelfMulSub(this.m_invMassA, l),
            (c -= this.m_invIA * box2d.b2CrossVV(f, l)),
            d.SelfMulAdd(this.m_invMassB, l),
            (e += this.m_invIB * box2d.b2CrossVV(g, l)),
            (a.positions[this.m_indexA].a = c),
            (a.positions[this.m_indexB].a = e),
            box2d.b2Abs(j) < box2d.b2_linearSlop
        );
    }),
    (box2d.b2DistanceJoint.prototype.SolvePositionConstraints.s_P = new box2d.b2Vec2()),
    goog.provide("box2d.b2FrictionJoint"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Joint"),
    goog.require("box2d.b2Math"),
    (box2d.b2FrictionJointDef = function () {
        goog.base(this, box2d.b2JointType.e_frictionJoint), (this.localAnchorA = new box2d.b2Vec2()), (this.localAnchorB = new box2d.b2Vec2());
    }),
    goog.inherits(box2d.b2FrictionJointDef, box2d.b2JointDef),
    (box2d.b2FrictionJointDef.prototype.localAnchorA = null),
    (box2d.b2FrictionJointDef.prototype.localAnchorB = null),
    (box2d.b2FrictionJointDef.prototype.maxForce = 0),
    (box2d.b2FrictionJointDef.prototype.maxTorque = 0),
    (box2d.b2FrictionJointDef.prototype.Initialize = function (a, b, c) {
        (this.bodyA = a), (this.bodyB = b), this.bodyA.GetLocalPoint(c, this.localAnchorA), this.bodyB.GetLocalPoint(c, this.localAnchorB);
    }),
    (box2d.b2FrictionJoint = function (a) {
        goog.base(this, a),
            (this.m_localAnchorA = a.localAnchorA.Clone()),
            (this.m_localAnchorB = a.localAnchorB.Clone()),
            (this.m_linearImpulse = new box2d.b2Vec2().SetZero()),
            (this.m_maxForce = a.maxForce),
            (this.m_maxTorque = a.maxTorque),
            (this.m_rA = new box2d.b2Vec2()),
            (this.m_rB = new box2d.b2Vec2()),
            (this.m_localCenterA = new box2d.b2Vec2()),
            (this.m_localCenterB = new box2d.b2Vec2()),
            (this.m_linearMass = new box2d.b2Mat22().SetZero()),
            (this.m_qA = new box2d.b2Rot()),
            (this.m_qB = new box2d.b2Rot()),
            (this.m_lalcA = new box2d.b2Vec2()),
            (this.m_lalcB = new box2d.b2Vec2()),
            (this.m_K = new box2d.b2Mat22());
    }),
    goog.inherits(box2d.b2FrictionJoint, box2d.b2Joint),
    (box2d.b2FrictionJoint.prototype.m_localAnchorA = null),
    (box2d.b2FrictionJoint.prototype.m_localAnchorB = null),
    (box2d.b2FrictionJoint.prototype.m_linearImpulse = null),
    (box2d.b2FrictionJoint.prototype.m_angularImpulse = 0),
    (box2d.b2FrictionJoint.prototype.m_maxForce = 0),
    (box2d.b2FrictionJoint.prototype.m_maxTorque = 0),
    (box2d.b2FrictionJoint.prototype.m_indexA = 0),
    (box2d.b2FrictionJoint.prototype.m_indexB = 0),
    (box2d.b2FrictionJoint.prototype.m_rA = null),
    (box2d.b2FrictionJoint.prototype.m_rB = null),
    (box2d.b2FrictionJoint.prototype.m_localCenterA = null),
    (box2d.b2FrictionJoint.prototype.m_localCenterB = null),
    (box2d.b2FrictionJoint.prototype.m_invMassA = 0),
    (box2d.b2FrictionJoint.prototype.m_invMassB = 0),
    (box2d.b2FrictionJoint.prototype.m_invIA = 0),
    (box2d.b2FrictionJoint.prototype.m_invIB = 0),
    (box2d.b2FrictionJoint.prototype.m_linearMass = null),
    (box2d.b2FrictionJoint.prototype.m_angularMass = 0),
    (box2d.b2FrictionJoint.prototype.m_qA = null),
    (box2d.b2FrictionJoint.prototype.m_qB = null),
    (box2d.b2FrictionJoint.prototype.m_lalcA = null),
    (box2d.b2FrictionJoint.prototype.m_lalcB = null),
    (box2d.b2FrictionJoint.prototype.m_K = null),
    (box2d.b2FrictionJoint.prototype.InitVelocityConstraints = function (a) {
        (this.m_indexA = this.m_bodyA.m_islandIndex),
            (this.m_indexB = this.m_bodyB.m_islandIndex),
            this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),
            this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),
            (this.m_invMassA = this.m_bodyA.m_invMass),
            (this.m_invMassB = this.m_bodyB.m_invMass),
            (this.m_invIA = this.m_bodyA.m_invI),
            (this.m_invIB = this.m_bodyB.m_invI);
        var b = a.positions[this.m_indexA].a,
            c = a.velocities[this.m_indexA].v,
            d = a.velocities[this.m_indexA].w,
            e = a.positions[this.m_indexB].a,
            f = a.velocities[this.m_indexB].v,
            g = a.velocities[this.m_indexB].w,
            h = this.m_qA.SetAngleRadians(b),
            i = this.m_qB.SetAngleRadians(e);
        box2d.b2SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
        var j = box2d.b2MulRV(h, this.m_lalcA, this.m_rA);
        box2d.b2SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
        var k = box2d.b2MulRV(i, this.m_lalcB, this.m_rB),
            l = this.m_invMassA,
            m = this.m_invMassB,
            n = this.m_invIA,
            o = this.m_invIB,
            p = this.m_K;
        if (
            ((p.ex.x = l + m + n * j.y * j.y + o * k.y * k.y),
            (p.ex.y = -n * j.x * j.y - o * k.x * k.y),
            (p.ey.x = p.ex.y),
            (p.ey.y = l + m + n * j.x * j.x + o * k.x * k.x),
            p.GetInverse(this.m_linearMass),
            (this.m_angularMass = n + o),
            0 < this.m_angularMass && (this.m_angularMass = 1 / this.m_angularMass),
            a.step.warmStarting)
        ) {
            this.m_linearImpulse.SelfMul(a.step.dtRatio), (this.m_angularImpulse *= a.step.dtRatio);
            var q = this.m_linearImpulse;
            c.SelfMulSub(l, q), (d -= n * (box2d.b2CrossVV(this.m_rA, q) + this.m_angularImpulse)), f.SelfMulAdd(m, q), (g += o * (box2d.b2CrossVV(this.m_rB, q) + this.m_angularImpulse));
        } else this.m_linearImpulse.SetZero(), (this.m_angularImpulse = 0);
        (a.velocities[this.m_indexA].w = d), (a.velocities[this.m_indexB].w = g);
    }),
    (box2d.b2FrictionJoint.prototype.SolveVelocityConstraints = function (a) {
        var b = a.velocities[this.m_indexA].v,
            c = a.velocities[this.m_indexA].w,
            d = a.velocities[this.m_indexB].v,
            e = a.velocities[this.m_indexB].w,
            f = this.m_invMassA,
            g = this.m_invMassB,
            h = this.m_invIA,
            i = this.m_invIB,
            j = a.step.dt,
            k = e - c,
            l = -this.m_angularMass * k,
            m = this.m_angularImpulse,
            n = j * this.m_maxTorque;
        (this.m_angularImpulse = box2d.b2Clamp(this.m_angularImpulse + l, -n, n)), (c -= h * (l = this.m_angularImpulse - m)), (e += i * l);
        k = box2d.b2SubVV(box2d.b2AddVCrossSV(d, e, this.m_rB, box2d.b2Vec2.s_t0), box2d.b2AddVCrossSV(b, c, this.m_rA, box2d.b2Vec2.s_t1), box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_Cdot);
        var o = box2d.b2MulMV(this.m_linearMass, k, box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_impulseV).SelfNeg(),
            p = box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_oldImpulseV.Copy(this.m_linearImpulse);
        this.m_linearImpulse.SelfAdd(o);
        n = j * this.m_maxForce;
        this.m_linearImpulse.GetLengthSquared() > n * n && (this.m_linearImpulse.Normalize(), this.m_linearImpulse.SelfMul(n)),
            box2d.b2SubVV(this.m_linearImpulse, p, o),
            b.SelfMulSub(f, o),
            (c -= h * box2d.b2CrossVV(this.m_rA, o)),
            d.SelfMulAdd(g, o),
            (e += i * box2d.b2CrossVV(this.m_rB, o)),
            (a.velocities[this.m_indexA].w = c),
            (a.velocities[this.m_indexB].w = e);
    }),
    (box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_Cdot = new box2d.b2Vec2()),
    (box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_impulseV = new box2d.b2Vec2()),
    (box2d.b2FrictionJoint.prototype.SolveVelocityConstraints.s_oldImpulseV = new box2d.b2Vec2()),
    (box2d.b2FrictionJoint.prototype.SolvePositionConstraints = function () {
        return !0;
    }),
    (box2d.b2FrictionJoint.prototype.GetAnchorA = function (a) {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, a);
    }),
    (box2d.b2FrictionJoint.prototype.GetAnchorB = function (a) {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, a);
    }),
    (box2d.b2FrictionJoint.prototype.GetReactionForce = function (a, b) {
        return b.SetXY(a * this.m_linearImpulse.x, a * this.m_linearImpulse.y);
    }),
    (box2d.b2FrictionJoint.prototype.GetReactionTorque = function (a) {
        return a * this.m_angularImpulse;
    }),
    (box2d.b2FrictionJoint.prototype.GetLocalAnchorA = function (a) {
        return a.Copy(this.m_localAnchorA);
    }),
    (box2d.b2FrictionJoint.prototype.GetLocalAnchorB = function (a) {
        return a.Copy(this.m_localAnchorB);
    }),
    (box2d.b2FrictionJoint.prototype.SetMaxForce = function (a) {
        this.m_maxForce = a;
    }),
    (box2d.b2FrictionJoint.prototype.GetMaxForce = function () {
        return this.m_maxForce;
    }),
    (box2d.b2FrictionJoint.prototype.SetMaxTorque = function (a) {
        this.m_maxTorque = a;
    }),
    (box2d.b2FrictionJoint.prototype.GetMaxTorque = function () {
        return this.m_maxTorque;
    }),
    (box2d.b2FrictionJoint.prototype.Dump = function () {
        if (box2d.DEBUG) {
            var a = this.m_bodyA.m_islandIndex,
                b = this.m_bodyB.m_islandIndex;
            box2d.b2Log("  /*box2d.b2FrictionJointDef*/ var jd = new box2d.b2FrictionJointDef();\n"),
                box2d.b2Log("  jd.bodyA = bodies[%d];\n", a),
                box2d.b2Log("  jd.bodyB = bodies[%d];\n", b),
                box2d.b2Log("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"),
                box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n", this.m_localAnchorA.x, this.m_localAnchorA.y),
                box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n", this.m_localAnchorB.x, this.m_localAnchorB.y),
                box2d.b2Log("  jd.maxForce = %.15f;\n", this.m_maxForce),
                box2d.b2Log("  jd.maxTorque = %.15f;\n", this.m_maxTorque),
                box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
        }
    }),
    goog.provide("box2d.b2MouseJoint"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Joint"),
    goog.require("box2d.b2Math"),
    (box2d.b2MouseJointDef = function () {
        goog.base(this, box2d.b2JointType.e_mouseJoint), (this.target = new box2d.b2Vec2());
    }),
    goog.inherits(box2d.b2MouseJointDef, box2d.b2JointDef),
    (box2d.b2MouseJointDef.prototype.target = null),
    (box2d.b2MouseJointDef.prototype.maxForce = 0),
    (box2d.b2MouseJointDef.prototype.frequencyHz = 5),
    (box2d.b2MouseJointDef.prototype.dampingRatio = 0.7),
    (box2d.b2MouseJoint = function (a) {
        goog.base(this, a),
            (this.m_localAnchorB = new box2d.b2Vec2()),
            (this.m_targetA = new box2d.b2Vec2()),
            (this.m_impulse = new box2d.b2Vec2()),
            (this.m_rB = new box2d.b2Vec2()),
            (this.m_localCenterB = new box2d.b2Vec2()),
            (this.m_mass = new box2d.b2Mat22()),
            (this.m_C = new box2d.b2Vec2()),
            (this.m_qB = new box2d.b2Rot()),
            (this.m_lalcB = new box2d.b2Vec2()),
            (this.m_K = new box2d.b2Mat22()),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(a.target.IsValid()),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(box2d.b2IsValid(a.maxForce) && 0 <= a.maxForce),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(box2d.b2IsValid(a.frequencyHz) && 0 <= a.frequencyHz),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(box2d.b2IsValid(a.dampingRatio) && 0 <= a.dampingRatio),
            this.m_targetA.Copy(a.target),
            box2d.b2MulTXV(this.m_bodyB.GetTransform(), this.m_targetA, this.m_localAnchorB),
            (this.m_maxForce = a.maxForce),
            this.m_impulse.SetZero(),
            (this.m_frequencyHz = a.frequencyHz),
            (this.m_dampingRatio = a.dampingRatio),
            (this.m_beta = 0),
            (this.m_gamma = 0);
    }),
    goog.inherits(box2d.b2MouseJoint, box2d.b2Joint),
    (box2d.b2MouseJoint.prototype.m_localAnchorB = null),
    (box2d.b2MouseJoint.prototype.m_targetA = null),
    (box2d.b2MouseJoint.prototype.m_frequencyHz = 0),
    (box2d.b2MouseJoint.prototype.m_dampingRatio = 0),
    (box2d.b2MouseJoint.prototype.m_beta = 0),
    (box2d.b2MouseJoint.prototype.m_impulse = null),
    (box2d.b2MouseJoint.prototype.m_maxForce = 0),
    (box2d.b2MouseJoint.prototype.m_gamma = 0),
    (box2d.b2MouseJoint.prototype.m_indexA = 0),
    (box2d.b2MouseJoint.prototype.m_indexB = 0),
    (box2d.b2MouseJoint.prototype.m_rB = null),
    (box2d.b2MouseJoint.prototype.m_localCenterB = null),
    (box2d.b2MouseJoint.prototype.m_invMassB = 0),
    (box2d.b2MouseJoint.prototype.m_invIB = 0),
    (box2d.b2MouseJoint.prototype.m_mass = null),
    (box2d.b2MouseJoint.prototype.m_C = null),
    (box2d.b2MouseJoint.prototype.m_qB = null),
    (box2d.b2MouseJoint.prototype.m_lalcB = null),
    (box2d.b2MouseJoint.prototype.m_K = null),
    (box2d.b2MouseJoint.prototype.SetTarget = function (a) {
        !1 === this.m_bodyB.IsAwake() && this.m_bodyB.SetAwake(!0), this.m_targetA.Copy(a);
    }),
    (box2d.b2MouseJoint.prototype.GetTarget = function (a) {
        return a.Copy(this.m_targetA);
    }),
    (box2d.b2MouseJoint.prototype.SetMaxForce = function (a) {
        this.m_maxForce = a;
    }),
    (box2d.b2MouseJoint.prototype.GetMaxForce = function () {
        return this.m_maxForce;
    }),
    (box2d.b2MouseJoint.prototype.SetFrequency = function (a) {
        this.m_frequencyHz = a;
    }),
    (box2d.b2MouseJoint.prototype.GetFrequency = function () {
        return this.m_frequencyHz;
    }),
    (box2d.b2MouseJoint.prototype.SetDampingRatio = function (a) {
        this.m_dampingRatio = a;
    }),
    (box2d.b2MouseJoint.prototype.GetDampingRatio = function () {
        return this.m_dampingRatio;
    }),
    (box2d.b2MouseJoint.prototype.InitVelocityConstraints = function (a) {
        (this.m_indexB = this.m_bodyB.m_islandIndex), this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter), (this.m_invMassB = this.m_bodyB.m_invMass), (this.m_invIB = this.m_bodyB.m_invI);
        var b = a.positions[this.m_indexB].c,
            c = a.positions[this.m_indexB].a,
            d = a.velocities[this.m_indexB].v,
            e = a.velocities[this.m_indexB].w,
            f = this.m_qB.SetAngleRadians(c),
            g = this.m_bodyB.GetMass(),
            h = 2 * box2d.b2_pi * this.m_frequencyHz,
            i = 2 * g * this.m_dampingRatio * h,
            j = g * h * h,
            k = a.step.dt;
        box2d.ENABLE_ASSERTS && box2d.b2Assert(i + k * j > box2d.b2_epsilon),
            (this.m_gamma = k * (i + k * j)),
            0 !== this.m_gamma && (this.m_gamma = 1 / this.m_gamma),
            (this.m_beta = k * j * this.m_gamma),
            box2d.b2SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB),
            box2d.b2MulRV(f, this.m_lalcB, this.m_rB);
        var l = this.m_K;
        (l.ex.x = this.m_invMassB + this.m_invIB * this.m_rB.y * this.m_rB.y + this.m_gamma),
            (l.ex.y = -this.m_invIB * this.m_rB.x * this.m_rB.y),
            (l.ey.x = l.ex.y),
            (l.ey.y = this.m_invMassB + this.m_invIB * this.m_rB.x * this.m_rB.x + this.m_gamma),
            l.GetInverse(this.m_mass),
            (this.m_C.x = b.x + this.m_rB.x - this.m_targetA.x),
            (this.m_C.y = b.y + this.m_rB.y - this.m_targetA.y),
            this.m_C.SelfMul(this.m_beta),
            (e *= 0.98),
            a.step.warmStarting
                ? (this.m_impulse.SelfMul(a.step.dtRatio), (d.x += this.m_invMassB * this.m_impulse.x), (d.y += this.m_invMassB * this.m_impulse.y), (e += this.m_invIB * box2d.b2CrossVV(this.m_rB, this.m_impulse)))
                : this.m_impulse.SetZero(),
            (a.velocities[this.m_indexB].w = e);
    }),
    (box2d.b2MouseJoint.prototype.SolveVelocityConstraints = function (a) {
        var b = a.velocities[this.m_indexB].v,
            c = a.velocities[this.m_indexB].w,
            d = box2d.b2AddVCrossSV(b, c, this.m_rB, box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_Cdot),
            e = box2d.b2MulMV(
                this.m_mass,
                box2d.b2AddVV(d, box2d.b2AddVV(this.m_C, box2d.b2MulSV(this.m_gamma, this.m_impulse, box2d.b2Vec2.s_t0), box2d.b2Vec2.s_t0), box2d.b2Vec2.s_t0).SelfNeg(),
                box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_impulse
            ),
            f = box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_oldImpulse.Copy(this.m_impulse);
        this.m_impulse.SelfAdd(e);
        var g = a.step.dt * this.m_maxForce;
        this.m_impulse.GetLengthSquared() > g * g && this.m_impulse.SelfMul(g / this.m_impulse.GetLength()),
            box2d.b2SubVV(this.m_impulse, f, e),
            b.SelfMulAdd(this.m_invMassB, e),
            (c += this.m_invIB * box2d.b2CrossVV(this.m_rB, e)),
            (a.velocities[this.m_indexB].w = c);
    }),
    (box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_Cdot = new box2d.b2Vec2()),
    (box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_impulse = new box2d.b2Vec2()),
    (box2d.b2MouseJoint.prototype.SolveVelocityConstraints.s_oldImpulse = new box2d.b2Vec2()),
    (box2d.b2MouseJoint.prototype.SolvePositionConstraints = function () {
        return !0;
    }),
    (box2d.b2MouseJoint.prototype.GetAnchorA = function (a) {
        return a.Copy(this.m_targetA);
    }),
    (box2d.b2MouseJoint.prototype.GetAnchorB = function (a) {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, a);
    }),
    (box2d.b2MouseJoint.prototype.GetReactionForce = function (a, b) {
        return box2d.b2MulSV(a, this.m_impulse, b);
    }),
    (box2d.b2MouseJoint.prototype.GetReactionTorque = function () {
        return 0;
    }),
    (box2d.b2MouseJoint.prototype.Dump = function () {
        box2d.DEBUG && box2d.b2Log("Mouse joint dumping is not supported.\n");
    }),
    (box2d.b2MouseJoint.prototype.ShiftOrigin = function (a) {
        this.m_targetA.SelfSub(a);
    }),
    goog.provide("box2d.b2ConstantForceController"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Controller"),
    goog.require("box2d.b2Math"),
    (box2d.b2ConstantForceController = function () {
        goog.base(this), (this.F = new box2d.b2Vec2(0, 0));
    }),
    goog.inherits(box2d.b2ConstantForceController, box2d.b2Controller),
    (box2d.b2ConstantAccelController.prototype.F = null),
    (box2d.b2ConstantForceController.prototype.Step = function () {
        for (var a = this.m_bodyList; a; a = a.nextBody) {
            var b = a.body;
            b.IsAwake() && b.ApplyForce(this.F, b.GetWorldCenter());
        }
    }),
    goog.provide("box2d.b2PulleyJoint"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Joint"),
    goog.require("box2d.b2Math"),
    (box2d.b2_minPulleyLength = 2),
    (box2d.b2PulleyJointDef = function () {
        goog.base(this, box2d.b2JointType.e_pulleyJoint),
            (this.collideConnected = !0),
            (this.groundAnchorA = new box2d.b2Vec2(-1, 1)),
            (this.groundAnchorB = new box2d.b2Vec2(1, 1)),
            (this.localAnchorA = new box2d.b2Vec2(-1, 0)),
            (this.localAnchorB = new box2d.b2Vec2(1, 0));
    }),
    goog.inherits(box2d.b2PulleyJointDef, box2d.b2JointDef),
    (box2d.b2PulleyJointDef.prototype.groundAnchorA = null),
    (box2d.b2PulleyJointDef.prototype.groundAnchorB = null),
    (box2d.b2PulleyJointDef.prototype.localAnchorA = null),
    (box2d.b2PulleyJointDef.prototype.localAnchorB = null),
    (box2d.b2PulleyJointDef.prototype.lengthA = 0),
    (box2d.b2PulleyJointDef.prototype.lengthB = 0),
    (box2d.b2PulleyJointDef.prototype.ratio = 1),
    (box2d.b2PulleyJointDef.prototype.Initialize = function (a, b, c, d, e, f, g) {
        (this.bodyA = a),
            (this.bodyB = b),
            this.groundAnchorA.Copy(c),
            this.groundAnchorB.Copy(d),
            this.bodyA.GetLocalPoint(e, this.localAnchorA),
            this.bodyB.GetLocalPoint(f, this.localAnchorB),
            (this.lengthA = box2d.b2DistanceVV(e, c)),
            (this.lengthB = box2d.b2DistanceVV(f, d)),
            (this.ratio = g),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(this.ratio > box2d.b2_epsilon);
    }),
    (box2d.b2PulleyJoint = function (a) {
        goog.base(this, a),
            (this.m_groundAnchorA = new box2d.b2Vec2()),
            (this.m_groundAnchorB = new box2d.b2Vec2()),
            (this.m_localAnchorA = new box2d.b2Vec2()),
            (this.m_localAnchorB = new box2d.b2Vec2()),
            (this.m_uA = new box2d.b2Vec2()),
            (this.m_uB = new box2d.b2Vec2()),
            (this.m_rA = new box2d.b2Vec2()),
            (this.m_rB = new box2d.b2Vec2()),
            (this.m_localCenterA = new box2d.b2Vec2()),
            (this.m_localCenterB = new box2d.b2Vec2()),
            (this.m_qA = new box2d.b2Rot()),
            (this.m_qB = new box2d.b2Rot()),
            (this.m_lalcA = new box2d.b2Vec2()),
            (this.m_lalcB = new box2d.b2Vec2()),
            this.m_groundAnchorA.Copy(a.groundAnchorA),
            this.m_groundAnchorB.Copy(a.groundAnchorB),
            this.m_localAnchorA.Copy(a.localAnchorA),
            this.m_localAnchorB.Copy(a.localAnchorB),
            (this.m_lengthA = a.lengthA),
            (this.m_lengthB = a.lengthB),
            box2d.ENABLE_ASSERTS && box2d.b2Assert(0 !== a.ratio),
            (this.m_ratio = a.ratio),
            (this.m_constant = a.lengthA + this.m_ratio * a.lengthB),
            (this.m_impulse = 0);
    }),
    goog.inherits(box2d.b2PulleyJoint, box2d.b2Joint),
    (box2d.b2PulleyJoint.prototype.m_groundAnchorA = null),
    (box2d.b2PulleyJoint.prototype.m_groundAnchorB = null),
    (box2d.b2PulleyJoint.prototype.m_lengthA = 0),
    (box2d.b2PulleyJoint.prototype.m_lengthB = 0),
    (box2d.b2PulleyJoint.prototype.m_localAnchorA = null),
    (box2d.b2PulleyJoint.prototype.m_localAnchorB = null),
    (box2d.b2PulleyJoint.prototype.m_constant = 0),
    (box2d.b2PulleyJoint.prototype.m_ratio = 0),
    (box2d.b2PulleyJoint.prototype.m_impulse = 0),
    (box2d.b2PulleyJoint.prototype.m_indexA = 0),
    (box2d.b2PulleyJoint.prototype.m_indexB = 0),
    (box2d.b2PulleyJoint.prototype.m_uA = null),
    (box2d.b2PulleyJoint.prototype.m_uB = null),
    (box2d.b2PulleyJoint.prototype.m_rA = null),
    (box2d.b2PulleyJoint.prototype.m_rB = null),
    (box2d.b2PulleyJoint.prototype.m_localCenterA = null),
    (box2d.b2PulleyJoint.prototype.m_localCenterB = null),
    (box2d.b2PulleyJoint.prototype.m_invMassA = 0),
    (box2d.b2PulleyJoint.prototype.m_invMassB = 0),
    (box2d.b2PulleyJoint.prototype.m_invIA = 0),
    (box2d.b2PulleyJoint.prototype.m_invIB = 0),
    (box2d.b2PulleyJoint.prototype.m_mass = 0),
    (box2d.b2PulleyJoint.prototype.m_qA = null),
    (box2d.b2PulleyJoint.prototype.m_qB = null),
    (box2d.b2PulleyJoint.prototype.m_lalcA = null),
    (box2d.b2PulleyJoint.prototype.m_lalcB = null),
    (box2d.b2PulleyJoint.prototype.InitVelocityConstraints = function (a) {
        (this.m_indexA = this.m_bodyA.m_islandIndex),
            (this.m_indexB = this.m_bodyB.m_islandIndex),
            this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),
            this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),
            (this.m_invMassA = this.m_bodyA.m_invMass),
            (this.m_invMassB = this.m_bodyB.m_invMass),
            (this.m_invIA = this.m_bodyA.m_invI),
            (this.m_invIB = this.m_bodyB.m_invI);
        var b = a.positions[this.m_indexA].c,
            c = a.positions[this.m_indexA].a,
            d = a.velocities[this.m_indexA].v,
            e = a.velocities[this.m_indexA].w,
            f = a.positions[this.m_indexB].c,
            g = a.positions[this.m_indexB].a,
            h = a.velocities[this.m_indexB].v,
            i = a.velocities[this.m_indexB].w,
            j = this.m_qA.SetAngleRadians(c),
            k = this.m_qB.SetAngleRadians(g);
        box2d.b2SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA),
            box2d.b2MulRV(j, this.m_lalcA, this.m_rA),
            box2d.b2SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB),
            box2d.b2MulRV(k, this.m_lalcB, this.m_rB),
            this.m_uA.Copy(b).SelfAdd(this.m_rA).SelfSub(this.m_groundAnchorA),
            this.m_uB.Copy(f).SelfAdd(this.m_rB).SelfSub(this.m_groundAnchorB);
        var l = this.m_uA.GetLength(),
            m = this.m_uB.GetLength();
        l > 10 * box2d.b2_linearSlop ? this.m_uA.SelfMul(1 / l) : this.m_uA.SetZero(), m > 10 * box2d.b2_linearSlop ? this.m_uB.SelfMul(1 / m) : this.m_uB.SetZero();
        var n = box2d.b2CrossVV(this.m_rA, this.m_uA),
            o = box2d.b2CrossVV(this.m_rB, this.m_uB),
            p = this.m_invMassA + this.m_invIA * n * n,
            q = this.m_invMassB + this.m_invIB * o * o;
        if (((this.m_mass = p + this.m_ratio * this.m_ratio * q), 0 < this.m_mass && (this.m_mass = 1 / this.m_mass), a.step.warmStarting)) {
            this.m_impulse *= a.step.dtRatio;
            var r = box2d.b2MulSV(-this.m_impulse, this.m_uA, box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PA),
                s = box2d.b2MulSV(-this.m_ratio * this.m_impulse, this.m_uB, box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PB);
            d.SelfMulAdd(this.m_invMassA, r), (e += this.m_invIA * box2d.b2CrossVV(this.m_rA, r)), h.SelfMulAdd(this.m_invMassB, s), (i += this.m_invIB * box2d.b2CrossVV(this.m_rB, s));
        } else this.m_impulse = 0;
        (a.velocities[this.m_indexA].w = e), (a.velocities[this.m_indexB].w = i);
    }),
    (box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PA = new box2d.b2Vec2()),
    (box2d.b2PulleyJoint.prototype.InitVelocityConstraints.s_PB = new box2d.b2Vec2()),
    (box2d.b2PulleyJoint.prototype.SolveVelocityConstraints = function (a) {
        var b = a.velocities[this.m_indexA].v,
            c = a.velocities[this.m_indexA].w,
            d = a.velocities[this.m_indexB].v,
            e = a.velocities[this.m_indexB].w,
            f = box2d.b2AddVCrossSV(b, c, this.m_rA, box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpA),
            g = box2d.b2AddVCrossSV(d, e, this.m_rB, box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpB),
            h = -box2d.b2DotVV(this.m_uA, f) - this.m_ratio * box2d.b2DotVV(this.m_uB, g),
            i = -this.m_mass * h;
        this.m_impulse += i;
        var j = box2d.b2MulSV(-i, this.m_uA, box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PA),
            k = box2d.b2MulSV(-this.m_ratio * i, this.m_uB, box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PB);
        b.SelfMulAdd(this.m_invMassA, j),
            (c += this.m_invIA * box2d.b2CrossVV(this.m_rA, j)),
            d.SelfMulAdd(this.m_invMassB, k),
            (e += this.m_invIB * box2d.b2CrossVV(this.m_rB, k)),
            (a.velocities[this.m_indexA].w = c),
            (a.velocities[this.m_indexB].w = e);
    }),
    (box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpA = new box2d.b2Vec2()),
    (box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_vpB = new box2d.b2Vec2()),
    (box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PA = new box2d.b2Vec2()),
    (box2d.b2PulleyJoint.prototype.SolveVelocityConstraints.s_PB = new box2d.b2Vec2()),
    (box2d.b2PulleyJoint.prototype.SolvePositionConstraints = function (a) {
        var b = a.positions[this.m_indexA].c,
            c = a.positions[this.m_indexA].a,
            d = a.positions[this.m_indexB].c,
            e = a.positions[this.m_indexB].a,
            f = this.m_qA.SetAngleRadians(c),
            g = this.m_qB.SetAngleRadians(e);
        box2d.b2SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
        var h = box2d.b2MulRV(f, this.m_lalcA, this.m_rA);
        box2d.b2SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
        var i = box2d.b2MulRV(g, this.m_lalcB, this.m_rB),
            j = this.m_uA.Copy(b).SelfAdd(h).SelfSub(this.m_groundAnchorA),
            k = this.m_uB.Copy(d).SelfAdd(i).SelfSub(this.m_groundAnchorB),
            l = j.GetLength(),
            m = k.GetLength();
        l > 10 * box2d.b2_linearSlop ? j.SelfMul(1 / l) : j.SetZero(), m > 10 * box2d.b2_linearSlop ? k.SelfMul(1 / m) : k.SetZero();
        var n = box2d.b2CrossVV(h, j),
            o = box2d.b2CrossVV(i, k),
            p = this.m_invMassA + this.m_invIA * n * n,
            q = this.m_invMassB + this.m_invIB * o * o,
            r = p + this.m_ratio * this.m_ratio * q;
        0 < r && (r = 1 / r);
        var s = this.m_constant - l - this.m_ratio * m,
            t = box2d.b2Abs(s),
            u = -r * s,
            v = box2d.b2MulSV(-u, j, box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PA),
            w = box2d.b2MulSV(-this.m_ratio * u, k, box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PB);
        return (
            b.SelfMulAdd(this.m_invMassA, v),
            (c += this.m_invIA * box2d.b2CrossVV(h, v)),
            d.SelfMulAdd(this.m_invMassB, w),
            (e += this.m_invIB * box2d.b2CrossVV(i, w)),
            (a.positions[this.m_indexA].a = c),
            (a.positions[this.m_indexB].a = e),
            t < box2d.b2_linearSlop
        );
    }),
    (box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PA = new box2d.b2Vec2()),
    (box2d.b2PulleyJoint.prototype.SolvePositionConstraints.s_PB = new box2d.b2Vec2()),
    (box2d.b2PulleyJoint.prototype.GetAnchorA = function (a) {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, a);
    }),
    (box2d.b2PulleyJoint.prototype.GetAnchorB = function (a) {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, a);
    }),
    (box2d.b2PulleyJoint.prototype.GetReactionForce = function (a, b) {
        return b.SetXY(a * this.m_impulse * this.m_uB.x, a * this.m_impulse * this.m_uB.y);
    }),
    (box2d.b2PulleyJoint.prototype.GetReactionTorque = function () {
        return 0;
    }),
    (box2d.b2PulleyJoint.prototype.GetGroundAnchorA = function (a) {
        return a.Copy(this.m_groundAnchorA);
    }),
    (box2d.b2PulleyJoint.prototype.GetGroundAnchorB = function (a) {
        return a.Copy(this.m_groundAnchorB);
    }),
    (box2d.b2PulleyJoint.prototype.GetLengthA = function () {
        return this.m_lengthA;
    }),
    (box2d.b2PulleyJoint.prototype.GetLengthB = function () {
        return this.m_lengthB;
    }),
    (box2d.b2PulleyJoint.prototype.GetRatio = function () {
        return this.m_ratio;
    }),
    (box2d.b2PulleyJoint.prototype.GetCurrentLengthA = function () {
        var a = this.m_bodyA.GetWorldPoint(this.m_localAnchorA, box2d.b2PulleyJoint.prototype.GetCurrentLengthA.s_p),
            b = this.m_groundAnchorA;
        return box2d.b2DistanceVV(a, b);
    }),
    (box2d.b2PulleyJoint.prototype.GetCurrentLengthA.s_p = new box2d.b2Vec2()),
    (box2d.b2PulleyJoint.prototype.GetCurrentLengthB = function () {
        var a = this.m_bodyB.GetWorldPoint(this.m_localAnchorB, box2d.b2PulleyJoint.prototype.GetCurrentLengthB.s_p),
            b = this.m_groundAnchorB;
        return box2d.b2DistanceVV(a, b);
    }),
    (box2d.b2PulleyJoint.prototype.GetCurrentLengthB.s_p = new box2d.b2Vec2()),
    (box2d.b2PulleyJoint.prototype.Dump = function () {
        if (box2d.DEBUG) {
            var a = this.m_bodyA.m_islandIndex,
                b = this.m_bodyB.m_islandIndex;
            box2d.b2Log("  /*box2d.b2PulleyJointDef*/ var jd = new box2d.b2PulleyJointDef();\n"),
                box2d.b2Log("  jd.bodyA = bodies[%d];\n", a),
                box2d.b2Log("  jd.bodyB = bodies[%d];\n", b),
                box2d.b2Log("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"),
                box2d.b2Log("  jd.groundAnchorA.SetXY(%.15f, %.15f);\n", this.m_groundAnchorA.x, this.m_groundAnchorA.y),
                box2d.b2Log("  jd.groundAnchorB.SetXY(%.15f, %.15f);\n", this.m_groundAnchorB.x, this.m_groundAnchorB.y),
                box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n", this.m_localAnchorA.x, this.m_localAnchorA.y),
                box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n", this.m_localAnchorB.x, this.m_localAnchorB.y),
                box2d.b2Log("  jd.lengthA = %.15f;\n", this.m_lengthA),
                box2d.b2Log("  jd.lengthB = %.15f;\n", this.m_lengthB),
                box2d.b2Log("  jd.ratio = %.15f;\n", this.m_ratio),
                box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
        }
    }),
    (box2d.b2PulleyJoint.prototype.ShiftOrigin = function (a) {
        this.m_groundAnchorA.SelfSub(a), this.m_groundAnchorB.SelfSub(a);
    }),
    goog.provide("box2d.b2CircleShape"),
    goog.require("box2d.b2Shape"),
    (box2d.b2CircleShape = function (a) {
        goog.base(this, box2d.b2ShapeType.e_circleShape, a || 0), (this.m_p = new box2d.b2Vec2());
    }),
    goog.inherits(box2d.b2CircleShape, box2d.b2Shape),
    (box2d.b2CircleShape.prototype.m_p = null),
    (box2d.b2CircleShape.prototype.Clone = function () {
        return new box2d.b2CircleShape().Copy(this);
    }),
    (box2d.b2CircleShape.prototype.Copy = function (a) {
        return goog.base(this, "Copy", a), box2d.ENABLE_ASSERTS && box2d.b2Assert(a instanceof box2d.b2CircleShape), this.m_p.Copy(a.m_p), this;
    }),
    (box2d.b2CircleShape.prototype.GetChildCount = function () {
        return 1;
    }),
    (box2d.b2CircleShape.prototype.TestPoint = function (a, b) {
        var c = box2d.b2MulXV(a, this.m_p, box2d.b2CircleShape.prototype.TestPoint.s_center),
            d = box2d.b2SubVV(b, c, box2d.b2CircleShape.prototype.TestPoint.s_d);
        return box2d.b2DotVV(d, d) <= box2d.b2Sq(this.m_radius);
    }),
    (box2d.b2CircleShape.prototype.TestPoint.s_center = new box2d.b2Vec2()),
    (box2d.b2CircleShape.prototype.TestPoint.s_d = new box2d.b2Vec2()),
    (box2d.b2CircleShape.prototype.RayCast = function (a, b, c) {
        var d = box2d.b2MulXV(c, this.m_p, box2d.b2CircleShape.prototype.RayCast.s_position),
            e = box2d.b2SubVV(b.p1, d, box2d.b2CircleShape.prototype.RayCast.s_s),
            f = box2d.b2DotVV(e, e) - box2d.b2Sq(this.m_radius),
            g = box2d.b2SubVV(b.p2, b.p1, box2d.b2CircleShape.prototype.RayCast.s_r),
            h = box2d.b2DotVV(e, g),
            i = box2d.b2DotVV(g, g),
            j = h * h - i * f;
        if (j < 0 || i < box2d.b2_epsilon) return !1;
        var k = -(h + box2d.b2Sqrt(j));
        return 0 <= k && k <= b.maxFraction * i && ((k /= i), (a.fraction = k), box2d.b2AddVMulSV(e, k, g, a.normal).SelfNormalize(), !0);
    }),
    (box2d.b2CircleShape.prototype.RayCast.s_position = new box2d.b2Vec2()),
    (box2d.b2CircleShape.prototype.RayCast.s_s = new box2d.b2Vec2()),
    (box2d.b2CircleShape.prototype.RayCast.s_r = new box2d.b2Vec2()),
    (box2d.b2CircleShape.prototype.ComputeAABB = function (a, b) {
        var c = box2d.b2MulXV(b, this.m_p, box2d.b2CircleShape.prototype.ComputeAABB.s_p);
        a.lowerBound.SetXY(c.x - this.m_radius, c.y - this.m_radius), a.upperBound.SetXY(c.x + this.m_radius, c.y + this.m_radius);
    }),
    (box2d.b2CircleShape.prototype.ComputeAABB.s_p = new box2d.b2Vec2()),
    (box2d.b2CircleShape.prototype.ComputeMass = function (a, b) {
        var c = box2d.b2Sq(this.m_radius);
        (a.mass = b * box2d.b2_pi * c), a.center.Copy(this.m_p), (a.I = a.mass * (0.5 * c + box2d.b2DotVV(this.m_p, this.m_p)));
    }),
    (box2d.b2CircleShape.prototype.SetupDistanceProxy = function (a) {
        (a.m_vertices = new Array(1, !0)), (a.m_vertices[0] = this.m_p), (a.m_count = 1), (a.m_radius = this.m_radius);
    }),
    (box2d.b2CircleShape.prototype.ComputeSubmergedArea = function (a, b, c, d) {
        var e = box2d.b2MulXV(c, this.m_p, new box2d.b2Vec2()),
            f = -(box2d.b2DotVV(a, e) - b);
        if (f < -this.m_radius + box2d.b2_epsilon) return 0;
        if (f > this.m_radius) return d.Copy(e), box2d.b2_pi * this.m_radius * this.m_radius;
        var g = this.m_radius * this.m_radius,
            h = f * f,
            i = g * (box2d.b2Asin(f / this.m_radius) + box2d.b2_pi / 2) + f * box2d.b2Sqrt(g - h),
            j = ((-2 / 3) * box2d.b2Pow(g - h, 1.5)) / i;
        return (d.x = e.x + a.x * j), (d.y = e.y + a.y * j), i;
    }),
    (box2d.b2CircleShape.prototype.Dump = function () {
        box2d.b2Log("    /*box2d.b2CircleShape*/ var shape = new box2d.b2CircleShape();\n"), box2d.b2Log("    shape.m_radius = %.15f;\n", this.m_radius), box2d.b2Log("    shape.m_p.SetXY(%.15f, %.15f);\n", this.m_p.x, this.m_p.y);
    }),
    goog.provide("box2d.b2Rope"),
    goog.require("box2d.b2Math"),
    goog.require("box2d.b2Draw"),
    (box2d.b2RopeDef = function () {
        (this.vertices = new Array()), (this.masses = new Array()), (this.gravity = new box2d.b2Vec2());
    }),
    (box2d.b2RopeDef.prototype.vertices = null),
    (box2d.b2RopeDef.prototype.count = 0),
    (box2d.b2RopeDef.prototype.masses = null),
    (box2d.b2RopeDef.prototype.gravity = null),
    (box2d.b2RopeDef.prototype.damping = 0.1),
    (box2d.b2RopeDef.prototype.k2 = 0.9),
    (box2d.b2RopeDef.prototype.k3 = 0.1),
    (box2d.b2Rope = function () {
        this.m_gravity = new box2d.b2Vec2();
    }),
    (box2d.b2Rope.prototype.m_count = 0),
    (box2d.b2Rope.prototype.m_ps = null),
    (box2d.b2Rope.prototype.m_p0s = null),
    (box2d.b2Rope.prototype.m_vs = null),
    (box2d.b2Rope.prototype.m_ims = null),
    (box2d.b2Rope.prototype.m_Ls = null),
    (box2d.b2Rope.prototype.m_as = null),
    (box2d.b2Rope.prototype.m_gravity = null),
    (box2d.b2Rope.prototype.m_damping = 0),
    (box2d.b2Rope.prototype.m_k2 = 1),
    (box2d.b2Rope.prototype.m_k3 = 0.1),
    (box2d.b2Rope.prototype.GetVertexCount = function () {
        return this.m_count;
    }),
    (box2d.b2Rope.prototype.GetVertices = function () {
        return this.m_ps;
    }),
    (box2d.b2Rope.prototype.Initialize = function (a) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(3 <= a.count),
            (this.m_count = a.count),
            (this.m_ps = box2d.b2Vec2.MakeArray(this.m_count)),
            (this.m_p0s = box2d.b2Vec2.MakeArray(this.m_count)),
            (this.m_vs = box2d.b2Vec2.MakeArray(this.m_count)),
            (this.m_ims = box2d.b2MakeNumberArray(this.m_count));
        for (var b = 0; b < this.m_count; ++b) {
            this.m_ps[b].Copy(a.vertices[b]), this.m_p0s[b].Copy(a.vertices[b]), this.m_vs[b].SetZero();
            var c = a.masses[b];
            this.m_ims[b] = 0 < c ? 1 / c : 0;
        }
        var d = this.m_count - 1,
            e = this.m_count - 2;
        (this.m_Ls = box2d.b2MakeNumberArray(d)), (this.m_as = box2d.b2MakeNumberArray(e));
        for (b = 0; b < d; ++b) {
            var f = this.m_ps[b],
                g = this.m_ps[b + 1];
            this.m_Ls[b] = box2d.b2DistanceVV(f, g);
        }
        for (b = 0; b < e; ++b) {
            (f = this.m_ps[b]), (g = this.m_ps[b + 1]);
            var h = this.m_ps[b + 2],
                i = box2d.b2SubVV(g, f, box2d.b2Vec2.s_t0),
                j = box2d.b2SubVV(h, g, box2d.b2Vec2.s_t1),
                k = box2d.b2CrossVV(i, j),
                l = box2d.b2DotVV(i, j);
            this.m_as[b] = box2d.b2Atan2(k, l);
        }
        this.m_gravity.Copy(a.gravity), (this.m_damping = a.damping), (this.m_k2 = a.k2), (this.m_k3 = a.k3);
    }),
    (box2d.b2Rope.prototype.Step = function (a, b) {
        if (0 !== a) {
            for (var c = Math.exp(-a * this.m_damping), d = 0; d < this.m_count; ++d)
                this.m_p0s[d].Copy(this.m_ps[d]), 0 < this.m_ims[d] && this.m_vs[d].SelfMulAdd(a, this.m_gravity), this.m_vs[d].SelfMul(c), this.m_ps[d].SelfMulAdd(a, this.m_vs[d]);
            for (d = 0; d < b; ++d) this.SolveC2(), this.SolveC3(), this.SolveC2();
            var e = 1 / a;
            for (d = 0; d < this.m_count; ++d) box2d.b2MulSV(e, box2d.b2SubVV(this.m_ps[d], this.m_p0s[d], box2d.b2Vec2.s_t0), this.m_vs[d]);
        }
    }),
    (box2d.b2Rope.prototype.SolveC2 = function () {
        for (var a = this.m_count - 1, b = 0; b < a; ++b) {
            var c = this.m_ps[b],
                d = this.m_ps[b + 1],
                e = box2d.b2SubVV(d, c, box2d.b2Rope.s_d),
                f = e.Normalize(),
                g = this.m_ims[b],
                h = this.m_ims[b + 1];
            if (g + h !== 0) {
                var i = g / (g + h),
                    j = h / (g + h);
                c.SelfMulSub(this.m_k2 * i * (this.m_Ls[b] - f), e), d.SelfMulAdd(this.m_k2 * j * (this.m_Ls[b] - f), e);
            }
        }
    }),
    (box2d.b2Rope.s_d = new box2d.b2Vec2()),
    (box2d.b2Rope.prototype.SetAngleRadians = function (a) {
        for (var b = this.m_count - 2, c = 0; c < b; ++c) this.m_as[c] = a;
    }),
    (box2d.b2Rope.prototype.SolveC3 = function () {
        for (var a = this.m_count - 2, b = 0; b < a; ++b) {
            var c = this.m_ps[b],
                d = this.m_ps[b + 1],
                e = this.m_ps[b + 2],
                f = this.m_ims[b],
                g = this.m_ims[b + 1],
                h = this.m_ims[b + 2],
                i = box2d.b2SubVV(d, c, box2d.b2Rope.s_d1),
                j = box2d.b2SubVV(e, d, box2d.b2Rope.s_d2),
                k = i.GetLengthSquared(),
                l = j.GetLengthSquared();
            if (k * l != 0) {
                var m = box2d.b2CrossVV(i, j),
                    n = box2d.b2DotVV(i, j),
                    o = box2d.b2Atan2(m, n),
                    p = box2d.b2MulSV(-1 / k, i.SelfSkew(), box2d.b2Rope.s_Jd1),
                    q = box2d.b2MulSV(1 / l, j.SelfSkew(), box2d.b2Rope.s_Jd2),
                    r = box2d.b2NegV(p, box2d.b2Rope.s_J1),
                    s = box2d.b2SubVV(p, q, box2d.b2Rope.s_J2),
                    t = q,
                    u = f * box2d.b2DotVV(r, r) + g * box2d.b2DotVV(s, s) + h * box2d.b2DotVV(t, t);
                if (0 !== u) {
                    u = 1 / u;
                    for (var v = o - this.m_as[b]; v > box2d.b2_pi; ) v = (o -= 2 * box2d.b2_pi) - this.m_as[b];
                    for (; v < -box2d.b2_pi; ) v = (o += 2 * box2d.b2_pi) - this.m_as[b];
                    var w = -this.m_k3 * u * v;
                    c.SelfMulAdd(f * w, r), d.SelfMulAdd(g * w, s), e.SelfMulAdd(h * w, t);
                }
            }
        }
    }),
    (box2d.b2Rope.s_d1 = new box2d.b2Vec2()),
    (box2d.b2Rope.s_d2 = new box2d.b2Vec2()),
    (box2d.b2Rope.s_Jd1 = new box2d.b2Vec2()),
    (box2d.b2Rope.s_Jd2 = new box2d.b2Vec2()),
    (box2d.b2Rope.s_J1 = new box2d.b2Vec2()),
    (box2d.b2Rope.s_J2 = new box2d.b2Vec2()),
    (box2d.b2Rope.prototype.Draw = function (a) {
        for (var b = new box2d.b2Color(0.4, 0.5, 0.7), c = 0; c < this.m_count - 1; ++c) a.DrawSegment(this.m_ps[c], this.m_ps[c + 1], b);
    }),
    goog.provide("box2d.b2WheelJoint"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Math"),
    (box2d.b2WheelJointDef = function () {
        goog.base(this, box2d.b2JointType.e_wheelJoint), (this.localAnchorA = new box2d.b2Vec2(0, 0)), (this.localAnchorB = new box2d.b2Vec2(0, 0)), (this.localAxisA = new box2d.b2Vec2(1, 0));
    }),
    goog.inherits(box2d.b2WheelJointDef, box2d.b2JointDef),
    (box2d.b2WheelJointDef.prototype.localAnchorA = null),
    (box2d.b2WheelJointDef.prototype.localAnchorB = null),
    (box2d.b2WheelJointDef.prototype.localAxisA = null),
    (box2d.b2WheelJointDef.prototype.enableMotor = !1),
    (box2d.b2WheelJointDef.prototype.maxMotorTorque = 0),
    (box2d.b2WheelJointDef.prototype.motorSpeed = 0),
    (box2d.b2WheelJointDef.prototype.frequencyHz = 2),
    (box2d.b2WheelJointDef.prototype.dampingRatio = 0.7),
    (box2d.b2WheelJointDef.prototype.Initialize = function (a, b, c, d) {
        (this.bodyA = a), (this.bodyB = b), this.bodyA.GetLocalPoint(c, this.localAnchorA), this.bodyB.GetLocalPoint(c, this.localAnchorB), this.bodyA.GetLocalVector(d, this.localAxisA);
    }),
    (box2d.b2WheelJoint = function (a) {
        goog.base(this, a),
            (this.m_frequencyHz = a.frequencyHz),
            (this.m_dampingRatio = a.dampingRatio),
            (this.m_localAnchorA = a.localAnchorA.Clone()),
            (this.m_localAnchorB = a.localAnchorB.Clone()),
            (this.m_localXAxisA = a.localAxisA.Clone()),
            (this.m_localYAxisA = box2d.b2CrossOneV(this.m_localXAxisA, new box2d.b2Vec2())),
            (this.m_maxMotorTorque = a.maxMotorTorque),
            (this.m_motorSpeed = a.motorSpeed),
            (this.m_enableMotor = a.enableMotor),
            (this.m_localCenterA = new box2d.b2Vec2()),
            (this.m_localCenterB = new box2d.b2Vec2()),
            (this.m_ax = new box2d.b2Vec2()),
            (this.m_ay = new box2d.b2Vec2()),
            (this.m_qA = new box2d.b2Rot()),
            (this.m_qB = new box2d.b2Rot()),
            (this.m_lalcA = new box2d.b2Vec2()),
            (this.m_lalcB = new box2d.b2Vec2()),
            (this.m_rA = new box2d.b2Vec2()),
            (this.m_rB = new box2d.b2Vec2()),
            this.m_ax.SetZero(),
            this.m_ay.SetZero();
    }),
    goog.inherits(box2d.b2WheelJoint, box2d.b2Joint),
    (box2d.b2WheelJoint.prototype.m_frequencyHz = 0),
    (box2d.b2WheelJoint.prototype.m_dampingRatio = 0),
    (box2d.b2WheelJoint.prototype.m_localAnchorA = null),
    (box2d.b2WheelJoint.prototype.m_localAnchorB = null),
    (box2d.b2WheelJoint.prototype.m_localXAxisA = null),
    (box2d.b2WheelJoint.prototype.m_localYAxisA = null),
    (box2d.b2WheelJoint.prototype.m_impulse = 0),
    (box2d.b2WheelJoint.prototype.m_motorImpulse = 0),
    (box2d.b2WheelJoint.prototype.m_springImpulse = 0),
    (box2d.b2WheelJoint.prototype.m_maxMotorTorque = 0),
    (box2d.b2WheelJoint.prototype.m_motorSpeed = 0),
    (box2d.b2WheelJoint.prototype.m_enableMotor = !1),
    (box2d.b2WheelJoint.prototype.m_indexA = 0),
    (box2d.b2WheelJoint.prototype.m_indexB = 0),
    (box2d.b2WheelJoint.prototype.m_localCenterA = null),
    (box2d.b2WheelJoint.prototype.m_localCenterB = null),
    (box2d.b2WheelJoint.prototype.m_invMassA = 0),
    (box2d.b2WheelJoint.prototype.m_invMassB = 0),
    (box2d.b2WheelJoint.prototype.m_invIA = 0),
    (box2d.b2WheelJoint.prototype.m_invIB = 0),
    (box2d.b2WheelJoint.prototype.m_ax = null),
    (box2d.b2WheelJoint.prototype.m_ay = null),
    (box2d.b2WheelJoint.prototype.m_sAx = 0),
    (box2d.b2WheelJoint.prototype.m_sBx = 0),
    (box2d.b2WheelJoint.prototype.m_sAy = 0),
    (box2d.b2WheelJoint.prototype.m_sBy = 0),
    (box2d.b2WheelJoint.prototype.m_mass = 0),
    (box2d.b2WheelJoint.prototype.m_motorMass = 0),
    (box2d.b2WheelJoint.prototype.m_springMass = 0),
    (box2d.b2WheelJoint.prototype.m_bias = 0),
    (box2d.b2WheelJoint.prototype.m_gamma = 0),
    (box2d.b2WheelJoint.prototype.m_qA = null),
    (box2d.b2WheelJoint.prototype.m_qB = null),
    (box2d.b2WheelJoint.prototype.m_lalcA = null),
    (box2d.b2WheelJoint.prototype.m_lalcB = null),
    (box2d.b2WheelJoint.prototype.m_rA = null),
    (box2d.b2WheelJoint.prototype.m_rB = null),
    (box2d.b2WheelJoint.prototype.GetMotorSpeed = function () {
        return this.m_motorSpeed;
    }),
    (box2d.b2WheelJoint.prototype.GetMaxMotorTorque = function () {
        return this.m_maxMotorTorque;
    }),
    (box2d.b2WheelJoint.prototype.SetSpringFrequencyHz = function (a) {
        this.m_frequencyHz = a;
    }),
    (box2d.b2WheelJoint.prototype.GetSpringFrequencyHz = function () {
        return this.m_frequencyHz;
    }),
    (box2d.b2WheelJoint.prototype.SetSpringDampingRatio = function (a) {
        this.m_dampingRatio = a;
    }),
    (box2d.b2WheelJoint.prototype.GetSpringDampingRatio = function () {
        return this.m_dampingRatio;
    }),
    (box2d.b2WheelJoint.prototype.InitVelocityConstraints = function (a) {
        (this.m_indexA = this.m_bodyA.m_islandIndex),
            (this.m_indexB = this.m_bodyB.m_islandIndex),
            this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),
            this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),
            (this.m_invMassA = this.m_bodyA.m_invMass),
            (this.m_invMassB = this.m_bodyB.m_invMass),
            (this.m_invIA = this.m_bodyA.m_invI),
            (this.m_invIB = this.m_bodyB.m_invI);
        var b = this.m_invMassA,
            c = this.m_invMassB,
            d = this.m_invIA,
            e = this.m_invIB,
            f = a.positions[this.m_indexA].c,
            g = a.positions[this.m_indexA].a,
            h = a.velocities[this.m_indexA].v,
            i = a.velocities[this.m_indexA].w,
            j = a.positions[this.m_indexB].c,
            k = a.positions[this.m_indexB].a,
            l = a.velocities[this.m_indexB].v,
            m = a.velocities[this.m_indexB].w,
            n = this.m_qA.SetAngleRadians(g),
            o = this.m_qB.SetAngleRadians(k);
        box2d.b2SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
        var p = box2d.b2MulRV(n, this.m_lalcA, this.m_rA);
        box2d.b2SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
        var q = box2d.b2MulRV(o, this.m_lalcB, this.m_rB),
            r = box2d.b2SubVV(box2d.b2AddVV(j, q, box2d.b2Vec2.s_t0), box2d.b2AddVV(f, p, box2d.b2Vec2.s_t1), box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_d);
        if (
            (box2d.b2MulRV(n, this.m_localYAxisA, this.m_ay),
            (this.m_sAy = box2d.b2CrossVV(box2d.b2AddVV(r, p, box2d.b2Vec2.s_t0), this.m_ay)),
            (this.m_sBy = box2d.b2CrossVV(q, this.m_ay)),
            (this.m_mass = b + c + d * this.m_sAy * this.m_sAy + e * this.m_sBy * this.m_sBy),
            0 < this.m_mass && (this.m_mass = 1 / this.m_mass),
            (this.m_springMass = 0),
            (this.m_bias = 0),
            (this.m_gamma = 0) < this.m_frequencyHz)
        ) {
            box2d.b2MulRV(n, this.m_localXAxisA, this.m_ax), (this.m_sAx = box2d.b2CrossVV(box2d.b2AddVV(r, p, box2d.b2Vec2.s_t0), this.m_ax)), (this.m_sBx = box2d.b2CrossVV(q, this.m_ax));
            var s = b + c + d * this.m_sAx * this.m_sAx + e * this.m_sBx * this.m_sBx;
            if (0 < s) {
                this.m_springMass = 1 / s;
                var t = box2d.b2DotVV(r, this.m_ax),
                    u = 2 * box2d.b2_pi * this.m_frequencyHz,
                    v = 2 * this.m_springMass * this.m_dampingRatio * u,
                    w = this.m_springMass * u * u,
                    x = a.step.dt;
                (this.m_gamma = x * (v + x * w)),
                    0 < this.m_gamma && (this.m_gamma = 1 / this.m_gamma),
                    (this.m_bias = t * x * w * this.m_gamma),
                    (this.m_springMass = s + this.m_gamma),
                    0 < this.m_springMass && (this.m_springMass = 1 / this.m_springMass);
            }
        } else this.m_springImpulse = 0;
        if ((this.m_enableMotor ? ((this.m_motorMass = d + e), 0 < this.m_motorMass && (this.m_motorMass = 1 / this.m_motorMass)) : ((this.m_motorMass = 0), (this.m_motorImpulse = 0)), a.step.warmStarting)) {
            (this.m_impulse *= a.step.dtRatio), (this.m_springImpulse *= a.step.dtRatio), (this.m_motorImpulse *= a.step.dtRatio);
            var y = box2d.b2AddVV(box2d.b2MulSV(this.m_impulse, this.m_ay, box2d.b2Vec2.s_t0), box2d.b2MulSV(this.m_springImpulse, this.m_ax, box2d.b2Vec2.s_t1), box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_P),
                z = this.m_impulse * this.m_sAy + this.m_springImpulse * this.m_sAx + this.m_motorImpulse,
                A = this.m_impulse * this.m_sBy + this.m_springImpulse * this.m_sBx + this.m_motorImpulse;
            h.SelfMulSub(this.m_invMassA, y), (i -= this.m_invIA * z), l.SelfMulAdd(this.m_invMassB, y), (m += this.m_invIB * A);
        } else (this.m_impulse = 0), (this.m_springImpulse = 0), (this.m_motorImpulse = 0);
        (a.velocities[this.m_indexA].w = i), (a.velocities[this.m_indexB].w = m);
    }),
    (box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_d = new box2d.b2Vec2()),
    (box2d.b2WheelJoint.prototype.InitVelocityConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2WheelJoint.prototype.SolveVelocityConstraints = function (a) {
        var b = this.m_invMassA,
            c = this.m_invMassB,
            d = this.m_invIA,
            e = this.m_invIB,
            f = a.velocities[this.m_indexA].v,
            g = a.velocities[this.m_indexA].w,
            h = a.velocities[this.m_indexB].v,
            i = a.velocities[this.m_indexB].w,
            j = box2d.b2DotVV(this.m_ax, box2d.b2SubVV(h, f, box2d.b2Vec2.s_t0)) + this.m_sBx * i - this.m_sAx * g,
            k = -this.m_springMass * (j + this.m_bias + this.m_gamma * this.m_springImpulse);
        this.m_springImpulse += k;
        var l = box2d.b2MulSV(k, this.m_ax, box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P),
            m = k * this.m_sAx,
            n = k * this.m_sBx;
        f.SelfMulSub(b, l), (g -= d * m), h.SelfMulAdd(c, l);
        (j = (i += e * n) - g - this.m_motorSpeed), (k = -this.m_motorMass * j);
        var o = this.m_motorImpulse,
            p = a.step.dt * this.m_maxMotorTorque;
        (this.m_motorImpulse = box2d.b2Clamp(this.m_motorImpulse + k, -p, p)), (g -= d * (k = this.m_motorImpulse - o)), (i += e * k);
        (j = box2d.b2DotVV(this.m_ay, box2d.b2SubVV(h, f, box2d.b2Vec2.s_t0)) + this.m_sBy * i - this.m_sAy * g), (k = -this.m_mass * j);
        this.m_impulse += k;
        (l = box2d.b2MulSV(k, this.m_ay, box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P)), (m = k * this.m_sAy), (n = k * this.m_sBy);
        f.SelfMulSub(b, l), (g -= d * m), h.SelfMulAdd(c, l), (i += e * n), (a.velocities[this.m_indexA].w = g), (a.velocities[this.m_indexB].w = i);
    }),
    (box2d.b2WheelJoint.prototype.SolveVelocityConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2WheelJoint.prototype.SolvePositionConstraints = function (a) {
        var b = a.positions[this.m_indexA].c,
            c = a.positions[this.m_indexA].a,
            d = a.positions[this.m_indexB].c,
            e = a.positions[this.m_indexB].a,
            f = this.m_qA.SetAngleRadians(c),
            g = this.m_qB.SetAngleRadians(e);
        box2d.b2SubVV(this.m_localAnchorA, this.m_localCenterA, this.m_lalcA);
        var h = box2d.b2MulRV(f, this.m_lalcA, this.m_rA);
        box2d.b2SubVV(this.m_localAnchorB, this.m_localCenterB, this.m_lalcB);
        var i,
            j = box2d.b2MulRV(g, this.m_lalcB, this.m_rB),
            k = box2d.b2AddVV(box2d.b2SubVV(d, b, box2d.b2Vec2.s_t0), box2d.b2SubVV(j, h, box2d.b2Vec2.s_t1), box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_d),
            l = box2d.b2MulRV(f, this.m_localYAxisA, this.m_ay),
            m = box2d.b2CrossVV(box2d.b2AddVV(k, h, box2d.b2Vec2.s_t0), l),
            n = box2d.b2CrossVV(j, l),
            o = box2d.b2DotVV(k, this.m_ay),
            p = this.m_invMassA + this.m_invMassB + this.m_invIA * this.m_sAy * this.m_sAy + this.m_invIB * this.m_sBy * this.m_sBy;
        i = 0 !== p ? -o / p : 0;
        var q = box2d.b2MulSV(i, l, box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_P),
            r = i * m,
            s = i * n;
        return (
            b.SelfMulSub(this.m_invMassA, q), (c -= this.m_invIA * r), d.SelfMulAdd(this.m_invMassB, q), (e += this.m_invIB * s), (a.positions[this.m_indexA].a = c), (a.positions[this.m_indexB].a = e), box2d.b2Abs(o) <= box2d.b2_linearSlop
        );
    }),
    (box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_d = new box2d.b2Vec2()),
    (box2d.b2WheelJoint.prototype.SolvePositionConstraints.s_P = new box2d.b2Vec2()),
    (box2d.b2WheelJoint.prototype.GetDefinition = function (a) {
        return box2d.ENABLE_ASSERTS && box2d.b2Assert(!1), a;
    }),
    (box2d.b2WheelJoint.prototype.GetAnchorA = function (a) {
        return this.m_bodyA.GetWorldPoint(this.m_localAnchorA, a);
    }),
    (box2d.b2WheelJoint.prototype.GetAnchorB = function (a) {
        return this.m_bodyB.GetWorldPoint(this.m_localAnchorB, a);
    }),
    (box2d.b2WheelJoint.prototype.GetReactionForce = function (a, b) {
        return (b.x = a * (this.m_impulse * this.m_ay.x + this.m_springImpulse * this.m_ax.x)), (b.y = a * (this.m_impulse * this.m_ay.y + this.m_springImpulse * this.m_ax.y)), b;
    }),
    (box2d.b2WheelJoint.prototype.GetReactionTorque = function (a) {
        return a * this.m_motorImpulse;
    }),
    (box2d.b2WheelJoint.prototype.GetLocalAnchorA = function (a) {
        return a.Copy(this.m_localAnchorA);
    }),
    (box2d.b2WheelJoint.prototype.GetLocalAnchorB = function (a) {
        return a.Copy(this.m_localAnchorB);
    }),
    (box2d.b2WheelJoint.prototype.GetLocalAxisA = function (a) {
        return a.Copy(this.m_localXAxisA);
    }),
    (box2d.b2WheelJoint.prototype.GetJointTranslation = function () {
        var a = this.m_bodyA,
            b = this.m_bodyB,
            c = a.GetWorldPoint(this.m_localAnchorA, new box2d.b2Vec2()),
            d = b.GetWorldPoint(this.m_localAnchorB, new box2d.b2Vec2()),
            e = box2d.b2SubVV(d, c, new box2d.b2Vec2()),
            f = a.GetWorldVector(this.m_localXAxisA, new box2d.b2Vec2());
        return box2d.b2DotVV(e, f);
    }),
    (box2d.b2WheelJoint.prototype.GetJointSpeed = function () {
        var a = this.m_bodyA.m_angularVelocity;
        return this.m_bodyB.m_angularVelocity - a;
    }),
    (box2d.b2WheelJoint.prototype.IsMotorEnabled = function () {
        return this.m_enableMotor;
    }),
    (box2d.b2WheelJoint.prototype.EnableMotor = function (a) {
        this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), (this.m_enableMotor = a);
    }),
    (box2d.b2WheelJoint.prototype.SetMotorSpeed = function (a) {
        this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), (this.m_motorSpeed = a);
    }),
    (box2d.b2WheelJoint.prototype.SetMaxMotorTorque = function (a) {
        this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), (this.m_maxMotorTorque = a);
    }),
    (box2d.b2WheelJoint.prototype.GetMotorTorque = function (a) {
        return a * this.m_motorImpulse;
    }),
    (box2d.b2WheelJoint.prototype.Dump = function () {
        if (box2d.DEBUG) {
            var a = this.m_bodyA.m_islandIndex,
                b = this.m_bodyB.m_islandIndex;
            box2d.b2Log("  /*box2d.b2WheelJointDef*/ var jd = new box2d.b2WheelJointDef();\n"),
                box2d.b2Log("  jd.bodyA = bodies[%d];\n", a),
                box2d.b2Log("  jd.bodyB = bodies[%d];\n", b),
                box2d.b2Log("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"),
                box2d.b2Log("  jd.localAnchorA.SetXY(%.15f, %.15f);\n", this.m_localAnchorA.x, this.m_localAnchorA.y),
                box2d.b2Log("  jd.localAnchorB.SetXY(%.15f, %.15f);\n", this.m_localAnchorB.x, this.m_localAnchorB.y),
                box2d.b2Log("  jd.localAxisA.Set(%.15f, %.15f);\n", this.m_localXAxisA.x, this.m_localXAxisA.y),
                box2d.b2Log("  jd.enableMotor = %s;\n", this.m_enableMotor ? "true" : "false"),
                box2d.b2Log("  jd.motorSpeed = %.15f;\n", this.m_motorSpeed),
                box2d.b2Log("  jd.maxMotorTorque = %.15f;\n", this.m_maxMotorTorque),
                box2d.b2Log("  jd.frequencyHz = %.15f;\n", this.m_frequencyHz),
                box2d.b2Log("  jd.dampingRatio = %.15f;\n", this.m_dampingRatio),
                box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
        }
    }),
    goog.provide("box2d.b2MotorJoint"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Math"),
    (box2d.b2MotorJointDef = function () {
        goog.base(this, box2d.b2JointType.e_motorJoint), (this.linearOffset = new box2d.b2Vec2(0, 0));
    }),
    goog.inherits(box2d.b2MotorJointDef, box2d.b2JointDef),
    (box2d.b2MotorJointDef.prototype.linearOffset = null),
    (box2d.b2MotorJointDef.prototype.angularOffset = 0),
    (box2d.b2MotorJointDef.prototype.maxForce = 1),
    (box2d.b2MotorJointDef.prototype.maxTorque = 1),
    (box2d.b2MotorJointDef.prototype.correctionFactor = 0.3),
    (box2d.b2MotorJointDef.prototype.Initialize = function (a, b) {
        (this.bodyA = a), (this.bodyB = b), this.bodyA.GetLocalPoint(this.bodyB.GetPosition(), this.linearOffset);
        var c = this.bodyA.GetAngleRadians(),
            d = this.bodyB.GetAngleRadians();
        this.angularOffset = d - c;
    }),
    (box2d.b2MotorJoint = function (a) {
        goog.base(this, a),
            (this.m_linearOffset = a.linearOffset.Clone()),
            (this.m_linearImpulse = new box2d.b2Vec2(0, 0)),
            (this.m_maxForce = a.maxForce),
            (this.m_maxTorque = a.maxTorque),
            (this.m_correctionFactor = a.correctionFactor),
            (this.m_rA = new box2d.b2Vec2(0, 0)),
            (this.m_rB = new box2d.b2Vec2(0, 0)),
            (this.m_localCenterA = new box2d.b2Vec2(0, 0)),
            (this.m_localCenterB = new box2d.b2Vec2(0, 0)),
            (this.m_linearError = new box2d.b2Vec2(0, 0)),
            (this.m_linearMass = new box2d.b2Mat22()),
            (this.m_qA = new box2d.b2Rot()),
            (this.m_qB = new box2d.b2Rot()),
            (this.m_K = new box2d.b2Mat22());
    }),
    goog.inherits(box2d.b2MotorJoint, box2d.b2Joint),
    (box2d.b2MotorJoint.prototype.m_linearOffset = null),
    (box2d.b2MotorJoint.prototype.m_angularOffset = 0),
    (box2d.b2MotorJoint.prototype.m_linearImpulse = null),
    (box2d.b2MotorJoint.prototype.m_angularImpulse = 0),
    (box2d.b2MotorJoint.prototype.m_maxForce = 0),
    (box2d.b2MotorJoint.prototype.m_maxTorque = 0),
    (box2d.b2MotorJoint.prototype.m_correctionFactor = 0.3),
    (box2d.b2MotorJoint.prototype.m_indexA = 0),
    (box2d.b2MotorJoint.prototype.m_indexB = 0),
    (box2d.b2MotorJoint.prototype.m_rA = null),
    (box2d.b2MotorJoint.prototype.m_rB = null),
    (box2d.b2MotorJoint.prototype.m_localCenterA = null),
    (box2d.b2MotorJoint.prototype.m_localCenterB = null),
    (box2d.b2MotorJoint.prototype.m_linearError = null),
    (box2d.b2MotorJoint.prototype.m_angularError = 0),
    (box2d.b2MotorJoint.prototype.m_invMassA = 0),
    (box2d.b2MotorJoint.prototype.m_invMassB = 0),
    (box2d.b2MotorJoint.prototype.m_invIA = 0),
    (box2d.b2MotorJoint.prototype.m_invIB = 0),
    (box2d.b2MotorJoint.prototype.m_linearMass = null),
    (box2d.b2MotorJoint.prototype.m_angularMass = 0),
    (box2d.b2MotorJoint.prototype.m_qA = null),
    (box2d.b2MotorJoint.prototype.m_qB = null),
    (box2d.b2MotorJoint.prototype.m_K = null),
    (box2d.b2MotorJoint.prototype.GetAnchorA = function (a) {
        return this.m_bodyA.GetPosition(a);
    }),
    (box2d.b2MotorJoint.prototype.GetAnchorB = function (a) {
        return this.m_bodyB.GetPosition(a);
    }),
    (box2d.b2MotorJoint.prototype.GetReactionForce = function (a, b) {
        return box2d.b2MulSV(a, this.m_linearImpulse, b);
    }),
    (box2d.b2MotorJoint.prototype.GetReactionTorque = function (a) {
        return a * this.m_angularImpulse;
    }),
    (box2d.b2MotorJoint.prototype.SetCorrectionFactor = function (a) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(box2d.b2IsValid(a) && 0 <= a && a <= 1), (this._correctionFactor = a);
    }),
    (box2d.b2MotorJoint.prototype.GetCorrectionFactor = function () {
        return this.m_correctionFactor;
    }),
    (box2d.b2MotorJoint.prototype.SetLinearOffset = function (a) {
        box2d.b2IsEqualToV(a, this.m_linearOffset) || (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), this.m_linearOffset.Copy(a));
    }),
    (box2d.b2MotorJoint.prototype.GetLinearOffset = function (a) {
        return a.Copy(this.m_linearOffset);
    }),
    (box2d.b2MotorJoint.prototype.SetAngularOffset = function (a) {
        a !== this.m_angularOffset && (this.m_bodyA.SetAwake(!0), this.m_bodyB.SetAwake(!0), (this.m_angularOffset = a));
    }),
    (box2d.b2MotorJoint.prototype.GetAngularOffset = function () {
        return this.m_angularOffset;
    }),
    (box2d.b2MotorJoint.prototype.SetMaxForce = function (a) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(box2d.b2IsValid(a) && 0 <= a), (this.m_maxForce = a);
    }),
    (box2d.b2MotorJoint.prototype.GetMaxForce = function () {
        return this.m_maxForce;
    }),
    (box2d.b2MotorJoint.prototype.SetMaxTorque = function (a) {
        box2d.ENABLE_ASSERTS && box2d.b2Assert(box2d.b2IsValid(a) && 0 <= a), (this.m_maxTorque = a);
    }),
    (box2d.b2MotorJoint.prototype.GetMaxTorque = function () {
        return this.m_maxTorque;
    }),
    (box2d.b2MotorJoint.prototype.InitVelocityConstraints = function (a) {
        (this.m_indexA = this.m_bodyA.m_islandIndex),
            (this.m_indexB = this.m_bodyB.m_islandIndex),
            this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),
            this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),
            (this.m_invMassA = this.m_bodyA.m_invMass),
            (this.m_invMassB = this.m_bodyB.m_invMass),
            (this.m_invIA = this.m_bodyA.m_invI),
            (this.m_invIB = this.m_bodyB.m_invI);
        var b = a.positions[this.m_indexA].c,
            c = a.positions[this.m_indexA].a,
            d = a.velocities[this.m_indexA].v,
            e = a.velocities[this.m_indexA].w,
            f = a.positions[this.m_indexB].c,
            g = a.positions[this.m_indexB].a,
            h = a.velocities[this.m_indexB].v,
            i = a.velocities[this.m_indexB].w,
            j = this.m_qA.SetAngleRadians(c),
            k = this.m_qB.SetAngleRadians(g),
            l = box2d.b2MulRV(j, box2d.b2NegV(this.m_localCenterA, box2d.b2Vec2.s_t0), this.m_rA),
            m = box2d.b2MulRV(k, box2d.b2NegV(this.m_localCenterB, box2d.b2Vec2.s_t0), this.m_rB),
            n = this.m_invMassA,
            o = this.m_invMassB,
            p = this.m_invIA,
            q = this.m_invIB,
            r = this.m_K;
        if (
            ((r.ex.x = n + o + p * l.y * l.y + q * m.y * m.y),
            (r.ex.y = -p * l.x * l.y - q * m.x * m.y),
            (r.ey.x = r.ex.y),
            (r.ey.y = n + o + p * l.x * l.x + q * m.x * m.x),
            r.GetInverse(this.m_linearMass),
            (this.m_angularMass = p + q),
            0 < this.m_angularMass && (this.m_angularMass = 1 / this.m_angularMass),
            box2d.b2SubVV(box2d.b2SubVV(box2d.b2AddVV(f, m, box2d.b2Vec2.s_t0), box2d.b2AddVV(b, l, box2d.b2Vec2.s_t1), box2d.b2Vec2.s_t2), box2d.b2MulRV(j, this.m_linearOffset, box2d.b2Vec2.s_t3), this.m_linearError),
            (this.m_angularError = g - c - this.m_angularOffset),
            a.step.warmStarting)
        ) {
            this.m_linearImpulse.SelfMul(a.step.dtRatio), (this.m_angularImpulse *= a.step.dtRatio);
            var s = this.m_linearImpulse;
            d.SelfMulSub(n, s), (e -= p * (box2d.b2CrossVV(l, s) + this.m_angularImpulse)), h.SelfMulAdd(o, s), (i += q * (box2d.b2CrossVV(m, s) + this.m_angularImpulse));
        } else this.m_linearImpulse.SetZero(), (this.m_angularImpulse = 0);
        (a.velocities[this.m_indexA].w = e), (a.velocities[this.m_indexB].w = i);
    }),
    (box2d.b2MotorJoint.prototype.SolveVelocityConstraints = function (a) {
        var b = a.velocities[this.m_indexA].v,
            c = a.velocities[this.m_indexA].w,
            d = a.velocities[this.m_indexB].v,
            e = a.velocities[this.m_indexB].w,
            f = this.m_invMassA,
            g = this.m_invMassB,
            h = this.m_invIA,
            i = this.m_invIB,
            j = a.step.dt,
            k = a.step.inv_dt,
            l = e - c + k * this.m_correctionFactor * this.m_angularError,
            m = -this.m_angularMass * l,
            n = this.m_angularImpulse,
            o = j * this.m_maxTorque;
        (this.m_angularImpulse = box2d.b2Clamp(this.m_angularImpulse + m, -o, o)), (c -= h * (m = this.m_angularImpulse - n)), (e += i * m);
        var p = this.m_rA,
            q = this.m_rB;
        (l = box2d.b2AddVV(
            box2d.b2SubVV(box2d.b2AddVV(d, box2d.b2CrossSV(e, q, box2d.b2Vec2.s_t0), box2d.b2Vec2.s_t0), box2d.b2AddVV(b, box2d.b2CrossSV(c, p, box2d.b2Vec2.s_t1), box2d.b2Vec2.s_t1), box2d.b2Vec2.s_t2),
            box2d.b2MulSV(k * this.m_correctionFactor, this.m_linearError, box2d.b2Vec2.s_t3),
            box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_Cdot
        )),
            (m = box2d.b2MulMV(this.m_linearMass, l, box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_impulse).SelfNeg()),
            (n = box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_oldImpulse.Copy(this.m_linearImpulse));
        this.m_linearImpulse.SelfAdd(m);
        o = j * this.m_maxForce;
        this.m_linearImpulse.GetLengthSquared() > o * o && (this.m_linearImpulse.Normalize(), this.m_linearImpulse.SelfMul(o)),
            box2d.b2SubVV(this.m_linearImpulse, n, m),
            b.SelfMulSub(f, m),
            (c -= h * box2d.b2CrossVV(p, m)),
            d.SelfMulAdd(g, m),
            (e += i * box2d.b2CrossVV(q, m)),
            (a.velocities[this.m_indexA].w = c),
            (a.velocities[this.m_indexB].w = e);
    }),
    (box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_Cdot = new box2d.b2Vec2()),
    (box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_impulse = new box2d.b2Vec2()),
    (box2d.b2MotorJoint.prototype.SolveVelocityConstraints.s_oldImpulse = new box2d.b2Vec2()),
    (box2d.b2MotorJoint.prototype.SolvePositionConstraints = function () {
        return !0;
    }),
    (box2d.b2MotorJoint.prototype.Dump = function () {
        if (box2d.DEBUG) {
            var a = this.m_bodyA.m_islandIndex,
                b = this.m_bodyB.m_islandIndex;
            box2d.b2Log("  /*box2d.b2MotorJointDef*/ var jd = new box2d.b2MotorJointDef();\n"),
                box2d.b2Log("  jd.bodyA = bodies[%d];\n", a),
                box2d.b2Log("  jd.bodyB = bodies[%d];\n", b),
                box2d.b2Log("  jd.collideConnected = %s;\n", this.m_collideConnected ? "true" : "false"),
                box2d.b2Log("  jd.linearOffset.SetXY(%.15f, %.15f);\n", this.m_linearOffset.x, this.m_linearOffset.y),
                box2d.b2Log("  jd.angularOffset = %.15f;\n", this.m_angularOffset),
                box2d.b2Log("  jd.maxForce = %.15f;\n", this.m_maxForce),
                box2d.b2Log("  jd.maxTorque = %.15f;\n", this.m_maxTorque),
                box2d.b2Log("  jd.correctionFactor = %.15f;\n", this.m_correctionFactor),
                box2d.b2Log("  joints[%d] = this.m_world.CreateJoint(jd);\n", this.m_index);
        }
    }),
    goog.provide("box2d"),
    goog.require("box2d.b2Settings"),
    goog.require("box2d.b2Draw"),
    goog.require("box2d.b2Timer"),
    goog.require("box2d.b2CircleShape"),
    goog.require("box2d.b2EdgeShape"),
    goog.require("box2d.b2ChainShape"),
    goog.require("box2d.b2PolygonShape"),
    goog.require("box2d.b2BroadPhase"),
    goog.require("box2d.b2Distance"),
    goog.require("box2d.b2DynamicTree"),
    goog.require("box2d.b2TimeOfImpact"),
    goog.require("box2d.b2Body"),
    goog.require("box2d.b2Fixture"),
    goog.require("box2d.b2WorldCallbacks"),
    goog.require("box2d.b2TimeStep"),
    goog.require("box2d.b2World"),
    goog.require("box2d.b2Contact"),
    goog.require("box2d.b2AreaJoint"),
    goog.require("box2d.b2DistanceJoint"),
    goog.require("box2d.b2FrictionJoint"),
    goog.require("box2d.b2GearJoint"),
    goog.require("box2d.b2MotorJoint"),
    goog.require("box2d.b2MouseJoint"),
    goog.require("box2d.b2PrismaticJoint"),
    goog.require("box2d.b2PulleyJoint"),
    goog.require("box2d.b2RevoluteJoint"),
    goog.require("box2d.b2RopeJoint"),
    goog.require("box2d.b2WeldJoint"),
    goog.require("box2d.b2WheelJoint"),
    goog.require("box2d.b2Rope"),
    goog.require("box2d.b2BuoyancyController"),
    goog.require("box2d.b2ConstantAccelController"),
    goog.require("box2d.b2ConstantForceController"),
    goog.require("box2d.b2GravityController"),
    goog.require("box2d.b2TensorDampingController"),
    (Phaser.Physics.Box2D = function (a, b) {
        (this.game = a),
            (this.version = "1.0.2"),
            (this.ptmRatio = 50),
            (this.world = new box2d.b2World(new box2d.b2Vec2(0, 0))),
            (this.debugDraw = new Phaser.Physics.Box2D.DefaultDebugDraw(this.mpx(1))),
            this.world.SetDebugDraw(this.debugDraw),
            (this.contactListener = new Phaser.Physics.Box2D.DefaultContactListener()),
            this.world.SetContactListener(this.contactListener),
            (this.nextBodyId = 0),
            (this.nextFixtureId = 0),
            (this.gravity = new Phaser.Physics.Box2D.PointProxy(this, this.world, this.world.GetGravity, this.world.SetGravity)),
            (this.friction = 0.2),
            (this.restitution = 0),
            (this.density = 1),
            (this.frameRate = 1 / 60),
            (this.velocityIterations = 8),
            (this.positionIterations = 3),
            (this.useElapsedTime = !1),
            (this.paused = !1),
            (this.particleSystem = null);
        var c = new box2d.b2BodyDef();
        (this.mouseJointBody = this.world.CreateBody(c)),
            (this.mouseJoint = null),
            b.hasOwnProperty("mpx") && b.hasOwnProperty("pxm") && ((this.mpx = b.mpx), (this.pxm = b.pxm)),
            (this.walls = { left: null, right: null, top: null, bottom: null }),
            (this.onBodyAdded = new Phaser.Signal()),
            (this.onBodyRemoved = new Phaser.Signal()),
            (this._toRemove = []);
    }),
    (Phaser.Physics.Box2D.worldBoundsFilterCategory = 32768),
    (Phaser.Physics.Box2D.prototype = {
        getNextBodyId: function () {
            var a = this.nextBodyId;
            return (this.nextBodyId += 1), a;
        },
        getNextFixtureId: function () {
            var a = this.nextFixtureId;
            return (this.nextFixtureId += 1), a;
        },
        removeBodyNextStep: function (a) {
            this._toRemove.push(a);
        },
        preUpdate: function () {
            for (var a = this._toRemove.length; a--; ) this.removeBody(this._toRemove[a]);
            this._toRemove.length = 0;
        },
        enable: function (a, b) {
            void 0 === b && (b = !0);
            var c = 1;
            if (Array.isArray(a)) for (c = a.length; c--; ) a[c] instanceof Phaser.Group ? this.enable(a[c].children, b) : (this.enableBody(a[c]), b && a[c].hasOwnProperty("children") && 0 < a[c].children.length && this.enable(a[c], !0));
            else a instanceof Phaser.Group ? this.enable(a.children, b) : (this.enableBody(a), b && a.hasOwnProperty("children") && 0 < a.children.length && this.enable(a.children, !0));
        },
        enableBody: function (a) {
            a.hasOwnProperty("body") && null === a.body && ((a.body = new Phaser.Physics.Box2D.Body(this.game, a, a.x, a.y, 2)), a.anchor.set(0.5));
        },
        setBoundsToWorld: function (a, b, c, d, e, f) {
            void 0 === a && (a = !0),
                void 0 === b && (b = !0),
                void 0 === c && (c = !0),
                void 0 === d && (d = !0),
                void 0 === e && (e = 1),
                void 0 === f && (e = 4294967295),
                this.setBounds(this.game.world.bounds.x, this.game.world.bounds.y, this.game.world.bounds.width, this.game.world.bounds.height, a, b, c, d, e, f);
        },
        setBounds: function (a, b, c, d, e, f, g, h, i, j) {
            void 0 === e && (e = !0),
                void 0 === f && (f = !0),
                void 0 === g && (g = !0),
                void 0 === h && (h = !0),
                void 0 === i && (i = 1),
                void 0 === j && (j = 4294967295),
                this.walls.left && this.removeBody(this.walls.left),
                this.walls.right && this.removeBody(this.walls.right),
                this.walls.top && this.removeBody(this.walls.top),
                this.walls.bottom && this.removeBody(this.walls.bottom);
            var k = new box2d.b2PolygonShape(),
                l = new box2d.b2FixtureDef();
            (l.shape = k), (l.filter.categoryBits = Phaser.Physics.Box2D.worldBoundsFilterCategory), (l.filter.maskBits = 65535);
            var m = this.pxm(100),
                n = this.game.world.bounds;
            e && ((this.walls.left = this.createBody(0, 0, 0)), k.SetAsOrientedBox(m, this.pxm(n.height) + m, new box2d.b2Vec2(m, 0), 0), (this.walls.left.data.CreateFixture(l).id = this.getNextFixtureId()));
            f && ((this.walls.right = this.createBody(0, 0, 0)), k.SetAsOrientedBox(m, this.pxm(n.height) + m, new box2d.b2Vec2(this.pxm(-n.width) - m, 0), 0), (this.walls.right.data.CreateFixture(l).id = this.getNextFixtureId()));
            g && ((this.walls.top = this.createBody(0, 0, 0)), k.SetAsOrientedBox(this.pxm(n.width) + m, m, new box2d.b2Vec2(0, m), 0), (this.walls.top.data.CreateFixture(l).id = this.getNextFixtureId()));
            h && ((this.walls.bottom = this.createBody(0, 0, 0)), k.SetAsOrientedBox(this.pxm(n.width) + m, m, new box2d.b2Vec2(0, this.pxm(-n.height) - m), 0), (this.walls.bottom.data.CreateFixture(l).id = this.getNextFixtureId()));
        },
        pause: function () {
            this.paused = !0;
        },
        resume: function () {
            this.paused = !1;
        },
        update: function () {
            this.paused || (this.useElapsedTime ? this.world.Step(this.game.time.physicsElapsed, this.velocityIterations, this.positionIterations) : this.world.Step(this.frameRate, this.velocityIterations, this.positionIterations));
        },
        reset: function () {
            this.clear();
        },
        clear: function () {
            var a = this.world.GetGravity().Clone();
            (this.world = new box2d.b2World(a)), this.world.SetDebugDraw(this.debugDraw), this.world.SetContactListener(this.contactListener), (this._toRemove = []);
        },
        destroy: function () {
            this.clear(), (this.gravity = null), (this.world = null), (this.game = null);
        },
        createBody: function (a, b, c) {
            return new Phaser.Physics.Box2D.Body(this.game, null, a, b, c, this);
        },
        createCircle: function (a, b, c, d, e) {
            return this.createBody(a, b, 2).setCircle(c, d, e);
        },
        createRectangle: function (a, b, c, d, e, f, g) {
            return this.createBody(a, b, 2).setRectangle(c, d, e, f, g);
        },
        createPolygon: function (a, b, c, d, e) {
            return this.createBody(a, b, 2).setPolygon(c, d, e);
        },
        addBody: function (a) {
            return !a.data.world && ((a.data = this.world.CreateBody(a.bodyDef)), (a.data.world = this.world), (a.data.parent = a), this.onBodyAdded.dispatch(a), !0);
        },
        removeBody: function (a) {
            return a.data.world == this.world && (this.world.DestroyBody(a.data), this.onBodyRemoved.dispatch(a)), a;
        },
        getBodies: function () {
            for (var a = [], b = this.world.GetBodyList(); b; b = b.GetNext()) a.push(b);
            return a;
        },
        getBody: function (a) {
            return a instanceof box2d.b2Body ? a : a instanceof Phaser.Physics.Box2D.Body ? a.data : a.body && a.body.type === Phaser.Physics.BOX2D ? a.body.data : null;
        },
        toJSON: function () {
            return this.world.toJSON();
        },
        mpx: function (a) {
            return a * this.ptmRatio;
        },
        pxm: function (a) {
            return a / this.ptmRatio;
        },
        renderDebugDraw: function (a) {
            if (this.game.physics.box2d) {
                var b = this.game.physics.box2d;
                b.debugDraw.start(a), b.world.DrawDebugData(), b.debugDraw.stop();
            }
        },
        renderBodyInfo: function (a, b) {
            a.line("Position: x: " + b.x.toFixed(3) + " y: " + b.y.toFixed(3)),
                a.line("Rotation: " + b.rotation.toFixed(3) + " degrees"),
                a.line("Velocity: x: " + b.velocity.x.toFixed(3) + " y: " + b.velocity.y.toFixed(3)),
                a.line("Angular velocity: " + b.angularVelocity.toFixed(3) + " degrees/sec");
        },
        getFixturesAtPoint: function (a, b, c, d) {
            void 0 === c && (c = !1), void 0 === d && (d = !1);
            var e = this.pxm(-a),
                f = this.pxm(-b),
                g = new box2d.b2Vec2(e, f),
                h = new box2d.b2AABB(),
                i = new box2d.b2Vec2();
            i.SetXY(0.001, 0.001), box2d.b2SubVV(g, i, h.lowerBound), box2d.b2AddVV(g, i, h.upperBound);
            var j = [];
            return (
                this.world.QueryAABB(function (a) {
                    return !(!d || a.GetBody().GetType() === box2d.b2BodyType.b2_dynamicBody) || !a.TestPoint(g) || (j.push(a), !c);
                }, h),
                j
            );
        },
        getBodiesAtPoint: function (a, b, c, d) {
            void 0 === c && (c = !1), void 0 === d && (d = !1);
            var e = this.getFixturesAtPoint(a, b, c, d);
            if (e.length < 1) return e;
            for (var f = [], g = 0; g < e.length; g++) f.push(e[g].GetBody().parent);
            return (
                f.filter(function (a, b) {
                    return f.indexOf(a) === b;
                }),
                f
            );
        },
        mouseDragStart: function (a) {
            this.mouseDragEnd();
            var b = this.getFixturesAtPoint(a.x, a.y, !0, !0);
            if (!(b.length < 1)) {
                var c = this.pxm(-a.x),
                    d = this.pxm(-a.y),
                    e = new box2d.b2Vec2(c, d),
                    f = new box2d.b2MouseJointDef();
                (f.bodyA = this.mouseJointBody), (f.bodyB = b[0].GetBody()), f.target.Copy(e), (f.maxForce = 1e3 * f.bodyB.GetMass()), (this.mouseJoint = this.world.CreateJoint(f)), f.bodyB.SetAwake(!0);
            }
        },
        mouseDragMove: function (a) {
            if (this.mouseJoint) {
                var b = this.pxm(-a.x),
                    c = this.pxm(-a.y),
                    d = new box2d.b2Vec2(b, c);
                this.mouseJoint.SetTarget(d);
            }
        },
        mouseDragEnd: function () {
            this.mouseJoint && (this.world.DestroyJoint(this.mouseJoint), (this.mouseJoint = null));
        },
        distanceJoint: function (a, b, c, d, e, f, g, h, i) {
            void 0 === d && (d = 0),
                void 0 === e && (e = 0),
                void 0 === f && (f = 0),
                void 0 === g && (g = 0),
                void 0 === h && (h = 0),
                void 0 === i && (i = 0),
                (d = this.pxm(-d)),
                (e = this.pxm(-e)),
                (f = this.pxm(-f)),
                (g = this.pxm(-g)),
                a.body && (a = a.body),
                b.body && (b = b.body);
            var j = new box2d.b2DistanceJointDef();
            if (((j.bodyA = a.data), (j.bodyB = b.data), j.localAnchorA.SetXY(d, e), j.localAnchorB.SetXY(f, g), null == c)) {
                var k = new box2d.b2Vec2(),
                    l = new box2d.b2Vec2();
                j.bodyA.GetWorldPoint(j.localAnchorA, k), j.bodyB.GetWorldPoint(j.localAnchorB, l), k.SelfSub(l), (c = k.Length());
            } else c = this.pxm(c);
            return (j.length = c), (j.frequencyHz = h), (j.dampingRatio = i), this.world.CreateJoint(j);
        },
        ropeJoint: function (a, b, c, d, e, f, g) {
            void 0 === d && (d = 0), void 0 === e && (e = 0), void 0 === f && (f = 0), void 0 === g && (g = 0), (d = this.pxm(-d)), (e = this.pxm(-e)), (f = this.pxm(-f)), (g = this.pxm(-g)), a.body && (a = a.body), b.body && (b = b.body);
            var h = new box2d.b2RopeJointDef();
            if (((h.bodyA = a.data), (h.bodyB = b.data), h.localAnchorA.SetXY(d, e), h.localAnchorB.SetXY(f, g), null == c)) {
                var i = new box2d.b2Vec2(),
                    j = new box2d.b2Vec2();
                h.bodyA.GetWorldPoint(h.localAnchorA, i), h.bodyB.GetWorldPoint(h.localAnchorB, j), i.SelfSub(j), (c = i.Length());
            } else c = this.pxm(c);
            return (h.maxLength = c), this.world.CreateJoint(h);
        },
        revoluteJoint: function (a, b, c, d, e, f, g, h, i, j, k, l) {
            void 0 === c && (c = 0),
                void 0 === d && (d = 0),
                void 0 === e && (e = 0),
                void 0 === f && (f = 0),
                void 0 === g && (g = 0),
                void 0 === h && (h = 0),
                void 0 === i && (i = !1),
                void 0 === j && (j = 0),
                void 0 === k && (k = 0),
                void 0 === l && (l = !1),
                (c = this.pxm(-c)),
                (d = this.pxm(-d)),
                (e = this.pxm(-e)),
                (f = this.pxm(-f)),
                a.body && (a = a.body),
                b.body && (b = b.body);
            var m = new box2d.b2RevoluteJointDef();
            return (
                (m.bodyA = a.data),
                (m.bodyB = b.data),
                m.localAnchorA.SetXY(c, d),
                m.localAnchorB.SetXY(e, f),
                (m.motorSpeed = Phaser.Math.degToRad(-g)),
                (m.maxMotorTorque = h),
                (m.enableMotor = i),
                (m.lowerAngle = Phaser.Math.degToRad(j)),
                (m.upperAngle = Phaser.Math.degToRad(k)),
                (m.enableLimit = l),
                this.world.CreateJoint(m)
            );
        },
        prismaticJoint: function (a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
            void 0 === c && (c = 1),
                void 0 === d && (d = 0),
                void 0 === e && (e = 0),
                void 0 === f && (f = 0),
                void 0 === g && (g = 0),
                void 0 === h && (h = 0),
                void 0 === i && (i = 0),
                void 0 === j && (j = 0),
                void 0 === l && (l = 0),
                void 0 === m && (m = 0),
                void 0 === n && (n = !1),
                void 0 === k && (k = !1),
                void 0 === o && (o = 0),
                (c *= -1),
                (d *= -1),
                (e = this.pxm(-e)),
                (f = this.pxm(-f)),
                (g = this.pxm(-g)),
                (h = this.pxm(-h)),
                (i = this.pxm(i)),
                (l = this.pxm(l)),
                (m = this.pxm(m)),
                a.body && (a = a.body),
                b.body && (b = b.body);
            var p = new box2d.b2PrismaticJointDef();
            return (
                (p.bodyA = a.data),
                (p.bodyB = b.data),
                p.localAxisA.SetXY(c, d),
                p.localAnchorA.SetXY(e, f),
                p.localAnchorB.SetXY(g, h),
                (p.motorSpeed = i),
                (p.maxMotorForce = j),
                (p.enableMotor = k),
                (p.lowerTranslation = l),
                (p.upperTranslation = m),
                (p.enableLimit = n),
                (p.referenceAngle = Phaser.Math.degToRad(-o)),
                this.world.CreateJoint(p)
            );
        },
        frictionJoint: function (a, b, c, d, e, f, g, h) {
            void 0 === e && (e = 0),
                void 0 === f && (f = 0),
                void 0 === g && (g = 0),
                void 0 === h && (h = 0),
                void 0 === c && (c = 0),
                void 0 === d && (d = 0),
                (e = this.pxm(-e)),
                (f = this.pxm(-f)),
                (g = this.pxm(-g)),
                (h = this.pxm(-h)),
                a.body && (a = a.body),
                b.body && (b = b.body);
            var i = new box2d.b2FrictionJointDef();
            return (i.bodyA = a.data), (i.bodyB = b.data), i.localAnchorA.SetXY(e, f), i.localAnchorB.SetXY(g, h), (i.maxForce = c), (i.maxTorque = d), this.world.CreateJoint(i);
        },
        weldJoint: function (a, b, c, d, e, f, g, h) {
            void 0 === c && (c = 0),
                void 0 === d && (d = 0),
                void 0 === e && (e = 0),
                void 0 === f && (f = 0),
                void 0 === g && (g = 0),
                void 0 === h && (h = 0),
                (c = this.pxm(-c)),
                (d = this.pxm(-d)),
                (e = this.pxm(-e)),
                (f = this.pxm(-f)),
                a.body && (a = a.body),
                b.body && (b = b.body);
            var i = new box2d.b2WeldJointDef();
            return (i.bodyA = a.data), (i.bodyB = b.data), i.localAnchorA.SetXY(c, d), i.localAnchorB.SetXY(e, f), (i.frequencyHz = g), (i.dampingRatio = h), this.world.CreateJoint(i);
        },
        motorJoint: function (a, b, c, d, e, f, g, h) {
            void 0 === f && (f = 0),
                void 0 === g && (g = 0),
                void 0 === h && (h = 0),
                void 0 === c && (c = 0),
                void 0 === d && (d = 0),
                void 0 === e && (e = 1),
                (f = this.pxm(-f)),
                (g = this.pxm(-g)),
                a.body && (a = a.body),
                b.body && (b = b.body);
            var i = new box2d.b2MotorJointDef();
            return (i.bodyA = a.data), (i.bodyB = b.data), i.linearOffset.SetXY(f, g), (i.maxForce = c), (i.maxTorque = d), (i.angularOffset = Phaser.Math.degToRad(-h)), (i.correctionFactor = e), this.world.CreateJoint(i);
        },
        wheelJoint: function (a, b, c, d, e, f, g, h, i, j, k, l, m) {
            void 0 === g && (g = 0),
                void 0 === h && (h = 1),
                void 0 === c && (c = 0),
                void 0 === d && (d = 0),
                void 0 === e && (e = 0),
                void 0 === f && (f = 0),
                void 0 === k && (k = 0),
                void 0 === l && (l = 0),
                void 0 === m && (m = !1),
                void 0 === i && (i = 0),
                void 0 === j && (j = 0),
                (g *= -1),
                (h *= -1),
                (c = this.pxm(-c)),
                (d = this.pxm(-d)),
                (e = this.pxm(-e)),
                (f = this.pxm(-f)),
                a.body && (a = a.body),
                b.body && (b = b.body);
            var n = new box2d.b2WheelJointDef();
            return (
                (n.bodyA = a.data),
                (n.bodyB = b.data),
                n.localAxisA.SetXY(g, h),
                n.localAnchorA.SetXY(c, d),
                n.localAnchorB.SetXY(e, f),
                (n.motorSpeed = Phaser.Math.degToRad(-k)),
                (n.maxMotorTorque = l),
                (n.enableMotor = m),
                (n.frequencyHz = i),
                (n.dampingRatio = j),
                this.world.CreateJoint(n)
            );
        },
        pulleyJoint: function (a, b, c, d, e, f, g, h, i, j, k, l, m) {
            void 0 === c && (c = 0),
                void 0 === d && (d = 0),
                void 0 === e && (e = 0),
                void 0 === f && (f = 0),
                void 0 === g && (g = 0),
                void 0 === h && (h = 0),
                void 0 === i && (i = 0),
                void 0 === j && (j = 0),
                void 0 === k && (k = 1),
                void 0 === l && (l = 100),
                void 0 === m && (m = 100),
                (c = this.pxm(-c)),
                (d = this.pxm(-d)),
                (e = this.pxm(-e)),
                (f = this.pxm(-f)),
                (g = this.pxm(-g)),
                (h = this.pxm(-h)),
                (i = this.pxm(-i)),
                (j = this.pxm(-j)),
                (l = this.pxm(l)),
                (m = this.pxm(m)),
                a.body && (a = a.body),
                b.body && (b = b.body);
            var n = new box2d.b2PulleyJointDef();
            return (
                (n.bodyA = a.data),
                (n.bodyB = b.data),
                n.localAnchorA.SetXY(c, d),
                n.localAnchorB.SetXY(e, f),
                n.groundAnchorA.SetXY(g, h),
                n.groundAnchorB.SetXY(i, j),
                (n.lengthA = l),
                (n.lengthB = m),
                (n.ratio = k),
                this.world.CreateJoint(n)
            );
        },
        gearJoint: function (a, b, c) {
            void 0 === c && (c = 1);
            var d = new box2d.b2GearJointDef();
            return (d.joint1 = a), (d.joint2 = b), (d.ratio = -c), (d.bodyA = a.GetBodyA()), (d.bodyB = b.GetBodyB()), this.world.CreateJoint(d);
        },
        clearTilemapLayerBodies: function (a, b) {
            b = a.getLayer(b);
            for (var c = a.layers[b].bodies.length; c--; ) a.layers[b].bodies[c].destroy();
            a.layers[b].bodies.length = 0;
        },
        convertTilemap: function (a, b, c, d) {
            (b = a.getLayer(b)), void 0 === c && (c = !0), void 0 === d && (d = !0), this.clearTilemapLayerBodies(a, b);
            for (var e = 0, f = 0, g = 0, h = 0, i = a.layers[b].height; h < i; h++)
                for (var j = (e = 0), k = a.layers[b].width; j < k; j++) {
                    var l = a.layers[b].data[h][j];
                    if (l && -1 < l.index && l.collides)
                        if (d) {
                            var m = a.getTileRight(b, j, h);
                            if ((0 === e && ((f = l.x * l.width), (g = l.y * l.height), (e = l.width)), m && m.collides)) e += l.width;
                            else (n = new Phaser.Physics.Box2D.Body(this.game, null, f, g, 0)).addRectangle(e, l.height, e / 2, l.height / 2, 0), c && this.addBody(n), a.layers[b].bodies.push(n), (e = 0);
                        } else {
                            var n;
                            (n = this.createBody(l.x * l.width, l.y * l.height, 0, !1)).addRectangle(l.width, l.height, l.width / 2, l.height / 2, 0), c && this.addBody(n), a.layers[b].bodies.push(n);
                        }
                }
            return a.layers[b].bodies;
        },
        raycast: function (a, b, c, d, e, f) {
            void 0 === e && (e = !0), void 0 === f && (f = null), (a = this.pxm(-a)), (b = this.pxm(-b)), (c = this.pxm(-c)), (d = this.pxm(-d));
            var g = new box2d.b2Vec2(a, b),
                h = new box2d.b2Vec2(c, d),
                i = [],
                j = new Phaser.Physics.Box2D.RayCastCallback(this, e, f);
            this.world.RayCast(j, g, h);
            for (var k = 0; k < j.hits.length; k++) {
                var l = j.hits[k];
                (l.point = { x: this.mpx(-l.point.x), y: this.mpx(-l.point.y) }), (l.normal = { x: -l.normal.x, y: -l.normal.y }), i.push(l);
            }
            return i;
        },
        queryAABB: function (a, b, c, d) {
            (a = this.pxm(-a)), (b = this.pxm(-b)), (c = this.pxm(c)), (d = this.pxm(d));
            var e = new box2d.b2AABB();
            e.lowerBound.SetXY(a - c, b - d), e.upperBound.SetXY(a, b);
            var f = new Phaser.Physics.Box2D.QueryCallback(this);
            return this.world.QueryAABB(f, e), f.hits;
        },
        queryFixture: function (a) {
            var b = new Phaser.Physics.Box2D.QueryCallback(this);
            return this.world.QueryShape(b, a.GetShape(), a.GetBody().GetTransform()), b.hits;
        },
        setPTMRatio: function (a) {
            (this.ptmRatio = a), (this.debugDraw = new Phaser.Physics.Box2D.DefaultDebugDraw(this.ptmRatio)), this.world.SetDebugDraw(this.debugDraw);
        },
    }),
    (Phaser.Physics.Box2D.RayCastCallback = function (a, b, c) {
        (this.world = a), (this.closestHitOnly = b), (this.filterFunction = c), (this.hits = []);
    }),
    goog.inherits(Phaser.Physics.Box2D.RayCastCallback, box2d.b2RayCastCallback),
    (Phaser.Physics.Box2D.RayCastCallback.prototype.ReportFixture = function (a, b, c, d) {
        if (null !== this.filterFunction) {
            var e = { x: this.world.mpx(-b.x), y: this.world.mpx(-b.y) },
                f = { x: -c.x, y: -c.y },
                g = a.GetBody().parent;
            if (!this.filterFunction.call(this, g, a, e, f)) return -1;
        }
        this.closestHitOnly && (this.hits = []);
        var h = {};
        return (h.body = a.GetBody().parent), (h.fixture = a), (h.point = { x: b.x, y: b.y }), (h.normal = { x: c.x, y: c.y }), this.hits.push(h), this.closestHitOnly ? d : 1;
    }),
    (Phaser.Physics.Box2D.QueryCallback = function (a) {
        (this.world = a), (this.hits = []);
    }),
    goog.inherits(Phaser.Physics.Box2D.QueryCallback, box2d.b2QueryCallback),
    (Phaser.Physics.Box2D.QueryCallback.prototype.ReportFixture = function (a) {
        var b = {};
        return (b.body = a.GetBody().parent), (b.fixture = a), this.hits.push(b), !0;
    }),
    (Phaser.Physics.Box2D.renderBody = function (a, b, c, d) {
        (c = c || "rgb(255,255,255)"), void 0 === d && (d = !0);
        var e = b.data,
            f = e.GetTransform(),
            g = b.world;
        (f.p.x += -b.game.camera.x / g.ptmRatio), (f.p.y -= -b.game.camera.y / g.ptmRatio), g.debugDraw.start(a), g.debugDraw.PushTransform(f);
        var h = Phaser.Color.webToColor(c),
            i = g.debugDraw.color;
        (i.r = h.r / 255), (i.g = h.g / 255), (i.b = h.b / 255);
        for (var j = e.GetFixtureList(); j; j = j.GetNext()) g.world.DrawShape(j, i);
        g.debugDraw.PopTransform(), g.debugDraw.stop();
    }),
    (Phaser.Physics.Box2D.Body = function (a, b, c, d, e, f) {
        void 0 === b && (b = null),
            void 0 === c && (c = 0),
            void 0 === d && (d = 0),
            void 0 === e && (e = 2),
            void 0 === f && (f = a.physics.box2d),
            (this.game = a),
            (this.world = f),
            (this.id = this.world.getNextBodyId()),
            (this.sprite = b),
            (this.type = Phaser.Physics.BOX2D),
            (this.offset = new Phaser.Point()),
            (this.bodyDef = new box2d.b2BodyDef()),
            this.bodyDef.position.SetXY(-this.world.pxm(c), -this.world.pxm(d)),
            0 === e
                ? (this.bodyDef.type = box2d.b2BodyType.b2_staticBody)
                : 1 === e
                ? (this.bodyDef.type = box2d.b2BodyType.b2_kinematicBody)
                : 2 === e
                ? (this.bodyDef.type = box2d.b2BodyType.b2_dynamicBody)
                : 3 === e && (this.bodyDef.type = box2d.b2BodyType.b2_bulletBody),
            (this.data = this.world.world.CreateBody(this.bodyDef)),
            (this.data.world = this.world.world),
            ((this.data.parent = this).velocity = new Phaser.Physics.Box2D.PointProxy(this.world, this.data, this.data.GetLinearVelocity, this.data.SetLinearVelocity)),
            (this.removeNextStep = !1),
            (this._fixtureContactCallbacks = {}),
            (this._fixtureContactCallbackContext = {}),
            (this._bodyContactCallbacks = {}),
            (this._bodyContactCallbackContext = {}),
            (this._categoryContactCallbacks = {}),
            (this._categoryContactCallbackContext = {}),
            (this._fixturePresolveCallbacks = {}),
            (this._fixturePresolveCallbackContext = {}),
            (this._bodyPresolveCallbacks = {}),
            (this._bodyPresolveCallbackContext = {}),
            (this._categoryPresolveCallbacks = {}),
            (this._categoryPresolveCallbackContext = {}),
            (this._fixturePostsolveCallbacks = {}),
            (this._fixturePostsolveCallbackContext = {}),
            (this._bodyPostsolveCallbacks = {}),
            (this._bodyPostsolveCallbackContext = {}),
            (this._categoryPostsolveCallbacks = {}),
            (this._categoryPostsolveCallbackContext = {}),
            b && this.setRectangleFromSprite(b);
    }),
    (Phaser.Physics.Box2D.Body.prototype = {
        setBodyContactCallback: function (a, b, c) {
            var d = -1;
            a.id ? (d = a.id) : a.body && (d = a.body.id),
                -1 < d && (null === b ? (delete this._bodyContactCallbacks[d], delete this._bodyContactCallbackContext[d]) : ((this._bodyContactCallbacks[d] = b), (this._bodyContactCallbackContext[d] = c)));
        },
        setFixtureContactCallback: function (a, b, c) {
            var d = a.id;
            -1 < d && (null === b ? (delete this._fixtureContactCallbacks[d], delete this._fixtureContactCallbackContext[d]) : ((this._fixtureContactCallbacks[d] = b), (this._fixtureContactCallbackContext[d] = c)));
        },
        setCategoryContactCallback: function (a, b, c) {
            null === b ? (delete this._categoryContactCallbacks[a], delete this._categoryContactCallbacksContext[a]) : ((this._categoryContactCallbacks[a] = b), (this._categoryContactCallbackContext[a] = c));
        },
        setBodyPresolveCallback: function (a, b, c) {
            var d = -1;
            a.id ? (d = a.id) : a.body && (d = a.body.id),
                -1 < d && (null === b ? (delete this._bodyPresolveCallbacks[d], delete this._bodyPresolveCallbackContext[d]) : ((this._bodyPresolveCallbacks[d] = b), (this._bodyPresolveCallbackContext[d] = c)));
        },
        setFixturePresolveCallback: function (a, b, c) {
            var d = a.id;
            -1 < d && (null === b ? (delete this._fixturePresolveCallbacks[d], delete this._fixturePresolveCallbackContext[d]) : ((this._fixturePresolveCallbacks[d] = b), (this._fixturePresolveCallbackContext[d] = c)));
        },
        setCategoryPresolveCallback: function (a, b, c) {
            null === b ? (delete this._categoryPresolveCallbacks[a], delete this._categoryPresolveCallbacksContext[a]) : ((this._categoryPresolveCallbacks[a] = b), (this._categoryPresolveCallbackContext[a] = c));
        },
        setBodyPostsolveCallback: function (a, b, c) {
            var d = -1;
            a.id ? (d = a.id) : a.body && (d = a.body.id),
                -1 < d && (null === b ? (delete this._bodyPostsolveCallbacks[d], delete this._bodyPostsolveCallbackContext[d]) : ((this._bodyPostsolveCallbacks[d] = b), (this._bodyPostsolveCallbackContext[d] = c)));
        },
        setFixturePostsolveCallback: function (a, b, c) {
            var d = a.id;
            -1 < d && (null === b ? (delete this._fixturePostsolveCallbacks[d], delete this._fixturePostsolveCallbackContext[d]) : ((this._fixturePostsolveCallbacks[d] = b), (this._fixturePostsolveCallbackContext[d] = c)));
        },
        setCategoryPostsolveCallback: function (a, b, c) {
            null === b ? (delete this._categoryPostsolveCallbacks[a], delete this._categoryPostsolveCallbacksContext[a]) : ((this._categoryPostsolveCallbacks[a] = b), (this._categoryPostsolveCallbackContext[a] = c));
        },
        setCollisionCategory: function (a, b) {
            if (void 0 === b)
                for (var c = this.data.GetFixtureList(); c; c = c.GetNext()) {
                    c.GetFilterData().categoryBits = a;
                }
            else b.GetFilterData().categoryBits = a;
        },
        setCollisionMask: function (a, b) {
            if (void 0 === b)
                for (var c = this.data.GetFixtureList(); c; c = c.GetNext()) {
                    c.GetFilterData().maskBits = a;
                }
            else b.GetFilterData().maskBits = a;
        },
        applyForce: function (a, b) {
            this.data.ApplyForce(new box2d.b2Vec2(-a, -b), this.data.GetWorldCenter(), !0);
        },
        setZeroRotation: function () {
            this.data.SetAngularVelocity(0);
        },
        setZeroVelocity: function () {
            this.data.SetLinearVelocity(box2d.b2Vec2.ZERO);
        },
        setZeroDamping: function () {
            this.data.SetLinearDamping(0), this.data.SetAngularDamping(0);
        },
        toLocalPoint: function (a, b) {
            return (a.x = this.world.pxm(-b.x)), (a.y = this.world.pxm(-b.y)), this.data.GetLocalPoint(a, a), (a.x = this.world.mpx(-a.x)), (a.y = this.world.mpx(-a.y)), a;
        },
        toWorldPoint: function (a, b) {
            return (a.x = this.world.pxm(-b.x)), (a.y = this.world.pxm(-b.y)), this.data.GetWorldPoint(a, a), (a.x = this.world.mpx(-a.x)), (a.y = this.world.mpx(-a.y)), a;
        },
        toLocalVector: function (a, b) {
            return (a.x = this.world.pxm(-b.x)), (a.y = this.world.pxm(-b.y)), this.data.GetLocalVector(a, a), (a.x = this.world.mpx(-a.x)), (a.y = this.world.mpx(-a.y)), a;
        },
        toWorldVector: function (a, b) {
            (a.x = this.world.pxm(-b.x)), (a.y = this.world.pxm(-b.y)), this.data.GetWorldVector(a, a), (a.x = this.world.mpx(-a.x)), (a.y = this.world.mpx(-a.y));
        },
        rotateLeft: function (a) {
            this.data.SetAngularVelocity(this.world.pxm(-a));
        },
        rotateRight: function (a) {
            this.data.SetAngularVelocity(this.world.pxm(a));
        },
        moveForward: function (a) {
            var b = this.world.pxm(a),
                c = new box2d.b2Vec2();
            this.toWorldVector(c, { x: 0, y: b }), this.data.SetLinearVelocity(c);
        },
        moveBackward: function (a) {
            var b = this.world.pxm(-a),
                c = new box2d.b2Vec2();
            this.toWorldVector(c, { x: 0, y: b }), this.data.SetLinearVelocity(c);
        },
        thrust: function (a) {
            var b = this.world.pxm(a) * this.data.GetMass(),
                c = new box2d.b2Vec2();
            this.toWorldVector(c, { x: 0, y: b }), this.data.ApplyForce(c, this.data.GetWorldCenter(), !0);
        },
        reverse: function (a) {
            var b = -this.world.pxm(a) * this.data.GetMass(),
                c = new box2d.b2Vec2();
            this.toWorldVector(c, { x: 0, y: b }), this.data.ApplyForce(c, this.data.GetWorldCenter(), !0);
        },
        moveLeft: function (a) {
            this.velocity.x = -a;
        },
        moveRight: function (a) {
            this.velocity.x = a;
        },
        moveUp: function (a) {
            this.velocity.y = -a;
        },
        moveDown: function (a) {
            this.velocity.y = a;
        },
        preUpdate: function () {
            this.removeNextStep && (this.removeFromWorld(), (this.removeNextStep = !1));
        },
        postUpdate: function () {
            this.sprite && ((this.sprite.x = this.world.mpx(-this.data.GetPosition().x)), (this.sprite.y = this.world.mpx(-this.data.GetPosition().y)), (this.sprite.rotation = this.data.GetAngle()));
        },
        kill: function () {
            this.data.SetActive(!1);
        },
        reset: function (a, b) {
            this.data.SetPositionXY(this.world.pxm(-a), this.world.pxm(-b)), this.data.SetActive(!0);
        },
        removeFromWorld: function () {
            this.data.world === this.game.physics.box2d.world && this.game.physics.box2d.removeBodyNextStep(this);
        },
        destroy: function () {
            this.removeFromWorld(), (this._bodyCallbacks = {}), (this._bodyCallbackContext = {}), (this._categoryCallbacks = {}), (this._categoryCallbackContext = {}), (this.sprite = null);
        },
        clearFixtures: function () {
            for (var a = [], b = this.data.GetFixtureList(); b; b = b.GetNext()) a.push(b);
            for (var c = a.length; c--; ) this.data.DestroyFixture(a[c]);
        },
        addCircle: function (a, b, c) {
            var d = new box2d.b2CircleShape(this.world.pxm(a));
            d.m_p.SetXY(this.world.pxm(-b), this.world.pxm(-c));
            var e = new box2d.b2FixtureDef();
            (e.shape = d), (e.friction = this.world.friction), (e.restitution = this.world.restitution), (e.density = this.world.density);
            var f = this.data.CreateFixture(e);
            return (f.id = this.world.getNextFixtureId()), f;
        },
        addRectangle: function (a, b, c, d, e) {
            void 0 === a && (a = 16), void 0 === b && (b = 16), void 0 === c && (c = 0), void 0 === d && (d = 0), void 0 === e && (e = 0), (a = this.world.pxm(a)), (b = this.world.pxm(b));
            var f = new box2d.b2PolygonShape();
            f.SetAsOrientedBox(0.5 * a, 0.5 * b, new box2d.b2Vec2(this.world.pxm(-c), this.world.pxm(-d)), e);
            var g = new box2d.b2FixtureDef();
            (g.shape = f), (g.friction = this.world.friction), (g.restitution = this.world.restitution), (g.density = this.world.density);
            var h = this.data.CreateFixture(g);
            return (h.id = this.world.getNextFixtureId()), h;
        },
        addEdge: function (a, b, c, d) {
            var e = new box2d.b2EdgeShape();
            e.Set(new box2d.b2Vec2(this.world.pxm(-a), this.world.pxm(-b)), new box2d.b2Vec2(this.world.pxm(-c), this.world.pxm(-d)));
            var f = new box2d.b2FixtureDef();
            (f.shape = e), (f.friction = this.world.friction), (f.restitution = this.world.restitution), (f.density = this.world.density);
            var g = this.data.CreateFixture(f);
            return (g.id = this.world.getNextFixtureId()), g;
        },
        addChain: function (a, b, c, d) {
            if (void 0 === a) return null;
            if (a.length < 4) return null;
            void 0 === b && (b = 0), void 0 === c && (c = (a.length - b) / 2);
            for (var e = [], f = b; f < b + c; f++) e.push(new box2d.b2Vec2(this.world.pxm(-a[2 * f]), this.world.pxm(-a[2 * f + 1])));
            var g = new box2d.b2ChainShape();
            d ? g.CreateLoop(e, e.length) : g.CreateChain(e, e.length);
            var h = new box2d.b2FixtureDef();
            (h.shape = g), (h.friction = this.world.friction), (h.restitution = this.world.restitution), (h.density = this.world.density);
            var i = this.data.CreateFixture(h);
            return (i.id = this.world.getNextFixtureId()), i;
        },
        addLoop: function (a, b, c) {
            return this.addChain(a, b, c, !0);
        },
        addPolygon: function (a, b, c) {
            if (void 0 === a) return null;
            if (a.length < 6) return null;
            void 0 === b && (b = 0), void 0 === c && (c = (a.length - b) / 2);
            for (var d = [], e = b; e < b + c; e++) d.push({ x: this.world.pxm(-a[2 * e]), y: this.world.pxm(-a[2 * e + 1]) });
            var f = new Phaser.Physics.Box2D.Polygon();
            f.setFromXYObjects(d);
            var g = f.decompose(d),
                h = null;
            for (e = 0; e < g.length; e++) {
                var i = new box2d.b2PolygonShape();
                i.Set(g[e], g[e].length);
                var j = new box2d.b2FixtureDef();
                (j.shape = i), (j.friction = this.world.friction), (j.restitution = this.world.restitution), (j.density = this.world.density), ((h = this.data.CreateFixture(j)).id = this.world.getNextFixtureId());
            }
            return h;
        },
        removeFixture: function (a) {
            return a.GetBody() == this.data && (this.data.DestroyFixture(a), !0);
        },
        setCircle: function (a, b, c) {
            return void 0 === a && (a = 32), void 0 === b && (b = 0), void 0 === c && (c = 0), this.clearFixtures(), this.addCircle(a, b, c);
        },
        setRectangle: function (a, b, c, d, e) {
            return this.clearFixtures(), this.addRectangle(a, b, c, d, e);
        },
        setRectangleFromSprite: function (a) {
            return void 0 === a && (a = this.sprite), this.clearFixtures(), this.addRectangle(a.width, a.height, 0, 0, a.rotation);
        },
        setEdge: function (a, b, c, d) {
            return void 0 === a && (a = 0), void 0 === b && (b = 0), void 0 === c && (c = 0), void 0 === d && (d = 0), this.clearFixtures(), this.addEdge(a, b, c, d);
        },
        setChain: function (a, b, c, d) {
            return void 0 === a ? null : a.length < 4 ? null : (void 0 === b && (b = 0), void 0 === c && (c = (a.length - b) / 2), this.clearFixtures(), this.addChain(a, b, c, d));
        },
        setLoop: function (a, b, c) {
            return this.setChain(a, b, c, !0);
        },
        setPolygon: function (a, b, c) {
            return void 0 === a ? null : a.length < 4 ? null : (void 0 === b && (b = 0), void 0 === c && (c = (a.length - b) / 2), this.clearFixtures(), this.addPolygon(a, b, c));
        },
        loadPolygon: function (a, b, c) {
            void 0 === c && (c = null);
            for (var d = this.game.cache.getPhysicsData(a, b), e = 0; e < d.length; e++) {
                for (var f = [], g = 0; g < d[e].shape.length; g += 2) f.push(new box2d.b2Vec2(this.world.pxm(-d[e].shape[g]), this.world.pxm(-d[e].shape[g + 1])));
                if (c) for (var h = this.world.pxm(-0.5 * c.width), i = this.world.pxm(-0.5 * c.height), j = 0; j < f.length; j++) (f[j].x -= h), (f[j].y -= i);
                var k = new box2d.b2PolygonShape();
                k.Set(f, f.length);
                var l = new box2d.b2FixtureDef();
                (l.shape = k),
                    (l.friction = d[e].friction),
                    (l.restitution = d[e].bounce),
                    (l.density = d[e].density),
                    (l.filter.categoryBits = d[e].filter.categoryBits),
                    (l.filter.maskBits = d[e].filter.maskBits),
                    (this.data.CreateFixture(l).id = this.world.getNextFixtureId());
            }
            return !0;
        },
        containsPoint: function (a) {
            for (var b = this.world.pxm(-a.x), c = this.world.pxm(-a.y), d = new box2d.b2Vec2(b, c), e = this.data.GetFixtureList(); e; e = e.GetNext()) if (e.TestPoint(d)) return !0;
            return !1;
        },
    }),
    (Phaser.Physics.Box2D.Body.prototype.constructor = Phaser.Physics.Box2D.Body),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "static", {
        get: function () {
            return this.data.GetType() === box2d.b2BodyType.b2_staticBody;
        },
        set: function (a) {
            a && this.data.GetType() !== box2d.b2BodyType.b2_staticBody ? this.data.SetType(box2d.b2BodyType.b2_staticBody) : a || this.data.GetType() !== box2d.b2BodyType.b2_staticBody || this.data.SetType(box2d.b2BodyType.b2_dynamicBody);
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "dynamic", {
        get: function () {
            return this.data.GetType() === box2d.b2BodyType.b2_dynamicBody;
        },
        set: function (a) {
            a && this.data.GetType() !== box2d.b2BodyType.b2_dynamicBody
                ? this.data.SetType(box2d.b2BodyType.b2_dynamicBody)
                : a || this.data.GetType() !== box2d.b2BodyType.b2_dynamicBody || this.data.SetType(box2d.b2BodyType.b2_staticBody);
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "kinematic", {
        get: function () {
            return this.data.GetType() === box2d.b2BodyType.b2_kinematicBody;
        },
        set: function (a) {
            a && this.data.GetType() !== box2d.b2BodyType.b2_kinematicBody
                ? this.data.SetType(box2d.b2BodyType.b2_kinematicBody)
                : a || this.data.GetType() !== box2d.b2BodyType.b2_kinematicBody || this.data.SetType(box2d.b2BodyType.b2_staticBody);
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "angle", {
        get: function () {
            return Phaser.Math.wrapAngle(Phaser.Math.radToDeg(this.data.GetAngle()));
        },
        set: function (a) {
            this.data.SetAngle(Phaser.Math.degToRad(Phaser.Math.wrapAngle(a)));
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "linearDamping", {
        get: function () {
            return this.data.GetLinearDamping();
        },
        set: function (a) {
            this.data.SetLinearDamping(a);
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "angularDamping", {
        get: function () {
            return this.data.GetAngularDamping();
        },
        set: function (a) {
            this.data.SetAngularDamping(a);
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "angularVelocity", {
        get: function () {
            return this.data.GetAngularVelocity();
        },
        set: function (a) {
            this.data.SetAngularVelocity(a);
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "fixedRotation", {
        get: function () {
            return this.data.IsFixedRotation();
        },
        set: function (a) {
            this.data.SetFixedRotation(a);
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "gravityScale", {
        get: function () {
            return this.data.GetGravityScale();
        },
        set: function (a) {
            this.data.SetGravityScale(a);
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "friction", {
        get: function () {
            var a = this.data.GetFixtureList();
            return a ? a.GetFriction() : 0;
        },
        set: function (a) {
            for (var b = this.data.GetFixtureList(); b; b = b.GetNext()) b.SetFriction(a), b.Refilter();
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "restitution", {
        get: function () {
            var a = this.data.GetFixtureList();
            return a ? a.GetRestitution() : 0;
        },
        set: function (a) {
            for (var b = this.data.GetFixtureList(); b; b = b.GetNext()) b.SetRestitution(a), b.Refilter();
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "sensor", {
        get: function () {
            var a = this.data.GetFixtureList();
            return a ? a.IsSensor() : 0;
        },
        set: function (a) {
            for (var b = this.data.GetFixtureList(); b; b = b.GetNext()) b.SetSensor(a), b.Refilter();
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "bullet", {
        get: function () {
            return this.data.IsBullet();
        },
        set: function (a) {
            this.data.SetBullet(a);
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "mass", {
        get: function () {
            return this.data.GetMass();
        },
        set: function (a) {
            if (0 === a) this.data.SetType(box2d.b2BodyType.b2_staticBody);
            else {
                this.data.GetType() !== box2d.b2BodyType.b2_dynamicBody && this.data.SetType(box2d.b2BodyType.b2_dynamicBody);
                for (var c = a / this.data.GetMass(), d = this.data.GetFixtureList(); d; d = d.GetNext()) {
                    var e = d.GetDensity();
                    d.SetDensity(e * c);
                }
                this.data.ResetMassData();
            }
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "rotation", {
        get: function () {
            return this.data.GetAngle();
        },
        set: function (a) {
            this.data.SetAngle(a);
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "x", {
        get: function () {
            return this.world.mpx(-this.data.GetPosition().x);
        },
        set: function (a) {
            this.data.SetPositionXY(this.world.pxm(-a), this.data.GetPosition().y);
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "y", {
        get: function () {
            return this.world.mpx(-this.data.GetPosition().y);
        },
        set: function (a) {
            this.data.SetPositionXY(this.data.GetPosition().x, this.world.pxm(-a));
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.Body.prototype, "collideWorldBounds", {
        get: function () {
            for (var a = this.data.GetFixtureList(); a; a = a.GetNext()) {
                if (a.GetFilterData().maskBits & Phaser.Physics.Box2D.worldBoundsFilterCategory) return !0;
            }
            return !1;
        },
        set: function (a) {
            for (var b = this.data.GetFixtureList(); b; b = b.GetNext()) {
                var c = b.GetFilterData();
                a ? (c.maskBits |= Phaser.Physics.Box2D.worldBoundsFilterCategory) : (c.maskBits &= ~Phaser.Physics.Box2D.worldBoundsFilterCategory);
            }
        },
    }),
    (Phaser.Physics.Box2D.PointProxy = function (a, b, c, d) {
        (this.world = a), (this.object = b), (this.gettor = c), (this.settor = d);
    }),
    (Phaser.Physics.Box2D.PointProxy.prototype.constructor = Phaser.Physics.Box2D.PointProxy),
    Object.defineProperty(Phaser.Physics.Box2D.PointProxy.prototype, "x", {
        get: function () {
            return this.world.mpx(-this.gettor.call(this.object).x);
        },
        set: function (a) {
            var b = this.gettor.call(this.object);
            (b.x = this.world.pxm(-a)), this.settor.call(this.object, b);
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.PointProxy.prototype, "y", {
        get: function () {
            return this.world.mpx(-this.gettor.call(this.object).y);
        },
        set: function (a) {
            var b = this.gettor.call(this.object);
            (b.y = this.world.pxm(-a)), this.settor.call(this.object, b);
        },
    }),
    (Phaser.Physics.Box2D.DefaultDebugDraw = function (a) {
        (this.context = null), (this.pixelsPerMeter = a), (this.flags = box2d.b2DrawFlags.e_shapeBit);
    }),
    (Phaser.Physics.Box2D.DefaultDebugDraw.prototype.color = new box2d.b2Color(1, 1, 1)),
    (Phaser.Physics.Box2D.DefaultDebugDraw.prototype.SetFlags = function (a) {
        this.flags = a;
    }),
    (Phaser.Physics.Box2D.DefaultDebugDraw.prototype.GetFlags = function () {
        return this.flags;
    }),
    (Phaser.Physics.Box2D.DefaultDebugDraw.prototype.start = function (a) {
        (this.context = a), this.context.save(), this.context.scale(-1, -1), this.context.scale(this.pixelsPerMeter, this.pixelsPerMeter);
    }),
    (Phaser.Physics.Box2D.DefaultDebugDraw.prototype.stop = function () {
        this.context.restore();
    }),
    (Phaser.Physics.Box2D.DefaultDebugDraw.prototype.PushTransform = function (a) {
        var b = this.context;
        b.save(), b.translate(a.p.x, a.p.y), b.rotate(a.q.GetAngleRadians());
    }),
    (Phaser.Physics.Box2D.DefaultDebugDraw.prototype.PopTransform = function () {
        this.context.restore();
    }),
    (Phaser.Physics.Box2D.DefaultDebugDraw.prototype.DrawPolygon = function (a, b, c) {
        if (b) {
            var d = this.context;
            (d.lineWidth = 1 / this.pixelsPerMeter), d.beginPath(), d.moveTo(a[0].x, a[0].y);
            for (var e = 1; e < b; e++) d.lineTo(a[e].x, a[e].y);
            d.closePath(), (d.strokeStyle = c.MakeStyleString(1)), d.stroke();
        }
    }),
    (Phaser.Physics.Box2D.DefaultDebugDraw.prototype.DrawSolidPolygon = function (a, b, c) {
        if (b) {
            var d = this.context;
            (d.lineWidth = 1 / this.pixelsPerMeter), d.beginPath(), d.moveTo(a[0].x, a[0].y);
            for (var e = 1; e < b; e++) d.lineTo(a[e].x, a[e].y);
            d.closePath(), (d.fillStyle = c.MakeStyleString(0.5)), d.fill(), (d.strokeStyle = c.MakeStyleString(1)), d.stroke();
        }
    }),
    (Phaser.Physics.Box2D.DefaultDebugDraw.prototype.DrawCircle = function (a, b, c) {
        if (b) {
            var d = this.context;
            d.beginPath(), d.arc(a.x, a.y, b, 0, 2 * Math.PI, !0), (d.strokeStyle = c.MakeStyleString(1)), d.stroke();
        }
    }),
    (Phaser.Physics.Box2D.DefaultDebugDraw.prototype.DrawSolidCircle = function (a, b, c, d) {
        if (b) {
            var e = this.context;
            e.lineWidth = 1 / this.pixelsPerMeter;
            var f = a.x,
                g = a.y;
            e.beginPath(), e.arc(f, g, b, 0, 2 * Math.PI, !0), e.moveTo(f, g), e.lineTo(f + c.x * b, g + c.y * b), (e.fillStyle = d.MakeStyleString(0.5)), e.fill(), (e.strokeStyle = d.MakeStyleString(1)), e.stroke();
        }
    }),
    (Phaser.Physics.Box2D.DefaultDebugDraw.prototype.DrawSegment = function (a, b, c) {
        var d = this.context;
        (d.lineWidth = 1 / this.pixelsPerMeter), d.beginPath(), d.moveTo(a.x, a.y), d.lineTo(b.x, b.y), (d.strokeStyle = c.MakeStyleString(1)), d.stroke();
    }),
    (Phaser.Physics.Box2D.DefaultDebugDraw.prototype.DrawTransform = function (a) {
        var b = this.context;
        (b.lineWidth = 1 / this.pixelsPerMeter),
            this.PushTransform(a),
            b.beginPath(),
            b.moveTo(0, 0),
            b.lineTo(1, 0),
            (b.strokeStyle = box2d.b2Color.RED.MakeStyleString(1)),
            b.stroke(),
            b.beginPath(),
            b.moveTo(0, 0),
            b.lineTo(0, 1),
            (b.strokeStyle = box2d.b2Color.GREEN.MakeStyleString(1)),
            b.stroke(),
            this.PopTransform(a);
    }),
    (Phaser.Physics.Box2D.DefaultDebugDraw.prototype.DrawPoint = function (a, b, c) {
        var d = this.context;
        d.fillStyle = c.MakeStyleString();
        var e = b / 2;
        d.fillRect(a.x - e, a.y - e, b, b);
    }),
    (Phaser.Physics.Box2D.DefaultDebugDraw.prototype.DrawAABB = function (a, b) {
        var c = this.context;
        c.strokeStyle = b.MakeStyleString();
        var d = a.lowerBound.x,
            e = a.lowerBound.y,
            f = a.upperBound.x - a.lowerBound.x,
            g = a.upperBound.y - a.lowerBound.y;
        c.strokeRect(d, e, f, g);
    }),
    Object.defineProperty(Phaser.Physics.Box2D.DefaultDebugDraw.prototype, "shapes", {
        get: function () {
            return this.flags & box2d.b2DrawFlags.e_shapeBit;
        },
        set: function (a) {
            a ? (this.flags |= box2d.b2DrawFlags.e_shapeBit) : (this.flags &= ~box2d.b2DrawFlags.e_shapeBit);
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.DefaultDebugDraw.prototype, "joints", {
        get: function () {
            return this.flags & box2d.b2DrawFlags.e_jointBit;
        },
        set: function (a) {
            a ? (this.flags |= box2d.b2DrawFlags.e_jointBit) : (this.flags &= ~box2d.b2DrawFlags.e_jointBit);
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.DefaultDebugDraw.prototype, "aabbs", {
        get: function () {
            return this.flags & box2d.b2DrawFlags.e_aabbBit;
        },
        set: function (a) {
            a ? (this.flags |= box2d.b2DrawFlags.e_aabbBit) : (this.flags &= ~box2d.b2DrawFlags.e_aabbBit);
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.DefaultDebugDraw.prototype, "pairs", {
        get: function () {
            return this.flags & box2d.b2DrawFlags.e_pairBit;
        },
        set: function (a) {
            a ? (this.flags |= box2d.b2DrawFlags.e_pairBit) : (this.flags &= ~box2d.b2DrawFlags.e_pairBit);
        },
    }),
    Object.defineProperty(Phaser.Physics.Box2D.DefaultDebugDraw.prototype, "centerOfMass", {
        get: function () {
            return this.flags & box2d.b2DrawFlags.e_centerOfMassBit;
        },
        set: function (a) {
            a ? (this.flags |= box2d.b2DrawFlags.e_centerOfMassBit) : (this.flags &= ~box2d.b2DrawFlags.e_centerOfMassBit);
        },
    }),
    (Phaser.Physics.Box2D.DefaultContactListener = function () {}),
    (Phaser.Physics.Box2D.DefaultContactListener.prototype.BeginContact = function (a) {
        this.handleContactBeginOrEnd(a, !0);
    }),
    (Phaser.Physics.Box2D.DefaultContactListener.prototype.EndContact = function (a) {
        this.handleContactBeginOrEnd(a, !1);
    }),
    (Phaser.Physics.Box2D.DefaultContactListener.prototype.handleContactBeginOrEnd = function (a, b) {
        var c = a.GetFixtureA(),
            d = a.GetFixtureB(),
            e = c.GetBody(),
            f = d.GetBody(),
            g = c.GetFilterData().categoryBits,
            h = d.GetFilterData().categoryBits,
            i = e.parent,
            j = f.parent;
        if (void 0 !== i && void 0 !== j) {
            var k = i.id,
                l = j.id;
            i._bodyContactCallbacks[l] && i._bodyContactCallbacks[l].call(i._bodyContactCallbackContext[l], i, j, c, d, b, a),
                j._bodyContactCallbacks[k] && j._bodyContactCallbacks[k].call(j._bodyContactCallbackContext[k], j, i, d, c, b, a),
                i._fixtureContactCallbacks[d.id] && i._fixtureContactCallbacks[d.id].call(i._fixtureContactCallbackContext[d.id], i, j, c, d, b, a),
                j._fixtureContactCallbacks[c.id] && j._fixtureContactCallbacks[c.id].call(j._fixtureContactCallbackContext[c.id], j, i, d, c, b, a),
                i._fixtureContactCallbacks[c.id] && i._fixtureContactCallbacks[c.id].call(i._fixtureContactCallbackContext[c.id], i, j, c, d, b, a),
                j._fixtureContactCallbacks[d.id] && j._fixtureContactCallbacks[d.id].call(j._fixtureContactCallbackContext[d.id], j, i, d, c, b, a),
                i._categoryContactCallbacks[h] && i._categoryContactCallbacks[h].call(i._categoryContactCallbackContext[h], i, j, c, d, b, a),
                j._categoryContactCallbacks[g] && j._categoryContactCallbacks[g].call(j._categoryContactCallbackContext[g], j, i, d, c, b, a),
                i._categoryContactCallbacks[g] && i._categoryContactCallbacks[g].call(i._categoryContactCallbackContext[g], i, j, c, d, b, a),
                j._categoryContactCallbacks[h] && j._categoryContactCallbacks[h].call(j._categoryContactCallbackContext[h], j, i, d, c, b, a);
        }
    }),
    (Phaser.Physics.Box2D.DefaultContactListener.prototype.PreSolve = function (a, b) {
        var c = a.GetFixtureA(),
            d = a.GetFixtureB(),
            e = c.GetBody(),
            f = d.GetBody(),
            g = c.GetFilterData().categoryBits,
            h = d.GetFilterData().categoryBits,
            i = e.parent,
            j = f.parent;
        if (void 0 !== i && void 0 !== j) {
            var k = i.id,
                l = j.id;
            i._bodyPresolveCallbacks[l] && i._bodyPresolveCallbacks[l].call(i._bodyPresolveCallbackContext[l], i, j, c, d, a, b),
                j._bodyPresolveCallbacks[k] && j._bodyPresolveCallbacks[k].call(j._bodyPresolveCallbackContext[k], j, i, d, c, a, b),
                i._fixturePresolveCallbacks[d.id] && i._fixturePresolveCallbacks[d.id].call(i._fixturePresolveCallbackContext[d.id], i, j, c, d, a, b),
                j._fixturePresolveCallbacks[c.id] && j._fixturePresolveCallbacks[c.id].call(j._fixturePresolveCallbackContext[c.id], j, i, d, c, a, b),
                i._categoryPresolveCallbacks[h] && i._categoryPresolveCallbacks[h].call(i._categoryPresolveCallbackContext[h], i, j, c, d, a, b),
                j._categoryPresolveCallbacks[g] && j._categoryPresolveCallbacks[g].call(j._categoryPresolveCallbackContext[g], j, i, d, c, a, b);
        }
    }),
    (Phaser.Physics.Box2D.DefaultContactListener.prototype.PostSolve = function (a, b) {
        var c = a.GetFixtureA(),
            d = a.GetFixtureB(),
            e = c.GetBody(),
            f = d.GetBody(),
            g = c.GetFilterData().categoryBits,
            h = d.GetFilterData().categoryBits,
            i = e.parent,
            j = f.parent;
        if (void 0 !== i && void 0 !== j) {
            var k = i.id,
                l = j.id;
            i._bodyPostsolveCallbacks[l] && i._bodyPostsolveCallbacks[l].call(i._bodyPostsolveCallbackContext[l], i, j, c, d, a, b),
                j._bodyPostsolveCallbacks[k] && j._bodyPostsolveCallbacks[k].call(j._bodyPostsolveCallbackContext[k], j, i, d, c, a, b),
                i._fixturePostsolveCallbacks[d.id] && i._fixturePostsolveCallbacks[d.id].call(i._fixturePostsolveCallbackContext[d.id], i, j, c, d, a, b),
                j._fixturePostsolveCallbacks[c.id] && j._fixturePostsolveCallbacks[c.id].call(j._fixturePostsolveCallbackContext[c.id], j, i, d, c, a, b),
                i._categoryPostsolveCallbacks[h] && i._categoryPostsolveCallbacks[h].call(i._categoryPostsolveCallbackContext[h], i, j, c, d, a, b),
                j._categoryPostsolveCallbacks[g] && j._categoryPostsolveCallbacks[g].call(j._categoryPostsolveCallbackContext[g], j, i, d, c, a, b);
        }
    }),
    (Phaser.Physics.Box2D.Polygon = function () {
        this.vertices = [];
    }),
    (Phaser.Physics.Box2D.Polygon.prototype.setFromFlatXYCoords = function (a) {
        this.vertices = [];
        for (var b = 0; b < a.length / 2; b++) this.vertices.push({ x: a[2 * b], y: a[2 * b + 1] });
    }),
    (Phaser.Physics.Box2D.Polygon.prototype.setFromXYObjects = function (a) {
        this.vertices = a.concat();
    }),
    (Phaser.Physics.Box2D.Polygon.prototype.addVertex = function (a) {
        this.vertices.push(a);
    }),
    (Phaser.Physics.Box2D.Polygon.prototype.at = function (a) {
        var b = this.vertices.length;
        return this.vertices[a < 0 ? (a % b) + b : a % b];
    }),
    (Phaser.Physics.Box2D.Polygon.prototype.indicesAreAdjacent = function (a, b) {
        if ((a %= this.vertices.length) == (b %= this.vertices.length)) return !0;
        var c = Math.abs(a - b);
        return c < 2 || c == this.vertices.length - 1;
    }),
    (Phaser.Physics.Box2D.Polygon.prototype.areaInTriangle = function (a, b, c) {
        return (a = this.at(a)), (b = this.at(b)), (c = this.at(c)), 0.5 * ((b.x - a.x) * (c.y - a.y) - (c.x - a.x) * (b.y - a.y));
    }),
    (Phaser.Physics.Box2D.Polygon.prototype.left = function (a, b, c) {
        return 0 < this.areaInTriangle(a, b, c);
    }),
    (Phaser.Physics.Box2D.Polygon.prototype.leftOn = function (a, b, c) {
        return 0 <= this.areaInTriangle(a, b, c);
    }),
    (Phaser.Physics.Box2D.Polygon.prototype.right = function (a, b, c) {
        return this.areaInTriangle(a, b, c) < 0;
    }),
    (Phaser.Physics.Box2D.Polygon.prototype.rightOn = function (a, b, c) {
        return this.areaInTriangle(a, b, c) <= 0;
    }),
    (Phaser.Physics.Box2D.Polygon.sqdist = function (a, b) {
        var c = b.x - a.x,
            d = b.y - a.y;
        return c * c + d * d;
    }),
    (Phaser.Physics.Box2D.Polygon.prototype.makeCCW = function () {
        for (var a = 0, b = 1, c = this.vertices.length; b < c; b++) (this.at(b).y < this.at(a).y || (this.at(b).y === this.at(a).y && this.at(b).x > this.at(a).x)) && (a = b);
        return !this.left(a - 1, a, a + 1) && (this.vertices.reverse(), !0);
    }),
    (Phaser.Physics.Box2D.Polygon.prototype.isConvex = function () {
        for (var a = !1, b = !1, c = 0, d = this.vertices.length; c < d; c++) {
            var e = c,
                f = (c + 1) % d,
                g = (c + 2) % d;
            0 < this.areaInTriangle(this.vertices[e], this.vertices[f], this.vertices[g]) ? (a = !0) : (b = !0);
        }
        return b ^ a;
    }),
    (Phaser.Physics.Box2D.Polygon.prototype.isReflex = function (a) {
        return this.right(a - 1, a, a + 1);
    }),
    (Phaser.Physics.Box2D.Polygon.areVecsEqual = function (a, b) {
        return a.x == b.x && a.y == b.y;
    }),
    (Phaser.Physics.Box2D.Polygon.linesCross = function (a, b, c, d) {
        if (Phaser.Physics.Box2D.Polygon.areVecsEqual(b, c) || Phaser.Physics.Box2D.Polygon.areVecsEqual(a, c) || Phaser.Physics.Box2D.Polygon.areVecsEqual(b, d) || Phaser.Physics.Box2D.Polygon.areVecsEqual(a, d)) return null;
        var e = {};
        box2d.b2SubVV(b, a, e), box2d.b2CrossVS(e, 1, e);
        var f = box2d.b2DotVV(e, a),
            g = box2d.b2DotVV(e, c),
            h = box2d.b2DotVV(e, d);
        if (f < g && f < h) return null;
        if (g < f && h < f) return null;
        var i = {};
        box2d.b2SubVV(d, c, i), box2d.b2CrossVS(i, 1, i);
        (g = box2d.b2DotVV(i, c)), (f = box2d.b2DotVV(i, a));
        var j = box2d.b2DotVV(i, b);
        if (g < f && g < j) return null;
        if (f < g && j < g) return null;
        var k = (g - f) / (j - f);
        return { x: a.x + k * (b.x - a.x), y: a.y + k * (b.y - a.y) };
    }),
    (Phaser.Physics.Box2D.Polygon.prototype.canSee = function (a, b) {
        if (this.indicesAreAdjacent(a, b)) return !1;
        if (this.leftOn(a + 1, a, b) && this.rightOn(a - 1, a, b)) return !1;
        for (var c = 0; c < this.vertices.length; ++c)
            if ((c + 1) % this.vertices.length != a && c != a && this.leftOn(a, b, c + 1) && this.rightOn(a, b, c) && Phaser.Physics.Box2D.Polygon.linesCross(this.at(a), this.at(b), this.at(c), this.at(c + 1))) return !1;
        return !0;
    }),
    (Phaser.Physics.Box2D.Polygon.prototype.subPolygon = function (a, b) {
        var c = new Phaser.Physics.Box2D.Polygon();
        if (a < b) for (var d = a; d < b + 1; d++) c.addVertex(this.at(d));
        else {
            for (d = a; d < this.vertices.length; d++) c.addVertex(this.at(d));
            for (d = 0; d < b + 1; d++) c.addVertex(this.at(d));
        }
        return c;
    }),
    (Phaser.Physics.Box2D.Polygon.prototype.decomposeOptimal = function (a) {
        if ((void 0 === a && (a = 0), 1 < a)) return this.vertices;
        this.makeCCW();
        for (var b = [], c = [], d = [], e = Number.MAX_VALUE, f = 0; f < this.vertices.length; f++)
            if (this.isReflex(f))
                for (var g = 0; g < this.vertices.length; g++) this.canSee(f, g) && ((c = this.subPolygon(f, g).decompose(a + 1)), (d = this.subPolygon(g, f).decompose(a + 1)), c.length + d.length < e && (e = (b = c.concat(d)).length));
        return 0 === b.length && b.push(this.vertices), b;
    }),
    (Phaser.Physics.Box2D.Polygon.prototype.decompose = function (a) {
        void 0 === a && (a = 0), this.makeCCW();
        for (var b, c, d = [], e = Number.MAX_VALUE, f = !1, g = 0; g < this.vertices.length; g++)
            if (this.isReflex(g)) {
                f = !0;
                for (var h = this.at(g), i = 0; i < this.vertices.length; i++)
                    if (this.canSee(g, i)) {
                        var j = this.at(i),
                            k = j.x - h.x,
                            l = j.y - h.y,
                            m = k * k * l * l;
                        m < e && ((b = g), (c = i), (e = m));
                    }
            }
        if ((!f && 8 < this.vertices.length && ((b = 0), (c = Math.floor(this.vertices.length / 2)), (f = !0)), f)) {
            var n = this.subPolygon(b, c).decompose(a + 1),
                o = this.subPolygon(c, b).decompose(a + 1);
            d = n.concat(o);
        }
        return 0 === d.length && d.push(this.vertices), d;
    });
!(function (global, factory) {
    "object" == typeof exports && "undefined" != typeof module ? factory(exports) : "function" == typeof define && define.amd ? define(["exports"], factory) : factory((global.h5branding = global.h5branding || {}));
})(this, function (exports) {
    "use strict";
    var commonjsGlobal = "undefined" != typeof globalThis ? globalThis : "undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : {};
    function commonjsRequire() {
        throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs");
    }
    function createCommonjsModule(fn, module) {
        return fn((module = { exports: {} }), module.exports), module.exports;
    }
    var BrandingDomain, list;
    createCommonjsModule(function (module, exports) {
        module.exports = (function () {
            function isFunction(x) {
                return "function" == typeof x;
            }
            var isArray = Array.isArray
                    ? Array.isArray
                    : function (x) {
                          return "[object Array]" === Object.prototype.toString.call(x);
                      },
                len = 0,
                vertxNext = void 0,
                customSchedulerFn = void 0,
                asap = function (callback, arg) {
                    (queue[len] = callback), (queue[len + 1] = arg), 2 === (len += 2) && (customSchedulerFn ? customSchedulerFn(flush) : scheduleFlush());
                },
                browserWindow = "undefined" != typeof window ? window : void 0,
                browserGlobal = browserWindow || {},
                BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver,
                isNode = "undefined" == typeof self && "undefined" != typeof process && "[object process]" === {}.toString.call(process),
                isWorker = "undefined" != typeof Uint8ClampedArray && "undefined" != typeof importScripts && "undefined" != typeof MessageChannel;
            function useSetTimeout() {
                var globalSetTimeout = setTimeout;
                return function () {
                    return globalSetTimeout(flush, 1);
                };
            }
            var queue = new Array(1e3);
            function flush() {
                for (var i = 0; i < len; i += 2) {
                    var callback = queue[i],
                        arg = queue[i + 1];
                    callback(arg), (queue[i] = void 0), (queue[i + 1] = void 0);
                }
                len = 0;
            }
            var channel,
                iterations,
                observer,
                node,
                scheduleFlush = void 0;
            function then(onFulfillment, onRejection) {
                var parent = this,
                    child = new this.constructor(noop);
                void 0 === child[PROMISE_ID] && makePromise(child);
                var _state = parent._state;
                if (_state) {
                    var callback = arguments[_state - 1];
                    asap(function () {
                        return invokeCallback(_state, child, callback, parent._result);
                    });
                } else subscribe(parent, child, onFulfillment, onRejection);
                return child;
            }
            function resolve$1(object) {
                if (object && "object" == typeof object && object.constructor === this) return object;
                var promise = new this(noop);
                return resolve(promise, object), promise;
            }
            scheduleFlush = isNode
                ? function () {
                      return process.nextTick(flush);
                  }
                : BrowserMutationObserver
                ? ((iterations = 0),
                  (observer = new BrowserMutationObserver(flush)),
                  (node = document.createTextNode("")),
                  observer.observe(node, { characterData: !0 }),
                  function () {
                      node.data = iterations = ++iterations % 2;
                  })
                : isWorker
                ? (((channel = new MessageChannel()).port1.onmessage = flush),
                  function () {
                      return channel.port2.postMessage(0);
                  })
                : void 0 === browserWindow
                ? (function () {
                      try {
                          var vertx = Function("return this")().require("vertx");
                          return void 0 === (vertxNext = vertx.runOnLoop || vertx.runOnContext)
                              ? useSetTimeout()
                              : function () {
                                    vertxNext(flush);
                                };
                      } catch (e) {
                          return useSetTimeout();
                      }
                  })()
                : useSetTimeout();
            var PROMISE_ID = Math.random().toString(36).substring(2);
            function noop() {}
            var PENDING = void 0,
                FULFILLED = 1,
                REJECTED = 2;
            function tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {
                try {
                    then$$1.call(value, fulfillmentHandler, rejectionHandler);
                } catch (e) {
                    return e;
                }
            }
            function handleMaybeThenable(promise, maybeThenable, then$$1) {
                maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1
                    ? (function (promise, thenable) {
                          thenable._state === FULFILLED
                              ? fulfill(promise, thenable._result)
                              : thenable._state === REJECTED
                              ? reject(promise, thenable._result)
                              : subscribe(
                                    thenable,
                                    void 0,
                                    function (value) {
                                        return resolve(promise, value);
                                    },
                                    function (reason) {
                                        return reject(promise, reason);
                                    }
                                );
                      })(promise, maybeThenable)
                    : void 0 === then$$1
                    ? fulfill(promise, maybeThenable)
                    : isFunction(then$$1)
                    ? (function (promise, thenable, then$$1) {
                          asap(function (promise) {
                              var sealed = !1,
                                  error = tryThen(
                                      then$$1,
                                      thenable,
                                      function (value) {
                                          sealed || ((sealed = !0), thenable !== value ? resolve(promise, value) : fulfill(promise, value));
                                      },
                                      function (reason) {
                                          sealed || ((sealed = !0), reject(promise, reason));
                                      },
                                      promise._label
                                  );
                              !sealed && error && ((sealed = !0), reject(promise, error));
                          }, promise);
                      })(promise, maybeThenable, then$$1)
                    : fulfill(promise, maybeThenable);
            }
            function resolve(promise, value) {
                if (promise === value) reject(promise, new TypeError("You cannot resolve a promise with itself"));
                else if (((type = typeof (x = value)), null === x || ("object" !== type && "function" !== type))) fulfill(promise, value);
                else {
                    var then$$1 = void 0;
                    try {
                        then$$1 = value.then;
                    } catch (error) {
                        return void reject(promise, error);
                    }
                    handleMaybeThenable(promise, value, then$$1);
                }
                var x, type;
            }
            function publishRejection(promise) {
                promise._onerror && promise._onerror(promise._result), publish(promise);
            }
            function fulfill(promise, value) {
                promise._state === PENDING && ((promise._result = value), (promise._state = FULFILLED), 0 !== promise._subscribers.length && asap(publish, promise));
            }
            function reject(promise, reason) {
                promise._state === PENDING && ((promise._state = REJECTED), (promise._result = reason), asap(publishRejection, promise));
            }
            function subscribe(parent, child, onFulfillment, onRejection) {
                var _subscribers = parent._subscribers,
                    length = _subscribers.length;
                (parent._onerror = null), (_subscribers[length] = child), (_subscribers[length + FULFILLED] = onFulfillment), (_subscribers[length + REJECTED] = onRejection), 0 === length && parent._state && asap(publish, parent);
            }
            function publish(promise) {
                var subscribers = promise._subscribers,
                    settled = promise._state;
                if (0 !== subscribers.length) {
                    for (var child = void 0, callback = void 0, detail = promise._result, i = 0; i < subscribers.length; i += 3)
                        (child = subscribers[i]), (callback = subscribers[i + settled]), child ? invokeCallback(settled, child, callback, detail) : callback(detail);
                    promise._subscribers.length = 0;
                }
            }
            function invokeCallback(settled, promise, callback, detail) {
                var hasCallback = isFunction(callback),
                    value = void 0,
                    error = void 0,
                    succeeded = !0;
                if (hasCallback) {
                    try {
                        value = callback(detail);
                    } catch (e) {
                        (succeeded = !1), (error = e);
                    }
                    if (promise === value) return void reject(promise, new TypeError("A promises callback cannot return that same promise."));
                } else value = detail;
                promise._state !== PENDING ||
                    (hasCallback && succeeded ? resolve(promise, value) : !1 === succeeded ? reject(promise, error) : settled === FULFILLED ? fulfill(promise, value) : settled === REJECTED && reject(promise, value));
            }
            var id = 0;
            function makePromise(promise) {
                (promise[PROMISE_ID] = id++), (promise._state = void 0), (promise._result = void 0), (promise._subscribers = []);
            }
            var Enumerator = (function () {
                    function Enumerator(Constructor, input) {
                        (this._instanceConstructor = Constructor),
                            (this.promise = new Constructor(noop)),
                            this.promise[PROMISE_ID] || makePromise(this.promise),
                            isArray(input)
                                ? ((this.length = input.length),
                                  (this._remaining = input.length),
                                  (this._result = new Array(this.length)),
                                  0 === this.length ? fulfill(this.promise, this._result) : ((this.length = this.length || 0), this._enumerate(input), 0 === this._remaining && fulfill(this.promise, this._result)))
                                : reject(this.promise, new Error("Array Methods must be provided an Array"));
                    }
                    return (
                        (Enumerator.prototype._enumerate = function (input) {
                            for (var i = 0; this._state === PENDING && i < input.length; i++) this._eachEntry(input[i], i);
                        }),
                        (Enumerator.prototype._eachEntry = function (entry, i) {
                            var c = this._instanceConstructor,
                                resolve$$1 = c.resolve;
                            if (resolve$$1 === resolve$1) {
                                var _then = void 0,
                                    error = void 0,
                                    didError = !1;
                                try {
                                    _then = entry.then;
                                } catch (e) {
                                    (didError = !0), (error = e);
                                }
                                if (_then === then && entry._state !== PENDING) this._settledAt(entry._state, i, entry._result);
                                else if ("function" != typeof _then) this._remaining--, (this._result[i] = entry);
                                else if (c === Promise$1) {
                                    var promise = new c(noop);
                                    didError ? reject(promise, error) : handleMaybeThenable(promise, entry, _then), this._willSettleAt(promise, i);
                                } else
                                    this._willSettleAt(
                                        new c(function (resolve$$1) {
                                            return resolve$$1(entry);
                                        }),
                                        i
                                    );
                            } else this._willSettleAt(resolve$$1(entry), i);
                        }),
                        (Enumerator.prototype._settledAt = function (state, i, value) {
                            var promise = this.promise;
                            promise._state === PENDING && (this._remaining--, state === REJECTED ? reject(promise, value) : (this._result[i] = value)), 0 === this._remaining && fulfill(promise, this._result);
                        }),
                        (Enumerator.prototype._willSettleAt = function (promise, i) {
                            var enumerator = this;
                            subscribe(
                                promise,
                                void 0,
                                function (value) {
                                    return enumerator._settledAt(FULFILLED, i, value);
                                },
                                function (reason) {
                                    return enumerator._settledAt(REJECTED, i, reason);
                                }
                            );
                        }),
                        Enumerator
                    );
                })(),
                Promise$1 = (function () {
                    function Promise(resolver) {
                        (this[PROMISE_ID] = id++),
                            (this._result = this._state = void 0),
                            (this._subscribers = []),
                            noop !== resolver &&
                                ("function" != typeof resolver &&
                                    (function () {
                                        throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");
                                    })(),
                                this instanceof Promise
                                    ? (function (promise, resolver) {
                                          try {
                                              resolver(
                                                  function (value) {
                                                      resolve(promise, value);
                                                  },
                                                  function (reason) {
                                                      reject(promise, reason);
                                                  }
                                              );
                                          } catch (e) {
                                              reject(promise, e);
                                          }
                                      })(this, resolver)
                                    : (function () {
                                          throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
                                      })());
                    }
                    return (
                        (Promise.prototype.catch = function (onRejection) {
                            return this.then(null, onRejection);
                        }),
                        (Promise.prototype.finally = function (callback) {
                            var constructor = this.constructor;
                            return isFunction(callback)
                                ? this.then(
                                      function (value) {
                                          return constructor.resolve(callback()).then(function () {
                                              return value;
                                          });
                                      },
                                      function (reason) {
                                          return constructor.resolve(callback()).then(function () {
                                              throw reason;
                                          });
                                      }
                                  )
                                : this.then(callback, callback);
                        }),
                        Promise
                    );
                })();
            return (
                (Promise$1.prototype.then = then),
                (Promise$1.all = function (entries) {
                    return new Enumerator(this, entries).promise;
                }),
                (Promise$1.race = function (entries) {
                    var Constructor = this;
                    return isArray(entries)
                        ? new Constructor(function (resolve, reject) {
                              for (var length = entries.length, i = 0; i < length; i++) Constructor.resolve(entries[i]).then(resolve, reject);
                          })
                        : new Constructor(function (_, reject) {
                              return reject(new TypeError("You must pass an array to race."));
                          });
                }),
                (Promise$1.resolve = resolve$1),
                (Promise$1.reject = function (reason) {
                    var promise = new this(noop);
                    return reject(promise, reason), promise;
                }),
                (Promise$1._setScheduler = function (scheduleFn) {
                    customSchedulerFn = scheduleFn;
                }),
                (Promise$1._setAsap = function (asapFn) {
                    asap = asapFn;
                }),
                (Promise$1._asap = asap),
                (Promise$1.polyfill = function () {
                    var local = void 0;
                    if (void 0 !== commonjsGlobal) local = commonjsGlobal;
                    else if ("undefined" != typeof self) local = self;
                    else
                        try {
                            local = Function("return this")();
                        } catch (e) {
                            throw new Error("polyfill failed because global object is unavailable in this environment");
                        }
                    var P = local.Promise;
                    if (P) {
                        var promiseToString = null;
                        try {
                            promiseToString = Object.prototype.toString.call(P.resolve());
                        } catch (e) {}
                        if ("[object Promise]" === promiseToString && !P.cast) return;
                    }
                    local.Promise = Promise$1;
                }),
                (Promise$1.Promise = Promise$1)
            );
        })();
    }),
        createCommonjsModule(function (module, exports) {
            module.exports = (function () {
                function isFunction(x) {
                    return "function" == typeof x;
                }
                var isArray = Array.isArray
                        ? Array.isArray
                        : function (x) {
                              return "[object Array]" === Object.prototype.toString.call(x);
                          },
                    len = 0,
                    vertxNext = void 0,
                    customSchedulerFn = void 0,
                    asap = function (callback, arg) {
                        (queue[len] = callback), (queue[len + 1] = arg), 2 === (len += 2) && (customSchedulerFn ? customSchedulerFn(flush) : scheduleFlush());
                    },
                    browserWindow = "undefined" != typeof window ? window : void 0,
                    browserGlobal = browserWindow || {},
                    BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver,
                    isNode = "undefined" == typeof self && "undefined" != typeof process && "[object process]" === {}.toString.call(process),
                    isWorker = "undefined" != typeof Uint8ClampedArray && "undefined" != typeof importScripts && "undefined" != typeof MessageChannel;
                function useSetTimeout() {
                    var globalSetTimeout = setTimeout;
                    return function () {
                        return globalSetTimeout(flush, 1);
                    };
                }
                var queue = new Array(1e3);
                function flush() {
                    for (var i = 0; i < len; i += 2) {
                        var callback = queue[i],
                            arg = queue[i + 1];
                        callback(arg), (queue[i] = void 0), (queue[i + 1] = void 0);
                    }
                    len = 0;
                }
                var channel,
                    iterations,
                    observer,
                    node,
                    scheduleFlush = void 0;
                function then(onFulfillment, onRejection) {
                    var parent = this,
                        child = new this.constructor(noop);
                    void 0 === child[PROMISE_ID] && makePromise(child);
                    var _state = parent._state;
                    if (_state) {
                        var callback = arguments[_state - 1];
                        asap(function () {
                            return invokeCallback(_state, child, callback, parent._result);
                        });
                    } else subscribe(parent, child, onFulfillment, onRejection);
                    return child;
                }
                function resolve$1(object) {
                    if (object && "object" == typeof object && object.constructor === this) return object;
                    var promise = new this(noop);
                    return resolve(promise, object), promise;
                }
                scheduleFlush = isNode
                    ? function () {
                          return process.nextTick(flush);
                      }
                    : BrowserMutationObserver
                    ? ((iterations = 0),
                      (observer = new BrowserMutationObserver(flush)),
                      (node = document.createTextNode("")),
                      observer.observe(node, { characterData: !0 }),
                      function () {
                          node.data = iterations = ++iterations % 2;
                      })
                    : isWorker
                    ? (((channel = new MessageChannel()).port1.onmessage = flush),
                      function () {
                          return channel.port2.postMessage(0);
                      })
                    : void 0 === browserWindow
                    ? (function () {
                          try {
                              var vertx = Function("return this")().require("vertx");
                              return void 0 === (vertxNext = vertx.runOnLoop || vertx.runOnContext)
                                  ? useSetTimeout()
                                  : function () {
                                        vertxNext(flush);
                                    };
                          } catch (e) {
                              return useSetTimeout();
                          }
                      })()
                    : useSetTimeout();
                var PROMISE_ID = Math.random().toString(36).substring(2);
                function noop() {}
                var PENDING = void 0,
                    FULFILLED = 1,
                    REJECTED = 2;
                function tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {
                    try {
                        then$$1.call(value, fulfillmentHandler, rejectionHandler);
                    } catch (e) {
                        return e;
                    }
                }
                function handleMaybeThenable(promise, maybeThenable, then$$1) {
                    maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1
                        ? (function (promise, thenable) {
                              thenable._state === FULFILLED
                                  ? fulfill(promise, thenable._result)
                                  : thenable._state === REJECTED
                                  ? reject(promise, thenable._result)
                                  : subscribe(
                                        thenable,
                                        void 0,
                                        function (value) {
                                            return resolve(promise, value);
                                        },
                                        function (reason) {
                                            return reject(promise, reason);
                                        }
                                    );
                          })(promise, maybeThenable)
                        : void 0 === then$$1
                        ? fulfill(promise, maybeThenable)
                        : isFunction(then$$1)
                        ? (function (promise, thenable, then$$1) {
                              asap(function (promise) {
                                  var sealed = !1,
                                      error = tryThen(
                                          then$$1,
                                          thenable,
                                          function (value) {
                                              sealed || ((sealed = !0), thenable !== value ? resolve(promise, value) : fulfill(promise, value));
                                          },
                                          function (reason) {
                                              sealed || ((sealed = !0), reject(promise, reason));
                                          },
                                          promise._label
                                      );
                                  !sealed && error && ((sealed = !0), reject(promise, error));
                              }, promise);
                          })(promise, maybeThenable, then$$1)
                        : fulfill(promise, maybeThenable);
                }
                function resolve(promise, value) {
                    if (promise === value) reject(promise, new TypeError("You cannot resolve a promise with itself"));
                    else if (((type = typeof (x = value)), null === x || ("object" !== type && "function" !== type))) fulfill(promise, value);
                    else {
                        var then$$1 = void 0;
                        try {
                            then$$1 = value.then;
                        } catch (error) {
                            return void reject(promise, error);
                        }
                        handleMaybeThenable(promise, value, then$$1);
                    }
                    var x, type;
                }
                function publishRejection(promise) {
                    promise._onerror && promise._onerror(promise._result), publish(promise);
                }
                function fulfill(promise, value) {
                    promise._state === PENDING && ((promise._result = value), (promise._state = FULFILLED), 0 !== promise._subscribers.length && asap(publish, promise));
                }
                function reject(promise, reason) {
                    promise._state === PENDING && ((promise._state = REJECTED), (promise._result = reason), asap(publishRejection, promise));
                }
                function subscribe(parent, child, onFulfillment, onRejection) {
                    var _subscribers = parent._subscribers,
                        length = _subscribers.length;
                    (parent._onerror = null), (_subscribers[length] = child), (_subscribers[length + FULFILLED] = onFulfillment), (_subscribers[length + REJECTED] = onRejection), 0 === length && parent._state && asap(publish, parent);
                }
                function publish(promise) {
                    var subscribers = promise._subscribers,
                        settled = promise._state;
                    if (0 !== subscribers.length) {
                        for (var child = void 0, callback = void 0, detail = promise._result, i = 0; i < subscribers.length; i += 3)
                            (child = subscribers[i]), (callback = subscribers[i + settled]), child ? invokeCallback(settled, child, callback, detail) : callback(detail);
                        promise._subscribers.length = 0;
                    }
                }
                function invokeCallback(settled, promise, callback, detail) {
                    var hasCallback = isFunction(callback),
                        value = void 0,
                        error = void 0,
                        succeeded = !0;
                    if (hasCallback) {
                        try {
                            value = callback(detail);
                        } catch (e) {
                            (succeeded = !1), (error = e);
                        }
                        if (promise === value) return void reject(promise, new TypeError("A promises callback cannot return that same promise."));
                    } else value = detail;
                    promise._state !== PENDING ||
                        (hasCallback && succeeded ? resolve(promise, value) : !1 === succeeded ? reject(promise, error) : settled === FULFILLED ? fulfill(promise, value) : settled === REJECTED && reject(promise, value));
                }
                var id = 0;
                function makePromise(promise) {
                    (promise[PROMISE_ID] = id++), (promise._state = void 0), (promise._result = void 0), (promise._subscribers = []);
                }
                var Enumerator = (function () {
                        function Enumerator(Constructor, input) {
                            (this._instanceConstructor = Constructor),
                                (this.promise = new Constructor(noop)),
                                this.promise[PROMISE_ID] || makePromise(this.promise),
                                isArray(input)
                                    ? ((this.length = input.length),
                                      (this._remaining = input.length),
                                      (this._result = new Array(this.length)),
                                      0 === this.length ? fulfill(this.promise, this._result) : ((this.length = this.length || 0), this._enumerate(input), 0 === this._remaining && fulfill(this.promise, this._result)))
                                    : reject(this.promise, new Error("Array Methods must be provided an Array"));
                        }
                        return (
                            (Enumerator.prototype._enumerate = function (input) {
                                for (var i = 0; this._state === PENDING && i < input.length; i++) this._eachEntry(input[i], i);
                            }),
                            (Enumerator.prototype._eachEntry = function (entry, i) {
                                var c = this._instanceConstructor,
                                    resolve$$1 = c.resolve;
                                if (resolve$$1 === resolve$1) {
                                    var _then = void 0,
                                        error = void 0,
                                        didError = !1;
                                    try {
                                        _then = entry.then;
                                    } catch (e) {
                                        (didError = !0), (error = e);
                                    }
                                    if (_then === then && entry._state !== PENDING) this._settledAt(entry._state, i, entry._result);
                                    else if ("function" != typeof _then) this._remaining--, (this._result[i] = entry);
                                    else if (c === Promise$1) {
                                        var promise = new c(noop);
                                        didError ? reject(promise, error) : handleMaybeThenable(promise, entry, _then), this._willSettleAt(promise, i);
                                    } else
                                        this._willSettleAt(
                                            new c(function (resolve$$1) {
                                                return resolve$$1(entry);
                                            }),
                                            i
                                        );
                                } else this._willSettleAt(resolve$$1(entry), i);
                            }),
                            (Enumerator.prototype._settledAt = function (state, i, value) {
                                var promise = this.promise;
                                promise._state === PENDING && (this._remaining--, state === REJECTED ? reject(promise, value) : (this._result[i] = value)), 0 === this._remaining && fulfill(promise, this._result);
                            }),
                            (Enumerator.prototype._willSettleAt = function (promise, i) {
                                var enumerator = this;
                                subscribe(
                                    promise,
                                    void 0,
                                    function (value) {
                                        return enumerator._settledAt(FULFILLED, i, value);
                                    },
                                    function (reason) {
                                        return enumerator._settledAt(REJECTED, i, reason);
                                    }
                                );
                            }),
                            Enumerator
                        );
                    })(),
                    Promise$1 = (function () {
                        function Promise(resolver) {
                            (this[PROMISE_ID] = id++),
                                (this._result = this._state = void 0),
                                (this._subscribers = []),
                                noop !== resolver &&
                                    ("function" != typeof resolver &&
                                        (function () {
                                            throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");
                                        })(),
                                    this instanceof Promise
                                        ? (function (promise, resolver) {
                                              try {
                                                  resolver(
                                                      function (value) {
                                                          resolve(promise, value);
                                                      },
                                                      function (reason) {
                                                          reject(promise, reason);
                                                      }
                                                  );
                                              } catch (e) {
                                                  reject(promise, e);
                                              }
                                          })(this, resolver)
                                        : (function () {
                                              throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
                                          })());
                        }
                        return (
                            (Promise.prototype.catch = function (onRejection) {
                                return this.then(null, onRejection);
                            }),
                            (Promise.prototype.finally = function (callback) {
                                var constructor = this.constructor;
                                return isFunction(callback)
                                    ? this.then(
                                          function (value) {
                                              return constructor.resolve(callback()).then(function () {
                                                  return value;
                                              });
                                          },
                                          function (reason) {
                                              return constructor.resolve(callback()).then(function () {
                                                  throw reason;
                                              });
                                          }
                                      )
                                    : this.then(callback, callback);
                            }),
                            Promise
                        );
                    })();
                return (
                    (Promise$1.prototype.then = then),
                    (Promise$1.all = function (entries) {
                        return new Enumerator(this, entries).promise;
                    }),
                    (Promise$1.race = function (entries) {
                        var Constructor = this;
                        return isArray(entries)
                            ? new Constructor(function (resolve, reject) {
                                  for (var length = entries.length, i = 0; i < length; i++) Constructor.resolve(entries[i]).then(resolve, reject);
                              })
                            : new Constructor(function (_, reject) {
                                  return reject(new TypeError("You must pass an array to race."));
                              });
                    }),
                    (Promise$1.resolve = resolve$1),
                    (Promise$1.reject = function (reason) {
                        var promise = new this(noop);
                        return reject(promise, reason), promise;
                    }),
                    (Promise$1._setScheduler = function (scheduleFn) {
                        customSchedulerFn = scheduleFn;
                    }),
                    (Promise$1._setAsap = function (asapFn) {
                        asap = asapFn;
                    }),
                    (Promise$1._asap = asap),
                    (Promise$1.polyfill = function () {
                        var local = void 0;
                        if (void 0 !== commonjsGlobal) local = commonjsGlobal;
                        else if ("undefined" != typeof self) local = self;
                        else
                            try {
                                local = Function("return this")();
                            } catch (e) {
                                throw new Error("polyfill failed because global object is unavailable in this environment");
                            }
                        var P = local.Promise;
                        if (P) {
                            var promiseToString = null;
                            try {
                                promiseToString = Object.prototype.toString.call(P.resolve());
                            } catch (e) {}
                            if ("[object Promise]" === promiseToString && !P.cast) return;
                        }
                        local.Promise = Promise$1;
                    }),
                    (Promise$1.Promise = Promise$1)
                );
            })();
        }).polyfill();
    ((BrandingDomain = exports.BrandingDomain || (exports.BrandingDomain = {}))[(BrandingDomain.Neutral = 0)] = "Neutral");
    var UtmTargets,
        Sld = (function () {
            function Sld() {}
            return (
                (Sld.has = function (domain) {
                    var tldOffset = domain.lastIndexOf(".");
                    if (tldOffset <= 0 || tldOffset >= domain.length - 1) return !1;
                    var sldOffset = domain.lastIndexOf(".", tldOffset - 1);
                    if (sldOffset <= 0 || tldOffset - 1 <= sldOffset) return !1;
                    var sldList = list[domain.slice(tldOffset + 1)];
                    return !!sldList && 0 <= sldList.indexOf(" " + domain.slice(sldOffset + 1, tldOffset) + " ");
                }),
                (Sld.is = function (domain) {
                    var tldOffset = domain.lastIndexOf(".");
                    if (tldOffset <= 0 || tldOffset >= domain.length - 1) return !1;
                    if (0 <= domain.lastIndexOf(".", tldOffset - 1)) return !1;
                    var sldList = list[domain.slice(tldOffset + 1)];
                    return !!sldList && 0 <= sldList.indexOf(" " + domain.slice(0, tldOffset) + " ");
                }),
                (Sld.get = function (domain) {
                    var tldOffset = domain.lastIndexOf(".");
                    if (tldOffset <= 0 || tldOffset >= domain.length - 1) return null;
                    var sldOffset = domain.lastIndexOf(".", tldOffset - 1);
                    if (sldOffset <= 0 || tldOffset - 1 <= sldOffset) return null;
                    var sldList = list[domain.slice(tldOffset + 1)];
                    return sldList ? (sldList.indexOf(" " + domain.slice(sldOffset + 1, tldOffset) + " ") < 0 ? null : domain.slice(sldOffset + 1)) : null;
                }),
                Sld
            );
        })(),
        Domain = (function () {
            function Domain() {}
            return (
                (Domain.setList = function (newList) {
                    list = newList || {};
                }),
                (Domain.getDomain = function (host) {
                    if (!list) return null;
                    var t = host.match(/\./g);
                    if (t && t.length < 2) return host;
                    var tld = this.getTld(host);
                    if (!tld) return null;
                    var end = host.length - tld.length - 1;
                    return (end = host.lastIndexOf(".", end - 1) + 1), host.substring(end) || "";
                }),
                (Domain.getTld = function (host) {
                    if (!list) return "";
                    var pos = host.lastIndexOf("."),
                        tld = host.substring(pos + 1);
                    return (list[tld.toLowerCase()] && Sld.get(host)) || tld;
                }),
                (Domain.KEY = "Domains"),
                Domain
            );
        })(),
        Loader = (function () {
            function Loader() {
                this.cache = {};
            }
            return (
                Object.defineProperty(Loader, "instance", {
                    get: function () {
                        return void 0 === Loader.classInstance && (Loader.classInstance = new Loader()), Loader.classInstance;
                    },
                    enumerable: !0,
                    configurable: !0,
                }),
                (Loader.prototype.load = function (key, url, contentType) {
                    var _this = this;
                    return this.contains(key)
                        ? Promise.reject("Already in cache.")
                        : ((this.cache[key] = { url: url, data: null }),
                          this.requestXhr(url, contentType)
                              .then(function (data) {
                                  return _this.loadComplete(key, data);
                              })
                              .catch(function (e) {
                                  return _this.remove(key), Promise.reject(e);
                              }));
                }),
                (Loader.prototype.loadComplete = function (key, data) {
                    if (!this.contains(key)) return Promise.reject("Item was removed from cache before loading was complete.");
                    try {
                        var json = JSON.parse(data);
                        return (this.cache[key].data = json), Promise.resolve(json);
                    } catch (error) {
                        return Promise.reject("There was an error parsing JSON file.");
                    }
                }),
                (Loader.prototype.remove = function (key) {
                    this.contains(key) && delete this.cache[key];
                }),
                (Loader.prototype.get = function (key) {
                    return this.contains(key) ? this.cache[key].data : null;
                }),
                (Loader.prototype.contains = function (key) {
                    return this.cache.hasOwnProperty(key);
                }),
                (Loader.prototype.isLoading = function (key) {
                    return this.contains(key) && null === this.cache[key].data;
                }),
                (Loader.prototype.isLoaded = function (key) {
                    return this.contains(key) && null !== this.cache[key].data;
                }),
                (Loader.prototype.loadScript = function (url, deferred, callback) {
                    return (
                        void 0 === deferred && (deferred = !0),
                        new Promise(function (resolve, reject) {
                            var tag = document.createElement("script");
                            (tag.src = url),
                                (tag.async = !1),
                                (tag.onload = function () {
                                    "function" == typeof callback && callback(), resolve();
                                }),
                                document.head.appendChild(tag);
                        })
                    );
                }),
                (Loader.prototype.requestXhr = function (url, contentType) {
                    var xhr;
                    return (
                        void 0 === contentType && (contentType = "application/json"),
                        window.XMLHttpRequest
                            ? ((xhr = new XMLHttpRequest()),
                              new Promise(function (resolve, reject) {
                                  xhr.onreadystatechange = function () {
                                      4 === xhr.readyState &&
                                          (200 === xhr.status
                                              ? (resolve(xhr.responseText), (xhr.onreadystatechange = null))
                                              : 0 < xhr.status && (reject("There was a problem with the request: status " + xhr.status), (xhr.onreadystatechange = null)));
                                  };
                                  try {
                                      xhr.open("GET", url, !0), xhr.setRequestHeader("Content-Type", contentType), xhr.send();
                                  } catch (e) {
                                      reject("Error: Unable to send request, CORS not allowed.");
                                  }
                              }))
                            : Promise.reject("Unable to send request, XMLHttpRequest not supported.")
                    );
                }),
                Loader
            );
        })();
    function addScript(src, buster, callback) {
        var s = document.createElement("script");
        s.setAttribute("src", src + "?v=" + buster), "function" == typeof callback && (s.onload = callback), document.body.appendChild(s);
    }
    ((UtmTargets = exports.UtmTargets || (exports.UtmTargets = {}))[(UtmTargets.splashscreen = 0)] = "splashscreen"),
        (UtmTargets[(UtmTargets.logo = 1)] = "logo"),
        (UtmTargets[(UtmTargets.facebook = 2)] = "facebook"),
        (UtmTargets[(UtmTargets.twitter = 3)] = "twitter"),
        (UtmTargets[(UtmTargets.playstore = 4)] = "playstore"),
        (UtmTargets[(UtmTargets.appstore = 5)] = "appstore"),
        (UtmTargets[(UtmTargets.more_games = 6)] = "more_games"),
        (UtmTargets[(UtmTargets.download_game = 7)] = "download_game"),
        (UtmTargets[(UtmTargets.walkthrough = 8)] = "walkthrough"),
        (UtmTargets[(UtmTargets.disclaimer = 9)] = "disclaimer"),
        (UtmTargets[(UtmTargets.highscores = 10)] = "highscores");
    var h,
        s,
        PortalScripts = (function () {})(),
        Branding$$1 = (function () {
            function Branding$$1() {}
            return (
                (Branding$$1.preload = function (version) {}),
                (Branding$$1.setSiteLock = function (data) {
                    Branding$$1.siteLocks = data;
                }),
                Object.defineProperty(Branding$$1, "brandingLogoUrl", {
                    get: function () {
                        var imageName;
                        switch (
                            (Utils.isOnDevice() || Branding$$1.isAirfi()
                                ? (Utils.ASSET_LOCATION = "assets/")
                                : "fbrq.io" === Utils.getSourceSite(!0) && (Utils.ASSET_LOCATION = "assets/"),
                            Utils.getBrandingDomain())
                        ) {}
                        return Utils.ASSET_LOCATION + "images/branding_logo_" + imageName + "_small.png";
                    },
                    enumerable: !0,
                    configurable: !0,
                }),
                Object.defineProperty(Branding$$1, "brandingBackgroundColor", {
					get: function () {
						var e;
						e = "#4a72ad";
						return e;
					},
					enumerable: !0,
					configurable: !0,
                }),
                (Branding$$1.openCampaignLink = function (gameTitle, type) {}),
                (Branding$$1.isInternal = function () {}),
                (Branding$$1.isContracted = function () {}),
                (Branding$$1.isSpecial = function () {}),
                (Branding$$1.isAdmeen = function () {}),
                (Branding$$1.isKongregate = function () {}),
                (Branding$$1.isNewgrounds = function () {}),
                (Branding$$1.isBild = function () {}),
                (Branding$$1.isPlaytime = function () {}),
                (Branding$$1.isBip = function () {}),
                (Branding$$1.isPlaycellApp = function () {}),
                (Branding$$1.isSpil = function () {}),
                (Branding$$1.isAirfi = function () {}),
                (Branding$$1.outGoingLinksAllowed = function () {
                    return !(Branding$$1.isAirfi() || Branding$$1.isSpecial() || Branding$$1.isContracted()) && (!window.hasOwnProperty("fbrqLA") || window.fbrqLA);
                }),
                (Branding$$1.hostMatchesList = function (portals) {
                    portals = portals || [];
                    for (var host = Utils.getSourceSite(), id = 0; id < portals.length; id++) if (host === portals[id]) return !0;
                    return !1;
                }),
                (Branding$$1.LOGO_KEY = "branding_logo"),
                (Branding$$1.INTERNAL_PORTALS_KEY = "branding_portals"),
                (Branding$$1.CONTRACTED_PORTALS_KEY = "branding_contracted"),
                (Branding$$1.SPECIAL_PORTALS_KEY = "branding_special"),
                (Branding$$1.SITELOCK_PORTALS = "sitelock_portals"),
                (Branding$$1.GAME_ICONS_KEY = "more_games"),
                (Branding$$1.DOMAIN_OVERWRITE = null),
                (Branding$$1.analyticsEnabled = !0),
                Branding$$1
            );
        })(),
        Utils = (function () {
            function Utils() {}
            return (
                (Utils.getSourceSite = function (forceLocal) {}),
                (Utils.getBrandingDomain = function () {
                    if (window.hasOwnProperty("fbrqBD") && window.fbrqBD in exports.BrandingDomain) return window.fbrqBD;
                    if (Branding$$1.DOMAIN_OVERWRITE) return Branding$$1.DOMAIN_OVERWRITE;
                    var source = Utils.getSourceSite();
                    if (Branding$$1.isAdmeen()) return exports.BrandingDomain.Admeen;
                    if (Branding$$1.isPlaycellApp() || Branding$$1.isBip()) return exports.BrandingDomain.PlayCell;
                    switch (source) {}
                }),
                (Utils.getReferrer = function (host) {
                    return -1 !== host.indexOf("?ref=") ? host.substr(host.indexOf("?ref=") + 5) : host;
                }),
                (Utils.inIframe = function () {
                    try {
                        return window.self !== window.top;
                    } catch (e) {
                        return !0;
                    }
                }),
                (Utils.inGDGameZone = function () {}),
                (Utils.getDomain = function (uri) {
                    var parser = document.createElement("a");
                    return (parser.href = uri), parser.origin;
                }),
                (Utils.isOnDevice = function () {}),
                (Utils.isTc = function () {}),
                (Utils.getRandomRange = function (min, max) {
                    return (Math.random() * (max - min) + min) | 0;
                }),
                (Utils.getUrlParameter = function (name) {
                    name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
                    var results = new RegExp("[\\?&]" + name + "=([^&#]*)").exec(location.search);
                    return null === results ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
                }),
                (Utils.intTimeToString = function (time) {
                    var hours = Math.floor(time / 3600),
                        minutes = Math.floor((time % 3600) / 60),
                        seconds = time % 60;
                    return (hours < 10 ? "0" + hours : hours.toString()) + ":" + (minutes < 10 ? "0" + minutes : minutes.toString()) + ":" + (seconds < 10 ? "0" + seconds : seconds.toString());
                }),
                (Utils.ASSET_LOCATION = window.hasOwnProperty("fbrqSA") && !0 === window.fbrqSA ? "assets/" : "assets/"),
                Utils
            );
        })(),
        GoogleAnalytics = (function () {
            function GoogleAnalytics() {}
            return (
                (GoogleAnalytics.preload = function () {}),
                (GoogleAnalytics.prototype.setup = function (analyticsId, appName, appVersion, trackerWrapper, sampleRate) {
                    if ((void 0 === trackerWrapper && (trackerWrapper = "auto"), void 0 === sampleRate && (sampleRate = 100), !Branding$$1.analyticsEnabled)) return null;
                    if (
                        (ga("create", analyticsId, trackerWrapper, { sampleRate: sampleRate }),
                        Utils.isOnDevice() && ga("set", "checkProtocolTask", null),
                        void 0 !== appName && ga("set", "appName", appName),
                        void 0 !== appName && ga("set", "appVersion", appVersion),
                        ga("send", "pageview"),
                        "auto" !== trackerWrapper)
                    ) {
                        var settings = { name: "fbrq", sampleRate: 1 };
                        for (var key in trackerWrapper) trackerWrapper.hasOwnProperty(key) && (settings[key] = trackerWrapper[key]);
                        ga("create", "", settings);
                    } else ga("create", "", trackerWrapper, "fbrq", { sampleRate: 1 });
                    if (Branding$$1.isSpil()) {
                        var referrer = Utils.getReferrer(decodeURIComponent(document.referrer));
                        ga("fbrq.set", "referrer", referrer), ga("set", "referrer", referrer);
                    }
                    return Utils.isOnDevice() && ga("fbrq.set", "checkProtocolTask", null), ga("fbrq.set", "appName", "All"), ga("fbrq.send", "pageview"), ga;
                }),
                (GoogleAnalytics.prototype.sendScreenView = function (screenName) {
                    Branding$$1.analyticsEnabled &&
                        ["send", "fbrq.send"].forEach(function (key) {
                            ga(key, "screenview", { screenName: screenName });
                        });
                }),
                (GoogleAnalytics.prototype.sendGenericEvent = function (category, action, label) {
                    Branding$$1.analyticsEnabled &&
                        ["send", "fbrq.send"].forEach(function (key) {
                            ga(key, "event", category, action, label);
                        });
                }),
                GoogleAnalytics
            );
        })(),
        CryptoJS =
            CryptoJS ||
            (function (h, s) {
                var f = {},
                    g = (f.lib = {}),
                    q = function () {},
                    m = (g.Base = {
                        extend: function (a) {
                            q.prototype = this;
                            var c = new q();
                            return (
                                a && c.mixIn(a),
                                c.hasOwnProperty("init") ||
                                    (c.init = function () {
                                        c.$super.init.apply(this, arguments);
                                    }),
                                ((c.init.prototype = c).$super = this),
                                c
                            );
                        },
                        create: function () {
                            var a = this.extend();
                            return a.init.apply(a, arguments), a;
                        },
                        init: function () {},
                        mixIn: function (a) {
                            for (var c in a) a.hasOwnProperty(c) && (this[c] = a[c]);
                            a.hasOwnProperty("toString") && (this.toString = a.toString);
                        },
                        clone: function () {
                            return this.init.prototype.extend(this);
                        },
                    }),
                    r = (g.WordArray = m.extend({
                        init: function (a, c) {
                            (a = this.words = a || []), (this.sigBytes = null != c ? c : 4 * a.length);
                        },
                        toString: function (a) {
                            return (a || k).stringify(this);
                        },
                        concat: function (a) {
                            var c = this.words,
                                d = a.words,
                                b = this.sigBytes;
                            if (((a = a.sigBytes), this.clamp(), b % 4)) for (var e = 0; e < a; e++) c[(b + e) >>> 2] |= ((d[e >>> 2] >>> (24 - (e % 4) * 8)) & 255) << (24 - ((b + e) % 4) * 8);
                            else if (65535 < d.length) for (e = 0; e < a; e += 4) c[(b + e) >>> 2] = d[e >>> 2];
                            else c.push.apply(c, d);
                            return (this.sigBytes += a), this;
                        },
                        clamp: function () {
                            var a = this.words,
                                c = this.sigBytes;
                            (a[c >>> 2] &= 4294967295 << (32 - (c % 4) * 8)), (a.length = h.ceil(c / 4));
                        },
                        clone: function () {
                            var a = m.clone.call(this);
                            return (a.words = this.words.slice(0)), a;
                        },
                        random: function (a) {
                            for (var c = [], d = 0; d < a; d += 4) c.push((4294967296 * h.random()) | 0);
                            return new r.init(c, a);
                        },
                    })),
                    l = (f.enc = {}),
                    k = (l.Hex = {
                        stringify: function (a) {
                            var c = a.words;
                            a = a.sigBytes;
                            for (var d = [], b = 0; b < a; b++) {
                                var e = (c[b >>> 2] >>> (24 - (b % 4) * 8)) & 255;
                                d.push((e >>> 4).toString(16)), d.push((15 & e).toString(16));
                            }
                            return d.join("");
                        },
                        parse: function (a) {
                            for (var c = a.length, d = [], b = 0; b < c; b += 2) d[b >>> 3] |= parseInt(a.substr(b, 2), 16) << (24 - (b % 8) * 4);
                            return new r.init(d, c / 2);
                        },
                    }),
                    n = (l.Latin1 = {
                        stringify: function (a) {
                            var c = a.words;
                            a = a.sigBytes;
                            for (var d = [], b = 0; b < a; b++) d.push(String.fromCharCode((c[b >>> 2] >>> (24 - (b % 4) * 8)) & 255));
                            return d.join("");
                        },
                        parse: function (a) {
                            for (var c = a.length, d = [], b = 0; b < c; b++) d[b >>> 2] |= (255 & a.charCodeAt(b)) << (24 - (b % 4) * 8);
                            return new r.init(d, c);
                        },
                    }),
                    j = (l.Utf8 = {
                        stringify: function (a) {
                            try {
                                return decodeURIComponent(escape(n.stringify(a)));
                            } catch (c) {
                                throw Error("Malformed UTF-8 data");
                            }
                        },
                        parse: function (a) {
                            return n.parse(unescape(encodeURIComponent(a)));
                        },
                    }),
                    u = (g.BufferedBlockAlgorithm = m.extend({
                        reset: function () {
                            (this._data = new r.init()), (this._nDataBytes = 0);
                        },
                        _append: function (a) {
                            "string" == typeof a && (a = j.parse(a)), this._data.concat(a), (this._nDataBytes += a.sigBytes);
                        },
                        _process: function (a) {
                            var c = this._data,
                                d = c.words,
                                b = c.sigBytes,
                                e = this.blockSize,
                                f = b / (4 * e);
                            if (((a = (f = a ? h.ceil(f) : h.max((0 | f) - this._minBufferSize, 0)) * e), (b = h.min(4 * a, b)), a)) {
                                for (var g = 0; g < a; g += e) this._doProcessBlock(d, g);
                                (g = d.splice(0, a)), (c.sigBytes -= b);
                            }
                            return new r.init(g, b);
                        },
                        clone: function () {
                            var a = m.clone.call(this);
                            return (a._data = this._data.clone()), a;
                        },
                        _minBufferSize: 0,
                    }));
                g.Hasher = u.extend({
                    cfg: m.extend(),
                    init: function (a) {
                        (this.cfg = this.cfg.extend(a)), this.reset();
                    },
                    reset: function () {
                        u.reset.call(this), this._doReset();
                    },
                    update: function (a) {
                        return this._append(a), this._process(), this;
                    },
                    finalize: function (a) {
                        return a && this._append(a), this._doFinalize();
                    },
                    blockSize: 16,
                    _createHelper: function (a) {
                        return function (c, d) {
                            return new a.init(d).finalize(c);
                        };
                    },
                    _createHmacHelper: function (a) {
                        return function (c, d) {
                            return new t.HMAC.init(a, d).finalize(c);
                        };
                    },
                });
                var t = (f.algo = {});
                return f;
            })(Math);
    !(function (h) {
        for (
            var s = CryptoJS,
                g = (f = s.lib).WordArray,
                q = f.Hasher,
                f = s.algo,
                m = [],
                r = [],
                l = function (a) {
                    return (4294967296 * (a - (0 | a))) | 0;
                },
                k = 2,
                n = 0;
            n < 64;

        ) {
            var j;
            a: {
                j = k;
                for (var u = h.sqrt(j), t = 2; t <= u; t++)
                    if (!(j % t)) {
                        j = !1;
                        break a;
                    }
                j = !0;
            }
            j && (n < 8 && (m[n] = l(h.pow(k, 0.5))), (r[n] = l(h.pow(k, 1 / 3))), n++), k++;
        }
        var a = [];
        f = f.SHA256 = q.extend({
            _doReset: function () {
                this._hash = new g.init(m.slice(0));
            },
            _doProcessBlock: function (c, d) {
                for (var b = this._hash.words, e = b[0], f = b[1], g = b[2], j = b[3], h = b[4], m = b[5], n = b[6], q = b[7], p = 0; p < 64; p++) {
                    if (p < 16) a[p] = 0 | c[d + p];
                    else {
                        var k = a[p - 15],
                            l = a[p - 2];
                        a[p] = (((k << 25) | (k >>> 7)) ^ ((k << 14) | (k >>> 18)) ^ (k >>> 3)) + a[p - 7] + (((l << 15) | (l >>> 17)) ^ ((l << 13) | (l >>> 19)) ^ (l >>> 10)) + a[p - 16];
                    }
                    (k = q + (((h << 26) | (h >>> 6)) ^ ((h << 21) | (h >>> 11)) ^ ((h << 7) | (h >>> 25))) + ((h & m) ^ (~h & n)) + r[p] + a[p]),
                        (l = (((e << 30) | (e >>> 2)) ^ ((e << 19) | (e >>> 13)) ^ ((e << 10) | (e >>> 22))) + ((e & f) ^ (e & g) ^ (f & g))),
                        (q = n),
                        (n = m),
                        (m = h),
                        (h = (j + k) | 0),
                        (j = g),
                        (g = f),
                        (f = e),
                        (e = (k + l) | 0);
                }
                (b[0] = (b[0] + e) | 0), (b[1] = (b[1] + f) | 0), (b[2] = (b[2] + g) | 0), (b[3] = (b[3] + j) | 0), (b[4] = (b[4] + h) | 0), (b[5] = (b[5] + m) | 0), (b[6] = (b[6] + n) | 0), (b[7] = (b[7] + q) | 0);
            },
            _doFinalize: function () {
                var a = this._data,
                    d = a.words,
                    b = 8 * this._nDataBytes,
                    e = 8 * a.sigBytes;
                return (d[e >>> 5] |= 128 << (24 - (e % 32))), (d[14 + (((e + 64) >>> 9) << 4)] = h.floor(b / 4294967296)), (d[15 + (((e + 64) >>> 9) << 4)] = b), (a.sigBytes = 4 * d.length), this._process(), this._hash;
            },
            clone: function () {
                var a = q.clone.call(this);
                return (a._hash = this._hash.clone()), a;
            },
        });
        (s.SHA256 = q._createHelper(f)), (s.HmacSHA256 = q._createHmacHelper(f));
    })(Math),
        (s = (h = CryptoJS).enc.Utf8),
        (h.algo.HMAC = h.lib.Base.extend({
            init: function (f, g) {
                (f = this._hasher = new f.init()), "string" == typeof g && (g = s.parse(g));
                var h = f.blockSize,
                    m = 4 * h;
                g.sigBytes > m && (g = f.finalize(g)), g.clamp();
                for (var r = (this._oKey = g.clone()), l = (this._iKey = g.clone()), k = r.words, n = l.words, j = 0; j < h; j++) (k[j] ^= 1549556828), (n[j] ^= 909522486);
                (r.sigBytes = l.sigBytes = m), this.reset();
            },
            reset: function () {
                var f = this._hasher;
                f.reset(), f.update(this._iKey);
            },
            update: function (f) {
                return this._hasher.update(f), this;
            },
            finalize: function (f) {
                var g = this._hasher;
                return (f = g.finalize(f)), g.reset(), g.finalize(this._oKey.clone().concat(f));
            },
        })),
        (function () {
            var h = CryptoJS,
                j = h.lib.WordArray;
            h.enc.Base64 = {
                stringify: function (b) {
                    var e = b.words,
                        f = b.sigBytes,
                        c = this._map;
                    b.clamp(), (b = []);
                    for (var a = 0; a < f; a += 3)
                        for (
                            var d = (((e[a >>> 2] >>> (24 - (a % 4) * 8)) & 255) << 16) | (((e[(a + 1) >>> 2] >>> (24 - ((a + 1) % 4) * 8)) & 255) << 8) | ((e[(a + 2) >>> 2] >>> (24 - ((a + 2) % 4) * 8)) & 255), g = 0;
                            g < 4 && a + 0.75 * g < f;
                            g++
                        )
                            b.push(c.charAt((d >>> (6 * (3 - g))) & 63));
                    if ((e = c.charAt(64))) for (; b.length % 4; ) b.push(e);
                    return b.join("");
                },
                parse: function (b) {
                    var e = b.length,
                        f = this._map;
                    (c = f.charAt(64)) && -1 != (c = b.indexOf(c)) && (e = c);
                    for (var c = [], a = 0, d = 0; d < e; d++)
                        if (d % 4) {
                            var g = f.indexOf(b.charAt(d - 1)) << ((d % 4) * 2),
                                h = f.indexOf(b.charAt(d)) >>> (6 - (d % 4) * 2);
                            (c[a >>> 2] |= (g | h) << (24 - (a % 4) * 8)), a++;
                        }
                    return j.create(c, a);
                },
                _map: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
            };
        })(),
        (function (gameanalytics) {
            !(function (EGAErrorSeverity) {
                (EGAErrorSeverity[(EGAErrorSeverity.Undefined = 0)] = "Undefined"),
                    (EGAErrorSeverity[(EGAErrorSeverity.Debug = 1)] = "Debug"),
                    (EGAErrorSeverity[(EGAErrorSeverity.Info = 2)] = "Info"),
                    (EGAErrorSeverity[(EGAErrorSeverity.Warning = 3)] = "Warning"),
                    (EGAErrorSeverity[(EGAErrorSeverity.Error = 4)] = "Error"),
                    (EGAErrorSeverity[(EGAErrorSeverity.Critical = 5)] = "Critical");
            })(gameanalytics.EGAErrorSeverity || (gameanalytics.EGAErrorSeverity = {})),
                (function (EGAGender) {
                    (EGAGender[(EGAGender.Undefined = 0)] = "Undefined"), (EGAGender[(EGAGender.Male = 1)] = "Male"), (EGAGender[(EGAGender.Female = 2)] = "Female");
                })(gameanalytics.EGAGender || (gameanalytics.EGAGender = {})),
                (function (EGAProgressionStatus) {
                    (EGAProgressionStatus[(EGAProgressionStatus.Undefined = 0)] = "Undefined"),
                        (EGAProgressionStatus[(EGAProgressionStatus.Start = 1)] = "Start"),
                        (EGAProgressionStatus[(EGAProgressionStatus.Complete = 2)] = "Complete"),
                        (EGAProgressionStatus[(EGAProgressionStatus.Fail = 3)] = "Fail");
                })(gameanalytics.EGAProgressionStatus || (gameanalytics.EGAProgressionStatus = {})),
                (function (EGAResourceFlowType) {
                    (EGAResourceFlowType[(EGAResourceFlowType.Undefined = 0)] = "Undefined"), (EGAResourceFlowType[(EGAResourceFlowType.Source = 1)] = "Source"), (EGAResourceFlowType[(EGAResourceFlowType.Sink = 2)] = "Sink");
                })(gameanalytics.EGAResourceFlowType || (gameanalytics.EGAResourceFlowType = {})),
                (function (http) {
                    !(function (EGASdkErrorType) {
                        (EGASdkErrorType[(EGASdkErrorType.Undefined = 0)] = "Undefined"), (EGASdkErrorType[(EGASdkErrorType.Rejected = 1)] = "Rejected");
                    })(http.EGASdkErrorType || (http.EGASdkErrorType = {})),
                        (function (EGAHTTPApiResponse) {
                            (EGAHTTPApiResponse[(EGAHTTPApiResponse.NoResponse = 0)] = "NoResponse"),
                                (EGAHTTPApiResponse[(EGAHTTPApiResponse.BadResponse = 1)] = "BadResponse"),
                                (EGAHTTPApiResponse[(EGAHTTPApiResponse.RequestTimeout = 2)] = "RequestTimeout"),
                                (EGAHTTPApiResponse[(EGAHTTPApiResponse.JsonEncodeFailed = 3)] = "JsonEncodeFailed"),
                                (EGAHTTPApiResponse[(EGAHTTPApiResponse.JsonDecodeFailed = 4)] = "JsonDecodeFailed"),
                                (EGAHTTPApiResponse[(EGAHTTPApiResponse.InternalServerError = 5)] = "InternalServerError"),
                                (EGAHTTPApiResponse[(EGAHTTPApiResponse.BadRequest = 6)] = "BadRequest"),
                                (EGAHTTPApiResponse[(EGAHTTPApiResponse.Unauthorized = 7)] = "Unauthorized"),
                                (EGAHTTPApiResponse[(EGAHTTPApiResponse.UnknownResponseCode = 8)] = "UnknownResponseCode"),
                                (EGAHTTPApiResponse[(EGAHTTPApiResponse.Ok = 9)] = "Ok");
                        })(http.EGAHTTPApiResponse || (http.EGAHTTPApiResponse = {}));
                })(gameanalytics.http || (gameanalytics.http = {}));
        })(gameanalytics || (gameanalytics = {}));
    var gameanalytics;
    gameanalytics.EGAErrorSeverity, gameanalytics.EGAGender, gameanalytics.EGAProgressionStatus, gameanalytics.EGAResourceFlowType;
    !(function (gameanalytics) {
        !(function (logging) {
            var EGALoggerMessageType;
            !(function (EGALoggerMessageType) {
                (EGALoggerMessageType[(EGALoggerMessageType.Error = 0)] = "Error"),
                    (EGALoggerMessageType[(EGALoggerMessageType.Warning = 1)] = "Warning"),
                    (EGALoggerMessageType[(EGALoggerMessageType.Info = 2)] = "Info"),
                    (EGALoggerMessageType[(EGALoggerMessageType.Debug = 3)] = "Debug");
            })(EGALoggerMessageType || (EGALoggerMessageType = {}));
            var GALogger = (function () {
                function GALogger() {
                    GALogger.debugEnabled = !1;
                }
                return (
                    (GALogger.setInfoLog = function (value) {
                        GALogger.instance.infoLogEnabled = value;
                    }),
                    (GALogger.setVerboseLog = function (value) {
                        GALogger.instance.infoLogVerboseEnabled = value;
                    }),
                    (GALogger.i = function (format) {
                        if (GALogger.instance.infoLogEnabled) {
                            var message = "Info/" + GALogger.Tag + ": " + format;
                            GALogger.instance.sendNotificationMessage(message, EGALoggerMessageType.Info);
                        }
                    }),
                    (GALogger.w = function (format) {
                        var message = "Warning/" + GALogger.Tag + ": " + format;
                        GALogger.instance.sendNotificationMessage(message, EGALoggerMessageType.Warning);
                    }),
                    (GALogger.e = function (format) {
                        var message = "Error/" + GALogger.Tag + ": " + format;
                        GALogger.instance.sendNotificationMessage(message, EGALoggerMessageType.Error);
                    }),
                    (GALogger.ii = function (format) {
                        if (GALogger.instance.infoLogVerboseEnabled) {
                            var message = "Verbose/" + GALogger.Tag + ": " + format;
                            GALogger.instance.sendNotificationMessage(message, EGALoggerMessageType.Info);
                        }
                    }),
                    (GALogger.d = function (format) {
                        if (GALogger.debugEnabled) {
                            var message = "Debug/" + GALogger.Tag + ": " + format;
                            GALogger.instance.sendNotificationMessage(message, EGALoggerMessageType.Debug);
                        }
                    }),
                    (GALogger.prototype.sendNotificationMessage = function (message, type) {
                        switch (type) {
                            case EGALoggerMessageType.Error:
                            case EGALoggerMessageType.Warning:
                                break;
                            case EGALoggerMessageType.Debug:
                                console.debug;
                                break;
                            case EGALoggerMessageType.Info:
                        }
                    }),
                    (GALogger.instance = new GALogger()),
                    (GALogger.Tag = "GameAnalytics"),
                    GALogger
                );
            })();
            logging.GALogger = GALogger;
        })(gameanalytics.logging || (gameanalytics.logging = {}));
    })(gameanalytics || (gameanalytics = {})),
        (function (gameanalytics) {
            !(function (utilities) {
                var GALogger = gameanalytics.logging.GALogger,
                    GAUtilities = (function () {
                        function GAUtilities() {}
                        return (
                            (GAUtilities.getHmac = function (key, data) {
                                var encryptedMessage = CryptoJS.HmacSHA256(data, key);
                                return CryptoJS.enc.Base64.stringify(encryptedMessage);
                            }),
                            (GAUtilities.stringMatch = function (s, pattern) {
                                return !(!s || !pattern) && pattern.test(s);
                            }),
                            (GAUtilities.joinStringArray = function (v, delimiter) {
                                for (var result = "", i = 0, il = v.length; i < il; i++) 0 < i && (result += delimiter), (result += v[i]);
                                return result;
                            }),
                            (GAUtilities.stringArrayContainsString = function (array, search) {
                                if (0 === array.length) return !1;
                                for (var s in array) if (array[s] === search) return !0;
                                return !1;
                            }),
                            (GAUtilities.encode64 = function (input) {
                                input = encodeURI(input);
                                for (
                                    var chr1, chr2, enc1, enc2, enc3, output = "", chr3 = 0, enc4 = 0, i = 0;
                                    (enc1 = (chr1 = input.charCodeAt(i++)) >> 2),
                                        (enc2 = ((3 & chr1) << 4) | ((chr2 = input.charCodeAt(i++)) >> 4)),
                                        (enc3 = ((15 & chr2) << 2) | ((chr3 = input.charCodeAt(i++)) >> 6)),
                                        (enc4 = 63 & chr3),
                                        isNaN(chr2) ? (enc3 = enc4 = 64) : isNaN(chr3) && (enc4 = 64),
                                        (output = output + GAUtilities.keyStr.charAt(enc1) + GAUtilities.keyStr.charAt(enc2) + GAUtilities.keyStr.charAt(enc3) + GAUtilities.keyStr.charAt(enc4)),
                                        (chr1 = chr2 = chr3 = 0),
                                        (enc1 = enc2 = enc3 = enc4 = 0),
                                        i < input.length;

                                );
                                return output;
                            }),
                            (GAUtilities.decode64 = function (input) {
                                var chr1,
                                    chr2,
                                    enc2,
                                    enc3,
                                    output = "",
                                    chr3 = 0,
                                    enc4 = 0,
                                    i = 0;
                                for (
                                    /[^A-Za-z0-9\+\/\=]/g.exec(input) && GALogger.w("There were invalid base64 characters in the input text. Valid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='. Expect errors in decoding."),
                                        input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");
                                    (chr1 = (GAUtilities.keyStr.indexOf(input.charAt(i++)) << 2) | ((enc2 = GAUtilities.keyStr.indexOf(input.charAt(i++))) >> 4)),
                                        (chr2 = ((15 & enc2) << 4) | ((enc3 = GAUtilities.keyStr.indexOf(input.charAt(i++))) >> 2)),
                                        (chr3 = ((3 & enc3) << 6) | (enc4 = GAUtilities.keyStr.indexOf(input.charAt(i++)))),
                                        (output += String.fromCharCode(chr1)),
                                        64 != enc3 && (output += String.fromCharCode(chr2)),
                                        64 != enc4 && (output += String.fromCharCode(chr3)),
                                        (chr1 = chr2 = chr3 = 0),
                                        (enc2 = enc3 = enc4 = 0),
                                        i < input.length;

                                );
                                return decodeURI(output);
                            }),
                            (GAUtilities.timeIntervalSince1970 = function () {
                                var date = new Date();
                                return Math.round(date.getTime() / 1e3);
                            }),
                            (GAUtilities.createGuid = function () {
                                return (
                                    GAUtilities.s4() +
                                    GAUtilities.s4() +
                                    "-" +
                                    GAUtilities.s4() +
                                    "-4" +
                                    GAUtilities.s4().substr(0, 3) +
                                    "-" +
                                    GAUtilities.s4() +
                                    "-" +
                                    GAUtilities.s4() +
                                    GAUtilities.s4() +
                                    GAUtilities.s4()
                                ).toLowerCase();
                            }),
                            (GAUtilities.s4 = function () {
                                return ((65536 * (1 + Math.random())) | 0).toString(16).substring(1);
                            }),
                            (GAUtilities.keyStr = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),
                            GAUtilities
                        );
                    })();
                utilities.GAUtilities = GAUtilities;
            })(gameanalytics.utilities || (gameanalytics.utilities = {}));
        })(gameanalytics || (gameanalytics = {})),
        (function (gameanalytics) {
            !(function (validators) {
                var GALogger = gameanalytics.logging.GALogger,
                    EGASdkErrorType = gameanalytics.http.EGASdkErrorType,
                    GAUtilities = gameanalytics.utilities.GAUtilities,
                    GAValidator = (function () {
                        function GAValidator() {}
                        return (
                            (GAValidator.validateBusinessEvent = function (currency, amount, cartType, itemType, itemId) {
                                return GAValidator.validateCurrency(currency)
                                    ? amount < 0
                                        ? (GALogger.w("Validation fail - business event - amount. Cannot be less than 0. Failed amount: " + amount), !1)
                                        : GAValidator.validateShortString(cartType, !0)
                                        ? GAValidator.validateEventPartLength(itemType, !1)
                                            ? GAValidator.validateEventPartCharacters(itemType)
                                                ? GAValidator.validateEventPartLength(itemId, !1)
                                                    ? !!GAValidator.validateEventPartCharacters(itemId) ||
                                                      (GALogger.w("Validation fail - business event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: " + itemId), !1)
                                                    : (GALogger.w("Validation fail - business event - itemId. Cannot be (null), empty or above 64 characters. String: " + itemId), !1)
                                                : (GALogger.w("Validation fail - business event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: " + itemType), !1)
                                            : (GALogger.w("Validation fail - business event - itemType: Cannot be (null), empty or above 64 characters. String: " + itemType), !1)
                                        : (GALogger.w("Validation fail - business event - cartType. Cannot be above 32 length. String: " + cartType), !1)
                                    : (GALogger.w("Validation fail - business event - currency: Cannot be (null) and need to be A-Z, 3 characters and in the standard at openexchangerates.org. Failed currency: " + currency), !1);
                            }),
                            (GAValidator.validateResourceEvent = function (flowType, currency, amount, itemType, itemId, availableCurrencies, availableItemTypes) {
                                return flowType == gameanalytics.EGAResourceFlowType.Undefined
                                    ? (GALogger.w("Validation fail - resource event - flowType: Invalid flow type."), !1)
                                    : currency
                                    ? GAUtilities.stringArrayContainsString(availableCurrencies, currency)
                                        ? 0 < amount
                                            ? itemType
                                                ? GAValidator.validateEventPartLength(itemType, !1)
                                                    ? GAValidator.validateEventPartCharacters(itemType)
                                                        ? GAUtilities.stringArrayContainsString(availableItemTypes, itemType)
                                                            ? GAValidator.validateEventPartLength(itemId, !1)
                                                                ? !!GAValidator.validateEventPartCharacters(itemId) ||
                                                                  (GALogger.w("Validation fail - resource event - itemId: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: " + itemId), !1)
                                                                : (GALogger.w("Validation fail - resource event - itemId: Cannot be (null), empty or above 64 characters. String: " + itemId), !1)
                                                            : (GALogger.w("Validation fail - resource event - itemType: Not found in list of pre-defined available resource itemTypes. String: " + itemType), !1)
                                                        : (GALogger.w("Validation fail - resource event - itemType: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: " + itemType), !1)
                                                    : (GALogger.w("Validation fail - resource event - itemType: Cannot be (null), empty or above 64 characters. String: " + itemType), !1)
                                                : (GALogger.w("Validation fail - resource event - itemType: Cannot be (null)"), !1)
                                            : (GALogger.w("Validation fail - resource event - amount: Float amount cannot be 0 or negative. Value: " + amount), !1)
                                        : (GALogger.w("Validation fail - resource event - currency: Not found in list of pre-defined available resource currencies. String: " + currency), !1)
                                    : (GALogger.w("Validation fail - resource event - currency: Cannot be (null)"), !1);
                            }),
                            (GAValidator.validateProgressionEvent = function (progressionStatus, progression01, progression02, progression03) {
                                if (progressionStatus == gameanalytics.EGAProgressionStatus.Undefined) return GALogger.w("Validation fail - progression event: Invalid progression status."), !1;
                                if (progression03 && !progression02 && progression01) return GALogger.w("Validation fail - progression event: 03 found but 01+02 are invalid. Progression must be set as either 01, 01+02 or 01+02+03."), !1;
                                if (progression02 && !progression01) return GALogger.w("Validation fail - progression event: 02 found but not 01. Progression must be set as either 01, 01+02 or 01+02+03"), !1;
                                if (!progression01) return GALogger.w("Validation fail - progression event: progression01 not valid. Progressions must be set as either 01, 01+02 or 01+02+03"), !1;
                                if (!GAValidator.validateEventPartLength(progression01, !1))
                                    return GALogger.w("Validation fail - progression event - progression01: Cannot be (null), empty or above 64 characters. String: " + progression01), !1;
                                if (!GAValidator.validateEventPartCharacters(progression01))
                                    return GALogger.w("Validation fail - progression event - progression01: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: " + progression01), !1;
                                if (progression02) {
                                    if (!GAValidator.validateEventPartLength(progression02, !0)) return GALogger.w("Validation fail - progression event - progression02: Cannot be empty or above 64 characters. String: " + progression02), !1;
                                    if (!GAValidator.validateEventPartCharacters(progression02))
                                        return GALogger.w("Validation fail - progression event - progression02: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: " + progression02), !1;
                                }
                                if (progression03) {
                                    if (!GAValidator.validateEventPartLength(progression03, !0)) return GALogger.w("Validation fail - progression event - progression03: Cannot be empty or above 64 characters. String: " + progression03), !1;
                                    if (!GAValidator.validateEventPartCharacters(progression03))
                                        return GALogger.w("Validation fail - progression event - progression03: Cannot contain other characters than A-z, 0-9, -_., ()!?. String: " + progression03), !1;
                                }
                                return !0;
                            }),
                            (GAValidator.validateDesignEvent = function (eventId, value) {
                                return GAValidator.validateEventIdLength(eventId)
                                    ? !!GAValidator.validateEventIdCharacters(eventId) || (GALogger.w("Validation fail - design event - eventId: Non valid characters. Only allowed A-z, 0-9, -_., ()!?. String: " + eventId), !1)
                                    : (GALogger.w("Validation fail - design event - eventId: Cannot be (null) or empty. Only 5 event parts allowed seperated by :. Each part need to be 32 characters or less. String: " + eventId), !1);
                            }),
                            (GAValidator.validateErrorEvent = function (severity, message) {
                                return severity == gameanalytics.EGAErrorSeverity.Undefined
                                    ? (GALogger.w("Validation fail - error event - severity: Severity was unsupported value."), !1)
                                    : !!GAValidator.validateLongString(message, !0) || (GALogger.w("Validation fail - error event - message: Message cannot be above 8192 characters."), !1);
                            }),
                            (GAValidator.validateSdkErrorEvent = function (gameKey, gameSecret, type) {
                                return !!GAValidator.validateKeys(gameKey, gameSecret) && (type !== EGASdkErrorType.Undefined || (GALogger.w("Validation fail - sdk error event - type: Type was unsupported value."), !1));
                            }),
                            (GAValidator.validateKeys = function (gameKey, gameSecret) {
                                return !(!GAUtilities.stringMatch(gameKey, /^[A-z0-9]{32}$/) || !GAUtilities.stringMatch(gameSecret, /^[A-z0-9]{40}$/));
                            }),
                            (GAValidator.validateCurrency = function (currency) {
                                return !!currency && !!GAUtilities.stringMatch(currency, /^[A-Z]{3}$/);
                            }),
                            (GAValidator.validateEventPartLength = function (eventPart, allowNull) {
                                return !(!allowNull || eventPart) || (!!eventPart && !(64 < eventPart.length));
                            }),
                            (GAValidator.validateEventPartCharacters = function (eventPart) {
                                return !!GAUtilities.stringMatch(eventPart, /^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}$/);
                            }),
                            (GAValidator.validateEventIdLength = function (eventId) {
                                return !!eventId && !!GAUtilities.stringMatch(eventId, /^[^:]{1,64}(?::[^:]{1,64}){0,4}$/);
                            }),
                            (GAValidator.validateEventIdCharacters = function (eventId) {
                                return !!eventId && !!GAUtilities.stringMatch(eventId, /^[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}(:[A-Za-z0-9\s\-_\.\(\)\!\?]{1,64}){0,4}$/);
                            }),
                            (GAValidator.validateAndCleanInitRequestResponse = function (initResponse) {
                                if (null == initResponse) return GALogger.w("validateInitRequestResponse failed - no response dictionary."), null;
                                var validatedDict = {};
                                try {
                                    validatedDict.enabled = initResponse.enabled;
                                } catch (e) {
                                    return GALogger.w("validateInitRequestResponse failed - invalid type in 'enabled' field."), null;
                                }
                                try {
                                    var serverTsNumber = initResponse.server_ts;
                                    if (!(0 < serverTsNumber)) return GALogger.w("validateInitRequestResponse failed - invalid value in 'server_ts' field."), null;
                                    validatedDict.server_ts = serverTsNumber;
                                } catch (e) {
                                    return GALogger.w("validateInitRequestResponse failed - invalid type in 'server_ts' field. type=" + typeof initResponse.server_ts + ", value=" + initResponse.server_ts + ", " + e), null;
                                }
                                try {
                                    var configurations = initResponse.configurations;
                                    validatedDict.configurations = configurations;
                                } catch (e) {
                                    return GALogger.w("validateInitRequestResponse failed - invalid type in 'configurations' field. type=" + typeof initResponse.configurations + ", value=" + initResponse.configurations + ", " + e), null;
                                }
                                return validatedDict;
                            }),
                            (GAValidator.validateBuild = function (build) {
                                return !!GAValidator.validateShortString(build, !1);
                            }),
                            (GAValidator.validateSdkWrapperVersion = function (wrapperVersion) {
                                return !!GAUtilities.stringMatch(wrapperVersion, /^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/);
                            }),
                            (GAValidator.validateEngineVersion = function (engineVersion) {
                                return !(!engineVersion || !GAUtilities.stringMatch(engineVersion, /^(unity|unreal|gamemaker|cocos2d|construct|defold) [0-9]{0,5}(\.[0-9]{0,5}){0,2}$/));
                            }),
                            (GAValidator.validateUserId = function (uId) {
                                return !!GAValidator.validateString(uId, !1) || (GALogger.w("Validation fail - user id: id cannot be (null), empty or above 64 characters."), !1);
                            }),
                            (GAValidator.validateShortString = function (shortString, canBeEmpty) {
                                return !(!canBeEmpty || shortString) || !(!shortString || 32 < shortString.length);
                            }),
                            (GAValidator.validateString = function (s, canBeEmpty) {
                                return !(!canBeEmpty || s) || !(!s || 64 < s.length);
                            }),
                            (GAValidator.validateLongString = function (longString, canBeEmpty) {
                                return !(!canBeEmpty || longString) || !(!longString || 8192 < longString.length);
                            }),
                            (GAValidator.validateConnectionType = function (connectionType) {
                                return GAUtilities.stringMatch(connectionType, /^(wwan|wifi|lan|offline)$/);
                            }),
                            (GAValidator.validateCustomDimensions = function (customDimensions) {
                                return GAValidator.validateArrayOfStrings(20, 32, !1, "custom dimensions", customDimensions);
                            }),
                            (GAValidator.validateResourceCurrencies = function (resourceCurrencies) {
                                if (!GAValidator.validateArrayOfStrings(20, 64, !1, "resource currencies", resourceCurrencies)) return !1;
                                for (var i = 0; i < resourceCurrencies.length; ++i)
                                    if (!GAUtilities.stringMatch(resourceCurrencies[i], /^[A-Za-z]+$/))
                                        return GALogger.w("resource currencies validation failed: a resource currency can only be A-Z, a-z. String was: " + resourceCurrencies[i]), !1;
                                return !0;
                            }),
                            (GAValidator.validateResourceItemTypes = function (resourceItemTypes) {
                                if (!GAValidator.validateArrayOfStrings(20, 32, !1, "resource item types", resourceItemTypes)) return !1;
                                for (var i = 0; i < resourceItemTypes.length; ++i)
                                    if (!GAValidator.validateEventPartCharacters(resourceItemTypes[i]))
                                        return GALogger.w("resource item types validation failed: a resource item type cannot contain other characters than A-z, 0-9, -_., ()!?. String was: " + resourceItemTypes[i]), !1;
                                return !0;
                            }),
                            (GAValidator.validateDimension01 = function (dimension01, availableDimensions) {
                                return !dimension01 || !!GAUtilities.stringArrayContainsString(availableDimensions, dimension01);
                            }),
                            (GAValidator.validateDimension02 = function (dimension02, availableDimensions) {
                                return !dimension02 || !!GAUtilities.stringArrayContainsString(availableDimensions, dimension02);
                            }),
                            (GAValidator.validateDimension03 = function (dimension03, availableDimensions) {
                                return !dimension03 || !!GAUtilities.stringArrayContainsString(availableDimensions, dimension03);
                            }),
                            (GAValidator.validateArrayOfStrings = function (maxCount, maxStringLength, allowNoValues, logTag, arrayOfStrings) {
                                var arrayTag = logTag;
                                if ((arrayTag || (arrayTag = "Array"), !arrayOfStrings)) return GALogger.w(arrayTag + " validation failed: array cannot be null. "), !1;
                                if (0 == allowNoValues && 0 == arrayOfStrings.length) return GALogger.w(arrayTag + " validation failed: array cannot be empty. "), !1;
                                if (0 < maxCount && arrayOfStrings.length > maxCount) return GALogger.w(arrayTag + " validation failed: array cannot exceed " + maxCount + " values. It has " + arrayOfStrings.length + " values."), !1;
                                for (var i = 0; i < arrayOfStrings.length; ++i) {
                                    var stringLength = arrayOfStrings[i] ? arrayOfStrings[i].length : 0;
                                    if (0 === stringLength) return GALogger.w(arrayTag + " validation failed: contained an empty string. Array=" + JSON.stringify(arrayOfStrings)), !1;
                                    if (0 < maxStringLength && maxStringLength < stringLength)
                                        return GALogger.w(arrayTag + " validation failed: a string exceeded max allowed length (which is: " + maxStringLength + "). String was: " + arrayOfStrings[i]), !1;
                                }
                                return !0;
                            }),
                            (GAValidator.validateFacebookId = function (facebookId) {
                                return !!GAValidator.validateString(facebookId, !1) || (GALogger.w("Validation fail - facebook id: id cannot be (null), empty or above 64 characters."), !1);
                            }),
                            (GAValidator.validateGender = function (gender) {
                                if (isNaN(Number(gameanalytics.EGAGender[gender]))) {
                                    if (gender == gameanalytics.EGAGender.Undefined || (gender != gameanalytics.EGAGender.Male && gender != gameanalytics.EGAGender.Female))
                                        return GALogger.w("Validation fail - gender: Has to be 'male' or 'female'. Was: " + gender), !1;
                                } else if (
                                    gender == gameanalytics.EGAGender[gameanalytics.EGAGender.Undefined] ||
                                    (gender != gameanalytics.EGAGender[gameanalytics.EGAGender.Male] && gender != gameanalytics.EGAGender[gameanalytics.EGAGender.Female])
                                )
                                    return GALogger.w("Validation fail - gender: Has to be 'male' or 'female'. Was: " + gender), !1;
                                return !0;
                            }),
                            (GAValidator.validateBirthyear = function (birthYear) {
                                return !(birthYear < 0 || 9999 < birthYear) || (GALogger.w("Validation fail - birthYear: Cannot be (null) or invalid range."), !1);
                            }),
                            (GAValidator.validateClientTs = function (clientTs) {
                                return !(clientTs < -4294967294 || 4294967294 < clientTs);
                            }),
                            GAValidator
                        );
                    })();
                validators.GAValidator = GAValidator;
            })(gameanalytics.validators || (gameanalytics.validators = {}));
        })(gameanalytics || (gameanalytics = {})),
        (function (gameanalytics) {
            !(function (device) {
                var NameValueVersion = function (name, value, version) {
                    (this.name = name), (this.value = value), (this.version = version);
                };
                device.NameValueVersion = NameValueVersion;
                var NameVersion = function (name, version) {
                    (this.name = name), (this.version = version);
                };
                device.NameVersion = NameVersion;
                var GADevice = (function () {
                    function GADevice() {}
                    return (
                        (GADevice.touch = function () {}),
                        (GADevice.getRelevantSdkVersion = function () {
                            return GADevice.sdkGameEngineVersion ? GADevice.sdkGameEngineVersion : GADevice.sdkWrapperVersion;
                        }),
                        (GADevice.getConnectionType = function () {
                            return GADevice.connectionType;
                        }),
                        (GADevice.updateConnectionType = function () {
                            GADevice.connectionType = navigator.onLine ? ("ios" === GADevice.buildPlatform || "android" === GADevice.buildPlatform ? "wwan" : "lan") : "offline";
                        }),
                        (GADevice.getOSVersionString = function () {
                            return GADevice.buildPlatform + " " + GADevice.osVersionPair.version;
                        }),
                        (GADevice.runtimePlatformToString = function () {
                            return GADevice.osVersionPair.name;
                        }),
                        (GADevice.getBrowserVersionString = function () {
                            var tem,
                                ua = navigator.userAgent,
                                M = ua.match(/(opera|chrome|safari|firefox|ubrowser|msie|trident|fbav(?=\/))\/?\s*(\d+)/i) || [];
                            if (0 == M.length && "ios" === GADevice.buildPlatform) return "webkit_" + GADevice.osVersion;
                            if (/trident/i.test(M[1])) return "IE " + ((tem = /\brv[ :]+(\d+)/g.exec(ua) || [])[1] || "");
                            if ("Chrome" === M[1] && null != (tem = ua.match(/\b(OPR|Edge|UBrowser)\/(\d+)/))) return tem.slice(1).join(" ").replace("OPR", "Opera").replace("UBrowser", "UC").toLowerCase();
                            if (M[1] && "fbav" === M[1].toLowerCase() && ((M[1] = "facebook"), M[2])) return "facebook " + M[2];
                            var MString = M[2] ? [M[1], M[2]] : [navigator.appName, navigator.appVersion, "-?"];
                            return null != (tem = ua.match(/version\/(\d+)/i)) && MString.splice(1, 1, tem[1]), MString.join(" ").toLowerCase();
                        }),
                        (GADevice.getDeviceModel = function () {
                            return "unknown";
                        }),
                        (GADevice.getDeviceManufacturer = function () {
                            return "unknown";
                        }),
                        (GADevice.matchItem = function (agent, data) {
                            var regexv,
                                matches,
                                mathcesResult,
                                version,
                                result = new NameVersion("unknown", "0.0.0"),
                                i = 0,
                                j = 0;
                            for (i = 0; i < data.length; i += 1)
                                if (new RegExp(data[i].value, "i").test(agent)) {
                                    if (((regexv = new RegExp(data[i].version + "[- /:;]([\\d._]+)", "i")), (version = ""), (matches = agent.match(regexv)) && matches[1] && (mathcesResult = matches[1]), mathcesResult)) {
                                        var matchesArray = mathcesResult.split(/[._]+/);
                                        for (j = 0; j < Math.min(matchesArray.length, 3); j += 1) version += matchesArray[j] + (j < Math.min(matchesArray.length, 3) - 1 ? "." : "");
                                    } else version = "0.0.0";
                                    return (result.name = data[i].name), (result.version = version), result;
                                }
                            return result;
                        }),
                        (GADevice.sdkWrapperVersion = "javascript 3.1.2"),
                        (GADevice.osVersionPair = GADevice.matchItem([navigator.platform, navigator.userAgent, navigator.appVersion, navigator.vendor].join(" "), [
                            new NameValueVersion("windows_phone", "Windows Phone", "OS"),
                            new NameValueVersion("windows", "Win", "NT"),
                            new NameValueVersion("ios", "iPhone", "OS"),
                            new NameValueVersion("ios", "iPad", "OS"),
                            new NameValueVersion("ios", "iPod", "OS"),
                            new NameValueVersion("android", "Android", "Android"),
                            new NameValueVersion("blackBerry", "BlackBerry", "/"),
                            new NameValueVersion("mac_osx", "Mac", "OS X"),
                            new NameValueVersion("tizen", "Tizen", "Tizen"),
                            new NameValueVersion("linux", "Linux", "rv"),
                        ])),
                        (GADevice.buildPlatform = GADevice.runtimePlatformToString()),
                        (GADevice.deviceModel = GADevice.getDeviceModel()),
                        (GADevice.deviceManufacturer = GADevice.getDeviceManufacturer()),
                        (GADevice.osVersion = GADevice.getOSVersionString()),
                        (GADevice.browserVersion = GADevice.getBrowserVersionString()),
                        (GADevice.maxSafeInteger = Math.pow(2, 53) - 1),
                        GADevice
                    );
                })();
                device.GADevice = GADevice;
            })(gameanalytics.device || (gameanalytics.device = {}));
        })(gameanalytics || (gameanalytics = {})),
        (function (gameanalytics) {
            !(function (threading) {
                var TimedBlock = (function () {
                    function TimedBlock(deadline) {
                        (this.deadline = deadline), (this.ignore = !1), (this.async = !1), (this.running = !1), (this.id = ++TimedBlock.idCounter);
                    }
                    return (TimedBlock.idCounter = 0), TimedBlock;
                })();
                threading.TimedBlock = TimedBlock;
            })(gameanalytics.threading || (gameanalytics.threading = {}));
        })(gameanalytics || (gameanalytics = {})),
        (function (gameanalytics) {
            !(function (threading) {
                var PriorityQueue = (function () {
                    function PriorityQueue(priorityComparer) {
                        (this.comparer = priorityComparer), (this._subQueues = {}), (this._sortedKeys = []);
                    }
                    return (
                        (PriorityQueue.prototype.enqueue = function (priority, item) {
                            -1 === this._sortedKeys.indexOf(priority) && this.addQueueOfPriority(priority), this._subQueues[priority].push(item);
                        }),
                        (PriorityQueue.prototype.addQueueOfPriority = function (priority) {
                            var _this = this;
                            this._sortedKeys.push(priority),
                                this._sortedKeys.sort(function (x, y) {
                                    return _this.comparer.compare(x, y);
                                }),
                                (this._subQueues[priority] = []);
                        }),
                        (PriorityQueue.prototype.peek = function () {
                            if (this.hasItems()) return this._subQueues[this._sortedKeys[0]][0];
                            throw new Error("The queue is empty");
                        }),
                        (PriorityQueue.prototype.hasItems = function () {
                            return 0 < this._sortedKeys.length;
                        }),
                        (PriorityQueue.prototype.dequeue = function () {
                            if (this.hasItems()) return this.dequeueFromHighPriorityQueue();
                            throw new Error("The queue is empty");
                        }),
                        (PriorityQueue.prototype.dequeueFromHighPriorityQueue = function () {
                            var firstKey = this._sortedKeys[0],
                                nextItem = this._subQueues[firstKey].shift();
                            return 0 === this._subQueues[firstKey].length && (this._sortedKeys.shift(), delete this._subQueues[firstKey]), nextItem;
                        }),
                        PriorityQueue
                    );
                })();
                threading.PriorityQueue = PriorityQueue;
            })(gameanalytics.threading || (gameanalytics.threading = {}));
        })(gameanalytics || (gameanalytics = {})),
        (function (gameanalytics) {
            !(function (store_1) {
                var EGAStoreArgsOperator,
                    EGAStore,
                    GALogger = gameanalytics.logging.GALogger;
                !(function (EGAStoreArgsOperator) {
                    (EGAStoreArgsOperator[(EGAStoreArgsOperator.Equal = 0)] = "Equal"),
                        (EGAStoreArgsOperator[(EGAStoreArgsOperator.LessOrEqual = 1)] = "LessOrEqual"),
                        (EGAStoreArgsOperator[(EGAStoreArgsOperator.NotEqual = 2)] = "NotEqual");
                })((EGAStoreArgsOperator = store_1.EGAStoreArgsOperator || (store_1.EGAStoreArgsOperator = {}))),
                    (function (EGAStore) {
                        (EGAStore[(EGAStore.Events = 0)] = "Events"), (EGAStore[(EGAStore.Sessions = 1)] = "Sessions"), (EGAStore[(EGAStore.Progression = 2)] = "Progression");
                    })((EGAStore = store_1.EGAStore || (store_1.EGAStore = {})));
                var GAStore = (function () {
                    function GAStore() {
                        (this.eventsStore = []), (this.sessionsStore = []), (this.progressionStore = []), (this.storeItems = {});
                        try {
                            GAStore.storageAvailable = "object" == typeof localStorage && (localStorage.setItem("testingLocalStorage", "yes"), localStorage.removeItem("testingLocalStorage"), !0);
                        } catch (e) {}
                    }
                    return (
                        (GAStore.isStorageAvailable = function () {
                            return GAStore.storageAvailable;
                        }),
                        (GAStore.isStoreTooLargeForEvents = function () {
                            return GAStore.instance.eventsStore.length + GAStore.instance.sessionsStore.length > GAStore.MaxNumberOfEntries;
                        }),
                        (GAStore.select = function (store, args, sort, maxCount) {
                            void 0 === args && (args = []), void 0 === sort && (sort = !1), void 0 === maxCount && (maxCount = 0);
                            var currentStore = GAStore.getStore(store);
                            if (!currentStore) return null;
                            for (var result = [], i = 0; i < currentStore.length; ++i) {
                                for (var entry = currentStore[i], add = !0, j = 0; j < args.length; ++j) {
                                    var argsEntry = args[j];
                                    if (entry[argsEntry[0]])
                                        switch (argsEntry[1]) {
                                            case EGAStoreArgsOperator.Equal:
                                                add = entry[argsEntry[0]] == argsEntry[2];
                                                break;
                                            case EGAStoreArgsOperator.LessOrEqual:
                                                add = entry[argsEntry[0]] <= argsEntry[2];
                                                break;
                                            case EGAStoreArgsOperator.NotEqual:
                                                add = entry[argsEntry[0]] != argsEntry[2];
                                                break;
                                            default:
                                                add = !1;
                                        }
                                    else add = !1;
                                    if (!add) break;
                                }
                                add && result.push(entry);
                            }
                            return (
                                sort &&
                                    result.sort(function (a, b) {
                                        return a.client_ts - b.client_ts;
                                    }),
                                0 < maxCount && result.length > maxCount && (result = result.slice(0, maxCount + 1)),
                                result
                            );
                        }),
                        (GAStore.update = function (store, setArgs, whereArgs) {
                            void 0 === whereArgs && (whereArgs = []);
                            var currentStore = GAStore.getStore(store);
                            if (!currentStore) return !1;
                            for (var i = 0; i < currentStore.length; ++i) {
                                for (var entry = currentStore[i], update = !0, j = 0; j < whereArgs.length; ++j) {
                                    var argsEntry = whereArgs[j];
                                    if (entry[argsEntry[0]])
                                        switch (argsEntry[1]) {
                                            case EGAStoreArgsOperator.Equal:
                                                update = entry[argsEntry[0]] == argsEntry[2];
                                                break;
                                            case EGAStoreArgsOperator.LessOrEqual:
                                                update = entry[argsEntry[0]] <= argsEntry[2];
                                                break;
                                            case EGAStoreArgsOperator.NotEqual:
                                                update = entry[argsEntry[0]] != argsEntry[2];
                                                break;
                                            default:
                                                update = !1;
                                        }
                                    else update = !1;
                                    if (!update) break;
                                }
                                if (update)
                                    for (j = 0; j < setArgs.length; ++j) {
                                        var setArgsEntry = setArgs[j];
                                        entry[setArgsEntry[0]] = setArgsEntry[1];
                                    }
                            }
                            return !0;
                        }),
                        (GAStore.delete = function (store, args) {
                            var currentStore = GAStore.getStore(store);
                            if (currentStore)
                                for (var i = 0; i < currentStore.length; ++i) {
                                    for (var entry = currentStore[i], del = !0, j = 0; j < args.length; ++j) {
                                        var argsEntry = args[j];
                                        if (entry[argsEntry[0]])
                                            switch (argsEntry[1]) {
                                                case EGAStoreArgsOperator.Equal:
                                                    del = entry[argsEntry[0]] == argsEntry[2];
                                                    break;
                                                case EGAStoreArgsOperator.LessOrEqual:
                                                    del = entry[argsEntry[0]] <= argsEntry[2];
                                                    break;
                                                case EGAStoreArgsOperator.NotEqual:
                                                    del = entry[argsEntry[0]] != argsEntry[2];
                                                    break;
                                                default:
                                                    del = !1;
                                            }
                                        else del = !1;
                                        if (!del) break;
                                    }
                                    del && (currentStore.splice(i, 1), --i);
                                }
                        }),
                        (GAStore.insert = function (store, newEntry, replace, replaceKey) {
                            void 0 === replace && (replace = !1), void 0 === replaceKey && (replaceKey = null);
                            var currentStore = GAStore.getStore(store);
                            if (currentStore)
                                if (replace) {
                                    if (!replaceKey) return;
                                    for (var replaced = !1, i = 0; i < currentStore.length; ++i) {
                                        var entry = currentStore[i];
                                        if (entry[replaceKey] == newEntry[replaceKey]) {
                                            for (var s in newEntry) entry[s] = newEntry[s];
                                            replaced = !0;
                                            break;
                                        }
                                    }
                                    replaced || currentStore.push(newEntry);
                                } else currentStore.push(newEntry);
                        }),
                        (GAStore.save = function () {
                            GAStore.isStorageAvailable()
                                ? (localStorage.setItem(GAStore.KeyPrefix + GAStore.EventsStoreKey, JSON.stringify(GAStore.instance.eventsStore)),
                                  localStorage.setItem(GAStore.KeyPrefix + GAStore.SessionsStoreKey, JSON.stringify(GAStore.instance.sessionsStore)),
                                  localStorage.setItem(GAStore.KeyPrefix + GAStore.ProgressionStoreKey, JSON.stringify(GAStore.instance.progressionStore)),
                                  localStorage.setItem(GAStore.KeyPrefix + GAStore.ItemsStoreKey, JSON.stringify(GAStore.instance.storeItems)))
                                : GALogger.w("Storage is not available, cannot save.");
                        }),
                        (GAStore.load = function () {
                            if (GAStore.isStorageAvailable()) {
                                try {
                                    (GAStore.instance.eventsStore = JSON.parse(localStorage.getItem(GAStore.KeyPrefix + GAStore.EventsStoreKey))), GAStore.instance.eventsStore || (GAStore.instance.eventsStore = []);
                                } catch (e) {
                                    GALogger.w("Load failed for 'events' store. Using empty store."), (GAStore.instance.eventsStore = []);
                                }
                                try {
                                    (GAStore.instance.sessionsStore = JSON.parse(localStorage.getItem(GAStore.KeyPrefix + GAStore.SessionsStoreKey))), GAStore.instance.sessionsStore || (GAStore.instance.sessionsStore = []);
                                } catch (e) {
                                    GALogger.w("Load failed for 'sessions' store. Using empty store."), (GAStore.instance.sessionsStore = []);
                                }
                                try {
                                    (GAStore.instance.progressionStore = JSON.parse(localStorage.getItem(GAStore.KeyPrefix + GAStore.ProgressionStoreKey))), GAStore.instance.progressionStore || (GAStore.instance.progressionStore = []);
                                } catch (e) {
                                    GALogger.w("Load failed for 'progression' store. Using empty store."), (GAStore.instance.progressionStore = []);
                                }
                                try {
                                    (GAStore.instance.storeItems = JSON.parse(localStorage.getItem(GAStore.KeyPrefix + GAStore.ItemsStoreKey))), GAStore.instance.storeItems || (GAStore.instance.storeItems = {});
                                } catch (e) {
                                    GALogger.w("Load failed for 'items' store. Using empty store."), (GAStore.instance.progressionStore = []);
                                }
                            } else GALogger.w("Storage is not available, cannot load.");
                        }),
                        (GAStore.setItem = function (key, value) {
                            var keyWithPrefix = GAStore.KeyPrefix + key;
                            value ? (GAStore.instance.storeItems[keyWithPrefix] = value) : keyWithPrefix in GAStore.instance.storeItems && delete GAStore.instance.storeItems[keyWithPrefix];
                        }),
                        (GAStore.getItem = function (key) {
                            var keyWithPrefix = GAStore.KeyPrefix + key;
                            return keyWithPrefix in GAStore.instance.storeItems ? GAStore.instance.storeItems[keyWithPrefix] : null;
                        }),
                        (GAStore.getStore = function (store) {
                            switch (store) {
                                case EGAStore.Events:
                                    return GAStore.instance.eventsStore;
                                case EGAStore.Sessions:
                                    return GAStore.instance.sessionsStore;
                                case EGAStore.Progression:
                                    return GAStore.instance.progressionStore;
                                default:
                                    return GALogger.w("GAStore.getStore(): Cannot find store: " + store), null;
                            }
                        }),
                        (GAStore.instance = new GAStore()),
                        (GAStore.MaxNumberOfEntries = 2e3),
                        (GAStore.KeyPrefix = "GA::"),
                        (GAStore.EventsStoreKey = "ga_event"),
                        (GAStore.SessionsStoreKey = "ga_session"),
                        (GAStore.ProgressionStoreKey = "ga_progression"),
                        (GAStore.ItemsStoreKey = "ga_items"),
                        GAStore
                    );
                })();
                store_1.GAStore = GAStore;
            })(gameanalytics.store || (gameanalytics.store = {}));
        })(gameanalytics || (gameanalytics = {})),
        (function (gameanalytics) {
            !(function (state) {
                var GAValidator = gameanalytics.validators.GAValidator,
                    GAUtilities = gameanalytics.utilities.GAUtilities,
                    GALogger = gameanalytics.logging.GALogger,
                    GAStore = gameanalytics.store.GAStore,
                    GADevice = gameanalytics.device.GADevice,
                    EGAStore = gameanalytics.store.EGAStore,
                    EGAStoreArgsOperator = gameanalytics.store.EGAStoreArgsOperator,
                    GAState = (function () {
                        function GAState() {
                            (this.availableCustomDimensions01 = []),
                                (this.availableCustomDimensions02 = []),
                                (this.availableCustomDimensions03 = []),
                                (this.availableResourceCurrencies = []),
                                (this.availableResourceItemTypes = []),
                                (this.configurations = {}),
                                (this.commandCenterListeners = []),
                                (this.sdkConfigDefault = {}),
                                (this.sdkConfig = {}),
                                (this.progressionTries = {}),
                                (this._isEventSubmissionEnabled = !0);
                        }
                        return (
                            (GAState.setUserId = function (userId) {
                                (GAState.instance.userId = userId), GAState.cacheIdentifier();
                            }),
                            (GAState.getIdentifier = function () {
                                return GAState.instance.identifier;
                            }),
                            (GAState.isInitialized = function () {
                                return GAState.instance.initialized;
                            }),
                            (GAState.setInitialized = function (value) {
                                GAState.instance.initialized = value;
                            }),
                            (GAState.getSessionStart = function () {
                                return GAState.instance.sessionStart;
                            }),
                            (GAState.getSessionNum = function () {
                                return GAState.instance.sessionNum;
                            }),
                            (GAState.getTransactionNum = function () {
                                return GAState.instance.transactionNum;
                            }),
                            (GAState.getSessionId = function () {
                                return GAState.instance.sessionId;
                            }),
                            (GAState.getCurrentCustomDimension01 = function () {
                                return GAState.instance.currentCustomDimension01;
                            }),
                            (GAState.getCurrentCustomDimension02 = function () {
                                return GAState.instance.currentCustomDimension02;
                            }),
                            (GAState.getCurrentCustomDimension03 = function () {
                                return GAState.instance.currentCustomDimension03;
                            }),
                            (GAState.getGameKey = function () {
                                return GAState.instance.gameKey;
                            }),
                            (GAState.getGameSecret = function () {
                                return GAState.instance.gameSecret;
                            }),
                            (GAState.getAvailableCustomDimensions01 = function () {
                                return GAState.instance.availableCustomDimensions01;
                            }),
                            (GAState.setAvailableCustomDimensions01 = function (value) {
                                GAValidator.validateCustomDimensions(value) &&
                                    ((GAState.instance.availableCustomDimensions01 = value),
                                    GAState.validateAndFixCurrentDimensions(),
                                    GALogger.i("Set available custom01 dimension values: (" + GAUtilities.joinStringArray(value, ", ") + ")"));
                            }),
                            (GAState.getAvailableCustomDimensions02 = function () {
                                return GAState.instance.availableCustomDimensions02;
                            }),
                            (GAState.setAvailableCustomDimensions02 = function (value) {
                                GAValidator.validateCustomDimensions(value) &&
                                    ((GAState.instance.availableCustomDimensions02 = value),
                                    GAState.validateAndFixCurrentDimensions(),
                                    GALogger.i("Set available custom02 dimension values: (" + GAUtilities.joinStringArray(value, ", ") + ")"));
                            }),
                            (GAState.getAvailableCustomDimensions03 = function () {
                                return GAState.instance.availableCustomDimensions03;
                            }),
                            (GAState.setAvailableCustomDimensions03 = function (value) {
                                GAValidator.validateCustomDimensions(value) &&
                                    ((GAState.instance.availableCustomDimensions03 = value),
                                    GAState.validateAndFixCurrentDimensions(),
                                    GALogger.i("Set available custom03 dimension values: (" + GAUtilities.joinStringArray(value, ", ") + ")"));
                            }),
                            (GAState.getAvailableResourceCurrencies = function () {
                                return GAState.instance.availableResourceCurrencies;
                            }),
                            (GAState.setAvailableResourceCurrencies = function (value) {
                                GAValidator.validateResourceCurrencies(value) && ((GAState.instance.availableResourceCurrencies = value), GALogger.i("Set available resource currencies: (" + GAUtilities.joinStringArray(value, ", ") + ")"));
                            }),
                            (GAState.getAvailableResourceItemTypes = function () {
                                return GAState.instance.availableResourceItemTypes;
                            }),
                            (GAState.setAvailableResourceItemTypes = function (value) {
                                GAValidator.validateResourceItemTypes(value) && ((GAState.instance.availableResourceItemTypes = value), GALogger.i("Set available resource item types: (" + GAUtilities.joinStringArray(value, ", ") + ")"));
                            }),
                            (GAState.getBuild = function () {
                                return GAState.instance.build;
                            }),
                            (GAState.setBuild = function (value) {
                                (GAState.instance.build = value), GALogger.i("Set build version: " + value);
                            }),
                            (GAState.getUseManualSessionHandling = function () {
                                return GAState.instance.useManualSessionHandling;
                            }),
                            (GAState.isEventSubmissionEnabled = function () {
                                return GAState.instance._isEventSubmissionEnabled;
                            }),
                            (GAState.prototype.setDefaultId = function (value) {
                                (this.defaultUserId = value || ""), GAState.cacheIdentifier();
                            }),
                            (GAState.getDefaultId = function () {
                                return GAState.instance.defaultUserId;
                            }),
                            (GAState.getSdkConfig = function () {
                                var count = 0;
                                for (var json in GAState.instance.sdkConfig) 0 === count && (first = json), ++count;
                                if (first && 0 < count) return GAState.instance.sdkConfig;
                                var first;
                                count = 0;
                                for (var json in GAState.instance.sdkConfigCached) 0 === count && (first = json), ++count;
                                return first && 0 < count ? GAState.instance.sdkConfigCached : GAState.instance.sdkConfigDefault;
                            }),
                            (GAState.isEnabled = function () {
                                var currentSdkConfig = GAState.getSdkConfig();
                                return (!currentSdkConfig.enabled || "false" != currentSdkConfig.enabled) && !!GAState.instance.initAuthorized;
                            }),
                            (GAState.setCustomDimension01 = function (dimension) {
                                (GAState.instance.currentCustomDimension01 = dimension), GAStore.setItem(GAState.Dimension01Key, dimension), GALogger.i("Set custom01 dimension value: " + dimension);
                            }),
                            (GAState.setCustomDimension02 = function (dimension) {
                                (GAState.instance.currentCustomDimension02 = dimension), GAStore.setItem(GAState.Dimension02Key, dimension), GALogger.i("Set custom02 dimension value: " + dimension);
                            }),
                            (GAState.setCustomDimension03 = function (dimension) {
                                (GAState.instance.currentCustomDimension03 = dimension), GAStore.setItem(GAState.Dimension03Key, dimension), GALogger.i("Set custom03 dimension value: " + dimension);
                            }),
                            (GAState.setFacebookId = function (facebookId) {
                                (GAState.instance.facebookId = facebookId), GAStore.setItem(GAState.FacebookIdKey, facebookId), GALogger.i("Set facebook id: " + facebookId);
                            }),
                            (GAState.setGender = function (gender) {
                                (GAState.instance.gender = isNaN(Number(gameanalytics.EGAGender[gender]))
                                    ? gameanalytics.EGAGender[gender].toString().toLowerCase()
                                    : gameanalytics.EGAGender[gameanalytics.EGAGender[gender]].toString().toLowerCase()),
                                    GAStore.setItem(GAState.GenderKey, GAState.instance.gender),
                                    GALogger.i("Set gender: " + GAState.instance.gender);
                            }),
                            (GAState.setBirthYear = function (birthYear) {
                                (GAState.instance.birthYear = birthYear), GAStore.setItem(GAState.BirthYearKey, birthYear.toString()), GALogger.i("Set birth year: " + birthYear);
                            }),
                            (GAState.incrementSessionNum = function () {
                                var sessionNumInt = GAState.getSessionNum() + 1;
                                GAState.instance.sessionNum = sessionNumInt;
                            }),
                            (GAState.incrementTransactionNum = function () {
                                var transactionNumInt = GAState.getTransactionNum() + 1;
                                GAState.instance.transactionNum = transactionNumInt;
                            }),
                            (GAState.incrementProgressionTries = function (progression) {
                                var tries = GAState.getProgressionTries(progression) + 1;
                                GAState.instance.progressionTries[progression] = tries;
                                var values = {};
                                (values.progression = progression), (values.tries = tries), GAStore.insert(EGAStore.Progression, values, !0, "progression");
                            }),
                            (GAState.getProgressionTries = function (progression) {
                                return progression in GAState.instance.progressionTries ? GAState.instance.progressionTries[progression] : 0;
                            }),
                            (GAState.clearProgressionTries = function (progression) {
                                progression in GAState.instance.progressionTries && delete GAState.instance.progressionTries[progression];
                                var parms = [];
                                parms.push(["progression", EGAStoreArgsOperator.Equal, progression]), GAStore.delete(EGAStore.Progression, parms);
                            }),
                            (GAState.setKeys = function (gameKey, gameSecret) {
                                (GAState.instance.gameKey = gameKey), (GAState.instance.gameSecret = gameSecret);
                            }),
                            (GAState.setManualSessionHandling = function (flag) {
                                (GAState.instance.useManualSessionHandling = flag), GALogger.i("Use manual session handling: " + flag);
                            }),
                            (GAState.setEnabledEventSubmission = function (flag) {
                                GAState.instance._isEventSubmissionEnabled = flag;
                            }),
                            (GAState.getEventAnnotations = function () {
                                var annotations = { v: 2 };
                                (annotations.user_id = GAState.instance.identifier),
                                    (annotations.client_ts = GAState.getClientTsAdjusted()),
                                    (annotations.sdk_version = GADevice.getRelevantSdkVersion()),
                                    (annotations.os_version = GADevice.osVersion),
                                    (annotations.manufacturer = GADevice.deviceManufacturer),
                                    (annotations.device = GADevice.deviceModel),
                                    (annotations.browser_version = GADevice.browserVersion),
                                    (annotations.platform = GADevice.buildPlatform),
                                    (annotations.session_id = GAState.instance.sessionId),
                                    (annotations[GAState.SessionNumKey] = GAState.instance.sessionNum);
                                var connection_type = GADevice.getConnectionType();
                                return (
                                    GAValidator.validateConnectionType(connection_type) && (annotations.connection_type = connection_type),
                                    GADevice.gameEngineVersion && (annotations.engine_version = GADevice.gameEngineVersion),
                                    GAState.instance.build && (annotations.build = GAState.instance.build),
                                    GAState.instance.facebookId && (annotations[GAState.FacebookIdKey] = GAState.instance.facebookId),
                                    GAState.instance.gender && (annotations[GAState.GenderKey] = GAState.instance.gender),
                                    0 != GAState.instance.birthYear && (annotations[GAState.BirthYearKey] = GAState.instance.birthYear),
                                    annotations
                                );
                            }),
                            (GAState.getSdkErrorEventAnnotations = function () {
                                var annotations = { v: 2 };
                                (annotations.category = GAState.CategorySdkError),
                                    (annotations.sdk_version = GADevice.getRelevantSdkVersion()),
                                    (annotations.os_version = GADevice.osVersion),
                                    (annotations.manufacturer = GADevice.deviceManufacturer),
                                    (annotations.device = GADevice.deviceModel),
                                    (annotations.platform = GADevice.buildPlatform);
                                var connection_type = GADevice.getConnectionType();
                                return (
                                    GAValidator.validateConnectionType(connection_type) && (annotations.connection_type = connection_type), GADevice.gameEngineVersion && (annotations.engine_version = GADevice.gameEngineVersion), annotations
                                );
                            }),
                            (GAState.getInitAnnotations = function () {
                                var initAnnotations = {};
                                return (
                                    (initAnnotations.user_id = GAState.getIdentifier()),
                                    (initAnnotations.sdk_version = GADevice.getRelevantSdkVersion()),
                                    (initAnnotations.os_version = GADevice.osVersion),
                                    (initAnnotations.platform = GADevice.buildPlatform),
                                    initAnnotations
                                );
                            }),
                            (GAState.getClientTsAdjusted = function () {
                                var clientTs = GAUtilities.timeIntervalSince1970(),
                                    clientTsAdjustedInteger = clientTs + GAState.instance.clientServerTimeOffset;
                                return GAValidator.validateClientTs(clientTsAdjustedInteger) ? clientTsAdjustedInteger : clientTs;
                            }),
                            (GAState.sessionIsStarted = function () {
                                return 0 != GAState.instance.sessionStart;
                            }),
                            (GAState.cacheIdentifier = function () {
                                GAState.instance.userId ? (GAState.instance.identifier = GAState.instance.userId) : GAState.instance.defaultUserId && (GAState.instance.identifier = GAState.instance.defaultUserId);
                            }),
                            (GAState.ensurePersistedStates = function () {
                                GAStore.isStorageAvailable() && GAStore.load();
                                var instance = GAState.instance;
                                instance.setDefaultId(null != GAStore.getItem(GAState.DefaultUserIdKey) ? GAStore.getItem(GAState.DefaultUserIdKey) : GAUtilities.createGuid()),
                                    (instance.sessionNum = null != GAStore.getItem(GAState.SessionNumKey) ? Number(GAStore.getItem(GAState.SessionNumKey)) : 0),
                                    (instance.transactionNum = null != GAStore.getItem(GAState.TransactionNumKey) ? Number(GAStore.getItem(GAState.TransactionNumKey)) : 0),
                                    instance.facebookId
                                        ? GAStore.setItem(GAState.FacebookIdKey, instance.facebookId)
                                        : ((instance.facebookId = null != GAStore.getItem(GAState.FacebookIdKey) ? GAStore.getItem(GAState.FacebookIdKey) : ""), instance.facebookId),
                                    instance.gender ? GAStore.setItem(GAState.GenderKey, instance.gender) : ((instance.gender = null != GAStore.getItem(GAState.GenderKey) ? GAStore.getItem(GAState.GenderKey) : ""), instance.gender),
                                    instance.birthYear && 0 != instance.birthYear
                                        ? GAStore.setItem(GAState.BirthYearKey, instance.birthYear.toString())
                                        : ((instance.birthYear = null != GAStore.getItem(GAState.BirthYearKey) ? Number(GAStore.getItem(GAState.BirthYearKey)) : 0), instance.birthYear),
                                    instance.currentCustomDimension01
                                        ? GAStore.setItem(GAState.Dimension01Key, instance.currentCustomDimension01)
                                        : ((instance.currentCustomDimension01 = null != GAStore.getItem(GAState.Dimension01Key) ? GAStore.getItem(GAState.Dimension01Key) : ""), instance.currentCustomDimension01),
                                    instance.currentCustomDimension02
                                        ? GAStore.setItem(GAState.Dimension02Key, instance.currentCustomDimension02)
                                        : ((instance.currentCustomDimension02 = null != GAStore.getItem(GAState.Dimension02Key) ? GAStore.getItem(GAState.Dimension02Key) : ""), instance.currentCustomDimension02),
                                    instance.currentCustomDimension03
                                        ? GAStore.setItem(GAState.Dimension03Key, instance.currentCustomDimension03)
                                        : ((instance.currentCustomDimension03 = null != GAStore.getItem(GAState.Dimension03Key) ? GAStore.getItem(GAState.Dimension03Key) : ""), instance.currentCustomDimension03);
                                var sdkConfigCachedString = null != GAStore.getItem(GAState.SdkConfigCachedKey) ? GAStore.getItem(GAState.SdkConfigCachedKey) : "";
                                if (sdkConfigCachedString) {
                                    var sdkConfigCached = JSON.parse(GAUtilities.decode64(sdkConfigCachedString));
                                    sdkConfigCached && (instance.sdkConfigCached = sdkConfigCached);
                                }
                                var results_ga_progression = GAStore.select(EGAStore.Progression);
                                if (results_ga_progression)
                                    for (var i = 0; i < results_ga_progression.length; ++i) {
                                        var result = results_ga_progression[i];
                                        result && (instance.progressionTries[result.progression] = result.tries);
                                    }
                            }),
                            (GAState.calculateServerTimeOffset = function (serverTs) {
                                return serverTs - GAUtilities.timeIntervalSince1970();
                            }),
                            (GAState.validateAndCleanCustomFields = function (fields) {
                                var result = {};
                                if (fields) {
                                    var count = 0;
                                    for (var key in fields) {
                                        var value = fields[key];
                                        if (key && value)
                                            if (count < GAState.MAX_CUSTOM_FIELDS_COUNT) {
                                                var regex = new RegExp("^[a-zA-Z0-9_]{1," + GAState.MAX_CUSTOM_FIELDS_KEY_LENGTH + "}$");
                                                if (GAUtilities.stringMatch(key, regex)) {
                                                    var type = typeof value;
                                                    if ("string" === type || value instanceof String) {
                                                        var valueAsString = value;
                                                        valueAsString.length <= GAState.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH && 0 < valueAsString.length
                                                            ? ((result[key] = valueAsString), ++count)
                                                            : GALogger.w(
                                                                  "validateAndCleanCustomFields: entry with key=" +
                                                                      key +
                                                                      ", value=" +
                                                                      value +
                                                                      " has been omitted because its value is an empty string or exceeds the max number of characters (" +
                                                                      GAState.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH +
                                                                      ")"
                                                              );
                                                    } else if ("number" === type || value instanceof Number) {
                                                        var valueAsNumber = value;
                                                        (result[key] = valueAsNumber), ++count;
                                                    } else GALogger.w("validateAndCleanCustomFields: entry with key=" + key + ", value=" + value + " has been omitted because its value is not a string or number");
                                                } else
                                                    GALogger.w(
                                                        "validateAndCleanCustomFields: entry with key=" +
                                                            key +
                                                            ", value=" +
                                                            value +
                                                            " has been omitted because its key contains illegal character, is empty or exceeds the max number of characters (" +
                                                            GAState.MAX_CUSTOM_FIELDS_KEY_LENGTH +
                                                            ")"
                                                    );
                                            } else
                                                GALogger.w(
                                                    "validateAndCleanCustomFields: entry with key=" +
                                                        key +
                                                        ", value=" +
                                                        value +
                                                        " has been omitted because it exceeds the max number of custom fields (" +
                                                        GAState.MAX_CUSTOM_FIELDS_COUNT +
                                                        ")"
                                                );
                                        else GALogger.w("validateAndCleanCustomFields: entry with key=" + key + ", value=" + value + " has been omitted because its key or value is null");
                                    }
                                }
                                return result;
                            }),
                            (GAState.validateAndFixCurrentDimensions = function () {
                                GAValidator.validateDimension01(GAState.getCurrentCustomDimension01(), GAState.getAvailableCustomDimensions01()) || GAState.setCustomDimension01(""),
                                    GAValidator.validateDimension02(GAState.getCurrentCustomDimension02(), GAState.getAvailableCustomDimensions02()) || GAState.setCustomDimension02(""),
                                    GAValidator.validateDimension03(GAState.getCurrentCustomDimension03(), GAState.getAvailableCustomDimensions03()) || GAState.setCustomDimension03("");
                            }),
                            (GAState.getConfigurationStringValue = function (key, defaultValue) {
                                return GAState.instance.configurations[key] ? GAState.instance.configurations[key].toString() : defaultValue;
                            }),
                            (GAState.isCommandCenterReady = function () {
                                return GAState.instance.commandCenterIsReady;
                            }),
                            (GAState.addCommandCenterListener = function (listener) {
                                GAState.instance.commandCenterListeners.indexOf(listener) < 0 && GAState.instance.commandCenterListeners.push(listener);
                            }),
                            (GAState.removeCommandCenterListener = function (listener) {
                                var index = GAState.instance.commandCenterListeners.indexOf(listener);
                                -1 < index && GAState.instance.commandCenterListeners.splice(index, 1);
                            }),
                            (GAState.getConfigurationsContentAsString = function () {
                                return JSON.stringify(GAState.instance.configurations);
                            }),
                            (GAState.populateConfigurations = function (sdkConfig) {
                                var configurations = sdkConfig.configurations;
                                if (configurations)
                                    for (var i = 0; i < configurations.length; ++i) {
                                        var configuration = configurations[i];
                                        if (configuration) {
                                            var key = configuration.key,
                                                value = configuration.value,
                                                start_ts = configuration.start ? configuration.start : Number.MIN_VALUE,
                                                end_ts = configuration.end ? configuration.end : Number.MAX_VALUE,
                                                client_ts_adjusted = GAState.getClientTsAdjusted();
                                            key && value && start_ts < client_ts_adjusted && client_ts_adjusted < end_ts && (GAState.instance.configurations[key] = value);
                                        }
                                    }
                                GAState.instance.commandCenterIsReady = !0;
                                var listeners = GAState.instance.commandCenterListeners;
                                for (i = 0; i < listeners.length; ++i) listeners[i] && listeners[i].onCommandCenterUpdated();
                            }),
                            (GAState.CategorySdkError = "sdk_error"),
                            (GAState.MAX_CUSTOM_FIELDS_COUNT = 50),
                            (GAState.MAX_CUSTOM_FIELDS_KEY_LENGTH = 64),
                            (GAState.MAX_CUSTOM_FIELDS_VALUE_STRING_LENGTH = 256),
                            (GAState.instance = new GAState()),
                            (GAState.DefaultUserIdKey = "default_user_id"),
                            (GAState.SessionNumKey = "session_num"),
                            (GAState.TransactionNumKey = "transaction_num"),
                            (GAState.FacebookIdKey = "facebook_id"),
                            (GAState.GenderKey = "gender"),
                            (GAState.BirthYearKey = "birth_year"),
                            (GAState.Dimension01Key = "dimension01"),
                            (GAState.Dimension02Key = "dimension02"),
                            (GAState.Dimension03Key = "dimension03"),
                            (GAState.SdkConfigCachedKey = "sdk_config_cached"),
                            GAState
                        );
                    })();
                state.GAState = GAState;
            })(gameanalytics.state || (gameanalytics.state = {}));
        })(gameanalytics || (gameanalytics = {})),
        (function (gameanalytics) {
            !(function (tasks) {
                var GAUtilities = gameanalytics.utilities.GAUtilities,
                    GALogger = gameanalytics.logging.GALogger,
                    SdkErrorTask = (function () {
                        function SdkErrorTask() {}
                        return (
                            (SdkErrorTask.execute = function (url, type, payloadData, secretKey) {
                                if ((SdkErrorTask.countMap[type] || (SdkErrorTask.countMap[type] = 0), !(SdkErrorTask.countMap[type] >= SdkErrorTask.MaxCount))) {
                                    var hashHmac = GAUtilities.getHmac(secretKey, payloadData),
                                        request = new XMLHttpRequest();
                                    (request.onreadystatechange = function () {
                                        if (4 === request.readyState) {
                                            if (!request.responseText) return;
                                            if (200 != request.status)
                                                return void GALogger.w("sdk error failed. response code not 200. status code: " + request.status + ", description: " + request.statusText + ", body: " + request.responseText);
                                            SdkErrorTask.countMap[type] = SdkErrorTask.countMap[type] + 1;
                                        }
                                    }),
                                        request.open("POST", url, !0),
                                        request.setRequestHeader("Content-Type", "application/json"),
                                        request.setRequestHeader("Authorization", hashHmac);
                                    try {
                                        request.send(payloadData);
                                    } catch (e) {}
                                }
                            }),
                            (SdkErrorTask.MaxCount = 10),
                            (SdkErrorTask.countMap = {}),
                            SdkErrorTask
                        );
                    })();
                tasks.SdkErrorTask = SdkErrorTask;
            })(gameanalytics.tasks || (gameanalytics.tasks = {}));
        })(gameanalytics || (gameanalytics = {})),
        (function (gameanalytics) {
            !(function (http) {
                var GAState = gameanalytics.state.GAState,
                    GALogger = gameanalytics.logging.GALogger,
                    GAUtilities = gameanalytics.utilities.GAUtilities,
                    GAValidator = gameanalytics.validators.GAValidator,
                    SdkErrorTask = gameanalytics.tasks.SdkErrorTask,
                    GAHTTPApi = (function () {
                        function GAHTTPApi() {}
                        return (
                            (GAHTTPApi.prototype.requestInit = function (callback) {}),
                            (GAHTTPApi.prototype.sendEventsInArray = function (eventArray, requestId, callback) {
                                if (0 != eventArray.length) {
                                    var gameKey = GAState.getGameKey(),
                                        url = this.baseUrl + "/" + gameKey + "/" + this.eventsUrlPath,
                                        JSONstring = JSON.stringify(eventArray);
                                    if (JSONstring) {
                                        var payloadData = this.createPayloadData(JSONstring, this.useGzip),
                                            extraArgs = [];
                                        extraArgs.push(JSONstring),
                                            extraArgs.push(requestId),
                                            extraArgs.push(eventArray.length.toString()),
                                            GAHTTPApi.sendRequest(url, payloadData, extraArgs, this.useGzip, GAHTTPApi.sendEventInArrayRequestCallback, callback);
                                    } else callback(http.EGAHTTPApiResponse.JsonEncodeFailed, null, requestId, eventArray.length);
                                }
                            }),
                            (GAHTTPApi.prototype.sendSdkErrorEvent = function (type) {
                                if (GAState.isEventSubmissionEnabled()) {
                                    var gameKey = GAState.getGameKey(),
                                        secretKey = GAState.getGameSecret();
                                    if (GAValidator.validateSdkErrorEvent(gameKey, secretKey, type)) {
                                        var payloadJSONString,
                                            url = this.baseUrl + "/" + gameKey + "/" + this.eventsUrlPath,
                                            json = GAState.getSdkErrorEventAnnotations(),
                                            typeString = GAHTTPApi.sdkErrorTypeToString(type);
                                        json.type = typeString;
                                        var eventArray = [];
                                        eventArray.push(json), (payloadJSONString = JSON.stringify(eventArray)) ? SdkErrorTask.execute(url, type, payloadJSONString, secretKey) : GALogger.w("sendSdkErrorEvent: JSON encoding failed.");
                                    }
                                }
                            }),
                            (GAHTTPApi.sendEventInArrayRequestCallback = function (request, url, callback, extra) {
                                void 0 === extra && (extra = null);
                                extra[0], extra[1];
                                var body,
                                    responseCode,
                                    requestId = extra[2],
                                    eventCount = parseInt(extra[3]);
                                (body = request.responseText), (responseCode = request.status);
                                var requestResponseEnum = GAHTTPApi.instance.processRequestResponse(responseCode, request.statusText, body, "Events");
                                if (requestResponseEnum == http.EGAHTTPApiResponse.Ok || requestResponseEnum == http.EGAHTTPApiResponse.BadRequest) {
                                    var requestJsonDict = body ? JSON.parse(body) : {};
                                    null != requestJsonDict
                                        ? (http.EGAHTTPApiResponse.BadRequest, callback(requestResponseEnum, requestJsonDict, requestId, eventCount))
                                        : callback(http.EGAHTTPApiResponse.JsonDecodeFailed, null, requestId, eventCount);
                                } else callback(requestResponseEnum, null, requestId, eventCount);
                            }),
                            (GAHTTPApi.sendRequest = function (url, payloadData, extraArgs, gzip, callback, callback2) {
                                var request = new XMLHttpRequest(),
                                    key = GAState.getGameSecret(),
                                    authorization = GAUtilities.getHmac(key, payloadData),
                                    args = [];
                                for (var s in (args.push(authorization), extraArgs)) args.push(extraArgs[s]);
                                if (
                                    ((request.onreadystatechange = function () {
                                        4 === request.readyState && callback(request, url, callback2, args);
                                    }),
                                    request.open("POST", url, !0),
                                    request.setRequestHeader("Content-Type", "text/plain"),
                                    request.setRequestHeader("Authorization", authorization),
                                    gzip)
                                )
                                    throw new Error("gzip not supported");
                                try {
                                    request.send(payloadData);
                                } catch (e) {}
                            }),
                            (GAHTTPApi.initRequestCallback = function (request, url, callback, extra) {
                                void 0 === extra && (extra = null);
                                var body, responseCode;
                                extra[0], extra[1];
                                (body = request.responseText), (responseCode = request.status);
                                var requestJsonDict = body ? JSON.parse(body) : {},
                                    requestResponseEnum = GAHTTPApi.instance.processRequestResponse(responseCode, request.statusText, body, "Init");
                                if (requestResponseEnum == http.EGAHTTPApiResponse.Ok || requestResponseEnum == http.EGAHTTPApiResponse.BadRequest)
                                    if (null != requestJsonDict)
                                        if (requestResponseEnum !== http.EGAHTTPApiResponse.BadRequest) {
                                            var validatedInitValues = GAValidator.validateAndCleanInitRequestResponse(requestJsonDict);
                                            validatedInitValues ? callback(http.EGAHTTPApiResponse.Ok, validatedInitValues, "", 0) : callback(http.EGAHTTPApiResponse.BadResponse, null, "", 0);
                                        } else callback(requestResponseEnum, null, "", 0);
                                    else callback(http.EGAHTTPApiResponse.JsonDecodeFailed, null, "", 0);
                                else callback(requestResponseEnum, null, "", 0);
                            }),
                            (GAHTTPApi.prototype.createPayloadData = function (payload, gzip) {
                                if (gzip) throw new Error("gzip not supported");
                                return payload;
                            }),
                            (GAHTTPApi.prototype.processRequestResponse = function (responseCode, responseMessage, body, requestId) {
                                return body
                                    ? 200 === responseCode
                                        ? http.EGAHTTPApiResponse.Ok
                                        : 0 === responseCode || 401 === responseCode
                                        ? http.EGAHTTPApiResponse.Unauthorized
                                        : 400 === responseCode
                                        ? http.EGAHTTPApiResponse.BadRequest
                                        : 500 === responseCode
                                        ? http.EGAHTTPApiResponse.InternalServerError
                                        : http.EGAHTTPApiResponse.UnknownResponseCode
                                    : http.EGAHTTPApiResponse.NoResponse;
                            }),
                            (GAHTTPApi.sdkErrorTypeToString = function (value) {
                                switch (value) {
                                    case http.EGASdkErrorType.Rejected:
                                        return "rejected";
                                    default:
                                        return "";
                                }
                            }),
                            (GAHTTPApi.instance = new GAHTTPApi()),
                            GAHTTPApi
                        );
                    })();
                http.GAHTTPApi = GAHTTPApi;
            })(gameanalytics.http || (gameanalytics.http = {}));
        })(gameanalytics || (gameanalytics = {})),
        (function (gameanalytics) {
            var events_1, GAStore, EGAStore, EGAStoreArgsOperator, GAState, GALogger, GAUtilities, EGAHTTPApiResponse, GAHTTPApi, GAValidator, EGASdkErrorType, GAEvents;
            (events_1 = gameanalytics.events || (gameanalytics.events = {})),
                (GAStore = gameanalytics.store.GAStore),
                (EGAStore = gameanalytics.store.EGAStore),
                (EGAStoreArgsOperator = gameanalytics.store.EGAStoreArgsOperator),
                (GAState = gameanalytics.state.GAState),
                (GALogger = gameanalytics.logging.GALogger),
                (GAUtilities = gameanalytics.utilities.GAUtilities),
                (EGAHTTPApiResponse = gameanalytics.http.EGAHTTPApiResponse),
                (GAHTTPApi = gameanalytics.http.GAHTTPApi),
                (GAValidator = gameanalytics.validators.GAValidator),
                (EGASdkErrorType = gameanalytics.http.EGASdkErrorType),
                (GAEvents = (function () {
                    function GAEvents() {}
                    return (
                        (GAEvents.addSessionStartEvent = function () {
                            if (GAState.isEventSubmissionEnabled()) {
                                var eventDict = {};
                                (eventDict.category = GAEvents.CategorySessionStart),
                                    GAState.incrementSessionNum(),
                                    GAStore.setItem(GAState.SessionNumKey, GAState.getSessionNum().toString()),
                                    GAEvents.addDimensionsToEvent(eventDict),
                                    GAEvents.addEventToStore(eventDict),
                                    GALogger.i("Add SESSION START event"),
                                    GAEvents.processEvents(GAEvents.CategorySessionStart, !1);
                            }
                        }),
                        (GAEvents.addSessionEndEvent = function () {
                            if (GAState.isEventSubmissionEnabled()) {
                                var session_start_ts = GAState.getSessionStart(),
                                    sessionLength = GAState.getClientTsAdjusted() - session_start_ts;
                                sessionLength < 0 && (GALogger.w("Session length was calculated to be less then 0. Should not be possible. Resetting to 0."), (sessionLength = 0));
                                var eventDict = {};
                                (eventDict.category = GAEvents.CategorySessionEnd),
                                    (eventDict.length = sessionLength),
                                    GAEvents.addDimensionsToEvent(eventDict),
                                    GAEvents.addEventToStore(eventDict),
                                    GALogger.i("Add SESSION END event."),
                                    GAEvents.processEvents("", !1);
                            }
                        }),
                        (GAEvents.addBusinessEvent = function (currency, amount, itemType, itemId, cartType, fields) {
                            if ((void 0 === cartType && (cartType = null), GAState.isEventSubmissionEnabled()))
                                if (GAValidator.validateBusinessEvent(currency, amount, cartType, itemType, itemId)) {
                                    var eventDict = {};
                                    GAState.incrementTransactionNum(),
                                        GAStore.setItem(GAState.TransactionNumKey, GAState.getTransactionNum().toString()),
                                        (eventDict.event_id = itemType + ":" + itemId),
                                        (eventDict.category = GAEvents.CategoryBusiness),
                                        (eventDict.currency = currency),
                                        (eventDict.amount = amount),
                                        (eventDict[GAState.TransactionNumKey] = GAState.getTransactionNum()),
                                        cartType && (eventDict.cart_type = cartType),
                                        GAEvents.addDimensionsToEvent(eventDict),
                                        GAEvents.addFieldsToEvent(eventDict, GAState.validateAndCleanCustomFields(fields)),
                                        GALogger.i("Add BUSINESS event: {currency:" + currency + ", amount:" + amount + ", itemType:" + itemType + ", itemId:" + itemId + ", cartType:" + cartType + "}"),
                                        GAEvents.addEventToStore(eventDict);
                                } else GAHTTPApi.instance.sendSdkErrorEvent(EGASdkErrorType.Rejected);
                        }),
                        (GAEvents.addResourceEvent = function (flowType, currency, amount, itemType, itemId, fields) {
                            if (GAState.isEventSubmissionEnabled())
                                if (GAValidator.validateResourceEvent(flowType, currency, amount, itemType, itemId, GAState.getAvailableResourceCurrencies(), GAState.getAvailableResourceItemTypes())) {
                                    flowType === gameanalytics.EGAResourceFlowType.Sink && (amount *= -1);
                                    var eventDict = {},
                                        flowTypeString = GAEvents.resourceFlowTypeToString(flowType);
                                    (eventDict.event_id = flowTypeString + ":" + currency + ":" + itemType + ":" + itemId),
                                        (eventDict.category = GAEvents.CategoryResource),
                                        (eventDict.amount = amount),
                                        GAEvents.addDimensionsToEvent(eventDict),
                                        GAEvents.addFieldsToEvent(eventDict, GAState.validateAndCleanCustomFields(fields)),
                                        GALogger.i("Add RESOURCE event: {currency:" + currency + ", amount:" + amount + ", itemType:" + itemType + ", itemId:" + itemId + "}"),
                                        GAEvents.addEventToStore(eventDict);
                                } else GAHTTPApi.instance.sendSdkErrorEvent(EGASdkErrorType.Rejected);
                        }),
                        (GAEvents.addProgressionEvent = function (progressionStatus, progression01, progression02, progression03, score, sendScore, fields) {
                            if (GAState.isEventSubmissionEnabled()) {
                                var progressionStatusString = GAEvents.progressionStatusToString(progressionStatus);
                                if (GAValidator.validateProgressionEvent(progressionStatus, progression01, progression02, progression03)) {
                                    var progressionIdentifier,
                                        eventDict = {};
                                    (progressionIdentifier = progression02 ? (progression03 ? progression01 + ":" + progression02 + ":" + progression03 : progression01 + ":" + progression02) : progression01),
                                        (eventDict.category = GAEvents.CategoryProgression),
                                        (eventDict.event_id = progressionStatusString + ":" + progressionIdentifier);
                                    var attempt_num = 0;
                                    sendScore && progressionStatus != gameanalytics.EGAProgressionStatus.Start && (eventDict.score = score),
                                        progressionStatus === gameanalytics.EGAProgressionStatus.Fail && GAState.incrementProgressionTries(progressionIdentifier),
                                        progressionStatus === gameanalytics.EGAProgressionStatus.Complete &&
                                            (GAState.incrementProgressionTries(progressionIdentifier),
                                            (attempt_num = GAState.getProgressionTries(progressionIdentifier)),
                                            (eventDict.attempt_num = attempt_num),
                                            GAState.clearProgressionTries(progressionIdentifier)),
                                        GAEvents.addDimensionsToEvent(eventDict),
                                        GAEvents.addFieldsToEvent(eventDict, GAState.validateAndCleanCustomFields(fields)),
                                        GALogger.i(
                                            "Add PROGRESSION event: {status:" +
                                                progressionStatusString +
                                                ", progression01:" +
                                                progression01 +
                                                ", progression02:" +
                                                progression02 +
                                                ", progression03:" +
                                                progression03 +
                                                ", score:" +
                                                score +
                                                ", attempt:" +
                                                attempt_num +
                                                "}"
                                        ),
                                        GAEvents.addEventToStore(eventDict);
                                } else GAHTTPApi.instance.sendSdkErrorEvent(EGASdkErrorType.Rejected);
                            }
                        }),
                        (GAEvents.addDesignEvent = function (eventId, value, sendValue, fields) {
                            if (GAState.isEventSubmissionEnabled())
                                if (GAValidator.validateDesignEvent(eventId, value)) {
                                    var eventData = {};
                                    (eventData.category = GAEvents.CategoryDesign),
                                        (eventData.event_id = eventId),
                                        sendValue && (eventData.value = value),
                                        GAEvents.addDimensionsToEvent(eventData),
                                        GAEvents.addFieldsToEvent(eventData, GAState.validateAndCleanCustomFields(fields)),
                                        GALogger.i("Add DESIGN event: {eventId:" + eventId + ", value:" + value + "}"),
                                        GAEvents.addEventToStore(eventData);
                                } else GAHTTPApi.instance.sendSdkErrorEvent(EGASdkErrorType.Rejected);
                        }),
                        (GAEvents.addErrorEvent = function (severity, message, fields) {
                            if (GAState.isEventSubmissionEnabled()) {
                                var severityString = GAEvents.errorSeverityToString(severity);
                                if (GAValidator.validateErrorEvent(severity, message)) {
                                    var eventData = {};
                                    (eventData.category = GAEvents.CategoryError),
                                        (eventData.severity = severityString),
                                        (eventData.message = message),
                                        GAEvents.addDimensionsToEvent(eventData),
                                        GAEvents.addFieldsToEvent(eventData, GAState.validateAndCleanCustomFields(fields)),
                                        GALogger.i("Add ERROR event: {severity:" + severityString + ", message:" + message + "}"),
                                        GAEvents.addEventToStore(eventData);
                                } else GAHTTPApi.instance.sendSdkErrorEvent(EGASdkErrorType.Rejected);
                            }
                        }),
                        (GAEvents.processEvents = function (category, performCleanUp) {
                            if (GAState.isEventSubmissionEnabled())
                                try {
                                    var requestIdentifier = GAUtilities.createGuid();
                                    performCleanUp && (GAEvents.cleanupEvents(), GAEvents.fixMissingSessionEndEvents());
                                    var selectArgs = [];
                                    selectArgs.push(["status", EGAStoreArgsOperator.Equal, "new"]);
                                    var updateWhereArgs = [];
                                    updateWhereArgs.push(["status", EGAStoreArgsOperator.Equal, "new"]),
                                        category && (selectArgs.push(["category", EGAStoreArgsOperator.Equal, category]), updateWhereArgs.push(["category", EGAStoreArgsOperator.Equal, category]));
                                    var updateSetArgs = [];
                                    updateSetArgs.push(["status", requestIdentifier]);
                                    var events = GAStore.select(EGAStore.Events, selectArgs);
                                    if (!events || 0 == events.length) return GALogger.i("Event queue: No events to send"), void GAEvents.updateSessionStore();
                                    if (events.length > GAEvents.MaxEventCount) {
                                        if (!(events = GAStore.select(EGAStore.Events, selectArgs, !0, GAEvents.MaxEventCount))) return;
                                        var lastTimestamp = events[events.length - 1].client_ts;
                                        if ((selectArgs.push(["client_ts", EGAStoreArgsOperator.LessOrEqual, lastTimestamp]), !(events = GAStore.select(EGAStore.Events, selectArgs)))) return;
                                        updateWhereArgs.push(["client_ts", EGAStoreArgsOperator.LessOrEqual, lastTimestamp]);
                                    }
                                    if ((GALogger.i("Event queue: Sending " + events.length + " events."), !GAStore.update(EGAStore.Events, updateSetArgs, updateWhereArgs))) return;
                                    for (var payloadArray = [], i = 0; i < events.length; ++i) {
                                        var ev = events[i],
                                            eventDict = JSON.parse(GAUtilities.decode64(ev.event));
                                        0 != eventDict.length && payloadArray.push(eventDict);
                                    }
                                    GAHTTPApi.instance.sendEventsInArray(payloadArray, requestIdentifier, GAEvents.processEventsCallback);
                                } catch (e) {
                                    GALogger.e("Error during ProcessEvents(): " + e.stack);
                                }
                        }),
                        (GAEvents.processEventsCallback = function (responseEnum, dataDict, requestId, eventCount) {
                            var requestIdWhereArgs = [];
                            if ((requestIdWhereArgs.push(["status", EGAStoreArgsOperator.Equal, requestId]), responseEnum === EGAHTTPApiResponse.Ok))
                                GAStore.delete(EGAStore.Events, requestIdWhereArgs), GALogger.i("Event queue: " + eventCount + " events sent.");
                            else if (responseEnum === EGAHTTPApiResponse.NoResponse) {
                                var setArgs = [];
                                setArgs.push(["status", "new"]), GALogger.w("Event queue: Failed to send events to collector - Retrying next time"), GAStore.update(EGAStore.Events, setArgs, requestIdWhereArgs);
                            } else {
                                if (dataDict) {
                                    var json,
                                        count = 0;
                                    for (var j in dataDict) 0 == count && (json = dataDict[j]), ++count;
                                    responseEnum === EGAHTTPApiResponse.BadRequest && json.constructor === Array
                                        ? GALogger.w("Event queue: " + eventCount + " events sent. " + count + " events failed GA server validation.")
                                        : GALogger.w("Event queue: Failed to send events.");
                                } else GALogger.w("Event queue: Failed to send events.");
                                GAStore.delete(EGAStore.Events, requestIdWhereArgs);
                            }
                        }),
                        (GAEvents.cleanupEvents = function () {
                            GAStore.update(EGAStore.Events, [["status", "new"]]);
                        }),
                        (GAEvents.fixMissingSessionEndEvents = function () {
                            if (GAState.isEventSubmissionEnabled()) {
                                var args = [];
                                args.push(["session_id", EGAStoreArgsOperator.NotEqual, GAState.getSessionId()]);
                                var sessions = GAStore.select(EGAStore.Sessions, args);
                                if (sessions && 0 != sessions.length) {
                                    GALogger.i(sessions.length + " session(s) located with missing session_end event.");
                                    for (var i = 0; i < sessions.length; ++i) {
                                        var sessionEndEvent = JSON.parse(GAUtilities.decode64(sessions[i].event)),
                                            length = sessionEndEvent.client_ts - sessions[i].timestamp;
                                        (length = Math.max(0, length)), (sessionEndEvent.category = GAEvents.CategorySessionEnd), (sessionEndEvent.length = length), GAEvents.addEventToStore(sessionEndEvent);
                                    }
                                }
                            }
                        }),
                        (GAEvents.addEventToStore = function (eventData) {
                            if (GAState.isEventSubmissionEnabled())
                                if (GAState.isInitialized())
                                    try {
                                        if (GAStore.isStoreTooLargeForEvents() && !GAUtilities.stringMatch(eventData.category, /^(user|session_end|business)$/)) return void GALogger.w("Database too large. Event has been blocked.");
                                        var ev = GAState.getEventAnnotations(),
                                            jsonDefaults = GAUtilities.encode64(JSON.stringify(ev));
                                        for (var e in eventData) ev[e] = eventData[e];
                                        var json = JSON.stringify(ev);
                                        GALogger.ii("Event added to queue: " + json);
                                        var values = { status: "new" };
                                        (values.category = ev.category),
                                            (values.session_id = ev.session_id),
                                            (values.client_ts = ev.client_ts),
                                            (values.event = GAUtilities.encode64(JSON.stringify(ev))),
                                            GAStore.insert(EGAStore.Events, values),
                                            eventData.category == GAEvents.CategorySessionEnd
                                                ? GAStore.delete(EGAStore.Sessions, [["session_id", EGAStoreArgsOperator.Equal, ev.session_id]])
                                                : (((values = {}).session_id = ev.session_id), (values.timestamp = GAState.getSessionStart()), (values.event = jsonDefaults), GAStore.insert(EGAStore.Sessions, values, !0, "session_id")),
                                            GAStore.isStorageAvailable() && GAStore.save();
                                    } catch (e) {
                                        GALogger.e("addEventToStore: error"), GALogger.e(e.stack);
                                    }
                                else GALogger.w("Could not add event: SDK is not initialized");
                        }),
                        (GAEvents.updateSessionStore = function () {
                            if (GAState.sessionIsStarted()) {
                                var values = {};
                                (values.session_id = GAState.instance.sessionId),
                                    (values.timestamp = GAState.getSessionStart()),
                                    (values.event = GAUtilities.encode64(JSON.stringify(GAState.getEventAnnotations()))),
                                    GAStore.insert(EGAStore.Sessions, values, !0, "session_id"),
                                    GAStore.isStorageAvailable() && GAStore.save();
                            }
                        }),
                        (GAEvents.addDimensionsToEvent = function (eventData) {
                            eventData &&
                                (GAState.getCurrentCustomDimension01() && (eventData.custom_01 = GAState.getCurrentCustomDimension01()),
                                GAState.getCurrentCustomDimension02() && (eventData.custom_02 = GAState.getCurrentCustomDimension02()),
                                GAState.getCurrentCustomDimension03() && (eventData.custom_03 = GAState.getCurrentCustomDimension03()));
                        }),
                        (GAEvents.addFieldsToEvent = function (eventData, fields) {
                            eventData && fields && 0 < Object.keys(fields).length && (eventData.custom_fields = fields);
                        }),
                        (GAEvents.resourceFlowTypeToString = function (value) {
                            return value == gameanalytics.EGAResourceFlowType.Source || value == gameanalytics.EGAResourceFlowType[gameanalytics.EGAResourceFlowType.Source]
                                ? "Source"
                                : value == gameanalytics.EGAResourceFlowType.Sink || value == gameanalytics.EGAResourceFlowType[gameanalytics.EGAResourceFlowType.Sink]
                                ? "Sink"
                                : "";
                        }),
                        (GAEvents.progressionStatusToString = function (value) {
                            return value == gameanalytics.EGAProgressionStatus.Start || value == gameanalytics.EGAProgressionStatus[gameanalytics.EGAProgressionStatus.Start]
                                ? "Start"
                                : value == gameanalytics.EGAProgressionStatus.Complete || value == gameanalytics.EGAProgressionStatus[gameanalytics.EGAProgressionStatus.Complete]
                                ? "Complete"
                                : value == gameanalytics.EGAProgressionStatus.Fail || value == gameanalytics.EGAProgressionStatus[gameanalytics.EGAProgressionStatus.Fail]
                                ? "Fail"
                                : "";
                        }),
                        (GAEvents.errorSeverityToString = function (value) {
                            return value == gameanalytics.EGAErrorSeverity.Debug || value == gameanalytics.EGAErrorSeverity[gameanalytics.EGAErrorSeverity.Debug]
                                ? "debug"
                                : value == gameanalytics.EGAErrorSeverity.Info || value == gameanalytics.EGAErrorSeverity[gameanalytics.EGAErrorSeverity.Info]
                                ? "info"
                                : value == gameanalytics.EGAErrorSeverity.Warning || value == gameanalytics.EGAErrorSeverity[gameanalytics.EGAErrorSeverity.Warning]
                                ? "warning"
                                : value == gameanalytics.EGAErrorSeverity.Error || value == gameanalytics.EGAErrorSeverity[gameanalytics.EGAErrorSeverity.Error]
                                ? "error"
                                : value == gameanalytics.EGAErrorSeverity.Critical || value == gameanalytics.EGAErrorSeverity[gameanalytics.EGAErrorSeverity.Critical]
                                ? "critical"
                                : "";
                        }),
                        (GAEvents.instance = new GAEvents()),
                        (GAEvents.CategorySessionStart = "user"),
                        (GAEvents.CategorySessionEnd = "session_end"),
                        (GAEvents.CategoryDesign = "design"),
                        (GAEvents.CategoryBusiness = "business"),
                        (GAEvents.CategoryProgression = "progression"),
                        (GAEvents.CategoryResource = "resource"),
                        (GAEvents.CategoryError = "error"),
                        (GAEvents.MaxEventCount = 500),
                        GAEvents
                    );
                })()),
                (events_1.GAEvents = GAEvents);
        })(gameanalytics || (gameanalytics = {})),
        (function (gameanalytics) {
            !(function (threading) {
                var GALogger = gameanalytics.logging.GALogger,
                    GAState = gameanalytics.state.GAState,
                    GAEvents = gameanalytics.events.GAEvents,
                    GAThreading = (function () {
                        function GAThreading() {
                            (this.blocks = new threading.PriorityQueue({
                                compare: function (x, y) {
                                    return x - y;
                                },
                            })),
                                (this.id2TimedBlockMap = {}),
                                GAThreading.startThread();
                        }
                        return (
                            (GAThreading.createTimedBlock = function (delayInSeconds) {
                                void 0 === delayInSeconds && (delayInSeconds = 0);
                                var time = new Date();
                                return time.setSeconds(time.getSeconds() + delayInSeconds), new threading.TimedBlock(time);
                            }),
                            (GAThreading.performTaskOnGAThread = function (taskBlock, delayInSeconds) {
                                void 0 === delayInSeconds && (delayInSeconds = 0);
                                var time = new Date();
                                time.setSeconds(time.getSeconds() + delayInSeconds);
                                var timedBlock = new threading.TimedBlock(time);
                                (timedBlock.block = taskBlock), (GAThreading.instance.id2TimedBlockMap[timedBlock.id] = timedBlock), GAThreading.instance.addTimedBlock(timedBlock);
                            }),
                            (GAThreading.performTimedBlockOnGAThread = function (timedBlock) {
                                (GAThreading.instance.id2TimedBlockMap[timedBlock.id] = timedBlock), GAThreading.instance.addTimedBlock(timedBlock);
                            }),
                            (GAThreading.scheduleTimer = function (interval, callback) {
                                var time = new Date();
                                time.setSeconds(time.getSeconds() + interval);
                                var timedBlock = new threading.TimedBlock(time);
                                return (timedBlock.block = callback), (GAThreading.instance.id2TimedBlockMap[timedBlock.id] = timedBlock), GAThreading.instance.addTimedBlock(timedBlock), timedBlock.id;
                            }),
                            (GAThreading.getTimedBlockById = function (blockIdentifier) {
                                return blockIdentifier in GAThreading.instance.id2TimedBlockMap ? GAThreading.instance.id2TimedBlockMap[blockIdentifier] : null;
                            }),
                            (GAThreading.ensureEventQueueIsRunning = function () {
                                (GAThreading.instance.keepRunning = !0),
                                    GAThreading.instance.isRunning || ((GAThreading.instance.isRunning = !0), GAThreading.scheduleTimer(GAThreading.ProcessEventsIntervalInSeconds, GAThreading.processEventQueue));
                            }),
                            (GAThreading.endSessionAndStopQueue = function () {
                                GAState.isInitialized() &&
                                    (GALogger.i("Ending session."), GAThreading.stopEventQueue(), GAState.isEnabled() && GAState.sessionIsStarted() && (GAEvents.addSessionEndEvent(), (GAState.instance.sessionStart = 0)));
                            }),
                            (GAThreading.stopEventQueue = function () {
                                GAThreading.instance.keepRunning = !1;
                            }),
                            (GAThreading.ignoreTimer = function (blockIdentifier) {
                                blockIdentifier in GAThreading.instance.id2TimedBlockMap && (GAThreading.instance.id2TimedBlockMap[blockIdentifier].ignore = !0);
                            }),
                            (GAThreading.setEventProcessInterval = function (interval) {
                                0 < interval && (GAThreading.ProcessEventsIntervalInSeconds = interval);
                            }),
                            (GAThreading.prototype.addTimedBlock = function (timedBlock) {
                                this.blocks.enqueue(timedBlock.deadline.getTime(), timedBlock);
                            }),
                            (GAThreading.run = function () {
                                clearTimeout(GAThreading.runTimeoutId);
                                try {
                                    for (var timedBlock; (timedBlock = GAThreading.getNextBlock()); )
                                        if (!timedBlock.ignore)
                                            if (timedBlock.async) {
                                                if (!timedBlock.running) {
                                                    (timedBlock.running = !0), timedBlock.block();
                                                    break;
                                                }
                                            } else timedBlock.block();
                                    return void (GAThreading.runTimeoutId = setTimeout(GAThreading.run, GAThreading.ThreadWaitTimeInMs));
                                } catch (e) {
                                    GALogger.e("Error on GA thread"), GALogger.e(e.stack);
                                }
                            }),
                            (GAThreading.startThread = function () {
                                GAThreading.runTimeoutId = setTimeout(GAThreading.run, 0);
                            }),
                            (GAThreading.getNextBlock = function () {
                                var now = new Date();
                                return GAThreading.instance.blocks.hasItems() && GAThreading.instance.blocks.peek().deadline.getTime() <= now.getTime()
                                    ? GAThreading.instance.blocks.peek().async && GAThreading.instance.blocks.peek().running
                                        ? GAThreading.instance.blocks.peek()
                                        : GAThreading.instance.blocks.dequeue()
                                    : null;
                            }),
                            (GAThreading.processEventQueue = function () {
                                GAEvents.processEvents("", !0), GAThreading.instance.keepRunning ? GAThreading.scheduleTimer(GAThreading.ProcessEventsIntervalInSeconds, GAThreading.processEventQueue) : (GAThreading.instance.isRunning = !1);
                            }),
                            (GAThreading.instance = new GAThreading()),
                            (GAThreading.ThreadWaitTimeInMs = 1e3),
                            (GAThreading.ProcessEventsIntervalInSeconds = 8),
                            GAThreading
                        );
                    })();
                threading.GAThreading = GAThreading;
            })(gameanalytics.threading || (gameanalytics.threading = {}));
        })(gameanalytics || (gameanalytics = {})),
        (function (gameanalytics) {
            var GAThreading = gameanalytics.threading.GAThreading,
                GALogger = gameanalytics.logging.GALogger,
                GAStore = gameanalytics.store.GAStore,
                GAState = gameanalytics.state.GAState,
                GAHTTPApi = gameanalytics.http.GAHTTPApi,
                GADevice = gameanalytics.device.GADevice,
                GAValidator = gameanalytics.validators.GAValidator,
                EGAHTTPApiResponse = gameanalytics.http.EGAHTTPApiResponse,
                GAUtilities = gameanalytics.utilities.GAUtilities,
                GAEvents = gameanalytics.events.GAEvents,
                GameAnalytics = (function () {
                    function GameAnalytics() {}
                    return (
                        (GameAnalytics.init = function () {
                            if (
                                (GADevice.touch(),
                                (GameAnalytics.methodMap.configureAvailableCustomDimensions01 = GameAnalytics.configureAvailableCustomDimensions01),
                                (GameAnalytics.methodMap.configureAvailableCustomDimensions02 = GameAnalytics.configureAvailableCustomDimensions02),
                                (GameAnalytics.methodMap.configureAvailableCustomDimensions03 = GameAnalytics.configureAvailableCustomDimensions03),
                                (GameAnalytics.methodMap.configureAvailableResourceCurrencies = GameAnalytics.configureAvailableResourceCurrencies),
                                (GameAnalytics.methodMap.configureAvailableResourceItemTypes = GameAnalytics.configureAvailableResourceItemTypes),
                                (GameAnalytics.methodMap.configureBuild = GameAnalytics.configureBuild),
                                (GameAnalytics.methodMap.configureSdkGameEngineVersion = GameAnalytics.configureSdkGameEngineVersion),
                                (GameAnalytics.methodMap.configureGameEngineVersion = GameAnalytics.configureGameEngineVersion),
                                (GameAnalytics.methodMap.configureUserId = GameAnalytics.configureUserId),
                                (GameAnalytics.methodMap.initialize = GameAnalytics.initialize),
                                (GameAnalytics.methodMap.addBusinessEvent = GameAnalytics.addBusinessEvent),
                                (GameAnalytics.methodMap.addResourceEvent = GameAnalytics.addResourceEvent),
                                (GameAnalytics.methodMap.addProgressionEvent = GameAnalytics.addProgressionEvent),
                                (GameAnalytics.methodMap.addDesignEvent = GameAnalytics.addDesignEvent),
                                (GameAnalytics.methodMap.addErrorEvent = GameAnalytics.addErrorEvent),
                                (GameAnalytics.methodMap.addErrorEvent = GameAnalytics.addErrorEvent),
                                (GameAnalytics.methodMap.setEnabledInfoLog = GameAnalytics.setEnabledInfoLog),
                                (GameAnalytics.methodMap.setEnabledVerboseLog = GameAnalytics.setEnabledVerboseLog),
                                (GameAnalytics.methodMap.setEnabledManualSessionHandling = GameAnalytics.setEnabledManualSessionHandling),
                                (GameAnalytics.methodMap.setEnabledEventSubmission = GameAnalytics.setEnabledEventSubmission),
                                (GameAnalytics.methodMap.setCustomDimension01 = GameAnalytics.setCustomDimension01),
                                (GameAnalytics.methodMap.setCustomDimension02 = GameAnalytics.setCustomDimension02),
                                (GameAnalytics.methodMap.setCustomDimension03 = GameAnalytics.setCustomDimension03),
                                (GameAnalytics.methodMap.setFacebookId = GameAnalytics.setFacebookId),
                                (GameAnalytics.methodMap.setGender = GameAnalytics.setGender),
                                (GameAnalytics.methodMap.setBirthYear = GameAnalytics.setBirthYear),
                                (GameAnalytics.methodMap.setEventProcessInterval = GameAnalytics.setEventProcessInterval),
                                (GameAnalytics.methodMap.startSession = GameAnalytics.startSession),
                                (GameAnalytics.methodMap.endSession = GameAnalytics.endSession),
                                (GameAnalytics.methodMap.onStop = GameAnalytics.onStop),
                                (GameAnalytics.methodMap.onResume = GameAnalytics.onResume),
                                (GameAnalytics.methodMap.addCommandCenterListener = GameAnalytics.addCommandCenterListener),
                                (GameAnalytics.methodMap.removeCommandCenterListener = GameAnalytics.removeCommandCenterListener),
                                (GameAnalytics.methodMap.getCommandCenterValueAsString = GameAnalytics.getCommandCenterValueAsString),
                                (GameAnalytics.methodMap.isCommandCenterReady = GameAnalytics.isCommandCenterReady),
                                (GameAnalytics.methodMap.getConfigurationsContentAsString = GameAnalytics.getConfigurationsContentAsString),
                                "undefined" != typeof window && void 0 !== window.GameAnalytics && void 0 !== window.GameAnalytics.q)
                            ) {
                                var q = window.GameAnalytics.q;
                                for (var i in q) GameAnalytics.gaCommand.apply(null, q[i]);
                            }
                        }),
                        (GameAnalytics.gaCommand = function () {
                            for (var args = [], _i = 0; _i < arguments.length; _i++) args[_i] = arguments[_i];
                            0 < args.length &&
                                args[0] in gameanalytics.GameAnalytics.methodMap &&
                                (1 < args.length ? gameanalytics.GameAnalytics.methodMap[args[0]].apply(null, Array.prototype.slice.call(args, 1)) : gameanalytics.GameAnalytics.methodMap[args[0]]());
                        }),
                        (GameAnalytics.configureAvailableCustomDimensions01 = function (customDimensions) {
                            void 0 === customDimensions && (customDimensions = []),
                                GAThreading.performTaskOnGAThread(function () {
                                    GameAnalytics.isSdkReady(!0, !1) ? GALogger.w("Available custom dimensions must be set before SDK is initialized") : GAState.setAvailableCustomDimensions01(customDimensions);
                                });
                        }),
                        (GameAnalytics.configureAvailableCustomDimensions02 = function (customDimensions) {
                            void 0 === customDimensions && (customDimensions = []),
                                GAThreading.performTaskOnGAThread(function () {
                                    GameAnalytics.isSdkReady(!0, !1) ? GALogger.w("Available custom dimensions must be set before SDK is initialized") : GAState.setAvailableCustomDimensions02(customDimensions);
                                });
                        }),
                        (GameAnalytics.configureAvailableCustomDimensions03 = function (customDimensions) {
                            void 0 === customDimensions && (customDimensions = []),
                                GAThreading.performTaskOnGAThread(function () {
                                    GameAnalytics.isSdkReady(!0, !1) ? GALogger.w("Available custom dimensions must be set before SDK is initialized") : GAState.setAvailableCustomDimensions03(customDimensions);
                                });
                        }),
                        (GameAnalytics.configureAvailableResourceCurrencies = function (resourceCurrencies) {
                            void 0 === resourceCurrencies && (resourceCurrencies = []),
                                GAThreading.performTaskOnGAThread(function () {
                                    GameAnalytics.isSdkReady(!0, !1) ? GALogger.w("Available resource currencies must be set before SDK is initialized") : GAState.setAvailableResourceCurrencies(resourceCurrencies);
                                });
                        }),
                        (GameAnalytics.configureAvailableResourceItemTypes = function (resourceItemTypes) {
                            void 0 === resourceItemTypes && (resourceItemTypes = []),
                                GAThreading.performTaskOnGAThread(function () {
                                    GameAnalytics.isSdkReady(!0, !1) ? GALogger.w("Available resource item types must be set before SDK is initialized") : GAState.setAvailableResourceItemTypes(resourceItemTypes);
                                });
                        }),
                        (GameAnalytics.configureBuild = function (build) {
                            void 0 === build && (build = ""),
                                GAThreading.performTaskOnGAThread(function () {
                                    GameAnalytics.isSdkReady(!0, !1)
                                        ? GALogger.w("Build version must be set before SDK is initialized.")
                                        : GAValidator.validateBuild(build)
                                        ? GAState.setBuild(build)
                                        : GALogger.i("Validation fail - configure build: Cannot be null, empty or above 32 length. String: " + build);
                                });
                        }),
                        (GameAnalytics.configureSdkGameEngineVersion = function (sdkGameEngineVersion) {
                            void 0 === sdkGameEngineVersion && (sdkGameEngineVersion = ""),
                                GAThreading.performTaskOnGAThread(function () {
                                    GameAnalytics.isSdkReady(!0, !1) ||
                                        (GAValidator.validateSdkWrapperVersion(sdkGameEngineVersion)
                                            ? (GADevice.sdkGameEngineVersion = sdkGameEngineVersion)
                                            : GALogger.i("Validation fail - configure sdk version: Sdk version not supported. String: " + sdkGameEngineVersion));
                                });
                        }),
                        (GameAnalytics.configureGameEngineVersion = function (gameEngineVersion) {
                            void 0 === gameEngineVersion && (gameEngineVersion = ""),
                                GAThreading.performTaskOnGAThread(function () {
                                    GameAnalytics.isSdkReady(!0, !1) ||
                                        (GAValidator.validateEngineVersion(gameEngineVersion)
                                            ? (GADevice.gameEngineVersion = gameEngineVersion)
                                            : GALogger.i("Validation fail - configure game engine version: Game engine version not supported. String: " + gameEngineVersion));
                                });
                        }),
                        (GameAnalytics.configureUserId = function (uId) {
                            void 0 === uId && (uId = ""),
                                GAThreading.performTaskOnGAThread(function () {
                                    GameAnalytics.isSdkReady(!0, !1)
                                        ? GALogger.w("A custom user id must be set before SDK is initialized.")
                                        : GAValidator.validateUserId(uId)
                                        ? GAState.setUserId(uId)
                                        : GALogger.i("Validation fail - configure user_id: Cannot be null, empty or above 64 length. Will use default user_id method. Used string: " + uId);
                                });
                        }),
                        (GameAnalytics.initialize = function (gameKey, gameSecret) {
                            void 0 === gameKey && (gameKey = ""), void 0 === gameSecret && (gameSecret = ""), GADevice.updateConnectionType();
                            var timedBlock = GAThreading.createTimedBlock();
                            (timedBlock.async = !0),
                                (GameAnalytics.initTimedBlockId = timedBlock.id),
                                (timedBlock.block = function () {
                                    GameAnalytics.isSdkReady(!0, !1)
                                        ? GALogger.w("SDK already initialized. Can only be called once.")
                                        : GAValidator.validateKeys(gameKey, gameSecret)
                                        ? (GAState.setKeys(gameKey, gameSecret), GameAnalytics.internalInitialize())
                                        : GALogger.w(
                                              "SDK failed initialize. Game key or secret key is invalid. Can only contain characters A-z 0-9, gameKey is 32 length, gameSecret is 40 length. Failed keys - gameKey: " +
                                                  gameKey +
                                                  ", secretKey: " +
                                                  gameSecret
                                          );
                                }),
                                GAThreading.performTimedBlockOnGAThread(timedBlock);
                        }),
                        (GameAnalytics.addBusinessEvent = function (currency, amount, itemType, itemId, cartType) {
                            void 0 === currency && (currency = ""),
                                void 0 === amount && (amount = 0),
                                void 0 === itemType && (itemType = ""),
                                void 0 === itemId && (itemId = ""),
                                void 0 === cartType && (cartType = ""),
                                GADevice.updateConnectionType(),
                                GAThreading.performTaskOnGAThread(function () {
                                    GameAnalytics.isSdkReady(!0, !0, "Could not add business event") && GAEvents.addBusinessEvent(currency, amount, itemType, itemId, cartType, {});
                                });
                        }),
                        (GameAnalytics.addResourceEvent = function (flowType, currency, amount, itemType, itemId) {
                            void 0 === flowType && (flowType = gameanalytics.EGAResourceFlowType.Undefined),
                                void 0 === currency && (currency = ""),
                                void 0 === amount && (amount = 0),
                                void 0 === itemType && (itemType = ""),
                                void 0 === itemId && (itemId = ""),
                                GADevice.updateConnectionType(),
                                GAThreading.performTaskOnGAThread(function () {
                                    GameAnalytics.isSdkReady(!0, !0, "Could not add resource event") && GAEvents.addResourceEvent(flowType, currency, amount, itemType, itemId, {});
                                });
                        }),
                        (GameAnalytics.addProgressionEvent = function (progressionStatus, progression01, progression02, progression03, score) {
                            void 0 === progressionStatus && (progressionStatus = gameanalytics.EGAProgressionStatus.Undefined),
                                void 0 === progression01 && (progression01 = ""),
                                void 0 === progression02 && (progression02 = ""),
                                void 0 === progression03 && (progression03 = ""),
                                GADevice.updateConnectionType(),
                                GAThreading.performTaskOnGAThread(function () {
                                    if (GameAnalytics.isSdkReady(!0, !0, "Could not add progression event")) {
                                        var sendScore = "number" == typeof score;
                                        GAEvents.addProgressionEvent(progressionStatus, progression01, progression02, progression03, sendScore ? score : 0, sendScore, {});
                                    }
                                });
                        }),
                        (GameAnalytics.addDesignEvent = function (eventId, value) {
                            GADevice.updateConnectionType(),
                                GAThreading.performTaskOnGAThread(function () {
                                    if (GameAnalytics.isSdkReady(!0, !0, "Could not add design event")) {
                                        var sendValue = "number" == typeof value;
                                        GAEvents.addDesignEvent(eventId, sendValue ? value : 0, sendValue, {});
                                    }
                                });
                        }),
                        (GameAnalytics.addErrorEvent = function (severity, message) {
                            void 0 === severity && (severity = gameanalytics.EGAErrorSeverity.Undefined),
                                void 0 === message && (message = ""),
                                GADevice.updateConnectionType(),
                                GAThreading.performTaskOnGAThread(function () {
                                    GameAnalytics.isSdkReady(!0, !0, "Could not add error event") && GAEvents.addErrorEvent(severity, message, {});
                                });
                        }),
                        (GameAnalytics.setEnabledInfoLog = function (flag) {
                            void 0 === flag && (flag = !1),
                                GAThreading.performTaskOnGAThread(function () {
                                    flag ? (GALogger.setInfoLog(flag), GALogger.i("Info logging enabled")) : (GALogger.i("Info logging disabled"), GALogger.setInfoLog(flag));
                                });
                        }),
                        (GameAnalytics.setEnabledVerboseLog = function (flag) {
                            void 0 === flag && (flag = !1),
                                GAThreading.performTaskOnGAThread(function () {
                                    flag ? (GALogger.setVerboseLog(flag), GALogger.i("Verbose logging enabled")) : (GALogger.i("Verbose logging disabled"), GALogger.setVerboseLog(flag));
                                });
                        }),
                        (GameAnalytics.setEnabledManualSessionHandling = function (flag) {
                            void 0 === flag && (flag = !1),
                                GAThreading.performTaskOnGAThread(function () {
                                    GAState.setManualSessionHandling(flag);
                                });
                        }),
                        (GameAnalytics.setEnabledEventSubmission = function (flag) {
                            void 0 === flag && (flag = !1),
                                GAThreading.performTaskOnGAThread(function () {
                                    flag ? (GAState.setEnabledEventSubmission(flag), GALogger.i("Event submission enabled")) : (GALogger.i("Event submission disabled"), GAState.setEnabledEventSubmission(flag));
                                });
                        }),
                        (GameAnalytics.setCustomDimension01 = function (dimension) {
                            void 0 === dimension && (dimension = ""),
                                GAThreading.performTaskOnGAThread(function () {
                                    GAValidator.validateDimension01(dimension, GAState.getAvailableCustomDimensions01())
                                        ? GAState.setCustomDimension01(dimension)
                                        : GALogger.w("Could not set custom01 dimension value to '" + dimension + "'. Value not found in available custom01 dimension values");
                                });
                        }),
                        (GameAnalytics.setCustomDimension02 = function (dimension) {
                            void 0 === dimension && (dimension = ""),
                                GAThreading.performTaskOnGAThread(function () {
                                    GAValidator.validateDimension02(dimension, GAState.getAvailableCustomDimensions02())
                                        ? GAState.setCustomDimension02(dimension)
                                        : GALogger.w("Could not set custom02 dimension value to '" + dimension + "'. Value not found in available custom02 dimension values");
                                });
                        }),
                        (GameAnalytics.setCustomDimension03 = function (dimension) {
                            void 0 === dimension && (dimension = ""),
                                GAThreading.performTaskOnGAThread(function () {
                                    GAValidator.validateDimension03(dimension, GAState.getAvailableCustomDimensions03())
                                        ? GAState.setCustomDimension03(dimension)
                                        : GALogger.w("Could not set custom03 dimension value to '" + dimension + "'. Value not found in available custom03 dimension values");
                                });
                        }),
                        (GameAnalytics.setFacebookId = function (facebookId) {
                            void 0 === facebookId && (facebookId = ""),
                                GAThreading.performTaskOnGAThread(function () {
                                    GAValidator.validateFacebookId(facebookId) && GAState.setFacebookId(facebookId);
                                });
                        }),
                        (GameAnalytics.setGender = function (gender) {
                            void 0 === gender && (gender = gameanalytics.EGAGender.Undefined),
                                GAThreading.performTaskOnGAThread(function () {
                                    GAValidator.validateGender(gender) && GAState.setGender(gender);
                                });
                        }),
                        (GameAnalytics.setBirthYear = function (birthYear) {
                            void 0 === birthYear && (birthYear = 0),
                                GAThreading.performTaskOnGAThread(function () {
                                    GAValidator.validateBirthyear(birthYear) && GAState.setBirthYear(birthYear);
                                });
                        }),
                        (GameAnalytics.setEventProcessInterval = function (intervalInSeconds) {
                            GAThreading.performTaskOnGAThread(function () {
                                GAThreading.setEventProcessInterval(intervalInSeconds);
                            });
                        }),
                        (GameAnalytics.startSession = function () {
                            if (GAState.isInitialized()) {
                                var timedBlock = GAThreading.createTimedBlock();
                                (timedBlock.async = !0),
                                    (GameAnalytics.initTimedBlockId = timedBlock.id),
                                    (timedBlock.block = function () {
                                        GAState.isEnabled() && GAState.sessionIsStarted() && GAThreading.endSessionAndStopQueue(), GameAnalytics.resumeSessionAndStartQueue();
                                    }),
                                    GAThreading.performTimedBlockOnGAThread(timedBlock);
                            }
                        }),
                        (GameAnalytics.endSession = function () {
                            GameAnalytics.onStop();
                        }),
                        (GameAnalytics.onStop = function () {
                            GAThreading.performTaskOnGAThread(function () {
                                try {
                                    GAThreading.endSessionAndStopQueue();
                                } catch (Exception) {}
                            });
                        }),
                        (GameAnalytics.onResume = function () {
                            var timedBlock = GAThreading.createTimedBlock();
                            (timedBlock.async = !0),
                                (GameAnalytics.initTimedBlockId = timedBlock.id),
                                (timedBlock.block = function () {
                                    GameAnalytics.resumeSessionAndStartQueue();
                                }),
                                GAThreading.performTimedBlockOnGAThread(timedBlock);
                        }),
                        (GameAnalytics.getCommandCenterValueAsString = function (key, defaultValue) {
                            return void 0 === defaultValue && (defaultValue = null), GAState.getConfigurationStringValue(key, defaultValue);
                        }),
                        (GameAnalytics.isCommandCenterReady = function () {
                            return GAState.isCommandCenterReady();
                        }),
                        (GameAnalytics.addCommandCenterListener = function (listener) {
                            GAState.addCommandCenterListener(listener);
                        }),
                        (GameAnalytics.removeCommandCenterListener = function (listener) {
                            GAState.removeCommandCenterListener(listener);
                        }),
                        (GameAnalytics.getConfigurationsContentAsString = function () {
                            return GAState.getConfigurationsContentAsString();
                        }),
                        (GameAnalytics.internalInitialize = function () {
                            GAState.ensurePersistedStates(),
                                GAStore.setItem(GAState.DefaultUserIdKey, GAState.getDefaultId()),
                                GAState.setInitialized(!0),
                                GameAnalytics.newSession(),
                                GAState.isEnabled() && GAThreading.ensureEventQueueIsRunning();
                        }),
                        (GameAnalytics.newSession = function () {
                            GALogger.i("Starting a new session."), GAState.validateAndFixCurrentDimensions(), GAHTTPApi.instance.requestInit(GameAnalytics.startNewSessionCallback);
                        }),
                        (GameAnalytics.startNewSessionCallback = function (initResponse, initResponseDict) {
                            if (initResponse === EGAHTTPApiResponse.Ok && initResponseDict) {
                                var timeOffsetSeconds = 0;
                                if (initResponseDict.server_ts) {
                                    var serverTs = initResponseDict.server_ts;
                                    timeOffsetSeconds = GAState.calculateServerTimeOffset(serverTs);
                                }
                                (initResponseDict.time_offset = timeOffsetSeconds),
                                    GAStore.setItem(GAState.SdkConfigCachedKey, GAUtilities.encode64(JSON.stringify(initResponseDict))),
                                    (GAState.instance.sdkConfigCached = initResponseDict),
                                    (GAState.instance.sdkConfig = initResponseDict),
                                    (GAState.instance.initAuthorized = !0);
                            } else
                                initResponse == EGAHTTPApiResponse.Unauthorized
                                    ? (GALogger.w("Initialize SDK failed - Unauthorized"), (GAState.instance.initAuthorized = !1))
                                    : (initResponse === EGAHTTPApiResponse.NoResponse || initResponse === EGAHTTPApiResponse.RequestTimeout
                                          ? GALogger.i("Init call (session start) failed - no response. Could be offline or timeout.")
                                          : initResponse === EGAHTTPApiResponse.BadResponse || initResponse === EGAHTTPApiResponse.JsonEncodeFailed || initResponse === EGAHTTPApiResponse.JsonDecodeFailed
                                          ? GALogger.i("Init call (session start) failed - bad response. Could be bad response from proxy or GA servers.")
                                          : (initResponse !== EGAHTTPApiResponse.BadRequest && initResponse !== EGAHTTPApiResponse.UnknownResponseCode) || GALogger.i("Init call (session start) failed - bad request or unknown response."),
                                      null == GAState.instance.sdkConfig
                                          ? null != GAState.instance.sdkConfigCached
                                              ? (GALogger.i("Init call (session start) failed - using cached init values."), (GAState.instance.sdkConfig = GAState.instance.sdkConfigCached))
                                              : (GALogger.i("Init call (session start) failed - using default init values."), (GAState.instance.sdkConfig = GAState.instance.sdkConfigDefault))
                                          : GALogger.i("Init call (session start) failed - using cached init values."),
                                      (GAState.instance.initAuthorized = !0));
                            if (((GAState.instance.clientServerTimeOffset = GAState.getSdkConfig().time_offset ? GAState.getSdkConfig().time_offset : 0), GAState.populateConfigurations(GAState.getSdkConfig()), !GAState.isEnabled()))
                                return GALogger.w("Could not start session: SDK is disabled."), void GAThreading.stopEventQueue();
                            GAThreading.ensureEventQueueIsRunning();
                            var newSessionId = GAUtilities.createGuid();
                            (GAState.instance.sessionId = newSessionId), (GAState.instance.sessionStart = GAState.getClientTsAdjusted()), GAEvents.addSessionStartEvent();
                            var timedBlock = GAThreading.getTimedBlockById(GameAnalytics.initTimedBlockId);
                            null != timedBlock && (timedBlock.running = !1), (GameAnalytics.initTimedBlockId = -1);
                        }),
                        (GameAnalytics.resumeSessionAndStartQueue = function () {
                            GAState.isInitialized() && (GALogger.i("Resuming session."), GAState.sessionIsStarted() || GameAnalytics.newSession());
                        }),
                        (GameAnalytics.isSdkReady = function (needsInitialized, warn, message) {
                            return (
                                void 0 === warn && (warn = !0),
                                void 0 === message && (message = ""),
                                message && (message += ": "),
                                needsInitialized && !GAState.isInitialized()
                                    ? (warn && GALogger.w(message + "SDK is not initialized"), !1)
                                    : needsInitialized && !GAState.isEnabled()
                                    ? (warn && GALogger.w(message + "SDK is disabled"), !1)
                                    : !(needsInitialized && !GAState.sessionIsStarted()) || (warn && GALogger.w(message + "Session has not started yet"), !1)
                            );
                        }),
                        (GameAnalytics.initTimedBlockId = -1),
                        (GameAnalytics.methodMap = {}),
                        GameAnalytics
                    );
                })();
            gameanalytics.GameAnalytics = GameAnalytics;
        })(gameanalytics || (gameanalytics = {})),
        gameanalytics.GameAnalytics.init();
    gameanalytics.GameAnalytics.gaCommand;
    var GameAnalytics_node = gameanalytics,
        GameAnalytics$1 = (function () {
            function GameAnalytics() {}
            return (
                (GameAnalytics.prototype.setup = function (key, secret, version) {
                    Branding$$1.analyticsEnabled &&
                        (GameAnalytics_node.GameAnalytics.initialize(key, secret),
                        GameAnalytics_node.GameAnalytics.configureBuild(version),
                        GameAnalytics_node.GameAnalytics.startSession(),
                        window.addEventListener("beforeunload", function () {
                            GameAnalytics_node.GameAnalytics.endSession();
                        }));
                }),
                (GameAnalytics.prototype.addProgressionEvent = function (progressionStatus, progression01, progression02, progression03, score) {
                    Branding$$1.analyticsEnabled && GameAnalytics_node.GameAnalytics.addProgressionEvent(progressionStatus, progression01, progression02, progression03, score);
                }),
                (GameAnalytics.prototype.addDesignEvent = function (eventId, value) {
                    Branding$$1.analyticsEnabled && GameAnalytics_node.GameAnalytics.addDesignEvent(eventId, value);
                }),
                GameAnalytics
            );
        })();
    function __awaiter(thisArg, _arguments, P, generator) {
        return new (P || (P = Promise))(function (resolve, reject) {
            function fulfilled(value) {
                try {
                    step(generator.next(value));
                } catch (e) {
                    reject(e);
                }
            }
            function rejected(value) {
                try {
                    step(generator.throw(value));
                } catch (e) {
                    reject(e);
                }
            }
            function step(result) {
                result.done
                    ? resolve(result.value)
                    : new P(function (resolve) {
                          resolve(result.value);
                      }).then(fulfilled, rejected);
            }
            step((generator = generator.apply(thisArg, _arguments || [])).next());
        });
    }
    function __generator(thisArg, body) {
        var f,
            y,
            t,
            g,
            _ = {
                label: 0,
                sent: function () {
                    if (1 & t[0]) throw t[1];
                    return t[1];
                },
                trys: [],
                ops: [],
            };
        return (
            (g = { next: verb(0), throw: verb(1), return: verb(2) }),
            "function" == typeof Symbol &&
                (g[Symbol.iterator] = function () {
                    return this;
                }),
            g
        );
        function verb(n) {
            return function (v) {
                return (function (op) {
                    if (f) throw new TypeError("Generator is already executing.");
                    for (; _; )
                        try {
                            if (((f = 1), y && (t = 2 & op[0] ? y.return : op[0] ? y.throw || ((t = y.return) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)) return t;
                            switch (((y = 0), t && (op = [2 & op[0], t.value]), op[0])) {
                                case 0:
                                case 1:
                                    t = op;
                                    break;
                                case 4:
                                    return _.label++, { value: op[1], done: !1 };
                                case 5:
                                    _.label++, (y = op[1]), (op = [0]);
                                    continue;
                                case 7:
                                    (op = _.ops.pop()), _.trys.pop();
                                    continue;
                                default:
                                    if (!(t = 0 < (t = _.trys).length && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                                        _ = 0;
                                        continue;
                                    }
                                    if (3 === op[0] && (!t || (op[1] > t[0] && op[1] < t[3]))) {
                                        _.label = op[1];
                                        break;
                                    }
                                    if (6 === op[0] && _.label < t[1]) {
                                        (_.label = t[1]), (t = op);
                                        break;
                                    }
                                    if (t && _.label < t[2]) {
                                        (_.label = t[2]), _.ops.push(op);
                                        break;
                                    }
                                    t[2] && _.ops.pop(), _.trys.pop();
                                    continue;
                            }
                            op = body.call(thisArg, _);
                        } catch (e) {
                            (op = [6, e]), (y = 0);
                        } finally {
                            f = t = 0;
                        }
                    if (5 & op[0]) throw op[1];
                    return { value: op[0] ? op[1] : void 0, done: !0 };
                })([n, v]);
            };
        }
    }
    var progressbar = createCommonjsModule(function (module, exports) {
        module.exports = (function e(t, n, r) {
            function s(o, u) {
                if (!n[o]) {
                    if (!t[o]) {
                        var a = commonjsRequire;
                        if (!u && a) return a(o, !0);
                        if (i) return i(o, !0);
                        var f = new Error("Cannot find module '" + o + "'");
                        throw ((f.code = "MODULE_NOT_FOUND"), f);
                    }
                    var l = (n[o] = { exports: {} });
                    t[o][0].call(
                        l.exports,
                        function (e) {
                            var n = t[o][1][e];
                            return s(n || e);
                        },
                        l,
                        l.exports,
                        e,
                        t,
                        n,
                        r
                    );
                }
                return n[o].exports;
            }
            for (var i = commonjsRequire, o = 0; o < r.length; o++) s(r[o]);
            return s;
        })(
            {
                1: [
                    function (require, module, exports) {
                        (function () {
                            var mockTweenable,
                                root = this || Function("return this")(),
                                Tweenable = (function () {
                                    var formula,
                                        DEFAULT_SCHEDULE_FUNCTION,
                                        timeoutHandler_endTime,
                                        timeoutHandler_currentTime,
                                        timeoutHandler_isEnded,
                                        timeoutHandler_offset,
                                        _now = Date.now
                                            ? Date.now
                                            : function () {
                                                  return +new Date();
                                              },
                                        now = "undefined" != typeof SHIFTY_DEBUG_NOW ? SHIFTY_DEBUG_NOW : _now;
                                    function noop() {}
                                    function each(obj, fn) {
                                        var key;
                                        for (key in obj) Object.hasOwnProperty.call(obj, key) && fn(key);
                                    }
                                    function shallowCopy(targetObj, srcObj) {
                                        return (
                                            each(srcObj, function (prop) {
                                                targetObj[prop] = srcObj[prop];
                                            }),
                                            targetObj
                                        );
                                    }
                                    function defaults(target, src) {
                                        each(src, function (prop) {
                                            void 0 === target[prop] && (target[prop] = src[prop]);
                                        });
                                    }
                                    function tweenProps(forPosition, currentState, originalState, targetState, duration, timestamp, easing) {
                                        var prop,
                                            easingObjectProp,
                                            easingFn,
                                            normalizedPosition = forPosition < timestamp ? 0 : (forPosition - timestamp) / duration;
                                        for (prop in currentState)
                                            currentState.hasOwnProperty(prop) &&
                                                ((easingObjectProp = easing[prop]),
                                                (easingFn = "function" == typeof easingObjectProp ? easingObjectProp : formula[easingObjectProp]),
                                                (currentState[prop] = tweenProp(originalState[prop], targetState[prop], easingFn, normalizedPosition)));
                                        return currentState;
                                    }
                                    function tweenProp(start, end, easingFunc, position) {
                                        return start + (end - start) * easingFunc(position);
                                    }
                                    function applyFilter(tweenable, filterName) {
                                        var filters = Tweenable.prototype.filter,
                                            args = tweenable._filterArgs;
                                        each(filters, function (name) {
                                            void 0 !== filters[name][filterName] && filters[name][filterName].apply(tweenable, args);
                                        });
                                    }
                                    function timeoutHandler(tweenable, timestamp, delay, duration, currentState, originalState, targetState, easing, step, schedule, opt_currentTimeOverride) {
                                        (timeoutHandler_endTime = timestamp + delay + duration),
                                            (timeoutHandler_currentTime = Math.min(opt_currentTimeOverride || now(), timeoutHandler_endTime)),
                                            (timeoutHandler_isEnded = timeoutHandler_endTime <= timeoutHandler_currentTime),
                                            (timeoutHandler_offset = duration - (timeoutHandler_endTime - timeoutHandler_currentTime)),
                                            tweenable.isPlaying() &&
                                                (timeoutHandler_isEnded
                                                    ? (step(targetState, tweenable._attachment, timeoutHandler_offset), tweenable.stop(!0))
                                                    : ((tweenable._scheduleId = schedule(tweenable._timeoutHandler, 1e3 / 60)),
                                                      applyFilter(tweenable, "beforeTween"),
                                                      timeoutHandler_currentTime < timestamp + delay
                                                          ? tweenProps(1, currentState, originalState, targetState, 1, 1, easing)
                                                          : tweenProps(timeoutHandler_currentTime, currentState, originalState, targetState, duration, timestamp + delay, easing),
                                                      applyFilter(tweenable, "afterTween"),
                                                      step(currentState, tweenable._attachment, timeoutHandler_offset)));
                                    }
                                    function composeEasingObject(fromTweenParams, easing) {
                                        var composedEasing = {},
                                            typeofEasing = typeof easing;
                                        return (
                                            each(
                                                fromTweenParams,
                                                "string" === typeofEasing || "function" === typeofEasing
                                                    ? function (prop) {
                                                          composedEasing[prop] = easing;
                                                      }
                                                    : function (prop) {
                                                          composedEasing[prop] || (composedEasing[prop] = easing[prop] || "linear");
                                                      }
                                            ),
                                            composedEasing
                                        );
                                    }
                                    function Tweenable(opt_initialState, opt_config) {
                                        (this._currentState = opt_initialState || {}), (this._configured = !1), (this._scheduleFunction = DEFAULT_SCHEDULE_FUNCTION), void 0 !== opt_config && this.setConfig(opt_config);
                                    }
                                    return (
                                        (DEFAULT_SCHEDULE_FUNCTION =
                                            ("undefined" != typeof window &&
                                                (window.requestAnimationFrame ||
                                                    window.webkitRequestAnimationFrame ||
                                                    window.oRequestAnimationFrame ||
                                                    window.msRequestAnimationFrame ||
                                                    (window.mozCancelRequestAnimationFrame && window.mozRequestAnimationFrame))) ||
                                            setTimeout),
                                        (Tweenable.prototype.tween = function (opt_config) {
                                            return this._isTweening ? this : ((void 0 === opt_config && this._configured) || this.setConfig(opt_config), (this._timestamp = now()), this._start(this.get(), this._attachment), this.resume());
                                        }),
                                        (Tweenable.prototype.setConfig = function (config) {
                                            (config = config || {}),
                                                (this._configured = !0),
                                                (this._attachment = config.attachment),
                                                (this._pausedAtTime = null),
                                                (this._scheduleId = null),
                                                (this._delay = config.delay || 0),
                                                (this._start = config.start || noop),
                                                (this._step = config.step || noop),
                                                (this._finish = config.finish || noop),
                                                (this._duration = config.duration || 500),
                                                (this._currentState = shallowCopy({}, config.from || this.get())),
                                                (this._originalState = this.get()),
                                                (this._targetState = shallowCopy({}, config.to || this.get()));
                                            var self = this;
                                            this._timeoutHandler = function () {
                                                timeoutHandler(self, self._timestamp, self._delay, self._duration, self._currentState, self._originalState, self._targetState, self._easing, self._step, self._scheduleFunction);
                                            };
                                            var currentState = this._currentState,
                                                targetState = this._targetState;
                                            return (
                                                defaults(targetState, currentState),
                                                (this._easing = composeEasingObject(currentState, config.easing || "linear")),
                                                (this._filterArgs = [currentState, this._originalState, targetState, this._easing]),
                                                applyFilter(this, "tweenCreated"),
                                                this
                                            );
                                        }),
                                        (Tweenable.prototype.get = function () {
                                            return shallowCopy({}, this._currentState);
                                        }),
                                        (Tweenable.prototype.set = function (state) {
                                            this._currentState = state;
                                        }),
                                        (Tweenable.prototype.pause = function () {
                                            return (this._pausedAtTime = now()), (this._isPaused = !0), this;
                                        }),
                                        (Tweenable.prototype.resume = function () {
                                            return this._isPaused && (this._timestamp += now() - this._pausedAtTime), (this._isPaused = !1), (this._isTweening = !0), this._timeoutHandler(), this;
                                        }),
                                        (Tweenable.prototype.seek = function (millisecond) {
                                            millisecond = Math.max(millisecond, 0);
                                            var currentTime = now();
                                            return (
                                                this._timestamp + millisecond === 0 ||
                                                    ((this._timestamp = currentTime - millisecond),
                                                    this.isPlaying() ||
                                                        ((this._isTweening = !0),
                                                        (this._isPaused = !1),
                                                        timeoutHandler(
                                                            this,
                                                            this._timestamp,
                                                            this._delay,
                                                            this._duration,
                                                            this._currentState,
                                                            this._originalState,
                                                            this._targetState,
                                                            this._easing,
                                                            this._step,
                                                            this._scheduleFunction,
                                                            currentTime
                                                        ),
                                                        this.pause())),
                                                this
                                            );
                                        }),
                                        (Tweenable.prototype.stop = function (gotoEnd) {
                                            return (
                                                (this._isTweening = !1),
                                                (this._isPaused = !1),
                                                (this._timeoutHandler = noop),
                                                (root.cancelAnimationFrame || root.webkitCancelAnimationFrame || root.oCancelAnimationFrame || root.msCancelAnimationFrame || root.mozCancelRequestAnimationFrame || root.clearTimeout)(
                                                    this._scheduleId
                                                ),
                                                gotoEnd &&
                                                    (applyFilter(this, "beforeTween"),
                                                    tweenProps(1, this._currentState, this._originalState, this._targetState, 1, 0, this._easing),
                                                    applyFilter(this, "afterTween"),
                                                    applyFilter(this, "afterTweenEnd"),
                                                    this._finish.call(this, this._currentState, this._attachment)),
                                                this
                                            );
                                        }),
                                        (Tweenable.prototype.isPlaying = function () {
                                            return this._isTweening && !this._isPaused;
                                        }),
                                        (Tweenable.prototype.setScheduleFunction = function (scheduleFunction) {
                                            this._scheduleFunction = scheduleFunction;
                                        }),
                                        (Tweenable.prototype.dispose = function () {
                                            var prop;
                                            for (prop in this) this.hasOwnProperty(prop) && delete this[prop];
                                        }),
                                        (Tweenable.prototype.filter = {}),
                                        (formula = Tweenable.prototype.formula = {
                                            linear: function (pos) {
                                                return pos;
                                            },
                                        }),
                                        shallowCopy(Tweenable, {
                                            now: now,
                                            each: each,
                                            tweenProps: tweenProps,
                                            tweenProp: tweenProp,
                                            applyFilter: applyFilter,
                                            shallowCopy: shallowCopy,
                                            defaults: defaults,
                                            composeEasingObject: composeEasingObject,
                                        }),
                                        "function" == typeof SHIFTY_DEBUG_NOW && (root.timeoutHandler = timeoutHandler),
                                        "object" == typeof exports ? (module.exports = Tweenable) : void 0 === root.Tweenable && (root.Tweenable = Tweenable),
                                        Tweenable
                                    );
                                })();
                            Tweenable.shallowCopy(Tweenable.prototype.formula, {
                                easeInQuad: function (pos) {
                                    return Math.pow(pos, 2);
                                },
                                easeOutQuad: function (pos) {
                                    return -(Math.pow(pos - 1, 2) - 1);
                                },
                                easeInOutQuad: function (pos) {
                                    return (pos /= 0.5) < 1 ? 0.5 * Math.pow(pos, 2) : -0.5 * ((pos -= 2) * pos - 2);
                                },
                                easeInCubic: function (pos) {
                                    return Math.pow(pos, 3);
                                },
                                easeOutCubic: function (pos) {
                                    return Math.pow(pos - 1, 3) + 1;
                                },
                                easeInOutCubic: function (pos) {
                                    return (pos /= 0.5) < 1 ? 0.5 * Math.pow(pos, 3) : 0.5 * (Math.pow(pos - 2, 3) + 2);
                                },
                                easeInQuart: function (pos) {
                                    return Math.pow(pos, 4);
                                },
                                easeOutQuart: function (pos) {
                                    return -(Math.pow(pos - 1, 4) - 1);
                                },
                                easeInOutQuart: function (pos) {
                                    return (pos /= 0.5) < 1 ? 0.5 * Math.pow(pos, 4) : -0.5 * ((pos -= 2) * Math.pow(pos, 3) - 2);
                                },
                                easeInQuint: function (pos) {
                                    return Math.pow(pos, 5);
                                },
                                easeOutQuint: function (pos) {
                                    return Math.pow(pos - 1, 5) + 1;
                                },
                                easeInOutQuint: function (pos) {
                                    return (pos /= 0.5) < 1 ? 0.5 * Math.pow(pos, 5) : 0.5 * (Math.pow(pos - 2, 5) + 2);
                                },
                                easeInSine: function (pos) {
                                    return 1 - Math.cos(pos * (Math.PI / 2));
                                },
                                easeOutSine: function (pos) {
                                    return Math.sin(pos * (Math.PI / 2));
                                },
                                easeInOutSine: function (pos) {
                                    return -0.5 * (Math.cos(Math.PI * pos) - 1);
                                },
                                easeInExpo: function (pos) {
                                    return 0 === pos ? 0 : Math.pow(2, 10 * (pos - 1));
                                },
                                easeOutExpo: function (pos) {
                                    return 1 === pos ? 1 : 1 - Math.pow(2, -10 * pos);
                                },
                                easeInOutExpo: function (pos) {
                                    return 0 === pos ? 0 : 1 === pos ? 1 : (pos /= 0.5) < 1 ? 0.5 * Math.pow(2, 10 * (pos - 1)) : 0.5 * (2 - Math.pow(2, -10 * --pos));
                                },
                                easeInCirc: function (pos) {
                                    return -(Math.sqrt(1 - pos * pos) - 1);
                                },
                                easeOutCirc: function (pos) {
                                    return Math.sqrt(1 - Math.pow(pos - 1, 2));
                                },
                                easeInOutCirc: function (pos) {
                                    return (pos /= 0.5) < 1 ? -0.5 * (Math.sqrt(1 - pos * pos) - 1) : 0.5 * (Math.sqrt(1 - (pos -= 2) * pos) + 1);
                                },
                                easeOutBounce: function (pos) {
                                    return pos < 1 / 2.75
                                        ? 7.5625 * pos * pos
                                        : pos < 2 / 2.75
                                        ? 7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75
                                        : pos < 2.5 / 2.75
                                        ? 7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375
                                        : 7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375;
                                },
                                easeInBack: function (pos) {
                                    var s = 1.70158;
                                    return pos * pos * ((s + 1) * pos - s);
                                },
                                easeOutBack: function (pos) {
                                    var s = 1.70158;
                                    return (pos -= 1) * pos * ((s + 1) * pos + s) + 1;
                                },
                                easeInOutBack: function (pos) {
                                    var s = 1.70158;
                                    return (pos /= 0.5) < 1 ? pos * pos * ((1 + (s *= 1.525)) * pos - s) * 0.5 : 0.5 * ((pos -= 2) * pos * ((1 + (s *= 1.525)) * pos + s) + 2);
                                },
                                elastic: function (pos) {
                                    return -1 * Math.pow(4, -8 * pos) * Math.sin(((6 * pos - 1) * (2 * Math.PI)) / 2) + 1;
                                },
                                swingFromTo: function (pos) {
                                    var s = 1.70158;
                                    return (pos /= 0.5) < 1 ? pos * pos * ((1 + (s *= 1.525)) * pos - s) * 0.5 : 0.5 * ((pos -= 2) * pos * ((1 + (s *= 1.525)) * pos + s) + 2);
                                },
                                swingFrom: function (pos) {
                                    var s = 1.70158;
                                    return pos * pos * ((s + 1) * pos - s);
                                },
                                swingTo: function (pos) {
                                    var s = 1.70158;
                                    return (pos -= 1) * pos * ((s + 1) * pos + s) + 1;
                                },
                                bounce: function (pos) {
                                    return pos < 1 / 2.75
                                        ? 7.5625 * pos * pos
                                        : pos < 2 / 2.75
                                        ? 7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75
                                        : pos < 2.5 / 2.75
                                        ? 7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375
                                        : 7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375;
                                },
                                bouncePast: function (pos) {
                                    return pos < 1 / 2.75
                                        ? 7.5625 * pos * pos
                                        : pos < 2 / 2.75
                                        ? 2 - (7.5625 * (pos -= 1.5 / 2.75) * pos + 0.75)
                                        : pos < 2.5 / 2.75
                                        ? 2 - (7.5625 * (pos -= 2.25 / 2.75) * pos + 0.9375)
                                        : 2 - (7.5625 * (pos -= 2.625 / 2.75) * pos + 0.984375);
                                },
                                easeFromTo: function (pos) {
                                    return (pos /= 0.5) < 1 ? 0.5 * Math.pow(pos, 4) : -0.5 * ((pos -= 2) * Math.pow(pos, 3) - 2);
                                },
                                easeFrom: function (pos) {
                                    return Math.pow(pos, 4);
                                },
                                easeTo: function (pos) {
                                    return Math.pow(pos, 0.25);
                                },
                            }),
                                (function () {
                                    function cubicBezierAtTime(t, p1x, p1y, p2x, p2y, duration) {
                                        var ax = 0,
                                            bx = 0,
                                            cx = 0,
                                            ay = 0,
                                            by = 0,
                                            cy = 0;
                                        function sampleCurveX(t) {
                                            return ((ax * t + bx) * t + cx) * t;
                                        }
                                        function fabs(n) {
                                            return 0 <= n ? n : 0 - n;
                                        }
                                        function solveCurveX(x, epsilon) {
                                            var t0, t1, t2, x2, d2, i, t;
                                            for (t2 = x, i = 0; i < 8; i++) {
                                                if (fabs((x2 = sampleCurveX(t2) - x)) < epsilon) return t2;
                                                if (fabs((d2 = (3 * ax * (t = t2) + 2 * bx) * t + cx)) < 1e-6) break;
                                                t2 -= x2 / d2;
                                            }
                                            if (((t1 = 1), (t2 = x) < (t0 = 0))) return t0;
                                            if (t1 < t2) return t1;
                                            for (; t0 < t1; ) {
                                                if (fabs((x2 = sampleCurveX(t2)) - x) < epsilon) return t2;
                                                x2 < x ? (t0 = t2) : (t1 = t2), (t2 = 0.5 * (t1 - t0) + t0);
                                            }
                                            return t2;
                                        }
                                        return (
                                            (ax = 1 - (cx = 3 * p1x) - (bx = 3 * (p2x - p1x) - cx)),
                                            (ay = 1 - (cy = 3 * p1y) - (by = 3 * (p2y - p1y) - cy)),
                                            (function (x, epsilon) {
                                                return (t = solveCurveX(x, epsilon)), ((ay * t + by) * t + cy) * t;
                                                var t;
                                            })(
                                                t,
                                                (function (duration) {
                                                    return 1 / (200 * duration);
                                                })(duration)
                                            )
                                        );
                                    }
                                    (Tweenable.setBezierFunction = function (name, x1, y1, x2, y2) {
                                        var cubicBezierTransition = (function (x1, y1, x2, y2) {
                                            return function (pos) {
                                                return cubicBezierAtTime(pos, x1, y1, x2, y2, 1);
                                            };
                                        })(x1, y1, x2, y2);
                                        return (
                                            (cubicBezierTransition.displayName = name),
                                            (cubicBezierTransition.x1 = x1),
                                            (cubicBezierTransition.y1 = y1),
                                            (cubicBezierTransition.x2 = x2),
                                            (cubicBezierTransition.y2 = y2),
                                            (Tweenable.prototype.formula[name] = cubicBezierTransition)
                                        );
                                    }),
                                        (Tweenable.unsetBezierFunction = function (name) {
                                            delete Tweenable.prototype.formula[name];
                                        });
                                })(),
                                ((mockTweenable = new Tweenable())._filterArgs = []),
                                (Tweenable.interpolate = function (from, targetState, position, easing, opt_delay) {
                                    var current = Tweenable.shallowCopy({}, from),
                                        delay = opt_delay || 0,
                                        easingObject = Tweenable.composeEasingObject(from, easing || "linear");
                                    mockTweenable.set({});
                                    var filterArgs = mockTweenable._filterArgs;
                                    (filterArgs.length = 0),
                                        (filterArgs[0] = current),
                                        (filterArgs[1] = from),
                                        (filterArgs[2] = targetState),
                                        (filterArgs[3] = easingObject),
                                        Tweenable.applyFilter(mockTweenable, "tweenCreated"),
                                        Tweenable.applyFilter(mockTweenable, "beforeTween");
                                    var interpolatedValues = (function (from, current, targetState, position, easing, delay) {
                                        return Tweenable.tweenProps(position, current, from, targetState, 1, delay, easing);
                                    })(from, current, targetState, position, easingObject, delay);
                                    return Tweenable.applyFilter(mockTweenable, "afterTween"), interpolatedValues;
                                }),
                                (function (Tweenable) {
                                    var R_NUMBER_COMPONENT = /(\d|\-|\.)/,
                                        R_FORMAT_CHUNKS = /([^\-0-9\.]+)/g,
                                        R_UNFORMATTED_VALUES = /[0-9.\-]+/g,
                                        R_RGB = new RegExp("rgb\\(" + R_UNFORMATTED_VALUES.source + /,\s*/.source + R_UNFORMATTED_VALUES.source + /,\s*/.source + R_UNFORMATTED_VALUES.source + "\\)", "g"),
                                        R_RGB_PREFIX = /^.*\(/,
                                        R_HEX = /#([0-9]|[a-f]){3,6}/gi,
                                        VALUE_PLACEHOLDER = "VAL";
                                    function sanitizeObjectForHexProps(stateObject) {
                                        Tweenable.each(stateObject, function (prop) {
                                            var currentProp = stateObject[prop];
                                            "string" == typeof currentProp && currentProp.match(R_HEX) && (stateObject[prop] = filterStringChunks(R_HEX, currentProp, convertHexToRGB));
                                        });
                                    }
                                    function convertHexToRGB(hexString) {
                                        var hex,
                                            rgbArr =
                                                (3 === (hex = (hex = hexString).replace(/#/, "")).length && (hex = (hex = hex.split(""))[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2]),
                                                (hexToRGBArray_returnArray[0] = hexToDec(hex.substr(0, 2))),
                                                (hexToRGBArray_returnArray[1] = hexToDec(hex.substr(2, 2))),
                                                (hexToRGBArray_returnArray[2] = hexToDec(hex.substr(4, 2))),
                                                hexToRGBArray_returnArray);
                                        return "rgb(" + rgbArr[0] + "," + rgbArr[1] + "," + rgbArr[2] + ")";
                                    }
                                    var hexToRGBArray_returnArray = [];
                                    function hexToDec(hex) {
                                        return parseInt(hex, 16);
                                    }
                                    function filterStringChunks(pattern, unfilteredString, filter) {
                                        var pattenMatches = unfilteredString.match(pattern),
                                            filteredString = unfilteredString.replace(pattern, VALUE_PLACEHOLDER);
                                        if (pattenMatches)
                                            for (var currentChunk, pattenMatchesLength = pattenMatches.length, i = 0; i < pattenMatchesLength; i++)
                                                (currentChunk = pattenMatches.shift()), (filteredString = filteredString.replace(VALUE_PLACEHOLDER, filter(currentChunk)));
                                        return filteredString;
                                    }
                                    function sanitizeRGBChunk(rgbChunk) {
                                        for (var numbers = rgbChunk.match(R_UNFORMATTED_VALUES), numbersLength = numbers.length, sanitizedString = rgbChunk.match(R_RGB_PREFIX)[0], i = 0; i < numbersLength; i++)
                                            sanitizedString += parseInt(numbers[i], 10) + ",";
                                        return (sanitizedString = sanitizedString.slice(0, -1) + ")");
                                    }
                                    function getFormatManifests(stateObject) {
                                        var manifestAccumulator = {};
                                        return (
                                            Tweenable.each(stateObject, function (prop) {
                                                var formattedString,
                                                    chunks,
                                                    currentProp = stateObject[prop];
                                                if ("string" == typeof currentProp) {
                                                    var rawValues = getValuesFrom(currentProp);
                                                    manifestAccumulator[prop] = {
                                                        formatString:
                                                            ((formattedString = currentProp),
                                                            (chunks = formattedString.match(R_FORMAT_CHUNKS)),
                                                            chunks ? (1 === chunks.length || formattedString.charAt(0).match(R_NUMBER_COMPONENT)) && chunks.unshift("") : (chunks = ["", ""]),
                                                            chunks.join(VALUE_PLACEHOLDER)),
                                                        chunkNames: (function (rawValues, prefix) {
                                                            var i,
                                                                accumulator = [],
                                                                rawValuesLength = rawValues.length;
                                                            for (i = 0; i < rawValuesLength; i++) accumulator.push("_" + prefix + "_" + i);
                                                            return accumulator;
                                                        })(rawValues, prop),
                                                    };
                                                }
                                            }),
                                            manifestAccumulator
                                        );
                                    }
                                    function expandFormattedProperties(stateObject, formatManifests) {
                                        Tweenable.each(formatManifests, function (prop) {
                                            for (var currentProp = stateObject[prop], rawValues = getValuesFrom(currentProp), rawValuesLength = rawValues.length, i = 0; i < rawValuesLength; i++)
                                                stateObject[formatManifests[prop].chunkNames[i]] = +rawValues[i];
                                            delete stateObject[prop];
                                        });
                                    }
                                    function collapseFormattedProperties(stateObject, formatManifests) {
                                        Tweenable.each(formatManifests, function (prop) {
                                            var currentProp = stateObject[prop],
                                                formatChunks = (function (stateObject, chunkNames) {
                                                    for (var currentChunkName, extractedValues = {}, chunkNamesLength = chunkNames.length, i = 0; i < chunkNamesLength; i++)
                                                        (currentChunkName = chunkNames[i]), (extractedValues[currentChunkName] = stateObject[currentChunkName]), delete stateObject[currentChunkName];
                                                    return extractedValues;
                                                })(stateObject, formatManifests[prop].chunkNames),
                                                valuesList = (function (stateObject, chunkNames) {
                                                    getValuesList_accumulator.length = 0;
                                                    for (var chunkNamesLength = chunkNames.length, i = 0; i < chunkNamesLength; i++) getValuesList_accumulator.push(stateObject[chunkNames[i]]);
                                                    return getValuesList_accumulator;
                                                })(formatChunks, formatManifests[prop].chunkNames);
                                            (currentProp = (function (formatString, rawValues) {
                                                for (var formattedValueString = formatString, rawValuesLength = rawValues.length, i = 0; i < rawValuesLength; i++)
                                                    formattedValueString = formattedValueString.replace(VALUE_PLACEHOLDER, +rawValues[i].toFixed(4));
                                                return formattedValueString;
                                            })(formatManifests[prop].formatString, valuesList)),
                                                (stateObject[prop] = filterStringChunks(R_RGB, currentProp, sanitizeRGBChunk));
                                        });
                                    }
                                    var getValuesList_accumulator = [];
                                    function getValuesFrom(formattedString) {
                                        return formattedString.match(R_UNFORMATTED_VALUES);
                                    }
                                    Tweenable.prototype.filter.token = {
                                        tweenCreated: function (currentState, fromState, toState, easingObject) {
                                            sanitizeObjectForHexProps(currentState), sanitizeObjectForHexProps(fromState), sanitizeObjectForHexProps(toState), (this._tokenData = getFormatManifests(currentState));
                                        },
                                        beforeTween: function (currentState, fromState, toState, easingObject) {
                                            !(function (easingObject, tokenData) {
                                                Tweenable.each(tokenData, function (prop) {
                                                    var i,
                                                        currentProp = tokenData[prop],
                                                        chunkNames = currentProp.chunkNames,
                                                        chunkLength = chunkNames.length,
                                                        easing = easingObject[prop];
                                                    if ("string" == typeof easing) {
                                                        var easingChunks = easing.split(" "),
                                                            lastEasingChunk = easingChunks[easingChunks.length - 1];
                                                        for (i = 0; i < chunkLength; i++) easingObject[chunkNames[i]] = easingChunks[i] || lastEasingChunk;
                                                    } else for (i = 0; i < chunkLength; i++) easingObject[chunkNames[i]] = easing;
                                                    delete easingObject[prop];
                                                });
                                            })(easingObject, this._tokenData),
                                                expandFormattedProperties(currentState, this._tokenData),
                                                expandFormattedProperties(fromState, this._tokenData),
                                                expandFormattedProperties(toState, this._tokenData);
                                        },
                                        afterTween: function (currentState, fromState, toState, easingObject) {
                                            collapseFormattedProperties(currentState, this._tokenData),
                                                collapseFormattedProperties(fromState, this._tokenData),
                                                collapseFormattedProperties(toState, this._tokenData),
                                                (function (easingObject, tokenData) {
                                                    Tweenable.each(tokenData, function (prop) {
                                                        var currentProp = tokenData[prop],
                                                            chunkNames = currentProp.chunkNames,
                                                            chunkLength = chunkNames.length,
                                                            firstEasing = easingObject[chunkNames[0]],
                                                            typeofEasings = typeof firstEasing;
                                                        if ("string" === typeofEasings) {
                                                            for (var composedEasingString = "", i = 0; i < chunkLength; i++) (composedEasingString += " " + easingObject[chunkNames[i]]), delete easingObject[chunkNames[i]];
                                                            easingObject[prop] = composedEasingString.substr(1);
                                                        } else easingObject[prop] = firstEasing;
                                                    });
                                                })(easingObject, this._tokenData);
                                        },
                                    };
                                })(Tweenable);
                        }.call(null));
                    },
                    {},
                ],
                2: [
                    function (require, module, exports) {
                        var Shape = require("./shape"),
                            utils = require("./utils"),
                            Circle = function (container, options) {
                                (this._pathTemplate = "M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}"), (this.containerAspectRatio = 1), Shape.apply(this, arguments);
                            };
                        (((Circle.prototype = new Shape()).constructor = Circle).prototype._pathString = function (opts) {
                            var widthOfWider = opts.strokeWidth;
                            opts.trailWidth && opts.trailWidth > opts.strokeWidth && (widthOfWider = opts.trailWidth);
                            var r = 50 - widthOfWider / 2;
                            return utils.render(this._pathTemplate, { radius: r, "2radius": 2 * r });
                        }),
                            (Circle.prototype._trailString = function (opts) {
                                return this._pathString(opts);
                            }),
                            (module.exports = Circle);
                    },
                    { "./shape": 7, "./utils": 9 },
                ],
                3: [
                    function (require, module, exports) {
                        var Shape = require("./shape"),
                            utils = require("./utils"),
                            Line = function (container, options) {
                                (this._pathTemplate = "M 0,{center} L 100,{center}"), Shape.apply(this, arguments);
                            };
                        (((Line.prototype = new Shape()).constructor = Line).prototype._initializeSvg = function (svg, opts) {
                            svg.setAttribute("viewBox", "0 0 100 " + opts.strokeWidth), svg.setAttribute("preserveAspectRatio", "none");
                        }),
                            (Line.prototype._pathString = function (opts) {
                                return utils.render(this._pathTemplate, { center: opts.strokeWidth / 2 });
                            }),
                            (Line.prototype._trailString = function (opts) {
                                return this._pathString(opts);
                            }),
                            (module.exports = Line);
                    },
                    { "./shape": 7, "./utils": 9 },
                ],
                4: [
                    function (require, module, exports) {
                        module.exports = {
                            Line: require("./line"),
                            Circle: require("./circle"),
                            SemiCircle: require("./semicircle"),
                            Square: require("./square"),
                            Path: require("./path"),
                            Shape: require("./shape"),
                            utils: require("./utils"),
                        };
                    },
                    { "./circle": 2, "./line": 3, "./path": 5, "./semicircle": 6, "./shape": 7, "./square": 8, "./utils": 9 },
                ],
                5: [
                    function (require, module, exports) {
                        var Tweenable = require("shifty"),
                            utils = require("./utils"),
                            EASING_ALIASES = { easeIn: "easeInCubic", easeOut: "easeOutCubic", easeInOut: "easeInOutCubic" },
                            Path = function Path(path, opts) {
                                if (!(this instanceof Path)) throw new Error("Constructor was called without new keyword");
                                var element;
                                (opts = utils.extend({ duration: 800, easing: "linear", from: {}, to: {}, step: function () {} }, opts)),
                                    (element = utils.isString(path) ? document.querySelector(path) : path),
                                    (this.path = element),
                                    (this._opts = opts),
                                    (this._tweenable = null);
                                var length = this.path.getTotalLength();
                                (this.path.style.strokeDasharray = length + " " + length), this.set(0);
                            };
                        (Path.prototype.value = function () {
                            var offset = this._getComputedDashOffset(),
                                length = this.path.getTotalLength(),
                                progress = 1 - offset / length;
                            return parseFloat(progress.toFixed(6), 10);
                        }),
                            (Path.prototype.set = function (progress) {
                                this.stop(), (this.path.style.strokeDashoffset = this._progressToOffset(progress));
                                var step = this._opts.step;
                                if (utils.isFunction(step)) {
                                    var easing = this._easing(this._opts.easing),
                                        values = this._calculateTo(progress, easing),
                                        reference = this._opts.shape || this;
                                    step(values, reference, this._opts.attachment);
                                }
                            }),
                            (Path.prototype.stop = function () {
                                this._stopTween(), (this.path.style.strokeDashoffset = this._getComputedDashOffset());
                            }),
                            (Path.prototype.animate = function (progress, opts, cb) {
                                (opts = opts || {}), utils.isFunction(opts) && ((cb = opts), (opts = {}));
                                var passedOpts = utils.extend({}, opts),
                                    defaultOpts = utils.extend({}, this._opts);
                                opts = utils.extend(defaultOpts, opts);
                                var shiftyEasing = this._easing(opts.easing),
                                    values = this._resolveFromAndTo(progress, shiftyEasing, passedOpts);
                                this.stop(), this.path.getBoundingClientRect();
                                var offset = this._getComputedDashOffset(),
                                    newOffset = this._progressToOffset(progress),
                                    self = this;
                                (this._tweenable = new Tweenable()),
                                    this._tweenable.tween({
                                        from: utils.extend({ offset: offset }, values.from),
                                        to: utils.extend({ offset: newOffset }, values.to),
                                        duration: opts.duration,
                                        easing: shiftyEasing,
                                        step: function (state) {
                                            self.path.style.strokeDashoffset = state.offset;
                                            var reference = opts.shape || self;
                                            opts.step(state, reference, opts.attachment);
                                        },
                                        finish: function (state) {
                                            utils.isFunction(cb) && cb();
                                        },
                                    });
                            }),
                            (Path.prototype._getComputedDashOffset = function () {
                                var computedStyle = window.getComputedStyle(this.path, null);
                                return parseFloat(computedStyle.getPropertyValue("stroke-dashoffset"), 10);
                            }),
                            (Path.prototype._progressToOffset = function (progress) {
                                var length = this.path.getTotalLength();
                                return length - progress * length;
                            }),
                            (Path.prototype._resolveFromAndTo = function (progress, easing, opts) {
                                return opts.from && opts.to ? { from: opts.from, to: opts.to } : { from: this._calculateFrom(easing), to: this._calculateTo(progress, easing) };
                            }),
                            (Path.prototype._calculateFrom = function (easing) {
                                return Tweenable.interpolate(this._opts.from, this._opts.to, this.value(), easing);
                            }),
                            (Path.prototype._calculateTo = function (progress, easing) {
                                return Tweenable.interpolate(this._opts.from, this._opts.to, progress, easing);
                            }),
                            (Path.prototype._stopTween = function () {
                                null !== this._tweenable && (this._tweenable.stop(), (this._tweenable = null));
                            }),
                            (Path.prototype._easing = function (easing) {
                                return EASING_ALIASES.hasOwnProperty(easing) ? EASING_ALIASES[easing] : easing;
                            }),
                            (module.exports = Path);
                    },
                    { "./utils": 9, shifty: 1 },
                ],
                6: [
                    function (require, module, exports) {
                        var Shape = require("./shape"),
                            Circle = require("./circle"),
                            utils = require("./utils"),
                            SemiCircle = function (container, options) {
                                (this._pathTemplate = "M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0"), (this.containerAspectRatio = 2), Shape.apply(this, arguments);
                            };
                        (((SemiCircle.prototype = new Shape()).constructor = SemiCircle).prototype._initializeSvg = function (svg, opts) {
                            svg.setAttribute("viewBox", "0 0 100 50");
                        }),
                            (SemiCircle.prototype._initializeTextContainer = function (opts, container, textContainer) {
                                opts.text.style &&
                                    ((textContainer.style.top = "auto"),
                                    (textContainer.style.bottom = "0"),
                                    opts.text.alignToBottom ? utils.setStyle(textContainer, "transform", "translate(-50%, 0)") : utils.setStyle(textContainer, "transform", "translate(-50%, 50%)"));
                            }),
                            (SemiCircle.prototype._pathString = Circle.prototype._pathString),
                            (SemiCircle.prototype._trailString = Circle.prototype._trailString),
                            (module.exports = SemiCircle);
                    },
                    { "./circle": 2, "./shape": 7, "./utils": 9 },
                ],
                7: [
                    function (require, module, exports) {
                        var Path = require("./path"),
                            utils = require("./utils"),
                            Shape = function Shape(container, opts) {
                                if (!(this instanceof Shape)) throw new Error("Constructor was called without new keyword");
                                if (0 !== arguments.length) {
                                    (this._opts = utils.extend(
                                        {
                                            color: "#555",
                                            strokeWidth: 1,
                                            trailColor: null,
                                            trailWidth: null,
                                            fill: null,
                                            text: {
                                                style: { color: null, position: "absolute", left: "50%", top: "50%", padding: 0, margin: 0, transform: { prefix: !0, value: "translate(-50%, -50%)" } },
                                                autoStyleContainer: !0,
                                                alignToBottom: !0,
                                                value: null,
                                                className: "progressbar-text",
                                            },
                                            svgStyle: { display: "block", width: "100%" },
                                            warnings: !1,
                                        },
                                        opts,
                                        !0
                                    )),
                                        utils.isObject(opts) && void 0 !== opts.svgStyle && (this._opts.svgStyle = opts.svgStyle),
                                        utils.isObject(opts) && utils.isObject(opts.text) && void 0 !== opts.text.style && (this._opts.text.style = opts.text.style);
                                    var element,
                                        svgView = this._createSvgView(this._opts);
                                    if (!(element = utils.isString(container) ? document.querySelector(container) : container)) throw new Error("Container does not exist: " + container);
                                    (this._container = element),
                                        this._container.appendChild(svgView.svg),
                                        this._opts.warnings && this._warnContainerAspectRatio(this._container),
                                        this._opts.svgStyle && utils.setStyles(svgView.svg, this._opts.svgStyle),
                                        (this.svg = svgView.svg),
                                        (this.path = svgView.path),
                                        (this.trail = svgView.trail),
                                        (this.text = null);
                                    var newOpts = utils.extend({ attachment: void 0, shape: this }, this._opts);
                                    (this._progressPath = new Path(svgView.path, newOpts)), utils.isObject(this._opts.text) && null !== this._opts.text.value && this.setText(this._opts.text.value);
                                }
                            };
                        (Shape.prototype.animate = function (progress, opts, cb) {
                            if (null === this._progressPath) throw new Error("Object is destroyed");
                            this._progressPath.animate(progress, opts, cb);
                        }),
                            (Shape.prototype.stop = function () {
                                if (null === this._progressPath) throw new Error("Object is destroyed");
                                void 0 !== this._progressPath && this._progressPath.stop();
                            }),
                            (Shape.prototype.destroy = function () {
                                if (null === this._progressPath) throw new Error("Object is destroyed");
                                this.stop(),
                                    this.svg.parentNode.removeChild(this.svg),
                                    (this.svg = null),
                                    (this.path = null),
                                    (this.trail = null),
                                    (this._progressPath = null) !== this.text && (this.text.parentNode.removeChild(this.text), (this.text = null));
                            }),
                            (Shape.prototype.set = function (progress) {
                                if (null === this._progressPath) throw new Error("Object is destroyed");
                                this._progressPath.set(progress);
                            }),
                            (Shape.prototype.value = function () {
                                if (null === this._progressPath) throw new Error("Object is destroyed");
                                return void 0 === this._progressPath ? 0 : this._progressPath.value();
                            }),
                            (Shape.prototype.setText = function (newText) {
                                if (null === this._progressPath) throw new Error("Object is destroyed");
                                null === this.text && ((this.text = this._createTextContainer(this._opts, this._container)), this._container.appendChild(this.text)),
                                    utils.isObject(newText) ? (utils.removeChildren(this.text), this.text.appendChild(newText)) : (this.text.innerHTML = newText);
                            }),
                            (Shape.prototype._createSvgView = function (opts) {
                                var svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                                this._initializeSvg(svg, opts);
                                var trailPath = null;
                                (opts.trailColor || opts.trailWidth) && ((trailPath = this._createTrail(opts)), svg.appendChild(trailPath));
                                var path = this._createPath(opts);
                                return svg.appendChild(path), { svg: svg, path: path, trail: trailPath };
                            }),
                            (Shape.prototype._initializeSvg = function (svg, opts) {
                                svg.setAttribute("viewBox", "0 0 100 100");
                            }),
                            (Shape.prototype._createPath = function (opts) {
                                var pathString = this._pathString(opts);
                                return this._createPathElement(pathString, opts);
                            }),
                            (Shape.prototype._createTrail = function (opts) {
                                var pathString = this._trailString(opts),
                                    newOpts = utils.extend({}, opts);
                                return (
                                    newOpts.trailColor || (newOpts.trailColor = "#eee"),
                                    newOpts.trailWidth || (newOpts.trailWidth = newOpts.strokeWidth),
                                    (newOpts.color = newOpts.trailColor),
                                    (newOpts.strokeWidth = newOpts.trailWidth),
                                    (newOpts.fill = null),
                                    this._createPathElement(pathString, newOpts)
                                );
                            }),
                            (Shape.prototype._createPathElement = function (pathString, opts) {
                                var path = document.createElementNS("http://www.w3.org/2000/svg", "path");
                                return (
                                    path.setAttribute("d", pathString),
                                    path.setAttribute("stroke", opts.color),
                                    path.setAttribute("stroke-width", opts.strokeWidth),
                                    opts.fill ? path.setAttribute("fill", opts.fill) : path.setAttribute("fill-opacity", "0"),
                                    path
                                );
                            }),
                            (Shape.prototype._createTextContainer = function (opts, container) {
                                var textContainer = document.createElement("div");
                                textContainer.className = opts.text.className;
                                var textStyle = opts.text.style;
                                return (
                                    textStyle && (opts.text.autoStyleContainer && (container.style.position = "relative"), utils.setStyles(textContainer, textStyle), textStyle.color || (textContainer.style.color = opts.color)),
                                    this._initializeTextContainer(opts, container, textContainer),
                                    textContainer
                                );
                            }),
                            (Shape.prototype._initializeTextContainer = function (opts, container, element) {}),
                            (Shape.prototype._pathString = function (opts) {
                                throw new Error("Override this function for each progress bar");
                            }),
                            (Shape.prototype._trailString = function (opts) {
                                throw new Error("Override this function for each progress bar");
                            }),
                            (Shape.prototype._warnContainerAspectRatio = function (container) {
                                if (this.containerAspectRatio) {
                                    var computedStyle = window.getComputedStyle(container, null),
                                        width = parseFloat(computedStyle.getPropertyValue("width"), 10),
                                        height = parseFloat(computedStyle.getPropertyValue("height"), 10);
                                    utils.floatEquals(this.containerAspectRatio, width / height);
                                }
                            }),
                            (module.exports = Shape);
                    },
                    { "./path": 5, "./utils": 9 },
                ],
                8: [
                    function (require, module, exports) {
                        var Shape = require("./shape"),
                            utils = require("./utils"),
                            Square = function (container, options) {
                                (this._pathTemplate = "M 0,{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{strokeWidth}"),
                                    (this._trailTemplate = "M {startMargin},{halfOfStrokeWidth} L {width},{halfOfStrokeWidth} L {width},{width} L {halfOfStrokeWidth},{width} L {halfOfStrokeWidth},{halfOfStrokeWidth}"),
                                    Shape.apply(this, arguments);
                            };
                        (((Square.prototype = new Shape()).constructor = Square).prototype._pathString = function (opts) {
                            var w = 100 - opts.strokeWidth / 2;
                            return utils.render(this._pathTemplate, { width: w, strokeWidth: opts.strokeWidth, halfOfStrokeWidth: opts.strokeWidth / 2 });
                        }),
                            (Square.prototype._trailString = function (opts) {
                                var w = 100 - opts.strokeWidth / 2;
                                return utils.render(this._trailTemplate, { width: w, strokeWidth: opts.strokeWidth, halfOfStrokeWidth: opts.strokeWidth / 2, startMargin: opts.strokeWidth / 2 - opts.trailWidth / 2 });
                            }),
                            (module.exports = Square);
                    },
                    { "./shape": 7, "./utils": 9 },
                ],
                9: [
                    function (require, module, exports) {
                        var PREFIXES = "Webkit Moz O ms".split(" ");
                        function setStyle(element, style, value) {
                            for (var elStyle = element.style, i = 0; i < PREFIXES.length; ++i) {
                                var prefix = PREFIXES[i];
                                elStyle[prefix + capitalize(style)] = value;
                            }
                            elStyle[style] = value;
                        }
                        function capitalize(text) {
                            return text.charAt(0).toUpperCase() + text.slice(1);
                        }
                        function isObject(obj) {
                            if (
                                (function (obj) {
                                    return "[object Array]" === Object.prototype.toString.call(obj);
                                })(obj)
                            )
                                return !1;
                            var type = typeof obj;
                            return "object" === type && !!obj;
                        }
                        function forEachObject(object, callback) {
                            for (var key in object)
                                if (object.hasOwnProperty(key)) {
                                    var val = object[key];
                                    callback(val, key);
                                }
                        }
                        module.exports = {
                            extend: function extend(destination, source, recursive) {
                                for (var attrName in ((destination = destination || {}), (recursive = recursive || !1), (source = source || {})))
                                    if (source.hasOwnProperty(attrName)) {
                                        var destVal = destination[attrName],
                                            sourceVal = source[attrName];
                                        recursive && isObject(destVal) && isObject(sourceVal) ? (destination[attrName] = extend(destVal, sourceVal, recursive)) : (destination[attrName] = sourceVal);
                                    }
                                return destination;
                            },
                            render: function (template, vars) {
                                var rendered = template;
                                for (var key in vars)
                                    if (vars.hasOwnProperty(key)) {
                                        var val = vars[key],
                                            regExpString = "\\{" + key + "\\}",
                                            regExp = new RegExp(regExpString, "g");
                                        rendered = rendered.replace(regExp, val);
                                    }
                                return rendered;
                            },
                            setStyle: setStyle,
                            setStyles: function (element, styles) {
                                forEachObject(styles, function (styleValue, styleName) {
                                    null != styleValue && (isObject(styleValue) && !0 === styleValue.prefix ? setStyle(element, styleName, styleValue.value) : (element.style[styleName] = styleValue));
                                });
                            },
                            capitalize: capitalize,
                            isString: function (obj) {
                                return "string" == typeof obj || obj instanceof String;
                            },
                            isFunction: function (obj) {
                                return "function" == typeof obj;
                            },
                            isObject: isObject,
                            forEachObject: forEachObject,
                            floatEquals: function (a, b) {
                                return Math.abs(a - b) < 0.001;
                            },
                            removeChildren: function (el) {
                                for (; el.firstChild; ) el.removeChild(el.firstChild);
                            },
                        };
                    },
                    {},
                ],
            },
            {},
            [4]
        )(4);
    });
    var SplashLoader = (function () {
            function SplashLoader(options) {
                (this.circleLoader = null),
                    (this.loaded = !1),
                    (this.showPlayButton = "undefined" == typeof playBtn || playBtn),
                    (this.progress = 0),
                    (this.options = { gameId: "12346", gameTitle: "Place Holder", gameName: "place-holder", libs: [], version: "dev", barColor: "white" }),
                    (this.options.gameId = options.gameId),
                    (this.options.gameTitle = options.gameTitle),
                    (this.options.version = options.version),
                    (this.options.barColor = options.barColor ? options.barColor : this.options.barColor),
                    (this.options.libs = options.libs);
            }
            return (
                (SplashLoader.getInstance = function (options) {
                    if (!SplashLoader.instance) {
                        if (!options) throw new Error("Can not create new SplashLoader instance without options!");
                        SplashLoader.instance = new SplashLoader(options);
                    }
                    return SplashLoader.instance;
                }),
                (SplashLoader.prototype.create = function () {
                    return __awaiter(this, void 0, void 0, function () {
                        var css, html, head, style, container, body;
                        return __generator(this, function (_a) {
                            switch (_a.label) {
                                case 0:
                                    return (
                                        (css =
                                            "\n        #h5branding-center {\n            position: absolute;\n            top: 45%;\n            left: 50%;\n            transform: translate(-50%, -20%);\n            text-align: center;\n            width: 100%;\n        }\n        #h5branding-wrapper {\n            position: relative;\n            z-index: 665;\n            width: 150px;\n            height: 150px;\n            display:inline-block;\n            margin: 35px 40px 96px 40px;\n        }\n\n        #h5branding-wrapper > #h5branding-bar, #h5branding-wrapper > img {\n            box-shadow: inset 10px 10px 20px 5px rgba(0, 0, 0, 0.5);\n            border-radius: 50%;\n            position: absolute;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n        }\n\n        #h5branding-ad {\n            position: relative;\n            z-index: 667;\n            border-radius: 5px;\n            border: 3px solid white;\n            background: rgba(256, 256, 256, 0.2);\n            width: 336px;\n            height: 280px;\n            display: none;\n            margin: 0px 10px 0px 10px;\n        }\n\n        #h5branding-wrapper > img {\n            /* Needs appropriate vendor prefixes */\n            box-sizing: border-box;\n\n            /* This needs to be equal to strokeWidth */\n            padding: 4%;\n        }\n\n        #h5branding-wrapper > img {\n            border-radius: 50%;\n            box-shadow: inset 0 5px 5px rgba(0, 0, 0, 0.5), 5px 5px 7px rgba(0, 0, 0, 0.3);\n        }\n\n        #h5branding-container {\n            box-sizing: border-box;\n            position: absolute;\n            z-index: 664;\n            top: 0;\n            left: 0;\n            width: 100%;\n            height: 100%;\n            background-color: #000;\n            overflow: hidden;\n        }\n        \n        #h5branding-background {\n            position: absolute;\n            top: -25%;\n            left: -25%;\n            width: 150%;\n            height: 150%;\n            background-blend-mode: multiply;\n            background-size: cover;\n            filter: blur(40px) brightness(1.5);\n        }\n        \n        @media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n             /* IE10+ CSS styles go here */\n             #h5branding-background {\n                background-image: none !important;\n             }\n        }\n\n        #h5branding-logo {\n            position: absolute;\n            margin: 0 auto;\n            left: 0;\n            right: 0;\n            text-align: center;\n            top: 10%;\n        }\n\n        #h5branding-logo > img {\n            height: 150px;\n        }\n\n        #h5branding-title {\n            position: absolute;\n            width: 100%;\n            background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.5) 50%, transparent);\n            color: #fff;\n            text-shadow: 0 0 1px rgba(0, 0, 0, 0.7);\n            bottom:10%;\n            padding: 15px 0;\n            text-align: center;\n            font-size: 18px;\n            font-family: Helvetica, Arial, sans-serif;\n            font-weight: bold;\n            line-height: 100%;\n        }\n        \n        #h5branding-button {\n            /* border: 0; */\n            padding: 10px 22px;\n            border-radius: 5px;\n            border: 3px solid white;\n            background: linear-gradient(0deg, #dddddd, #ffffff);\n            color: #222;\n            text-transform: uppercase;\n            text-shadow: 0 0 1px #fff;\n            font-family: Helvetica, Arial, sans-serif;\n            font-weight: bold;\n            font-size: 18px;\n            cursor: pointer;\n            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);\n            display: none;\n            width: 150px;\n            position: absolute;\n            top: 170px;\n            margin: 0 auto;\n            left: 0;\n            right: 0;\n        }\n        \n        @media (orientation: portrait) and (max-width: 1080px) {\n            #h5branding-logo > img {\n                height: initial;\n                width:100%;\n            }\n        }\n        \n        @media (orientation: landscape) and (max-height: 640px) {\n            #h5branding-title {\n                display: none;\n            }\n            \n            #h5branding-logo > img {\n                height: 100px;\n            }\n        }\n        \n        @media (orientation: landscape) and (max-height: 460px) {\n            #h5branding-title {\n                display: none;\n            }\n            \n            #h5branding-wrapper {\n                width: 110px;\n                height: 110px;\n                margin: 0;\n            }\n            \n            #h5branding-logo {\n                top: 0;\n                transform: scale(0.7, 0.7);\n            }\n       \n            #h5branding-button {\n                top: initial;\n                width: 110px;\n                font-size: 14px;\n                position: absolute;\n                top: 140px;\n                left: 0;\n                right: 0;\n            }\n            \n            #h5branding-ad {\n               display: none !important;\n            }\n        }\n        \n        @media (orientation: portrait) and (max-width: 250px) {\n            #h5branding-logo {\n                top: 2%;\n            }\n        }\n        \n        @media (orientation: landscape) and (max-width: 330px) {\n             #h5branding-button {\n                top: 120px;\n            }\n            \n            #h5branding-logo > img {\n                height: 70px;\n            }\n        }\n        \n        @media (max-width: 600px) and (max-height: 850px) {\n            #h5branding-ad {\n               display: none !important;\n            }\n        }\n        \n        @media (max-width: 600px) and (max-height: 1100px) {\n            #h5branding-center {\n                top: 40%;\n            }\n\n            #h5branding-title {\n               bottom: 5%\n            }\n        }\n        \n        @media (max-width: 600px) and (max-height: 900px) {\n            #h5branding-title {\n               display: none\n            }\n        }\n        \n        @media (orientation: landscape) and (min-width: 800px) {\n            #h5branding-wrapper {\n                margin-left: 120px;\n                margin-right: 120px;\n            }\n        }\n\n        "),
                                        (gameLogo = this.getGameLogoUrl(this.options.gameId)),
                                        (gameTitle = this.options.gameTitle),
                                        (html =
                                            '\n        <div id="h5branding-background"></div>\n        <div id="h5branding-logo"></div>\n        <div id="h5branding-center">\n            <div id="h5branding-ad"></div>\n            <div id="h5branding-wrapper">\n                <img src="' +
                                            gameLogo +
                                            '" />\n                <div id="h5branding-bar"></div>\n                <button id="h5branding-button" onclick="h5branding.SplashLoader.getInstance().onPlayButtonClick();">Play</button>\n            </div>\n        </div>\n        <div id="h5branding-title">' +
                                            gameTitle +
                                            "</div>\n    "),
                                        (head = document.head || document.getElementsByTagName("head")[0]),
                                        ((style = document.createElement("style")).type = "text/css"),
                                        style.styleSheet ? (style.styleSheet.cssText = css) : style.appendChild(document.createTextNode(css)),
                                        head.appendChild(style),
                                        ((container = document.createElement("div")).innerHTML = html),
                                        (container.id = "h5branding-container"),
                                        (body = document.body || document.getElementsByTagName("body")[0]).insertBefore(container, body.firstChild),
                                        (this.circleLoader = new progressbar.Circle("#h5branding-bar", { strokeWidth: 3, color: this.options.barColor })),
                                        [4, Promise.all([this.loadBranding(), this.loadLibs(), GoogleAnalytics.preload()])]
                                    );
                                case 1:
                                    return _a.sent(), (this.loaded = !0), [2];
                            }
                            var gameLogo, gameTitle;
                        });
                    });
                }),
                (SplashLoader.prototype.loadBranding = function () {
                    return __awaiter(this, void 0, void 0, function () {
                        var background, logoContainer, logo;
                        return __generator(this, function (_a) {
                            switch (_a.label) {
                                case 0:
                                    return [4, Branding$$1.preload(Date.now().toString())];
                                case 1:
                                    return (
                                        _a.sent(),
                                        (background = document.getElementById("h5branding-background")) &&
                                            ((background.style.backgroundImage = "url(" + this.getGameLogoUrl(this.options.gameId) + ")"), (background.style.backgroundColor = Branding$$1.brandingBackgroundColor)),
                                        (logoContainer = document.getElementById("h5branding-logo")) &&
                                            Utils.getBrandingDomain() !== exports.BrandingDomain.Neutral &&
                                            (((logo = document.createElement("img")).src = Branding$$1.brandingLogoUrl.replace("_small", "")), logoContainer.appendChild(logo)),
                                        [2]
                                    );
                            }
                        });
                    });
                }),
                (SplashLoader.prototype.loadLibs = function () {
                    var _this = this,
                        scripts = this.options.libs.map(function (url, index) {
                            return Loader.instance.loadScript(url, !0, function () {
                                _this.setScriptloadProgress(scripts.length, index + 1);
                            });
                        });
                    return Promise.all(scripts);
                }),
                Object.defineProperty(SplashLoader.prototype, "bannerAllowed", {
                    get: function () {
                        var width = document.body.clientWidth,
                            height = document.body.clientHeight;
                        return this.progress < 100 && !(height < width && height <= 460) && !(width < 600 && height < 850);
                    },
                    enumerable: !0,
                    configurable: !0,
                }),
                (SplashLoader.prototype.showBanner = function () {
                    if (!this.bannerAllowed) return null;
                    var banner = document.getElementById("h5branding-ad");
                    return banner ? ((banner.style.display = "inline-flex"), banner) : null;
                }),
                (SplashLoader.prototype.setScriptloadProgress = function (maxScripts, increment) {
                    var progress = (0.3 * increment) / maxScripts;
                    this.circleLoader.animate(progress, null, function () {});
                }),
                (SplashLoader.prototype.setLoadProgress = function (progress) {
                    var _this = this;
                    if (this.loaded)
                        if (((progress = 30 + 0.7 * progress), 100 === (this.progress = progress))) {
                            var button_1 = document.querySelector("#h5branding-button");
                            this.circleLoader.animate(1, null, function () {
                                !Utils.inGDGameZone() && button_1 && !0 === _this.showPlayButton ? (button_1.style.display = "block") : (Utils.inGDGameZone() || !1 === _this.showPlayButton) && _this.onPlayButtonClick();
                            });
                        } else this.circleLoader.animate(progress / 100, null, function () {});
                }),
                (SplashLoader.prototype.setButtonCallback = function (cb) {
                    this.buttonCallback = cb;
                }),
                (SplashLoader.prototype.onPlayButtonClick = function () {
                    this.buttonCallback && this.buttonCallback();
                }),
                (SplashLoader.prototype.destroy = function () {
                    var element = document.querySelector("#h5branding-container");
                    null !== element && null !== element.parentNode && element.parentNode.removeChild(element);
                }),
                (SplashLoader.prototype.getGameLogoUrl = function (gameId) {
                    var imagePath = gameId + "-512x512.jpeg";
                    return window.hasOwnProperty("fbrqSA") && !0 === window.fbrqSA ? "assets/" + imagePath : "assets/" + imagePath;
                }),
                SplashLoader
            );
        })(),
        EGAProgressionStatus$1 = GameAnalytics_node.EGAProgressionStatus,
        google = new GoogleAnalytics(),
        gameanalytics$1 = new GameAnalytics$1();
    (exports.EGAProgressionStatus = EGAProgressionStatus$1),
        (exports.google = google),
        (exports.gameanalytics = gameanalytics$1),
        (exports.Utils = Utils),
        (exports.Domain = Domain),
        (exports.Branding = Branding$$1),
        (exports.SplashLoader = SplashLoader),
        Object.defineProperty(exports, "__esModule", { value: !0 });
}),
    (function (global, factory) {
        "object" == typeof exports && "undefined" != typeof module ? factory(exports) : "function" == typeof define && define.amd ? define(["exports"], factory) : factory((global.h5ads = global.h5ads || {}));
    })(this, function (exports) {
        "use strict";
        var extendStatics = function (d, b) {
            return (extendStatics =
                Object.setPrototypeOf ||
                ({ __proto__: [] } instanceof Array &&
                    function (d, b) {
                        d.__proto__ = b;
                    }) ||
                function (d, b) {
                    for (var p in b) b.hasOwnProperty(p) && (d[p] = b[p]);
                })(d, b);
        };
        var module,
            CocoonProvider,
            eventemitter3 =
                ((function (module) {
                    var has = Object.prototype.hasOwnProperty,
                        prefix = "~";
                    function Events() {}
                    function EE(fn, context, once) {
                        (this.fn = fn), (this.context = context), (this.once = once || !1);
                    }
                    function addListener(emitter, event, fn, context, once) {
                        if ("function" != typeof fn) throw new TypeError("The listener must be a function");
                        var listener = new EE(fn, context || emitter, once),
                            evt = prefix ? prefix + event : event;
                        return (
                            emitter._events[evt] ? (emitter._events[evt].fn ? (emitter._events[evt] = [emitter._events[evt], listener]) : emitter._events[evt].push(listener)) : ((emitter._events[evt] = listener), emitter._eventsCount++),
                            emitter
                        );
                    }
                    function clearEvent(emitter, evt) {
                        0 == --emitter._eventsCount ? (emitter._events = new Events()) : delete emitter._events[evt];
                    }
                    function EventEmitter() {
                        (this._events = new Events()), (this._eventsCount = 0);
                    }
                    Object.create && ((Events.prototype = Object.create(null)), new Events().__proto__ || (prefix = !1)),
                        (EventEmitter.prototype.eventNames = function () {
                            var events,
                                name,
                                names = [];
                            if (0 === this._eventsCount) return names;
                            for (name in (events = this._events)) has.call(events, name) && names.push(prefix ? name.slice(1) : name);
                            return Object.getOwnPropertySymbols ? names.concat(Object.getOwnPropertySymbols(events)) : names;
                        }),
                        (EventEmitter.prototype.listeners = function (event) {
                            var evt = prefix ? prefix + event : event,
                                handlers = this._events[evt];
                            if (!handlers) return [];
                            if (handlers.fn) return [handlers.fn];
                            for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) ee[i] = handlers[i].fn;
                            return ee;
                        }),
                        (EventEmitter.prototype.listenerCount = function (event) {
                            var evt = prefix ? prefix + event : event,
                                listeners = this._events[evt];
                            return listeners ? (listeners.fn ? 1 : listeners.length) : 0;
                        }),
                        (EventEmitter.prototype.emit = function (event, a1, a2, a3, a4, a5) {
                            var evt = prefix ? prefix + event : event;
                            if (!this._events[evt]) return !1;
                            var args,
                                i,
                                listeners = this._events[evt],
                                len = arguments.length;
                            if (listeners.fn) {
                                switch ((listeners.once && this.removeListener(event, listeners.fn, void 0, !0), len)) {
                                    case 1:
                                        return listeners.fn.call(listeners.context), !0;
                                    case 2:
                                        return listeners.fn.call(listeners.context, a1), !0;
                                    case 3:
                                        return listeners.fn.call(listeners.context, a1, a2), !0;
                                    case 4:
                                        return listeners.fn.call(listeners.context, a1, a2, a3), !0;
                                    case 5:
                                        return listeners.fn.call(listeners.context, a1, a2, a3, a4), !0;
                                    case 6:
                                        return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), !0;
                                }
                                for (i = 1, args = new Array(len - 1); i < len; i++) args[i - 1] = arguments[i];
                                listeners.fn.apply(listeners.context, args);
                            } else {
                                var j,
                                    length = listeners.length;
                                for (i = 0; i < length; i++)
                                    switch ((listeners[i].once && this.removeListener(event, listeners[i].fn, void 0, !0), len)) {
                                        case 1:
                                            listeners[i].fn.call(listeners[i].context);
                                            break;
                                        case 2:
                                            listeners[i].fn.call(listeners[i].context, a1);
                                            break;
                                        case 3:
                                            listeners[i].fn.call(listeners[i].context, a1, a2);
                                            break;
                                        case 4:
                                            listeners[i].fn.call(listeners[i].context, a1, a2, a3);
                                            break;
                                        default:
                                            if (!args) for (j = 1, args = new Array(len - 1); j < len; j++) args[j - 1] = arguments[j];
                                            listeners[i].fn.apply(listeners[i].context, args);
                                    }
                            }
                            return !0;
                        }),
                        (EventEmitter.prototype.on = function (event, fn, context) {
                            return addListener(this, event, fn, context, !1);
                        }),
                        (EventEmitter.prototype.once = function (event, fn, context) {
                            return addListener(this, event, fn, context, !0);
                        }),
                        (EventEmitter.prototype.removeListener = function (event, fn, context, once) {
                            var evt = prefix ? prefix + event : event;
                            if (!this._events[evt]) return this;
                            if (!fn) return clearEvent(this, evt), this;
                            var listeners = this._events[evt];
                            if (listeners.fn) listeners.fn !== fn || (once && !listeners.once) || (context && listeners.context !== context) || clearEvent(this, evt);
                            else {
                                for (var i = 0, events = [], length = listeners.length; i < length; i++) (listeners[i].fn !== fn || (once && !listeners[i].once) || (context && listeners[i].context !== context)) && events.push(listeners[i]);
                                events.length ? (this._events[evt] = 1 === events.length ? events[0] : events) : clearEvent(this, evt);
                            }
                            return this;
                        }),
                        (EventEmitter.prototype.removeAllListeners = function (event) {
                            var evt;
                            return event ? ((evt = prefix ? prefix + event : event), this._events[evt] && clearEvent(this, evt)) : ((this._events = new Events()), (this._eventsCount = 0)), this;
                        }),
                        (EventEmitter.prototype.off = EventEmitter.prototype.removeListener),
                        (EventEmitter.prototype.addListener = EventEmitter.prototype.on),
                        (EventEmitter.prefixed = prefix),
                        (EventEmitter.EventEmitter = EventEmitter),
                        (module.exports = EventEmitter);
                })((module = { exports: {} }), module.exports),
                module.exports);
        !(function (CocoonProvider) {
            (CocoonProvider[(CocoonProvider.AdMob = 0)] = "AdMob"),
                (CocoonProvider[(CocoonProvider.MoPub = 1)] = "MoPub"),
                (CocoonProvider[(CocoonProvider.Chartboost = 2)] = "Chartboost"),
                (CocoonProvider[(CocoonProvider.Heyzap = 3)] = "Heyzap");
        })(CocoonProvider || (CocoonProvider = {}));
        var GameDistributionAdType,
            GameDistributionBannerSize,
            GameDistributionAlignment,
            CocoonAds$$1 = (function () {
                function CocoonAds$$1(provider, config) {
                    if (((this.adsEnabled = !1), (this.bannerShowable = !1), (this.interstitialShowable = !1), (this.insentiveShowable = !1), Cocoon && Cocoon.Ad)) {
                        switch (((this.adsEnabled = !0), provider)) {
                            default:
                            case CocoonProvider.AdMob:
                                this.cocoonProvider = Cocoon.Ad.AdMob;
                                break;
                            case CocoonProvider.Chartboost:
                                this.cocoonProvider = Cocoon.Ad.Chartboost;
                                break;
                            case CocoonProvider.Heyzap:
                                this.cocoonProvider = Cocoon.Ad.Heyzap;
                                break;
                            case CocoonProvider.MoPub:
                                this.cocoonProvider = Cocoon.Ad.MoPub;
                        }
                        this.cocoonProvider.configure(config);
                    }
                }
                return (
                    (CocoonAds$$1.prototype.setManager = function (manager) {
                        (this.adManager = manager), this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED);
                    }),
                    (CocoonAds$$1.prototype.showAd = function (adType) {
                        if (this.adsEnabled) {
                            if (adType === exports.AdType.banner) {
                                if (!this.bannerShowable || null === this.banner) return;
                                this.adManager.emit(exports.AdEvents.BANNER_SHOWN, this.banner.width, this.banner.height), (this.adManager.bannerActive = !0), this.banner.show();
                            }
                            if (adType === exports.AdType.interstitial) {
                                if (!this.interstitialShowable || null === this.interstitial) return void this.adManager.emit(exports.AdEvents.CONTENT_RESUMED, exports.AdType.interstitial);
                                this.interstitial.show();
                            }
                            if (adType === exports.AdType.rewarded) {
                                if (!this.insentiveShowable || null === this.insentive) return void this.adManager.emit(exports.AdEvents.CONTENT_RESUMED, exports.AdType.rewarded);
                                this.insentive.show();
                            }
                        } else adType !== exports.AdType.banner && this.adManager.emit(exports.AdEvents.CONTENT_RESUMED);
                    }),
                    (CocoonAds$$1.prototype.adAvailable = function (adType) {
                        return !0;
                    }),
                    (CocoonAds$$1.prototype.preloadAd = function (adType, adId, bannerPosition) {
                        var _this = this;
                        this.adsEnabled &&
                            (this.destroyAd(adType),
                            adType === exports.AdType.banner &&
                                ((this.banner = this.cocoonProvider.createBanner(adId)),
                                bannerPosition && this.banner.setLayout(bannerPosition),
                                this.banner.on("load", function () {
                                    _this.bannerShowable = !0;
                                }),
                                this.banner.on("fail", function () {
                                    (_this.bannerShowable = !1), (_this.banner = null);
                                }),
                                this.banner.on("click", function () {
                                    _this.adManager.emit(exports.AdEvents.AD_CLICKED, exports.AdType.banner);
                                }),
                                this.banner.on("show", function () {}),
                                this.banner.on("dismiss", function () {}),
                                this.banner.load()),
                            adType === exports.AdType.interstitial &&
                                ((this.interstitial = this.cocoonProvider.createInterstitial(adId)),
                                this.interstitial.on("load", function () {
                                    _this.interstitialShowable = !0;
                                }),
                                this.interstitial.on("fail", function () {
                                    (_this.interstitialShowable = !1), (_this.interstitial = null);
                                }),
                                this.interstitial.on("click", function () {
                                    _this.adManager.emit(exports.AdEvents.AD_CLICKED, exports.AdType.interstitial);
                                }),
                                this.interstitial.on("show", function () {
                                    _this.adManager.emit(exports.AdEvents.CONTENT_PAUSED, exports.AdType.interstitial);
                                }),
                                this.interstitial.on("dismiss", function () {
                                    _this.adManager.emit(exports.AdEvents.CONTENT_RESUMED, exports.AdType.interstitial), (_this.interstitialShowable = !1), (_this.interstitial = null);
                                }),
                                this.interstitial.load()),
                            adType === exports.AdType.rewarded &&
                                ((this.insentive = this.cocoonProvider.createRewardedVideo(adId)),
                                this.insentive.on("load", function () {
                                    _this.insentiveShowable = !0;
                                }),
                                this.insentive.on("fail", function () {
                                    (_this.insentiveShowable = !1), (_this.insentive = null);
                                }),
                                this.insentive.on("click", function () {
                                    _this.adManager.emit(exports.AdEvents.AD_CLICKED, exports.AdType.rewarded);
                                }),
                                this.insentive.on("show", function () {
                                    _this.adManager.emit(exports.AdEvents.CONTENT_PAUSED, exports.AdType.rewarded);
                                }),
                                this.insentive.on("dismiss", function () {
                                    _this.adManager.emit(exports.AdEvents.CONTENT_RESUMED, exports.AdType.rewarded), (_this.insentiveShowable = !1), (_this.insentive = null);
                                }),
                                this.insentive.on("reward", function () {
                                    _this.adManager.emit(exports.AdEvents.AD_REWARDED, exports.AdType.rewarded), (_this.insentiveShowable = !1), (_this.insentive = null);
                                }),
                                this.insentive.load()));
                    }),
                    (CocoonAds$$1.prototype.destroyAd = function (adType) {
                        if (this.adsEnabled) {
                            if (adType === exports.AdType.banner && null !== this.banner) {
                                try {
                                    this.cocoonProvider.releaseBanner(this.banner);
                                } catch (e) {}
                                (this.banner = null), (this.bannerShowable = !1);
                            }
                            adType === exports.AdType.interstitial && null !== this.interstitial && (this.cocoonProvider.releaseInterstitial(this.interstitial), (this.interstitial = null), (this.interstitialShowable = !1));
                        }
                    }),
                    (CocoonAds$$1.prototype.hideAd = function (adType) {
                        this.adsEnabled &&
                            (adType === exports.AdType.interstitial && null !== this.interstitial && this.interstitial.hide(),
                            adType === exports.AdType.banner &&
                                null !== this.banner &&
                                (this.adManager.bannerActive && ((this.adManager.bannerActive = !1), this.adManager.emit(exports.AdEvents.BANNER_HIDDEN, this.banner.width, this.banner.height)), this.banner.hide()),
                            adType === exports.AdType.rewarded && null !== this.insentive && this.insentive.hide());
                    }),
                    CocoonAds$$1
                );
            })(),
            CordovaGamedistribution$$1 = (function () {
                function CordovaGamedistribution$$1(gameId, userId, debug) {
                    void 0 === debug && (debug = !1),
                        (this.adsEnabled = !1),
                        void 0 === cordova.plugins ||
                            (void 0 !== cordova.plugins && void 0 === cordova.plugins.gdApi) ||
                            (debug && cordova.plugins.gdApi.enableTestAds(),
                            this.setAdListeners(),
                            cordova.plugins.gdApi.init(
                                [gameId, userId],
                                function (data) {},
                                function (error) {}
                            ));
                }
                return (
                    (CordovaGamedistribution$$1.prototype.setAdListeners = function () {
                        var _this = this;
                        cordova.plugins.gdApi.setAdListener(
                            function (data) {
                                switch (data.event) {
                                    case "BANNER_STARTED":
                                        _this.adManager.emit(exports.AdEvents.CONTENT_PAUSED);
                                        break;
                                    case "API_IS_READY":
                                        _this.adsEnabled = !0;
                                        break;
                                    case "API_ALREADY_INITIALIZED":
                                        break;
                                    case "BANNER_CLOSED":
                                    case "API_NOT_READY":
                                    case "BANNER_FAILED":
                                        _this.adManager.emit(exports.AdEvents.CONTENT_RESUMED);
                                }
                            },
                            function (error) {
                                _this.adsEnabled = !1;
                            }
                        );
                    }),
                    (CordovaGamedistribution$$1.prototype.setManager = function (manager) {
                        (this.adManager = manager), this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED);
                    }),
                    (CordovaGamedistribution$$1.prototype.showAd = function (adType) {
                        var _this = this;
                        this.adsEnabled
                            ? cordova.plugins.gdApi.showBanner(
                                  function (data) {},
                                  function (data) {
                                      _this.adManager.emit(exports.AdEvents.CONTENT_RESUMED);
                                  }
                              )
                            : this.adManager.emit(exports.AdEvents.CONTENT_RESUMED);
                    }),
                    (CordovaGamedistribution$$1.prototype.adAvailable = function (adType) {
                        return !0;
                    }),
                    (CordovaGamedistribution$$1.prototype.preloadAd = function (adType) {}),
                    (CordovaGamedistribution$$1.prototype.destroyAd = function (adType) {}),
                    (CordovaGamedistribution$$1.prototype.hideAd = function (adType) {}),
                    CordovaGamedistribution$$1
                );
            })(),
            CordovaGamedock$$1 = (function () {
                function CordovaGamedock$$1() {
                    var _this = this;
                    if (((this.adsEnabled = !1), (this.rewardedLoaded = !1), "undefined" != typeof gamedockSDK)) {
                        gamedockSDK.on("PrivacyPolicyStatus", function (data) {
                            _this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED);
                        }),
                            gamedockSDK.initialise(!1, { shouldBlock: !0, requiredAge: 12 }, !0, "PRODUCTION", []),
                            gamedockSDK.on("AdAvailable", function (data) {
                                switch (data.type) {
                                    case "interstitial":
                                        _this.interstitalAvailable();
                                        break;
                                    case "rewardVideo":
                                        _this.rewardedChanged(!0);
                                        break;
                                    case "banner":
                                        throw new Error("Not yet implemented.");
                                }
                            }),
                            gamedockSDK.on("AdNotAvailable", function (data) {
                                switch (data.type) {
                                    case "interstitial":
                                    case "rewardVideo":
                                        _this.resumeGameplay();
                                        break;
                                    case "banner":
                                        throw new Error("Not yet implemented.");
                                }
                            }),
                            gamedockSDK.on("AdFinished", function (data) {
                                switch (data.type) {
                                    case "interstitial":
                                        _this.resumeGameplay();
                                        break;
                                    case "rewardVideo":
                                        _this.rewardVideoFinished(data.reason);
                                        break;
                                    case "banner":
                                        throw new Error("Not yet implemented.");
                                }
                            });
                    }
                }
                return (
                    (CordovaGamedock$$1.prototype.setManager = function (manager) {
                        this.adManager = manager;
                    }),
                    (CordovaGamedock$$1.prototype.showAd = function (adType) {
                        if ((void 0 === adType && (adType = exports.AdType.interstitial), "undefined" != typeof gamedockSDK))
                            switch (adType) {
                                case exports.AdType.interstitial:
                                    this.adManager.emit(exports.AdEvents.CONTENT_PAUSED), gamedockSDK.requestInterstitial();
                                    break;
                                case exports.AdType.rewarded:
                                    if (!this.adAvailable(exports.AdType.rewarded)) {
                                        this.resumeGameplay();
                                        break;
                                    }
                                    this.adManager.emit(exports.AdEvents.CONTENT_PAUSED), this.rewardedChanged(!1), gamedockSDK.playRewardVideo();
                                    break;
                                default:
                                    this.resumeGameplay();
                            }
                    }),
                    (CordovaGamedock$$1.prototype.interstitalAvailable = function () {
                        "undefined" != typeof gamedockSDK && gamedockSDK.playInterstitial();
                    }),
                    (CordovaGamedock$$1.prototype.rewardVideoFinished = function (reason) {
                        switch (reason) {
                            case "dismiss":
                                this.resumeGameplay();
                                break;
                            case "close":
                                this.adManager.emit(exports.AdEvents.AD_REWARDED);
                        }
                    }),
                    (CordovaGamedock$$1.prototype.resumeGameplay = function () {
                        this.adManager.emit(exports.AdEvents.CONTENT_RESUMED);
                    }),
                    (CordovaGamedock$$1.prototype.preloadAd = function (adType) {
                        if ((void 0 === adType && (adType = exports.AdType.interstitial), "undefined" != typeof gamedockSDK))
                            switch (adType) {
                                case exports.AdType.rewarded:
                                    if (this.rewardedLoaded) return;
                                    gamedockSDK.requestRewardVideo();
                            }
                    }),
                    (CordovaGamedock$$1.prototype.destroyAd = function () {}),
                    (CordovaGamedock$$1.prototype.hideAd = function () {}),
                    (CordovaGamedock$$1.prototype.adAvailable = function (adType) {
                        switch (adType) {
                            case exports.AdType.rewarded:
                                return this.rewardedLoaded;
                        }
                        return !1;
                    }),
                    (CordovaGamedock$$1.prototype.rewardedChanged = function (available) {
                        this.rewardedLoaded = available;
                    }),
                    CordovaGamedock$$1
                );
            })(),
            CordovaHeyzap$$1 = (function () {
                function CordovaHeyzap$$1(publisherId) {
                    var _this = this;
                    (this.adsEnabled = !1),
                        (this.adsEnabled = !0),
                        HeyzapAds.start(publisherId).then(
                            function () {},
                            function (e) {
                                _this.adsEnabled = !1;
                            }
                        );
                }
                return (
                    (CordovaHeyzap$$1.prototype.setManager = function (manager) {
                        (this.adManager = manager), this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED);
                    }),
                    (CordovaHeyzap$$1.prototype.showAd = function (adType, bannerAdPositions) {
                        var _this = this;
                        switch ((this.adsEnabled || this.adManager.emit(exports.AdEvents.CONTENT_RESUMED), adType)) {
                            case exports.AdType.interstitial:
                                HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.HIDE, function () {
                                    _this.adManager.emit(exports.AdEvents.CONTENT_RESUMED, HeyzapAds.InterstitialAd.Events.HIDE);
                                }),
                                    HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.SHOW_FAILED, function () {
                                        _this.adManager.emit(exports.AdEvents.CONTENT_RESUMED, HeyzapAds.InterstitialAd.Events.SHOW_FAILED);
                                    }),
                                    HeyzapAds.InterstitialAd.addEventListener(HeyzapAds.InterstitialAd.Events.CLICKED, function () {
                                        _this.adManager.emit(exports.AdEvents.AD_CLICKED, HeyzapAds.InterstitialAd.Events.CLICKED);
                                    }),
                                    HeyzapAds.InterstitialAd.show().then(
                                        function () {
                                            _this.adManager.emit(exports.AdEvents.CONTENT_PAUSED);
                                        },
                                        function (e) {
                                            _this.adManager.emit(exports.AdEvents.CONTENT_RESUMED);
                                        }
                                    );
                                break;
                            case exports.AdType.interstitial:
                                HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.HIDE, function () {
                                    _this.adManager.emit(exports.AdEvents.CONTENT_RESUMED, HeyzapAds.VideoAd.Events.HIDE);
                                }),
                                    HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.SHOW_FAILED, function () {
                                        _this.adManager.emit(exports.AdEvents.CONTENT_RESUMED, HeyzapAds.VideoAd.Events.SHOW_FAILED);
                                    }),
                                    HeyzapAds.VideoAd.addEventListener(HeyzapAds.VideoAd.Events.CLICKED, function () {
                                        _this.adManager.emit(exports.AdEvents.AD_CLICKED, HeyzapAds.VideoAd.Events.CLICKED);
                                    }),
                                    HeyzapAds.VideoAd.show().then(
                                        function () {
                                            _this.adManager.emit(exports.AdEvents.CONTENT_PAUSED);
                                        },
                                        function (e) {
                                            _this.adManager.emit(exports.AdEvents.CONTENT_RESUMED);
                                        }
                                    );
                                break;
                            case exports.AdType.rewarded:
                                HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.HIDE, function () {
                                    _this.adManager.emit(exports.AdEvents.CONTENT_RESUMED, HeyzapAds.IncentivizedAd.Events.HIDE);
                                }),
                                    HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.SHOW_FAILED, function () {
                                        _this.adManager.emit(exports.AdEvents.CONTENT_RESUMED, HeyzapAds.IncentivizedAd.Events.SHOW_FAILED);
                                    }),
                                    HeyzapAds.IncentivizedAd.addEventListener(HeyzapAds.IncentivizedAd.Events.CLICKED, function () {
                                        _this.adManager.emit(exports.AdEvents.AD_CLICKED, HeyzapAds.IncentivizedAd.Events.CLICKED);
                                    }),
                                    HeyzapAds.IncentivizedAd.show().then(
                                        function () {
                                            _this.adManager.emit(exports.AdEvents.CONTENT_PAUSED);
                                        },
                                        function (e) {
                                            _this.adManager.emit(exports.AdEvents.CONTENT_RESUMED);
                                        }
                                    );
                                break;
                            case exports.AdType.banner:
                                if (void 0 === bannerAdPositions) return;
                                HeyzapAds.BannerAd.show(bannerAdPositions).then(
                                    function () {},
                                    function (e) {}
                                );
                        }
                    }),
                    (CordovaHeyzap$$1.prototype.adAvailable = function (adType) {
                        return !0;
                    }),
                    (CordovaHeyzap$$1.prototype.preloadAd = function (adType) {
                        this.adsEnabled &&
                            adType === exports.AdType.rewarded &&
                            HeyzapAds.IncentivizedAd.fetch().then(
                                function () {},
                                function (e) {}
                            );
                    }),
                    (CordovaHeyzap$$1.prototype.destroyAd = function (adType) {
                        this.adsEnabled &&
                            adType === exports.AdType.banner &&
                            HeyzapAds.BannerAd.destroy().then(
                                function () {},
                                function (e) {}
                            );
                    }),
                    (CordovaHeyzap$$1.prototype.hideAd = function (adType) {
                        this.adsEnabled &&
                            adType === exports.AdType.banner &&
                            HeyzapAds.BannerAd.hide().then(
                                function () {},
                                function (e) {}
                            );
                    }),
                    CordovaHeyzap$$1
                );
            })(),
            CordovaIronSource$$1 = (function () {
                function CordovaIronSource$$1(appKey) {
                    var _this = this;
                    if (((this.adsEnabled = !1), (this.interstitialLoaded = !1), (this.rewardedLoaded = !1), "undefined" != typeof IronSourceAds)) {
                        IronSourceAds.init({ appKey: appKey });
                        var resume = function () {
                            return _this.resumeGameplay();
                        };
                        window.addEventListener("interstitialClosed", resume),
                            window.addEventListener("interstitialShowFailed", resume),
                            window.addEventListener("interstitialLoaded", function () {
                                return _this.interstitialChanged(!0);
                            }),
                            window.addEventListener("rewardedVideoClosed", resume),
                            window.addEventListener("rewardedVideoFailed", resume),
                            IronSourceAds.hasRewardedVideo({ onSuccess: this.rewardedChanged.bind(this) }),
                            window.addEventListener("rewardedVideoAvailabilityChanged", function (event) {
                                return _this.rewardedChanged(event.available);
                            });
                    }
                }
                return (
                    (CordovaIronSource$$1.prototype.setManager = function (manager) {
                        (this.adManager = manager), this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED);
                    }),
                    (CordovaIronSource$$1.prototype.showAd = function (adType) {
                        switch ((void 0 === adType && (adType = exports.AdType.interstitial), adType)) {
                            case exports.AdType.interstitial:
                                if (!this.interstitialLoaded) {
                                    this.resumeGameplay();
                                    break;
                                }
                                this.interstitialChanged(!1), this.adManager.emit(exports.AdEvents.CONTENT_PAUSED), IronSourceAds.showInterstitial();
                                break;
                            case exports.AdType.rewarded:
                                if (!this.rewardedLoaded) {
                                    this.resumeGameplay();
                                    break;
                                }
                                this.adManager.emit(exports.AdEvents.CONTENT_PAUSED), IronSourceAds.showRewardedVideo();
                                break;
                            default:
                                this.resumeGameplay();
                        }
                    }),
                    (CordovaIronSource$$1.prototype.resumeGameplay = function () {
                        this.adManager.emit(exports.AdEvents.CONTENT_RESUMED);
                    }),
                    (CordovaIronSource$$1.prototype.preloadAd = function (adType) {
                        void 0 === adType && (adType = exports.AdType.interstitial), adType === exports.AdType.interstitial && IronSourceAds.loadInterstitial();
                    }),
                    (CordovaIronSource$$1.prototype.destroyAd = function () {}),
                    (CordovaIronSource$$1.prototype.hideAd = function () {}),
                    (CordovaIronSource$$1.prototype.adAvailable = function (adType) {
                        switch (adType) {
                            case exports.AdType.interstitial:
                                return this.interstitialLoaded;
                            case exports.AdType.rewarded:
                                return this.rewardedLoaded;
                        }
                        return !1;
                    }),
                    (CordovaIronSource$$1.prototype.interstitialChanged = function (available) {
                        this.interstitialLoaded = available;
                    }),
                    (CordovaIronSource$$1.prototype.rewardedChanged = function (available) {
                        this.rewardedLoaded = available;
                    }),
                    CordovaIronSource$$1
                );
            })();
        !(function (GameDistributionAdType) {
            (GameDistributionAdType.interstitial = "interstitial"), (GameDistributionAdType.rewarded = "rewarded"), (GameDistributionAdType.display = "display");
        })(GameDistributionAdType || (GameDistributionAdType = {})),
            ((GameDistributionBannerSize = exports.GameDistributionBannerSize || (exports.GameDistributionBannerSize = {}))[(GameDistributionBannerSize.LargeRectangle = 0)] = "LargeRectangle"),
            (GameDistributionBannerSize[(GameDistributionBannerSize.MediumRectangle = 1)] = "MediumRectangle"),
            (GameDistributionBannerSize[(GameDistributionBannerSize.Billboard = 2)] = "Billboard"),
            (GameDistributionBannerSize[(GameDistributionBannerSize.Leaderboard = 3)] = "Leaderboard"),
            (GameDistributionBannerSize[(GameDistributionBannerSize.Skyscraper = 4)] = "Skyscraper"),
            (GameDistributionBannerSize[(GameDistributionBannerSize.WideSkyscraper = 5)] = "WideSkyscraper"),
            ((GameDistributionAlignment = exports.GameDistributionAlignment || (exports.GameDistributionAlignment = {}))[(GameDistributionAlignment.TopLeft = 0)] = "TopLeft"),
            (GameDistributionAlignment[(GameDistributionAlignment.TopCenter = 1)] = "TopCenter"),
            (GameDistributionAlignment[(GameDistributionAlignment.TopRight = 2)] = "TopRight"),
            (GameDistributionAlignment[(GameDistributionAlignment.CenterLeft = 3)] = "CenterLeft"),
            (GameDistributionAlignment[(GameDistributionAlignment.Center = 4)] = "Center"),
            (GameDistributionAlignment[(GameDistributionAlignment.CenterRight = 5)] = "CenterRight"),
            (GameDistributionAlignment[(GameDistributionAlignment.BottomLeft = 6)] = "BottomLeft"),
            (GameDistributionAlignment[(GameDistributionAlignment.BottomCenter = 7)] = "BottomCenter"),
            (GameDistributionAlignment[(GameDistributionAlignment.BottomRight = 8)] = "BottomRight");
        var GoogleAdEvent,
            GameDistributionBanner$$1 = (function () {
                function GameDistributionBanner$$1() {
                    (this.scaleFactor = 1),
                        (this.offsetX = 0),
                        (this.offsetY = 0),
                        (this.element = document.createElement("div")),
                        (this.element.style.position = "absolute"),
                        (this.element.style.top = "0px"),
                        (this.element.style.left = "0px"),
                        (this.element.id = "banner-" + Date.now() + ((1e7 * Math.random()) | 0)),
                        document.body.appendChild(this.element);
                }
                return (
                    (GameDistributionBanner$$1.prototype.loadBanner = function () {
                        return "undefined" == typeof gdsdk ? Promise.reject("GD Sdk not available, probably due to adblocker") : gdsdk.showAd(GameDistributionAdType.display, { containerId: this.element.id });
                    }),
                    (GameDistributionBanner$$1.prototype.destroy = function () {
                        document.body.removeChild(this.element), this.resizeListener && window.removeEventListener("resize", this.resizeListener), delete this.element, delete this.parent, delete this.alignment;
                    }),
                    (GameDistributionBanner$$1.prototype.alignIn = function (element, position) {
                        var _this = this;
                        this.parent ||
                            ((this.parent = element),
                            (this.alignment = position),
                            (this.resizeListener = function () {
                                return _this.resize();
                            }),
                            window.addEventListener("resize", this.resizeListener),
                            this.resize());
                    }),
                    (GameDistributionBanner$$1.prototype.setOffset = function (x, y) {
                        void 0 === x && (x = 0), void 0 === y && (y = 0), (this.offsetX = x), (this.offsetY = y), this.resize();
                    }),
                    (GameDistributionBanner$$1.prototype.resize = function () {
                        if (this.parent) {
                            var parentBoundingRect = this.parent.getBoundingClientRect();
                            switch (this.alignment) {
                                case exports.GameDistributionAlignment.TopLeft:
                                    this.position(parentBoundingRect.left, parentBoundingRect.top);
                                    break;
                                case exports.GameDistributionAlignment.TopCenter:
                                    this.position(parentBoundingRect.left + parentBoundingRect.width / 2 - (this.width * this.scaleFactor) / 2, parentBoundingRect.top);
                                    break;
                                case exports.GameDistributionAlignment.TopRight:
                                    this.position(parentBoundingRect.left + parentBoundingRect.width - this.width * this.scaleFactor, parentBoundingRect.top);
                                    break;
                                case exports.GameDistributionAlignment.CenterLeft:
                                    this.position(parentBoundingRect.left, parentBoundingRect.top + parentBoundingRect.height / 2 - (this.height * this.scaleFactor) / 2);
                                    break;
                                case exports.GameDistributionAlignment.Center:
                                    this.position(parentBoundingRect.left + parentBoundingRect.width / 2 - (this.width * this.scaleFactor) / 2, parentBoundingRect.top + parentBoundingRect.height / 2 - (this.height * this.scaleFactor) / 2);
                                    break;
                                case exports.GameDistributionAlignment.CenterRight:
                                    this.position(parentBoundingRect.left + parentBoundingRect.width - this.width * this.scaleFactor, parentBoundingRect.top + parentBoundingRect.height / 2 - (this.height * this.scaleFactor) / 2);
                                    break;
                                case exports.GameDistributionAlignment.BottomLeft:
                                    this.position(parentBoundingRect.left, parentBoundingRect.top + parentBoundingRect.height - this.height * this.scaleFactor);
                                    break;
                                case exports.GameDistributionAlignment.BottomCenter:
                                    this.position(parentBoundingRect.left + parentBoundingRect.width / 2 - (this.width * this.scaleFactor) / 2, parentBoundingRect.top + parentBoundingRect.height - this.height * this.scaleFactor);
                                    break;
                                case exports.GameDistributionAlignment.BottomRight:
                                    this.position(parentBoundingRect.left + parentBoundingRect.width - this.width * this.scaleFactor, parentBoundingRect.top + parentBoundingRect.height - this.height * this.scaleFactor);
                            }
                        }
                    }),
                    (GameDistributionBanner$$1.prototype.setSize = function (size) {
                        var width, height;
                        switch (size) {
                            default:
                            case exports.GameDistributionBannerSize.LargeRectangle:
                                (width = 336), (height = 280);
                                break;
                            case exports.GameDistributionBannerSize.MediumRectangle:
                                (width = 300), (height = 250);
                                break;
                            case exports.GameDistributionBannerSize.Billboard:
                                (width = 970), (height = 250);
                                break;
                            case exports.GameDistributionBannerSize.Leaderboard:
                                (width = 728), (height = 90);
                                break;
                            case exports.GameDistributionBannerSize.Skyscraper:
                                (width = 120), (height = 600);
                                break;
                            case exports.GameDistributionBannerSize.WideSkyscraper:
                                (width = 160), (height = 600);
                        }
                        (this.width = width), (this.height = height), (this.element.style.width = width + "px"), (this.element.style.height = height + "px");
                    }),
                    (GameDistributionBanner$$1.prototype.position = function (x, y) {
                        (this.element.style.left = x + this.offsetX + "px"), (this.element.style.top = y + this.offsetY + "px");
                    }),
                    (GameDistributionBanner$$1.prototype.scale = function (factor) {
                        (this.element.style.transformOrigin = "left top"), (this.scaleFactor = factor), (this.element.style.transform = "scale(" + factor + ")");
                    }),
                    GameDistributionBanner$$1
                );
            })(),
            GameDistribution$$1 = (function () {
                function GameDistribution$$1(gameId) {}
                return (
                    (GameDistribution$$1.prototype.setManager = function (manager) {
                        (this.adManager = manager), this.adManager.emit(exports.AdEvents.AD_PROVIDER_LOADED);
                    }),
                    (GameDistribution$$1.prototype.sdkLoaded = function () {
                        var _this = this;
                        this.areAdsEnabled().then(function (enabled) {
                            enabled && (_this.adsEnabled = !0);
                        });
                    }),
                    (GameDistribution$$1.prototype.showAd = function (adType) {
                        var _this = this;
                        if (this.adsEnabled) {
                            if ("undefined" == typeof gdsdk || (gdsdk && void 0 === gdsdk.showAd)) return (this.adsEnabled = !1), void this.adManager.emit(exports.AdEvents.CONTENT_RESUMED);
                            gdsdk
                                .showAd(adType === exports.AdType.rewarded ? GameDistributionAdType.rewarded : GameDistributionAdType.interstitial)
                                .then(function () {
                                    adType === exports.AdType.rewarded && (_this.adManager.emit(exports.AdEvents.AD_REWARDED), (_this.hasRewarded = !1)), _this.adManager.emit(exports.AdEvents.CONTENT_RESUMED);
                                })
                                .catch(function () {
                                    adType === exports.AdType.rewarded && _this.hasRewarded && (_this.hasRewarded = !1), _this.adManager.emit(exports.AdEvents.CONTENT_RESUMED);
                                });
                        } else this.adManager.emit(exports.AdEvents.CONTENT_RESUMED);
                    }),
                    (GameDistribution$$1.prototype.createBanner = function (size) {
                        if (this.adsEnabled) {
                            var banner = new GameDistributionBanner$$1();
                            return banner.setSize(size), banner;
                        }
                    }),
                    (GameDistribution$$1.prototype.loadBanner = function (size) {
                        if (this.adsEnabled) {
                            var banner = new GameDistributionBanner$$1();
                            return banner.setSize(size), banner.loadBanner(), banner;
                        }
                    }),
                    (GameDistribution$$1.prototype.preloadAd = function (adType) {
                        var _this = this;
                        !this.hasRewarded &&
                            this.adsEnabled &&
                            adType === exports.AdType.rewarded &&
                            gdsdk.preloadAd(GameDistributionAdType.rewarded).then(function () {
                                (_this.hasRewarded = !0), _this.adManager.emit(exports.AdEvents.AD_LOADED, adType);
                            });
                    }),
                    (GameDistribution$$1.prototype.adAvailable = function (adType) {
                        return adType !== exports.AdType.rewarded || this.hasRewarded;
                    }),
                    (GameDistribution$$1.prototype.destroyAd = function () {}),
                    (GameDistribution$$1.prototype.hideAd = function () {}),
                    (GameDistribution$$1.prototype.areAdsEnabled = function () {
                        var test = document.createElement("div");
                        (test.innerHTML = "&nbsp;"), (test.className = "adsbox"), (test.style.position = "absolute"), (test.style.fontSize = "10px"), document.body.appendChild(test);
                        return new Promise(function (resolve) {
                            window.setTimeout(function () {
                                var enabled;
                                resolve(((enabled = !0), 0 === test.offsetHeight && (enabled = !1), test.parentNode && test.parentNode.removeChild(test), enabled));
                            }, 100);
                        });
                    }),
                    GameDistribution$$1
                );
            })();
        !(function (GoogleAdEvent) {
            (GoogleAdEvent[(GoogleAdEvent.start = 0)] = "start"),
                (GoogleAdEvent[(GoogleAdEvent.firstQuartile = 1)] = "firstQuartile"),
                (GoogleAdEvent[(GoogleAdEvent.midPoint = 2)] = "midPoint"),
                (GoogleAdEvent[(GoogleAdEvent.thirdQuartile = 3)] = "thirdQuartile"),
                (GoogleAdEvent[(GoogleAdEvent.complete = 4)] = "complete");
        })(GoogleAdEvent || (GoogleAdEvent = {}));
        var AdEvents,
            AdType,
            Ima3$$1 = (function () {})();
        ((AdEvents = exports.AdEvents || (exports.AdEvents = {})).CONTENT_PAUSED = "onContentPaused"),
            (AdEvents.CONTENT_RESUMED = "onContentResumed"),
            (AdEvents.AD_PROGRESSION = "onAdProgression"),
            (AdEvents.AD_DISABLED = "onAdsDisabled"),
            (AdEvents.AD_CLICKED = "onAdClicked"),
            (AdEvents.AD_REWARDED = "onAdRewardGranted"),
            (AdEvents.BANNER_SHOWN = "onBannerShown"),
            (AdEvents.BANNER_HIDDEN = "onBannerHidden"),
            (AdEvents.AD_LOADED = "onAdLoaded"),
            (AdEvents.AD_PROVIDER_LOADED = "onAdProviderLoaded"),
            ((AdType = exports.AdType || (exports.AdType = {}))[(AdType.interstitial = 0)] = "interstitial"),
            (AdType[(AdType.rewarded = 1)] = "rewarded"),
            (AdType[(AdType.banner = 2)] = "banner");
        var H5AdWrapper = (function (_super) {
                function H5AdWrapper() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (_this.bannerActive = !1), (_this.provider = null), _this;
                }
                return (
                    (function (d, b) {
                        function __() {
                            this.constructor = d;
                        }
                        extendStatics(d, b), (d.prototype = null === b ? Object.create(b) : ((__.prototype = b.prototype), new __()));
                    })(H5AdWrapper, _super),
                    (H5AdWrapper.prototype.setAdProvider = function (provider) {
                        (this.provider = provider), this.provider.setManager(this);
                    }),
                    (H5AdWrapper.prototype.showAd = function (adType) {
                        for (var args = [], _i = 1; _i < arguments.length; _i++) args[_i - 1] = arguments[_i];
                        if (null === this.provider) throw new Error("Can not request an ad without an provider, please attach an ad provider!");
                        args.unshift(adType), this.provider.showAd.apply(this.provider, args);
                    }),
                    (H5AdWrapper.prototype.createBanner = function () {
                        for (var args = [], _i = 0; _i < arguments.length; _i++) args[_i] = arguments[_i];
                        return this.provider.loadBanner.apply(this.provider, args);
                    }),
                    (H5AdWrapper.prototype.loadBanner = function () {
                        for (var args = [], _i = 0; _i < arguments.length; _i++) args[_i] = arguments[_i];
                        return this.provider.loadBanner.apply(this.provider, args);
                    }),
                    (H5AdWrapper.prototype.preloadAd = function (adType) {
                        for (var args = [], _i = 1; _i < arguments.length; _i++) args[_i - 1] = arguments[_i];
                        if (null === this.provider) throw new Error("Can not preload an ad without an provider, please attach an ad provider!");
                        args.unshift(adType), this.provider.preloadAd.apply(this.provider, args);
                    }),
                    (H5AdWrapper.prototype.destroyAd = function (adType) {
                        for (var args = [], _i = 1; _i < arguments.length; _i++) args[_i - 1] = arguments[_i];
                        if (null === this.provider) throw new Error("Can not destroy an ad without an provider, please attach an ad provider!");
                        args.unshift(adType), this.provider.destroyAd.apply(this.provider, args);
                    }),
                    (H5AdWrapper.prototype.hideAd = function (adType) {
                        for (var args = [], _i = 1; _i < arguments.length; _i++) args[_i - 1] = arguments[_i];
                        if (null === this.provider) throw new Error("Can not hide an ad without an provider, please attach an ad provider!");
                        args.unshift(adType), this.provider.hideAd.apply(this.provider, args);
                    }),
                    (H5AdWrapper.prototype.adsEnabled = function () {
                        if (null === this.provider) throw new Error("Can not hide an ad without an provider, please attach an ad provider!");
                        return this.provider.adsEnabled;
                    }),
                    (H5AdWrapper.prototype.adAvailable = function (adType) {
                        for (var args = [], _i = 1; _i < arguments.length; _i++) args[_i - 1] = arguments[_i];
                        if (null === this.provider) throw new Error("Can not hide an ad without an provider, please attach an ad provider!");
                        return args.unshift(adType), this.provider.adAvailable.apply(this.provider, args);
                    }),
                    H5AdWrapper
                );
            })(eventemitter3),
            adWrapper = new H5AdWrapper();
        (exports.H5AdWrapper = H5AdWrapper),
            (exports.adWrapper = adWrapper),
            (exports.CocoonAds = CocoonAds$$1),
            (exports.CordovaGamedistribution = CordovaGamedistribution$$1),
            (exports.CordovaGamedock = CordovaGamedock$$1),
            (exports.CordovaHeyzap = CordovaHeyzap$$1),
            (exports.CordovaIronSource = CordovaIronSource$$1),
            (exports.GameDistribution = GameDistribution$$1),
            (exports.GameDistributionBanner = GameDistributionBanner$$1),
            (exports.Ima3 = Ima3$$1),
            Object.defineProperty(exports, "__esModule", { value: !0 });
    }),
    (function (global) {
        var NativePromise = global.Promise,
            nativePromiseSupported =
                NativePromise &&
                "resolve" in NativePromise &&
                "reject" in NativePromise &&
                "all" in NativePromise &&
                "race" in NativePromise &&
                (function () {
                    var resolve;
                    return (
                        new NativePromise(function (r) {
                            resolve = r;
                        }),
                        "function" == typeof resolve
                    );
                })();
        "undefined" != typeof exports && exports
            ? ((exports.Promise = nativePromiseSupported ? NativePromise : Promise), (exports.Polyfill = Promise))
            : "function" == typeof define && define.amd
            ? define(function () {
                  return nativePromiseSupported ? NativePromise : Promise;
              })
            : nativePromiseSupported || (global.Promise = Promise);
        var PENDING = "pending",
            SEALED = "sealed",
            FULFILLED = "fulfilled",
            REJECTED = "rejected",
            NOOP = function () {};
        function isArray(value) {
            return "[object Array]" === Object.prototype.toString.call(value);
        }
        var asyncTimer,
            asyncSetTimer = "undefined" != typeof setImmediate ? setImmediate : setTimeout,
            asyncQueue = [];
        function asyncFlush() {
            for (var i = 0; i < asyncQueue.length; i++) asyncQueue[i][0](asyncQueue[i][1]);
            asyncTimer = !(asyncQueue = []);
        }
        function asyncCall(callback, arg) {
            asyncQueue.push([callback, arg]), asyncTimer || ((asyncTimer = !0), asyncSetTimer(asyncFlush, 0));
        }
        function invokeCallback(subscriber) {
            var owner = subscriber.owner,
                settled = owner.state_,
                value = owner.data_,
                callback = subscriber[settled],
                promise = subscriber.then;
            if ("function" == typeof callback) {
                settled = FULFILLED;
                try {
                    value = callback(value);
                } catch (e) {
                    reject(promise, e);
                }
            }
            handleThenable(promise, value) || (settled === FULFILLED && resolve(promise, value), settled === REJECTED && reject(promise, value));
        }
        function handleThenable(promise, value) {
            var resolved;
            try {
                if (promise === value) throw new TypeError("A promises callback cannot return that same promise.");
                if (value && ("function" == typeof value || "object" == typeof value)) {
                    var then = value.then;
                    if ("function" == typeof then)
                        return (
                            then.call(
                                value,
                                function (val) {
                                    resolved || ((resolved = !0), value !== val ? resolve(promise, val) : fulfill(promise, val));
                                },
                                function (reason) {
                                    resolved || ((resolved = !0), reject(promise, reason));
                                }
                            ),
                            !0
                        );
                }
            } catch (e) {
                return resolved || reject(promise, e), !0;
            }
            return !1;
        }
        function resolve(promise, value) {
            (promise !== value && handleThenable(promise, value)) || fulfill(promise, value);
        }
        function fulfill(promise, value) {
            promise.state_ === PENDING && ((promise.state_ = SEALED), (promise.data_ = value), asyncCall(publishFulfillment, promise));
        }
        function reject(promise, reason) {
            promise.state_ === PENDING && ((promise.state_ = SEALED), (promise.data_ = reason), asyncCall(publishRejection, promise));
        }
        function publish(promise) {
            var callbacks = promise.then_;
            promise.then_ = void 0;
            for (var i = 0; i < callbacks.length; i++) invokeCallback(callbacks[i]);
        }
        function publishFulfillment(promise) {
            (promise.state_ = FULFILLED), publish(promise);
        }
        function publishRejection(promise) {
            (promise.state_ = REJECTED), publish(promise);
        }
        function Promise(resolver) {
            if ("function" != typeof resolver) throw new TypeError("Promise constructor takes a function argument");
            if (this instanceof Promise == !1) throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
            (this.then_ = []),
                (function (resolver, promise) {
                    function rejectPromise(reason) {
                        reject(promise, reason);
                    }
                    try {
                        resolver(function (value) {
                            resolve(promise, value);
                        }, rejectPromise);
                    } catch (e) {
                        rejectPromise(e);
                    }
                })(resolver, this);
        }
        (Promise.prototype = {
            constructor: Promise,
            state_: PENDING,
            then_: null,
            data_: void 0,
            then: function (onFulfillment, onRejection) {
                var subscriber = { owner: this, then: new this.constructor(NOOP), fulfilled: onFulfillment, rejected: onRejection };
                return this.state_ === FULFILLED || this.state_ === REJECTED ? asyncCall(invokeCallback, subscriber) : this.then_.push(subscriber), subscriber.then;
            },
            catch: function (onRejection) {
                return this.then(null, onRejection);
            },
        }),
            (Promise.all = function (promises) {
                if (!isArray(promises)) throw new TypeError("You must pass an array to Promise.all().");
                return new this(function (resolve, reject) {
                    var results = [],
                        remaining = 0;
                    function resolver(index) {
                        return (
                            remaining++,
                            function (value) {
                                (results[index] = value), --remaining || resolve(results);
                            }
                        );
                    }
                    for (var promise, i = 0; i < promises.length; i++) (promise = promises[i]) && "function" == typeof promise.then ? promise.then(resolver(i), reject) : (results[i] = promise);
                    remaining || resolve(results);
                });
            }),
            (Promise.race = function (promises) {
                if (!isArray(promises)) throw new TypeError("You must pass an array to Promise.race().");
                return new this(function (resolve, reject) {
                    for (var promise, i = 0; i < promises.length; i++) (promise = promises[i]) && "function" == typeof promise.then ? promise.then(resolve, reject) : resolve(promise);
                });
            }),
            (Promise.resolve = function (value) {
                return value && "object" == typeof value && value.constructor === this
                    ? value
                    : new this(function (resolve) {
                          resolve(value);
                      });
            }),
            (Promise.reject = function (reason) {
                return new this(function (resolve, reject) {
                    reject(reason);
                });
            });
    })("undefined" != typeof window ? window : "undefined" != typeof global ? global : "undefined" != typeof self ? self : this);
var SceneList,
    __extends =
        (this && this.__extends) ||
        (function () {
            var extendStatics = function (d, b) {
                return (extendStatics =
                    Object.setPrototypeOf ||
                    ({ __proto__: [] } instanceof Array &&
                        function (d, b) {
                            d.__proto__ = b;
                        }) ||
                    function (d, b) {
                        for (var p in b) b.hasOwnProperty(p) && (d[p] = b[p]);
                    })(d, b);
            };
            return function (d, b) {
                function __() {
                    this.constructor = d;
                }
                extendStatics(d, b), (d.prototype = null === b ? Object.create(b) : ((__.prototype = b.prototype), new __()));
            };
        })(),
    __awaiter =
        (this && this.__awaiter) ||
        function (thisArg, _arguments, P, generator) {
            return new (P || (P = Promise))(function (resolve, reject) {
                function fulfilled(value) {
                    try {
                        step(generator.next(value));
                    } catch (e) {
                        reject(e);
                    }
                }
                function rejected(value) {
                    try {
                        step(generator.throw(value));
                    } catch (e) {
                        reject(e);
                    }
                }
                function step(result) {
                    var value;
                    result.done
                        ? resolve(result.value)
                        : ((value = result.value),
                          value instanceof P
                              ? value
                              : new P(function (resolve) {
                                    resolve(value);
                                })).then(fulfilled, rejected);
                }
                step((generator = generator.apply(thisArg, _arguments || [])).next());
            });
        },
    __generator =
        (this && this.__generator) ||
        function (thisArg, body) {
            var f,
                y,
                t,
                g,
                _ = {
                    label: 0,
                    sent: function () {
                        if (1 & t[0]) throw t[1];
                        return t[1];
                    },
                    trys: [],
                    ops: [],
                };
            return (
                (g = { next: verb(0), throw: verb(1), return: verb(2) }),
                "function" == typeof Symbol &&
                    (g[Symbol.iterator] = function () {
                        return this;
                    }),
                g
            );
            function verb(n) {
                return function (v) {
                    return (function (op) {
                        if (f) throw new TypeError("Generator is already executing.");
                        for (; _; )
                            try {
                                if (((f = 1), y && (t = 2 & op[0] ? y.return : op[0] ? y.throw || ((t = y.return) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)) return t;
                                switch (((y = 0), t && (op = [2 & op[0], t.value]), op[0])) {
                                    case 0:
                                    case 1:
                                        t = op;
                                        break;
                                    case 4:
                                        return _.label++, { value: op[1], done: !1 };
                                    case 5:
                                        _.label++, (y = op[1]), (op = [0]);
                                        continue;
                                    case 7:
                                        (op = _.ops.pop()), _.trys.pop();
                                        continue;
                                    default:
                                        if (!(t = 0 < (t = _.trys).length && t[t.length - 1]) && (6 === op[0] || 2 === op[0])) {
                                            _ = 0;
                                            continue;
                                        }
                                        if (3 === op[0] && (!t || (op[1] > t[0] && op[1] < t[3]))) {
                                            _.label = op[1];
                                            break;
                                        }
                                        if (6 === op[0] && _.label < t[1]) {
                                            (_.label = t[1]), (t = op);
                                            break;
                                        }
                                        if (t && _.label < t[2]) {
                                            (_.label = t[2]), _.ops.push(op);
                                            break;
                                        }
                                        t[2] && _.ops.pop(), _.trys.pop();
                                        continue;
                                }
                                op = body.call(thisArg, _);
                            } catch (e) {
                                (op = [6, e]), (y = 0);
                            } finally {
                                f = t = 0;
                            }
                        if (5 & op[0]) throw op[1];
                        return { value: op[0] ? op[1] : void 0, done: !0 };
                    })([n, v]);
                };
            }
        };
!(function (SceneList) {
    (SceneList.Boot = "Boot"), (SceneList.Menu = "Menu"), (SceneList.LevelBuilder = "LevelBuilder"), (SceneList.Preloader = "Preloader"), (SceneList.Comix1 = "Comix1"), (SceneList.Robbery = "Robbery");
})(SceneList || (SceneList = {})),
    (function (Wheely) {
        !(function (Client) {
            var Main = (function (_super) {
                function Main() {
                    var _this =
                        _super.call(this, {
                            enableDebug: !1,
                            width: Constants.GAME_WIDTH,
                            height: Constants.GAME_HEIGHT,
                            renderer: Phaser.AUTO,
                            parent: Constants.DIV_ID,
                            transparent: !1,
                            antialias: !0,
                            preserveDrawingBuffer: !1,
                            physicsConfig: null,
                            seed: "",
                            state: null,
                            forceSetTimeOut: !1,
                        }) || this;
                    return (
                        (_this.soundStarted = !1),
                        (_this.pausedByPanel = !1),
                        ((Main.instance = _this).clearBeforeRender = !1),
                        Phaser.Device.whenReady(function () {
                            _this.stage.disableVisibilityChange = !0;
                            var event = _this.device.desktop ? "click" : "touchstart";
                            document.getElementById("content").addEventListener(event, function (e) {
                                _this.gameResumed(e);
                            }),
                                WheelyScale.ScaleHelper.init(_this);
                        }),
                        (h5branding.Branding.analyticsEnabled = !1),
                        h5branding.SplashLoader.getInstance({ gameId: "271a94e090b8453a9a262d1ee3cb1cd6", gameName: Constants.GAME_TITLE, gameTitle: Constants.GAME_TITLE, libs: [], version: version })
                            .create()
                            .then(function () {
                                _this.state.add("game", { create: _this.stateCreator.bind(_this), preload: _this.statePreloader.bind(_this) }, !0);
                            }),
                        _this
                    );
                }
                return (
                    __extends(Main, _super),
                    (Main.prototype.update = function (time) {
                        _super.prototype.update.call(this, time), Client.SimpleTweenManager.update();
                    }),
                    (Main.prototype.statePreloader = function () {
                        var _this = this;
                        libs.forEach(function (library) {
                            _this.load.script(library, library);
                        });
                    }),
                    (Main.prototype.stateCreator = function () {
                        this.plugins.add(PhaserSuperStorage.StoragePlugin),
                            this.plugins.add(PhaserCachebuster.CacheBuster),
                            this.plugins.add(PhaserSpine.SpinePlugin),
                            (this.storage.forcePromises = !0),
                            this.state.add(Client.Boot.Name, Client.Boot, !1),
                            this.state.add(Client.Menu.Name, Client.Menu, !1),
                            this.state.add(Client.LevelBuilder.Name, Client.LevelBuilder, !1),
                            this.state.add(Client.Comix1.Name, Client.Comix1, !1),
                            this.state.add(Client.Robbery.Name, Client.Robbery, !1),
                            this.state.start(Client.Boot.Name),
                            this.state.remove("game"),
                            (this.sceneEffect = this.add.graphics(0, 0)),
                            this.sceneEffect.beginFill(16777215, 1),
                            this.sceneEffect.drawRect(0, 0, Constants.GAME_WIDTH, Constants.GAME_HEIGHT),
                            (this.sceneEffect.alpha = 0),
                            this.stage.addChild(this.sceneEffect),
                            this.state.onStateChange.add(this.changeSceneEffect, this);
                    }),
                    (Main.prototype.changeSceneEffect = function () {
                        (this.state.current === SceneList.Menu || this.state.current === SceneList.LevelBuilder || this.state) &&
                            (Client.SoundManager.removeAllSFXLoop(), (this.sceneEffect.alpha = 1), this.add.tween(this.sceneEffect).to({ alpha: 0 }, 500, Phaser.Easing.Linear.None, !0));
                    }),
                    (Main.instance = null),
                    (Main.showDebugBox2d = !1),
                    (Main.disablePause = !1),
                    Main
                );
            })(Phaser.Game);
            Client.Main = Main;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var MatrixSprite = (function (_super) {
                function MatrixSprite(game, _x, _y, _key, _frame) {
                    void 0 === _key && (_key = null), void 0 === _frame && (_frame = null);
                    var _this = _super.call(this, game, _x, _y, _key, _frame) || this;
                    return (
                        (_this.a = 1),
                        (_this.b = 0),
                        (_this.c = 0),
                        (_this.d = 1),
                        (_this.tx = 0),
                        (_this.ty = 0),
                        (_this.tx = _x),
                        (_this.ty = _y),
                        (_this.updateTransform = function (parent) {
                            if (!parent && !this.parent && !this.game) return this;
                            var p = this.parent;
                            parent ? (p = parent) : this.parent || (p = this.game.world);
                            var pt = p.worldTransform,
                                wt = this.worldTransform,
                                tx = this.tx,
                                ty = this.ty;
                            if (
                                ((this.pivot.x || this.pivot.y) && ((tx -= this.pivot.x * this.a + this.pivot.y * this.c), (ty -= this.pivot.x * this.b + this.pivot.y * this.d)),
                                (wt.a = this.a * pt.a + this.b * pt.c),
                                (wt.b = this.a * pt.b + this.b * pt.d),
                                (wt.c = this.c * pt.a + this.d * pt.c),
                                (wt.d = this.c * pt.b + this.d * pt.d),
                                (wt.tx = tx * pt.a + ty * pt.c + pt.tx),
                                (wt.ty = tx * pt.b + ty * pt.d + pt.ty),
                                (this.worldAlpha = this.alpha * p.worldAlpha),
                                this.worldPosition.set(wt.tx, wt.ty),
                                this.worldScale.set(this.scale.x * Math.sqrt(wt.a * wt.a + wt.c * wt.c), this.scale.y * Math.sqrt(wt.b * wt.b + wt.d * wt.d)),
                                (this.worldRotation = Math.atan2(-wt.c, wt.d)),
                                (this._currentBounds = null),
                                this.transformCallback && this.transformCallback.call(this.transformCallbackContext, wt, pt),
                                !this._cacheAsBitmap)
                            ) {
                                for (var i = 0; i < this.children.length; i++) this.children[i].updateTransform();
                                return this;
                            }
                        }),
                        _this
                    );
                }
                return (
                    __extends(MatrixSprite, _super),
                    (MatrixSprite.prototype.setParam = function (a, b, c, d, tx, ty) {
                        this.position.setTo(tx, ty), (this.a = a), (this.b = b), (this.c = c), (this.d = d), (this.tx = tx), (this.ty = ty);
                    }),
                    MatrixSprite
                );
            })(Phaser.Sprite);
            Client.MatrixSprite = MatrixSprite;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var SAGroup = (function (_super) {
                function SAGroup(game, _x, _y) {
                    var _this = _super.call(this, game) || this;
                    return (
                        (_this.skX = 0),
                        (_this.skY = 0),
                        (_this._srB = 0),
                        (_this._srC = 0),
                        (_this._crA = 1),
                        (_this._crD = 1),
                        (_this._cachedRotX = 0),
                        (_this._cachedRotY = 0),
                        (_this.x = _x),
                        (_this.y = _y),
                        (_this.updateTransform = function (parent) {
                            if (!parent && !this.parent && !this.game) return this;
                            var p = this.parent;
                            parent ? (p = parent) : this.parent || (p = this.game.world);
                            var a,
                                b,
                                c,
                                d,
                                tx,
                                ty,
                                pt = p.worldTransform,
                                wt = this.worldTransform,
                                rotY = this.rotation + this.skY * (Math.PI / 180),
                                rotX = this.rotation + this.skX * (Math.PI / 180);
                            if (
                                (rotY % Phaser.Math.PI2 || rotX % Phaser.Math.PI2
                                    ? ((rotX === this._cachedRotX && rotY === this._cachedRotY) ||
                                          ((this._cachedRotX = rotX), (this._cachedRotY = rotY), (this._crA = Math.cos(rotY)), (this._srB = Math.sin(rotY)), (this._srC = Math.sin(-rotX)), (this._crD = Math.cos(rotX))),
                                      (a = this._crA * this.scale.x),
                                      (b = this._srB * this.scale.x),
                                      (c = this._srC * this.scale.y),
                                      (d = this._crD * this.scale.y),
                                      (tx = this.position.x),
                                      (ty = this.position.y),
                                      (this.pivot.x || this.pivot.y) && ((tx -= this.pivot.x * a + this.pivot.y * c), (ty -= this.pivot.x * b + this.pivot.y * d)),
                                      (wt.a = a * pt.a + b * pt.c),
                                      (wt.b = a * pt.b + b * pt.d),
                                      (wt.c = c * pt.a + d * pt.c),
                                      (wt.d = c * pt.b + d * pt.d))
                                    : ((a = this.scale.x),
                                      (d = this.scale.y),
                                      (tx = this.position.x - this.pivot.x * a),
                                      (ty = this.position.y - this.pivot.y * d),
                                      (wt.a = a * pt.a),
                                      (wt.b = a * pt.b),
                                      (wt.c = d * pt.c),
                                      (wt.d = d * pt.d)),
                                (wt.tx = tx * pt.a + ty * pt.c + pt.tx),
                                (wt.ty = tx * pt.b + ty * pt.d + pt.ty),
                                (this.worldAlpha = this.alpha * p.worldAlpha),
                                this.worldPosition.set(wt.tx, wt.ty),
                                this.worldScale.set(this.scale.x * Math.sqrt(wt.a * wt.a + wt.c * wt.c), this.scale.y * Math.sqrt(wt.b * wt.b + wt.d * wt.d)),
                                (this.worldRotation = Math.atan2(-wt.c, wt.d)),
                                (this._currentBounds = null),
                                this.transformCallback && this.transformCallback.call(this.transformCallbackContext, wt, pt),
                                !this._cacheAsBitmap)
                            ) {
                                for (var i = 0; i < this.children.length; i++) this.children[i].updateTransform();
                                return this;
                            }
                        }),
                        _this
                    );
                }
                return (
                    __extends(SAGroup, _super),
                    Object.defineProperty(SAGroup.prototype, "scY", {
                        get: function () {
                            return this.scale.y;
                        },
                        set: function (value) {
                            this.scale.y = value;
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    Object.defineProperty(SAGroup.prototype, "scX", {
                        get: function () {
                            return this.scale.x;
                        },
                        set: function (value) {
                            this.scale.x = value;
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    SAGroup
                );
            })(Phaser.Group);
            Client.SAGroup = SAGroup;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var SASprite = (function (_super) {
                function SASprite(game, _x, _y, _key, _frame) {
                    void 0 === _key && (_key = null), void 0 === _frame && (_frame = null);
                    var _this = _super.call(this, game, _x, _y, _key, _frame) || this;
                    return (
                        (_this._skX = 0),
                        (_this._skY = 0),
                        (_this._srB = 0),
                        (_this._srC = 0),
                        (_this._crA = 1),
                        (_this._crD = 1),
                        (_this._cachedRotX = 0),
                        (_this._cachedRotY = 0),
                        (_this.updateTransform = function (parent) {
                            if (!parent && !this.parent && !this.game) return this;
                            var p = this.parent;
                            parent ? (p = parent) : this.parent || (p = this.game.world);
                            var a,
                                b,
                                c,
                                d,
                                tx,
                                ty,
                                pt = p.worldTransform,
                                wt = this.worldTransform,
                                rotY = this.rotation + this._skY * (Math.PI / 180),
                                rotX = this.rotation + this._skX * (Math.PI / 180);
                            if (
                                (rotY % Phaser.Math.PI2 || rotX % Phaser.Math.PI2
                                    ? ((rotX === this._cachedRotX && rotY === this._cachedRotY) ||
                                          ((this._cachedRotX = rotX), (this._cachedRotY = rotY), (this._crA = Math.cos(rotY)), (this._srB = Math.sin(rotY)), (this._srC = Math.sin(-rotX)), (this._crD = Math.cos(rotX))),
                                      (a = this._crA * this.scale.x),
                                      (b = this._srB * this.scale.x),
                                      (c = this._srC * this.scale.y),
                                      (d = this._crD * this.scale.y),
                                      (tx = this.position.x),
                                      (ty = this.position.y),
                                      (this.pivot.x || this.pivot.y) && ((tx -= this.pivot.x * a + this.pivot.y * c), (ty -= this.pivot.x * b + this.pivot.y * d)),
                                      (wt.a = a * pt.a + b * pt.c),
                                      (wt.b = a * pt.b + b * pt.d),
                                      (wt.c = c * pt.a + d * pt.c),
                                      (wt.d = c * pt.b + d * pt.d))
                                    : ((a = this.scale.x),
                                      (d = this.scale.y),
                                      (tx = this.position.x - this.pivot.x * a),
                                      (ty = this.position.y - this.pivot.y * d),
                                      (wt.a = a * pt.a),
                                      (wt.b = a * pt.b),
                                      (wt.c = d * pt.c),
                                      (wt.d = d * pt.d)),
                                (wt.tx = tx * pt.a + ty * pt.c + pt.tx),
                                (wt.ty = tx * pt.b + ty * pt.d + pt.ty),
                                (this.worldAlpha = this.alpha * p.worldAlpha),
                                this.worldPosition.set(wt.tx, wt.ty),
                                this.worldScale.set(this.scale.x * Math.sqrt(wt.a * wt.a + wt.c * wt.c), this.scale.y * Math.sqrt(wt.b * wt.b + wt.d * wt.d)),
                                (this.worldRotation = Math.atan2(-wt.c, wt.d)),
                                (this._currentBounds = null),
                                this.transformCallback && this.transformCallback.call(this.transformCallbackContext, wt, pt),
                                !this._cacheAsBitmap)
                            ) {
                                for (var i = 0; i < this.children.length; i++) this.children[i].updateTransform();
                                return this;
                            }
                        }),
                        _this
                    );
                }
                return (
                    __extends(SASprite, _super),
                    Object.defineProperty(SASprite.prototype, "skX", {
                        get: function () {
                            return this._skX;
                        },
                        set: function (value) {
                            180 < value ? (value = -(180 - (value - 180))) : value < -180 && (value = 180 + (value + 180)), (this._skX = value);
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    Object.defineProperty(SASprite.prototype, "skY", {
                        get: function () {
                            return this._skY;
                        },
                        set: function (value) {
                            180 < value ? (value = -(180 - (value - 180))) : value < -180 && (value = 180 + (value + 180)), (this._skY = value);
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    Object.defineProperty(SASprite.prototype, "scY", {
                        get: function () {
                            return this.scale.y;
                        },
                        set: function (value) {
                            this.scale.y = value;
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    Object.defineProperty(SASprite.prototype, "scX", {
                        get: function () {
                            return this.scale.x;
                        },
                        set: function (value) {
                            this.scale.x = value;
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    SASprite
                );
            })(Phaser.Sprite);
            Client.SASprite = SASprite;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var ScaleSprite = (function (_super) {
                function ScaleSprite(game, _x, _y, _key, _frame) {
                    return void 0 === _key && (_key = null), void 0 === _frame && (_frame = null), _super.call(this, game, _x, _y, _key, _frame) || this;
                }
                return (
                    __extends(ScaleSprite, _super),
                    Object.defineProperty(ScaleSprite.prototype, "pivotX", {
                        get: function () {
                            return this.pivot.x;
                        },
                        set: function (value) {
                            this.pivot.x = value;
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    Object.defineProperty(ScaleSprite.prototype, "pivotY", {
                        get: function () {
                            return this.pivot.y;
                        },
                        set: function (value) {
                            this.pivot.y = value;
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    Object.defineProperty(ScaleSprite.prototype, "scaleY", {
                        get: function () {
                            return this.scale.y;
                        },
                        set: function (value) {
                            this.scale.y = value;
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    Object.defineProperty(ScaleSprite.prototype, "scaleX", {
                        get: function () {
                            return this.scale.x;
                        },
                        set: function (value) {
                            this.scale.x = value;
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    ScaleSprite
                );
            })(Phaser.Sprite);
            Client.ScaleSprite = ScaleSprite;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var SkewGroup = (function (_super) {
                function SkewGroup(game, _x, _y) {
                    var _this = _super.call(this, game) || this;
                    return (
                        (_this.skewX = 0),
                        (_this.skewY = 0),
                        (_this._srB = 0),
                        (_this._srC = 0),
                        (_this._crA = 1),
                        (_this._crD = 1),
                        (_this._cachedRotX = 0),
                        (_this._cachedRotY = 0),
                        (_this.x = _x),
                        (_this.y = _y),
                        (_this.updateTransform = function (parent) {
                            if (!parent && !this.parent && !this.game) return this;
                            var p = this.parent;
                            parent ? (p = parent) : this.parent || (p = this.game.world);
                            var a,
                                b,
                                c,
                                d,
                                tx,
                                ty,
                                pt = p.worldTransform,
                                wt = this.worldTransform,
                                rotY = this.rotation + this.skewY,
                                rotX = this.rotation + this.skewX;
                            if (
                                (rotY % Phaser.Math.PI2 || rotX % Phaser.Math.PI2
                                    ? ((rotX === this._cachedRotX && rotY === this._cachedRotY) ||
                                          ((this._cachedRotX = rotX), (this._cachedRotY = rotY), (this._crA = Math.cos(rotY)), (this._srB = Math.sin(rotY)), (this._srC = Math.sin(-rotX)), (this._crD = Math.cos(rotX))),
                                      (a = this._crA * this.scale.x),
                                      (b = this._srB * this.scale.x),
                                      (c = this._srC * this.scale.y),
                                      (d = this._crD * this.scale.y),
                                      (tx = this.position.x),
                                      (ty = this.position.y),
                                      (this.pivot.x || this.pivot.y) && ((tx -= this.pivot.x * a + this.pivot.y * c), (ty -= this.pivot.x * b + this.pivot.y * d)),
                                      (wt.a = a * pt.a + b * pt.c),
                                      (wt.b = a * pt.b + b * pt.d),
                                      (wt.c = c * pt.a + d * pt.c),
                                      (wt.d = c * pt.b + d * pt.d))
                                    : ((a = this.scale.x),
                                      (d = this.scale.y),
                                      (tx = this.position.x - this.pivot.x * a),
                                      (ty = this.position.y - this.pivot.y * d),
                                      (wt.a = a * pt.a),
                                      (wt.b = a * pt.b),
                                      (wt.c = d * pt.c),
                                      (wt.d = d * pt.d)),
                                (wt.tx = tx * pt.a + ty * pt.c + pt.tx),
                                (wt.ty = tx * pt.b + ty * pt.d + pt.ty),
                                (this.worldAlpha = this.alpha * p.worldAlpha),
                                this.worldPosition.set(wt.tx, wt.ty),
                                this.worldScale.set(this.scale.x * Math.sqrt(wt.a * wt.a + wt.c * wt.c), this.scale.y * Math.sqrt(wt.b * wt.b + wt.d * wt.d)),
                                (this.worldRotation = Math.atan2(-wt.c, wt.d)),
                                (this._currentBounds = null),
                                this.transformCallback && this.transformCallback.call(this.transformCallbackContext, wt, pt),
                                !this._cacheAsBitmap)
                            ) {
                                for (var i = 0; i < this.children.length; i++) this.children[i].updateTransform();
                                return this;
                            }
                        }),
                        _this
                    );
                }
                return (
                    __extends(SkewGroup, _super),
                    Object.defineProperty(SkewGroup.prototype, "scaleY", {
                        get: function () {
                            return this.scale.y;
                        },
                        set: function (value) {
                            this.scale.y = value;
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    Object.defineProperty(SkewGroup.prototype, "scaleX", {
                        get: function () {
                            return this.scale.x;
                        },
                        set: function (value) {
                            this.scale.x = value;
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    SkewGroup
                );
            })(Phaser.Group);
            Client.SkewGroup = SkewGroup;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var SkewSprite = (function (_super) {
                function SkewSprite(game, _x, _y, _key, _frame) {
                    void 0 === _key && (_key = null), void 0 === _frame && (_frame = null);
                    var _this = _super.call(this, game, _x, _y, _key, _frame) || this;
                    return (
                        (_this.skewX = 0),
                        (_this.skewY = 0),
                        (_this._srB = 0),
                        (_this._srC = 0),
                        (_this._crA = 1),
                        (_this._crD = 1),
                        (_this._cachedRotX = 0),
                        (_this._cachedRotY = 0),
                        (_this.updateTransform = function (parent) {
                            if (!parent && !this.parent && !this.game) return this;
                            var p = this.parent;
                            parent ? (p = parent) : this.parent || (p = this.game.world);
                            var a,
                                b,
                                c,
                                d,
                                tx,
                                ty,
                                pt = p.worldTransform,
                                wt = this.worldTransform,
                                rotY = this.rotation + this.skewY,
                                rotX = this.rotation + this.skewX;
                            if (
                                (rotY % Phaser.Math.PI2 || rotX % Phaser.Math.PI2
                                    ? ((rotX === this._cachedRotX && rotY === this._cachedRotY) ||
                                          ((this._cachedRotX = rotX), (this._cachedRotY = rotY), (this._crA = Math.cos(rotY)), (this._srB = Math.sin(rotY)), (this._srC = Math.sin(-rotX)), (this._crD = Math.cos(rotX))),
                                      (a = this._crA * this.scale.x),
                                      (b = this._srB * this.scale.x),
                                      (c = this._srC * this.scale.y),
                                      (d = this._crD * this.scale.y),
                                      (tx = this.position.x),
                                      (ty = this.position.y),
                                      (this.pivot.x || this.pivot.y) && ((tx -= this.pivot.x * a + this.pivot.y * c), (ty -= this.pivot.x * b + this.pivot.y * d)),
                                      (wt.a = a * pt.a + b * pt.c),
                                      (wt.b = a * pt.b + b * pt.d),
                                      (wt.c = c * pt.a + d * pt.c),
                                      (wt.d = c * pt.b + d * pt.d))
                                    : ((a = this.scale.x),
                                      (d = this.scale.y),
                                      (tx = this.position.x - this.pivot.x * a),
                                      (ty = this.position.y - this.pivot.y * d),
                                      (wt.a = a * pt.a),
                                      (wt.b = a * pt.b),
                                      (wt.c = d * pt.c),
                                      (wt.d = d * pt.d)),
                                (wt.tx = tx * pt.a + ty * pt.c + pt.tx),
                                (wt.ty = tx * pt.b + ty * pt.d + pt.ty),
                                (this.worldAlpha = this.alpha * p.worldAlpha),
                                this.worldPosition.set(wt.tx, wt.ty),
                                this.worldScale.set(this.scale.x * Math.sqrt(wt.a * wt.a + wt.c * wt.c), this.scale.y * Math.sqrt(wt.b * wt.b + wt.d * wt.d)),
                                (this.worldRotation = Math.atan2(-wt.c, wt.d)),
                                (this._currentBounds = null),
                                this.transformCallback && this.transformCallback.call(this.transformCallbackContext, wt, pt),
                                !this._cacheAsBitmap)
                            ) {
                                for (var i = 0; i < this.children.length; i++) this.children[i].updateTransform();
                                return this;
                            }
                        }),
                        _this
                    );
                }
                return (
                    __extends(SkewSprite, _super),
                    Object.defineProperty(SkewSprite.prototype, "scaleY", {
                        get: function () {
                            return this.scale.y;
                        },
                        set: function (value) {
                            this.scale.y = value;
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    Object.defineProperty(SkewSprite.prototype, "scaleX", {
                        get: function () {
                            return this.scale.x;
                        },
                        set: function (value) {
                            this.scale.x = value;
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    SkewSprite
                );
            })(Phaser.Sprite);
            Client.SkewSprite = SkewSprite;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var ButtonSound = (function (_super) {
                function ButtonSound(_id, _x, _y, _key, callback, callbackContext) {
                    var _this = _super.call(this, Client.Main.instance, _x, _y, _key, callback, callbackContext) || this;
                    return (
                        _this.anchor.setTo(0.5),
                        (_this.id = _id),
                        _this.setButtonFrames(),
                        _this.id === Client.SoundType.Music
                            ? ((_this._onOverFrame = "btnMusic instance 10002"), (_this._onDownFrame = "btnMusic instance 10003"))
                            : ((_this._onOverFrame = "btnSFX instance 10002"), (_this._onDownFrame = "btnSFX instance 10003")),
                        _this.events.onInputOver.add(_this.over, _this),
                        (_this.forceOut = !0),
                        _this
                    );
                }
                return (
                    __extends(ButtonSound, _super),
                    (ButtonSound.prototype.addSprite = function (_tileNameOn, _tileNameOff) {
                        (this.tileNameOn = _tileNameOn), (this.tileNameOff = _tileNameOff), (this.graphic = Client.Main.instance.add.sprite(0, 0, this.key, this.getFrame())), this.graphic.anchor.setTo(0.5), this.addChild(this.graphic);
                    }),
                    (ButtonSound.prototype.onInputUpHandler = function (sprite, pointer, isOver) {
                        !0 === isOver && (Client.SoundManager.setEnabled(this.id), Client.SoundManager.playSFX("btnClick"), this.setButtonFrames()), this.scale.setTo(1);
                    }),
                    (ButtonSound.prototype.over = function () {
                        Client.SoundManager.playSFX("btnOver");
                    }),
                    (ButtonSound.prototype.getFrame = function () {
                        return !0 === Client.SoundManager.getEnabled(this.id) ? this.tileNameOn : this.tileNameOff;
                    }),
                    (ButtonSound.prototype.setButtonFrames = function () {
                        this.id === Client.SoundType.Music
                            ? !1 === Client.SoundManager.getEnabled(this.id)
                                ? (this._onOutFrame = "btnMusic instance 10001")
                                : (this._onOutFrame = "btnMusic instance 10000")
                            : !1 === Client.SoundManager.getEnabled(this.id)
                            ? (this._onOutFrame = "btnSFX instance 10001")
                            : (this._onOutFrame = "btnSFX instance 10000"),
                            (this.frameName = this._onOutFrame);
                    }),
                    (ButtonSound.prototype.destroy = function () {
                        _super.prototype.destroy.call(this), (this.graphic = null);
                    }),
                    ButtonSound
                );
            })(Phaser.Button);
            Client.ButtonSound = ButtonSound;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var ButtonWalkthrough = (function (_super) {
                function ButtonWalkthrough(game, _x, _y) {
                    var _this = _super.call(this, game, _x, _y, "ui", "btnWalkthrough instance 10000") || this;
                    return (
                        _this.anchor.setTo(0.5),
                        (_this.inputEnabled = !0),
                        _this.input.start(0, !0),
                        (_this.input.useHandCursor = !0),
                        _this.events.onInputOver.add(_this.onInputOverHandler, _this),
                        _this.events.onInputOut.add(_this.onInputOutHandler, _this),
                        _this.events.onInputUp.add(_this.onInputUpHandler, _this),
                        _this.events.onRemovedFromWorld.add(_this.removedFromWorld, _this),
                        (_this.text = new Client.DancingText(Client.Main.instance, _this, -55, 2, 14, "WALKTHROUGH", 16)),
                        h5branding.Branding.outGoingLinksAllowed() || ((_this.visible = !1), (_this.inputEnabled = !1)),
                        _this
                    );
                }
                return (
                    __extends(ButtonWalkthrough, _super),
                    (ButtonWalkthrough.prototype.update = function () {
                        this.text.update();
                    }),
                    (ButtonWalkthrough.prototype.removedFromWorld = function () {
                        this.inputEnabled = !1;
                    }),
                    (ButtonWalkthrough.prototype.onInputOverHandler = function (sprite, pointer) {
                        this.text.startDancing(), Client.SoundManager.playSFX("btnOver"), (this.frameName = "btnWalkthrough instance 10001");
                    }),
                    (ButtonWalkthrough.prototype.onInputOutHandler = function (sprite, pointer) {
                        this.frameName = "btnWalkthrough instance 10000";
                    }),
                    (ButtonWalkthrough.prototype.onInputUpHandler = function (sprite, pointer, isOver) {}),
                    (ButtonWalkthrough.prototype.destroy = function () {
                        _super.prototype.destroy.call(this), this.text.free(), (this.text = null);
                    }),
                    ButtonWalkthrough
                );
            })(Phaser.Image);
            Client.ButtonWalkthrough = ButtonWalkthrough;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var LevelSelectButton = (function (_super) {
                function LevelSelectButton(_id, game, _x, _y, key, callback, callbackContext, overFrame, outFrame, downFrame, upFrame) {
                    var _this = _super.call(this, game, _x, _y, key, callback, callbackContext, overFrame, outFrame, downFrame, upFrame) || this;
                    return (
                        (_this.id = _id),
                        _this.anchor.set(0.5),
                        (_this.name = "" + _id),
                        _this.onInputOver.add(_this.over, _this),
                        _this.onInputOut.add(_this.out, _this),
                        (_this.levelText = _this.game.make.sprite(-18, -26, "ui", "numbers instance " + (_id - 1 + 1e4))),
                        _this.addChild(_this.levelText),
                        _this
                    );
                }
                return (
                    __extends(LevelSelectButton, _super),
                    (LevelSelectButton.prototype.addStars = function () {
                        var star,
                            countStars = 0;
                        return (
                            1 === Client.DataManager.getInstance().saveObj["questFlag" + this.id] &&
                                ((star = this.game.make.sprite(0, 17, "ui", "star instance 10000")).anchor.setTo(0.5), star.scale.setTo(0.55), this.addChild(star), (countStars += 1)),
                            1 === Client.DataManager.getInstance().saveObj["questWheel" + this.id] &&
                                ((star = this.game.make.sprite(-18, 13, "ui", "star instance 10000")).anchor.setTo(0.5), star.scale.setTo(0.55), (star.angle = -9), this.addChild(star), (countStars += 1)),
                            1 === Client.DataManager.getInstance().saveObj["questCar" + this.id] &&
                                ((star = this.game.make.sprite(18, 13, "ui", "star instance 10000")).anchor.setTo(0.5), star.scale.setTo(0.55), (star.angle = 9), this.addChild(star), (countStars += 1)),
                            (star = null),
                            countStars
                        );
                    }),
                    (LevelSelectButton.prototype.addLock = function () {
                        (this.lock = this.game.make.sprite(32, -29, "ui", "lock instance 10000")), this.lock.anchor.set(0.5), this.addChild(this.lock);
                    }),
                    (LevelSelectButton.prototype.over = function () {
                        Client.SoundManager.playSFX("btnOver"), this.scale.setTo(1.1);
                    }),
                    (LevelSelectButton.prototype.out = function () {
                        this.scale.setTo(1);
                    }),
                    (LevelSelectButton.prototype.destroy = function () {
                        _super.prototype.destroy.call(this), (this.lock = null), (this.levelText = null);
                    }),
                    LevelSelectButton
                );
            })(Phaser.Button);
            Client.LevelSelectButton = LevelSelectButton;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var SimpleButton = (function (_super) {
                function SimpleButton(game, x, y, key, frame, hasDownFrame) {
                    void 0 === hasDownFrame && (hasDownFrame = !0);
                    var _this = _super.call(this, game, x, y, key, frame + " instance 10000") || this;
                    return (
                        (_this.activeDispatchDown = !0),
                        (_this.activeDispatchUp = !0),
                        (_this.pressed = !1),
                        (_this.onInputDown = new Phaser.Signal()),
                        (_this.onInputUp = new Phaser.Signal()),
                        (_this.currFrame = frame),
                        _this.events.onInputOut.add(_this.out, _this),
                        _this.events.onInputOver.add(_this.over, _this),
                        _this.events.onInputDown.add(_this.down, _this),
                        _this.events.onInputUp.add(_this.up, _this),
                        _this.anchor.setTo(0.5),
                        (_this.hasDownFrame = hasDownFrame),
                        _this
                    );
                }
                return (
                    __extends(SimpleButton, _super),
                    (SimpleButton.prototype.out = function () {
                        !0 === this.inputEnabled && (this.frameName = this.currFrame + " instance 10000");
                    }),
                    (SimpleButton.prototype.over = function () {
                        !0 === this.inputEnabled && (this.frameName = this.currFrame + " instance 10001");
                    }),
                    (SimpleButton.prototype.down = function () {
                        !0 === this.hasDownFrame && (this.frameName = this.currFrame + " instance 10002"), !0 === this.activeDispatchDown && this.onInputDown.dispatch(this), (this.pressed = !0);
                    }),
                    (SimpleButton.prototype.up = function (sprite, pointer, isOver) {
                        !0 === isOver ? this.over() : this.out(), !0 === this.activeDispatchUp && this.onInputUp.dispatch(this), (this.pressed = !1);
                    }),
                    (SimpleButton.prototype.activate = function () {
                        !0 !== this.isActive && ((this.isActive = !0), (this.inputEnabled = !0), (this.input.useHandCursor = !0), this.out());
                    }),
                    (SimpleButton.prototype.deactivate = function (hasDeactiveFrame) {
                        void 0 === hasDeactiveFrame && (hasDeactiveFrame = !0),
                            !1 !== this.isActive &&
                                ((this.pressed = !1),
                                !(this.isActive = !1) === hasDeactiveFrame ? (!0 === this.hasDownFrame ? (this.frameName = this.currFrame + " instance 10003") : (this.frameName = this.currFrame + " instance 10002")) : this.out(),
                                (this.inputEnabled = !1));
                    }),
                    (SimpleButton.prototype.destroy = function () {
                        _super.prototype.destroy.call(this), (this.onInputDown = null), (this.onInputUp = null);
                    }),
                    SimpleButton
                );
            })(Client.SASprite);
            Client.SimpleButton = SimpleButton;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var DataManager = (function () {
                function DataManager(game) {
                    (this.scores = []), (this.currentLevel = 1), (this.game = game);
                }
                return (
                    (DataManager.getInstance = function (game) {
                        return DataManager.instance || (DataManager.instance = new DataManager(game)), DataManager.instance;
                    }),
                    (DataManager.prototype.init = function () {
                        var _this = this;
                        this.loadData("w7_svData").then(function (values) {
                            if (null == values) (_this.saveObj = _this.getSaveObj()), _this.save();
                            else {
                                var savedData = JSON.parse(values);
                                (_this.saveObj = savedData), (_this.scores = _this.saveObj.sc), (_this.currentLevel = _this.saveObj.lvl);
                            }
                        });
                    }),
                    (DataManager.prototype.getSaveObj = function () {
                        return { m: 1, fx: 1, sc: this.scores, lvl: this.currentLevel, pl: 1 };
                    }),
                    (DataManager.prototype.clearData = function () {
                        this.game.storage.clear();
                    }),
                    (DataManager.prototype.save = function () {
                        this.game.storage.setItem("w7_svData", JSON.stringify(this.saveObj));
                    }),
                    (DataManager.prototype.saveData = function (key, value) {
                        (this.saveObj[key] = value), this.save();
                    }),
                    (DataManager.prototype.loadData = function (key) {
                        return this.game.storage.getItem(key);
                    }),
                    (DataManager.prototype.getData = function (key, defaultValue) {
                        return __awaiter(this, void 0, void 0, function () {
                            var saved, result;
                            return __generator(this, function (_a) {
                                switch (_a.label) {
                                    case 0:
                                        return [4, this.loadData(key)];
                                    case 1:
                                        return (saved = _a.sent()), (result = defaultValue), (null === saved && void 0 === saved) || (result = JSON.parse(saved)), [2, result];
                                }
                            });
                        });
                    }),
                    (DataManager.prototype.saveScore = function (key, level, value) {
                        this.keepOldScore(level - 1, value) || (this.setScore(level - 1, value), this.save());
                    }),
                    (DataManager.prototype.setScore = function (level, value) {
                        this.scores[level] = value;
                    }),
                    (DataManager.prototype.keepOldScore = function (level, value) {
                        var oldScore = this.scores[level];
                        return -1 !== oldScore && void 0 !== oldScore && !(oldScore < value);
                    }),
                    (DataManager.prototype.keepOldLevel = function (level) {
                        return !(level > this.currentLevel);
                    }),
                    (DataManager.prototype.saveLevel = function (level) {
                        this.keepOldLevel(level) || ((this.currentLevel = level), (this.saveObj.lvl = this.currentLevel), this.save());
                    }),
                    (DataManager.prototype.calcData = function (key, start, end) {
                        for (var total = 0, i = 0; i < this.scores.length; i++) total += this.scores[i];
                        return total;
                    }),
                    DataManager
                );
            })();
            Client.DataManager = DataManager;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var LevelManager = (function () {
                function LevelManager(game) {
                    (this.currentRobberyScene = 0), (this.game = game);
                }
                return (
                    (LevelManager.getInstance = function (game) {
                        return LevelManager.instance || (LevelManager.instance = new LevelManager(game)), LevelManager.instance;
                    }),
                    (LevelManager.prototype.init = function () {
                        (this.currentMenuScreen = 0), (this.currentLevel = 14);
                    }),
                    LevelManager
                );
            })();
            Client.LevelManager = LevelManager;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var NapeVec2 = (function () {
                function NapeVec2(x, y) {
                    void 0 === x && (x = 0), void 0 === y && (y = 0), (this.x = 0), (this.y = 0), (this.x = x), (this.y = y);
                }
                return (
                    Object.defineProperty(NapeVec2.prototype, "angle", {
                        get: function () {
                            return this.x === this.y && 0 === this.x ? 0 : Math.atan2(this.y, this.x);
                        },
                        set: function (angle) {
                            var l = length;
                            (this.x = l * Math.cos(angle)), (this.y = l * Math.sin(angle));
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    Object.defineProperty(NapeVec2.prototype, "length", {
                        get: function () {
                            return Math.sqrt(this.x * this.x + this.y * this.y);
                        },
                        set: function (length) {
                            var t = length / Math.sqrt(this.x * this.x + this.y * this.y);
                            (this.x *= t), (this.y *= t);
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    (NapeVec2.prototype.normalise = function () {
                        var d = this.x * this.x + this.y * this.y,
                            scale = 1 / Math.sqrt(d);
                        return (this.x *= scale), (this.y *= scale), this;
                    }),
                    (NapeVec2.prototype.muleq = function (scalar) {
                        return this.setxy(this.x * scalar, this.y * scalar);
                    }),
                    (NapeVec2.prototype.setxy = function (x, y) {
                        return (this.x = x), (this.y = y), this;
                    }),
                    (NapeVec2.prototype.getBox2db2Vec2 = function (coef) {
                        return void 0 === coef && (coef = 1), new box2d.b2Vec2(this.x * coef, this.y * coef);
                    }),
                    (NapeVec2.coefToBox2d = -0.016),
                    NapeVec2
                );
            })();
            Client.NapeVec2 = NapeVec2;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var NativeChanges = (function () {
                function NativeChanges() {}
                return (
                    (NativeChanges.setGraphicsChildrensMask = function (_game, _default) {
                        void 0 === _default && (_default = !0),
                            !0 === _default
                                ? _game.renderType === Phaser.CANVAS
                                    ? this.setDefaultMaskCanvas(_game)
                                    : _game.renderType === Phaser.WEBGL && this.setDefaultMaskWebGL(_game)
                                : _game.renderType === Phaser.CANVAS
                                ? this.setGraphicsChildrensMaskCanvas(_game)
                                : _game.renderType === Phaser.WEBGL && this.setGraphicsChildrensMaskWebGL(_game);
                    }),
                    (NativeChanges.setGraphicsChildrensMaskCanvas = function (game) {
                        (game.renderer.renderSession.maskManager.pushMask = function (maskDataInc, renderSession) {
                            var context = renderSession.context;
                            context.save(), context.beginPath();
                            for (var q = 0; q < maskDataInc.children.length; q++) {
                                var maskData = maskDataInc.children[q],
                                    cacheAlpha = maskData.alpha,
                                    transform = maskData.worldTransform,
                                    resolution = renderSession.resolution;
                                context.setTransform(transform.a * resolution, transform.b * resolution, transform.c * resolution, transform.d * resolution, transform.tx * resolution, transform.ty * resolution),
                                    PIXI.CanvasGraphics.renderGraphicsMask(maskDataInc.children[q], context),
                                    (maskData.worldAlpha = cacheAlpha);
                            }
                            context.clip();
                        }),
                            (PIXI.CanvasGraphics.renderGraphicsMask = function (graphics, context) {
                                var len = graphics.graphicsData.length;
                                if (0 !== len)
                                    for (var i = 0; i < len; i++) {
                                        var data = graphics.graphicsData[i],
                                            shape = data.shape;
                                        if (data.type === Phaser.POLYGON) {
                                            var points = shape.points;
                                            context.moveTo(points[0], points[1]);
                                            for (var j = 1; j < points.length / 2; j++) context.lineTo(points[2 * j], points[2 * j + 1]);
                                            points[0] === points[points.length - 2] && points[1] === points[points.length - 1] && context.closePath();
                                        } else if (data.type === Phaser.RECTANGLE) context.rect(shape.x, shape.y, shape.width, shape.height), context.closePath();
                                        else if (data.type === Phaser.CIRCLE) context.arc(shape.x, shape.y, shape.radius, 0, 2 * Math.PI), context.closePath();
                                        else if (data.type === Phaser.ELLIPSE) {
                                            var w = 2 * shape.width,
                                                h = 2 * shape.height,
                                                x = shape.x - w / 2,
                                                y = shape.y - h / 2,
                                                ox = (w / 2) * 0.5522848,
                                                oy = (h / 2) * 0.5522848,
                                                xe = x + w,
                                                ye = y + h,
                                                xm = x + w / 2,
                                                ym = y + h / 2;
                                            context.moveTo(x, ym),
                                                context.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y),
                                                context.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym),
                                                context.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye),
                                                context.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym),
                                                context.closePath();
                                        } else if (data.type === Phaser.ROUNDEDRECTANGLE) {
                                            var rx = shape.x,
                                                ry = shape.y,
                                                width = shape.width,
                                                height = shape.height,
                                                radius = shape.radius,
                                                maxRadius = (Math.min(width, height) / 2) | 0;
                                            (radius = maxRadius < radius ? maxRadius : radius),
                                                context.moveTo(rx, ry + radius),
                                                context.lineTo(rx, ry + height - radius),
                                                context.quadraticCurveTo(rx, ry + height, rx + radius, ry + height),
                                                context.lineTo(rx + width - radius, ry + height),
                                                context.quadraticCurveTo(rx + width, ry + height, rx + width, ry + height - radius),
                                                context.lineTo(rx + width, ry + radius),
                                                context.quadraticCurveTo(rx + width, ry, rx + width - radius, ry),
                                                context.lineTo(rx + radius, ry),
                                                context.quadraticCurveTo(rx, ry, rx, ry + radius),
                                                context.closePath();
                                        }
                                    }
                            });
                    }),
                    (NativeChanges.setGraphicsChildrensMaskWebGL = function (game) {
                        (game.renderer.maskManager.pushMask = function (maskDataInc, renderSession) {
                            for (var gl = renderSession.gl, qq = 0, q = 0; q < maskDataInc.children.length; q++) {
                                var maskData = maskDataInc.children[q];
                                maskData.dirty && PIXI.WebGLGraphics.updateGraphics(maskData, gl),
                                    void 0 !== maskData._webGL[gl.id] &&
                                        void 0 !== maskData._webGL[gl.id].data &&
                                        0 !== maskData._webGL[gl.id].data.length &&
                                        ((qq += 1), renderSession.stencilManager.pushStencil(maskData, maskData._webGL[gl.id].data[0], renderSession));
                            }
                            0 !== qq && renderSession.stencilManager.count++;
                        }),
                            (game.renderer.renderSession.stencilManager.pushStencil = function (graphics, webGLData, renderSession) {
                                var gl = this.gl;
                                this.bindGraphics(graphics, webGLData, renderSession),
                                    0 === this.stencilStack.length && (gl.enable(gl.STENCIL_TEST), gl.clear(gl.STENCIL_BUFFER_BIT), (this.reverse = !0), (this.count = 0)),
                                    this.stencilStack.push(webGLData);
                                var level = this.count;
                                gl.colorMask(!1, !1, !1, !1),
                                    gl.stencilFunc(gl.ALWAYS, 0, 255),
                                    gl.stencilOp(gl.KEEP, gl.KEEP, gl.INVERT),
                                    1 === webGLData.mode
                                        ? (gl.drawElements(gl.TRIANGLE_FAN, webGLData.indices.length - 4, gl.UNSIGNED_SHORT, 0),
                                          this.reverse ? (gl.stencilFunc(gl.EQUAL, 255 - level, 255), gl.stencilOp(gl.KEEP, gl.KEEP, gl.DECR)) : (gl.stencilFunc(gl.EQUAL, level, 255), gl.stencilOp(gl.KEEP, gl.KEEP, gl.INCR)),
                                          gl.drawElements(gl.TRIANGLE_FAN, 4, gl.UNSIGNED_SHORT, 2 * (webGLData.indices.length - 4)),
                                          this.reverse ? gl.stencilFunc(gl.EQUAL, 255 - (level + 1), 255) : gl.stencilFunc(gl.EQUAL, level + 1, 255),
                                          (this.reverse = !this.reverse))
                                        : (this.reverse ? (gl.stencilFunc(gl.EQUAL, level, 255), gl.stencilOp(gl.KEEP, gl.KEEP, gl.INCR)) : (gl.stencilFunc(gl.EQUAL, 255 - level, 255), gl.stencilOp(gl.KEEP, gl.KEEP, gl.DECR)),
                                          gl.drawElements(gl.TRIANGLE_STRIP, webGLData.indices.length, gl.UNSIGNED_SHORT, 0),
                                          this.reverse ? gl.stencilFunc(gl.EQUAL, level + 1, 255) : gl.stencilFunc(gl.EQUAL, 255 - (level + 1), 255)),
                                    gl.colorMask(!0, !0, !0, !0),
                                    gl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP);
                            }),
                            (game.renderer.maskManager.popMask = function (maskDataInc, renderSession) {
                                for (var gl = this.gl, qq = !0, q = 0; q < maskDataInc.children.length; q++) {
                                    var maskData = maskDataInc.children[q];
                                    void 0 !== maskData._webGL[gl.id] &&
                                        void 0 !== maskData._webGL[gl.id].data &&
                                        0 !== maskData._webGL[gl.id].data.length &&
                                        (!0 === qq && ((qq = !1), renderSession.stencilManager.count--), renderSession.stencilManager.popStencil(maskData, maskData._webGL[gl.id].data[0], renderSession));
                                }
                            }),
                            (game.renderer.renderSession.stencilManager.popStencil = function (graphics, webGLData, renderSession) {
                                var gl = this.gl;
                                if ((this.stencilStack.pop(), 0 === this.stencilStack.length)) gl.disable(gl.STENCIL_TEST);
                                else {
                                    var level = this.count;
                                    this.bindGraphics(graphics, webGLData, renderSession),
                                        gl.colorMask(!1, !1, !1, !1),
                                        1 === webGLData.mode
                                            ? ((this.reverse = !this.reverse),
                                              this.reverse ? (gl.stencilFunc(gl.EQUAL, 255 - (level + 1), 255), gl.stencilOp(gl.KEEP, gl.KEEP, gl.INCR)) : (gl.stencilFunc(gl.EQUAL, level + 1, 255), gl.stencilOp(gl.KEEP, gl.KEEP, gl.DECR)),
                                              gl.drawElements(gl.TRIANGLE_FAN, 4, gl.UNSIGNED_SHORT, 2 * (webGLData.indices.length - 4)),
                                              gl.stencilFunc(gl.ALWAYS, 0, 255),
                                              gl.stencilOp(gl.KEEP, gl.KEEP, gl.INVERT),
                                              gl.drawElements(gl.TRIANGLE_FAN, webGLData.indices.length - 4, gl.UNSIGNED_SHORT, 0))
                                            : (this.reverse ? (gl.stencilFunc(gl.EQUAL, level + 1, 255), gl.stencilOp(gl.KEEP, gl.KEEP, gl.DECR)) : (gl.stencilFunc(gl.EQUAL, 255 - (level + 1), 255), gl.stencilOp(gl.KEEP, gl.KEEP, gl.INCR)),
                                              gl.drawElements(gl.TRIANGLE_STRIP, webGLData.indices.length, gl.UNSIGNED_SHORT, 0)),
                                        this.reverse ? gl.stencilFunc(gl.EQUAL, level, 255) : gl.stencilFunc(gl.EQUAL, 255 - level, 255),
                                        gl.colorMask(!0, !0, !0, !0),
                                        gl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP);
                                }
                            });
                    }),
                    (NativeChanges.setDefaultMaskCanvas = function (game) {
                        (game.renderer.renderSession.maskManager.pushMask = function (maskData, renderSession) {
                            var context = renderSession.context;
                            context.save();
                            var cacheAlpha = maskData.alpha,
                                transform = maskData.worldTransform,
                                resolution = renderSession.resolution;
                            context.setTransform(transform.a * resolution, transform.b * resolution, transform.c * resolution, transform.d * resolution, transform.tx * resolution, transform.ty * resolution),
                                PIXI.CanvasGraphics.renderGraphicsMask(maskData, context),
                                context.clip(),
                                (maskData.worldAlpha = cacheAlpha);
                        }),
                            (PIXI.CanvasGraphics.renderGraphicsMask = function (graphics, context) {
                                var len = graphics.graphicsData.length;
                                if (0 !== len) {
                                    context.beginPath();
                                    for (var i = 0; i < len; i++) {
                                        var data = graphics.graphicsData[i],
                                            shape = data.shape;
                                        if (data.type === Phaser.POLYGON) {
                                            var points = shape.points;
                                            context.moveTo(points[0], points[1]);
                                            for (var j = 1; j < points.length / 2; j++) context.lineTo(points[2 * j], points[2 * j + 1]);
                                            points[0] === points[points.length - 2] && points[1] === points[points.length - 1] && context.closePath();
                                        } else if (data.type === Phaser.RECTANGLE) context.rect(shape.x, shape.y, shape.width, shape.height), context.closePath();
                                        else if (data.type === Phaser.CIRCLE) context.arc(shape.x, shape.y, shape.radius, 0, 2 * Math.PI), context.closePath();
                                        else if (data.type === Phaser.ELLIPSE) {
                                            var w = 2 * shape.width,
                                                h = 2 * shape.height,
                                                x = shape.x - w / 2,
                                                y = shape.y - h / 2,
                                                ox = (w / 2) * 0.5522848,
                                                oy = (h / 2) * 0.5522848,
                                                xe = x + w,
                                                ye = y + h,
                                                xm = x + w / 2,
                                                ym = y + h / 2;
                                            context.moveTo(x, ym),
                                                context.bezierCurveTo(x, ym - oy, xm - ox, y, xm, y),
                                                context.bezierCurveTo(xm + ox, y, xe, ym - oy, xe, ym),
                                                context.bezierCurveTo(xe, ym + oy, xm + ox, ye, xm, ye),
                                                context.bezierCurveTo(xm - ox, ye, x, ym + oy, x, ym),
                                                context.closePath();
                                        } else if (data.type === Phaser.ROUNDEDRECTANGLE) {
                                            var rx = shape.x,
                                                ry = shape.y,
                                                width = shape.width,
                                                height = shape.height,
                                                radius = shape.radius,
                                                maxRadius = (Math.min(width, height) / 2) | 0;
                                            (radius = maxRadius < radius ? maxRadius : radius),
                                                context.moveTo(rx, ry + radius),
                                                context.lineTo(rx, ry + height - radius),
                                                context.quadraticCurveTo(rx, ry + height, rx + radius, ry + height),
                                                context.lineTo(rx + width - radius, ry + height),
                                                context.quadraticCurveTo(rx + width, ry + height, rx + width, ry + height - radius),
                                                context.lineTo(rx + width, ry + radius),
                                                context.quadraticCurveTo(rx + width, ry, rx + width - radius, ry),
                                                context.lineTo(rx + radius, ry),
                                                context.quadraticCurveTo(rx, ry, rx, ry + radius),
                                                context.closePath();
                                        }
                                    }
                                }
                            });
                    }),
                    (NativeChanges.setDefaultMaskWebGL = function (game) {
                        (game.renderer.maskManager.pushMask = function (maskData, renderSession) {
                            var gl = renderSession.gl;
                            maskData.dirty && PIXI.WebGLGraphics.updateGraphics(maskData, gl),
                                void 0 !== maskData._webGL[gl.id] &&
                                    void 0 !== maskData._webGL[gl.id].data &&
                                    0 !== maskData._webGL[gl.id].data.length &&
                                    renderSession.stencilManager.pushStencil(maskData, maskData._webGL[gl.id].data[0], renderSession);
                        }),
                            (game.renderer.renderSession.stencilManager.pushStencil = function (graphics, webGLData, renderSession) {
                                var gl = this.gl;
                                this.bindGraphics(graphics, webGLData, renderSession),
                                    0 === this.stencilStack.length && (gl.enable(gl.STENCIL_TEST), gl.clear(gl.STENCIL_BUFFER_BIT), (this.reverse = !0), (this.count = 0)),
                                    this.stencilStack.push(webGLData);
                                var level = this.count;
                                gl.colorMask(!1, !1, !1, !1),
                                    gl.stencilFunc(gl.ALWAYS, 0, 255),
                                    gl.stencilOp(gl.KEEP, gl.KEEP, gl.INVERT),
                                    1 === webGLData.mode
                                        ? (gl.drawElements(gl.TRIANGLE_FAN, webGLData.indices.length - 4, gl.UNSIGNED_SHORT, 0),
                                          this.reverse ? (gl.stencilFunc(gl.EQUAL, 255 - level, 255), gl.stencilOp(gl.KEEP, gl.KEEP, gl.DECR)) : (gl.stencilFunc(gl.EQUAL, level, 255), gl.stencilOp(gl.KEEP, gl.KEEP, gl.INCR)),
                                          gl.drawElements(gl.TRIANGLE_FAN, 4, gl.UNSIGNED_SHORT, 2 * (webGLData.indices.length - 4)),
                                          this.reverse ? gl.stencilFunc(gl.EQUAL, 255 - (level + 1), 255) : gl.stencilFunc(gl.EQUAL, level + 1, 255),
                                          (this.reverse = !this.reverse))
                                        : (this.reverse ? (gl.stencilFunc(gl.EQUAL, level, 255), gl.stencilOp(gl.KEEP, gl.KEEP, gl.INCR)) : (gl.stencilFunc(gl.EQUAL, 255 - level, 255), gl.stencilOp(gl.KEEP, gl.KEEP, gl.DECR)),
                                          gl.drawElements(gl.TRIANGLE_STRIP, webGLData.indices.length, gl.UNSIGNED_SHORT, 0),
                                          this.reverse ? gl.stencilFunc(gl.EQUAL, level + 1, 255) : gl.stencilFunc(gl.EQUAL, 255 - (level + 1), 255)),
                                    gl.colorMask(!0, !0, !0, !0),
                                    gl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP),
                                    this.count++;
                            }),
                            (game.renderer.maskManager.popMask = function (maskData, renderSession) {
                                var gl = this.gl;
                                void 0 !== maskData._webGL[gl.id] &&
                                    void 0 !== maskData._webGL[gl.id].data &&
                                    0 !== maskData._webGL[gl.id].data.length &&
                                    renderSession.stencilManager.popStencil(maskData, maskData._webGL[gl.id].data[0], renderSession);
                            }),
                            (game.renderer.renderSession.stencilManager.popStencil = function (graphics, webGLData, renderSession) {
                                var gl = this.gl;
                                if ((this.stencilStack.pop(), this.count--, 0 === this.stencilStack.length)) gl.disable(gl.STENCIL_TEST);
                                else {
                                    var level = this.count;
                                    this.bindGraphics(graphics, webGLData, renderSession),
                                        gl.colorMask(!1, !1, !1, !1),
                                        1 === webGLData.mode
                                            ? ((this.reverse = !this.reverse),
                                              this.reverse ? (gl.stencilFunc(gl.EQUAL, 255 - (level + 1), 255), gl.stencilOp(gl.KEEP, gl.KEEP, gl.INCR)) : (gl.stencilFunc(gl.EQUAL, level + 1, 255), gl.stencilOp(gl.KEEP, gl.KEEP, gl.DECR)),
                                              gl.drawElements(gl.TRIANGLE_FAN, 4, gl.UNSIGNED_SHORT, 2 * (webGLData.indices.length - 4)),
                                              gl.stencilFunc(gl.ALWAYS, 0, 255),
                                              gl.stencilOp(gl.KEEP, gl.KEEP, gl.INVERT),
                                              gl.drawElements(gl.TRIANGLE_FAN, webGLData.indices.length - 4, gl.UNSIGNED_SHORT, 0))
                                            : (this.reverse ? (gl.stencilFunc(gl.EQUAL, level + 1, 255), gl.stencilOp(gl.KEEP, gl.KEEP, gl.DECR)) : (gl.stencilFunc(gl.EQUAL, 255 - (level + 1), 255), gl.stencilOp(gl.KEEP, gl.KEEP, gl.INCR)),
                                              gl.drawElements(gl.TRIANGLE_STRIP, webGLData.indices.length, gl.UNSIGNED_SHORT, 0)),
                                        this.reverse ? gl.stencilFunc(gl.EQUAL, level, 255) : gl.stencilFunc(gl.EQUAL, 255 - level, 255),
                                        gl.colorMask(!0, !0, !0, !0),
                                        gl.stencilOp(gl.KEEP, gl.KEEP, gl.KEEP);
                                }
                            });
                    }),
                    NativeChanges
                );
            })();
            Client.NativeChanges = NativeChanges;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {}));
var WheelyScale,
    Constants = (function () {
        function Constants() {}
        return (
            (Constants.DIV_ID = "content"),
            (Constants.GAME_SCALE = 1),
            (Constants.CALCULATED_WIDTH = 0),
            (Constants.CALCULATED_HEIGHT = 0),
            (Constants.GAME_WIDTH = 800),
            (Constants.GAME_HEIGHT = 600),
            (Constants.LANDSCAPE_LOCKED = !0),
            (Constants.PORTRAIT_LOCKED = !1),
            (Constants.GAMEDISTRIBUTION_ID = "271a94e090b8453a9a262d1ee3cb1cd6"),
            (Constants.GAMEDISTRIBUTION_USER = "ABD36C6C-E74B-4BA7-BE87-0AB01F98D30D-s1"),
            (Constants.GAME_KEY = "44344f0b1f745b17f93d1d7a65d28d2c"),
            (Constants.SECRET_KEY = "ac24d157a1ac23605f5081646b6eb9582be06772"),
            (Constants.GOOGLE_ID = ""),
            (Constants.GOOGLE_APP_NAME = "Wheely 7"),
            (Constants.LOGO_URL = ""),
            (Constants.WALKTHROUGH_URL = ""),
            (Constants.GAME_TITLE = "Wheely 7"),
            Constants
        );
    })();
!(function (WheelyScale) {
    var ScaleHelper = (function () {
        function ScaleHelper() {}
        return (
            (ScaleHelper.init = function (aGame) {
                (this.game = aGame),
                    (this.dom = document.getElementById(this.dom_id)),
                    (this.game.scale.scaleMode = Phaser.ScaleManager.USER_SCALE),
                    (this.game.scale.fullScreenScaleMode = Phaser.ScaleManager.USER_SCALE),
                    (this.game.scale.pageAlignHorizontally = !0),
                    (this.game.scale.pageAlignVertically = !0),
                    (this.game.scale.windowConstraints.right = "layout"),
                    (this.game.scale.windowConstraints.bottom = "visual"),
                    this.resize(),
                    window.addEventListener("resize", function (e) {
                        return ScaleHelper.resize();
                    });
            }),
            (ScaleHelper.resize = function () {
                var gw,
                    gh,
                    windowWidth = window.innerWidth,
                    windowHeight = window.innerHeight,
                    g_w = this.game_w,
                    g_h = this.game_h,
                    g_sw = this.game_sw,
                    g_sh = this.game_sh;
                windowHeight / windowWidth < g_h / g_w
                    ? windowHeight / windowWidth < g_sh / g_w
                        ? (gw = ((gh = (windowHeight * g_h) / g_sh) * g_w) / g_h)
                        : (gh = ((gw = windowWidth) * g_h) / g_w)
                    : windowHeight / windowWidth < g_h / g_sw
                    ? (gw = ((gh = windowHeight) * g_w) / g_h)
                    : (gh = ((gw = (windowWidth * g_w) / g_sw) * g_h) / g_w);
                var sclX = gw / g_sw,
                    sclY = gh / g_sh,
                    newScale = Math.min(sclX, sclY);
                WheelyScale.ScaleHelper.game.scale.setUserScale(newScale, newScale, 0, 0),
                    (this.dtx = (windowWidth - gw) / 2),
                    (this.dty = (windowHeight - gh) / 2),
                    (this.gameViewW = this.game_w + (2 * this.dtx) / newScale),
                    this.gameViewW > this.game_w && (this.gameViewW = this.game_w),
                    (this.gameViewH = this.game_h + (2 * this.dty) / newScale),
                    this.gameViewH > this.game_h && (this.gameViewH = this.game_h),
                    (this.dom.style.marginLeft = Math.round(this.dtx).toString() + "px"),
                    (this.dom.style.marginTop = Math.round(this.dty).toString() + "px"),
                    (this.dom.style.maxWidth = String(gw) + "px"),
                    (this.dom.style.maxHeight = String(gh) + "px"),
                    WheelyScale.ScaleHelper.game.scale.refresh(),
                    Constants.LANDSCAPE_LOCKED ? (windowHeight < windowWidth ? this.handleCorrect() : this.handleIncorrect()) : Constants.PORTRAIT_LOCKED && (windowWidth < windowHeight ? this.handleCorrect() : this.handleIncorrect()),
                    setTimeout("window.scrollTo(0,0)", 1e3);
            }),
            (ScaleHelper.handleCorrect = function () {
                (this.dom.style.display = "block"), (document.getElementById("orientation").style.display = "none");
            }),
            (ScaleHelper.handleIncorrect = function () {
                (this.dom.style.display = "none"), (document.getElementById("orientation").style.display = "block"), this.game.state.current === SceneList.LevelBuilder && Wheely.Client.LevelBuilder.instance.paused();
            }),
            (ScaleHelper.dom_id = Constants.DIV_ID),
            (ScaleHelper.game_w = Constants.GAME_WIDTH),
            (ScaleHelper.game_h = Constants.GAME_HEIGHT),
            (ScaleHelper.game_sw = Constants.GAME_WIDTH),
            (ScaleHelper.game_sh = Constants.GAME_HEIGHT),
            (ScaleHelper.dtx = 0),
            (ScaleHelper.dty = 0),
            ScaleHelper
        );
    })();
    WheelyScale.ScaleHelper = ScaleHelper;
})(WheelyScale || (WheelyScale = {})),
    (function (Wheely) {
        !(function (Client) {
            var SimpleTween = (function () {
                function SimpleTween() {
                    (this.working = !1), (this.counter = 0), (this.smartRotation = !1), (this.tweenDetails = new Array());
                }
                return (
                    (SimpleTween.prototype.start = function (target, duration, properties, smartRotation) {
                        var start, end;
                        void 0 === smartRotation && (smartRotation = !1),
                            0 !== this.tweenDetails.length && this.stop(),
                            (this.smartRotation = smartRotation),
                            (this.target = target),
                            (this.working = !0),
                            (this.counter = 0),
                            (this.duration = duration);
                        for (var _i = 0, _a = Object.keys(properties); _i < _a.length; _i++) {
                            var itemName = _a[_i];
                            (start = this.target[itemName]) !== (end = properties[itemName]) && this.tweenDetails.push({ propertyName: itemName, start: start, change: end - start });
                        }
                    }),
                    (SimpleTween.prototype.stop = function () {
                        (this.working = !1), (this.tweenDetails = []);
                    }),
                    (SimpleTween.prototype.update = function () {
                        if (!1 !== this.working) {
                            (this.counter += 1), (this.percent = this.counter / this.duration);
                            for (var i = 0; i < this.tweenDetails.length; i++)
                                if (!0 !== this.smartRotation || ("angle" !== this.tweenDetails[i].propertyName && "skX" !== this.tweenDetails[i].propertyName && "skY" !== this.tweenDetails[i].propertyName))
                                    this.target[this.tweenDetails[i].propertyName] = this.tweenDetails[i].start + this.tweenDetails[i].change * this.percent;
                                else {
                                    var rotation = this.tweenDetails[i].change % 360;
                                    180 < rotation ? (rotation -= 360) : rotation < -180 && (rotation += 360), (this.target[this.tweenDetails[i].propertyName] = this.tweenDetails[i].start + rotation * this.percent);
                                }
                            1 <= this.percent && this.stop();
                        }
                    }),
                    (SimpleTween.prototype.free = function () {
                        (this.target = null), (this.tweenDetails = []), (this.tweenDetails = null);
                    }),
                    SimpleTween
                );
            })();
            Client.SimpleTween = SimpleTween;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var SimpleTweenManager = (function () {
                function SimpleTweenManager() {}
                return (
                    (SimpleTweenManager.init = function (game) {
                        game.state.onStateChange.add(SimpleTweenManager.reset, SimpleTweenManager);
                    }),
                    (SimpleTweenManager.set = function (target, duration, properties, smartRotation, stop) {
                        if ((void 0 === smartRotation && (smartRotation = !1), void 0 === stop && (stop = !0), target && !(duration <= 0))) {
                            !0 === stop && SimpleTweenManager.stop(target);
                            for (var i = 0; i < SimpleTweenManager.tweens.length; i++) if (!1 === SimpleTweenManager.tweens[i].working) return void SimpleTweenManager.tweens[i].start(target, duration, properties, smartRotation);
                            var tween = new Client.SimpleTween();
                            tween.start(target, duration, properties, smartRotation), SimpleTweenManager.tweens.push(tween), (tween = null);
                        }
                    }),
                    (SimpleTweenManager.stop = function (target) {
                        for (var i = 0; i < SimpleTweenManager.tweens.length; i++)
                            if (SimpleTweenManager.tweens[i].target === target) {
                                SimpleTweenManager.tweens[i].stop();
                                break;
                            }
                    }),
                    (SimpleTweenManager.update = function () {
                        for (var i = 0; i < SimpleTweenManager.tweens.length; i++) SimpleTweenManager.tweens[i].update();
                    }),
                    (SimpleTweenManager.reset = function () {
                        for (var i = 0; i < SimpleTweenManager.tweens.length; i++) SimpleTweenManager.tweens[i].free();
                        SimpleTweenManager.tweens = [];
                    }),
                    (SimpleTweenManager.tweens = new Array()),
                    SimpleTweenManager
                );
            })();
            Client.SimpleTweenManager = SimpleTweenManager;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var SoundType;
            !(function (SoundType) {
                (SoundType[(SoundType.Music = "music")] = "Music"), (SoundType[(SoundType.SFX = "sfx")] = "SFX");
            })((SoundType = Client.SoundType || (Client.SoundType = {})));
            var SoundManager = (function () {
                function SoundManager() {}
                return (
                    (SoundManager.init = function (aGame) {
                        (SoundManager.game = aGame), SoundManager.toggleSound("m", SoundManager.enabMusic), SoundManager.toggleSound("fx", SoundManager.enabSFX);
                    }),
                    (SoundManager.toggleSound = function (key, soundProp) {
                        Client.DataManager.getInstance().saveObj[key];
                    }),
                    (SoundManager.playMusic = function (name, volume) {
                        void 0 === volume && (volume = 1),
                            null === SoundManager.music
                                ? ((SoundManager.music = SoundManager.game.add.audio(name, volume, !0)), !0 === SoundManager.enabMusic && SoundManager.music.play())
                                : ((SoundManager.music.volume = volume),
                                  !0 === SoundManager.enabMusic &&
                                      (SoundManager.music.key === name
                                          ? SoundManager.music.play()
                                          : (SoundManager.music.destroy(), (SoundManager.music = SoundManager.game.add.audio(name, volume, !0)), !0 === SoundManager.enabMusic && SoundManager.music.play())));
                    }),
                    (SoundManager.stopMusic = function () {
                        null !== SoundManager.music && SoundManager.music.stop();
                    }),
                    (SoundManager.playSFX = function (name, loop, volume) {
                        void 0 === loop && (loop = !1),
                            void 0 === volume && (volume = 1),
                            !1 !== SoundManager.enabSFX
                                ? !0 === loop
                                    ? void 0 === SoundManager.sfxLoop[name]
                                        ? (SoundManager.sfxLoop[name] = SoundManager.game.add.audio(name, volume, !0).play())
                                        : SoundManager.sfxLoop[name].play()
                                    : SoundManager.game.add.audio(name, volume).play()
                                : !0 === loop && void 0 === SoundManager.sfxLoop[name] && (SoundManager.sfxLoop[name] = SoundManager.game.add.audio(name, volume, !0));
                    }),
                    (SoundManager.stopSFXLoop = function (name) {
                        void 0 !== SoundManager.sfxLoop[name] && SoundManager.sfxLoop[name].stop();
                    }),
                    (SoundManager.stopAllSFXLoop = function () {
                        for (var _i = 0, _a = Object.keys(SoundManager.sfxLoop); _i < _a.length; _i++) {
                            var item = _a[_i];
                            SoundManager.sfxLoop[item].stop();
                        }
                    }),
                    (SoundManager.changeEnabledMusic = function () {
                        !0 === SoundManager.enabMusic
                            ? (null !== SoundManager.music && SoundManager.music.pause(), Client.DataManager.getInstance().saveData("m", 1))
                            : (null !== SoundManager.music && (!0 === SoundManager.music.paused ? SoundManager.music.resume() : SoundManager.music.play()), Client.DataManager.getInstance().saveData("m", 0)),
                            (SoundManager.enabMusic = !SoundManager.enabMusic);
                    }),
                    (SoundManager.changeEnabledSFX = function () {
                        if (!0 === SoundManager.enabSFX) {
                            for (var _i = 0, _a = Object.keys(this.sfxLoop); _i < _a.length; _i++) {
                                var item = _a[_i];
                                this.sfxLoop[item].pause();
                            }
                            Client.DataManager.getInstance().saveData("fx", 1);
                        } else {
                            for (var _b = 0, _c = Object.keys(this.sfxLoop); _b < _c.length; _b++) {
                                item = _c[_b];
                                !0 === this.sfxLoop[item].paused ? this.sfxLoop[item].resume() : this.sfxLoop[item].play();
                            }
                            Client.DataManager.getInstance().saveData("fx", 0);
                        }
                        SoundManager.enabSFX = !SoundManager.enabSFX;
                    }),
                    (SoundManager.setEnabled = function (id) {
                        id === SoundType.Music ? SoundManager.changeEnabledMusic() : SoundManager.changeEnabledSFX();
                    }),
                    (SoundManager.getEnabled = function (id) {
                        return id === SoundType.Music ? SoundManager.enabMusic : SoundManager.enabSFX;
                    }),
                    (SoundManager.removeAllSFXLoop = function () {
                        for (var _i = 0, _a = Object.keys(SoundManager.sfxLoop); _i < _a.length; _i++) {
                            var item = _a[_i];
                            SoundManager.sfxLoop[item].destroy();
                        }
                        SoundManager.sfxLoop = {};
                    }),
                    (SoundManager.enabMusic = !0),
                    (SoundManager.enabSFX = !0),
                    (SoundManager.game = null),
                    (SoundManager.music = null),
                    (SoundManager.sfxLoop = {}),
                    SoundManager
                );
            })();
            Client.SoundManager = SoundManager;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Tools = (function () {
                function Tools() {}
                return (
                    (Tools.random = function (min, max) {
                        return Math.floor(Math.random() * (max - min + 1)) + min;
                    }),
                    (Tools.roundDec = function (numIn, decimalPlaces) {
                        void 0 === decimalPlaces && (decimalPlaces = 0);
                        var nExp = Math.pow(10, decimalPlaces);
                        return Math.round(numIn * nExp) / nExp;
                    }),
                    (Tools.clamp = function (val, min, max) {
                        return Math.max(min, Math.min(max, val));
                    }),
                    (Tools.toDeg = function (rad) {
                        return rad * (180 / Math.PI);
                    }),
                    (Tools.toRad = function (deg) {
                        return deg * (Math.PI / 180);
                    }),
                    (Tools.getInstance = function (name) {
                        for (var args = [], _i = 1; _i < arguments.length; _i++) args[_i - 1] = arguments[_i];
                        var newInstance = Object.create(window.Wheely.Client[name].prototype);
                        return newInstance.constructor.apply(newInstance, args), newInstance;
                    }),
                    (Tools.rotatePointByAngle = function (anchorX, anchorY, rotatedX, rotatedY, angleRad) {
                        var cos = Math.cos(angleRad),
                            sin = Math.sin(angleRad);
                        return new Phaser.Point(anchorX + (rotatedX - anchorX) * cos - (rotatedY - anchorY) * sin, anchorY + (rotatedX - anchorX) * sin + (rotatedY - anchorY) * cos);
                    }),
                    (Tools.distance = function (x1, y1, x2, y2) {
                        return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));
                    }),
                    (Tools.percentTo = function (current, total) {
                        return (current / total) * 100;
                    }),
                    (Tools.percentToF = function (current, total) {
                        return current / total;
                    }),
                    (Tools.percentFrom = function (percent, total) {
                        return (percent * total) / 100;
                    }),
                    (Tools.angleOfPoints = function (x1, y1, x2, y2) {
                        return (180 * Math.atan2(-(y2 - y1), -(x2 - x1))) / Math.PI;
                    }),
                    (Tools.setDefaultCursor = function () {
                        Client.Main.instance.canvas.style.cursor = "default";
                    }),
                    Tools
                );
            })();
            Client.Tools = Tools;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var DancingText = (function () {
                function DancingText(game, _addTo, _x, _y, offX, text, size) {
                    var newTF;
                    (this.m_maxTextYDelta = 5),
                        (this.m_danceSpeed = 2),
                        (this.m_danceOffset = 5),
                        (this.m_maxDanceCount = 10),
                        (this.active = !1),
                        (this.m_dancingTexts = new Array()),
                        (this.m_dancingTextsDirections = new Array()),
                        (this.m_dancingTextsDancesCount = new Array()),
                        (this.m_dancingTextsDelays = new Array()),
                        (this.x = _x),
                        (this.y = _y);
                    for (var m_currXOffset = 0, i = 0; i < text.length; i++) {
                        var char = text.charAt(i);
                        " " !== char
                            ? ((newTF = new Phaser.BitmapText(game, this.x + m_currXOffset, this.y, "walkthrough", char, size)).anchor.setTo(0.5),
                              (m_currXOffset += offX),
                              _addTo.addChild(newTF),
                              this.m_dancingTexts.push(newTF),
                              this.m_dancingTextsDirections.push(-1),
                              this.m_dancingTextsDelays.push(0),
                              this.m_dancingTextsDancesCount.push(0))
                            : (m_currXOffset += offX);
                    }
                    newTF = null;
                }
                return (
                    (DancingText.prototype.stopDancing = function () {
                        for (var i = 0; i < this.m_dancingTexts.length; i++) this.m_dancingTexts[i].y = this.y;
                        this.active = !1;
                    }),
                    (DancingText.prototype.startDancing = function () {
                        this.stopDancing();
                        for (var i = 0; i < this.m_dancingTextsDelays.length; i++) (this.m_dancingTextsDelays[i] = 5 * i), (this.m_dancingTextsDancesCount[i] = 0);
                        this.active = !0;
                    }),
                    (DancingText.prototype.updateTextDance = function () {
                        for (var newTF, anyDance = !1, i = 0; i < this.m_dancingTexts.length; i++)
                            ((newTF = this.m_dancingTexts[i]).y < this.y - this.m_maxTextYDelta || newTF.y > this.y + this.m_maxTextYDelta) && ((this.m_dancingTextsDirections[i] *= -1), (this.m_dancingTextsDancesCount[i] += 1)),
                                (this.m_dancingTextsDelays[i] -= Math.abs(this.m_danceSpeed)),
                                this.m_dancingTextsDelays[i] < 0 && this.m_dancingTextsDancesCount[i] < this.m_maxDanceCount
                                    ? ((this.m_dancingTextsDelays[i] = 0), (newTF.y += this.m_dancingTextsDirections[i] * this.m_danceSpeed), (anyDance = !0))
                                    : this.m_dancingTextsDancesCount[i] >= this.m_maxDanceCount && newTF.y !== this.y && ((newTF.y += this.m_dancingTextsDirections[i] * this.m_danceSpeed), (anyDance = !0));
                        anyDance || this.stopDancing();
                    }),
                    (DancingText.prototype.update = function () {
                        !1 !== this.active && this.updateTextDance();
                    }),
                    (DancingText.prototype.free = function () {
                        (this.m_dancingTexts = []),
                            (this.m_dancingTexts = null),
                            (this.m_dancingTextsDirections = []),
                            (this.m_dancingTextsDirections = null),
                            (this.m_dancingTextsDancesCount = []),
                            (this.m_dancingTextsDancesCount = null),
                            (this.m_dancingTextsDelays = []),
                            (this.m_dancingTextsDelays = null);
                    }),
                    DancingText
                );
            })();
            Client.DancingText = DancingText;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {}));
var Fabrique,
    PanelList,
    Wheely,
    Atlases = (function () {
        function Atlases() {}
        return (
            (Atlases.preloadList = []),
            (Atlases.list = ["ui", "wheely", "comix1", "level1", "level2", "level3", "level4", "level5", "level6", "level7", "level8", "level9", "level10", "level11", "level12", "level13", "level14", "level15", "robbery"]),
            Atlases
        );
    })(),
    Images = (function () {
        function Images() {}
        return (
            (Images.preloadList = []),
            (Images.list = [
                "kiziLogo",
                "menuBg",
                "backgroundComix1",
                "bgLevel1_1",
                "bgLevel2_1",
                "bgLevel2_2",
                "bgLevel4_1",
                "bgLevel5_1",
                "bgLevel5_2",
                "bgLevel8_1",
                "bgLevel8_2",
                "bgLevel9_1",
                "bgLevel13_1",
                "bgLevel13_2",
                "bgLevel14_1",
                "bgLevel14_2",
                "bgLevel3_1",
                "bgLevel3_2",
                "bgLevel6_1",
                "bgLevel6_2",
                "bgLevel10_1",
                "bgLevel10_2",
                "bgLevel12_1",
                "bgLevel12_2",
                "bgLevel15_1",
                "monitor",
                "about_mc",
                "robberyBack",
                "robberyFront",
                "robberyOverley",
            ]),
            Images
        );
    })(),
    Sounds = (function () {
        function Sounds() {}
        return (
            (Sounds.preloadList = ["click"]),
            (Sounds.list = [
                "btnClick",
                "btnOver",
                "main_1",
                "main_2",
                "levelFail",
                "levelWin",
                "whelly_start",
                "whelly_stop",
                "questClick",
                "spring",
                "eShock",
                "carHit",
                "carImpact",
                "cut1_cars",
                "cut1_signaling",
                "gas",
                "s_wheelyDrowned",
                "s_carCrush",
                "s_electricDeat",
                "s_elevator",
                "s_wheelyExplosion",
                "wheelyDesintegration",
                "s_lvl1_clickAtm",
                "s_lvl1_guardHelp",
                "s_lvl1_liftButton",
                "s_lvl1_liftEngine",
                "s_lvl2_bankirDialog",
                "s_lvl2_bell",
                "s_lvl2_broom",
                "s_lvl2_cleaningAnger",
                "s_lvl2_doorSlide",
                "s_lvl2_ventAmbient",
                "s_lvl3_bookClick",
                "s_lvl3_carCompare",
                "s_lvl3_carNumber",
                "s_lvl3_cleaningDirt",
                "s_lvl3_closeWindows",
                "s_lvl3_compSucc",
                "s_lvl3_compWr",
                "s_lvl3_initClean",
                "s_lvl3_mapTarget",
                "s_lvl5_closeTraps",
                "s_lvl5_cranMusic",
                "s_lvl5_cranSleep",
                "s_lvl5_platformMove",
                "s_lvl5_rotatingArm",
                "s_lvl5_wheelyOnTraps",
                "s_lvl4_barellFall",
                "s_lvl4_boxDestroy",
                "s_lvl4_doorUp",
                "s_lvl4_electricSound",
                "s_lvl4_fuil",
                "s_lvl4_generatorConkOut",
                "s_lvl4_generatorLoop",
                "s_lvl4_hitWithCar",
                "s_lvl4_lampOff",
                "s_lvl4_lampOn",
                "s_lvl4_liftIsOn",
                "s_lvl4_liftLoop",
                "s_lvl4_lockOpen",
                "s_lvl4_rotateSwitch",
                "s_lvl4_signboard",
                "s_lvl4_startDragBox",
                "s_lvl4_startGenerator",
                "s_lvl4_surprise",
                "s_lvl4_wireElectric",
                "s_lvl6_activateGenerator",
                "s_lvl6_bossHitWall",
                "s_lvl6_bossSleepLoop",
                "s_lvl6_clock",
                "s_lvl6_fireAmbient",
                "s_lvl6_fireIncreace",
                "s_lvl6_firewoodsFall",
                "s_lvl6_gateLoop",
                "s_lvl6_horn",
                "s_lvl6_lightOn",
                "s_lvl6_musicCenter",
                "s_lvl6_openSwitchBox",
                "s_lvl6_owl",
                "s_lvl6_photoFall",
                "s_lvl6_vaseFall",
                "s_lvl6_wakeUpBoss",
                "s_lvl7_deleteItem",
                "s_lvl7_openMap",
                "s_lvl7_photoIncreace",
                "s_lvl7_photoItemDrag",
                "s_lvl7_photoItemPlace",
                "s_lvl7_photoScan",
                "s_lvl7_targetFinded",
                "s_lvl8_anchorDown",
                "s_lvl8_anchorUp",
                "s_lvl8_carEngine",
                "s_lvl8_getElement",
                "s_lvl8_handlerHorizontal",
                "s_lvl8_handlerVertical",
                "s_lvl8_placeElement",
                "s_lvl8_portAmbient",
                "s_lvl8_transporterMove",
                "s_lvl9_ambient",
                "s_lvl9_boxSplash",
                "s_lvl9_crackPlank",
                "s_lvl9_dragHammer",
                "s_lvl9_inBoat",
                "s_lvl9_magnitOff",
                "s_lvl9_magnitOn",
                "s_lvl9_trapsSlide",
                "s_lvl9_wheelyHit",
                "s_lvl10_bossDialog",
                "s_lvl10_bossHookLoop",
                "s_lvl10_bossOnHook",
                "s_lvl10_bossUp",
                "s_lvl10_destroyWall",
                "s_lvl10_hacking",
                "s_lvl10_hookDrag",
                "s_lvl10_hootBlockSlide",
                "s_lvl10_phoneDrop",
                "s_lvl10_signaling",
                "s_lvl10_weightOnBalance",
                "s_lvl11_dialog1",
                "s_lvl11_dialog2",
                "s_lvl11_dialog3",
                "s_lvl11_dialog4",
                "s_lvl11_dialog5",
                "s_lvl11_mobileButton",
                "s_lvl11_photoScan",
                "s_lvl11_photoScroll",
                "s_lvl11_snakeAmbient",
                "s_lvl11_snakeFail",
                "s_lvl11_snakeFood",
                "s_lvl11_snakeStep",
                "s_lvl11_targetFound",
                "s_lvl11_winSecret",
                "s_lvl12_electric",
                "s_lvl12_flame",
                "s_lvl12_rotatingPlatform",
                "s_lvl12_securityInPit",
                "s_lvl12_securityReact",
                "s_lvl12_spring",
                "s_lvl12_wheelyHit",
                "s_lvl13_laserDestroyDoor",
                "s_lvl13_laserLoop",
                "s_lvl13_liftLoop",
                "s_lvl13_lightOn",
                "s_lvl13_pumpAmbient",
                "s_lvl13_rosette",
                "s_lvl13_rotateSwitch",
                "s_lvl13_slider",
                "s_lvl13_valve",
                "s_lvl13_waterFlowDown",
                "s_lvl13_waterUp",
                "s_lvl14_activateTrap",
                "s_lvl14_bossSurprise",
                "s_lvl14_cristallGet",
                "s_lvl14_cristallInSocket",
                "s_lvl14_laserLoop",
                "s_lvl14_lusterFall",
                "s_lvl14_lusterHitBoss",
                "s_lvl14_lusterHitBossDialog",
                "s_lvl14_slideMirror",
                "s_lvl14_trapDeactivate",
                "s_lvl15_explosion",
                "s_lvl15_firework",
                "s_lvl15_handlerSlide",
                "s_lvl15_lockCut",
                "s_lvl15_news",
                "s_lvl15_openBig",
                "s_lvl15_openDoor",
                "s_lvl15_openSmall",
                "s_lvl15_rotateParts",
                "s_lvl15_timer",
                "s_lvl15_timerFast",
                "s_lvl15_ventil",
                "s_lvl15_wireCut",
            ]),
            Sounds
        );
    })();
!(function (Wheely) {
    !(function (Client) {
        var BasicElement = (function () {
            function BasicElement() {}
            return (BasicElement.prototype.update = function () {}), (BasicElement.prototype.free = function () {}), BasicElement;
        })();
        Client.BasicElement = BasicElement;
    })(Wheely.Client || (Wheely.Client = {}));
})(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var BasicSimpleAnim = (function (_super) {
                function BasicSimpleAnim() {
                    var _this = _super.call(this) || this;
                    return (_this.activeAnim = !1), (_this.currAnim = ""), (_this.counterAnim = 0), (_this.loopAnim = 0), _this;
                }
                return (
                    __extends(BasicSimpleAnim, _super),
                    (BasicSimpleAnim.prototype.playAnim = function (value, loop, setParts) {
                        void 0 === loop && (loop = 0), void 0 === setParts && (setParts = !0), (this.currAnim = value), (this.loopAnim = loop), (this.activeAnim = !0), !(this.counterAnim = 0) === setParts && this.setParts(this.currAnim);
                    }),
                    (BasicSimpleAnim.prototype.setParts = function (value) {}),
                    (BasicSimpleAnim.prototype.update = function () {
                        !1 !== this.activeAnim && ((this.counterAnim += 1), this.updateAnimation());
                    }),
                    (BasicSimpleAnim.prototype.updateAnimation = function () {}),
                    (BasicSimpleAnim.prototype.startTween = function (part, duration, properties, smartRotation) {
                        void 0 === smartRotation && (smartRotation = !1), (part.visible = !0), Client.SimpleTweenManager.set(part, duration, properties, smartRotation, !1);
                    }),
                    (BasicSimpleAnim.prototype.setPart = function (part, properties, smartRotation) {
                        if ((void 0 === smartRotation && (smartRotation = !1), part)) {
                            part.visible = !0;
                            for (var _i = 0, _a = Object.keys(properties); _i < _a.length; _i++) {
                                var itemName = _a[_i];
                                if (!0 !== smartRotation || ("angle" !== properties[itemName] && "skX" !== properties[itemName] && "skY" !== properties[itemName])) part[itemName] = properties[itemName];
                                else {
                                    var rotation = properties[itemName] % 360;
                                    180 < rotation ? (rotation -= 360) : rotation < -180 && (rotation += 360), (part[itemName] = rotation);
                                }
                            }
                            Client.SimpleTweenManager.stop(part);
                        }
                    }),
                    (BasicSimpleAnim.prototype.animComplete = function () {
                        0 < this.loopAnim
                            ? ((this.loopAnim -= 1), (this.counterAnim = 0), this.setParts(this.currAnim))
                            : 0 === this.loopAnim
                            ? (this.activeAnim = !1)
                            : this.loopAnim < 0 && ((this.counterAnim = 0), this.setParts(this.currAnim)),
                            this.onAnimComplete();
                    }),
                    (BasicSimpleAnim.prototype.onAnimComplete = function () {}),
                    BasicSimpleAnim
                );
            })(Client.BasicElement);
            Client.BasicSimpleAnim = BasicSimpleAnim;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var ChangeHeroDir = (function (_super) {
                function ChangeHeroDir(game, atlas, _x, _y, springOffY, springOff2) {
                    void 0 === springOffY && (springOffY = 60), void 0 === springOff2 && (springOff2 = 0);
                    var _this = _super.call(this) || this;
                    return (
                        (_this.counterWheels = 0),
                        (_this.joint = null),
                        (_this.m_active = !1),
                        (_this.m_currWallsTime = 0),
                        (_this.springHeight = 60),
                        (_this.springHeight = springOffY),
                        (_this.startY = _y),
                        (_this.graphiSpringLeft = Client.GameManager.instance.layerElements.create(_x - 25, _y + _this.springHeight + springOff2, atlas, "changeDirSpring instance 10000")),
                        _this.graphiSpringLeft.anchor.setTo(0.5, 1),
                        (_this.graphiSpringRight = Client.GameManager.instance.layerElements.create(_x + 25, _y + _this.springHeight + springOff2, atlas, "changeDirSpring instance 10000")),
                        _this.graphiSpringRight.anchor.setTo(0.5, 1),
                        (_this.graphic = Client.GameManager.instance.layerElements.create(_x, _y, atlas, "changeDirTop instance 10000")),
                        _this.graphic.anchor.setTo(0.5),
                        (_this.graphic.inputEnabled = !0),
                        (_this.graphic.input.useHandCursor = !0),
                        _this.graphic.events.onInputOver.add(_this.onInputOver, _this),
                        _this.graphic.events.onInputOut.add(_this.onInputOut, _this),
                        (_this.halfBtnHeight = _this.springHeight),
                        _this.graphic.input.enableDrag(!0),
                        (_this.graphic.input.boundsRect = new Phaser.Rectangle(_x - _this.graphic.width / 2, _y - _this.graphic.height / 2, _this.graphic.width, _this.springHeight + _this.graphic.height / 2 + 2)),
                        _this.graphic.input.setDragLock(!1, !0),
                        _this.graphic.events.onDragUpdate.add(_this.dragUpdate, _this),
                        _this.graphic.events.onInputUp.add(_this.mouseUp, _this),
                        (_this.tween = game.add.tween(_this.graphic)),
                        _this.tween.to({ y: [_this.startY - 15, _this.startY] }, 300, Phaser.Easing.Linear.None),
                        _this.tween.onUpdateCallback(_this.dragUpdate, _this),
                        _this.tween.onComplete.add(_this.tweenComp, _this),
                        (_this.body = new Phaser.Physics.Box2D.Body(game, null, _x, _y - 8, 0)),
                        _this.body.setRectangle(120, 10),
                        (_this.body.sensor = !0),
                        _this.body.setBodyContactCallback(Client.GameManager.instance.hero.bodyWheelBack, _this.onBodyContact, _this),
                        _this.body.setBodyContactCallback(Client.GameManager.instance.hero.bodyWheelFront, _this.onBodyContact, _this),
                        _this
                    );
                }
                return (
                    __extends(ChangeHeroDir, _super),
                    (ChangeHeroDir.prototype.onBodyContact = function (b1, b2, f1, f2, begin) {
                        b1 !== b2 && (!0 === begin ? ((this.counterWheels += 1), 2 < this.counterWheels && (this.counterWheels = 2)) : ((this.counterWheels -= 1), this.counterWheels < 0 && (this.counterWheels = 0)));
                    }),
                    (ChangeHeroDir.prototype.tweenComp = function () {
                        (this.graphic.y = this.startY), (this.graphiSpringLeft.scale.y = 1), (this.graphiSpringRight.scale.y = 1);
                    }),
                    (ChangeHeroDir.prototype.dragUpdate = function () {
                        var percent = (this.graphic.y - this.startY) / this.halfBtnHeight;
                        (this.graphiSpringLeft.scale.y = 1 - percent), (this.graphiSpringRight.scale.y = this.graphiSpringLeft.scale.y);
                    }),
                    (ChangeHeroDir.prototype.mouseUp = function () {
                        if (((this.graphic.y = this.startY), (this.graphiSpringLeft.scale.y = 1), (this.graphiSpringRight.scale.y = 1), this.tween.start(), Client.SoundManager.playSFX("spring"), 2 === this.counterWheels)) {
                            var hero = Client.GameManager.instance.hero;
                            (hero.bodyWheelBack.angularVelocity = 0),
                                (hero.bodyWheelBack.velocity.x = 0),
                                (hero.bodyWheelBack.velocity.y = 0),
                                (hero.bodyWheelFront.angularVelocity = 0),
                                (hero.bodyWheelFront.velocity.x = 0),
                                (hero.bodyWheelFront.velocity.y = 0),
                                (hero.bodyBase.angularVelocity = 0),
                                (hero.bodyBase.velocity.x = 0),
                                (hero.bodyBase.velocity.y = 0),
                                hero.bodyBase.data.SetPosition(new box2d.b2Vec2(this.body.data.GetPosition().x, this.body.data.GetPosition().y + 1.4)),
                                (hero.bodyWheelBack.y = hero.bodyBase.y + hero.wheelsOffY),
                                (hero.bodyWheelFront.y = hero.bodyBase.y + hero.wheelsOffY),
                                this.destroyJoint(),
                                (this.joint = Client.Main.instance.physics.box2d.wheelJoint(this.body, hero.bodyBase, 0, 0, 0, 0, 0, 1)),
                                (this.joint.m_collideConnected = !0),
                                hero.setKeepAngle(!1),
                                (hero.bodyBase.angularVelocity = 10.5 * hero.currDirection),
                                hero.bodyBase.data.ApplyLinearImpulse(new box2d.b2Vec2(0, 15), hero.bodyBase.data.GetPosition()),
                                (this.heroEngineState = hero.getEnableMotor()),
                                hero.setEnableMotor(!1, !1),
                                (this.m_currWallsTime = 0),
                                (this.m_active = !0),
                                (hero = null);
                        }
                    }),
                    (ChangeHeroDir.prototype.destroyJoint = function () {
                        null !== this.joint && (Client.Main.instance.physics.box2d.world.DestroyJoint(this.joint), (this.joint = null));
                    }),
                    (ChangeHeroDir.prototype.update = function () {
                        !1 !== this.m_active &&
                            ((this.m_currWallsTime += 1),
                            25 === this.m_currWallsTime
                                ? Client.GameManager.instance.hero.changeDirection()
                                : 60 === this.m_currWallsTime && (Client.GameManager.instance.hero.setKeepAngle(!0), this.destroyJoint(), Client.GameManager.instance.hero.setEnableMotor(this.heroEngineState, !1), (this.m_active = !1)));
                    }),
                    (ChangeHeroDir.prototype.onInputOut = function () {
                        (this.graphic.frameName = "changeDirTop instance 10000"), (this.graphiSpringLeft.frameName = "changeDirSpring instance 10000"), (this.graphiSpringRight.frameName = "changeDirSpring instance 10000");
                    }),
                    (ChangeHeroDir.prototype.onInputOver = function () {
                        (this.graphic.frameName = "changeDirTop instance 10001"), (this.graphiSpringLeft.frameName = "changeDirSpring instance 10001"), (this.graphiSpringRight.frameName = "changeDirSpring instance 10001");
                    }),
                    (ChangeHeroDir.prototype.free = function () {
                        (this.graphic = null), (this.graphiSpringLeft = null), (this.graphiSpringRight = null), (this.tween = null), (this.body = null), (this.joint = null);
                    }),
                    ChangeHeroDir
                );
            })(Client.BasicElement);
            Client.ChangeHeroDir = ChangeHeroDir;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var ClickStars = (function (_super) {
                function ClickStars(_game, _x, _y) {
                    var _this = _super.call(this) || this;
                    (_this.array = new Array()), (_this.game = _game);
                    for (var i = 0; i < 10; i++) {
                        var star = new Client.Star(_game, _x, _y);
                        _this.array.push(star);
                    }
                    return _this;
                }
                return (
                    __extends(ClickStars, _super),
                    (ClickStars.prototype.update = function () {
                        for (var i = 0; i < this.array.length; i++) this.array[i].update();
                    }),
                    ClickStars
                );
            })(Client.BasicElement);
            Client.ClickStars = ClickStars;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Finish = (function (_super) {
                function Finish(_game, _x, _y, _active, _root, _wheelyJoy) {
                    void 0 === _active && (_active = !0), void 0 === _root && (_root = Client.GameManager.instance.layerBackground), void 0 === _wheelyJoy && (_wheelyJoy = !0);
                    var _this = _super.call(this) || this;
                    return (
                        (_this.stop = !1),
                        (_this.wheelyJoy = !0),
                        (_this.finishTimer = 0),
                        (_this.active = !1),
                        (_this.oneTime = !1),
                        (_this.game = _game),
                        (_this.active = _active),
                        (_this.flag = _root.create(_x, _y - 22, "ui")),
                        _this.flag.animations.add("move", Phaser.Animation.generateFrameNames("flag instance 1", 0, 11, "", 4), 24, !0),
                        _this.flag.play("move"),
                        _this.game.physics.box2d.enable(_this.flag),
                        _this.flag.body.setRectangle(10, 80, 10, 22, 0),
                        (_this.flag.body.kinematic = !0),
                        (_this.flag.body.sensor = !0),
                        _this.flag.anchor.set(0.5, 0.5),
                        _this.flag.body.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, _this.checkFinish, _this),
                        (_this.flagShtok = _this.game.make.sprite(8, -18, "ui", "flagShtok instance 10000")),
                        _this.flag.addChild(_this.flagShtok),
                        (_this.wheelyJoy = _wheelyJoy),
                        _this
                    );
                }
                return (
                    __extends(Finish, _super),
                    (Finish.prototype.setContactHero = function () {
                        Client.GameManager.instance.hero.bodyBase.setBodyContactCallback(this.flag.body, this.checkFinish, this);
                    }),
                    (Finish.prototype.checkFinish = function (body1, body2, fixture1, fixture2, begin) {
                        begin && !0 !== this.stop && !1 !== this.active && ((this.stop = !0), this.contacted());
                    }),
                    (Finish.prototype.update = function () {
                        !0 === this.stop && ((this.finishTimer += 1), 60 === this.finishTimer && Client.LevelBuilder.instance.levelComplete()),
                            !0 === this.active &&
                                !1 === this.stop &&
                                Client.Tools.distance(this.flag.body.x, this.flag.body.y, Client.GameManager.instance.hero.bodyBase.x, Client.GameManager.instance.hero.bodyBase.y) <= 40 &&
                                (!0 === this.wheelyJoy && this.contacted(), (this.stop = !0));
                    }),
                    (Finish.prototype.contacted = function () {
                        !0 !== this.oneTime && ((this.oneTime = !0), (Client.GameManager.instance.finishPassed = !0), (Client.GameManager.instance.hero.currState = Client.HeroState.finish));
                    }),
                    Finish
                );
            })(Client.BasicElement);
            Client.Finish = Finish;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var AHeroPhysics = (function () {
                function AHeroPhysics(game, _x, _y) {
                    var fixture;
                    (this.wheelsOffY = 32),
                        (this.wheelsOffX = 31),
                        (this.motorTorque = 4),
                        (this.m_wheelsFriction = 1),
                        (this.onGround = !0),
                        (this.backWheelOnGround = 0),
                        (this.frontWheelOnGround = 0),
                        (this.game = game),
                        (this.bodyBase = new Phaser.Physics.Box2D.Body(game, null, _x, _y)),
                        ((fixture = this.bodyBase.setRectangle(102, 24, 0, 10)).m_filter.categoryBits = Client.FilterGroups.CAR2),
                        fixture.SetUserData("heroBaseBody"),
                        ((fixture = this.bodyBase.addCircle(12, 50, 10)).m_filter.categoryBits = Client.FilterGroups.CAR2),
                        ((fixture = this.bodyBase.addCircle(12, -50, 10)).m_filter.categoryBits = Client.FilterGroups.CAR2),
                        ((fixture = this.bodyBase.addPolygon([-50, -2, -40, -22, 40, -22, 50, -2])).m_filter.categoryBits = Client.FilterGroups.CAR1),
                        this.bodyBase.data.SetUserData("heroCorpus"),
                        (this.bodyBase.friction = 0),
                        (this.bodyBase.mass = 2.2),
                        (this.bodyWheelBack = new Phaser.Physics.Box2D.Body(game, null, _x - this.wheelsOffX, _y + this.wheelsOffY)),
                        ((fixture = this.bodyWheelBack.setCircle(16)).m_filter.categoryBits = Client.FilterGroups.CAR2),
                        (fixture.m_filter.maskBits = ~Client.FilterGroups.CAR1),
                        (fixture.m_restitution = 0),
                        (this.bodyWheelBack.friction = this.m_wheelsFriction),
                        this.bodyWheelBack.data.GetFixtureList().SetDensity(1),
                        (this.bodyWheelBack.bullet = !0),
                        this.bodyWheelBack.setCategoryContactCallback(1, this.backWheelContact, this),
                        (this.bodyWheelFront = new Phaser.Physics.Box2D.Body(game, null, _x + this.wheelsOffX, _y + this.wheelsOffY)),
                        ((fixture = this.bodyWheelFront.setCircle(16)).m_filter.categoryBits = Client.FilterGroups.CAR2),
                        (fixture.m_filter.maskBits = ~Client.FilterGroups.CAR1),
                        (fixture.m_restitution = 0),
                        (this.bodyWheelFront.friction = this.m_wheelsFriction),
                        this.bodyWheelFront.data.GetFixtureList().SetDensity(1),
                        (this.bodyWheelFront.bullet = !0),
                        this.bodyWheelFront.setCategoryContactCallback(1, this.frontWheelContact, this),
                        (fixture = null);
                    (this.jointBack = game.physics.box2d.wheelJoint(this.bodyBase, this.bodyWheelBack, -this.wheelsOffX, this.wheelsOffY, 0, 0, 0, 1, 5, 0.3, 0, this.motorTorque, !0)),
                        (this.jointFront = game.physics.box2d.wheelJoint(this.bodyBase, this.bodyWheelFront, this.wheelsOffX, this.wheelsOffY, 0, 0, 0, 1, 5, 0.3, 0, this.motorTorque, !1));
                }
                return (
                    (AHeroPhysics.prototype.backWheelContact = function (b1, b2, f1, f2, begin) {
                        b1 !== b2 && !0 !== b1.sensor && !0 !== b2.sensor && (!0 === begin ? (this.backWheelOnGround += 1) : ((this.backWheelOnGround -= 1), this.backWheelOnGround < 0 && (this.backWheelOnGround = 0)), this.checkOnGround());
                    }),
                    (AHeroPhysics.prototype.frontWheelContact = function (b1, b2, f1, f2, begin) {
                        b1 !== b2 && (!0 === begin ? (this.frontWheelOnGround += 1) : ((this.frontWheelOnGround -= 1), this.frontWheelOnGround < 0 && (this.frontWheelOnGround = 0)), this.checkOnGround());
                    }),
                    (AHeroPhysics.prototype.checkOnGround = function () {}),
                    (AHeroPhysics.prototype.free = function () {
                        (this.bodyBase = null), (this.bodyWheelBack = null), (this.bodyWheelFront = null), (this.jointBack = null), (this.jointFront = null), (this.game = null);
                    }),
                    AHeroPhysics
                );
            })();
            Client.AHeroPhysics = AHeroPhysics;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var HeroState, EyesState;
            !(function (HeroState) {
                (HeroState[(HeroState.stand = 0)] = "stand"),
                    (HeroState[(HeroState.acceleration = 1)] = "acceleration"),
                    (HeroState[(HeroState.brake = 2)] = "brake"),
                    (HeroState[(HeroState.bumpFront = 3)] = "bumpFront"),
                    (HeroState[(HeroState.bumpBack = 4)] = "bumpBack"),
                    (HeroState[(HeroState.bumpHead = 5)] = "bumpHead"),
                    (HeroState[(HeroState.bumpStars = 6)] = "bumpStars"),
                    (HeroState[(HeroState.finish = 7)] = "finish");
            })((HeroState = Client.HeroState || (Client.HeroState = {}))),
                (function (EyesState) {
                    (EyesState[(EyesState.stand = 0)] = "stand"),
                        (EyesState[(EyesState.lookUp = 1)] = "lookUp"),
                        (EyesState[(EyesState.lookDown = 2)] = "lookDown"),
                        (EyesState[(EyesState.bump = 3)] = "bump"),
                        (EyesState[(EyesState.bumpForEver = 4)] = "bumpForEver"),
                        (EyesState[(EyesState.big = 5)] = "big"),
                        (EyesState[(EyesState.finish = 6)] = "finish"),
                        (EyesState[(EyesState.lookForward = 7)] = "lookForward"),
                        (EyesState[(EyesState.idle = 8)] = "idle"),
                        (EyesState[(EyesState.turn = 9)] = "turn"),
                        (EyesState[(EyesState.afraid = 10)] = "afraid"),
                        (EyesState[(EyesState.tense = 11)] = "tense"),
                        (EyesState[(EyesState.afraidTime = 12)] = "afraidTime");
                })((EyesState = Client.EyesState || (Client.EyesState = {})));
            var BHeroGraphic = (function (_super) {
                function BHeroGraphic(game, _x, _y) {
                    var _this = _super.call(this, game, _x, _y) || this;
                    return (
                        (_this.soundWinPLaying = !1),
                        (_this._currDirection = 0),
                        (_this.stopStates = !1),
                        (_this.backLightActive = !1),
                        (_this.totalBackLight = 30),
                        (_this.startEyes = !1),
                        (_this.bumpHeadActive = !1),
                        (_this.bumpHeadCoun = 0),
                        (_this.bumpHeadTotal = 60),
                        (_this.afraidDuration = 30),
                        (_this.blackForWheels = Client.GameManager.instance.layerElements.create(0, 0, "wheely", "blackForWeels2 instance 10000")),
                        _this.blackForWheels.anchor.setTo(0, 0.09),
                        (_this.wheelBack = Client.GameManager.instance.layerElements.create(0, 0, "wheely", "car_weel instance 10000")),
                        _this.wheelBack.anchor.setTo(0.5),
                        (_this.wheelFront = Client.GameManager.instance.layerElements.create(0, 0, "wheely", "car_weel instance 10000")),
                        _this.wheelFront.anchor.setTo(0.5),
                        (_this.baseGroup = game.make.group()),
                        Client.GameManager.instance.layerElements.add(_this.baseGroup),
                        (_this.graphicStartSmoke = _this.baseGroup.create(-58, 27, "wheely", "startSmoke instance 10000")),
                        _this.graphicStartSmoke.anchor.setTo(1, 0.5),
                        _this.graphicStartSmoke.animations.add("start", Phaser.Animation.generateFrameNames("startSmoke instance 1", 0, 20, "", 4), 30),
                        (_this.graphicStartSmoke.visible = !1),
                        _this.graphicStartSmoke.animations.currentAnim.onComplete.addOnce(_this.hideStartSmoke, _this),
                        (_this.carFrameOut = "car instance 10000"),
                        (_this.carFrameOver = "car instance 10001"),
                        (_this.graphicCar = new Client.SkewSprite(game, -67, 30, "wheely", _this.carFrameOut)),
                        _this.graphicCar.pivot.set(0, 66),
                        _this.baseGroup.add(_this.graphicCar),
                        (_this.clickGraphics = _this.game.make.graphics(0, 0)),
                        _this.clickGraphics.beginFill(16711680, 0),
                        _this.clickGraphics.drawRect(-65, -32, 130, 64),
                        _this.clickGraphics.endFill(),
                        _this.baseGroup.addChild(_this.clickGraphics),
                        (_this.clickGraphics.inputEnabled = !0),
                        (_this.clickGraphics.input.useHandCursor = !0),
                        _this.clickGraphics.events.onInputOver.add(_this.onInputOverHandler, _this),
                        _this.clickGraphics.events.onInputOut.add(_this.onInputOutHandler, _this),
                        (_this.graphicBumpHead1 = _this.baseGroup.create(-50, -55, "wheely")),
                        _this.graphicBumpHead1.animations.add("bumpHead", Phaser.Animation.generateFrameNames("bumpHead instance 1", 0, 26, "", 4), 30, !0),
                        (_this.graphicBumpHead1.visible = !1),
                        (_this.graphicBumpHead2 = _this.baseGroup.create(50, -55, "wheely")),
                        _this.graphicBumpHead2.animations.add("bumpHead", Phaser.Animation.generateFrameNames("bumpHead instance 1", 0, 26, "", 4), 30, !0),
                        (_this.graphicBumpHead2.scale.x = -1),
                        (_this.graphicBumpHead2.visible = !1),
                        (_this.graphicBackLight = game.make.sprite(-2, 32, "wheely", "backLight instance 10000")),
                        _this.graphicCar.addChild(_this.graphicBackLight),
                        (_this.graphicEyes = game.make.sprite(82, -10, "wheely")),
                        _this.graphicEyes.animations.add("stand", Phaser.Animation.generateFrameNames("eyes instance 1", 0, 0, "", 4)),
                        _this.graphicEyes.animations.add("finish", Phaser.Animation.generateFrameNames("eyes instance 1", 1, 1, "", 4)),
                        _this.graphicEyes.animations.add("bump", Phaser.Animation.generateFrameNames("eyes instance 1", 2, 2, "", 4)),
                        _this.graphicEyes.animations.add("lookDown", Phaser.Animation.generateFrameNames("eyes instance 1", 3, 3, "", 4)),
                        _this.graphicEyes.animations.add("lookUp", Phaser.Animation.generateFrameNames("eyes instance 1", 4, 4, "", 4)),
                        _this.graphicEyes.animations.add("idle1", Phaser.Animation.generateFrameNames("eyes instance 1", 5, 177, "", 4), 30),
                        _this.graphicEyes.animations.add("idle2", Phaser.Animation.generateFrameNames("eyes instance 1", 178, 273, "", 4), 30),
                        _this.graphicEyes.animations.add("idle3", Phaser.Animation.generateFrameNames("eyes instance 1", 274, 324, "", 4), 30),
                        _this.graphicEyes.animations.add("idle4", Phaser.Animation.generateFrameNames("eyes instance 1", 325, 333, "", 4), 30),
                        _this.graphicEyes.animations.add("big", Phaser.Animation.generateFrameNames("eyes instance 1", 334, 334, "", 4)),
                        _this.graphicEyes.animations.add("turn", Phaser.Animation.generateFrameNames("eyes instance 1", 335, 393, "", 4), 24),
                        _this.graphicEyes.animations.add("afraid", Phaser.Animation.generateFrameNames("eyes instance 1", 394, 400, "", 4), 24, !0),
                        _this.graphicEyes.animations.add("tense", Phaser.Animation.generateFrameNames("eyes instance 1", 402, 402, "", 4), 24, !1),
                        _this.graphicEyes.events.onAnimationComplete.add(_this.onAnimationComplete, _this),
                        _this.graphicCar.addChild(_this.graphicEyes),
                        (_this.gas = new Client.ExhaustGas(Client.GameManager.instance.layerElements, 3)),
                        _this
                    );
                }
                return (
                    __extends(BHeroGraphic, _super),
                    (BHeroGraphic.prototype.checkOnGround = function () {
                        0 < this.backWheelOnGround && 0 < this.frontWheelOnGround ? (this.onGround = !0) : (this.onGround = !1);
                    }),
                    (BHeroGraphic.prototype.onInputOverHandler = function () {
                        this.graphicCar.frameName = this.carFrameOver;
                    }),
                    (BHeroGraphic.prototype.onInputOutHandler = function () {
                        this.graphicCar.frameName = this.carFrameOut;
                    }),
                    (BHeroGraphic.prototype.setChildPos = function (heroAnchorX) {
                        (this.graphicCar.pivot.x = this.graphicCar.width * heroAnchorX),
                            (this.graphicCar.x = this.graphicCar.pivot.x - 64),
                            (this.blackForWheels.anchor.x = heroAnchorX),
                            (this.blackForWheels.pivot.x = -this.blackForWheels.width * (heroAnchorX - 0.5));
                    }),
                    (BHeroGraphic.prototype.goAnimation = function (anim) {
                        !0 !== this.stopStates &&
                            (Client.Main.instance.tweens.removeFrom(this.graphicCar, !1),
                            this.graphicCar.scale.setTo(1),
                            (this.graphicCar.skewX = 0),
                            anim === HeroState.stand
                                ? (this.setChildPos(0.5), (this.currEyesState = EyesState.stand))
                                : anim === HeroState.finish
                                ? ((this.soundWinPLaying = !0),
                                  Client.SoundManager.playSFX("levelWin"),
                                  this.setChildPos(0.5),
                                  this.setClickable(!1),
                                  (this.currEyesState = EyesState.finish),
                                  this.game.add.tween(this.graphicCar).to({ skewX: [-0.2, 0, 0.2, 0], scaleY: [1.2, 1, 1.2, 1] }, 900, Phaser.Easing.Linear.None, !0, 0, -1))
                                : anim === HeroState.bumpFront
                                ? (this.setChildPos(0),
                                  (this.currEyesState = EyesState.big),
                                  Client.Main.instance.add.tween(this.blackForWheels.scale).to({ x: [0.9, 1] }, 1e3, Phaser.Easing.Linear.None, !0),
                                  Client.Main.instance.add
                                      .tween(this.graphicCar)
                                      .to({ scaleX: 0.9, scaleY: 1.1 }, 500, Phaser.Easing.Linear.None, !0)
                                      .chain(Client.Main.instance.add.tween(this.graphicCar).to({ scaleX: 1, scaleY: 1 }, 500, Phaser.Easing.Linear.None)))
                                : anim === HeroState.bumpBack
                                ? (this.setChildPos(1),
                                  (this.currEyesState = EyesState.big),
                                  Client.Main.instance.add.tween(this.blackForWheels.scale).to({ x: [0.9, 1] }, 1e3, Phaser.Easing.Linear.None, !0),
                                  Client.Main.instance.add
                                      .tween(this.graphicCar)
                                      .to({ scaleX: 0.9, scaleY: 1.1 }, 500, Phaser.Easing.Linear.None, !0)
                                      .chain(Client.Main.instance.add.tween(this.graphicCar).to({ scaleX: 1, scaleY: 1 }, 500, Phaser.Easing.Linear.None)))
                                : anim === HeroState.bumpHead
                                ? (this.setChildPos(0.5),
                                  (this.currEyesState = EyesState.big),
                                  Client.Main.instance.add
                                      .tween(this.graphicCar)
                                      .to({ scaleX: 1.1, scaleY: 0.85 }, 300, Phaser.Easing.Linear.None, !0)
                                      .chain(Client.Main.instance.add.tween(this.graphicCar).to({ scaleX: 1, scaleY: 1 }, 500, Phaser.Easing.Linear.None)),
                                  (this.graphicBumpHead1.visible = !0),
                                  this.graphicBumpHead1.animations.play("bumpHead"),
                                  (this.graphicBumpHead2.visible = !0),
                                  this.graphicBumpHead2.animations.play("bumpHead"),
                                  (this.bumpHeadActive = !0),
                                  (this.bumpHeadCoun = 0))
                                : anim === HeroState.bumpStars
                                ? (this.setChildPos(0.5),
                                  (this.graphicBumpHead1.visible = !0),
                                  this.graphicBumpHead1.animations.play("bumpHead"),
                                  (this.graphicBumpHead2.visible = !0),
                                  this.graphicBumpHead2.animations.play("bumpHead"),
                                  (this.currEyesState = EyesState.bumpForEver),
                                  this.setClickable(!1),
                                  (this.stopStates = !0))
                                : anim === HeroState.acceleration
                                ? (this.setChildPos(0.5),
                                  Client.Main.instance.add
                                      .tween(this.graphicCar)
                                      .to({ skewX: -0.2 }, 100, Phaser.Easing.Linear.None, !0)
                                      .chain(Client.Main.instance.add.tween(this.graphicCar).to({ skewX: 0 }, 300, Phaser.Easing.Linear.None)),
                                  (this.currEyesState = EyesState.lookForward),
                                  null !== this.graphicStartSmoke && ((this.graphicStartSmoke.visible = !0), this.graphicStartSmoke.animations.play("start")))
                                : anim === HeroState.brake &&
                                  (this.setChildPos(0.5),
                                  Client.Main.instance.add
                                      .tween(this.graphicCar)
                                      .to({ skewX: 0.2 }, 100, Phaser.Easing.Linear.None, !0)
                                      .chain(Client.Main.instance.add.tween(this.graphicCar).to({ skewX: 0 }, 300, Phaser.Easing.Linear.None)),
                                  (this.currEyesState = EyesState.stand),
                                  (this.countBackLight = 0),
                                  (this.backLightActive = !0),
                                  (this.graphicBackLight.frameName = "backLight instance 10001")));
                    }),
                    (BHeroGraphic.prototype.update = function () {
                        (this.baseGroup.x = this.bodyBase.x),
                            (this.baseGroup.y = this.bodyBase.y),
                            (this.baseGroup.rotation = this.bodyBase.rotation),
                            (this.blackForWheels.x = this.baseGroup.x),
                            (this.blackForWheels.y = this.baseGroup.y),
                            (this.blackForWheels.rotation = this.baseGroup.rotation),
                            (this.wheelBack.x = this.bodyWheelBack.x),
                            (this.wheelBack.y = this.bodyWheelBack.y),
                            (this.wheelBack.rotation = this.bodyWheelBack.rotation),
                            (this.wheelFront.x = this.bodyWheelFront.x),
                            (this.wheelFront.y = this.bodyWheelFront.y),
                            (this.wheelFront.rotation = this.bodyWheelFront.rotation),
                            !0 === this.startEyes &&
                                ((this.countEyes += 1),
                                this.countEyes >= this.totalEyes &&
                                    ((this.startEyes = !1),
                                    this._currEyesState === EyesState.stand
                                        ? (this.currEyesState = EyesState.idle)
                                        : this._currEyesState === EyesState.bump
                                        ? (this.currEyesState = EyesState.stand)
                                        : this._currEyesState === EyesState.big
                                        ? (this.currEyesState = EyesState.bump)
                                        : this._currEyesState === EyesState.afraidTime && (this.currEyesState = EyesState.idle))),
                            !0 === this.backLightActive && ((this.countBackLight += 1), this.countBackLight >= this.totalBackLight && ((this.backLightActive = !1), (this.graphicBackLight.frameName = "backLight instance 10000"))),
                            !0 === this.bumpHeadActive &&
                                ((this.bumpHeadCoun += 1),
                                this.bumpHeadCoun >= this.bumpHeadTotal &&
                                    ((this.bumpHeadActive = !1),
                                    this.graphicBumpHead1.animations.stop("bumpHead", !0),
                                    this.graphicBumpHead2.animations.stop("bumpHead", !0),
                                    (this.graphicBumpHead1.visible = !1),
                                    (this.graphicBumpHead2.visible = !1)));
                    }),
                    (BHeroGraphic.prototype.hideStartSmoke = function () {
                        (this.graphicStartSmoke.visible = !1), this.graphicStartSmoke.destroy(), (this.graphicStartSmoke = null);
                    }),
                    (BHeroGraphic.prototype.onAnimationComplete = function () {
                        (this._currEyesState !== EyesState.idle && this._currEyesState !== EyesState.turn) || (this.currEyesState = EyesState.stand);
                    }),
                    Object.defineProperty(BHeroGraphic.prototype, "currEyesState", {
                        get: function () {
                            return this._currEyesState;
                        },
                        set: function (value) {
                            if (!0 !== this.stopStates) {
                                if (this._currEyesState === EyesState.idle) {
                                    if (value === EyesState.lookDown || value === EyesState.lookUp) return;
                                } else if (this._currEyesState === EyesState.bumpForEver) return;
                                value !== this._currEyesState &&
                                    ((this._currEyesState = value),
                                    (this.countEyes = 0),
                                    (this.startEyes = !1),
                                    value === EyesState.stand
                                        ? (this.graphicEyes.animations.play("stand"), (this.totalEyes = Client.Tools.random(100, 200)), (this.startEyes = !0))
                                        : value === EyesState.idle
                                        ? this.graphicEyes.animations.play("idle" + Client.Tools.random(1, 4))
                                        : value === EyesState.finish
                                        ? this.graphicEyes.animations.play("finish")
                                        : value === EyesState.lookDown
                                        ? this.graphicEyes.animations.play("lookDown")
                                        : value === EyesState.lookUp
                                        ? this.graphicEyes.animations.play("lookUp")
                                        : value === EyesState.lookForward
                                        ? this.graphicEyes.animations.play("stand")
                                        : value === EyesState.bump
                                        ? (this.graphicEyes.animations.play("bump"), (this.totalEyes = 30), (this.startEyes = !0))
                                        : value === EyesState.bumpForEver
                                        ? this.graphicEyes.animations.play("bump")
                                        : value === EyesState.big
                                        ? (this.graphicEyes.animations.play("big"), (this.totalEyes = 20), (this.startEyes = !0))
                                        : value === EyesState.turn
                                        ? this.graphicEyes.animations.play("turn")
                                        : value === EyesState.afraid
                                        ? this.graphicEyes.animations.play("afraid")
                                        : value === EyesState.afraidTime
                                        ? (this.graphicEyes.animations.play("afraid"), (this.totalEyes = this.afraidDuration), (this.startEyes = !0))
                                        : value === EyesState.tense && this.graphicEyes.animations.play("tense"));
                            }
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    (BHeroGraphic.prototype.setClickable = function (value) {}),
                    (BHeroGraphic.prototype.free = function () {
                        _super.prototype.free.call(this),
                            (this._currEyesState = null),
                            (this.baseGroup = null),
                            (this.graphicCar = null),
                            (this.graphicEyes = null),
                            (this.graphicBumpHead1 = null),
                            (this.graphicBumpHead2 = null),
                            (this.graphicShok = null),
                            (this.wheelBack = null),
                            (this.wheelFront = null),
                            (this.blackForWheels = null),
                            (this.graphicStartSmoke = null),
                            (this.graphicBackLight = null),
                            this.gas.free(),
                            (this.gas = null),
                            (this.clickGraphics = null);
                    }),
                    BHeroGraphic
                );
            })(Client.AHeroPhysics);
            Client.BHeroGraphic = BHeroGraphic;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var BrokeHero = (function (_super) {
                function BrokeHero(game, _x, _y, colledeConnected) {
                    void 0 === colledeConnected && (colledeConnected = !0);
                    var temp,
                        _this = _super.call(this) || this;
                    _this.parts = new Array();
                    for (var i = 1; i < 9; i++)
                        (temp = Client.GameManager.instance.layerElements.create(_x, _y, "wheely", "car_BPart" + i + " instance 10000")),
                            game.physics.box2d.enable(temp),
                            (temp.body.velocity.x = Client.Tools.random(-500, 500)),
                            (temp.body.velocity.y = Client.Tools.random(-500, 500)),
                            (temp.body.angularVelocity = Client.Tools.random(-20, 20)),
                            !1 === colledeConnected && (temp.body.setCollisionCategory(Client.FilterGroups.CAR1), temp.body.setCollisionMask(~Client.FilterGroups.CAR1));
                    return (
                        (temp = Client.GameManager.instance.layerElements.create(_x, _y, "wheely", "eyes instance 10335")),
                        game.physics.box2d.enable(temp),
                        (temp.body.velocity.x = Client.Tools.random(-500, 500)),
                        (temp.body.velocity.y = Client.Tools.random(-500, 500)),
                        (temp.body.angularVelocity = Client.Tools.random(-20, 20)),
                        !1 === colledeConnected && (temp.body.setCollisionCategory(Client.FilterGroups.CAR1), temp.body.setCollisionMask(~Client.FilterGroups.CAR1)),
                        (temp = null),
                        _this
                    );
                }
                return (
                    __extends(BrokeHero, _super),
                    (BrokeHero.prototype.free = function () {
                        (this.parts = []), (this.parts = null);
                    }),
                    BrokeHero
                );
            })(Client.BasicElement);
            Client.BrokeHero = BrokeHero;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var ExhaustGas = (function () {
                function ExhaustGas(_parent, _timeCreate) {
                    (this.counterCreate = 0), (this.parentGroup = _parent), (this.timeCreate = _timeCreate), (this.gas = new Array());
                }
                return (
                    (ExhaustGas.prototype.updateCreation = function (x, y) {
                        if (((this.counterCreate += 1), !(this.counterCreate < this.timeCreate))) {
                            for (var i = (this.counterCreate = 0); i < this.gas.length; i++) if (!1 === this.gas[i].visible) return void this.gas[i].start(x, y, Client.Tools.random(2, 10) / 10);
                            var tempGas = new GasPart(x, y, "wheely", "exhaustgas instance 10000");
                            tempGas.start(x, y, Client.Tools.random(2, 10) / 10), this.parentGroup.addChild(tempGas), this.gas.push(tempGas), (tempGas = null);
                        }
                    }),
                    (ExhaustGas.prototype.free = function () {
                        (this.gas = []), (this.gas = null);
                    }),
                    ExhaustGas
                );
            })();
            Client.ExhaustGas = ExhaustGas;
            var GasPart = (function (_super) {
                function GasPart(x, y, key, frame) {
                    var _this = _super.call(this, Client.Main.instance, x, y, key, frame) || this;
                    return (_this.counter = 0), _this.anchor.setTo(0.5), _this;
                }
                return (
                    __extends(GasPart, _super),
                    (GasPart.prototype.start = function (_x, _y, _scale) {
                        this.position.setTo(_x, _y), this.scale.setTo(_scale), (this.visible = !0);
                    }),
                    (GasPart.prototype.update = function () {
                        !1 !== this.visible &&
                            ((this.counter += 1),
                            0 < this.counter && this.counter <= 7
                                ? ((this.x -= 0.25), (this.y -= 0.375), (this.scale.x += 0.0375), (this.scale.y = this.scale.x))
                                : 8 < this.counter && this.counter <= 14
                                ? ((this.x -= 0.375), (this.y -= 0.9), (this.scale.x -= 0.0875), (this.scale.y = this.scale.x))
                                : 15 === this.counter && ((this.counter = 0), (this.visible = !1)));
                    }),
                    GasPart
                );
            })(Phaser.Sprite);
            Client.GasPart = GasPart;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Hero = (function (_super) {
                function Hero(game, _x, _y, _direction) {
                    void 0 === _direction && (_direction = 1);
                    var _this = _super.call(this, game, _x, _y) || this;
                    return (
                        (_this.m_keepAngle = !0),
                        (_this.freeRotateAvaliable = !1),
                        (_this.maxMotorSpeed = 5),
                        (_this.m_motorSpeed = 0),
                        (_this.m_boostOn = !1),
                        (_this.m_boostAngularDamping = 0),
                        (_this.m_countBoost = 0),
                        (_this.m_boostWheelsFriction = 4),
                        (_this.m_On = !1),
                        (_this.animationEnable = !0),
                        (_this.counterFinish = 0),
                        (_this.stopUpdateMoving = !1),
                        (_this.activeClick = !0),
                        (_this._clicable = !0),
                        (_this.angleKeep = Client.Tools.toRad(45)),
                        (_this.currState = Client.HeroState.stand),
                        (_this.currDirection = _direction),
                        _this.clickGraphics.events.onInputUp.add(_this.onInputUpHandler, _this),
                        _this
                    );
                }
                return (
                    __extends(Hero, _super),
                    Object.defineProperty(Hero.prototype, "motorSpeed", {
                        get: function () {
                            return this.m_motorSpeed;
                        },
                        set: function (value) {
                            this.m_motorSpeed = value * this.currDirection;
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    Object.defineProperty(Hero.prototype, "currDirection", {
                        get: function () {
                            return this._currDirection;
                        },
                        set: function (value) {
                            value !== this._currDirection &&
                                ((this._currDirection = value),
                                1 === this._currDirection ? ((this.currDriveWheel = this.jointBack), (this.currBoostWheel = this.jointFront)) : ((this.currDriveWheel = this.jointFront), (this.currBoostWheel = this.jointBack)),
                                (this.baseGroup.scale.x = this._currDirection),
                                this.currDriveWheel.EnableMotor(!0),
                                this.currBoostWheel.EnableMotor(!1),
                                (this.m_motorSpeed *= -1));
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    Object.defineProperty(Hero.prototype, "currState", {
                        get: function () {
                            return this._currState;
                        },
                        set: function (value) {
                            this._currState !== Client.HeroState.finish &&
                                value !== this._currState &&
                                ((this._currState = value), (!0 !== this.animationEnable && value !== Client.HeroState.finish && value !== Client.HeroState.bumpStars) || this.goAnimation(value), (this.animationEnable = !0));
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    (Hero.prototype.onInputUpHandler = function (sprite, pointer, isOver) {
                        !1 !== isOver && (Client.GameManager.instance.level.customAction(), !0 === this.activeClick && this.setEnableMotor(!this.m_On));
                    }),
                    (Hero.prototype.getEnableMotor = function () {
                        return this.m_On;
                    }),
                    (Hero.prototype.setEnableMotor = function (value, sound) {
                        void 0 === sound && (sound = !0),
                            (this.animationEnable = sound),
                            this.m_On !== value &&
                                (!1 === (this.m_On = value)
                                    ? (!0 === sound && Client.SoundManager.playSFX("whelly_stop"),
                                      !1 === this.freeRotateAvaliable ? ((this.bodyWheelBack.fixedRotation = !0), (this.bodyWheelFront.fixedRotation = !0)) : this.currDriveWheel.EnableMotor(!1),
                                      (this.motorSpeed = 0),
                                      (this.currState = Client.HeroState.brake),
                                      this.setWheelsFrictions(this.m_wheelsFriction))
                                    : (!0 === sound && Client.SoundManager.playSFX("whelly_start"),
                                      (this.bodyWheelBack.fixedRotation = !1),
                                      !(this.bodyWheelFront.fixedRotation = !1) === this.m_boostOn
                                          ? (this.currBoostWheel.EnableMotor(!0), (this.motorSpeed = this.m_boostSpeed), this.setWheelsFrictions(this.m_boostWheelsFriction))
                                          : ((this.motorSpeed = this.maxMotorSpeed), this.setWheelsFrictions(this.m_wheelsFriction)),
                                      (this.currState = Client.HeroState.acceleration)));
                    }),
                    (Hero.prototype.setWheelsFrictions = function (value) {
                        (this.bodyWheelBack.friction = value), (this.bodyWheelFront.friction = value);
                    }),
                    (Hero.prototype.setWheelsRotateAvailable = function (value) {
                        (this.freeRotateAvaliable = value),
                            this.currState !== Client.HeroState.acceleration &&
                                (!0 === value && (Client.GameManager.instance.hero.bodyWheelBack.fixedRotation = !value), this.currDriveWheel.EnableMotor(!value), (Client.GameManager.instance.hero.bodyWheelFront.fixedRotation = !value));
                    }),
                    (Hero.prototype.update = function () {
                        _super.prototype.update.call(this),
                            !1 === this.stopUpdateMoving && this.updateMoving(),
                            this.updateBoost(),
                            this.currState !== Client.HeroState.bumpHead &&
                                this.currEyesState !== Client.EyesState.turn &&
                                this.currState !== Client.HeroState.bumpStars &&
                                this.currEyesState !== Client.EyesState.afraid &&
                                this.currEyesState !== Client.EyesState.finish &&
                                (60 < this.bodyBase.velocity.y
                                    ? (this.currEyesState = Client.EyesState.lookDown)
                                    : this.bodyBase.velocity.y < -60
                                    ? (this.currEyesState = Client.EyesState.lookUp)
                                    : (this.currEyesState !== Client.EyesState.lookDown && this.currEyesState !== Client.EyesState.lookUp) ||
                                      (!0 === this.m_On && this.currEyesState !== Client.EyesState.lookForward
                                          ? (this.currEyesState = Client.EyesState.lookForward)
                                          : !1 === this.m_On && this.currEyesState !== Client.EyesState.stand && (this.currEyesState = Client.EyesState.stand))),
                            this.keepAngle();
                    }),
                    (Hero.prototype.updateMoving = function () {
                        if (this.currState === Client.HeroState.acceleration) {
                            !1 === this.freeRotateAvaliable && this.currDriveWheel.SetMotorSpeed(this.motorSpeed);
                            var newPoint = this.baseGroup.toGlobal(new PIXI.Point(5 * Math.random() - 67 - 5 * Math.random(), 23 + 5 * Math.random() - 5 * Math.random()));
                            this.gas.updateCreation(newPoint.x + Client.Main.instance.camera.x, newPoint.y + Client.Main.instance.camera.y);
                        }
                    }),
                    (Hero.prototype.updateBoost = function () {
                        !0 === this.m_boostOn &&
                            (this.currBoostWheel.SetMotorSpeed(this.motorSpeed),
                            (this.bodyBase.angularDamping = this.m_boostAngularDamping),
                            !0 === this.m_On &&
                                ((this.m_countBoost += 1),
                                this.m_countBoost >= this.m_totalCountBoost &&
                                    ((this.m_boostOn = !1),
                                    (this.bodyBase.angularDamping = 0),
                                    this.currBoostWheel.EnableMotor(!1),
                                    this.setWheelsFrictions(this.m_wheelsFriction),
                                    !0 === this.m_On && (this.motorSpeed = this.maxMotorSpeed))));
                    }),
                    (Hero.prototype.boost = function (speed, frames, angularDamping, friction) {
                        void 0 === angularDamping && (angularDamping = 0),
                            void 0 === friction && (friction = this.m_boostWheelsFriction),
                            (this.m_boostWheelsFriction = friction),
                            (this.m_countBoost = 0),
                            (this.m_totalCountBoost = frames),
                            (this.m_boostSpeed = speed),
                            !0 !== this.m_boostOn &&
                                ((this.m_boostAngularDamping = angularDamping),
                                (this.m_boostOn = !0) === this.m_On && ((this.motorSpeed = this.m_boostSpeed), this.currBoostWheel.EnableMotor(!0), this.setWheelsFrictions(this.m_boostWheelsFriction)));
                    }),
                    (Hero.prototype.dumping = function (dumping) {
                        void 0 === dumping && (dumping = 1), (this.bodyBase.velocity.x /= dumping), (this.bodyWheelBack.angularVelocity /= dumping), (this.bodyWheelFront.angularVelocity /= dumping);
                    }),
                    (Hero.prototype.setKeepAngle = function (value) {
                        this.m_keepAngle = value;
                    }),
                    (Hero.prototype.keepAngle = function () {
                        !1 !== this.m_keepAngle && (this.bodyBase.rotation > this.angleKeep ? (this.bodyBase.rotation = this.angleKeep) : this.bodyBase.rotation < -this.angleKeep && (this.bodyBase.rotation = -this.angleKeep));
                    }),
                    (Hero.prototype.setVisibility = function (value) {
                        (this.baseGroup.visible = value),
                            (this.blackForWheels.visible = value),
                            (this.wheelBack.visible = value),
                            (this.wheelFront.visible = value),
                            this.bodyBase.data.SetActive(value),
                            this.bodyWheelBack.data.SetActive(value),
                            this.bodyWheelFront.data.SetActive(value),
                            !0 === this._clicable && this.setClickable(value, !1);
                    }),
                    (Hero.prototype.setClickable = function (value, value2) {
                        void 0 === value2 && (value2 = !0),
                            !0 === value2 && (this._clicable = value),
                            (this.graphicCar.frameName = this.carFrameOut),
                            !0 === (this.clickGraphics.inputEnabled = value) && (this.clickGraphics.input.useHandCursor = value);
                    }),
                    (Hero.prototype.setCollideWorldBounds = function (value) {
                        (this.bodyBase.collideWorldBounds = value), (this.bodyWheelBack.collideWorldBounds = value), (this.bodyWheelFront.collideWorldBounds = value);
                    }),
                    (Hero.prototype.clearVelosityX = function () {
                        (this.bodyBase.velocity.x = 0), (this.bodyWheelBack.velocity.x = 0), (this.bodyWheelFront.velocity.x = 0), (this.bodyWheelBack.angularVelocity = 0), (this.bodyWheelFront.angularVelocity = 0);
                    }),
                    (Hero.prototype.setPosition = function (x, y) {
                        (this.bodyBase.x = x),
                            (this.bodyBase.y = y),
                            (this.bodyWheelBack.x = x - this.wheelsOffX),
                            (this.bodyWheelBack.y = y + this.wheelsOffY),
                            (this.bodyWheelFront.x = x + this.wheelsOffX),
                            (this.bodyWheelFront.y = y + this.wheelsOffY);
                    }),
                    (Hero.prototype.clearAllForces = function () {
                        this.bodyBase.setZeroVelocity(),
                            this.bodyWheelBack.setZeroVelocity(),
                            this.bodyWheelFront.setZeroVelocity(),
                            (this.bodyBase.angularVelocity = 0),
                            (this.bodyWheelBack.angularVelocity = 0),
                            (this.bodyWheelFront.angularVelocity = 0);
                    }),
                    (Hero.prototype.addShock = function () {
                        (this.graphicCar.visible = !1),
                            (this.graphicShok = this.baseGroup.create(0, 0, "wheely")),
                            this.graphicShok.animations.add("shock", Phaser.Animation.generateFrameNames("carBody_shock instance 1", 0, 5, "", 4), 5),
                            this.graphicShok.anchor.setTo(0.5),
                            this.graphicShok.events.onAnimationComplete.addOnce(this.addBurn, this),
                            Client.SoundManager.playSFX("eShock"),
                            this.graphicShok.animations.play("shock");
                    }),
                    (Hero.prototype.addLight = function () {
                        this.baseGroup.create(27, -28, "wheely", "light instance 10000");
                    }),
                    (Hero.prototype.addBurn = function () {
                        this.graphicShok && (this.graphicShok.destroy(), (this.graphicCar.visible = !0)), this.graphicCar.addChildAt(this.game.make.sprite(2, 4, "wheely", "burn2 instance 10000"), 0);
                    }),
                    (Hero.prototype.changeDirection = function (updateRotation) {
                        void 0 === updateRotation && (updateRotation = !0),
                            (this.currDirection *= -1),
                            (this.currEyesState = Client.EyesState.turn),
                            !0 === updateRotation && (this.bodyBase.rotation += Client.Tools.toRad(360) * this.currDirection);
                    }),
                    (Hero.prototype.setActiveBodies = function (value) {
                        this.bodyBase.data.SetActive(value), this.bodyWheelBack.data.SetActive(value), this.bodyWheelFront.data.SetActive(value);
                    }),
                    (Hero.prototype.setAwake = function () {
                        this.bodyBase.data.SetAwake(!0), this.bodyWheelBack.data.SetAwake(!0), this.bodyWheelFront.data.SetAwake(!0);
                    }),
                    (Hero.prototype.showBurn = function () {
                        var burnWheely = this.game.make.sprite(2, 4, "wheely", "burn2 instance 10000");
                        this.graphicCar.addChildAt(burnWheely, 0);
                    }),
                    (Hero.prototype.free = function () {
                        _super.prototype.free.call(this), (this._currState = null), (this.currDriveWheel = null), (this.currBoostWheel = null);
                    }),
                    Hero
                );
            })(Client.BHeroGraphic);
            Client.Hero = Hero;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Hint = (function (_super) {
                function Hint(game, level) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.arrow = Client.GameManager.instance.layerUpper.create(0, 0, "level" + level, "arrow instance 10000")),
                        _this.arrow.animations.add("anim", Phaser.Animation.generateFrameNames("arrow instance 1", 0, 8, "", 4), 30, !0),
                        (_this.arrow.angle = -36),
                        (_this.arrow.visible = !1),
                        (_this.punktirCircle = new Client.PunktirCircle(game, 0, 0, "level" + level, "punktir instance 10000")),
                        Client.GameManager.instance.layerUpper.addChild(_this.punktirCircle),
                        (_this.punktirCircle.visible = !1),
                        _this
                    );
                }
                return (
                    __extends(Hint, _super),
                    (Hint.prototype.show = function (x, y, scalePunktir) {
                        void 0 === scalePunktir && (scalePunktir = 1),
                            this.arrow.animations.play("anim"),
                            (this.arrow.visible = !0),
                            (this.punktirCircle.visible = !0),
                            this.punktirCircle.scale.setTo(scalePunktir),
                            (this.punktirCircle.x = x - 2),
                            (this.punktirCircle.y = y - 2),
                            (this.arrow.x = x + 22),
                            (this.arrow.y = y - 45);
                    }),
                    (Hint.prototype.hide = function () {
                        (this.punktirCircle.visible = !1), (this.arrow.visible = !1), this.arrow.animations.stop();
                    }),
                    (Hint.prototype.free = function () {
                        (this.arrow = null), (this.punktirCircle = null);
                    }),
                    Hint
                );
            })(Client.BasicElement);
            Client.Hint = Hint;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl1Car = (function (_super) {
                function Lvl1Car(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = 564),
                        (_this.group.y = 466),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.part5 = new Client.SASprite(game, 0, 0, "level1", "carBody instance 10000")),
                        _this.part5.pivot.set(81, 63),
                        _this.group.addChild(_this.part5),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "level1", "carEyes instance 10000")),
                        _this.part4.pivot.set(3, 4),
                        _this.part4.animations.add("anim", Phaser.Animation.generateFrameNames("carEyes instance 1", 0, 136, "", 4), 30, !0),
                        _this.part4.animations.play("anim"),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level1", "carWheel instance 10000")),
                        _this.part3.pivot.set(21, 21),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level1", "carWheel instance 10000")),
                        _this.part2.pivot.set(21, 21),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.Lvl1CarThink(game)),
                        _this.group.addChild(_this.part1.group),
                        _this.playAnim("anim", -1),
                        _this
                    );
                }
                return (
                    __extends(Lvl1Car, _super),
                    (Lvl1Car.prototype.showArrow = function () {
                        this.part1.playArrow(), Client.SoundManager.playSFX("s_lvl1_guardHelp");
                    }),
                    (Lvl1Car.prototype.update = function () {
                        _super.prototype.update.call(this), this.part1.update();
                    }),
                    (Lvl1Car.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? (this.startTween(this.part1.group, 30, { x: -77, y: -132, scX: 1.06, scY: 1.06 }), this.startTween(this.part4, 44, { y: -33 }), this.startTween(this.part5, 44, { y: 5, skX: -1, skY: -1 }))
                                : 31 === this.counterAnim
                                ? this.startTween(this.part1.group, 46, { x: -75, y: -128, scX: 1, scY: 1 })
                                : 45 === this.counterAnim
                                ? (this.startTween(this.part4, 44, { y: -37 }), this.startTween(this.part5, 44, { y: 2, skX: 0, skY: 0 }))
                                : 89 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl1Car.prototype.setParts = function (value) {
                        "anim" === value &&
                            (this.setPart(this.part1.group, { x: -75, y: -128, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part2, { x: 38, y: 37, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part3, { x: -36, y: 37, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part4, { x: -28, y: -37, angle: 0, scX: 1, scY: 1, skX: 0, skY: 180, alpha: 1 }),
                            this.setPart(this.part5, { x: 3, y: 2, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl1Car.prototype.startTween = function (part, duration, properties, smartRotation) {
                        void 0 === smartRotation && (smartRotation = !1), Client.SimpleTweenManager.set(part, duration, properties, smartRotation, !1);
                    }),
                    (Lvl1Car.prototype.setPart = function (part, properties, smartRotation) {
                        if ((void 0 === smartRotation && (smartRotation = !1), part)) {
                            for (var _i = 0, _a = Object.keys(properties); _i < _a.length; _i++) {
                                var itemName = _a[_i];
                                if (!0 !== smartRotation || ("angle" !== properties[itemName] && "skX" !== properties[itemName] && "skY" !== properties[itemName])) part[itemName] = properties[itemName];
                                else {
                                    var rotation = properties[itemName] % 360;
                                    180 < rotation ? (rotation -= 360) : rotation < -180 && (rotation += 360), (part[itemName] = rotation);
                                }
                            }
                            Client.SimpleTweenManager.stop(part);
                        }
                    }),
                    (Lvl1Car.prototype.free = function () {
                        (this.group = null), (this.part5 = null), (this.part4 = null), (this.part3 = null), (this.part2 = null), this.part1.free(), (this.part1 = null);
                    }),
                    Lvl1Car
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl1Car = Lvl1Car;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl1CarThink = (function (_super) {
                function Lvl1CarThink(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.counter = 0),
                        (_this.group = new Client.SAGroup(game, 0, 0)),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "level1", "bubble instance 10000")),
                        _this.part4.pivot.set(1, 1),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level1", "hamburger instance 10000")),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level1", "arrowUp instance 10000")),
                        _this.part2.pivot.set(0, 3),
                        _this.part2.animations.add("anim", Phaser.Animation.generateFrameNames("arrowUp instance 1", 0, 17, "", 4), 30, !0),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level1", "doughnut instance 10000")),
                        _this.group.addChild(_this.part1),
                        _this.playAnim("anim1"),
                        _this
                    );
                }
                return (
                    __extends(Lvl1CarThink, _super),
                    (Lvl1CarThink.prototype.playArrow = function () {
                        this.playAnim("arrow"), this.part2.animations.play("anim"), (this.group.visible = !0);
                    }),
                    (Lvl1CarThink.prototype.update = function () {
                        _super.prototype.update.call(this), !1 === this.activeAnim && ((this.counter += 1), 180 === this.counter && ((this.counter = 0), (this.group.visible = !0), this.playAnim("anim" + Client.Tools.random(1, 2))));
                    }),
                    (Lvl1CarThink.prototype.onAnimComplete = function () {
                        this.group.visible = !1;
                    }),
                    (Lvl1CarThink.prototype.updateAnimation = function () {
                        "anim1" === this.currAnim
                            ? 1 === this.counterAnim
                                ? this.startTween(this.part3, 16, { x: 15, y: 15, scX: 0.96, scY: 0.96 })
                                : 35 === this.counterAnim
                                ? this.startTween(this.part3, 18, { x: 14, y: 14, scX: 1, scY: 1 })
                                : 53 === this.counterAnim
                                ? this.startTween(this.part3, 16, { x: 15, y: 15, scX: 0.96, scY: 0.96 })
                                : 87 === this.counterAnim
                                ? this.startTween(this.part3, 18, { x: 14, y: 14, scX: 1, scY: 1 })
                                : 105 === this.counterAnim
                                ? this.startTween(this.part3, 14, { alpha: 0 })
                                : 121 === this.counterAnim && this.animComplete()
                            : "anim2" === this.currAnim
                            ? 1 === this.counterAnim
                                ? this.startTween(this.part1, 8, { alpha: 1 })
                                : 63 === this.counterAnim
                                ? this.startTween(this.part1, 10, { alpha: 0 })
                                : 75 === this.counterAnim && this.animComplete()
                            : "arrow" === this.currAnim && (1 === this.counterAnim ? this.startTween(this.part2, 16, { alpha: 1 }) : 87 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl1CarThink.prototype.setParts = function (value) {
                        "anim1" === value
                            ? ((this.part1.visible = !1),
                              (this.part2.visible = !1),
                              this.setPart(this.part3, { x: 14, y: 14, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part4, { x: 0, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }))
                            : "anim2" === value
                            ? ((this.part1.visible = !0),
                              this.setPart(this.part1, { x: 11, y: 16, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 0 }),
                              (this.part2.visible = !1),
                              (this.part3.visible = !1),
                              this.setPart(this.part4, { x: 0, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }))
                            : "arrow" === value &&
                              ((this.part1.visible = !1),
                              (this.part2.visible = !0),
                              this.setPart(this.part2, { x: 28, y: 8, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 0 }),
                              (this.part3.visible = !1),
                              this.setPart(this.part4, { x: 0, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl1CarThink.prototype.free = function () {
                        (this.group = null), (this.part4 = null), (this.part3 = null), (this.part2 = null), (this.part1 = null);
                    }),
                    Lvl1CarThink
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl1CarThink = Lvl1CarThink;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl1Door = (function (_super) {
                function Lvl1Door(game) {
                    var _this = _super.call(this) || this;
                    (_this.active = !1), (_this.graphic = Client.GameManager.instance.layerBackground.create(171, 375, "level1", "door instance 10000")), (_this.graphic.cacheAsBitmap = !0);
                    var mask = game.make.graphics();
                    return mask.beginFill(16711680, 0.5), mask.drawRect(171, 374, 40, 150), mask.endFill(), Client.GameManager.instance.layerBackground.addChild(mask), (_this.graphic.mask = mask), (mask = null), _this;
                }
                return (
                    __extends(Lvl1Door, _super),
                    (Lvl1Door.prototype.open = function () {
                        this.active = !0;
                    }),
                    (Lvl1Door.prototype.update = function () {
                        !1 !== this.active && ((this.graphic.y -= 2), this.graphic.y < 250 && ((this.graphic.y = 250), (this.active = !1)));
                    }),
                    (Lvl1Door.prototype.free = function () {
                        this.graphic = null;
                    }),
                    Lvl1Door
                );
            })(Client.BasicElement);
            Client.Lvl1Door = Lvl1Door;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl1Lift = (function (_super) {
                function Lvl1Lift(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.state = "bot"),
                        (_this.graphicTop = Client.GameManager.instance.layerBackground.create(415, 365, "level1", "lift instance 10000")),
                        (_this.graphicTop.anchor.x = 0.5),
                        (_this.lampUp = game.make.image(0, 10, "level1", "liftLamp instance 10000")),
                        _this.lampUp.anchor.setTo(0.5),
                        _this.graphicTop.addChild(_this.lampUp),
                        (_this.lampDown = game.make.image(0, 25, "level1", "liftLamp instance 10000")),
                        _this.lampDown.anchor.setTo(0.5),
                        _this.graphicTop.addChild(_this.lampDown),
                        (_this.graphic = Client.GameManager.instance.layerUpper.create(415, 505, "level1", "liftDown instance 10000")),
                        game.physics.box2d.enable(_this.graphic),
                        _this.graphic.body.setRectangle(144, 10, 0, 18),
                        (_this.graphic.body.kinematic = !0),
                        (_this.btnTop = Client.GameManager.instance.layerBackground.create(258, 138, "level1", "btnLift instance 10000")),
                        _this.btnTop.anchor.setTo(0.5),
                        _this.btnTop.events.onInputOut.add(_this.btnOut, _this),
                        _this.btnTop.events.onInputOver.add(_this.btnOver, _this),
                        _this.btnTop.events.onInputDown.add(_this.btnDown, _this),
                        _this.btnTop.events.onInputUp.add(_this.btnUp, _this),
                        (_this.btnBot = Client.GameManager.instance.layerBackground.create(259, 181, "level1", "btnLift instance 10000")),
                        _this.btnBot.anchor.setTo(0.5),
                        (_this.btnBot.scale.y = -1),
                        _this.btnBot.events.onInputOut.add(_this.btnOut, _this),
                        _this.btnBot.events.onInputOver.add(_this.btnOver, _this),
                        _this.btnBot.events.onInputDown.add(_this.btnDown, _this),
                        _this.btnBot.events.onInputUp.add(_this.btnUp, _this),
                        _this
                    );
                }
                return (
                    __extends(Lvl1Lift, _super),
                    (Lvl1Lift.prototype.btnOut = function (sprite) {
                        !1 !== sprite.inputEnabled && (sprite.frameName = "btnLift instance 10002");
                    }),
                    (Lvl1Lift.prototype.btnOver = function (sprite) {
                        !1 !== sprite.inputEnabled && (sprite.frameName = "btnLift instance 10001");
                    }),
                    (Lvl1Lift.prototype.btnDown = function (sprite) {
                        !1 !== sprite.inputEnabled &&
                            (Client.SoundManager.playSFX("s_lvl1_liftButton"),
                            Client.SoundManager.playSFX("s_lvl1_liftEngine", !0),
                            (sprite.frameName = "btnLift instance 10003"),
                            1 === sprite.scale.y
                                ? ((this.lampUp.frameName = "liftLamp instance 10001"), "top" !== this.state && ((this.graphic.body.velocity.y = -80), (this.state = "moveTop"), Client.GameManager.instance.level.customAction(1)))
                                : ((this.lampDown.frameName = "liftLamp instance 10001"), "bot" !== this.state && ((this.graphic.body.velocity.y = 80), (this.state = "moveBot"))));
                    }),
                    (Lvl1Lift.prototype.btnUp = function (sprite, pointer, isOver) {
                        !1 !== sprite.inputEnabled &&
                            (!0 === isOver && this.btnOver(sprite),
                            (this.graphic.body.velocity.y = 0),
                            (this.lampUp.frameName = "liftLamp instance 10000"),
                            (this.lampDown.frameName = "liftLamp instance 10000"),
                            Client.SoundManager.stopSFXLoop("s_lvl1_liftEngine"));
                    }),
                    (Lvl1Lift.prototype.activateBtns = function () {
                        (this.btnBot.inputEnabled = !0), (this.btnBot.input.useHandCursor = !0), (this.btnTop.inputEnabled = !0), (this.btnTop.input.useHandCursor = !0), this.btnOut(this.btnBot), this.btnOut(this.btnTop);
                    }),
                    (Lvl1Lift.prototype.deactivateBtns = function () {
                        (this.btnTop.inputEnabled = !1),
                            (this.btnBot.inputEnabled = !1),
                            (this.lampUp.frameName = "liftLamp instance 10000"),
                            (this.lampDown.frameName = "liftLamp instance 10000"),
                            (this.btnTop.frameName = "btnLift instance 10000"),
                            (this.btnBot.frameName = "btnLift instance 10000"),
                            Client.Tools.setDefaultCursor(),
                            Client.SoundManager.stopSFXLoop("s_lvl1_liftEngine");
                    }),
                    (Lvl1Lift.prototype.update = function () {
                        (this.graphicTop.y = this.graphic.y - 140),
                            505 < this.graphic.body.y
                                ? ((this.graphic.body.y = 505), (this.graphic.body.velocity.y = 0), (this.state = "bot"))
                                : this.graphic.body.y < 248 && ((this.graphic.body.y = 248), (this.graphic.body.velocity.y = 0), (this.state = "top"), this.deactivateBtns(), Client.GameManager.instance.hero.setClickable(!0));
                    }),
                    (Lvl1Lift.prototype.free = function () {
                        (this.graphic = null), (this.graphicTop = null), (this.lampDown = null), (this.lampUp = null), (this.btnBot = null), (this.btnTop = null);
                    }),
                    Lvl1Lift
                );
            })(Client.BasicElement);
            Client.Lvl1Lift = Lvl1Lift;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl10Alarm = (function (_super) {
                function Lvl10Alarm() {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.contact = !1),
                        (_this.laser1 = Client.GameManager.instance.layerElements.create(418, 110, "level10", "laser instance 10000")),
                        (_this.laser2 = Client.GameManager.instance.layerElements.create(585, 110, "level10", "laser instance 10000")),
                        (_this.alarm = Client.GameManager.instance.layerBackground.create(435, 153, "level10", "signal instance 10000")),
                        _this.alarm.animations.add("anim", Phaser.Animation.generateFrameNames("signal instance 1", 0, 65, "", 4), 30, !1).onComplete.add(_this.breakWall, _this),
                        _this
                    );
                }
                return (
                    __extends(Lvl10Alarm, _super),
                    (Lvl10Alarm.prototype.breakWall = function () {
                        (this.laser1.visible = !1),
                            (this.laser2.visible = !1),
                            Client.GameManager.instance.level.boss.show(),
                            Client.GameManager.instance.level.bDoor.playAnim("anim"),
                            (Client.GameManager.instance.hero.afraidDuration = 90),
                            (Client.GameManager.instance.hero.currEyesState = Client.EyesState.afraidTime);
                    }),
                    (Lvl10Alarm.prototype.update = function () {
                        this.contact
                            ? this.laser1.visible && (this.laser1.frameName = "laser instance 1000" + Client.Tools.random(0, 1))
                            : 365 < Client.GameManager.instance.hero.bodyBase.x &&
                              ((this.contact = !0),
                              this.alarm.play("anim"),
                              Client.GameManager.instance.hero.setEnableMotor(!1),
                              Client.GameManager.instance.hero.setClickable(!1),
                              Client.GameManager.instance.hero.graphicEyes.animations.play("lookUp"),
                              Client.SoundManager.playSFX("s_lvl10_signaling"));
                    }),
                    (Lvl10Alarm.prototype.free = function () {
                        (this.laser1 = null), (this.laser2 = null), (this.alarm = null);
                    }),
                    Lvl10Alarm
                );
            })(Client.BasicElement);
            Client.Lvl10Alarm = Lvl10Alarm;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl10Bag = (function (_super) {
                function Lvl10Bag(game, x, y, key, frame, hasDownFrame) {
                    void 0 === hasDownFrame && (hasDownFrame = !1);
                    var _this = _super.call(this, game, x, y, key, frame, !1) || this;
                    return (_this.id = 0), (_this.sensorPause = 0), (_this.onPlatform = !1), (_this.canFall = !1), _this;
                }
                return (
                    __extends(Lvl10Bag, _super),
                    (Lvl10Bag.prototype.addBody = function (_w, _h, _oX, _oY, _id) {
                        (this.id = _id),
                            this.deactivate(),
                            Client.Main.instance.physics.box2d.enable(this),
                            (this.body.mass = 0.8),
                            (this.body.kinematic = !0),
                            this.body.setRectangle(_w, _h, _oX, _oY),
                            this.body.data.SetUserData("DragBody"),
                            this.body.setCollisionCategory(Client.FilterGroups.CAR2),
                            this.body.setCollisionMask(~Client.FilterGroups.IGNORE_CAR),
                            (this.name = "bag" + _id),
                            this.onInputDown.add(this.bagClick, this),
                            (this.body.angularDamping = 1);
                    }),
                    (Lvl10Bag.prototype.bagClick = function (_sprite) {
                        (this.body.dynamic = !0),
                            Client.GameManager.instance.level.mouseDragStart(),
                            1 === this.id && Client.GameManager.instance.level.hook.bagClick(),
                            !0 === this.onPlatform && ((this.canFall = !0), (this.body.sensor = !0), (this.sensorPause = 0), (this.onPlatform = !1));
                    }),
                    (Lvl10Bag.prototype.update = function () {
                        this.canFall && (this.sensorPause++, 30 === this.sensorPause && this.resetParams());
                    }),
                    (Lvl10Bag.prototype.resetParams = function () {
                        (this.body.sensor = !1), (this.sensorPause = 0), (this.canFall = !1);
                    }),
                    (Lvl10Bag.prototype.setPlatformPosition = function (_x, _y) {
                        Client.GameManager.instance.level.mouseDragEnd(),
                            (this.body.x = _x),
                            (this.body.y = _y),
                            this.body.setZeroVelocity(),
                            this.body.setZeroRotation(),
                            this.body.setZeroDamping(),
                            (this.body.angle = 0),
                            this.resetParams(),
                            (this.onPlatform = !0);
                    }),
                    Lvl10Bag
                );
            })(Client.SimpleButton);
            Client.Lvl10Bag = Lvl10Bag;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl10Boss = (function (_super) {
                function Lvl10Boss(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.heroContact = !1),
                        (_this.pushHero = !1),
                        (_this.move = !1),
                        (_this.connected = !1),
                        (_this.bossFly = !1),
                        (_this.flyIdlePlayed = !1),
                        (_this.losePhone = !1),
                        (_this.canFly = !1),
                        (_this.group = game.make.group()),
                        (_this.group.x = 980),
                        (_this.group.y = 400),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.body = new Phaser.Physics.Box2D.Body(game, null, 870, 500, 2)),
                        _this.body.setRectangle(5, 100, -95),
                        _this.body.addRectangle(10, 50, 20, -50),
                        (_this.body.friction = 0.8),
                        (_this.body.mass = 2),
                        (_this.body.fixedRotation = !0),
                        _this.body.setCollisionCategory(Client.FilterGroups.PARTICLE),
                        _this.body.setCollisionMask(~Client.FilterGroups.CAR2),
                        (_this.body.collideWorldBounds = !1),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "level10", "bossBody instance 10000")),
                        _this.part4.pivot.set(0, 0),
                        _this.part4.animations.add("anim", Phaser.Animation.generateFrameNames("bossBody instance 1", 0, 79, "", 4), 30, !0),
                        _this.part4.play("anim"),
                        _this.group.addChild(_this.part4),
                        (_this.smoke = _this.group.create(85, 75, "level10", "wheelSmoke instance 10000")),
                        _this.smoke.animations.add("anim", Phaser.Animation.generateFrameNames("wheelSmoke instance 1", 0, 35, "", 4), 30, !0),
                        _this.smoke.play("anim"),
                        (_this.smoke.visible = !1),
                        _this.group.addChild(_this.smoke),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level10", "bossWheel instance 10000")),
                        _this.part3.anchor.set(0.5),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level10", "bossWheel instance 10000")),
                        _this.part2.anchor.set(0.5),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level10", "bossBubble instance 10000")),
                        _this.part1.pivot.set(0, 0),
                        _this.part1.animations.add("anim", Phaser.Animation.generateFrameNames("bossBubble instance 1", 0, 53, "", 4), 30, !1),
                        _this.group.addChild(_this.part1),
                        (_this.eyes = game.make.sprite(50, 25, "level10", "bossEye instance 10000")),
                        _this.eyes.animations.add("anger", Phaser.Animation.generateFrameNames("bossEye instance 1", 0, 52, "", 4), 30, !0),
                        _this.eyes.animations.add("move", Phaser.Animation.generateFrameNames("bossEye instance 1", 53, 110, "", 4), 30, !0),
                        _this.eyes.animations.add("fright", Phaser.Animation.generateFrameNames("bossEye instance 1", 111, 138, "", 4), 30, !1),
                        _this.eyes.animations.add("idle_fly", Phaser.Animation.generateFrameNames("bossEye instance 1", 139, 237, "", 4), 30, !0),
                        _this.eyes.animations.add("na_kruke", Phaser.Animation.generateFrameNames("bossEye instance 1", 238, 282, "", 4), 30, !0),
                        _this.part4.addChild(_this.eyes),
                        _this.setParts("appearens"),
                        _this
                    );
                }
                return (
                    __extends(Lvl10Boss, _super),
                    (Lvl10Boss.prototype.addContact = function () {
                        this.body.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, this.contact, this);
                    }),
                    (Lvl10Boss.prototype.show = function () {
                        Client.Main.instance.add.tween(this.group).to({ x: 750 }, 400, "Linear", !0), this.playAnim("appearens");
                    }),
                    (Lvl10Boss.prototype.contact = function () {
                        !1 === this.heroContact && (this.playAnim("attack"), (this.part1.visible = !1)), (this.heroContact = !0);
                    }),
                    (Lvl10Boss.prototype.stopMoving = function () {
                        this.move &&
                            (Client.SoundManager.playSFX("s_lvl10_bossOnHook"),
                            (this.move = !1),
                            (this.connected = !0),
                            this.body.setZeroVelocity(),
                            this.playAnim("na_kruke"),
                            this.eyes.play("na_kruke"),
                            (this.smoke.visible = !0),
                            this.smoke.play("anim"),
                            this.body.setCollisionCategory(Client.FilterGroups.CAR2),
                            this.body.setCollisionMask(~Client.FilterGroups.IGNORE_CAR));
                    }),
                    (Lvl10Boss.prototype.update = function () {
                        _super.prototype.update.call(this),
                            this.move && ((this.group.x = this.body.x - 120), (this.group.y = this.body.y - 72), (this.part2.angle -= 3), (this.part3.angle -= 3), (this.body.velocity.x = -120)),
                            this.connected && ((this.group.x = this.body.x - 107), (this.group.y = this.body.y - 72), ("na_kruke" !== this.currAnim && "idle_kruk" !== this.currAnim) || ((this.part2.angle -= 3), (this.part3.angle -= 3))),
                            this.heroContact &&
                                !this.pushHero &&
                                ((this.move = !1),
                                this.body.setZeroVelocity(),
                                (this.pushHero = !0),
                                (Client.GameManager.instance.hero.bodyBase.velocity.x = -200),
                                (Client.GameManager.instance.hero.currState = Client.HeroState.bumpStars),
                                Client.LevelBuilder.instance.levelFailed(60),
                                Client.SoundManager.playSFX("s_lvl12_wheelyHit")),
                            this.connected && 470 < this.body.y && !this.canFly && (this.canFly = !0),
                            this.canFly && this.body.y < 465 && !this.bossFly && ((this.bossFly = !0), this.playAnim("fly_start"), this.eyes.play("idle_fly"), (this.smoke.visible = !1)),
                            !this.losePhone && this.body.y < 330 && ((this.losePhone = !0), (this.phone = new Client.Lvl10Mobile(Client.Main.instance)), Client.GameManager.instance.level.updateElements.push(this.phone));
                    }),
                    (Lvl10Boss.prototype.updateAnimation = function () {
                        "appearens" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (this.eyes.play("anger"), this.startTween(this.part2, 36, { x: 149, y: 84 }), this.startTween(this.part3, 36, { x: 57, y: 61 }), this.startTween(this.part4, 36, { x: 30, y: -62, scY: 1 }))
                                : 37 === this.counterAnim
                                ? (this.startTween(this.part2, 8, { x: 158, y: 99 }), this.startTween(this.part3, 8, { x: 63, y: 94 }), this.startTween(this.part4, 8, { x: 22, y: -31, skX: 7, skY: 7 }))
                                : 45 === this.counterAnim
                                ? (this.startTween(this.part2, 4, { x: 165, y: 101 }), this.startTween(this.part3, 4, { x: 68, y: 99 }), this.startTween(this.part4, 4, { x: 11, y: -9, skX: -1, skY: -1 }))
                                : 49 === this.counterAnim
                                ? this.startTween(this.part4, 4, { y: 7 })
                                : 53 === this.counterAnim
                                ? this.startTween(this.part4, 4, { y: 0 })
                                : 57 === this.counterAnim
                                ? this.startTween(this.part4, 4, { y: 4 })
                                : 61 === this.counterAnim
                                ? this.startTween(this.part4, 4, { y: 0 })
                                : 65 === this.counterAnim
                                ? this.startTween(this.part4, 44, { x: 5, y: 12, skX: -5, skY: -5 })
                                : 109 === this.counterAnim && (this.animComplete(), this.playAnim("attack"))
                            : "attack" === this.currAnim
                            ? 1 === this.counterAnim
                                ? this.startTween(this.part4, 4, { x: 11, y: 0, skX: -1, skY: -1 })
                                : 5 === this.counterAnim
                                ? this.startTween(this.part4, 4, { x: 27, y: -27, skX: 7, skY: 7, scY: 1.1 })
                                : 9 === this.counterAnim
                                ? this.startTween(this.part4, 10, { y: -21, scY: 1 })
                                : 19 === this.counterAnim
                                ? this.startTween(this.part4, 4, { x: 11, y: 0, skX: -1, skY: -1 })
                                : 23 === this.counterAnim
                                ? this.setPart(this.part4, { x: 5, y: 12, skX: -5, skY: -5 })
                                : 25 === this.counterAnim
                                ? this.startTween(this.part4, 4, { x: 11, y: 0, skX: -1, skY: -1 })
                                : 29 === this.counterAnim
                                ? this.startTween(this.part4, 36, { x: 5, y: 12, skX: -5, skY: -5 })
                                : 65 === this.counterAnim
                                ? this.startTween(this.part4, 4, { x: 11, y: 0, skX: -1, skY: -1 })
                                : 69 === this.counterAnim
                                ? this.startTween(this.part4, 4, { x: 27, y: -27, skX: 7, skY: 7, scY: 1.1 })
                                : 73 === this.counterAnim
                                ? this.startTween(this.part4, 10, { y: -21, scY: 1 })
                                : 83 === this.counterAnim
                                ? this.startTween(this.part4, 4, { x: 11, y: 0, skX: -1, skY: -1 })
                                : 87 === this.counterAnim
                                ? this.setPart(this.part4, { x: 5, y: 12, skX: -5, skY: -5 })
                                : 89 === this.counterAnim
                                ? this.startTween(this.part4, 4, { x: 11, y: 0, skX: -1, skY: -1 })
                                : 109 === this.counterAnim && (this.animComplete(), this.heroContact || ((this.part1.visible = !1), this.playAnim("idle", -1), this.part1.play("anim"), this.eyes.play("move"), (this.move = !0)))
                            : "idle" === this.currAnim
                            ? 1 === this.counterAnim
                                ? this.startTween(this.part4, 8, { y: -2 })
                                : 9 === this.counterAnim
                                ? this.startTween(this.part4, 8, { y: 0 })
                                : 17 === this.counterAnim
                                ? this.startTween(this.part4, 8, { y: -2 })
                                : 25 === this.counterAnim
                                ? this.startTween(this.part4, 8, { y: 0 })
                                : 33 === this.counterAnim
                                ? this.startTween(this.part4, 8, { y: -2 })
                                : 41 === this.counterAnim
                                ? this.startTween(this.part4, 8, { y: 0 })
                                : 49 === this.counterAnim
                                ? this.startTween(this.part4, 8, { y: -2 })
                                : 57 === this.counterAnim
                                ? this.startTween(this.part4, 8, { y: 0 })
                                : 65 === this.counterAnim
                                ? this.startTween(this.part4, 8, { y: -2 })
                                : 73 === this.counterAnim && this.animComplete()
                            : "inOil" === this.currAnim
                            ? 1 === this.counterAnim
                                ? this.startTween(this.part4, 8, { x: 2, y: 7, skX: -6, skY: -6 })
                                : 9 === this.counterAnim
                                ? this.startTween(this.part4, 8, { y: 9 })
                                : 17 === this.counterAnim
                                ? this.startTween(this.part4, 8, { y: 7 })
                                : 25 === this.counterAnim
                                ? this.startTween(this.part4, 8, { y: 9 })
                                : 33 === this.counterAnim
                                ? this.startTween(this.part4, 8, { y: 7 })
                                : 41 === this.counterAnim
                                ? this.startTween(this.part4, 10, { y: 9 })
                                : 51 === this.counterAnim
                                ? this.startTween(this.part4, 8, { y: 7 })
                                : 59 === this.counterAnim && this.animComplete()
                            : "na_kruke" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (this.startTween(this.part2, 12, { x: 167, y: 85 }), this.startTween(this.part3, 12, { x: 72, y: 97 }), this.startTween(this.part4, 12, { x: -10, y: 15, skX: -17, skY: -17 }))
                                : 13 === this.counterAnim && (this.animComplete(), this.playAnim("idle_kruk", -1))
                            : "fly_start" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (this.startTween(this.part2, 26, { x: 165, y: 89 }), this.startTween(this.part3, 26, { y: 109 }), this.startTween(this.part4, 26, { x: -9, y: 10, skX: -14, skY: -14 }))
                                : 27 === this.counterAnim && (this.animComplete(), this.playAnim("fly_idle", -1))
                            : "fly_idle" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (this.startTween(this.part2, 24, { x: 167, y: 85 }), this.startTween(this.part3, 24, { x: 75, y: 111 }), this.startTween(this.part4, 24, { x: -10, y: 15, skX: -17, skY: -17 }))
                                : 25 === this.counterAnim
                                ? (this.startTween(this.part2, 26, { x: 165, y: 89 }), this.startTween(this.part3, 26, { x: 72, y: 109 }), this.startTween(this.part4, 26, { x: -9, y: 10, skX: -14, skY: -14 }))
                                : 51 === this.counterAnim
                                ? (this.startTween(this.part2, 30, { x: 167, y: 85 }), this.startTween(this.part3, 30, { x: 75, y: 111 }), this.startTween(this.part4, 30, { x: -10, y: 15, skX: -17, skY: -17 }))
                                : 81 === this.counterAnim
                                ? (this.startTween(this.part2, 28, { x: 165, y: 88 }), this.startTween(this.part3, 28, { x: 72, y: 109 }), this.startTween(this.part4, 28, { x: -9, y: 10, skX: -14, skY: -14 }))
                                : 109 === this.counterAnim && this.animComplete()
                            : "idle_kruk" === this.currAnim &&
                              (1 === this.counterAnim
                                  ? (this.startTween(this.part2, 26, { x: 165, y: 89 }), this.startTween(this.part4, 26, { x: -9, y: 10, skX: -14, skY: -14 }))
                                  : 27 === this.counterAnim
                                  ? (this.startTween(this.part2, 24, { x: 167, y: 85 }), this.startTween(this.part4, 24, { x: -10, y: 15, skX: -17, skY: -17 }))
                                  : 51 === this.counterAnim
                                  ? (this.startTween(this.part2, 26, { x: 165, y: 89 }), this.startTween(this.part4, 26, { x: -9, y: 10, skX: -14, skY: -14 }))
                                  : 77 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl10Boss.prototype.setParts = function (value) {
                        "appearens" === value
                            ? ((this.part1.visible = !1),
                              this.setPart(this.part2, { x: 151, y: 77, angle: 0, scX: 0.5, scY: 0.5, skX: 2, skY: 2, alpha: 1 }),
                              this.setPart(this.part3, { x: 59, y: 54, angle: 0, scX: 0.52, scY: 0.52, skX: 2, skY: 2, alpha: 1 }),
                              this.setPart(this.part4, { x: 33, y: -74, angle: 0, scX: 1, scY: 1.08, skX: 14, skY: 14, alpha: 1 }))
                            : "attack" === value
                            ? (Client.SoundManager.playSFX("s_lvl10_bossDialog"),
                              (this.part1.visible = !0),
                              this.setPart(this.part1, { x: 0, y: 1, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part2, { x: 165, y: 101, angle: 0, scX: 0.5, scY: 0.5, skX: 2, skY: 2, alpha: 1 }),
                              this.setPart(this.part3, { x: 68, y: 99, angle: 0, scX: 0.52, scY: 0.52, skX: 2, skY: 2, alpha: 1 }),
                              this.setPart(this.part4, { x: 5, y: 12, angle: 0, scX: 1, scY: 1, skX: -5, skY: -5, alpha: 1 }))
                            : "idle" === value
                            ? ((this.part1.visible = !1),
                              this.setPart(this.part2, { x: 165, y: 101, angle: 0, scX: 0.5, scY: 0.5, skX: 2, skY: 2, alpha: 1 }),
                              this.setPart(this.part3, { x: 68, y: 99, angle: 0, scX: 0.52, scY: 0.52, skX: 2, skY: 2, alpha: 1 }),
                              this.setPart(this.part4, { x: 11, y: 0, angle: 0, scX: 1, scY: 1, skX: -1, skY: -1, alpha: 1 }))
                            : "inOil" === value
                            ? ((this.part1.visible = !1),
                              this.setPart(this.part2, { x: 165, y: 101, angle: 0, scX: 0.5, scY: 0.5, skX: 2, skY: 2, alpha: 1 }),
                              this.setPart(this.part3, { x: 68, y: 99, angle: 0, scX: 0.52, scY: 0.52, skX: 2, skY: 2, alpha: 1 }),
                              this.setPart(this.part4, { x: 11, y: -2, angle: 0, scX: 1, scY: 1, skX: -1, skY: -1, alpha: 1 }))
                            : "na_kruke" === value
                            ? (Client.SoundManager.playSFX("s_lvl10_bossHookLoop", !0),
                              (this.part1.visible = !1),
                              this.setPart(this.part2, { x: 165, y: 101, angle: 0, scX: 0.5, scY: 0.5, skX: 2, skY: 2, alpha: 1 }),
                              this.setPart(this.part3, { x: 68, y: 99, angle: 0, scX: 0.52, scY: 0.52, skX: 2, skY: 2, alpha: 1 }),
                              this.setPart(this.part4, { x: 2, y: 7, angle: 0, scX: 1, scY: 1, skX: -6, skY: -6, alpha: 1 }))
                            : "fly_start" === value
                            ? (Client.SoundManager.stopSFXLoop("s_lvl10_bossHookLoop"),
                              (this.part1.visible = !1),
                              this.setPart(this.part2, { x: 167, y: 85, angle: 0, scX: 0.5, scY: 0.5, skX: 2, skY: 2, alpha: 1 }),
                              this.setPart(this.part3, { x: 72, y: 97, angle: 0, scX: 0.52, scY: 0.52, skX: 2, skY: 2, alpha: 1 }),
                              this.setPart(this.part4, { x: -10, y: 15, angle: 0, scX: 1, scY: 1, skX: -17, skY: -17, alpha: 1 }))
                            : "fly_idle" === value
                            ? ((this.part1.visible = !1),
                              this.setPart(this.part2, { x: 165, y: 89, angle: 0, scX: 0.5, scY: 0.5, skX: 2, skY: 2, alpha: 1 }),
                              this.setPart(this.part3, { x: 72, y: 109, angle: 0, scX: 0.52, scY: 0.52, skX: 2, skY: 2, alpha: 1 }),
                              this.setPart(this.part4, { x: -9, y: 10, angle: 0, scX: 1, scY: 1, skX: -14, skY: -14, alpha: 1 }))
                            : "idle_kruk" === value &&
                              ((this.part1.visible = !1),
                              this.setPart(this.part2, { x: 167, y: 85, angle: 0, scX: 0.5, scY: 0.5, skX: 2, skY: 2, alpha: 1 }),
                              this.setPart(this.part3, { x: 72, y: 97, angle: 0, scX: 0.52, scY: 0.52, skX: 2, skY: 2, alpha: 1 }),
                              this.setPart(this.part4, { x: -10, y: 15, angle: 0, scX: 1, scY: 1, skX: -17, skY: -17, alpha: 1 }));
                    }),
                    (Lvl10Boss.prototype.free = function () {
                        (this.group = null), (this.part4 = null), (this.part3 = null), (this.part2 = null), (this.part1 = null);
                    }),
                    Lvl10Boss
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl10Boss = Lvl10Boss;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Level10BossDoor = (function (_super) {
                function Level10BossDoor(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = 929),
                        (_this.group.y = 357),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.part23 = new Client.SASprite(game, 0, 0, "level10", "bossDoor7 instance 10000")),
                        _this.part23.pivot.set(0, 0),
                        _this.group.addChild(_this.part23),
                        (_this.part22 = new Client.SASprite(game, 0, 0, "level10", "bossDoor7 instance 10000")),
                        _this.part22.pivot.set(0, 0),
                        _this.group.addChild(_this.part22),
                        (_this.part21 = new Client.SASprite(game, 0, 0, "level10", "bossDoor7 instance 10000")),
                        _this.part21.pivot.set(0, 0),
                        _this.group.addChild(_this.part21),
                        (_this.part20 = new Client.SASprite(game, 0, 0, "level10", "bossDoor7 instance 10000")),
                        _this.part20.pivot.set(0, 0),
                        _this.group.addChild(_this.part20),
                        (_this.part19 = new Client.SASprite(game, 0, 0, "level10", "bossDoor7 instance 10000")),
                        _this.part19.pivot.set(0, 0),
                        _this.group.addChild(_this.part19),
                        (_this.part18 = new Client.SASprite(game, 0, 0, "level10", "bossDoor7 instance 10000")),
                        _this.part18.pivot.set(0, 0),
                        _this.group.addChild(_this.part18),
                        (_this.part17 = new Client.SASprite(game, 0, 0, "level10", "bossDoor7 instance 10000")),
                        _this.part17.pivot.set(0, 0),
                        _this.group.addChild(_this.part17),
                        (_this.part16 = new Client.SASprite(game, 0, 0, "level10", "bossDoor7 instance 10000")),
                        _this.part16.pivot.set(0, 0),
                        _this.group.addChild(_this.part16),
                        (_this.part15 = new Client.SASprite(game, 0, 0, "level10", "bossDoor7 instance 10000")),
                        _this.part15.pivot.set(0, 0),
                        _this.group.addChild(_this.part15),
                        (_this.part14 = new Client.SASprite(game, 0, 0, "level10", "bossDoor7 instance 10000")),
                        _this.part14.pivot.set(0, 0),
                        _this.group.addChild(_this.part14),
                        (_this.part13 = new Client.SASprite(game, 0, 0, "level10", "bossDoor7 instance 10000")),
                        _this.part13.pivot.set(0, 0),
                        _this.group.addChild(_this.part13),
                        (_this.part12 = new Client.SASprite(game, 0, 0, "level10", "bossDoor7 instance 10000")),
                        _this.part12.pivot.set(0, 0),
                        _this.group.addChild(_this.part12),
                        (_this.part11 = new Client.SASprite(game, 0, 0, "level10", "bossDoor7 instance 10000")),
                        _this.part11.pivot.set(0, 0),
                        _this.group.addChild(_this.part11),
                        (_this.part10 = new Client.SASprite(game, 0, 0, "level10", "bossDoor7 instance 10000")),
                        _this.part10.pivot.set(0, 0),
                        _this.group.addChild(_this.part10),
                        _this.setParts("anim"),
                        _this
                    );
                }
                return (
                    __extends(Level10BossDoor, _super),
                    (Level10BossDoor.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (3 === this.counterAnim
                                ? (Client.SoundManager.playSFX("s_lvl10_destroyWall"),
                                  this.startTween(this.part10, 4, { x: 9, skX: 15, skY: 15 }, !0),
                                  this.startTween(this.part11, 4, { x: -46, y: 128, skX: -60, skY: -60 }, !0),
                                  this.startTween(this.part12, 4, { x: -11, y: 16, skX: -45, skY: -45 }, !0),
                                  this.startTween(this.part13, 4, { x: -45, y: 78, skX: 0, skY: 0 }, !0),
                                  this.startTween(this.part14, 4, { x: 0, y: 104, skX: 30, skY: 30 }, !0),
                                  this.startTween(this.part15, 4, { x: -23, y: 110, skX: -30, skY: -30 }, !0),
                                  this.startTween(this.part16, 4, { x: -37, y: 65, skX: 30, skY: 30 }, !0),
                                  this.startTween(this.part17, 4, { x: 11, y: 42, skX: 45, skY: 45 }, !0),
                                  this.startTween(this.part18, 4, { x: -1, y: -6, skX: 15, skY: 15 }, !0),
                                  this.startTween(this.part19, 4, { x: 15, y: -6, skX: 15, skY: 15 }, !0),
                                  this.startTween(this.part20, 4, { x: -45, y: 85, skX: -60, skY: -60 }, !0),
                                  this.startTween(this.part21, 4, { x: -38, y: 116, skX: -45, skY: -45 }, !0),
                                  this.startTween(this.part22, 4, { x: -30, y: 71, skX: -30, skY: -30 }, !0),
                                  this.startTween(this.part23, 4, { x: -26, skX: -30, skY: -30 }, !0))
                                : 7 === this.counterAnim
                                ? (this.startTween(this.part10, 8, { x: -21, skX: 14, skY: 14 }, !0),
                                  this.startTween(this.part11, 8, { x: -72, y: 159, skX: -89, skY: -107, scX: 1.05 }, !0),
                                  this.startTween(this.part12, 8, { x: -71, y: 37 }, !0),
                                  this.startTween(this.part13, 8, { x: -50, y: 102, skX: 16, skY: 16 }, !0),
                                  this.startTween(this.part14, 8, { x: -18, y: 122, skX: 59, skY: 59 }, !0),
                                  this.startTween(this.part15, 8, { x: -47, skX: -29, skY: -29 }, !0),
                                  this.startTween(this.part16, 8, { x: -67, y: 85, skX: 29, skY: 29 }, !0),
                                  this.startTween(this.part17, 8, { x: -34, y: 36, skX: 44, skY: 44 }, !0),
                                  this.startTween(this.part18, 8, { x: -13, skX: 45, skY: 45 }, !0),
                                  this.startTween(this.part19, 8, { x: -4, y: 16, skX: 60, skY: 60 }, !0),
                                  this.startTween(this.part20, 8, { x: -124, y: 116, skX: -74, skY: -74 }, !0),
                                  this.startTween(this.part21, 8, { x: -67, y: 133, skX: -59, skY: -59 }, !0),
                                  this.startTween(this.part22, 8, { x: -95, y: 113, skX: -67, skY: -67 }, !0),
                                  this.startTween(this.part23, 8, { x: -21, y: -11, skX: 61, skY: 61 }, !0))
                                : 15 === this.counterAnim
                                ? (this.startTween(this.part10, 6, { x: -44, y: 136, skX: 73, skY: 73 }, !0),
                                  this.startTween(this.part11, 6, { x: -92, y: 162, skX: -88, skY: -105, scX: 1.04 }, !0),
                                  this.startTween(this.part12, 6, { x: -150, y: 72 }, !0),
                                  this.startTween(this.part13, 6, { x: -68, y: 135, skX: 71, skY: 71, alpha: 0.67 }, !0),
                                  this.startTween(this.part14, 6, { x: -58, y: 148, skX: 58, skY: 58, alpha: 0 }, !0),
                                  this.startTween(this.part15, 6, { x: -126, y: 159, skX: -73, skY: -73, alpha: 0 }, !0),
                                  this.startTween(this.part16, 6, { x: -85, y: 145, skX: 84, skY: 84 }, !0),
                                  this.startTween(this.part17, 6, { x: -95, y: 101, skX: -179, skY: -179 }, !0),
                                  this.startTween(this.part18, 6, { x: -70, y: 55, skX: 164, skY: 164 }, !0),
                                  this.startTween(this.part19, 6, { x: -68, y: 93, skX: -170, skY: -170 }, !0),
                                  this.startTween(this.part20, 6, { x: -160, y: 162, skX: -90, skY: -90 }, !0),
                                  this.startTween(this.part21, 6, { x: -87, y: 165, skX: -98, skY: -98 }, !0),
                                  this.startTween(this.part22, 6, { x: -122, y: 157, skX: -83, skY: -83 }, !0),
                                  this.startTween(this.part23, 6, { x: -88, y: 26, skX: 140, skY: 140 }, !0))
                                : 21 === this.counterAnim
                                ? (this.startTween(this.part10, 10, { x: -53, y: 125, skX: 71, skY: 71 }, !0),
                                  this.startTween(this.part11, 10, { x: -90, y: 161, skX: -87, skY: -103 }, !0),
                                  this.startTween(this.part12, 10, { x: -143, y: 94, skX: 61, skY: 61 }, !0),
                                  this.startTween(this.part13, 10, { x: -65, y: 133, skX: 70, skY: 70, alpha: 0.68 }, !0),
                                  this.startTween(this.part14, 10, { x: -56, y: 147, skX: 57, skY: 57, alpha: 0.02 }, !0),
                                  this.startTween(this.part15, 10, { x: -123, y: 158, skX: -71, skY: -71, alpha: 0.02 }, !0),
                                  this.startTween(this.part16, 10, { x: -95, y: 135, skX: 82, skY: 82 }, !0),
                                  this.startTween(this.part17, 10, { x: -164, y: 100, skX: -69, skY: -69 }, !0),
                                  this.startTween(this.part18, 10, { x: -175, skX: -95, skY: -95 }, !0),
                                  this.startTween(this.part19, 10, { x: -131, y: 76, skX: -83, skY: -83 }, !0),
                                  this.startTween(this.part20, 10, { x: -176, y: 146, skX: -88, skY: -88 }, !0),
                                  this.startTween(this.part21, 10, { x: -85, y: 163, skX: -96, skY: -96 }, !0),
                                  this.startTween(this.part22, 10, { x: -119, y: 155, skX: -81, skY: -81 }, !0),
                                  this.startTween(this.part23, 10, { x: -200, y: 63, skX: -125, skY: -125 }, !0))
                                : 31 === this.counterAnim
                                ? (this.startTween(this.part10, 10, { x: -90, y: 150, skX: 88, skY: 88, alpha: 0.51 }, !0),
                                  this.startTween(this.part11, 10, { x: -88, y: 160, skX: -86, skY: -101, alpha: 0.45 }, !0),
                                  this.startTween(this.part12, 10, { x: -199, y: 149, skX: 100, skY: 100 }, !0),
                                  this.startTween(this.part13, 10, { x: -71, y: 151, skX: 89, skY: 89, alpha: 0.69 }, !0),
                                  this.startTween(this.part14, 10, { x: -54, y: 145, skX: 55, skY: 55, scX: 0.99, scY: 0.99, alpha: 0.05 }, !0),
                                  this.startTween(this.part15, 10, { x: -119, y: 156, skX: -69, skY: -69, alpha: 0 }, !0),
                                  this.startTween(this.part16, 10, { x: -119, y: 152, skX: 93, skY: 93, alpha: 0.4 }, !0),
                                  this.startTween(this.part17, 10, { x: -191, y: 90, skX: -8, skY: -8 }, !0),
                                  this.startTween(this.part18, 10, { x: -216, y: 62, skX: 6, skY: 6 }, !0),
                                  this.startTween(this.part19, 10, { x: -142, y: 92, skX: 38, skY: 38 }, !0),
                                  this.startTween(this.part20, 10, { x: -203, y: 163, skX: -91, skY: -91, alpha: 0.63 }, !0),
                                  this.startTween(this.part21, 10, { x: -84, y: 162, skX: -93, skY: -93, alpha: 0 }, !0),
                                  this.startTween(this.part22, 10, { x: -117, y: 152, skX: -79, skY: -79, alpha: 0 }, !0),
                                  this.startTween(this.part23, 10, { x: -250, y: 39, skX: 0, skY: 0 }, !0))
                                : 41 === this.counterAnim
                                ? (this.startTween(this.part12, 18, { x: -233, y: 150, skX: 90, skY: 90, alpha: 0 }, !0),
                                  this.startTween(this.part17, 18, { x: -244, y: 111, skX: -31, skY: -31, alpha: 0 }, !0),
                                  this.startTween(this.part18, 18, { x: -224, y: 103, skX: 70, skY: 70, alpha: 0 }, !0),
                                  this.startTween(this.part19, 18, { x: -177, y: 150, skX: 97, skY: 97, alpha: 0 }, !0),
                                  this.startTween(this.part23, 18, { x: -265, y: 133, skX: 122, skY: 122, alpha: 0 }, !0))
                                : 59 === this.counterAnim
                                ? (this.startTween(this.part10, 10, { alpha: 0 }, !0),
                                  this.startTween(this.part11, 10, { alpha: 0 }, !0),
                                  this.startTween(this.part13, 10, { alpha: 0 }, !0),
                                  this.startTween(this.part14, 10, { alpha: 0 }, !0),
                                  this.startTween(this.part16, 10, { alpha: 0 }, !0),
                                  this.startTween(this.part20, 10, { alpha: 0 }, !0))
                                : 71 === this.counterAnim && this.animComplete());
                    }),
                    (Level10BossDoor.prototype.setParts = function (value) {
                        "anim" === value &&
                            (this.setPart(this.part10, { x: 12, y: 99, angle: 0, scX: 1, scY: 1, skX: -30, skY: -30, alpha: 1 }, !0),
                            this.setPart(this.part11, { x: 3, y: 111, angle: 0, scX: 1, scY: 1, skX: -30, skY: -30, alpha: 1 }, !0),
                            this.setPart(this.part12, { x: 2, y: 10, angle: 0, scX: 1, scY: 1, skX: -30, skY: -30, alpha: 1 }, !0),
                            this.setPart(this.part13, { x: 28, y: 61, angle: 0, scX: 1, scY: 1, skX: 30, skY: 30, alpha: 1 }, !0),
                            this.setPart(this.part14, { x: 16, y: 103, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                            this.setPart(this.part15, { x: 28, y: 103, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                            this.setPart(this.part16, { x: 28, y: 52, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                            this.setPart(this.part17, { x: 28, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                            this.setPart(this.part18, { x: 4, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                            this.setPart(this.part19, { x: 16, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                            this.setPart(this.part20, { x: 16, y: 46, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                            this.setPart(this.part21, { x: 4, y: 103, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                            this.setPart(this.part22, { x: 4, y: 64, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                            this.setPart(this.part23, { x: 4, y: 10, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0));
                    }),
                    (Level10BossDoor.prototype.free = function () {
                        (this.group = null),
                            (this.part23 = null),
                            (this.part22 = null),
                            (this.part21 = null),
                            (this.part20 = null),
                            (this.part19 = null),
                            (this.part18 = null),
                            (this.part17 = null),
                            (this.part16 = null),
                            (this.part15 = null),
                            (this.part14 = null),
                            (this.part13 = null),
                            (this.part12 = null),
                            (this.part11 = null),
                            (this.part10 = null);
                    }),
                    Level10BossDoor
                );
            })(Client.BasicSimpleAnim);
            Client.Level10BossDoor = Level10BossDoor;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl10Door = (function (_super) {
                function Lvl10Door() {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.doorOpener = !1),
                        (_this.doorClosed = !1),
                        (_this.door = Client.GameManager.instance.layerBackground.create(222, 426, "level10", "door instance 10000")),
                        Client.Main.instance.physics.box2d.enable(_this.door),
                        (_this.door.body.kinematic = !0),
                        (_this.lamp = Client.GameManager.instance.layerBackground.create(170, 457, "level10", "lamp instance 10000")),
                        (_this.lamp.visible = !1),
                        (_this.energy = Client.GameManager.instance.layerBackground.create(129, 432, "level10", "energy instance 10000")),
                        _this.energy.animations.add("anim", Phaser.Animation.generateFrameNames("energy instance 1", 0, 6, "", 4), 30, !1).onComplete.add(function () {
                            this.energy.play("anim2"), (this.lamp.visible = !0);
                        }, _this),
                        _this.energy.animations.add("anim2", Phaser.Animation.generateFrameNames("energy instance 1", 7, 9, "", 4), 30, !1).onComplete.add(_this.openDoor, _this),
                        (_this.energy.visible = !1),
                        _this
                    );
                }
                return (
                    __extends(Lvl10Door, _super),
                    (Lvl10Door.prototype.openDoor = function () {
                        Client.Main.instance.add
                            .tween(this.door.body)
                            .to({ y: this.door.body.y - 172 }, 1200, "Linear", !0)
                            .onComplete.add(function () {
                                Client.GameManager.instance.hero.setEnableMotor(!0), Client.Main.instance.add.tween(Client.Main.instance.camera).to({ x: 168 }, 2500, "Linear", !0);
                            }, this);
                    }),
                    (Lvl10Door.prototype.closeDoor = function () {
                        Client.Main.instance.add.tween(this.door.body).to({ y: this.door.body.y + 172 }, 1200, "Linear", !0);
                    }),
                    (Lvl10Door.prototype.update = function () {
                        !this.doorOpener &&
                            60 < Client.GameManager.instance.hero.bodyBase.x &&
                            ((this.doorOpener = !0), Client.GameManager.instance.hero.setEnableMotor(!1), (this.energy.visible = !0), this.energy.play("anim"), Client.SoundManager.playSFX("s_lvl10_hacking")),
                            !this.doorClosed &&
                                320 < Client.GameManager.instance.hero.bodyBase.x &&
                                ((this.doorClosed = !0), Client.GameManager.instance.hero.setEnableMotor(!1), Client.GameManager.instance.hero.setClickable(!0), this.closeDoor());
                    }),
                    (Lvl10Door.prototype.free = function () {
                        (this.door = null), (this.lamp = null), (this.energy = null);
                    }),
                    Lvl10Door
                );
            })(Client.BasicElement);
            Client.Lvl10Door = Lvl10Door;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl10Hook = (function (_super) {
                function Lvl10Hook(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.currBag = null),
                        (_this.dragTime = 0),
                        (_this.checkContact = !1),
                        (_this.bossConnect = !1),
                        (_this.timeToConnect = !1),
                        (_this.handlerX = 0),
                        (_this.handlerSoundPause = 0),
                        (_this.platformSound = !1),
                        (_this.vChain = Client.GameManager.instance.layerBackground.create(353, -200, "level10", "chain1 instance 10000", !0, 1)),
                        _this.vChain.anchor.set(0, 0),
                        (_this.vChain.angle = 90),
                        (_this.hookContainer = new Phaser.Group(game)),
                        (_this.hookContainer.x = 348),
                        (_this.hookContainer.y = 230),
                        Client.GameManager.instance.layerBackground.addChildAt(_this.hookContainer, 2),
                        (_this.hook = game.make.button(0, 0, "level10", _this.stopDrag, _this, "hook instance 10002", "hook instance 10000", "hook instance 10001", "hook instance 10001")),
                        _this.hook.anchor.set(0.5),
                        _this.hookContainer.addChild(_this.hook),
                        _this.hook.input.enableDrag(),
                        (_this.hook.input.boundsRect = new Phaser.Rectangle(_this.hook.x - _this.hook.width / 2, _this.hook.y - _this.hook.height / 2, _this.hook.width, 220)),
                        _this.hook.input.setDragLock(!1, !0),
                        (_this.hook.inputEnabled = !1),
                        (_this.hook.y = 55),
                        (_this.vMask = game.make.graphics(0, 0)),
                        _this.vMask.beginFill(16711680, 0),
                        _this.vMask.drawRect(-7, 0, 12, 300),
                        _this.vMask.endFill(),
                        (_this.hChain = Client.GameManager.instance.layerUpper.create(348, 140, "level10", "chain1 instance 10000")),
                        Client.GameManager.instance.layerUpper.create(800, 135, "level10", "bgPart instance 10000"),
                        (_this.hMask = game.make.graphics(0, 0)),
                        _this.hMask.beginFill(16711680, 0.5),
                        _this.hMask.drawRect(0, -6, 430, 11),
                        _this.hMask.endFill(),
                        (_this.handler = game.make.button(348, 147, "level10", _this.stopDrag, _this, "chainHandler instance 10002", "chainHandler instance 10000", "chainHandler instance 10001", "chainHandler instance 10001")),
                        _this.handler.anchor.set(0.5),
                        Client.GameManager.instance.layerUpper.addChild(_this.handler),
                        (_this.handler.hitArea = new Phaser.Rectangle(-35, -17, 70, 35)),
                        _this.handler.input.enableDrag(),
                        (_this.handler.input.boundsRect = new Phaser.Rectangle(_this.handler.x - _this.handler.width / 2, _this.handler.y - _this.handler.height / 2, 430, _this.handler.height)),
                        _this.handler.input.setDragLock(!0, !1),
                        (_this.handler.inputEnabled = !1),
                        (_this.handlerX = _this.handler.x),
                        _this.handler.addChild(_this.vMask),
                        (_this.vChain.mask = _this.vMask),
                        _this.handler.addChild(_this.hMask),
                        (_this.hChain.mask = _this.hMask),
                        Client.GameManager.instance.layerUpper.create(779, 128, "level10", "overlay instance 10000"),
                        (_this.platform = Client.GameManager.instance.layerElements.create(800, 335, "level10", "lvl10_platform_mc instance 10000")),
                        game.physics.box2d.enable(_this.platform),
                        _this.platform.anchor.set(0.5, 1),
                        _this.platform.body.setRectangle(160, 15, 0, -11),
                        (_this.platform.body.static = !0),
                        (_this.platform.body.fixedRotation = !0),
                        _this.platform.body.setCollisionMask(~Client.FilterGroups.PARTICLE),
                        (_this.hookBody = new Phaser.Physics.Box2D.Body(Client.Main.instance, null, 350, 250, 2)),
                        _this.hookBody.setRectangle(25, 45),
                        (_this.hookBody.fixedRotation = !0),
                        (_this.hookBody.dynamic = !0),
                        (_this.hookBody.sensor = !0),
                        _this.hookBody.setBodyContactCallback(Client.GameManager.instance.level.boss.body, _this.bossContact, _this),
                        _this.addDragObjects(),
                        _this.acivate(),
                        _this
                    );
                }
                return (
                    __extends(Lvl10Hook, _super),
                    (Lvl10Hook.prototype.addDragObjects = function () {
                        (this.bag1 = new Client.Lvl10Bag(Client.Main.instance, 524, 494, "level10", "lvl10_bag1_mc", !1)),
                            Client.GameManager.instance.layerElements.addChild(this.bag1),
                            this.bag1.addBody(50, 35, 2, 9, 1),
                            (this.bag3 = new Client.Lvl10Bag(Client.Main.instance, 281, 354, "level10", "lvl10_bag3_mc", !1)),
                            Client.GameManager.instance.layerElements.addChild(this.bag3),
                            this.bag3.addBody(45, 53, 0, 0, 3),
                            (this.bag2 = new Client.Lvl10Bag(Client.Main.instance, 553, 494, "level10", "lvl10_bag2_mc", !1)),
                            Client.GameManager.instance.layerElements.addChild(this.bag2),
                            this.bag2.activate(),
                            this.bag2.addBody(55, 33, 0, 0, 2),
                            (this.bag2.body.angle = 30);
                        var body = new Phaser.Physics.Box2D.Body(Client.Main.instance, null, this.platform.body.x, this.platform.body.y, 2);
                        body.setRectangle(170, 16, 0, 0),
                            (body.fixedRotation = !0),
                            (body.sensor = !0),
                            Client.Main.instance.physics.box2d.revoluteJoint(this.platform.body, body, 0, -11, 0, 0, 0, 0),
                            body.setBodyContactCallback(this.bag1.body, this.contact, this),
                            body.setBodyContactCallback(this.bag2.body, this.contact, this),
                            body.setBodyContactCallback(this.bag3.body, this.contact, this);
                    }),
                    (Lvl10Hook.prototype.contact = function (body1, body2, fixture1, fixture2, begin) {
                        begin &&
                            (null !== body1.sprite
                                ? ("bag1" === body1.sprite.name ? (this.currBag = this.bag1) : "bag2" === body1.sprite.name && (this.currBag = this.bag2), "bag3" === body1.sprite.name && (this.currBag = this.bag3))
                                : null !== body2.sprite &&
                                  ("bag1" === body2.sprite.name ? (this.currBag = this.bag1) : "bag2" === body2.sprite.name && (this.currBag = this.bag2), "bag3" === body2.sprite.name && (this.currBag = this.bag3))),
                            (this.checkContact = begin);
                    }),
                    (Lvl10Hook.prototype.bagClick = function () {
                        this.bag2.body.dynamic = !0;
                    }),
                    (Lvl10Hook.prototype.stopDrag = function () {}),
                    (Lvl10Hook.prototype.update = function () {
                        if (
                            ((this.vChain.x = this.handler.x + 4),
                            (this.hookContainer.x = this.handler.x),
                            (this.vChain.y = this.hook.world.y - 430),
                            null !== this.currBag &&
                                this.checkContact &&
                                ("bag1" === this.currBag.name
                                    ? this.currBag.setPlatformPosition(this.platform.body.x - 35, this.platform.body.y - 45)
                                    : "bag2" === this.currBag.name
                                    ? this.currBag.setPlatformPosition(this.platform.body.x, this.platform.body.y - 35)
                                    : "bag3" === this.currBag.name && this.currBag.setPlatformPosition(this.platform.body.x + 35, this.platform.body.y - 45),
                                (this.currBag = null),
                                (this.checkContact = !1),
                                Client.SoundManager.playSFX("s_lvl10_weightOnBalance")),
                            this.timeToConnect &&
                                !this.bossConnect &&
                                ((this.bossConnect = !0),
                                this.deactivate(),
                                Client.GameManager.instance.level.boss.stopMoving(),
                                this.connectToBoss(),
                                Client.Main.instance.physics.box2d.revoluteJoint(this.hookBody, Client.GameManager.instance.level.boss.body, 0, 0, 20, -50),
                                this.bag1.activate(),
                                this.bag2.activate(),
                                this.bag3.activate()),
                            this.bossConnect)
                        ) {
                            this.hookContainer.y = this.hookBody.y - 207;
                            var dist = 230 - this.hookContainer.y;
                            this.hChain.x = 348 + dist;
                        } else (this.hookBody.x = this.hook.world.x), (this.hookBody.y = this.hook.world.y), this.hookBody.setZeroVelocity();
                        !this.platformSound && this.bag1.onPlatform && this.bag2.onPlatform && this.bag3.onPlatform && ((this.platformSound = !0), Client.SoundManager.playSFX("s_lvl10_bossUp")),
                            this.handlerX !== this.handler.x && (this.handlerSoundPause++, 15 === this.handlerSoundPause && ((this.handlerSoundPause = 0), Client.SoundManager.playSFX("s_lvl10_hookDrag"))),
                            (this.handlerX = this.handler.x);
                    }),
                    (Lvl10Hook.prototype.bossContact = function () {
                        this.timeToConnect || (this.timeToConnect = !0);
                    }),
                    (Lvl10Hook.prototype.connectToBoss = function () {
                        var spriteA;
                        (this.hookBody.mass = 2),
                            (this.platform.body.mass = 1),
                            (this.platform.body.dynamic = !0),
                            Client.Main.instance.physics.box2d.pulleyJoint(this.hookBody, this.platform, 0, 0, 0, 0, this.hookBody.x, 260, this.platform.x, 260, 1, 150, 90),
                            (spriteA = new Phaser.Physics.Box2D.Body(Client.Main.instance, null, this.platform.body.x, this.platform.body.y, 0)).setRectangle(20, 20, 0, 0, 0),
                            (spriteA.sensor = !0),
                            Client.Main.instance.physics.box2d.prismaticJoint(spriteA, this.platform.body, 0, 1, 0, 0, 0, 0, 0, 0, !1),
                            (spriteA = new Phaser.Physics.Box2D.Body(Client.Main.instance, null, this.hookBody.x, this.hookBody.y, 0)).setRectangle(20, 20, 0, 0, 0),
                            (spriteA.sensor = !0),
                            Client.Main.instance.physics.box2d.prismaticJoint(spriteA, this.hookBody, 0, 1, 0, 0, 0, 0, 0, 0, !1);
                    }),
                    (Lvl10Hook.prototype.acivate = function () {
                        (this.handler.inputEnabled = !0),
                            (this.handler.input.useHandCursor = !0),
                            this.handler.setFrames("chainHandler instance 10002", "chainHandler instance 10001", "chainHandler instance 10001", "chainHandler instance 10001"),
                            (this.hook.inputEnabled = !0),
                            (this.hook.input.useHandCursor = !0),
                            this.hook.setFrames("hook instance 10002", "hook instance 10001", "hook instance 10001", "hook instance 10001");
                    }),
                    (Lvl10Hook.prototype.deactivate = function () {
                        (this.handler.inputEnabled = !1),
                            this.handler.setFrames("chainHandler instance 10000", "chainHandler instance 10000", "chainHandler instance 10000", "chainHandler instance 10000"),
                            (this.hook.inputEnabled = !1),
                            this.hook.setFrames("hook instance 10000", "hook instance 10000", "hook instance 10000", "hook instance 10000");
                    }),
                    (Lvl10Hook.prototype.free = function () {
                        (this.handler = null), (this.hook = null), (this.vChain = null), (this.hookContainer = null), (this.hMask = null), (this.vMask = null), (this.platform = null);
                    }),
                    Lvl10Hook
                );
            })(Client.BasicElement);
            Client.Lvl10Hook = Lvl10Hook;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl10Loupe = (function (_super) {
                function Lvl10Loupe(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = 275),
                        (_this.group.y = 14),
                        _this.group.scale.set(1.44),
                        Client.GameManager.instance.layerUpper.addChild(_this.group),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level10", "loupe4 instance 10000")),
                        _this.part3.pivot.set(0, 0),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level10", "loupe3 instance 10000")),
                        _this.part2.pivot.set(0, 0),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level10", "loupe1 instance 10000")),
                        _this.part1.pivot.set(0, 0),
                        _this.group.addChild(_this.part1),
                        _this.setParts("start"),
                        _this
                    );
                }
                return (
                    __extends(Lvl10Loupe, _super),
                    (Lvl10Loupe.prototype.over = function () {
                        this.part2.frameName = "loupe3 instance 10001";
                    }),
                    (Lvl10Loupe.prototype.out = function () {
                        this.part2.frameName = "loupe3 instance 10000";
                    }),
                    (Lvl10Loupe.prototype.updateAnimation = function () {
                        "start" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (this.startTween(this.part1, 14, { y: 7, skX: 0, skY: 0, alpha: 0.15 }),
                                  this.startTween(this.part2, 28, { x: -4, y: 17, skX: -30, skY: -30 }),
                                  this.startTween(this.part3, 28, { x: 33, y: -5, skX: 0, skY: 0 }))
                                : 15 === this.counterAnim
                                ? this.startTween(this.part1, 14, { x: 33, y: -5, alpha: 0.38 })
                                : 29 === this.counterAnim
                                ? (this.setPart(this.part1, { x: 34, y: -3, alpha: 0.35 }), this.setPart(this.part2, { x: -3, skX: -28, skY: -28 }), this.setPart(this.part3, { y: -3 }))
                                : 31 === this.counterAnim && this.animComplete()
                            : "finish" === this.currAnim &&
                              (1 === this.counterAnim
                                  ? (this.startTween(this.part1, 14, { x: 37, y: 7, alpha: 0.15 }), this.startTween(this.part2, 30, { x: 2, y: 12, skX: 2, skY: 2 }), this.startTween(this.part3, 30, { x: 35, y: 16, skX: -3, skY: -3 }))
                                  : 15 === this.counterAnim
                                  ? this.startTween(this.part1, 16, { y: 16, skX: -3, skY: -3, alpha: 0 })
                                  : 31 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl10Loupe.prototype.setParts = function (value) {
                        "start" === value
                            ? (this.setPart(this.part1, { x: 37, y: 16, angle: 0, scX: 1, scY: 1, skX: -3, skY: -3, alpha: 0 }),
                              this.setPart(this.part2, { x: 2, y: 12, angle: 0, scX: 1, scY: 1, skX: 2, skY: 2, alpha: 1 }),
                              this.setPart(this.part3, { x: 35, y: 16, angle: 0, scX: 1, scY: 1, skX: -3, skY: -3, alpha: 1 }))
                            : "finish" === value &&
                              (this.setPart(this.part1, { x: 34, y: -3, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 0.35 }),
                              this.setPart(this.part2, { x: -3, y: 17, angle: 0, scX: 1, scY: 1, skX: -28, skY: -28, alpha: 1 }),
                              this.setPart(this.part3, { x: 33, y: -3, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl10Loupe.prototype.free = function () {
                        (this.group = null), (this.part3 = null), (this.part2 = null), (this.part1 = null);
                    }),
                    Lvl10Loupe
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl10Loupe = Lvl10Loupe;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl10Mobile = (function (_super) {
                function Lvl10Mobile(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.collected = !1),
                        (_this.modileFar = !1),
                        (_this.group = game.make.group()),
                        (_this.group.x = Client.GameManager.instance.level.boss.body.x),
                        (_this.group.y = 398),
                        Client.GameManager.instance.layerElements.addChild(_this.group),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level10", "mobile instance 10000")),
                        _this.part1.pivot.set(0, 0),
                        _this.group.addChild(_this.part1),
                        600 < Client.GameManager.instance.level.boss.body.x ? (_this.playAnim("far"), (_this.modileFar = !0)) : _this.playAnim("near"),
                        Client.GameManager.instance.hero.setClickable(!0),
                        _this
                    );
                }
                return (
                    __extends(Lvl10Mobile, _super),
                    (Lvl10Mobile.prototype.update = function () {
                        (_super.prototype.update.call(this), this.collected) ||
                            (Math.abs(this.part1.world.x - Client.GameManager.instance.hero.bodyBase.x) < 120 &&
                                ((this.collected = !0),
                                Client.GameManager.instance.hero.setEnableMotor(!1),
                                Client.GameManager.instance.hero.setClickable(!1),
                                (Client.GameManager.instance.hero.currState = Client.HeroState.finish),
                                Client.LevelBuilder.instance.levelComplete(60),
                                this.modileFar ? this.playAnim("take1") : this.playAnim("take2")));
                    }),
                    (Lvl10Mobile.prototype.updateAnimation = function () {
                        "far" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (Client.SoundManager.playSFX("s_lvl10_phoneDrop"), this.startTween(this.part1, 28, { x: 26, y: 66, skX: 105, skY: 105, alpha: 1 }))
                                : 29 === this.counterAnim
                                ? this.startTween(this.part1, 20, { x: -120, y: 60, skX: 60, skY: 60 })
                                : 49 === this.counterAnim && this.animComplete()
                            : "take1" === this.currAnim
                            ? 1 === this.counterAnim
                                ? this.startTween(this.part1, 20, { x: -155, y: 16 })
                                : 21 === this.counterAnim
                                ? this.startTween(this.part1, 20, { x: -258, y: 58, skX: -15, skY: -15, scX: 0.76, scY: 0.76, alpha: 0.3 })
                                : 43 === this.counterAnim
                                ? (this.part1.visible = !1)
                                : 45 === this.counterAnim && (this.animComplete(), (this.group.visible = !1))
                            : "near" === this.currAnim
                            ? 1 === this.counterAnim
                                ? this.startTween(this.part1, 26, { x: 26, y: 66, skX: 105, skY: 105, alpha: 1 })
                                : 27 === this.counterAnim
                                ? this.startTween(this.part1, 10, { x: -39, y: 59, skX: 60, skY: 60 })
                                : 37 === this.counterAnim && this.animComplete()
                            : "take2" === this.currAnim &&
                              (1 === this.counterAnim
                                  ? this.startTween(this.part1, 20, { x: -66, y: 25 })
                                  : 21 === this.counterAnim
                                  ? this.startTween(this.part1, 20, { x: -155, y: 51, skX: 15, skY: 15, scX: 0.74, scY: 0.74, alpha: 0.2 })
                                  : 43 === this.counterAnim && (this.animComplete(), (this.group.visible = !1)));
                    }),
                    (Lvl10Mobile.prototype.setParts = function (value) {
                        "far" === value
                            ? this.setPart(this.part1, { x: 19, y: -113, angle: 0, scX: 1, scY: 1, skX: 135, skY: 135, alpha: 0.2 })
                            : "take1" === value
                            ? this.setPart(this.part1, { x: -120, y: 60, angle: 0, scX: 1, scY: 1, skX: 60, skY: 60, alpha: 1 })
                            : "near" === value
                            ? ((this.part1.visible = !0), this.setPart(this.part1, { x: 19, y: -113, angle: 0, scX: 1, scY: 1, skX: 135, skY: 135, alpha: 0.2 }))
                            : "take2" === value && this.setPart(this.part1, { x: -39, y: 59, angle: 0, scX: 1, scY: 1, skX: 60, skY: 60, alpha: 1 });
                    }),
                    (Lvl10Mobile.prototype.free = function () {
                        (this.group = null), (this.part1 = null);
                    }),
                    Lvl10Mobile
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl10Mobile = Lvl10Mobile;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl10SecretBox = (function (_super) {
                function Lvl10SecretBox(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.fireNow = !1),
                        (_this.fireTime = 0),
                        (_this.nonStopFire = !1),
                        (_this.nonStopTimer = 0),
                        (_this.box = Client.GameManager.instance.layerUpper.create(389, 28, "level10", "secretBox instance 10000")),
                        _this.box.animations.add("anim", Phaser.Animation.generateFrameNames("secretBox instance 1", 0, 64, "", 4), 30, !1).onComplete.add(function () {
                            this.box.inputEnabled = !1;
                        }, _this),
                        (_this.box.inputEnabled = !0),
                        (_this.firePlace = Client.GameManager.instance.layerUpper.create(393, 60, "level10", "firePlace instance 10000")),
                        _this.firePlace.anchor.set(0.5),
                        Client.Main.instance.add.tween(_this.firePlace.scale).to({ x: 1.8, y: 1.8 }, 350, "Linear", !0, 0, -1, !0),
                        (_this.firePlace.visible = !1),
                        (_this.smoke = Client.GameManager.instance.layerUpper.create(367, 10, "level10", "smoke instance 10000")),
                        _this.smoke.animations.add("anim", Phaser.Animation.generateFrameNames("smoke instance 1", 0, 26, "", 4), 30, !0),
                        _this.smoke.play("anim"),
                        (_this.smoke.visible = !1),
                        (_this.fire = Client.GameManager.instance.layerUpper.create(414, 80, "level6", "Fire instance 10000")),
                        _this.fire.animations.add("anim", Phaser.Animation.generateFrameNames("Fire instance 1", 0, 80, "", 4), 30, !0),
                        _this.fire.play("anim"),
                        _this.fire.anchor.set(0.5, 1),
                        (_this.fire.visible = !1),
                        (_this.loupe = new Client.Lvl10Loupe(game)),
                        Client.GameManager.instance.level.updateElements.push(_this.loupe),
                        (_this.fakeButton = game.make.graphics(300, 20)),
                        _this.fakeButton.beginFill(16711680, 0),
                        _this.fakeButton.drawRect(0, 0, 80, 50),
                        _this.fakeButton.endFill(),
                        (_this.fakeButton.inputEnabled = !0),
                        (_this.fakeButton.input.useHandCursor = !0),
                        _this.fakeButton.events.onInputOver.add(_this.over, _this),
                        _this.fakeButton.events.onInputOut.add(_this.out, _this),
                        _this.fakeButton.events.onInputDown.add(_this.down, _this),
                        _this.fakeButton.events.onInputUp.add(_this.up, _this),
                        Client.GameManager.instance.layerUpper.addChild(_this.fakeButton),
                        _this
                    );
                }
                return (
                    __extends(Lvl10SecretBox, _super),
                    (Lvl10SecretBox.prototype.over = function () {
                        this.loupe.over();
                    }),
                    (Lvl10SecretBox.prototype.out = function () {
                        this.loupe.out();
                    }),
                    (Lvl10SecretBox.prototype.down = function () {
                        (this.fireNow = !0), this.loupe.playAnim("start");
                    }),
                    (Lvl10SecretBox.prototype.up = function () {
                        (this.fireNow = !1), (this.firePlace.visible = !1), (this.smoke.visible = !1), (this.fireTime = 0), this.loupe.playAnim("finish");
                    }),
                    (Lvl10SecretBox.prototype.update = function () {
                        !this.nonStopFire &&
                            this.fireNow &&
                            (this.fireTime++,
                            25 === this.fireTime
                                ? (this.firePlace.visible = !0)
                                : 50 === this.fireTime
                                ? (this.smoke.visible = !0)
                                : 180 === this.fireTime && ((this.smoke.visible = !1), (this.firePlace.visible = !1), (this.fire.visible = !0), (this.nonStopFire = !0))),
                            this.nonStopFire &&
                                (this.nonStopTimer++,
                                60 === this.nonStopTimer
                                    ? this.box.play("anim")
                                    : 150 === this.nonStopTimer &&
                                      (Client.GameManager.instance.level.addQuestCar(412, 62, Client.GameManager.instance.layerUpper, 1),
                                      Client.GameManager.instance.level.questCar &&
                                          ((Client.GameManager.instance.level.questCar.alpha = 0), Client.Main.instance.add.tween(Client.GameManager.instance.level.questCar).to({ alpha: 1 }, 350, "Linear", !0)),
                                      Client.Main.instance.add.tween(this.fire).to({ alpha: 0 }, 350, "Linear", !0)));
                    }),
                    (Lvl10SecretBox.prototype.free = function () {
                        (this.box = null), (this.fire = null), (this.firePlace = null), (this.loupe = null), (this.fakeButton = null), (this.smoke = null);
                    }),
                    Lvl10SecretBox
                );
            })(Client.BasicElement);
            Client.Lvl10SecretBox = Lvl10SecretBox;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var BasePhoneMenus = (function (_super) {
                function BasePhoneMenus(_game, _x, _y, _container) {
                    var _this = _super.call(this) || this;
                    (_this.game = _game), (_this.container = _container), (_this.menu = new Phaser.Group(_game)), (_this.menu.x = _x), (_this.menu.y = _y), (_this.menu.visible = !1), _this.container.addChild(_this.menu);
                    var mask = _this.game.make.graphics();
                    return mask.beginFill(16711680, 0.5), mask.drawRect(0, 0, 177, 269), mask.endFill(), _this.menu.addChild(mask), (_this.menu.mask = mask), (mask = null), _this;
                }
                return (
                    __extends(BasePhoneMenus, _super),
                    (BasePhoneMenus.prototype.show = function () {}),
                    (BasePhoneMenus.prototype.close = function () {}),
                    (BasePhoneMenus.prototype.free = function () {
                        (this.game = null), (this.menu = null), (this.background = null), (this.container = null);
                    }),
                    BasePhoneMenus
                );
            })(Client.BasicElement);
            Client.BasePhoneMenus = BasePhoneMenus;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl11CallingMenu = (function (_super) {
                function Lvl11CallingMenu(_game, _x, _y, _container) {
                    var _this = _super.call(this, _game, _x, _y, _container) || this;
                    (_this.currentContact = 0), (_this.callComplete = !1), (_this.background = _this.menu.create(0, 0, "level11", "callsBack instance 10000")), (_this.background.inputEnabled = !0);
                    var btnClose = new Client.SimpleButton(_this.game, 85, 240, "level11", "closeCalls", !0);
                    return btnClose.activate(), btnClose.events.onInputDown.add(_this.close, _this), _this.background.addChild(btnClose), (btnClose = null), _this.addContacts(), _this.addCallingMenu(), _this;
                }
                return (
                    __extends(Lvl11CallingMenu, _super),
                    (Lvl11CallingMenu.prototype.addContacts = function () {
                        for (var i = 0; i < 5; i++) {
                            new Client.Lvl11Contact(this.game, 3, 4 + 43 * i, this.background, i, this);
                            null;
                        }
                    }),
                    (Lvl11CallingMenu.prototype.addCallingMenu = function () {
                        (this.callMenuBack = this.game.make.sprite(0, 0, "level11", "callAbonentBack instance 10000")),
                            (this.callMenuBack.inputEnabled = !0),
                            this.background.addChild(this.callMenuBack),
                            (this.callMenuIco = this.game.make.sprite(27, 62, "level11", "iconForCall instance 10000")),
                            this.callMenuBack.addChild(this.callMenuIco),
                            (this.callButton = new Client.SimpleButton(this.game, 87, 221, "level11", "stopCall", !0)),
                            this.callButton.activate(),
                            this.callButton.events.onInputDown.add(this.stopCall, this),
                            this.callMenuBack.addChild(this.callButton),
                            (this.bubble1 = this.game.make.sprite(124, 45, "level11", "bubble1 instance 10000")),
                            this.bubble1.anchor.set(0.5),
                            this.callMenuBack.addChild(this.bubble1),
                            (this.bubble2 = this.game.make.sprite(124, 45, "level11", "bankirBubble instance 10000")),
                            this.bubble2.anchor.set(0.5),
                            this.bubble2.animations.add("show", Phaser.Animation.generateFrameNames("bankirBubble instance 1", 0, 50, "", 4), 20, !1).onComplete.add(this.stopCall, this),
                            this.callMenuBack.addChild(this.bubble2);
                    }),
                    (Lvl11CallingMenu.prototype.stopCall = function () {
                        this.callComplete ||
                            ((this.callComplete = !0),
                            this.callButton.deactivate(!1),
                            this.game.add
                                .tween(this.callMenuBack)
                                .to({ alpha: 0 }, 300, "Linear", !0)
                                .onComplete.add(function () {
                                    2 === this.currentContact && Client.GameManager.instance.level.map.showScanButton(), (this.callMenuBack.visible = !1);
                                }, this));
                    }),
                    (Lvl11CallingMenu.prototype.showCallMenu = function (_id) {
                        (this.currentContact = _id),
                            (this.callComplete = !1),
                            this.callButton.activate(),
                            (this.callMenuBack.visible = !0),
                            this.game.add.tween(this.callMenuBack).to({ alpha: 1 }, 300, "Linear", !0),
                            (this.callMenuIco.frameName = "iconForCall instance 1000" + _id),
                            (this.bubble1.alpha = 0),
                            this.game.add
                                .tween(this.bubble1)
                                .to({ alpha: 1 }, 200, "Linear", !0, 500)
                                .onComplete.add(function () {
                                    Client.GameManager.instance.level.map.showIco(_id),
                                        this.game.add
                                            .tween(this.bubble1)
                                            .to({ alpha: 0 }, 200, "Linear", !0, 1200)
                                            .onComplete.add(function () {
                                                this.bubble2.play("show");
                                            }, this);
                                }, this),
                            Client.SoundManager.playSFX("s_lvl11_dialog" + (_id + 1));
                    }),
                    (Lvl11CallingMenu.prototype.show = function () {
                        (this.menu.visible = !0),
                            (this.background.x = 20),
                            (this.background.y = 95),
                            (this.background.alpha = 0),
                            this.background.scale.set(0.7, 0.2),
                            this.game.add.tween(this.background).to({ x: 0, y: 0, alpha: 1 }, 400, "Linear", !0),
                            this.game.add.tween(this.background.scale).to({ x: 1, y: 1 }, 400, "Linear", !0),
                            (this.callMenuBack.visible = !1),
                            (this.callMenuBack.alpha = 0);
                    }),
                    (Lvl11CallingMenu.prototype.close = function () {
                        this.menu.visible = !1;
                    }),
                    (Lvl11CallingMenu.prototype.free = function () {
                        _super.prototype.free.call(this), (this.callMenuBack = null), (this.callMenuIco = null), (this.callButton = null), (this.bubble1 = null), (this.bubble2 = null);
                    }),
                    Lvl11CallingMenu
                );
            })(Client.BasePhoneMenus);
            Client.Lvl11CallingMenu = Lvl11CallingMenu;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl11Contact = (function (_super) {
                function Lvl11Contact(_game, _x, _y, _container, _id, _menu) {
                    var _this = _super.call(this) || this;
                    (_this.id = 0), (_this.id = _id), (_this.callingMenu = _menu), (_this.icon = _game.make.sprite(_x, _y, "level11", "abonentIco instance 10000")), _container.addChild(_this.icon);
                    var numberq = _game.make.sprite(_x + 40, _y, "level11", "abonentNumber instance 1000" + _this.id);
                    return (
                        _container.addChild(numberq),
                        (numberq = null),
                        (_this.button = _game.make.sprite(_x + 115, _y, "level11", "callBtn instance 10000")),
                        _this.button.animations.add("call", Phaser.Animation.generateFrameNames("callBtn instance 1", 3, 21, "", 4), 30, !1).onComplete.add(_this.showCallMenu, _this),
                        (_this.button.inputEnabled = !0),
                        (_this.button.input.useHandCursor = !0),
                        _this.button.events.onInputDown.add(_this.startCall, _this),
                        _this.button.events.onInputOver.add(_this.over, _this),
                        _this.button.events.onInputOut.add(_this.out, _this),
                        _container.addChild(_this.button),
                        _this
                    );
                }
                return (
                    __extends(Lvl11Contact, _super),
                    (Lvl11Contact.prototype.startCall = function () {
                        (this.button.inputEnabled = !1), this.button.play("call");
                    }),
                    (Lvl11Contact.prototype.callCompleted = function () {
                        (this.button.frameName = "callBtn instance 10002"), (this.icon.frameName = "abonentIco instance 1000" + (this.id + 1));
                    }),
                    (Lvl11Contact.prototype.over = function () {
                        this.button.inputEnabled && (this.button.frameName = "callBtn instance 10001");
                    }),
                    (Lvl11Contact.prototype.out = function () {
                        this.button.inputEnabled && (this.button.frameName = "callBtn instance 10000");
                    }),
                    (Lvl11Contact.prototype.showCallMenu = function () {
                        this.callingMenu.showCallMenu(this.id), Client.Main.instance.add.tween(this.button).to({ alpha: 1 }, 400, "Linear", !0).onComplete.add(this.callCompleted, this);
                    }),
                    (Lvl11Contact.prototype.free = function () {
                        (this.icon = null), (this.button = null), (this.callingMenu = null);
                    }),
                    Lvl11Contact
                );
            })(Client.BasicElement);
            Client.Lvl11Contact = Lvl11Contact;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl11GameMenu = (function (_super) {
                function Lvl11GameMenu(_game, _x, _y, _container) {
                    var _this = _super.call(this, _game, _x, _y, _container) || this;
                    (_this.background = _this.menu.create(-1, 1, "level11", "menuGamesBack instance 10000")), (_this.background.inputEnabled = !0);
                    var btnClose = new Client.SimpleButton(_this.game, 140, 20, "level11", "closeGameMenu", !0);
                    btnClose.activate(), btnClose.events.onInputDown.add(_this.close, _this), _this.background.addChild(btnClose), (btnClose = null);
                    var btnStart = new Client.SimpleButton(_this.game, 60, 18, "level11", "startBody", !0);
                    return (
                        btnStart.activate(),
                        btnStart.events.onInputDown.add(_this.startGame, _this),
                        _this.background.addChild(btnStart),
                        (btnStart = null),
                        (_this.snakeGame = new Client.SnakeGame(_this.game, _this.background)),
                        Client.GameManager.instance.level.updateElements.push(_this.snakeGame),
                        Client.GameManager.instance.level.addQuestCar(130, 55, _this.background),
                        Client.GameManager.instance.level.questCar && (Client.GameManager.instance.level.questCar.scale.set(0.8), (Client.GameManager.instance.level.questCar.visible = !1)),
                        _this
                    );
                }
                return (
                    __extends(Lvl11GameMenu, _super),
                    (Lvl11GameMenu.prototype.startGame = function () {
                        this.snakeGame.InitNewGame(!0);
                    }),
                    (Lvl11GameMenu.prototype.show = function () {
                        (this.menu.visible = !0), (this.background.alpha = 0), this.game.add.tween(this.background).to({ alpha: 1 }, 400, "Linear", !0);
                    }),
                    (Lvl11GameMenu.prototype.close = function () {
                        this.snakeGame.clearGameField(), (this.menu.visible = !1);
                    }),
                    (Lvl11GameMenu.prototype.free = function () {
                        _super.prototype.free.call(this), (this.snakeGame = null);
                    }),
                    Lvl11GameMenu
                );
            })(Client.BasePhoneMenus);
            Client.Lvl11GameMenu = Lvl11GameMenu;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl11Map = (function (_super) {
                function Lvl11Map(game) {
                    var _this = _super.call(this) || this;
                    (_this.mapOpened = !1),
                        (_this.icosPosition = [
                            [16, 79],
                            [232, 196],
                            [87, 17],
                            [126, 143],
                            [171, 48],
                        ]),
                        (_this.icons = new Array()),
                        (_this.findBossByScan = !1),
                        (_this.findBossByCall = !1),
                        (_this.scanButton = null),
                        (_this.group = game.make.group()),
                        (_this.group.x = 701),
                        (_this.group.y = 373),
                        (_this.group.visible = !1),
                        Client.GameManager.instance.layerUpper.addChild(_this.group),
                        (_this.btn = game.make.sprite(_this.group.x, _this.group.y + 10, "level7", "mapButton instance 10000")),
                        _this.btn.animations.add("over", Phaser.Animation.generateFrameNames("mapButton instance 1", 0, 5, "", 4), 30, !1),
                        _this.btn.animations.add("out", Phaser.Animation.generateFrameNames("mapButton instance 1", 5, 10, "", 4), 30, !1),
                        _this.btn.anchor.set(0.5),
                        (_this.btn.inputEnabled = !0),
                        (_this.btn.input.useHandCursor = !0),
                        _this.btn.events.onInputOver.add(_this.overMapBtn, _this),
                        _this.btn.events.onInputOut.add(_this.outMapBtn, _this),
                        _this.btn.events.onInputDown.add(_this.downMapBtn, _this),
                        Client.GameManager.instance.layerUpper.addChild(_this.btn),
                        (_this.part5 = new Client.SASprite(game, 0, 0, "level11", "mapBack instance 10000")),
                        _this.part5.pivot.set(4, 4),
                        _this.group.addChild(_this.part5),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "level11", "mapCorner instance 10000")),
                        _this.part4.pivot.set(0, 0),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level11", "mapCorner instance 10000")),
                        _this.part3.pivot.set(0, 0),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level11", "mapCorner instance 10000")),
                        _this.part2.pivot.set(0, 0),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level11", "mapCorner instance 10000")),
                        _this.part1.pivot.set(0, 0),
                        _this.group.addChild(_this.part1);
                    var mask = Client.Main.instance.make.graphics();
                    return (
                        mask.beginFill(16711680, 0.5),
                        mask.drawRect(-302, -287, 309, 303),
                        mask.endFill(),
                        _this.group.addChild(mask),
                        (_this.scanOver = game.make.sprite(0, 0, "level11", "scanOverlay instance 10000")),
                        (_this.scanOver.mask = mask),
                        (_this.scanOver.alpha = 0.8),
                        _this.part5.addChild(_this.scanOver),
                        (_this.scanEffect = game.make.sprite(150, 400, "level11", "scanMc instance 10000")),
                        _this.scanEffect.anchor.set(0.5),
                        (_this.scanEffect.mask = mask),
                        _this.part5.addChild(_this.scanEffect),
                        (_this.scanOver.visible = !1),
                        (_this.scanEffect.visible = !1),
                        _this.setParts("show"),
                        _this.addBossPlace(),
                        _this.addIcons(),
                        _this
                    );
                }
                return (
                    __extends(Lvl11Map, _super),
                    (Lvl11Map.prototype.addRoad = function () {
                        var road = new Client.Lvl11Road(Client.Main.instance, this.part5);
                        Client.GameManager.instance.level.updateElements.push(road), (road = null);
                    }),
                    (Lvl11Map.prototype.startScan = function () {
                        Client.SoundManager.stopSFXLoop("s_lvl7_photoScan"),
                            (this.scanOver.visible = !0),
                            (this.scanEffect.visible = !0),
                            this.scanButton.deactivate(!1),
                            Client.Main.instance.add.tween(this.scanButton).to({ x: this.scanButton.x + 82 }, 300, "Linear", !0),
                            Client.Main.instance.add
                                .tween(this.scanEffect)
                                .to({ y: -20 }, 1700, "Linear", !0)
                                .onComplete.add(function () {
                                    Client.Main.instance.add.tween(this.scanEffect).to({ y: 400 }, 1700, "Linear", !0),
                                        Client.Main.instance.add
                                            .tween(this.scanOver)
                                            .to({ alpha: 0 }, 500, "Linear", !0, 1200)
                                            .onComplete.add(function () {
                                                (this.scanOver.visible = !1), (this.scanEffect.visible = !1), this.addRoad(), Client.SoundManager.stopSFXLoop("s_lvl7_photoScan");
                                            }, this);
                                }, this);
                    }),
                    (Lvl11Map.prototype.addBossPlace = function () {
                        (this.bossPlace = Client.Main.instance.make.sprite(160, 278, "level11", "bossFrame instance 10000")),
                            this.bossPlace.anchor.set(0.5),
                            (this.bossPlace.alpha = 0),
                            this.part5.addChild(this.bossPlace),
                            (this.bossFace = Client.Main.instance.make.sprite(0, 0, "level11", "bossFace instance 10000")),
                            this.bossFace.anchor.set(0.5),
                            (this.bossFace.alpha = 0),
                            this.bossPlace.addChild(this.bossFace);
                    }),
                    (Lvl11Map.prototype.foundBoss = function () {
                        (this.findBossByScan = !0), Client.Main.instance.add.tween(this.bossFace).to({ alpha: 1 }, 300, "Linear", !0), this.showScanButton();
                    }),
                    (Lvl11Map.prototype.addIcons = function () {
                        for (var i = 0; i < this.icosPosition.length; i++) {
                            var ico = Client.Main.instance.make.sprite(this.icosPosition[i][0], this.icosPosition[i][1], "level11", "mapIcons instance 1000" + i);
                            (ico.alpha = 0), this.part5.addChild(ico), this.icons.push(ico), (ico = null);
                        }
                    }),
                    (Lvl11Map.prototype.showIco = function (_id) {
                        Client.Main.instance.add.tween(this.icons[_id]).to({ alpha: 1 }, 200, "Linear", !0), 2 === _id && (this.findBossByCall = !0);
                    }),
                    (Lvl11Map.prototype.showScanButton = function () {
                        this.findBossByCall &&
                            this.findBossByScan &&
                            null === this.scanButton &&
                            ((this.scanButton = new Client.SimpleButton(Client.Main.instance, 160, 278, "level11", "scanButton", !0)),
                            this.scanButton.activate(),
                            this.scanButton.events.onInputDown.add(this.startScan, this),
                            Client.Main.instance.add.tween(this.scanButton).to({ x: this.scanButton.x - 82 }, 300, "Linear", !0),
                            this.part5.addChildAt(this.scanButton, 0));
                    }),
                    (Lvl11Map.prototype.overMapBtn = function () {
                        this.btn.play("over");
                    }),
                    (Lvl11Map.prototype.outMapBtn = function () {
                        this.btn.play("out");
                    }),
                    (Lvl11Map.prototype.downMapBtn = function () {
                        this.mapOpened || ((this.btn.visible = !1), (this.btn.inputEnabled = !1), (this.group.visible = !0), this.openMap());
                    }),
                    (Lvl11Map.prototype.openMap = function () {
                        this.mapOpened || ((this.group.visible = !0), (this.btn.visible = !1), this.playAnim("show")), (this.mapOpened = !0);
                    }),
                    (Lvl11Map.prototype.updateAnimation = function () {
                        "show" === this.currAnim &&
                            (35 === this.counterAnim
                                ? (this.startTween(this.part1, 26, { y: -281 }), this.startTween(this.part4, 26, { y: -291 }), this.startTween(this.part5, 26, { y: -286, scY: 0.96 }))
                                : 71 === this.counterAnim
                                ? (this.startTween(this.part1, 68, { x: -306 }), this.startTween(this.part2, 68, { x: -295 }), this.startTween(this.part5, 68, { x: -301, scX: 0.99 }))
                                : 139 === this.counterAnim && (this.animComplete(), Client.Main.instance.add.tween(this.bossPlace).to({ alpha: 1 }, 300, "Linear", !0)));
                    }),
                    (Lvl11Map.prototype.setParts = function (value) {
                        "show" === value &&
                            (this.setPart(this.part1, { x: -9, y: 11, angle: 0, scX: 1, scY: 1, skX: -90, skY: -90, alpha: 1 }),
                            this.setPart(this.part2, { x: 1, y: 20, angle: 0, scX: 1, scY: 1, skX: 180, skY: 180, alpha: 1 }),
                            this.setPart(this.part3, { x: 0, y: 20, angle: 0, scX: 1, scY: 1, skX: 180, skY: 0, alpha: 1 }),
                            this.setPart(this.part4, { x: 0, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part5, { x: -7, y: 0, angle: 0, scX: 0.04, scY: 0.04, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl11Map.prototype.free = function () {
                        (this.group = null),
                            (this.part5 = null),
                            (this.part4 = null),
                            (this.part3 = null),
                            (this.part2 = null),
                            (this.part1 = null),
                            (this.icons = []),
                            (this.icons = null),
                            (this.bossPlace = null),
                            (this.bossFace = null),
                            (this.scanOver = null),
                            (this.scanEffect = null);
                    }),
                    Lvl11Map
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl11Map = Lvl11Map;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl11Phone = (function (_super) {
                function Lvl11Phone(_game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.game = _game),
                        (_this.mobile = new Phaser.Group(_this.game)),
                        (_this.mobile.x = 137),
                        (_this.mobile.y = 60),
                        Client.GameManager.instance.layerUpper.addChild(_this.mobile),
                        _this.mobile.create(10, 30, "level11", "mobileBack instance 10000"),
                        _this.addButton(100, 77, "buttonPhotos"),
                        _this.addButton(100, 156, "buttonCalls"),
                        _this.addButton(100, 233, "buttonGame"),
                        _this.addMenus(),
                        _this.mobile.create(0, 0, "level11", "mobileFront instance 10000"),
                        _this
                    );
                }
                return (
                    __extends(Lvl11Phone, _super),
                    (Lvl11Phone.prototype.addButton = function (_x, _y, _name) {
                        var button = new Client.SimpleButton(this.game, _x, _y, "level11", _name, !0);
                        switch ((button.activate(), this.mobile.addChild(button), _name)) {
                            case "buttonPhotos":
                                button.events.onInputDown.add(this.openPhotosMenu, this);
                                break;
                            case "buttonCalls":
                                button.events.onInputDown.add(this.openCallsMenu, this);
                                break;
                            case "buttonGame":
                                button.events.onInputDown.add(this.openGameMenu, this);
                        }
                        button = null;
                    }),
                    (Lvl11Phone.prototype.openPhotosMenu = function () {
                        Client.SoundManager.playSFX("s_lvl11_mobileButton"), this.photosMenu.show(), Client.GameManager.instance.level.map.downMapBtn();
                    }),
                    (Lvl11Phone.prototype.openCallsMenu = function () {
                        Client.SoundManager.playSFX("s_lvl11_mobileButton"), this.callingMenu.show(), Client.GameManager.instance.level.map.downMapBtn();
                    }),
                    (Lvl11Phone.prototype.openGameMenu = function () {
                        Client.SoundManager.playSFX("s_lvl11_mobileButton"), this.gameMenu.show();
                    }),
                    (Lvl11Phone.prototype.addMenus = function () {
                        (this.photosMenu = new Client.Lvl11PhotosMenu(this.game, 10, 30, this.mobile)),
                            Client.GameManager.instance.level.updateElements.push(this.photosMenu),
                            (this.callingMenu = new Client.Lvl11CallingMenu(this.game, 10, 30, this.mobile)),
                            Client.GameManager.instance.level.updateElements.push(this.callingMenu),
                            (this.gameMenu = new Client.Lvl11GameMenu(this.game, 10, 30, this.mobile)),
                            Client.GameManager.instance.level.updateElements.push(this.gameMenu);
                    }),
                    (Lvl11Phone.prototype.free = function () {
                        (this.game = null), (this.mobile = null), (this.photosMenu = null), (this.callingMenu = null), (this.gameMenu = null);
                    }),
                    Lvl11Phone
                );
            })(Client.BasicElement);
            Client.Lvl11Phone = Lvl11Phone;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl11PhotosMenu = (function (_super) {
                function Lvl11PhotosMenu(_game, _x, _y, _container) {
                    var _this = _super.call(this, _game, _x, _y, _container) || this;
                    return (
                        (_this.photosCount = 6),
                        (_this.currentPhoto = 0),
                        (_this.background = _this.menu.create(0, 0, "level11", "photosBack instance 10000")),
                        (_this.background.inputEnabled = !0),
                        _this.addBigPhoto(),
                        _this.addScanElements(_x, _y, _container),
                        _this.addUI(),
                        _this
                    );
                }
                return (
                    __extends(Lvl11PhotosMenu, _super),
                    (Lvl11PhotosMenu.prototype.findBoss = function () {
                        Client.GameManager.instance.level.map.foundBoss();
                    }),
                    (Lvl11PhotosMenu.prototype.addBigPhoto = function () {
                        (this.bigPhoto = this.menu.create(23, 19, "level11", "bigPhoto instance 10005")),
                            (this.bossPhoto = this.game.make.sprite(53, 16, "level11", "boss instance 10000")),
                            this.bossPhoto.animations.add("scan", Phaser.Animation.generateFrameNames("boss instance 1", 0, 28, "", 4), 30, !1).onComplete.add(this.findBoss, this),
                            this.bigPhoto.addChild(this.bossPhoto),
                            (this.money = this.game.make.sprite(2, 76, "level11", "moneys instance 10000")),
                            this.bigPhoto.addChild(this.money);
                    }),
                    (Lvl11PhotosMenu.prototype.addScanElements = function (_x, _y, _container) {
                        (this.scanButton = new Client.SimpleButton(this.game, _x + 38, _y + 105, "level11", "scanButton", !0)),
                            this.scanButton.activate(),
                            this.scanButton.events.onInputDown.add(this.startScan, this),
                            _container.addChildAt(this.scanButton, 0),
                            (this.scanAnimation = new Client.Lvl11ScanAnimation(this.game, 23, 19, this.menu)),
                            Client.GameManager.instance.level.updateElements.push(this.scanAnimation);
                    }),
                    (Lvl11PhotosMenu.prototype.showScanButton = function () {
                        this.game.add.tween(this.scanButton).to({ x: this.scanButton.x - 91 }, 400, Phaser.Easing.Back.Out, !0);
                    }),
                    (Lvl11PhotosMenu.prototype.hideScanButton = function () {
                        this.game.add.tween(this.scanButton).to({ x: this.scanButton.x + 91 }, 400, "Linear", !0);
                    }),
                    (Lvl11PhotosMenu.prototype.addUI = function () {
                        (this.uiGroup = new Phaser.Group(this.game)),
                            (this.uiGroup.x = 8),
                            (this.uiGroup.y = 172),
                            this.menu.addChild(this.uiGroup),
                            (this.photos = this.uiGroup.create(51, 0, "level11", "photos instance 10000")),
                            this.uiGroup.create(-8, -11, "level11", "photosOverlay instance 10000"),
                            (this.btnPreviousPhoto = new Client.SimpleButton(this.game, 22, 33, "level11", "buttonArrow", !0)),
                            this.btnPreviousPhoto.activate(),
                            this.btnPreviousPhoto.events.onInputDown.add(this.showPreviousPhoto, this),
                            (this.btnPreviousPhoto.visible = !1),
                            this.uiGroup.addChild(this.btnPreviousPhoto),
                            (this.btnNextPhoto = new Client.SimpleButton(this.game, 142, 33, "level11", "buttonArrow", !0)),
                            this.btnNextPhoto.activate(),
                            this.btnNextPhoto.scale.set(-1, 1),
                            this.btnNextPhoto.events.onInputDown.add(this.showNextPhoto, this),
                            this.uiGroup.addChild(this.btnNextPhoto);
                        var btnClose = new Client.SimpleButton(this.game, 15, 80, "level11", "buttonClose", !0);
                        btnClose.activate(), btnClose.events.onInputDown.add(this.close, this), this.uiGroup.addChild(btnClose), (btnClose = null), this.uiGroup.create(41, -9, "level11", "photoFrame instance 10000");
                    }),
                    (Lvl11PhotosMenu.prototype.showPreviousPhoto = function () {
                        this.goToPhoto(-1);
                    }),
                    (Lvl11PhotosMenu.prototype.showNextPhoto = function () {
                        this.goToPhoto(1);
                    }),
                    (Lvl11PhotosMenu.prototype.goToPhoto = function (_side) {
                        if (!(this.scanAnimation.scanning || (0 < _side && this.currentPhoto >= this.photosCount - 1) || (_side < 0 && this.currentPhoto <= 0))) {
                            Client.SoundManager.playSFX("s_lvl11_photoScroll"), (this.currentPhoto = this.currentPhoto + _side);
                            var newPhotosX = this.photos.x + 90 * _side * -1;
                            this.game.add.tween(this.photos).to({ x: newPhotosX }, 200, "Linear", !0).onComplete.add(this.activateButtons, this),
                                (this.btnPreviousPhoto.inputEnabled = !1),
                                (this.btnNextPhoto.inputEnabled = !1),
                                this.setButtonsVisible();
                        }
                    }),
                    (Lvl11PhotosMenu.prototype.setButtonsVisible = function () {
                        0 === this.currentPhoto ? (this.btnPreviousPhoto.visible = !1) : (this.btnPreviousPhoto.visible = !0), this.currentPhoto === this.photosCount - 1 ? (this.btnNextPhoto.visible = !1) : (this.btnNextPhoto.visible = !0);
                    }),
                    (Lvl11PhotosMenu.prototype.activateButtons = function () {
                        (this.btnPreviousPhoto.inputEnabled = !0), (this.btnNextPhoto.inputEnabled = !0), this.btnPreviousPhoto.out(), this.btnNextPhoto.out(), this.changeBigPhoto();
                    }),
                    (Lvl11PhotosMenu.prototype.changeBigPhoto = function () {
                        (this.bigPhoto.frameName = "bigPhoto instance 1000" + this.currentPhoto),
                            4 === this.currentPhoto ? ((this.bossPhoto.visible = !0), (this.money.visible = !0)) : ((this.bossPhoto.visible = !1), (this.money.visible = !1));
                    }),
                    (Lvl11PhotosMenu.prototype.startScan = function () {
                        this.scanAnimation.scanning || (this.scanAnimation.startScan(), 4 === this.currentPhoto && this.scanAnimation.setBoss(this.bossPhoto));
                    }),
                    (Lvl11PhotosMenu.prototype.show = function () {
                        (this.menu.visible = !0),
                            (this.background.x = 20),
                            (this.background.y = 17),
                            (this.background.alpha = 0),
                            this.background.scale.set(0.7, 0.2),
                            (this.uiGroup.alpha = 0),
                            (this.bigPhoto.alpha = 0),
                            this.game.add.tween(this.background).to({ x: 0, y: 0, alpha: 1 }, 400, "Linear", !0),
                            this.game.add.tween(this.background.scale).to({ x: 1, y: 1 }, 400, "Linear", !0),
                            this.game.add.tween(this.uiGroup).to({ alpha: 1 }, 400, "Linear", !0, 400),
                            this.game.add.tween(this.bigPhoto).to({ alpha: 1 }, 400, "Linear", !0, 400),
                            this.showScanButton(),
                            (this.currentPhoto = 0),
                            (this.photos.x = 51),
                            (this.bigPhoto.frameName = "bigPhoto instance 10000"),
                            this.setButtonsVisible(),
                            (this.bossPhoto.visible = !1),
                            (this.money.visible = !1);
                    }),
                    (Lvl11PhotosMenu.prototype.close = function () {
                        this.hideScanButton(), (this.menu.visible = !1);
                    }),
                    (Lvl11PhotosMenu.prototype.free = function () {
                        _super.prototype.free.call(this),
                            (this.uiGroup = null),
                            (this.photos = null),
                            (this.btnNextPhoto = null),
                            (this.btnPreviousPhoto = null),
                            (this.bigPhoto = null),
                            (this.scanButton = null),
                            (this.scanAnimation = null),
                            (this.bossPhoto = null),
                            (this.money = null);
                    }),
                    Lvl11PhotosMenu
                );
            })(Client.BasePhoneMenus);
            Client.Lvl11PhotosMenu = Lvl11PhotosMenu;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl11Road = (function (_super) {
                function Lvl11Road(game, _container) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = 102),
                        (_this.group.y = 4),
                        _container.addChildAt(_this.group, 1),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level11", "road instance 10000")),
                        _this.part3.pivot.set(0, 0),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = Client.Main.instance.make.graphics()),
                        _this.part2.beginFill(16711680, 0.5),
                        _this.part2.drawCircle(0, 0, 43),
                        _this.part2.endFill(),
                        _this.group.addChild(_this.part2),
                        (_this.part3.mask = _this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level11", "bossPosition instance 10000")),
                        _this.part1.anchor.set(0.5),
                        _this.group.addChild(_this.part1),
                        _this.playAnim("anim"),
                        _this
                    );
                }
                return (
                    __extends(Lvl11Road, _super),
                    (Lvl11Road.prototype.updateAnimation = function () {
                        "anim" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (this.startTween(this.part2, 12, { x: 190, y: -1, scX: 1.75, scY: 2.58 }, !0), this.startTween(this.part2.scale, 12, { x: 1.75, y: 2.58 }))
                                : 13 === this.counterAnim
                                ? (this.startTween(this.part2, 8, { x: 165, y: 15, scX: 3.7 }, !0), this.startTween(this.part2.scale, 8, { x: 3.7 }, !0))
                                : 21 === this.counterAnim
                                ? (this.startTween(this.part2, 12, { y: 52, scY: 4.43 }, !0), this.startTween(this.part2.scale, 12, { y: 4.43 }, !0))
                                : 33 === this.counterAnim
                                ? (this.startTween(this.part2, 8, { x: 149, y: 130, scX: 5.51, scY: 6.23 }, !0), this.startTween(this.part2.scale, 8, { x: 5.51, y: 6.23 }, !0))
                                : 41 === this.counterAnim
                                ? (this.startTween(this.part2, 6, { x: 133, scX: 7.24 }, !0), this.startTween(this.part2.scale, 6, { x: 7.24 }, !0))
                                : 85 === this.counterAnim
                                ? ((this.part1.visible = !0), this.setPart(this.part1, { x: 16, y: 102, scX: 1.63, scY: 1.63, alpha: 0 }), this.startTween(this.part1, 6, { scX: 1, scY: 1, alpha: 1 }))
                                : 91 === this.counterAnim
                                ? this.startTween(this.part1, 12, { scX: 0.66, scY: 0.66 })
                                : 103 === this.counterAnim &&
                                  (this.animComplete(),
                                  this.playAnim("loop", -1),
                                  Client.Main.instance.add.tween(this.part3).to({ alpha: 0.5 }, 200, "Linear", !0, 0, -1, !0),
                                  Client.LevelBuilder.instance.levelComplete(120),
                                  (Client.GameManager.instance.hero.currState = Client.HeroState.finish),
                                  Client.SoundManager.playSFX("s_lvl11_targetFound"))
                            : "loop" === this.currAnim &&
                              (5 === this.counterAnim
                                  ? this.startTween(this.part1, 12, { scX: 1, scY: 1 })
                                  : 21 === this.counterAnim
                                  ? this.startTween(this.part1, 12, { scX: 0.66, scY: 0.66 })
                                  : 33 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl11Road.prototype.setParts = function (value) {
                        "anim" === value
                            ? ((this.part1.visible = !1),
                              this.setPart(this.part2, { x: 155, y: -15, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                              this.setPart(this.part3, { x: 0, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0))
                            : "loop" === value &&
                              (this.setPart(this.part1, { x: 16, y: 102, angle: 0, scX: 0.66, scY: 0.66, skX: 0, skY: 0, alpha: 1 }), this.setPart(this.part3, { x: 0, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl11Road.prototype.free = function () {
                        (this.group = null), (this.part3 = null), (this.part2 = null), (this.part1 = null);
                    }),
                    Lvl11Road
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl11Road = Lvl11Road;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl11ScanAnimation = (function (_super) {
                function Lvl11ScanAnimation(_game, _x, _y, _container) {
                    var _this = _super.call(this) || this;
                    (_this.scanning = !1), (_this.boss = null), (_this.group = _game.make.group()), (_this.group.x = _x), (_this.group.y = _y), (_this.group.visible = !1), _container.addChild(_this.group);
                    var mask = _game.make.graphics();
                    return (
                        mask.beginFill(16711680, 0.5),
                        mask.drawRect(0, 0, 133, 132),
                        mask.endFill(),
                        _this.group.addChild(mask),
                        (_this.group.mask = mask),
                        (mask = null),
                        (_this.part2 = new Client.SASprite(_game, 0, 0, "level11", "scanPart instance 10000")),
                        _this.part2.pivot.set(0, 0),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(_game, 0, 0, "level11", "loupe instance 10000")),
                        _this.part1.pivot.set(0, 0),
                        _this.group.addChild(_this.part1),
                        _this.setParts("scan"),
                        _this
                    );
                }
                return (
                    __extends(Lvl11ScanAnimation, _super),
                    (Lvl11ScanAnimation.prototype.startScan = function () {
                        (this.scanning = !0), (this.group.visible = !0), this.playAnim("scan"), Client.SoundManager.playSFX("s_lvl11_photoScan");
                    }),
                    (Lvl11ScanAnimation.prototype.setBoss = function (_boss) {
                        this.boss = _boss;
                    }),
                    (Lvl11ScanAnimation.prototype.updateAnimation = function () {
                        "scan" === this.currAnim &&
                            (1 === this.counterAnim
                                ? this.startTween(this.part2, 156, { y: -95 })
                                : 5 === this.counterAnim
                                ? this.startTween(this.part1, 8, { x: 22, y: 56 })
                                : 13 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: 25, y: 44 })
                                : 17 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: 39, y: 39 })
                                : 21 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: 50, y: 42 })
                                : 25 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: 59, y: 50 })
                                : 29 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: 64, y: 65 })
                                : 33 === this.counterAnim
                                ? this.startTween(this.part1, 6, { x: 73, y: 81 })
                                : 39 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: 83, y: 86 })
                                : 43 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: 94 })
                                : 47 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: 102, y: 80 })
                                : 51 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: 105, y: 70 })
                                : 55 === this.counterAnim
                                ? this.startTween(this.part1, 4, { y: 60 })
                                : 59 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: 98, y: 51 })
                                : 63 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: 89, y: 43 })
                                : 67 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: 79, y: 39 })
                                : 71 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: 70, y: 42 })
                                : 75 === this.counterAnim
                                ? (null !== this.boss && this.boss.play("scan"), (this.boss = null), this.startTween(this.part1, 4, { x: 63, y: 53 }))
                                : 79 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: 60, y: 64 })
                                : 83 === this.counterAnim
                                ? this.startTween(this.part1, 6, { x: 56, y: 75 })
                                : 89 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: 48, y: 87 })
                                : 93 === this.counterAnim
                                ? this.startTween(this.part1, 6, { x: 33 })
                                : 99 === this.counterAnim
                                ? this.startTween(this.part1, 26, { x: 79, y: 39 })
                                : 125 === this.counterAnim
                                ? this.startTween(this.part1, 32, { x: 97, y: 103, alpha: 0 })
                                : 157 === this.counterAnim && (this.animComplete(), (this.group.visible = !1), (this.scanning = !1)));
                    }),
                    (Lvl11ScanAnimation.prototype.setParts = function (value) {
                        "scan" === value &&
                            (this.setPart(this.part1, { x: 33, y: 87, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 0.7 }), this.setPart(this.part2, { x: -20, y: 169, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 0.35 }));
                    }),
                    (Lvl11ScanAnimation.prototype.free = function () {
                        (this.group = null), (this.part2 = null), (this.part1 = null), (this.boss = null);
                    }),
                    Lvl11ScanAnimation
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl11ScanAnimation = Lvl11ScanAnimation;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var SnakeGame = (function (_super) {
                function SnakeGame(_game, _container) {
                    var _this = _super.call(this) || this;
                    (_this.arraySize = 9),
                        (_this.cellSize = 18.25),
                        (_this.snakeLength = 1),
                        (_this.snakeLose = !1),
                        (_this.playGame = !1),
                        (_this.needGenerateNewApple = !1),
                        (_this.snakeAngle = 0),
                        (_this.offsetX = 0),
                        (_this.offsetY = 0),
                        (_this.appleX = 4),
                        (_this.appleY = 2),
                        (_this.m_freeCoords = null),
                        (_this.containerX = 146),
                        (_this.containerY = 91),
                        (_this.canUpdate = !1),
                        (_this.game = _game),
                        (_this.gameField = _this.game.make.sprite(90, 167, "level11", "gameField instance 10000")),
                        (_this.gameField.inputEnabled = !0),
                        _this.gameField.anchor.set(0.5),
                        _this.gameField.events.onInputDown.add(_this.SetDirection, _this),
                        _this.gameField.events.onInputOver.add(_this.showMouse, _this),
                        _this.gameField.events.onInputOut.add(_this.hideMouse, _this),
                        _container.addChild(_this.gameField),
                        (_this.group = new Phaser.Group(_this.game)),
                        (_this.group.x = 8),
                        (_this.group.y = 85),
                        _container.addChild(_this.group);
                    var border = _this.game.make.sprite(90, 167, "level11", "borderGame instance 10000");
                    border.anchor.set(0.5),
                        _container.addChild(border),
                        (_this.m_gameMouse = _this.game.make.sprite(90, 167, "level11", "lvl11_mouse_mc instance 10000")),
                        _this.m_gameMouse.anchor.set(0.5),
                        (_this.m_gameMouse.visible = !1),
                        _container.addChild(_this.m_gameMouse);
                    return (_this.text = _game.make.text(48, 60, "0", { font: "25px Arial bold", fill: "#ffffff", align: "center" })), _this.text.anchor.set(0.5), _container.addChild(_this.text), _this;
                }
                return (
                    __extends(SnakeGame, _super),
                    (SnakeGame.prototype.showMouse = function () {
                        this.canUpdate && (this.m_gameMouse.visible = !0);
                    }),
                    (SnakeGame.prototype.hideMouse = function () {
                        this.m_gameMouse.visible = !1;
                    }),
                    (SnakeGame.prototype.InitNewGame = function (startGame) {
                        (this.text.text = "0"), (this.gameMass = new Array());
                        for (var i = 0; i < this.arraySize; i++) this.gameMass.push(new Array(9));
                        (this.canUpdate = !0),
                            (this.snakeLose = !1),
                            (this.headX = 4),
                            (this.headY = 6),
                            (this.gameMass[this.headX][this.headY] = 1),
                            (this.snakeDirection = 1),
                            (this.snakeLength = 1),
                            (this.gameIdle = 35),
                            startGame && ((this.playGame = !0), (this.needGenerateNewApple = !0), this.GenerateNewApple(), Client.SoundManager.playSFX("s_lvl11_snakeAmbient"));
                    }),
                    (SnakeGame.prototype.UpdateSnakeGame = function () {
                        this.playGame && (this.gameIdle++, 20 < this.gameIdle && ((this.gameIdle = 0), this.DrawGameField(), Client.SoundManager.playSFX("s_lvl11_snakeStep"), (this.text.text = "" + (this.snakeLength - 1))));
                    }),
                    (SnakeGame.prototype.DrawGameField = function () {
                        this.group.removeAll(), this.CalcHeadPosition(), this.needGenerateNewApple && (this.m_freeCoords = new Array());
                        for (var i = 0; i < this.arraySize; i++)
                            for (var j = 0; j < this.arraySize; j++)
                                if (this.gameMass[i][j] && 0 < this.gameMass[i][j])
                                    if ((this.gameMass[i][j]++, this.gameMass[i][j] > this.snakeLength)) this.gameMass[i][j] = 0;
                                    else {
                                        var body = this.group.create(this.cellSize * i, this.cellSize * j, "level11", "lvl11_snakeBody_mc instance 10000");
                                        body.anchor.set(0.5), (body.x = this.cellSize * (i + 0.5)), (body.y = this.cellSize * (j + 0.5));
                                    }
                                else null !== this.m_freeCoords && i !== this.headX && j !== this.headY && this.m_freeCoords.push(new Phaser.Point(i, j));
                        this.gameMass[this.headX][this.headY] = 1;
                        var head = this.group.create(0, 0, "level11", "lvl11_snakeHead_mc instance 10000");
                        (this.snakeAngle = 90 * (this.snakeDirection - 1)),
                            (head.angle = this.snakeAngle),
                            head.anchor.set(0.5),
                            (head.x = this.cellSize * (this.headX + 0.5)),
                            (head.y = this.cellSize * (this.headY + 0.5)),
                            this.GenerateNewApple();
                    }),
                    (SnakeGame.prototype.GenerateNewApple = function () {
                        if (this.needGenerateNewApple) {
                            if (((this.needGenerateNewApple = !1), null !== this.m_freeCoords && 0 < this.m_freeCoords.length)) {
                                var index = Math.floor(Math.random() * this.m_freeCoords.length);
                                (this.appleX = this.m_freeCoords[index].x), (this.appleY = this.m_freeCoords[index].y);
                            }
                            this.m_freeCoords = null;
                        }
                        var apple = this.group.create(0, 0, "level11", "lvl11_snakeFood_mc instance 10000");
                        apple.pivot.set(-2, -2), (apple.x = this.cellSize * this.appleX), (apple.y = this.cellSize * this.appleY);
                    }),
                    (SnakeGame.prototype.CalcHeadPosition = function () {
                        var newHeadX = this.headX,
                            newHeadY = this.headY;
                        1 === this.snakeDirection ? newHeadY-- : 2 === this.snakeDirection ? newHeadX++ : 3 === this.snakeDirection ? newHeadY++ : 4 === this.snakeDirection && newHeadX--,
                            newHeadX >= this.arraySize ? (newHeadX = 0) : newHeadX < 0 && (newHeadX = this.arraySize - 1),
                            newHeadY >= this.arraySize ? (newHeadY = 0) : newHeadY < 0 && (newHeadY = this.arraySize - 1),
                            this.appleX === newHeadX &&
                                this.appleY === newHeadY &&
                                (this.snakeLength++,
                                (this.needGenerateNewApple = !0),
                                Client.SoundManager.playSFX("s_lvl11_snakeFood"),
                                5 === this.snakeLength &&
                                    (Client.GameManager.instance.level.questCarFounded ||
                                        (Client.SoundManager.playSFX("s_lvl11_winSecret"),
                                        (Client.GameManager.instance.level.questCar.visible = !0),
                                        this.game.add.tween(Client.GameManager.instance.level.questCar).to({ alpha: 1 }, 500, "Linear", !0)))),
                            0 < this.gameMass[newHeadX][newHeadY] && this.gameMass[newHeadX][newHeadY] !== this.snakeLength && ((this.snakeLose = !0), (this.playGame = !1), Client.SoundManager.playSFX("s_lvl11_snakeFail")),
                            (this.headX = newHeadX),
                            (this.headY = newHeadY);
                    }),
                    (SnakeGame.prototype.SetDirection = function () {
                        var tempX = this.game.input.activePointer.x - this.containerX,
                            tempY = this.game.input.activePointer.y - this.containerY,
                            offsetX = 18.25 * (this.headX - 4) - tempX + this.containerX,
                            offsetY = 18.25 * (this.headY - 4) - tempY + this.containerX;
                        0 === this.snakeAngle || 180 === this.snakeAngle ? (this.snakeDirection = offsetX < 0 ? 2 : 4) : (this.snakeDirection = offsetY < 0 ? 3 : 1);
                    }),
                    (SnakeGame.prototype.UpdateGameMouse = function () {
                        if (this.m_gameMouse.visible) {
                            (this.m_gameMouse.x = this.game.input.activePointer.x - this.containerX), (this.m_gameMouse.y = this.game.input.activePointer.y - this.containerY);
                            var offsetX = 18.25 * (this.headX - 4) - this.m_gameMouse.x + this.containerX,
                                offsetY = 18.25 * (this.headY - 4) - this.m_gameMouse.y + this.containerX;
                            0 === this.snakeAngle || 180 === this.snakeAngle ? (this.m_gameMouse.angle = offsetX < 0 ? 90 : -90) : (this.m_gameMouse.angle = offsetY < 0 ? 180 : 0);
                        }
                    }),
                    (SnakeGame.prototype.clearGameField = function () {
                        this.group.removeAll(), (this.canUpdate = !1), (this.text.text = "0");
                    }),
                    (SnakeGame.prototype.update = function () {
                        this.canUpdate && (this.UpdateSnakeGame(), this.UpdateGameMouse());
                    }),
                    (SnakeGame.prototype.free = function () {
                        (this.game = null),
                            (this.group = null),
                            (this.gameMass = []),
                            (this.gameMass = null),
                            (this.m_gameMouse = null),
                            (this.text = null),
                            (this.gameField = null),
                            (this.m_gameField = null),
                            (this.m_freeCoords = []),
                            (this.m_freeCoords = null);
                    }),
                    SnakeGame
                );
            })(Client.BasicElement);
            Client.SnakeGame = SnakeGame;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl12BadCar = (function (_super) {
                function Lvl12BadCar(_game, _x, _y) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.activate = !1),
                        (_this.carStop = !1),
                        (_this.inTrap = !1),
                        (_this.carBody = Client.GameManager.instance.layerElements.create(_x, _y, "level12", "lvl12_carBody_mc instance 10000")),
                        _game.physics.box2d.enable(_this.carBody),
                        _this.carBody.body.setRectangle(130, 70, 0, 10),
                        _this.carBody.body.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, _this.contact, _this),
                        (_this.wheel1 = Client.GameManager.instance.layerElements.create(_x - 40, _y + 32, "level12", "lvl12_carWheel_mc instance 10000")),
                        _this.wheel1.anchor.set(0.5),
                        _game.physics.box2d.enable(_this.wheel1),
                        _this.wheel1.body.setCircle(18),
                        (_this.wheel1.body.friction = 1),
                        (_this.wheel2 = Client.GameManager.instance.layerElements.create(_x + 35, _y + 32, "level12", "lvl12_carWheel_mc instance 10000")),
                        _this.wheel2.anchor.set(0.5),
                        _game.physics.box2d.enable(_this.wheel2),
                        _this.wheel2.body.setCircle(18),
                        (_this.wheel2.body.friction = 1),
                        (_this.motorJ1 = _game.physics.box2d.revoluteJoint(_this.carBody, _this.wheel1, -40, 32, 0, 0, 0, 100, !0)),
                        (_this.motorJ2 = _game.physics.box2d.revoluteJoint(_this.carBody, _this.wheel2, 35, 32, 0, 0, 0, 100, !0)),
                        (_this.carBody.body.kinematic = !0),
                        (_this.carTween = _game.add.tween(_this.carBody.body).to({ y: _this.carBody.body.y + 2 }, 350, "Linear", !0, 0, -1, !0)),
                        (_this.eyes = _game.make.sprite(-45, -27, "level12", "carEye instance 10000")),
                        _this.eyes.scale.set(0.85),
                        _this.eyes.animations.add("idle", Phaser.Animation.generateFrameNames("carEye instance 1", 0, 90, "", 4), 30, !1).onComplete.add(function () {
                            this.eyes.play("look");
                        }, _this),
                        _this.eyes.animations.add("fear1", Phaser.Animation.generateFrameNames("carEye instance 1", 90, 115, "", 4), 30, !1),
                        _this.eyes.animations.add("look", Phaser.Animation.generateFrameNames("carEye instance 1", 116, 225, "", 4), 30, !1).onComplete.add(function () {
                            this.eyes.play("idle");
                        }, _this),
                        _this.eyes.animations.add("fear2", Phaser.Animation.generateFrameNames("carEye instance 1", 226, 293, "", 4), 30, !0),
                        _this.eyes.play("idle"),
                        _this.carBody.addChild(_this.eyes),
                        _this
                    );
                }
                return (
                    __extends(Lvl12BadCar, _super),
                    (Lvl12BadCar.prototype.contact = function (body1, body2, fixture1, fixture2, begin) {
                        begin && ((Client.GameManager.instance.hero.currState = Client.HeroState.bumpStars), Client.SoundManager.playSFX("s_lvl12_wheelyHit"), Client.LevelBuilder.instance.levelFailed(60));
                    }),
                    (Lvl12BadCar.prototype.move = function () {
                        this.activate ||
                            (this.carTween.stop(),
                            (this.carBody.body.dynamic = !0),
                            (this.motorJ1.m_motorSpeed = -8),
                            (this.motorJ2.m_motorSpeed = -8),
                            this.eyes.play("fear1"),
                            (this.activate = !0),
                            Client.SoundManager.playSFX("s_lvl12_securityReact"));
                    }),
                    (Lvl12BadCar.prototype.update = function () {
                        !this.carStop && 5 < Math.abs(this.carBody.body.angle) && ((this.carStop = !0), (this.motorJ1.m_motorSpeed = 0), (this.motorJ2.m_motorSpeed = 0), (this.motorJ1.m_enableMotor = !1), (this.motorJ2.m_enableMotor = !1)),
                            220 < this.carBody.body.y && 10 < this.carBody.body.angle && (this.carBody.body.angle -= 5),
                            !this.inTrap && 260 < this.carBody.body.y && ((this.inTrap = !0), Client.SoundManager.playSFX("s_lvl12_securityInPit"), this.eyes.play("fear2"));
                    }),
                    (Lvl12BadCar.prototype.free = function () {
                        (this.wheel1 = null), (this.wheel2 = null), (this.carBody = null), (this.eyes = null), (this.carTween = null), (this.motorJ1 = null), (this.motorJ2 = null);
                    }),
                    Lvl12BadCar
                );
            })(Client.BasicElement);
            Client.Lvl12BadCar = Lvl12BadCar;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl12Fire = (function (_super) {
                function Lvl12Fire(_game, _x, _y, _angle) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.fireNow = !1),
                        (_this.startX = 0),
                        (_this.startY = 0),
                        (_this.group = new Phaser.Group(_game)),
                        (_this.group.x = _x),
                        (_this.group.y = _y),
                        (_this.group.angle = _angle),
                        Client.GameManager.instance.layerUpper.addChild(_this.group),
                        _this
                    );
                }
                return (
                    __extends(Lvl12Fire, _super),
                    (Lvl12Fire.prototype.on = function () {
                        this.fireNow = !0;
                    }),
                    (Lvl12Fire.prototype.off = function () {
                        this.fireNow = !1;
                    }),
                    (Lvl12Fire.prototype.update = function () {
                        if (!0 === this.fireNow)
                            for (var i = 0; i < 1; i++) {
                                var firePart = this.group.getFirstDead(!1, 0, 0, "level12", "fireParticle instance 10000");
                                null === firePart && this.group.length < 30 && (firePart = this.group.create(0, 0, "level12", "fireParticle instance 10000")), null != firePart && this.createParticle(firePart, "fireParticle", 17);
                            }
                    }),
                    (Lvl12Fire.prototype.createParticle = function (_particle, _name, _maxFrame) {
                        (_particle.animations.add("idle", Phaser.Animation.generateFrameNames(_name + " instance 1", 0, _maxFrame, "", 4), 40, !1).killOnComplete = !0),
                            _particle.play("idle"),
                            _particle.anchor.set(0.5, 0),
                            _particle.scale.set(Math.random() + 1),
                            (_particle.x = 5 + 10 * Math.random()),
                            (_particle.y = 10 * (_particle.scale.x - 1.5)),
                            (_particle.angle = 20 * Math.random() - 20 * Math.random());
                    }),
                    (Lvl12Fire.prototype.free = function () {
                        this.group = null;
                    }),
                    Lvl12Fire
                );
            })(Client.BasicElement);
            Client.Lvl12Fire = Lvl12Fire;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl12Laser = (function (_super) {
                function Lvl12Laser(_game, _x, _y, _angle) {
                    void 0 === _angle && (_angle = 0);
                    var _this = _super.call(this) || this;
                    return (
                        (_this.startY = 0),
                        (_this.shockHero = !1),
                        (_this.startY = _y),
                        (_this.graphics = new Phaser.Group(_game)),
                        (_this.graphics.x = _x),
                        (_this.graphics.y = _y),
                        (_this.graphics.visible = !1),
                        (_this.graphics.angle = _angle),
                        Client.GameManager.instance.layerElements.addChild(_this.graphics),
                        (_this.laserParticles = _this.graphics.create(0, 0, "level12", "laser_particle instance 10000")),
                        _this.laserParticles.animations.add("anim", Phaser.Animation.generateFrameNames("laser_particle instance 1", 0, 27, "", 4), 30, !0),
                        _this.laserParticles.play("anim"),
                        _this.laserParticles.anchor.set(0.5),
                        (_this.laser = _this.graphics.create(0, 0, "level12", "laser instance 10000")),
                        _this.laser.animations.add("anim", Phaser.Animation.generateFrameNames("laser instance 1", 0, 6, "", 4), 30, !0),
                        _this.laser.play("anim"),
                        _this.laser.anchor.set(0.5),
                        (_this.phys = new Phaser.Physics.Box2D.Body(_game, null, _x, _y, 0)),
                        _this.phys.setRectangle(15, 108),
                        (_this.phys.angle = _angle),
                        (_this.phys.sensor = !0),
                        _this.phys.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, _this.contact, _this),
                        _this
                    );
                }
                return (
                    __extends(Lvl12Laser, _super),
                    (Lvl12Laser.prototype.contact = function (body1, body2, fixture1, fixture2, begin) {
                        begin && (this.shockHero = !0);
                    }),
                    (Lvl12Laser.prototype.update = function () {
                        this.shockHero &&
                            ((this.shockHero = !1),
                            Client.GameManager.instance.hero.setEnableMotor(!1),
                            Client.GameManager.instance.hero.setClickable(!1),
                            Client.GameManager.instance.hero.addShock(),
                            Client.LevelBuilder.instance.levelFailed(60));
                    }),
                    (Lvl12Laser.prototype.SetVisible = function (_value) {
                        !1 === (this.graphics.visible = _value) ? (this.phys.y += 120) : ((this.phys.y = this.startY), Client.SoundManager.playSFX("s_lvl12_electric"));
                    }),
                    (Lvl12Laser.prototype.free = function () {
                        (this.graphics = null), (this.phys = null), (this.laserParticles = null), (this.laser = null);
                    }),
                    Lvl12Laser
                );
            })(Client.BasicElement);
            Client.Lvl12Laser = Lvl12Laser;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl12RotateBlock = (function (_super) {
                function Lvl12RotateBlock(_game, _x, _y, _id, _angle) {
                    void 0 === _angle && (_angle = 0);
                    var _this = _super.call(this) || this;
                    return (
                        (_this.rotateNow = !1),
                        (_this.id = 0),
                        (_this.id = _id),
                        (_this.wheel1 = Client.GameManager.instance.layerBackground.create(_x - 8, _y - 12, "level12", "wheel1 instance 10000")),
                        _this.wheel1.anchor.set(0.5),
                        (_this.wheel2 = Client.GameManager.instance.layerBackground.create(_x + 1, _y + 11, "level12", "wheel2 instance 10000")),
                        _this.wheel2.anchor.set(0.5),
                        (_this.block = Client.GameManager.instance.layerBackground.create(_x, _y, "level12", "tuber instance 10000")),
                        _this.block.anchor.set(0.5),
                        _game.physics.box2d.enable(_this.block),
                        _this.block.body.setRectangle(190, 25, 0, -69),
                        _this.block.body.addRectangle(190, 25, 0, 69),
                        (_this.block.body.kinematic = !0),
                        (_this.block.body.angle = _angle),
                        (_this.upPlatform = _game.make.sprite(0, -65, "level12", "upPlatform instance 10000")),
                        _this.upPlatform.anchor.set(0.5),
                        _this.block.addChild(_this.upPlatform),
                        (_this.botPlatform = _game.make.sprite(0, 65, "level12", "upPlatform instance 10000")),
                        _this.botPlatform.anchor.set(0.5),
                        _this.botPlatform.scale.set(1, -1),
                        _this.block.addChild(_this.botPlatform),
                        _this.addEvents(_this.upPlatform),
                        _this.addEvents(_this.botPlatform),
                        _this
                    );
                }
                return (
                    __extends(Lvl12RotateBlock, _super),
                    (Lvl12RotateBlock.prototype.addEvents = function (_sprite) {
                        (_sprite.inputEnabled = !0), (_sprite.input.useHandCursor = !0), _sprite.events.onInputOver.add(this.over, this), _sprite.events.onInputOut.add(this.out, this), _sprite.events.onInputDown.add(this.down, this);
                    }),
                    (Lvl12RotateBlock.prototype.over = function () {
                        (this.upPlatform.frameName = "upPlatform instance 10001"), (this.botPlatform.frameName = "upPlatform instance 10001");
                    }),
                    (Lvl12RotateBlock.prototype.out = function () {
                        (this.upPlatform.frameName = "upPlatform instance 10000"), (this.botPlatform.frameName = "upPlatform instance 10000");
                    }),
                    (Lvl12RotateBlock.prototype.down = function () {
                        this.rotateNow ||
                            (Client.SoundManager.playSFX("s_lvl12_rotatingPlatform"),
                            (this.rotateNow = !0),
                            Client.Main.instance.add
                                .tween(this.block.body)
                                .to({ angle: this.block.body.angle + 90 }, 1e3, "Linear", !0)
                                .onComplete.add(function () {
                                    0 === this.id && Client.GameManager.instance.level.car.move(), (this.rotateNow = !1);
                                }, this));
                    }),
                    (Lvl12RotateBlock.prototype.update = function () {
                        this.rotateNow && ((this.wheel1.angle += 2), (this.wheel2.angle += 2));
                    }),
                    (Lvl12RotateBlock.prototype.free = function () {
                        (this.wheel1 = null), (this.wheel2 = null), (this.block = null), (this.upPlatform = null), (this.botPlatform = null);
                    }),
                    Lvl12RotateBlock
                );
            })(Client.BasicElement);
            Client.Lvl12RotateBlock = Lvl12RotateBlock;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl12Secret = (function (_super) {
                function Lvl12Secret(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.currAnim2 = "idle"),
                        (_this.counterAnim2 = 0),
                        (_this.group = game.make.group()),
                        (_this.group.x = 494),
                        (_this.group.y = -167),
                        Client.GameManager.instance.layerUpper.addChild(_this.group),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level12", "secretWire instance 10000")),
                        _this.part2.pivot.set(0, 0),
                        (_this.part2.inputEnabled = !0),
                        (_this.part2.input.useHandCursor = !0),
                        _this.part2.events.onInputOver.add(_this.over, _this),
                        _this.part2.events.onInputOut.add(_this.out, _this),
                        _this.part2.events.onInputDown.add(_this.down, _this),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level12", "secret instance 10000")),
                        _this.part1.pivot.set(32, 36),
                        _this.group.addChild(_this.part1),
                        Client.GameManager.instance.level.addQuestCar(130, 102, _this.part1),
                        Client.GameManager.instance.level.questCar && Client.GameManager.instance.level.questCar.scale.set(1, 0.85),
                        _this.setParts("anim"),
                        _this.setParts2("idle"),
                        _this
                    );
                }
                return (
                    __extends(Lvl12Secret, _super),
                    (Lvl12Secret.prototype.over = function () {
                        this.part2.frameName = "secretWire instance 10001";
                    }),
                    (Lvl12Secret.prototype.out = function () {
                        this.part2.frameName = "secretWire instance 10000";
                    }),
                    (Lvl12Secret.prototype.down = function () {
                        (this.part2.inputEnabled = !1), this.out(), (this.currAnim2 = "show"), (this.counterAnim2 = 0);
                    }),
                    (Lvl12Secret.prototype.update = function () {
                        this.updateAnimation();
                    }),
                    (Lvl12Secret.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (this.counterAnim++,
                            1 === this.counterAnim
                                ? this.startTween(this.part1, 42, { y: 135, scY: 1.24 })
                                : 43 === this.counterAnim
                                ? this.startTween(this.part1, 10, { y: 125 })
                                : 53 === this.counterAnim
                                ? this.startTween(this.part1, 10, { y: 135 })
                                : 63 === this.counterAnim
                                ? this.startTween(this.part1, 10, { y: 125 })
                                : 73 === this.counterAnim && this.animComplete()),
                            "idle" === this.currAnim2
                                ? (this.counterAnim2++,
                                  1 === this.counterAnim2
                                      ? this.startTween(this.part2, 198, { skX: -2, skY: -2 })
                                      : 219 === this.counterAnim2
                                      ? this.startTween(this.part2, 182, { skX: 3, skY: 3 })
                                      : 403 === this.counterAnim2 && (this.counterAnim2 = 0))
                                : "show" === this.currAnim2 &&
                                  (this.counterAnim2++,
                                  1 === this.counterAnim2
                                      ? this.startTween(this.part2, 6, { x: 61, y: 93, skX: 0, skY: 0 })
                                      : 7 === this.counterAnim2
                                      ? this.startTween(this.part2, 12, { y: 122 })
                                      : 19 === this.counterAnim2
                                      ? this.startTween(this.part2, 38, { y: 93 })
                                      : 55 === this.counterAnim2 && ((this.currAnim2 = "stop"), this.playAnim("anim")));
                    }),
                    (Lvl12Secret.prototype.setParts = function (value) {
                        "anim" === value && this.setPart(this.part1, { x: -36, y: 74, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 });
                    }),
                    (Lvl12Secret.prototype.setParts2 = function (value) {
                        "idle" === value
                            ? this.setPart(this.part2, { x: 60, y: 95, angle: 0, scX: 1, scY: 1, skX: 3, skY: 3, alpha: 1 })
                            : "show" === value && this.setPart(this.part2, { x: 60, y: 95, angle: 0, scX: 1, scY: 1, skX: 3, skY: 3, alpha: 1 });
                    }),
                    (Lvl12Secret.prototype.free = function () {
                        (this.group = null), (this.part1 = null), (this.part2 = null);
                    }),
                    Lvl12Secret
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl12Secret = Lvl12Secret;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl12Spring = (function (_super) {
                function Lvl12Spring(_game) {
                    var _this = _super.call(this) || this;
                    (_this.startY = 521),
                        (_this.counterWheels = 0),
                        (_this.m_active = !1),
                        (_this.m_currWallsTime = 0),
                        (_this.springHeight = 45),
                        (_this.game = _game),
                        (_this.btn = new Client.SimpleButton(_game, 532, 544, "level12", "pushButton", !0)),
                        _this.btn.anchor.set(0.5),
                        _this.btn.activate(),
                        _this.btn.events.onInputDown.add(_this.useSpring, _this),
                        Client.GameManager.instance.layerUpper.addChild(_this.btn);
                    var mask = _game.make.graphics(716, _this.startY - 18);
                    return (
                        mask.beginFill(16711680, 0.5),
                        mask.drawRect(-53, -35, 106, 70),
                        mask.endFill(),
                        Client.GameManager.instance.layerUpper.addChild(mask),
                        (_this.graphic = Client.GameManager.instance.layerUpper.create(716, _this.startY, "level12", "spring instance 10000")),
                        _this.graphic.anchor.setTo(0.5),
                        (_this.graphic.mask = mask),
                        (_this.halfBtnHeight = _this.springHeight),
                        (_this.tween = _this.game.add.tween(_this.graphic)),
                        _this.tween.to({ y: [_this.startY - 15, _this.startY] }, 300, Phaser.Easing.Linear.None),
                        _this.tween.onComplete.add(_this.tweenComp, _this),
                        (_this.body = new Phaser.Physics.Box2D.Body(_this.game, null, 720, _this.startY - 20, 0)),
                        _this.body.setRectangle(120, 10),
                        (_this.body.sensor = !0),
                        _this.body.setBodyContactCallback(Client.GameManager.instance.hero.bodyWheelBack, _this.onBodyContact, _this),
                        _this.body.setBodyContactCallback(Client.GameManager.instance.hero.bodyWheelFront, _this.onBodyContact, _this),
                        _this
                    );
                }
                return (
                    __extends(Lvl12Spring, _super),
                    (Lvl12Spring.prototype.onBodyContact = function (body1, body2, fixture1, fixture2, begin) {
                        body1 !== body2 && (!0 === begin ? ((this.counterWheels += 1), 2 < this.counterWheels && (this.counterWheels = 2)) : ((this.counterWheels -= 1), this.counterWheels < 0 && (this.counterWheels = 0)));
                    }),
                    (Lvl12Spring.prototype.tweenComp = function () {
                        this.graphic.y = this.startY;
                    }),
                    (Lvl12Spring.prototype.useSpring = function () {
                        if (((this.graphic.y = this.startY), this.tween.start(), Client.SoundManager.playSFX("s_lvl12_spring"), 2 === this.counterWheels)) {
                            var hero = Client.GameManager.instance.hero;
                            (hero.bodyWheelFront.mass = 0.321),
                                (hero.bodyWheelBack.angularVelocity = 0),
                                (hero.bodyWheelBack.velocity.x = 0),
                                (hero.bodyWheelBack.velocity.y = 0),
                                (hero.bodyWheelFront.angularVelocity = 0),
                                (hero.bodyWheelFront.velocity.x = 0),
                                (hero.bodyWheelFront.velocity.y = 0),
                                (hero.bodyBase.angularVelocity = 0),
                                (hero.bodyBase.velocity.x = 0),
                                (hero.bodyBase.velocity.y = 0),
                                hero.bodyBase.data.SetPosition(new box2d.b2Vec2(this.body.data.GetPosition().x, this.body.data.GetPosition().y + 1.4)),
                                (hero.bodyWheelBack.y = hero.bodyBase.y + hero.wheelsOffY),
                                (hero.bodyWheelFront.y = hero.bodyBase.y + hero.wheelsOffY),
                                this.destroyJoint(),
                                (this.joint = Client.Main.instance.physics.box2d.wheelJoint(this.body, hero.bodyBase, 0, 0, 0, 0, 0, 1)),
                                (this.joint.m_collideConnected = !0),
                                hero.setKeepAngle(!1),
                                (hero.bodyBase.angularVelocity = 10.5 * hero.currDirection),
                                hero.bodyBase.data.ApplyLinearImpulse(new box2d.b2Vec2(0, 15), hero.bodyBase.data.GetPosition()),
                                (this.heroEngineState = hero.getEnableMotor()),
                                hero.setEnableMotor(!1, !1),
                                (this.m_currWallsTime = 0),
                                (this.m_active = !0),
                                (hero = null);
                        }
                    }),
                    (Lvl12Spring.prototype.destroyJoint = function () {
                        null != this.joint && (Client.Main.instance.physics.box2d.world.DestroyJoint(this.joint), (this.joint = null));
                    }),
                    (Lvl12Spring.prototype.update = function () {
                        !1 !== this.m_active &&
                            ((this.m_currWallsTime += 1),
                            25 === this.m_currWallsTime
                                ? Client.GameManager.instance.hero.changeDirection()
                                : 60 === this.m_currWallsTime && (Client.GameManager.instance.hero.setKeepAngle(!0), this.destroyJoint(), Client.GameManager.instance.hero.setEnableMotor(this.heroEngineState, !1), (this.m_active = !1)));
                    }),
                    (Lvl12Spring.prototype.free = function () {
                        (this.game = null), (this.body = null), (this.graphic = null), (this.tween = null), (this.joint = null), (this.btn = null);
                    }),
                    Lvl12Spring
                );
            })(Client.BasicElement);
            Client.Lvl12Spring = Lvl12Spring;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl13Door = (function (_super) {
                function Lvl13Door(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = 577),
                        (_this.group.y = 65),
                        Client.GameManager.instance.layerUpper.addChild(_this.group),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level13", "door_part1 instance 10000")),
                        _this.part3.pivot.set(15, 27),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level13", "door_part0 instance 10000")),
                        _this.part2.pivot.set(15, 14),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level13", "door_part2 instance 10000")),
                        _this.part1.pivot.set(15, 16),
                        _this.group.addChild(_this.part1),
                        _this.setParts("destroy"),
                        (_this.ground = new Phaser.Physics.Box2D.Body(game, null, 593, 113, 0)),
                        _this.ground.setRectangle(35, 100),
                        _this
                    );
                }
                return (
                    __extends(Lvl13Door, _super),
                    (Lvl13Door.prototype.updateAnimation = function () {
                        "destroy" === this.currAnim &&
                            (9 === this.counterAnim
                                ? (this.startTween(this.part1, 25, { x: 16, y: 85, skX: 3, skY: 3 }), this.startTween(this.part2, 25, { x: 9, y: 27, skX: 2, skY: 2 }), this.startTween(this.part3, 25, { x: 30, y: 55, skX: 3, skY: 3 }))
                                : 34 === this.counterAnim
                                ? (this.startTween(this.part2, 10, { x: -16, y: 90, skX: 6, skY: 6 }), this.startTween(this.part3, 10, { x: 61, y: 83, skX: 90, skY: 90 }))
                                : 44 === this.counterAnim
                                ? (this.startTween(this.part1, 5, { alpha: 0 }), this.startTween(this.part2, 5, { x: -36, y: 111, skX: -32, skY: -32 }), this.startTween(this.part3, 5, { alpha: 0 }))
                                : 49 === this.counterAnim
                                ? this.startTween(this.part2, 15, { x: -49, y: 310, skX: -93, skY: -93 })
                                : 50 === this.counterAnim
                                ? ((this.part1.visible = !1), (this.part3.visible = !1))
                                : 64 === this.counterAnim
                                ? this.startTween(this.part2, 3, { x: -46, y: 311, skX: -82, skY: -82, alpha: 0 })
                                : 67 === this.counterAnim && (this.animComplete(), this.ground.destroy()));
                    }),
                    (Lvl13Door.prototype.setParts = function (value) {
                        "destroy" === value &&
                            (this.setPart(this.part1, { x: 15, y: 84, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part2, { x: 15, y: 15, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part3, { x: 15, y: 49, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl13Door.prototype.free = function () {
                        (this.group = null), (this.part3 = null), (this.part2 = null), (this.part1 = null), (this.ground = null);
                    }),
                    Lvl13Door
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl13Door = Lvl13Door;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl13Lift = (function (_super) {
                function Lvl13Lift(game, x, y, disY) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.disY = 187),
                        (_this.moving = 0),
                        (_this.speedMove = 80),
                        (_this.soundPLaying = !1),
                        (_this.disY = disY),
                        (_this.endY = y),
                        (_this.startY = _this.endY - _this.disY),
                        (_this.wheel1 = Client.GameManager.instance.layerBackground.create(x - 41, y - 39, "level13", "liftWheel instance 10000")),
                        _this.wheel1.anchor.setTo(0.5),
                        _this.wheel1.animations.add("up", Phaser.Animation.generateFrameNames("liftWheel instance 1", 0, 23, "", 4), 30, !0),
                        _this.wheel1.animations.add("down", Phaser.Animation.generateFrameNames("liftWheel instance 1", 23, 0, "", 4), 30, !0),
                        (_this.wheel2 = Client.GameManager.instance.layerBackground.create(x + 42, y - 39, "level13", "liftWheel instance 10000")),
                        _this.wheel2.anchor.setTo(0.5),
                        _this.wheel2.animations.add("up", Phaser.Animation.generateFrameNames("liftWheel instance 1", 0, 23, "", 4), 30, !0),
                        _this.wheel2.animations.add("down", Phaser.Animation.generateFrameNames("liftWheel instance 1", 23, 0, "", 4), 30, !0),
                        (_this.back = Client.GameManager.instance.layerBackground.create(x, y - 47, "level13", "liftBack instance 10000")),
                        _this.back.anchor.setTo(0.5),
                        (_this.front = Client.GameManager.instance.layerElements.create(x, y, "level13", "lift instance 10000")),
                        _this.front.anchor.setTo(0.5),
                        (_this.body = new Phaser.Physics.Box2D.Body(game, null, x, y, 1)),
                        _this.body.setRectangle(100, 8, 8),
                        _this
                    );
                }
                return (
                    __extends(Lvl13Lift, _super),
                    (Lvl13Lift.prototype.move = function (percent) {
                        var newY = this.startY + this.disY * percent;
                        newY !== this.body.y &&
                            (newY < this.body.y
                                ? ((this.moving = -1), this.wheel1.animations.play("up"), this.wheel2.animations.play("up"))
                                : newY > this.body.y && ((this.moving = 1), this.wheel1.animations.play("down"), this.wheel2.animations.play("down")),
                            !1 === this.soundPLaying && ((this.soundPLaying = !0), Client.SoundManager.playSFX("s_lvl13_liftLoop", !0)),
                            (this.body.velocity.y = this.speedMove * this.moving),
                            (this.endY = newY));
                    }),
                    (Lvl13Lift.prototype.update = function () {
                        ((1 === this.moving && this.body.y >= this.endY) || (-1 === this.moving && this.body.y <= this.endY)) && this.stopMove(),
                            (this.front.y = this.body.y),
                            (this.back.y = this.body.y - 47),
                            (this.wheel1.y = this.body.y - 39),
                            (this.wheel2.y = this.wheel1.y);
                    }),
                    (Lvl13Lift.prototype.stopMove = function () {
                        (this.body.y = this.endY), (this.body.velocity.y = 0), this.wheel1.animations.stop(), this.wheel2.animations.stop(), (this.soundPLaying = !1), Client.SoundManager.stopSFXLoop("s_lvl13_liftLoop");
                    }),
                    (Lvl13Lift.prototype.free = function () {
                        (this.body = null), (this.wheel1 = null), (this.wheel2 = null), (this.back = null), (this.front = null);
                    }),
                    Lvl13Lift
                );
            })(Client.BasicElement);
            Client.Lvl13Lift = Lvl13Lift;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl13QuestDoor = (function (_super) {
                function Lvl13QuestDoor(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = 454),
                        (_this.group.y = 59),
                        Client.GameManager.instance.layerUpper.addChild(_this.group),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level13", "questCarP1 instance 10000")),
                        _this.part2.pivot.set(1, 5),
                        _this.part2.animations.add("anim", Phaser.Animation.generateFrameNames("questCarP1 instance 1", 0, 15, "", 4), 30, !1),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level13", "questCarP2 instance 10000")),
                        _this.part1.pivot.set(4, 5),
                        _this.part1.animations.add("anim", Phaser.Animation.generateFrameNames("questCarP2 instance 1", 0, 16, "", 4), 30, !1),
                        _this.group.addChild(_this.part1),
                        _this.setParts("open"),
                        _this
                    );
                }
                return (
                    __extends(Lvl13QuestDoor, _super),
                    (Lvl13QuestDoor.prototype.open = function () {
                        this.playAnim("open"), this.part1.animations.play("anim"), this.part2.animations.play("anim");
                    }),
                    (Lvl13QuestDoor.prototype.updateAnimation = function () {
                        "open" === this.currAnim &&
                            (8 === this.counterAnim
                                ? (this.startTween(this.part1, 11, { x: 51, y: 58, skX: -45, skY: -45 }, !0), this.startTween(this.part2, 11, { x: 7, y: 40, skX: 38, skY: 38 }, !0))
                                : 19 === this.counterAnim
                                ? (this.startTween(this.part1, 20, { x: 86, y: 182, skX: -120, skY: -120 }, !0), this.startTween(this.part2, 20, { x: 51, y: 167, skX: 158, skY: 158 }, !0))
                                : 39 === this.counterAnim
                                ? (this.startTween(this.part1, 26, { x: 94, y: 266, skX: 128, skY: 128, alpha: 0 }, !0), this.startTween(this.part2, 26, { x: 29, y: 323, skX: -97, skY: -97, alpha: 0 }, !0))
                                : 65 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl13QuestDoor.prototype.setParts = function (value) {
                        "open" === value &&
                            (this.setPart(this.part1, { x: 43, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0), this.setPart(this.part2, { x: 1, y: 0, angle: 0, scX: 1.03, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0));
                    }),
                    (Lvl13QuestDoor.prototype.free = function () {
                        (this.group = null), (this.part2 = null), (this.part1 = null);
                    }),
                    Lvl13QuestDoor
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl13QuestDoor = Lvl13QuestDoor;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl13Slider = (function (_super) {
                function Lvl13Slider(game, x, y, shadow) {
                    void 0 === shadow && (shadow = !1);
                    var _this = _super.call(this, game, x, y, "level13", "btnSlide", !1) || this;
                    return (
                        (_this.percent = 1),
                        (_this.startY = y),
                        (_this.endY = y - 72),
                        !0 === shadow && ((_this.shadow = Client.GameManager.instance.layerUpper.create(x, y, "level13", "btnSlideShadow instance 10000")), _this.shadow.anchor.setTo(0.7, 0)),
                        _this.onInputDown.add(_this.pressDown, _this),
                        _this
                    );
                }
                return (
                    __extends(Lvl13Slider, _super),
                    (Lvl13Slider.prototype.pressDown = function () {
                        (this.pressY = this.game.input.worldY), (this.lastY = this.y), Client.SoundManager.playSFX("s_lvl13_slider");
                    }),
                    (Lvl13Slider.prototype.update = function () {
                        _super.prototype.update.call(this),
                            !0 === this.pressed &&
                                ((this.y = this.lastY + (this.game.input.worldY - this.pressY)),
                                this.y > this.startY ? (this.y = this.startY) : this.y < this.endY && (this.y = this.endY),
                                (this.percent = 1 - Math.abs((this.y - this.startY) / (this.endY - this.startY))),
                                this.lift.move(this.percent),
                                this.shadow && ((this.shadow.y = this.y), (this.shadow.alpha = 0.2 + 0.8 * this.percent)));
                    }),
                    (Lvl13Slider.prototype.destroy = function () {
                        _super.prototype.destroy.call(this), (this.shadow = null), (this.lift = null);
                    }),
                    Lvl13Slider
                );
            })(Client.SimpleButton);
            Client.Lvl13Slider = Lvl13Slider;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl14Boss = (function (_super) {
                function Lvl14Boss(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.counterShow = 0),
                        (_this.activeShow = !0),
                        (_this.group = game.make.group()),
                        (_this.group.x = 711),
                        (_this.group.y = 209),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.part12 = new Client.SASprite(game, 0, 0, "level14", "chair_leg instance 10000")),
                        _this.part12.pivot.set(4, 7),
                        _this.group.addChild(_this.part12),
                        (_this.part11 = new Client.SASprite(game, 0, 0, "level14", "chair_leg instance 10000")),
                        _this.part11.pivot.set(4, 7),
                        _this.group.addChild(_this.part11),
                        (_this.part10 = new Client.SASprite(game, 0, 0, "level14", "chair_leg instance 10000")),
                        _this.part10.pivot.set(4, 7),
                        _this.group.addChild(_this.part10),
                        (_this.part9 = new Client.SASprite(game, 0, 0, "level14", "chair_back instance 10000")),
                        _this.part9.pivot.set(30, 23),
                        _this.group.addChild(_this.part9),
                        (_this.part8 = new Client.SASprite(game, 0, 0, "level14", "chair_leg instance 10000")),
                        _this.part8.pivot.set(4, 7),
                        _this.group.addChild(_this.part8),
                        (_this.part7 = new Client.SASprite(game, 0, 0, "level14", "chair_leg instance 10000")),
                        _this.part7.pivot.set(4, 7),
                        _this.group.addChild(_this.part7),
                        (_this.part6 = new Client.SASprite(game, 0, 0, "level14", "chair_leg instance 10000")),
                        _this.part6.pivot.set(4, 7),
                        _this.group.addChild(_this.part6),
                        (_this.part5 = new Client.SASprite(game, 0, 0, "level14", "chair_leg instance 10000")),
                        _this.part5.pivot.set(4, 7),
                        _this.group.addChild(_this.part5),
                        (_this.part4 = new Client.Lvl14BossWithPult(game)),
                        _this.group.addChild(_this.part4.group),
                        (_this.bubble = Client.GameManager.instance.layerMiddle.create(_this.group.x - 55, _this.group.y - 177, "level14", "bossBubble instance 10000")),
                        (_this.bubble.scale.x = -1),
                        _this.bubble.animations.add("show", Phaser.Animation.generateFrameNames("bossBubble instance 1", 1, 177, "", 4), 30, !1).onComplete.add(_this.hideBubbleShow, _this),
                        _this.bubble.animations.add("wheely", Phaser.Animation.generateFrameNames("bossBubble instance 1", 178, 230, "", 4), 30, !1).onComplete.add(_this.hideBubble, _this),
                        _this.bubble.animations.add("angry", Phaser.Animation.generateFrameNames("bossBubble instance 1", 231, 264, "", 4), 30, !1).onComplete.add(_this.hideBubble, _this),
                        (_this.bubble.visible = !1),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level14", "chair_bot instance 10000")),
                        _this.part3.pivot.set(64, 20),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level14", "chair_handle instance 10000")),
                        _this.part2.pivot.set(18, 42),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level14", "chairWire instance 10000")),
                        _this.part1.pivot.set(13, 15),
                        Client.GameManager.instance.layerUpper.addChild(_this.part1),
                        _this.setParts("anim"),
                        _this
                    );
                }
                return (
                    __extends(Lvl14Boss, _super),
                    (Lvl14Boss.prototype.hideBubble = function () {
                        this.bubble.visible = !1;
                    }),
                    (Lvl14Boss.prototype.hideBubbleShow = function () {
                        this.hideBubble(), (this.activeShow = !0), (this.counterShow = 0);
                    }),
                    (Lvl14Boss.prototype.playBubbleShow = function () {
                        (this.activeShow = !1), (this.bubble.visible = !0), this.bubble.animations.play("show");
                    }),
                    (Lvl14Boss.prototype.start = function () {
                        this.playAnim("anim");
                    }),
                    (Lvl14Boss.prototype.wheely = function () {
                        (this.activeShow = !1), (this.bubble.visible = !0), this.bubble.animations.play("wheely"), this.part4.playLeft();
                    }),
                    (Lvl14Boss.prototype.playAngry = function () {
                        (this.activeShow = !1), (this.bubble.visible = !0), this.bubble.animations.play("angry"), this.part4.playAngry();
                    }),
                    (Lvl14Boss.prototype.playDead = function () {
                        this.part4.playDead();
                    }),
                    (Lvl14Boss.prototype.update = function () {
                        _super.prototype.update.call(this), !0 === this.activeShow && ((this.counterShow += 1), 60 === this.counterShow && this.playBubbleShow());
                    }),
                    (Lvl14Boss.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? (this.startTween(this.part1, 20, { x: this.group.x - 4, y: this.group.y + 40, skX: 7, skY: 5, scY: 1.17 }),
                                  this.startTween(this.part2, 20, { x: 50, y: -4, skX: -17, skY: -17 }),
                                  this.startTween(this.part3, 20, { x: -27, y: 9, skX: -10, skY: -10 }),
                                  this.startTween(this.part4.group, 20, { x: -54, y: -40, skX: -8, skY: -8 }),
                                  this.startTween(this.part5, 20, { y: 28 }),
                                  this.startTween(this.part6, 20, { y: 37 }),
                                  this.startTween(this.part7, 20, { y: 19 }),
                                  this.startTween(this.part9, 20, { x: 53, y: -15, skX: -14, skY: -14 }),
                                  this.startTween(this.part10, 20, { x: 70, y: -7, scY: 1.56 }),
                                  this.startTween(this.part11, 20, { x: 75, y: 12, scY: 1.56 }),
                                  this.startTween(this.part12, 20, { x: 79, scY: 1.35 }))
                                : 21 === this.counterAnim
                                ? this.startTween(this.part4.group, 20, { x: -99, y: -24, skX: -18, skY: -18 })
                                : 41 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl14Boss.prototype.setParts = function (value) {
                        "anim" === value &&
                            (this.setPart(this.part1, { x: this.group.x - 5, y: this.group.y + 42, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part2, { x: 58, y: -6, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part3, { x: -25, y: 3, angle: 0, scX: 1, scY: 1, skX: 5, skY: 5, alpha: 1 }),
                            this.setPart(this.part4.group, { x: -16, y: -46, angle: 0, scX: 1, scY: 1, skX: 6, skY: 6, alpha: 1 }),
                            this.setPart(this.part5, { x: -69, y: 20, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part6, { x: -69, y: 32, angle: 0, scX: 0.71, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part7, { x: 21, y: 25, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part8, { x: 21, y: 32, angle: 0, scX: 0.71, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part9, { x: 52, y: 3, angle: 0, scX: 1, scY: 1, skX: -7, skY: -7, alpha: 1 }),
                            this.setPart(this.part10, { x: 74, y: 6, angle: 0, scX: 1, scY: 1.12, skX: -15, skY: -15, alpha: 1 }),
                            this.setPart(this.part11, { x: 77, y: 18, angle: 0, scX: 0.68, scY: 1.12, skX: -15, skY: -15, alpha: 1 }),
                            this.setPart(this.part12, { x: 80, y: 29, angle: 0, scX: 0.42, scY: 1.12, skX: -15, skY: -15, alpha: 1 }));
                    }),
                    (Lvl14Boss.prototype.free = function () {
                        (this.group = null),
                            (this.part12 = null),
                            (this.part11 = null),
                            (this.part10 = null),
                            (this.part9 = null),
                            (this.part8 = null),
                            (this.part7 = null),
                            (this.part6 = null),
                            (this.part5 = null),
                            (this.part4 = null),
                            (this.part3 = null),
                            (this.part2 = null),
                            (this.part1 = null),
                            (this.bubble = null);
                    }),
                    Lvl14Boss
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl14Boss = Lvl14Boss;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl14BossPult = (function (_super) {
                function Lvl14BossPult(game) {
                    var _this = _super.call(this) || this;
                    return (
                        Client.GameManager.instance.level.updateElements.push(_this),
                        (_this.group = new Client.SAGroup(game, 0, 0)),
                        (_this.part2 = new Client.SimpleButton(game, 0, 0, "level14", "bossPultLever", !1)),
                        _this.part2.anchor.setTo(0, 0),
                        _this.part2.pivot.set(9, 16),
                        _this.part2.deactivate(),
                        _this.part2.onInputDown.addOnce(_this.btnDown, _this),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level14", "bossPult instance 10000")),
                        _this.part1.pivot.set(29, 3),
                        _this.group.addChild(_this.part1),
                        (_this.cannonWire = game.make.sprite(-5, 30, "level14", "cannonWave instance 10000")),
                        _this.cannonWire.animations.add("anim", Phaser.Animation.generateFrameNames("cannonWave instance 1", 1, 23, "", 4), 30, !1).onComplete.add(function () {
                            this.cannonWire.visible = !1;
                        }, _this),
                        (_this.cannonWire.angle = 200),
                        (_this.cannonWire.visible = !1),
                        _this.part1.addChild(_this.cannonWire),
                        _this.setParts("left"),
                        _this
                    );
                }
                return (
                    __extends(Lvl14BossPult, _super),
                    (Lvl14BossPult.prototype.playLeft = function () {
                        this.playAnim("left"), (this.cannonWire.visible = !0), this.cannonWire.animations.play("anim");
                    }),
                    (Lvl14BossPult.prototype.playDead = function () {
                        this.part2.activate();
                    }),
                    (Lvl14BossPult.prototype.btnDown = function () {
                        this.part2.deactivate(), this.playAnim("right"), (this.cannonWire.visible = !0), this.cannonWire.animations.play("anim"), Client.GameManager.instance.level.customAction(3);
                    }),
                    (Lvl14BossPult.prototype.updateAnimation = function () {
                        "left" === this.currAnim
                            ? 1 === this.counterAnim
                                ? this.startTween(this.part2, 5, { x: -8, y: -10, skX: -31, skY: -31 })
                                : 7 === this.counterAnim && this.animComplete()
                            : "right" === this.currAnim
                            ? 1 === this.counterAnim
                                ? this.startTween(this.part2, 9, { x: 3, skX: 38, skY: 38 })
                                : 9 === this.counterAnim && this.animComplete()
                            : "centre" === this.currAnim && (1 === this.counterAnim ? this.startTween(this.part2, 5, { x: -2, y: -12, skX: 5, skY: 5 }) : 6 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl14BossPult.prototype.setParts = function (value) {
                        "left" === value
                            ? (this.setPart(this.part1, { x: -11, y: -1, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }), this.setPart(this.part2, { x: -2, y: -12, angle: 0, scX: 1, scY: 1, skX: 6, skY: 6, alpha: 1 }))
                            : "right" === value
                            ? (this.setPart(this.part1, { x: -11, y: -1, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }), this.setPart(this.part2, { x: -8, y: -10, angle: 0, scX: 1, scY: 1, skX: -31, skY: -31, alpha: 1 }))
                            : "centre" === value &&
                              (this.setPart(this.part1, { x: -11, y: -1, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }), this.setPart(this.part2, { x: 3, y: -10, angle: 0, scX: 1, scY: 1, skX: 38, skY: 38, alpha: 1 }));
                    }),
                    (Lvl14BossPult.prototype.free = function () {
                        (this.group = null), (this.part2 = null), (this.part1 = null), (this.cannonWire = null);
                    }),
                    Lvl14BossPult
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl14BossPult = Lvl14BossPult;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl14BossWithPult = (function (_super) {
                function Lvl14BossWithPult(game) {
                    var _this = _super.call(this) || this;
                    return (
                        Client.GameManager.instance.level.updateElements.push(_this),
                        (_this.group = new Client.SAGroup(game, 0, 0)),
                        (_this.part5 = new Client.SASprite(game, 0, 0, "level14", "bossWheels instance 10000")),
                        _this.group.addChild(_this.part5),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "level14", "bossBody instance 10000")),
                        _this.part4.pivot.set(82, 40),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level14")),
                        _this.part3.pivot.set(21, 39),
                        _this.part3.animations.add("idle", Phaser.Animation.generateFrameNames("bossEyes instance 1", 0, 35, "", 4), 30, !0),
                        _this.part3.animations.add("surprise", Phaser.Animation.generateFrameNames("bossEyes instance 1", 36, 63, "", 4), 30, !1).onComplete.addOnce(function () {
                            this.part3.animations.play("idle");
                        }, _this),
                        _this.part3.animations.add("angry", Phaser.Animation.generateFrameNames("bossEyes instance 1", 64, 89, "", 4), 30, !1).onComplete.addOnce(function () {
                            this.part3.animations.play("idle");
                        }, _this),
                        _this.part3.animations.add("bump", Phaser.Animation.generateFrameNames("bossEyes instance 1", 9, 9, "", 4), 30, !1),
                        _this.part3.animations.play("idle"),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.Lvl14BossPult(game)),
                        _this.group.addChild(_this.part2.group),
                        _this.setParts("anim"),
                        _this
                    );
                }
                return (
                    __extends(Lvl14BossWithPult, _super),
                    (Lvl14BossWithPult.prototype.playLeft = function () {
                        this.part2.playLeft(), this.part3.animations.play("surprise");
                    }),
                    (Lvl14BossWithPult.prototype.playAngry = function () {
                        this.part3.animations.play("angry");
                    }),
                    (Lvl14BossWithPult.prototype.playDead = function () {
                        this.part3.animations.play("bump"), this.playAnim("anim"), this.part2.playDead();
                    }),
                    (Lvl14BossWithPult.prototype.updateAnimation = function () {
                        "anim" === this.currAnim && (1 === this.counterAnim ? this.startTween(this.part2.group, 10, { x: -36, y: 47, skX: 15, skY: 15 }) : 11 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl14BossWithPult.prototype.setParts = function (value) {
                        "anim" === value &&
                            (this.setPart(this.part2.group, { x: -35, y: 31, angle: 0, scX: 1.2, scY: 1.2, skX: -8, skY: -8, alpha: 1 }),
                            this.setPart(this.part3, { x: -36, y: -12, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part4, { x: 3, y: 5, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part5, { x: -47, y: 18, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl14BossWithPult.prototype.free = function () {
                        (this.group = null), (this.part5 = null), (this.part4 = null), (this.part3 = null), (this.part2 = null);
                    }),
                    Lvl14BossWithPult
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl14BossWithPult = Lvl14BossWithPult;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl14Dark = (function (_super) {
                function Lvl14Dark(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.counter = 0),
                        (_this.active = !1),
                        (_this.left = Client.GameManager.instance.layerUpper.create(15, 265, "level14", "dark instance 10000")),
                        (_this.right = Client.GameManager.instance.layerUpper.create(525, 265, "level14", "dark instance 10000")),
                        (_this.right.scale.x = -1),
                        _this
                    );
                }
                return (
                    __extends(Lvl14Dark, _super),
                    (Lvl14Dark.prototype.activate = function () {
                        this.active = !0;
                    }),
                    (Lvl14Dark.prototype.update = function () {
                        !0 === this.active &&
                            ((this.counter += 1),
                            20 === this.counter
                                ? ((this.left.alpha = 0.5), (this.right.alpha = 0.5))
                                : 21 === this.counter
                                ? ((this.left.alpha = 0.75), (this.right.alpha = 0.75))
                                : 23 === this.counter
                                ? ((this.left.alpha = 1), (this.right.alpha = 1))
                                : 25 === this.counter
                                ? ((this.left.alpha = 0), (this.right.alpha = 0))
                                : 27 === this.counter
                                ? ((this.left.alpha = 0.25), (this.right.alpha = 0.25))
                                : 29 === this.counter
                                ? ((this.left.alpha = 0.5), (this.right.alpha = 0.5), Client.GameManager.instance.level.customAction(1))
                                : 31 === this.counter && ((this.active = !1), this.left.destroy(), this.right.destroy()));
                    }),
                    (Lvl14Dark.prototype.free = function () {
                        (this.left = null), (this.right = null);
                    }),
                    Lvl14Dark
                );
            })(Client.BasicElement);
            Client.Lvl14Dark = Lvl14Dark;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl14LampFall1 = (function (_super) {
                function Lvl14LampFall1(game) {
                    var _this = _super.call(this) || this;
                    return (
                        Client.GameManager.instance.level.updateElements.push(_this),
                        (_this.group = new Client.SAGroup(game, 0, 0)),
                        (_this.part8 = new Client.SASprite(game, 0, 0, "level14", "lampShine instance 10000")),
                        _this.part8.pivot.set(26, 26),
                        _this.group.addChild(_this.part8),
                        (_this.part7 = new Client.SASprite(game, 0, 0, "level14", "lampShine instance 10000")),
                        _this.part7.pivot.set(26, 26),
                        _this.group.addChild(_this.part7),
                        (_this.part6 = new Client.SASprite(game, 0, 0, "level14", "lampShine instance 10000")),
                        _this.part6.pivot.set(26, 26),
                        _this.group.addChild(_this.part6),
                        (_this.part5 = new Client.SASprite(game, 0, 0, "level14", "lampBase instance 10000")),
                        _this.part5.pivot.set(68, 57),
                        _this.group.addChild(_this.part5),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "level14", "lampVis instance 10000")),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level14", "lampVis instance 10000")),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level14", "lampVis instance 10000")),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level14", "lampVis instance 10000")),
                        _this.group.addChild(_this.part1),
                        _this.setParts("fall"),
                        _this
                    );
                }
                return (
                    __extends(Lvl14LampFall1, _super),
                    (Lvl14LampFall1.prototype.updateAnimation = function () {
                        "fall" === this.currAnim &&
                            (5 === this.counterAnim
                                ? ((this.part5.frameName = "lampBase instance 10001"),
                                  (this.part6.frameName = "lampShine instance 10001"),
                                  (this.part7.frameName = "lampShine instance 10001"),
                                  (this.part8.frameName = "lampShine instance 10001"),
                                  this.startTween(this.part1, 2, { y: 2, skX: 90, skY: 90 }),
                                  this.startTween(this.part2, 2, { x: 9, y: 10, skX: -30, skY: -30 }),
                                  this.startTween(this.part3, 2, { x: 42, y: 0, skX: -30, skY: -30 }),
                                  this.startTween(this.part4, 2, { x: -27, y: -2, skX: 45, skY: 45 }))
                                : 7 === this.counterAnim
                                ? (this.startTween(this.part1, 4, { x: -57, y: 7, skX: 165, skY: 165 }),
                                  this.startTween(this.part2, 4, { x: 14, y: 13, skX: -150, skY: -150 }),
                                  this.startTween(this.part3, 4, { x: 48, y: 6, skX: -150, skY: -150 }),
                                  this.startTween(this.part4, 4, { x: -28, y: 1, skX: 139, skY: 139 }))
                                : 16 === this.counterAnim
                                ? (this.setPart(this.part1, { x: -63, y: 0, skX: 30, skY: 30 }),
                                  this.setPart(this.part2, { x: 11, y: 3, skX: -15, skY: -15 }),
                                  this.setPart(this.part3, { x: 46, y: 0, skX: 0, skY: 0 }),
                                  this.setPart(this.part4, { x: -35, y: -3, skX: 4, skY: 4 }))
                                : 17 === this.counterAnim
                                ? (this.startTween(this.part1, 2, { x: -61, y: 53, skX: 0, skY: 0 }),
                                  this.startTween(this.part2, 2, { y: 9 }),
                                  this.startTween(this.part3, 2, { x: 54, y: 4 }),
                                  this.startTween(this.part4, 2, { x: -25, y: 31 }))
                                : 19 === this.counterAnim
                                ? (this.startTween(this.part1, 2, { x: -63, y: 40, skX: 105, skY: 105 }),
                                  this.startTween(this.part2, 2, { y: 12, skX: -75, skY: -75 }),
                                  this.startTween(this.part3, 2, { x: 64, y: -8, skX: 75, skY: 75 }),
                                  this.startTween(this.part4, 2, { x: -33, y: 32, skX: 79, skY: 79, alpha: 0.97 }))
                                : 21 === this.counterAnim
                                ? (this.startTween(this.part1, 5, { x: -91, y: 89, skX: -100, skY: -100, alpha: 0.54 }),
                                  this.startTween(this.part2, 5, { x: 43, y: 11, skX: 75, skY: 75, alpha: 0.58 }),
                                  this.startTween(this.part3, 5, { x: 84, y: 0, skX: -135, skY: -135, alpha: 0.6 }),
                                  this.startTween(this.part4, 5, { y: 50, alpha: 0.6 }))
                                : 26 === this.counterAnim
                                ? (this.startTween(this.part1, 4, { x: -94, alpha: 0 }), this.startTween(this.part2, 4, { alpha: 0 }), this.startTween(this.part3, 4, { alpha: 0 }))
                                : 30 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl14LampFall1.prototype.setParts = function (value) {
                        "fall" === value &&
                            (this.setPart(this.part1, { x: -56, y: 0, angle: 0, scX: 1, scY: 1, skX: 15, skY: 15, alpha: 1 }),
                            this.setPart(this.part2, { x: 12, y: 6, angle: 0, scX: 1, scY: 1, skX: 15, skY: 15, alpha: 1 }),
                            this.setPart(this.part3, { x: 47, y: -4, angle: 0, scX: 1, scY: 1, skX: 15, skY: 15, alpha: 1 }),
                            this.setPart(this.part4, { x: -30, y: -3, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part5, { x: 0, y: 13, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part6, { x: -30, y: -5, angle: 0, scX: 0.8, scY: 0.8, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part7, { x: 30, y: -5, angle: 0, scX: 0.8, scY: 0.8, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part8, { x: 0, y: -5, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl14LampFall1.prototype.free = function () {
                        (this.group = null), (this.part8 = null), (this.part7 = null), (this.part6 = null), (this.part5 = null), (this.part4 = null), (this.part3 = null), (this.part2 = null), (this.part1 = null);
                    }),
                    Lvl14LampFall1
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl14LampFall1 = Lvl14LampFall1;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl14LampFall2 = (function (_super) {
                function Lvl14LampFall2(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = 523),
                        (_this.group.y = -140),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.lamp = new Client.Lvl14LampFall1(game)),
                        _this.group.addChild(_this.lamp.group),
                        (_this.part5 = new Client.SASprite(game, 0, 0, "level14", "lampVis instance 10000")),
                        _this.group.addChild(_this.part5),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "level14", "lampVis instance 10000")),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level14", "lampVis instance 10000")),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level14", "lampVis instance 10000")),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level14", "lampBump instance 10000")),
                        _this.group.addChild(_this.part1),
                        _this.setParts("fall1"),
                        _this
                    );
                }
                return (
                    __extends(Lvl14LampFall2, _super),
                    (Lvl14LampFall2.prototype.playFall = function (id) {
                        this.playAnim("fall" + id), this.lamp.playAnim("fall"), 1 === id ? Client.SoundManager.playSFX("s_lvl14_lusterFall") : 2 === id && Client.SoundManager.playSFX("s_lvl14_lusterHitBoss");
                    }),
                    (Lvl14LampFall2.prototype.updateAnimation = function () {
                        "fall1" === this.currAnim
                            ? 2 === this.counterAnim
                                ? this.startTween(this.lamp.group, 2, { x: 52, skX: -21, skY: -21 })
                                : 4 === this.counterAnim
                                ? this.startTween(this.lamp.group, 6, { x: 36, y: 221, skX: 25, skY: 25 })
                                : 10 === this.counterAnim
                                ? this.startTween(this.lamp.group, 5, { y: 334 })
                                : 15 === this.counterAnim
                                ? ((this.part1.visible = !0),
                                  this.setPart(this.part1, { x: 29, y: 376, scX: 0.27, scY: 0.11, alpha: 0.37 }),
                                  this.startTween(this.part1, 2, { x: -11, y: 362, scX: 1, scY: 0.39 }),
                                  this.setPart(this.lamp.group, { y: 361, scY: 0.88 }))
                                : 16 === this.counterAnim
                                ? this.startTween(this.lamp.group, 2, { y: 357 })
                                : 17 === this.counterAnim
                                ? this.startTween(this.part1, 2, { x: -38, y: 352, scX: 1.49, scY: 0.58, alpha: 0.17 })
                                : 18 === this.counterAnim
                                ? this.startTween(this.lamp.group, 2, { y: 361 })
                                : 19 === this.counterAnim && (this.animComplete(), Client.GameManager.instance.level.customAction(4))
                            : "fall2" === this.currAnim &&
                              (1 === this.counterAnim
                                  ? (this.startTween(this.part2, 2, { x: 0, y: 180, skX: 0, skY: 0 }),
                                    this.startTween(this.part3, 2, { x: 67, y: 168, skX: 0, skY: 0 }),
                                    this.startTween(this.part4, 2, { x: 98, y: 150, skX: 0, skY: 0 }),
                                    this.startTween(this.part5, 2, { x: 23, y: 170, skX: -15, skY: -15 }),
                                    this.startTween(this.lamp.group, 2, { x: 52, skX: -21, skY: -21 }))
                                  : 3 === this.counterAnim
                                  ? (this.startTween(this.part2, 2, { x: 2, y: 187, skX: 133, skY: 133 }),
                                    this.startTween(this.part3, 2, { x: 56, y: 174, skX: -125, skY: -125 }),
                                    this.startTween(this.part4, 2, { x: 93, y: 161, skX: -125, skY: -125 }),
                                    this.startTween(this.part5, 2, { x: 28, y: 182, skX: 118, skY: 118 }),
                                    this.startTween(this.lamp.group, 6, { x: 36, y: 221, skX: 25, skY: 25 }))
                                  : 5 === this.counterAnim
                                  ? (this.startTween(this.part2, 2, { x: -6, y: 190, skX: 178, skY: 178 }),
                                    this.startTween(this.part3, 2, { x: 60, y: 205, skX: -167, skY: -167 }),
                                    this.startTween(this.part4, 2, { x: 95, y: 200, skX: -167, skY: -167 }),
                                    this.startTween(this.part5, 2, { x: 20, y: 190, skX: 163, skY: 163 }))
                                  : 7 === this.counterAnim
                                  ? (this.setPart(this.part2, { x: -10, y: 194 }), this.setPart(this.part3, { x: 57, y: 214 }), this.setPart(this.part4, { x: 91, y: 211 }), this.setPart(this.part5, { x: 17, y: 202 }))
                                  : 8 === this.counterAnim
                                  ? (this.startTween(this.part2, 2, { x: -12, y: 224 }),
                                    this.startTween(this.part3, 2, { x: 46, y: 259 }),
                                    this.startTween(this.part4, 2, { x: 81, y: 264 }),
                                    this.startTween(this.part5, 2, { x: 14, y: 232 }))
                                  : 9 === this.counterAnim
                                  ? (this.setPart(this.part1, { x: 40, y: 266, scX: 0.27, scY: 0.11, alpha: 0.37 }), this.setPart(this.lamp.group, { y: 243 }))
                                  : 10 === this.counterAnim
                                  ? (this.startTween(this.part1, 2, { x: 0, y: 256, scX: 1, scY: 0.39 }),
                                    this.startTween(this.part2, 3, { x: -8, y: 358, skX: 73, skY: 73 }),
                                    this.startTween(this.part3, 3, { x: 10, y: 295, skX: 88, skY: 88 }),
                                    this.startTween(this.part4, 3, { x: 97, y: 294, skX: -17, skY: -17 }),
                                    this.startTween(this.part5, 3, { x: -54, y: 325, skX: 5, skY: 5 }),
                                    this.startTween(this.lamp.group, 4, { y: 288, skX: -50, skY: -50 }))
                                  : 12 === this.counterAnim
                                  ? (Client.GameManager.instance.level.customAction(5), this.startTween(this.part1, 2, { x: -31, y: 247, scX: 1.49, scY: 0.58, alpha: 0.17 }))
                                  : 13 === this.counterAnim
                                  ? (this.startTween(this.part2, 5, { y: 379 }), this.startTween(this.part3, 5, { x: -43, y: 360 }), this.startTween(this.part4, 5, { x: 117, y: 374 }), this.startTween(this.part5, 5, { x: -95, y: 372 }))
                                  : 14 === this.counterAnim
                                  ? (this.startTween(this.part1, 3, { x: -58, y: 238, scX: 1.86, scY: 0.73, alpha: 0 }), this.startTween(this.lamp.group, 2, { x: 13, y: 282, skX: -74, skY: -74 }))
                                  : 16 === this.counterAnim
                                  ? this.startTween(this.lamp.group, 2, { x: -9, y: 332 })
                                  : 18 === this.counterAnim
                                  ? (this.startTween(this.part2, 2, { x: -38, y: 369, skX: -152, skY: -152 }),
                                    this.startTween(this.part3, 2, { x: -63, y: 385 }),
                                    this.startTween(this.part4, 2, { x: 152, y: 372, skX: 178, skY: 178 }),
                                    this.startTween(this.part5, 2, { x: -103, y: 367, skX: 148, skY: 148 }),
                                    this.startTween(this.lamp.group, 11, { x: 5, y: 333, skX: -59, skY: -59 }))
                                  : 20 === this.counterAnim
                                  ? (this.startTween(this.part2, 3, { x: -108, y: 370, skX: 2, skY: 2, alpha: 0.52 }),
                                    this.startTween(this.part3, 3, { x: -79, y: 376, alpha: 0.52 }),
                                    this.startTween(this.part4, 3, { x: 176, y: 389, skX: -77, skY: -77, alpha: 0.56 }),
                                    this.startTween(this.part5, 3, { x: -142, y: 386, skX: 88, skY: 88, alpha: 0.53 }))
                                  : 23 === this.counterAnim
                                  ? (this.startTween(this.part2, 3, { x: -125, y: 389, skX: -88, skY: -88 }), this.startTween(this.part3, 3, { x: -89, y: 387, skX: 103, skY: 103 }), this.startTween(this.part5, 3, { x: -154 }))
                                  : 26 === this.counterAnim
                                  ? (this.startTween(this.part2, 3, { alpha: 0.02 }), this.startTween(this.part3, 3, { alpha: 0 }), this.startTween(this.part4, 3, { alpha: 0 }), this.startTween(this.part5, 3, { alpha: 0 }))
                                  : 29 === this.counterAnim && (this.animComplete(), Client.SoundManager.playSFX("s_lvl14_lusterHitBossDialog")));
                    }),
                    (Lvl14LampFall2.prototype.setParts = function (value) {
                        "fall1" === value
                            ? ((this.part1.visible = !1),
                              this.setPart(this.part2, { x: -56, y: 0, angle: 0, scX: 1, scY: 1, skX: 15, skY: 15, alpha: 1 }),
                              this.setPart(this.part3, { x: 12, y: 6, angle: 0, scX: 1, scY: 1, skX: 15, skY: 15, alpha: 1 }),
                              this.setPart(this.part4, { x: 47, y: -4, angle: 0, scX: 1, scY: 1, skX: 15, skY: 15, alpha: 1 }),
                              this.setPart(this.part5, { x: -30, y: -3, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.lamp.group, { x: 41, y: 162, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }))
                            : "fall2" === value &&
                              (this.setPart(this.part1, { x: -58, y: 345, angle: 0, scX: 1.86, scY: 0.73, skX: 0, skY: 0, alpha: 0 }),
                              this.setPart(this.part2, { x: -14, y: 162, angle: 0, scX: 1, scY: 1, skX: 15, skY: 15, alpha: 1 }),
                              this.setPart(this.part3, { x: 53, y: 169, angle: 0, scX: 1, scY: 1, skX: 15, skY: 15, alpha: 1 }),
                              this.setPart(this.part4, { x: 88, y: 159, angle: 0, scX: 1, scY: 1, skX: 15, skY: 15, alpha: 1 }),
                              this.setPart(this.part5, { x: 11, y: 159, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.lamp.group, { x: 41, y: 162, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl14LampFall2.prototype.free = function () {
                        (this.group = null), (this.lamp = null), (this.part5 = null), (this.part4 = null), (this.part3 = null), (this.part2 = null), (this.part1 = null);
                    }),
                    Lvl14LampFall2
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl14LampFall2 = Lvl14LampFall2;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl14Lift = (function (_super) {
                function Lvl14Lift(game, x, y) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.speed = 15),
                        (_this.dir = 0),
                        (_this.endTopY = y),
                        (_this.endBotY = y + 275),
                        (_this.wheel1 = Client.GameManager.instance.layerUpper.create(x - 44, y + 22, "level14", "moveWheel instance 10000")),
                        _this.wheel1.anchor.setTo(0.5),
                        _this.wheel1.animations.add("up", Phaser.Animation.generateFrameNames("moveWheel instance 1", 0, 23, "", 4), 30, !0),
                        _this.wheel1.animations.add("down", Phaser.Animation.generateFrameNames("moveWheel instance 1", 23, 0, "", 4), 30, !0),
                        (_this.wheel2 = Client.GameManager.instance.layerUpper.create(x + 40, y + 22, "level14", "moveWheel instance 10000")),
                        _this.wheel2.anchor.setTo(0.5),
                        _this.wheel2.animations.add("up", Phaser.Animation.generateFrameNames("moveWheel instance 1", 0, 23, "", 4), 30, !0),
                        _this.wheel2.animations.add("down", Phaser.Animation.generateFrameNames("moveWheel instance 1", 23, 0, "", 4), 30, !0),
                        (_this.graphic = Client.GameManager.instance.layerUpper.create(x, y, "level14", "lift instance 10000")),
                        (_this.graphic.pivot.y = -3),
                        game.physics.box2d.enable(_this.graphic),
                        _this.graphic.body.setRectangle(170, 34),
                        (_this.graphic.body.kinematic = !0),
                        _this.graphic.body.setCollisionMask(~Client.FilterGroups.MIRROR_ACTIVE),
                        _this
                    );
                }
                return (
                    __extends(Lvl14Lift, _super),
                    (Lvl14Lift.prototype.move = function (direction, scaleSpeed) {
                        void 0 === scaleSpeed && (scaleSpeed = 1),
                            (this.dir = direction),
                            (this.graphic.body.velocity.y = this.speed * scaleSpeed * this.dir),
                            1 === this.dir ? (this.wheel1.animations.play("down"), this.wheel2.animations.play("down")) : -1 === this.dir && (this.wheel1.animations.play("up"), this.wheel2.animations.play("up"));
                    }),
                    (Lvl14Lift.prototype.update = function () {
                        1 === this.dir
                            ? (this.graphic.body.y >= this.endBotY && ((this.graphic.body.y = this.endBotY), this.stopMove()), (this.wheel1.y = this.graphic.body.y + 22), (this.wheel2.y = this.graphic.body.y + 22))
                            : -1 === this.dir &&
                              (this.graphic.body.y <= this.endTopY && ((this.graphic.body.y = this.endTopY), this.stopMove(), Client.GameManager.instance.level.customAction(6)),
                              (this.wheel1.y = this.graphic.body.y + 22),
                              (this.wheel2.y = this.graphic.body.y + 22));
                    }),
                    (Lvl14Lift.prototype.stopMove = function () {
                        this.wheel1.animations.stop(), this.wheel2.animations.stop(), (this.graphic.body.velocity.y = 0), (this.dir = 0);
                    }),
                    (Lvl14Lift.prototype.free = function () {
                        (this.wheel1 = null), (this.wheel2 = null), (this.graphic = null);
                    }),
                    Lvl14Lift
                );
            })(Client.BasicElement);
            Client.Lvl14Lift = Lvl14Lift;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl14MoveMirror = (function (_super) {
                function Lvl14MoveMirror(game, x, y) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.boxPressed = !1),
                        (_this.boxTopY = 315),
                        (_this.boxBotY = 540),
                        (_this.game = game),
                        (_this.wheel = Client.GameManager.instance.layerUpper.create(x + 24, y + 4, "level14", "moveWheel instance 10000")),
                        _this.wheel.anchor.setTo(0.5),
                        _this.wheel.animations.add("up", Phaser.Animation.generateFrameNames("moveWheel instance 1", 0, 23, "", 4), 30, !0),
                        _this.wheel.animations.add("down", Phaser.Animation.generateFrameNames("moveWheel instance 1", 23, 0, "", 4), 30, !0),
                        (_this.btn = new Client.SimpleButton(game, x, y, "level14", "mirrorLaser", !1)),
                        _this.btn.deactivate(),
                        _this.btn.onInputDown.add(_this.down, _this),
                        _this.btn.onInputUp.add(_this.up, _this),
                        Client.GameManager.instance.layerUpper.addChild(_this.btn),
                        _this
                    );
                }
                return (
                    __extends(Lvl14MoveMirror, _super),
                    (Lvl14MoveMirror.prototype.activate = function () {
                        this.btn.activate();
                    }),
                    (Lvl14MoveMirror.prototype.down = function () {
                        (this.boxPressed = !0), (this.pressedY = this.game.input.worldY), (this.boxY = this.btn.y);
                    }),
                    (Lvl14MoveMirror.prototype.up = function () {
                        this.boxPressed = !1;
                    }),
                    (Lvl14MoveMirror.prototype.update = function () {
                        if (!0 === this.boxPressed) {
                            var offY = this.game.input.worldY - this.pressedY;
                            (this.btn.y = this.boxY + offY), this.btn.y > this.boxBotY ? (this.btn.y = this.boxBotY) : this.btn.y < this.boxTopY && (this.btn.y = this.boxTopY), (this.wheel.y = this.btn.y + 4);
                        }
                    }),
                    (Lvl14MoveMirror.prototype.free = function () {
                        (this.game = null), (this.btn = null), (this.wheel = null);
                    }),
                    Lvl14MoveMirror
                );
            })(Client.BasicElement);
            Client.Lvl14MoveMirror = Lvl14MoveMirror;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl15BigDoor = (function (_super) {
                function Lvl15BigDoor(_game, _x, _y) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.updatePart1 = !1),
                        (_this.updatePart2 = !1),
                        (_this.updatePart3 = !1),
                        (_this.partAngle1 = 0),
                        (_this.partAngle2 = 0),
                        (_this.partAngle3 = 0),
                        _this.addFakeDoor(_x, _y),
                        (_this.doorPart3 = new Client.SimpleButton(_game, _x, _y, "level15", "doorPart3", !1)),
                        _this.doorPart3.activate(),
                        (_this.doorPart3.name = "part3"),
                        _this.doorPart3.events.onInputDown.add(_this.ClickDoorParts, _this),
                        Client.GameManager.instance.layerMiddle.addChild(_this.doorPart3),
                        (_this.doorPart2 = new Client.SimpleButton(_game, _x, _y, "level15", "doorPart2", !1)),
                        _this.doorPart2.activate(),
                        (_this.doorPart2.name = "part2"),
                        _this.doorPart2.events.onInputDown.add(_this.ClickDoorParts, _this),
                        Client.GameManager.instance.layerMiddle.addChild(_this.doorPart2),
                        (_this.doorPart1 = new Client.SimpleButton(_game, _x, _y, "level15", "doorPart1", !1)),
                        _this.doorPart1.activate(),
                        (_this.doorPart1.name = "part1"),
                        _this.doorPart1.events.onInputDown.add(_this.ClickDoorParts, _this),
                        Client.GameManager.instance.layerMiddle.addChild(_this.doorPart1),
                        (_this.partAngle1 = _this.doorPart1.angle = 90),
                        (_this.partAngle2 = _this.doorPart2.angle = 180),
                        (_this.partAngle3 = _this.doorPart3.angle = -90),
                        _this
                    );
                }
                return (
                    __extends(Lvl15BigDoor, _super),
                    (Lvl15BigDoor.prototype.addFakeDoor = function (_x, _y) {
                        (this.fakeDoor = Client.GameManager.instance.layerMiddle.create(_x - 1, _y, "level15", "doorAnimCentre instance 10000")),
                            this.fakeDoor.anchor.set(0.5),
                            (this.key = Client.Main.instance.make.sprite(0, 15, "level15", "key instance 10000")),
                            this.key.anchor.set(0.5),
                            (this.key.alpha = 0),
                            this.fakeDoor.addChild(this.key);
                    }),
                    (Lvl15BigDoor.prototype.showFakeDoor = function () {
                        Client.SoundManager.playSFX("s_lvl15_openBig"),
                            (this.fakeDoor.angle = this.doorPart1.angle),
                            Client.Main.instance.add
                                .tween(this.key)
                                .to({ alpha: 1 }, 500, "Linear", !0, 500)
                                .onComplete.add(function () {
                                    Client.Main.instance.add
                                        .tween(this.key)
                                        .to({ alpha: 0 }, 300, "Linear", !0)
                                        .onComplete.add(function () {
                                            Client.Main.instance.add.tween(this.fakeDoor).to({ alpha: 0 }, 300, "Linear", !0);
                                        }, this);
                                }, this);
                    }),
                    (Lvl15BigDoor.prototype.ClickDoorParts = function (sprite) {
                        switch ((Client.SoundManager.playSFX("s_lvl15_rotateParts"), sprite.name)) {
                            case "part1":
                                if (this.updatePart1) return;
                                (this.updatePart1 = !0), (this.partAngle1 += 90), 180 < this.partAngle1 && (this.partAngle1 -= 360);
                                break;
                            case "part2":
                                if (this.updatePart2) return;
                                (this.updatePart2 = !0), (this.partAngle2 -= 90), this.partAngle2 < -90 && (this.partAngle2 += 360);
                                break;
                            case "part3":
                                if (this.updatePart3) return;
                                (this.updatePart3 = !0), (this.partAngle3 += 90), 180 < this.partAngle3 && (this.partAngle3 -= 360);
                        }
                    }),
                    (Lvl15BigDoor.prototype.UpdateDoorParts = function () {
                        this.updatePart1 && (Math.abs(this.partAngle1 - this.doorPart1.angle) < 10 ? ((this.doorPart1.angle = this.partAngle1), (this.updatePart1 = !1), this.CheckDoorParts()) : (this.doorPart1.angle += 3)),
                            this.updatePart2 && (Math.abs(this.partAngle2 - this.doorPart2.angle) < 10 ? ((this.doorPart2.angle = this.partAngle2), (this.updatePart2 = !1), this.CheckDoorParts()) : (this.doorPart2.angle -= 3)),
                            this.updatePart3 && (Math.abs(this.partAngle3 - this.doorPart3.angle) < 10 ? ((this.doorPart3.angle = this.partAngle3), (this.updatePart3 = !1), this.CheckDoorParts()) : (this.doorPart3.angle += 3));
                    }),
                    (Lvl15BigDoor.prototype.CheckDoorParts = function () {
                        this.updatePart1 ||
                            this.updatePart2 ||
                            this.updatePart3 ||
                            (this.partAngle1 === this.partAngle2 && this.partAngle1 === this.partAngle3 && ((this.doorPart1.visible = !1), (this.doorPart2.visible = !1), (this.doorPart3.visible = !1), this.showFakeDoor()));
                    }),
                    (Lvl15BigDoor.prototype.update = function () {
                        this.UpdateDoorParts();
                    }),
                    (Lvl15BigDoor.prototype.free = function () {
                        (this.doorPart1 = null), (this.doorPart2 = null), (this.doorPart3 = null), (this.fakeDoor = null), (this.key = null);
                    }),
                    Lvl15BigDoor
                );
            })(Client.BasicElement);
            Client.Lvl15BigDoor = Lvl15BigDoor;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl15Bomb = (function (_super) {
                function Lvl15Bomb(_game) {
                    var _this = _super.call(this) || this;
                    (_this.wireCounts = 3),
                        (_this.sec = 30),
                        (_this.timer = 0),
                        (_this.timerSpeed = 1),
                        (_this.lampFrame = 0),
                        (_this.bombWork = !1),
                        (_this.bomb = new Phaser.Group(_game)),
                        (_this.bomb.x = 343),
                        (_this.bomb.y = 285),
                        Client.GameManager.instance.layerBackground.addChild(_this.bomb),
                        _this.bomb.create(0, 0, "level15", "bomb instance 10000"),
                        _this.addWire(31, 42, 2),
                        _this.addWire(50, 15, 1),
                        _this.addWire(-16, 18, 3),
                        (_this.lamp = _this.bomb.create(-1, -57, "level15", "lamp instance 10000"));
                    return (_this.text = _game.make.text(36, 24, "" + _this.sec, { font: "25px Arial", fill: "#ff0044", align: "center" })), _this.text.anchor.set(0.5), _this.bomb.addChild(_this.text), _this;
                }
                return (
                    __extends(Lvl15Bomb, _super),
                    (Lvl15Bomb.prototype.activate = function () {
                        this.bombWork = !0;
                    }),
                    (Lvl15Bomb.prototype.addWire = function (_x, _y, _id) {
                        var wire = this.bomb.create(_x, _y, "level15", "wire" + _id + " instance 10000");
                        (wire.name = "wire" + _id), (wire.inputEnabled = !0), wire.events.onInputOver.add(this.over, this), wire.events.onInputOut.add(this.out, this), wire.events.onInputDown.add(this.down, this), (wire = null);
                    }),
                    (Lvl15Bomb.prototype.addElectro = function (_name) {
                        var electro = this.bomb.create(0, 0, "level15", "electro instance 10000");
                        switch ((electro.animations.add("anim", Phaser.Animation.generateFrameNames("electro instance 1", 0, 4, "", 4), 30, !0), (electro.alpha = 0.8), _name)) {
                            case "wire1":
                                (electro.x = 45), (electro.y = -13);
                                break;
                            case "wire2":
                                (electro.x = 30), (electro.y = 30);
                                break;
                            case "wire3":
                                (electro.x = -62), (electro.y = 2);
                        }
                        electro.play("anim");
                    }),
                    (Lvl15Bomb.prototype.over = function (_wire) {
                        _wire.frameName = _wire.name + " instance 10001";
                    }),
                    (Lvl15Bomb.prototype.out = function (_wire) {
                        _wire.inputEnabled && (_wire.frameName = _wire.name + " instance 10000");
                    }),
                    (Lvl15Bomb.prototype.down = function (_wire) {
                        (_wire.frameName = _wire.name + " instance 10002"),
                            (_wire.inputEnabled = !1),
                            this.wireCounts--,
                            this.wireCounts < 2 ? (this.sec = 1) : (this.timerSpeed = 2),
                            this.addElectro(_wire.name),
                            Client.SoundManager.playSFX("s_lvl15_wireCut");
                    }),
                    (Lvl15Bomb.prototype.addExplosion = function () {
                        (this.bomb.visible = !1), Client.GameManager.instance.level.setPliersVisible(!1), Client.GameManager.instance.level.boom(), Client.SoundManager.playSFX("s_lvl15_explosion");
                    }),
                    (Lvl15Bomb.prototype.update = function () {
                        this.bombWork &&
                            ((this.timer += this.timerSpeed),
                            60 <= this.timer &&
                                ((this.timer = 0),
                                (this.sec -= 1),
                                (this.text.text = "" + this.sec),
                                0 === this.sec && ((this.bombWork = !1), this.addExplosion()),
                                1 === this.timerSpeed ? Client.SoundManager.playSFX("s_lvl15_timer") : Client.SoundManager.playSFX("s_lvl15_timerFast"),
                                this.lampFrame++,
                                this.lampFrame % 2 == 0 ? (this.lamp.frameName = "lamp instance 10000") : (this.lamp.frameName = "lamp instance 10001")));
                    }),
                    (Lvl15Bomb.prototype.free = function () {
                        (this.bomb = null), (this.wire1 = null), (this.wire2 = null), (this.wire3 = null), (this.text = null), (this.lamp = null);
                    }),
                    Lvl15Bomb
                );
            })(Client.BasicElement);
            Client.Lvl15Bomb = Lvl15Bomb;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl15Coin = (function (_super) {
                function Lvl15Coin(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = 343),
                        (_this.group.y = 246),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level15", "coin instance 10000")),
                        _this.part2.anchor.set(0.5),
                        (_this.part2.inputEnabled = !0),
                        (_this.part2.input.useHandCursor = !0),
                        _this.part2.events.onInputOver.add(_this.over, _this),
                        _this.part2.events.onInputOut.add(_this.out, _this),
                        _this.part2.events.onInputDown.add(_this.down, _this),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level15", "coinEffect instance 10000")),
                        _this.part1.pivot.set(0, 0),
                        _this.group.addChild(_this.part1),
                        _this.playAnim("anim"),
                        _this
                    );
                }
                return (
                    __extends(Lvl15Coin, _super),
                    (Lvl15Coin.prototype.over = function (_coin) {
                        _coin.frameName = "coin instance 10001";
                    }),
                    (Lvl15Coin.prototype.out = function (_coin) {
                        _coin.inputEnabled && (_coin.frameName = "coin instance 10000");
                    }),
                    (Lvl15Coin.prototype.down = function (_coin) {
                        (_coin.visible = !1),
                            Client.SoundManager.playSFX("questClick"),
                            (Client.GameManager.instance.hero.currState = Client.HeroState.finish),
                            Client.GameManager.instance.level.addStars(_coin.world.x, _coin.world.y),
                            Client.GameManager.instance.level.showFinal();
                    }),
                    (Lvl15Coin.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? this.startTween(this.part2, 14, { y: 24, alpha: 1 })
                                : 19 === this.counterAnim
                                ? this.startTween(this.part2, 24, { y: 94 })
                                : 43 === this.counterAnim
                                ? this.startTween(this.part2, 12, { y: 67 })
                                : 55 === this.counterAnim
                                ? this.startTween(this.part2, 14, { y: 94 })
                                : 69 === this.counterAnim
                                ? ((this.part1.visible = !0), this.setPart(this.part1, { x: 49, y: 85, scX: 0.11, scY: 0.11 }), this.startTween(this.part1, 12, { x: 72, y: 81, skX: 114, skY: 114, scX: 0.66, scY: 0.66 }))
                                : 81 === this.counterAnim
                                ? this.startTween(this.part1, 12, { x: 50, y: 94, skX: -127, skY: -127, scX: 0.22, scY: 0.22, alpha: 0 })
                                : 95 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl15Coin.prototype.setParts = function (value) {
                        "anim" === value && ((this.part1.visible = !1), this.setPart(this.part2, { x: 41, y: 95, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 0 }));
                    }),
                    (Lvl15Coin.prototype.free = function () {
                        (this.group = null), (this.part2 = null), (this.part1 = null);
                    }),
                    Lvl15Coin
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl15Coin = Lvl15Coin;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl15Explosion1 = (function (_super) {
                function Lvl15Explosion1(game, _x, _y, _angle) {
                    void 0 === _angle && (_angle = 0);
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = _x),
                        (_this.group.y = _y),
                        (_this.group.angle = _angle),
                        Client.GameManager.instance.layerElements.addChild(_this.group),
                        (_this.part6 = new Client.SASprite(game, 0, 0, "level15", "lvl15explosionPart1 instance 10000")),
                        _this.part6.pivot.set(0, 0),
                        _this.group.addChild(_this.part6),
                        (_this.part5 = new Client.SASprite(game, 0, 0, "level15", "lvl15explosionPart2 instance 10000")),
                        _this.part5.pivot.set(0, 0),
                        _this.group.addChild(_this.part5),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "level15", "lvl15explosionPart3 instance 10000")),
                        _this.part4.pivot.set(0, 0),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level15", "lvl15explosionPart4 instance 10000")),
                        _this.part3.pivot.set(0, 0),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level15", "lvl15explosionPart5 instance 10000")),
                        _this.part2.pivot.set(0, 0),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level15", "lvl15explosionPart6 instance 10000")),
                        _this.part1.pivot.set(0, 0),
                        _this.group.addChild(_this.part1),
                        _this.playAnim("anim"),
                        _this
                    );
                }
                return (
                    __extends(Lvl15Explosion1, _super),
                    (Lvl15Explosion1.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? (this.startTween(this.part1, 10, { x: -61, y: -40 }),
                                  this.startTween(this.part2, 10, { x: 29, y: -69 }),
                                  this.startTween(this.part3, 10, { x: 22, y: -33 }),
                                  this.startTween(this.part4, 10, { x: 3, y: -100 }),
                                  this.startTween(this.part5, 10, { x: -30, y: -80 }),
                                  this.startTween(this.part6, 10, { x: -48, y: -74 }))
                                : 11 === this.counterAnim
                                ? (this.startTween(this.part1, 10, { x: -77, y: -25 }),
                                  this.startTween(this.part2, 10, { x: 48 }),
                                  this.startTween(this.part3, 10, { x: 41, y: -40 }),
                                  this.startTween(this.part4, 10, { x: 14, y: -107 }),
                                  this.startTween(this.part5, 10, { x: -47, y: -89 }),
                                  this.startTween(this.part6, 10, { x: -69 }))
                                : 21 === this.counterAnim
                                ? (this.startTween(this.part1, 24, { x: -125, y: 6 }),
                                  this.startTween(this.part2, 24, { x: 53, y: -27 }),
                                  this.startTween(this.part3, 24, { x: 9, y: -14 }),
                                  this.startTween(this.part4, 24, { x: -11, y: -75 }),
                                  this.startTween(this.part5, 24, { x: -101, y: -63 }),
                                  this.startTween(this.part6, 24, { x: -109, y: -42 }))
                                : 45 === this.counterAnim
                                ? (this.startTween(this.part1, 32, { x: -184, y: 69, alpha: 0 }),
                                  this.startTween(this.part2, 32, { x: -6, y: 36, alpha: 0 }),
                                  this.startTween(this.part3, 32, { x: -50, y: 49, alpha: 0 }),
                                  this.startTween(this.part4, 32, { x: -70, y: -12, alpha: 0 }),
                                  this.startTween(this.part5, 32, { x: -160, y: -1, alpha: 0 }),
                                  this.startTween(this.part6, 32, { x: -168, y: 21, alpha: 0 }))
                                : 77 === this.counterAnim && (this.animComplete(), (this.group.visible = !1)));
                    }),
                    (Lvl15Explosion1.prototype.setParts = function (value) {
                        "anim" === value &&
                            (this.setPart(this.part1, { x: -13, y: -8, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part2, { x: 1, y: -3, angle: 0, scX: 1, scY: 1, skX: 90, skY: 90, alpha: 1 }),
                            this.setPart(this.part3, { x: -7, y: -8, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part4, { x: -4, y: -13, angle: 0, scX: 1, scY: 1, skX: 45, skY: 45, alpha: 1 }),
                            this.setPart(this.part5, { x: -13, y: -13, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part6, { x: -12, y: -13, angle: 0, scX: 1, scY: 1, skX: 45, skY: 45, alpha: 1 }));
                    }),
                    (Lvl15Explosion1.prototype.free = function () {
                        (this.group = null), (this.part6 = null), (this.part5 = null), (this.part4 = null), (this.part3 = null), (this.part2 = null), (this.part1 = null);
                    }),
                    Lvl15Explosion1
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl15Explosion1 = Lvl15Explosion1;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl15Explosion2 = (function (_super) {
                function Lvl15Explosion2(game, _x, _y, _angle) {
                    void 0 === _angle && (_angle = 0);
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = _x),
                        (_this.group.y = _y),
                        (_this.group.angle = _angle),
                        Client.GameManager.instance.layerElements.addChild(_this.group),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "level15", "lvl15explosion2Part1 instance 10000")),
                        _this.part4.pivot.set(0, 0),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level15", "lvl15explosion2Part2 instance 10000")),
                        _this.part3.pivot.set(0, 0),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level15", "lvl15explosion2Part3 instance 10000")),
                        _this.part2.pivot.set(0, 0),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level15", "lvl15explosion2Part4 instance 10000")),
                        _this.part1.pivot.set(0, 0),
                        _this.group.addChild(_this.part1),
                        _this.playAnim("anim"),
                        _this
                    );
                }
                return (
                    __extends(Lvl15Explosion2, _super),
                    (Lvl15Explosion2.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? (this.startTween(this.part1, 12, { x: 27, y: 7 }),
                                  this.startTween(this.part2, 12, { x: -42, y: -14 }),
                                  this.startTween(this.part3, 12, { x: -4, y: 10 }),
                                  this.startTween(this.part4, 12, { x: -32, y: -42 }))
                                : 13 === this.counterAnim
                                ? (this.startTween(this.part1, 10, { x: 38, y: -1, skX: -45, skY: -45 }),
                                  this.startTween(this.part2, 10, { x: -56, y: -25, skX: 15, skY: 15 }),
                                  this.startTween(this.part3, 10, { x: 13, y: 2, skX: -15, skY: -15 }),
                                  this.startTween(this.part4, 10, { x: -48, skX: -75, skY: -75 }))
                                : 23 === this.counterAnim
                                ? (this.startTween(this.part1, 10, { x: 45, y: 10 }),
                                  this.startTween(this.part2, 10, { x: -66, y: -8 }),
                                  this.startTween(this.part3, 10, { x: 25, y: 16 }),
                                  this.startTween(this.part4, 10, { x: -63, y: -32 }))
                                : 33 === this.counterAnim
                                ? (this.startTween(this.part1, 36, { x: 51, y: 104, alpha: 0 }),
                                  this.startTween(this.part2, 36, { x: -74, y: 94, alpha: 0 }),
                                  this.startTween(this.part3, 36, { x: 30, y: 115, alpha: 0 }),
                                  this.startTween(this.part4, 36, { y: 71, alpha: 0 }))
                                : 69 === this.counterAnim && (this.animComplete(), (this.group.visible = !1)));
                    }),
                    (Lvl15Explosion2.prototype.setParts = function (value) {
                        "anim" === value &&
                            (this.setPart(this.part1, { x: -16, y: 41, angle: 0, scX: 1, scY: 1, skX: -90, skY: -90, alpha: 1 }),
                            this.setPart(this.part2, { x: -23, y: 30, angle: 0, scX: 1, scY: 1, skX: -75, skY: -75, alpha: 1 }),
                            this.setPart(this.part3, { x: -17, y: 33, angle: 0, scX: 1, scY: 1, skX: -75, skY: -75, alpha: 1 }),
                            this.setPart(this.part4, { x: -25, y: 31, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl15Explosion2.prototype.free = function () {
                        (this.group = null), (this.part4 = null), (this.part3 = null), (this.part2 = null), (this.part1 = null);
                    }),
                    Lvl15Explosion2
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl15Explosion2 = Lvl15Explosion2;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl15Explosion3 = (function (_super) {
                function Lvl15Explosion3(game, _x, _y, _angle, _scaleX, _name) {
                    void 0 === _angle && (_angle = 0), void 0 === _scaleX && (_scaleX = 1);
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = _x),
                        (_this.group.y = _y),
                        (_this.group.angle = _angle),
                        _this.group.scale.set(_scaleX, 1),
                        Client.GameManager.instance.layerElements.addChild(_this.group),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level15", _name + " instance 10000")),
                        _this.part1.pivot.set(0, 0),
                        _this.group.addChild(_this.part1),
                        _this.playAnim("anim"),
                        _this
                    );
                }
                return (
                    __extends(Lvl15Explosion3, _super),
                    (Lvl15Explosion3.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? this.startTween(this.part1, 12, { x: -88, y: -40, skX: -45, skY: -45, scY: 0.98 })
                                : 13 === this.counterAnim
                                ? this.startTween(this.part1, 10, { x: -105, y: -38, skX: -30, skY: -30, scY: 0.55 })
                                : 23 === this.counterAnim
                                ? this.startTween(this.part1, 10, { x: -107, y: -35, skX: 37, skY: 37, scY: 1.05 })
                                : 33 === this.counterAnim
                                ? this.startTween(this.part1, 14, { x: -132, y: 9, skX: -8, skY: -8 })
                                : 47 === this.counterAnim
                                ? this.startTween(this.part1, 24, { x: -130, y: 55, skX: 37, skY: 37, alpha: 0 })
                                : 71 === this.counterAnim && (this.animComplete(), (this.group.visible = !1)));
                    }),
                    (Lvl15Explosion3.prototype.setParts = function (value) {
                        "anim" === value && this.setPart(this.part1, { x: -45, y: 6, angle: 0, scX: 1, scY: 0.44, skX: 0, skY: 0, alpha: 1 });
                    }),
                    (Lvl15Explosion3.prototype.free = function () {
                        (this.group = null), (this.part1 = null);
                    }),
                    Lvl15Explosion3
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl15Explosion3 = Lvl15Explosion3;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl15Final = (function (_super) {
                function Lvl15Final(game) {
                    var _this = _super.call(this) || this;
                    return (
                        Client.LevelBuilder.instance.hideUI(),
                        (_this.group = game.make.group()),
                        (_this.group.x = 400),
                        (_this.group.y = 300),
                        Client.GameManager.instance.layerUpper.addChild(_this.group),
                        (_this.part5 = game.make.graphics(0, 0)),
                        _this.part5.beginFill(0, 1),
                        _this.part5.drawRect(-400, -300, 800, 600),
                        _this.part5.endFill(),
                        (_this.part5.alpha = 0),
                        _this.group.addChild(_this.part5),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "level15", "heroPhoto instance 10000")),
                        _this.part4.anchor.set(0.5),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = game.make.graphics(0, 0)),
                        _this.part3.beginFill(0, 1),
                        _this.part3.drawRect(-400, -300, 800, 600),
                        _this.part3.endFill(),
                        (_this.part3.alpha = 0),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level15", "goNext instance 10000")),
                        _this.part2.anchor.set(0.5),
                        (_this.part2.inputEnabled = !0),
                        (_this.part2.input.useHandCursor = !0),
                        _this.part2.events.onInputDown.add(_this.goNext, _this),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = _this.group.create(0, 0, "about_mc")),
                        (_this.part1.alpha = 0),
                        _this.playAnim("anim"),
                        _this
                    );
                }
                return (
                    __extends(Lvl15Final, _super),
                    (Lvl15Final.prototype.goNext = function () {
                        (Client.LevelManager.getInstance().currentMenuScreen = 1), Client.Main.instance.state.start(SceneList.Menu, !0, !1);
                    }),
                    (Lvl15Final.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (81 === this.counterAnim
                                ? ((this.part4.visible = !0), this.setPart(this.part4, { x: -16, y: -415 }), this.startTween(this.part4, 68, { y: 204 }), Client.SoundManager.playSFX("s_lvl15_news"))
                                : 83 === this.counterAnim
                                ? ((this.part5.visible = !0), this.setPart(this.part5, { x: 0, y: 0, alpha: 0.2 }), this.startTween(this.part5, 76, { alpha: 0.7 }))
                                : 149 === this.counterAnim
                                ? this.startTween(this.part4, 10, { y: 0 })
                                : 239 === this.counterAnim
                                ? ((this.part3.visible = !0), this.setPart(this.part3, { x: 0, y: 0, alpha: 0.2 }), this.startTween(this.part3, 60, { alpha: 0.7 }))
                                : 299 === this.counterAnim
                                ? (this.startTween(this.part1, 18, { alpha: 0.8 }), (this.part2.visible = !0), this.startTween(this.part2, 10, { y: 210, scX: 1.05, scY: 1.05, alpha: 1 }))
                                : 309 === this.counterAnim
                                ? this.startTween(this.part2, 8, { y: 220, scX: 1, scY: 1 })
                                : 317 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl15Final.prototype.setParts = function (value) {
                        "anim" === value &&
                            (this.setPart(this.part1, { x: -400, y: -300, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 0 }),
                            this.setPart(this.part2, { x: 180, y: 580, angle: 0, scX: 0.78, scY: 0.78, skX: 0, skY: 0, alpha: 0 }),
                            (this.part3.visible = !1),
                            (this.part4.visible = !1),
                            (this.part5.visible = !1));
                    }),
                    (Lvl15Final.prototype.free = function () {
                        (this.group = null), (this.part5 = null), (this.part4 = null), (this.part3 = null), (this.part2 = null), (this.part1 = null);
                    }),
                    Lvl15Final
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl15Final = Lvl15Final;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl15SafeDoor = (function (_super) {
                function Lvl15SafeDoor(game) {
                    var _this = _super.call(this) || this;
                    (_this.handlerX = 0),
                        (_this.handlerSoundPause = 0),
                        (_this.platformSound = !1),
                        (_this.startHandlerX = 0),
                        (_this.updateH = !0),
                        (_this.group = game.make.group()),
                        (_this.group.x = 241),
                        (_this.group.y = 153),
                        Client.GameManager.instance.layerBackground.addChild(_this.group);
                    var mask = game.make.graphics(241, 153);
                    mask.beginFill(16711680, 0.5),
                        mask.drawCircle(158, 158, 316),
                        mask.endFill(),
                        Client.GameManager.instance.layerBackground.addChild(mask),
                        (_this.group.mask = mask),
                        (mask = null),
                        (_this.botPart = game.make.graphics(-16, 0)),
                        _this.botPart.beginFill(3817805),
                        _this.botPart.drawCircle(158, 158, 322),
                        _this.botPart.endFill(),
                        _this.group.addChild(_this.botPart),
                        (_this.part9 = new Client.SASprite(game, 0, 0, "level15", "keyPart7 instance 10000")),
                        _this.part9.pivot.set(0, 0),
                        _this.group.addChild(_this.part9),
                        (_this.part8 = new Client.SASprite(game, 0, 0, "level15", "keyPart6 instance 10000")),
                        _this.part8.pivot.set(0, 0),
                        _this.group.addChild(_this.part8),
                        (_this.part7 = new Client.SASprite(game, 0, 0, "level15", "keyPart6 instance 10000")),
                        _this.part7.pivot.set(0, 0),
                        _this.group.addChild(_this.part7),
                        (_this.part6 = new Client.SASprite(game, 0, 0, "level15", "keyPart5 instance 10000")),
                        _this.part6.pivot.set(0, 0),
                        _this.group.addChild(_this.part6),
                        (_this.part5 = new Client.SASprite(game, 0, 0, "level15", "keyPart4 instance 10000")),
                        _this.part5.anchor.set(0.5),
                        _this.group.addChild(_this.part5),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "level15", "keyPart4 instance 10000")),
                        _this.part4.anchor.set(0.5),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level15", "keyPart3 instance 10000")),
                        _this.part3.pivot.set(0, 0),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level15", "keyPart2 instance 10000")),
                        _this.part2.pivot.set(0, 0),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level15", "keyPart1 instance 10000")),
                        _this.part1.pivot.set(0, 0),
                        _this.group.addChild(_this.part1),
                        _this.group.create(94, 67, "level15", "handlerArea instance 10000"),
                        _this.group.create(71, 74, "level15", "panel instance 10000");
                    var vent = new Client.SimpleButton(game, 153, 197, "level15", "vent", !0);
                    return (
                        vent.activate(),
                        vent.events.onInputDown.add(_this.ventAnim, _this),
                        _this.group.addChild(vent),
                        (vent = null),
                        (_this.ventDoor = _this.group.create(104, 134, "level15", "ventDoor instance 10000")),
                        (_this.ventDoor.inputEnabled = !0),
                        (_this.handler = game.make.button(154, 80, "level15", _this.stopDrag, _this, "handler instance 10001", "handler instance 10000", "handler instance 10002", "handler instance 10000")),
                        _this.handler.anchor.set(0.5, 1),
                        _this.group.addChild(_this.handler),
                        (_this.handler.inputEnabled = !0),
                        (_this.handler.input.useHandCursor = !0),
                        _this.handler.input.enableDrag(),
                        (_this.handler.input.boundsRect = new Phaser.Rectangle(_this.handler.x - 45, _this.handler.y - _this.handler.height, 90, _this.handler.height)),
                        _this.handler.input.setDragLock(!0, !1),
                        (_this.startHandlerX = _this.handler.x),
                        (_this.handler.x = _this.startHandlerX - 32),
                        _this.setParts("step1"),
                        _this
                    );
                }
                return (
                    __extends(Lvl15SafeDoor, _super),
                    (Lvl15SafeDoor.prototype.updateHandler = function () {
                        if (this.updateH) {
                            var ratio = (this.startHandlerX - this.handler.x) / 100;
                            this.handler.x < this.startHandlerX ? (this.handler.y = 80) : (this.handler.y = 81),
                                (this.handler.angle = -120 * ratio),
                                this.handler.x > this.startHandlerX + 30 &&
                                    ((this.updateH = !1),
                                    (this.handler.inputEnabled = !1),
                                    this.handler.setFrames("handler instance 10002", "handler instance 10002", "handler instance 10002", "handler instance 10002"),
                                    this.openVentDoor(),
                                    this.playAnim("step1"),
                                    Client.SoundManager.playSFX("s_lvl15_handlerSlide"));
                        }
                    }),
                    (Lvl15SafeDoor.prototype.stopDrag = function () {}),
                    (Lvl15SafeDoor.prototype.openVentDoor = function () {
                        this.addSmoke(119, 155, 0),
                            this.addSmoke(260, 170, 135),
                            this.addSmoke(237, 200, -135),
                            this.addSmoke(171, 255, -150),
                            Client.Main.instance.add.tween(this.ventDoor).to({ x: this.ventDoor.x + 50, y: this.ventDoor.y - 50 }, 500, "Linear", !0, 200);
                    }),
                    (Lvl15SafeDoor.prototype.addSmoke = function (_x, _y, _angle) {
                        var smoke = this.group.create(_x, _y, "level15", "smoke instance 10000");
                        (smoke.angle = _angle), (smoke.animations.add("anim", Phaser.Animation.generateFrameNames("smoke instance 1", 0, 14, "", 4), 30, !1).killOnComplete = !0), smoke.play("anim");
                    }),
                    (Lvl15SafeDoor.prototype.ventAnim = function (_sprite) {
                        Client.SoundManager.playSFX("s_lvl15_ventil"),
                            (_sprite.inputEnabled = !1),
                            (_sprite.frameName = "vent instance 10002"),
                            Client.Main.instance.add
                                .tween(_sprite)
                                .to({ angle: 360 }, 500, "Linear", !0)
                                .onComplete.add(function () {
                                    this.playAnim("step2");
                                }, this);
                    }),
                    (Lvl15SafeDoor.prototype.openDoor = function () {
                        Client.SoundManager.playSFX("s_lvl15_openSmall"),
                            Client.Main.instance.add.tween(this.group).to({ x: this.group.x + 315 }, 3500, "Linear", !0),
                            Client.Main.instance.add
                                .tween(this.group)
                                .to({ alpha: 1 }, 2e3, "Linear", !0)
                                .onComplete.add(function () {
                                    Client.GameManager.instance.level.activateBomb(), Client.GameManager.instance.level.setPliersVisible(!0);
                                }, this);
                    }),
                    (Lvl15SafeDoor.prototype.update = function () {
                        _super.prototype.update.call(this), this.updateHandler();
                    }),
                    (Lvl15SafeDoor.prototype.updateAnimation = function () {
                        "step1" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (Client.SoundManager.playSFX("s_lvl15_openDoor"),
                                  this.startTween(this.part3, 6, { y: 97 }, !0),
                                  this.startTween(this.part4, 18, { skX: -90, skY: -90 }, !0),
                                  this.startTween(this.part5, 18, { skX: 90, skY: 90 }, !0),
                                  this.startTween(this.part7, 32, { x: 304 }, !0),
                                  this.startTween(this.part8, 32, { x: -3 }, !0))
                                : 7 === this.counterAnim
                                ? this.startTween(this.part3, 20, { y: 72 }, !0)
                                : 19 === this.counterAnim
                                ? (this.startTween(this.part4, 14, { skX: -144, skY: -144 }, !0), this.startTween(this.part5, 14, { skX: 144, skY: 144 }, !0))
                                : 33 === this.counterAnim && this.animComplete()
                            : "step2" === this.currAnim &&
                              (1 === this.counterAnim
                                  ? (this.startTween(this.part4, 6, { skX: 180, skY: 180 }, !0),
                                    this.startTween(this.part5, 6, { skX: 180, skY: 180 }, !0),
                                    this.startTween(this.part7, 12, { x: 284 }, !0),
                                    this.startTween(this.part8, 12, { x: 30 }, !0))
                                  : 7 === this.counterAnim
                                  ? (this.startTween(this.part4, 20, { skX: 90, skY: 90 }, !0), this.startTween(this.part5, 20, { skX: -90, skY: -90 }, !0), this.startTween(this.part6, 6, { y: 159 }, !0))
                                  : 13 === this.counterAnim
                                  ? (this.startTween(this.part6, 4, { y: 149 }, !0), this.startTween(this.part7, 4, { x: 297 }, !0), this.startTween(this.part8, 4, { x: 20 }, !0))
                                  : 17 === this.counterAnim
                                  ? (this.startTween(this.part6, 10, { y: 159 }, !0), this.startTween(this.part7, 30, { x: 284 }, !0), this.startTween(this.part8, 30, { x: 30 }, !0))
                                  : 27 === this.counterAnim
                                  ? (this.startTween(this.part4, 20, { skX: 0, skY: 0 }, !0), this.startTween(this.part5, 20, { skX: 0, skY: 0 }, !0))
                                  : 47 === this.counterAnim && (this.animComplete(), this.openDoor()));
                    }),
                    (Lvl15SafeDoor.prototype.setParts = function (value) {
                        "step1" === value
                            ? (this.setPart(this.part1, { x: 96, y: 110, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                              this.setPart(this.part2, { x: 0, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                              this.setPart(this.part3, { x: 108, y: 72, angle: 0, scX: 1, scY: 1, skX: -45, skY: -45, alpha: 1 }, !0),
                              this.setPart(this.part4, { x: 173, y: 121, angle: 0, scX: 1.39, scY: 1.39, skX: 0, skY: 0, alpha: 1 }, !0),
                              this.setPart(this.part5, { x: 106, y: 132, angle: 0, scX: 1.12, scY: 1.12, skX: 0, skY: 0, alpha: 1 }, !0),
                              this.setPart(this.part6, { x: 143, y: 207, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                              this.setPart(this.part7, { x: 307, y: 179, angle: 0, scX: 1, scY: 1, skX: 0, skY: 180, alpha: 1 }, !0),
                              this.setPart(this.part8, { x: -9, y: 179, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                              this.setPart(this.part9, { x: 13, y: 67, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0))
                            : "step2" === value &&
                              (this.setPart(this.part1, { x: 96, y: 110, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                              this.setPart(this.part2, { x: 0, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                              this.setPart(this.part3, { x: 108, y: 72, angle: 0, scX: 1, scY: 1, skX: -45, skY: -45, alpha: 1 }, !0),
                              this.setPart(this.part4, { x: 173, y: 121, angle: 0, scX: 1.39, scY: 1.39, skX: -144, skY: -144, alpha: 1 }, !0),
                              this.setPart(this.part5, { x: 106, y: 132, angle: 0, scX: 1.12, scY: 1.12, skX: 144, skY: 144, alpha: 1 }, !0),
                              this.setPart(this.part6, { x: 143, y: 207, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                              this.setPart(this.part7, { x: 304, y: 179, angle: 0, scX: 1, scY: 1, skX: 0, skY: 180, alpha: 1 }, !0),
                              this.setPart(this.part8, { x: -3, y: 179, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                              this.setPart(this.part9, { x: 13, y: 67, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0));
                    }),
                    (Lvl15SafeDoor.prototype.free = function () {
                        (this.group = null),
                            (this.part9 = null),
                            (this.part8 = null),
                            (this.part7 = null),
                            (this.part6 = null),
                            (this.part5 = null),
                            (this.part4 = null),
                            (this.part3 = null),
                            (this.part2 = null),
                            (this.part1 = null),
                            (this.botPart = null),
                            (this.handler = null),
                            (this.ventDoor = null);
                    }),
                    Lvl15SafeDoor
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl15SafeDoor = Lvl15SafeDoor;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl2BankirBubble = (function (_super) {
                function Lvl2BankirBubble(game) {
                    var _this = _super.call(this) || this;
                    (_this.group = game.make.group()),
                        (_this.group.x = 133),
                        (_this.group.y = 247),
                        Client.GameManager.instance.layerUpper.addChild(_this.group),
                        (_this.group.visible = !1),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "level2", "bubbleBig instance 10000")),
                        _this.part4.pivot.set(51, 44),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level2", "bubbleSmall instance 10000")),
                        _this.part3.pivot.set(7, 6),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level2", "graphic1 instance 10000")),
                        _this.part2.pivot.set(1, 1),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level2", "graphic2 instance 10000")),
                        _this.part1.pivot.set(1, 1),
                        _this.group.addChild(_this.part1);
                    var mask = game.make.graphics();
                    return mask.beginFill(16711680, 0.5), mask.drawEllipse(0, 0, 51, 45), mask.endFill(), _this.group.addChild(mask), (_this.part2.mask = mask), (_this.part1.mask = mask), (mask = null), _this.setParts("anim"), _this;
                }
                return (
                    __extends(Lvl2BankirBubble, _super),
                    (Lvl2BankirBubble.prototype.show = function () {
                        (this.group.visible = !0), this.playAnim("anim");
                    }),
                    (Lvl2BankirBubble.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? this.startTween(this.part3, 14, { x: -31, y: 45, scX: 1, scY: 1, alpha: 1 })
                                : 9 === this.counterAnim
                                ? ((this.part4.visible = !0), this.setPart(this.part4, { x: -25, y: 30, scX: 0.34, scY: 0.34, alpha: 0 }), this.startTween(this.part4, 12, { x: 5, y: -5, scX: 1.02, scY: 1.02, alpha: 1 }))
                                : 15 === this.counterAnim
                                ? this.startTween(this.part3, 6, { x: -33, y: 47 })
                                : 21 === this.counterAnim
                                ? ((this.part2.visible = !0), this.setPart(this.part2, { x: -22, y: 42, alpha: 0 }), this.startTween(this.part2, 12, { y: -38, alpha: 1 }), this.startTween(this.part4, 6, { x: 0, y: 0, scX: 1, scY: 1 }))
                                : 107 === this.counterAnim
                                ? this.startTween(this.part2, 4, { alpha: 0 })
                                : 113 === this.counterAnim
                                ? ((this.part1.visible = !0), this.setPart(this.part1, { x: -38, y: -16, alpha: 0 }), this.startTween(this.part1, 4, { y: -35, alpha: 1 }))
                                : 159 === this.counterAnim
                                ? (this.part2.visible = !1)
                                : 191 === this.counterAnim
                                ? this.startTween(this.part1, 6, { alpha: 0 })
                                : 197 === this.counterAnim && (this.animComplete(), (this.group.visible = !1), Client.GameManager.instance.level.customAction(6)));
                    }),
                    (Lvl2BankirBubble.prototype.setParts = function (value) {
                        "anim" === value && ((this.part1.visible = !1), (this.part2.visible = !1), this.setPart(this.part3, { x: -42, y: 56, angle: 0, scX: 0.42, scY: 0.42, skX: 0, skY: 0, alpha: 0 }), (this.part4.visible = !1));
                    }),
                    (Lvl2BankirBubble.prototype.free = function () {
                        (this.group = null), (this.part4 = null), (this.part3 = null), (this.part2 = null), (this.part1 = null);
                    }),
                    Lvl2BankirBubble
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl2BankirBubble = Lvl2BankirBubble;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl2Bell = (function (_super) {
                function Lvl2Bell(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = 148),
                        (_this.group.y = 276),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level2", "bell instance 10000")),
                        _this.part1.pivot.set(10, 0),
                        _this.group.addChild(_this.part1),
                        _this.setParts("anim"),
                        _this
                    );
                }
                return (
                    __extends(Lvl2Bell, _super),
                    (Lvl2Bell.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? this.startTween(this.part1, 6, { y: 22, skX: 20, skY: 20 })
                                : 7 === this.counterAnim
                                ? this.startTween(this.part1, 12, { y: 23, skX: -15, skY: -15 })
                                : 19 === this.counterAnim
                                ? this.startTween(this.part1, 8, { skX: 0, skY: 0 })
                                : 27 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl2Bell.prototype.setParts = function (value) {
                        "anim" === value && this.setPart(this.part1, { x: 0, y: 23, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 });
                    }),
                    (Lvl2Bell.prototype.free = function () {
                        (this.group = null), (this.part1 = null);
                    }),
                    Lvl2Bell
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl2Bell = Lvl2Bell;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl2CarManager = (function (_super) {
                function Lvl2CarManager(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.active = !1),
                        (_this.counter = 0),
                        (_this.speedWheels = 0),
                        (_this.group = game.make.group()),
                        (_this.group.x = -100),
                        (_this.group.y = 376),
                        Client.GameManager.instance.layerElements.addChild(_this.group),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level2", "carManagerBody instance 10000")),
                        _this.part3.pivot.set(66, 39),
                        _this.group.addChild(_this.part3),
                        (_this.eyes = game.make.sprite(60, -10, "level2", "carManagerEyes instance 10000")),
                        _this.eyes.animations.add("idle", Phaser.Animation.generateFrameNames("carManagerEyes instance 1", 0, 108, "", 4), 30, !0),
                        _this.eyes.animations.add("lying", Phaser.Animation.generateFrameNames("carManagerEyes instance 1", 109, 158, "", 4), 30, !0),
                        _this.eyes.animations.play("idle"),
                        _this.part3.addChild(_this.eyes),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level2", "carManagerWheel instance 10000")),
                        _this.part2.anchor.setTo(0.5),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level2", "carManagerWheel instance 10000")),
                        _this.part1.anchor.setTo(0.5),
                        _this.group.addChild(_this.part1),
                        _this.setParts("idle"),
                        _this
                    );
                }
                return (
                    __extends(Lvl2CarManager, _super),
                    (Lvl2CarManager.prototype.start = function () {
                        this.active = !0;
                    }),
                    (Lvl2CarManager.prototype.lying = function () {
                        this.eyes.animations.play("lying"), Client.SoundManager.playSFX("s_lvl2_bankirDialog");
                    }),
                    (Lvl2CarManager.prototype.gladness = function () {
                        this.playAnim("gladness");
                    }),
                    (Lvl2CarManager.prototype.update = function () {
                        _super.prototype.update.call(this),
                            !0 === this.active &&
                                ((this.counter += 1),
                                20 === this.counter
                                    ? (this.startTween(this.group, 25, { x: 49 }), (this.speedWheels = 10))
                                    : 45 === this.counter
                                    ? ((this.speedWheels = -8), this.startTween(this.group, 20, { x: 35 }))
                                    : 65 === this.counter
                                    ? ((this.speedWheels = 5), this.startTween(this.group, 10, { x: 49 }))
                                    : 75 === this.counter && ((this.active = !1), this.playIdle(!0)),
                                (this.part1.angle += this.speedWheels),
                                (this.part2.angle += this.speedWheels));
                    }),
                    (Lvl2CarManager.prototype.playIdle = function (value) {
                        void 0 === value && (value = !1), this.playAnim("idle", -1), this.eyes.animations.play("idle"), !0 === value && Client.GameManager.instance.level.customAction(4);
                    }),
                    (Lvl2CarManager.prototype.updateAnimation = function () {
                        "idle" === this.currAnim
                            ? 1 === this.counterAnim
                                ? this.startTween(this.part3, 20, { y: -37 })
                                : 21 === this.counterAnim
                                ? this.startTween(this.part3, 14, { y: -35 })
                                : 35 === this.counterAnim
                                ? this.startTween(this.part3, 20, { x: 3, y: -40, skX: -3, skY: -3 })
                                : 55 === this.counterAnim
                                ? this.startTween(this.part3, 16, { x: 5, y: -37, skX: 0, skY: 0 })
                                : 71 === this.counterAnim
                                ? this.startTween(this.part3, 14, { y: -35 })
                                : 85 === this.counterAnim && this.animComplete()
                            : "gladness" === this.currAnim &&
                              (1 === this.counterAnim
                                  ? this.startTween(this.part3, 14, { y: -33, scY: 0.91 })
                                  : 15 === this.counterAnim
                                  ? this.startTween(this.part3, 10, { x: 6, y: -32, skX: 3, skY: 3, scY: 0.95 })
                                  : 25 === this.counterAnim
                                  ? this.startTween(this.part3, 8, { x: -6, y: -48, skX: -15, skY: -15, scY: 1.04 })
                                  : 33 === this.counterAnim
                                  ? this.startTween(this.part3, 20, { x: 6, y: -33, skX: 3, skY: 3, scY: 1 })
                                  : 53 === this.counterAnim
                                  ? this.startTween(this.part3, 14, { x: 5, y: -35, skX: 0, skY: 0 })
                                  : 69 === this.counterAnim
                                  ? this.startTween(this.part3, 10, { x: 1, y: -48, skX: -4, skY: -4 })
                                  : 83 === this.counterAnim
                                  ? this.startTween(this.part3, 8, { x: 5, y: -35, skX: 0, skY: 0 })
                                  : 125 === this.counterAnim && (this.animComplete(), this.playIdle()));
                    }),
                    (Lvl2CarManager.prototype.setParts = function (value) {
                        "idle" === value
                            ? (this.setPart(this.part1, { x: -31, y: -2, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part2, { x: 37, y: -3, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part3, { x: 5, y: -35, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }))
                            : "gladness" === value &&
                              (this.setPart(this.part1, { x: -31, y: -2, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part2, { x: 37, y: -3, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part3, { x: 5, y: -37, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl2CarManager.prototype.free = function () {
                        (this.group = null), (this.part3 = null), (this.part2 = null), (this.part1 = null), (this.eyes = null);
                    }),
                    Lvl2CarManager
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl2CarManager = Lvl2CarManager;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl2CarSecurity = (function (_super) {
                function Lvl2CarSecurity(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = 373),
                        (_this.group.y = 524),
                        (_this.group.scale.x = -1),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level2", "carSecurityBody instance 10000")),
                        _this.part3.pivot.set(81, 63),
                        _this.group.addChild(_this.part3),
                        (_this.eyes = game.make.sprite(23, 29, "level2")),
                        _this.eyes.animations.add("anim", Phaser.Animation.generateFrameNames("carSecurityEyes instance 1", 0, 105, "", 4), 30, !0),
                        _this.eyes.animations.play("anim"),
                        _this.part3.addChild(_this.eyes),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level2", "carSecurityWheel instance 10000")),
                        _this.part2.pivot.set(21, 21),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level2", "carSecurityWheel instance 10000")),
                        _this.part1.pivot.set(21, 21),
                        _this.group.addChild(_this.part1),
                        _this.playAnim("anim", -1),
                        _this
                    );
                }
                return (
                    __extends(Lvl2CarSecurity, _super),
                    (Lvl2CarSecurity.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? this.startTween(this.part3, 11, { y: 4 })
                                : 12 === this.counterAnim
                                ? this.startTween(this.part3, 11, { y: 2 })
                                : 23 === this.counterAnim
                                ? this.startTween(this.part3, 9, { y: 4 })
                                : 32 === this.counterAnim
                                ? this.startTween(this.part3, 8, { y: 2 })
                                : 40 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl2CarSecurity.prototype.setParts = function (value) {
                        "anim" === value &&
                            (this.setPart(this.part1, { x: -36, y: 37, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part2, { x: 38, y: 37, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part3, { x: 3, y: 2, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl2CarSecurity.prototype.free = function () {
                        (this.group = null), (this.part3 = null), (this.part2 = null), (this.part1 = null), (this.eyes = null);
                    }),
                    Lvl2CarSecurity
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl2CarSecurity = Lvl2CarSecurity;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl2CarSkeleton = (function (_super) {
                function Lvl2CarSkeleton(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.leftX = 355),
                        (_this.rightX = 457),
                        (_this.state = "idle"),
                        (_this.moveLeft = !0),
                        (_this.speedMove = 25),
                        (_this.leftAngryX = 250),
                        (_this.speedMoveAngry = 150),
                        (_this.counter = 0),
                        (_this.group = game.make.group()),
                        Client.GameManager.instance.layerUpper.addChild(_this.group),
                        (_this.graphicBody = new Client.SASprite(game, 0, 0, "level2", "carSkeletonBody instance 10000")),
                        _this.graphicBody.pivot.set(82, 40),
                        _this.group.addChild(_this.graphicBody),
                        (_this.wheel1 = game.make.sprite(31, 100, "level2", "carSkeletonWheel instance 10000")),
                        _this.wheel1.anchor.setTo(0.5),
                        _this.group.addChild(_this.wheel1),
                        (_this.wheel2 = game.make.sprite(112, 100, "level2", "carSkeletonWheel instance 10000")),
                        _this.wheel2.anchor.setTo(0.5),
                        _this.group.addChild(_this.wheel2),
                        (_this.skeleton = new Client.Lvl2CarSkeleton2(game)),
                        _this.group.addChild(_this.skeleton.group),
                        (_this.angry = new Client.Lvl2CarSkeletonAngry(game)),
                        _this.group.addChild(_this.angry.group),
                        (_this.body = new Phaser.Physics.Box2D.Body(game, null, 457, 117, 2)),
                        _this.body.setRectangle(152, 80),
                        (_this.body.fixedRotation = !0),
                        (_this.bodyWheel1 = new Phaser.Physics.Box2D.Body(game, null, 417, 155, 2)),
                        _this.bodyWheel1.setCircle(17),
                        (_this.bodyWheel2 = new Phaser.Physics.Box2D.Body(game, null, 497, 155, 2)),
                        _this.bodyWheel2.setCircle(17),
                        game.physics.box2d.revoluteJoint(_this.body, _this.bodyWheel1, -37, 38),
                        game.physics.box2d.revoluteJoint(_this.body, _this.bodyWheel2, 40, 38),
                        _this.playAnim("anim", -1),
                        _this
                    );
                }
                return (
                    __extends(Lvl2CarSkeleton, _super),
                    (Lvl2CarSkeleton.prototype.setCollisionNotHero = function () {
                        this.body.setCollisionMask(~Client.FilterGroups.IGNORE_CAR), this.bodyWheel1.setCollisionMask(~Client.FilterGroups.IGNORE_CAR), this.bodyWheel2.setCollisionMask(~Client.FilterGroups.IGNORE_CAR);
                    }),
                    (Lvl2CarSkeleton.prototype.surprise = function () {
                        this.skeleton.surprise();
                    }),
                    (Lvl2CarSkeleton.prototype.playAngry = function () {
                        this.angry.playAnim("anim"), this.skeleton.playAngry(), (this.state = "startangry"), (this.moveLeft = !0), (this.body.velocity.x = 0), (this.counter = 0);
                    }),
                    (Lvl2CarSkeleton.prototype.update = function () {
                        _super.prototype.update.call(this),
                            "idle" === this.state
                                ? !0 === this.moveLeft
                                    ? ((this.body.velocity.x = -this.speedMove), this.body.x <= this.leftX && (this.moveLeft = !1))
                                    : ((this.body.velocity.x = this.speedMove), this.body.x >= this.rightX && (this.moveLeft = !0))
                                : "startangry" === this.state
                                ? ((this.counter += 1), 20 === this.counter && (this.state = "angry"))
                                : "angry" === this.state &&
                                  (!0 === this.moveLeft
                                      ? ((this.body.velocity.x = -this.speedMoveAngry), this.body.x <= this.leftAngryX && ((this.moveLeft = !1), Client.GameManager.instance.hero.setEnableMotor(!1), this.skeleton.stopAngry()))
                                      : ((this.body.velocity.x = this.speedMoveAngry), this.body.x >= this.leftX && ((this.moveLeft = !1), (this.state = "idle"), Client.GameManager.instance.level.customAction(3)))),
                            this.skeleton.update(),
                            this.angry.update(),
                            (this.group.x = this.body.x - 70),
                            (this.group.y = this.body.y - 62),
                            (this.wheel1.rotation = this.bodyWheel1.rotation),
                            (this.wheel2.rotation = this.bodyWheel2.rotation);
                    }),
                    (Lvl2CarSkeleton.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? (this.startTween(this.angry.group, 36, { y: 3 }), this.startTween(this.skeleton.group, 36, { y: 5 }), this.startTween(this.graphicBody, 36, { y: 70 }))
                                : 37 === this.counterAnim
                                ? (this.startTween(this.angry.group, 52, { y: 2 }), this.startTween(this.skeleton.group, 52, { y: 3 }), this.startTween(this.graphicBody, 52, { y: 68 }))
                                : 89 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl2CarSkeleton.prototype.setParts = function (value) {
                        "anim" === value &&
                            (this.setPart(this.angry.group, { x: 117, y: 2, angle: 0, scX: 0.57, scY: 0.57, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.skeleton.group, { x: -5, y: 3, angle: 0, scX: 1, scY: 1, skX: -3, skY: -3, alpha: 1 }),
                            this.setPart(this.graphicBody, { x: 62, y: 68, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl2CarSkeleton.prototype.free = function () {
                        (this.group = null),
                            (this.graphicBody = null),
                            this.skeleton.free(),
                            (this.skeleton = null),
                            this.angry.free(),
                            (this.angry = null),
                            (this.wheel1 = null),
                            (this.wheel2 = null),
                            (this.body = null),
                            (this.bodyWheel1 = null),
                            (this.bodyWheel2 = null);
                    }),
                    Lvl2CarSkeleton
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl2CarSkeleton = Lvl2CarSkeleton;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl2CarSkeleton2 = (function (_super) {
                function Lvl2CarSkeleton2(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = new Client.SAGroup(game, 0, 0)),
                        (_this.eyes = new Client.SASprite(game, 0, 0, "level2", "carSkeletonEyes instance 10000")),
                        _this.eyes.pivot.set(21, 37),
                        _this.eyes.animations.add("idle", Phaser.Animation.generateFrameNames("carSkeletonEyes instance 1", 0, 35, "", 4), 40, !0),
                        _this.eyes.animations.add("surprise", Phaser.Animation.generateFrameNames("carSkeletonEyes instance 1", 36, 61, "", 4), 40, !1).onComplete.addOnce(function () {
                            this.eyes.animations.play("idle");
                        }, _this),
                        _this.eyes.animations.add("down", Phaser.Animation.generateFrameNames("carSkeletonEyes instance 1", 62, 86, "", 4), 40, !1),
                        _this.eyes.animations.add("attack", Phaser.Animation.generateFrameNames("carSkeletonEyes instance 1", 87, 95, "", 4), 40, !1).onComplete.add(function () {
                            this.eyes.animations.play("attack_idle");
                        }, _this),
                        _this.eyes.animations.add("attack_idle", Phaser.Animation.generateFrameNames("carSkeletonEyes instance 1", 96, 118, "", 4), 40, !0),
                        _this.eyes.animations.add("stop_attack", Phaser.Animation.generateFrameNames("carSkeletonEyes instance 1", 119, 127, "", 4), 40, !1).onComplete.add(function () {
                            this.eyes.animations.play("idle");
                        }, _this),
                        _this.eyes.animations.play("idle"),
                        _this.group.addChild(_this.eyes),
                        (_this.halat = new Client.SASprite(game, 0, 0, "level2", "carSkeletonHalat instance 10000")),
                        _this.halat.pivot.set(49, 45),
                        _this.group.addChild(_this.halat),
                        (_this.vedro = new Client.SASprite(game, 0, 0, "level2", "carSkeletonVedro instance 10000")),
                        _this.vedro.pivot.set(2, 1),
                        _this.vedro.animations.add("anim", Phaser.Animation.generateFrameNames("carSkeletonVedro instance 1", 0, 45, "", 4), 30, !0),
                        _this.vedro.animations.play("anim"),
                        _this.group.addChild(_this.vedro),
                        (_this.metla = new Client.SASprite(game, 0, 0, "level2", "carSkeletonSchetka instance 10000")),
                        _this.metla.pivot.set(0, 14),
                        _this.group.addChild(_this.metla),
                        (_this.dust = new Client.SASprite(game, 0, 0, "level2", "skeletonDust instance 10000")),
                        _this.dust.pivot.set(15, 15),
                        _this.dust.animations.add("anim", Phaser.Animation.generateFrameNames("skeletonDust instance 1", 0, 13, "", 4), 40, !1),
                        _this.group.addChild(_this.dust),
                        _this.playAnim("idle", -1),
                        _this
                    );
                }
                return (
                    __extends(Lvl2CarSkeleton2, _super),
                    (Lvl2CarSkeleton2.prototype.surprise = function () {
                        this.eyes.animations.play("surprise");
                    }),
                    (Lvl2CarSkeleton2.prototype.playAngry = function () {
                        this.eyes.animations.play("attack"), this.playAnim("attack");
                    }),
                    (Lvl2CarSkeleton2.prototype.stopAngry = function () {
                        this.eyes.animations.play("stop_attack"), this.playAnim("stop_attack");
                    }),
                    (Lvl2CarSkeleton2.prototype.updateAnimation = function () {
                        "attack" === this.currAnim
                            ? 29 === this.counterAnim
                                ? this.startTween(this.metla, 18, { x: 19, y: 104, skX: -117, skY: -117 })
                                : 47 === this.counterAnim
                                ? this.startTween(this.metla, 8, { x: 5 })
                                : 55 === this.counterAnim
                                ? this.startTween(this.metla, 10, { x: 19 })
                                : 65 === this.counterAnim
                                ? this.startTween(this.metla, 8, { x: 5 })
                                : 73 === this.counterAnim
                                ? this.startTween(this.metla, 10, { x: 19 })
                                : 83 === this.counterAnim
                                ? this.startTween(this.metla, 8, { x: 5 })
                                : 91 === this.counterAnim
                                ? this.startTween(this.metla, 10, { x: 19 })
                                : 101 === this.counterAnim
                                ? this.startTween(this.metla, 8, { x: 5 })
                                : 109 === this.counterAnim
                                ? this.startTween(this.metla, 10, { x: 19 })
                                : 119 === this.counterAnim && this.animComplete()
                            : "stop_attack" === this.currAnim
                            ? 1 === this.counterAnim
                                ? this.startTween(this.metla, 24, { x: 50, y: 123, skX: -147, skY: -147 })
                                : 47 === this.counterAnim && (this.animComplete(), this.playAnim("idle", -1))
                            : "idle" === this.currAnim &&
                              (3 === this.counterAnim
                                  ? (Client.SoundManager.playSFX("s_lvl2_broom"), this.dust.animations.play("anim"), this.startTween(this.metla, 8, { x: 31, y: 127, skX: -139, skY: -139 }))
                                  : 11 === this.counterAnim
                                  ? this.startTween(this.metla, 8, { x: 50, y: 123, skX: -147, skY: -147 })
                                  : 27 === this.counterAnim
                                  ? (this.dust.animations.play("anim"), this.startTween(this.metla, 8, { x: 31, y: 127, skX: -139, skY: -139 }))
                                  : 35 === this.counterAnim
                                  ? this.startTween(this.metla, 8, { x: 50, y: 123, skX: -147, skY: -147 })
                                  : 47 === this.counterAnim
                                  ? (this.dust.animations.play("anim"), this.startTween(this.metla, 8, { x: 31, y: 127, skX: -139, skY: -139 }))
                                  : 55 === this.counterAnim
                                  ? this.startTween(this.metla, 8, { x: 50, y: 123, skX: -147, skY: -147 })
                                  : 87 === this.counterAnim
                                  ? (this.dust.animations.play("anim"), this.startTween(this.metla, 8, { x: 31, y: 127, skX: -139, skY: -139 }))
                                  : 95 === this.counterAnim
                                  ? this.startTween(this.metla, 8, { x: 50, y: 123, skX: -147, skY: -147 })
                                  : 107 === this.counterAnim
                                  ? (this.dust.animations.play("anim"), this.startTween(this.metla, 8, { x: 31, y: 127, skX: -139, skY: -139 }))
                                  : 115 === this.counterAnim
                                  ? this.startTween(this.metla, 8, { x: 50, y: 123, skX: -147, skY: -147 })
                                  : 127 === this.counterAnim
                                  ? (this.dust.animations.play("anim"), this.startTween(this.metla, 8, { x: 31, y: 127, skX: -139, skY: -139 }))
                                  : 135 === this.counterAnim
                                  ? this.startTween(this.metla, 8, { x: 50, y: 123, skX: -147, skY: -147 })
                                  : 155 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl2CarSkeleton2.prototype.setParts = function (value) {
                        "attack" === value
                            ? ((this.dust.visible = !1),
                              this.setPart(this.metla, { x: 50, y: 123, angle: 0, scX: 1, scY: 1, skX: -147, skY: -147, alpha: 1 }),
                              this.setPart(this.vedro, { x: 86, y: 50, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.halat, { x: 89, y: 68, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.eyes, { x: 30, y: 47, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }))
                            : "stop_attack" === value
                            ? ((this.dust.visible = !1),
                              this.setPart(this.metla, { x: 19, y: 104, angle: 0, scX: 1, scY: 1, skX: -117, skY: -117, alpha: 1 }),
                              this.setPart(this.vedro, { x: 86, y: 50, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.halat, { x: 89, y: 68, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.eyes, { x: 30, y: 47, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }))
                            : "idle" === value &&
                              ((this.dust.visible = !0),
                              this.setPart(this.dust, { x: 6, y: 109, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.metla, { x: 50, y: 123, angle: 0, scX: 1, scY: 1, skX: -147, skY: -147, alpha: 1 }),
                              this.setPart(this.vedro, { x: 86, y: 50, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.halat, { x: 89, y: 68, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.eyes, { x: 30, y: 47, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl2CarSkeleton2.prototype.free = function () {
                        (this.group = null), (this.eyes = null), (this.halat = null), (this.vedro = null), (this.metla = null), (this.dust = null);
                    }),
                    Lvl2CarSkeleton2
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl2CarSkeleton2 = Lvl2CarSkeleton2;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl2CarSkeletonAngry = (function (_super) {
                function Lvl2CarSkeletonAngry(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = new Client.SAGroup(game, 0, 0)),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level2", "bubbleBig instance 10000")),
                        _this.part3.pivot.set(51, 44),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level2", "bubbleSmall instance 10000")),
                        _this.part2.pivot.set(7, 6),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level2", "angry instance 10000")),
                        _this.group.addChild(_this.part1),
                        _this.setParts("anim"),
                        _this
                    );
                }
                return (
                    __extends(Lvl2CarSkeletonAngry, _super),
                    (Lvl2CarSkeletonAngry.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (3 === this.counterAnim
                                ? (Client.SoundManager.playSFX("s_lvl2_cleaningAnger"),
                                  (this.part2.visible = !0),
                                  this.setPart(this.part2, { x: -42, y: 56, scX: 0.42, scY: 0.42, alpha: 0 }),
                                  this.startTween(this.part2, 12, { x: -31, y: 45, scX: 1, scY: 1, alpha: 1 }))
                                : 9 === this.counterAnim
                                ? ((this.part1.visible = !0),
                                  this.setPart(this.part1, { x: -12, y: -7, scX: 0.54, scY: 0.54, alpha: 0 }),
                                  this.startTween(this.part1, 6, { x: -33, y: -22, scX: 1.35, scY: 1.35, alpha: 1 }),
                                  (this.part3.visible = !0),
                                  this.setPart(this.part3, { x: -25, y: 30, scX: 0.34, scY: 0.34, alpha: 0 }),
                                  this.startTween(this.part3, 14, { x: 5, y: -5, scX: 1.02, scY: 1.02, alpha: 1 }))
                                : 15 === this.counterAnim
                                ? (this.startTween(this.part1, 6, { x: -29, y: -29 }), this.startTween(this.part2, 6, { x: -33, y: 47 }))
                                : 21 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: -25, y: -30 })
                                : 23 === this.counterAnim
                                ? this.startTween(this.part3, 6, { x: 0, y: 0, scX: 1, scY: 1 })
                                : 25 === this.counterAnim
                                ? this.startTween(this.part1, 6, { x: -29, y: -29 })
                                : 31 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: -25, y: -30 })
                                : 35 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: -33, y: -22 })
                                : 39 === this.counterAnim
                                ? this.startTween(this.part1, 6, { x: -24, y: -15, scX: 1, scY: 1, alpha: 0 })
                                : 47 === this.counterAnim && (this.animComplete(), (this.part1.visible = !1), (this.part2.visible = !1), (this.part3.visible = !1)));
                    }),
                    (Lvl2CarSkeletonAngry.prototype.setParts = function (value) {
                        "anim" === value && ((this.part1.visible = !1), (this.part2.visible = !1), (this.part3.visible = !1));
                    }),
                    (Lvl2CarSkeletonAngry.prototype.free = function () {
                        (this.group = null), (this.part3 = null), (this.part2 = null), (this.part1 = null);
                    }),
                    Lvl2CarSkeletonAngry
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl2CarSkeletonAngry = Lvl2CarSkeletonAngry;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl2Door = (function (_super) {
                function Lvl2Door(game, x, y, scale, parent) {
                    var _this = _super.call(this) || this;
                    (_this.pressed = 0),
                        (_this.game = game),
                        (_this.startX = x),
                        (_this.graphic = parent.create(x, y, "level2", "door instance 10000")),
                        (_this.graphic.scale.x = scale),
                        (_this.graphic.inputEnabled = !0),
                        (_this.graphic.input.useHandCursor = !0),
                        _this.graphic.events.onInputOut.add(_this.out, _this),
                        _this.graphic.events.onInputOver.add(_this.over, _this),
                        _this.graphic.events.onInputDown.add(_this.down, _this),
                        _this.graphic.events.onInputUp.add(_this.up, _this);
                    var xOff = 0;
                    -1 === scale && (xOff = 240);
                    var mask = game.make.graphics(x - xOff, y);
                    return mask.beginFill(16711680, 0.5), mask.drawCircle(120, 90, 300), mask.endFill(), parent.addChild(mask), (_this.graphic.mask = mask), (mask = null), _this;
                }
                return (
                    __extends(Lvl2Door, _super),
                    (Lvl2Door.prototype.out = function () {
                        !1 !== this.graphic.inputEnabled && (this.graphic.frameName = "door instance 10000");
                    }),
                    (Lvl2Door.prototype.over = function () {
                        !1 !== this.graphic.inputEnabled && (this.graphic.frameName = "door instance 10001");
                    }),
                    (Lvl2Door.prototype.down = function () {
                        (this.pressed = 1), (this.offX = this.game.input.worldX - this.graphic.x);
                    }),
                    (Lvl2Door.prototype.up = function () {
                        this.pressed = 0;
                    }),
                    (Lvl2Door.prototype.update = function () {
                        1 === this.pressed
                            ? ((this.graphic.x = this.game.input.worldX - this.offX),
                              1 === this.graphic.scale.x
                                  ? this.graphic.x > this.startX
                                      ? (this.graphic.x = this.startX)
                                      : this.graphic.x < this.startX - 35 &&
                                        ((this.graphic.inputEnabled = !1),
                                        (this.graphic.frameName = "door instance 10002"),
                                        (this.pressed = 2),
                                        Client.GameManager.instance.level.customAction(1),
                                        Client.SoundManager.playSFX("s_lvl2_doorSlide"))
                                  : this.graphic.x < this.startX
                                  ? (this.graphic.x = this.startX)
                                  : this.graphic.x > this.startX + 35 &&
                                    ((this.graphic.inputEnabled = !1),
                                    (this.graphic.frameName = "door instance 10002"),
                                    (this.pressed = 2),
                                    Client.GameManager.instance.level.customAction(2),
                                    Client.SoundManager.playSFX("s_lvl2_doorSlide")))
                            : 2 === this.pressed &&
                              (1 === this.graphic.scale.x
                                  ? ((this.graphic.x -= 2), this.graphic.x < this.startX - 62 && ((this.graphic.x = this.startX - 62), (this.pressed = 0)))
                                  : ((this.graphic.x += 2), this.graphic.x > this.startX + 62 && ((this.graphic.x = this.startX + 62), (this.pressed = 0))));
                    }),
                    (Lvl2Door.prototype.free = function () {
                        (this.graphic = null), (this.game = null);
                    }),
                    Lvl2Door
                );
            })(Client.BasicElement);
            Client.Lvl2Door = Lvl2Door;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl2WheelyBubble = (function (_super) {
                function Lvl2WheelyBubble(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = 148),
                        (_this.group.y = 243),
                        (_this.group.scale.x = -1),
                        Client.GameManager.instance.layerUpper.addChild(_this.group),
                        (_this.group.visible = !1),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level2", "bubbleBig instance 10000")),
                        _this.part3.pivot.set(51, 44),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level2", "bubbleSmall instance 10000")),
                        _this.part2.pivot.set(7, 6),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level2", "gold instance 10000")),
                        _this.part1.pivot.set(25, 26),
                        _this.group.addChild(_this.part1),
                        _this.setParts("anim"),
                        _this
                    );
                }
                return (
                    __extends(Lvl2WheelyBubble, _super),
                    (Lvl2WheelyBubble.prototype.show = function () {
                        (this.group.visible = !0), this.playAnim("anim");
                    }),
                    (Lvl2WheelyBubble.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? this.startTween(this.part2, 14, { x: -31, y: 45, scX: 1, scY: 1, alpha: 1 })
                                : 9 === this.counterAnim
                                ? ((this.part3.visible = !0), this.setPart(this.part3, { x: -25, y: 30, scX: 0.34, scY: 0.34, alpha: 0 }), this.startTween(this.part3, 14, { x: 5, y: -5, scX: 1.02, scY: 1.02, alpha: 1 }))
                                : 15 === this.counterAnim
                                ? this.startTween(this.part2, 6, { x: -33, y: 47 })
                                : 21 === this.counterAnim
                                ? ((this.part1.visible = !0), this.setPart(this.part1, { x: 8, y: -7, skY: 180, alpha: 0 }), this.startTween(this.part1, 8, { x: 0, y: -1, scX: 1.39, scY: 1.39, alpha: 1 }))
                                : 23 === this.counterAnim
                                ? this.startTween(this.part3, 6, { x: 0, y: 0, scX: 1, scY: 1 })
                                : 81 === this.counterAnim && (this.animComplete(), (this.group.visible = !1), Client.GameManager.instance.level.customAction(5)));
                    }),
                    (Lvl2WheelyBubble.prototype.setParts = function (value) {
                        "anim" === value && ((this.part1.visible = !1), this.setPart(this.part2, { x: -42, y: 56, angle: 0, scX: 0.42, scY: 0.42, skX: 0, skY: 0, alpha: 0 }), (this.part3.visible = !1));
                    }),
                    (Lvl2WheelyBubble.prototype.free = function () {
                        (this.group = null), (this.part3 = null), (this.part2 = null), (this.part1 = null);
                    }),
                    Lvl2WheelyBubble
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl2WheelyBubble = Lvl2WheelyBubble;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl3CarCard = (function (_super) {
                function Lvl3CarCard(_game, _id, _x, _y, _targetX, _targetY) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.id = 0),
                        (_this.targetX = 0),
                        (_this.targetY = 0),
                        (_this.startX = 0),
                        (_this.startY = 0),
                        (_this.hided = !1),
                        (_this.id = _id),
                        (_this.startX = _x + 301),
                        (_this.startY = _y + 209),
                        (_this.targetX = _targetX),
                        (_this.targetY = _targetY),
                        (_this.card = Client.GameManager.instance.layerUpper.create(_this.startX, _this.startY, "level3", "carCard instance 10000")),
                        (_this.ico = _game.make.sprite(4, 4, "level3", "carImage instance 10000")),
                        _this.ico.animations.add("anim", Phaser.Animation.generateFrameNames("carImage instance 1", 0, 8, "", 4), 30, !1).onComplete.add(_this.showCarIco, _this),
                        _this.card.addChild(_this.ico),
                        (_this.number = _game.make.sprite(16, 88, "level3", "canNum instance 10000")),
                        _this.card.addChild(_this.number),
                        _this
                    );
                }
                return (
                    __extends(Lvl3CarCard, _super),
                    (Lvl3CarCard.prototype.moveToTarget = function () {
                        this.ico.play("anim");
                    }),
                    (Lvl3CarCard.prototype.showCarIco = function () {
                        (this.ico.frameName = "carImage instance " + (10009 + this.id)),
                            (this.number.frameName = "canNum instance 1000" + (1 + this.id)),
                            Client.Main.instance.add
                                .tween(this.card.scale)
                                .to({ x: 1.1, y: 1.1 }, 200, "Linear", !0)
                                .onComplete.add(function () {
                                    Client.Main.instance.add.tween(this.card.scale).to({ x: 1, y: 1 }, 200, "Linear", !0), Client.Main.instance.add.tween(this.card).to({ x: this.targetX, y: this.targetY }, 450, "Linear", !0);
                                }, this);
                    }),
                    (Lvl3CarCard.prototype.addClick = function () {
                        (this.card.inputEnabled = !0),
                            (this.card.input.useHandCursor = !0),
                            this.card.events.onInputDown.add(this.click, this),
                            this.card.events.onInputOver.add(this.over, this),
                            this.card.events.onInputOut.add(this.out, this);
                    }),
                    (Lvl3CarCard.prototype.click = function () {
                        (this.card.inputEnabled = !1), Client.Main.instance.add.tween(this.card).to({ x: this.startX, y: this.startY }, 450, "Linear", !0).onComplete.add(this.startCheck, this);
                    }),
                    (Lvl3CarCard.prototype.startCheck = function () {
                        Client.GameManager.instance.layerUpper.setChildIndex(this.card, Client.GameManager.instance.layerUpper.length - 1),
                            Client.GameManager.instance.layerUpper.setChildIndex(Client.GameManager.instance.level.gamePlay.carIcon, Client.GameManager.instance.layerUpper.length - 1),
                            Client.Main.instance.add.tween(this.card).to({ y: 265 }, 1500, "Linear", !0).onComplete.add(this.scanCar, this);
                    }),
                    (Lvl3CarCard.prototype.scanCar = function () {
                        4 !== this.id
                            ? (Client.GameManager.instance.level.gamePlay.carIcon.play("false"), this.fall(500), Client.SoundManager.playSFX("s_lvl3_compWr"))
                            : (Client.SoundManager.playSFX("s_lvl3_compSucc"), Client.GameManager.instance.level.gamePlay.carIcon.play("true"), Client.Main.instance.add.tween(this.card).to({ y: this.startY }, 450, "Linear", !0, 500));
                    }),
                    (Lvl3CarCard.prototype.fall = function (_time) {
                        this.hided || 4 === this.id || ((this.hided = !0), Client.Main.instance.add.tween(this.card).to({ y: this.card.y + 350, alpha: 0 }, 600, "Linear", !0, _time));
                    }),
                    (Lvl3CarCard.prototype.over = function () {
                        this.card.frameName = "carCard instance 10001";
                    }),
                    (Lvl3CarCard.prototype.out = function () {
                        this.card.frameName = "carCard instance 10000";
                    }),
                    (Lvl3CarCard.prototype.free = function () {
                        (this.card = null), (this.ico = null), (this.number = null);
                    }),
                    Lvl3CarCard
                );
            })(Client.BasicElement);
            Client.Lvl3CarCard = Lvl3CarCard;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl3GamePlay = (function (_super) {
                function Lvl3GamePlay(_game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.useCleaner = !1),
                        (_this.photo1Fall = !1),
                        (_this.photo2Fall = !1),
                        (_this.photo3Fall = !1),
                        (_this.dirtCount = 0),
                        (_this.cards = new Array()),
                        (_this.timer = 0),
                        (_this.count = 0),
                        (_this.startUpdate = !1),
                        (_this.dirt = new Array()),
                        (_this.game = _game),
                        _this.addButtons(),
                        _this.addBrokenNumber(),
                        _this.addPhotos(),
                        (_this.cleaner = Client.GameManager.instance.layerUpper.create(0, 0, "level3", "lvl3_cleanCursor_mc instance 10000")),
                        _this.cleaner.animations.add("anim", Phaser.Animation.generateFrameNames("lvl3_cleanCursor_mc instance 1", 0, 3, "", 4), 20, !1),
                        _this.cleaner.anchor.set(0.5),
                        (_this.cleaner.visible = !1),
                        (_this.cleaner.inputEnabled = !1),
                        _this
                    );
                }
                return (
                    __extends(Lvl3GamePlay, _super),
                    (Lvl3GamePlay.prototype.addPhotos = function () {
                        (this.photo1 = Client.GameManager.instance.layerUpper.create(285, 434, "level3", "photo1 instance 10000")),
                            this.photo1.anchor.set(0.5),
                            (this.photo1.name = "photo1"),
                            (this.photo1.angle = -22),
                            (this.photo1.alpha = 0),
                            (this.photo1.inputEnabled = !0),
                            (this.photo1.input.useHandCursor = !0),
                            this.photo1.events.onInputDown.addOnce(this.selectPhoto, this),
                            this.game.add
                                .tween(this.photo1)
                                .to({ y: 342, angle: -10, alpha: 1 }, 250, "Linear", !0)
                                .onComplete.addOnce(function () {
                                    this.game.add.tween(this.photo1).to({ x: 282, y: 349, angle: -7 }, 250, "Linear", !0);
                                }, this),
                            (this.photo2 = Client.GameManager.instance.layerUpper.create(289, 433, "level3", "photo2 instance 10000")),
                            this.photo2.anchor.set(0.5),
                            this.photo2.animations.add("anim", Phaser.Animation.generateFrameNames("photo2 instance 1", 0, 23, "", 4), 30, !1).onComplete.addOnce(function () {
                                this.game.add.tween(this.photo2).to({ alpha: 0 }, 250, "Linear", !0), this.game.add.tween(this.photo2.scale).to({ x: 0.3, y: 0.3 }, 250, "Linear", !0);
                            }, this),
                            (this.photo2.name = "photo2"),
                            (this.photo2.angle = -32),
                            (this.photo2.alpha = 0),
                            (this.photo2.inputEnabled = !0),
                            (this.photo2.input.useHandCursor = !0),
                            this.photo2.events.onInputDown.addOnce(this.selectPhoto, this),
                            this.game.add
                                .tween(this.photo2)
                                .to({ x: 285, y: 341, angle: -16, alpha: 1 }, 250, "Linear", !0)
                                .onComplete.addOnce(function () {
                                    this.game.add.tween(this.photo2).to({ x: 395, y: 344, angle: 0 }, 250, "Linear", !0);
                                }, this),
                            (this.photo3 = Client.GameManager.instance.layerUpper.create(300, 437, "level3", "photo3 instance 10000")),
                            this.photo3.anchor.set(0.5),
                            (this.photo3.name = "photo3"),
                            (this.photo3.angle = -23),
                            (this.photo3.alpha = 0),
                            (this.photo3.inputEnabled = !0),
                            (this.photo3.input.useHandCursor = !0),
                            this.photo3.events.onInputDown.addOnce(this.selectPhoto, this),
                            this.game.add
                                .tween(this.photo3)
                                .to({ x: 292, y: 343, angle: -11, alpha: 1 }, 250, "Linear", !0)
                                .onComplete.addOnce(function () {
                                    this.game.add.tween(this.photo3).to({ x: 509, y: 350, angle: 5 }, 250, "Linear", !0);
                                }, this);
                    }),
                    (Lvl3GamePlay.prototype.selectPhoto = function (_sprite) {
                        (_sprite.inputEnabled = !1),
                            "photo1" === _sprite.name
                                ? !1 === this.photo1Fall && ((this.photo1Fall = !0), this.game.add.tween(_sprite).to({ x: _sprite.x - 8, y: _sprite.y + 106, angle: -30, alpha: 0 }, 250, "Linear", !0))
                                : "photo2" === _sprite.name
                                ? ((this.photo2Fall = !0), _sprite.play("anim"), this.selectPhoto(this.photo1), this.selectPhoto(this.photo3), this.checkSearchButton(), this.addCarScanner(), Client.SoundManager.playSFX("s_lvl3_carCompare"))
                                : !1 === this.photo3Fall && ((this.photo3Fall = !0), this.game.add.tween(_sprite).to({ x: _sprite.x + 10, y: _sprite.y + 101, angle: 20, alpha: 0 }, 250, "Linear", !0));
                    }),
                    (Lvl3GamePlay.prototype.addButtons = function () {
                        (this.searchButton = this.game.make.button(
                            37,
                            141,
                            "level3",
                            this.findCar,
                            this,
                            "searchButtonBody instance 10002",
                            "searchButtonBody instance 10001",
                            "searchButtonBody instance 10002",
                            "searchButtonBody instance 10001"
                        )),
                            this.searchButton.anchor.set(0.5),
                            (this.searchButton.alpha = 0),
                            this.searchButton.scale.set(0.78),
                            Client.GameManager.instance.layerUpper.addChild(this.searchButton),
                            (this.searchButton.inputEnabled = !1),
                            (this.searchButton.frameName = "searchButtonBody instance 10000"),
                            this.game.add.tween(this.searchButton).to({ x: 144, alpha: 1 }, 550, "Linear", !0),
                            this.game.add.tween(this.searchButton.scale).to({ x: 1, y: 1 }, 550, "Linear", !0),
                            (this.clearButton = this.game.make.button(37, 296, "level3", null, null, "clearButton instance 10001", "clearButton instance 10000", "clearButton instance 10001", "clearButton instance 10000")),
                            this.clearButton.anchor.set(0.5),
                            (this.clearButton.alpha = 0),
                            this.clearButton.scale.set(0.78),
                            this.clearButton.onInputDown.add(this.takeCleaner, this),
                            Client.GameManager.instance.layerUpper.addChild(this.clearButton),
                            this.game.add.tween(this.clearButton).to({ x: 144, alpha: 1 }, 550, "Linear", !0),
                            this.game.add.tween(this.clearButton.scale).to({ x: 1, y: 1 }, 550, "Linear", !0);
                    }),
                    (Lvl3GamePlay.prototype.takeCleaner = function () {
                        Client.SoundManager.playSFX("s_lvl3_initClean"), (this.useCleaner = !this.useCleaner), (this.cleaner.visible = this.useCleaner);
                        for (var i = 0; i < this.dirt.length; i++) this.dirt[i].inputEnabled = this.useCleaner;
                    }),
                    (Lvl3GamePlay.prototype.findCar = function () {
                        (this.searchButton.inputEnabled = !1),
                            (this.scaneCards = new Client.Lvl3CarCard(this.game, 0, 309, -114, 0, 0)),
                            (this.scaneCards.card.alpha = 0),
                            Client.GameManager.instance.level.updateElements.push(this.scaneCards),
                            (this.number3.x = 354),
                            (this.number3.y = 174),
                            (this.number4.x = 416),
                            (this.number4.y = 174),
                            Client.GameManager.instance.layerUpper.addChild(this.number3),
                            Client.GameManager.instance.layerUpper.addChild(this.number4),
                            this.game.add
                                .tween(this.number4.scale)
                                .to({ x: 1.2, y: 1.2 }, 300, "Linear", !0)
                                .onComplete.add(function () {
                                    this.game.add.tween(this.number4).to({ x: this.number4.x + 255, y: this.number4.y + 28 }, 450, "Linear", !0), this.game.add.tween(this.number4.scale).to({ x: 0.5, y: 0.5 }, 450, "Linear", !0);
                                }, this),
                            this.game.add
                                .tween(this.number3.scale)
                                .to({ x: 1.2, y: 1.2 }, 300, "Linear", !0, 300)
                                .onComplete.add(function () {
                                    this.game.add.tween(this.number3).to({ x: this.number3.x + 286, y: this.number3.y + 28 }, 450, "Linear", !0), this.game.add.tween(this.number3.scale).to({ x: 0.5, y: 0.5 }, 450, "Linear", !0);
                                }, this);
                        var questionMark = Client.GameManager.instance.layerUpper.create(708, 189, "level3", "unknowNum instance 10000");
                        questionMark.anchor.set(0.5),
                            (questionMark.alpha = 0),
                            this.game.add.tween(questionMark.scale).to({ x: 1.27, y: 1.27 }, 300, "Linear", !0, 800),
                            this.game.add
                                .tween(questionMark)
                                .to({ alpha: 1 }, 300, "Linear", !0, 800)
                                .onComplete.add(function () {
                                    this.game.add.tween(questionMark).to({ x: questionMark.x - 5, y: questionMark.y + 14 }, 450, "Linear", !0),
                                        this.game.add
                                            .tween(questionMark.scale)
                                            .to({ x: 1, y: 1 }, 450, "Linear", !0)
                                            .onComplete.add(function () {
                                                this.game.add
                                                    .tween(this.scaneCards.card)
                                                    .to({ alpha: 1 }, 450, "Linear", !0)
                                                    .onComplete.add(function () {
                                                        (this.number3.visible = !1), (this.number4.visible = !1), (questionMark.visible = !1), this.addCarCards();
                                                    }, this);
                                            }, this);
                                }, this),
                            Client.SoundManager.playSFX("s_lvl3_carNumber"),
                            this.game.add
                                .tween(this.brokenPart)
                                .to({ alpha: 1 }, 150, "Linear", !0)
                                .onComplete.add(function () {
                                    this.game.add
                                        .tween(this.brokenPart)
                                        .to({ alpha: 0 }, 250, "Linear", !0, 250)
                                        .onComplete.add(function () {
                                            this.game.add.tween(this.searchButton).to({ x: 37, alpha: 0 }, 550, "Linear", !0),
                                                this.game.add.tween(this.clearButton).to({ x: 37, alpha: 0 }, 550, "Linear", !0),
                                                this.game.add.tween(this.brokenNumber).to({ y: -43, alpha: 0 }, 550, "Linear", !0);
                                        }, this);
                                }, this);
                    }),
                    (Lvl3GamePlay.prototype.addCarCards = function () {
                        for (
                            var pos = [
                                    [80, 94],
                                    [246, 94],
                                    [436, 94],
                                    [80, 265],
                                    [246, 265],
                                    [436, 265],
                                ],
                                i = 5;
                            -1 < i;
                            i--
                        ) {
                            var card = new Client.Lvl3CarCard(this.game, i, 309, -114, pos[i][0], pos[i][1]);
                            this.cards.unshift(card), Client.GameManager.instance.level.updateElements.push(card);
                        }
                        this.startUpdate = !0;
                    }),
                    (Lvl3GamePlay.prototype.addBrokenNumber = function () {
                        var dirtPos = [
                            [68, 30],
                            [150, 19],
                            [152, 62],
                            [91, 79],
                            [33, 127],
                            [27, 70],
                        ];
                        (this.brokenNumber = new Phaser.Group(this.game)),
                            (this.brokenNumber.x = 274),
                            (this.brokenNumber.y = -43),
                            (this.brokenNumber.alpha = 0),
                            Client.GameManager.instance.layerUpper.addChild(this.brokenNumber),
                            this.game.add.tween(this.brokenNumber).to({ y: 102, alpha: 1 }, 550, "Linear", !0),
                            this.brokenNumber.create(0, 0, "level3", "curNumber1 instance 10000"),
                            (this.number3 = this.brokenNumber.create(80, 65, "level3", "num3 instance 10000")),
                            this.number3.anchor.set(0.5),
                            (this.number4 = this.brokenNumber.create(141, 65, "level3", "num4 instance 10000")),
                            this.number4.anchor.set(0.5),
                            (this.brokenPart = this.brokenNumber.create(180, 0, "level3", "carNumber2 instance 10000"));
                        for (var i = (this.brokenPart.alpha = 0); i < dirtPos.length; i++) {
                            var dirt = this.brokenNumber.create(dirtPos[i][0], dirtPos[i][1], "level3", "dirt" + (i + 1) + " instance 10000");
                            dirt.anchor.set(0.5),
                                (dirt.name = "" + (i + 1)),
                                (dirt.animations.add("anim", Phaser.Animation.generateFrameNames("dirt" + (i + 1) + " instance 1", 0, 18, "", 4), 30, !1).killOnComplete = !0),
                                dirt.events.onInputDown.addOnce(this.dirtDown, this),
                                dirt.events.onInputOver.add(this.dirtOver, this),
                                dirt.events.onInputOut.add(this.dirtOut, this),
                                this.dirt.push(dirt);
                        }
                    }),
                    (Lvl3GamePlay.prototype.dirtOver = function (_sprite) {
                        _sprite.frameName = "dirt" + Number(_sprite.name) + " instance 10002";
                    }),
                    (Lvl3GamePlay.prototype.dirtOut = function (_sprite) {
                        _sprite.frameName = "dirt" + Number(_sprite.name) + " instance 10000";
                    }),
                    (Lvl3GamePlay.prototype.dirtDown = function (_sprite) {
                        !0 === this.useCleaner &&
                            (_sprite.play("anim"),
                            (_sprite.inputEnabled = !1),
                            this.cleaner.play("anim"),
                            this.dirtCount++,
                            6 === this.dirtCount && ((this.clearButton.inputEnabled = !1), (this.clearButton.frameName = "clearButton instance 10002"), (this.useCleaner = !1), (this.cleaner.visible = !1), this.checkSearchButton()),
                            Client.SoundManager.playSFX("s_lvl3_cleaningDirt"));
                    }),
                    (Lvl3GamePlay.prototype.checkSearchButton = function () {
                        6 === this.dirtCount && this.photo2Fall && ((this.searchButton.inputEnabled = !0), (this.searchButton.input.useHandCursor = !0), (this.searchButton.frameName = "searchButtonBody instance 10001"));
                    }),
                    (Lvl3GamePlay.prototype.addCarScanner = function () {
                        var carScanner = Client.GameManager.instance.layerUpper.create(594, 80, "level3", "carSilhouette instance 10000");
                        (carScanner.alpha = 0),
                            (this.carPlace = Client.GameManager.instance.layerUpper.create(612, 208, "level3", "carIcon instance 10000")),
                            (this.carIcon = Client.GameManager.instance.layerUpper.create(617, 285, "level3", "carSimple instance 10000")),
                            this.carIcon.animations.add("false", Phaser.Animation.generateFrameNames("carSimple instance 1", 1, 21, "", 4), 30, !1),
                            this.carIcon.animations.add("true", Phaser.Animation.generateFrameNames("carSimple instance 1", 21, 44, "", 4), 30, !1).onComplete.add(function () {
                                this.game.add.tween(this.carPlace).to({ alpha: 0 }, 150, "Linear", !0), this.game.add.tween(this.carIcon).to({ alpha: 0 }, 150, "Linear", !0), this.hideCards();
                            }, this),
                            this.game.add.tween(carScanner).to({ alpha: 1 }, 150, "Linear", !0),
                            this.game.add.tween(this.carIcon).to({ alpha: 1 }, 150, "Linear", !0);
                    }),
                    (Lvl3GamePlay.prototype.hideCards = function () {
                        for (var i = 0; i < this.cards.length; i++) this.cards[i].fall(Client.Tools.random(0, 400));
                        this.addMap();
                    }),
                    (Lvl3GamePlay.prototype.addMap = function () {
                        var map = new Client.Lvl3Map(this.game);
                        Client.GameManager.instance.level.updateElements.push(map);
                    }),
                    (Lvl3GamePlay.prototype.update = function () {
                        if (
                            (this.useCleaner && ((this.cleaner.x = this.game.input.activePointer.x), (this.cleaner.y = this.game.input.activePointer.y)),
                            this.startUpdate && (this.timer++, 30 <= this.timer && ((this.timer = 0), (this.scaneCards.card.visible = !1), this.cards[this.count].moveToTarget(), this.count++, 6 === this.count)))
                        ) {
                            for (var i = 0; i < this.cards.length; i++) this.cards[i].addClick();
                            this.startUpdate = !1;
                        }
                    }),
                    (Lvl3GamePlay.prototype.free = function () {
                        (this.game = null),
                            (this.brokenPart = null),
                            (this.number3 = null),
                            (this.number4 = null),
                            (this.brokenNumber = null),
                            (this.clearButton = null),
                            (this.searchButton = null),
                            (this.cleaner = null),
                            (this.photo1 = null),
                            (this.photo2 = null),
                            (this.photo3 = null),
                            (this.cards = []),
                            (this.cards = null),
                            (this.scaneCards = null),
                            (this.carIcon = null),
                            (this.carPlace = null),
                            (this.dirt = []),
                            (this.dirt = null);
                    }),
                    Lvl3GamePlay
                );
            })(Client.BasicElement);
            Client.Lvl3GamePlay = Lvl3GamePlay;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl3Map = (function (_super) {
                function Lvl3Map(_game) {
                    var _this = _super.call(this) || this;
                    _this.timer = 0;
                    (_this.panel = Client.GameManager.instance.layerUpper.create(417, 285, "level3", "mapPanel instance 10000")),
                        _this.panel.anchor.set(0.5),
                        (_this.panel.alpha = 0),
                        (_this.map = _game.make.sprite(0, 0, "level3", "map instance 10000")),
                        _this.map.anchor.set(0.5),
                        _this.panel.addChild(_this.map);
                    var point = _game.make.sprite(-5, -10, "level3", "carMapPlace instance 10000");
                    point.animations.add("show", Phaser.Animation.generateFrameNames("carMapPlace instance 1", 0, 42, "", 4), 30, !1).onComplete.add(function () {
                        Client.SoundManager.playSFX("s_lvl3_mapTarget"), point.play("loop");
                    }, _this),
                        point.animations.add("loop", Phaser.Animation.generateFrameNames("carMapPlace instance 1", 43, 70, "", 4), 30, !0),
                        point.play("show"),
                        point.pivot.set(109, 76),
                        point.scale.set(0.9),
                        _this.map.addChild(point);
                    var mask = new Phaser.Graphics(_game, 0, 0);
                    mask.beginFill(0, 0.5), mask.drawRoundedRect(-220, -130, 440, 260, 50), mask.endFill(), _this.panel.addChild(mask), (_this.map.mask = mask);
                    var sputnik = Client.GameManager.instance.layerUpper.create(98, 112, "level3", "sputnik instance 10000");
                    return (
                        (sputnik.alpha = 0),
                        sputnik.scale.set(0.55),
                        sputnik.anchor.set(0.5),
                        _game.add.tween(_this.panel).to({ x: 351, y: 252, alpha: 1 }, 600, "Linear", !0, 1500),
                        _game.add.tween(_this.map.scale).to({ x: 1.2, y: 1.2 }, 600, "Linear", !0, 1500),
                        _game.add.tween(sputnik).to({ alpha: 1 }, 600, "Linear", !0, 1650),
                        _game.add.tween(sputnik.scale).to({ x: 1, y: 1 }, 600, "Linear", !0, 1650),
                        _this
                    );
                }
                return (
                    __extends(Lvl3Map, _super),
                    (Lvl3Map.prototype.update = function () {
                        this.timer++, 210 === this.timer ? (Client.GameManager.instance.hero.currState = Client.HeroState.finish) : 300 === this.timer && Client.LevelBuilder.instance.levelComplete();
                    }),
                    (Lvl3Map.prototype.free = function () {
                        (this.panel = null), (this.map = null);
                    }),
                    Lvl3Map
                );
            })(Client.BasicElement);
            Client.Lvl3Map = Lvl3Map;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl3Monitor = (function (_super) {
                function Lvl3Monitor(_game) {
                    var mask,
                        _this = _super.call(this) || this;
                    return (
                        (_this.counter = 0),
                        (_this.canUpdate = !1),
                        (_this.group = new Phaser.Group(_game)),
                        (_this.group.x = 279),
                        (_this.group.y = 423),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (mask = new Phaser.Graphics(_game, _this.group.x, _this.group.y)).beginFill(0, 0.5),
                        mask.drawRect(0, 0, 155, 104),
                        mask.endFill(),
                        Client.GameManager.instance.layerBackground.addChild(mask),
                        (_this.group.mask = mask),
                        (_this.monitor = _this.group.create(0, 0, "level3", "smallMonitor instance 10000")),
                        (_this.shkala = _this.group.create(38, 80, "level3", "monitorShkala instance 10000")),
                        (_this.disk = _this.group.create(108, 50, "level3", "monitorPart1 instance 10000")),
                        (_this.disk.alpha = 0),
                        (mask = new Phaser.Graphics(_game, 29, 23)).beginFill(0, 0.5),
                        mask.drawRect(0, 0, 101, 45),
                        mask.endFill(),
                        _this.group.addChild(mask),
                        (_this.text = _this.group.create(0, 24, "level3", "monitorPart2 instance 10000")),
                        (_this.text.x = 30 - _this.text.width),
                        (_this.text.alpha = 0.3),
                        (_this.text.mask = mask),
                        (_this.door1 = _this.group.create(0, 0, "level3", "monitorPart3 instance 10000")),
                        (_this.door2 = _this.group.create(79, 4, "level3", "monitorPart4 instance 10000")),
                        _this
                    );
                }
                return (
                    __extends(Lvl3Monitor, _super),
                    (Lvl3Monitor.prototype.openMonitor = function () {
                        Client.Main.instance.add.tween(this.door1).to({ x: -82, y: -8 }, 1e3, "Linear", !0),
                            Client.Main.instance.add.tween(this.door1.scale).to({ y: 1.17 }, 1e3, "Linear", !0),
                            Client.Main.instance.add.tween(this.door2).to({ x: 159 }, 1e3, "Linear", !0),
                            Client.Main.instance.add
                                .tween(this.door2.scale)
                                .to({ y: 1.11 }, 1e3, "Linear", !0)
                                .onComplete.addOnce(function () {
                                    (3 !== Client.LevelManager.instance.currentLevel && 7 !== Client.LevelManager.instance.currentLevel && 11 !== Client.LevelManager.instance.currentLevel) ||
                                        Client.GameManager.instance.level.addProjectors();
                                }, this),
                            (this.canUpdate = !0);
                    }),
                    (Lvl3Monitor.prototype.update = function () {
                        !0 === this.canUpdate &&
                            this.counter < 80 &&
                            ((this.counter += 1),
                            (this.shkala.frameName = "monitorShkala instance " + (1e4 + Math.floor(this.counter / 2))),
                            12 === this.counter
                                ? (this.monitor.frameName = "smallMonitor instance 10001")
                                : 14 === this.counter
                                ? (this.monitor.frameName = "smallMonitor instance 10000")
                                : 20 === this.counter
                                ? (this.monitor.frameName = "smallMonitor instance 10002")
                                : 26 === this.counter
                                ? (this.monitor.frameName = "smallMonitor instance 10000")
                                : 28 === this.counter
                                ? (this.monitor.frameName = "smallMonitor instance 10002")
                                : 36 === this.counter
                                ? Client.Main.instance.add.tween(this.text).to({ x: this.text.x + this.text.width, alpha: 1 }, 900, "Linear", !0)
                                : 54 === this.counter && Client.Main.instance.add.tween(this.disk).to({ alpha: 1 }, 500, "Linear", !0));
                    }),
                    (Lvl3Monitor.prototype.free = function () {
                        (this.group = null), (this.monitor = null), (this.shkala = null), (this.disk = null), (this.text = null), (this.door1 = null), (this.door2 = null);
                    }),
                    Lvl3Monitor
                );
            })(Client.BasicElement);
            Client.Lvl3Monitor = Lvl3Monitor;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl4CarKran = (function (_super) {
                function Lvl4CarKran(game) {
                    var _this = _super.call(this) || this;
                    (_this.counterAnim = 0),
                        (_this.leverPressed = !1),
                        (_this.oldAngle = 0),
                        (_this.counterSleep = 240),
                        (_this.activeSleep = !0),
                        (_this.contactedCarSensor = !1),
                        (_this.soundLeverPlaying = !1),
                        (_this.game = game),
                        (_this.group = game.make.group()),
                        (_this.group.x = 320),
                        (_this.group.y = 205),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.rope = _this.group.create(290, -114, "level4", "kranRope instance 10000")),
                        _this.rope.anchor.setTo(1, 0.5),
                        (_this.rope.angle = 30),
                        (_this.ropeWheel = _this.group.create(280, -118, "level4", "kranRopeWheel instance 10000")),
                        _this.ropeWheel.anchor.setTo(0.5);
                    var sprite = _this.group.create(0, 0, "level4", "kranBody instance 10000");
                    return (
                        (sprite.anchor.y = 1),
                        (_this.eyes = _this.group.create(83, -155, "level4")),
                        _this.eyes.animations.add("sleep", Phaser.Animation.generateFrameNames("kranEyes instance 1", 94, 172, "", 4), 40, !0),
                        _this.eyes.animations.add("wakeUp1", Phaser.Animation.generateFrameNames("kranEyes instance 1", 173, 221, "", 4), 40, !1).onComplete.add(function () {
                            this.eyes.animations.play("idle"), Client.SoundManager.playSFX("s_lvl5_cranSleep", !0);
                        }, _this),
                        _this.eyes.animations.add("wakeUp2", Phaser.Animation.generateFrameNames("kranEyes instance 1", 222, 275, "", 4), 40, !1).onComplete.add(function () {
                            this.eyes.animations.play("idle"), Client.SoundManager.playSFX("s_lvl5_cranSleep", !0);
                        }, _this),
                        _this.eyes.animations.add("idle", Phaser.Animation.generateFrameNames("kranEyes instance 1", 0, 93, "", 4), 40, !1).onComplete.add(function () {
                            this.eyes.animations.play("sleep");
                        }, _this),
                        _this.eyes.animations.play("sleep"),
                        Client.SoundManager.playSFX("s_lvl5_cranSleep", !0),
                        (_this.headset = _this.group.create(103, -184, "level4", "kranHeadset instance 10000")),
                        _this.headset.animations.add("anim", Phaser.Animation.generateFrameNames("kranHeadset instance 1", 2, 70, "", 4), 40, !1).onComplete.add(_this.headsetComp, _this),
                        (_this.headset.inputEnabled = !0),
                        (_this.headset.input.useHandCursor = !0),
                        _this.headset.events.onInputOut.add(_this.headsetOut, _this),
                        _this.headset.events.onInputOver.add(_this.headsetOver, _this),
                        _this.headset.events.onInputDown.add(_this.headsetDown, _this),
                        (_this.headset.hitArea = new Phaser.Rectangle(45, 50, 30, 66)),
                        (_this.bodyShowQuestCar = new Phaser.Physics.Box2D.Body(_this.game, null, 545, 169, 0)),
                        _this.bodyShowQuestCar.setRectangle(117, 100),
                        (_this.bodyShowQuestCar.sensor = !0),
                        _this.bodyShowQuestCar.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, _this.contactShowCar, _this),
                        (_this.lever = _this.group.create(280, -118, "level4", "kranArm instance 10000")),
                        _this.lever.anchor.setTo(0.22, 0.5),
                        (_this.leverHandler = game.make.sprite(38, 0, "level4", "armHandler instance 10000")),
                        _this.leverHandler.anchor.setTo(0.5),
                        _this.lever.addChild(_this.leverHandler),
                        (_this.leverHandler.inputEnabled = !0),
                        (_this.leverHandler.input.useHandCursor = !0),
                        _this.leverHandler.events.onInputOut.add(_this.leverOut, _this),
                        _this.leverHandler.events.onInputOver.add(_this.leverOver, _this),
                        _this.leverHandler.events.onInputDown.add(_this.leverDown, _this),
                        _this.leverHandler.events.onInputUp.add(_this.leverUp, _this),
                        ((sprite = Client.GameManager.instance.layerBackground.create(453, 174, "level4", "kranWheel instance 10000")).cacheAsBitmap = !0),
                        ((sprite = Client.GameManager.instance.layerBackground.create(548, 174, "level4", "kranWheel instance 10000")).cacheAsBitmap = !0),
                        ((sprite = Client.GameManager.instance.layerBackground.create(590, 174, "level4", "kranWheel instance 10000")).cacheAsBitmap = !0),
                        (sprite = null),
                        (_this.kruk = Client.GameManager.instance.layerBackground.create(280, -350, "level4", "kranKruk instance 10000")),
                        (_this.kruk.anchor.x = 0.5),
                        (_this.bodyKruk = new Phaser.Physics.Box2D.Body(game, null, 278, 233, 1)),
                        _this.bodyKruk.setRectangle(116, 26),
                        (_this.bodyKruk.sensor = !0),
                        (_this.bubbleSleep = new Client.Lvl4SleepBubble(game)),
                        (_this.bubbleSleep.group.x = 0),
                        (_this.bubbleSleep.group.y = -140),
                        _this.group.addChild(_this.bubbleSleep.group),
                        (_this.bubbleQuest = new Client.Lvl4QuestCarBubble(game)),
                        (_this.bubbleQuest.group.x = 60),
                        (_this.bubbleQuest.group.y = -100),
                        _this.group.addChild(_this.bubbleQuest.group),
                        _this
                    );
                }
                return (
                    __extends(Lvl4CarKran, _super),
                    (Lvl4CarKran.prototype.headsetOut = function () {
                        !1 !== this.headset.inputEnabled && (this.headset.frameName = "kranHeadset instance 10000");
                    }),
                    (Lvl4CarKran.prototype.headsetOver = function () {
                        !1 !== this.headset.inputEnabled && (this.headset.frameName = "kranHeadset instance 10001");
                    }),
                    (Lvl4CarKran.prototype.headsetDown = function () {
                        (this.headset.inputEnabled = !1),
                            this.headset.animations.play("anim"),
                            Client.SoundManager.stopSFXLoop("s_lvl5_cranSleep"),
                            Client.SoundManager.playSFX("s_lvl5_cranMusic"),
                            !1 === this.contactedCarSensor ? this.eyes.animations.play("wakeUp1") : (this.eyes.animations.play("wakeUp2"), this.bubbleQuest.show()),
                            (this.counterSleep = 0),
                            "hide" !== this.bubbleSleep.currAnim && this.bubbleSleep.hide();
                    }),
                    (Lvl4CarKran.prototype.headsetComp = function () {
                        (this.headset.inputEnabled = !0), (this.headset.input.useHandCursor = !0), (this.headset.frameName = "kranHeadset instance 10000");
                    }),
                    (Lvl4CarKran.prototype.contactShowCar = function (b1, b2, f1, f2, begin) {
                        ("heroBaseBody" !== f1.GetUserData() && "heroBaseBody" !== f2.GetUserData()) ||
                            (!0 === begin && !1 === this.contactedCarSensor ? (this.contactedCarSensor = !0) : !1 === begin && !0 === this.contactedCarSensor && (this.contactedCarSensor = !1));
                    }),
                    (Lvl4CarKran.prototype.leverOut = function () {
                        !1 !== this.leverHandler.inputEnabled && (this.leverHandler.frameName = "armHandler instance 10000");
                    }),
                    (Lvl4CarKran.prototype.leverOver = function () {
                        !1 !== this.leverHandler.inputEnabled && (this.leverHandler.frameName = "armHandler instance 10001");
                    }),
                    (Lvl4CarKran.prototype.leverDown = function () {
                        this.leverPressed = !0;
                    }),
                    (Lvl4CarKran.prototype.leverUp = function () {
                        (this.leverPressed = !1), (this.soundLeverPlaying = !1), Client.SoundManager.stopSFXLoop("s_lvl5_rotatingArm");
                    }),
                    (Lvl4CarKran.prototype.update = function () {
                        if (
                            ((this.counterAnim += 1),
                            1 === this.counterAnim
                                ? Client.SimpleTweenManager.set(this.group.scale, 20, { y: 0.97 })
                                : 21 === this.counterAnim
                                ? Client.SimpleTweenManager.set(this.group.scale, 20, { y: 1 })
                                : 41 === this.counterAnim && (this.counterAnim = 0),
                            !0 === this.leverPressed)
                        ) {
                            var angle = Phaser.Math.angleBetween(this.game.input.worldX, this.game.input.worldY, 600, 87);
                            if (this.oldAngle === angle) return (this.soundLeverPlaying = !1), void Client.SoundManager.stopSFXLoop("s_lvl5_rotatingArm");
                            angle > this.oldAngle
                                ? ((this.kruk.y -= 1), this.kruk.y < -450 && (this.kruk.y = -450), (this.rope.x += 1), (this.rope.y += 0.5), 300 <= this.rope.x && ((this.rope.x = 290), (this.rope.y = -114)))
                                : ((this.kruk.y += 1),
                                  -203 <= this.kruk.y &&
                                      ((this.kruk.y = -203),
                                      (this.leverPressed = !1),
                                      (this.leverHandler.inputEnabled = !1),
                                      (this.leverHandler.frameName = "armHandler instance 10002"),
                                      (this.bodyKruk.sensor = !1),
                                      (this.soundLeverPlaying = !0),
                                      Client.SoundManager.stopSFXLoop("s_lvl5_rotatingArm")),
                                  (this.rope.x -= 1),
                                  (this.rope.y -= 0.5),
                                  this.rope.x <= 280 && ((this.rope.x = 290), (this.rope.y = -114))),
                                !1 === this.soundLeverPlaying && ((this.soundLeverPlaying = !0), Client.SoundManager.playSFX("s_lvl5_rotatingArm", !0)),
                                (this.lever.rotation = angle - Math.PI),
                                (this.ropeWheel.rotation = this.lever.rotation),
                                (this.oldAngle = angle);
                        }
                        !0 === this.activeSleep && ((this.counterSleep += 1), 360 === this.counterSleep && (this.bubbleSleep.show(), (this.counterSleep = 0))), this.bubbleSleep.update(), this.bubbleQuest.update();
                    }),
                    (Lvl4CarKran.prototype.free = function () {
                        (this.game = null),
                            (this.group = null),
                            (this.eyes = null),
                            (this.rope = null),
                            (this.ropeWheel = null),
                            (this.lever = null),
                            (this.kruk = null),
                            (this.bodyKruk = null),
                            (this.leverHandler = null),
                            (this.headset = null),
                            (this.bodyShowQuestCar = null),
                            this.bubbleSleep.free(),
                            (this.bubbleSleep = null),
                            this.bubbleQuest.free(),
                            (this.bubbleQuest = null);
                    }),
                    Lvl4CarKran
                );
            })(Client.BasicElement);
            Client.Lvl4CarKran = Lvl4CarKran;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl4Platform = (function (_super) {
                function Lvl4Platform(game, x, y) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.active = !1),
                        (_this.graphic = Client.GameManager.instance.layerBackground.create(x, y, "level4", "platform instance 10000")),
                        _this.graphic.anchor.setTo(0.5),
                        _this.graphic.animations.add("show", Phaser.Animation.generateFrameNames("platform instance 1", 0, 6, "", 4), 40, !1).onComplete.add(_this.start, _this),
                        _this.graphic.animations.add("hide", Phaser.Animation.generateFrameNames("platform instance 1", 7, 11, "", 4), 40, !1),
                        (_this.progressBg = game.make.sprite(-2, 0, "level4", "platformProgressBg instance 10000")),
                        _this.progressBg.anchor.setTo(0.5),
                        _this.graphic.addChild(_this.progressBg),
                        (_this.progressBg.visible = !1),
                        (_this.progress = game.make.sprite(0, 2, "level4", "platformProgress instance 10000")),
                        _this.progress.anchor.setTo(0.5),
                        _this.graphic.addChild(_this.progress),
                        (_this.progress.visible = !1),
                        (_this.graphicOver = Client.GameManager.instance.layerBackground.create(x - 2, y - 2, "level4", "platformOver instance 10000")),
                        _this.graphicOver.anchor.setTo(0.5),
                        (_this.graphicOver.alpha = 0),
                        (_this.graphicOver.inputEnabled = !0),
                        (_this.graphicOver.input.useHandCursor = !0),
                        _this.graphicOver.events.onInputOut.add(_this.out, _this),
                        _this.graphicOver.events.onInputOver.add(_this.over, _this),
                        _this.graphicOver.events.onInputDown.add(_this.down, _this),
                        (_this.body = new Phaser.Physics.Box2D.Body(game, null, x - 2, y, 1)),
                        _this.body.setRectangle(116, 26),
                        (_this.body.sensor = !0),
                        _this
                    );
                }
                return (
                    __extends(Lvl4Platform, _super),
                    (Lvl4Platform.prototype.out = function () {
                        !1 !== this.graphicOver.inputEnabled && (this.graphicOver.alpha = 0);
                    }),
                    (Lvl4Platform.prototype.over = function () {
                        !1 !== this.graphicOver.inputEnabled && (this.graphicOver.alpha = 1);
                    }),
                    (Lvl4Platform.prototype.down = function () {
                        (this.graphicOver.inputEnabled = !1), (this.graphicOver.alpha = 0), this.graphic.animations.play("show"), (this.body.sensor = !1), Client.SoundManager.playSFX("s_lvl5_platformMove");
                    }),
                    (Lvl4Platform.prototype.start = function () {
                        (this.active = !0), (this.progressBg.visible = !0), (this.progress.visible = !0), (this.progress.scale.x = 1);
                    }),
                    (Lvl4Platform.prototype.update = function () {
                        !1 !== this.active && ((this.progress.scale.x -= 0.005), this.progress.scale.x <= 0 && this.stop());
                    }),
                    (Lvl4Platform.prototype.stop = function () {
                        (this.active = !1),
                            (this.progressBg.visible = !1),
                            (this.progress.visible = !1),
                            this.graphic.animations.play("hide"),
                            (this.body.sensor = !0),
                            (this.graphicOver.inputEnabled = !0),
                            (this.graphicOver.input.useHandCursor = !0);
                    }),
                    (Lvl4Platform.prototype.free = function () {
                        (this.graphic = null), (this.graphicOver = null), (this.body = null), (this.progress = null), (this.progressBg = null);
                    }),
                    Lvl4Platform
                );
            })(Client.BasicElement);
            Client.Lvl4Platform = Lvl4Platform;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl4QuestCarBubble = (function (_super) {
                function Lvl4QuestCarBubble(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.scale.x = -1),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level4", "bubbleCar instance 10000")),
                        _this.part1.pivot.set(51, 47),
                        _this.group.addChild(_this.part1),
                        Client.GameManager.instance.level.addQuestCar(55, 31, _this.part1),
                        _this.setParts("show"),
                        _this
                    );
                }
                return (
                    __extends(Lvl4QuestCarBubble, _super),
                    (Lvl4QuestCarBubble.prototype.show = function () {
                        this.playAnim("show");
                    }),
                    (Lvl4QuestCarBubble.prototype.updateAnimation = function () {
                        "show" === this.currAnim &&
                            (23 === this.counterAnim
                                ? ((this.part1.visible = !0), this.setPart(this.part1, { x: -46, y: 43, scX: 0.26, scY: 0.26 }), this.startTween(this.part1, 2, { x: -50, y: 47, scX: 0.16, scY: 0.16 }))
                                : 25 === this.counterAnim
                                ? this.startTween(this.part1, 13, { x: 0, y: 0, scX: 1, scY: 1 })
                                : 80 === this.counterAnim
                                ? this.startTween(this.part1, 13, { x: -50, y: 47, scX: 0.16, scY: 0.16 })
                                : 94 === this.counterAnim && (this.animComplete(), (this.part1.visible = !1)));
                    }),
                    (Lvl4QuestCarBubble.prototype.setParts = function (value) {
                        "show" === value && (this.part1.visible = !1);
                    }),
                    (Lvl4QuestCarBubble.prototype.free = function () {
                        (this.group = null), (this.part1 = null);
                    }),
                    Lvl4QuestCarBubble
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl4QuestCarBubble = Lvl4QuestCarBubble;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl4SleepBubble = (function (_super) {
                function Lvl4SleepBubble(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.visible = !1),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level4", "bubbleShipCir instance 10000")),
                        _this.part2.pivot.set(3, 3),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level4", "bubbleShipBg instance 10000")),
                        _this.part1.pivot.set(14, 13),
                        _this.group.addChild(_this.part1),
                        (_this.sheep = game.make.sprite(16, 29, "level4")),
                        _this.sheep.animations.add("anim", Phaser.Animation.generateFrameNames("bubbleShip instance 1", 0, 54, "", 4), 40, !0),
                        _this.part1.addChild(_this.sheep),
                        _this.setParts("show"),
                        _this
                    );
                }
                return (
                    __extends(Lvl4SleepBubble, _super),
                    (Lvl4SleepBubble.prototype.show = function () {
                        (this.group.visible = !0), this.playAnim("show"), this.sheep.animations.play("anim");
                    }),
                    (Lvl4SleepBubble.prototype.hide = function () {
                        this.playAnim("hide");
                    }),
                    (Lvl4SleepBubble.prototype.updateAnimation = function () {
                        "show" === this.currAnim
                            ? 1 === this.counterAnim
                                ? this.startTween(this.part1, 15, { x: -3, y: -2, scX: 1.06, scY: 1.06 })
                                : 21 === this.counterAnim
                                ? this.startTween(this.part1, 9, { x: 0, y: 0, scX: 1, scY: 1 })
                                : 30 === this.counterAnim
                                ? this.startTween(this.part1, 15, { x: -3, y: -2, scX: 1.06, scY: 1.06 })
                                : 50 === this.counterAnim
                                ? this.startTween(this.part1, 9, { x: 0, y: 0, scX: 1, scY: 1 })
                                : 59 === this.counterAnim
                                ? this.startTween(this.part1, 15, { x: -3, y: -2, scX: 1.06, scY: 1.06 })
                                : 79 === this.counterAnim && (this.animComplete(), this.hide())
                            : "hide" === this.currAnim &&
                              (1 === this.counterAnim
                                  ? this.startTween(this.part1, 31, { x: 38, y: 34, scX: 0.19, scY: 0.19, alpha: 0 })
                                  : 33 === this.counterAnim && (this.animComplete(), (this.group.visible = !1), this.sheep.animations.stop("anim", !0)));
                    }),
                    (Lvl4SleepBubble.prototype.setParts = function (value) {
                        "show" === value
                            ? (this.setPart(this.part1, { x: 0, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }), this.setPart(this.part2, { x: 109, y: 73, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }))
                            : "hide" === value &&
                              (this.setPart(this.part1, { x: -3, y: -2, angle: 0, scX: 1.06, scY: 1.06, skX: 0, skY: 0, alpha: 1 }), this.setPart(this.part2, { x: 109, y: 73, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl4SleepBubble.prototype.free = function () {
                        (this.group = null), (this.part2 = null), (this.part1 = null), (this.sheep = null);
                    }),
                    Lvl4SleepBubble
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl4SleepBubble = Lvl4SleepBubble;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl4Trampoline = (function (_super) {
                function Lvl4Trampoline(game) {
                    var _this = _super.call(this) || this;
                    (_this.heroHere = !1),
                        (_this.trapClosed = !1),
                        (_this.trapClosedAtStart = !1),
                        (_this.contactRotateCount = 0),
                        (_this.contactChangeDirCount = 0),
                        (_this.group = game.make.group()),
                        (_this.group.x = 590),
                        (_this.group.y = 449),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.part6 = new Client.SASprite(game, 0, 0, "level4", "trampolinePart2 instance 10000")),
                        _this.part6.pivot.set(1, 1),
                        _this.group.addChild(_this.part6),
                        (_this.part5 = new Client.SASprite(game, 0, 0, "level4", "trampolinePart2 instance 10000")),
                        _this.part5.pivot.set(1, 1),
                        _this.group.addChild(_this.part5),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "level4", "trampolinePart2 instance 10000")),
                        _this.part4.pivot.set(1, 1),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level4", "trampolinePart2 instance 10000")),
                        _this.part3.pivot.set(1, 1),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level4", "trampolinePart1 instance 10000")),
                        _this.part2.pivot.set(1, 1),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level4", "trampolinePart3 instance 10000")),
                        _this.part1.pivot.set(1, 5),
                        _this.group.addChild(_this.part1),
                        _this.setParts("jump"),
                        (_this.body = new Phaser.Physics.Box2D.Body(game, null, 661, 502, 1)),
                        _this.body.setRectangle(136, 102),
                        _this.body.addRectangle(136, 20, 0, -75).SetSensor(!0),
                        _this.body.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, _this.contactHeroWheel, _this),
                        (_this.btn = Client.GameManager.instance.layerBackground.create(760, 452, "level4", "btnTrampoline instance 10000")),
                        _this.btn.animations.add("anim", Phaser.Animation.generateFrameNames("btnTrampoline instance 1", 2, 13, "", 4), 40, !1),
                        (_this.btn.inputEnabled = !0),
                        (_this.btn.input.useHandCursor = !0),
                        _this.btn.events.onInputOut.add(_this.out, _this),
                        _this.btn.events.onInputOver.add(_this.over, _this),
                        _this.btn.events.onInputDown.add(_this.down, _this);
                    var ground = new Phaser.Physics.Box2D.Body(game, null, 658, 78, 0);
                    return (
                        ground.setRectangle(100, 10),
                        (ground.sensor = !0),
                        ground.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, _this.contactChangeDir, _this),
                        (ground = new Phaser.Physics.Box2D.Body(game, null, 658, 275, 0)).setRectangle(100, 10),
                        (ground.sensor = !0),
                        ground.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, _this.contactRotate, _this),
                        (ground = null),
                        _this
                    );
                }
                return (
                    __extends(Lvl4Trampoline, _super),
                    (Lvl4Trampoline.prototype.out = function () {
                        !1 !== this.btn.inputEnabled && (this.btn.frameName = "btnTrampoline instance 10000");
                    }),
                    (Lvl4Trampoline.prototype.over = function () {
                        !1 !== this.btn.inputEnabled && (this.btn.frameName = "btnTrampoline instance 10001");
                    }),
                    (Lvl4Trampoline.prototype.down = function () {
                        (this.btn.inputEnabled = !1), this.btn.animations.play("anim"), this.playAnim("jump"), Client.GameManager.instance.hero.setAwake();
                    }),
                    (Lvl4Trampoline.prototype.onAnimComplete = function () {
                        (this.btn.inputEnabled = !0), (this.btn.input.useHandCursor = !0), this.out();
                    }),
                    (Lvl4Trampoline.prototype.update = function () {
                        _super.prototype.update.call(this), (this.body.y = 502 + this.part2.y);
                    }),
                    (Lvl4Trampoline.prototype.contactHeroWheel = function (b1, b2, f1, f2, begin) {
                        !0 === begin && !1 === this.heroHere ? (this.heroHere = !0) : !1 === begin && !0 === this.heroHere && (this.heroHere = !1);
                    }),
                    (Lvl4Trampoline.prototype.blowHero = function () {
                        !1 !== this.heroHere &&
                            (Client.SoundManager.playSFX("spring"),
                            (this.contactRotateCount = 0),
                            (Client.GameManager.instance.hero.bodyBase.angle = 0),
                            Client.GameManager.instance.hero.setPosition(this.body.x, Client.GameManager.instance.hero.bodyBase.y),
                            Client.GameManager.instance.hero.clearAllForces(),
                            !1 === this.trapClosed
                                ? Client.GameManager.instance.hero.bodyBase.data.ApplyLinearImpulse(new box2d.b2Vec2(0, 35), Client.GameManager.instance.hero.bodyBase.data.GetPosition())
                                : ((this.trapClosedAtStart = !0), Client.GameManager.instance.hero.bodyBase.data.ApplyLinearImpulse(new box2d.b2Vec2(0, 40), Client.GameManager.instance.hero.bodyBase.data.GetPosition())));
                    }),
                    (Lvl4Trampoline.prototype.contactRotate = function () {
                        0 === this.contactRotateCount && ((this.contactRotateCount = 1), (Client.GameManager.instance.hero.bodyBase.angularVelocity = -8.3));
                    }),
                    (Lvl4Trampoline.prototype.contactChangeDir = function () {
                        0 === this.contactChangeDirCount &&
                            !0 === this.trapClosed &&
                            ((this.contactChangeDirCount = 1),
                            Client.GameManager.instance.hero.changeDirection(),
                            Client.SoundManager.playSFX("s_lvl5_wheelyOnTraps"),
                            !1 === this.trapClosedAtStart &&
                                ((Client.GameManager.instance.hero.bodyBase.angularVelocity = 0),
                                (Client.GameManager.instance.hero.bodyWheelBack.angularVelocity = 0),
                                (Client.GameManager.instance.hero.bodyWheelFront.angularVelocity = 0),
                                Client.SimpleTweenManager.set(Client.GameManager.instance.hero.bodyBase, 60, { angle: 0 }, !0)));
                    }),
                    (Lvl4Trampoline.prototype.updateAnimation = function () {
                        "jump" === this.currAnim &&
                            (1 === this.counterAnim
                                ? (this.startTween(this.part2, 34, { y: 41 }),
                                  this.startTween(this.part3, 34, { x: 111, y: 73, skX: -3, skY: 177 }),
                                  this.startTween(this.part4, 34, { x: 39, y: 71, skX: 2, skY: 2 }),
                                  this.startTween(this.part5, 34, { x: 111, y: 64, skX: -6, skY: 174 }),
                                  this.startTween(this.part6, 34, { x: 33, y: 63, skX: 1, skY: 1 }))
                                : 35 === this.counterAnim
                                ? (this.blowHero(),
                                  this.startTween(this.part2, 5, { x: 12, y: -51, scX: 0.84, scY: 1.35 }),
                                  this.startTween(this.part3, 5, { x: 78, y: 28, skX: -57, skY: 123 }),
                                  this.startTween(this.part4, 5, { x: 61, y: 29, skX: 53, skY: 53 }),
                                  this.startTween(this.part5, 5, { x: 92, y: -22, skX: -55, skY: 125 }),
                                  this.startTween(this.part6, 5, { x: 47, y: -23, skX: 55, skY: 55 }))
                                : 40 === this.counterAnim
                                ? (this.startTween(this.part2, 7, { x: 0, y: 0, scX: 1, scY: 1 }),
                                  this.startTween(this.part3, 7, { x: 101, y: 49, skX: -27, skY: 153 }),
                                  this.startTween(this.part4, 7, { x: 40, y: 49, skX: 27, skY: 27 }),
                                  this.startTween(this.part5, 7, { x: 101, y: 19, skX: -27, skY: 153 }),
                                  this.startTween(this.part6, 7, { x: 40, y: 19, skX: 27, skY: 27 }))
                                : 47 === this.counterAnim
                                ? (this.startTween(this.part2, 4, { x: 7, y: -12, scX: 0.9, scY: 1.18 }),
                                  this.startTween(this.part3, 4, { x: 97, y: 43, skX: -34, skY: 146 }),
                                  this.startTween(this.part4, 4, { x: 46, y: 41, skX: 36, skY: 36 }),
                                  this.startTween(this.part5, 4, { x: 106, y: 12 }),
                                  this.startTween(this.part6, 4, { x: 39, y: 12, skX: 29, skY: 29 }))
                                : 51 === this.counterAnim
                                ? (this.startTween(this.part2, 3, { x: 0, y: 0, scX: 1, scY: 1 }),
                                  this.startTween(this.part3, 4, { x: 101, y: 49, skX: -27, skY: 153 }),
                                  this.startTween(this.part4, 4, { x: 40, y: 49, skX: 27, skY: 27 }),
                                  this.startTween(this.part5, 4, { x: 101, y: 19 }),
                                  this.startTween(this.part6, 4, { x: 40, y: 19, skX: 27, skY: 27 }))
                                : 54 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl4Trampoline.prototype.setParts = function (value) {
                        "jump" === value &&
                            (this.setPart(this.part1, { x: 21, y: 81, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part2, { x: 0, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part3, { x: 101, y: 49, angle: 0, scX: 1, scY: 1, skX: -27, skY: 153, alpha: 1 }),
                            this.setPart(this.part4, { x: 40, y: 49, angle: 0, scX: 1, scY: 1, skX: 27, skY: 27, alpha: 1 }),
                            this.setPart(this.part5, { x: 101, y: 19, angle: 0, scX: 1, scY: 1, skX: -27, skY: 153, alpha: 1 }),
                            this.setPart(this.part6, { x: 40, y: 19, angle: 0, scX: 1, scY: 1, skX: 27, skY: 27, alpha: 1 }));
                    }),
                    (Lvl4Trampoline.prototype.free = function () {
                        (this.group = null), (this.part6 = null), (this.part5 = null), (this.part4 = null), (this.part3 = null), (this.part2 = null), (this.part1 = null), (this.btn = null), (this.body = null);
                    }),
                    Lvl4Trampoline
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl4Trampoline = Lvl4Trampoline;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl4Trap = (function (_super) {
                function Lvl4Trap(game) {
                    var _this = _super.call(this) || this;
                    (_this.btn = Client.GameManager.instance.layerBackground.create(502, 225, "level4", "btnTrap instance 10000")),
                        (_this.btn.inputEnabled = !0),
                        (_this.btn.input.useHandCursor = !0),
                        _this.btn.events.onInputOut.add(_this.btnOut, _this),
                        _this.btn.events.onInputOver.add(_this.btnOver, _this),
                        _this.btn.events.onInputDown.addOnce(_this.btnDown, _this),
                        (_this.trapLeft = Client.GameManager.instance.layerBackground.create(568, 192, "level4", "trap instance 10000")),
                        game.physics.box2d.enable(_this.trapLeft),
                        _this.trapLeft.body.setRectangle(12, 92, -2, -12),
                        _this.trapLeft.body.setCollisionMask(~Client.FilterGroups.DEFAULT),
                        (_this.trapRight = Client.GameManager.instance.layerBackground.create(755, 192, "level4", "trap instance 10000")),
                        game.physics.box2d.enable(_this.trapRight),
                        _this.trapRight.body.setRectangle(12, 92, 2, -12),
                        (_this.trapRight.scale.x = -1),
                        _this.trapRight.body.setCollisionMask(~Client.FilterGroups.DEFAULT);
                    var ground = new Phaser.Physics.Box2D.Body(game, null, 568, 227, 0);
                    return (
                        ground.setRectangle(10, 10),
                        (ground.sensor = !0),
                        (_this.jointLeft = game.physics.box2d.revoluteJoint(_this.trapLeft.body, ground, 0, 35, 0, 0, 0, 0, !1, -88.3, 0, !0)),
                        (ground = new Phaser.Physics.Box2D.Body(game, null, 755, 227, 0)).setRectangle(10, 10),
                        (ground.sensor = !0),
                        (_this.jointRight = game.physics.box2d.revoluteJoint(_this.trapRight.body, ground, 0, 35, 0, 0, 0, 0, !1, 0, 88.3, !0)),
                        (ground = null),
                        _this
                    );
                }
                return (
                    __extends(Lvl4Trap, _super),
                    (Lvl4Trap.prototype.btnOut = function () {
                        !1 !== this.btn.inputEnabled && (this.btn.frameName = "btnTrap instance 10000");
                    }),
                    (Lvl4Trap.prototype.btnOver = function () {
                        !1 !== this.btn.inputEnabled && (this.btn.frameName = "btnTrap instance 10001");
                    }),
                    (Lvl4Trap.prototype.btnDown = function () {
                        (this.btn.inputEnabled = !1),
                            (this.btn.frameName = "btnTrap instance 10002"),
                            (this.trapLeft.body.velocity.x = 400),
                            (this.trapRight.body.velocity.x = -400),
                            Client.GameManager.instance.level.customAction(1),
                            this.jointLeft.SetMaxMotorTorque(4),
                            this.jointRight.SetMaxMotorTorque(4),
                            this.jointLeft.SetMotorSpeed(-10),
                            this.jointRight.SetMotorSpeed(10),
                            this.jointLeft.EnableMotor(!0),
                            this.jointRight.EnableMotor(!0),
                            Client.SoundManager.playSFX("s_lvl5_closeTraps");
                    }),
                    (Lvl4Trap.prototype.free = function () {
                        (this.btn = null), (this.trapLeft = null), (this.trapRight = null), (this.jointLeft = null), (this.jointRight = null);
                    }),
                    Lvl4Trap
                );
            })(Client.BasicElement);
            Client.Lvl4Trap = Lvl4Trap;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl5CarBandit = (function (_super) {
                function Lvl5CarBandit(game) {
                    var _this = _super.call(this) || this;
                    (_this.haveKey = !0),
                        (_this.counterDream = 0),
                        (_this.speedMove = 5),
                        (_this.acceleration = 0),
                        (_this.speedMoveAngry = 30),
                        (_this.moveDir = 0),
                        (_this.state = "stand"),
                        (_this.counterWaitLamp = 0),
                        (_this.contactHeroCount = 0),
                        (_this.canLampOn = !1),
                        (_this.lamps = new Array()),
                        (_this.body = new Phaser.Physics.Box2D.Body(game, null, 560, 191, 2)),
                        _this.body.setRectangle(128, 50),
                        _this.body.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, _this.contactHero, _this),
                        (_this.body.fixedRotation = !0);
                    var ground = new Phaser.Physics.Box2D.Body(game, null, 636, 175, 0);
                    return (
                        ground.setRectangle(100, 20),
                        (ground.angle = 90),
                        (ground.sensor = !0),
                        ground.setBodyContactCallback(_this.body, _this.lockOpen, _this),
                        (ground = null),
                        (_this.wheel1 = Client.GameManager.instance.layerBackground.create(524, 215, "level5", "bandit_wheel_mc instance 10000")),
                        game.physics.box2d.enable(_this.wheel1),
                        _this.wheel1.body.setCircle(15),
                        (_this.wheel1.body.friction = 1),
                        (_this.wheel2 = Client.GameManager.instance.layerBackground.create(588, 215, "level5", "bandit_wheel_mc instance 10000")),
                        game.physics.box2d.enable(_this.wheel2),
                        _this.wheel2.body.setCircle(15),
                        (_this.wheel2.body.friction = 1),
                        game.physics.box2d.revoluteJoint(_this.body, _this.wheel1, -36, 24),
                        (_this.joint = game.physics.box2d.revoluteJoint(_this.body, _this.wheel2, 28, 24, 0, 0, 0, 4, !1)),
                        (_this.group = game.make.group()),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.part8 = new Client.SASprite(game, 0, 0, "level5", "Bandit_body instance 10000")),
                        _this.part8.pivot.set(1, 1),
                        _this.group.addChild(_this.part8),
                        (_this.part7 = new Client.SASprite(game, 0, 0, "level5", "Bandit_eyes_anim instance 10000")),
                        _this.part7.animations.add("idle1", Phaser.Animation.generateFrameNames("Bandit_eyes_anim instance 1", 0, 24, "", 4), 30, !1).onComplete.add(function () {
                            this.part7.animations.play("idle2");
                        }, _this),
                        _this.part7.animations.add("dream", Phaser.Animation.generateFrameNames("Bandit_eyes_anim instance 1", 25, 45, "", 4), 30, !1),
                        _this.part7.animations.add("idle2", Phaser.Animation.generateFrameNames("Bandit_eyes_anim instance 1", 46, 77, "", 4), 30, !1).onComplete.add(function () {
                            this.part7.animations.play("idle3");
                        }, _this),
                        _this.part7.animations.add("idle3", Phaser.Animation.generateFrameNames("Bandit_eyes_anim instance 1", 78, 105, "", 4), 30, !1).onComplete.add(function () {
                            this.part7.animations.play("idle1");
                        }, _this),
                        _this.group.addChild(_this.part7),
                        (_this.part6 = new Client.SASprite(game, 0, 0, "level5", "Bandit_brows instance 10000")),
                        _this.part6.pivot.set(1, 1),
                        _this.group.addChild(_this.part6),
                        (_this.part5 = new Client.SASprite(game, 0, 0, "level5", "Bandit_hat instance 10000")),
                        _this.part5.pivot.set(1, 1),
                        _this.group.addChild(_this.part5),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "level5", "Key_anima instance 10000")),
                        _this.part4.pivot.set(3, -8),
                        _this.part4.animations.add("anim", Phaser.Animation.generateFrameNames("Key_anima instance 1", 0, 119, "", 4), 30, !0),
                        _this.part4.animations.play("anim"),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level5", "Thoughts instance 10000")),
                        _this.part3.pivot.set(40, 50),
                        _this.part3.animations.add("anim", Phaser.Animation.generateFrameNames("Thoughts instance 1", 0, 72, "", 4), 30, !1),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level5", "Thoughts_dream instance 10000")),
                        _this.part2.pivot.set(40, 50),
                        _this.part2.animations.add("anim", Phaser.Animation.generateFrameNames("Thoughts_dream instance 1", 0, 72, "", 4), 30, !1),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level5", "dust instance 10000")),
                        _this.part1.pivot.set(-48, -72),
                        _this.part1.animations.add("anim", Phaser.Animation.generateFrameNames("dust instance 1", 0, 11, "", 4), 30, !1),
                        _this.group.addChild(_this.part1),
                        _this.playIdle(),
                        _this
                    );
                }
                return (
                    __extends(Lvl5CarBandit, _super),
                    (Lvl5CarBandit.prototype.update = function () {
                        if ((_super.prototype.update.call(this), (this.group.x = this.body.x - 73), (this.group.y = this.body.y - 61), "stand" === this.state))
                            "idle1" === this.currAnim && ((this.counterDream += 1), 300 <= this.counterDream && this.playDream());
                        else if ("move" === this.state)
                            (this.acceleration += 0.2),
                                5 < this.acceleration && (this.acceleration = 5),
                                1 === this.moveDir
                                    ? (this.joint.SetMotorSpeed(this.speedMove + this.acceleration), this.body.x >= this.lamps[0] - 50 && (this.stopMove(), (this.state = "waitLamp"), (this.counterWaitLamp = 0)))
                                    : -1 === this.moveDir && (this.joint.SetMotorSpeed(-(this.speedMove + this.acceleration)), this.body.x <= this.lamps[0] + 70 && (this.stopMove(), (this.state = "waitLamp"), (this.counterWaitLamp = 0)));
                        else if ("waitLamp" === this.state) {
                            if (((this.counterWaitLamp += 1), 40 === this.counterWaitLamp))
                                if (!1 === this.canLampOn) (this.state = "stand"), (this.lamps = []);
                                else {
                                    var x = this.lamps.shift();
                                    this.checkNextLamp(),
                                        118 === x ? Client.GameManager.instance.level.customAction(14) : 564 === x ? Client.GameManager.instance.level.customAction(15) : 748 === x && Client.GameManager.instance.level.customAction(16);
                                }
                        } else
                            "angry" === this.state
                                ? (this.joint.SetMotorSpeed(-this.speedMoveAngry), (this.body.velocity.x = -300))
                                : "anryBumpHero" === this.state &&
                                  ((this.state = "win"),
                                  this.stopMove(),
                                  Client.SoundManager.playSFX("s_lvl4_hitWithCar"),
                                  Client.GameManager.instance.hero.setEnableMotor(!1, !1),
                                  (Client.GameManager.instance.hero.currState = Client.HeroState.bumpStars),
                                  (Client.GameManager.instance.hero.bodyBase.velocity.x = -300),
                                  Client.LevelBuilder.instance.levelFailed(70));
                    }),
                    (Lvl5CarBandit.prototype.contactHero = function () {
                        0 === this.contactHeroCount && this.body.x > Client.GameManager.instance.hero.bodyBase.x && ((this.contactHeroCount = 1), (this.state = "anryBumpHero"));
                    }),
                    (Lvl5CarBandit.prototype.canLamps = function (value) {
                        this.canLampOn = value;
                    }),
                    (Lvl5CarBandit.prototype.checkHero = function () {
                        this.body.x > Client.GameManager.instance.hero.bodyBase.x && (this.playAngry(), this.joint.EnableMotor(!0), (this.wheel2.body.friction = 10));
                    }),
                    (Lvl5CarBandit.prototype.stopMove = function () {
                        (this.body.velocity.x = 0),
                            (this.wheel1.body.velocity.x = 0),
                            (this.wheel1.body.angularVelocity = 0),
                            (this.wheel2.body.velocity.x = 0),
                            (this.wheel2.body.angularVelocity = 0),
                            this.joint.SetMotorSpeed(0),
                            this.joint.EnableMotor(!1);
                    }),
                    (Lvl5CarBandit.prototype.checkNextLamp = function () {
                        0 !== this.lamps.length ? (this.body.x < this.lamps[0] ? (this.moveDir = 1) : (this.moveDir = -1), (this.state = "move"), (this.acceleration = 0), this.joint.EnableMotor(!0)) : (this.state = "stand");
                    }),
                    (Lvl5CarBandit.prototype.playIdle = function () {
                        this.playAnim("idle1", -1), this.part7.animations.play("idle1"), (this.counterDream = 0);
                    }),
                    (Lvl5CarBandit.prototype.playDream = function () {
                        this.playAnim("dream"), this.part7.animations.play("dream"), this.part2.animations.stop("anim", !0), this.part2.animations.play("anim");
                    }),
                    (Lvl5CarBandit.prototype.playAmazing = function (x) {
                        this.lamps.push(x), this.playAnim("amazing"), this.part3.animations.stop("anim", !0), this.part3.animations.play("anim"), "stand" === this.state && this.checkNextLamp();
                    }),
                    (Lvl5CarBandit.prototype.lockOpen = function () {
                        !0 === this.haveKey && (this.part4.destroy(), (this.haveKey = !1), Client.GameManager.instance.level.customAction(7), (this.state = "waitDoor"), this.stopMove());
                    }),
                    (Lvl5CarBandit.prototype.lockOpened = function () {
                        (this.state = "move"), (this.acceleration = 0), this.joint.EnableMotor(!0);
                    }),
                    (Lvl5CarBandit.prototype.playAngry = function () {
                        this.playAnim("angry"), (this.state = "angry0");
                    }),
                    (Lvl5CarBandit.prototype.onAnimComplete = function () {
                        ("dream" !== this.currAnim && "amazing" !== this.currAnim && "angry" !== this.currAnim) || this.playIdle();
                    }),
                    (Lvl5CarBandit.prototype.updateAnimation = function () {
                        "angry" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (this.startTween(this.part4, 14, { x: 84, y: 36, skX: 8, skY: 8 }),
                                  this.startTween(this.part5, 14, { x: 32, y: 11, skX: -9, skY: -9 }),
                                  this.startTween(this.part6, 14, { x: 29, y: 25, skX: -3, scX: 1.01, scY: 0.93 }),
                                  this.startTween(this.part7, 14, { x: 28, y: 29 }),
                                  this.startTween(this.part8, 14, { x: 12, y: 23, skX: 10, scY: 0.9 }))
                                : 15 === this.counterAnim
                                ? (this.startTween(this.part4, 4, { x: 55, y: 62, skX: -102, skY: -102 }),
                                  this.startTween(this.part5, 4, { x: 2, y: 2 }),
                                  this.startTween(this.part6, 4, { x: -2, y: 18 }),
                                  this.startTween(this.part7, 4, { x: 3, y: 22 }),
                                  this.startTween(this.part8, 4, { x: -30, y: 12, skX: -15, scY: 1.06 }))
                                : 17 === this.counterAnim
                                ? ((this.state = "angry"), (this.part1.visible = !0), this.part1.animations.stop("anim", !0), this.part1.animations.play("anim"))
                                : 19 === this.counterAnim
                                ? (this.startTween(this.part4, 3, { x: 49, y: 52, skX: -66, skY: -66 }),
                                  this.startTween(this.part5, 3, { x: 6, y: 1, skX: 1, skY: 1 }),
                                  this.startTween(this.part6, 3, { y: 20 }),
                                  this.startTween(this.part7, 3, { y: 25 }),
                                  this.startTween(this.part8, 3, { y: 15 }))
                                : 22 === this.counterAnim
                                ? (this.startTween(this.part4, 3, { x: 55, y: 62, skX: -102, skY: -102 }),
                                  this.startTween(this.part5, 3, { x: 2, y: 2, skX: -9, skY: -9 }),
                                  this.startTween(this.part6, 3, { y: 18 }),
                                  this.startTween(this.part7, 3, { y: 22 }),
                                  this.startTween(this.part8, 3, { y: 12 }))
                                : 25 === this.counterAnim
                                ? (this.startTween(this.part4, 3, { x: 49, y: 52, skX: -66, skY: -66 }),
                                  this.startTween(this.part5, 3, { x: 6, y: 1, skX: 1, skY: 1 }),
                                  this.startTween(this.part6, 3, { y: 20 }),
                                  this.startTween(this.part7, 3, { y: 25 }),
                                  this.startTween(this.part8, 3, { y: 15 }))
                                : 28 === this.counterAnim
                                ? (this.startTween(this.part4, 3, { x: 55, y: 62, skX: -102, skY: -102 }),
                                  this.startTween(this.part5, 3, { x: 2, y: 2, skX: -9, skY: -9 }),
                                  this.startTween(this.part6, 3, { y: 18 }),
                                  this.startTween(this.part7, 3, { y: 22 }),
                                  this.startTween(this.part8, 3, { y: 12 }))
                                : 29 === this.counterAnim
                                ? (this.part1.visible = !1)
                                : 31 === this.counterAnim
                                ? (this.startTween(this.part4, 3, { x: 49, y: 52, skX: -66, skY: -66 }),
                                  this.startTween(this.part5, 3, { x: 6, y: 1, skX: 1, skY: 1 }),
                                  this.startTween(this.part6, 3, { y: 20 }),
                                  this.startTween(this.part7, 3, { y: 25 }),
                                  this.startTween(this.part8, 3, { y: 15 }))
                                : 34 === this.counterAnim
                                ? (this.startTween(this.part4, 3, { x: 55, y: 62, skX: -102, skY: -102 }),
                                  this.startTween(this.part5, 3, { x: 2, y: 2, skX: -9, skY: -9 }),
                                  this.startTween(this.part6, 3, { y: 18 }),
                                  this.startTween(this.part7, 3, { y: 22 }),
                                  this.startTween(this.part8, 3, { y: 12 }))
                                : 37 === this.counterAnim
                                ? (this.startTween(this.part4, 3, { x: 49, y: 52, skX: -66, skY: -66 }),
                                  this.startTween(this.part5, 3, { x: 6, y: 1, skX: 1, skY: 1 }),
                                  this.startTween(this.part6, 3, { y: 20 }),
                                  this.startTween(this.part7, 3, { y: 25 }),
                                  this.startTween(this.part8, 3, { y: 15 }))
                                : 40 === this.counterAnim
                                ? (this.startTween(this.part4, 25, { x: 79, y: 31, skX: 0, skY: 0 }),
                                  this.startTween(this.part5, 25, { x: 31, y: 0 }),
                                  this.startTween(this.part6, 25, { x: 21, y: 18, skX: -8, scX: 1, scY: 1 }),
                                  this.startTween(this.part7, 25, { x: 22, y: 24 }),
                                  this.startTween(this.part8, 25, { x: 0, y: 14, skX: 0, scY: 1 }))
                                : 66 === this.counterAnim && this.animComplete()
                            : "amazing" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (this.startTween(this.part4, 9, { x: 69, y: 37, skX: -41, skY: -41 }),
                                  this.startTween(this.part5, 9, { x: 35, y: -12, skX: 11, skY: 11 }),
                                  this.startTween(this.part6, 9, { x: 19, y: 2 }),
                                  this.startTween(this.part7, 9, { x: 20, y: 17 }),
                                  this.startTween(this.part8, 9, { x: -8, y: 4, skX: -5, scY: 1.14 }))
                                : 10 === this.counterAnim
                                ? this.startTween(this.part4, 8, { x: 72, y: 30, skX: -17, skY: -17 })
                                : 18 === this.counterAnim
                                ? this.startTween(this.part4, 14, { x: 77, y: 25, skX: 5, skY: 5 })
                                : 32 === this.counterAnim
                                ? this.startTween(this.part4, 28, { x: 71, y: 31, skX: -21, skY: -21 })
                                : 46 === this.counterAnim
                                ? (this.startTween(this.part5, 29, { x: 31, y: 0, skX: 1, skY: 1 }),
                                  this.startTween(this.part6, 29, { x: 21, y: 18 }),
                                  this.startTween(this.part7, 29, { x: 22, y: 24 }),
                                  this.startTween(this.part8, 29, { x: 0, y: 14, skX: 0, scY: 1 }))
                                : 60 === this.counterAnim
                                ? this.startTween(this.part4, 15, { x: 79, skX: 0, skY: 0 })
                                : 65 === this.counterAnim
                                ? (this.part3.visible = !1)
                                : 76 === this.counterAnim && this.animComplete()
                            : "idle1" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (this.startTween(this.part4, 18, { x: 76, y: 34, skX: -12, skY: -12 }),
                                  this.startTween(this.part5, 23, { x: 29, y: 2, skX: -4, skY: -4 }),
                                  this.startTween(this.part6, 18, { y: 20 }),
                                  this.startTween(this.part7, 18, { y: 26 }),
                                  this.startTween(this.part8, 18, { y: 16 }))
                                : 19 === this.counterAnim
                                ? (this.startTween(this.part4, 18, { x: 79, y: 31, skX: 0, skY: 0 }), this.startTween(this.part6, 17, { y: 18 }), this.startTween(this.part7, 17, { y: 24 }), this.startTween(this.part8, 17, { y: 14 }))
                                : 24 === this.counterAnim
                                ? this.startTween(this.part5, 12, { x: 31, y: 0, skX: 1, skY: 1 })
                                : 37 === this.counterAnim && this.animComplete()
                            : "dream" === this.currAnim &&
                              (1 === this.counterAnim
                                  ? (this.startTween(this.part4, 10, { x: 82, y: 21, skX: 12, skY: 12 }),
                                    this.startTween(this.part5, 10, { x: 33, y: -8 }),
                                    this.startTween(this.part6, 10, { x: 25, y: 1 }),
                                    this.startTween(this.part7, 10, { x: 26, y: 13, skX: 5, skY: 5 }),
                                    this.startTween(this.part8, 10, { x: 4, y: 2, scX: 0.95, scY: 1.15 }))
                                  : 11 === this.counterAnim
                                  ? this.startTween(this.part4, 22, { x: 75, y: 26, skX: -15, skY: -15 })
                                  : 33 === this.counterAnim
                                  ? (this.startTween(this.part4, 5, { x: 73, y: 29, skX: -27, skY: -27 }),
                                    this.startTween(this.part5, 5, { y: -14, scY: 1.05 }),
                                    this.startTween(this.part6, 5, { y: -4, skY: -9, scY: 1.05 }),
                                    this.startTween(this.part7, 5, { y: 8, scY: 1.05 }),
                                    this.startTween(this.part8, 5, { y: -3, scY: 1.21 }))
                                  : 38 === this.counterAnim
                                  ? (this.startTween(this.part4, 20, { x: 79, y: 26, skX: 0, skY: 0 }),
                                    this.startTween(this.part5, 56, { x: 31, y: 0, scY: 1 }),
                                    this.startTween(this.part6, 56, { x: 21, y: 18, skY: -8, scY: 1 }),
                                    this.startTween(this.part7, 56, { x: 22, y: 24, skX: 0, skY: 0, scY: 1 }),
                                    this.startTween(this.part8, 56, { x: 0, y: 14, scX: 1, scY: 1 }))
                                  : 58 === this.counterAnim
                                  ? this.startTween(this.part4, 20, { x: 76, y: 32, skX: -16, skY: -16 })
                                  : 74 === this.counterAnim
                                  ? (this.part2.visible = !1)
                                  : 78 === this.counterAnim
                                  ? this.startTween(this.part4, 16, { x: 79, y: 31, skX: 0, skY: 0 })
                                  : 94 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl5CarBandit.prototype.setParts = function (value) {
                        "angry" === value
                            ? ((this.part1.visible = !1),
                              (this.part2.visible = !1),
                              (this.part3.visible = !1),
                              this.setPart(this.part4, { x: 79, y: 31, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part5, { x: 31, y: 0, angle: 0, scX: 1, scY: 1, skX: 1, skY: 1, alpha: 1 }),
                              this.setPart(this.part6, { x: 21, y: 18, angle: 0, scX: 1, scY: 1, skX: -8, skY: -8, alpha: 1 }),
                              this.setPart(this.part7, { x: 24, y: 24, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part8, { x: 0, y: 14, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }))
                            : "amazing" === value
                            ? ((this.part1.visible = !1),
                              (this.part2.visible = !1),
                              (this.part3.visible = !0),
                              this.setPart(this.part3, { x: 11, y: 17, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part4, { x: 79, y: 31, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part5, { x: 31, y: 0, angle: 0, scX: 1, scY: 1, skX: 1, skY: 1, alpha: 1 }),
                              this.setPart(this.part6, { x: 21, y: 18, angle: 0, scX: 1, scY: 1, skX: -8, skY: -8, alpha: 1 }),
                              this.setPart(this.part7, { x: 22, y: 24, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part8, { x: 0, y: 14, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }))
                            : "idle1" === value
                            ? ((this.part1.visible = !1),
                              (this.part2.visible = !1),
                              (this.part3.visible = !1),
                              this.setPart(this.part4, { x: 79, y: 31, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part5, { x: 31, y: 0, angle: 0, scX: 1, scY: 1, skX: 1, skY: 1, alpha: 1 }),
                              this.setPart(this.part6, { x: 21, y: 18, angle: 0, scX: 1, scY: 1, skX: -8, skY: -8, alpha: 1 }),
                              this.setPart(this.part7, { x: 22, y: 24, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part8, { x: 0, y: 14, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }))
                            : "dream" === value &&
                              ((this.part1.visible = !1),
                              (this.part2.visible = !0),
                              this.setPart(this.part2, { x: 11, y: 17, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              (this.part3.visible = !1),
                              this.setPart(this.part4, { x: 79, y: 31, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part5, { x: 31, y: 0, angle: 0, scX: 1, scY: 1, skX: 1, skY: 1, alpha: 1 }),
                              this.setPart(this.part6, { x: 21, y: 18, angle: 0, scX: 1, scY: 1, skX: -8, skY: -8, alpha: 1 }),
                              this.setPart(this.part7, { x: 22, y: 24, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part8, { x: 0, y: 14, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl5CarBandit.prototype.free = function () {
                        (this.group = null),
                            (this.part8 = null),
                            (this.part7 = null),
                            (this.part6 = null),
                            (this.part5 = null),
                            (this.part4 = null),
                            (this.part3 = null),
                            (this.part2 = null),
                            (this.part1 = null),
                            (this.body = null),
                            (this.wheel1 = null),
                            (this.wheel2 = null),
                            (this.lamps = []),
                            (this.lamps = null),
                            (this.joint = null);
                    }),
                    Lvl5CarBandit
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl5CarBandit = Lvl5CarBandit;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl5ChangeVoltage = (function (_super) {
                function Lvl5ChangeVoltage(game) {
                    var _this = _super.call(this, game, 452.5, 466.5, "level5", "btnChangeVoltage instance 10000") || this;
                    return (
                        (_this.pressed = !1),
                        _this.anchor.setTo(0.5),
                        (_this.inputEnabled = !0),
                        (_this.input.useHandCursor = !0),
                        _this.events.onInputOut.add(_this.out, _this),
                        _this.events.onInputOver.add(_this.over, _this),
                        _this.events.onInputDown.add(_this.down, _this),
                        _this.events.onInputUp.add(_this.up, _this),
                        _this
                    );
                }
                return (
                    __extends(Lvl5ChangeVoltage, _super),
                    (Lvl5ChangeVoltage.prototype.out = function () {
                        !0 !== this.pressed && (this.frameName = "btnChangeVoltage instance 10000");
                    }),
                    (Lvl5ChangeVoltage.prototype.over = function () {
                        !0 !== this.pressed && (this.frameName = "btnChangeVoltage instance 10001");
                    }),
                    (Lvl5ChangeVoltage.prototype.down = function () {
                        (this.frameName = "btnChangeVoltage instance 10002"), (this.pressed = !0), (this.angle += 90), Client.GameManager.instance.level.customAction(2), Client.SoundManager.playSFX("s_lvl4_rotateSwitch");
                    }),
                    (Lvl5ChangeVoltage.prototype.up = function (sprite, pointer, isOver) {
                        (this.pressed = !1), this.out();
                    }),
                    Lvl5ChangeVoltage
                );
            })(Phaser.Sprite);
            Client.Lvl5ChangeVoltage = Lvl5ChangeVoltage;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl5Door = (function (_super) {
                function Lvl5Door(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.counter = 0),
                        (_this.activeLockAnim = !0),
                        (_this.door = Client.GameManager.instance.layerBackground.create(635, -265, "level5", "lockedDoor instance 10000")),
                        _this.door.animations.add("anim", Phaser.Animation.generateFrameNames("lockedDoor instance 1", 0, 17, "", 4), 30, !1).onComplete.addOnce(_this.delBody, _this),
                        _this.door.animations.add("anim2", Phaser.Animation.generateFrameNames("lockedDoor instance 1", 18, 49, "", 4), 30, !1).onComplete.addOnce(function () {
                            Client.GameManager.instance.level.customAction(8);
                        }, _this),
                        (_this.lock = Client.GameManager.instance.layerUpper.create(650, 155, "level5", "lock instance 10000")),
                        _this.lock.animations.add("anim", Phaser.Animation.generateFrameNames("lock instance 1", 0, 109, "", 4), 30, !1).onComplete.addOnce(_this.lockComplete, _this),
                        _this.lock.anchor.setTo(0.77, 0.17),
                        (_this.lock.angle = -6),
                        (_this.lockShine = game.make.sprite(-27, 0, "level5")),
                        _this.lockShine.animations.add("anim", Phaser.Animation.generateFrameNames("lockShine instance 1", 0, 72, "", 4), 30, !0),
                        _this.lockShine.animations.play("anim"),
                        _this.lock.addChild(_this.lockShine),
                        (_this.bodyDoor = new Phaser.Physics.Box2D.Body(game, null, 654, 176, 0)),
                        _this.bodyDoor.setRectangle(37, 100),
                        _this
                    );
                }
                return (
                    __extends(Lvl5Door, _super),
                    (Lvl5Door.prototype.lockComplete = function () {
                        this.door.animations.play("anim");
                    }),
                    (Lvl5Door.prototype.delBody = function () {
                        Client.SoundManager.playSFX("s_lvl4_doorUp"), this.door.animations.play("anim2"), this.bodyDoor.destroy();
                    }),
                    (Lvl5Door.prototype.open = function () {
                        Client.SoundManager.playSFX("s_lvl4_lockOpen"), this.lock.animations.play("anim"), this.lockShine.destroy(), (this.activeLockAnim = !1), (this.lock.angle = -6), Client.SimpleTweenManager.stop(this.lock);
                    }),
                    (Lvl5Door.prototype.update = function () {
                        !1 !== this.activeLockAnim &&
                            ((this.counter += 1),
                            1 === this.counter ? Client.SimpleTweenManager.set(this.lock, 70, { angle: -23 }) : 71 === this.counter ? Client.SimpleTweenManager.set(this.lock, 61, { angle: -6 }) : 132 === this.counter && (this.counter = 0));
                    }),
                    (Lvl5Door.prototype.free = function () {
                        (this.door = null), (this.lock = null), (this.bodyDoor = null), (this.lockShine = null);
                    }),
                    Lvl5Door
                );
            })(Client.BasicElement);
            Client.Lvl5Door = Lvl5Door;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl5Engine = (function (_super) {
                function Lvl5Engine(game) {
                    var _this = _super.call(this, game, 575, 469, "level5", "engineBg instance 10000") || this;
                    return (
                        (_this.activeGears = !1),
                        (_this.leverPressed = !1),
                        (_this.leverCount = 0),
                        (_this.haveOil = !1),
                        (_this.gear1 = game.make.image(14, 50, "level5", "engineGear instance 10000")),
                        _this.gear1.anchor.setTo(0.5, 0.52),
                        _this.addChild(_this.gear1),
                        (_this.gear2 = game.make.image(27, 69, "level5", "engineGear instance 10000")),
                        _this.gear2.anchor.setTo(0.5, 0.52),
                        _this.addChild(_this.gear2),
                        (_this.lever = game.make.image(73, 34, "level5", "engineLever instance 10000")),
                        _this.lever.anchor.setTo(0.2, 0.5),
                        (_this.lever.angle = -22),
                        _this.addChild(_this.lever),
                        (_this.lever.inputEnabled = !0),
                        (_this.lever.input.useHandCursor = !0),
                        _this.lever.events.onInputOut.add(_this.leverOut, _this),
                        _this.lever.events.onInputOver.add(_this.leverOver, _this),
                        _this.lever.events.onInputDown.add(_this.leverDown, _this),
                        (_this.front = game.make.image(-43, 9, "level5", "engineFront instance 10000")),
                        _this.front.animations.add("anim", Phaser.Animation.generateFrameNames("engineFront instance 1", 0, 1, "", 4), 30, !0),
                        _this.addChild(_this.front),
                        (_this.grm = game.make.image(-38, 15, "level5", "engineGRM instance 10000")),
                        _this.grm.animations.add("anim", Phaser.Animation.generateFrameNames("engineGRM instance 1", 0, 13, "", 4), 30, !0),
                        _this.addChild(_this.grm),
                        (_this.krut1 = game.make.image(-2, 23, "level5", "engineKrut1 instance 10000")),
                        _this.krut1.animations.add("anim", Phaser.Animation.generateFrameNames("engineKrut1 instance 1", 0, 46, "", 4), 30, !0),
                        _this.addChild(_this.krut1),
                        (_this.krut2 = game.make.image(14, 28, "level5", "engineKrut2 instance 10000")),
                        _this.krut2.animations.add("anim", Phaser.Animation.generateFrameNames("engineKrut2 instance 1", 0, 37, "", 4), 30, !0),
                        _this.addChild(_this.krut2),
                        (_this.btn1 = game.make.image(38, 27, "level5", "enginebtn1 instance 10000")),
                        _this.btn1.animations.add("anim", Phaser.Animation.generateFrameNames("enginebtn1 instance 1", 0, 59, "", 4), 30, !0),
                        _this.addChild(_this.btn1),
                        (_this.btn2 = game.make.image(50, 27, "level5", "engineBtn2 instance 10000")),
                        _this.btn2.animations.add("anim", Phaser.Animation.generateFrameNames("engineBtn2 instance 1", 0, 64, "", 4), 30, !0),
                        _this.addChild(_this.btn2),
                        (_this.shine1 = game.make.image(-9, -10, "level5", "engineLampShine instance 10000")),
                        _this.shine1.animations.add("anim", Phaser.Animation.generateFrameNames("engineLampShine instance 1", 0, 59, "", 4), 30, !0),
                        _this.addChild(_this.shine1),
                        (_this.shine1.visible = !1),
                        (_this.shine2 = game.make.image(44, -10, "level5", "engineLampShine instance 10000")),
                        _this.shine2.animations.add("anim", Phaser.Animation.generateFrameNames("engineLampShine instance 1", 0, 59, "", 4), 30, !0),
                        _this.addChild(_this.shine2),
                        (_this.shine2.visible = !1),
                        (_this.tok = game.make.image(16, 9, "level5", "engineTok instance 10000")),
                        _this.tok.animations.add("anim", Phaser.Animation.generateFrameNames("engineTok instance 1", 0, 10, "", 4), 30, !0),
                        _this.addChild(_this.tok),
                        (_this.tok.visible = !1),
                        (_this.shadow = game.make.image(-70, 0, "level5", "engineShadow instance 10000")),
                        _this.addChild(_this.shadow),
                        _this
                    );
                }
                return (
                    __extends(Lvl5Engine, _super),
                    (Lvl5Engine.prototype.leverOut = function () {
                        !1 !== this.lever.inputEnabled && (this.lever.frameName = "engineLever instance 10000");
                    }),
                    (Lvl5Engine.prototype.leverOver = function () {
                        !1 !== this.lever.inputEnabled && (this.lever.frameName = "engineLever instance 10001");
                    }),
                    (Lvl5Engine.prototype.leverDown = function () {
                        !(this.lever.inputEnabled = !1) === this.haveOil ? (this.lever.frameName = "engineLever instance 10002") : (this.lever.frameName = "engineLever instance 10000"),
                            (this.leverPressed = !0),
                            (this.leverCount = 0),
                            Client.SoundManager.playSFX("s_lvl4_startGenerator"),
                            Client.SoundManager.playSFX("s_lvl4_generatorConkOut");
                    }),
                    (Lvl5Engine.prototype.activateLever = function () {
                        (this.leverPressed = !1) === this.haveOil ? ((this.lever.inputEnabled = !0), (this.lever.input.useHandCursor = !0)) : Client.SoundManager.playSFX("s_lvl4_generatorLoop", !0);
                    }),
                    (Lvl5Engine.prototype.activate = function () {
                        !1 !== this.haveOil &&
                            ((this.activeGears = !0),
                            this.front.animations.play("anim"),
                            this.grm.animations.play("anim"),
                            this.krut1.animations.play("anim"),
                            this.krut2.animations.play("anim"),
                            this.btn1.animations.play("anim"),
                            this.btn2.animations.play("anim"),
                            (this.shine1.visible = !0),
                            this.shine1.animations.play("anim"),
                            (this.shine2.visible = !0),
                            this.shine2.animations.play("anim"),
                            (this.tok.visible = !0),
                            this.tok.animations.play("anim"),
                            Client.GameManager.instance.level.customAction(3));
                    }),
                    (Lvl5Engine.prototype.update = function () {
                        !0 === this.leverPressed &&
                            ((this.leverCount += 1),
                            1 === this.leverCount
                                ? Client.SimpleTweenManager.set(this.lever, 20, { angle: 18 })
                                : 21 === this.leverCount
                                ? Client.SimpleTweenManager.set(this.lever, 4, { angle: 11 })
                                : 25 === this.leverCount
                                ? (this.activate(), Client.SimpleTweenManager.set(this.lever, 4, { angle: 18 }))
                                : 29 === this.leverCount
                                ? Client.SimpleTweenManager.set(this.lever, 7, { angle: -22 })
                                : 36 === this.leverCount && this.activateLever()),
                            !0 === this.activeGears && ((this.gear1.angle += 5), (this.gear2.angle -= 5));
                    }),
                    (Lvl5Engine.prototype.destroy = function () {
                        _super.prototype.destroy.call(this),
                            (this.front = null),
                            (this.grm = null),
                            (this.gear1 = null),
                            (this.gear2 = null),
                            (this.krut1 = null),
                            (this.krut2 = null),
                            (this.btn1 = null),
                            (this.btn2 = null),
                            (this.shine1 = null),
                            (this.shine2 = null),
                            (this.tok = null),
                            (this.shadow = null),
                            (this.lever = null);
                    }),
                    Lvl5Engine
                );
            })(Phaser.Sprite);
            Client.Lvl5Engine = Lvl5Engine;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl5Lamp = (function (_super) {
                function Lvl5Lamp(game, x, y, lamp, idNum) {
                    var _this = this,
                        idFrame = "lamp" + lamp + " instance 1";
                    return (
                        ((_this = _super.call(this, game, x, y, "level5", idFrame + "0000") || this).idFrame = idFrame),
                        _this.anchor.setTo(0.5, 0.58),
                        _this.animations.add("anim", Phaser.Animation.generateFrameNames(idFrame, 3, 14, "", 4), 30, !1),
                        _this.events.onInputOut.add(_this.out, _this),
                        _this.events.onInputOver.add(_this.over, _this),
                        _this.events.onInputDown.add(_this.down, _this),
                        1 === lamp ? (_this.hitArea = new Phaser.Rectangle(-13, -24, 26, 48)) : 2 === lamp && (_this.hitArea = new Phaser.Rectangle(-43, -30, 32, 48)),
                        (_this.idNum = idNum),
                        _this
                    );
                }
                return (
                    __extends(Lvl5Lamp, _super),
                    (Lvl5Lamp.prototype.activate = function () {
                        (this.inputEnabled = !0), (this.input.useHandCursor = !0), this.out();
                    }),
                    (Lvl5Lamp.prototype.deactivate = function () {
                        (this.inputEnabled = !1), this.animations.stop("anim", !0), (this.frameName = this.idFrame + "0000");
                    }),
                    (Lvl5Lamp.prototype.out = function () {
                        !1 !== this.inputEnabled && (this.frameName = this.idFrame + "0001");
                    }),
                    (Lvl5Lamp.prototype.over = function () {
                        !1 !== this.inputEnabled && (this.frameName = this.idFrame + "0002");
                    }),
                    (Lvl5Lamp.prototype.down = function () {
                        (this.inputEnabled = !1), this.animations.play("anim"), Client.GameManager.instance.level.customAction(this.idNum);
                    }),
                    Lvl5Lamp
                );
            })(Phaser.Sprite);
            Client.Lvl5Lamp = Lvl5Lamp;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl5Lift = (function (_super) {
                function Lvl5Lift(game) {
                    var _this = _super.call(this) || this;
                    (_this.btn1Pressed = !1),
                        (_this.btn2Pressed = !1),
                        (_this.botY = 483),
                        (_this.topY = 156),
                        (_this.speedMove = 80),
                        (_this.move = 0),
                        (_this.calcFloor = !1),
                        (_this.btn1 = Client.GameManager.instance.layerUpper.create(205, 409, "level5", "btnLift1 instance 10000")),
                        _this.btn1.anchor.setTo(0.5),
                        _this.btn1.events.onInputOut.add(_this.btn1Out, _this),
                        _this.btn1.events.onInputOver.add(_this.btn1Over, _this),
                        _this.btn1.events.onInputDown.add(_this.btn1Down, _this),
                        (_this.btn2 = Client.GameManager.instance.layerUpper.create(205, 331, "level5", "btnLift2 instance 10000")),
                        _this.btn2.anchor.setTo(0.5),
                        _this.btn2.events.onInputOut.add(_this.btn2Out, _this),
                        _this.btn2.events.onInputOver.add(_this.btn2Over, _this),
                        _this.btn2.events.onInputDown.add(_this.btn2Down, _this),
                        (_this.rope1 = Client.GameManager.instance.layerBackground.create(300, 260, "level5", "liftRope instance 10000")),
                        _this.rope1.anchor.setTo(0.5),
                        (_this.rope2 = Client.GameManager.instance.layerBackground.create(357, 400, "level5", "liftRope instance 10000")),
                        _this.rope2.anchor.setTo(0.5),
                        (_this.gearB1 = Client.GameManager.instance.layerBackground.create(300, 588, "level5", "liftGear instance 10000")),
                        _this.gearB1.anchor.setTo(0.5),
                        (_this.gearB2 = Client.GameManager.instance.layerBackground.create(357, 588, "level5", "liftGear instance 10000")),
                        _this.gearB2.anchor.setTo(0.5),
                        (_this.gearT1 = Client.GameManager.instance.layerBackground.create(300, 75, "level5", "liftGear instance 10000")),
                        _this.gearT1.anchor.setTo(0.5),
                        (_this.gearT2 = Client.GameManager.instance.layerBackground.create(357, 75, "level5", "liftGear instance 10000")),
                        _this.gearT2.anchor.setTo(0.5),
                        (_this.graphic = Client.GameManager.instance.layerBackground.create(328, 483, "level5", "lift instance 10000")),
                        game.physics.box2d.enable(_this.graphic),
                        _this.graphic.body.setRectangle(126, 10, 0, 80),
                        (_this.graphic.body.kinematic = !0),
                        (_this.numFloor = game.make.sprite(-2, -50, "level5", "liftFloorNum instance 10000")),
                        _this.numFloor.anchor.setTo(0.5),
                        _this.graphic.addChild(_this.numFloor);
                    var mask = game.make.graphics();
                    return mask.beginFill(16711680, 0.5), mask.drawRect(-30, -103, 60, 50), mask.endFill(), _this.graphic.addChild(mask), (_this.numFloor.mask = mask), (mask = null), _this;
                }
                return (
                    __extends(Lvl5Lift, _super),
                    (Lvl5Lift.prototype.activateBtn1 = function () {
                        (this.btn1.inputEnabled = !0), (this.btn1.input.useHandCursor = !0), this.btn1Out();
                    }),
                    (Lvl5Lift.prototype.activateBtn2 = function () {
                        (this.btn2.inputEnabled = !0), (this.btn2.input.useHandCursor = !0), this.btn2Out();
                    }),
                    (Lvl5Lift.prototype.btn1Out = function () {
                        !1 !== this.btn1.inputEnabled && (this.btn1.frameName = "btnLift1 instance 10001");
                    }),
                    (Lvl5Lift.prototype.btn1Over = function () {
                        !1 !== this.btn1.inputEnabled && (this.btn1.frameName = "btnLift1 instance 10002");
                    }),
                    (Lvl5Lift.prototype.btn1Down = function () {
                        this.graphic.body.y !== this.botY && (this.deactivateBtn1(!0), !0 === this.btn2Pressed && this.activateBtn2(), this.startMove(1));
                    }),
                    (Lvl5Lift.prototype.btn2Out = function () {
                        !1 !== this.btn2.inputEnabled && (this.btn2.frameName = "btnLift2 instance 10001");
                    }),
                    (Lvl5Lift.prototype.btn2Over = function () {
                        !1 !== this.btn2.inputEnabled && (this.btn2.frameName = "btnLift2 instance 10002");
                    }),
                    (Lvl5Lift.prototype.btn2Down = function () {
                        this.graphic.body.y !== this.topY && (this.deactivateBtn2(!0), !0 === this.btn1Pressed && this.activateBtn1(), this.startMove(-1));
                    }),
                    (Lvl5Lift.prototype.deactivateBtn1 = function (press) {
                        void 0 === press && (press = !1), (this.btn1.inputEnabled = !1), (this.btn1.frameName = !1 === press ? "btnLift1 instance 10000" : "btnLift1 instance 10003"), (this.btn1Pressed = press);
                    }),
                    (Lvl5Lift.prototype.deactivateBtn2 = function (press) {
                        void 0 === press && (press = !1), (this.btn2.inputEnabled = !1), (this.btn2.frameName = !1 === press ? "btnLift2 instance 10000" : "btnLift2 instance 10003"), (this.btn2Pressed = press);
                    }),
                    (Lvl5Lift.prototype.startMove = function (dir) {
                        (this.move = dir), (this.graphic.body.velocity.y = this.speedMove * dir), (this.calcFloor = !0), Client.SoundManager.playSFX("s_lvl4_liftLoop", !0);
                    }),
                    (Lvl5Lift.prototype.stopMove = function () {
                        (this.move = 0), (this.graphic.body.velocity.y = 0), (this.calcFloor = !1), Client.SoundManager.stopSFXLoop("s_lvl4_liftLoop");
                    }),
                    (Lvl5Lift.prototype.update = function () {
                        if (
                            (1 === this.move
                                ? (this.graphic.body.y >= this.botY && ((this.graphic.body.y = this.botY), this.stopMove(), this.activateBtn1()),
                                  (this.gearB1.angle -= 1.5),
                                  (this.gearB2.angle += 1.5),
                                  (this.gearT1.angle -= 1.5),
                                  (this.gearT2.angle += 1.5),
                                  (this.rope1.y -= 1),
                                  (this.rope2.y += 1))
                                : -1 === this.move &&
                                  (this.graphic.body.y <= this.topY && ((this.graphic.body.y = this.topY), this.stopMove(), this.activateBtn2(), Client.GameManager.instance.level.customAction(9)),
                                  (this.gearB1.angle += 1.5),
                                  (this.gearB2.angle -= 1.5),
                                  (this.gearT1.angle += 1.5),
                                  (this.gearT2.angle -= 1.5),
                                  (this.rope1.y += 1),
                                  (this.rope2.y -= 1)),
                            !0 === this.calcFloor)
                        ) {
                            var percent = (this.graphic.body.y - this.topY) / (this.botY - this.topY);
                            this.numFloor.angle = -180 * (1 - percent);
                        }
                    }),
                    (Lvl5Lift.prototype.free = function () {
                        (this.btn1 = null), (this.btn2 = null), (this.graphic = null), (this.gearT1 = null), (this.gearT2 = null), (this.gearB1 = null), (this.gearB2 = null), (this.rope1 = null), (this.rope2 = null), (this.numFloor = null);
                    }),
                    Lvl5Lift
                );
            })(Client.BasicElement);
            Client.Lvl5Lift = Lvl5Lift;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl5Oil = (function (_super) {
                function Lvl5Oil(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.oil = Client.GameManager.instance.layerBackground.create(710, 376, "level5")),
                        _this.oil.animations.add("anim", Phaser.Animation.generateFrameNames("oliAnim instance 1", 2, 39, "", 4), 30, !1).onComplete.addOnce(function () {
                            Client.GameManager.instance.level.customAction(1);
                        }, _this),
                        (_this.oil.visible = !1),
                        (_this.barrel = Client.GameManager.instance.layerBackground.create(654, 363, "level5", "oilBarrel instance 10000")),
                        _this.barrel.animations.add("anim", Phaser.Animation.generateFrameNames("oilBarrel instance 1", 2, 39, "", 4), 30, !1),
                        (_this.barrel.inputEnabled = !0),
                        (_this.barrel.input.useHandCursor = !0),
                        _this.barrel.events.onInputOut.add(_this.out, _this),
                        _this.barrel.events.onInputOver.add(_this.over, _this),
                        _this.barrel.events.onInputDown.add(_this.down, _this),
                        _this
                    );
                }
                return (
                    __extends(Lvl5Oil, _super),
                    (Lvl5Oil.prototype.out = function () {
                        !1 !== this.barrel.inputEnabled && (this.barrel.frameName = "oilBarrel instance 10000");
                    }),
                    (Lvl5Oil.prototype.over = function () {
                        !1 !== this.barrel.inputEnabled && (this.barrel.frameName = "oilBarrel instance 10001");
                    }),
                    (Lvl5Oil.prototype.down = function () {
                        (this.barrel.inputEnabled = !1),
                            this.barrel.animations.play("anim"),
                            (this.oil.visible = !0),
                            this.oil.animations.play("anim"),
                            Client.SoundManager.playSFX("s_lvl4_barellFall"),
                            Client.SoundManager.playSFX("s_lvl4_fuil");
                    }),
                    (Lvl5Oil.prototype.free = function () {
                        (this.oil = null), (this.barrel = null);
                    }),
                    Lvl5Oil
                );
            })(Client.BasicElement);
            Client.Lvl5Oil = Lvl5Oil;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl6Alert = (function (_super) {
                function Lvl6Alert(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = 379),
                        (_this.group.y = 179),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        _this.group.create(-4, -10, "level6", "alertHolder instance 10000"),
                        (_this.alertMain = new Client.SASprite(game, 0, 0, "level6", "alertMain instance 10000")),
                        _this.alertMain.pivot.set(2, 0),
                        _this.group.addChild(_this.alertMain),
                        _this.setParts("anim"),
                        _this
                    );
                }
                return (
                    __extends(Lvl6Alert, _super),
                    (Lvl6Alert.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? (Client.SoundManager.playSFX("s_lvl6_horn"), Client.GameManager.instance.level.car.scareCar(), this.startTween(this.alertMain, 14, { y: 37, scX: 0.89, scY: 0.83 }))
                                : 15 === this.counterAnim
                                ? this.startTween(this.alertMain, 4, { y: 38, scX: 1, scY: 1 })
                                : 19 === this.counterAnim
                                ? this.startTween(this.alertMain, 4, { x: 3, skX: 9, skY: 9 })
                                : 23 === this.counterAnim
                                ? this.startTween(this.alertMain, 4, { x: 2, skX: -2, skY: -2 })
                                : 27 === this.counterAnim
                                ? this.startTween(this.alertMain, 4, { x: 3, skX: 9, skY: 9 })
                                : 31 === this.counterAnim
                                ? this.startTween(this.alertMain, 4, { x: 2, y: 37, skX: 3, skY: 3, scX: 0.89, scY: 0.83 })
                                : 35 === this.counterAnim
                                ? this.startTween(this.alertMain, 4, { y: 38, scX: 1, scY: 1 })
                                : 39 === this.counterAnim
                                ? this.startTween(this.alertMain, 4, { x: 3, skX: 9, skY: 9 })
                                : 43 === this.counterAnim
                                ? this.startTween(this.alertMain, 4, { x: 2, skX: -2, skY: -2 })
                                : 47 === this.counterAnim
                                ? this.startTween(this.alertMain, 4, { x: 3, skX: 9, skY: 9 })
                                : 51 === this.counterAnim
                                ? this.setPart(this.alertMain, { x: 2, skX: 3, skY: 3 })
                                : 53 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl6Alert.prototype.setParts = function (value) {
                        "anim" === value && this.setPart(this.alertMain, { x: 2, y: 38, angle: 0, scX: 1, scY: 1, skX: 3, skY: 3, alpha: 1 });
                    }),
                    (Lvl6Alert.prototype.free = function () {
                        (this.group = null), (this.alertMain = null);
                    }),
                    Lvl6Alert
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl6Alert = Lvl6Alert;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl6AudioSpeaker = (function (_super) {
                function Lvl6AudioSpeaker(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.scared = !1),
                        (_this.speakerBody = Client.GameManager.instance.layerBackground.create(247, 336, "level6", "musicCenter instance 10000")),
                        (_this.audio = game.make.sprite(0, 0, "level6", "audio instance 10000")),
                        _this.audio.animations.add("use", Phaser.Animation.generateFrameNames("audio instance 1", 0, 55, "", 4), 30, !1).onComplete.add(_this.scareCar, _this),
                        _this.audio.pivot.set(16, -38),
                        (_this.audio.inputEnabled = !0),
                        (_this.audio.input.useHandCursor = !0),
                        _this.audio.events.onInputOver.add(_this.overaudio, _this),
                        _this.speakerBody.addChild(_this.audio),
                        _this
                    );
                }
                return (
                    __extends(Lvl6AudioSpeaker, _super),
                    (Lvl6AudioSpeaker.prototype.overaudio = function () {
                        Client.SoundManager.playSFX("s_lvl6_musicCenter"), (this.audio.inputEnabled = !1), this.audio.play("use"), Client.GameManager.instance.level.car.scareCar();
                    }),
                    (Lvl6AudioSpeaker.prototype.scareCar = function () {
                        this.scared || (this.scared = !0), this.audio.play("use");
                    }),
                    (Lvl6AudioSpeaker.prototype.free = function () {
                        (this.speakerBody = null), (this.audio = null);
                    }),
                    Lvl6AudioSpeaker
                );
            })(Client.BasicElement);
            Client.Lvl6AudioSpeaker = Lvl6AudioSpeaker;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl6BottomRoom = (function (_super) {
                function Lvl6BottomRoom(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.counter = 0),
                        (_this.active = !1),
                        (_this.dark = !0),
                        (_this.dragNow = !1),
                        (_this.work = !1),
                        (_this.roomLight = Client.GameManager.instance.layerElements.create(52, 469, "level6", "cellarDark instance 10000")),
                        (_this.generator = Client.GameManager.instance.layerElements.create(187, 489, "level6", "generator instance 10000")),
                        _this.generator.animations.add("work", Phaser.Animation.generateFrameNames("generator instance 1", 2, 11, "", 4), 30, !1),
                        (_this.battary = Client.GameManager.instance.layerElements.create(423, 555, "level6", "lvl6_battery_mc instance 10000")),
                        game.physics.box2d.enable(_this.battary),
                        _this.battary.body.setRectangle(77, 36),
                        (_this.battary.body.dynamic = !0),
                        _this.battary.events.onInputDown.add(_this.down, _this),
                        _this.battary.events.onInputUp.add(_this.up, _this),
                        _this.battary.events.onInputOver.add(_this.over, _this),
                        _this.battary.events.onInputOut.add(_this.out, _this),
                        _this
                    );
                }
                return (
                    __extends(Lvl6BottomRoom, _super),
                    (Lvl6BottomRoom.prototype.down = function () {
                        this.work ? ((this.work = !1), (this.battary.body.dynamic = !0), Client.GameManager.instance.level.mouseDragEnd(), Client.GameManager.instance.level.wires.deactivate()) : (this.dragNow = !0);
                    }),
                    (Lvl6BottomRoom.prototype.up = function () {
                        this.dragNow = !1;
                    }),
                    (Lvl6BottomRoom.prototype.over = function () {
                        this.battary.frameName = "lvl6_battery_mc instance 10002";
                    }),
                    (Lvl6BottomRoom.prototype.out = function () {
                        this.battary.frameName = "lvl6_battery_mc instance 10001";
                    }),
                    (Lvl6BottomRoom.prototype.update = function () {
                        this.dark ||
                            (this.active ||
                                ((this.counter += 1),
                                25 < this.counter && (this.roomLight.frameName = "cellarDark instance 1000" + Client.Tools.random(0, 1)),
                                40 === this.counter &&
                                    ((this.active = !0),
                                    (this.roomLight.frameName = "cellarDark instance 10001"),
                                    (this.generator.frameName = "generator instance 10001"),
                                    (this.battary.frameName = "lvl6_battery_mc instance 10001"),
                                    this.battary.body.data.SetUserData("DragBody"),
                                    (this.battary.inputEnabled = !0),
                                    (this.battary.input.useHandCursor = !0),
                                    Client.SoundManager.playSFX("s_lvl6_lightOn"))),
                            !0 === this.dragNow &&
                                !1 === this.work &&
                                Client.Tools.distance(this.battary.body.x, this.battary.body.y, 264, 532) < 15 &&
                                ((this.work = !0),
                                (this.battary.body.static = !0),
                                (this.battary.body.x = 262),
                                (this.battary.body.y = 537),
                                (this.battary.body.angle = 0),
                                Client.GameManager.instance.level.mouseDragEnd(),
                                this.generator.play("work"),
                                Client.SoundManager.playSFX("s_lvl6_activateGenerator"),
                                Client.GameManager.instance.level.wires.activate()));
                    }),
                    (Lvl6BottomRoom.prototype.activate = function () {
                        this.dark = !1;
                    }),
                    (Lvl6BottomRoom.prototype.free = function () {
                        this.roomLight = null;
                    }),
                    Lvl6BottomRoom
                );
            })(Client.BasicElement);
            Client.Lvl6BottomRoom = Lvl6BottomRoom;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl6Car = (function (_super) {
                function Lvl6Car(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.scared = !1),
                        (_this.startMove = !1),
                        (_this.gameOver = !1),
                        (_this.boost = 0),
                        (_this.touch = !1),
                        (_this.zzz = new Client.Lvl6ZZZ(game)),
                        Client.GameManager.instance.level.updateElements.push(_this.zzz),
                        (_this.group = game.make.group()),
                        (_this.group.x = 369),
                        (_this.group.y = 363),
                        Client.GameManager.instance.layerElements.addChild(_this.group),
                        (_this.body = new Client.SASprite(game, 0, 0, "level6", "carBody instance 10000")),
                        _this.body.animations.add("boom", Phaser.Animation.generateFrameNames("carBody instance 1", 0, 8, "", 4), 30, !1),
                        _this.body.pivot.set(0, 18),
                        _this.group.addChild(_this.body),
                        (_this.wheel1 = new Client.SASprite(game, 0, 0, "level6", "wheel instance 10000")),
                        _this.wheel1.pivot.set(0, 0),
                        _this.group.addChild(_this.wheel1),
                        (_this.wheel2 = new Client.SASprite(game, 0, 0, "level6", "wheel instance 10000")),
                        _this.wheel2.pivot.set(0, 0),
                        _this.group.addChild(_this.wheel2),
                        (_this.bubble = new Client.Lvl6CarBubble(game, _this.body)),
                        Client.GameManager.instance.level.updateElements.push(_this.bubble),
                        (_this.eyes = game.make.sprite(96, 15, "level6", "eye instance 10000")),
                        _this.eyes.animations.add("sleep", Phaser.Animation.generateFrameNames("eye instance 1", 0, 33, "", 4), 30, !0),
                        _this.eyes.animations.add("wakeUp", Phaser.Animation.generateFrameNames("eye instance 1", 34, 86, "", 4), 30, !1),
                        _this.eyes.animations.add("afterCrash", Phaser.Animation.generateFrameNames("eye instance 1", 89, 127, "", 4), 30, !0),
                        _this.eyes.play("sleep"),
                        _this.body.addChild(_this.eyes),
                        (_this.photo = new Client.Lvl6Photo(game)),
                        (_this.photo.group.visible = !1),
                        Client.GameManager.instance.level.updateElements.push(_this.photo),
                        (_this.physics = new Phaser.Physics.Box2D.Body(game, null, _this.group.x + 85, _this.group.y)),
                        _this.physics.setRectangle(170, 60),
                        (_this.physics.dynamic = !0),
                        (_this.physics.friction = 1),
                        _this.physics.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, _this.stopHero, _this),
                        _this.physics.setBodyContactCallback(Client.GameManager.instance.level.door.physics, _this.crushCar, _this),
                        _this.playAnim("sleep"),
                        Client.SoundManager.playSFX("s_lvl6_bossSleepLoop", !0),
                        _this
                    );
                }
                return (
                    __extends(Lvl6Car, _super),
                    (Lvl6Car.prototype.stopHero = function () {
                        (this.touch = !0), this.scareCar(), Client.GameManager.instance.hero.setEnableMotor(!1, !0), Client.GameManager.instance.hero.setClickable(!1);
                    }),
                    (Lvl6Car.prototype.crushCar = function () {
                        Client.GameManager.instance.level.door.closed &&
                            (Client.SoundManager.playSFX("s_lvl6_bossHitWall"),
                            (this.gameOver = !0),
                            this.physics.setZeroVelocity(),
                            this.playAnim("crush"),
                            Client.GameManager.instance.level.owl.playAnim("fear"),
                            Client.GameManager.instance.hero.setClickable(!0),
                            (Client.GameManager.instance.hero.currEyesState = Client.EyesState.stand));
                    }),
                    (Lvl6Car.prototype.scareCar = function () {
                        !1 === this.scared && (Client.SoundManager.stopSFXLoop("s_lvl6_bossSleepLoop"), Client.SoundManager.playSFX("s_lvl6_wakeUpBoss"), this.playAnim("wakeUp")), (this.scared = !0);
                    }),
                    (Lvl6Car.prototype.update = function () {
                        _super.prototype.update.call(this),
                            this.startMove && ((this.boost += 5), (this.physics.velocity.x = 200 + this.boost), (this.group.x = this.physics.x - 85), (this.group.y = this.physics.y - 47)),
                            800 < this.physics.x && !this.gameOver && ((this.gameOver = !0), Client.LevelBuilder.instance.levelFailed());
                    }),
                    (Lvl6Car.prototype.updateAnimation = function () {
                        "sleep" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (this.eyes.play("sleep"), this.startTween(this.body, 26, { x: 2, y: 2 }))
                                : 27 === this.counterAnim
                                ? this.startTween(this.body, 24, { x: 3, y: 0 })
                                : 51 === this.counterAnim && this.animComplete()
                            : "wakeUp" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (this.eyes.play("wakeUp"), (this.zzz.group.visible = !1), this.startTween(this.body, 10, { x: 0, y: 12, skX: -1, skY: -1 }))
                                : 11 === this.counterAnim
                                ? (this.startTween(this.bubble, 6, { y: -100 }),
                                  this.startTween(this.wheel2, 6, { x: 39, y: 11, skX: -6, skY: -6 }),
                                  this.startTween(this.wheel1, 6, { x: 124, y: 4, skX: -6, skY: -6 }),
                                  this.startTween(this.body, 6, { x: -2, y: -31, skX: -5, skY: -5 }))
                                : 17 === this.counterAnim
                                ? (this.startTween(this.bubble, 8, { y: -111 }), this.startTween(this.wheel2, 8, { y: 0 }), this.startTween(this.wheel1, 8, { y: -8 }), this.startTween(this.body, 8, { y: -43 }))
                                : 25 === this.counterAnim
                                ? (this.startTween(this.bubble, 16, { y: -41 }), this.startTween(this.wheel2, 4, { x: 37, y: -4 }), this.startTween(this.wheel1, 4, { x: 122, y: -11 }))
                                : 29 === this.counterAnim
                                ? (this.startTween(this.wheel2, 6, { y: 8 }), this.startTween(this.wheel1, 6, { y: 1 }), this.startTween(this.body, 6, { y: -31 }))
                                : 35 === this.counterAnim
                                ? (this.startTween(this.wheel2, 6, { x: 38, y: 38, skX: 2, skY: 2 }), this.startTween(this.wheel1, 6, { x: 123, y: 42, skX: 2, skY: 2 }), this.startTween(this.body, 10, { x: 3, y: 0, skX: 2, skY: 2 }))
                                : 41 === this.counterAnim
                                ? (this.startTween(this.wheel2, 4, { x: 36, y: 46, skX: -1, skY: -1 }), this.startTween(this.wheel1, 4, { x: 121, y: 46, skX: -1, skY: -1 }))
                                : 45 === this.counterAnim
                                ? (this.startTween(this.wheel2, 24, { y: 45, skX: 0, skY: 0 }), this.startTween(this.wheel1, 24, { skX: 0, skY: 0 }), this.startTween(this.body, 6, { x: 0, y: 12, skX: -1, skY: -1 }))
                                : 51 === this.counterAnim
                                ? this.startTween(this.body, 6, { x: 3, y: 0, skX: 2, skY: 2 })
                                : 69 === this.counterAnim
                                ? (this.startTween(this.wheel2, 10, { x: 35, scX: 0.92 }), this.startTween(this.wheel1, 10, { x: 113, scX: 0.92 }), this.startTween(this.body, 10, { x: 5, skY: 3, scX: 0.92 }))
                                : 75 === this.counterAnim
                                ? ((this.bubble.group.visible = !1), (this.startMove = !0), this.touch && (Client.GameManager.instance.hero.currEyesState = Client.EyesState.afraid))
                                : 79 === this.counterAnim
                                ? (this.startTween(this.wheel2, 10, { x: 38, y: 47, skX: -7, skY: -7, scX: 1 }),
                                  this.startTween(this.wheel1, 10, { x: 122, y: 39, skX: -7, skY: -7, scX: 1 }),
                                  this.startTween(this.body, 10, { x: 0, y: 7, skX: -4, skY: -4, scX: 1 }))
                                : 89 === this.counterAnim
                                ? (this.startTween(this.wheel2, 22, { x: 36, y: 45, skX: 0, skY: 0 }), this.startTween(this.wheel1, 22, { x: 121, y: 46, skX: 0, skY: 0 }), this.startTween(this.body, 22, { x: 3, y: 0, skX: 2, skY: 2 }))
                                : 111 === this.counterAnim
                                ? this.startTween(this.body, 24, { x: 5, y: -5, skX: 6, skY: 6 })
                                : 135 === this.counterAnim
                                ? this.startTween(this.body, 10, { y: -7 })
                                : 145 === this.counterAnim
                                ? this.startTween(this.body, 10, { y: -5 })
                                : 155 === this.counterAnim
                                ? this.startTween(this.body, 10, { y: -7 })
                                : 165 === this.counterAnim
                                ? this.startTween(this.body, 10, { y: -5 })
                                : 213 === this.counterAnim && this.animComplete()
                            : "crush" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (this.body.play("boom"),
                                  this.startTween(this.wheel2, 6, { x: 59, y: 35, skX: 5, skY: 5, scX: 0.84 }),
                                  this.startTween(this.wheel1, 6, { x: 130, y: 42, skX: 5, skY: 5, scX: 0.84 }),
                                  this.startTween(this.body, 6, { x: 38, y: -17, skX: 9, skY: 11, scX: 0.84 }))
                                : 7 === this.counterAnim
                                ? (this.startTween(this.wheel2, 8, { x: 64, y: 20, skX: 11, skY: 11 }),
                                  this.startTween(this.wheel1, 8, { x: 133, y: 36, skX: 11, skY: 11 }),
                                  this.startTween(this.body, 8, { x: 48, y: -33, skX: 16, skY: 18 }))
                                : 15 === this.counterAnim
                                ? (this.startTween(this.wheel2, 6, { x: 59, y: 35, skX: 5, skY: 5 }),
                                  this.startTween(this.wheel1, 6, { x: 130, y: 42, skX: 5, skY: 5 }),
                                  this.startTween(this.body, 6, { x: 38, y: -17, skX: 9, skY: 11 }),
                                  (this.photo.group.visible = !0),
                                  this.photo.setPhotoPos(this.group.x + 10, this.group.y - 28),
                                  this.photo.playAnim("fall"))
                                : 21 === this.counterAnim
                                ? (this.startTween(this.wheel2, 4, { x: 37, y: 45, skX: 1, skY: 1, scX: 1 }),
                                  this.startTween(this.wheel1, 4, { x: 122, y: 47, skX: 1, skY: 1, scX: 1 }),
                                  this.startTween(this.body, 4, { x: 3, y: 4, skX: 2, skY: 2, scX: 1 }))
                                : 25 === this.counterAnim
                                ? (this.startTween(this.wheel2, 6, { y: 47, skX: -1, skY: -1 }), this.startTween(this.wheel1, 6, { y: 46, skX: -1, skY: -1 }), this.startTween(this.body, 6, { x: 6, y: -5, skX: 5, skY: 5 }))
                                : 31 === this.counterAnim
                                ? (this.startTween(this.wheel2, 6, { y: 45, skX: 1, skY: 1 }), this.startTween(this.wheel1, 6, { y: 47, skX: 1, skY: 1 }), this.startTween(this.body, 6, { x: 3, y: 4, skX: 2, skY: 2 }))
                                : 37 === this.counterAnim
                                ? (this.startTween(this.wheel2, 6, { y: 47, skX: -1, skY: -1 }), this.startTween(this.wheel1, 6, { y: 46, skX: -1, skY: -1 }), this.startTween(this.body, 6, { x: 6, y: -5, skX: 5, skY: 5 }))
                                : 43 === this.counterAnim
                                ? (this.startTween(this.wheel2, 10, { y: 45, skX: 1, skY: 1 }), this.startTween(this.wheel1, 10, { y: 47, skX: 1, skY: 1 }), this.startTween(this.body, 10, { x: 3, y: 4, skX: 2, skY: 2 }))
                                : 53 === this.counterAnim &&
                                  (this.animComplete(),
                                  (this.boomStar = this.group.create(85, -25, "level6", "boomStar instance 10000")),
                                  this.boomStar.animations.add("boom", Phaser.Animation.generateFrameNames("boomStar instance 1", 0, 41, "", 4), 30, !0),
                                  this.boomStar.play("boom"),
                                  this.playAnim("afterCrash", -1))
                            : "afterCrash" === this.currAnim &&
                              (this.eyes.play("afterCrash"),
                              1 === this.counterAnim
                                  ? this.startTween(this.body, 22, { y: 6 })
                                  : 23 === this.counterAnim
                                  ? this.startTween(this.body, 28, { y: 4 })
                                  : 51 === this.counterAnim
                                  ? this.startTween(this.body, 28, { y: 6 })
                                  : 79 === this.counterAnim
                                  ? this.startTween(this.body, 10, { y: 5 })
                                  : 89 === this.counterAnim
                                  ? this.startTween(this.body, 18, { y: 4 })
                                  : 107 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl6Car.prototype.setParts = function (value) {
                        "sleep" === value
                            ? ((this.bubble.group.visible = !1),
                              this.setPart(this.wheel2, { x: 36, y: 45, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.wheel1, { x: 121, y: 46, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.body, { x: 3, y: 0, angle: 0, scX: 1, scY: 1, skX: 2, skY: 2, alpha: 1 }))
                            : "wakeUp" === value
                            ? ((this.bubble.group.visible = !0),
                              this.bubble.playAnim("anim"),
                              this.setPart(this.bubble, { x: 164, y: -54, angle: 0, scX: 0.78, scY: 0.78, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.wheel2, { x: 36, y: 45, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.wheel1, { x: 121, y: 46, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.body, { x: 3, y: 0, angle: 0, scX: 1, scY: 1, skX: 2, skY: 2, alpha: 1 }))
                            : "crush" === value
                            ? ((this.bubble.group.visible = !1),
                              this.setPart(this.wheel2, { x: 36, y: 45, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.wheel1, { x: 121, y: 46, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.body, { x: 5, y: -5, angle: 0, scX: 1, scY: 1, skX: 6, skY: 6, alpha: 1 }))
                            : "afterCrash" === value &&
                              ((this.bubble.group.visible = !1),
                              this.setPart(this.wheel2, { x: 37, y: 45, angle: 0, scX: 1, scY: 1, skX: 1, skY: 1, alpha: 1 }),
                              this.setPart(this.wheel1, { x: 122, y: 47, angle: 0, scX: 1, scY: 1, skX: 1, skY: 1, alpha: 1 }),
                              this.setPart(this.body, { x: 3, y: 4, angle: 0, scX: 1, scY: 1, skX: 2, skY: 2, alpha: 1 }));
                    }),
                    (Lvl6Car.prototype.free = function () {
                        (this.group = null), (this.body = null), (this.wheel1 = null), (this.wheel2 = null), (this.bubble = null), (this.zzz = null), (this.boomStar = null), (this.photo = null);
                    }),
                    Lvl6Car
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl6Car = Lvl6Car;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl6CarBubble = (function (_super) {
                function Lvl6CarBubble(game, _parent) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = 164),
                        (_this.group.y = -53),
                        _parent.addChild(_this.group),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level6", "bubblePart3 instance 10000")),
                        _this.part3.anchor.set(0.5),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level6", "bubblePart2 instance 10000")),
                        _this.part2.anchor.set(0.5),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level6", "bubblePart1 instance 10000")),
                        _this.part1.pivot.set(0, 0),
                        _this.group.addChild(_this.part1),
                        _this.playAnim("anim"),
                        _this
                    );
                }
                return (
                    __extends(Lvl6CarBubble, _super),
                    (Lvl6CarBubble.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? this.startTween(this.part2, 14, { x: -31, y: 45, scX: 1, scY: 1, alpha: 1 })
                                : 9 === this.counterAnim
                                ? ((this.part3.visible = !0), this.setPart(this.part3, { x: -25, y: 30, scX: 0.34, scY: 0.34, alpha: 0 }), this.startTween(this.part3, 12, { x: 5, y: -5, scX: 1.02, scY: 1.02, alpha: 1 }))
                                : 15 === this.counterAnim
                                ? this.startTween(this.part2, 6, { x: -33, y: 47 })
                                : 21 === this.counterAnim
                                ? this.startTween(this.part3, 6, { x: 0, y: 0, scX: 1, scY: 1 })
                                : 25 === this.counterAnim
                                ? ((this.part1.visible = !0), this.setPart(this.part1, { x: -25, y: -23, alpha: 0 }), this.startTween(this.part1, 8, { x: -23, y: -30, alpha: 1 }))
                                : 33 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: -21, y: -33, skX: 5, skY: 5 })
                                : 37 === this.counterAnim
                                ? this.startTween(this.part1, 6, { x: -23, y: -30, skX: 0, skY: 0 })
                                : 43 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: -21, y: -33, skX: 5, skY: 5 })
                                : 47 === this.counterAnim
                                ? this.startTween(this.part1, 6, { x: -23, y: -30, skX: 0, skY: 0 })
                                : 53 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: -21, y: -33, skX: 5, skY: 5 })
                                : 57 === this.counterAnim
                                ? this.startTween(this.part1, 8, { x: -23, y: -30, skX: 0, skY: 0 })
                                : 65 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: -21, y: -33, skX: 5, skY: 5 })
                                : 69 === this.counterAnim
                                ? this.startTween(this.part1, 6, { x: -23, y: -30, skX: 0, skY: 0 })
                                : 75 === this.counterAnim
                                ? this.startTween(this.part1, 4, { x: -21, y: -33, skX: 5, skY: 5 })
                                : 83 === this.counterAnim
                                ? (this.startTween(this.part2, 16, { alpha: 0 }), this.startTween(this.part3, 16, { alpha: 0 }))
                                : 85 === this.counterAnim
                                ? this.startTween(this.part1, 14, { alpha: 0 })
                                : 99 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl6CarBubble.prototype.setParts = function (value) {
                        "anim" === value && ((this.part1.visible = !1), this.setPart(this.part2, { x: -42, y: 56, angle: 0, scX: 0.42, scY: 0.42, skX: 0, skY: 0, alpha: 0 }), (this.part3.visible = !1));
                    }),
                    (Lvl6CarBubble.prototype.free = function () {
                        (this.group = null), (this.part3 = null), (this.part2 = null), (this.part1 = null);
                    }),
                    Lvl6CarBubble
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl6CarBubble = Lvl6CarBubble;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl6Clock = (function (_super) {
                function Lvl6Clock(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.scared = !1),
                        (_this.clock = Client.GameManager.instance.layerBackground.create(265, 268, "level6", "clock instance 10000")),
                        _this.clock.animations.add("use", Phaser.Animation.generateFrameNames("clock instance 1", 0, 31, "", 4), 30, !1).onComplete.add(_this.scareCar, _this),
                        (_this.clock.inputEnabled = !0),
                        (_this.clock.input.useHandCursor = !0),
                        _this.clock.events.onInputOver.add(_this.overClock, _this),
                        _this
                    );
                }
                return (
                    __extends(Lvl6Clock, _super),
                    (Lvl6Clock.prototype.overClock = function () {
                        Client.SoundManager.playSFX("s_lvl6_clock"), (this.clock.inputEnabled = !1), this.clock.play("use"), Client.GameManager.instance.level.car.scareCar();
                    }),
                    (Lvl6Clock.prototype.scareCar = function () {
                        this.scared || (this.scared = !0), this.clock.play("use");
                    }),
                    (Lvl6Clock.prototype.free = function () {
                        this.clock = null;
                    }),
                    Lvl6Clock
                );
            })(Client.BasicElement);
            Client.Lvl6Clock = Lvl6Clock;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl6Door = (function (_super) {
                function Lvl6Door(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.closed = !1),
                        (_this.group = game.make.group()),
                        (_this.group.x = 697),
                        (_this.group.y = 270),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level6", "doorPart instance 10000")),
                        _this.part3.pivot.set(0, 0),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level6", "doorPart instance 10000")),
                        _this.part2.pivot.set(0, 0),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level6", "doorPart instance 10000")),
                        _this.part1.pivot.set(0, 0),
                        _this.group.addChild(_this.part1),
                        (_this.smoke = _this.group.create(5, 152, "level6", "doorSmoke instance 10000")),
                        _this.smoke.animations.add("anim", Phaser.Animation.generateFrameNames("doorSmoke instance 1", 0, 9, "", 4), 30, !1),
                        (_this.smoke.visible = !1),
                        (_this.wheel = _this.group.create(-16, -27, "level6", "doorWheel instance 10000")),
                        _this.wheel.anchor.set(0.5),
                        (_this.lamps = Client.GameManager.instance.layerUpper.create(671, 173, "level6", "lamps instance 10000")),
                        _this.setParts("close"),
                        (_this.physics = new Phaser.Physics.Box2D.Body(game, null, 730, 393)),
                        _this.physics.setRectangle(20, 100),
                        (_this.physics.static = !0),
                        (_this.physics.sensor = !0),
                        _this
                    );
                }
                return (
                    __extends(Lvl6Door, _super),
                    (Lvl6Door.prototype.updateAnimation = function () {
                        "close" === this.currAnim &&
                            ((this.wheel.angle += 2),
                            1 === this.counterAnim
                                ? (Client.SoundManager.playSFX("s_lvl6_gateLoop", !0),
                                  (this.lamps.frameName = "lamps instance 10001"),
                                  this.startTween(this.part1, 70, { y: 100, scY: 1.15 }),
                                  this.startTween(this.part2, 70, { y: 45, scY: 1.15 }),
                                  this.startTween(this.part3, 70, { y: -10, scY: 1.15 }))
                                : 71 === this.counterAnim
                                ? (this.startTween(this.part1, 10, { y: 86, scY: 0.99 }),
                                  this.startTween(this.part2, 10, { y: 38, scY: 0.99 }),
                                  this.startTween(this.part3, 10, { y: -9, scY: 0.99 }),
                                  (this.smoke.visible = !0),
                                  this.smoke.play("anim"),
                                  (this.physics.sensor = !1),
                                  (this.closed = !0))
                                : 81 === this.counterAnim
                                ? (this.startTween(this.part1, 8, { y: 100, scY: 1.15 }), this.startTween(this.part2, 8, { y: 45, scY: 1.15 }), this.startTween(this.part3, 8, { y: -10, scY: 1.15 }))
                                : 89 === this.counterAnim && (this.animComplete(), (this.smoke.visible = !1), Client.SoundManager.stopSFXLoop("s_lvl6_gateLoop")));
                    }),
                    (Lvl6Door.prototype.setParts = function (value) {
                        "close" === value &&
                            (this.setPart(this.part1, { x: 0, y: -64, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part2, { x: 0, y: -64, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part3, { x: 0, y: -64, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl6Door.prototype.free = function () {
                        (this.group = null), (this.part3 = null), (this.part2 = null), (this.part1 = null), (this.smoke = null), (this.lamps = null), (this.wheel = null), (this.physics = null);
                    }),
                    Lvl6Door
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl6Door = Lvl6Door;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl6ElectricSwitch = (function (_super) {
                function Lvl6ElectricSwitch(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.handler = game.make.button(189, 305, "level6", _this.useHandler, _this, "switchHandler instance 10001", "switchHandler instance 10000", "switchHandler instance 10002", "switchHandler instance 10002")),
                        _this.handler.anchor.set(0.5),
                        Client.GameManager.instance.layerBackground.addChild(_this.handler),
                        (_this.door = Client.GameManager.instance.layerBackground.create(119, 247, "level6", "electricSwitch instance 10000")),
                        _this.door.animations.add("open", Phaser.Animation.generateFrameNames("electricSwitch instance 1", 4, 22, "", 4), 30, !1),
                        (_this.door.inputEnabled = !0),
                        (_this.door.input.useHandCursor = !0),
                        _this.door.events.onInputOver.add(_this.overDoor, _this),
                        _this.door.events.onInputOut.add(_this.outDoor, _this),
                        _this.door.events.onInputDown.add(_this.downDoor, _this),
                        _this
                    );
                }
                return (
                    __extends(Lvl6ElectricSwitch, _super),
                    (Lvl6ElectricSwitch.prototype.useHandler = function () {
                        (this.handler.inputEnabled = !1),
                            Client.Main.instance.add
                                .tween(this.handler)
                                .to({ y: this.handler.y - 20 }, 150, "Linear", !0)
                                .onComplete.add(this.moveComplete, this);
                    }),
                    (Lvl6ElectricSwitch.prototype.moveComplete = function () {
                        Client.GameManager.instance.level.bRoom.activate();
                    }),
                    (Lvl6ElectricSwitch.prototype.overDoor = function () {
                        this.door.frameName = "electricSwitch instance 10001";
                    }),
                    (Lvl6ElectricSwitch.prototype.outDoor = function () {
                        this.door.frameName = "electricSwitch instance 10000";
                    }),
                    (Lvl6ElectricSwitch.prototype.downDoor = function () {
                        (this.door.inputEnabled = !1), this.door.play("open"), Client.SoundManager.playSFX("s_lvl6_openSwitchBox");
                    }),
                    (Lvl6ElectricSwitch.prototype.free = function () {
                        (this.handler = null), (this.door = null);
                    }),
                    Lvl6ElectricSwitch
                );
            })(Client.BasicElement);
            Client.Lvl6ElectricSwitch = Lvl6ElectricSwitch;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl6FirePlace = (function (_super) {
                function Lvl6FirePlace(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.showCar = !1),
                        (_this.counterAnim = 0),
                        (_this.fire = Client.GameManager.instance.layerBackground.create(625, 430, "level6", "Fire instance 10000")),
                        _this.fire.animations.add("anim", Phaser.Animation.generateFrameNames("Fire instance 1", 0, 80, "", 4), 30, !0),
                        _this.fire.play("anim"),
                        _this.fire.anchor.set(0.5, 1),
                        (_this.smoke = Client.GameManager.instance.layerBackground.create(617, 86, "level6", "smoke instance 10000")),
                        _this.smoke.animations.add("anim", Phaser.Animation.generateFrameNames("smoke instance 1", 9, 24, "", 4), 60, !0),
                        _this.smoke.play("anim"),
                        (_this.smoke.angle = 0),
                        _this.smoke.anchor.set(0.5, 1),
                        game.add.tween(_this.smoke).to({ angle: -7 }, 1500, "Linear", !0, 0, -1, !0),
                        (_this.group = game.make.group()),
                        (_this.group.x = 607),
                        (_this.group.y = 23),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        Client.GameManager.instance.level.addQuestCar(0, 0, _this.group),
                        Client.GameManager.instance.level.questCar && ((Client.GameManager.instance.level.questCar.alpha = 0), (Client.GameManager.instance.level.questCar.inputEnabled = !1)),
                        Client.SoundManager.playSFX("s_lvl6_fireAmbient", !0),
                        _this
                    );
                }
                return (
                    __extends(Lvl6FirePlace, _super),
                    (Lvl6FirePlace.prototype.fireBoost = function () {
                        Client.SoundManager.playSFX("s_lvl6_fireIncreace"),
                            Client.Main.instance.add.tween(this.fire.scale).to({ x: 1.3, y: 1.3 }, 200, "Linear", !0),
                            Client.Main.instance.add.tween(this.smoke).to({ y: this.smoke.y + 8 }, 200, "Linear", !0),
                            Client.Main.instance.add.tween(this.smoke.scale).to({ x: 1.4, y: 1.2 }, 200, "Linear", !0).onComplete.add(this.increaseFire, this);
                    }),
                    (Lvl6FirePlace.prototype.increaseFire = function () {
                        !1 === Client.GameManager.instance.level.questCarFounded && (this.showCar = !0),
                            Client.Main.instance.add
                                .tween(this.fire.scale)
                                .to({ x: 1.45, y: 1.45 }, 150, "Linear", !0, 0, 8, !0)
                                .onComplete.add(function () {
                                    Client.Main.instance.add.tween(this.smoke).to({ y: this.smoke.y - 8 }, 200, "Linear", !0, 1500),
                                        Client.Main.instance.add.tween(this.fire.scale).to({ x: 1, y: 1 }, 200, "Linear", !0, 1500),
                                        Client.Main.instance.add.tween(this.smoke.scale).to({ x: 1, y: 1 }, 200, "Linear", !0, 1500);
                                }, this);
                    }),
                    (Lvl6FirePlace.prototype.update = function () {
                        this.updateAnimation();
                    }),
                    (Lvl6FirePlace.prototype.setPart = function (part, properties, smartRotation) {
                        if ((void 0 === smartRotation && (smartRotation = !0), part)) {
                            part.visible = !0;
                            for (var _i = 0, _a = Object.keys(properties); _i < _a.length; _i++) {
                                var itemName = _a[_i];
                                if (!0 === smartRotation && "skX" === itemName) {
                                    var rotation = properties[itemName] % 360;
                                    180 < rotation ? (rotation -= 360) : rotation < -180 && (rotation += 360), (part.angle = rotation);
                                } else part[itemName] = properties[itemName];
                            }
                            Client.SimpleTweenManager.stop(part);
                        }
                    }),
                    (Lvl6FirePlace.prototype.updateAnimation = function () {
                        this.showCar &&
                            (this.counterAnim++,
                            3 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 36, y: 24, skX: -15, skY: -15, alpha: 0.2 }, !0)
                                : 5 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 45, y: 19, skX: -30, skY: -30, alpha: 0.4 }, !0)
                                : 7 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 55, y: 18, skX: -45, skY: -45, alpha: 0.6 }, !0)
                                : 9 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 64, y: 21, skX: -60, skY: -60, alpha: 0.8 }, !0)
                                : 11 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 71, y: 29, skX: -75, skY: -75, alpha: 1 }, !0)
                                : 13 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 74, y: 34, skX: -85, skY: -85 }, !0)
                                : 15 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 76, y: 40, skX: -95, skY: -95 }, !0)
                                : 17 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 78, y: 45, skX: -106, skY: -106 }, !0)
                                : 19 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 79, y: 51, skX: -116, skY: -116 }, !0)
                                : 21 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 81, y: 57, skX: -126, skY: -126 }, !0)
                                : 23 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 82, y: 62, skX: -136, skY: -136 }, !0)
                                : 25 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 83, y: 68, skX: -146, skY: -146 }, !0)
                                : 27 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { y: 74, skX: -156, skY: -156 }, !0)
                                : 29 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 84, y: 80, skX: -178, skY: -178 }, !0)
                                : 31 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 85, y: 85, skX: 160, skY: 160 }, !0)
                                : 33 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { y: 91, skX: 138, skY: 138 }, !0)
                                : 35 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { y: 97, skX: 117, skY: 117 }, !0)
                                : 37 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 86, y: 102, skX: 95, skY: 95 }, !0)
                                : 39 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { y: 108, skX: 73, skY: 73 }, !0)
                                : 41 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { y: 114, skX: 51, skY: 51 }, !0)
                                : 43 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 87, y: 119, skX: 30, skY: 30 }, !0)
                                : 45 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 91, y: 118 }, !0)
                                : 47 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 97, y: 117 }, !0)
                                : 49 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 103, y: 120 }, !0)
                                : 51 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 106, y: 123 }, !0)
                                : 53 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 108, y: 127 }, !0)
                                : 55 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 109, y: 132 }, !0)
                                : 57 === this.counterAnim
                                ? this.setPart(Client.GameManager.instance.level.questCar, { x: 110, y: 136 }, !0)
                                : 59 === this.counterAnim && ((Client.GameManager.instance.level.questCar.inputEnabled = !0), (Client.GameManager.instance.level.questCar.input.useHandCursor = !0)));
                    }),
                    (Lvl6FirePlace.prototype.setParts = function (value) {
                        this.setPart(Client.GameManager.instance.level.questCar, { x: 30, y: 31, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 0 }, !0);
                    }),
                    (Lvl6FirePlace.prototype.free = function () {
                        (this.smoke = null), (this.fire = null), (this.group = null);
                    }),
                    Lvl6FirePlace
                );
            })(Client.BasicElement);
            Client.Lvl6FirePlace = Lvl6FirePlace;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl6Owl = (function (_super) {
                function Lvl6Owl(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = 559),
                        (_this.group.y = 60),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.body = new Client.SASprite(game, 0, 0, "level6", "owlBody instance 10000")),
                        _this.body.pivot.set(0, 0),
                        _this.group.addChild(_this.body),
                        (_this.eyes = game.make.sprite(1, 4, "level6", "owlEyes instance 10000")),
                        _this.eyes.animations.add("idle", Phaser.Animation.generateFrameNames("owlEyes instance 1", 0, 158, "", 4), 30, !0),
                        _this.eyes.play("idle"),
                        _this.body.addChild(_this.eyes),
                        (_this.wing2 = new Client.SASprite(game, 0, 0, "level6", "owlWing2 instance 10000")),
                        _this.wing2.pivot.set(0, 0),
                        _this.group.addChild(_this.wing2),
                        (_this.wing1 = new Client.SASprite(game, 0, 0, "level6", "owlWing1 instance 10000")),
                        _this.wing1.pivot.set(0, 0),
                        _this.group.addChild(_this.wing1),
                        _this.playAnim("idle", -1),
                        _this
                    );
                }
                return (
                    __extends(Lvl6Owl, _super),
                    (Lvl6Owl.prototype.updateAnimation = function () {
                        "idle" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (this.startTween(this.wing1, 28, { y: 23, skX: -8, skY: -8 }), this.startTween(this.wing2, 28, { x: -10, y: 21, skX: 7, skY: 7 }), this.startTween(this.body, 28, { y: 2 }))
                                : 29 === this.counterAnim
                                ? (this.startTween(this.wing1, 26, { y: 20, skX: 0, skY: 0 }), this.startTween(this.wing2, 26, { x: -11, y: 18, skX: 0, skY: 0 }), this.startTween(this.body, 26, { y: 0 }))
                                : 55 === this.counterAnim
                                ? (this.startTween(this.wing1, 28, { y: 23, skX: -8, skY: -8 }), this.startTween(this.wing2, 28, { x: -10, y: 21, skX: 7, skY: 7 }), this.startTween(this.body, 28, { y: 2 }))
                                : 83 === this.counterAnim
                                ? (this.startTween(this.wing1, 26, { y: 20, skX: 0, skY: 0 }), this.startTween(this.wing2, 26, { x: -11, y: 18, skX: 0, skY: 0 }), this.startTween(this.body, 26, { y: 0 }))
                                : 135 === this.counterAnim && this.animComplete()
                            : "fear" === this.currAnim &&
                              (1 === this.counterAnim
                                  ? (Client.SoundManager.playSFX("s_lvl6_owl"), this.setPart(this.wing1, { y: 23, skX: -8, skY: -8 }), this.setPart(this.wing2, { x: -10, y: 21, skX: 7, skY: 7 }), this.setPart(this.body, { y: 2 }))
                                  : 3 === this.counterAnim
                                  ? (this.startTween(this.wing1, 34, { y: 20, skX: 0, skY: 0 }), this.startTween(this.wing2, 34, { x: -11, y: 18, skX: 0, skY: 0 }), this.startTween(this.body, 34, { y: 0 }))
                                  : 37 === this.counterAnim
                                  ? (this.startTween(this.wing1, 6, { y: 25, scY: 0.83 }), this.startTween(this.wing2, 6, { y: 24, scY: 0.83 }), this.startTween(this.body, 6, { y: 8, scY: 0.83 }))
                                  : 43 === this.counterAnim
                                  ? (this.startTween(this.wing1, 12, { y: -11, skX: -30, skY: -30, scY: 1 }), this.startTween(this.wing2, 12, { x: -8, y: -18, skX: 30, skY: 30, scY: 1 }), this.startTween(this.body, 12, { y: -30, scY: 1 }))
                                  : 55 === this.counterAnim
                                  ? (this.startTween(this.wing1, 8, { y: -17 }), this.startTween(this.wing2, 8, { y: -24 }), this.startTween(this.body, 8, { y: -36 }))
                                  : 63 === this.counterAnim
                                  ? (this.startTween(this.wing1, 10, { x: 28, y: -14, skX: -60, skY: -60 }), this.startTween(this.wing2, 10, { x: -5, y: -27, skX: 60, skY: 60 }))
                                  : 73 === this.counterAnim
                                  ? (this.startTween(this.wing1, 44, { x: 26, y: 26, skX: -30, skY: -30 }), this.startTween(this.wing2, 44, { x: -9, y: 17, skX: 30, skY: 30 }), this.startTween(this.body, 44, { y: 0 }))
                                  : 117 === this.counterAnim
                                  ? (this.startTween(this.wing1, 8, { x: 27, y: 24, skX: 0, skY: 0, scY: 0.88 }),
                                    this.startTween(this.wing2, 8, { x: -11, y: 23, skX: 0, skY: 0, scY: 0.88 }),
                                    this.startTween(this.body, 8, { y: 6, scY: 0.88 }))
                                  : 125 === this.counterAnim
                                  ? (this.startTween(this.wing1, 6, { x: 26, y: 26, skX: -30, skY: -30, scY: 1 }), this.startTween(this.wing2, 6, { x: -9, y: 17, skX: 30, skY: 30, scY: 1 }), this.startTween(this.body, 12, { y: 0, scY: 1 }))
                                  : 131 === this.counterAnim
                                  ? (this.startTween(this.wing1, 6, { x: 27, y: 20, skX: 0, skY: 0 }), this.startTween(this.wing2, 6, { x: -11, y: 18, skX: 0, skY: 0 }))
                                  : 137 === this.counterAnim && (this.animComplete(), this.playAnim("idle", -1)));
                    }),
                    (Lvl6Owl.prototype.setParts = function (value) {
                        "idle" === value
                            ? (this.setPart(this.wing1, { x: 27, y: 20, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.wing2, { x: -11, y: 18, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.body, { x: 0, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }))
                            : "fear" === value &&
                              (this.setPart(this.wing1, { x: 27, y: 20, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.wing2, { x: -11, y: 18, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.body, { x: 0, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl6Owl.prototype.free = function () {
                        (this.group = null), (this.body = null), (this.wing2 = null), (this.wing1 = null);
                    }),
                    Lvl6Owl
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl6Owl = Lvl6Owl;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl6Photo = (function (_super) {
                function Lvl6Photo(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.showed = !1),
                        (_this.collect = !1),
                        (_this.startUpdate = !1),
                        (_this.group = game.make.group()),
                        (_this.group.x = 395),
                        (_this.group.y = 335),
                        Client.GameManager.instance.layerUpper.addChild(_this.group),
                        (_this.photo = new Client.SASprite(game, 0, 0, "level6", "photo instance 10000")),
                        _this.photo.pivot.set(0, 0),
                        _this.photo.scale.set(0.25),
                        _this.group.addChild(_this.photo),
                        _this.setParts("fall"),
                        _this
                    );
                }
                return (
                    __extends(Lvl6Photo, _super),
                    (Lvl6Photo.prototype.setPhotoPos = function (_x, _y) {
                        (this.group.x = _x), (this.group.y = _y), (this.startUpdate = !0);
                    }),
                    (Lvl6Photo.prototype.update = function () {
                        (_super.prototype.update.call(this), this.startUpdate) &&
                            (this.collect ||
                                (Client.Tools.distance(this.group.x + this.photo.x, this.group.y + this.photo.y, Client.GameManager.instance.hero.bodyBase.x, Client.GameManager.instance.hero.bodyBase.y) < 50 &&
                                    ((this.collect = !0), this.playAnim("show"), Client.GameManager.instance.hero.setEnableMotor(!1), Client.LevelBuilder.instance.levelComplete(120), this.tween.stop(), (this.photo.alpha = 1))));
                    }),
                    (Lvl6Photo.prototype.updateAnimation = function () {
                        "fall" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (Client.SoundManager.playSFX("s_lvl6_photoFall"), (this.tween = Client.Main.instance.add.tween(this.photo).to({ alpha: 0.6 }, 300, "Linear", !0, 0, -1, !0)), this.startTween(this.photo, 8, { x: 7, y: 3 }))
                                : 9 === this.counterAnim
                                ? this.startTween(this.photo, 4, { x: -4, y: -5 })
                                : 13 === this.counterAnim
                                ? this.startTween(this.photo, 6, { x: -26, y: -18 })
                                : 19 === this.counterAnim
                                ? this.startTween(this.photo, 10, { x: -44, y: -10 })
                                : 29 === this.counterAnim
                                ? this.startTween(this.photo, 10, { x: -60, y: 22 })
                                : 39 === this.counterAnim
                                ? this.startTween(this.photo, 8, { x: -73, y: 58 })
                                : 111 === this.counterAnim && this.animComplete()
                            : "show" === this.currAnim && (1 === this.counterAnim ? ((this.showed = !0), this.startTween(this.photo, 42, { x: -194, y: -123, scX: 1, scY: 1 })) : 81 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl6Photo.prototype.setParts = function (value) {
                        "fall" === value
                            ? this.setPart(this.photo, { x: 20, y: 35, angle: 0, scX: 0.25, scY: 0.25, skX: 0, skY: 0, alpha: 1 })
                            : "show" === value && this.setPart(this.photo, { x: -73, y: 58, angle: 0, scX: 0.25, scY: 0.25, skX: 0, skY: 0, alpha: 1 });
                    }),
                    (Lvl6Photo.prototype.free = function () {
                        (this.group = null), (this.photo = null);
                    }),
                    Lvl6Photo
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl6Photo = Lvl6Photo;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl6Vase = (function (_super) {
                function Lvl6Vase(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = 190),
                        (_this.group.y = 237),
                        Client.GameManager.instance.layerUpper.addChild(_this.group),
                        (_this.vase = new Client.SASprite(game, 0, 0, "level6", "vase instance 10000")),
                        _this.vase.pivot.set(0, 0),
                        (_this.vase.inputEnabled = !0),
                        (_this.vase.input.useHandCursor = !0),
                        _this.vase.events.onInputOver.add(_this.overVase, _this),
                        _this.group.addChild(_this.vase),
                        (_this.vaseAnim = game.make.sprite(46, 194, "level6", "vaseAnim instance 10000")),
                        _this.vaseAnim.animations.add("use", Phaser.Animation.generateFrameNames("vaseAnim instance 1", 0, 10, "", 4), 30, !1),
                        (_this.vaseAnim.visible = !1),
                        _this.vaseAnim.anchor.set(0.5),
                        _this.group.addChild(_this.vaseAnim),
                        _this.setParts("anim"),
                        _this
                    );
                }
                return (
                    __extends(Lvl6Vase, _super),
                    (Lvl6Vase.prototype.overVase = function () {
                        (this.vase.inputEnabled = !1), this.playAnim("anim");
                    }),
                    (Lvl6Vase.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? this.startTween(this.vase, 18, { x: 52, y: 14, skX: 79, skY: 79 }, !0)
                                : 19 === this.counterAnim
                                ? this.startTween(this.vase, 12, { x: 67, y: 75, skX: 124, skY: 124 }, !0)
                                : 31 === this.counterAnim
                                ? this.startTween(this.vase, 10, { x: 60, y: 158, skX: 169, skY: 169 }, !0)
                                : 41 === this.counterAnim
                                ? this.startTween(this.vase, 10, { y: 205 }, !0)
                                : 51 === this.counterAnim
                                ? this.startTween(this.vase, 4, { x: 66, y: 209, skX: 161, skY: 161, alpha: 0 }, !0)
                                : 55 === this.counterAnim && (this.animComplete(), Client.SoundManager.playSFX("s_lvl6_vaseFall"), (this.vaseAnim.visible = !0), this.vaseAnim.play("use"), Client.GameManager.instance.level.car.scareCar()));
                    }),
                    (Lvl6Vase.prototype.setParts = function (value) {
                        "anim" === value && this.setPart(this.vase, { x: 14, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0);
                    }),
                    (Lvl6Vase.prototype.free = function () {
                        (this.group = null), (this.vase = null), (this.vaseAnim = null);
                    }),
                    Lvl6Vase
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl6Vase = Lvl6Vase;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl6Wires = (function (_super) {
                function Lvl6Wires(game) {
                    var _this = _super.call(this) || this;
                    (_this.wires = new Array()),
                        (_this.switch1State = 1),
                        (_this.switch2State = 1),
                        (_this.worked = !1),
                        (_this.pressed = !1),
                        (_this.switch1 = Client.GameManager.instance.layerBackground.create(258, 151, "level6", "switch1 instance 10000")),
                        (_this.switch1.inputEnabled = !0),
                        (_this.switch1.input.useHandCursor = !0),
                        _this.switch1.events.onInputOver.add(_this.over, _this),
                        _this.switch1.events.onInputOut.add(_this.out, _this),
                        _this.switch1.events.onInputDown.add(_this.down1, _this),
                        (_this.switch1Wire1 = game.make.sprite(22, 26, "level6", "switchWire instance 10000")),
                        _this.switch1Wire1.anchor.set(0.5),
                        _this.switch1.addChild(_this.switch1Wire1),
                        (_this.switch1Wire2 = game.make.sprite(22, 48, "level6", "switchWire instance 10000")),
                        _this.switch1Wire2.anchor.set(0.5),
                        _this.switch1.addChild(_this.switch1Wire2),
                        (_this.switch2 = Client.GameManager.instance.layerBackground.create(304, 151, "level6", "switch1 instance 10000")),
                        (_this.switch2.inputEnabled = !0),
                        (_this.switch2.input.useHandCursor = !0),
                        _this.switch2.events.onInputOver.add(_this.over, _this),
                        _this.switch2.events.onInputOut.add(_this.out, _this),
                        _this.switch2.events.onInputDown.add(_this.down2, _this),
                        (_this.switch2Wire1 = game.make.sprite(22, 26, "level6", "switchWire instance 10000")),
                        _this.switch2Wire1.anchor.set(0.5),
                        _this.switch2.addChild(_this.switch2Wire1);
                    for (
                        var pos = [
                                [147, 409],
                                [171, 191],
                                [186, 202],
                                [301, 153],
                                [301, 175],
                                [392, 142],
                                [375, 174],
                                [587, 155],
                            ],
                            i = 0;
                        i < 8;
                        i++
                    ) {
                        var wire = Client.GameManager.instance.layerBackground.create(pos[i][0], pos[i][1], "level6", "wire" + i + " instance 10000");
                        wire.anchor.set(0.5), _this.wires.push(wire), (wire.visible = !1);
                    }
                    return (
                        (_this.button = Client.GameManager.instance.layerBackground.create(471, 161, "level6", "redBTN instance 10000")),
                        _this.button.anchor.set(0.5),
                        _this.button.animations.add("press", Phaser.Animation.generateFrameNames("redBTN instance 1", 3, 10, "", 4), 30, !1),
                        _this.button.animations.add("up", Phaser.Animation.generateFrameNames("redBTN instance 1", 11, 19, "", 4), 30, !1).onComplete.add(function () {
                            (this.button.inputEnabled = !1), (this.button.frameName = "redBTN instance 10000");
                        }, _this),
                        _this.button.events.onInputOver.add(_this.buttonOver, _this),
                        _this.button.events.onInputOut.add(_this.buttonOut, _this),
                        _this.button.events.onInputDown.add(_this.buttonDown, _this),
                        _this.button.events.onInputUp.add(_this.buttonUp, _this),
                        _this
                    );
                }
                return (
                    __extends(Lvl6Wires, _super),
                    (Lvl6Wires.prototype.buttonOver = function () {
                        this.pressed || (this.button.frameName = "redBTN instance 10002");
                    }),
                    (Lvl6Wires.prototype.buttonOut = function () {
                        this.pressed || (this.button.frameName = "redBTN instance 10001");
                    }),
                    (Lvl6Wires.prototype.buttonDown = function () {
                        (this.pressed = !0), Client.GameManager.instance.level.door.playAnim("close"), this.button.play("press");
                    }),
                    (Lvl6Wires.prototype.buttonUp = function () {
                        this.button.play("up");
                    }),
                    (Lvl6Wires.prototype.over = function (_sprite) {
                        _sprite.frameName = "switch1 instance 10001";
                    }),
                    (Lvl6Wires.prototype.out = function (_sprite) {
                        _sprite.frameName = "switch1 instance 10000";
                    }),
                    (Lvl6Wires.prototype.down1 = function () {
                        (this.switch1.inputEnabled = !1),
                            0 === this.switch1State
                                ? ((this.switch1State = 1), Client.Main.instance.add.tween(this.switch1).to({ y: 151 }, 200, "Linear", !0).onComplete.add(this.inpEnable1, this))
                                : 1 === this.switch1State
                                ? ((this.switch1State = 2), Client.Main.instance.add.tween(this.switch1).to({ y: 129 }, 200, "Linear", !0).onComplete.add(this.inpEnable1, this))
                                : ((this.switch1State = 0), Client.Main.instance.add.tween(this.switch1).to({ y: 169 }, 200, "Linear", !0).onComplete.add(this.inpEnable1, this));
                    }),
                    (Lvl6Wires.prototype.inpEnable1 = function () {
                        this.moveSwitch(), (this.switch1.inputEnabled = !0), (this.switch1.input.useHandCursor = !0);
                    }),
                    (Lvl6Wires.prototype.down2 = function () {
                        (this.switch2.inputEnabled = !1),
                            0 === this.switch2State
                                ? ((this.switch2State = 1), Client.Main.instance.add.tween(this.switch2).to({ y: 151 }, 200, "Linear", !0).onComplete.add(this.inpEnable2, this))
                                : 1 === this.switch2State && ((this.switch2State = 0), Client.Main.instance.add.tween(this.switch2).to({ y: 129 }, 200, "Linear", !0).onComplete.add(this.inpEnable2, this));
                    }),
                    (Lvl6Wires.prototype.inpEnable2 = function () {
                        this.moveSwitch(), (this.switch2.inputEnabled = !0), (this.switch2.input.useHandCursor = !0);
                    }),
                    (Lvl6Wires.prototype.activate = function () {
                        (this.worked = !0), this.moveSwitch();
                    }),
                    (Lvl6Wires.prototype.deactivate = function () {
                        this.worked = !1;
                        for (var i = 0; i < this.wires.length; i++) this.wires[i].visible = !1;
                        (this.switch1Wire1.frameName = "switchWire instance 10000"),
                            (this.switch1Wire2.frameName = "switchWire instance 10000"),
                            (this.switch2Wire1.frameName = "switchWire instance 10000"),
                            this.pressed || ((this.button.inputEnabled = !1), (this.button.frameName = "redBTN instance 10000"));
                    }),
                    (Lvl6Wires.prototype.moveSwitch = function () {
                        this.worked &&
                            ((this.wires[0].frameName = "wire0 instance 10001"),
                            (this.wires[0].visible = !0),
                            (this.wires[1].visible = !0),
                            (this.wires[2].visible = !0),
                            0 === this.switch1State
                                ? ((this.switch1Wire1.frameName = "switchWire instance 10000"),
                                  (this.switch1Wire2.frameName = "switchWire instance 10000"),
                                  (this.wires[3].visible = !1),
                                  (this.wires[4].visible = !1),
                                  (this.switch2Wire1.frameName = "switchWire instance 10000"),
                                  (this.wires[5].visible = !1),
                                  (this.wires[6].visible = !1),
                                  (this.wires[7].visible = !1))
                                : 1 === this.switch1State
                                ? ((this.wires[4].visible = !0),
                                  (this.switch1Wire1.frameName = "switchWire instance 10001"),
                                  1 === this.switch2State
                                      ? ((this.wires[6].visible = !0), (this.switch2Wire1.frameName = "switchWire instance 10001"), Client.GameManager.instance.level.alert.playAnim("anim", -1))
                                      : ((this.wires[6].visible = !1), (this.switch2Wire1.frameName = "switchWire instance 10000")))
                                : 2 === this.switch1State &&
                                  ((this.wires[3].visible = !0),
                                  (this.wires[4].visible = !0),
                                  (this.switch1Wire1.frameName = "switchWire instance 10001"),
                                  (this.switch1Wire2.frameName = "switchWire instance 10001"),
                                  (this.switch2Wire1.frameName = "switchWire instance 10001"),
                                  0 === this.switch2State
                                      ? ((this.wires[5].visible = !0), (this.wires[7].visible = !0), (this.wires[6].visible = !1), this.pressed || ((this.button.inputEnabled = !0), (this.button.input.useHandCursor = !0), this.buttonOut()))
                                      : ((this.wires[5].visible = !1), (this.wires[7].visible = !1), (this.wires[6].visible = !0), Client.GameManager.instance.level.alert.playAnim("anim", -1))));
                    }),
                    (Lvl6Wires.prototype.free = function () {
                        (this.wires = []), (this.wires = null), (this.switch1 = null), (this.switch2 = null), (this.switch1Wire1 = null), (this.switch1Wire2 = null), (this.switch2Wire1 = null), (this.button = null);
                    }),
                    Lvl6Wires
                );
            })(Client.BasicElement);
            Client.Lvl6Wires = Lvl6Wires;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Level6Wood = (function (_super) {
                function Level6Wood(game) {
                    var _this = _super.call(this) || this;
                    (_this.group = game.make.group()),
                        (_this.group.x = 628),
                        (_this.group.y = 306),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.wood2 = new Client.SASprite(game, 0, 0, "level6", "fireWood1 instance 10000")),
                        _this.wood2.pivot.set(0, 0),
                        _this.group.addChild(_this.wood2),
                        (_this.wood1 = new Client.SASprite(game, 0, 0, "level6", "fireWood1 instance 10000")),
                        _this.wood1.pivot.set(0, 0),
                        _this.group.addChild(_this.wood1);
                    var mask = new Phaser.Graphics(game, 0, 0);
                    return (
                        mask.beginFill(0, 0),
                        mask.drawRect(-30, -20, 60, 40),
                        mask.endFill(),
                        (mask.inputEnabled = !0),
                        (mask.input.useHandCursor = !0),
                        mask.events.onInputDown.add(_this.fall, _this),
                        mask.events.onInputOver.add(_this.over, _this),
                        mask.events.onInputOut.add(_this.out, _this),
                        _this.group.addChild(mask),
                        (mask = null),
                        _this.setParts("anim"),
                        _this
                    );
                }
                return (
                    __extends(Level6Wood, _super),
                    (Level6Wood.prototype.fall = function (_sprite) {
                        (_sprite.inputEnabled = !1), this.playAnim("anim"), this.out(), Client.SoundManager.playSFX("s_lvl6_firewoodsFall");
                    }),
                    (Level6Wood.prototype.over = function () {
                        (this.wood1.frameName = "fireWood1 instance 10001"), (this.wood2.frameName = "fireWood1 instance 10001");
                    }),
                    (Level6Wood.prototype.out = function () {
                        (this.wood1.frameName = "fireWood1 instance 10000"), (this.wood2.frameName = "fireWood1 instance 10000");
                    }),
                    (Level6Wood.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? this.startTween(this.wood1, 10, { y: 9, skX: 4, skY: -176 }, !0)
                                : 5 === this.counterAnim
                                ? this.startTween(this.wood2, 12, { x: -27, y: 33, skX: -30, skY: -30 }, !0)
                                : 11 === this.counterAnim
                                ? this.startTween(this.wood1, 8, { x: 27, y: 66, skX: 49, skY: -131 }, !0)
                                : 17 === this.counterAnim
                                ? this.startTween(this.wood2, 6, { x: -31, y: 73 }, !0)
                                : 19 === this.counterAnim
                                ? this.startTween(this.wood1, 6, { x: 34, y: 105, skX: 19, skY: -161, alpha: 0.7 }, !0)
                                : 23 === this.counterAnim
                                ? this.startTween(this.wood2, 6, { x: -36, y: 105, skX: -15, skY: -15, alpha: 0.7 }, !0)
                                : 27 === this.counterAnim
                                ? (this.wood1.visible = !1)
                                : 31 === this.counterAnim && (this.animComplete(), (this.wood1.visible = !1), (this.wood2.visible = !1), Client.GameManager.instance.level.fire.fireBoost()));
                    }),
                    (Level6Wood.prototype.setParts = function (value) {
                        "anim" === value &&
                            (this.setPart(this.wood1, { x: 25, y: -17, angle: 0, scX: 1, scY: 1, skX: -11, skY: 169, alpha: 1 }, !0), this.setPart(this.wood2, { x: -30, y: -19, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0));
                    }),
                    (Level6Wood.prototype.free = function () {
                        (this.group = null), (this.wood2 = null), (this.wood1 = null);
                    }),
                    Level6Wood
                );
            })(Client.BasicSimpleAnim);
            Client.Level6Wood = Level6Wood;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl6ZZZ = (function (_super) {
                function Lvl6ZZZ(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = 445),
                        (_this.group.y = 355),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.zzz = new Client.SASprite(game, 0, 0, "level6", "zzz instance 10000")),
                        _this.zzz.pivot.set(0, 0),
                        _this.group.addChild(_this.zzz),
                        _this.playAnim("sleep", -1),
                        _this
                    );
                }
                return (
                    __extends(Lvl6ZZZ, _super),
                    (Lvl6ZZZ.prototype.updateAnimation = function () {
                        "sleep" === this.currAnim &&
                            (1 === this.counterAnim
                                ? this.startTween(this.zzz, 32, { x: -1, y: -31, skX: 30, skY: 30, alpha: 0.79 })
                                : 33 === this.counterAnim
                                ? this.startTween(this.zzz, 30, { x: -19, y: -42, skX: -30, skY: -30, alpha: 0.57 })
                                : 63 === this.counterAnim
                                ? this.startTween(this.zzz, 26, { x: -28, y: -68, skX: 30, skY: 30, alpha: 0 })
                                : 89 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl6ZZZ.prototype.setParts = function (value) {
                        "sleep" === value && this.setPart(this.zzz, { x: 0, y: 0, angle: 0, scX: 0.82, scY: 1.26, skX: 0, skY: 0, alpha: 1 });
                    }),
                    (Lvl6ZZZ.prototype.free = function () {
                        (this.group = null), (this.zzz = null);
                    }),
                    Lvl6ZZZ
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl6ZZZ = Lvl6ZZZ;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl7Map = (function (_super) {
                function Lvl7Map(game) {
                    var _this = _super.call(this) || this;
                    (_this.streetMask = [0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0]),
                        (_this.treeMask = [1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 1, 1, 0, 1, 0, 1, 0, 1, 0, 1, 1, 0, 0, 1]),
                        (_this.birdMask = [0, 0, 0, 1, 0, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 1, 1]),
                        (_this.phoneMask = [0, 1, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 1, 1, 1, 1, 1, 0, 0]),
                        (_this.trainMask = [0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 1, 1, 1]),
                        (_this.gasMask = [0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]),
                        (_this.searchItem1 = 0),
                        (_this.searchItem2 = 0),
                        (_this.searchItem3 = 0),
                        (_this.mainSearch = 0),
                        (_this.findGas = !1),
                        (_this.findStreet = !1),
                        (_this.findTrain = !1),
                        (_this.currentType = 0),
                        (_this.kindType = 0),
                        (_this.dragPhotoElement1 = -1),
                        (_this.dragPhotoElement2 = -1),
                        (_this.dragPhotoElement3 = -1),
                        (_this.mapShowed = !1),
                        (_this.mapOpened = !1),
                        (_this.group = game.make.group()),
                        (_this.group.x = 645),
                        (_this.group.y = 310),
                        (_this.group.visible = !1),
                        Client.GameManager.instance.layerUpper.addChild(_this.group);
                    var mask = new Phaser.Graphics(game, 5, 5);
                    return (
                        mask.beginFill(0, 0.5),
                        mask.drawRoundedRect(0, 0, 134, 107, 20),
                        mask.endFill(),
                        (_this.btn = game.make.sprite(_this.group.x + 55, _this.group.y + 45, "level7", "mapButton instance 10000")),
                        _this.btn.animations.add("over", Phaser.Animation.generateFrameNames("mapButton instance 1", 0, 5, "", 4), 30, !1),
                        _this.btn.animations.add("out", Phaser.Animation.generateFrameNames("mapButton instance 1", 5, 10, "", 4), 30, !1),
                        (_this.btn.inputEnabled = !0),
                        (_this.btn.input.useHandCursor = !0),
                        _this.btn.events.onInputOver.add(_this.overPhoto, _this),
                        _this.btn.events.onInputOut.add(_this.outPhoto, _this),
                        _this.btn.events.onInputDown.add(_this.downPhoto, _this),
                        (_this.btn.visible = !1),
                        Client.GameManager.instance.layerUpper.addChild(_this.btn),
                        (_this.part8 = new Client.SASprite(game, 0, 0, "level7", "mapMain instance 10000")),
                        _this.part8.pivot.set(0, 0),
                        (_this.part8.mask = mask),
                        _this.group.addChild(_this.part8),
                        (_this.part7 = new Client.SASprite(game, 0, 0, "level7", "screenEffect instance 10000")),
                        _this.part7.pivot.set(0, 0),
                        (_this.part7.mask = mask),
                        _this.group.addChild(_this.part7),
                        (_this.part6 = new Client.SASprite(game, 0, 0, "level7", "bottomPanel instance 10000")),
                        _this.part6.pivot.set(0, 0),
                        _this.group.addChild(_this.part6),
                        (_this.part5 = new Client.SASprite(game, 0, 0, "level7", "ramka instance 10000")),
                        _this.part5.pivot.set(0, 0),
                        _this.group.addChild(_this.part5),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "level7", "Lvl7MapAngle instance 10000")),
                        _this.part4.pivot.set(0, 0),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level7", "Lvl7MapAngle instance 10000")),
                        _this.part3.pivot.set(0, 0),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level7", "Lvl7MapAngle instance 10000")),
                        _this.part2.pivot.set(0, 0),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level7", "Lvl7MapAngle instance 10000")),
                        _this.part1.pivot.set(0, 0),
                        _this.group.addChild(_this.part1),
                        _this.part5.addChild(mask),
                        _this.setParts("show"),
                        (_this.mapElements = new Client.Lvl7MapElements(game, _this.part8)),
                        Client.GameManager.instance.level.updateElements.push(_this.mapElements),
                        _this.createButton(),
                        (_this.currentItem = Client.GameManager.instance.layerUpper.create(Client.Main.instance.input.activePointer.x, Client.Main.instance.input.activePointer.y, "level7", "dragObject instance 10000")),
                        _this.currentItem.anchor.set(0.5),
                        (_this.currentItem.visible = !1),
                        (_this.currentItem.inputEnabled = !0),
                        (_this.currentItem.input.useHandCursor = !0),
                        _this.addItems(),
                        _this
                    );
                }
                return (
                    __extends(Lvl7Map, _super),
                    (Lvl7Map.prototype.showMap = function () {
                        this.btn.visible = !0;
                    }),
                    (Lvl7Map.prototype.overPhoto = function () {
                        this.btn.play("over");
                    }),
                    (Lvl7Map.prototype.outPhoto = function () {
                        this.btn.play("out");
                    }),
                    (Lvl7Map.prototype.downPhoto = function () {
                        (this.btn.visible = !1), (this.btn.inputEnabled = !1), (this.group.visible = !0), this.openMap();
                    }),
                    (Lvl7Map.prototype.addDragObject = function (_id, _name) {
                        this.mapOpened || this.openMap(),
                            (this.kindType = this.GetItemKind(_name)),
                            (this.currentType = _id),
                            (this.currentItem.visible = !0),
                            (this.currentItem.x = Client.Main.instance.input.activePointer.x),
                            (this.currentItem.y = Client.Main.instance.input.activePointer.y),
                            (this.currentItem.frameName = "dragObject instance 1000" + _id),
                            Client.GameManager.instance.layerUpper.setChildIndex(this.currentItem, Client.GameManager.instance.layerUpper.length - 1);
                    }),
                    (Lvl7Map.prototype.addItems = function () {
                        (this.item1 = Client.GameManager.instance.layerUpper.create(0, 0, "level7", "dragObject instance 10000")),
                            this.item1.anchor.set(0.5),
                            (this.item1.visible = !1),
                            (this.item2 = Client.GameManager.instance.layerUpper.create(0, 0, "level7", "dragObject instance 10000")),
                            this.item2.anchor.set(0.5),
                            (this.item2.visible = !1),
                            (this.item3 = Client.GameManager.instance.layerUpper.create(0, 0, "level7", "dragObject instance 10000")),
                            this.item3.anchor.set(0.5),
                            (this.item3.visible = !1);
                    }),
                    (Lvl7Map.prototype.setItemsPosition = function () {
                        (this.item1.x = this.part6.world.x + 57),
                            (this.item1.y = this.part6.world.y + 49),
                            (this.item2.x = this.part6.world.x + 150),
                            (this.item2.y = this.part6.world.y + 49),
                            (this.item3.x = this.part6.world.x + 243),
                            (this.item3.y = this.part6.world.y + 49);
                    }),
                    (Lvl7Map.prototype.openMap = function () {
                        this.mapOpened ||
                            (Client.SoundManager.playSFX("s_lvl7_openMap"),
                            (this.group.visible = !0),
                            (this.btn.visible = !1),
                            Client.Main.instance.add.tween(this.group).to({ x: this.group.x - 192, y: this.group.y - 231 }, 2e3, "Linear", !0),
                            Client.Main.instance.add.tween(this.group.scale).to({ x: 1.84, y: 1.84 }, 2e3, "Linear", !0).onComplete.add(this.show, this)),
                            (this.mapOpened = !0);
                    }),
                    (Lvl7Map.prototype.show = function () {
                        this.playAnim("show");
                    }),
                    (Lvl7Map.prototype.createButton = function () {
                        (this.btn1 = new Client.SimpleButton(Client.Main.instance, 33, 10, "level7", "cancelBtn", !0)),
                            this.btn1.activate(),
                            (this.btn1.name = "item1"),
                            (this.btn1.visible = !1),
                            this.btn1.onInputDown.add(this.onInputDown, this),
                            this.part6.addChild(this.btn1),
                            (this.btn2 = new Client.SimpleButton(Client.Main.instance, 83, 10, "level7", "cancelBtn", !0)),
                            this.btn2.activate(),
                            (this.btn2.name = "item2"),
                            (this.btn2.visible = !1),
                            this.btn2.onInputDown.add(this.onInputDown, this),
                            this.part6.addChild(this.btn2),
                            (this.btn3 = new Client.SimpleButton(Client.Main.instance, 135, 10, "level7", "cancelBtn", !0)),
                            this.btn3.activate(),
                            (this.btn3.name = "item3"),
                            (this.btn3.visible = !1),
                            this.btn3.onInputDown.add(this.onInputDown, this),
                            this.part6.addChild(this.btn3);
                    }),
                    (Lvl7Map.prototype.onInputDown = function (_sprite) {
                        Client.SoundManager.playSFX("s_lvl7_deleteItem");
                        var deletedKind = 0;
                        "item1" === _sprite.name
                            ? ((this.item1.visible = !1),
                              (this.btn1.visible = !1),
                              (deletedKind = this.searchItem1),
                              (this.searchItem1 = 0),
                              Client.GameManager.instance.level.photo.addInputToElement(this.dragPhotoElement1),
                              (this.dragPhotoElement1 = -1))
                            : "item2" === _sprite.name
                            ? ((this.item2.visible = !1),
                              (this.btn2.visible = !1),
                              (deletedKind = this.searchItem2),
                              (this.searchItem2 = 0),
                              Client.GameManager.instance.level.photo.addInputToElement(this.dragPhotoElement2),
                              (this.dragPhotoElement2 = -1))
                            : "item3" === _sprite.name &&
                              ((this.item3.visible = !1),
                              (this.btn3.visible = !1),
                              (deletedKind = this.searchItem3),
                              (this.searchItem3 = 0),
                              Client.GameManager.instance.level.photo.addInputToElement(this.dragPhotoElement3),
                              (this.dragPhotoElement3 = -1)),
                            deletedKind === this.mainSearch && (this.mainSearch = this.GetNewMainSearch()),
                            this.CheckLandmarks();
                    }),
                    (Lvl7Map.prototype.GetNewMainSearch = function () {
                        return 0 !== this.searchItem1 ? this.searchItem1 : 0 !== this.searchItem2 ? this.searchItem2 : 0 !== this.searchItem3 ? this.searchItem3 : 0;
                    }),
                    (Lvl7Map.prototype.update = function () {
                        if ((_super.prototype.update.call(this), Client.Main.instance.input.activePointer.isDown && this.currentItem.visible)) {
                            if (((this.currentItem.x = Client.Main.instance.input.activePointer.x), (this.currentItem.y = Client.Main.instance.input.activePointer.y), !this.mapShowed)) return;
                            this.item1.visible ||
                                (Client.Tools.distance(this.currentItem.x, this.currentItem.y, this.item1.x, this.item1.y) < 30 &&
                                    ((this.currentItem.visible = !1),
                                    (this.item1.visible = !0),
                                    (this.btn1.visible = !0),
                                    (this.item1.frameName = "dragObject instance 1000" + this.currentType),
                                    (this.dragPhotoElement1 = this.currentType),
                                    (this.overIconNumber = 1),
                                    this.AddItemToSearch(this.kindType),
                                    Client.GameManager.instance.level.photo.removeInputToElement(this.currentType))),
                                this.item2.visible ||
                                    (Client.Tools.distance(this.currentItem.x, this.currentItem.y, this.item2.x, this.item2.y) < 30 &&
                                        ((this.currentItem.visible = !1),
                                        (this.item2.visible = !0),
                                        (this.btn2.visible = !0),
                                        (this.item2.frameName = "dragObject instance 1000" + this.currentType),
                                        (this.dragPhotoElement2 = this.currentType),
                                        (this.overIconNumber = 2),
                                        this.AddItemToSearch(this.kindType),
                                        Client.GameManager.instance.level.photo.removeInputToElement(this.currentType))),
                                this.item3.visible ||
                                    (Client.Tools.distance(this.currentItem.x, this.currentItem.y, this.item3.x, this.item3.y) < 30 &&
                                        ((this.currentItem.visible = !1),
                                        (this.item3.visible = !0),
                                        (this.btn3.visible = !0),
                                        (this.item3.frameName = "dragObject instance 1000" + this.currentType),
                                        (this.dragPhotoElement3 = this.currentType),
                                        (this.overIconNumber = 3),
                                        this.AddItemToSearch(this.kindType),
                                        Client.GameManager.instance.level.photo.removeInputToElement(this.currentType)));
                        } else this.currentItem.visible = !1;
                    }),
                    (Lvl7Map.prototype.updateAnimation = function () {
                        "show" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (this.startTween(this.part1, 84, { x: 156, y: 127, scX: 0.42, scY: 0.42 }),
                                  this.startTween(this.part2, 84, { x: -13, y: 127, scX: 0.42, scY: 0.42 }),
                                  this.startTween(this.part3, 84, { x: 156, y: -9, scX: 0.42, scY: 0.42 }),
                                  this.startTween(this.part4, 84, { x: -11, y: -9, scX: 0.42, scY: 0.42 }),
                                  this.startTween(this.part5, 84, { x: -11, y: -9, scX: 1.15, scY: 1.15 }),
                                  this.startTween(this.part8, 64, { x: -1, y: 3, scX: 0.48, scY: 0.48 }))
                                : 65 === this.counterAnim
                                ? this.startTween(this.part8, 20, { x: -5, y: -1, scX: 0.51, scY: 0.51 })
                                : 87 === this.counterAnim
                                ? ((this.part6.alpha = 1), this.startTween(this.part6, 34, { x: -8, y: 124, scY: 0.91 }))
                                : 121 === this.counterAnim
                                ? this.startTween(this.part6, 4, { y: 125, scY: 1 })
                                : 125 === this.counterAnim
                                ? this.startTween(this.part6, 6, { y: 127 })
                                : 131 === this.counterAnim
                                ? this.startTween(this.part6, 8, { y: 125 })
                                : 135 === this.counterAnim
                                ? ((this.part7.visible = !0), this.setPart(this.part7, { x: 158, skY: 180 }))
                                : 137 === this.counterAnim
                                ? this.setPart(this.part7, { x: -21, skY: 0 })
                                : 139 === this.counterAnim
                                ? (this.part7.visible = !1)
                                : 141 === this.counterAnim && (this.animComplete(), this.setItemsPosition(), (this.mapShowed = !0))
                            : "zoom" === this.currAnim &&
                              (1 === this.counterAnim
                                  ? this.startTween(this.part8, 112, { x: -116, y: -16, scX: 0.9, scY: 0.9 })
                                  : 11 === this.counterAnim
                                  ? ((this.part7.visible = !0), this.setPart(this.part7, { x: -21 }))
                                  : 13 === this.counterAnim
                                  ? this.setPart(this.part7, { x: 158, skY: 180 })
                                  : 15 === this.counterAnim
                                  ? (this.part7.visible = !1)
                                  : 113 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl7Map.prototype.setParts = function (value) {
                        "show" === value
                            ? (this.setPart(this.part1, { x: 81, y: 69, angle: 0, scX: 0.37, scY: 0.37, skX: 180, skY: 180, alpha: 1 }),
                              this.setPart(this.part2, { x: 61, y: 69, angle: 0, scX: 0.37, scY: 0.37, skX: 180, skY: 0, alpha: 1 }),
                              this.setPart(this.part3, { x: 81, y: 49, angle: 0, scX: 0.37, scY: 0.37, skX: 0, skY: 180, alpha: 1 }),
                              this.setPart(this.part4, { x: 61, y: 49, angle: 0, scX: 0.37, scY: 0.37, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part5, { x: 63, y: 52, angle: 0, scX: 0.12, scY: 0.12, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part6, { x: -9, y: 119, angle: 0, scX: 1, scY: 0.15, skX: 0, skY: 0, alpha: 0 }),
                              (this.part7.visible = !1),
                              this.setPart(this.part8, { x: 63, y: 52, angle: 0, scX: 0.05, scY: 0.05, skX: 0, skY: 0, alpha: 1 }))
                            : "zoom" === value &&
                              (this.setPart(this.part1, { x: 156, y: 127, angle: 0, scX: 0.42, scY: 0.42, skX: 180, skY: 180, alpha: 1 }),
                              this.setPart(this.part2, { x: -13, y: 127, angle: 0, scX: 0.42, scY: 0.42, skX: 180, skY: 0, alpha: 1 }),
                              this.setPart(this.part3, { x: 156, y: -9, angle: 0, scX: 0.42, scY: 0.42, skX: 0, skY: 180, alpha: 1 }),
                              this.setPart(this.part4, { x: -11, y: -9, angle: 0, scX: 0.42, scY: 0.42, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part5, { x: -11, y: -9, angle: 0, scX: 1.15, scY: 1.15, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part6, { x: -8, y: 125, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              (this.part7.visible = !1),
                              this.setPart(this.part8, { x: -9, y: -1, angle: 0, scX: 0.52, scY: 0.52, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl7Map.prototype.AddItemToSearch = function (kind) {
                        Client.SoundManager.playSFX("s_lvl7_photoItemPlace"),
                            0 === this.searchItem1 && 0 === this.searchItem2 && 0 === this.searchItem3 && (this.mainSearch = kind),
                            1 === this.overIconNumber ? (this.searchItem1 = kind) : 2 === this.overIconNumber ? (this.searchItem2 = kind) : 3 === this.overIconNumber && (this.searchItem3 = kind),
                            this.CheckLandmarks();
                    }),
                    (Lvl7Map.prototype.CheckLandmarks = function () {
                        (this.m_mapMask = null),
                            (this.m_mapMask = this.GetMaskByKind(this.mainSearch)),
                            (this.findGas = this.findStreet = this.findTrain = !1),
                            2 === this.searchItem1 || 2 === this.searchItem2 || 2 === this.searchItem3
                                ? ((this.mapElements.street.visible = !0), (this.findStreet = !0), 2 !== this.mainSearch && this.AndMask(this.streetMask))
                                : (this.mapElements.street.visible = !1),
                            (3 !== this.searchItem1 && 3 !== this.searchItem2 && 3 !== this.searchItem3) || (3 !== this.mainSearch && this.AndMask(this.treeMask)),
                            (4 !== this.searchItem1 && 4 !== this.searchItem2 && 4 !== this.searchItem3) || (4 !== this.mainSearch && this.AndMask(this.birdMask)),
                            (5 !== this.searchItem1 && 5 !== this.searchItem2 && 5 !== this.searchItem3) || (5 !== this.mainSearch && this.AndMask(this.phoneMask)),
                            6 === this.searchItem1 || 6 === this.searchItem2 || 6 === this.searchItem3
                                ? ((this.mapElements.trainRoad.visible = !0), (this.findTrain = !0), 6 !== this.mainSearch && this.AndMask(this.trainMask))
                                : (this.mapElements.trainRoad.visible = !1),
                            (7 !== this.searchItem1 && 7 !== this.searchItem2 && 7 !== this.searchItem3) || (7 !== this.mainSearch && this.AndMask(this.gasMask), (this.findGas = !0));
                        for (var i = 0; i <= 34; i++)
                            null === this.m_mapMask || 0 === this.m_mapMask[i]
                                ? this.mapElements.points[i].hide()
                                : null != this.m_mapMask && 1 === this.m_mapMask[i]
                                ? this.mapElements.points[i].anim()
                                : null != this.m_mapMask && 2 === this.m_mapMask[i] && this.mapElements.points[i].show();
                        this.findGas &&
                            this.findStreet &&
                            this.findTrain &&
                            ((this.btn1.inputEnabled = !1),
                            (this.btn2.inputEnabled = !1),
                            (this.btn3.inputEnabled = !1),
                            this.playAnim("zoom"),
                            (this.mapElements.arrow.visible = !0),
                            (Client.GameManager.instance.hero.currState = Client.HeroState.finish),
                            Client.LevelBuilder.instance.levelComplete(150),
                            Client.SoundManager.playSFX("s_lvl7_targetFinded"));
                    }),
                    (Lvl7Map.prototype.AndMask = function (newMask) {
                        if (null != this.m_mapMask) for (var i = 0; i < this.m_mapMask.length; i++) 1 === this.m_mapMask[i] && (1 === newMask[i] ? (this.m_mapMask[i] = 1) : (this.m_mapMask[i] = 2));
                        else this.m_mapMask = newMask.concat();
                    }),
                    (Lvl7Map.prototype.GetItemKind = function (mc) {
                        switch (mc) {
                            case "street":
                                return 2;
                            case "bird":
                                return 4;
                            case "phone":
                                return 5;
                            case "train":
                                return 6;
                            case "gas":
                                return 7;
                            default:
                                return 0;
                        }
                    }),
                    (Lvl7Map.prototype.GetMaskByKind = function (kind) {
                        switch (kind) {
                            case 2:
                                return this.streetMask.concat();
                            case 3:
                                return this.treeMask.concat();
                            case 4:
                                return this.birdMask.concat();
                            case 5:
                                return this.phoneMask.concat();
                            case 6:
                                return this.trainMask.concat();
                            case 7:
                                return this.gasMask.concat();
                            default:
                                return null;
                        }
                    }),
                    (Lvl7Map.prototype.free = function () {
                        (this.group = null),
                            (this.part8 = null),
                            (this.part7 = null),
                            (this.part6 = null),
                            (this.part5 = null),
                            (this.part4 = null),
                            (this.part3 = null),
                            (this.part2 = null),
                            (this.part1 = null),
                            (this.mapElements = null),
                            (this.item1 = null),
                            (this.item2 = null),
                            (this.item3 = null),
                            (this.btn = null),
                            (this.btn1 = null),
                            (this.btn2 = null),
                            (this.btn3 = null);
                    }),
                    Lvl7Map
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl7Map = Lvl7Map;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl7MapElements = (function (_super) {
                function Lvl7MapElements(_game, _container) {
                    var _this = _super.call(this) || this;
                    (_this.points = new Array()),
                        (_this.pos = [
                            [-208.6, -53.3],
                            [-174.9, -82.2],
                            [-132.55, -114.35],
                            [-189.3, -21.75],
                            [-155.6, -46.1],
                            [-129.35, -65.4],
                            [-75.3, -106.05],
                            [-203.1, 12.5],
                            [-165.75, 3.95],
                            [-133.65, -4.6],
                            [-101.5, -28.85],
                            [-74.25, -48.15],
                            [-45.8, -67.45],
                            [-19.3, -86.75],
                            [9.35, -106.05],
                            [-128.65, 40.7],
                            [-101.5, 27.55],
                            [-80.2, 1.6],
                            [-49.05, -19.05],
                            [-16.4, -41.05],
                            [6.65, -59.2],
                            [31.8, -79.6],
                            [-65.1, 63.95],
                            [-59.75, 37.1],
                            [-24.45, 37.1],
                            [-9.95, 9.85],
                            [19.3, -12.9],
                            [58.05, -53.3],
                            [0, 67.5],
                            [23.25, 40.2],
                            [55.95, 20.9],
                            [-215.55, 51.6],
                            [-181.25, 83.25],
                            [-154.5, 63.95],
                            [-107.4, 82.15],
                        ]),
                        (_this.trainRoad = _game.make.sprite(0, 0, "level7", "trainWay instance 10000")),
                        (_this.trainRoad.visible = !1),
                        _container.addChild(_this.trainRoad),
                        (_this.street = _game.make.sprite(0, -3, "level7", "mapStreet instance 10000")),
                        (_this.street.visible = !1),
                        _container.addChild(_this.street);
                    for (var i = 0; i < _this.pos.length; i++) {
                        var point = new Client.Lvl7MapPoint(Client.Main.instance, 237 + _this.pos[i][0], 136 + _this.pos[i][1], "level7", "mapPoint instance 10000");
                        point.anchor.set(0.5), _container.addChild(point), (point.visible = !1), _this.points.push(point);
                    }
                    return (
                        (_this.arrow = _game.make.sprite(200, -8, "level7", "arrow instance 10000")),
                        _this.arrow.animations.add("anim", Phaser.Animation.generateFrameNames("arrow instance 1", 0, 19, "", 4), 30, !0),
                        _this.arrow.play("anim"),
                        (_this.arrow.visible = !1),
                        _container.addChild(_this.arrow),
                        Client.GameManager.instance.level.addQuestCar(117, 37, _container),
                        Client.GameManager.instance.level.questCar &&
                            ((Client.GameManager.instance.level.questCar.angle = 45),
                            Client.GameManager.instance.level.questCar.scale.set(0.75),
                            (Client.GameManager.instance.level.questCar.visible = !1),
                            (_this.secret = _game.make.sprite(95, 12, "level7", "secret instance 10000")),
                            (_this.secret.inputEnabled = !0),
                            (_this.secret.input.useHandCursor = !0),
                            _this.secret.animations.add("anim", Phaser.Animation.generateFrameNames("secret instance 1", 0, 9, "", 4), 30, !1).onComplete.add(function () {
                                (this.secret.visible = !1), (Client.GameManager.instance.level.questCar.visible = !0);
                            }, _this),
                            _this.secret.events.onInputDown.add(_this.showCar, _this),
                            _container.addChild(_this.secret)),
                        _this
                    );
                }
                return (
                    __extends(Lvl7MapElements, _super),
                    (Lvl7MapElements.prototype.showCar = function () {
                        this.secret.play("anim");
                    }),
                    (Lvl7MapElements.prototype.playaAnim = function () {}),
                    (Lvl7MapElements.prototype.free = function () {
                        (this.trainRoad = null), (this.street = null), (this.points = []), (this.points = null);
                    }),
                    Lvl7MapElements
                );
            })(Client.BasicElement);
            Client.Lvl7MapElements = Lvl7MapElements;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl7MapPoint = (function (_super) {
                function Lvl7MapPoint(game, x, y, key, frame) {
                    return _super.call(this, game, x, y, key, frame) || this;
                }
                return (
                    __extends(Lvl7MapPoint, _super),
                    (Lvl7MapPoint.prototype.anim = function () {
                        this.resetTween(), (this.frameName = "mapPoint instance 10000"), (this.visible = !0), (this.tween = this.game.add.tween(this.scale).to({ x: 1.35, y: 1.35 }, 300, "Linear", !0, Client.Tools.random(0, 100), -1, !0));
                    }),
                    (Lvl7MapPoint.prototype.hide = function () {
                        this.resetTween(), (this.visible = !1);
                    }),
                    (Lvl7MapPoint.prototype.show = function () {
                        this.resetTween(), (this.frameName = "mapPoint instance 10001"), (this.visible = !0);
                    }),
                    (Lvl7MapPoint.prototype.resetTween = function () {
                        this.tween && (this.tween.stop(), this.scale.set(1));
                    }),
                    (Lvl7MapPoint.prototype.destroy = function () {
                        _super.prototype.destroy.call(this), (this.tween = null);
                    }),
                    Lvl7MapPoint
                );
            })(Phaser.Sprite);
            Client.Lvl7MapPoint = Lvl7MapPoint;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl7Photo = (function (_super) {
                function Lvl7Photo(game) {
                    var _this = _super.call(this) || this;
                    (_this.group = game.make.group()),
                        (_this.group.x = 240),
                        (_this.group.y = 65),
                        (_this.group.visible = !1),
                        Client.GameManager.instance.layerUpper.addChild(_this.group),
                        (_this.btn = game.make.graphics(_this.group.x + 100, _this.group.y + 10)),
                        _this.btn.beginFill(16711680, 0),
                        _this.btn.drawRect(0, 0, 115, 115),
                        _this.btn.endFill(),
                        (_this.btn.inputEnabled = !0),
                        (_this.btn.input.useHandCursor = !0),
                        _this.btn.events.onInputOver.add(_this.overPhoto, _this),
                        _this.btn.events.onInputOut.add(_this.outPhoto, _this),
                        _this.btn.events.onInputDown.add(_this.downPhoto, _this),
                        Client.GameManager.instance.layerUpper.addChild(_this.btn);
                    var mask = game.make.graphics();
                    return (
                        mask.beginFill(16711680, 0.5),
                        mask.drawRect(0, 0, 274, 279),
                        mask.endFill(),
                        (_this.part6 = new Client.SASprite(game, 0, 0, "level7", "photoBg instance 10000")),
                        _this.part6.pivot.set(0, 0),
                        _this.group.addChild(_this.part6),
                        (_this.part5 = new Client.SASprite(game, 0, 0, "level7", "photo instance 10000")),
                        _this.part5.pivot.set(0, 0),
                        _this.group.addChild(_this.part5),
                        _this.part5.addChild(mask),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "level7", "photoEffect instance 10000")),
                        _this.part4.pivot.set(0, 0),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level7", "scanEffect2 instance 10000")),
                        _this.part3.pivot.set(0, 0),
                        (_this.part3.mask = mask),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level7", "scanEffect instance 10000")),
                        _this.part2.pivot.set(0, 0),
                        (_this.part2.mask = mask),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level7", "scanBtn instance 10000")),
                        _this.part1.animations.add("off", Phaser.Animation.generateFrameNames("scanBtn instance 1", 2, 9, "", 4), 30, !1),
                        _this.part1.pivot.set(-45, -10),
                        (_this.part1.inputEnabled = !0),
                        (_this.part1.input.useHandCursor = !0),
                        _this.part1.events.onInputOver.add(_this.over, _this),
                        _this.part1.events.onInputOut.add(_this.out, _this),
                        _this.part1.events.onInputDown.add(_this.down, _this),
                        (_this.part1.visible = !1),
                        _this.group.addChild(_this.part1),
                        _this.addElements(),
                        _this.setParts("show"),
                        _this
                    );
                }
                return (
                    __extends(Lvl7Photo, _super),
                    (Lvl7Photo.prototype.showPhoto = function () {
                        this.group.visible = !0;
                    }),
                    (Lvl7Photo.prototype.overPhoto = function () {
                        this.group.alpha = 0.9;
                    }),
                    (Lvl7Photo.prototype.outPhoto = function () {
                        this.group.alpha = 1;
                    }),
                    (Lvl7Photo.prototype.downPhoto = function () {
                        (this.btn.inputEnabled = !1), (this.group.alpha = 1), this.playAnim("show"), Client.SoundManager.playSFX("s_lvl7_photoIncreace");
                    }),
                    (Lvl7Photo.prototype.addInputToElement = function (_id) {
                        this.elements.addInputToElement(_id);
                    }),
                    (Lvl7Photo.prototype.removeInputToElement = function (_id) {
                        this.elements.removeInputToElement(_id);
                    }),
                    (Lvl7Photo.prototype.over = function () {
                        this.part1.frameName = "scanBtn instance 10001";
                    }),
                    (Lvl7Photo.prototype.out = function () {
                        this.part1.frameName = "scanBtn instance 10000";
                    }),
                    (Lvl7Photo.prototype.down = function () {
                        (this.part1.inputEnabled = !1), this.part1.play("off"), this.playAnim("startScan"), Client.SoundManager.playSFX("s_lvl7_photoScan", !0);
                    }),
                    (Lvl7Photo.prototype.addElements = function () {
                        (this.elements = new Client.Lvl7PhotoElements(Client.Main.instance, this.part5)), Client.GameManager.instance.level.updateElements.push(this.elements);
                    }),
                    (Lvl7Photo.prototype.updateAnimation = function () {
                        "show" === this.currAnim
                            ? 1 === this.counterAnim
                                ? this.startTween(this.part4, 16, { alpha: 1 })
                                : 17 === this.counterAnim
                                ? this.startTween(this.part5, 18, { x: 31, y: 1, scX: 0.97, scY: 0.97 })
                                : 19 === this.counterAnim
                                ? (this.part4.visible = !1)
                                : 35 === this.counterAnim
                                ? this.startTween(this.part5, 18, { x: 7, y: -1, scX: 1.17, scY: 1.17 })
                                : 49 === this.counterAnim
                                ? ((this.part6.visible = !0), this.setPart(this.part6, { x: -5, y: -13, scX: 0.77, alpha: 0 }), this.startTween(this.part6, 6, { x: -10, alpha: 1 }))
                                : 53 === this.counterAnim
                                ? this.setPart(this.part5, { x: 4, y: -2, scX: 1.19, scY: 1.19 })
                                : 73 === this.counterAnim
                                ? ((this.part3.visible = !0), this.setPart(this.part3, { x: 341, y: -16 }), this.startTween(this.part3, 36, { x: -400 }))
                                : 111 === this.counterAnim
                                ? (this.part3.visible = !1)
                                : 147 === this.counterAnim
                                ? (this.startTween(this.part5, 46, { x: -183, y: 0 }), this.startTween(this.part6, 46, { x: -197, y: -6 }))
                                : 193 === this.counterAnim
                                ? this.startTween(this.part6, 6, { x: -211, alpha: 0 })
                                : 201 === this.counterAnim
                                ? (this.part6.visible = !1)
                                : 213 === this.counterAnim && (this.animComplete(), this.playAnim("showButton"), Client.GameManager.instance.level.map.showMap())
                            : "showButton" === this.currAnim
                            ? 1 === this.counterAnim
                                ? ((this.part1.visible = !0), this.startTween(this.part1, 28, { y: 352, scX: 0.55 }))
                                : 31 === this.counterAnim && this.animComplete()
                            : "startScan" === this.currAnim &&
                              (7 === this.counterAnim
                                  ? ((this.elements.scan = !0), (this.part2.visible = !0), this.setPart(this.part2, { x: -204, y: 251 }))
                                  : 21 === this.counterAnim
                                  ? this.startTween(this.part2, 56, { y: -56 })
                                  : 115 === this.counterAnim
                                  ? this.startTween(this.part2, 56, { y: 251 })
                                  : 173 === this.counterAnim && (this.animComplete(), (this.part2.visible = !1), this.elements.addInput(), Client.SoundManager.stopSFXLoop("s_lvl7_photoScan")));
                    }),
                    (Lvl7Photo.prototype.setParts = function (value) {
                        "show" === value
                            ? ((this.part1.visible = !1),
                              (this.part2.visible = !1),
                              (this.part3.visible = !1),
                              this.setPart(this.part4, { x: 99, y: 9, angle: 0, scX: 0.68, scY: 0.68, skX: 0, skY: 0, alpha: 0 }),
                              this.setPart(this.part5, { x: 99, y: 9, angle: 0, scX: 0.41, scY: 0.41, skX: 0, skY: 0, alpha: 1 }),
                              (this.part6.visible = !1))
                            : "showButton" === value
                            ? (this.setPart(this.part1, { x: -183, y: 332, angle: 0, scX: 0.01, scY: 0.55, skX: -90, skY: -90, alpha: 1 }),
                              (this.part2.visible = !1),
                              (this.part3.visible = !1),
                              (this.part4.visible = !1),
                              this.setPart(this.part5, { x: -183, y: 0, angle: 0, scX: 1.19, scY: 1.19, skX: 0, skY: 0, alpha: 1 }),
                              (this.part6.visible = !1))
                            : "startScan" === value &&
                              (this.setPart(this.part1, { x: -183, y: 352, angle: 0, scX: 0.55, scY: 0.55, skX: -90, skY: -90, alpha: 1 }),
                              (this.part2.visible = !1),
                              (this.part3.visible = !1),
                              (this.part4.visible = !1),
                              this.setPart(this.part5, { x: -183, y: 0, angle: 0, scX: 1.19, scY: 1.19, skX: 0, skY: 0, alpha: 1 }),
                              (this.part6.visible = !1));
                    }),
                    (Lvl7Photo.prototype.free = function () {
                        (this.group = null), (this.part6 = null), (this.part5 = null), (this.part4 = null), (this.part3 = null), (this.part2 = null), (this.part1 = null), (this.elements = null), (this.btn = null);
                    }),
                    Lvl7Photo
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl7Photo = Lvl7Photo;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl7PhotoElements = (function (_super) {
                function Lvl7PhotoElements(_game, _container) {
                    var _this = _super.call(this) || this;
                    (_this.scan = !1),
                        (_this.timer = 70),
                        (_this.objects = ["train", "gas", "phone", "bird", "street"]),
                        (_this.position = [
                            [140, 60],
                            [74, 33],
                            [115, 99],
                            [225, 101],
                            [17, 113],
                        ]),
                        (_this.elements = new Array());
                    for (var i = 0; i < _this.objects.length; i++) {
                        var obj = _game.make.sprite(_this.position[i][0], _this.position[i][1], "level7", _this.objects[i] + " instance 10000");
                        obj.animations.add("scan", Phaser.Animation.generateFrameNames(_this.objects[i] + " instance 1", 0, 30, "", 4), 30, !1),
                            _container.addChild(obj),
                            i === _this.objects.length - 1 && obj.pivot.set(1, -6),
                            (obj.name = "" + i),
                            obj.events.onInputOver.add(_this.over, _this),
                            obj.events.onInputOut.add(_this.out, _this),
                            obj.events.onInputDown.add(_this.down, _this),
                            _this.elements.push(obj),
                            (obj = null);
                    }
                    return (_this.overEffect = _game.make.sprite(0, 0, "level7", "over instance 10000")), (_this.overEffect.visible = !1), _container.addChild(_this.overEffect), _this;
                }
                return (
                    __extends(Lvl7PhotoElements, _super),
                    (Lvl7PhotoElements.prototype.addInput = function () {
                        for (var i = 0; i < this.elements.length; i++) (this.elements[i].inputEnabled = !0), (this.elements[i].input.useHandCursor = !0);
                    }),
                    (Lvl7PhotoElements.prototype.addInputToElement = function (_id) {
                        (this.elements[_id].inputEnabled = !0), (this.elements[_id].input.useHandCursor = !0);
                    }),
                    (Lvl7PhotoElements.prototype.removeInputToElement = function (_id) {
                        this.elements[_id].inputEnabled = !1;
                    }),
                    (Lvl7PhotoElements.prototype.down = function (_sprite) {
                        Client.SoundManager.playSFX("s_lvl7_photoItemDrag"), Client.GameManager.instance.level.map.addDragObject(Number(_sprite.name), this.objects[Number(_sprite.name)]);
                    }),
                    (Lvl7PhotoElements.prototype.over = function (_sprite) {
                        (this.overEffect.visible = !0),
                            (this.overEffect.x = _sprite.x),
                            (this.overEffect.y = _sprite.y),
                            "4" === _sprite.name && ((this.overEffect.y = _sprite.y + 10), (this.overEffect.x = _sprite.x + 3)),
                            (this.overEffect.frameName = "over instance 1000" + Number(_sprite.name));
                    }),
                    (Lvl7PhotoElements.prototype.out = function () {
                        this.overEffect.visible = !1;
                    }),
                    (Lvl7PhotoElements.prototype.update = function () {
                        if (this.scan && (this.timer++, 180 === this.timer)) for (var i = (this.timer = 0); i < this.elements.length; i++) this.elements[i].play("scan");
                    }),
                    (Lvl7PhotoElements.prototype.free = function () {
                        (this.objects = []), (this.objects = null), (this.position = []), (this.position = null), (this.elements = []), (this.elements = null);
                    }),
                    Lvl7PhotoElements
                );
            })(Client.BasicElement);
            Client.Lvl7PhotoElements = Lvl7PhotoElements;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl8Anchor = (function (_super) {
                function Lvl8Anchor(game) {
                    var _this = _super.call(this) || this;
                    (_this.group = game.make.group()),
                        (_this.group.x = 474),
                        (_this.group.y = 407),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.part16 = new Client.SASprite(game, 0, 0, "level8", "anchor instance 10000")),
                        _this.part16.pivot.set(1, 1),
                        _this.group.addChild(_this.part16),
                        Client.GameManager.instance.level.addQuestCar(31, 174, _this.part16, -1, 30),
                        !1 === Client.GameManager.instance.level.questCarFounded && (Client.GameManager.instance.level.questCar.visible = !1);
                    var mask = game.make.graphics(0, 0);
                    return (
                        mask.beginFill(16711680),
                        mask.drawRect(-50, 0, 140, 200),
                        mask.endFill(),
                        _this.group.addChild(mask),
                        (_this.part16.mask = mask),
                        (mask = null),
                        (_this.part15 = new Client.SASprite(game, 0, 0, "level8", "bulk instance 10000")),
                        _this.part15.pivot.set(36, -77),
                        _this.part15.animations.add("anim", Phaser.Animation.generateFrameNames("bulk instance 1", 0, 30, "", 4), 30, !1),
                        _this.group.addChild(_this.part15),
                        _this.setParts("step1"),
                        _this
                    );
                }
                return (
                    __extends(Lvl8Anchor, _super),
                    (Lvl8Anchor.prototype.updateAnimation = function () {
                        "step1" === this.currAnim
                            ? 1 === this.counterAnim
                                ? this.startTween(this.part16, 44, { y: -10 })
                                : 18 === this.counterAnim
                                ? ((this.part15.visible = !0), this.part15.animations.play("anim"), this.setPart(this.part15, { x: -9 }))
                                : 45 === this.counterAnim
                                ? this.startTween(this.part16, 15, { y: -21 })
                                : 49 === this.counterAnim
                                ? (this.part15.visible = !1)
                                : 73 === this.counterAnim
                                ? this.startTween(this.part16, 10, { y: -10 })
                                : 83 === this.counterAnim && this.animComplete()
                            : "step2" === this.currAnim &&
                              (1 === this.counterAnim
                                  ? this.startTween(this.part16, 13, { x: 1, y: -74, skX: 2, skY: 2 })
                                  : 14 === this.counterAnim
                                  ? this.startTween(this.part16, 16, { x: -2, y: -104, skX: -3, skY: -3 })
                                  : 30 === this.counterAnim
                                  ? this.startTween(this.part16, 13, { x: 0, y: -131, skX: 0, skY: 0 })
                                  : 43 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl8Anchor.prototype.setParts = function (value) {
                        "step1" === value
                            ? ((this.part15.visible = !1), this.setPart(this.part16, { x: 0, y: -131, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }))
                            : "step2" === value &&
                              (!1 === Client.GameManager.instance.level.questCarFounded && (Client.GameManager.instance.level.questCar.visible = !0),
                              (this.part15.visible = !1),
                              this.setPart(this.part16, { x: 0, y: -10, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl8Anchor.prototype.free = function () {
                        (this.group = null), (this.part16 = null), (this.part15 = null);
                    }),
                    Lvl8Anchor
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl8Anchor = Lvl8Anchor;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl8AnchorLever = (function (_super) {
                function Lvl8AnchorLever(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.canPress = !0),
                        (_this.pressedTimes = 0),
                        (_this.group = game.make.group()),
                        (_this.group.x = 466),
                        (_this.group.y = 305),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "level8", "anchorLever instance 10000")),
                        _this.part3.pivot.set(1, 1),
                        _this.group.addChild(_this.part3),
                        (_this.part3.inputEnabled = !0),
                        (_this.part3.input.useHandCursor = !0),
                        _this.part3.events.onInputOut.add(_this.leverOut, _this),
                        _this.part3.events.onInputOver.add(_this.leverOver, _this),
                        _this.part3.events.onInputDown.add(_this.leverDown, _this),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level8", "anchorBase instance 10000")),
                        _this.part2.pivot.set(1, 1),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level8", "anchorWheel instance 10000")),
                        _this.part1.animations.add("anim", Phaser.Animation.generateFrameNames("anchorWheel instance 1", 0, 19, "", 4), 30, !1),
                        _this.group.addChild(_this.part1),
                        (_this.lvl8anchor = new Client.Lvl8Anchor(game)),
                        Client.GameManager.instance.level.updateElements.push(_this.lvl8anchor),
                        _this.setParts("step1"),
                        _this
                    );
                }
                return (
                    __extends(Lvl8AnchorLever, _super),
                    (Lvl8AnchorLever.prototype.leverOut = function () {
                        !1 !== this.part3.inputEnabled && (this.part3.frameName = "anchorLever instance 10000");
                    }),
                    (Lvl8AnchorLever.prototype.leverOver = function () {
                        !1 !== this.part3.inputEnabled && (this.part3.frameName = "anchorLever instance 10001");
                    }),
                    (Lvl8AnchorLever.prototype.leverDown = function () {
                        !1 !== this.canPress &&
                            ((this.pressedTimes += 1),
                            this.part1.animations.play("anim"),
                            this.lvl8anchor.playAnim("step" + this.pressedTimes),
                            this.playAnim("step" + this.pressedTimes),
                            (this.canPress = !1),
                            1 === this.pressedTimes
                                ? Client.SoundManager.playSFX("s_lvl8_anchorDown")
                                : 2 === this.pressedTimes && (Client.SoundManager.playSFX("s_lvl8_anchorUp"), (this.part3.inputEnabled = !1), (this.part3.frameName = "anchorLever instance 10002")));
                    }),
                    (Lvl8AnchorLever.prototype.update = function () {
                        _super.prototype.update.call(this), !1 === this.canPress && !1 === this.lvl8anchor.activeAnim && (this.canPress = !0);
                    }),
                    (Lvl8AnchorLever.prototype.updateAnimation = function () {
                        "step1" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (this.startTween(this.part1, 9, { x: 4, y: 7 }), this.startTween(this.part2, 9, { x: -1, y: -4, skX: -2, skY: -2 }), this.startTween(this.part3, 4, { x: -28, y: -23, skX: -5, skY: -5 }))
                                : 5 === this.counterAnim
                                ? this.startTween(this.part3, 5, { x: -37, y: -7, skX: -28, skY: -28 })
                                : 10 === this.counterAnim
                                ? (this.startTween(this.part1, 10, { x: 5, y: 6 }), this.startTween(this.part2, 10, { x: 0, y: -5, skX: 0, skY: 0 }), this.startTween(this.part3, 5, { x: -40, y: 11, skX: -52, skY: -52 }))
                                : 15 === this.counterAnim
                                ? this.startTween(this.part3, 5, { x: -35, y: 28, skX: -75, skY: -75 })
                                : 20 === this.counterAnim
                                ? this.startTween(this.part3, 2, { x: -40, y: 12, skX: -54, skY: -54 })
                                : 23 === this.counterAnim && this.animComplete()
                            : "step2" === this.currAnim &&
                              (1 === this.counterAnim
                                  ? (this.startTween(this.part1, 10, { x: 4, y: 7 }), this.startTween(this.part2, 10, { x: -1, y: -4, skX: -2, skY: -2 }))
                                  : 7 === this.counterAnim
                                  ? this.startTween(this.part3, 2, { x: -35, y: 28, skX: -75, skY: -75 })
                                  : 9 === this.counterAnim
                                  ? this.startTween(this.part3, 5, { x: -39, y: 0, skX: -37, skY: -37 })
                                  : 11 === this.counterAnim
                                  ? (this.startTween(this.part1, 10, { x: 5, y: 6 }), this.startTween(this.part2, 10, { x: 0, y: -5, skX: 0, skY: 0 }))
                                  : 14 === this.counterAnim
                                  ? this.startTween(this.part3, 5, { x: -26, y: -26, skX: 0, skY: 0 })
                                  : 18 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl8AnchorLever.prototype.setParts = function (value) {
                        "step1" === value
                            ? (this.setPart(this.part1, { x: 5, y: 6, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part2, { x: 0, y: -5, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part3, { x: -26, y: -26, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }))
                            : "step2" === value &&
                              (this.setPart(this.part1, { x: 5, y: 6, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part2, { x: 0, y: -5, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                              this.setPart(this.part3, { x: -40, y: 12, angle: 0, scX: 1, scY: 1, skX: -54, skY: -54, alpha: 1 }));
                    }),
                    (Lvl8AnchorLever.prototype.free = function () {
                        (this.group = null), (this.part3 = null), (this.part2 = null), (this.part1 = null), (this.lvl8anchor = null);
                    }),
                    Lvl8AnchorLever
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl8AnchorLever = Lvl8AnchorLever;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl8BasicCar = (function (_super) {
                function Lvl8BasicCar() {
                    var _this = _super.call(this) || this;
                    return (_this.offX = 0), (_this.offY = 0), (_this.figures = new Array()), _this;
                }
                return (
                    __extends(Lvl8BasicCar, _super),
                    (Lvl8BasicCar.prototype.placeFigure = function (row, col, figure) {
                        Client.SoundManager.playSFX("s_lvl8_placeElement"),
                            this.graphic.addChildAt(figure, this.graphic.getChildIndex(this.grid) + 1),
                            (figure.x = this.grid.x + (30 * col + this.offX)),
                            (figure.y = this.grid.y + (30 * (row - 4) + this.offY)),
                            this.graphics.clear(),
                            this.figures.push(figure);
                        for (var i = 0; i < figure.arr.length; i++) for (var j = 0; j < figure.arr[i].length; j++) 1 === figure.arr[i][j] && (this.gridArr[row + i][col + j] = figure.id);
                    }),
                    (Lvl8BasicCar.prototype.getLastFigure = function () {
                        Client.SoundManager.playSFX("s_lvl8_getElement");
                        for (var figure = this.figures.pop(), i = 4; i < this.gridArr.length; i++) for (var j = 0; j < this.gridArr[i].length; j++) this.gridArr[i][j] === figure.id && (this.gridArr[i][j] = 0);
                        return this.graphic.removeChild(figure), figure;
                    }),
                    (Lvl8BasicCar.prototype.checkFullCar = function () {
                        for (var i = 4; i < this.gridArr.length; i++) for (var j = 0; j < this.gridArr[i].length; j++) if (0 === this.gridArr[i][j]) return !1;
                        return !(this.grid.visible = !1);
                    }),
                    (Lvl8BasicCar.prototype.move = function () {
                        this.graphic.body.velocity.x = 80;
                    }),
                    (Lvl8BasicCar.prototype.stop = function () {}),
                    (Lvl8BasicCar.prototype.free = function () {
                        (this.graphic = null), (this.grid = null), (this.gridArr = []), (this.gridArr = null), (this.graphics = null), (this.figures = []), (this.figures = null);
                    }),
                    Lvl8BasicCar
                );
            })(Client.BasicElement);
            Client.Lvl8BasicCar = Lvl8BasicCar;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl8Car1 = (function (_super) {
                function Lvl8Car1(game, x, y, ground) {
                    var _this = _super.call(this) || this;
                    (_this.deactiveCount = 0),
                        (_this.gridArr = [
                            [0, 0],
                            [0, 0],
                            [0, 0],
                            [0, 0],
                            [0, 0],
                            [0, 0],
                        ]),
                        (_this.offX = 2),
                        (_this.offY = 3),
                        (_this.graphic = Client.GameManager.instance.layerBackground.create(x, y, "level8", "car1BodyBg instance 10000")),
                        game.physics.box2d.enable(_this.graphic),
                        _this.graphic.body.setRectangle(162, 60),
                        _this.graphic.body.setCollisionCategory(Client.FilterGroups.TRUCK),
                        (_this.grid = game.make.sprite(-71, -66, "level8", "car1Grid instance 10000")),
                        _this.graphic.addChild(_this.grid),
                        (_this.graphics = game.make.graphics()),
                        _this.grid.addChild(_this.graphics);
                    var sprite = game.make.sprite(5, -29, "level8", "car1Body instance 10000");
                    return (
                        sprite.anchor.setTo(0.5),
                        _this.graphic.addChild(sprite),
                        (sprite = game.make.sprite(37, -68, "level8", "car1Eyes instance 10000")),
                        _this.graphic.addChild(sprite),
                        sprite.animations.add("anim", Phaser.Animation.generateFrameNames("car1Eyes instance 1", 0, 92, "", 4), 30, !0),
                        sprite.animations.play("anim"),
                        (sprite = null),
                        (_this.wheel1 = Client.GameManager.instance.layerBackground.create(x - 49, y + 24, "level8", "car1Wheel instance 10000")),
                        game.physics.box2d.enable(_this.wheel1),
                        _this.wheel1.body.setCircle(17),
                        _this.wheel1.body.setCollisionCategory(Client.FilterGroups.TRUCK),
                        game.physics.box2d.revoluteJoint(_this.graphic.body, _this.wheel1.body, -49, 24),
                        (_this.wheel2 = Client.GameManager.instance.layerBackground.create(x + 58, y + 24, "level8", "car1Wheel instance 10000")),
                        game.physics.box2d.enable(_this.wheel2),
                        _this.wheel2.body.setCircle(17),
                        _this.wheel2.body.setCollisionCategory(Client.FilterGroups.TRUCK),
                        game.physics.box2d.revoluteJoint(_this.graphic.body, _this.wheel2.body, 58, 24),
                        _this.graphic.body.setBodyContactCallback(ground, _this.deactivateCar, _this),
                        _this
                    );
                }
                return (
                    __extends(Lvl8Car1, _super),
                    (Lvl8Car1.prototype.update = function () {
                        1 === this.deactiveCount && ((this.deactiveCount = 2), this.graphic.body.data.SetActive(!1), this.wheel1.body.data.SetActive(!1), this.wheel2.body.data.SetActive(!1));
                    }),
                    (Lvl8Car1.prototype.deactivateCar = function () {
                        0 === this.deactiveCount && (this.deactiveCount = 1);
                    }),
                    (Lvl8Car1.prototype.stop = function () {
                        (this.graphic.body.velocity.x = 0), (this.wheel1.body.velocity.x = 0), (this.wheel1.body.angularVelocity = 0), (this.wheel2.body.velocity.x = 0), (this.wheel2.body.angularVelocity = 0);
                    }),
                    (Lvl8Car1.prototype.free = function () {
                        _super.prototype.free.call(this), (this.wheel1 = null), (this.wheel2 = null);
                    }),
                    Lvl8Car1
                );
            })(Client.Lvl8BasicCar);
            Client.Lvl8Car1 = Lvl8Car1;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl8Car2 = (function (_super) {
                function Lvl8Car2(game, x, y, ground) {
                    var _this = _super.call(this) || this;
                    (_this.deactiveCount = 0),
                        (_this.gridArr = [
                            [0, 0, 0, 0, 0],
                            [0, 0, 0, 0, 0],
                            [0, 0, 0, 0, 0],
                            [0, 0, 0, 0, 0],
                            [0, 0, 0, 0, 0],
                            [0, 0, 0, 0, 0],
                            [0, 0, 0, 0, 0],
                        ]),
                        (_this.offX = 2),
                        (_this.offY = 3),
                        (_this.wheel1 = Client.GameManager.instance.layerBackground.create(x - 85, y + 67, "level8", "car2Wheel instance 10000")),
                        game.physics.box2d.enable(_this.wheel1),
                        _this.wheel1.body.setCircle(18),
                        _this.wheel1.body.setCollisionCategory(Client.FilterGroups.TRUCK),
                        (_this.wheel2 = Client.GameManager.instance.layerBackground.create(x - 47, y + 67, "level8", "car2Wheel instance 10000")),
                        game.physics.box2d.enable(_this.wheel2),
                        _this.wheel2.body.setCircle(18),
                        _this.wheel2.body.setCollisionCategory(Client.FilterGroups.TRUCK),
                        (_this.graphic = Client.GameManager.instance.layerBackground.create(x, y, "level8", "car2Body instance 10000")),
                        game.physics.box2d.enable(_this.graphic),
                        _this.graphic.body.setRectangle(210, 100),
                        _this.graphic.body.setCollisionCategory(Client.FilterGroups.TRUCK),
                        (_this.grid = game.make.sprite(-102, -58, "level8", "car2Grid instance 10000")),
                        _this.graphic.addChild(_this.grid),
                        (_this.grid.visible = !1),
                        (_this.graphics = game.make.graphics()),
                        _this.grid.addChild(_this.graphics);
                    var sprite = game.make.sprite(90, -50, "level8");
                    return (
                        sprite.animations.add("anim", Phaser.Animation.generateFrameNames("car2Eyes instance 1", 0, 158, "", 4), 30, !0),
                        sprite.animations.play("anim"),
                        _this.graphic.addChild(sprite),
                        (sprite = null),
                        (_this.wheel3 = Client.GameManager.instance.layerBackground.create(x + 93, y + 67, "level8", "car2Wheel instance 10000")),
                        game.physics.box2d.enable(_this.wheel3),
                        _this.wheel3.body.setCircle(18),
                        _this.wheel3.body.setCollisionCategory(Client.FilterGroups.TRUCK),
                        game.physics.box2d.revoluteJoint(_this.graphic.body, _this.wheel1.body, -85, 67),
                        game.physics.box2d.revoluteJoint(_this.graphic.body, _this.wheel2.body, -47, 67),
                        game.physics.box2d.revoluteJoint(_this.graphic.body, _this.wheel3.body, 93, 67),
                        _this.graphic.body.setBodyContactCallback(ground, _this.deactivateCar, _this),
                        _this
                    );
                }
                return (
                    __extends(Lvl8Car2, _super),
                    (Lvl8Car2.prototype.update = function () {
                        1 === this.deactiveCount && ((this.deactiveCount = 2), this.graphic.body.data.SetActive(!1), this.wheel1.body.data.SetActive(!1), this.wheel2.body.data.SetActive(!1), this.wheel3.body.data.SetActive(!1));
                    }),
                    (Lvl8Car2.prototype.deactivateCar = function () {
                        0 === this.deactiveCount && (this.deactiveCount = 1);
                    }),
                    (Lvl8Car2.prototype.stop = function () {
                        (this.graphic.body.velocity.x = 0),
                            (this.wheel1.body.velocity.x = 0),
                            (this.wheel1.body.angularVelocity = 0),
                            (this.wheel2.body.velocity.x = 0),
                            (this.wheel2.body.angularVelocity = 0),
                            (this.wheel3.body.velocity.x = 0),
                            (this.wheel3.body.angularVelocity = 0);
                    }),
                    (Lvl8Car2.prototype.free = function () {
                        _super.prototype.free.call(this), (this.wheel1 = null), (this.wheel2 = null), (this.wheel3 = null);
                    }),
                    Lvl8Car2
                );
            })(Client.Lvl8BasicCar);
            Client.Lvl8Car2 = Lvl8Car2;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl8Car3 = (function (_super) {
                function Lvl8Car3(game, x, y, ground) {
                    var _this = _super.call(this) || this;
                    (_this.deactiveCount = 0),
                        (_this.gridArr = [
                            [0, 0, 0, 0],
                            [0, 0, 0, 0],
                            [0, 0, 0, 0],
                            [0, 0, 0, 0],
                            [0, 0, 0, 0],
                            [0, 0, 0, 0],
                            [0, 0, 0, 0],
                            [0, 0, 0, 0],
                            [0, 0, 0, 0],
                        ]),
                        (_this.offX = 2),
                        (_this.offY = 3),
                        (_this.graphic = Client.GameManager.instance.layerBackground.create(x, y, "level8", "car3Body instance 10000")),
                        game.physics.box2d.enable(_this.graphic),
                        _this.graphic.body.setRectangle(200, 100),
                        _this.graphic.body.setCollisionCategory(Client.FilterGroups.TRUCK);
                    var sprite = game.make.sprite(70, -5, "level8");
                    return (
                        sprite.animations.add("anim", Phaser.Animation.generateFrameNames("car3Eyes instance 1", 0, 67, "", 4), 30, !0),
                        sprite.animations.play("anim"),
                        _this.graphic.addChild(sprite),
                        (sprite = null),
                        (_this.grid = game.make.sprite(-84, -99, "level8", "car3Grid instance 10000")),
                        _this.graphic.addChild(_this.grid),
                        (_this.grid.visible = !1),
                        (_this.graphics = game.make.graphics()),
                        _this.grid.addChild(_this.graphics),
                        (_this.wheel1 = Client.GameManager.instance.layerBackground.create(x - 63, y + 95, "level8", "car3Wheel instance 10000")),
                        game.physics.box2d.enable(_this.wheel1),
                        _this.wheel1.body.setCircle(18),
                        _this.wheel1.body.setCollisionCategory(Client.FilterGroups.TRUCK),
                        (_this.wheel2 = Client.GameManager.instance.layerBackground.create(x + 67, y + 95, "level8", "car3Wheel instance 10000")),
                        game.physics.box2d.enable(_this.wheel2),
                        _this.wheel2.body.setCircle(18),
                        _this.wheel2.body.setCollisionCategory(Client.FilterGroups.TRUCK),
                        game.physics.box2d.revoluteJoint(_this.graphic.body, _this.wheel1.body, -63, 95),
                        game.physics.box2d.revoluteJoint(_this.graphic.body, _this.wheel2.body, 67, 95),
                        _this.graphic.body.setBodyContactCallback(ground, _this.deactivateCar, _this),
                        _this
                    );
                }
                return (
                    __extends(Lvl8Car3, _super),
                    (Lvl8Car3.prototype.update = function () {
                        1 === this.deactiveCount && ((this.deactiveCount = 2), this.graphic.body.data.SetActive(!1), this.wheel1.body.data.SetActive(!1), this.wheel2.body.data.SetActive(!1));
                    }),
                    (Lvl8Car3.prototype.deactivateCar = function () {
                        0 === this.deactiveCount && (this.deactiveCount = 1);
                    }),
                    (Lvl8Car3.prototype.stop = function () {
                        (this.graphic.body.velocity.x = 0), (this.wheel1.body.velocity.x = 0), (this.wheel1.body.angularVelocity = 0), (this.wheel2.body.velocity.x = 0), (this.wheel2.body.angularVelocity = 0);
                    }),
                    (Lvl8Car3.prototype.free = function () {
                        _super.prototype.free.call(this), (this.wheel1 = null), (this.wheel2 = null);
                    }),
                    Lvl8Car3
                );
            })(Client.Lvl8BasicCar);
            Client.Lvl8Car3 = Lvl8Car3;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl8Figure = (function (_super) {
                function Lvl8Figure(game, id, frame) {
                    var _this = _super.call(this, game, 0, 0, "level8", frame) || this;
                    return (_this.id = id), _this;
                }
                return (
                    __extends(Lvl8Figure, _super),
                    (Lvl8Figure.prototype.destroy = function () {
                        _super.prototype.destroy.call(this), (this.arr = []), (this.arr = null);
                    }),
                    Lvl8Figure
                );
            })(Phaser.Sprite);
            Client.Lvl8Figure = Lvl8Figure;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl8Manipulator = (function (_super) {
                function Lvl8Manipulator(game) {
                    var _this = _super.call(this) || this;
                    (_this.stateCars = "stand"),
                        (_this.tRow = 0),
                        (_this.tCol = 0),
                        (_this.soundTrakPlaying = !1),
                        (_this.game = game),
                        (_this.cars = new Array()),
                        (_this.figures = new Array()),
                        (_this.mask = game.make.graphics()),
                        _this.mask.beginFill(16711680, 0.5),
                        _this.mask.drawRect(0, 40, 800, 560),
                        _this.mask.endFill(),
                        Client.GameManager.instance.layerMiddle.addChild(_this.mask),
                        (Client.GameManager.instance.layerMiddle.mask = _this.mask),
                        (_this.btnTop = new Client.SimpleButton(game, 137, 115, "level8", "buttonTop")),
                        _this.btnTop.deactivate(),
                        _this.btnTop.onInputDown.add(_this.moveUp, _this),
                        Client.GameManager.instance.layerUpper.addChild(_this.btnTop),
                        (_this.btnBot = new Client.SimpleButton(game, 137, 160, "level8", "buttonDown")),
                        _this.btnBot.activate(),
                        (_this.btnBot.activeDispatchDown = !1),
                        _this.btnBot.onInputDown.add(_this.moveDown, _this),
                        Client.GameManager.instance.layerUpper.addChild(_this.btnBot),
                        (_this.btnLeft = new Client.SimpleButton(game, 67, 140, "level8", "buttonLeft")),
                        _this.btnLeft.deactivate(),
                        _this.btnLeft.onInputDown.add(_this.moveLeft, _this),
                        Client.GameManager.instance.layerUpper.addChild(_this.btnLeft),
                        (_this.btnRight = new Client.SimpleButton(game, 209, 140, "level8", "buttonRight")),
                        _this.btnRight.deactivate(),
                        _this.btnRight.onInputDown.add(_this.moveRight, _this),
                        Client.GameManager.instance.layerUpper.addChild(_this.btnRight),
                        _this.addFigures(),
                        (_this.trak = new Client.Lvl8Trak(game, 270, 168)),
                        Client.GameManager.instance.level.updateElements.push(_this.trak);
                    var ground = new Phaser.Physics.Box2D.Body(_this.game, null, 1154, 490, 0);
                    ground.setRectangle(34, 100), (ground.sensor = !0);
                    var car = new Client.Lvl8Car1(game, 685, 497, ground);
                    return (
                        Client.GameManager.instance.level.updateElements.push(car),
                        _this.cars.push(car),
                        (car = new Client.Lvl8Car2(game, 470, 453, ground)),
                        Client.GameManager.instance.level.updateElements.push(car),
                        _this.cars.push(car),
                        (car = new Client.Lvl8Car3(game, 240, 425, ground)),
                        Client.GameManager.instance.level.updateElements.push(car),
                        _this.cars.push(car),
                        (ground = car = null),
                        (_this.bodyStopper = new Phaser.Physics.Box2D.Body(game, null, 200, 450, 1)),
                        _this.bodyStopper.setRectangle(10, 200),
                        _this.bodyStopper.setCollisionMask(~Client.FilterGroups.TRUCK),
                        (_this.handler = Client.GameManager.instance.layerMiddle.create(660, 350, "level8", "handler instance 10000")),
                        _this.handler.anchor.setTo(0.52, 1),
                        _this.setHandlerX(),
                        _this.takeNextFigure(),
                        _this
                    );
                }
                return (
                    __extends(Lvl8Manipulator, _super),
                    (Lvl8Manipulator.prototype.setHandlerX = function () {
                        var x = this.cars[0].graphic.x + this.cars[0].grid.x + 30 * this.cars[0].gridArr[0].length + 15;
                        this.handler.x = x - 30 * this.figures[0].idX + 2;
                    }),
                    (Lvl8Manipulator.prototype.takeNextFigure = function () {
                        (this.state = "takeNextFigure"),
                            (this.stateFigures = "moveRight"),
                            1 < this.figures.length && (this.figureStopX = 340 - (this.figures[1].arr[0].length / 2) * 30),
                            (this.figureStopY = this.figures[0].y + 30 * this.figures[0].idY),
                            "stand" === this.stateCars && (this.tCol = Math.round(Math.abs(this.cars[0].graphic.x + this.cars[0].grid.x - this.handler.x + 17) / 30) - this.figures[0].idX);
                    }),
                    (Lvl8Manipulator.prototype.update = function () {
                        if ((0 < this.cars.length && (this.bodyStopper.x = this.cars[this.cars.length - 1].graphic.x - 95), "takeNextFigure" === this.state))
                            (this.handler.y -= 4), this.handler.y <= this.figureStopY && ((this.handler.y = this.figureStopY + 2), (this.state = "none"), Client.SoundManager.stopSFXLoop("s_lvl8_handlerVertical"));
                        else if ("moveDown" === this.state)
                            (this.handler.y += 4),
                                225 <= this.handler.y && ((this.handler.y = 225), (this.state = "waitDecision"), "stand" === this.stateCars && this.startDecision()),
                                (this.figures[0].y = this.handler.y - 30 * this.figures[0].idY - 2);
                        else if ("moveUp" === this.state) (this.handler.y -= 4), this.handler.y <= 225 && ((this.handler.y = 225), (this.state = "finish"));
                        else if ("moveLeft" === this.state)
                            (this.handler.x -= 2),
                                this.handler.x <= this.moveEndX && ((this.handler.x = this.moveEndX), (this.tCol -= 1), (this.state = "waitDecision"), this.startDecision()),
                                (this.figures[0].x = this.handler.x - 30 * this.figures[0].idX - 15);
                        else if ("moveRight" === this.state)
                            (this.handler.x += 2),
                                this.handler.x >= this.moveEndX && ((this.handler.x = this.moveEndX), (this.tCol += 1), (this.state = "waitDecision"), this.startDecision()),
                                (this.figures[0].x = this.handler.x - 30 * this.figures[0].idX - 15);
                        else if ("place" === this.state) {
                            if (((this.handler.y += 4), (this.figures[0].y = this.handler.y - 30 * this.figures[0].idY - 2), this.handler.y >= this.figurePlaceY)) {
                                this.handler.y = this.figurePlaceY;
                                var figure = this.figures.shift();
                                Client.GameManager.instance.layerMiddle.removeChild(figure),
                                    this.cars[0].placeFigure(this.tRow, this.tCol, figure),
                                    !(figure = null) === this.cars[0].checkFullCar() &&
                                        (0 < this.figures.length &&
                                            ((this.tCol = this.cars[1].gridArr[0].length - this.figures[0].arr[0].length), (this.nextCarStopX = this.handler.x - this.cars[1].grid.x - 30 * (this.tCol + this.figures[0].idX) - 15)),
                                        (this.stateCars = "move"),
                                        Client.SoundManager.playSFX("s_lvl8_carEngine")),
                                    0 === this.figures.length ? (this.state = "moveUp") : this.takeNextFigure();
                            }
                        } else
                            "returnFigure" === this.state
                                ? ((this.handler.y -= 4),
                                  this.handler.y <= this.returnY &&
                                      ((this.handler.y = this.returnY),
                                      (this.stateFigures = "moveLeftFigure"),
                                      (this.state = "none"),
                                      (this.figureStopX = this.figures[1].x + 200 + 30 * this.figures[0].arr[0].length - 30 * this.figures[0].idX),
                                      (this.handler.x = this.cars[0].graphic.x + this.cars[0].figures[this.cars[0].figures.length - 1].x + 30 * this.cars[0].figures[this.cars[0].figures.length - 1].idX + 15),
                                      (this.handlerY = this.cars[0].graphic.y + this.cars[0].figures[this.cars[0].figures.length - 1].y + 30 * this.cars[0].figures[this.cars[0].figures.length - 1].idY + 2)),
                                  (this.figures[0].y = this.handler.y - 30 * this.figures[0].idY - 2))
                                : "takePrevFigure" === this.state
                                ? ((this.handler.y += 4),
                                  this.handler.y >= this.handlerY &&
                                      ((this.handler.y = this.handlerY),
                                      (this.state = "moveUpPrevFigure"),
                                      this.figures.unshift(this.cars[0].getLastFigure()),
                                      Client.GameManager.instance.layerMiddle.addChildAt(this.figures[0], 0),
                                      (this.figures[0].x = this.handler.x - 30 * this.figures[0].idX - 15),
                                      (this.figures[0].y = this.handler.y - 30 * this.figures[0].idY - 2)))
                                : "moveUpPrevFigure" === this.state &&
                                  ((this.handler.y -= 4),
                                  this.handler.y <= 225 &&
                                      ((this.handler.y = 225),
                                      (this.state = "waitDecision"),
                                      (this.tCol = Math.round(Math.abs(this.cars[0].graphic.x + this.cars[0].grid.x - this.handler.x + 17) / 30) - this.figures[0].idX),
                                      this.startDecision()),
                                  (this.figures[0].y = this.handler.y - 30 * this.figures[0].idY - 2));
                        if ("moveRight" === this.stateFigures) {
                            if ((!1 === this.soundTrakPlaying && ((this.soundTrakPlaying = !0), Client.SoundManager.playSFX("s_lvl8_transporterMove", !0)), 1 === this.figures.length))
                                (this.stateFigures = "moveRightFigure"), (this.soundTrakPlaying = !1), Client.SoundManager.stopSFXLoop("s_lvl8_transporterMove"), (this.figureStopX = this.handler.x - 30 * this.figures[0].idX - 15);
                            else {
                                for (var i = 0; i < this.figures.length; i++) this.figures[i].x += 2.5;
                                this.figures[1].x >= this.figureStopX &&
                                    ((this.figures[1].x = this.figureStopX),
                                    (this.stateFigures = "moveRightFigure"),
                                    (this.figureStopX = this.handler.x - 30 * this.figures[0].idX - 15),
                                    (this.soundTrakPlaying = !1),
                                    Client.SoundManager.stopSFXLoop("s_lvl8_transporterMove"));
                            }
                            this.trak.moveRight();
                        } else if ("moveRightFigure" === this.stateFigures)
                            (this.figures[0].x += 4),
                                this.figures[0].x >= this.figureStopX &&
                                    ((this.figures[0].x = this.figureStopX),
                                    (this.stateFigures = "none"),
                                    "stand" === this.stateCars
                                        ? ((this.state = "moveDown"),
                                          Client.SoundManager.playSFX("s_lvl8_handlerVertical", !0),
                                          this.checkCol(this.tCol),
                                          (this.handler.x = this.cars[0].graphic.x + this.cars[0].grid.x + 30 * (this.tCol + this.figures[0].idX) + 17),
                                          (this.figures[0].x = this.handler.x - 30 * this.figures[0].idX - 15))
                                        : (this.state = "waitCar"));
                        else if ("moveLeftFigure" === this.stateFigures)
                            (this.figures[0].x -= 4), this.figures[0].x <= this.figureStopX && ((this.figures[0].x = this.figureStopX), (this.stateFigures = "moveLeft"), (this.figureStopX = 340 - (this.figures[0].arr[0].length / 2) * 30));
                        else if ("moveLeft" === this.stateFigures) {
                            for (i = 0; i < this.figures.length; i++) this.figures[i].x -= 2.5;
                            !1 === this.soundTrakPlaying && ((this.soundTrakPlaying = !0), Client.SoundManager.playSFX("s_lvl8_transporterMove", !0)),
                                this.figures[0].x <= this.figureStopX + 100 && "none" === this.state && (this.state = "takePrevFigure"),
                                this.figures[0].x <= this.figureStopX && ((this.figures[0].x = this.figureStopX), (this.stateFigures = "none"), (this.soundTrakPlaying = !1), Client.SoundManager.stopSFXLoop("s_lvl8_transporterMove")),
                                this.trak.moveLeft();
                        }
                        if ("move" === this.stateCars) {
                            for (i = 0; i < this.cars.length; i++) this.cars[i].move();
                            if (1 === this.cars.length);
                            else if (this.cars[1].graphic.body.x >= this.nextCarStopX) {
                                (this.cars[1].graphic.body.x = this.nextCarStopX), (this.cars[1].grid.visible = !0);
                                for (i = 1; i < this.cars.length; i++) this.cars[i].stop();
                                this.cars.shift(),
                                    (this.stateCars = "stand"),
                                    "waitCar" === this.state &&
                                        ((this.state = "moveDown"),
                                        Client.SoundManager.playSFX("s_lvl8_handlerVertical", !0),
                                        this.checkCol(this.tCol),
                                        (this.handler.x = this.cars[0].graphic.x + this.cars[0].grid.x + 30 * (this.tCol + this.figures[0].idX) + 17),
                                        (this.figures[0].x = this.handler.x - 30 * this.figures[0].idX - 15));
                            }
                        }
                    }),
                    (Lvl8Manipulator.prototype.moveLeft = function () {
                        "waitDecision" === this.state && (Client.SoundManager.playSFX("s_lvl8_handlerHorizontal"), this.cars[0].graphics.clear(), (this.state = "moveLeft"), (this.moveEndX = this.handler.x - 30));
                    }),
                    (Lvl8Manipulator.prototype.moveRight = function () {
                        "waitDecision" === this.state && (Client.SoundManager.playSFX("s_lvl8_handlerHorizontal"), this.cars[0].graphics.clear(), (this.state = "moveRight"), (this.moveEndX = this.handler.x + 30));
                    }),
                    (Lvl8Manipulator.prototype.moveDown = function () {
                        "waitDecision" === this.state &&
                            ((this.state = "place"),
                            (this.figurePlaceY = this.cars[0].graphic.y + this.cars[0].grid.y + 4 + 30 * (this.tRow - 4) + 30 * this.figures[0].idY),
                            (this.btnBot.activeDispatchDown = !1),
                            (this.btnLeft.activeDispatchDown = !1),
                            (this.btnRight.activeDispatchDown = !1),
                            (this.btnTop.activeDispatchDown = !1),
                            Client.SoundManager.playSFX("btnClick"),
                            Client.SoundManager.playSFX("s_lvl8_handlerVertical", !0));
                    }),
                    (Lvl8Manipulator.prototype.moveUp = function () {
                        "waitDecision" === this.state &&
                            (Client.SoundManager.playSFX("btnClick"),
                            Client.SoundManager.playSFX("s_lvl8_handlerVertical", !0),
                            (this.btnBot.activeDispatchDown = !1),
                            (this.btnLeft.activeDispatchDown = !1),
                            (this.btnRight.activeDispatchDown = !1),
                            (this.btnTop.activeDispatchDown = !1),
                            this.cars[0].graphics.clear(),
                            (this.returnY = 151 - 30 * this.figures[0].arr.length + 2),
                            (this.state = "returnFigure"));
                    }),
                    (Lvl8Manipulator.prototype.startDecision = function () {
                        Client.SoundManager.stopSFXLoop("s_lvl8_handlerVertical");
                        var carGrid = this.cars[0].gridArr;
                        for (
                            this.figures[0].arr[0].length < carGrid[0].length && (this.btnLeft.activate(), this.btnRight.activate(), (this.btnLeft.activeDispatchDown = !0), (this.btnRight.activeDispatchDown = !0)),
                                this.cars.length < 3 && 0 < this.cars[0].figures.length && (this.btnTop.activate(), (this.btnTop.activeDispatchDown = !0)),
                                this.cars.length < 3 && 0 === this.cars[0].figures.length && (this.btnTop.deactivate(), (this.btnTop.activeDispatchDown = !1)),
                                this.tRow = 0;
                            ;

                        ) {
                            if (!0 !== this.canFit(this.tRow + 1, this.tCol)) {
                                this.land();
                                break;
                            }
                            this.tRow++;
                        }
                    }),
                    (Lvl8Manipulator.prototype.checkCol = function (col) {
                        for (var carGrid = this.cars[0].gridArr, figureGrid = this.figures[0].arr, i = 0; i < figureGrid.length; i++)
                            for (var j = 0; j < figureGrid[i].length; j++)
                                if (1 === figureGrid[i][j]) {
                                    if (col + j < 0) return void (this.tCol += 1);
                                    if (col + j > carGrid[0].length - 1) return void (this.tCol -= 1);
                                }
                    }),
                    (Lvl8Manipulator.prototype.canFit = function (row, col) {
                        for (var carGrid = this.cars[0].gridArr, figureGrid = this.figures[0].arr, i = 0; i < figureGrid.length; i++)
                            for (var j = 0; j < figureGrid[i].length; j++)
                                if (1 === figureGrid[i][j]) {
                                    if (
                                        (!0 === this.btnLeft.isActive && col + j < 1 && (this.btnLeft.activeDispatchDown = !1),
                                        !0 === this.btnRight.isActive && col + j > carGrid[0].length - 2 && (this.btnRight.activeDispatchDown = !1),
                                        row + i > carGrid.length - 1)
                                    )
                                        return !1;
                                    if (0 < carGrid[row + i][col + j]) return !1;
                                }
                        return !0;
                    }),
                    (Lvl8Manipulator.prototype.land = function () {
                        var graphic = this.cars[0].graphics;
                        graphic.clear();
                        var figureGrid = this.figures[0].arr;
                        this.tRow < 4 ? (graphic.beginFill(16711680, 0.5), (this.btnBot.activeDispatchDown = !1)) : (graphic.beginFill(65280, 0.5), (this.btnBot.activeDispatchDown = !0));
                        for (var i = 0; i < figureGrid.length; i++)
                            for (var j = 0; j < figureGrid[i].length; j++) 1 === figureGrid[i][j] && graphic.drawRect(30 * (this.tCol + j) + this.cars[0].offX, 30 * (this.tRow - 4 + i) + this.cars[0].offY, 30, 30);
                        graphic.endFill();
                    }),
                    (Lvl8Manipulator.prototype.addFigures = function () {
                        var figure = new Client.Lvl8Figure(this.game, 1, "figure1 instance 10000");
                        (figure.arr = [
                            [0, 1],
                            [1, 1],
                        ]),
                            (figure.idX = 1),
                            (figure.idY = 0),
                            Client.GameManager.instance.layerMiddle.addChild(figure),
                            this.figures.push(figure),
                            ((figure = new Client.Lvl8Figure(this.game, 2, "figure2 instance 10000")).arr = [[1]]),
                            (figure.idX = 0),
                            (figure.idY = 0),
                            Client.GameManager.instance.layerMiddle.addChild(figure),
                            this.figures.push(figure),
                            ((figure = new Client.Lvl8Figure(this.game, 3, "figure13 instance 10000")).arr = [[1, 1, 1, 1]]),
                            (figure.idX = 2),
                            (figure.idY = 0),
                            Client.GameManager.instance.layerMiddle.addChild(figure),
                            this.figures.push(figure),
                            ((figure = new Client.Lvl8Figure(this.game, 4, "figure4 instance 10000")).arr = [[1, 1, 1]]),
                            (figure.idX = 1),
                            (figure.idY = 0),
                            Client.GameManager.instance.layerMiddle.addChild(figure),
                            this.figures.push(figure),
                            ((figure = new Client.Lvl8Figure(this.game, 5, "figure5 instance 10000")).arr = [
                                [1, 1],
                                [0, 1],
                                [0, 1],
                            ]),
                            (figure.idX = 1),
                            (figure.idY = 0),
                            (figure.pivot.y = 1),
                            Client.GameManager.instance.layerMiddle.addChild(figure),
                            this.figures.push(figure),
                            ((figure = new Client.Lvl8Figure(this.game, 6, "figure6 instance 10000")).arr = [
                                [1, 1, 1],
                                [1, 0, 0],
                            ]),
                            (figure.idX = 1),
                            (figure.idY = 0),
                            Client.GameManager.instance.layerMiddle.addChild(figure),
                            this.figures.push(figure),
                            ((figure = new Client.Lvl8Figure(this.game, 7, "figure12 instance 10000")).arr = [
                                [0, 0, 1],
                                [1, 1, 1],
                            ]),
                            (figure.idX = 1),
                            (figure.idY = 1),
                            Client.GameManager.instance.layerMiddle.addChild(figure),
                            this.figures.push(figure),
                            ((figure = new Client.Lvl8Figure(this.game, 8, "figure8 instance 10000")).arr = [
                                [1, 1],
                                [1, 1],
                            ]),
                            (figure.idX = 0),
                            (figure.idY = 0),
                            Client.GameManager.instance.layerMiddle.addChild(figure),
                            this.figures.push(figure),
                            ((figure = new Client.Lvl8Figure(this.game, 9, "figure9 instance 10000")).arr = [[1], [1], [1], [1]]),
                            (figure.idX = 0),
                            (figure.idY = 0),
                            Client.GameManager.instance.layerMiddle.addChild(figure),
                            this.figures.push(figure),
                            ((figure = new Client.Lvl8Figure(this.game, 10, "figure10 instance 10000")).arr = [
                                [0, 1],
                                [1, 1],
                                [0, 1],
                            ]),
                            (figure.idX = 1),
                            (figure.idY = 0),
                            Client.GameManager.instance.layerMiddle.addChild(figure),
                            this.figures.push(figure),
                            ((figure = new Client.Lvl8Figure(this.game, 11, "figure14 instance 10000")).arr = [
                                [1, 1, 1],
                                [0, 1, 0],
                            ]),
                            (figure.idX = 1),
                            (figure.idY = 0),
                            Client.GameManager.instance.layerMiddle.addChild(figure),
                            this.figures.push(figure);
                        for (var i = 0; i < this.figures.length; i++) (this.figures[i].x = 345 - 200 * i - 30 * this.figures[i].arr[0].length + 30 * this.figures[i].idX), (this.figures[i].y = 151 - 30 * this.figures[i].arr.length);
                    }),
                    (Lvl8Manipulator.prototype.free = function () {
                        (this.game = null),
                            (this.btnBot = null),
                            (this.btnLeft = null),
                            (this.btnRight = null),
                            (this.btnTop = null),
                            (this.trak = null),
                            (this.cars = []),
                            (this.cars = null),
                            (this.handler = null),
                            (this.figures = []),
                            (this.figures = null),
                            (this.mask = null),
                            (this.bodyStopper = null);
                    }),
                    Lvl8Manipulator
                );
            })(Client.BasicElement);
            Client.Lvl8Manipulator = Lvl8Manipulator;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl8Trak = (function (_super) {
                function Lvl8Trak(game, x, y) {
                    var _this = _super.call(this) || this;
                    (_this.speedAngle = 2), (_this.leftX = x - 220), (_this.trak = Client.GameManager.instance.layerMiddle.create(_this.leftX, y - 19, "level8", "trak instance 10000"));
                    var sprite = Client.GameManager.instance.layerMiddle.create(x - 103, y + 1, "level8", "trakp1 instance 10000");
                    return (
                        (sprite.anchor.y = 0.5),
                        (_this.wheel1 = Client.GameManager.instance.layerMiddle.create(x, y - 1, "level8", "trakWheel instance 10000")),
                        _this.wheel1.anchor.setTo(0.43, 0.42),
                        (_this.wheel2 = Client.GameManager.instance.layerMiddle.create(x + 33, y - 1, "level8", "trakWheel instance 10000")),
                        _this.wheel2.anchor.setTo(0.43, 0.42),
                        (_this.wheel3 = Client.GameManager.instance.layerMiddle.create(x + 66, y - 1, "level8", "trakWheel instance 10000")),
                        _this.wheel3.anchor.setTo(0.43, 0.42),
                        (_this.wheel4 = Client.GameManager.instance.layerMiddle.create(x + 99, y - 1, "level8", "trakWheel instance 10000")),
                        _this.wheel4.anchor.setTo(0.43, 0.42),
                        (_this.wheel5 = Client.GameManager.instance.layerMiddle.create(x + 132, y - 1, "level8", "trakWheel instance 10000")),
                        _this.wheel5.anchor.setTo(0.43, 0.42),
                        (_this.wheel6 = Client.GameManager.instance.layerMiddle.create(x + 165, y - 1, "level8", "trakWheel instance 10000")),
                        _this.wheel6.anchor.setTo(0.43, 0.42),
                        ((sprite = Client.GameManager.instance.layerMiddle.create(x - 32, y - 2, "level8", "trakp2 instance 10000")).anchor.y = 0.5),
                        _this
                    );
                }
                return (
                    __extends(Lvl8Trak, _super),
                    (Lvl8Trak.prototype.moveRight = function () {
                        (this.wheel1.angle += this.speedAngle),
                            (this.wheel2.angle += this.speedAngle),
                            (this.wheel3.angle += this.speedAngle),
                            (this.wheel4.angle += this.speedAngle),
                            (this.wheel5.angle += this.speedAngle),
                            (this.wheel6.angle += this.speedAngle),
                            (this.trak.x += 2.5),
                            150 < this.trak.x && (this.trak.x = 50);
                    }),
                    (Lvl8Trak.prototype.moveLeft = function () {
                        (this.wheel1.angle -= this.speedAngle),
                            (this.wheel2.angle -= this.speedAngle),
                            (this.wheel3.angle -= this.speedAngle),
                            (this.wheel4.angle -= this.speedAngle),
                            (this.wheel5.angle -= this.speedAngle),
                            (this.wheel6.angle -= this.speedAngle),
                            (this.trak.x -= 2.5),
                            this.trak.x < 50 && (this.trak.x = 150);
                    }),
                    (Lvl8Trak.prototype.free = function () {
                        (this.trak = null), (this.wheel1 = null), (this.wheel2 = null), (this.wheel3 = null), (this.wheel4 = null), (this.wheel5 = null), (this.wheel6 = null);
                    }),
                    Lvl8Trak
                );
            })(Client.BasicElement);
            Client.Lvl8Trak = Lvl8Trak;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl9Car = (function (_super) {
                function Lvl9Car(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.body = new Phaser.Physics.Box2D.Body(game, null, 397, 416, 2)),
                        _this.body.setRectangle(160, 42),
                        (_this.body.fixedRotation = !0),
                        _this.body.setCollisionCategory(Client.FilterGroups.CAR1),
                        (_this.group = game.make.group()),
                        (_this.group.x = _this.body.x),
                        (_this.group.y = _this.body.y),
                        Client.GameManager.instance.layerBackground.addChild(_this.group),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "level9", "carPart instance 10000")),
                        _this.part2.pivot.set(1, 1),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "level9", "carBody instance 10000")),
                        _this.part1.pivot.set(1, 1),
                        _this.group.addChild(_this.part1),
                        (_this.eyes = game.make.sprite(95, -8, "level9")),
                        _this.eyes.animations.add("attack", Phaser.Animation.generateFrameNames("carEyes instance 1", 0, 37, "", 4), 30, !1),
                        _this.eyes.animations.add("idle", Phaser.Animation.generateFrameNames("carEyes instance 1", 38, 205, "", 4), 30, !0),
                        _this.eyes.animations.play("idle"),
                        _this.part1.addChild(_this.eyes),
                        (_this.wheel1 = Client.GameManager.instance.layerBackground.create(350, 430, "level9", "carWheel instance 10000")),
                        game.physics.box2d.enable(_this.wheel1),
                        _this.wheel1.body.setCircle(17),
                        _this.wheel1.body.setCollisionCategory(Client.FilterGroups.CAR1),
                        (_this.wheel2 = Client.GameManager.instance.layerBackground.create(441, 430, "level9", "carWheel instance 10000")),
                        game.physics.box2d.enable(_this.wheel2),
                        _this.wheel2.body.setCircle(17),
                        _this.wheel2.body.setCollisionCategory(Client.FilterGroups.CAR1),
                        game.physics.box2d.revoluteJoint(_this.body, _this.wheel1.body, -47, 14),
                        game.physics.box2d.revoluteJoint(_this.body, _this.wheel2.body, 44, 14),
                        _this.playAnim("anim", -1),
                        _this
                    );
                }
                return (
                    __extends(Lvl9Car, _super),
                    (Lvl9Car.prototype.update = function () {
                        _super.prototype.update.call(this), (this.group.x = this.body.x), (this.group.y = this.body.y);
                    }),
                    (Lvl9Car.prototype.attack = function () {
                        this.body.velocity.x = 400;
                    }),
                    (Lvl9Car.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim ? this.startTween(this.part1, 9, { y: -43 }) : 10 === this.counterAnim ? this.startTween(this.part1, 10, { y: -45 }) : 20 === this.counterAnim && this.animComplete());
                    }),
                    (Lvl9Car.prototype.setParts = function (value) {
                        "anim" === value &&
                            (this.setPart(this.part1, { x: -80, y: -45, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }), this.setPart(this.part2, { x: -69, y: -20, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (Lvl9Car.prototype.free = function () {
                        (this.group = null), (this.part2 = null), (this.part1 = null), (this.body = null), (this.wheel1 = null), (this.wheel2 = null), (this.eyes = null);
                    }),
                    Lvl9Car
                );
            })(Client.BasicSimpleAnim);
            Client.Lvl9Car = Lvl9Car;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl9Kran = (function (_super) {
                function Lvl9Kran(game) {
                    var _this = _super.call(this) || this;
                    (_this.leverPressed = !1),
                        (_this.oldAngle = 0),
                        (_this.boxPresssed = !1),
                        (_this.ropeTopY = 235),
                        (_this.ropeBotY = 417),
                        (_this.soundLeverPlaying = !1),
                        (_this.countAwake = 0),
                        (_this.game = game),
                        (_this.wheel = Client.GameManager.instance.layerBackground.create(541, 84, "level9", "kranWheel instance 10000")),
                        _this.wheel.anchor.setTo(0.46, 0.47),
                        (_this.wheelRope = Client.GameManager.instance.layerBackground.create(513, 34, "level9", "kranWheelRope instance 10000")),
                        (_this.wheelRope.anchor.y = 0.5),
                        (_this.wheelRope.angle = 45),
                        (_this.rope = Client.GameManager.instance.layerBackground.create(585, 235, "level9", "kranRope instance 10000")),
                        _this.rope.anchor.setTo(0.5, 1),
                        (_this.box = new Client.SimpleButton(game, 581, 235, "level9", "kranBox", !1)),
                        _this.box.activate(),
                        _this.box.onInputDown.addOnce(_this.boxDown, _this),
                        Client.GameManager.instance.layerBackground.addChild(_this.box),
                        (_this.boxBody = new Phaser.Physics.Box2D.Body(game, null, 581, 235, 1)),
                        _this.boxBody.setRectangle(110, 60),
                        (_this.boxBody.restitution = 0.3),
                        _this.boxBody.setCollisionCategory(Client.FilterGroups.CAR1),
                        _this.boxBody.setCollisionMask(~Client.FilterGroups.WALL);
                    var sprite = Client.GameManager.instance.layerBackground.create(581, 65, "level9", "kranBg instance 10000");
                    (sprite.anchor.x = 0.5),
                        (sprite.cacheAsBitmap = !0),
                        Client.GameManager.instance.layerBackground.create(498, 64, "level9", "bgPart1 instance 10000"),
                        (_this.lever = new Client.SimpleButton(game, 582, 116, "level9", "kranLever", !1)),
                        _this.lever.activate(),
                        (_this.lever.anchor.x = 0.23),
                        (_this.lever.hitArea = new Phaser.Rectangle(44, -21, 36, 34)),
                        _this.lever.onInputDown.add(_this.leverDown, _this),
                        _this.lever.onInputUp.add(_this.leverUp, _this),
                        Client.GameManager.instance.layerBackground.addChild(_this.lever),
                        (sprite = null),
                        (_this.bodyKruk = new Phaser.Physics.Box2D.Body(game, null, 0, 0, 1)),
                        _this.bodyKruk.setRectangle(44, 20),
                        (_this.bodyKruk.sensor = !0);
                    var mask = game.make.graphics();
                    return (
                        mask.beginFill(16711680, 0.5),
                        mask.drawRect(480, 66, 200, 600),
                        mask.endFill(),
                        Client.GameManager.instance.layerBackground.addChild(mask),
                        (_this.wheel.mask = mask),
                        (_this.wheelRope.mask = mask),
                        (_this.rope.mask = mask),
                        (mask = null),
                        _this
                    );
                }
                return (
                    __extends(Lvl9Kran, _super),
                    (Lvl9Kran.prototype.leverDown = function () {
                        this.leverPressed = !0;
                    }),
                    (Lvl9Kran.prototype.leverUp = function () {
                        (this.leverPressed = !1), (this.soundLeverPlaying = !1), Client.SoundManager.stopSFXLoop("s_lvl5_rotatingArm");
                    }),
                    (Lvl9Kran.prototype.boxDown = function () {
                        this.box.deactivate(!0), (this.boxBody.x = this.box.x), (this.boxBody.y = this.box.y), (this.boxBody.dynamic = !0), (this.boxPresssed = !0);
                    }),
                    (Lvl9Kran.prototype.setBulkBotDown = function () {
                        this.ropeBotY = 510;
                    }),
                    (Lvl9Kran.prototype.setNewBotY = function () {
                        this.ropeBotY = this.rope.y;
                    }),
                    (Lvl9Kran.prototype.update = function () {
                        if (!0 === this.leverPressed) {
                            var angle = Phaser.Math.angleBetween(this.game.input.worldX, this.game.input.worldY, this.lever.x, this.lever.y);
                            if (this.oldAngle === angle) return (this.soundLeverPlaying = !1), void Client.SoundManager.stopSFXLoop("s_lvl5_rotatingArm");
                            angle > this.oldAngle
                                ? this.rope.y > this.ropeTopY &&
                                  ((this.rope.y -= 1.5), (this.wheel.angle -= 2), (this.wheelRope.x -= 1), (this.wheelRope.y -= 1), this.wheelRope.x < 493 && this.wheelRope.y < 14 && ((this.wheelRope.x = 513), (this.wheelRope.y = 34)))
                                : this.rope.y < this.ropeBotY &&
                                  ((this.rope.y += 1.5), (this.wheel.angle += 2), (this.wheelRope.x += 1), (this.wheelRope.y += 1), 533 < this.wheelRope.x && 54 < this.wheelRope.y && ((this.wheelRope.x = 513), (this.wheelRope.y = 34))),
                                !1 === this.soundLeverPlaying && ((this.soundLeverPlaying = !0), Client.SoundManager.playSFX("s_lvl5_rotatingArm", !0)),
                                !1 === this.boxPresssed && (this.box.y = this.rope.y),
                                (this.lever.rotation = angle - Math.PI),
                                (this.oldAngle = angle);
                        }
                        !0 === this.boxPresssed &&
                            ((this.box.x = this.boxBody.x),
                            (this.box.y = this.boxBody.y),
                            (this.box.rotation = this.boxBody.rotation),
                            (this.countAwake += 1),
                            10 === this.countAwake && (this.boxBody.data.SetAwake(!0), (this.countAwake = 0)),
                            (this.bodyKruk.x = this.rope.x - 4),
                            (this.bodyKruk.y = this.rope.y - 20));
                    }),
                    (Lvl9Kran.prototype.free = function () {
                        (this.game = null), (this.lever = null), (this.box = null), (this.boxBody = null), (this.wheel = null), (this.wheelRope = null), (this.rope = null), (this.bodyKruk = null);
                    }),
                    Lvl9Kran
                );
            })(Client.BasicElement);
            Client.Lvl9Kran = Lvl9Kran;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl9PulleyDoor = (function (_super) {
                function Lvl9PulleyDoor(game) {
                    var _this = _super.call(this) || this;
                    (_this.boxAnglePlus = !0),
                        (_this.boxPressed = !1),
                        (_this.boxTopY = 113),
                        (_this.boxBotY = 335),
                        (_this.game = game),
                        (_this.rope1 = Client.GameManager.instance.layerBackground.create(736, 335, "level9", "slideDoorRope instance 10000")),
                        _this.rope1.anchor.setTo(0.5, 1),
                        (_this.rope1.pivot.y = -20),
                        (_this.box = new Client.SimpleButton(game, 736, 335, "level9", "slideDoorBox", !1)),
                        _this.box.activate(),
                        (_this.box.anchor.y = 0),
                        (_this.box.rotation = -0.1),
                        _this.box.onInputDown.add(_this.boxDown, _this),
                        _this.box.onInputUp.add(_this.boxUp, _this),
                        Client.GameManager.instance.layerUpper.addChild(_this.box),
                        (_this.rope2 = Client.GameManager.instance.layerBackground.create(496, 111, "level9", "slideDoorRope instance 10000")),
                        _this.rope2.anchor.setTo(0.44, 1),
                        (_this.rope2.pivot.y = -20),
                        (_this.door = Client.GameManager.instance.layerBackground.create(496, 111, "level9", "slideDoor instance 10000")),
                        (_this.door.anchor.x = 0.5),
                        (_this.rope3 = Client.GameManager.instance.layerBackground.create(581, 56.5, "level9", "slideDoorRope instance 10000")),
                        _this.rope3.anchor.setTo(0.5),
                        (_this.rope3.angle = 90),
                        (_this.wheel1 = Client.GameManager.instance.layerMiddle.create(500, 57, "level9", "slideDoorWheel instance 10000")),
                        _this.wheel1.anchor.setTo(0.5),
                        (_this.wheel2 = Client.GameManager.instance.layerMiddle.create(730, 57, "level9", "slideDoorWheel instance 10000")),
                        _this.wheel2.anchor.setTo(0.5);
                    var mask = game.make.graphics();
                    return (
                        mask.beginFill(16711680, 0.5),
                        mask.drawRect(491, 51, 249, 600),
                        mask.endFill(),
                        Client.GameManager.instance.layerBackground.addChild(mask),
                        (_this.rope1.mask = mask),
                        (_this.rope2.mask = mask),
                        (_this.rope3.mask = mask),
                        (mask = null),
                        _this
                    );
                }
                return (
                    __extends(Lvl9PulleyDoor, _super),
                    (Lvl9PulleyDoor.prototype.boxDown = function () {
                        (this.boxPressed = !0), (this.pressedY = this.game.input.worldY), (this.boxY = this.box.y), (this.lastBoxY = this.boxY);
                    }),
                    (Lvl9PulleyDoor.prototype.boxUp = function () {
                        this.boxPressed = !1;
                    }),
                    (Lvl9PulleyDoor.prototype.update = function () {
                        if (!0 === this.boxPressed) {
                            var offY = this.game.input.worldY - this.pressedY;
                            (this.box.y = this.boxY + offY), this.box.y > this.boxBotY ? (this.box.y = this.boxBotY) : this.box.y < this.boxTopY && (this.box.y = this.boxTopY), (this.rope1.y = this.box.y);
                            var offAngle = this.box.y - this.lastBoxY;
                            (this.wheel1.angle += offAngle),
                                (this.wheel2.angle += offAngle),
                                (this.door.y -= offAngle),
                                Client.GameManager.instance.level.customAction(1),
                                (this.rope2.y = this.door.y),
                                (this.rope3.x += offAngle),
                                (this.lastBoxY = this.box.y);
                        }
                        !0 === this.boxAnglePlus ? ((this.box.rotation += 0.001), 0.1 < this.box.rotation && (this.boxAnglePlus = !1)) : ((this.box.rotation -= 0.001), this.box.rotation < -0.1 && (this.boxAnglePlus = !0));
                    }),
                    (Lvl9PulleyDoor.prototype.free = function () {
                        (this.game = null), (this.box = null), (this.door = null), (this.wheel1 = null), (this.wheel2 = null), (this.rope1 = null), (this.rope2 = null), (this.rope3 = null);
                    }),
                    Lvl9PulleyDoor
                );
            })(Client.BasicElement);
            Client.Lvl9PulleyDoor = Lvl9PulleyDoor;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lvl9SlidingDoor = (function (_super) {
                function Lvl9SlidingDoor(game, x, y, scaleX) {
                    var _this = _super.call(this, game, x, y, "level9", "slidingDoor", !1) || this;
                    return (
                        (_this.pressedThis = !1),
                        (_this.move = 0),
                        _this.activate(),
                        (_this.scale.x = scaleX),
                        (_this.endX = x - 65 * scaleX),
                        (_this.startX = x),
                        game.physics.box2d.enable(_this),
                        _this.body.setRectangle(80, 20),
                        (_this.body.kinematic = !0),
                        _this.onInputDown.add(_this.pressDown, _this),
                        _this.onInputUp.add(_this.pressUp, _this),
                        _this
                    );
                }
                return (
                    __extends(Lvl9SlidingDoor, _super),
                    (Lvl9SlidingDoor.prototype.pressDown = function () {
                        (this.pressedThis = !0), (this.pressedThisX = this.game.input.worldX), (this.currX = this.body.x), Client.SoundManager.playSFX("s_lvl9_trapsSlide");
                    }),
                    (Lvl9SlidingDoor.prototype.pressUp = function () {
                        this.pressedThis = !1;
                    }),
                    (Lvl9SlidingDoor.prototype.goStartX = function () {
                        (this.move = this.scale.x), (this.body.velocity.x = 120 * this.move);
                    }),
                    (Lvl9SlidingDoor.prototype.update = function () {
                        if (
                            (1 === this.move
                                ? this.body.x >= this.startX && ((this.body.x = this.startX), (this.move = 0), (this.body.velocity.x = 0))
                                : -1 === this.move && this.body.x <= this.startX && ((this.body.x = this.startX), (this.move = 0), (this.body.velocity.x = 0)),
                            !0 === this.pressedThis)
                        ) {
                            var offX = this.game.input.worldX - this.pressedThisX;
                            (this.body.x = this.currX + offX),
                                1 === this.scale.x
                                    ? this.body.x > this.startX
                                        ? (this.body.x = this.startX)
                                        : this.body.x < this.endX && ((this.body.x = this.endX), (this.pressedThis = !1), this.deactivate(!0))
                                    : this.body.x < this.startX
                                    ? (this.body.x = this.startX)
                                    : this.body.x > this.endX && ((this.body.x = this.endX), (this.pressedThis = !1), this.deactivate(!0));
                        }
                    }),
                    Lvl9SlidingDoor
                );
            })(Client.SimpleButton);
            Client.Lvl9SlidingDoor = Lvl9SlidingDoor;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var PunktirCircle = (function (_super) {
                function PunktirCircle(game, _x, _y, _key, _frame) {
                    void 0 === _key && (_key = null), void 0 === _frame && (_frame = null);
                    var _this = _super.call(this, game, _x, _y, _key, _frame) || this;
                    return _this.anchor.setTo(0.5), _this;
                }
                return (
                    __extends(PunktirCircle, _super),
                    (PunktirCircle.prototype.update = function () {
                        this.rotation += 0.02;
                    }),
                    PunktirCircle
                );
            })(Phaser.Image);
            Client.PunktirCircle = PunktirCircle;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Star = (function () {
                function Star(_game, _x, _y) {
                    (this.lifeTime = 0),
                        (this.randDirection = 0),
                        (this.counter = 0),
                        (this.speed = 0),
                        (this.rot = 0),
                        (this.star = _game.add.sprite(_x, _y, "ui", "questStar instance 10000")),
                        this.star.anchor.set(0.5),
                        this.star.scale.set(_game.rnd.integerInRange(30, 100) / 100),
                        (this.lifeTime = _game.rnd.integerInRange(20, 35)),
                        (this.speed = _game.rnd.integerInRange(5, 10) / 10),
                        (this.rot = _game.rnd.integerInRange(-1, 1)),
                        (this.randDirection = Phaser.Math.degToRad(_game.rnd.integerInRange(0, 360)));
                }
                return (
                    (Star.prototype.update = function () {
                        if (null !== this.star) {
                            if (this.star.alpha <= 0) return this.star.destroy(), void (this.star = null);
                            (this.counter += 1),
                                this.counter >= this.lifeTime && ((this.star.alpha -= 0.03), (this.star.scale.x -= 0.01), (this.star.scale.y -= 0.01)),
                                (this.star.x -= Math.cos(this.randDirection) * this.speed),
                                (this.star.y -= Math.sin(this.randDirection) * this.speed),
                                (this.star.angle += this.speed * this.rot * 3);
                        }
                    }),
                    Star
                );
            })();
            Client.Star = Star;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var WaterRect = (function (_super) {
                function WaterRect(game, m_density, m_linearDrag, m_angularDrag) {
                    void 0 === m_density && (m_density = 3), void 0 === m_linearDrag && (m_linearDrag = 5), void 0 === m_angularDrag && (m_angularDrag = 0);
                    var _this = _super.call(this) || this;
                    return (
                        (_this.game = game),
                        (_this.onContactWater = new Phaser.Signal()),
                        (_this.m_controller = new box2d.b2BuoyancyController()),
                        (_this.m_controller.useDensity = !0),
                        (_this.m_controller.density = m_density),
                        (_this.m_controller.linearDrag = m_linearDrag),
                        (_this.m_controller.angularDrag = m_angularDrag),
                        _this.game.physics.box2d.world.AddController(_this.m_controller),
                        _this.setNormal(),
                        _this
                    );
                }
                return (
                    __extends(WaterRect, _super),
                    (WaterRect.prototype.setFlow = function (x, y) {
                        void 0 === x && (x = 0), void 0 === y && (y = 0), (this.m_controller.velocity.x = x), (this.m_controller.velocity.y = y);
                    }),
                    (WaterRect.prototype.setNormal = function (x, y) {
                        void 0 === x && (x = 0), void 0 === y && (y = 1), this.m_controller.normal.SetXY(x, y);
                    }),
                    (WaterRect.prototype.addRectangle = function (_x, _y, _w, _h) {
                        this.body = new Phaser.Physics.Box2D.Body(this.game, null, _x, _y, 1);
                        var fixtureDef = this.body.setRectangle(_w, _h);
                        fixtureDef.SetDensity(2),
                            fixtureDef.SetFriction(0.3),
                            fixtureDef.SetRestitution(0),
                            (fixtureDef = null),
                            (this.body.sensor = !0),
                            this.body.setCategoryContactCallback(1, this.onContact, this),
                            (this.bodyHalfH = _h / 2);
                    }),
                    (WaterRect.prototype.onContact = function (body1, body2, fixture1, fixture2, begin) {
                        body1 !== body2 &&
                            !0 !== body2.sensor &&
                            !1 !== body2.dynamic &&
                            (!0 === begin
                                ? null === body2.data.GetControllerList() && (this.m_controller.AddBody(body2.data), this.onContactWater.dispatch(body2, !0))
                                : null !== body2.data.GetControllerList() && (this.m_controller.RemoveBody(body2.data), this.onContactWater.dispatch(body2, !1)));
                    }),
                    (WaterRect.prototype.setOffsetController = function () {
                        this.m_controller.offset = -(this.body.y - this.bodyHalfH) / 50;
                    }),
                    (WaterRect.prototype.free = function () {
                        (this.game = null), (this.m_controller = null), (this.body = null), (this.onContactWater = null);
                    }),
                    WaterRect
                );
            })(Client.BasicElement);
            Client.WaterRect = WaterRect;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Fabrique) {
        var ContentStatus;
        !(function (ContentStatus) {
            (ContentStatus.PAUSED = "Paused"), (ContentStatus.RESUMED = "Resumed");
        })(ContentStatus || (ContentStatus = {}));
        var AdHandler = (function () {
            function AdHandler() {
                this.contentStatus = ContentStatus.RESUMED;
            }
            return (
                (AdHandler.getInstance = function () {
                    return AdHandler.instance || (AdHandler.instance = new AdHandler()), AdHandler.instance;
                }),
                (AdHandler.prototype.init = function () {
                    var adProvider = new AdFreeUntrackedProvider();
                    h5ads.adWrapper.setAdProvider(adProvider), window.hasOwnProperty("fbrqSA") && !0 === window.fbrqSA && (h5branding.Utils.ASSET_LOCATION = "assets/");
                }),
                (AdHandler.prototype.showAd = function (type, resumeCallback, pauseCallback) {
                    var _this = this;
                    Fabrique.LoaderHelper.show(),
                        h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_PAUSED, function () {
                            Fabrique.LoaderHelper.hide(),
                                h5branding.google.sendScreenView("advertisement_" + type),
                                pauseCallback && pauseCallback.call(_this),
                                (_this.contentStatus = ContentStatus.PAUSED),
                                Fabrique.PauseHandler.getInstance().pause();
                        }),
                        h5ads.adWrapper.once(h5ads.AdEvents.CONTENT_RESUMED, function () {
                            Fabrique.LoaderHelper.hide(),
                                h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_PAUSED),
                                h5ads.adWrapper.removeAllListeners(h5ads.AdEvents.CONTENT_RESUMED),
                                (_this.contentStatus = ContentStatus.RESUMED),
                                Fabrique.PauseHandler.getInstance().resume(),
                                resumeCallback && resumeCallback.call(_this);
                        }),
                        h5ads.adWrapper.showAd(h5ads.AdType.interstitial);
                }),
                (AdHandler.prototype.isAdPlaying = function () {
                    return this.contentStatus === ContentStatus.PAUSED;
                }),
                AdHandler
            );
        })();
        Fabrique.AdHandler = AdHandler;
    })(Fabrique || (Fabrique = {})),
    (function (Fabrique) {
        var LoaderHelper = (function () {
            function LoaderHelper() {}
            return (
                (LoaderHelper.show = function () {
                    var loader = document.getElementById("loader");
                    loader && (loader.style.display = "block");
                }),
                (LoaderHelper.hide = function () {
                    var loader = document.getElementById("loader");
                    loader && (loader.style.display = "none");
                }),
                LoaderHelper
            );
        })();
        Fabrique.LoaderHelper = LoaderHelper;
    })(Fabrique || (Fabrique = {})),
    (function (Fabrique) {
        var PauseHandler = (function () {
            function PauseHandler(game) {
                (this.game = game), (this.focused = !1);
            }
            return (
                (PauseHandler.getInstance = function (game) {
                    return PauseHandler.instance || (PauseHandler.instance = new PauseHandler(game)), PauseHandler.instance;
                }),
                (PauseHandler.prototype.init = function () {
                    var _this = this;
                    (this.game.stage.disableVisibilityChange = !0),
                        (this.onPauseCallback = new Phaser.Signal()),
                        h5branding.Utils.isOnDevice() &&
                            (document.addEventListener("pause", function () {
                                return _this.onPause();
                            }),
                            document.addEventListener("resume", function () {
                                return _this.onResume();
                            })),
                        this.game.onBlur.add(this.onBlur, this),
                        this.game.onFocus.add(this.onFocus, this),
                        this.game.onPause.add(this.onPause, this),
                        this.game.onResume.add(this.onResume, this);
                }),
                (PauseHandler.prototype.onBlur = function () {
                    (this.focused = !1), this.game.onPause.dispatch();
                }),
                (PauseHandler.prototype.onFocus = function () {
                    (this.focused = !0), Fabrique.AdHandler.getInstance().isAdPlaying() || this.game.onResume.dispatch();
                }),
                (PauseHandler.prototype.onPause = function () {
                    this.game.sound.setMute(), this.onPauseCallback && this.onPauseCallback.dispatch();
                }),
                (PauseHandler.prototype.onResume = function () {
                    this.game.sound.unsetMute();
                }),
                (PauseHandler.prototype.pause = function () {
                    this.game.onPause.dispatch();
                }),
                (PauseHandler.prototype.resume = function () {
                    this.hasFocus && this.game.onResume.dispatch();
                }),
                Object.defineProperty(PauseHandler.prototype, "hasFocus", {
                    get: function () {
                        return this.focused;
                    },
                    enumerable: !0,
                    configurable: !0,
                }),
                PauseHandler
            );
        })();
        Fabrique.PauseHandler = PauseHandler;
    })(Fabrique || (Fabrique = {})),
    (function (Wheely) {
        !(function (Client) {
            var BasicLevel = (function () {
                function BasicLevel(_game) {
                    (this.questCarFounded = !1),
                        (this.questWheelFounded = !1),
                        (this.questWheel = null),
                        (this.questCar = null),
                        (this.game = _game),
                        (this.updateElements = new Array()),
                        1 === Client.DataManager.getInstance().saveObj["questCar" + Client.LevelManager.getInstance().currentLevel] && (this.questCarFounded = !0),
                        1 === Client.DataManager.getInstance().saveObj["questWheel" + Client.LevelManager.getInstance().currentLevel] && (this.questWheelFounded = !0);
                }
                return (
                    (BasicLevel.prototype.init = function () {}),
                    (BasicLevel.prototype.customAction = function (value) {
                        void 0 === value && (value = 0);
                    }),
                    (BasicLevel.prototype.addQuestWheel = function (_level, _x, _y, _parent, _index, scale) {
                        void 0 === _index && (_index = -1),
                            void 0 === scale && (scale = 1),
                            !0 !== this.questWheelFounded &&
                                ((this.questWheel = this.game.make.button(
                                    _x,
                                    _y,
                                    "ui",
                                    this.clickQuestWheel,
                                    this,
                                    "questWheel" + _level + " instance 10001",
                                    "questWheel" + _level + " instance 10000",
                                    "questWheel" + _level + " instance 10000"
                                )),
                                this.questWheel.anchor.setTo(0.5),
                                this.questWheel.scale.setTo(scale),
                                -1 === _index ? _parent.addChild(this.questWheel) : _parent.addChildAt(this.questWheel, _index));
                    }),
                    (BasicLevel.prototype.clickQuestWheel = function () {
                        (this.questWheelFounded = !0), (this.questWheel.visible = !1), this.addStars(this.questWheel.world.x, this.questWheel.world.y), Client.LevelBuilder.instance.panelQuest.foundWheel();
                    }),
                    (BasicLevel.prototype.addQuestCar = function (_x, _y, _parent, _index, _angle, _scale) {
                        if ((void 0 === _index && (_index = -1), void 0 === _angle && (_angle = 0), void 0 === _scale && (_scale = 1), !0 !== this.questCarFounded)) {
                            (this.questCar = this.game.make.button(_x, _y, "ui", this.clickQuestCar, this, "carBody instance 10001", "carBody instance 10000", "carBody instance 10000")),
                                this.questCar.anchor.setTo(0.5),
                                (this.questCar.angle = _angle),
                                this.questCar.scale.set(_scale);
                            var eyes = this.game.make.sprite(-4, -27, "ui", "carEye instance 10000");
                            eyes.animations.add("idle", Phaser.Animation.generateFrameNames("carEye instance 1", 0, 89, "", 4), 35, !0),
                                eyes.play("idle"),
                                this.questCar.addChild(eyes),
                                -1 === _index ? _parent.addChild(this.questCar) : _parent.addChildAt(this.questCar, _index);
                        }
                    }),
                    (BasicLevel.prototype.clickQuestCar = function () {
                        (this.questCarFounded = !0), (this.questCar.visible = !1), this.addStars(this.questCar.world.x, this.questCar.world.y), Client.LevelBuilder.instance.panelQuest.foundCar();
                    }),
                    (BasicLevel.prototype.clickQuestCar2 = function (_x, _y) {
                        (this.questCarFounded = !0), this.addStars(_x, _y), Client.LevelBuilder.instance.panelQuest.foundCar();
                    }),
                    (BasicLevel.prototype.addStars = function (_x, _y) {
                        this.updateElements.push(new Client.ClickStars(this.game, _x, _y));
                    }),
                    (BasicLevel.prototype.update = function () {
                        for (var i = 0; i < this.updateElements.length; i++) this.updateElements[i].update();
                    }),
                    (BasicLevel.prototype.free = function () {
                        this.game = null;
                        for (var i = 0; i < this.updateElements.length; i++) this.updateElements[i].free();
                        (this.updateElements = []), (this.updateElements = null), (this.questCar = null), (this.questWheel = null);
                    }),
                    BasicLevel
                );
            })();
            Client.BasicLevel = BasicLevel;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var FilterGroups = (function () {
                function FilterGroups() {}
                return (
                    (FilterGroups.DEFAULT = 1),
                    (FilterGroups.WALL = 2),
                    (FilterGroups.TRUCK = 4),
                    (FilterGroups.CAR1 = 1024),
                    (FilterGroups.CAR2 = 2048),
                    (FilterGroups.PARTICLE = 4096),
                    (FilterGroups.MIRROR_DEACTIVE = 8),
                    (FilterGroups.IGNORE_MIRROR = (FilterGroups.MIRROR_ACTIVE = 16) + FilterGroups.MIRROR_DEACTIVE),
                    (FilterGroups.IGNORE_CAR_MIRROR = (FilterGroups.IGNORE_CAR = FilterGroups.CAR1 + FilterGroups.CAR2) + FilterGroups.IGNORE_MIRROR),
                    FilterGroups
                );
            })();
            Client.FilterGroups = FilterGroups;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var GameManager = (function () {
                function GameManager() {
                    if (((this.finishPassed = !1), (this.hero = null) !== GameManager.instance)) throw new Error("Error: LevelBuilder already created");
                    ((GameManager.instance = this).layerBackground = Client.LevelBuilder.instance.add.group()),
                        (this.layerMiddle = Client.LevelBuilder.instance.add.group()),
                        (this.layerElements = Client.LevelBuilder.instance.add.group()),
                        (this.layerUpper = Client.LevelBuilder.instance.add.group()),
                        (this.level = Client.Tools.getInstance("Level" + Client.LevelManager.getInstance().currentLevel, Client.Main.instance)),
                        this.level.init();
                }
                return (
                    (GameManager.prototype.update = function () {
                        this.level.update(), null !== this.hero && this.hero.update();
                    }),
                    (GameManager.prototype.free = function () {
                        (GameManager.instance = null) !== this.hero && this.hero.free(),
                            (this.hero = null),
                            this.level.free(),
                            (this.level = null),
                            (this.layerBackground = null),
                            (this.layerMiddle = null),
                            (this.layerElements = null),
                            (this.layerUpper = null);
                    }),
                    (GameManager.instance = null),
                    GameManager
                );
            })();
            Client.GameManager = GameManager;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Level1 = (function (_super) {
                function Level1() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (_this.hideHintHero = !0), (_this.hideBtnLift = !0), (_this.activateLiftCount = 0), _this;
                }
                return (
                    __extends(Level1, _super),
                    (Level1.prototype.init = function () {
                        var sprite = Client.GameManager.instance.layerBackground.create(0, 0, "bgLevel1_1");
                        (sprite.cacheAsBitmap = !0),
                            (this.car = new Client.Lvl1Car(this.game)),
                            this.updateElements.push(this.car),
                            (this.door = new Client.Lvl1Door(this.game)),
                            this.updateElements.push(this.door),
                            (this.hint = new Client.Hint(this.game, 1)),
                            this.updateElements.push(this.hint),
                            (Client.GameManager.instance.hero = new Client.Hero(this.game, 70, 477)),
                            !1 === this.questWheelFounded ? (this.addQuestWheel(1, 239, 448, Client.GameManager.instance.layerBackground), this.hint.show(239, 448, 0.8), Client.GameManager.instance.hero.setClickable(!1)) : this.openDoor(),
                            (this.lift = new Client.Lvl1Lift(this.game)),
                            this.updateElements.push(this.lift),
                            ((sprite = Client.GameManager.instance.layerUpper.create(0, 600, "level1", "bgPart instance 10000")).anchor.y = 1),
                            (sprite.cacheAsBitmap = !0),
                            ((sprite = Client.GameManager.instance.layerUpper.create(399, 600, "level1", "bgPart1 instance 10000")).anchor.y = 1),
                            (sprite.cacheAsBitmap = !0),
                            ((sprite = Client.GameManager.instance.layerUpper.create(823, 245, "level1", "bgPart2 instance 10000")).anchor.x = 1),
                            (sprite.cacheAsBitmap = !0),
                            (sprite = null),
                            (this.atm = Client.GameManager.instance.layerBackground.create(111, 450, "level1", "atm instance 10000")),
                            this.atm.anchor.setTo(0.5),
                            (this.atm.inputEnabled = !0),
                            (this.atm.input.useHandCursor = !0),
                            this.atm.events.onInputOut.add(this.atmOut, this),
                            this.atm.events.onInputOver.add(this.atmOver, this),
                            this.atm.events.onInputDown.addOnce(this.atmDown, this),
                            (this.atmMonitor = Client.GameManager.instance.layerBackground.create(111, 397, "level1", "atmMonitor instance 10000")),
                            this.atmMonitor.anchor.setTo(0.5),
                            this.atmMonitor.animations.add("anim1", Phaser.Animation.generateFrameNames("atmMonitor instance 1", 0, 11, "", 4), 30, !1).onComplete.addOnce(this.showQuestCar, this),
                            this.atmMonitor.animations.add("anim2", Phaser.Animation.generateFrameNames("atmMonitor instance 1", 12, 16, "", 4), 30, !1),
                            this.updateElements.push(new Client.Finish(this.game, 724, 225)),
                            this.addGround(),
                            this.addTrigers();
                    }),
                    (Level1.prototype.clickQuestWheel = function () {
                        _super.prototype.clickQuestWheel.call(this), this.openDoor();
                    }),
                    (Level1.prototype.openDoor = function () {
                        this.door.open(), this.hint.show(Client.GameManager.instance.hero.bodyBase.x, Client.GameManager.instance.hero.bodyBase.y, 0.9), Client.GameManager.instance.hero.setClickable(!0);
                    }),
                    (Level1.prototype.customAction = function (value) {
                        void 0 === value && (value = 0), 0 === value ? !0 === this.hideHintHero && (this.hint.hide(), (this.hideHintHero = !1)) : 1 === value && !0 === this.hideBtnLift && ((this.hideBtnLift = !1), this.hint.hide());
                    }),
                    (Level1.prototype.atmOut = function () {
                        !1 !== this.atm.inputEnabled && (this.atm.frameName = "atm instance 10000");
                    }),
                    (Level1.prototype.atmOver = function () {
                        !1 !== this.atm.inputEnabled && (this.atm.frameName = "atm instance 10001");
                    }),
                    (Level1.prototype.atmDown = function () {
                        this.atmOut(), (this.atm.inputEnabled = !1), this.atmMonitor.animations.play("anim1"), Client.SoundManager.playSFX("s_lvl1_clickAtm");
                    }),
                    (Level1.prototype.showQuestCar = function () {
                        this.atmMonitor.animations.play("anim2"),
                            !1 === this.questCarFounded &&
                                (this.addQuestCar(111, 402, Client.GameManager.instance.layerBackground), (this.questCar.alpha = 0), this.game.add.tween(this.questCar).to({ alpha: 1 }, 300, Phaser.Easing.Linear.None, !0));
                    }),
                    (Level1.prototype.addGround = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 403, 557, 0);
                        ground.setRectangle(794, 64),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, -44, 475, 0)).setRectangle(100, 100),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 748, 290, 0)).setRectangle(501, 56),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 1048, 212, 0)).setRectangle(100, 100),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 336, 528, 0)).setRectangle(30, 10),
                            (ground.angle = -30),
                            (ground = null);
                    }),
                    (Level1.prototype.addTrigers = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 473, 468, 0);
                        ground.setRectangle(16, 100), (ground.sensor = !0), ground.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, this.activateLift, this), (ground = null);
                    }),
                    (Level1.prototype.activateLift = function () {
                        0 === this.activateLiftCount &&
                            ((this.activateLiftCount = 1),
                            Client.GameManager.instance.hero.setEnableMotor(!1),
                            Client.GameManager.instance.hero.setClickable(!1),
                            this.hint.show(258, 140, 0.75),
                            this.lift.activateBtns(),
                            this.car.showArrow());
                    }),
                    (Level1.prototype.free = function () {
                        _super.prototype.free.call(this), (this.door = null), (this.lift = null), (this.atm = null), (this.atmMonitor = null), (this.hint = null), (this.car = null);
                    }),
                    Level1
                );
            })(Client.BasicLevel);
            Client.Level1 = Level1;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Level10 = (function (_super) {
                function Level10() {
                    return (null !== _super && _super.apply(this, arguments)) || this;
                }
                return (
                    __extends(Level10, _super),
                    (Level10.prototype.init = function () {
                        this.game.world.setBounds(0, 0, 970, 600);
                        var sprite = Client.GameManager.instance.layerBackground.create(-1, 0, "bgLevel10_1");
                        (sprite.cacheAsBitmap = !0),
                            ((sprite = Client.GameManager.instance.layerUpper.create(-1, 0, "bgLevel10_2")).cacheAsBitmap = !0),
                            (this.boss = new Client.Lvl10Boss(this.game)),
                            this.updateElements.push(this.boss),
                            (Client.GameManager.instance.hero = new Client.Hero(this.game, -50, 480)),
                            Client.GameManager.instance.hero.setEnableMotor(!0),
                            Client.GameManager.instance.hero.setClickable(!1),
                            Client.GameManager.instance.hero.setCollideWorldBounds(!1),
                            this.boss.addContact(),
                            this.addQuestWheel(10, 420, 570, Client.GameManager.instance.layerUpper),
                            this.addGround(),
                            (this.door = new Client.Lvl10Door()),
                            this.updateElements.push(this.door),
                            (this.alarm = new Client.Lvl10Alarm()),
                            this.updateElements.push(this.alarm),
                            (this.hook = new Client.Lvl10Hook(this.game)),
                            this.updateElements.push(this.hook),
                            (this.bDoor = new Client.Level10BossDoor(this.game)),
                            this.updateElements.push(this.bDoor);
                        var secretBox = new Client.Lvl10SecretBox(this.game);
                        this.updateElements.push(secretBox),
                            this.game.input.onDown.add(this.mouseDragStart, this),
                            this.game.input.addMoveCallback(this.mouseDragMove, this),
                            this.game.input.onUp.add(this.mouseDragEnd, this),
                            (Client.LevelManager.instance.currentRobberyScene = 2);
                    }),
                    (Level10.prototype.mouseDragStart = function () {
                        this.game.physics.box2d.mouseDragStart(new Phaser.Point(this.game.input.worldX, this.game.input.worldY)),
                            this.game.physics.box2d.mouseJoint && "DragBody" !== this.game.physics.box2d.mouseJoint.GetBodyB().GetUserData() && this.mouseDragEnd();
                    }),
                    (Level10.prototype.mouseDragMove = function () {
                        this.game.physics.box2d.mouseJoint &&
                            "DragBody" === this.game.physics.box2d.mouseJoint.GetBodyB().GetUserData() &&
                            this.game.physics.box2d.mouseDragMove(new Phaser.Point(this.game.input.worldX, this.game.input.worldY));
                    }),
                    (Level10.prototype.mouseDragEnd = function () {
                        this.game.physics.box2d.mouseDragEnd();
                    }),
                    (Level10.prototype.update = function () {
                        _super.prototype.update.call(this);
                    }),
                    (Level10.prototype.addGround = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 483, 533, 0);
                        ground.setRectangle(1490, 20),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 593, 140, 0)).setRectangle(733, 20),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 218, 242, 0)).setRectangle(40, 185),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 952, 246, 0)).setRectangle(40, 228),
                            (ground = null);
                    }),
                    (Level10.prototype.free = function () {
                        _super.prototype.free.call(this), (this.alarm = null), (this.door = null), (this.hook = null), (this.bDoor = null), (this.boss = null);
                    }),
                    Level10
                );
            })(Client.BasicLevel);
            Client.Level10 = Level10;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Level11 = (function (_super) {
                function Level11() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (_this.wheelyOnPlace = !1), _this;
                }
                return (
                    __extends(Level11, _super),
                    (Level11.prototype.init = function () {
                        var sprite = Client.GameManager.instance.layerBackground.create(0, 0, "bgLevel3_1");
                        (sprite.cacheAsBitmap = !0),
                            ((sprite = Client.GameManager.instance.layerUpper.create(0, 0, "bgLevel3_2")).cacheAsBitmap = !0),
                            (Client.GameManager.instance.hero = new Client.Hero(this.game, 100, 480)),
                            Client.GameManager.instance.hero.setEnableMotor(!0),
                            Client.GameManager.instance.hero.setClickable(!1),
                            this.addQuestWheel(11, 268, 574, Client.GameManager.instance.layerUpper),
                            this.addGround(),
                            this.addSecretBook(),
                            this.addLamps(),
                            (this.sMonitor = new Client.Lvl3Monitor(this.game)),
                            this.updateElements.push(this.sMonitor);
                    }),
                    (Level11.prototype.addMap = function () {
                        (this.map = new Client.Lvl11Map(this.game)), this.updateElements.push(this.map);
                    }),
                    (Level11.prototype.addPhone = function () {
                        (this.phone = new Client.Lvl11Phone(this.game)), this.updateElements.push(this.phone);
                    }),
                    (Level11.prototype.addSecretBook = function () {
                        (this.book = Client.GameManager.instance.layerBackground.create(448, 188, "level3", "secretBook instance 10000")),
                            this.book.anchor.set(0, 1),
                            (this.book.inputEnabled = !0),
                            (this.book.input.useHandCursor = !0),
                            this.book.events.onInputDown.addOnce(this.bookAnim, this),
                            this.book.events.onInputOver.add(this.bookOver, this),
                            this.book.events.onInputOut.add(this.bookOut, this);
                    }),
                    (Level11.prototype.bookOver = function () {
                        this.book.frameName = "secretBook instance 10001";
                    }),
                    (Level11.prototype.bookOut = function () {
                        this.book.frameName = "secretBook instance 10000";
                    }),
                    (Level11.prototype.bookAnim = function () {
                        this.book.inputEnabled = !1;
                        var glasses = this.game.make.sprite(74, -59, "level3", "darkGlassesAnim_mc instance 10000");
                        (glasses.alpha = 0.4),
                            Client.GameManager.instance.hero.graphicCar.addChild(glasses),
                            this.game.add.tween(glasses).to({ x: glasses.x + 11, y: glasses.y + 60, alpha: 1 }, 250, Phaser.Easing.Linear.None, !0, 0),
                            this.game.add.tween(this.book).to({ angle: -18 }, 150, Phaser.Easing.Linear.None, !0, 0).onComplete.addOnce(this.changeBookFrame, this),
                            this.addJalousie(),
                            this.sMonitor.openMonitor(),
                            Client.SoundManager.playSFX("s_lvl3_bookClick");
                    }),
                    (Level11.prototype.changeBookFrame = function () {
                        this.book.frameName = "secretBook instance 10002";
                    }),
                    (Level11.prototype.addJalousie = function () {
                        var jalousie, mask;
                        (mask = new Phaser.Graphics(this.game, 34, 91)).beginFill(0, 0.5),
                            mask.drawRect(0, 0, 120, 180),
                            mask.endFill(),
                            Client.GameManager.instance.layerBackground.addChild(mask),
                            (jalousie = Client.GameManager.instance.layerBackground.create(34, -89, "level3", "jalousie1 instance 10000")).scale.set(1.51, 1),
                            (jalousie.mask = mask),
                            this.game.add.tween(jalousie).to({ y: jalousie.y + 180 }, 3e3, "Linear", !0),
                            (mask = new Phaser.Graphics(this.game, 586, 156)).beginFill(0, 0.5),
                            mask.drawRect(0, 0, 80, 137),
                            mask.endFill(),
                            Client.GameManager.instance.layerBackground.addChild(mask),
                            ((jalousie = Client.GameManager.instance.layerBackground.create(586, -23, "level3", "jalousie1 instance 10000")).mask = mask),
                            this.game.add.tween(jalousie).to({ y: jalousie.y + 137 }, 3e3, "Linear", !0),
                            (mask = new Phaser.Graphics(this.game, 670, 156)).beginFill(0, 0.5),
                            mask.drawRect(0, 0, 88, 170),
                            mask.endFill(),
                            Client.GameManager.instance.layerBackground.addChild(mask),
                            (jalousie = Client.GameManager.instance.layerBackground.create(670, -23, "level3", "jalousie1 instance 10000")).scale.set(1.11, 1),
                            (jalousie.mask = mask),
                            this.game.add.tween(jalousie).to({ y: jalousie.y + 169 }, 3e3, "Linear", !0),
                            (mask = jalousie = null),
                            Client.SoundManager.playSFX("s_lvl3_closeWindows");
                    }),
                    (Level11.prototype.addProjectors = function () {
                        var projector, anim;
                        ((projector = new Phaser.Group(this.game)).x = 74),
                            (projector.y = 550),
                            Client.GameManager.instance.layerBackground.addChild(projector),
                            projector.create(0, 0, "level3", "projector instance 10000"),
                            (anim = projector.create(-32, -55, "level3", "projectorAnim instance 10000")).animations.add("move", Phaser.Animation.generateFrameNames("projectorAnim instance 1", 0, 29, "", 4), 30, !0),
                            anim.play("move"),
                            this.game.add.tween(projector).to({ y: 450 }, 100, "Linear", !0),
                            ((projector = new Phaser.Group(this.game)).x = 724),
                            (projector.y = 550),
                            projector.scale.set(-1, 1),
                            Client.GameManager.instance.layerBackground.addChild(projector),
                            projector.create(0, 0, "level3", "projector instance 10000"),
                            (anim = projector.create(-32, -55, "level3", "projectorAnim instance 10000")).animations.add("move", Phaser.Animation.generateFrameNames("projectorAnim instance 1", 0, 29, "", 4), 30, !0),
                            anim.play("move"),
                            this.game.add.tween(projector).to({ y: 450 }, 100, "Linear", !0).onComplete.addOnce(this.showMonitor, this),
                            (anim = projector = null);
                    }),
                    (Level11.prototype.showMonitor = function () {
                        var monitor = Client.GameManager.instance.layerUpper.create(400, 425, "monitor");
                        monitor.anchor.set(0.5, 1), monitor.scale.set(1, 0), (monitor.inputEnabled = !0), this.game.add.tween(monitor.scale).to({ x: 1, y: 1 }, 300, Phaser.Easing.Bounce.InOut, !0), this.addMap();
                        var photo = Client.GameManager.instance.layerUpper.create(Client.GameManager.instance.hero.bodyBase.x - 45, Client.GameManager.instance.hero.bodyBase.y - 100, "level11", "mobilaAnim instance 10000");
                        photo.animations.add("anim", Phaser.Animation.generateFrameNames("mobilaAnim instance 1", 0, 22, "", 4), 30, !1).onComplete.add(function () {
                            this.addPhone();
                        }, this),
                            photo.play("anim");
                    }),
                    (Level11.prototype.SwitchLampState = function (state, lampMc) {
                        lampMc.frameName = state ? "lampBody instance 10000" : "lampBody instance 10002";
                    }),
                    (Level11.prototype.showQuestCar = function () {}),
                    (Level11.prototype.addLamps = function () {
                        Client.GameManager.instance.layerBackground.create(525, 369, "level3", "secretDoor instance 10000");
                        for (
                            var pos = [
                                    [147, 369],
                                    [313, 369],
                                    [620, 371],
                                ],
                                i = 0;
                            i < 3;
                            i++
                        )
                            Client.GameManager.instance.layerBackground.create(pos[i][0], pos[i][1], "level3", "lampBody instance 10000").anchor.set(0.5);
                    }),
                    (Level11.prototype.update = function () {
                        _super.prototype.update.call(this), !this.wheelyOnPlace && 250 < Client.GameManager.instance.hero.bodyBase.x && ((this.wheelyOnPlace = !0), Client.GameManager.instance.hero.setEnableMotor(!1));
                    }),
                    (Level11.prototype.addGround = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 400, 540, 0);
                        ground.setRectangle(800, 20), (ground = new Phaser.Physics.Box2D.Body(this.game, null, 525, 470, 0)).setRectangle(20, 120), (ground = null);
                    }),
                    (Level11.prototype.free = function () {
                        _super.prototype.free.call(this), (this.book = null), (this.sMonitor = null);
                    }),
                    Level11
                );
            })(Client.BasicLevel);
            Client.Level11 = Level11;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Level12 = (function (_super) {
                function Level12() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (_this.stopMotor = !1), (_this.wheelyBurn = !1), (_this.burnTime = 0), (_this.wordContact = !1), (_this.laserStep1 = 0), (_this.laserStep2 = 210), (_this.laserStep3 = 90), (_this.fireMachineStep = 0), _this;
                }
                return (
                    __extends(Level12, _super),
                    (Level12.prototype.init = function () {
                        this.game.world.setBounds(0, 0, 800, 600);
                        var sprite = Client.GameManager.instance.layerBackground.create(0, 0, "bgLevel12_1");
                        (sprite.cacheAsBitmap = !0),
                            ((sprite = Client.GameManager.instance.layerUpper.create(0, 0, "bgLevel12_2")).cacheAsBitmap = !0),
                            (Client.GameManager.instance.hero = new Client.Hero(this.game, 73, 164)),
                            (Client.GameManager.instance.hero.angleKeep = Client.Tools.toRad(35)),
                            this.addQuestWheel(12, 105, 278, Client.GameManager.instance.layerUpper);
                        var finish = new Client.Finish(this.game, 20, 455);
                        this.updateElements.push(finish);
                        var secret = new Client.Lvl12Secret(this.game);
                        this.updateElements.push(secret);
                        var rBlock1 = new Client.Lvl12RotateBlock(this.game, 292, 145, 0, 90);
                        this.updateElements.push(rBlock1);
                        var rBlock2 = new Client.Lvl12RotateBlock(this.game, 682, 145, 1);
                        this.updateElements.push(rBlock2),
                            (this.car = new Client.Lvl12BadCar(this.game, 485, 148)),
                            this.updateElements.push(this.car),
                            (this.laser1 = new Client.Lvl12Laser(this.game, 145, 440)),
                            this.updateElements.push(this.laser1),
                            (this.laser2 = new Client.Lvl12Laser(this.game, 347, 440)),
                            this.updateElements.push(this.laser2),
                            (this.laser3 = new Client.Lvl12Laser(this.game, 533, 440, -3)),
                            this.updateElements.push(this.laser3);
                        var spring = new Client.Lvl12Spring(this.game);
                        this.updateElements.push(spring),
                            (this.fire1 = new Client.Lvl12Fire(this.game, 583, 338, -80)),
                            this.updateElements.push(this.fire1),
                            (this.fire2 = new Client.Lvl12Fire(this.game, 770, 330, 80)),
                            this.updateElements.push(this.fire2),
                            this.addGround();
                    }),
                    (Level12.prototype.UpdateElectric = function () {
                        this.laserStep1++,
                            this.laserStep2++,
                            this.laserStep3++,
                            195 === this.laserStep1 ? this.laser1.SetVisible(!0) : 285 === this.laserStep1 && ((this.laserStep1 = 0), this.laser1.SetVisible(!1)),
                            195 === this.laserStep2 ? this.laser2.SetVisible(!0) : 300 === this.laserStep2 && ((this.laserStep2 = 0), this.laser2.SetVisible(!1)),
                            180 === this.laserStep3 ? this.laser3.SetVisible(!0) : 260 === this.laserStep3 && ((this.laserStep3 = 0), this.laser3.SetVisible(!1));
                    }),
                    (Level12.prototype.UpdateFire = function () {
                        this.fireMachineStep++,
                            90 === this.fireMachineStep && (this.fire1.on(), this.fire2.on(), Client.SoundManager.playSFX("s_lvl12_flame"), (this.fireBody.x = 680)),
                            245 === this.fireMachineStep && (this.fire1.off(), this.fire2.off(), (this.fireBody.x = 900)),
                            300 < this.fireMachineStep && (this.fireMachineStep = 0);
                    }),
                    (Level12.prototype.update = function () {
                        if ((_super.prototype.update.call(this), !Client.LevelBuilder.instance.passedFinish)) {
                            if (
                                (this.UpdateElectric(),
                                this.UpdateFire(),
                                !this.stopMotor &&
                                    300 < Client.GameManager.instance.hero.bodyBase.y &&
                                    ((this.stopMotor = !0), (Client.GameManager.instance.hero.bodyWheelFront.mass = 2), Client.GameManager.instance.hero.setEnableMotor(!1)),
                                !0 === this.wheelyBurn &&
                                    (this.burnObject(Client.GameManager.instance.hero.bodyBase.x + 120 * Math.random() - 60, Client.GameManager.instance.hero.bodyBase.y + 40 * Math.random() - 20), this.burnTime++, 120 === this.burnTime))
                            ) {
                                Client.GameManager.instance.hero.setVisibility(!1);
                                new Client.BrokeHero(this.game, Client.GameManager.instance.hero.bodyBase.x, Client.GameManager.instance.hero.bodyBase.y);
                                (this.wheelyBurn = !1), Client.LevelBuilder.instance.levelFailed(60);
                            }
                            !1 === this.wordContact &&
                                Client.GameManager.instance.hero.bodyBase.x < 400 &&
                                400 < Client.GameManager.instance.hero.bodyBase.y &&
                                ((this.wordContact = !0), Client.GameManager.instance.hero.setCollideWorldBounds(!1));
                        }
                    }),
                    (Level12.prototype.burnObject = function (_x, _y) {
                        for (var i = 0; i < 1; i++) {
                            var firePart = Client.GameManager.instance.layerUpper.getFirstDead(!1, 0, 0, "level12", "fireParticle instance 10000");
                            null === firePart && Client.GameManager.instance.layerUpper.length < 45 && (firePart = Client.GameManager.instance.layerUpper.create(0, 0, "level12", "fireParticle instance 10000")),
                                null != firePart &&
                                    ((firePart.animations.add("idle", Phaser.Animation.generateFrameNames("fireParticle instance 1", 0, 17, "", 4), 40, !1).killOnComplete = !0),
                                    firePart.play("idle"),
                                    firePart.anchor.set(0.5, 0),
                                    firePart.scale.set(Math.random() + 1),
                                    (firePart.scale.y *= -1),
                                    (firePart.x = _x),
                                    (firePart.y = _y));
                        }
                    }),
                    (Level12.prototype.fireContact = function (body1, body2, fixture1, fixture2, begin) {
                        begin && ((this.wheelyBurn = !0), Client.GameManager.instance.hero.setClickable(!1), Client.GameManager.instance.hero.showBurn());
                    }),
                    (Level12.prototype.addGround = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 91, 217, 0);
                        ground.setRectangle(182, 20),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 172, 289, 0)).setRectangle(20, 163),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 293, 360, 0)).setRectangle(222, 20),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 492, 285, 0)).setRectangle(182, 168),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 790, 206, 0)).setRectangle(20, 307),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 308, 506, 0)).setRectangle(977, 20),
                            (this.fireBody = new Phaser.Physics.Box2D.Body(this.game, null, 680, 330, 0)),
                            this.fireBody.setRectangle(180, 20),
                            (this.fireBody.sensor = !0),
                            this.fireBody.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, this.fireContact, this),
                            (ground = null);
                    }),
                    (Level12.prototype.free = function () {
                        _super.prototype.free.call(this), (this.laser1 = null), (this.laser2 = null), (this.laser3 = null), (this.fire1 = null), (this.fire2 = null), (this.car = null), (this.fireBody = null);
                    }),
                    Level12
                );
            })(Client.BasicLevel);
            Client.Level12 = Level12;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Level13 = (function (_super) {
                function Level13() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (
                        (_this.btnQC = !1),
                        (_this.questDoorOpened = !1),
                        (_this.questCarCreated = !1),
                        (_this.kranOpened = !1),
                        (_this.startWater = 0),
                        (_this.water1Complete = !1),
                        (_this.doorOpened = !1),
                        (_this.btnChangePressed = !1),
                        (_this.contactPlugCount = 0),
                        (_this.waterStepsecond = !1),
                        (_this.startSpawningBubbles = !1),
                        (_this.spawningBubblesCounter = 0),
                        _this
                    );
                }
                return (
                    __extends(Level13, _super),
                    (Level13.prototype.init = function () {
                        this.bubbles = new Array();
                        var sprite = Client.GameManager.instance.layerBackground.create(0, 0, "bgLevel13_1");
                        (sprite.cacheAsBitmap = !0),
                            (this.wire1 = Client.GameManager.instance.layerBackground.create(85, 215, "level13", "wire1 instance 10000")),
                            (this.wire1.cacheAsBitmap = !0),
                            (this.wire2 = Client.GameManager.instance.layerBackground.create(685, 305, "level13", "wire2 instance 10000")),
                            (this.wire2.cacheAsBitmap = !0),
                            (this.laser1 = Client.GameManager.instance.layerUpper.create(423, 79, "level13", "laserBeam instance 10000")),
                            this.laser1.animations.add("anim", Phaser.Animation.generateFrameNames("laserBeam instance 1", 0, 6, "", 4), 30, !0),
                            this.laser1.anchor.setTo(0.075, 0.49),
                            (this.laser1.angle = 14.5),
                            (this.laser2 = Client.GameManager.instance.layerUpper.create(422, 143, "level13", "laserBeam instance 10000")),
                            this.laser2.animations.add("anim", Phaser.Animation.generateFrameNames("laserBeam instance 1", 0, 6, "", 4), 30, !0),
                            this.laser2.anchor.setTo(0.075, 0.49),
                            (this.laser2.angle = -14),
                            (this.questDoor = new Client.Lvl13QuestDoor(this.game)),
                            this.updateElements.push(this.questDoor),
                            (this.laserIskru1 = Client.GameManager.instance.layerUpper.create(782, 190, "level13")),
                            this.laserIskru1.animations.add("anim", Phaser.Animation.generateFrameNames("laserIskru instance 1", 0, 47, "", 4), 30, !0),
                            (this.laserIskru1.angle = 180),
                            (this.laserIskru2 = Client.GameManager.instance.layerUpper.create(752, 28, "level13")),
                            this.laserIskru2.animations.add("anim", Phaser.Animation.generateFrameNames("laserIskru instance 1", 0, 47, "", 4), 30, !0),
                            (this.laser1.visible = !1),
                            (this.laser2.visible = !1),
                            (this.laserIskru1.visible = !1),
                            (this.laserIskru2.visible = !1),
                            (this.door = new Client.Lvl13Door(this.game)),
                            this.updateElements.push(this.door),
                            (this.waterFull = Client.GameManager.instance.layerUpper.create(0, 600, "level13", "waterFull instance 10000"));
                        var mask = this.game.make.graphics();
                        mask.beginFill(16711680),
                            mask.drawRect(0, 435, 160, 200),
                            mask.drawRect(150, 150, 450, 450),
                            mask.endFill(),
                            Client.GameManager.instance.layerUpper.addChild(mask),
                            (this.waterFull.mask = mask),
                            (mask = null),
                            (this.water2_2 = Client.GameManager.instance.layerUpper.create(-5, 567, "level13")),
                            this.water2_2.animations.add("start", Phaser.Animation.generateFrameNames("waterAnim2_2 instance 1", 0, 40, "", 4), 30, !1).onComplete.addOnce(function () {
                                this.water2_2.animations.play("cycle");
                            }, this),
                            this.water2_2.animations.add("cycle", Phaser.Animation.generateFrameNames("waterAnim2_2 instance 1", 41, 53, "", 4), 30, !0),
                            this.water2_2.animations.add("end", Phaser.Animation.generateFrameNames("waterAnim2_2 instance 1", 49, 66, "", 4), 30, !1),
                            (this.water2_2.visible = !1),
                            (this.water2 = Client.GameManager.instance.layerUpper.create(-55, -437, "level13")),
                            this.water2.animations.add("start", Phaser.Animation.generateFrameNames("waterAnim2 instance 1", 0, 20, "", 4), 30, !1).onComplete.addOnce(function () {
                                this.water2.animations.play("cycle"), (this.startWater = 1), Client.SoundManager.playSFX("s_lvl13_waterUp", !0);
                            }, this),
                            this.water2.animations.add("cycle", Phaser.Animation.generateFrameNames("waterAnim2 instance 1", 21, 48, "", 4), 30, !0),
                            this.water2.animations.add("end", Phaser.Animation.generateFrameNames("waterAnim2 instance 1", 49, 66, "", 4), 30, !1),
                            (this.water2.visible = !1),
                            ((sprite = Client.GameManager.instance.layerUpper.create(0, 0, "bgLevel13_2")).cacheAsBitmap = !0),
                            (this.water1 = Client.GameManager.instance.layerUpper.create(287, -450, "level13", "waterAnim1 instance 10060")),
                            this.water1.animations.add("start", Phaser.Animation.generateFrameNames("waterAnim1 instance 1", 0, 48, "", 4), 30, !1).onComplete.addOnce(this.water1Comp, this),
                            this.water1.animations.add("cycle", Phaser.Animation.generateFrameNames("waterAnim1 instance 1", 49, 66, "", 4), 30, !0),
                            (this.water1.visible = !1),
                            (this.water1Mask = this.game.make.graphics()),
                            this.water1Mask.beginFill(16711680, 0.4),
                            this.water1Mask.drawRect(270, 255, 400, 100),
                            this.water1Mask.drawEllipse(470, 400, 200, 90),
                            this.water1Mask.endFill(),
                            Client.GameManager.instance.layerUpper.addChild(this.water1Mask),
                            (this.water1.mask = this.water1Mask),
                            ((sprite = Client.GameManager.instance.layerUpper.create(550, 291, "level13", "tubeFront instance 10000")).cacheAsBitmap = !0),
                            (this.waterTrub = Client.GameManager.instance.layerUpper.create(367, 488, "level13")),
                            this.waterTrub.animations.add("start", Phaser.Animation.generateFrameNames("waterTrub instance 1", 0, 11, "", 4), 30, !1).onComplete.addOnce(function () {
                                this.waterTrub.animations.play("cycle");
                            }, this),
                            this.waterTrub.animations.add("cycle", Phaser.Animation.generateFrameNames("waterTrub instance 1", 12, 31, "", 4), 30, !0),
                            (this.waterTrub.visible = !1),
                            (this.wire0 = Client.GameManager.instance.layerUpper.create(625, 249, "level13", "wire0 instance 10000")),
                            (this.wire0.cacheAsBitmap = !0),
                            this.createPlug(),
                            (this.lamps = Client.GameManager.instance.layerUpper.create(583, 290, "level13", "lamps instance 10000")),
                            (this.lamps.cacheAsBitmap = !0),
                            this.addQuestWheel(13, 504, 515, Client.GameManager.instance.layerUpper),
                            this.createBtns(),
                            this.createDark(),
                            (Client.GameManager.instance.hero = new Client.Hero(this.game, 75, 530)),
                            this.updateElements.push(new Client.Finish(this.game, 717, 128)),
                            (this.slider1.lift = new Client.Lvl13Lift(this.game, 230, 570, 187)),
                            this.updateElements.push(this.slider1.lift),
                            (this.slider2.lift = new Client.Lvl13Lift(this.game, 494, 369, 198)),
                            this.updateElements.push(this.slider2.lift),
                            this.addGround(),
                            this.addTrigers(),
                            (sprite = null),
                            this.game.input.onDown.add(this.mouseDragStart, this),
                            this.game.input.addMoveCallback(this.mouseDragMove, this),
                            this.game.input.onUp.add(this.mouseDragEnd, this);
                    }),
                    (Level13.prototype.water1Comp = function () {
                        (this.water1Complete = !0),
                            this.water1.animations.play("cycle"),
                            !1 === this.kranOpened
                                ? ((this.water2.visible = !0), (this.water2_2.visible = !0), this.water2.animations.play("start"), this.water2_2.animations.play("start"))
                                : ((this.waterTrub.visible = !0), this.waterTrub.animations.play("start"));
                    }),
                    (Level13.prototype.mouseDragStart = function () {
                        this.game.physics.box2d.mouseDragStart(this.game.input.activePointer.position), this.game.physics.box2d.mouseJoint && "DragBody" !== this.game.physics.box2d.mouseJoint.GetBodyB().GetUserData() && this.mouseDragEnd();
                    }),
                    (Level13.prototype.mouseDragMove = function () {
                        this.game.physics.box2d.mouseJoint && "DragBody" === this.game.physics.box2d.mouseJoint.GetBodyB().GetUserData() && this.game.physics.box2d.mouseDragMove(this.game.input.activePointer.position);
                    }),
                    (Level13.prototype.mouseDragEnd = function () {
                        this.game.physics.box2d.mouseDragEnd();
                    }),
                    (Level13.prototype.createPlug = function () {
                        var part1 = Client.GameManager.instance.layerUpper.create(618, 260, "level13", "wirePart_mc instance 10000");
                        this.game.physics.box2d.enable(part1), part1.body.setRectangle(6, 14), (part1.body.angle = -17);
                        var part2 = Client.GameManager.instance.layerUpper.create(622, 273, "level13", "wirePart_mc instance 10000");
                        this.game.physics.box2d.enable(part2), part2.body.setRectangle(6, 14), (part2.body.angle = -14);
                        var part3 = Client.GameManager.instance.layerUpper.create(626, 287, "level13", "wirePart_mc instance 10000");
                        this.game.physics.box2d.enable(part3), part3.body.setRectangle(6, 14), (part3.body.angle = -16);
                        var part4 = Client.GameManager.instance.layerUpper.create(630, 300, "level13", "wirePart_mc instance 10000");
                        this.game.physics.box2d.enable(part4), part4.body.setRectangle(6, 14), (part4.body.angle = -15);
                        var part5 = Client.GameManager.instance.layerUpper.create(635, 313, "level13", "wirePart_mc instance 10000");
                        this.game.physics.box2d.enable(part5), part5.body.setRectangle(6, 14), (part5.body.angle = -22);
                        var part6 = Client.GameManager.instance.layerUpper.create(641, 326, "level13", "wirePart_mc instance 10000");
                        this.game.physics.box2d.enable(part6), part6.body.setRectangle(6, 14), (part6.body.angle = -29);
                        var part7 = Client.GameManager.instance.layerUpper.create(650, 335, "level13", "wirePart_mc instance 10000");
                        this.game.physics.box2d.enable(part7), part7.body.setRectangle(6, 14), (part7.body.angle = -64);
                        var start = Client.GameManager.instance.layerUpper.create(617, 242, "level13", "wireStart instance 10000");
                        this.game.physics.box2d.enable(start),
                            start.body.setRectangle(10, 10),
                            (start.body.static = !0),
                            (start.body.sensor = !0),
                            (this.plug = new Client.SimpleButton(this.game, 663, 338, "level13", "wirePlug_mc", !1)),
                            this.plug.activate(),
                            this.game.physics.box2d.enable(this.plug),
                            this.plug.body.setRectangle(16, 16),
                            this.plug.body.addRectangle(26, 26).SetSensor(!0),
                            (this.plug.body.angle = -90),
                            this.plug.body.data.SetUserData("DragBody"),
                            Client.GameManager.instance.layerUpper.addChild(this.plug),
                            (part1.body.mass = 0.8),
                            (part2.body.mass = 0.7),
                            (part3.body.mass = 0.6),
                            (part4.body.mass = 0.5),
                            (part5.body.mass = 0.4),
                            (part6.body.mass = 0.3),
                            (part7.body.mass = 0.2),
                            (this.plug.body.mass = 0.1),
                            this.game.physics.box2d.revoluteJoint(start, part1, 0, 10, 0, -7),
                            this.game.physics.box2d.revoluteJoint(part1, part2, 0, 7, 0, -7),
                            this.game.physics.box2d.revoluteJoint(part2, part3, 0, 7, 0, -7),
                            this.game.physics.box2d.revoluteJoint(part3, part4, 0, 7, 0, -7),
                            this.game.physics.box2d.revoluteJoint(part4, part5, 0, 7, 0, -7),
                            this.game.physics.box2d.revoluteJoint(part5, part6, 0, 7, 0, -7),
                            this.game.physics.box2d.revoluteJoint(part6, part7, 0, 7, 0, -7),
                            this.game.physics.box2d.revoluteJoint(part7, this.plug, 0, 7, 0, -8),
                            (start = part7 = part6 = part5 = part4 = part3 = part2 = part1 = null);
                    }),
                    (Level13.prototype.createBtns = function () {
                        (this.btnKran = new Client.SimpleButton(this.game, 418, 443, "level13", "btnKran", !1)),
                            this.btnKran.activate(),
                            this.btnKran.onInputDown.add(this.kranDown, this),
                            (this.btnKran.anchor.x = 0.49),
                            Client.GameManager.instance.layerUpper.addChild(this.btnKran),
                            (this.btnLaser = new Client.SimpleButton(this.game, 289, 141, "level13", "btnLaser")),
                            this.btnLaser.activate(),
                            this.btnLaser.onInputDown.add(this.laserOn, this),
                            this.btnLaser.onInputUp.add(this.laserOff, this),
                            Client.GameManager.instance.layerUpper.addChild(this.btnLaser),
                            (this.btnQuestCar = new Client.SimpleButton(this.game, 411, 147, "level13", "btnQuestCar", !1)),
                            this.btnQuestCar.activate(),
                            this.btnQuestCar.anchor.setTo(0.1, 0.62),
                            this.btnQuestCar.onInputDown.addOnce(this.btnQCDown, this),
                            Client.GameManager.instance.layerUpper.addChild(this.btnQuestCar),
                            (this.btnChange = new Client.SimpleButton(this.game, 748, 268, "level13", "btnChange", !1)),
                            this.btnChange.activate(),
                            this.btnChange.onInputDown.add(this.btnChangeDown, this),
                            Client.GameManager.instance.layerUpper.addChild(this.btnChange),
                            (this.btnChangeWire = this.game.make.sprite(-2, 2, "level13", "btnChangeWire instance 10000")),
                            (this.btnChangeWire.anchor.y = 1),
                            this.btnChange.addChild(this.btnChangeWire),
                            (this.slider1 = new Client.Lvl13Slider(this.game, 79, 345, !1)),
                            this.slider1.deactivate(),
                            Client.GameManager.instance.layerUpper.addChild(this.slider1),
                            (this.slider2 = new Client.Lvl13Slider(this.game, 691, 496, !0)),
                            this.slider2.deactivate(),
                            Client.GameManager.instance.layerUpper.addChild(this.slider2);
                    }),
                    (Level13.prototype.laserOn = function () {
                        Client.SoundManager.playSFX("s_lvl13_laserLoop", !0),
                            (this.laser1.visible = !0),
                            this.laser1.animations.play("anim"),
                            (this.laser2.visible = !0),
                            this.laser2.animations.play("anim"),
                            (this.laserIskru1.visible = !0),
                            this.laserIskru1.animations.play("anim"),
                            (this.laserIskru2.visible = !0),
                            this.laserIskru2.animations.play("anim"),
                            !1 === this.doorOpened && (this.door.playAnim("destroy"), (this.doorOpened = !0), Client.SoundManager.playSFX("s_lvl13_laserDestroyDoor")),
                            !0 === this.btnQC &&
                                !1 === this.questDoorOpened &&
                                (this.questDoor.open(),
                                (this.questDoorOpened = !0),
                                Client.SoundManager.playSFX("s_lvl13_laserDestroyDoor"),
                                this.addQuestCar(460, 50, Client.GameManager.instance.layerElements),
                                !1 === this.questCarFounded &&
                                    ((this.questCarCreated = !0),
                                    (this.questCarBody = new Phaser.Physics.Box2D.Body(this.game, null, 497, 37, 2)),
                                    this.questCarBody.setRectangle(36, 34),
                                    (this.questCarBody.restitution = 0.3),
                                    (this.questCarBody.fixedRotation = !0),
                                    this.questCarBody.setCollisionMask(~Client.FilterGroups.IGNORE_CAR))),
                            485 < Client.GameManager.instance.hero.bodyBase.x &&
                                Client.GameManager.instance.hero.bodyBase.x < 660 &&
                                Client.GameManager.instance.hero.bodyBase.y < 125 &&
                                (Client.GameManager.instance.hero.setVisibility(!1),
                                Client.GameManager.instance.hero.setEnableMotor(!1, !1),
                                Client.SoundManager.playSFX("s_wheelyExplosion"),
                                this.updateElements.push(new Client.BrokeHero(this.game, Client.GameManager.instance.hero.bodyBase.x, Client.GameManager.instance.hero.bodyBase.y, !1)),
                                Client.LevelBuilder.instance.levelFailed(100));
                    }),
                    (Level13.prototype.laserOff = function () {
                        (this.laser1.visible = !1), (this.laser2.visible = !1), (this.laserIskru1.visible = !1), (this.laserIskru2.visible = !1), Client.SoundManager.stopSFXLoop("s_lvl13_laserLoop");
                    }),
                    (Level13.prototype.btnQCDown = function () {
                        (this.btnQC = !0),
                            (this.laser2.x = 418),
                            (this.laser2.angle = -40),
                            (this.laserIskru2.x = 486),
                            (this.laserIskru2.y = 36),
                            this.btnQuestCar.deactivate(!1),
                            Client.SimpleTweenManager.set(this.btnQuestCar, 8, { angle: -20 });
                    }),
                    (Level13.prototype.kranDown = function () {
                        (this.kranOpened = !0),
                            Client.SoundManager.playSFX("s_lvl13_valve"),
                            Client.SimpleTweenManager.set(this.water1Mask, 12, { x: 105 }),
                            this.btnKran.deactivate(),
                            Client.SimpleTweenManager.set(this.btnKran, 18, { angle: 360 }),
                            2 === this.contactPlugCount &&
                                !0 === this.water1Complete &&
                                ((this.waterTrub.visible = !0),
                                this.waterTrub.animations.play("start"),
                                this.water2.animations.play("end"),
                                this.water2_2.animations.play("end"),
                                !1 === this.startSpawningBubbles ? ((this.startWater = 2), Client.SoundManager.stopSFXLoop("s_lvl13_waterUp"), Client.SoundManager.playSFX("s_lvl13_waterFlowDown", !0)) : (this.startWater = 0));
                    }),
                    (Level13.prototype.btnChangeDown = function () {
                        !0 !== this.btnChangePressed &&
                            (Client.SoundManager.playSFX("s_lvl13_rotateSwitch"),
                            (this.btnChangePressed = !0),
                            this.game.add
                                .tween(this.btnChange)
                                .to({ angle: this.btnChange.angle + 90 }, 300, Phaser.Easing.Linear.None, !0)
                                .onComplete.addOnce(this.btnChangeComp, this));
                    }),
                    (Level13.prototype.btnChangeComp = function () {
                        (this.btnChangePressed = !1), this.changeWire();
                    }),
                    (Level13.prototype.changeWire = function () {
                        2 === this.contactPlugCount &&
                            (-180 === this.btnChange.angle
                                ? ((this.wire2.frameName = "wire2 instance 10001"), this.slider2.activate(), (this.btnChangeWire.frameName = "btnChangeWire instance 10001"))
                                : -90 === this.btnChange.angle
                                ? ((this.wire1.frameName = "wire1 instance 10001"), (this.wire2.frameName = "wire2 instance 10000"), this.slider1.activate(), this.slider2.deactivate())
                                : 0 === this.btnChange.angle && ((this.wire1.frameName = "wire1 instance 10000"), this.slider1.deactivate(), (this.btnChangeWire.frameName = "btnChangeWire instance 10000")));
                    }),
                    (Level13.prototype.createDark = function () {
                        (this.dark1 = Client.GameManager.instance.layerUpper.create(-16, 135, "level13", "dark1 instance 10000")),
                            (this.dark1.cacheAsBitmap = !0),
                            (this.dark1.inputEnabled = !0),
                            (this.dark2 = Client.GameManager.instance.layerUpper.create(551, 175, "level13", "dark2 instance 10000")),
                            (this.dark2.cacheAsBitmap = !0),
                            (this.dark2.inputEnabled = !0),
                            (this.dark3 = Client.GameManager.instance.layerUpper.create(560, 370, "level13", "dark3 instance 10000")),
                            (this.dark3.cacheAsBitmap = !0),
                            (this.dark3.inputEnabled = !0),
                            (this.dark4 = Client.GameManager.instance.layerUpper.create(303, 370, "level13", "dark4 instance 10000")),
                            (this.dark4.cacheAsBitmap = !0),
                            (this.dark4.inputEnabled = !0),
                            (this.dark5 = Client.GameManager.instance.layerUpper.create(227, 18, "level13", "dark5 instance 10000")),
                            (this.dark5.cacheAsBitmap = !0),
                            (this.dark5.inputEnabled = !0),
                            (this.btnSwitch1 = new Client.SimpleButton(this.game, 157, 170, "level13", "btnSwitch", !1)),
                            this.btnSwitch1.activate(),
                            this.btnSwitch1.onInputDown.add(this.deactivateDark1, this),
                            Client.GameManager.instance.layerUpper.addChild(this.btnSwitch1),
                            (this.btnSwitch2 = new Client.SimpleButton(this.game, 581, 185, "level13", "btnSwitch", !1)),
                            this.btnSwitch2.activate(),
                            this.btnSwitch2.onInputDown.add(this.deactivateDark2, this),
                            Client.GameManager.instance.layerUpper.addChild(this.btnSwitch2),
                            (this.btnSwitch3 = new Client.SimpleButton(this.game, 767, 380, "level13", "btnSwitch", !1)),
                            this.btnSwitch3.activate(),
                            this.btnSwitch3.onInputDown.add(this.deactivateDark3, this),
                            Client.GameManager.instance.layerUpper.addChild(this.btnSwitch3),
                            (this.btnSwitch4 = new Client.SimpleButton(this.game, 527, 421, "level13", "btnSwitch", !1)),
                            this.btnSwitch4.activate(),
                            this.btnSwitch4.onInputDown.add(this.deactivateDark4, this),
                            Client.GameManager.instance.layerUpper.addChild(this.btnSwitch4),
                            (this.btnSwitch5 = new Client.SimpleButton(this.game, 302, 192, "level13", "btnSwitch", !1)),
                            this.btnSwitch5.activate(),
                            this.btnSwitch5.onInputDown.add(this.deactivateDark5, this),
                            Client.GameManager.instance.layerUpper.addChild(this.btnSwitch5);
                    }),
                    (Level13.prototype.activateDrak = function () {
                        (this.dark1.visible = !0),
                            (this.dark2.visible = !0),
                            (this.dark3.visible = !0),
                            (this.dark4.visible = !0),
                            (this.dark5.visible = !0),
                            this.btnSwitch1.activate(),
                            this.btnSwitch2.activate(),
                            this.btnSwitch3.activate(),
                            this.btnSwitch4.activate(),
                            this.btnSwitch5.activate(),
                            this.plug.body.data.SetUserData(null);
                    }),
                    (Level13.prototype.deactivateDark1 = function () {
                        this.activateDrak(), (this.dark1.visible = !1), this.btnSwitch1.deactivate(), Client.SoundManager.playSFX("s_lvl13_lightOn");
                    }),
                    (Level13.prototype.deactivateDark2 = function () {
                        this.activateDrak(), (this.dark2.visible = !1), this.btnSwitch2.deactivate(), this.plug.body.data.SetUserData("DragBody"), Client.SoundManager.playSFX("s_lvl13_lightOn");
                    }),
                    (Level13.prototype.deactivateDark3 = function () {
                        this.activateDrak(), (this.dark3.visible = !1), this.btnSwitch3.deactivate(), Client.SoundManager.playSFX("s_lvl13_lightOn");
                    }),
                    (Level13.prototype.deactivateDark4 = function () {
                        this.activateDrak(), (this.dark4.visible = !1), this.btnSwitch4.deactivate(), Client.SoundManager.playSFX("s_lvl13_lightOn");
                    }),
                    (Level13.prototype.deactivateDark5 = function () {
                        this.activateDrak(), (this.dark5.visible = !1), this.btnSwitch5.deactivate(), Client.SoundManager.playSFX("s_lvl13_lightOn");
                    }),
                    (Level13.prototype.customAction = function (value) {
                        void 0 === value && (value = 0);
                    }),
                    (Level13.prototype.addGround = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 126, 602, 0);
                        ground.setRectangle(344, 50),
                            (ground.friction = 0.5),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, -44, 519, 0)).setRectangle(100, 100),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 309, 500, 0)).setRectangle(242, 21),
                            (ground.angle = -90),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 439, 388, 0)).setRectangle(233, 21),
                            (ground.angle = 180),
                            (ground.friction = 0.5),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 567, 288, 0)).setRectangle(19, 229),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 811, 180, 0)).setRectangle(496, 27),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 576, 220, 0)).setRectangle(13, 40),
                            (ground.angle = 22),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 593, 195, 0)).setRectangle(13, 40),
                            (ground.angle = 51),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 695, 359, 0)).setRectangle(235, 24),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 737, 271, 0)).setRectangle(24, 175),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 599, 305, 0)).setRectangle(43, 17),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 628, 327, 0)).setRectangle(9, 31),
                            (ground.angle = -37),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 637, 342, 0)).setRectangle(9, 10),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 1120, 116, 0)).setRectangle(100, 100),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 445, 373, 0)).setRectangle(4, 19),
                            (ground.angle = 50),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 182, 574, 0)).setRectangle(4, 19),
                            (ground.angle = 50),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 548, 24, 0)).setRectangle(514, 70),
                            ground.setCollisionCategory(Client.FilterGroups.CAR2),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 403, 128, 0)).setRectangle(35, 130),
                            (ground = null);
                    }),
                    (Level13.prototype.addTrigers = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 700, 269, 0);
                        ground.setCircle(15), (ground.sensor = !0), ground.setBodyContactCallback(this.plug, this.contactPlug, this), (ground = null);
                    }),
                    (Level13.prototype.contactPlug = function () {
                        0 === this.contactPlugCount && (this.contactPlugCount = 1);
                    }),
                    (Level13.prototype.update = function () {
                        _super.prototype.update.call(this),
                            1 === this.contactPlugCount &&
                                ((this.contactPlugCount = 2),
                                this.mouseDragEnd(),
                                this.plug.deactivate(),
                                (this.plug.body.x = 695),
                                (this.plug.body.y = 269),
                                (this.plug.body.angle = -90),
                                (this.plug.body.static = !0),
                                (this.lamps.frameName = "lamps instance 10001"),
                                (this.wire0.frameName = "wire0 instance 10001"),
                                this.changeWire(),
                                (this.water1.visible = !0),
                                this.water1.animations.play("start"),
                                Client.SoundManager.playSFX("s_lvl13_pumpAmbient", !0),
                                (Client.GameManager.instance.hero.currEyesState = Client.EyesState.afraidTime),
                                Client.SoundManager.playSFX("s_lvl13_rosette")),
                            !0 === this.questCarCreated && !0 === this.questCar.visible && ((this.questCar.x = this.questCarBody.x), (this.questCar.y = this.questCarBody.y)),
                            1 === this.startWater
                                ? ((this.waterFull.y -= 0.75),
                                  this.waterFull.y <= 180 && ((this.startWater = 0), Client.SoundManager.stopSFXLoop("s_lvl13_waterUp")),
                                  this.waterFull.y < 373 && !1 === this.waterStepsecond && (this.waterStepsecond = !0),
                                  this.waterFull.y < Client.GameManager.instance.hero.bodyBase.y &&
                                      !1 === this.startSpawningBubbles &&
                                      ((this.startSpawningBubbles = !0),
                                      Client.SoundManager.playSFX("s_wheelyDrowned", !0),
                                      (Client.GameManager.instance.hero.currEyesState = Client.EyesState.bumpForEver),
                                      Client.GameManager.instance.hero.setEnableMotor(!1, !1),
                                      Client.GameManager.instance.hero.setClickable(!1),
                                      Client.LevelBuilder.instance.levelFailed(100)))
                                : 2 === this.startWater &&
                                  ((this.waterFull.y += 0.75),
                                  ((600 < this.waterFull.y && !1 === this.waterStepsecond) || (373 < this.waterFull.y && !0 === this.waterStepsecond)) && ((this.startWater = 0), Client.SoundManager.stopSFXLoop("s_lvl13_waterFlowDown"))),
                            !0 === this.startSpawningBubbles &&
                                ((this.spawningBubblesCounter += 1),
                                2 === this.spawningBubblesCounter &&
                                    ((this.spawningBubblesCounter = 0),
                                    this.spawnBubble(Client.GameManager.instance.hero.bodyBase.x + Client.Tools.random(-40, 40), Client.GameManager.instance.hero.bodyBase.y + Client.Tools.random(-30, 10), 0.7 + 0.5 * Math.random())));
                    }),
                    (Level13.prototype.spawnBubble = function (x, y, scale) {
                        for (var i = 0; i < this.bubbles.length; i++)
                            if (!1 === this.bubbles[i].visible) return (this.bubbles[i].visible = !0), (this.bubbles[i].x = x), (this.bubbles[i].y = y), this.bubbles[i].scale.setTo(scale), void this.bubbles[i].animations.play("anim");
                        var bubble = Client.GameManager.instance.layerUpper.create(x, y, "wheely");
                        bubble.animations.add("anim", Phaser.Animation.generateFrameNames("bubbleWaterPart instance 1", 0, 9, "", 4), 30, !1).onComplete.add(this.bubbleComplete, this),
                            bubble.animations.play("anim"),
                            bubble.scale.setTo(scale),
                            this.bubbles.push(bubble),
                            (bubble = null);
                    }),
                    (Level13.prototype.bubbleComplete = function (bubble, data) {
                        bubble.visible = !1;
                    }),
                    (Level13.prototype.free = function () {
                        _super.prototype.free.call(this),
                            (this.dark1 = null),
                            (this.dark2 = null),
                            (this.dark3 = null),
                            (this.dark4 = null),
                            (this.dark5 = null),
                            (this.btnSwitch1 = null),
                            (this.btnSwitch2 = null),
                            (this.btnSwitch3 = null),
                            (this.btnSwitch4 = null),
                            (this.btnSwitch5 = null),
                            (this.btnKran = null),
                            (this.btnLaser = null),
                            (this.btnQuestCar = null),
                            (this.btnChange = null),
                            (this.btnChangeWire = null),
                            (this.wire0 = null),
                            (this.wire1 = null),
                            (this.wire2 = null),
                            (this.lamps = null),
                            (this.plug = null),
                            (this.slider1 = null),
                            (this.slider2 = null),
                            (this.door = null),
                            (this.laser1 = null),
                            (this.laser2 = null),
                            (this.laserIskru1 = null),
                            (this.laserIskru2 = null),
                            (this.questDoor = null),
                            (this.waterTrub = null),
                            (this.water1 = null),
                            (this.water1Mask = null),
                            (this.water2 = null),
                            (this.water2_2 = null),
                            (this.bubbles = []),
                            (this.bubbles = null);
                    }),
                    Level13
                );
            })(Client.BasicLevel);
            Client.Level13 = Level13;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Level14 = (function (_super) {
                function Level14() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (_this.mirrorConnected = 0), (_this.laserActive = !1), (_this.heroDestroyed = !1), (_this.lampFalling = !1), (_this.trigPressed = !1), (_this.stopMoveLiftCount = 0), _this;
                }
                return (
                    __extends(Level14, _super),
                    (Level14.prototype.init = function () {
                        Client.LevelManager.instance.currentRobberyScene = 3;
                        var sprite = Client.GameManager.instance.layerBackground.create(0, 0, "bgLevel14_1");
                        (sprite.cacheAsBitmap = !0),
                            this.addQuestWheel(14, 340, 64, Client.GameManager.instance.layerBackground),
                            this.addQuestCar(656, 524, Client.GameManager.instance.layerBackground),
                            (this.dark = new Client.Lvl14Dark(this.game)),
                            this.updateElements.push(this.dark),
                            (this.lift = new Client.Lvl14Lift(this.game, 260, 266)),
                            this.updateElements.push(this.lift),
                            (this.laser1 = Client.GameManager.instance.layerUpper.create(40, 501, "level14", "laserBeam instance 10000")),
                            this.laser1.anchor.setTo(0, 0.5),
                            (this.laser1.visible = !1),
                            (this.laser2 = Client.GameManager.instance.layerUpper.create(200, 506, "level14", "laserBeam instance 10000")),
                            this.laser2.anchor.setTo(0, 0.5),
                            (this.laser2.angle = -90),
                            (this.laser2.visible = !1),
                            (this.laser3 = Client.GameManager.instance.layerUpper.create(0, 0, "level14", "laserBeam instance 10000")),
                            this.laser3.anchor.setTo(0, 0.5),
                            (this.laser3.visible = !1),
                            (this.laser4 = Client.GameManager.instance.layerUpper.create(0, 0, "level14", "laserBeam instance 10000")),
                            this.laser4.anchor.setTo(0, 0.5),
                            (this.laser4.visible = !1),
                            (this.laserConnect1 = Client.GameManager.instance.layerUpper.create(0, 502, "level14")),
                            this.laserConnect1.animations.add("anim", Phaser.Animation.generateFrameNames("laserConnect instance 1", 16, 45, "", 4), 30, !0),
                            this.laserConnect1.anchor.setTo(1, 0.5),
                            (this.laserConnect1.visible = !1),
                            (this.laserConnect2 = Client.GameManager.instance.layerUpper.create(0, 0, "level14")),
                            this.laserConnect2.animations.add("anim", Phaser.Animation.generateFrameNames("laserConnect instance 1", 16, 45, "", 4), 30, !0),
                            this.laserConnect2.anchor.setTo(1, 0.5),
                            (this.laserConnect2.visible = !1),
                            (this.laserConnect3 = Client.GameManager.instance.layerUpper.create(0, 0, "level14")),
                            this.laserConnect3.animations.add("anim", Phaser.Animation.generateFrameNames("laserConnect instance 1", 16, 45, "", 4), 30, !0),
                            this.laserConnect3.anchor.setTo(1, 0.5),
                            (this.laserConnect3.visible = !1),
                            (this.laserConnect4 = Client.GameManager.instance.layerUpper.create(0, 0, "level14")),
                            this.laserConnect4.animations.add("anim", Phaser.Animation.generateFrameNames("laserConnect instance 1", 16, 45, "", 4), 30, !0),
                            this.laserConnect4.anchor.setTo(1, 0.5),
                            (this.laserConnect4.visible = !1),
                            ((sprite = Client.GameManager.instance.layerUpper.create(0, 600, "bgLevel14_2")).anchor.y = 1),
                            (sprite.cacheAsBitmap = !0),
                            (this.boss = new Client.Lvl14Boss(this.game)),
                            this.updateElements.push(this.boss),
                            (this.lamp = new Client.Lvl14LampFall2(this.game)),
                            this.updateElements.push(this.lamp),
                            (this.moveMirror = new Client.Lvl14MoveMirror(this.game, 491, 358)),
                            this.updateElements.push(this.moveMirror),
                            (this.cannonLaser = Client.GameManager.instance.layerUpper.create(10, 480, "level14", "cannonLaser instance 10000")),
                            this.cannonLaser.animations.add("open", Phaser.Animation.generateFrameNames("cannonLaser instance 1", 1, 11, "", 4), 30, !1),
                            this.cannonLaser.animations.add("close", Phaser.Animation.generateFrameNames("cannonLaser instance 1", 11, 1, "", 4), 30, !1),
                            (this.cannonWire = this.game.make.sprite(25, -23, "level14", "cannonWave instance 10000")),
                            this.cannonWire.animations.add("anim", Phaser.Animation.generateFrameNames("cannonWave instance 1", 1, 23, "", 4), 30, !1).onComplete.add(function () {
                                this.cannonWire.visible = !1;
                            }, this),
                            (this.cannonWire.visible = !1),
                            this.cannonLaser.addChild(this.cannonWire),
                            (this.trig = new Client.SimpleButton(this.game, 698, 277, "level14", "trig_but", !1)),
                            this.trig.deactivate(),
                            this.trig.onInputDown.addOnce(this.bossStart, this),
                            Client.GameManager.instance.layerUpper.addChild(this.trig),
                            (sprite = null),
                            (this.mirror1 = new Client.SimpleButton(this.game, 609, 363, "level14", "mirror1", !1)),
                            this.mirror1.activate(),
                            this.mirror1.onInputDown.add(this.mirrorDown, this),
                            this.mirror1.onInputUp.add(this.mirrorUp, this),
                            Client.GameManager.instance.layerElements.addChild(this.mirror1),
                            this.game.physics.box2d.enable(this.mirror1),
                            this.mirror1.body.setRectangle(30, 30),
                            (this.mirror1.body.static = !0),
                            (this.mirror1.name = "mirror1"),
                            this.mirror1.body.data.SetUserData("DragBody"),
                            this.mirror1.body.setCollisionCategory(Client.FilterGroups.MIRROR_DEACTIVE),
                            this.mirror1.body.setCollisionMask(~Client.FilterGroups.IGNORE_CAR_MIRROR),
                            (this.mirror2 = new Client.SimpleButton(this.game, 689, 360, "level14", "mirror2", !1)),
                            this.mirror2.activate(),
                            this.mirror2.onInputDown.add(this.mirrorDown, this),
                            this.mirror2.onInputUp.add(this.mirrorUp, this),
                            Client.GameManager.instance.layerElements.addChild(this.mirror2),
                            this.game.physics.box2d.enable(this.mirror2),
                            this.mirror2.body.setRectangle(30, 30),
                            (this.mirror2.body.static = !0),
                            (this.mirror2.name = "mirror2"),
                            this.mirror2.body.data.SetUserData("DragBody"),
                            this.mirror2.body.setCollisionCategory(Client.FilterGroups.MIRROR_DEACTIVE),
                            this.mirror2.body.setCollisionMask(~Client.FilterGroups.IGNORE_CAR_MIRROR),
                            (Client.GameManager.instance.hero = new Client.Hero(this.game, 65, 201)),
                            this.updateElements.push(new Client.Finish(this.game, 489, 208)),
                            this.game.input.onDown.add(this.mouseDragStart, this),
                            this.game.input.addMoveCallback(this.mouseDragMove, this),
                            this.game.input.onUp.add(this.mouseDragEnd, this),
                            this.addGround(),
                            this.addTrigers(),
                            this.addBaks();
                    }),
                    (Level14.prototype.mirrorDown = function (sprite) {
                        Client.GameManager.instance.layerElements.removeChild(sprite),
                            Client.GameManager.instance.layerUpper.addChild(sprite),
                            !0 === sprite.body.static ? ((sprite.body.dynamic = !0), this.mouseDragStart()) : sprite.body === this.b2 && (this.destroyMirrorJoint(), (sprite.body.fixedRotation = !1), (this.mirrorConnected = 3)),
                            sprite.body.setCollisionCategory(Client.FilterGroups.MIRROR_ACTIVE),
                            Client.SoundManager.playSFX("s_lvl14_cristallGet"),
                            Client.SoundManager.playSFX("s_lvl14_slideMirror");
                    }),
                    (Level14.prototype.mirrorUp = function (sprite) {
                        this.jointMirror || (Client.GameManager.instance.layerUpper.removeChild(sprite), Client.GameManager.instance.layerElements.addChild(sprite), sprite.body.setCollisionCategory(Client.FilterGroups.MIRROR_DEACTIVE));
                    }),
                    (Level14.prototype.mouseDragStart = function () {
                        this.game.physics.box2d.mouseDragStart(this.game.input.activePointer.position), this.game.physics.box2d.mouseJoint && "DragBody" !== this.game.physics.box2d.mouseJoint.GetBodyB().GetUserData() && this.mouseDragEnd();
                    }),
                    (Level14.prototype.mouseDragMove = function () {
                        this.game.physics.box2d.mouseJoint && "DragBody" === this.game.physics.box2d.mouseJoint.GetBodyB().GetUserData() && this.game.physics.box2d.mouseDragMove(this.game.input.activePointer.position);
                    }),
                    (Level14.prototype.mouseDragEnd = function () {
                        this.game.physics.box2d.mouseDragEnd();
                    }),
                    (Level14.prototype.bossStart = function () {
                        this.boss.start(), this.trig.deactivate(), (this.trigPressed = !0);
                    }),
                    (Level14.prototype.customAction = function (value) {
                        void 0 === value && (value = 0),
                            1 === value
                                ? (this.moveMirror.activate(), this.cannonLaser.animations.play("open"), (this.laserActive = !0), (this.laser1.visible = !0), Client.SoundManager.playSFX("s_lvl14_laserLoop", !0))
                                : 2 === value
                                ? (this.lift.move(1),
                                  this.dark.activate(),
                                  this.trig.activate(),
                                  (this.cannonWire.visible = !0),
                                  this.cannonWire.animations.play("anim"),
                                  this.boss.wheely(),
                                  Client.GameManager.instance.hero.setEnableMotor(!1),
                                  Client.GameManager.instance.hero.setClickable(!1),
                                  Client.SoundManager.playSFX("s_lvl14_activateTrap"),
                                  Client.SoundManager.playSFX("s_lvl14_bossSurprise"))
                                : 3 === value
                                ? (this.lift.move(-1, 2),
                                  (this.cannonWire.visible = !0),
                                  this.cannonWire.animations.play("anim"),
                                  this.cannonLaser.animations.play("close"),
                                  (this.laserActive = !1),
                                  (this.laser1.visible = !1),
                                  (this.laser2.visible = !1),
                                  (this.laser3.visible = !1),
                                  (this.laser4.visible = !1),
                                  (this.laserConnect1.visible = !1),
                                  (this.laserConnect2.visible = !1),
                                  (this.laserConnect3.visible = !1),
                                  (this.laserConnect4.visible = !1),
                                  Client.SoundManager.stopSFXLoop("s_lvl14_laserLoop"),
                                  Client.SoundManager.playSFX("s_lvl14_trapDeactivate"))
                                : 4 === value
                                ? (this.boss.playAngry(), this.lift.move(1, 2))
                                : 5 === value
                                ? this.boss.playDead()
                                : 6 === value && Client.GameManager.instance.hero.setClickable(!0);
                    }),
                    (Level14.prototype.update = function () {
                        _super.prototype.update.call(this),
                            1 === this.mirrorConnected
                                ? ((this.mirrorConnected = 2),
                                  (this.b2.angle = 0),
                                  (this.b2.fixedRotation = !0),
                                  this.mouseDragEnd(),
                                  this.destroyMirrorJoint(),
                                  this.mirrorUp(this.b2.sprite),
                                  (this.jointMirror = this.game.physics.box2d.revoluteJoint(this.b1, this.b2)),
                                  Client.SoundManager.playSFX("s_lvl14_cristallInSocket"))
                                : 3 <= this.mirrorConnected && ((this.mirrorConnected += 1), 30 === this.mirrorConnected && (this.mirrorConnected = 0)),
                            this.updateLasers();
                    }),
                    (Level14.prototype.updateLasers = function () {
                        if (!1 !== this.laserActive) {
                            if (480 < this.lift.graphic.body.y && this.lift.graphic.body.y < 515)
                                return (
                                    (this.laser1.scale.x = 0.28),
                                    (this.laser2.visible = !1),
                                    (this.laser3.visible = !1),
                                    (this.laser4.visible = !1) === this.laserConnect1.visible && ((this.laserConnect1.visible = !0), this.laserConnect1.animations.play("anim")),
                                    (this.laserConnect1.x = 175),
                                    !0 === this.laserConnect2.visible && ((this.laserConnect2.visible = !1), this.laserConnect2.animations.stop()),
                                    !0 === this.laserConnect3.visible && ((this.laserConnect3.visible = !1), this.laserConnect3.animations.stop()),
                                    void (!0 === this.laserConnect4.visible && ((this.laserConnect4.visible = !1), this.laserConnect4.animations.stop()))
                                );
                            if (
                                (515 < this.lift.graphic.body.y &&
                                    !1 === this.heroDestroyed &&
                                    ((this.heroDestroyed = !0),
                                    Client.GameManager.instance.hero.setVisibility(!1),
                                    Client.SoundManager.playSFX("s_wheelyExplosion"),
                                    this.updateElements.push(new Client.BrokeHero(this.game, Client.GameManager.instance.hero.bodyBase.x, Client.GameManager.instance.hero.bodyBase.y)),
                                    Client.LevelBuilder.instance.levelFailed(100)),
                                (this.laser1.scale.x = 1),
                                485 < this.moveMirror.btn.y && this.moveMirror.btn.y < 518)
                            ) {
                                this.laser2.visible = !0;
                                var offY = this.moveMirror.btn.y - 485;
                                if (((this.laser2.x = 464 + offY), 471 < this.laser2.x && this.laser2.x < 494))
                                    if (this.jointMirror)
                                        if (471 < this.laser2.x && this.laser2.x < 480) {
                                            if (((this.laser2.scale.x = 0.8), (this.laser3.visible = !0), "mirror1" === this.b2.sprite.name)) {
                                                (this.laser3.scale.x = 0.54),
                                                    (this.laser3.angle = 170),
                                                    (this.laser3.x = 479),
                                                    !(this.laser3.y = 135) === this.laserConnect4.visible && ((this.laserConnect4.visible = !0), this.laserConnect4.animations.play("anim")),
                                                    (this.laserConnect4.angle = 180),
                                                    (this.laserConnect4.x = 226),
                                                    (this.laserConnect4.y = 177),
                                                    (this.laser4.visible = !0),
                                                    (this.laser4.angle = 85),
                                                    (this.laser4.x = 232),
                                                    (this.laser4.y = 179);
                                                var dis = Client.Tools.distance(this.laser4.x, this.laser4.y, this.lift.graphic.x, this.lift.graphic.y - 20);
                                                (this.laser4.scale.x = Client.Tools.percentToF(dis, 466)),
                                                    !1 === this.heroDestroyed &&
                                                        ((this.heroDestroyed = !0),
                                                        Client.GameManager.instance.hero.setVisibility(!1),
                                                        Client.SoundManager.playSFX("s_wheelyExplosion"),
                                                        this.updateElements.push(new Client.BrokeHero(this.game, Client.GameManager.instance.hero.bodyBase.x, Client.GameManager.instance.hero.bodyBase.y)),
                                                        Client.LevelBuilder.instance.levelFailed(100));
                                            } else
                                                "mirror2" === this.b2.sprite.name &&
                                                    ((this.laser3.scale.x = 1),
                                                    (this.laser3.angle = -55),
                                                    (this.laser3.x = 479),
                                                    (this.laser3.y = 139),
                                                    !0 === this.laserConnect4.visible && ((this.laserConnect4.visible = !1), this.laserConnect4.animations.stop()),
                                                    (this.laser4.visible = !1) === this.lampFalling && (!(this.lampFalling = !0) === this.trigPressed ? this.lamp.playFall(1) : this.lamp.playFall(2)));
                                            !1 === this.laserConnect2.visible && ((this.laserConnect2.visible = !0), this.laserConnect2.animations.play("anim")),
                                                (this.laserConnect2.angle = 0),
                                                (this.laserConnect2.x = 480),
                                                !(this.laserConnect2.y = 137) === this.laserConnect3.visible && ((this.laserConnect3.visible = !0), this.laserConnect3.animations.play("anim")),
                                                (this.laserConnect3.angle = 180),
                                                (this.laserConnect3.x = 475),
                                                (this.laserConnect3.y = 137);
                                        } else
                                            (this.laser2.scale.x = 1.2),
                                                (this.laser3.visible = !1),
                                                !(this.laser4.visible = !1) === this.laserConnect2.visible && ((this.laserConnect2.visible = !1), this.laserConnect2.animations.stop()),
                                                !0 === this.laserConnect3.visible && ((this.laserConnect3.visible = !1), this.laserConnect3.animations.stop()),
                                                !0 === this.laserConnect4.visible && ((this.laserConnect4.visible = !1), this.laserConnect4.animations.stop());
                                    else
                                        (this.laser2.scale.x = 1.2),
                                            (this.laser3.visible = !1),
                                            !(this.laser4.visible = !1) === this.laserConnect2.visible && ((this.laserConnect2.visible = !1), this.laserConnect2.animations.stop()),
                                            !0 === this.laserConnect3.visible && ((this.laserConnect3.visible = !1), this.laserConnect3.animations.stop()),
                                            !0 === this.laserConnect4.visible && ((this.laserConnect4.visible = !1), this.laserConnect4.animations.stop());
                                else
                                    (this.laser2.scale.x = 0.5),
                                        (this.laser3.visible = !1),
                                        (this.laser4.visible = !1) === this.laserConnect2.visible && ((this.laserConnect2.visible = !0), this.laserConnect2.animations.play("anim")),
                                        !0 === this.laserConnect3.visible && ((this.laserConnect3.visible = !1), this.laserConnect3.animations.stop()),
                                        !0 === this.laserConnect4.visible && ((this.laserConnect4.visible = !1), this.laserConnect4.animations.stop()),
                                        (this.laserConnect2.angle = -90),
                                        (this.laserConnect2.y = 287),
                                        (this.laserConnect2.x = this.laser2.x);
                                !1 === this.laserConnect1.visible && ((this.laserConnect1.visible = !0), this.laserConnect1.animations.play("anim")), (this.laserConnect1.x = this.laser2.x - 2);
                            } else
                                (this.laser2.visible = !1),
                                    (this.laser3.visible = !1),
                                    !(this.laser4.visible = !1) === this.laserConnect1.visible && ((this.laserConnect1.visible = !1), this.laserConnect1.animations.stop()),
                                    !0 === this.laserConnect2.visible && ((this.laserConnect2.visible = !1), this.laserConnect2.animations.stop()),
                                    !0 === this.laserConnect3.visible && ((this.laserConnect3.visible = !1), this.laserConnect3.animations.stop()),
                                    !0 === this.laserConnect4.visible && ((this.laserConnect4.visible = !1), this.laserConnect4.animations.stop());
                        }
                    }),
                    (Level14.prototype.destroyMirrorJoint = function () {
                        this.jointMirror && (this.game.physics.box2d.world.DestroyJoint(this.jointMirror), (this.jointMirror = null));
                    }),
                    (Level14.prototype.addGround = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 75, 271, 0);
                        ground.setRectangle(186, 44),
                            ground.setCollisionMask(~Client.FilterGroups.MIRROR_ACTIVE),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, -32, 125, 0)).setRectangle(42, 306),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 595, 271, 0)).setRectangle(488, 44),
                            ground.setCollisionMask(~Client.FilterGroups.MIRROR_ACTIVE),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 822, 130, 0)).setRectangle(42, 337),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 404, -22, 0)).setRectangle(42, 822),
                            (ground.angle = 90),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 264, 583, 0)).setRectangle(494, 34),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 6, 420, 0)).setRectangle(341, 34),
                            (ground.angle = 90),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 519, 442, 0)).setRectangle(318, 34),
                            (ground.angle = 90),
                            ground.setCollisionMask(~Client.FilterGroups.MIRROR_ACTIVE),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 664, 555, 0)).setRectangle(306, 32),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 794, 417, 0)).setRectangle(42, 337),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 753, 542, 0)).setRectangle(46, 100),
                            (ground.angle = 29),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 551, 199, 0)).setRectangle(34, 100),
                            ground.setCollisionMask(~Client.FilterGroups.MIRROR_ACTIVE),
                            (ground = null);
                    }),
                    (Level14.prototype.addTrigers = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 476, 138, 0);
                        ground.setCircle(4),
                            (ground.sensor = !0),
                            ground.setBodyContactCallback(this.mirror1.body, this.contactMirror, this),
                            ground.setBodyContactCallback(this.mirror2.body, this.contactMirror, this),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 315, 199, 0)).setRectangle(24, 100),
                            (ground.sensor = !0),
                            ground.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, this.stopMoveLift, this),
                            (ground = null);
                    }),
                    (Level14.prototype.stopMoveLift = function () {
                        0 === this.stopMoveLiftCount && ((this.stopMoveLiftCount = 1), this.customAction(2));
                    }),
                    (Level14.prototype.contactMirror = function (b1, b2, f1, f2, begin) {
                        ((!0 === begin && 0 === this.mirrorConnected) || (!0 === begin && this.b2 !== b2)) && ((this.b1 = b1), (this.b2 = b2), (this.mirrorConnected = 1));
                    }),
                    (Level14.prototype.addBaks = function () {
                        this.createBaks(647, 529, 90),
                            this.createBaks(664, 532, 0),
                            this.createBaks(632, 529, -90),
                            this.createBaks(614, 532, 0),
                            this.createBaks(684, 532, 180),
                            this.createBaks(594, 532, 180),
                            this.createBaks(664, 517, 0),
                            this.createBaks(614, 517, 0),
                            this.createBaks(632, 509, -90),
                            this.createBaks(687, 511, 39),
                            this.createBaks(713, 529, 91),
                            this.createBaks(590, 512, -53),
                            this.createBaks(574, 526, -51),
                            this.createBaks(647, 509, -90),
                            this.createBaks(664, 502, 180),
                            this.createBaks(652, 488, -19),
                            this.createBaks(632, 491, -5),
                            this.createBaks(608, 499, 17),
                            this.createBaks(552, 532, 180);
                    }),
                    (Level14.prototype.createBaks = function (x, y, angle) {
                        var ground = Client.GameManager.instance.layerBackground.create(x, y, "level14", "baks instance 10000");
                        (ground.inputEnabled = !0),
                            (ground.input.useHandCursor = !0),
                            this.game.physics.box2d.enable(ground),
                            ground.body.setRectangle(20, 15),
                            (ground.body.angle = angle),
                            ground.body.data.SetUserData("DragBody"),
                            ground.body.setCollisionMask(~Client.FilterGroups.IGNORE_MIRROR),
                            (ground = null);
                    }),
                    (Level14.prototype.free = function () {
                        _super.prototype.free.call(this),
                            (this.mirror1 = null),
                            (this.mirror2 = null),
                            (this.trig = null),
                            (this.jointMirror = null),
                            (this.b1 = null),
                            (this.b2 = null),
                            (this.dark = null),
                            (this.moveMirror = null),
                            (this.cannonLaser = null),
                            (this.cannonWire = null),
                            (this.lift = null),
                            (this.boss = null),
                            (this.laser1 = null),
                            (this.laser2 = null),
                            (this.laser3 = null),
                            (this.laser4 = null),
                            (this.laserConnect1 = null),
                            (this.laserConnect2 = null),
                            (this.laserConnect3 = null),
                            (this.laserConnect4 = null),
                            (this.lamp = null);
                    }),
                    Level14
                );
            })(Client.BasicLevel);
            Client.Level14 = Level14;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Level15 = (function (_super) {
                function Level15() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (_this.heroOnPlace = !1), _this;
                }
                return (
                    __extends(Level15, _super),
                    (Level15.prototype.init = function () {
                        var sprite = Client.GameManager.instance.layerBackground.create(0, 0, "bgLevel15_1");
                        (sprite.cacheAsBitmap = !0),
                            (sprite = null),
                            (Client.GameManager.instance.hero = new Client.Hero(this.game, -30, 480)),
                            Client.GameManager.instance.hero.setEnableMotor(!0),
                            Client.GameManager.instance.hero.setClickable(!1),
                            Client.GameManager.instance.hero.setWheelsFrictions(5),
                            this.addQuestWheel(15, 37, 214, Client.GameManager.instance.layerUpper),
                            this.addSecret(),
                            (this.bomb = new Client.Lvl15Bomb(this.game)),
                            this.updateElements.push(this.bomb);
                        var safe = new Client.Lvl15SafeDoor(this.game);
                        this.updateElements.push(safe);
                        var door = new Client.Lvl15BigDoor(this.game, 399, 311);
                        this.updateElements.push(door), this.addGround(), this.addCursor();
                    }),
                    (Level15.prototype.addCursor = function () {
                        (this.pliers = Client.GameManager.instance.layerUpper.create(0, 0, "level15", "lvl15_mouse_mc instance 10000")), this.pliers.anchor.set(0.5), (this.pliers.visible = !1);
                    }),
                    (Level15.prototype.addSecret = function () {
                        this.addQuestCar(623, 484, Client.GameManager.instance.layerUpper),
                            (this.door = Client.GameManager.instance.layerUpper.create(583, 370, "level15", "secretDoor instance 10000")),
                            this.door.animations.add("anim", Phaser.Animation.generateFrameNames("secretDoor instance 1", 0, 8, "", 4), 30, !1),
                            (this.door.inputEnabled = !0),
                            (this.lock = Client.GameManager.instance.layerUpper.create(623, 437, "level15", "lock instance 10000")),
                            this.lock.animations.add("anim", Phaser.Animation.generateFrameNames("lock instance 1", 0, 18, "", 4), 30, !1),
                            (this.lock.inputEnabled = !0),
                            this.lock.events.onInputDown.add(this.hitLock, this);
                    }),
                    (Level15.prototype.setPliersVisible = function (_value) {
                        this.pliers.visible = _value;
                    }),
                    (Level15.prototype.hitLock = function () {
                        this.pliers.visible && ((this.lock.inputEnabled = !1), (this.door.inputEnabled = !1), this.door.play("anim"), this.lock.play("anim"), Client.SoundManager.playSFX("s_lvl15_lockCut"));
                    }),
                    (Level15.prototype.activateBomb = function () {
                        this.bomb.activate();
                    }),
                    (Level15.prototype.showFinal = function () {
                        Client.DataManager.getInstance().saveData("questFlag" + Client.LevelManager.getInstance().currentLevel, 1);
                        var final = new Client.Lvl15Final(this.game);
                        this.updateElements.push(final);
                    }),
                    (Level15.prototype.boom = function () {
                        var smoke = Client.GameManager.instance.layerElements.create(400, 330, "level15", "bigSmoke instance 10000");
                        (smoke.animations.add("anim", Phaser.Animation.generateFrameNames("bigSmoke instance 1", 0, 6, "", 4), 30, !1).killOnComplete = !0), smoke.play("anim"), smoke.anchor.set(0.5), (smoke = null);
                        var explosion = Client.GameManager.instance.layerElements.create(400, 350, "level15", "bigExplosion instance 10000");
                        (explosion.animations.add("anim", Phaser.Animation.generateFrameNames("bigExplosion instance 1", 0, 24, "", 4), 30, !1).killOnComplete = !0), explosion.play("anim"), explosion.anchor.set(0.5), (explosion = null);
                        var expl1 = new Client.Lvl15Explosion1(this.game, 400, 330);
                        this.updateElements.push(expl1),
                            (expl1 = new Client.Lvl15Explosion1(this.game, 405, 330, 30)),
                            this.updateElements.push(expl1),
                            (expl1 = new Client.Lvl15Explosion1(this.game, 395, 340, -30)),
                            this.updateElements.push(expl1);
                        var expl2 = new Client.Lvl15Explosion2(this.game, 365, 300);
                        this.updateElements.push(expl2), (expl2 = new Client.Lvl15Explosion2(this.game, 420, 325)), this.updateElements.push(expl2);
                        var expl3 = new Client.Lvl15Explosion3(this.game, 400, 280, 0, 1, "lvl15explosion3Part1");
                        this.updateElements.push(expl3),
                            (expl3 = new Client.Lvl15Explosion3(this.game, 410, 340, -10, 1, "lvl15explosion3Part2")),
                            this.updateElements.push(expl3),
                            (expl3 = new Client.Lvl15Explosion3(this.game, 420, 315, 0, 1, "lvl15explosion3Part1")),
                            this.updateElements.push(expl3),
                            (expl3 = expl2 = expl1 = null);
                        var coin = new Client.Lvl15Coin(this.game);
                        this.updateElements.push(coin);
                    }),
                    (Level15.prototype.update = function () {
                        _super.prototype.update.call(this),
                            !this.heroOnPlace && 400 < Client.GameManager.instance.hero.bodyBase.x && ((this.heroOnPlace = !0), Client.GameManager.instance.hero.setEnableMotor(!1)),
                            this.pliers.visible &&
                                ((this.pliers.x = this.game.input.activePointer.x),
                                (this.pliers.y = this.game.input.activePointer.y),
                                this.game.input.activePointer.isDown ? (this.pliers.frameName = "lvl15_mouse_mc instance 10001") : (this.pliers.frameName = "lvl15_mouse_mc instance 10000"));
                    }),
                    (Level15.prototype.addGround = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 54, 537, 0);
                        ground.setRectangle(285, 20),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 399, 500, 0)).setRectangle(285, 20),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 220, 523, 0)).setRectangle(100, 20),
                            (ground.angle = -30),
                            (ground = null);
                    }),
                    (Level15.prototype.free = function () {
                        _super.prototype.free.call(this), (this.pliers = null), (this.door = null), (this.lock = null), (this.bomb = null);
                    }),
                    Level15
                );
            })(Client.BasicLevel);
            Client.Level15 = Level15;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Level2 = (function (_super) {
                function Level2() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (_this.doorLeftOpened = !1), (_this.contactDoorLeftCount = 0), (_this.contactActivateBellCount = 0), (_this.contactSurpriseCount = 0), _this;
                }
                return (
                    __extends(Level2, _super),
                    (Level2.prototype.init = function () {
                        var sprite = Client.GameManager.instance.layerBackground.create(0, 0, "bgLevel2_1");
                        (sprite.cacheAsBitmap = !0),
                            (this.carSkeleton = new Client.Lvl2CarSkeleton(this.game)),
                            this.updateElements.push(this.carSkeleton),
                            ((sprite = Client.GameManager.instance.layerUpper.create(0, 0, "bgLevel2_2")).cacheAsBitmap = !0),
                            (this.glass = Client.GameManager.instance.layerMiddle.create(196, -5, "level2", "glass instance 10000")),
                            (this.glass.cacheAsBitmap = !0),
                            (this.doorLeft = new Client.Lvl2Door(this.game, 193, 70, 1, Client.GameManager.instance.layerBackground)),
                            this.updateElements.push(this.doorLeft),
                            ((sprite = Client.GameManager.instance.layerBackground.create(220, 455, "level2", "bankDoor instance 10000")).cacheAsBitmap = !0),
                            ((sprite = Client.GameManager.instance.layerBackground.create(163, 67, "level2", "doorPart instance 10000")).cacheAsBitmap = !0),
                            (sprite = Client.GameManager.instance.layerBackground.create(390, 228, "level2", "fanLeft instance 10000")).animations.add("anim", Phaser.Animation.generateFrameNames("fanLeft instance 1", 0, 59, "", 4), 30, !0),
                            sprite.animations.play("anim"),
                            (sprite = Client.GameManager.instance.layerBackground.create(445, 233, "level2", "fanBody instance 10000")).anchor.setTo(0.5),
                            (sprite = Client.GameManager.instance.layerBackground.create(391, 228, "level2", "fanRight instance 10000")).animations.add(
                                "anim",
                                Phaser.Animation.generateFrameNames("fanRight instance 1", 0, 29, "", 4),
                                30,
                                !0
                            ),
                            sprite.animations.play("anim"),
                            (sprite = null),
                            (this.gold = Client.GameManager.instance.layerElements.create(240, 340, "level2", "gold instance 10000")),
                            this.gold.anchor.setTo(0.5),
                            (this.gold.visible = !1),
                            (this.carManager = new Client.Lvl2CarManager(this.game)),
                            this.updateElements.push(this.carManager),
                            (Client.GameManager.instance.hero = new Client.Hero(this.game, 60, 127)),
                            (this.doorRight = new Client.Lvl2Door(this.game, 603, 70, -1, Client.GameManager.instance.layerElements)),
                            this.updateElements.push(this.doorRight),
                            (this.doorPart = Client.GameManager.instance.layerElements.create(633, 67, "level2", "doorPart instance 10000")),
                            (this.doorPart.scale.x = -1),
                            (this.doorPart.cacheAsBitmap = !0),
                            this.updateElements.push(new Client.ChangeHeroDir(this.game, "level2", 730, 359, 58, 3)),
                            this.updateElements.push(new Client.Lvl2CarSecurity(this.game)),
                            this.addQuestWheel(2, 412, 265, Client.GameManager.instance.layerBackground),
                            this.addQuestCar(148, 480, Client.GameManager.instance.layerBackground, -1, 0, 0.77),
                            (this.cellCeif = Client.GameManager.instance.layerBackground.create(170, 475, "level2", "cellCeif instance 10000")),
                            this.cellCeif.anchor.setTo(1, 0.5),
                            this.cellCeif.events.onInputOut.add(this.cellOut, this),
                            this.cellCeif.events.onInputOver.add(this.cellOver, this),
                            this.cellCeif.events.onInputDown.addOnce(this.cellDown, this),
                            (this.cellCeif.inputEnabled = !0),
                            (this.cellCeif.input.useHandCursor = !0),
                            (this.btnBell = Client.GameManager.instance.layerBackground.create(151, 338, "level2", "btnBell instance 10000")),
                            (this.btnBell.angle = 9),
                            this.btnBell.anchor.setTo(0.5),
                            this.btnBell.events.onInputOut.add(this.bellOut, this),
                            this.btnBell.events.onInputOver.add(this.bellOver, this),
                            this.btnBell.events.onInputDown.addOnce(this.bellDown, this),
                            (this.bell = new Client.Lvl2Bell(this.game)),
                            this.updateElements.push(this.bell),
                            this.addGround(),
                            this.addTrigers(),
                            (this.bodyDoorRight = new Phaser.Physics.Box2D.Body(this.game, null, 612, 118, 0)),
                            this.bodyDoorRight.setRectangle(100, 100),
                            (this.bubbleWheely = new Client.Lvl2WheelyBubble(this.game)),
                            this.updateElements.push(this.bubbleWheely),
                            (this.bubbleManager = new Client.Lvl2BankirBubble(this.game)),
                            this.updateElements.push(this.bubbleManager);
                    }),
                    (Level2.prototype.activateBtnBell = function () {
                        (this.btnBell.inputEnabled = !0), (this.btnBell.input.useHandCursor = !0), this.bellOut();
                    }),
                    (Level2.prototype.bellOut = function () {
                        !1 !== this.btnBell.inputEnabled && (this.btnBell.frameName = "btnBell instance 10001");
                    }),
                    (Level2.prototype.bellOver = function () {
                        !1 !== this.btnBell.inputEnabled && (this.btnBell.frameName = "btnBell instance 10002");
                    }),
                    (Level2.prototype.bellDown = function () {
                        (this.btnBell.inputEnabled = !1),
                            (this.btnBell.frameName = "btnBell instance 10000"),
                            this.bell.playAnim("anim"),
                            Client.SoundManager.playSFX("s_lvl2_bell"),
                            this.game.add.tween(this.btnBell).to({ x: 150, y: 344 }, 200, Phaser.Easing.Linear.None, !0),
                            this.carManager.start();
                    }),
                    (Level2.prototype.cellOut = function () {
                        !1 !== this.cellCeif.inputEnabled && (this.cellCeif.frameName = "cellCeif instance 10000");
                    }),
                    (Level2.prototype.cellOver = function () {
                        !1 !== this.cellCeif.inputEnabled && (this.cellCeif.frameName = "cellCeif instance 10001");
                    }),
                    (Level2.prototype.cellDown = function () {
                        this.cellOut(), (this.cellCeif.inputEnabled = !1), this.game.add.tween(this.cellCeif.scale).to({ x: 0.08 }, 300, Phaser.Easing.Linear.None, !0);
                    }),
                    (Level2.prototype.customAction = function (value) {
                        void 0 === value && (value = 0),
                            1 === value
                                ? (this.doorLeftOpened = !0)
                                : 2 === value
                                ? ((this.bodyDoorRight.sensor = !0),
                                  Client.GameManager.instance.layerElements.removeChild(this.doorRight.graphic),
                                  Client.GameManager.instance.layerBackground.addChild(this.doorRight.graphic),
                                  Client.GameManager.instance.layerElements.removeChild(this.doorPart),
                                  Client.GameManager.instance.layerBackground.addChild(this.doorPart))
                                : 3 === value
                                ? (this.contactDoorLeftCount = 0)
                                : 4 === value
                                ? this.bubbleWheely.show()
                                : 5 === value
                                ? (this.bubbleManager.show(), this.carManager.lying())
                                : 6 === value &&
                                  (this.carManager.gladness(),
                                  (this.gold.visible = !0),
                                  this.game.add
                                      .tween(this.gold)
                                      .to({ x: [240, 180, 120, 60], y: [340, 240, 240, 340] }, 600, Phaser.Easing.Linear.None, !0)
                                      .interpolation(function (v, k) {
                                          return Phaser.Math.bezierInterpolation(v, k);
                                      })
                                      .onComplete.addOnce(this.moneyComplete, this));
                    }),
                    (Level2.prototype.moneyComplete = function () {
                        (this.gold.visible = !1), (Client.GameManager.instance.hero.currState = Client.HeroState.finish), Client.LevelBuilder.instance.levelComplete(100);
                    }),
                    (Level2.prototype.addGround = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 305, 192, 0);
                        ground.setRectangle(684, 41),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, -56, 118, 0)).setRectangle(100, 100),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 675, 402, 0)).setRectangle(288, 100),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 486, 407, 0)).setRectangle(120, 78),
                            (ground.angle = -17),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 79, 438, 0)).setRectangle(690, 100),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 847, 224, 0)).setRectangle(100, 466),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 148, 357, 0)).setRectangle(65, 50),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, -195, 338, 0)).setRectangle(100, 100),
                            (ground = null);
                    }),
                    (Level2.prototype.addTrigers = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 262, 118, 0);
                        ground.setRectangle(24, 100),
                            (ground.sensor = !0),
                            ground.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, this.contactDoorLeft, this),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 180, 333, 0)).setRectangle(19, 100),
                            (ground.sensor = !0),
                            ground.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, this.contactActivateBell, this),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 391, 123, 0)).setRectangle(12, 100),
                            (ground.sensor = !0),
                            ground.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, this.contactSurprise, this),
                            (ground = null);
                    }),
                    (Level2.prototype.contactDoorLeft = function () {
                        0 === this.contactDoorLeftCount &&
                            ((this.contactDoorLeftCount = 1),
                            !0 === this.doorLeftOpened
                                ? (Client.GameManager.instance.layerMiddle.removeChild(this.glass), Client.GameManager.instance.layerElements.addChild(this.glass), this.carSkeleton.setCollisionNotHero())
                                : this.carSkeleton.playAngry());
                    }),
                    (Level2.prototype.contactActivateBell = function () {
                        0 === this.contactActivateBellCount && ((this.contactActivateBellCount = 1), this.activateBtnBell(), Client.GameManager.instance.hero.setEnableMotor(!1), Client.GameManager.instance.hero.setClickable(!1));
                    }),
                    (Level2.prototype.contactSurprise = function () {
                        0 === this.contactSurpriseCount && ((this.contactSurpriseCount = 1), this.carSkeleton.surprise());
                    }),
                    (Level2.prototype.free = function () {
                        _super.prototype.free.call(this),
                            (this.cellCeif = null),
                            (this.doorLeft = null),
                            (this.doorRight = null),
                            (this.btnBell = null),
                            (this.bell = null),
                            (this.bodyDoorRight = null),
                            (this.carSkeleton = null),
                            (this.glass = null),
                            (this.doorPart = null),
                            (this.carManager = null),
                            (this.bubbleWheely = null),
                            (this.bubbleManager = null),
                            (this.gold = null);
                    }),
                    Level2
                );
            })(Client.BasicLevel);
            Client.Level2 = Level2;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Level3 = (function (_super) {
                function Level3() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (_this.lamps = new Array()), (_this.lampOn1 = !0), (_this.lampOn2 = !1), (_this.lampOn3 = !0), (_this.secretOpen = !1), _this;
                }
                return (
                    __extends(Level3, _super),
                    (Level3.prototype.init = function () {
                        var sprite = Client.GameManager.instance.layerBackground.create(0, 0, "bgLevel3_1");
                        (sprite.cacheAsBitmap = !0),
                            ((sprite = Client.GameManager.instance.layerUpper.create(0, 0, "bgLevel3_2")).cacheAsBitmap = !0),
                            (Client.GameManager.instance.hero = new Client.Hero(this.game, 280, 480)),
                            this.addQuestWheel(3, 180, 463, Client.GameManager.instance.layerBackground),
                            this.addGround(),
                            this.addLamps(),
                            this.addSecretDoor(),
                            this.addSecretBook(),
                            (this.sMonitor = new Client.Lvl3Monitor(this.game)),
                            this.updateElements.push(this.sMonitor);
                    }),
                    (Level3.prototype.addSecretBook = function () {
                        (this.book = Client.GameManager.instance.layerBackground.create(448, 188, "level3", "secretBook instance 10000")),
                            this.book.anchor.set(0, 1),
                            (this.book.inputEnabled = !0),
                            (this.book.input.useHandCursor = !0),
                            this.book.events.onInputDown.addOnce(this.bookAnim, this),
                            this.book.events.onInputOver.add(this.bookOver, this),
                            this.book.events.onInputOut.add(this.bookOut, this);
                    }),
                    (Level3.prototype.bookOver = function () {
                        this.book.frameName = "secretBook instance 10001";
                    }),
                    (Level3.prototype.bookOut = function () {
                        this.book.frameName = "secretBook instance 10000";
                    }),
                    (Level3.prototype.bookAnim = function () {
                        this.book.inputEnabled = !1;
                        var glasses = this.game.make.sprite(74, -59, "level3", "darkGlassesAnim_mc instance 10000");
                        (glasses.alpha = 0.4),
                            Client.GameManager.instance.hero.graphicCar.addChild(glasses),
                            this.game.add.tween(glasses).to({ x: glasses.x + 11, y: glasses.y + 60, alpha: 1 }, 250, Phaser.Easing.Linear.None, !0, 0),
                            this.game.add.tween(this.book).to({ angle: -18 }, 150, Phaser.Easing.Linear.None, !0, 0).onComplete.addOnce(this.changeBookFrame, this),
                            this.addJalousie(),
                            this.sMonitor.openMonitor(),
                            Client.SoundManager.playSFX("s_lvl3_bookClick");
                    }),
                    (Level3.prototype.changeBookFrame = function () {
                        this.book.frameName = "secretBook instance 10002";
                    }),
                    (Level3.prototype.addJalousie = function () {
                        var jalousie, mask;
                        (mask = new Phaser.Graphics(this.game, 34, 91)).beginFill(0, 0.5),
                            mask.drawRect(0, 0, 120, 180),
                            mask.endFill(),
                            Client.GameManager.instance.layerBackground.addChild(mask),
                            (jalousie = Client.GameManager.instance.layerBackground.create(34, -89, "level3", "jalousie1 instance 10000")).scale.set(1.51, 1),
                            (jalousie.mask = mask),
                            this.game.add.tween(jalousie).to({ y: jalousie.y + 180 }, 3e3, "Linear", !0),
                            (mask = new Phaser.Graphics(this.game, 586, 156)).beginFill(0, 0.5),
                            mask.drawRect(0, 0, 80, 137),
                            mask.endFill(),
                            Client.GameManager.instance.layerBackground.addChild(mask),
                            ((jalousie = Client.GameManager.instance.layerBackground.create(586, -23, "level3", "jalousie1 instance 10000")).mask = mask),
                            this.game.add.tween(jalousie).to({ y: jalousie.y + 137 }, 3e3, "Linear", !0),
                            (mask = new Phaser.Graphics(this.game, 670, 156)).beginFill(0, 0.5),
                            mask.drawRect(0, 0, 88, 170),
                            mask.endFill(),
                            Client.GameManager.instance.layerBackground.addChild(mask),
                            (jalousie = Client.GameManager.instance.layerBackground.create(670, -23, "level3", "jalousie1 instance 10000")).scale.set(1.11, 1),
                            (jalousie.mask = mask),
                            this.game.add.tween(jalousie).to({ y: jalousie.y + 169 }, 3e3, "Linear", !0),
                            (mask = jalousie = null),
                            Client.SoundManager.playSFX("s_lvl3_closeWindows");
                    }),
                    (Level3.prototype.addProjectors = function () {
                        var projector, anim;
                        ((projector = new Phaser.Group(this.game)).x = 74),
                            (projector.y = 550),
                            Client.GameManager.instance.layerBackground.addChild(projector),
                            projector.create(0, 0, "level3", "projector instance 10000"),
                            (anim = projector.create(-32, -55, "level3", "projectorAnim instance 10000")).animations.add("move", Phaser.Animation.generateFrameNames("projectorAnim instance 1", 0, 29, "", 4), 30, !0),
                            anim.play("move"),
                            this.game.add.tween(projector).to({ y: 450 }, 100, "Linear", !0),
                            ((projector = new Phaser.Group(this.game)).x = 724),
                            (projector.y = 550),
                            projector.scale.set(-1, 1),
                            Client.GameManager.instance.layerBackground.addChild(projector),
                            projector.create(0, 0, "level3", "projector instance 10000"),
                            (anim = projector.create(-32, -55, "level3", "projectorAnim instance 10000")).animations.add("move", Phaser.Animation.generateFrameNames("projectorAnim instance 1", 0, 29, "", 4), 30, !0),
                            anim.play("move"),
                            this.game.add.tween(projector).to({ y: 450 }, 100, "Linear", !0).onComplete.addOnce(this.showMonitor, this),
                            (anim = projector = null);
                    }),
                    (Level3.prototype.showMonitor = function () {
                        var monitor = Client.GameManager.instance.layerUpper.create(400, 425, "monitor");
                        monitor.anchor.set(0.5, 1),
                            monitor.scale.set(1, 0),
                            (monitor.inputEnabled = !0),
                            this.game.add.tween(monitor.scale).to({ x: 1, y: 1 }, 300, Phaser.Easing.Bounce.InOut, !0),
                            (this.gamePlay = new Client.Lvl3GamePlay(this.game)),
                            this.updateElements.push(this.gamePlay);
                    }),
                    (Level3.prototype.addSecretDoor = function () {
                        var mask = new Phaser.Graphics(this.game, 519, 370);
                        mask.beginFill(0, 0.5),
                            mask.drawRect(0, 0, 40, 100),
                            mask.endFill(),
                            Client.GameManager.instance.layerBackground.addChild(mask),
                            this.addQuestCar(555, 430, Client.GameManager.instance.layerBackground),
                            this.questCar && (this.questCar.scale.set(-1, 1), (this.questCar.inputEnabled = !1), (this.questCar.mask = mask)),
                            (this.spiders = Client.GameManager.instance.layerBackground.create(529, 370, "level3", "spiders instance 10000")),
                            (this.spiders.mask = mask),
                            !(this.spiders.visible = !1) === this.questCarFounded && (this.spiders.visible = !0),
                            (this.sDoor = Client.GameManager.instance.layerBackground.create(525, 369, "level3", "secretDoor instance 10000")),
                            this.sDoor.animations.add("open", Phaser.Animation.generateFrameNames("secretDoor instance 1", 0, 3, "", 4), 30, !1);
                    }),
                    (Level3.prototype.addLamps = function () {
                        for (
                            var lamp,
                                pos = [
                                    [147, 369],
                                    [313, 369],
                                    [620, 371],
                                ],
                                i = 0;
                            i < 3;
                            i++
                        )
                            (lamp = Client.GameManager.instance.layerBackground.create(pos[i][0], pos[i][1], "level3", "lampBody instance 10000")).anchor.set(0.5),
                                (lamp.inputEnabled = !0),
                                (lamp.input.useHandCursor = !0),
                                lamp.events.onInputOver.add(this.lampOver, this),
                                lamp.events.onInputOut.add(this.lampOut, this),
                                lamp.events.onInputDown.add(this.lampDown, this),
                                (lamp.name = "lamp" + i),
                                1 === i && (lamp.frameName = "lampBody instance 10002"),
                                this.lamps.push(lamp);
                    }),
                    (Level3.prototype.lampOver = function (lamp) {
                        "lamp0" === lamp.name
                            ? this.lampOn1
                                ? (lamp.frameName = "lampBody instance 10001")
                                : (lamp.frameName = "lampBody instance 10003")
                            : "lamp1" === lamp.name && (this.lampOn2 ? (lamp.frameName = "lampBody instance 10001") : (lamp.frameName = "lampBody instance 10003")),
                            "lamp2" === lamp.name && (this.lampOn3 ? (lamp.frameName = "lampBody instance 10001") : (lamp.frameName = "lampBody instance 10003"));
                    }),
                    (Level3.prototype.lampOut = function (lamp) {
                        "lamp0" === lamp.name
                            ? this.lampOn1
                                ? (lamp.frameName = "lampBody instance 10000")
                                : (lamp.frameName = "lampBody instance 10002")
                            : "lamp1" === lamp.name && (this.lampOn2 ? (lamp.frameName = "lampBody instance 10000") : (lamp.frameName = "lampBody instance 10002")),
                            "lamp2" === lamp.name && (this.lampOn3 ? (lamp.frameName = "lampBody instance 10000") : (lamp.frameName = "lampBody instance 10002"));
                    }),
                    (Level3.prototype.lampDown = function (lamp) {
                        switch (lamp.name) {
                            case "lamp0":
                                (this.lampOn1 = !this.lampOn1), this.SwitchLampState(this.lampOn1, this.lamps[0]), (this.lampOn2 = !this.lampOn2), this.SwitchLampState(this.lampOn2, this.lamps[1]);
                                break;
                            case "lamp1":
                                (this.lampOn1 = !this.lampOn1),
                                    this.SwitchLampState(this.lampOn1, this.lamps[0]),
                                    (this.lampOn2 = !this.lampOn2),
                                    this.SwitchLampState(this.lampOn2, this.lamps[1]),
                                    (this.lampOn3 = !this.lampOn3),
                                    this.SwitchLampState(this.lampOn3, this.lamps[2]);
                                break;
                            case "lamp2":
                                (this.lampOn3 = !this.lampOn3), this.SwitchLampState(this.lampOn3, this.lamps[2]), (this.lampOn2 = !this.lampOn2), this.SwitchLampState(this.lampOn2, this.lamps[1]);
                        }
                        this.lampOn1 &&
                            this.lampOn2 &&
                            this.lampOn3 &&
                            !this.secretOpen &&
                            ((this.secretOpen = !0), this.questCarFounded ? (this.spiders.visible = !0) : this.questCar && ((this.questCar.inputEnabled = !0), (this.questCar.input.useHandCursor = !0)), this.sDoor.play("open"));
                    }),
                    (Level3.prototype.SwitchLampState = function (state, lampMc) {
                        lampMc.frameName = state ? "lampBody instance 10000" : "lampBody instance 10002";
                    }),
                    (Level3.prototype.showQuestCar = function () {}),
                    (Level3.prototype.addGround = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 400, 540, 0);
                        ground.setRectangle(800, 20), (ground = new Phaser.Physics.Box2D.Body(this.game, null, 525, 470, 0)).setRectangle(20, 120), (ground = null);
                    }),
                    (Level3.prototype.free = function () {
                        _super.prototype.free.call(this), (this.lamps = []), (this.lamps = null), (this.sDoor = null), (this.spiders = null), (this.book = null), (this.sMonitor = null), (this.gamePlay = null);
                    }),
                    Level3
                );
            })(Client.BasicLevel);
            Client.Level3 = Level3;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Level4 = (function (_super) {
                function Level4() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (_this.contactStopCount = 0), (_this.contactAfraidCount = 0), (_this.contactBumpCount = 0), (_this.startSpawningBubbles = !1), (_this.spawningBubblesCounter = 0), _this;
                }
                return (
                    __extends(Level4, _super),
                    (Level4.prototype.init = function () {
                        this.bubbles = new Array();
                        var sprite = Client.GameManager.instance.layerBackground.create(0, 0, "bgLevel4_1");
                        (sprite.cacheAsBitmap = !0),
                            (sprite = Client.GameManager.instance.layerBackground.create(638, 370, "level4")).animations.add("anim", Phaser.Animation.generateFrameNames("betonMeshalka instance 1", 0, 32, "", 4), 40, !0),
                            sprite.animations.play("anim"),
                            (sprite.cacheAsBitmap = !0),
                            this.addQuestWheel(4, 772, 268, Client.GameManager.instance.layerBackground),
                            ((sprite = Client.GameManager.instance.layerUpper.create(0, 600, "level4", "water instance 10000")).cacheAsBitmap = !0),
                            (sprite.anchor.y = 1),
                            (sprite = null),
                            (Client.GameManager.instance.hero = new Client.Hero(this.game, 65, 395)),
                            Client.GameManager.instance.hero.setKeepAngle(!1),
                            this.updateElements.push(new Client.Lvl4CarKran(this.game)),
                            this.updateElements.push(new Client.Lvl4Trap(this.game)),
                            this.updateElements.push(new Client.Lvl4Platform(this.game, 161, 233)),
                            this.updateElements.push(new Client.Lvl4Platform(this.game, 398, 233)),
                            this.updateElements.push(new Client.Lvl4Platform(this.game, 241, 456)),
                            this.updateElements.push(new Client.Lvl4Platform(this.game, 375, 456)),
                            this.updateElements.push(new Client.Lvl4Platform(this.game, 509, 456)),
                            this.updateElements.push(new Client.Finish(this.game, 14, 172)),
                            (this.trampoline = new Client.Lvl4Trampoline(this.game)),
                            this.updateElements.push(this.trampoline),
                            this.addGround(),
                            this.addTrigers();
                        var water = new Client.WaterRect(this.game);
                        water.addRectangle(367, 639, 436, 194), water.setOffsetController(), this.updateElements.push(water), (water = null);
                    }),
                    (Level4.prototype.customAction = function (value) {
                        void 0 === value && (value = 0), 1 === value && (this.trampoline.trapClosed = !0);
                    }),
                    (Level4.prototype.addGround = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 47, 564, 0);
                        ground.setRectangle(242, 244),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, -50, 383, 0)).setRectangle(100, 100),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 790, 312, 0)).setRectangle(100, 718),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, -61, 245, 0)).setRectangle(300, 52),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, -265, 179, 0)).setRectangle(100, 100),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 102, 270, 0)).setRectangle(88, 16),
                            (ground.angle = 34),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 524, 239, 0)).setRectangle(114, 40),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 661, 621, 0)).setRectangle(159, 173),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 387, 721, 0)).setRectangle(784, 28),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 535, 51, 0)).setRectangle(100, 148),
                            (ground = null);
                    }),
                    (Level4.prototype.addTrigers = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 718, 400, 0);
                        ground.setRectangle(17, 100),
                            (ground.sensor = !0),
                            ground.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, this.contactStop, this),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 376, 498, 0)).setRectangle(410, 26),
                            (ground.sensor = !0),
                            ground.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, this.contactAfraid, this),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 370, 571, 0)).setRectangle(410, 26),
                            (ground.sensor = !0),
                            ground.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, this.contactBump, this),
                            (ground = null);
                    }),
                    (Level4.prototype.contactStop = function () {
                        0 === this.contactStopCount && ((this.contactStopCount = 1), Client.GameManager.instance.hero.setEnableMotor(!1));
                    }),
                    (Level4.prototype.contactAfraid = function () {
                        0 === this.contactAfraidCount && ((this.contactAfraidCount = 1), (Client.GameManager.instance.hero.currEyesState = Client.EyesState.afraid));
                    }),
                    (Level4.prototype.contactBump = function () {
                        if (0 === this.contactBumpCount) {
                            (this.contactBumpCount = 1), (Client.GameManager.instance.hero.currEyesState = Client.EyesState.bumpForEver);
                            var splash_1 = Client.GameManager.instance.layerUpper.create(Client.GameManager.instance.hero.bodyBase.x, 485, "wheely");
                            (splash_1.anchor.x = 0.5),
                                splash_1.animations.add("anim", Phaser.Animation.generateFrameNames("splash_mc instance 1", 0, 15, "", 4), 30, !1).onComplete.addOnce(function () {
                                    splash_1.destroy(), (splash_1 = null);
                                }, this),
                                splash_1.animations.play("anim"),
                                (this.startSpawningBubbles = !0),
                                Client.SoundManager.playSFX("s_wheelyDrowned", !0),
                                Client.LevelBuilder.instance.levelFailed(100);
                        }
                    }),
                    (Level4.prototype.update = function () {
                        _super.prototype.update.call(this),
                            1 === this.contactBumpCount && ((this.contactBumpCount = 2), (Client.GameManager.instance.hero.bodyBase.mass = 6)),
                            !0 === this.startSpawningBubbles &&
                                ((this.spawningBubblesCounter += 1),
                                2 === this.spawningBubblesCounter &&
                                    ((this.spawningBubblesCounter = 0),
                                    this.spawnBubble(Client.GameManager.instance.hero.bodyBase.x + Client.Tools.random(-40, 40), Client.GameManager.instance.hero.bodyBase.y + Client.Tools.random(-30, 10), 0.7 + 0.5 * Math.random())));
                    }),
                    (Level4.prototype.spawnBubble = function (x, y, scale) {
                        for (var i = 0; i < this.bubbles.length; i++)
                            if (!1 === this.bubbles[i].visible) return (this.bubbles[i].visible = !0), (this.bubbles[i].x = x), (this.bubbles[i].y = y), this.bubbles[i].scale.setTo(scale), void this.bubbles[i].animations.play("anim");
                        var bubble = Client.GameManager.instance.layerUpper.create(x, y, "wheely");
                        bubble.animations.add("anim", Phaser.Animation.generateFrameNames("bubbleWaterPart instance 1", 0, 9, "", 4), 30, !1).onComplete.add(this.bubbleComplete, this),
                            bubble.animations.play("anim"),
                            bubble.scale.setTo(scale),
                            this.bubbles.push(bubble),
                            (bubble = null);
                    }),
                    (Level4.prototype.bubbleComplete = function (bubble, data) {
                        bubble.visible = !1;
                    }),
                    (Level4.prototype.free = function () {
                        _super.prototype.free.call(this), (this.trampoline = null), (this.bubbles = []), (this.bubbles = null);
                    }),
                    Level4
                );
            })(Client.BasicLevel);
            Client.Level4 = Level4;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Level5 = (function (_super) {
                function Level5() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (_this.engineWorking = !1), (_this.contactStopCount = 0), (_this.contactFloorCount = 0), (_this.contactFloorLiftCount = 0), _this;
                }
                return (
                    __extends(Level5, _super),
                    (Level5.prototype.init = function () {
                        var sprite = Client.GameManager.instance.layerBackground.create(0, 0, "bgLevel5_1");
                        (sprite.cacheAsBitmap = !0),
                            (this.blueWire2 = Client.GameManager.instance.layerBackground.create(70, 90, "level5", "blueWire2 instance 10000")),
                            (this.blueWire2.cacheAsBitmap = !0),
                            (this.purpleWire2 = Client.GameManager.instance.layerBackground.create(264, 368, "level5", "purpleWire2 instance 10000")),
                            (this.purpleWire2.cacheAsBitmap = !0),
                            (this.purpleElectron2 = Client.GameManager.instance.layerBackground.create(264, 367, "level5")),
                            this.purpleElectron2.animations.add("anim", Phaser.Animation.generateFrameNames("purpleElectron2 instance 1", 0, 40, "", 4), 30, !0),
                            (this.purpleElectron2.visible = !1),
                            this.updateElements.push(new Client.Lvl5Oil(this.game)),
                            (sprite = Client.GameManager.instance.layerBackground.create(700, 514, "level5", "engineBak instance 10000")).anchor.setTo(0.5),
                            (this.engine = new Client.Lvl5Engine(this.game)),
                            Client.GameManager.instance.layerBackground.addChild(this.engine),
                            (this.door = new Client.Lvl5Door(this.game)),
                            this.updateElements.push(this.door),
                            (this.lamp1 = new Client.Lvl5Lamp(this.game, 748, 145, 1, 6)),
                            Client.GameManager.instance.layerBackground.addChild(this.lamp1),
                            (this.lamp2 = new Client.Lvl5Lamp(this.game, 564, 145, 1, 5)),
                            Client.GameManager.instance.layerBackground.addChild(this.lamp2),
                            (this.lamp3 = new Client.Lvl5Lamp(this.game, 118, 150, 2, 4)),
                            Client.GameManager.instance.layerBackground.addChild(this.lamp3),
                            (sprite = Client.GameManager.instance.layerUpper.create(10, 272, "level5")).animations
                                .add("anim1", Phaser.Animation.generateFrameNames("HotelNeon instance 1", 0, 23, "", 4), 30, !1)
                                .onComplete.add(function (sprite2) {
                                    sprite2.animations.play("anim2"), Client.SoundManager.playSFX("s_lvl4_signboard");
                                }, this),
                            sprite.animations.add("anim2", Phaser.Animation.generateFrameNames("HotelNeon instance 1", 24, 69, "", 4), 30, !1).onComplete.add(function (sprite2) {
                                sprite2.animations.play("anim1");
                            }, this),
                            sprite.animations.play("anim1"),
                            (sprite.cacheAsBitmap = !0),
                            ((sprite = Client.GameManager.instance.layerUpper.create(0, 0, "bgLevel5_2")).cacheAsBitmap = !0),
                            (this.greenWire = Client.GameManager.instance.layerUpper.create(112, 544, "level5", "greenWire instance 10000")),
                            (this.greenWire.cacheAsBitmap = !0),
                            (this.purpleWire1 = Client.GameManager.instance.layerUpper.create(232, 368, "level5", "purpleWire1 instance 10000")),
                            (this.purpleWire1.cacheAsBitmap = !0),
                            (this.purpleElectron1 = Client.GameManager.instance.layerUpper.create(231, 366, "level5")),
                            this.purpleElectron1.animations.add("anim", Phaser.Animation.generateFrameNames("purpleElectron1 instance 1", 0, 40, "", 4), 30, !0),
                            (this.purpleElectron1.visible = !1),
                            (this.blueWire = Client.GameManager.instance.layerUpper.create(449, 492, "level5", "blueWire instance 10000")),
                            (this.blueWire.cacheAsBitmap = !0),
                            (this.blueWire1 = Client.GameManager.instance.layerUpper.create(481, 223, "level5", "blueWire1 instance 10000")),
                            (this.blueWire1.cacheAsBitmap = !0),
                            (this.changeVoltage = new Client.Lvl5ChangeVoltage(this.game)),
                            Client.GameManager.instance.layerUpper.addChild(this.changeVoltage),
                            (this.lift = new Client.Lvl5Lift(this.game)),
                            this.updateElements.push(this.lift),
                            (Client.GameManager.instance.hero = new Client.Hero(this.game, 70, 517)),
                            (this.carBandit = new Client.Lvl5CarBandit(this.game)),
                            this.updateElements.push(this.carBandit),
                            this.addQuestWheel(5, 70, 340, Client.GameManager.instance.layerUpper, -1, 0.95),
                            (this.questCarBox = Client.GameManager.instance.layerBackground.create(200, 537, "level5", "questCarBox instance 10000")),
                            this.game.physics.box2d.enable(this.questCarBox),
                            this.questCarBox.body.setRectangle(48, 34, 6, 3),
                            this.questCarBox.body.setCollisionMask(~Client.FilterGroups.IGNORE_CAR),
                            this.questCarBox.body.data.SetUserData("DragBody"),
                            (this.questCarBox.body.fixedRotation = !0),
                            (this.questCarBox.inputEnabled = !0),
                            (this.questCarBox.input.useHandCursor = !0),
                            this.questCarBox.events.onInputOut.add(this.questCarBoxOut, this),
                            this.questCarBox.events.onInputOver.add(this.questCarBoxOver, this),
                            this.questCarBox.events.onInputDown.add(this.questCarBoxDown, this),
                            (this.questCarBox.hitArea = new Phaser.Rectangle(-18, -14, 48, 34)),
                            this.questCarBox.animations.add("anim", Phaser.Animation.generateFrameNames("questCarBox instance 1", 2, 7, "", 4), 30, !1).onComplete.addOnce(this.questBoxAnimComp, this),
                            this.questCarBox.animations.add("anim2", Phaser.Animation.generateFrameNames("questCarBox instance 1", 8, 17, "", 4), 30, !1),
                            (sprite = null),
                            this.addGround(),
                            this.addTrigers(),
                            this.game.input.onDown.add(this.mouseDragStart, this),
                            this.game.input.addMoveCallback(this.mouseDragMove, this),
                            this.game.input.onUp.add(this.mouseDragEnd, this),
                            (this.bodyFloor = new Phaser.Physics.Box2D.Body(this.game, null, 328, 239, 0)),
                            this.bodyFloor.setRectangle(133, 15),
                            this.bodyFloor.setCollisionMask(~Client.FilterGroups.IGNORE_CAR),
                            this.updateElements.push(new Client.Finish(this.game, 778, 190));
                    }),
                    (Level5.prototype.questBoxAnimComp = function () {
                        this.questCarBox.animations.play("anim2"), this.addQuestCar(7, 6, this.questCarBox, -1, 0, 0.8);
                    }),
                    (Level5.prototype.questCarBoxDown = function () {
                        Client.SoundManager.playSFX("s_lvl4_startDragBox");
                    }),
                    (Level5.prototype.clickQuestCar = function () {
                        _super.prototype.clickQuestCar.call(this), this.questCarBox.body.destroy();
                    }),
                    (Level5.prototype.mouseDragStart = function () {
                        this.game.physics.box2d.mouseDragStart(this.game.input.activePointer.position), this.game.physics.box2d.mouseJoint && "DragBody" !== this.game.physics.box2d.mouseJoint.GetBodyB().GetUserData() && this.mouseDragEnd();
                    }),
                    (Level5.prototype.mouseDragMove = function () {
                        this.game.physics.box2d.mouseJoint && "DragBody" === this.game.physics.box2d.mouseJoint.GetBodyB().GetUserData() && this.game.physics.box2d.mouseDragMove(this.game.input.activePointer.position);
                    }),
                    (Level5.prototype.mouseDragEnd = function () {
                        this.game.physics.box2d.mouseDragEnd();
                    }),
                    (Level5.prototype.questCarBoxOut = function () {
                        this.questCarBox.frameName = "questCarBox instance 10000";
                    }),
                    (Level5.prototype.questCarBoxOver = function () {
                        this.questCarBox.frameName = "questCarBox instance 10001";
                    }),
                    (Level5.prototype.customAction = function (value) {
                        if ((void 0 === value && (value = 0), 1 === value)) this.engine.haveOil = !0;
                        else if (2 === value)
                            !0 === this.engineWorking &&
                                (0 === this.changeVoltage.angle
                                    ? (Client.SoundManager.playSFX("s_lvl4_electricSound"),
                                      Client.SoundManager.playSFX("s_lvl4_liftIsOn"),
                                      this.lift.activateBtn1(),
                                      this.lift.activateBtn2(),
                                      this.lamp1.deactivate(),
                                      this.lamp2.deactivate(),
                                      this.lamp3.deactivate(),
                                      (this.purpleWire1.frameName = "purpleWire1 instance 10001"),
                                      (this.purpleElectron1.visible = !0),
                                      this.purpleElectron1.animations.play("anim"),
                                      (this.blueWire.frameName = "blueWire instance 10001"),
                                      (this.blueWire1.frameName = "blueWire1 instance 10000"),
                                      (this.blueWire2.frameName = "blueWire2 instance 10000"),
                                      (this.purpleWire2.frameName = "purpleWire2 instance 10001"),
                                      (this.purpleElectron2.visible = !0),
                                      this.purpleElectron2.animations.play("anim"),
                                      this.carBandit.canLamps(!1))
                                    : 90 === this.changeVoltage.angle
                                    ? (this.lift.deactivateBtn1(),
                                      this.lift.deactivateBtn2(),
                                      this.lift.stopMove(),
                                      (this.purpleWire1.frameName = "purpleWire1 instance 10000"),
                                      (this.purpleElectron1.visible = !1),
                                      this.purpleElectron1.animations.stop("anim", !0),
                                      (this.blueWire.frameName = "blueWire instance 10000"),
                                      (this.purpleWire2.frameName = "purpleWire2 instance 10000"),
                                      (this.purpleElectron2.visible = !1),
                                      this.purpleElectron2.animations.stop("anim", !0))
                                    : -90 === this.changeVoltage.angle &&
                                      (Client.SoundManager.playSFX("s_lvl4_electricSound"),
                                      this.lamp1.activate(),
                                      this.lamp2.activate(),
                                      this.lamp3.activate(),
                                      (this.blueWire.frameName = "blueWire instance 10001"),
                                      (this.blueWire1.frameName = "blueWire1 instance 10001"),
                                      (this.blueWire2.frameName = "blueWire2 instance 10001"),
                                      this.carBandit.canLamps(!0)));
                        else if (3 === value) {
                            (this.engineWorking = !0), this.customAction(2), (this.greenWire.frameName = "greenWire instance 10001");
                            var sprite = Client.GameManager.instance.layerUpper.create(99, 545, "level5");
                            sprite.animations.add("anim", Phaser.Animation.generateFrameNames("Voltage instance 1", 0, 19, "", 4), 30, !0),
                                sprite.animations.play("anim"),
                                (sprite.cacheAsBitmap = !0),
                                Client.SoundManager.playSFX("s_lvl4_wireElectric"),
                                (sprite = Client.GameManager.instance.layerUpper.create(118, 542, "level5")).animations.add("anim", Phaser.Animation.generateFrameNames("greenElectron instance 1", 0, 66, "", 4), 30, !0),
                                sprite.animations.play("anim"),
                                (sprite.cacheAsBitmap = !0),
                                (sprite = null),
                                Client.GameManager.instance.hero.bodyBase.x < 290 &&
                                    400 < Client.GameManager.instance.hero.bodyBase.y &&
                                    (Client.GameManager.instance.hero.setEnableMotor(!1),
                                    Client.GameManager.instance.hero.addShock(),
                                    (Client.GameManager.instance.hero.currEyesState = Client.EyesState.bumpForEver),
                                    Client.LevelBuilder.instance.levelFailed(80));
                        } else
                            4 === value
                                ? (this.carBandit.playAmazing(this.lamp3.x), Client.SoundManager.playSFX("s_lvl4_lampOff"), Client.SoundManager.playSFX("s_lvl4_surprise"))
                                : 5 === value
                                ? (this.carBandit.playAmazing(this.lamp2.x), Client.SoundManager.playSFX("s_lvl4_lampOff"), Client.SoundManager.playSFX("s_lvl4_surprise"))
                                : 6 === value
                                ? (this.carBandit.playAmazing(this.lamp1.x), Client.SoundManager.playSFX("s_lvl4_lampOff"), Client.SoundManager.playSFX("s_lvl4_surprise"))
                                : 7 === value
                                ? this.door.open()
                                : 8 === value
                                ? this.carBandit.lockOpened()
                                : 9 === value
                                ? this.carBandit.checkHero()
                                : 14 === value
                                ? (this.lamp3.activate(), Client.SoundManager.playSFX("s_lvl4_lampOn"))
                                : 15 === value
                                ? (this.lamp2.activate(), Client.SoundManager.playSFX("s_lvl4_lampOn"))
                                : 16 === value && (this.lamp1.activate(), Client.SoundManager.playSFX("s_lvl4_lampOn"));
                    }),
                    (Level5.prototype.addGround = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 134, 575, 0);
                        ground.setRectangle(258, 28),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 699, 390, 0)).setRectangle(608, 318),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, -50, 246, 0)).setRectangle(100, 622),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 126, 349, 0)).setRectangle(278, 236),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 70, 166, 0)).setRectangle(28, 193),
                            (ground.angle = -16),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 1e3, 181, 0)).setRectangle(20, 100),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 323, 596, 0)).setRectangle(145, 43),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 258, 563, 0)).setRectangle(17, 1),
                            (ground.angle = -43),
                            (ground = null);
                    }),
                    (Level5.prototype.addTrigers = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 386, 504, 0);
                        ground.setRectangle(12, 100),
                            (ground.sensor = !0),
                            ground.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, this.contactStop, this),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 329, 155, 0)).setRectangle(100, 20),
                            (ground.sensor = !0),
                            ground.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, this.contactFloor, this),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 329, 230, 0)).setRectangle(100, 20),
                            (ground.sensor = !0),
                            ground.setBodyContactCallback(this.questCarBox.body, this.contactFloorLift, this),
                            (ground = null);
                    }),
                    (Level5.prototype.contactStop = function () {
                        0 === this.contactStopCount && ((this.contactStopCount = 1), Client.GameManager.instance.hero.setEnableMotor(!1));
                    }),
                    (Level5.prototype.contactFloor = function () {
                        0 === this.contactFloorCount && (this.contactFloorCount = 1);
                    }),
                    (Level5.prototype.contactFloorLift = function () {
                        0 === this.contactFloorLiftCount && (this.contactFloorLiftCount = 1);
                    }),
                    (Level5.prototype.update = function () {
                        _super.prototype.update.call(this),
                            1 === this.contactFloorCount && ((this.contactFloorCount = 2), this.bodyFloor.setCollisionMask(~Client.FilterGroups.DEFAULT)),
                            1 === this.contactFloorLiftCount
                                ? ((this.contactFloorLiftCount = 2), (this.questCarBox.inputEnabled = !1), this.questCarBox.animations.play("anim"), Client.SoundManager.playSFX("s_lvl4_boxDestroy"), (this.questCarBox.body.sensor = !0))
                                : 2 === this.contactFloorLiftCount &&
                                  450 < this.questCarBox.body.y &&
                                  ((this.contactFloorLiftCount = 3), (this.questCarBox.body.sensor = !1), this.questCarBox.body.data.SetUserData(null), (this.questCarBox.body.restitution = 0.3));
                    }),
                    (Level5.prototype.free = function () {
                        _super.prototype.free.call(this),
                            (this.questCar = null),
                            (this.door = null),
                            (this.changeVoltage = null),
                            (this.lift = null),
                            (this.lamp1 = null),
                            (this.lamp2 = null),
                            (this.lamp3 = null),
                            (this.bodyFloor = null),
                            (this.engine = null),
                            (this.greenWire = null),
                            (this.purpleWire1 = null),
                            (this.purpleElectron1 = null),
                            (this.blueWire = null),
                            (this.blueWire1 = null),
                            (this.blueWire2 = null),
                            (this.purpleWire2 = null),
                            (this.purpleElectron2 = null),
                            (this.carBandit = null);
                    }),
                    Level5
                );
            })(Client.BasicLevel);
            Client.Level5 = Level5;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Level6 = (function (_super) {
                function Level6() {
                    return (null !== _super && _super.apply(this, arguments)) || this;
                }
                return (
                    __extends(Level6, _super),
                    (Level6.prototype.init = function () {
                        var sprite = Client.GameManager.instance.layerBackground.create(0, 0, "bgLevel6_1");
                        (sprite.cacheAsBitmap = !0),
                            ((sprite = Client.GameManager.instance.layerUpper.create(0, 163, "bgLevel6_2")).cacheAsBitmap = !0),
                            (Client.GameManager.instance.hero = new Client.Hero(this.game, 73, 400)),
                            this.addQuestWheel(6, 188, 64, Client.GameManager.instance.layerBackground),
                            this.addGround(),
                            (this.owl = new Client.Lvl6Owl(this.game)),
                            this.updateElements.push(this.owl);
                        var wood = new Client.Level6Wood(this.game);
                        this.updateElements.push(wood),
                            (this.alert = new Client.Lvl6Alert(this.game)),
                            this.updateElements.push(this.alert),
                            (this.door = new Client.Lvl6Door(this.game)),
                            this.updateElements.push(this.door),
                            (this.car = new Client.Lvl6Car(this.game)),
                            this.updateElements.push(this.car);
                        var eSwitch = new Client.Lvl6ElectricSwitch(this.game);
                        this.updateElements.push(eSwitch);
                        var aSpeaker = new Client.Lvl6AudioSpeaker(this.game);
                        this.updateElements.push(aSpeaker);
                        var clock = new Client.Lvl6Clock(this.game);
                        this.updateElements.push(clock);
                        var vase = new Client.Lvl6Vase(this.game);
                        this.updateElements.push(vase),
                            (this.bRoom = new Client.Lvl6BottomRoom(this.game)),
                            this.updateElements.push(this.bRoom),
                            (this.fire = new Client.Lvl6FirePlace(this.game)),
                            this.updateElements.push(this.fire),
                            (this.wires = new Client.Lvl6Wires(this.game)),
                            this.updateElements.push(this.wires),
                            this.game.input.onDown.add(this.mouseDragStart, this),
                            this.game.input.addMoveCallback(this.mouseDragMove, this),
                            this.game.input.onUp.add(this.mouseDragEnd, this),
                            (Client.LevelManager.instance.currentRobberyScene = 1);
                    }),
                    (Level6.prototype.mouseDragStart = function () {
                        this.game.physics.box2d.mouseDragStart(this.game.input.activePointer.position), this.game.physics.box2d.mouseJoint && "DragBody" !== this.game.physics.box2d.mouseJoint.GetBodyB().GetUserData() && this.mouseDragEnd();
                    }),
                    (Level6.prototype.mouseDragMove = function () {
                        this.game.physics.box2d.mouseJoint && "DragBody" === this.game.physics.box2d.mouseJoint.GetBodyB().GetUserData() && this.game.physics.box2d.mouseDragMove(this.game.input.activePointer.position);
                    }),
                    (Level6.prototype.mouseDragEnd = function () {
                        this.game.physics.box2d.mouseDragEnd();
                    }),
                    (Level6.prototype.update = function () {
                        _super.prototype.update.call(this);
                    }),
                    (Level6.prototype.addGround = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 500, 461, 0);
                        ground.setRectangle(1e3, 37),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 321, 586, 0)).setRectangle(523, 20),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 55, 532, 0)).setRectangle(20, 127),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 595, 532, 0)).setRectangle(20, 127),
                            (ground = null);
                    }),
                    (Level6.prototype.free = function () {
                        _super.prototype.free.call(this), (this.bRoom = null), (this.fire = null), (this.wires = null), (this.door = null), (this.alert = null), (this.car = null), (this.owl = null);
                    }),
                    Level6
                );
            })(Client.BasicLevel);
            Client.Level6 = Level6;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Level7 = (function (_super) {
                function Level7() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (_this.wheelyOnPlace = !1), _this;
                }
                return (
                    __extends(Level7, _super),
                    (Level7.prototype.init = function () {
                        var sprite = Client.GameManager.instance.layerBackground.create(0, 0, "bgLevel3_1");
                        (sprite.cacheAsBitmap = !0),
                            ((sprite = Client.GameManager.instance.layerUpper.create(0, 0, "bgLevel3_2")).cacheAsBitmap = !0),
                            (Client.GameManager.instance.hero = new Client.Hero(this.game, 100, 480)),
                            Client.GameManager.instance.hero.setEnableMotor(!0),
                            Client.GameManager.instance.hero.setClickable(!1),
                            this.addQuestWheel(7, 559, 486, Client.GameManager.instance.layerBackground),
                            this.addGround(),
                            this.addSecretBook(),
                            this.addLamps(),
                            (this.sMonitor = new Client.Lvl3Monitor(this.game)),
                            this.updateElements.push(this.sMonitor);
                    }),
                    (Level7.prototype.addSecretBook = function () {
                        (this.book = Client.GameManager.instance.layerBackground.create(448, 188, "level3", "secretBook instance 10000")),
                            this.book.anchor.set(0, 1),
                            (this.book.inputEnabled = !0),
                            (this.book.input.useHandCursor = !0),
                            this.book.events.onInputDown.addOnce(this.bookAnim, this),
                            this.book.events.onInputOver.add(this.bookOver, this),
                            this.book.events.onInputOut.add(this.bookOut, this);
                    }),
                    (Level7.prototype.bookOver = function () {
                        this.book.frameName = "secretBook instance 10001";
                    }),
                    (Level7.prototype.bookOut = function () {
                        this.book.frameName = "secretBook instance 10000";
                    }),
                    (Level7.prototype.bookAnim = function () {
                        this.book.inputEnabled = !1;
                        var glasses = this.game.make.sprite(74, -59, "level3", "darkGlassesAnim_mc instance 10000");
                        (glasses.alpha = 0.4),
                            Client.GameManager.instance.hero.graphicCar.addChild(glasses),
                            this.game.add.tween(glasses).to({ x: glasses.x + 11, y: glasses.y + 60, alpha: 1 }, 250, Phaser.Easing.Linear.None, !0, 0),
                            this.game.add.tween(this.book).to({ angle: -18 }, 150, Phaser.Easing.Linear.None, !0, 0).onComplete.addOnce(this.changeBookFrame, this),
                            this.addJalousie(),
                            this.sMonitor.openMonitor(),
                            Client.SoundManager.playSFX("s_lvl3_bookClick");
                    }),
                    (Level7.prototype.changeBookFrame = function () {
                        this.book.frameName = "secretBook instance 10002";
                    }),
                    (Level7.prototype.addJalousie = function () {
                        var jalousie, mask;
                        (mask = new Phaser.Graphics(this.game, 34, 91)).beginFill(0, 0.5),
                            mask.drawRect(0, 0, 120, 180),
                            mask.endFill(),
                            Client.GameManager.instance.layerBackground.addChild(mask),
                            (jalousie = Client.GameManager.instance.layerBackground.create(34, -89, "level3", "jalousie1 instance 10000")).scale.set(1.51, 1),
                            (jalousie.mask = mask),
                            this.game.add.tween(jalousie).to({ y: jalousie.y + 180 }, 3e3, "Linear", !0),
                            (mask = new Phaser.Graphics(this.game, 586, 156)).beginFill(0, 0.5),
                            mask.drawRect(0, 0, 80, 137),
                            mask.endFill(),
                            Client.GameManager.instance.layerBackground.addChild(mask),
                            ((jalousie = Client.GameManager.instance.layerBackground.create(586, -23, "level3", "jalousie1 instance 10000")).mask = mask),
                            this.game.add.tween(jalousie).to({ y: jalousie.y + 137 }, 3e3, "Linear", !0),
                            (mask = new Phaser.Graphics(this.game, 670, 156)).beginFill(0, 0.5),
                            mask.drawRect(0, 0, 88, 170),
                            mask.endFill(),
                            Client.GameManager.instance.layerBackground.addChild(mask),
                            (jalousie = Client.GameManager.instance.layerBackground.create(670, -23, "level3", "jalousie1 instance 10000")).scale.set(1.11, 1),
                            (jalousie.mask = mask),
                            this.game.add.tween(jalousie).to({ y: jalousie.y + 169 }, 3e3, "Linear", !0),
                            (mask = jalousie = null),
                            Client.SoundManager.playSFX("s_lvl3_closeWindows");
                    }),
                    (Level7.prototype.addProjectors = function () {
                        var projector, anim;
                        ((projector = new Phaser.Group(this.game)).x = 74),
                            (projector.y = 550),
                            Client.GameManager.instance.layerBackground.addChild(projector),
                            projector.create(0, 0, "level3", "projector instance 10000"),
                            (anim = projector.create(-32, -55, "level3", "projectorAnim instance 10000")).animations.add("move", Phaser.Animation.generateFrameNames("projectorAnim instance 1", 0, 29, "", 4), 30, !0),
                            anim.play("move"),
                            this.game.add.tween(projector).to({ y: 450 }, 100, "Linear", !0),
                            ((projector = new Phaser.Group(this.game)).x = 724),
                            (projector.y = 550),
                            projector.scale.set(-1, 1),
                            Client.GameManager.instance.layerBackground.addChild(projector),
                            projector.create(0, 0, "level3", "projector instance 10000"),
                            (anim = projector.create(-32, -55, "level3", "projectorAnim instance 10000")).animations.add("move", Phaser.Animation.generateFrameNames("projectorAnim instance 1", 0, 29, "", 4), 30, !0),
                            anim.play("move"),
                            this.game.add.tween(projector).to({ y: 450 }, 100, "Linear", !0).onComplete.addOnce(this.showMonitor, this),
                            (anim = projector = null);
                    }),
                    (Level7.prototype.showMonitor = function () {
                        var monitor = Client.GameManager.instance.layerUpper.create(400, 425, "monitor");
                        monitor.anchor.set(0.5, 1),
                            monitor.scale.set(1, 0),
                            (monitor.inputEnabled = !0),
                            this.game.add.tween(monitor.scale).to({ x: 1, y: 1 }, 300, Phaser.Easing.Bounce.InOut, !0),
                            (this.photo = new Client.Lvl7Photo(this.game)),
                            this.updateElements.push(this.photo),
                            (this.map = new Client.Lvl7Map(this.game)),
                            this.updateElements.push(this.map);
                        var photo = Client.GameManager.instance.layerUpper.create(Client.GameManager.instance.hero.bodyBase.x - 40, Client.GameManager.instance.hero.bodyBase.y - 120, "level7", "photoAnimFake instance 10000");
                        photo.animations.add("anim", Phaser.Animation.generateFrameNames("photoAnimFake instance 1", 0, 14, "", 4), 30, !1).onComplete.add(function () {
                            this.photo.showPhoto();
                        }, this),
                            photo.play("anim");
                    }),
                    (Level7.prototype.SwitchLampState = function (state, lampMc) {
                        lampMc.frameName = state ? "lampBody instance 10000" : "lampBody instance 10002";
                    }),
                    (Level7.prototype.showQuestCar = function () {}),
                    (Level7.prototype.addLamps = function () {
                        Client.GameManager.instance.layerBackground.create(525, 369, "level3", "secretDoor instance 10000");
                        for (
                            var pos = [
                                    [147, 369],
                                    [313, 369],
                                    [620, 371],
                                ],
                                i = 0;
                            i < 3;
                            i++
                        )
                            Client.GameManager.instance.layerBackground.create(pos[i][0], pos[i][1], "level3", "lampBody instance 10000").anchor.set(0.5);
                    }),
                    (Level7.prototype.update = function () {
                        _super.prototype.update.call(this), !this.wheelyOnPlace && 250 < Client.GameManager.instance.hero.bodyBase.x && ((this.wheelyOnPlace = !0), Client.GameManager.instance.hero.setEnableMotor(!1));
                    }),
                    (Level7.prototype.addGround = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 400, 540, 0);
                        ground.setRectangle(800, 20), (ground = new Phaser.Physics.Box2D.Body(this.game, null, 525, 470, 0)).setRectangle(20, 120), (ground = null);
                    }),
                    (Level7.prototype.free = function () {
                        _super.prototype.free.call(this), (this.book = null), (this.sMonitor = null), (this.map = null), (this.photo = null);
                    }),
                    Level7
                );
            })(Client.BasicLevel);
            Client.Level7 = Level7;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Level8 = (function (_super) {
                function Level8() {
                    return (null !== _super && _super.apply(this, arguments)) || this;
                }
                return (
                    __extends(Level8, _super),
                    (Level8.prototype.init = function () {
                        Client.SoundManager.playSFX("s_lvl8_portAmbient", !0);
                        var sprite = Client.GameManager.instance.layerBackground.create(0, 0, "bgLevel8_1");
                        (sprite.cacheAsBitmap = !0),
                            (sprite = Client.GameManager.instance.layerBackground.create(-2, 249, "level8")).animations.add("anim", Phaser.Animation.generateFrameNames("chaiki instance 1", 0, 58, "", 4), 30, !0),
                            sprite.animations.play("anim"),
                            (sprite.cacheAsBitmap = !0),
                            ((sprite = Client.GameManager.instance.layerUpper.create(0, 600, "bgLevel8_2")).anchor.y = 1),
                            (sprite.cacheAsBitmap = !0),
                            this.addQuestWheel(8, 659, 136, Client.GameManager.instance.layerUpper),
                            this.updateElements.push(new Client.Lvl8AnchorLever(this.game)),
                            (this.bird = Client.GameManager.instance.layerBackground.create(420, 190, "level8", "birdAnim instance 10000")),
                            this.bird.animations.add("anim", Phaser.Animation.generateFrameNames("birdAnim instance 1", 0, 87, "", 4), 30, !1),
                            this.bird.animations.play("anim"),
                            this.updateElements.push(new Client.Lvl8Manipulator(this.game)),
                            (sprite = null),
                            this.addGround(),
                            (Client.GameManager.instance.hero = new Client.Hero(this.game, 65, 495)),
                            this.updateElements.push(new Client.Finish(this.game, 777, 497));
                    }),
                    (Level8.prototype.customAction = function (value) {
                        void 0 === value && (value = 0);
                    }),
                    (Level8.prototype.addGround = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 425, 562, 0);
                        ground.setRectangle(1492, 46),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, -47, 489, 0)).setRectangle(100, 100),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 1221, 489, 0)).setRectangle(100, 100),
                            (ground = null);
                    }),
                    (Level8.prototype.free = function () {
                        _super.prototype.free.call(this), (this.bird = null);
                    }),
                    Level8
                );
            })(Client.BasicLevel);
            Client.Level8 = Level8;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Level9 = (function (_super) {
                function Level9() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (
                        (_this.floatingCount = 0),
                        (_this.floatingDur = 0),
                        (_this.boatCount = 0),
                        (_this.carAttaked = !1),
                        (_this.jointCreated = !1),
                        (_this.heroClicled = 0),
                        (_this.contactHeroCarCount = 0),
                        (_this.jointKruk = null),
                        (_this.startSpawningBubbles = !1),
                        (_this.spawningBubblesCounter = 0),
                        (_this.m_boatAngleSpeed = 0.1),
                        (_this.m_boatMax = 0.08),
                        (_this.wheelyOnBoat = !1),
                        (_this.contactWaterCount = 0),
                        (_this.boxOnHeroCount = 0),
                        (_this.heroUpCount = 0),
                        (_this.splashCount = 0),
                        (_this.planksDestroy1 = !1),
                        (_this.planksDestroy2 = !1),
                        (_this.planksDestroy3 = !1),
                        _this
                    );
                }
                return (
                    __extends(Level9, _super),
                    (Level9.prototype.init = function () {
                        Client.SoundManager.playSFX("s_lvl9_ambient", !0), (this.floatings = new Array()), (this.bubbles = new Array());
                        var sprite = Client.GameManager.instance.layerBackground.create(0, 0, "bgLevel9_1");
                        (sprite.cacheAsBitmap = !0),
                            (sprite = Client.GameManager.instance.layerBackground.create(166, 56, "level9")).animations.add("anim", Phaser.Animation.generateFrameNames("bird instance 1", 0, 130, "", 4), 30, !0),
                            sprite.animations.play("anim"),
                            (sprite.cacheAsBitmap = !0),
                            (sprite = Client.GameManager.instance.layerBackground.create(26, 521, "level9")).animations.add("anim", Phaser.Animation.generateFrameNames("waterAnim instance 1", 0, 54, "", 4), 30, !0),
                            sprite.animations.play("anim"),
                            (sprite.cacheAsBitmap = !0),
                            ((sprite = Client.GameManager.instance.layerUpper.create(0, 620, "level9", "water instance 10000")).cacheAsBitmap = !0),
                            (sprite.anchor.y = 1),
                            (this.car = new Client.Lvl9Car(this.game)),
                            this.updateElements.push(this.car),
                            (Client.GameManager.instance.hero = new Client.Hero(this.game, 65, 400)),
                            this.car.body.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, this.contactHeroCar, this),
                            (this.finish = new Client.Finish(this.game, 780, 398)),
                            this.updateElements.push(this.finish),
                            (this.slide = new Client.Lvl9PulleyDoor(this.game)),
                            this.updateElements.push(this.slide),
                            (this.kran = new Client.Lvl9Kran(this.game)),
                            this.updateElements.push(this.kran),
                            this.kran.boxBody.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, this.boxOnHero, this);
                        var slidingMask = this.game.make.graphics();
                        slidingMask.beginFill(16711680, 0.4),
                            slidingMask.drawRect(142, 442, 137, 30),
                            slidingMask.drawRect(504, 442, 147, 30),
                            slidingMask.endFill(),
                            Client.GameManager.instance.layerUpper.addChild(slidingMask),
                            (this.slidingDoor1 = new Client.Lvl9SlidingDoor(this.game, 169, 457, 1)),
                            Client.GameManager.instance.layerBackground.addChild(this.slidingDoor1),
                            (this.slidingDoor2 = new Client.Lvl9SlidingDoor(this.game, 251, 457, -1)),
                            Client.GameManager.instance.layerBackground.addChild(this.slidingDoor2),
                            (this.slidingDoor3 = new Client.Lvl9SlidingDoor(this.game, 536, 457, 1)),
                            Client.GameManager.instance.layerBackground.addChild(this.slidingDoor3),
                            (this.slidingDoor4 = new Client.Lvl9SlidingDoor(this.game, 618, 457, -1)),
                            Client.GameManager.instance.layerBackground.addChild(this.slidingDoor4),
                            (this.slidingDoor1.mask = slidingMask),
                            (this.slidingDoor2.mask = slidingMask),
                            (this.slidingDoor3.mask = slidingMask),
                            (this.slidingDoor4.mask = slidingMask),
                            (slidingMask = null),
                            this.addQuestWheel(9, 410, 278, Client.GameManager.instance.layerBackground),
                            this.addQuestCar(283, 171, Client.GameManager.instance.layerBackground, -1, 0, 0.78),
                            !1 === this.questCarFounded && (this.questCar.inputEnabled = !1),
                            (this.plank1 = Client.GameManager.instance.layerBackground.create(263, 109, "level9", "destroyWood instance 10000")),
                            this.plank1.animations.add("anim", Phaser.Animation.generateFrameNames("destroyWood instance 1", 0, 18, "", 4), 30, !1),
                            (this.plank3 = Client.GameManager.instance.layerBackground.create(305, 109, "level9", "destroyWood instance 10000")),
                            this.plank3.animations.add("anim", Phaser.Animation.generateFrameNames("destroyWood instance 1", 0, 18, "", 4), 30, !1),
                            (this.plank3.scale.x = -1),
                            (this.plank2 = Client.GameManager.instance.layerBackground.create(325, 119, "level9", "destroyWood instance 10000")),
                            this.plank2.animations.add("anim", Phaser.Animation.generateFrameNames("destroyWood instance 1", 0, 18, "", 4), 30, !1),
                            (this.plank2.scale.x = -1),
                            (this.plank2.angle = 18),
                            (this.water = new Client.WaterRect(this.game)),
                            this.water.addRectangle(532, 607, 1120, 80),
                            this.water.setOffsetController(),
                            this.water.setFlow(-0.5),
                            this.updateElements.push(this.water),
                            this.water.body.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, this.contactWater, this),
                            (this.hammer = new Client.SimpleButton(this.game, 447, 192, "level9", "hammer", !1)),
                            this.hammer.activate(),
                            this.hammer.onInputDown.add(this.hammerDown, this),
                            this.game.physics.box2d.enable(this.hammer),
                            this.hammer.body.setRectangle(30, 40),
                            (this.hammer.body.mass = 2),
                            (this.hammer.body.fixedRotation = !0),
                            this.hammer.body.data.SetUserData("DragBody"),
                            this.hammer.body.setCollisionMask(~Client.FilterGroups.IGNORE_CAR),
                            Client.GameManager.instance.layerElements.addChild(this.hammer),
                            ((sprite = Client.GameManager.instance.layerElements.create(-50, 547, "level9")).anchor.x = 0.5),
                            sprite.animations.add("anim", Phaser.Animation.generateFrameNames("paperShip instance 1", 0, 39, "", 4), 30, !0),
                            sprite.animations.play("anim"),
                            (sprite.visible = !1),
                            this.floatings.push(sprite),
                            ((sprite = Client.GameManager.instance.layerElements.create(-50, 538, "level9")).anchor.x = 0.5),
                            sprite.animations.add("anim", Phaser.Animation.generateFrameNames("tree2 instance 1", 0, 49, "", 4), 30, !0),
                            sprite.animations.play("anim"),
                            (sprite.visible = !1),
                            this.floatings.push(sprite),
                            ((sprite = Client.GameManager.instance.layerElements.create(-50, 545, "level9")).anchor.x = 0.5),
                            sprite.animations.add("anim", Phaser.Animation.generateFrameNames("tree instance 1", 0, 39, "", 4), 30, !0),
                            sprite.animations.play("anim"),
                            (sprite.visible = !1),
                            this.floatings.push(sprite),
                            (sprite = null),
                            (this.boat = Client.GameManager.instance.layerElements.create(-120, 560, "level9", "boat instance 10000")),
                            this.game.physics.box2d.enable(this.boat),
                            this.boat.body.setRectangle(220, 24),
                            this.boat.body.addRectangle(180, 10, 0, -40).SetSensor(!0),
                            this.boat.body.setCollisionCategory(Client.FilterGroups.CAR2),
                            this.boat.body.setCollisionMask(~Client.FilterGroups.CAR1),
                            (this.boat.body.kinematic = !0),
                            (this.boat.body.velocity.x = 50),
                            (this.boat.body.rotation = 0.09),
                            this.boat.body.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, this.contactBoat, this),
                            this.game.input.onDown.add(this.mouseDragStart, this),
                            this.game.input.addMoveCallback(this.mouseDragMove, this),
                            this.game.input.onUp.add(this.mouseDragEnd, this),
                            this.addGround(),
                            this.addTrigers();
                    }),
                    (Level9.prototype.hammerDown = function () {
                        Client.SoundManager.playSFX("s_lvl9_dragHammer");
                    }),
                    (Level9.prototype.mouseDragStart = function () {
                        this.game.physics.box2d.mouseDragStart(this.game.input.activePointer.position), this.game.physics.box2d.mouseJoint && "DragBody" !== this.game.physics.box2d.mouseJoint.GetBodyB().GetUserData() && this.mouseDragEnd();
                    }),
                    (Level9.prototype.mouseDragMove = function () {
                        this.game.physics.box2d.mouseJoint && "DragBody" === this.game.physics.box2d.mouseJoint.GetBodyB().GetUserData() && this.game.physics.box2d.mouseDragMove(this.game.input.activePointer.position);
                    }),
                    (Level9.prototype.mouseDragEnd = function () {
                        this.game.physics.box2d.mouseDragEnd();
                    }),
                    (Level9.prototype.customAction = function (value) {
                        void 0 === value && (value = 0),
                            0 === value
                                ? 2 === this.heroUpCount && 0 === this.heroClicled && (this.heroClicled = 1)
                                : 1 === value && 2 === this.heroUpCount && !1 === this.carAttaked && this.slide.door.y < 275 && (this.car.attack(), (this.carAttaked = !0));
                    }),
                    (Level9.prototype.update = function () {
                        _super.prototype.update.call(this),
                            this.updateFloatings(),
                            this.updateBoat(),
                            1 === this.boxOnHeroCount && ((this.boxOnHeroCount = 2), (Client.GameManager.instance.hero.currState = Client.HeroState.bumpStars), (this.boat.body.sensor = !0), (this.kran.boxBody.sensor = !0)),
                            1 === this.contactWaterCount &&
                                ((this.contactWaterCount = 2),
                                (Client.GameManager.instance.hero.bodyBase.mass = 11),
                                (this.startSpawningBubbles = !0),
                                Client.SoundManager.playSFX("s_wheelyDrowned", !0),
                                Client.LevelBuilder.instance.levelFailed(100),
                                0 === this.boxOnHeroCount && (Client.GameManager.instance.hero.currEyesState = Client.EyesState.bumpForEver),
                                Client.GameManager.instance.hero.setEnableMotor(!1),
                                Client.GameManager.instance.hero.setClickable(!1)),
                            !0 === this.startSpawningBubbles &&
                                ((this.spawningBubblesCounter += 1),
                                2 === this.spawningBubblesCounter &&
                                    ((this.spawningBubblesCounter = 0),
                                    this.spawnBubble(Client.GameManager.instance.hero.bodyBase.x + Client.Tools.random(-40, 40), Client.GameManager.instance.hero.bodyBase.y + Client.Tools.random(-30, 10), 0.7 + 0.5 * Math.random()))),
                            1 === this.heroUpCount && ((this.heroUpCount = 2), Client.GameManager.instance.hero.setClickable(!0), this.slidingDoor3.goStartX(), this.slidingDoor4.goStartX(), this.kran.setNewBotY(), this.customAction(1)),
                            1 === this.heroClicled && ((this.heroUpCount = 2), this.destroyJoint()),
                            this.updateWheelyOnKruk(),
                            1 === this.contactHeroCarCount &&
                                ((this.contactHeroCarCount = 2),
                                Client.SoundManager.playSFX("s_lvl9_wheelyHit"),
                                this.destroyJoint(),
                                (Client.GameManager.instance.hero.currState = Client.HeroState.bumpStars),
                                Client.GameManager.instance.hero.setClickable(!1),
                                Client.GameManager.instance.hero.bodyBase.data.ApplyLinearImpulse(new box2d.b2Vec2(-6.5, 0), Client.GameManager.instance.hero.bodyBase.data.GetPosition()),
                                !0 === this.finish.active && (Client.LevelBuilder.instance.levelFailed(100), (this.finish.active = !1)));
                    }),
                    (Level9.prototype.destroyJoint = function () {
                        this.jointKruk && (this.game.physics.box2d.world.DestroyJoint(this.jointKruk), (this.jointKruk = null), Client.SoundManager.playSFX("s_lvl9_magnitOff"));
                    }),
                    (Level9.prototype.contactHeroCar = function () {
                        0 === this.contactHeroCarCount && (this.contactHeroCarCount = 1);
                    }),
                    (Level9.prototype.updateWheelyOnKruk = function () {
                        !1 === this.jointCreated &&
                            0 === this.contactHeroCarCount &&
                            Client.Tools.distance(this.kran.bodyKruk.x, this.kran.bodyKruk.y, Client.GameManager.instance.hero.bodyBase.x, Client.GameManager.instance.hero.bodyBase.y - 20) < 20 &&
                            ((this.jointCreated = !0),
                            Client.SoundManager.playSFX("s_lvl9_magnitOn"),
                            Client.GameManager.instance.hero.setClickable(!1),
                            (Client.GameManager.instance.hero.angleKeep = Client.Tools.toRad(10)),
                            (this.jointKruk = this.game.physics.box2d.revoluteJoint(this.kran.bodyKruk, Client.GameManager.instance.hero.bodyBase, -10, 5, -5, -14)));
                    }),
                    (Level9.prototype.spawnBubble = function (x, y, scale) {
                        for (var i = 0; i < this.bubbles.length; i++)
                            if (!1 === this.bubbles[i].visible) return (this.bubbles[i].visible = !0), (this.bubbles[i].x = x), (this.bubbles[i].y = y), this.bubbles[i].scale.setTo(scale), void this.bubbles[i].animations.play("anim");
                        var bubble = Client.GameManager.instance.layerUpper.create(x, y, "wheely");
                        bubble.animations.add("anim", Phaser.Animation.generateFrameNames("bubbleWaterPart instance 1", 0, 9, "", 4), 30, !1).onComplete.add(this.bubbleComplete, this),
                            bubble.animations.play("anim"),
                            bubble.scale.setTo(scale),
                            this.bubbles.push(bubble),
                            (bubble = null);
                    }),
                    (Level9.prototype.bubbleComplete = function (bubble, data) {
                        bubble.visible = !1;
                    }),
                    (Level9.prototype.updateFloatings = function () {
                        if (((this.floatingCount += 1), this.floatingCount >= this.floatingDur)) {
                            (this.floatingCount = 0), (this.floatingDur = Client.Tools.random(200, 500));
                            for (var i = 0; i < this.floatings.length; i++)
                                if (!1 === this.floatings[i].visible) {
                                    this.floatings[i].visible = !0;
                                    break;
                                }
                        }
                        for (var j = 0; j < this.floatings.length; j++) !0 === this.floatings[j].visible && ((this.floatings[j].x += 0.75), 850 < this.floatings[j].x && ((this.floatings[j].x = -50), (this.floatings[j].visible = !1)));
                    }),
                    (Level9.prototype.updateBoat = function () {
                        this.boat.body.rotation > this.m_boatMax ? (this.boat.body.angularVelocity = -this.m_boatAngleSpeed) : this.boat.body.rotation < -this.m_boatMax && (this.boat.body.angularVelocity = this.m_boatAngleSpeed),
                            this.wheelyOnBoat && this.boat.body.y < 570 ? this.boat.body.y++ : !this.wheelyOnBoat && 560 < this.boat.body.y && this.boat.body.y--,
                            980 < this.boat.body.x && (this.boat.body.x = -120);
                    }),
                    (Level9.prototype.contactWater = function () {
                        0 === this.contactWaterCount && (this.contactWaterCount = 1);
                    }),
                    (Level9.prototype.boxOnHero = function () {
                        0 === this.boxOnHeroCount && (this.boxOnHeroCount = 1);
                    }),
                    (Level9.prototype.addGround = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 520, 625, 0);
                        ground.setRectangle(1145, 48),
                            ground.setCollisionMask(~Client.FilterGroups.IGNORE_CAR),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 681, 448, 0)).setRectangle(10, 4),
                            (ground.angle = -21),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 1122, 563, 0)).setRectangle(58, 169),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 822, 556, 0)).setRectangle(58, 169),
                            ground.setCollisionCategory(Client.FilterGroups.WALL),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 55, 464, 0)).setRectangle(166, 35),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, -53, 201, 0)).setRectangle(100, 510),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 295, 407, 0)).setRectangle(36, 62),
                            ground.setCollisionCategory(Client.FilterGroups.CAR1),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 492, 668, 0)).setRectangle(1e3, 48),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, -69, 582, 0)).setRectangle(100, 266),
                            ground.setCollisionCategory(Client.FilterGroups.WALL),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 703, 490, 0)).setRectangle(32, 58),
                            ground.setCollisionCategory(Client.FilterGroups.CAR1),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 400, 462, 0)).setRectangle(213, 30),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 901, 460, 0)).setRectangle(432, 30),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 669, 460, 0)).setRectangle(32, 23),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 385, 229, 0)).setRectangle(192, 24),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 396, -56, 0)).setRectangle(788, 100),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 843, 87, 0)).setRectangle(776, 100),
                            (ground.angle = 90),
                            ground.setCollisionMask(~Client.FilterGroups.IGNORE_CAR),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 1100, 418, 0)).setRectangle(32, 58),
                            (ground = null);
                    }),
                    (Level9.prototype.addTrigers = function () {
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 580, 568, 0);
                        ground.setRectangle(100, 12),
                            (ground.sensor = !0),
                            ground.setBodyContactCallback(this.kran.boxBody, this.splash, this),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 585, 358, 0)).setRectangle(64, 19),
                            (ground.sensor = !0),
                            ground.setBodyContactCallback(Client.GameManager.instance.hero.bodyBase, this.heroUp, this),
                            (ground = new Phaser.Physics.Box2D.Body(this.game, null, 284, 146, 0)).setRectangle(40, 72),
                            (ground.sensor = !0),
                            ground.setBodyContactCallback(this.hammer.body, this.contactPlanks, this),
                            (ground = null);
                    }),
                    (Level9.prototype.heroUp = function () {
                        0 === this.heroUpCount && (this.heroUpCount = 1);
                    }),
                    (Level9.prototype.splash = function () {
                        if (0 === this.splashCount) {
                            this.splashCount = 1;
                            var splash_2 = Client.GameManager.instance.layerUpper.create(this.kran.boxBody.x, 515, "wheely");
                            (splash_2.anchor.x = 0.5),
                                splash_2.animations.add("anim", Phaser.Animation.generateFrameNames("splash_mc instance 1", 0, 15, "", 4), 30, !1).onComplete.addOnce(function () {
                                    splash_2.destroy(), (splash_2 = null);
                                }, this),
                                splash_2.animations.play("anim"),
                                Client.SoundManager.playSFX("s_lvl9_boxSplash"),
                                this.kran.setBulkBotDown();
                        }
                    }),
                    (Level9.prototype.contactBoat = function (b1, b2, f1, f2, begin) {
                        ("heroBaseBody" !== f1.GetUserData() && "heroBaseBody" !== f2.GetUserData()) ||
                            (!0 === begin && !1 === this.wheelyOnBoat
                                ? ((this.wheelyOnBoat = !0), Client.SoundManager.playSFX("s_lvl9_inBoat"), Client.GameManager.instance.hero.setEnableMotor(!1))
                                : !1 === begin && !0 === this.wheelyOnBoat && (this.wheelyOnBoat = !1));
                    }),
                    (Level9.prototype.contactPlanks = function (b1, b2, f1, f2, begin) {
                        var body;
                        if (b1 !== b2 && !1 !== begin)
                            if (((body = this.hammer.body === b1 ? b2 : b1), this.hammer.body.x > body.x)) {
                                if (!1 === this.planksDestroy1) return void this.destroyPlank(1);
                                if (!1 === this.planksDestroy2) return void this.destroyPlank(2);
                                if (!1 === this.planksDestroy3) return void this.destroyPlank(3);
                            } else {
                                if (!1 === this.planksDestroy3) return void this.destroyPlank(3);
                                if (!1 === this.planksDestroy2) return void this.destroyPlank(2);
                                if (!1 === this.planksDestroy1) return void this.destroyPlank(1);
                            }
                    }),
                    (Level9.prototype.destroyPlank = function (kind) {
                        1 === kind
                            ? ((this.planksDestroy1 = !0), this.plank1.animations.play("anim"), Client.SoundManager.playSFX("s_lvl9_crackPlank"))
                            : 2 === kind
                            ? ((this.planksDestroy2 = !0), this.plank2.animations.play("anim"), Client.SoundManager.playSFX("s_lvl9_crackPlank"))
                            : 3 === kind && ((this.planksDestroy3 = !0), this.plank3.animations.play("anim"), Client.SoundManager.playSFX("s_lvl9_crackPlank")),
                            !1 === this.questCarFounded && !0 === this.planksDestroy1 && !0 === this.planksDestroy2 && !0 === this.planksDestroy3 && ((this.questCar.inputEnabled = !0), (this.questCar.input.useHandCursor = !0));
                    }),
                    (Level9.prototype.free = function () {
                        _super.prototype.free.call(this),
                            (this.slidingDoor1 = null),
                            (this.slidingDoor2 = null),
                            (this.slidingDoor3 = null),
                            (this.slidingDoor4 = null),
                            (this.car = null),
                            (this.slide = null),
                            (this.plank1 = null),
                            (this.plank2 = null),
                            (this.plank3 = null),
                            (this.floatings = []),
                            (this.floatings = null),
                            (this.boat = null),
                            (this.bubbles = []),
                            (this.bubbles = null),
                            (this.kran = null),
                            (this.jointKruk = null),
                            (this.finish = null);
                    }),
                    Level9
                );
            })(Client.BasicLevel);
            Client.Level9 = Level9;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var BasicPanel = (function (_super) {
                function BasicPanel(game, key, frame) {
                    void 0 === frame && (frame = null);
                    var _this = _super.call(this, game, Constants.GAME_WIDTH / 2, 830, key, frame) || this;
                    return (_this.timeShow = 200), (_this.timeHide = 400), (_this.hideX = _this.showX = _this.x), (_this.hideY = _this.y), (_this.showY = 352), _this.anchor.setTo(0.5), _this;
                }
                return (
                    __extends(BasicPanel, _super),
                    (BasicPanel.prototype.over = function () {
                        Client.SoundManager.playSFX("btnOver");
                    }),
                    (BasicPanel.prototype.show = function () {
                        this.game.add.tween(this).to({ y: this.showY }, this.timeShow, Phaser.Easing.Linear.None, !0).onComplete.addOnce(this.showComplete, this);
                    }),
                    (BasicPanel.prototype.hide = function () {
                        (this.inputEnabled = !1), this.game.add.tween(this).to({ y: this.hideY }, this.timeHide, Phaser.Easing.Linear.None, !0).onComplete.addOnce(this.hideComplete, this);
                    }),
                    (BasicPanel.prototype.hideME = function (game) {
                        Client.PanelManager.getInstance(game).hidePanel(this.name);
                    }),
                    (BasicPanel.prototype.hideFastME = function (game) {
                        Client.PanelManager.getInstance(game).hideFastPanel(this.name);
                    }),
                    (BasicPanel.prototype.hideFast = function () {
                        (this.inputEnabled = !1), (this.y = this.hideY), this.hideComplete();
                    }),
                    (BasicPanel.prototype.showComplete = function () {
                        this.inputEnabled = !0;
                    }),
                    (BasicPanel.prototype.hideComplete = function () {}),
                    (BasicPanel.prototype.clickOnExit = function () {
                        (Client.Main.instance.pausedByPanel = !1), (Client.LevelBuilder.instance.game.paused = !1), Client.SoundManager.playSFX("btnClick"), Client.LevelBuilder.instance.exitGame();
                    }),
                    BasicPanel
                );
            })(Phaser.Sprite);
            Client.BasicPanel = BasicPanel;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Lose = (function (_super) {
                function Lose(game, _name) {
                    var btn,
                        _this = _super.call(this, game, "ui", "panelLose instance 10000") || this;
                    return (
                        (_this.scaleUp = !1),
                        (_this.name = _name),
                        (btn = game.make.button(137, 81.5, "ui", _this.restart, _this, "btnBigRestart instance 10001", "btnBigRestart instance 10000")).anchor.setTo(0.5),
                        _this.addChild(btn),
                        btn.onInputOver.add(_this.over, _this),
                        (btn = null),
                        (_this.btnWalkShine = game.make.sprite(-145.5, -52.5, "ui", "btnWalkPod2 instance 10000")),
                        _this.btnWalkShine.anchor.setTo(0.5),
                        _this.addChild(_this.btnWalkShine),
                        (_this.btnWalkPod = game.make.sprite(-145.5, -52.5, "ui", "btnWalkPod instance 10000")),
                        _this.btnWalkPod.anchor.setTo(0.5),
                        _this.addChild(_this.btnWalkPod),
                        (_this.btnWalk = game.make.sprite(-145.5, -52.5, "ui")),
                        _this.btnWalk.animations.add("out", Phaser.Animation.generateFrameNames("btnWalkthrough2 instance 1", 0, 0, "", 4), 30, !1),
                        _this.btnWalk.animations.add("over", Phaser.Animation.generateFrameNames("btnWalkthrough2 instance 1", 0, 4, "", 4), 30, !1),
                        _this.btnWalk.animations.play("out"),
                        _this.btnWalk.anchor.setTo(0.5),
                        _this.addChild(_this.btnWalk),
                        (_this.btnWalk.inputEnabled = !0),
                        (_this.btnWalk.input.useHandCursor = !0),
                        _this.btnWalk.events.onInputOut.add(_this.walkOut, _this),
                        _this.btnWalk.events.onInputOver.add(_this.walkOver, _this),
                        _this.btnWalk.events.onInputUp.add(_this.walkUp, _this),
                        h5branding.Utils.getBrandingDomain() !== h5branding.BrandingDomain.Neutral && (_this.btnWalk.visible = !1),
                        h5branding.Branding.outGoingLinksAllowed() || ((_this.btnWalkShine.visible = !1), (_this.btnWalkPod.visible = !1), (_this.btnWalk.visible = !1), (_this.btnWalk.inputEnabled = !1)),
                        _this
                    );
                }
                return (
                    __extends(Lose, _super),
                    (Lose.prototype.restart = function () {
                        Fabrique.AdHandler.getInstance().showAd("restart", function () {
                            Client.SoundManager.playSFX("btnClick"), Client.LevelBuilder.instance.restartGame();
                        });
                    }),
                    (Lose.prototype.walkOut = function () {
                        this.btnWalk.animations.play("out");
                    }),
                    (Lose.prototype.walkOver = function () {
                        this.over(), this.btnWalk.animations.play("over");
                    }),
                    (Lose.prototype.walkUp = function (sprite, pointer, isOver) {}),
                    (Lose.prototype.update = function () {
                        _super.prototype.update.call(this),
                            (this.btnWalkPod.rotation += 0.01),
                            !1 === this.scaleUp
                                ? ((this.btnWalkShine.scale.x -= 0.005), (this.btnWalkShine.scale.y = this.btnWalkShine.scale.x), this.btnWalkShine.scale.x <= 0.8 && (this.btnWalkShine.scale.setTo(0.8), (this.scaleUp = !0)))
                                : ((this.btnWalkShine.scale.x += 0.005), (this.btnWalkShine.scale.y = this.btnWalkShine.scale.x), 1 <= this.btnWalkShine.scale.x && (this.btnWalkShine.scale.setTo(1), (this.scaleUp = !1)));
                    }),
                    (Lose.prototype.destroy = function () {
                        _super.prototype.destroy.call(this), (this.btnWalk = null), (this.btnWalkPod = null), (this.btnWalkShine = null);
                    }),
                    Lose
                );
            })(Client.BasicPanel);
            Client.Lose = Lose;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (PanelList) {
        (PanelList.Pause = "Pause"), (PanelList.Win = "Win"), (PanelList.Lose = "Lose");
    })(PanelList || (PanelList = {})),
    (function (Wheely) {
        !(function (Client) {
            var PanelManager = (function (_super) {
                function PanelManager(game) {
                    var _this = _super.call(this, game, game.world, "PanelManager") || this;
                    return (_this.timeShow = 500), (_this.timeHide = 500), (_this.black = null), (_this.game = game), _this.game.world.addChild(_this), (_this.stock = {}), (_this.fixedToCamera = !0), _this;
                }
                return (
                    __extends(PanelManager, _super),
                    (PanelManager.getInstance = function (game) {
                        return PanelManager.instance || (PanelManager.instance = new PanelManager(game)), PanelManager.instance;
                    }),
                    (PanelManager.prototype.init = function () {
                        (this.black = this.game.add.graphics(0, 0, this)),
                            this.black.beginFill(0, 1),
                            this.black.drawRect(0, 0, Constants.GAME_WIDTH, Constants.GAME_HEIGHT),
                            this.black.endFill(),
                            (this.black.alpha = 0),
                            (this.black.inputEnabled = !0),
                            this.addChild(this.black);
                    }),
                    (PanelManager.prototype.showPanel = function (value) {
                        if ((null === this.black && this.init(), void 0 === this.stock[value])) {
                            var tempPanel = Client.Tools.getInstance(value, this.game, value);
                            (this.stock[value] = this.add(tempPanel)), (tempPanel = null);
                        }
                        this.game.world.bringToTop("PanelManager"), this.stock[value].show(), this.showBlack();
                    }),
                    (PanelManager.prototype.hidePanel = function (value, onlyPanel) {
                        void 0 === onlyPanel && (onlyPanel = !1), void 0 !== this.stock[value] && (this.game.world.sendToBack("PanelManager"), this.stock[value].hide(), !1 === onlyPanel && this.hideBlack());
                    }),
                    (PanelManager.prototype.hideFastPanel = function (value, onlyPanel) {
                        void 0 === onlyPanel && (onlyPanel = !1), void 0 !== this.stock[value] && (this.stock[value].hideFast(), !1 === onlyPanel && this.hideFastBlack());
                    }),
                    (PanelManager.prototype.showBlack = function () {
                        (this.visible = !0), this.game.add.tween(this.black).to({ alpha: 0.7 }, this.timeShow, Phaser.Easing.Linear.None, !0);
                    }),
                    (PanelManager.prototype.hideBlack = function () {
                        this.game.add.tween(this.black).to({ alpha: 0 }, this.timeHide, Phaser.Easing.Linear.None, !0).onComplete.addOnce(this.hideBlackComplete, this);
                    }),
                    (PanelManager.prototype.hideBlackComplete = function () {
                        this.visible = !1;
                    }),
                    (PanelManager.prototype.hideFastBlack = function () {
                        (this.black.alpha = 0), this.hideBlackComplete();
                    }),
                    (PanelManager.prototype.destroy = function () {
                        _super.prototype.destroy.call(this), (this.black = null), (this.stock = {}), (this.stock = null), (this.game = null), (PanelManager.instance = null);
                    }),
                    PanelManager
                );
            })(Phaser.Group);
            Client.PanelManager = PanelManager;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Pause = (function (_super) {
                function Pause(game, _name) {
                    var _this = _super.call(this, game, "ui", "panelPause instance 10000") || this;
                    _this.name = _name;
                    var sprite = (_this.game = game).make.sprite(-25, -64, "ui");
                    return (
                        sprite.animations.add("anim", Phaser.Animation.generateFrameNames("arrowAnim instance 1", 0, 35, "", 4), 30, !0),
                        sprite.animations.play("anim"),
                        _this.addChild(sprite),
                        (sprite = null),
                        (_this.btnExit = game.make.button(-140, 84, "ui", _this.clickOnExit, _this, "btnBigExit instance 10001", "btnBigExit instance 10000")),
                        _this.btnExit.anchor.setTo(0.5),
                        _this.addChild(_this.btnExit),
                        _this.btnExit.onInputOver.add(_this.over, _this),
                        (_this.btnResume = game.make.button(108.5, 80.5, "ui", _this.clickOnClose, _this, "btnBigClose2 instance 10001", "btnBigClose2 instance 10000")),
                        _this.btnResume.anchor.setTo(0.5),
                        _this.addChild(_this.btnResume),
                        _this.btnResume.onInputOver.add(_this.over, _this),
                        _this.game.input.onDown.add(_this.unpause, _this),
                        _this
                    );
                }
                return (
                    __extends(Pause, _super),
                    (Pause.prototype.unpause = function (event) {
                        !0 === this.game.paused &&
                            (this.btnResume.getBounds().contains(this.game.input.x, this.game.input.y) && this.clickOnClose(), this.btnExit.getBounds().contains(this.game.input.x, this.game.input.y) && this.clickOnExit());
                    }),
                    (Pause.prototype.clickOnClose = function () {
                        this.game.tweens.removeFrom(this), Client.SoundManager.playSFX("btnClick"), this.hideFastME(this.game), (Client.LevelBuilder.instance.game.paused = !1), (Client.Main.instance.pausedByPanel = !1);
                    }),
                    (Pause.prototype.showComplete = function () {
                        _super.prototype.showComplete.call(this), (Client.LevelBuilder.instance.game.paused = !0), (Client.Main.instance.pausedByPanel = !0);
                    }),
                    (Pause.prototype.hideComplete = function () {
                        Client.LevelBuilder.instance.resumeGame();
                    }),
                    (Pause.prototype.destroy = function () {
                        (this.btnExit = null), (this.btnResume = null), this.game.input.onDown.remove(this.unpause, this), _super.prototype.destroy.call(this);
                    }),
                    Pause
                );
            })(Client.BasicPanel);
            Client.Pause = Pause;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Win = (function (_super) {
                function Win(game, _name) {
                    var btn,
                        _this = _super.call(this, game, "ui", "panelWin instance 10000") || this;
                    return (
                        (_this.name = _name),
                        (_this.star1 = game.make.sprite(-74, 9, "ui")),
                        _this.star1.animations.add("anim", Phaser.Animation.generateFrameNames("winStar instance 1", 0, 27, "", 4), 30),
                        _this.star1.animations.play("anim"),
                        _this.star1.animations.stop("anim"),
                        _this.star1.anchor.setTo(0.5),
                        (_this.star1.angle = 4),
                        _this.addChild(_this.star1),
                        (_this.star2 = game.make.sprite(-17, 9, "ui")),
                        _this.star2.animations.add("anim", Phaser.Animation.generateFrameNames("winStar instance 1", 0, 27, "", 4), 30),
                        _this.star2.animations.play("anim"),
                        _this.star2.animations.stop("anim"),
                        _this.star2.anchor.setTo(0.5),
                        _this.addChild(_this.star2),
                        (_this.star3 = game.make.sprite(37, 9, "ui")),
                        _this.star3.animations.add("anim", Phaser.Animation.generateFrameNames("winStar instance 1", 0, 27, "", 4), 30),
                        _this.star3.animations.play("anim"),
                        _this.star3.animations.stop("anim"),
                        _this.star3.anchor.setTo(0.5),
                        (_this.star3.angle = -4),
                        _this.addChild(_this.star3),
                        (_this.wheel = game.make.sprite(-98, -65, "ui")),
                        _this.wheel.animations.add("anim", Phaser.Animation.generateFrameNames("winWheel instance 1", 0, 9, "", 4), 30),
                        _this.wheel.animations.play("anim"),
                        _this.wheel.animations.stop("anim"),
                        _this.wheel.anchor.setTo(0.5),
                        _this.addChild(_this.wheel),
                        (_this.flag = game.make.sprite(-17, -65, "ui")),
                        _this.flag.animations.add("anim", Phaser.Animation.generateFrameNames("winFlag instance 1", 0, 9, "", 4), 30),
                        _this.flag.animations.play("anim"),
                        _this.flag.animations.stop("anim"),
                        _this.flag.anchor.setTo(0.5),
                        _this.addChild(_this.flag),
                        (_this.car = game.make.sprite(57, -65, "ui")),
                        _this.car.animations.add("anim", Phaser.Animation.generateFrameNames("winCar instance 1", 0, 9, "", 4), 30),
                        _this.car.animations.play("anim"),
                        _this.car.animations.stop("anim"),
                        _this.car.anchor.setTo(0.5),
                        _this.addChild(_this.car),
                        (btn = game.make.button(106, 80.5, "ui", _this.showAd, _this, "btnBigPlay instance 10001", "btnBigPlay instance 10000")).anchor.setTo(0.5),
                        _this.addChild(btn),
                        btn.onInputOver.add(_this.over, _this),
                        (btn = game.make.button(-140, 80.5, "ui", _this.exit, _this, "btnBigExit instance 10001", "btnBigExit instance 10000")).anchor.setTo(0.5),
                        _this.addChild(btn),
                        btn.onInputOver.add(_this.over, _this),
                        (btn = null),
                        Client.DataManager.getInstance().saveData("questFlag" + Client.LevelManager.getInstance().currentLevel, 1),
                        _this
                    );
                }
                return (
                    __extends(Win, _super),
                    (Win.prototype.exit = function () {
                        Client.LevelBuilder.instance.exitGame();
                    }),
                    (Win.prototype.showAd = function () {
                        Fabrique.AdHandler.getInstance().showAd("next", function () {
                            Client.SoundManager.playSFX("btnClick"), Client.LevelBuilder.instance.nextLevel();
                        });
                    }),
                    (Win.prototype.showComplete = function () {
                        _super.prototype.showComplete.call(this),
                            this.star2.animations.play("anim"),
                            this.flag.animations.play("anim"),
                            !0 === Client.LevelBuilder.instance.panelQuest.wheelFounded && (this.star1.animations.play("anim"), this.wheel.animations.play("anim")),
                            !0 === Client.LevelBuilder.instance.panelQuest.carFounded && (this.star3.animations.play("anim"), this.car.animations.play("anim"));
                    }),
                    (Win.prototype.destroy = function () {
                        _super.prototype.destroy.call(this), (this.star1 = null), (this.star2 = null), (this.star3 = null), (this.wheel = null), (this.flag = null), (this.car = null);
                    }),
                    Win
                );
            })(Client.BasicPanel);
            Client.Win = Win;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Boot = (function (_super) {
                function Boot() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (_this.name = Boot.Name), _this;
                }
                return (
                    __extends(Boot, _super),
                    (Boot.prototype.init = function () {
                        this.stage.setBackgroundColor(0),
                            h5branding.gameanalytics.setup(Constants.GAME_KEY, Constants.SECRET_KEY, version),
                            h5branding.google.setup(Constants.GOOGLE_ID, Constants.GOOGLE_APP_NAME, version),
                            h5branding.google.sendScreenView("splash"),
                            Fabrique.AdHandler.getInstance().init(),
                            Fabrique.PauseHandler.getInstance(this.game).init(),
                            (this.input.maxPointers = 1),
                            (this.game.canvas.oncontextmenu = function (e) {
                                e.preventDefault();
                            });
                    }),
                    (Boot.prototype.preload = function () {
                        var _this = this;
                        (this.game.load.cacheBuster = "undefined" == typeof version ? null : version),
                            this.game.load.onFileComplete.add(function (progress) {
                                h5branding.SplashLoader.getInstance().setLoadProgress(progress);
                            }),
                            this.game.load.onLoadComplete.add(function () {
                                h5branding.SplashLoader.getInstance().setLoadProgress(100);
                            }),
                            h5branding.SplashLoader.getInstance().setButtonCallback(function () {
                                h5branding.SplashLoader.getInstance().destroy(),
                                    (Boot.inBoot = !1),
                                    h5branding.Utils.inGDGameZone()
                                        ? (Fabrique.LoaderHelper.hide(), _this.game.state.start(SceneList.Menu))
                                        : Fabrique.AdHandler.getInstance().showAd("splash", function () {
                                              _this.game.state.start(SceneList.Menu);
                                          });
                            }),
                            Client.DataManager.getInstance(this.game).init(),
                            Client.LevelManager.getInstance(this.game).init(),
                            this.game.load.bitmapFont("mainFont", "assets/fonts/mainFont.png", "assets/fonts/mainFont.fnt"),
                            this.game.load.bitmapFont("numbers", "assets/fonts/numbers.png", "assets/fonts/numbers.fnt"),
                            this.game.load.bitmapFont("walkthrough", "assets/fonts/walkthrough.png", "assets/fonts/walkthrough.fnt");
                        Constants.GAME_SCALE;
                        Images.list.forEach(function (assetName) {
                            _this.game.load.image(assetName, "assets/images/" + assetName + ".png");
                        }),
                            Atlases.list.forEach(function (assetName) {
                                _this.game.load.atlas(assetName, "assets/atlases/" + assetName + ".png", "assets/atlases/" + assetName + ".json");
                            }),
                            Sounds.list.forEach(function (assetName) {
                                _this.game.device.iOS
                                    ? _this.game.load.audio(assetName, ["assets/sound/" + assetName + ".m4a"])
                                    : _this.game.load.audio(assetName, ["assets/sound/" + assetName + ".ogg", "assets/sound/" + assetName + ".mp3"]);
                            }),
                            (this.game.load.crossOrigin = "anonymous"),
                            h5branding.Utils.getBrandingDomain() !== h5branding.BrandingDomain.Neutral && this.game.load.image("branding_logo", h5branding.Branding.brandingLogoUrl);
                    }),
                    (Boot.Name = "boot"),
                    (Boot.inBoot = !0),
                    Boot
                );
            })(Phaser.State);
            Client.Boot = Boot;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Comix1 = (function (_super) {
                function Comix1() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (_this.showAnim = 1), _this;
                }
                return (
                    __extends(Comix1, _super),
                    (Comix1.prototype.init = function () {
                        (this.showAnim = 1), Client.SoundManager.playMusic("main_" + this.game.rnd.between(1, 2), 0.5);
                    }),
                    (Comix1.prototype.create = function () {
                        h5branding.google.sendScreenView("comics"),
                            (this.add.sprite(0, 0, "backgroundComix1").cacheAsBitmap = !0),
                            (this.anim1 = new Client.Cmx1Anim1(this.game)),
                            this.add.existing(this.anim1),
                            (this.anim1.alpha = 0),
                            (this.anim2 = new Client.Cmx1Anim2(this.game)),
                            this.add.existing(this.anim2),
                            (this.anim2.alpha = 0),
                            (this.anim3 = new Client.Cmx1Anim3(this.game)),
                            this.add.existing(this.anim3),
                            (this.anim3.alpha = 0),
                            this.add.tween(this.anim1).to({ alpha: 1 }, 600, Phaser.Easing.Linear.None, !0, 500).onComplete.addOnce(this.anim1.start, this.anim1);
                    }),
                    (Comix1.prototype.update = function () {
                        !0 === this.anim1.wheely.complete && 1 === this.showAnim && ((this.showAnim = 2), this.add.tween(this.anim2).to({ alpha: 1 }, 600, Phaser.Easing.Linear.None, !0).onComplete.addOnce(this.anim2.start, this.anim2)),
                            !0 === this.anim2.rubber.complete && 2 === this.showAnim && ((this.showAnim = 3), this.add.tween(this.anim3).to({ alpha: 1 }, 600, Phaser.Easing.Linear.None, !0).onComplete.addOnce(this.anim3.start, this.anim3));
                    }),
                    (Comix1.prototype.shutdown = function () {
                        (this.anim1 = null), (this.anim2 = null), (this.anim3 = null);
                    }),
                    (Comix1.Name = "Comix1"),
                    Comix1
                );
            })(Phaser.State);
            Client.Comix1 = Comix1;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Cmx1Anim1 = (function (_super) {
                function Cmx1Anim1(game) {
                    var _this = _super.call(this, game) || this;
                    (_this.x = 400), (_this.y = 165), (_this.group = _this.create(0, 0, "comix1", "bg1 instance 10000")), _this.group.anchor.setTo(0.5);
                    var mask = _this.game.make.graphics();
                    mask.beginFill(16711680, 0.4),
                        mask.drawRoundedRect(-380, -150, 760, 300, 80),
                        mask.endFill(),
                        _this.addChild(mask),
                        (_this.group.mask = mask),
                        (mask = null),
                        (_this.cloud1 = _this.game.make.sprite(-350, -140, "comix1", "cloud1 instance 10000")),
                        _this.group.addChild(_this.cloud1),
                        (_this.wheely = new Client.Cmx1Wheely1(_this.game)),
                        _this.group.addChild(_this.wheely.group);
                    var sprite = _this.create(0, 0, "comix1", "ramka1 instance 10000");
                    return sprite.anchor.setTo(0.5), (sprite = null), _this;
                }
                return (
                    __extends(Cmx1Anim1, _super),
                    (Cmx1Anim1.prototype.start = function () {
                        Client.SimpleTweenManager.set(this.cloud1, 400, { x: -50, alpha: 0 }), this.wheely.playAnim("anim");
                    }),
                    (Cmx1Anim1.prototype.update = function () {
                        this.wheely.update();
                    }),
                    (Cmx1Anim1.prototype.destroy = function () {
                        _super.prototype.destroy.call(this), (this.group = null), (this.cloud1 = null), this.wheely.free(), (this.wheely = null);
                    }),
                    Cmx1Anim1
                );
            })(Phaser.Group);
            Client.Cmx1Anim1 = Cmx1Anim1;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Cmx1Anim2 = (function (_super) {
                function Cmx1Anim2(game) {
                    var _this = _super.call(this, game) || this;
                    (_this.x = 208), (_this.y = 450), (_this.group = _this.create(0, 0, "comix1", "bg2 instance 10000")), _this.group.anchor.setTo(0.5);
                    var mask = _this.game.make.graphics();
                    mask.beginFill(16711680, 0.4),
                        mask.drawRoundedRect(-193, -137, 386, 274, 80),
                        mask.endFill(),
                        _this.addChild(mask),
                        (_this.group.mask = mask),
                        (mask = null),
                        (_this.rubber = new Client.Cmx1Rubbers(_this.game)),
                        _this.group.addChild(_this.rubber.group);
                    var sprite = _this.create(0, 0, "comix1", "ramka2 instance 10000");
                    return sprite.anchor.setTo(0.5), (sprite = null), _this;
                }
                return (
                    __extends(Cmx1Anim2, _super),
                    (Cmx1Anim2.prototype.start = function () {
                        this.rubber.playAnim("anim"), Client.SoundManager.playSFX("cut1_cars");
                    }),
                    (Cmx1Anim2.prototype.update = function () {
                        this.rubber.update();
                    }),
                    (Cmx1Anim2.prototype.destroy = function () {
                        _super.prototype.destroy.call(this), (this.group = null), this.rubber.free(), (this.rubber = null);
                    }),
                    Cmx1Anim2
                );
            })(Phaser.Group);
            Client.Cmx1Anim2 = Cmx1Anim2;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Cmx1Anim3 = (function (_super) {
                function Cmx1Anim3(game) {
                    var _this = _super.call(this, game) || this;
                    (_this.x = 591), (_this.y = 450), (_this.group = _this.create(0, 0, "comix1", "bg3 instance 10000")), _this.group.anchor.setTo(0.5);
                    var mask = _this.game.make.graphics();
                    mask.beginFill(16711680, 0.4),
                        mask.drawRoundedRect(-193, -137, 386, 274, 80),
                        mask.endFill(),
                        _this.addChild(mask),
                        (_this.group.mask = mask),
                        (mask = null),
                        (_this.wheely = new Client.Cmx1Wheely2(_this.game)),
                        _this.group.addChild(_this.wheely.group);
                    var sprite = _this.create(0, 0, "comix1", "ramka3 instance 10000");
                    return sprite.anchor.setTo(0.5), (sprite = null), _this;
                }
                return (
                    __extends(Cmx1Anim3, _super),
                    (Cmx1Anim3.prototype.start = function () {
                        this.wheely.playAnim("anim");
                    }),
                    (Cmx1Anim3.prototype.update = function () {
                        this.wheely.update();
                    }),
                    (Cmx1Anim3.prototype.destroy = function () {
                        _super.prototype.destroy.call(this), (this.group = null), this.wheely.free(), (this.wheely = null);
                    }),
                    Cmx1Anim3
                );
            })(Phaser.Group);
            Client.Cmx1Anim3 = Cmx1Anim3;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Cmx1Rubbers = (function (_super) {
                function Cmx1Rubbers(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.complete = !1),
                        (_this.group = game.make.group()),
                        (_this.group.x = 20),
                        (_this.group.y = -278),
                        (_this.part13 = new Client.SASprite(game, 0, 0, "comix1", "car1 instance 10000")),
                        _this.group.addChild(_this.part13),
                        (_this.part12 = new Client.SASprite(game, 0, 0, "comix1", "car2 instance 10000")),
                        _this.group.addChild(_this.part12),
                        (_this.part11 = new Client.SASprite(game, 0, 0, "comix1", "car3 instance 10000")),
                        _this.group.addChild(_this.part11),
                        (_this.part10 = new Client.SASprite(game, 0, 0, "comix1", "coin instance 10000")),
                        _this.part10.pivot.set(26, 33),
                        _this.group.addChild(_this.part10),
                        (_this.part9 = new Client.SASprite(game, 0, 0, "comix1", "dust2 instance 10000")),
                        _this.part9.pivot.set(0, 1),
                        _this.part9.animations.add("anim", Phaser.Animation.generateFrameNames("dust2 instance 1", 0, 23, "", 4), 30, !1),
                        _this.group.addChild(_this.part9),
                        (_this.part8 = new Client.SASprite(game, 0, 0, "comix1", "dust2 instance 10000")),
                        _this.part8.pivot.set(0, 1),
                        _this.part8.animations.add("anim", Phaser.Animation.generateFrameNames("dust2 instance 1", 0, 23, "", 4), 30, !1),
                        _this.group.addChild(_this.part8),
                        (_this.part7 = new Client.SASprite(game, 0, 0, "comix1", "dust2 instance 10000")),
                        _this.part7.pivot.set(0, 1),
                        _this.part7.animations.add("anim", Phaser.Animation.generateFrameNames("dust2 instance 1", 0, 23, "", 4), 30, !1),
                        _this.group.addChild(_this.part7),
                        (_this.part6 = new Client.SASprite(game, 0, 0, "comix1", "ulika instance 10000")),
                        _this.part6.pivot.set(0, 3),
                        _this.group.addChild(_this.part6),
                        (_this.part5 = new Client.SASprite(game, 0, 0, "comix1", "baks instance 10000")),
                        _this.group.addChild(_this.part5),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "comix1", "baks instance 10000")),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "comix1", "baks instance 10000")),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "comix1", "baks instance 10000")),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "comix1", "redShine instance 10000")),
                        _this.group.addChild(_this.part1),
                        _this.setParts("anim"),
                        _this
                    );
                }
                return (
                    __extends(Cmx1Rubbers, _super),
                    (Cmx1Rubbers.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (17 === this.counterAnim
                                ? this.startTween(this.part13, 68, { x: -445, skX: -20, scY: 1.07 }, !0)
                                : 21 === this.counterAnim
                                ? ((this.part1.visible = !0), this.setPart(this.part1, { x: -58, y: -45, scX: 2.24, scY: 2.24 }, !0))
                                : 27 === this.counterAnim
                                ? (this.part1.visible = !1)
                                : 33 === this.counterAnim
                                ? (this.part1.visible = !0)
                                : 39 === this.counterAnim
                                ? (this.part1.visible = !1)
                                : 43 === this.counterAnim
                                ? ((this.part9.visible = !0), this.part9.animations.play("anim"), this.setPart(this.part9, { x: 171, y: 332, skY: 180, scX: 4.73, scY: 4.73 }, !0), this.startTween(this.part9, 40, { alpha: 0 }, !0))
                                : 45 === this.counterAnim
                                ? (this.part1.visible = !0)
                                : 51 === this.counterAnim
                                ? ((this.part1.visible = !1),
                                  (this.part10.visible = !0),
                                  this.setPart(this.part10, { x: 335, y: 259, scX: 0.78, scY: 0.78 }, !0),
                                  this.startTween(this.part10, 66, { x: -260 }, !0),
                                  this.startTween(this.part12, 70, { x: -431, skX: -11, scY: 1.02 }, !0))
                                : 57 === this.counterAnim
                                ? (this.part1.visible = !0)
                                : 63 === this.counterAnim
                                ? (this.part1.visible = !1)
                                : 69 === this.counterAnim
                                ? (this.part1.visible = !0)
                                : 75 === this.counterAnim
                                ? ((this.part1.visible = !1),
                                  (this.part8.visible = !0),
                                  this.part8.animations.play("anim"),
                                  this.setPart(this.part8, { x: 171, y: 332, skY: 180, scX: 4.73, scY: 4.73 }, !0),
                                  this.startTween(this.part8, 40, { alpha: 0 }, !0))
                                : 81 === this.counterAnim
                                ? (this.part1.visible = !0)
                                : 85 === this.counterAnim
                                ? ((this.part9.visible = !1), this.startTween(this.part11, 68, { x: -420, y: 236, skX: -12, scY: 1.19 }, !0))
                                : 87 === this.counterAnim
                                ? ((this.part1.visible = !1), (this.part13.visible = !1))
                                : 93 === this.counterAnim
                                ? (this.part1.visible = !0)
                                : 99 === this.counterAnim
                                ? (this.part1.visible = !1)
                                : 105 === this.counterAnim
                                ? (this.part1.visible = !0)
                                : 107 === this.counterAnim
                                ? ((this.part7.visible = !0), this.part7.animations.play("anim"), this.setPart(this.part7, { x: 171, y: 332, skY: 180, scX: 4.73, scY: 4.73 }, !0), this.startTween(this.part7, 40, { alpha: 0 }, !0))
                                : 109 === this.counterAnim
                                ? ((this.part2.visible = !0), this.setPart(this.part2, { x: -145, y: 265, skX: -15, skY: -15 }, !0), this.startTween(this.part2, 10, { x: -119, y: 249, skX: -45, skY: -45 }, !0))
                                : 111 === this.counterAnim
                                ? (this.part1.visible = !1)
                                : 117 === this.counterAnim
                                ? ((this.part1.visible = !0), (this.part8.visible = !1))
                                : 119 === this.counterAnim
                                ? (this.startTween(this.part2, 10, { x: -86, y: 268, skX: -90, skY: -90 }, !0), (this.part10.visible = !1))
                                : 123 === this.counterAnim
                                ? ((this.part1.visible = !1),
                                  (this.part3.visible = !0),
                                  this.setPart(this.part3, { x: -193, y: 234, skX: -15, skY: -15 }, !0),
                                  this.startTween(this.part3, 10, { x: -151, y: 206 }, !0),
                                  (this.part12.visible = !1))
                                : 129 === this.counterAnim
                                ? ((this.part1.visible = !0), this.setPart(this.part1, { x: -57 }, !0), this.startTween(this.part2, 10, { x: -44, y: 293, skX: -165, skY: -165 }, !0))
                                : 131 === this.counterAnim
                                ? ((this.part4.visible = !0),
                                  this.setPart(this.part4, { x: -164, y: 264, skX: -60, skY: -60 }, !0),
                                  this.startTween(this.part4, 10, { x: -117, y: 294 }, !0),
                                  (this.part6.visible = !0),
                                  this.setPart(this.part6, { x: -51, y: 317, skX: 30, skY: 30, scX: 0.49, scY: 0.49, alpha: 0 }, !0),
                                  this.startTween(this.part6, 4, { y: 293, scX: 0.52, scY: 0.52, alpha: 0.5 }, !0))
                                : 133 === this.counterAnim
                                ? this.startTween(this.part3, 10, { x: -113, y: 204, skX: -90, skY: -90 }, !0)
                                : 135 === this.counterAnim
                                ? ((this.part1.visible = !1), this.startTween(this.part6, 4, { x: -45, y: 268, scX: 0.55, scY: 0.55, alpha: 1 }, !0))
                                : 139 === this.counterAnim
                                ? (this.startTween(this.part2, 10, { x: -22, y: 333, skX: 105, skY: 105 }, !0), this.startTween(this.part6, 4, { x: -30, y: 256 }, !0))
                                : 141 === this.counterAnim
                                ? ((this.part1.visible = !0), this.setPart(this.part1, { x: -58 }, !0), this.startTween(this.part4, 10, { x: -78, y: 311, skX: -135, skY: -135 }, !0))
                                : 143 === this.counterAnim
                                ? (this.startTween(this.part3, 10, { x: -64, y: 231, skX: 126, skY: 126 }, !0),
                                  (this.part5.visible = !0),
                                  this.setPart(this.part5, { x: -164, y: 236 }, !0),
                                  this.startTween(this.part5, 10, { x: -105, y: 230, skX: -120, skY: -120 }, !0),
                                  this.startTween(this.part6, 8, { x: -24, y: 257, skX: 0, skY: 0, scX: 0.62, scY: 0.62 }, !0))
                                : 147 === this.counterAnim
                                ? (this.part1.visible = !1)
                                : 149 === this.counterAnim
                                ? (this.startTween(this.part2, 12, { x: -37, y: 343, skX: 0, skY: 0, alpha: 0 }, !0), (this.part7.visible = !1))
                                : 151 === this.counterAnim
                                ? (this.startTween(this.part4, 10, { x: -39, y: 328, skX: 67, skY: 67 }, !0), this.startTween(this.part6, 6, { x: -17, y: 261 }, !0))
                                : 153 === this.counterAnim
                                ? ((this.part1.visible = !0), this.startTween(this.part3, 10, { y: 292, skX: -39, skY: -39 }, !0), this.startTween(this.part5, 10, { x: -44, y: 228, skX: 157, skY: 157 }, !0))
                                : 155 === this.counterAnim
                                ? (this.part11.visible = !1)
                                : 157 === this.counterAnim
                                ? this.startTween(this.part6, 18, { x: 0, y: 339 }, !0)
                                : 159 === this.counterAnim
                                ? (this.part1.visible = !1)
                                : 161 === this.counterAnim
                                ? this.startTween(this.part4, 10, { x: -53, y: 354, skX: -44, skY: -44 }, !0)
                                : 163 === this.counterAnim
                                ? ((this.part2.visible = !1), this.startTween(this.part3, 12, { x: -72, y: 344, alpha: 0 }, !0), this.startTween(this.part5, 10, { x: -20, y: 240, skX: 82, skY: 82 }, !0))
                                : 165 === this.counterAnim
                                ? (this.part1.visible = !0)
                                : 171 === this.counterAnim
                                ? ((this.part1.visible = !1), this.startTween(this.part4, 12, { alpha: 0 }, !0))
                                : 173 === this.counterAnim
                                ? this.startTween(this.part5, 10, { x: -19, y: 284, skX: -32, skY: -32 }, !0)
                                : 175 === this.counterAnim
                                ? this.setPart(this.part6, { x: 8, y: 336, skX: 30, skY: 30 }, !0)
                                : 177 === this.counterAnim
                                ? ((this.part1.visible = !0), (this.part3.visible = !1), this.startTween(this.part6, 4, { y: 332 }, !0))
                                : 181 === this.counterAnim
                                ? ((this.part1.visible = !1), this.startTween(this.part6, 4, { y: 336 }, !0))
                                : 183 === this.counterAnim
                                ? this.startTween(this.part5, 12, { x: -13, y: 333, alpha: 0 }, !0)
                                : 185 === this.counterAnim
                                ? ((this.part4.visible = !1), this.startTween(this.part6, 6, { y: 332 }, !0))
                                : 187 === this.counterAnim
                                ? (this.part1.visible = !0)
                                : 191 === this.counterAnim
                                ? this.startTween(this.part6, 4, { y: 340 }, !0)
                                : 193 === this.counterAnim
                                ? (this.part1.visible = !1)
                                : 195 === this.counterAnim && (this.animComplete(), (this.complete = !0)));
                    }),
                    (Cmx1Rubbers.prototype.setParts = function (value) {
                        "anim" === value &&
                            ((this.part1.visible = !1),
                            (this.part2.visible = !1),
                            (this.part3.visible = !1),
                            (this.part4.visible = !1),
                            (this.part5.visible = !1),
                            (this.part6.visible = !1),
                            (this.part7.visible = !1),
                            (this.part8.visible = !1),
                            (this.part9.visible = !1),
                            (this.part10.visible = !1),
                            this.setPart(this.part11, { x: 638, y: 233, angle: 0, scX: 1.15, scY: 1.15, skX: 0, skY: 0, alpha: 1 }, !0),
                            this.setPart(this.part12, { x: 437, y: 209, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                            this.setPart(this.part13, { x: 214, y: 274, angle: 0, scX: 1, scY: 1.06, skX: -19, skY: 0, alpha: 1 }, !0));
                    }),
                    (Cmx1Rubbers.prototype.free = function () {
                        (this.group = null),
                            (this.part13 = null),
                            (this.part12 = null),
                            (this.part11 = null),
                            (this.part10 = null),
                            (this.part9 = null),
                            (this.part8 = null),
                            (this.part7 = null),
                            (this.part6 = null),
                            (this.part5 = null),
                            (this.part4 = null),
                            (this.part3 = null),
                            (this.part2 = null),
                            (this.part1 = null);
                    }),
                    Cmx1Rubbers
                );
            })(Client.BasicSimpleAnim);
            Client.Cmx1Rubbers = Cmx1Rubbers;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Cmx1Ulika = (function (_super) {
                function Cmx1Ulika(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.game = game),
                        (_this.group = new Client.SAGroup(game, 0, 0)),
                        (_this.part1 = new Client.SimpleButton(game, 0, 0, "comix1", "carN", !1)),
                        _this.part1.pivot.set(49, 24),
                        _this.part1.onInputDown.addOnce(_this.playA, _this),
                        _this.part1.activate(),
                        _this.group.addChild(_this.part1),
                        _this.playAnim("idle", -1),
                        _this
                    );
                }
                return (
                    __extends(Cmx1Ulika, _super),
                    (Cmx1Ulika.prototype.playA = function () {
                        this.playAnim("hide"), Client.SoundManager.playSFX("questClick");
                    }),
                    (Cmx1Ulika.prototype.updateAnimation = function () {
                        "idle" === this.currAnim
                            ? 1 === this.counterAnim
                                ? this.startTween(this.part1, 28, { scX: 1.2, scY: 1.2 }, !0)
                                : 29 === this.counterAnim
                                ? this.startTween(this.part1, 30, { scX: 1, scY: 1 }, !0)
                                : 59 === this.counterAnim && this.animComplete()
                            : "hide" === this.currAnim &&
                              (1 === this.counterAnim
                                  ? this.startTween(this.part1, 50, { x: -83, y: 44, scX: 0.72, scY: 0.72, alpha: 0 }, !0)
                                  : 51 === this.counterAnim && (this.animComplete(), (Client.LevelManager.getInstance().currentLevel = 3), this.game.state.start(SceneList.LevelBuilder, !0, !1)));
                    }),
                    (Cmx1Ulika.prototype.setParts = function (value) {
                        "idle" === value
                            ? this.setPart(this.part1, { x: 75, y: 25, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0)
                            : "hide" === value && this.setPart(this.part1, { x: 75, y: 25, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0);
                    }),
                    (Cmx1Ulika.prototype.free = function () {
                        (this.group = null), (this.part1 = null), (this.game = null);
                    }),
                    Cmx1Ulika
                );
            })(Client.BasicSimpleAnim);
            Client.Cmx1Ulika = Cmx1Ulika;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Cmx1Wheely1 = (function (_super) {
                function Cmx1Wheely1(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.complete = !1),
                        (_this.group = game.make.group()),
                        (_this.group.x = -500),
                        (_this.group.y = 30),
                        (_this.part13 = new Client.SASprite(game, 0, 0, "comix1", "dust instance 10000")),
                        _this.part13.pivot.set(-25, 12),
                        _this.part13.animations.add("anim", Phaser.Animation.generateFrameNames("dust instance 1", 0, 20, "", 4), 30, !1),
                        _this.group.addChild(_this.part13),
                        (_this.part10 = new Client.SASprite(game, 0, 0, "comix1", "car_corpus instance 10000")),
                        _this.part10.pivot.set(5, 5),
                        _this.group.addChild(_this.part10),
                        (_this.part12 = new Client.SASprite(game, 0, 0, "comix1", "backWheel instance 10000")),
                        _this.part12.anchor.setTo(0.5),
                        _this.group.addChild(_this.part12),
                        (_this.part11 = new Client.SASprite(game, 0, 0, "comix1", "backWheel instance 10000")),
                        _this.part11.anchor.setTo(0.5),
                        _this.group.addChild(_this.part11),
                        (_this.part9 = new Client.SASprite(game, 0, 0, "comix1", "bubble instance 10000")),
                        _this.part9.pivot.set(40, 52),
                        _this.group.addChild(_this.part9),
                        (_this.part8 = new Client.SASprite(game, 0, 0, "comix1", "bubbleGold instance 10000")),
                        _this.part8.pivot.set(40, 52),
                        _this.part8.animations.add("anim", Phaser.Animation.generateFrameNames("bubbleGold instance 1", 0, 48, "", 4), 30, !0),
                        _this.part8.animations.play("anim"),
                        _this.group.addChild(_this.part8),
                        (_this.part7 = new Client.SASprite(game, 0, 0, "comix1", "question instance 10000")),
                        _this.group.addChild(_this.part7),
                        (_this.part6 = new Client.SASprite(game, 0, 0, "comix1", "carWhiteEyes instance 10000")),
                        _this.part6.pivot.set(0, 0),
                        _this.group.addChild(_this.part6),
                        (_this.part5 = new Client.SASprite(game, 0, 0, "comix1", "eyescentr instance 10000")),
                        _this.group.addChild(_this.part5),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "comix1", "eyescentr instance 10000")),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "comix1", "signalWave instance 10000")),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "comix1", "bubble2 instance 10000")),
                        _this.part2.pivot.set(1, 1),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "comix1", "signal instance 10000")),
                        _this.part1.pivot.set(3, 3),
                        _this.part1.animations.add("anim", Phaser.Animation.generateFrameNames("signal instance 1", 0, 49, "", 4), 30, !0),
                        _this.group.addChild(_this.part1),
                        _this.setParts("anim"),
                        _this
                    );
                }
                return (
                    __extends(Cmx1Wheely1, _super),
                    (Cmx1Wheely1.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? this.startTween(this.part8, 58, { x: 735 }, !0)
                                : 51 === this.counterAnim
                                ? (this.startTween(this.part4, 90, { x: 424, y: -18 }, !0),
                                  this.startTween(this.part5, 90, { x: 439 }, !0),
                                  this.startTween(this.part6, 34, { x: 743, y: -49 }, !0),
                                  this.startTween(this.part11, 12, { x: 1008, skX: -90, skY: -90 }, !0),
                                  this.startTween(this.part12, 12, { x: 891, skX: -90, skY: -90 }, !0),
                                  this.startTween(this.part10, 34, { x: 930, y: -31 }, !0))
                                : 59 === this.counterAnim
                                ? this.startTween(this.part8, 22, { x: 742, y: -82 }, !0)
                                : 63 === this.counterAnim
                                ? (this.startTween(this.part11, 12, { x: 938, skX: 177, skY: 177 }, !0), this.startTween(this.part12, 12, { x: 820, skX: 177, skY: 177 }, !0))
                                : 75 === this.counterAnim
                                ? (this.startTween(this.part11, 10, { x: 879, skX: 79, skY: 79, scX: 1, scY: 1 }, !0), this.startTween(this.part12, 10, { x: 762, skX: 79, skY: 79, scX: 1, scY: 1 }, !0))
                                : 81 === this.counterAnim
                                ? this.setPart(this.part8, { x: 743, y: -84, alpha: 0.42 }, !0)
                                : 83 === this.counterAnim
                                ? this.startTween(this.part8, 18, { x: 645, y: -82, alpha: 1 }, !0)
                                : 85 === this.counterAnim
                                ? (this.startTween(this.part6, 16, { x: 647, y: -53 }, !0),
                                  this.startTween(this.part11, 10, { x: 821, skX: -22, skY: -22 }, !0),
                                  this.startTween(this.part12, 10, { x: 703, skX: -37, skY: -37 }, !0),
                                  this.startTween(this.part10, 16, { x: 836, y: -36 }, !0))
                                : 95 === this.counterAnim
                                ? (this.startTween(this.part11, 10, { x: 762, skX: -117, skY: -117 }, !0), this.startTween(this.part12, 10, { x: 645, skX: -121, skY: -121 }, !0))
                                : 101 === this.counterAnim
                                ? (this.startTween(this.part6, 40, { x: 412 }, !0), this.startTween(this.part8, 36, { x: 425, y: -76 }, !0), this.startTween(this.part10, 18, { x: 731, y: -34, skX: -1, skY: 179 }, !0))
                                : 105 === this.counterAnim
                                ? (this.startTween(this.part11, 10, { x: 704, skX: 163, skY: 163 }, !0), this.startTween(this.part12, 10, { x: 586, skX: 159, skY: 159 }, !0))
                                : 115 === this.counterAnim
                                ? (this.startTween(this.part11, 10, { x: 645, skX: 50, skY: 50 }, !0), this.startTween(this.part12, 10, { x: 528, skX: 37, skY: 37 }, !0))
                                : 119 === this.counterAnim
                                ? this.startTween(this.part10, 12, { x: 660, y: -39 }, !0)
                                : 125 === this.counterAnim
                                ? (this.startTween(this.part11, 8, { x: 599, skX: -69, skY: -69 }, !0), this.startTween(this.part12, 8, { x: 481, skX: -64, skY: -64 }, !0))
                                : 131 === this.counterAnim
                                ? this.startTween(this.part10, 10, { x: 601, y: -37 }, !0)
                                : 133 === this.counterAnim
                                ? (this.startTween(this.part11, 8, { x: 552, skX: -117, skY: -117 }, !0), this.startTween(this.part12, 8, { x: 434, skX: -128, skY: -128 }, !0))
                                : 137 === this.counterAnim
                                ? this.startTween(this.part8, 8, { x: 378, y: -75 }, !0)
                                : 141 === this.counterAnim
                                ? (this.startTween(this.part4, 8, { x: 338, y: -10 }, !0),
                                  this.startTween(this.part5, 8, { x: 356, y: -12 }, !0),
                                  this.startTween(this.part6, 8, { x: 326, y: -48 }, !0),
                                  this.startTween(this.part11, 12, { x: 441, y: 67, skX: 114, skY: 114, scX: 1, scY: 1 }, !0),
                                  this.startTween(this.part12, 12, { x: 334, skX: 105, skY: 105, scX: 1, scY: 1 }, !0),
                                  this.startTween(this.part10, 12, { x: 468, y: -48, skX: -7, skY: 173, scX: 1.27 }, !0))
                                : 145 === this.counterAnim
                                ? this.startTween(this.part8, 4, { x: 355, alpha: 0 }, !0)
                                : 149 === this.counterAnim
                                ? ((this.part2.visible = !0),
                                  this.setPart(this.part2, { x: 889, y: -121 }, !0),
                                  this.startTween(this.part2, 34, { x: 720, y: -144, scX: 1, scY: 1 }, !0),
                                  (this.part3.visible = !0),
                                  this.setPart(this.part3, { x: 889, y: -117 }, !0),
                                  this.startTween(this.part3, 22, { x: 749, y: -170, scY: 1.3, alpha: 0 }, !0),
                                  this.startTween(this.part4, 8, { x: 311, y: -12 }, !0),
                                  this.startTween(this.part5, 8, { x: 327, y: -10 }, !0),
                                  this.startTween(this.part6, 8, { x: 300, y: -49 }, !0),
                                  this.startTween(this.part8, 26, { x: 280, y: -69 }, !0),
                                  (this.part13.visible = !0),
                                  this.part13.animations.play("anim"),
                                  this.setPart(this.part13, { x: 287, y: 148, skX: -81, skY: -81, scX: 1.46, scY: 5.46 }, !0))
                                : 153 === this.counterAnim
                                ? (this.setPart(this.part11, { x: 436, y: 66, skX: 75, skY: 75, scX: 1, scY: 1 }, !0),
                                  this.startTween(this.part12, 4, { x: 329, skX: 60, skY: 60 }, !0),
                                  this.startTween(this.part10, 16, { x: 490, y: -35, skX: 0, skY: 180, scX: 1.4 }, !0))
                                : 155 === this.counterAnim
                                ? this.setPart(this.part11, { x: 437, skX: 62, skY: 62, scX: 1, scY: 1 }, !0)
                                : 157 === this.counterAnim
                                ? (this.startTween(this.part4, 6, { y: -15 }, !0),
                                  this.startTween(this.part5, 6, { y: -13 }, !0),
                                  this.startTween(this.part6, 6, { y: -51 }, !0),
                                  this.startTween(this.part11, 4, { x: 438, y: 69, skX: 45, skY: 45 }, !0),
                                  this.startTween(this.part12, 4, { x: 328, skX: 45, skY: 45 }, !0))
                                : 161 === this.counterAnim
                                ? (this.startTween(this.part11, 8, { y: 74 }, !0), this.startTween(this.part12, 8, { x: 321, y: 74 }, !0))
                                : 163 === this.counterAnim
                                ? (this.setPart(this.part4, { x: 315, skX: -2, skY: 178 }, !0), this.setPart(this.part5, { x: 337, y: -17 }, !0), this.startTween(this.part6, 88, { y: -52 }, !0))
                                : 165 === this.counterAnim
                                ? (this.startTween(this.part4, 12, { x: 317, y: -17 }, !0), this.startTween(this.part5, 12, { x: 340, y: -19 }, !0))
                                : 169 === this.counterAnim
                                ? (Client.SoundManager.playSFX("cut1_signaling"), this.startTween(this.part11, 82, { scX: 1, scY: 1 }, !0), this.startTween(this.part12, 82, { x: 320, scX: 1, scY: 1 }, !0))
                                : 175 === this.counterAnim
                                ? ((this.part7.visible = !0),
                                  this.setPart(this.part7, { x: 258, y: -133, scX: 1.37, scY: 1.37, alpha: 0 }, !0),
                                  this.startTween(this.part7, 14, { alpha: 1 }, !0),
                                  (this.part9.visible = !0),
                                  this.setPart(this.part9, { x: 280, y: -69, scX: 1.39, scY: 1.39, alpha: 0 }, !0),
                                  this.startTween(this.part9, 14, { alpha: 1 }, !0))
                                : 177 === this.counterAnim
                                ? (this.part8.visible = !1)
                                : 181 === this.counterAnim
                                ? this.setPart(this.part3, { x: 889, y: -117, scY: 1, alpha: 1 }, !0)
                                : 183 === this.counterAnim
                                ? ((this.part1.visible = !0), this.part1.animations.play("anim"), this.setPart(this.part1, { x: 742, y: -124 }, !0), this.startTween(this.part3, 22, { x: 749, y: -170, scY: 1.3, alpha: 0 }, !0))
                                : 219 === this.counterAnim
                                ? this.setPart(this.part3, { x: 889, y: -117, scY: 1, alpha: 1 }, !0)
                                : 221 === this.counterAnim
                                ? ((this.complete = !0), this.startTween(this.part3, 22, { x: 749, y: -170, scY: 1.3, alpha: 0 }, !0))
                                : 251 === this.counterAnim && (this.part1.animations.stop(), this.animComplete()));
                    }),
                    (Cmx1Wheely1.prototype.setParts = function (value) {
                        "anim" === value &&
                            ((this.part1.visible = !1),
                            (this.part2.visible = !1),
                            (this.part3.visible = !1),
                            this.setPart(this.part4, { x: 957, y: -19, angle: 0, scX: 1.18, scY: 1.69, skX: 4, skY: -176, alpha: 1 }, !0),
                            this.setPart(this.part5, { x: 972, y: -17, angle: 0, scX: 2.03, scY: 2.03, skX: 0, skY: 180, alpha: 1 }, !0),
                            this.setPart(this.part6, { x: 947, y: -53, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                            (this.part7.visible = !1),
                            this.setPart(this.part8, { x: 943, y: -59, angle: 0, scX: 1.39, scY: 1.39, skX: 0, skY: 0, alpha: 0 }, !0),
                            (this.part9.visible = !1),
                            this.setPart(this.part11, { x: 1078, y: 75, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                            this.setPart(this.part12, { x: 961, y: 75, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                            this.setPart(this.part10, { x: 1130, y: -35, angle: 0, scX: 1.4, scY: 1.4, skX: 0, skY: 180, alpha: 1 }, !0),
                            (this.part13.visible = !1));
                    }),
                    (Cmx1Wheely1.prototype.free = function () {
                        (this.group = null),
                            (this.part13 = null),
                            (this.part12 = null),
                            (this.part11 = null),
                            (this.part10 = null),
                            (this.part9 = null),
                            (this.part8 = null),
                            (this.part7 = null),
                            (this.part6 = null),
                            (this.part5 = null),
                            (this.part4 = null),
                            (this.part3 = null),
                            (this.part2 = null),
                            (this.part1 = null);
                    }),
                    Cmx1Wheely1
                );
            })(Client.BasicSimpleAnim);
            Client.Cmx1Wheely1 = Cmx1Wheely1;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Cmx1Wheely2 = (function (_super) {
                function Cmx1Wheely2(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = game.make.group()),
                        (_this.group.x = -200),
                        (_this.group.y = -145),
                        (_this.part11 = new Client.SASprite(game, 0, 0, "comix1", "shadow instance 10000")),
                        _this.part11.pivot.set(237, 135),
                        _this.group.addChild(_this.part11),
                        (_this.part8 = new Client.SASprite(game, 0, 0, "comix1", "car_corpus instance 10000")),
                        _this.part8.pivot.set(5, 5),
                        _this.group.addChild(_this.part8),
                        (_this.part10 = new Client.SASprite(game, 0, 0, "comix1", "backWheel instance 10000")),
                        _this.part10.anchor.setTo(0.5),
                        _this.group.addChild(_this.part10),
                        (_this.part9 = new Client.SASprite(game, 0, 0, "comix1", "backWheel instance 10000")),
                        _this.part9.anchor.setTo(0.5),
                        _this.group.addChild(_this.part9),
                        (_this.part7 = new Client.SASprite(game, 0, 0, "comix1", "carWhiteEyes2 instance 10000")),
                        _this.part7.pivot.set(21, 26),
                        _this.group.addChild(_this.part7),
                        (_this.part6 = new Client.SASprite(game, 0, 0, "comix1", "eyebrowman instance 10000")),
                        _this.group.addChild(_this.part6),
                        (_this.part5 = new Client.SASprite(game, 0, 0, "comix1", "eyebrowman instance 10000")),
                        _this.group.addChild(_this.part5),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "comix1", "bubble3 instance 10000")),
                        _this.part4.pivot.set(1, 1),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "comix1", "eyescentr instance 10000")),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "comix1", "eyescentr instance 10000")),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.Cmx1Ulika(game)),
                        _this.group.addChild(_this.part1.group),
                        _this.setParts("anim"),
                        _this
                    );
                }
                return (
                    __extends(Cmx1Wheely2, _super),
                    (Cmx1Wheely2.prototype.update = function () {
                        _super.prototype.update.call(this), this.part1.update();
                    }),
                    (Cmx1Wheely2.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? (this.startTween(this.part2, 46, { x: 135, y: 96 }, !0),
                                  this.startTween(this.part3, 46, { x: 108, y: 96 }, !0),
                                  this.startTween(this.part5, 46, { x: 148, y: 62 }, !0),
                                  this.startTween(this.part6, 46, { x: 101, y: 36 }, !0),
                                  this.startTween(this.part7, 46, { x: 120, y: 103 }, !0),
                                  this.startTween(this.part8, 46, { x: -110, y: 37, skX: 7, skY: 7 }, !0),
                                  this.startTween(this.part9, 46, { x: -58 }, !0),
                                  this.startTween(this.part10, 14, { x: -27 }, !0),
                                  this.startTween(this.part11, 46, { x: 26, y: 229, alpha: 0.46 }, !0))
                                : 15 === this.counterAnim
                                ? this.startTween(this.part10, 10, { x: 18, skX: 15, skY: -165 }, !0)
                                : 25 === this.counterAnim
                                ? this.startTween(this.part10, 10, { x: 62, skX: 78, skY: -102 }, !0)
                                : 35 === this.counterAnim
                                ? this.startTween(this.part10, 6, { x: 89, y: 220, skX: 121, skY: -59 }, !0)
                                : 41 === this.counterAnim
                                ? this.startTween(this.part10, 6, { x: 116, y: 221, skX: 151, skY: -29 }, !0)
                                : 47 === this.counterAnim
                                ? this.startTween(this.part8, 8, { x: -120, y: 43, skX: 5, skY: 5 }, !0)
                                : 51 === this.counterAnim
                                ? ((this.part4.visible = !0), this.setPart(this.part4, { x: 181, y: 48, alpha: 0 }, !0), this.startTween(this.part4, 12, { alpha: 1 }, !0))
                                : 55 === this.counterAnim
                                ? this.startTween(this.part8, 4, { x: -117, y: 36, skX: 7, skY: 7 }, !0)
                                : 63 === this.counterAnim && this.animComplete());
                    }),
                    (Cmx1Wheely2.prototype.setParts = function (value) {
                        "anim" === value &&
                            (this.setPart(this.part1.group, { x: 270, y: 230, angle: 0, scX: 0.9, scY: 1.17, skX: 55, skY: 15, alpha: 1 }, !0),
                            this.setPart(this.part2, { x: -82, y: 80, angle: 0, scX: 1.72, scY: 2.48, skX: 2, skY: 2, alpha: 1 }, !0),
                            this.setPart(this.part3, { x: -109, y: 77, angle: 0, scX: 2.97, scY: 2.97, skX: 0, skY: 0, alpha: 1 }, !0),
                            (this.part4.visible = !1),
                            this.setPart(this.part5, { x: -71, y: 51, angle: 0, scX: 2.15, scY: 2.97, skX: -10, skY: 170, alpha: 1 }, !0),
                            this.setPart(this.part6, { x: -119, y: 26, angle: 0, scX: 2.97, scY: 2.97, skX: 32, skY: 32, alpha: 1 }, !0),
                            this.setPart(this.part7, { x: -100, y: 92, angle: 0, scX: 1.47, scY: 1.47, skX: 0, skY: 180, alpha: 1 }, !0),
                            this.setPart(this.part8, { x: -338, y: 57, angle: 0, scX: 2.06, scY: 2.06, skX: 0, skY: 0, alpha: 1 }, !0),
                            this.setPart(this.part9, { x: -262, y: 219, angle: 0, scX: 1.45, scY: 1.45, skX: -45, skY: 135, alpha: 1 }, !0),
                            this.setPart(this.part10, { x: -89, y: 219, angle: 0, scX: 1.45, scY: 1.5, skX: -45, skY: 135, alpha: 1 }, !0),
                            this.setPart(this.part11, { x: -184, y: 234, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0));
                    }),
                    (Cmx1Wheely2.prototype.free = function () {
                        (this.group = null),
                            (this.part11 = null),
                            (this.part10 = null),
                            (this.part9 = null),
                            (this.part8 = null),
                            (this.part7 = null),
                            (this.part6 = null),
                            (this.part5 = null),
                            (this.part4 = null),
                            (this.part3 = null),
                            (this.part2 = null),
                            this.part1.free(),
                            (this.part1 = null);
                    }),
                    Cmx1Wheely2
                );
            })(Client.BasicSimpleAnim);
            Client.Cmx1Wheely2 = Cmx1Wheely2;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var MenuMagnifier = (function (_super) {
                function MenuMagnifier(game) {
                    var _this = _super.call(this) || this;
                    return (_this.group = game.make.group()), (_this.part1 = new Client.MenuMagnifier2(game)), _this.group.addChild(_this.part1.group), _this.playAnim("anim", -1), _this;
                }
                return (
                    __extends(MenuMagnifier, _super),
                    (MenuMagnifier.prototype.update = function () {
                        _super.prototype.update.call(this), this.part1.update();
                    }),
                    (MenuMagnifier.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (69 === this.counterAnim
                                ? this.startTween(this.part1.group, 42, { x: -13, y: -8, skX: -7, skY: -7, scX: 1.13, scY: 1.13 })
                                : 189 === this.counterAnim
                                ? this.startTween(this.part1.group, 20, { x: -1, y: -11, skX: 1, skY: 1 })
                                : 241 === this.counterAnim
                                ? this.startTween(this.part1.group, 10, { x: -30, y: -1, skX: -18, skY: -18 })
                                : 341 === this.counterAnim
                                ? this.startTween(this.part1.group, 58, { x: 0, y: 0, skX: 0, skY: 0, scX: 1, scY: 1 })
                                : 399 === this.counterAnim && this.animComplete());
                    }),
                    (MenuMagnifier.prototype.setParts = function (value) {
                        "anim" === value && this.setPart(this.part1.group, { x: 0, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 });
                    }),
                    (MenuMagnifier.prototype.free = function () {
                        (this.group = null), this.part1.free(), (this.part1 = null);
                    }),
                    MenuMagnifier
                );
            })(Client.BasicSimpleAnim);
            Client.MenuMagnifier = MenuMagnifier;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var MenuMagnifier2 = (function (_super) {
                function MenuMagnifier2(game) {
                    var _this = _super.call(this) || this;
                    (_this.group = new Client.SAGroup(game, 0, 0)),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "ui", "wheelyEye instance 10000")),
                        _this.part2.pivot.set(33, 63),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "ui", "wheelyMagnifier instance 10000")),
                        _this.part1.pivot.set(1, 1),
                        _this.group.addChild(_this.part1);
                    var mask = game.make.graphics();
                    return mask.beginFill(16711680, 0.5), mask.drawCircle(27, 27, 48), mask.endFill(), _this.group.addChild(mask), (_this.part2.mask = mask), (mask = null), _this.playAnim("anim", -1), _this;
                }
                return (
                    __extends(MenuMagnifier2, _super),
                    (MenuMagnifier2.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (69 === this.counterAnim
                                ? this.startTween(this.part2, 40, { x: 24, scX: 1.19, scY: 1.19 })
                                : 189 === this.counterAnim
                                ? this.startTween(this.part2, 14, { x: 20 })
                                : 241 === this.counterAnim
                                ? this.startTween(this.part2, 10, { x: 33, y: 52 })
                                : 341 === this.counterAnim
                                ? this.startTween(this.part2, 58, { x: 25, y: 50, scX: 0.86, scY: 0.86 })
                                : 399 === this.counterAnim && this.animComplete());
                    }),
                    (MenuMagnifier2.prototype.setParts = function (value) {
                        "anim" === value &&
                            (this.setPart(this.part1, { x: 0, y: 0, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }), this.setPart(this.part2, { x: 25, y: 50, angle: 0, scX: 0.86, scY: 0.86, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (MenuMagnifier2.prototype.free = function () {
                        (this.group = null), (this.part2 = null), (this.part1 = null);
                    }),
                    MenuMagnifier2
                );
            })(Client.BasicSimpleAnim);
            Client.MenuMagnifier2 = MenuMagnifier2;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var MenuThief = (function (_super) {
                function MenuThief(game) {
                    var _this = _super.call(this) || this;
                    return (_this.group = game.make.group()), (_this.part = new Client.MenuThief2(game)), _this.group.addChild(_this.part.group), _this.playAnim("anim", -1), _this;
                }
                return (
                    __extends(MenuThief, _super),
                    (MenuThief.prototype.update = function () {
                        _super.prototype.update.call(this), this.part.update();
                    }),
                    (MenuThief.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (1 === this.counterAnim
                                ? this.part.playAnim("anim")
                                : 51 === this.counterAnim
                                ? this.startTween(this.part.group, 28, { x: 0, y: 0 })
                                : 101 === this.counterAnim
                                ? this.startTween(this.part.group, 10, { x: -6, y: -2, skX: -6, skY: -6 })
                                : 281 === this.counterAnim
                                ? this.startTween(this.part.group, 12, { x: -4, y: -1, skX: -1, skY: -1 })
                                : 293 === this.counterAnim
                                ? this.startTween(this.part.group, 50, { x: 0, y: 0, skX: 0, skY: 0 })
                                : 343 === this.counterAnim
                                ? this.startTween(this.part.group, 20, { x: 62, y: 28 })
                                : 481 === this.counterAnim && this.animComplete());
                    }),
                    (MenuThief.prototype.setParts = function (value) {
                        "anim" === value && this.setPart(this.part.group, { x: 81, y: 12, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 });
                    }),
                    (MenuThief.prototype.free = function () {
                        (this.group = null), this.part.free(), (this.part = null);
                    }),
                    MenuThief
                );
            })(Client.BasicSimpleAnim);
            Client.MenuThief = MenuThief;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var MenuThief2 = (function (_super) {
                function MenuThief2(game) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.group = new Client.SAGroup(game, 0, 0)),
                        (_this.part5 = new Client.SASprite(game, 0, 0, "ui", "thiefPart1 instance 10000")),
                        _this.group.addChild(_this.part5),
                        (_this.part4 = new Client.SASprite(game, 0, 0, "ui", "thiefPart5 instance 10000")),
                        _this.group.addChild(_this.part4),
                        (_this.part3 = new Client.SASprite(game, 0, 0, "ui", "thiefPart5 instance 10000")),
                        _this.group.addChild(_this.part3),
                        (_this.part2 = new Client.SASprite(game, 0, 0, "ui", "thiefPart4 instance 10000")),
                        _this.group.addChild(_this.part2),
                        (_this.part1 = new Client.SASprite(game, 0, 0, "ui", "thiefPart2 instance 10000")),
                        _this.group.addChild(_this.part1),
                        _this.setParts("anim"),
                        _this
                    );
                }
                return (
                    __extends(MenuThief2, _super),
                    (MenuThief2.prototype.updateAnimation = function () {
                        "anim" === this.currAnim &&
                            (75 === this.counterAnim
                                ? (this.setPart(this.part3, { y: 38 }), this.setPart(this.part4, { y: 42 }))
                                : 153 === this.counterAnim
                                ? (this.setPart(this.part3, { x: 26, y: 43 }), this.setPart(this.part4, { x: 53, y: 47 }))
                                : 161 === this.counterAnim
                                ? (this.startTween(this.part1, 30, { y: 46 }), this.startTween(this.part2, 30, { x: 27, y: 13 }))
                                : 217 === this.counterAnim
                                ? (this.startTween(this.part1, 8, { y: 48 }), this.startTween(this.part2, 8, { x: 28, y: 10 }))
                                : 253 === this.counterAnim
                                ? (this.startTween(this.part1, 8, { y: 46 }), this.startTween(this.part2, 8, { x: 27, y: 13 }))
                                : 367 === this.counterAnim && this.animComplete());
                    }),
                    (MenuThief2.prototype.setParts = function (value) {
                        "anim" === value &&
                            (this.setPart(this.part1, { x: 19, y: 55, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part2, { x: 32, y: 3, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part3, { x: 23, y: 42, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part4, { x: 50, y: 46, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            this.setPart(this.part5, { x: -10, y: -1, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (MenuThief2.prototype.free = function () {
                        (this.group = null), (this.part5 = null), (this.part4 = null), (this.part3 = null), (this.part2 = null), (this.part1 = null);
                    }),
                    MenuThief2
                );
            })(Client.BasicSimpleAnim);
            Client.MenuThief2 = MenuThief2;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var PanelQuest = (function () {
                function PanelQuest(game, _x, _y) {
                    (this.carFounded = !1),
                        (this.wheelFounded = !1),
                        (this.game = game),
                        (this.panelQuest = game.make.sprite(740, 30, "ui", "panel_quest instance 10000")),
                        (this.panelQuest.fixedToCamera = !0),
                        this.panelQuest.anchor.setTo(0.5),
                        Client.LevelBuilder.instance.UILayer.addChild(this.panelQuest),
                        !0 === Client.GameManager.instance.level.questCarFounded &&
                            ((this.car = this.game.make.sprite(19, 0, "ui", "winCar instance 10009")), this.car.scale.setTo(0.55), this.car.anchor.setTo(0.5), this.panelQuest.addChild(this.car), (this.carFounded = !0)),
                        !0 === Client.GameManager.instance.level.questWheelFounded &&
                            ((this.wheel = this.game.make.sprite(-23, 2, "ui", "winWheel instance 10009")), this.wheel.scale.setTo(0.52), this.wheel.anchor.setTo(0.5), this.panelQuest.addChild(this.wheel), (this.wheelFounded = !0));
                }
                return (
                    (PanelQuest.prototype.foundCar = function () {
                        !0 !== this.carFounded &&
                            ((this.carFounded = !0),
                            (this.car = this.game.make.sprite(19, 0, "ui")),
                            this.car.animations.add("anim", Phaser.Animation.generateFrameNames("winCar instance 1", 0, 14, "", 4), 30).onComplete.addOnce(this.carShowComplete, this),
                            this.car.animations.play("anim"),
                            this.car.scale.setTo(0.55),
                            this.car.anchor.setTo(0.5),
                            this.panelQuest.addChild(this.car),
                            Client.SoundManager.playSFX("questClick"),
                            Client.DataManager.getInstance().saveData("questCar" + Client.LevelManager.getInstance().currentLevel, 1));
                    }),
                    (PanelQuest.prototype.carShowComplete = function () {
                        this.game.add.tween(this.car.scale).to({ x: 0.63, y: 0.63 }, 200, Phaser.Easing.Linear.None, !0, 0, 2, !0);
                    }),
                    (PanelQuest.prototype.foundWheel = function () {
                        !0 !== this.wheelFounded &&
                            ((this.wheelFounded = !0),
                            (this.wheel = this.game.make.sprite(-23, 2, "ui")),
                            this.wheel.animations.add("anim", Phaser.Animation.generateFrameNames("winWheel instance 1", 0, 14, "", 4), 30).onComplete.addOnce(this.wheelShowComplete, this),
                            this.wheel.animations.play("anim"),
                            this.wheel.scale.setTo(0.52),
                            this.wheel.anchor.setTo(0.5),
                            this.panelQuest.addChild(this.wheel),
                            Client.SoundManager.playSFX("questClick"),
                            Client.DataManager.getInstance().saveData("questWheel" + Client.LevelManager.getInstance().currentLevel, 1));
                    }),
                    (PanelQuest.prototype.wheelShowComplete = function () {
                        this.game.add.tween(this.wheel.scale).to({ x: 0.6, y: 0.6 }, 200, Phaser.Easing.Linear.None, !0, 0, 2, !0);
                    }),
                    (PanelQuest.prototype.free = function () {
                        (this.game = null), (this.panelQuest = null), (this.car = null), (this.wheel = null);
                    }),
                    PanelQuest
                );
            })();
            Client.PanelQuest = PanelQuest;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var RobberyCar2 = (function (_super) {
                function RobberyCar2(_game, _container) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.move = !1),
                        (_this.group = new Phaser.Group(_game)),
                        _container.addChildAt(_this.group, 1),
                        (_this.body = _this.group.create(0, 0, "robbery", "car2Body instance 10000")),
                        _this.body.pivot.set(98, 71),
                        (_this.wheel1 = _this.group.create(-40, 48, "robbery", "car2Wheel instance 10000")),
                        _this.wheel1.anchor.set(0.5),
                        (_this.wheel2 = _this.group.create(53, 50, "robbery", "car2Wheel instance 10000")),
                        _this.wheel2.anchor.set(0.5),
                        _game.add.tween(_this.body).to({ y: _this.body.y + 3 }, 500, "Linear", !0, 0, -1, !0),
                        _this
                    );
                }
                return (
                    __extends(RobberyCar2, _super),
                    (RobberyCar2.prototype.update = function () {
                        this.move && ((this.wheel1.angle -= 3), (this.wheel2.angle -= 3));
                    }),
                    (RobberyCar2.prototype.free = function () {
                        (this.group = null), (this.body = null), (this.wheel1 = null), (this.wheel2 = null);
                    }),
                    RobberyCar2
                );
            })(Client.BasicElement);
            Client.RobberyCar2 = RobberyCar2;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var RobberyScene = (function (_super) {
                function RobberyScene(_game, _container, _topLayer) {
                    var _this = _super.call(this) || this;
                    return (
                        (_this.lampTimer = 0),
                        (_this.hideLamps = !1),
                        (_this.smokeTimer = 9),
                        (_this.hideSmoke = !1),
                        (_this.closeBtn = null),
                        (_this.currentAct = 0),
                        (_this.car3Move = !1),
                        (_this.game = _game),
                        (_this.topLayer = _topLayer),
                        (_this.group = _this.game.make.group()),
                        (_this.group.x = 0),
                        (_this.group.y = 0),
                        _container.addChild(_this.group),
                        (_this.part46 = new Client.SASprite(_this.game, 0, 0, "robbery", "trampoline instance 10000")),
                        _this.part46.pivot.set(0, 0),
                        _this.group.addChild(_this.part46),
                        (_this.part44 = new Client.SASprite(_this.game, 0, 0, "robbery", "handler instance 10000")),
                        _this.part44.pivot.set(0, 0),
                        _this.group.addChild(_this.part44),
                        (_this.part43 = new Client.SASprite(_this.game, 0, 0, "robbery", "car1 instance 10000")),
                        _this.part43.pivot.set(89, 47),
                        _this.group.addChild(_this.part43),
                        (_this.part42 = new Client.SASprite(_this.game, 0, 0, "robbery", "car1Wheels instance 10000")),
                        _this.part42.animations.add("anim", Phaser.Animation.generateFrameNames("car1Wheels instance 1", 0, 48, "", 4), 30, !0),
                        _this.part42.animations.add("anim2", Phaser.Animation.generateFrameNames("car1Wheels instance 1", 48, 0, "", 4), 30, !0),
                        _this.part42.pivot.set(60, 17),
                        _this.group.addChild(_this.part42),
                        (_this.camera3 = new Client.SASprite(_this.game, 0, 0, "robbery", "camera instance 10000")),
                        _this.camera3.pivot.set(23, 23),
                        _this.camera3.animations.add("off", Phaser.Animation.generateFrameNames("camera instance 1", 0, 7, "", 4), 30, !1),
                        _this.group.addChild(_this.camera3),
                        (_this.camera2 = new Client.SASprite(_this.game, 0, 0, "robbery", "camera instance 10000")),
                        _this.camera2.pivot.set(23, 23),
                        _this.camera2.animations.add("off", Phaser.Animation.generateFrameNames("camera instance 1", 0, 7, "", 4), 30, !1),
                        _this.group.addChild(_this.camera2),
                        (_this.camera1 = new Client.SASprite(_this.game, 0, 0, "robbery", "camera instance 10000")),
                        _this.camera1.pivot.set(23, 23),
                        _this.camera1.animations.add("off", Phaser.Animation.generateFrameNames("camera instance 1", 0, 7, "", 4), 30, !1),
                        _this.group.addChild(_this.camera1),
                        (_this.energy3 = new Client.SASprite(_this.game, 0, 0, "robbery", "energy instance 10000")),
                        _this.energy3.pivot.set(-3, -5),
                        _this.group.addChild(_this.energy3),
                        (_this.energy2 = new Client.SASprite(_this.game, 0, 0, "robbery", "energy instance 10000")),
                        _this.energy2.pivot.set(-3, -5),
                        _this.group.addChild(_this.energy2),
                        (_this.energy1 = new Client.SASprite(_this.game, 0, 0, "robbery", "energy instance 10000")),
                        _this.energy1.pivot.set(-3, -5),
                        _this.group.addChild(_this.energy1),
                        (_this.part33 = new Client.SASprite(_this.game, 0, 0, "robbery", "gBody instance 10000")),
                        _this.part33.pivot.set(0, 0),
                        _this.group.addChild(_this.part33),
                        (_this.part31 = new Client.SASprite(_this.game, 0, 0, "robbery", "gMark instance 10000")),
                        _this.part31.pivot.set(10, 12),
                        _this.group.addChild(_this.part31),
                        (_this.part30 = new Client.SASprite(_this.game, 0, 0, "robbery", "gPart1 instance 10000")),
                        _this.part30.pivot.set(15, 9),
                        _this.group.addChild(_this.part30),
                        (_this.part29 = new Client.SASprite(_this.game, 0, 0, "robbery", "gHat instance 10000")),
                        _this.part29.pivot.set(25, 12),
                        _this.group.addChild(_this.part29),
                        (_this.part24 = new Client.SASprite(_this.game, 0, 0, "robbery", "gEye instance 10000")),
                        _this.part24.pivot.set(48, 11),
                        _this.group.addChild(_this.part24),
                        (_this.part23 = new Client.SASprite(_this.game, 0, 0, "robbery", "gsmalEye instance 10000")),
                        _this.part23.pivot.set(0, 0),
                        _this.group.addChild(_this.part23),
                        (_this.part22 = new Client.SASprite(_this.game, 0, 0, "robbery", "gsmalEye instance 10000")),
                        _this.part22.pivot.set(0, 0),
                        _this.group.addChild(_this.part22),
                        (_this.part21 = new Client.SASprite(_this.game, 0, 0, "robbery", "gGlasses instance 10000")),
                        _this.part21.pivot.set(27, 14),
                        _this.group.addChild(_this.part21),
                        (_this.part20 = new Client.SASprite(_this.game, 0, 0, "robbery", "gWheels instance 10000")),
                        _this.part20.pivot.set(58, 21),
                        _this.group.addChild(_this.part20),
                        (_this.part5 = new Client.SASprite(_this.game, 0, 0, "robbery", "door instance 10000")),
                        _this.part5.pivot.set(27, 62),
                        _this.group.addChild(_this.part5),
                        (_this.part15 = new Client.SASprite(_this.game, 0, 0, "robbery", "dude_body instance 10000")),
                        _this.part15.pivot.set(82, 41),
                        _topLayer.addChild(_this.part15),
                        (_this.part17 = new Client.SASprite(_this.game, 49, 75, "robbery", "car3Wheel instance 10000")),
                        _this.part17.pivot.set(17, 17),
                        _this.part15.addChild(_this.part17),
                        (_this.part16 = new Client.SASprite(_this.game, 127, 75, "robbery", "car3Wheel instance 10000")),
                        _this.part16.pivot.set(17, 17),
                        _this.part15.addChild(_this.part16),
                        (_this.part14 = new Client.SASprite(_this.game, 0, 0, "robbery", "car3Hat instance 10000")),
                        _this.part14.anchor.set(0.5),
                        _topLayer.addChild(_this.part14),
                        (_this.part13 = new Client.SASprite(_this.game, 0, 0, "robbery", "car3cloth instance 10000")),
                        _this.part13.pivot.set(0, 0),
                        _topLayer.addChild(_this.part13),
                        (_this.part12 = new Client.SASprite(_this.game, 0, 0, "robbery", "car3Eye instance 10000")),
                        _this.part12.pivot.set(21, 30),
                        _topLayer.addChild(_this.part12),
                        (_this.part11 = new Client.SASprite(_this.game, 0, 0, "robbery", "money instance 10000")),
                        _this.part11.animations.add("anim", Phaser.Animation.generateFrameNames("money instance 1", 0, 35, "", 4), 30, !0),
                        _this.part11.pivot.set(80, -8),
                        _topLayer.addChild(_this.part11),
                        (_this.part9 = new Client.SASprite(_this.game, 0, 0, "robbery", "car3Cloud instance 10000")),
                        _this.part9.anchor.set(0.5),
                        _topLayer.addChild(_this.part9),
                        (_this.part8 = new Client.SASprite(_this.game, 0, 0, "robbery", "safeWheel2 instance 10000")),
                        _this.part8.anchor.set(0.5),
                        _topLayer.addChild(_this.part8),
                        (_this.part7 = new Client.SASprite(_this.game, 0, 0, "robbery", "safeWheel1 instance 10000")),
                        _this.part7.pivot.set(13, 14),
                        _topLayer.addChild(_this.part7),
                        _this
                    );
                }
                return (
                    __extends(RobberyScene, _super),
                    (RobberyScene.prototype.animComplete = function () {
                        _super.prototype.animComplete.call(this), this.showButton();
                    }),
                    (RobberyScene.prototype.showButton = function () {
                        this.closeBtn ||
                            ((this.closeBtn = new Client.SimpleButton(this.game, 740, 540, "ui", "btnBigClose", !1)),
                            this.closeBtn.activate(),
                            this.closeBtn.events.onInputDown.add(this.closeComix, this),
                            (this.closeBtn.alpha = 0),
                            this.topLayer.addChild(this.closeBtn),
                            this.game.add.tween(this.closeBtn).to({ alpha: 1 }, 300, "Linear", !0));
                    }),
                    (RobberyScene.prototype.closeComix = function () {
                        this.closeBtn.deactivate(),
                            1 === this.currentAct ? (Client.LevelManager.instance.currentLevel = 7) : 2 === this.currentAct ? (Client.LevelManager.instance.currentLevel = 11) : (Client.LevelManager.instance.currentLevel = 15),
                            this.game.state.start(SceneList.LevelBuilder, !0, !1);
                    }),
                    (RobberyScene.prototype.playAct = function (act, _container) {
                        (this.currentAct = act), this.addLamps(), (2 !== this.currentAct && 3 !== this.currentAct) || (this.offCams(!0), this.addCar2("act" + act, _container)), this.playAnim("act" + this.currentAct);
                    }),
                    (RobberyScene.prototype.addCar2 = function (value, _container) {
                        (this.car2 = new Client.RobberyCar2(this.game, _container)),
                            "act1" === value
                                ? this.setPart(this.car2.group, { x: 912, y: 512, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 })
                                : "act2" === value
                                ? this.setPart(this.car2.group, { x: 912, y: 512, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 })
                                : "act3" === value && this.setPart(this.car2.group, { x: 519, y: 513, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 });
                    }),
                    (RobberyScene.prototype.addStars = function () {
                        (this.headStars = this.group.create(this.part29.x - 5, this.part29.y - 40, "robbery", "headStars instance 10000")),
                            this.headStars.animations.add("anim", Phaser.Animation.generateFrameNames("headStars instance 1", 0, 40, "", 4), 30, !0),
                            this.headStars.play("anim");
                    }),
                    (RobberyScene.prototype.addLamps = function () {
                        (this.lamp1 = Client.Main.instance.make.sprite(24, 17, "robbery", "lamp instance 10000")),
                            this.camera1.addChild(this.lamp1),
                            (this.lamp2 = Client.Main.instance.make.sprite(24, 17, "robbery", "lamp instance 10000")),
                            this.camera2.addChild(this.lamp2),
                            (this.lamp3 = Client.Main.instance.make.sprite(24, 17, "robbery", "lamp instance 10000")),
                            this.camera3.addChild(this.lamp3);
                    }),
                    (RobberyScene.prototype.offCams = function (_fast) {
                        void 0 === _fast && (_fast = !1),
                            (this.hideLamps = !0),
                            (this.lamp1.visible = !1),
                            (this.lamp2.visible = !1),
                            (this.lamp3.visible = !1),
                            _fast
                                ? ((this.camera1.frameName = "camera instance 10007"), (this.camera2.frameName = "camera instance 10007"), (this.camera3.frameName = "camera instance 10007"))
                                : (this.camera1.play("off"), this.camera2.play("off"), this.camera3.play("off"));
                    }),
                    (RobberyScene.prototype.updateAnimation = function () {
                        this.car2 && this.car2.update(), this.updateCar1(), this.updateGuard(), this.updateDoor(), this.updateCar2(), this.updateCar3();
                    }),
                    (RobberyScene.prototype.updateCar3 = function () {
                        this.car3Move && ((this.part16.angle -= 3), (this.part17.angle -= 3)),
                            "act3" === this.currAnim &&
                                (1 === this.counterAnim
                                    ? ((this.car3Move = !0), this.startTween(this.part12, 44, { x: 734, y: 514 }), this.startTween(this.part13, 44, { x: 757, y: 487 }), this.startTween(this.part15, 44, { x: 769, y: 534 }))
                                    : 45 === this.counterAnim
                                    ? (this.startTween(this.part12, 34, { x: 627, y: 509 }), this.startTween(this.part13, 34, { x: 650, y: 484 }), this.startTween(this.part15, 34, { x: 662, y: 530 }))
                                    : 79 === this.counterAnim
                                    ? (this.startTween(this.part12, 20, { y: 514 }), this.startTween(this.part13, 20, { y: 489 }))
                                    : 99 === this.counterAnim
                                    ? ((this.car3Move = !1),
                                      this.startTween(this.part12, 6, { y: 503 }),
                                      this.startTween(this.part13, 6, { x: 670, y: 453, skX: 8, skY: 8, scY: 0.75 }),
                                      (this.part14.visible = !0),
                                      this.setPart(this.part14, { x: 675, y: 493, skX: -5, skY: -5, alpha: 0 }),
                                      this.startTween(this.part14, 6, { y: 483, alpha: 1 }),
                                      this.startTween(this.part15, 6, { y: 524 }))
                                    : 105 === this.counterAnim
                                    ? ((this.car3Move = !0),
                                      this.startTween(this.part12, 12, { y: 509 }),
                                      this.startTween(this.part13, 12, { x: 696, y: 442, skX: 17, skY: 17, scY: 0.64 }),
                                      this.startTween(this.part14, 12, { y: 485 }),
                                      this.startTween(this.part15, 12, { y: 530 }))
                                    : 117 === this.counterAnim
                                    ? (this.startTween(this.part12, 82, { x: 345, y: 512 }),
                                      this.startTween(this.part13, 4, { x: 721, y: 450, skX: 22, skY: 22, scY: 0.53 }),
                                      this.startTween(this.part14, 82, { x: 387, y: 486 }),
                                      this.startTween(this.part15, 82, { x: 385, y: 532 }))
                                    : 121 === this.counterAnim
                                    ? this.startTween(this.part13, 4, { x: 738, y: 469, skX: 7, skY: 7 })
                                    : 125 === this.counterAnim
                                    ? this.startTween(this.part13, 4, { x: 746, y: 497, skX: -14, skY: -14 })
                                    : 129 === this.counterAnim
                                    ? this.startTween(this.part13, 4, { x: 736, y: 494, skX: 11, skY: 11 })
                                    : 133 === this.counterAnim
                                    ? this.startTween(this.part13, 6, { x: 752, y: 504 })
                                    : 139 === this.counterAnim
                                    ? this.startTween(this.part13, 10, { x: 730, y: 576, skX: -25, skY: 0, scY: 0.09 })
                                    : 199 === this.counterAnim
                                    ? ((this.car3Move = !1), this.startTween(this.part12, 12, { x: 308 }), this.startTween(this.part14, 12, { x: 350, y: 487 }), this.startTween(this.part15, 12, { x: 344 }))
                                    : 225 === this.counterAnim
                                    ? ((this.part7.visible = !0),
                                      this.setPart(this.part7, { x: 300, y: 448, alpha: 0 }),
                                      this.startTween(this.part7, 8, { alpha: 1 }),
                                      (this.part8.visible = !0),
                                      this.setPart(this.part8, { x: 275, y: 450, alpha: 0 }),
                                      this.startTween(this.part8, 8, { alpha: 1 }),
                                      (this.part9.visible = !0),
                                      this.setPart(this.part9, { x: 293, y: 461, alpha: 0 }),
                                      this.startTween(this.part9, 8, { alpha: 1 }))
                                    : 233 === this.counterAnim
                                    ? (this.startTween(this.part7, 8, { skX: 105, skY: 105 }), this.startTween(this.part8, 12, { skX: 105, skY: 105 }))
                                    : 241 === this.counterAnim
                                    ? this.startTween(this.part7, 14, { skX: 0, skY: 0 })
                                    : 245 === this.counterAnim
                                    ? this.startTween(this.part8, 28, { skX: -82, skY: -82 })
                                    : 255 === this.counterAnim
                                    ? this.startTween(this.part7, 6, { skX: 45, skY: 45 })
                                    : 261 === this.counterAnim
                                    ? this.startTween(this.part7, 12, { skX: 0, skY: 0 })
                                    : 273 === this.counterAnim
                                    ? (this.startTween(this.part7, 30, { skX: 135, skY: 135 }), this.startTween(this.part8, 14, { skX: 40, skY: 40 }))
                                    : 287 === this.counterAnim
                                    ? this.startTween(this.part8, 6, { skX: 0, skY: 0 })
                                    : 293 === this.counterAnim
                                    ? this.startTween(this.part8, 10, { skX: -50, skY: -50 })
                                    : 303 === this.counterAnim
                                    ? (this.startTween(this.part7, 8, { skX: 0, skY: 0, alpha: 0 }), this.startTween(this.part8, 8, { skX: 30, skY: 30, alpha: 0 }), this.startTween(this.part9, 8, { alpha: 0 }))
                                    : 313 === this.counterAnim
                                    ? ((this.part7.visible = !1), (this.part8.visible = !1), (this.part9.visible = !1))
                                    : 379 === this.counterAnim
                                    ? ((this.car3Move = !0), this.startTween(this.part12, 86, { x: 117 }), this.startTween(this.part14, 86, { x: 164 }), this.startTween(this.part15, 86, { x: 159 }))
                                    : 465 === this.counterAnim
                                    ? ((this.car3Move = !1), this.startTween(this.part12, 10, { scY: 1.12 }), this.startTween(this.part14, 10, { y: 485 }), this.startTween(this.part15, 10, { y: 530, scY: 1.07 }))
                                    : 475 === this.counterAnim
                                    ? (this.startTween(this.part12, 10, { scY: 1 }), this.startTween(this.part14, 10, { y: 487 }), this.startTween(this.part15, 10, { y: 532, scY: 1 }))
                                    : 479 === this.counterAnim
                                    ? ((this.part11.visible = !0), this.part11.play("anim"), this.setPart(this.part11, { x: 92, y: 475 }))
                                    : 485 === this.counterAnim
                                    ? (this.startTween(this.part12, 10, { scY: 1.12 }), this.startTween(this.part14, 10, { y: 485 }), this.startTween(this.part15, 10, { y: 530, scY: 1.07 }))
                                    : 495 === this.counterAnim
                                    ? (this.startTween(this.part12, 10, { scY: 1 }), this.startTween(this.part14, 10, { y: 487 }), this.startTween(this.part15, 10, { y: 532, scY: 1 }))
                                    : 505 === this.counterAnim
                                    ? (this.startTween(this.part12, 10, { scY: 1.12 }), this.startTween(this.part14, 10, { y: 485 }), this.startTween(this.part15, 10, { y: 530, scY: 1.07 }))
                                    : 515 === this.counterAnim
                                    ? (this.startTween(this.part12, 10, { scY: 1 }), this.startTween(this.part14, 10, { y: 487 }), this.startTween(this.part15, 10, { y: 532, scY: 1 }))
                                    : 525 === this.counterAnim
                                    ? (this.startTween(this.part12, 10, { scY: 1.12 }), this.startTween(this.part14, 10, { y: 485 }), this.startTween(this.part15, 10, { y: 530, scY: 1.07 }))
                                    : 535 === this.counterAnim && (this.startTween(this.part12, 10, { scY: 1 }), this.startTween(this.part14, 10, { y: 487 }), this.startTween(this.part15, 10, { y: 532, scY: 1 })));
                    }),
                    (RobberyScene.prototype.updateCar2 = function () {
                        "act2" === this.currAnim
                            ? 19 === this.counterAnim
                                ? ((this.car2.move = !0), this.startTween(this.car2.group, 58, { x: 519, y: 513 }))
                                : 77 === this.counterAnim
                                ? this.startTween(this.car2.group, 6, { x: 509, y: 495, skX: -15, skY: -15 })
                                : 83 === this.counterAnim && ((this.car2.move = !1), this.startTween(this.car2.group, 8, { x: 519, y: 513, skX: 0, skY: 0 }))
                            : "act3" === this.currAnim && (581 === this.counterAnim && ((this.car2.move = !0), this.startTween(this.car2.group, 150, { x: 284 })), 731 === this.counterAnim && (this.car2.move = !1));
                    }),
                    (RobberyScene.prototype.updateDoor = function () {
                        "act3" === this.currAnim &&
                            (297 === this.counterAnim ? this.startTween(this.part5, 52, { y: 638 }) : 349 === this.counterAnim ? this.startTween(this.part5, 30, { y: 663 }) : 381 === this.counterAnim && (this.part5.visible = !1));
                    }),
                    (RobberyScene.prototype.updateGuard = function () {
                        "act2" === this.currAnim &&
                            (19 === this.counterAnim
                                ? (this.startTween(this.part22, 54, { y: 502 }, !0), this.startTween(this.part23, 54, { x: 415, y: 502 }, !0))
                                : 73 === this.counterAnim
                                ? (this.startTween(this.part20, 4, { x: 343, y: 551, scX: 0.79 }, !0),
                                  this.startTween(this.part22, 4, { x: 369, y: 496 }, !0),
                                  this.startTween(this.part23, 4, { x: 380, y: 496 }, !0),
                                  this.startTween(this.part24, 4, { x: 367, y: 478 }, !0),
                                  this.startTween(this.part29, 4, { x: 385, y: 461, skX: 21, skY: -159 }, !0),
                                  this.startTween(this.part30, 4, { x: 278, y: 488, skX: 131, skY: -49 }, !0),
                                  this.startTween(this.part31, 4, { x: 325, y: 514, skX: 45, skY: -135 }, !0),
                                  this.startTween(this.part33, 4, { x: 397, y: 467, skX: -6, skY: 174, scX: 0.8 }, !0))
                                : 77 === this.counterAnim
                                ? (this.startTween(this.part20, 8, { x: 356, y: 564, scX: 1, scY: 1.05 }, !0),
                                  this.startTween(this.part21, 8, { x: 335, y: 471, skX: -157, skY: -157 }, !0),
                                  this.startTween(this.part22, 8, { x: 378, y: 511 }, !0),
                                  this.startTween(this.part23, 8, { x: 390, y: 511 }, !0),
                                  this.startTween(this.part24, 8, { x: 376, y: 493 }, !0),
                                  this.startTween(this.part29, 8, { skX: 96, skY: -84 }, !0),
                                  this.startTween(this.part30, 8, { y: 503 }, !0),
                                  this.startTween(this.part31, 8, { x: 297, y: 536 }, !0),
                                  this.startTween(this.part33, 8, { x: 436, y: 490, skX: 0, skY: 180, scX: 1.03 }, !0))
                                : 85 === this.counterAnim
                                ? (this.startTween(this.part21, 6, { x: 312, y: 479, skX: -142, skY: -142 }, !0),
                                  this.startTween(this.part22, 6, { x: 380 }, !0),
                                  this.startTween(this.part23, 6, { x: 391 }, !0),
                                  this.startTween(this.part29, 6, { y: 470, skX: -129, skY: 51 }, !0),
                                  this.startTween(this.part30, 6, { x: 298, y: 579, skX: -169, skY: 11 }, !0),
                                  this.startTween(this.part31, 6, { x: 275, y: 572, skX: 75, skY: -105 }, !0))
                                : 91 === this.counterAnim
                                ? (this.startTween(this.part20, 30, { y: 568, scY: 0.85 }, !0),
                                  this.startTween(this.part21, 10, { x: 294, y: 494, skX: -172, skY: -172 }, !0),
                                  this.startTween(this.part22, 30, { x: 370, y: 519 }, !0),
                                  this.startTween(this.part23, 30, { y: 517 }, !0),
                                  this.startTween(this.part24, 30, { y: 503 }, !0),
                                  this.startTween(this.part29, 6, { x: 386, y: 481, skX: 6, skY: -174 }, !0),
                                  this.startTween(this.part33, 30, { y: 499 }, !0))
                                : 97 === this.counterAnim
                                ? this.startTween(this.part29, 24, { y: 491 }, !0)
                                : 101 === this.counterAnim
                                ? this.startTween(this.part21, 12, { x: 291, y: 551 }, !0)
                                : 113 === this.counterAnim
                                ? (this.addStars(), this.startTween(this.part21, 8, { x: 289, y: 560, skX: -142, skY: -142 }, !0))
                                : 123 === this.counterAnim
                                ? this.startTween(this.part22, 8, { y: 520 }, !0)
                                : 257 === this.counterAnim && this.animComplete());
                    }),
                    (RobberyScene.prototype.updateCar1 = function () {
                        if (
                            "act1" === this.currAnim &&
                            (this.hideLamps || ((this.lampTimer += 1), this.lampTimer % 25 == 0 && ((this.lamp1.visible = !this.lamp1.visible), (this.lamp2.visible = !this.lamp2.visible), (this.lamp3.visible = !this.lamp3.visible))),
                            !this.hideSmoke && (this.smokeTimer++, this.smokeTimer % 10 == 0))
                        ) {
                            var smoke = this.group.create(this.part42.x + 50, this.part42.y + 30, "robbery", "smoke instance 10000");
                            smoke.scale.set(4.5), smoke.anchor.set(1, 1);
                            var anim = smoke.animations.add("anim", Phaser.Animation.generateFrameNames("smoke instance 1", 0, 20, "", 4), 30, !1);
                            (anim.killOnComplete = !0), smoke.play("anim"), (anim = smoke = null);
                        }
                        "act1" === this.currAnim
                            ? 1 === this.counterAnim
                                ? (this.part42.play("anim"), this.startTween(this.part42, 60, { x: 588 }, !0), this.startTween(this.part43, 60, { x: 584, y: 127, skX: 0, scY: 1 }, !0))
                                : 40 === this.counterAnim
                                ? (this.hideSmoke = !0)
                                : 67 === this.counterAnim
                                ? this.startTween(this.part43, 8, { y: 133, skX: -3, skY: -3 }, !0)
                                : 75 === this.counterAnim
                                ? (this.startTween(this.part42, 4, { x: 584 }, !0), this.startTween(this.part43, 4, { x: 579 }, !0))
                                : 79 === this.counterAnim
                                ? (this.part42.animations.stop(), this.startTween(this.part42, 16, { x: 644, y: 111, skX: 15, skY: 15 }, !0), this.startTween(this.part43, 16, { x: 644, y: 78, skX: 12, skY: 12 }, !0))
                                : 95 === this.counterAnim
                                ? (this.startTween(this.part42, 14, { x: 703, y: 89, skX: 0, skY: 0 }, !0), this.startTween(this.part43, 14, { x: 697, y: 58, skX: -3, skY: -3 }, !0))
                                : 109 === this.counterAnim
                                ? (this.startTween(this.part42, 4, { x: 721, y: 94 }, !0), this.startTween(this.part43, 4, { x: 715, y: 68 }, !0))
                                : 113 === this.counterAnim
                                ? (this.startTween(this.part42, 24, { x: 729, y: 339 }, !0), this.startTween(this.part43, 24, { x: 723, y: 319 }, !0))
                                : 131 === this.counterAnim
                                ? this.startTween(this.part46, 6, { x: 678, y: 354, scY: 0.91 }, !0)
                                : 137 === this.counterAnim
                                ? (this.startTween(this.part42, 10, { x: 730, y: 328 }, !0), this.startTween(this.part43, 10, { y: 292 }, !0), this.startTween(this.part46, 12, { x: 681, y: 328, scY: 1.3 }, !0))
                                : 147 === this.counterAnim
                                ? (this.startTween(this.part42, 8, { x: 746, y: 295, skX: -50, skY: -50 }, !0), this.startTween(this.part43, 26, { y: 248, skX: -175, skY: -175 }, !0))
                                : 149 === this.counterAnim
                                ? this.startTween(this.part46, 6, { y: 349, scY: 1 }, !0)
                                : 155 === this.counterAnim
                                ? this.startTween(this.part42, 18, { x: 722, y: 221, skX: -164, skY: -164 }, !0)
                                : 173 === this.counterAnim
                                ? (this.setPart(this.part42, { x: 714, y: 276, skX: -171, skY: -171 }, !0), this.setPart(this.part43, { y: 251, skX: 17, skY: -163 }, !0))
                                : 175 === this.counterAnim
                                ? (this.startTween(this.part42, 10, { x: 719, y: 335, skX: -180, skY: -180 }, !0), this.startTween(this.part43, 10, { y: 310, skX: 2, skY: -178 }, !0))
                                : 185 === this.counterAnim
                                ? this.startTween(this.part43, 4, { y: 300 }, !0)
                                : 189 === this.counterAnim
                                ? this.startTween(this.part43, 40, { y: 311 }, !0)
                                : 229 === this.counterAnim
                                ? (this.startTween(this.part42, 12, { x: 723 }, !0), this.startTween(this.part43, 12, { x: 730, skX: 13, skY: -167, scX: 0.9 }, !0))
                                : 241 === this.counterAnim
                                ? (this.part42.play("anim"), this.startTween(this.part42, 18, { x: 539, y: 326, skX: 180, skY: 180, scX: 0.95 }, !0), this.startTween(this.part43, 18, { x: 543, y: 306, skX: 7, skY: -173, scX: 0.94 }, !0))
                                : 259 === this.counterAnim
                                ? (this.startTween(this.part42, 18, { x: 416, y: 353, skX: 156, skY: 156, scX: 0.98 }, !0), this.startTween(this.part43, 10, { x: 481, y: 310, skX: -2, skY: 178, scX: 0.95 }, !0))
                                : 269 === this.counterAnim
                                ? this.startTween(this.part43, 8, { x: 412, y: 326, skX: -16, skY: 164, scX: 0.96 }, !0)
                                : 277 === this.counterAnim
                                ? (this.startTween(this.part42, 16, { x: 300, y: 367, skX: 177, skY: 177, scX: 1 }, !0), this.startTween(this.part43, 16, { x: 303, y: 347, skX: 1, skY: -179, scX: 0.98 }, !0))
                                : 293 === this.counterAnim
                                ? (this.startTween(this.part42, 12, { x: 278 }, !0), this.startTween(this.part43, 12, { x: 281 }, !0))
                                : 301 === this.counterAnim
                                ? this.startTween(this.part44, 6, { y: 324 }, !0)
                                : 305 === this.counterAnim
                                ? (this.part42.animations.stop(),
                                  (this.energy1.visible = !0),
                                  this.setPart(this.energy1, { x: 534, y: 422, scX: 1.89, scY: 1.89, alpha: 0.5 }, !0),
                                  (this.energy2.visible = !0),
                                  this.setPart(this.energy2, { x: 224, y: 200, scX: 1.89, scY: 1.89, alpha: 0.5 }, !0),
                                  (this.energy3.visible = !0),
                                  this.setPart(this.energy3, { x: 22, y: 418, scX: 1.89, scY: 1.89, alpha: 0.5 }, !0))
                                : 307 === this.counterAnim
                                ? (this.setPart(this.energy1, { x: 585, y: 501, skX: -165, skY: -165, alpha: 1 }, !0),
                                  this.setPart(this.energy2, { x: 291, y: 242, skX: 135, skY: 135, alpha: 1 }, !0),
                                  this.setPart(this.energy3, { x: 106, y: 456, skX: 135, skY: 135, alpha: 1 }, !0))
                                : 309 === this.counterAnim
                                ? ((this.energy1.visible = !1), (this.energy2.visible = !1), (this.energy3.visible = !1))
                                : 317 === this.counterAnim
                                ? ((this.energy1.visible = !0),
                                  this.setPart(this.energy1, { x: 534, y: 422, skX: 0, skY: 0, alpha: 0.5 }, !0),
                                  (this.energy2.visible = !0),
                                  this.setPart(this.energy2, { x: 224, y: 200, skX: 0, skY: 0, alpha: 0.5 }, !0),
                                  (this.energy3.visible = !0),
                                  this.setPart(this.energy3, { x: 22, y: 418, skX: 0, skY: 0, alpha: 0.5 }, !0))
                                : 319 === this.counterAnim
                                ? (this.setPart(this.energy1, { x: 585, y: 501, skX: -165, skY: -165, alpha: 1 }, !0),
                                  this.setPart(this.energy2, { x: 291, y: 242, skX: 135, skY: 135, alpha: 1 }, !0),
                                  this.setPart(this.energy3, { x: 106, y: 456, skX: 135, skY: 135, alpha: 1 }, !0))
                                : 321 === this.counterAnim
                                ? ((this.energy1.visible = !1), (this.energy2.visible = !1), (this.energy3.visible = !1))
                                : 329 === this.counterAnim
                                ? ((this.energy1.visible = !0),
                                  this.setPart(this.energy1, { x: 534, y: 422, skX: 0, skY: 0, alpha: 0.5 }, !0),
                                  (this.energy2.visible = !0),
                                  this.setPart(this.energy2, { x: 224, y: 200, skX: 0, skY: 0, alpha: 0.5 }, !0),
                                  (this.energy3.visible = !0),
                                  this.setPart(this.energy3, { x: 22, y: 418, skX: 0, skY: 0, alpha: 0.5 }, !0))
                                : 331 === this.counterAnim
                                ? (this.setPart(this.energy1, { x: 585, y: 501, skX: -165, skY: -165, alpha: 1 }, !0),
                                  this.setPart(this.energy2, { x: 291, y: 242, skX: 135, skY: 135, alpha: 1 }, !0),
                                  this.setPart(this.energy3, { x: 106, y: 456, skX: 135, skY: 135, alpha: 1 }, !0))
                                : 333 === this.counterAnim
                                ? ((this.energy1.visible = !1), (this.energy2.visible = !1), (this.energy3.visible = !1))
                                : 341 === this.counterAnim
                                ? ((this.energy1.visible = !0),
                                  this.setPart(this.energy1, { x: 534, y: 422, skX: 0, skY: 0, alpha: 0.5 }, !0),
                                  (this.energy2.visible = !0),
                                  this.setPart(this.energy2, { x: 224, y: 200, skX: 0, skY: 0, alpha: 0.5 }, !0),
                                  (this.energy3.visible = !0),
                                  this.setPart(this.energy3, { x: 22, y: 418, skX: 0, skY: 0, alpha: 0.5 }, !0))
                                : 343 === this.counterAnim
                                ? (this.setPart(this.energy1, { x: 585, y: 501, skX: -165, skY: -165, alpha: 1 }, !0),
                                  this.setPart(this.energy2, { x: 291, y: 242, skX: 135, skY: 135, alpha: 1 }, !0),
                                  this.setPart(this.energy3, { x: 106, y: 456, skX: 135, skY: 135, alpha: 1 }, !0))
                                : 345 === this.counterAnim
                                ? ((this.energy1.visible = !1), (this.energy2.visible = !1), (this.energy3.visible = !1))
                                : 353 === this.counterAnim
                                ? ((this.energy1.visible = !0),
                                  this.setPart(this.energy1, { x: 534, y: 422, skX: 0, skY: 0, alpha: 0.5 }, !0),
                                  (this.energy2.visible = !0),
                                  this.setPart(this.energy2, { x: 224, y: 200, skX: 0, skY: 0, alpha: 0.5 }, !0),
                                  (this.energy3.visible = !0),
                                  this.setPart(this.energy3, { x: 22, y: 418, skX: 0, skY: 0, alpha: 0.5 }, !0))
                                : 355 === this.counterAnim && ((this.energy1.visible = !1), (this.energy2.visible = !1), (this.energy3.visible = !1), this.offCams(), this.animComplete())
                            : "act2" === this.currAnim
                            ? 101 === this.counterAnim
                                ? (this.part42.play("anim2"), this.startTween(this.part42, 152, { x: 699, y: 566 }, !0), this.startTween(this.part43, 152, { x: 703, y: 544 }, !0))
                                : 257 === this.counterAnim && (this.part42.animations.stop(), this.animComplete())
                            : "act3" === this.currAnim &&
                              (1 === this.counterAnim && ((this.part43.y += 3), this.game.add.tween(this.part43).to({ y: this.part43.y - 3 }, 500, "Linear", !0, 0, -1, !0)),
                              649 === this.counterAnim
                                  ? (this.part42.play("anim2"), this.startTween(this.part42, 92, { x: 524 }, !0), this.startTween(this.part43, 92, { x: 527, y: 541 }, !0))
                                  : 731 === this.counterAnim && (this.part42.animations.stop(), this.animComplete()));
                    }),
                    (RobberyScene.prototype.setParts = function (value) {
                        "act1" === value
                            ? ((this.energy1.visible = !1),
                              (this.energy2.visible = !1),
                              (this.energy3.visible = !1),
                              this.setPart(this.camera1, { x: 60, y: 456, angle: 0, scX: 1, scY: 1, skX: 0, skY: 180, alpha: 1 }, !0),
                              this.setPart(this.camera2, { x: 251, y: 238, angle: 0, scX: 1, scY: 1, skX: 0, skY: 180, alpha: 1 }, !0),
                              this.setPart(this.camera3, { x: 571, y: 460, angle: 0, scX: 1, scY: 1, skX: 0, skY: 180, alpha: 1 }, !0),
                              this.setPart(this.part42, { x: -86, y: 153, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                              this.setPart(this.part43, { x: -82, y: 129, angle: 0, scX: 1, scY: 1.07, skX: 21, skY: 0, alpha: 1 }, !0),
                              this.setPart(this.part44, { x: 262, y: 307, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                              this.setPart(this.part46, { x: 681, y: 349, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0))
                            : "act2" === value
                            ? ((this.energy1.visible = !1),
                              (this.energy2.visible = !1),
                              (this.energy3.visible = !1),
                              this.setPart(this.camera1, { x: 60, y: 456, angle: 0, scX: 1, scY: 1, skX: 0, skY: 180, alpha: 1 }, !0),
                              this.setPart(this.camera2, { x: 251, y: 238, angle: 0, scX: 1, scY: 1, skX: 0, skY: 180, alpha: 1 }, !0),
                              this.setPart(this.camera3, { x: 571, y: 460, angle: 0, scX: 1, scY: 1, skX: 0, skY: 180, alpha: 1 }, !0),
                              this.setPart(this.part42, { x: 1083, y: 562, angle: 0, scX: 0.97, scY: 1, skX: -180, skY: -180, alpha: 1 }, !0),
                              this.setPart(this.part43, { x: 1087, y: 540, angle: 0, scX: 1, scY: 1, skX: 2, skY: -178, alpha: 1 }, !0),
                              this.setPart(this.part44, { x: 262, y: 324, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                              this.setPart(this.part46, { x: 681, y: 349, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0))
                            : "act3" === value &&
                              ((this.energy1.visible = !1),
                              (this.energy2.visible = !1),
                              (this.energy3.visible = !1),
                              this.setPart(this.camera1, { x: 60, y: 456, angle: 0, scX: 1, scY: 1, skX: 0, skY: 180, alpha: 1 }, !0),
                              this.setPart(this.camera2, { x: 251, y: 238, angle: 0, scX: 1, scY: 1, skX: 0, skY: 180, alpha: 1 }, !0),
                              this.setPart(this.camera3, { x: 571, y: 460, angle: 0, scX: 1, scY: 1, skX: 0, skY: 180, alpha: 1 }, !0),
                              this.setPart(this.part42, { x: 699, y: 566, angle: 0, scX: 0.97, scY: 1, skX: -180, skY: -180, alpha: 1 }, !0),
                              this.setPart(this.part43, { x: 703, y: 544, angle: 0, scX: 1, scY: 1, skX: 2, skY: -178, alpha: 1 }, !0),
                              this.setPart(this.part44, { x: 262, y: 324, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0),
                              this.setPart(this.part46, { x: 681, y: 349, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }, !0)),
                            "act1" === value || "act2" === value
                                ? (this.setPart(this.part20, { x: 377, y: 562, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                                  this.setPart(this.part21, { x: 402, y: 512, angle: 0, scX: 1, scY: 1, skX: -7, skY: -7, alpha: 1 }),
                                  this.setPart(this.part22, { x: 404, y: 503, angle: 0, scX: 1.45, scY: 0.99, skX: -4, skY: -4, alpha: 1 }),
                                  this.setPart(this.part23, { x: 416, y: 503, angle: 0, scX: 0.78, scY: 0.8, skX: -5, skY: -4, alpha: 1 }),
                                  this.setPart(this.part24, { x: 402, y: 485, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                                  this.setPart(this.part29, { x: 391, y: 474, angle: 0, scX: 1, scY: 1, skX: 6, skY: -174, alpha: 1 }),
                                  this.setPart(this.part30, { x: 344, y: 483, angle: 0, scX: 0.64, scY: 0.8, skX: 176, skY: -4, alpha: 1 }),
                                  this.setPart(this.part31, { x: 375, y: 530, angle: 0, scX: 1, scY: 1, skX: 0, skY: 180, alpha: 1 }),
                                  this.setPart(this.part33, { x: 457, y: 482, angle: 0, scX: 1, scY: 1, skX: 0, skY: -180, alpha: 1 }))
                                : "act3" === value &&
                                  (this.setPart(this.part20, { x: 356, y: 568, angle: 0, scX: 1, scY: 0.85, skX: 0, skY: 0, alpha: 1 }),
                                  this.setPart(this.part21, { x: 289, y: 560, angle: 0, scX: 1, scY: 1, skX: -142, skY: -142, alpha: 1 }),
                                  this.setPart(this.part22, { x: 370, y: 519, angle: 0, scX: 1.45, scY: 0.99, skX: -4, skY: -4, alpha: 1 }),
                                  this.setPart(this.part23, { x: 391, y: 517, angle: 0, scX: 0.78, scY: 0.8, skX: -5, skY: -4, alpha: 1 }),
                                  this.setPart(this.part24, { x: 376, y: 503, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                                  this.setPart(this.part29, { x: 386, y: 491, angle: 0, scX: 1, scY: 1, skX: 6, skY: -174, alpha: 1 }),
                                  this.setPart(this.part30, { x: 298, y: 579, angle: 0, scX: 0.64, scY: 0.8, skX: -169, skY: 11, alpha: 1 }),
                                  this.setPart(this.part31, { x: 275, y: 572, angle: 0, scX: 1, scY: 1, skX: 75, skY: -105, alpha: 1 }),
                                  this.setPart(this.part33, { x: 436, y: 499, angle: 0, scX: 1.03, scY: 1, skX: 0, skY: 180, alpha: 1 }),
                                  this.addStars()),
                            this.setPart(this.part5, { x: 244, y: 519, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                            "act1" === value
                                ? ((this.part7.visible = !1),
                                  (this.part8.visible = !1),
                                  (this.part9.visible = !1),
                                  (this.part11.visible = !1),
                                  (this.part12.visible = !1),
                                  (this.part13.visible = !1),
                                  (this.part14.visible = !1),
                                  (this.part15.visible = !1))
                                : "act2" === value
                                ? ((this.part7.visible = !1),
                                  (this.part8.visible = !1),
                                  (this.part9.visible = !1),
                                  (this.part11.visible = !1),
                                  (this.part12.visible = !1),
                                  (this.part13.visible = !1),
                                  (this.part14.visible = !1),
                                  (this.part15.visible = !1))
                                : "act3" === value &&
                                  ((this.part7.visible = !1),
                                  (this.part8.visible = !1),
                                  (this.part9.visible = !1),
                                  (this.part11.visible = !1),
                                  (this.part12.visible = !0),
                                  this.setPart(this.part12, { x: 854, y: 509, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                                  (this.part13.visible = !0),
                                  this.setPart(this.part13, { x: 877, y: 484, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }),
                                  (this.part14.visible = !1),
                                  (this.part15.visible = !0),
                                  this.setPart(this.part15, { x: 889, y: 530, angle: 0, scX: 1, scY: 1, skX: 0, skY: 0, alpha: 1 }));
                    }),
                    (RobberyScene.prototype.free = function () {
                        (this.group = null),
                            (this.part46 = null),
                            (this.part44 = null),
                            (this.part43 = null),
                            (this.part42 = null),
                            (this.camera3 = null),
                            (this.camera2 = null),
                            (this.camera1 = null),
                            (this.energy3 = null),
                            (this.energy2 = null),
                            (this.energy1 = null),
                            (this.group = null),
                            (this.part33 = null),
                            (this.part31 = null),
                            (this.part30 = null),
                            (this.part29 = null),
                            (this.part24 = null),
                            (this.part23 = null),
                            (this.part22 = null),
                            (this.part21 = null),
                            (this.part20 = null),
                            (this.part5 = null),
                            this.car2 && (this.car2.free(), (this.car2 = null)),
                            (this.part17 = null),
                            (this.part16 = null),
                            (this.part15 = null),
                            (this.part14 = null),
                            (this.part13 = null),
                            (this.part12 = null),
                            (this.part11 = null),
                            (this.part9 = null),
                            (this.part8 = null),
                            (this.part7 = null),
                            (this.game = null),
                            (this.topLayer = null);
                    }),
                    RobberyScene
                );
            })(Client.BasicSimpleAnim);
            Client.RobberyScene = RobberyScene;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var LevelBuilder = (function (_super) {
                function LevelBuilder() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (_this.name = LevelBuilder.Name), (_this.active = !0), _this;
                }
                return (
                    __extends(LevelBuilder, _super),
                    (LevelBuilder.prototype.init = function () {
                        if (null != LevelBuilder.instance) throw new Error("Error: LevelBuilder already created");
                        ((LevelBuilder.instance = this).active = !0), (this.panelStatus = "none"), (this.panelCounter = 0), (this.passedFinish = !1), Client.SoundManager.playMusic("main_" + this.game.rnd.between(1, 2), 0.5);
                    }),
                    (LevelBuilder.prototype.create = function () {
                        var btnSound;
                        h5branding.google.sendScreenView(LevelBuilder.Name),
                            h5branding.gameanalytics.addProgressionEvent(h5branding.EGAProgressionStatus.Start, Client.LevelManager.getInstance().currentLevel.toString()),
                            (this.gameManager = new Client.GameManager()),
                            (this.UILayer = this.add.group()),
                            (this.btnPause = this.make.button(767, 569, "ui", this.paused, this, "btnPause instance 10001", "btnPause instance 10000", "btnPause instance 10002")),
                            this.btnPause.anchor.setTo(0.5),
                            (this.btnPause.forceOut = !0),
                            (this.btnPause.fixedToCamera = !0),
                            this.btnPause.onInputOver.add(this.over, this),
                            this.UILayer.addChild(this.btnPause),
                            ((btnSound = new Client.ButtonSound(Client.SoundType.Music, 715, 569, "ui", null, null)).fixedToCamera = !0),
                            this.UILayer.addChild(btnSound),
                            ((btnSound = new Client.ButtonSound(Client.SoundType.SFX, 663, 569, "ui", null, null)).fixedToCamera = !0),
                            this.UILayer.addChild(btnSound),
                            (btnSound = null);
                        var btn = this.make.button(611, 569, "ui", this.restartGame, this, "btnRestart instance 10001", "btnRestart instance 10000", "btnRestart instance 10002");
                        btn.anchor.setTo(0.5), (btn.fixedToCamera = !0), btn.onInputOver.add(this.over, this), this.UILayer.addChild(btn);
                        var btnW = new Client.ButtonWalkthrough(this.game, 400, 30);
                        (btnW.fixedToCamera = !0), this.UILayer.addChild(btnW);
                        var text = this.make.bitmapText(20, 25, "mainFont", "Level " + Client.LevelManager.getInstance().currentLevel, 26);
                        text.anchor.setTo(0, 0.5), (text.fixedToCamera = !0), this.UILayer.addChild(text), (text = btnW = btn = null), (this.panelQuest = new Client.PanelQuest(this.game, 740, 30));
                    }),
                    (LevelBuilder.prototype.hideUI = function () {
                        this.UILayer.visible = !1;
                    }),
                    (LevelBuilder.prototype.over = function () {
                        Client.SoundManager.playSFX("btnOver");
                    }),
                    (LevelBuilder.prototype.update = function () {
                        this.gameManager.update(), "show" === this.panelStatus && ((this.panelCounter += 1), this.panelCounter >= this.panelDuration && (!0 === this.passedFinish ? this.showPanelComplete() : this.showPanelFailed()));
                    }),
                    (LevelBuilder.prototype.paused = function () {
                        !1 !== this.active &&
                            "none" === this.panelStatus &&
                            !0 !== Client.Main.disablePause &&
                            (Client.SoundManager.playSFX("btnClick"), (this.btnPause.inputEnabled = !1), this.pauseGame(), Client.PanelManager.getInstance(this.game).showPanel(PanelList.Pause));
                    }),
                    (LevelBuilder.prototype.pauseGame = function (_box2d) {
                        void 0 === _box2d && (_box2d = !0), (this.active = !1);
                    }),
                    (LevelBuilder.prototype.levelComplete = function (duration) {
                        void 0 === duration && (duration = 0), "none" === this.panelStatus && (0 === duration ? this.showPanelComplete() : ((this.passedFinish = !0), (this.panelStatus = "show"), (this.panelDuration = duration)));
                    }),
                    (LevelBuilder.prototype.levelFailed = function (duration) {
                        void 0 === duration && (duration = 0), "none" === this.panelStatus && (0 === duration ? this.showPanelFailed() : ((this.panelStatus = "show"), (this.panelDuration = duration)));
                    }),
                    (LevelBuilder.prototype.showPanelComplete = function () {
                        (this.panelStatus = "end"),
                            this.pauseGame(!1),
                            this.stopAllSounds(),
                            !1 === this.gameManager.hero.soundWinPLaying && Client.SoundManager.playSFX("levelWin"),
                            Client.DataManager.getInstance().saveData("pl", Client.LevelManager.getInstance().currentLevel),
                            Client.DataManager.getInstance().saveLevel(Client.LevelManager.getInstance().currentLevel + 1),
                            h5branding.gameanalytics.addProgressionEvent(h5branding.EGAProgressionStatus.Complete, Client.LevelManager.getInstance().currentLevel.toString()),
                            Client.PanelManager.getInstance(this.game).showPanel(PanelList.Win);
                    }),
                    (LevelBuilder.prototype.showPanelFailed = function () {
                        (this.panelStatus = "end"),
                            this.pauseGame(),
                            this.stopAllSounds(),
                            Client.SoundManager.playSFX("levelFail"),
                            h5branding.gameanalytics.addProgressionEvent(h5branding.EGAProgressionStatus.Fail, Client.LevelManager.getInstance().currentLevel.toString()),
                            Client.PanelManager.getInstance(this.game).showPanel(PanelList.Lose);
                    }),
                    (LevelBuilder.prototype.stopAllSounds = function () {
                        Client.SoundManager.stopMusic(), Client.SoundManager.stopAllSFXLoop();
                    }),
                    (LevelBuilder.prototype.resumeGame = function () {
                        (this.panelStatus = "none"), (this.btnPause.inputEnabled = !0), (this.btnPause.input.useHandCursor = !0), (this.active = !0);
                    }),
                    (LevelBuilder.prototype.restartGame = function () {
                        Client.SoundManager.playSFX("btnClick"), this.game.state.start(SceneList.LevelBuilder, !0, !1);
                    }),
                    (LevelBuilder.prototype.exitGame = function () {
                        (Client.LevelManager.getInstance().currentMenuScreen = 1), Client.NativeChanges.setGraphicsChildrensMask(this.game, !0), this.game.state.start(SceneList.Menu, !0, !1);
                    }),
                    (LevelBuilder.prototype.nextLevel = function () {
                        Client.NativeChanges.setGraphicsChildrensMask(this.game, !0),
                            (Client.LevelManager.getInstance().currentLevel += 1),
                            3 !== Client.LevelManager.getInstance().currentLevel
                                ? 7 === Client.LevelManager.getInstance().currentLevel || 11 === Client.LevelManager.getInstance().currentLevel || 15 === Client.LevelManager.getInstance().currentLevel
                                    ? this.game.state.start(SceneList.Robbery, !0, !1)
                                    : 16 === Client.LevelManager.getInstance().currentLevel
                                    ? ((Client.LevelManager.getInstance().currentMenuScreen = 1), this.game.state.start(SceneList.Menu, !0, !1))
                                    : this.game.state.start(SceneList.LevelBuilder, !0, !1)
                                : this.game.state.start(SceneList.Comix1, !0, !1);
                    }),
                    (LevelBuilder.prototype.shutdown = function () {
                        this.game.world.resize(Constants.GAME_WIDTH, Constants.GAME_HEIGHT),
                            (LevelBuilder.instance = null),
                            this.gameManager.free(),
                            (this.gameManager = null),
                            (this.btnPause = null),
                            this.panelQuest.free(),
                            (this.panelQuest = null),
                            (this.UILayer = null);
                    }),
                    (LevelBuilder.Name = "LevelBuilder"),
                    LevelBuilder
                );
            })(Phaser.State);
            Client.LevelBuilder = LevelBuilder;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Menu = (function (_super) {
                function Menu() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (_this.openLevels = 0), _this;
                }
                return (
                    __extends(Menu, _super),
                    (Menu.prototype.init = function () {
                        this.physics.startSystem(Phaser.Physics.BOX2D),
                            (this.physics.box2d.gravity.y = 500),
                            (this.physics.box2d.debugDraw.joints = !0),
                            WheelyScale.ScaleHelper.resize(),
                            (this.openLevels = Client.DataManager.getInstance().currentLevel),
                            !1 === Client.Main.instance.soundStarted && (Client.SoundManager.init(this.game), (Client.Main.instance.soundStarted = !0), Client.SimpleTweenManager.init(this.game)),
                            Client.SoundManager.playMusic("main_" + this.game.rnd.between(1, 2), 0.5);
                    }),
                    (Menu.prototype.create = function () {
                        h5branding.google.sendScreenView(Menu.Name);
                        var ground = new Phaser.Physics.Box2D.Body(this.game, null, 56, 413, 0);
                        ground.setRectangle(89, 22),
                            (ground = null),
                            this.add.sprite(0, 0, "menuBg"),
                            (this.magnifier = new Client.MenuMagnifier(this.game)),
                            (this.magnifier.group.x = 386),
                            (this.magnifier.group.y = 358),
                            this.add.existing(this.magnifier.group),
                            (this.thief = new Client.MenuThief(this.game)),
                            (this.thief.group.x = 638),
                            (this.thief.group.y = 308),
                            this.add.existing(this.thief.group);
                        var btnSound,
                            mask = this.add.graphics(0, 0);
                        mask.beginFill(16711680, 0.5),
                            mask.moveTo(632, 283),
                            mask.lineTo(718, 289),
                            mask.lineTo(718, 318),
                            mask.lineTo(632, 309),
                            mask.lineTo(632, 283),
                            mask.moveTo(632, 316),
                            mask.lineTo(718, 326),
                            mask.lineTo(718, 378),
                            mask.lineTo(632, 370),
                            mask.lineTo(632, 316),
                            mask.endFill(),
                            (this.thief.group.mask = mask),
                            (mask = null),
                            this.createMeinMenu(),
                            this.createLevelSelect(),
                            this.showScreen(Client.LevelManager.getInstance().currentMenuScreen),
                            (btnSound = new Client.ButtonSound(Client.SoundType.Music, 765, 35, "ui", null, null)),
                            this.add.existing(btnSound),
                            (btnSound = new Client.ButtonSound(Client.SoundType.SFX, 705, 35, "ui", null, null)),
                            this.add.existing(btnSound),
                            (btnSound = null);
                    }),
                    (Menu.prototype.update = function () {
                        this.magnifier.update(), this.thief.update();
                    }),
                    (Menu.prototype.showScreen = function (currentScreen) {
                        0 === currentScreen ? this.showMainMenu() : this.showLS();
                    }),
                    (Menu.prototype.createMeinMenu = function () {
                        var _this = this;
                        (this.groupMM = new Phaser.Group(this.game)),
                            this.groupMM.create(220, 25, "ui", "logo instance 10000"),
                            (this.btnPlay = this.make.button(400, 650, "ui", this.up, this, "btnMenuPlay instance 10001", "btnMenuPlay instance 10000")),
                            (this.btnPlay.name = "play"),
                            this.btnPlay.anchor.setTo(0.5),
                            (this.btnPlay.forceOut = !0),
                            this.btnPlay.onInputDown.add(this.down, this.btnPlay),
                            this.groupMM.addChild(this.btnPlay),
                            this.btnPlay.onInputOver.add(this.btnPlayOver, this),
                            this.btnPlay.onInputOut.add(this.btnPlayOut, this),
                            (this.textPlay = this.game.make.bitmapText(0, 0, "mainFont", "Play", 44)),
                            this.textPlay.anchor.setTo(0.5),
                            this.btnPlay.addChild(this.textPlay),
                            h5branding.Utils.getBrandingDomain() !== h5branding.BrandingDomain.Neutral &&
                                ((this.btnLogo = this.make.button(
                                    25,
                                    500,
                                    "branding_logo",
                                    function () {
                                        _this.goLogo(_this.game);
                                    },
                                    this
                                )),
                                (this.btnLogo.input.useHandCursor = !0),
                                this.groupMM.addChild(this.btnLogo),
                                h5branding.Branding.outGoingLinksAllowed() || (this.btnLogo.inputEnabled = !1));
                    }),
                    (Menu.prototype.goLogo = function (game) {
                        h5branding.Branding.openCampaignLink("wheely-7", "logo");
                    }),
                    (Menu.prototype.btnPlayOver = function () {
                        Client.SoundManager.playSFX("btnOver"), this.textPlay.scale.set(1.1, 1.1);
                    }),
                    (Menu.prototype.btnPlayOut = function () {
                        this.textPlay.scale.set(1, 1);
                    }),
                    (Menu.prototype.createLevelSelect = function () {
                        var levelBtn,
                            count = 0,
                            countStars = 0;
                        this.groupLS = new Phaser.Group(this.game);
                        for (var i = 0; i < 4; i++)
                            for (
                                var j = 0;
                                j < 4 &&
                                (++count <= this.openLevels
                                    ? (countStars += (levelBtn = new Client.LevelSelectButton(count, this.game, 275 + 90 * j, 125 + 90 * i, "ui", this.up, this, null, "btnLevel instance 10000")).addStars())
                                    : (levelBtn = new Client.LevelSelectButton(count, this.game, 275 + 90 * j, 125 + 90 * i, "ui", null, null, null, "btnLevel instance 10001")).addLock(),
                                this.groupLS.add(levelBtn),
                                3 !== i || 2 !== j);
                                j++
                            );
                        levelBtn = null;
                        var btnExit = this.make.button(680, 500, "ui", this.up, this, "btnBigClose instance 10001", "btnBigClose instance 10000", "btnBigClose instance 10002");
                        (btnExit.name = "exit"),
                            btnExit.anchor.set(0.5, 0.5),
                            btnExit.onInputDown.add(this.down, btnExit),
                            btnExit.onInputOver.add(this.over, this),
                            this.groupLS.addChild(btnExit),
                            this.groupLS.create(10, 10, "ui", "star instance 10000"),
                            this.groupLS.add(this.game.make.bitmapText(60, 10, "numbers", countStars + "/45", 40));
                    }),
                    (Menu.prototype.over = function () {
                        Client.SoundManager.playSFX("btnOver");
                    }),
                    (Menu.prototype.up = function (btn) {
                        btn.scale.setTo(1),
                            Client.SoundManager.playSFX("btnClick"),
                            "exit" === btn.name
                                ? this.showMainMenu()
                                : "play" === btn.name
                                ? ((this.btnPlay.input.enabled = !1), this.add.tween(this.btnPlay).to({ y: 650 }, 300, Phaser.Easing.Linear.None, !0).onComplete.addOnce(this.playPressed, this))
                                : ((Client.LevelManager.getInstance().currentLevel = Number(btn.name)), this.game.state.start(SceneList.LevelBuilder, !0, !1));
                    }),
                    (Menu.prototype.playPressed = function () {
                        0 === Client.DataManager.getInstance().saveObj.pl
                            ? (Client.DataManager.getInstance().saveData("pl", 1),
                              Client.DataManager.getInstance().saveData("lvl", 1),
                              (Client.LevelManager.getInstance().currentLevel = 1),
                              this.game.state.start(SceneList.LevelBuilder, !0, !1))
                            : (this.showLS(), this.btnPlayOut());
                    }),
                    (Menu.prototype.down = function (btn) {
                        btn.scale.setTo(0.9);
                    }),
                    (Menu.prototype.showMainMenu = function () {
                        (this.groupMM.visible = !0), (this.groupLS.visible = !1), (this.btnPlay.y = 650), this.add.tween(this.btnPlay).to({ y: 280 }, 2e3, Phaser.Easing.Elastic.Out, !0), (this.btnPlay.input.enabled = !0);
                    }),
                    (Menu.prototype.showLS = function () {
                        (this.groupMM.visible = !1), (this.groupLS.visible = !0);
                    }),
                    (Menu.prototype.shutdown = function () {
                        (this.btnPlay = null),
                            this.btnLogo && (this.btnLogo = null),
                            (this.groupLS = null),
                            (this.groupMM = null),
                            (this.textPlay = null),
                            this.magnifier.free(),
                            (this.magnifier = null),
                            this.thief.free(),
                            (this.thief = null);
                    }),
                    (Menu.Name = "Menu"),
                    Menu
                );
            })(Phaser.State);
            Client.Menu = Menu;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Preloader = (function (_super) {
                function Preloader() {
                    return (null !== _super && _super.apply(this, arguments)) || this;
                }
                return (
                    __extends(Preloader, _super),
                    (Preloader.prototype.init = function () {
                        var outline = this.add.graphics(this.world.centerX - 100, this.world.centerY);
                        outline.lineStyle(2, 16777215, 1),
                            outline.drawRoundedRect(0, -20, 200, 40, 10),
                            (this.progress = this.add.graphics(this.world.centerX - 100, this.world.centerY)),
                            this.progress.beginFill(16711680, 1),
                            this.progress.drawRoundedRect(2, -19, 198, 38, 10);
                    }),
                    (Preloader.prototype.preload = function () {
                        var _this = this;
                        this.game.load.bitmapFont("mainFont", "assets/fonts/mainFont.png", "assets/fonts/mainFont.fnt"),
                            this.game.load.bitmapFont("numbers", "assets/fonts/numbers.png", "assets/fonts/numbers.fnt"),
                            this.game.load.bitmapFont("walkthrough", "assets/fonts/walkthrough.png", "assets/fonts/walkthrough.fnt"),
                            Images.list.forEach(function (assetName) {
                                _this.game.load.image(assetName, "assets/images/" + assetName + ".png");
                            }),
                            Atlases.list.forEach(function (assetName) {
                                _this.game.load.atlas(assetName, "assets/atlases/" + assetName + ".png", "assets/atlases/" + assetName + ".json");
                            }),
                            Sounds.list.forEach(function (assetName) {
                                _this.game.device.iOS
                                    ? _this.game.load.audio(assetName, ["assets/sound/" + assetName + ".m4a"])
                                    : _this.game.load.audio(assetName, ["assets/sound/" + assetName + ".ogg", "assets/sound/" + assetName + ".mp3"]);
                            });
                    }),
                    (Preloader.prototype.loadUpdate = function () {
                        this.progress.scale.x = this.game.load.progress / 100;
                    }),
                    (Preloader.prototype.create = function () {
                        this.game.state.start(SceneList.Menu, !0, !1);
                    }),
                    (Preloader.prototype.shutdown = function () {
                        (this.progress = null),
                            !1 === Client.Main.instance.soundStarted && (Client.SoundManager.init(this.game), Client.SimpleTweenManager.init(this.game), (Client.Main.instance.soundStarted = !0)),
                            this.physics.startSystem(Phaser.Physics.BOX2D),
                            (this.physics.box2d.gravity.y = 500),
                            (this.physics.box2d.debugDraw.joints = !0);
                    }),
                    Preloader
                );
            })(Phaser.State);
            Client.Preloader = Preloader;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {})),
    (function (Wheely) {
        !(function (Client) {
            var Robbery = (function (_super) {
                function Robbery() {
                    var _this = (null !== _super && _super.apply(this, arguments)) || this;
                    return (_this.name = Robbery.Name), _this;
                }
                return (
                    __extends(Robbery, _super),
                    (Robbery.prototype.init = function () {
                        h5branding.google.sendScreenView(Robbery.Name),
                            (this.layerBackground = this.game.add.group()),
                            (this.layerTop = this.game.add.group()),
                            this.layerBackground.create(0, 0, "robberyBack"),
                            this.addVent(498, 227, -1),
                            this.layerBackground.create(433, 218, "robbery", "ventPart instance 10000"),
                            this.addVent(389, 227, 1),
                            (this.robberyScene = new Client.RobberyScene(this.game, this.layerBackground, this.layerTop)),
                            this.layerBackground.create(0, 0, "robberyFront"),
                            this.layerTop.create(0, 0, "robberyOverley"),
                            this.robberyScene.playAct(Client.LevelManager.instance.currentRobberyScene, this.layerBackground);
                    }),
                    (Robbery.prototype.update = function () {
                        this.robberyScene.update();
                    }),
                    (Robbery.prototype.addVent = function (_x, _y, _scaleX) {
                        var vent = this.layerBackground.create(_x, _y, "robbery", "vent instance 10000");
                        vent.animations.add("anim", Phaser.Animation.generateFrameNames("vent instance 1", 0, 59, "", 4), 30, !0), vent.play("anim"), vent.scale.set(_scaleX, 1), (vent = null);
                    }),
                    (Robbery.prototype.shutdown = function () {
                        _super.prototype.shutdown.call(this), (this.layerBackground = null), this.robberyScene.free(), (this.robberyScene = null), (this.layerTop = null);
                    }),
                    (Robbery.Name = "Robbery"),
                    Robbery
                );
            })(Phaser.State);
            Client.Robbery = Robbery;
        })(Wheely.Client || (Wheely.Client = {}));
    })(Wheely || (Wheely = {}));
var spine = {
    radDeg: 180 / Math.PI,
    degRad: Math.PI / 180,
    Float32Array: "undefined" == typeof Float32Array ? Array : Float32Array,
    Uint32Array: "undefined" == typeof Uint32Array ? Array : Uint32Array,
    Uint16Array: "undefined" == typeof Uint16Array ? Array : Uint16Array,
};
(spine.temp = new spine.Float32Array(2)),
    (spine.BoneData = function (a, b) {
        (this.name = a), (this.parent = b);
    }),
    (spine.BoneData.prototype = { length: 0, x: 0, y: 0, rotation: 0, scaleX: 1, scaleY: 1, inheritScale: !0, inheritRotation: !0 }),
    (spine.BlendMode = { normal: 0, additive: 1, multiply: 2, screen: 3 }),
    (spine.SlotData = function (a, b) {
        (this.name = a), (this.boneData = b);
    }),
    (spine.SlotData.prototype = { r: 1, g: 1, b: 1, a: 1, attachmentName: null, blendMode: spine.BlendMode.normal }),
    (spine.IkConstraintData = function (a) {
        (this.name = a), (this.bones = []);
    }),
    (spine.IkConstraintData.prototype = { target: null, bendDirection: 1, mix: 1 }),
    (spine.TransformConstraintData = function (a) {
        this.name = a;
    }),
    (spine.TransformConstraintData.prototype = { bone: null, target: null, translateMix: 1, x: 0, y: 0 }),
    (spine.Bone = function (a, b, c) {
        (this.data = a), (this.skeleton = b), (this.parent = c), this.setToSetupPose();
    }),
    (spine.Bone.yDown = !1),
    (spine.Bone.prototype = {
        x: 0,
        y: 0,
        rotation: 0,
        scaleX: 1,
        scaleY: 1,
        a: 0,
        b: 0,
        worldX: 0,
        c: 0,
        d: 0,
        worldY: 0,
        worldSignX: 1,
        worldSignY: 1,
        update: function () {
            this.updateWorldTransform(this.x, this.y, this.rotation, this.scaleX, this.scaleY);
        },
        updateWorldTransformWith: function () {
            this.updateWorldTransform(this.x, this.y, this.rotation, this.scaleX, this.scaleY);
        },
        updateWorldTransform: function (a, b, c, d, e) {
            (this.appliedRotation = c), (this.appliedScaleX = d), (this.appliedScaleY = e), (c *= spine.degRad);
            var f = Math.cos(c),
                g = Math.sin(c),
                h = f * d,
                i = -g * e,
                j = g * d,
                k = f * e,
                l = this.parent;
            if (!l) {
                var m = this.skeleton;
                return (
                    m.flipX && ((a = -a), (h = -h), (i = -i)),
                    m.flipY != spine.Bone.yDown && ((b = -b), (j = -j), (k = -k)),
                    (this.a = h),
                    (this.b = i),
                    (this.c = j),
                    (this.d = k),
                    (this.worldX = a),
                    (this.worldY = b),
                    (this.worldSignX = d < 0 ? -1 : 1),
                    void (this.worldSignY = e < 0 ? -1 : 1)
                );
            }
            var n = l.a,
                o = l.b,
                p = l.c,
                q = l.d;
            if (
                ((this.worldX = n * a + o * b + l.worldX),
                (this.worldY = p * a + q * b + l.worldY),
                (this.worldSignX = l.worldSignX * (d < 0 ? -1 : 1)),
                (this.worldSignY = l.worldSignY * (e < 0 ? -1 : 1)),
                this.data.inheritRotation && this.data.inheritScale)
            )
                (this.a = n * h + o * j), (this.b = n * i + o * k), (this.c = p * h + q * j), (this.d = p * i + q * k);
            else {
                if (this.data.inheritRotation) {
                    (p = o = 0), (q = n = 1);
                    do {
                        c = l.appliedRotation * spine.degRad;
                        var r = n * (f = Math.cos(c)) + o * (g = Math.sin(c));
                        if (((o = n * -g + o * f), (n = r), (r = p * f + q * g), (q = p * -g + q * f), (p = r), !l.data.inheritRotation)) break;
                        l = l.parent;
                    } while (l);
                    (this.a = n * h + o * j), (this.b = n * i + o * k), (this.c = p * h + q * j), (this.d = p * i + q * k);
                } else if (this.data.inheritScale) {
                    (p = o = 0), (q = n = 1);
                    do {
                        (c = l.appliedRotation * spine.degRad), (f = Math.cos(c)), (g = Math.sin(c));
                        var s = l.appliedScaleX,
                            t = l.appliedScaleY,
                            u = f * s,
                            v = -g * t,
                            w = g * s,
                            x = f * t;
                        r = n * u + o * w;
                        if (
                            ((o = n * v + o * x),
                            (n = r),
                            (r = p * u + q * w),
                            (q = p * v + q * x),
                            (p = r),
                            s < 0 && (c = -c),
                            (r = n * (f = Math.cos(-c)) + o * (g = Math.sin(-c))),
                            (o = n * -g + o * f),
                            (n = r),
                            (r = p * f + q * g),
                            (q = p * -g + q * f),
                            (p = r),
                            !l.data.inheritScale)
                        )
                            break;
                        l = l.parent;
                    } while (l);
                    (this.a = n * h + o * j), (this.b = n * i + o * k), (this.c = p * h + q * j), (this.d = p * i + q * k);
                } else (this.a = h), (this.b = i), (this.c = j), (this.d = k);
                this.skeleton.flipX && ((this.a = -this.a), (this.b = -this.b)), this.skeleton.flipY != spine.Bone.yDown && ((this.c = -this.c), (this.d = -this.d));
            }
        },
        setToSetupPose: function () {
            var a = this.data;
            (this.x = a.x), (this.y = a.y), (this.rotation = a.rotation), (this.scaleX = a.scaleX), (this.scaleY = a.scaleY);
        },
        getWorldRotationX: function () {
            return Math.atan2(this.c, this.a) * spine.radDeg;
        },
        getWorldRotationY: function () {
            return Math.atan2(this.d, this.b) * spine.radDeg;
        },
        getWorldScaleX: function () {
            return Math.sqrt(this.a * this.a + this.b * this.b) * this.worldSignX;
        },
        getWorldScaleY: function () {
            return Math.sqrt(this.c * this.c + this.d * this.d) * this.worldSignY;
        },
        worldToLocal: function (a) {
            var b = a[0] - this.worldX,
                c = a[1] - this.worldY,
                d = this.a,
                e = this.b,
                f = this.c,
                g = this.d,
                h = 1 / (d * g - e * f);
            return (a[0] = b * g * h - c * e * h), (a[1] = c * d * h - b * f * h), a;
        },
        localToWorld: function (a) {
            var b = a[0],
                c = a[1];
            return (a[0] = b * this.a + c * this.b + this.worldX), (a[1] = b * this.c + c * this.d + this.worldY), a;
        },
    }),
    (spine.Slot = function (a, b) {
        (this.data = a), (this.bone = b), (this.attachmentVertices = new spine.Float32Array()), this.setToSetupPose();
    }),
    (spine.Slot.prototype = {
        r: 1,
        g: 1,
        b: 1,
        a: 1,
        _attachmentTime: 0,
        attachment: null,
        setAttachment: function (a) {
            this.attachment != a && ((this.attachment = a), (this._attachmentTime = this.bone.skeleton.time), (this.attachmentVertices.length = 0));
        },
        setAttachmentTime: function (a) {
            this._attachmentTime = this.bone.skeleton.time - a;
        },
        getAttachmentTime: function () {
            return this.bone.skeleton.time - this._attachmentTime;
        },
        setToSetupPose: function () {
            var a = this.data;
            if (((this.r = a.r), (this.g = a.g), (this.b = a.b), (this.a = a.a), a.attachmentName)) {
                for (var b = this.bone.skeleton.data.slots, c = 0, d = b.length; c < d; c++)
                    if (b[c] == a) {
                        (this.attachment = null), this.setAttachment(this.bone.skeleton.getAttachmentBySlotIndex(c, a.attachmentName));
                        break;
                    }
            } else this.setAttachment(null);
        },
    }),
    (spine.IkConstraint = function (a, b) {
        (this.data = a), (this.mix = a.mix), (this.bendDirection = a.bendDirection), (this.bones = []);
        for (var c = 0, d = a.bones.length; c < d; c++) this.bones[c] = b.findBone(a.bones[c].name);
        this.target = b.findBone(a.target.name);
    }),
    (spine.IkConstraint.prototype = {
        apply: function () {
            this.update();
        },
        update: function () {
            var a = this.target,
                b = this.bones;
            switch (b.length) {
                case 1:
                    spine.IkConstraint.apply1(b[0], a.worldX, a.worldY, this.mix);
                    break;
                case 2:
                    spine.IkConstraint.apply2(b[0], b[1], a.worldX, a.worldY, this.bendDirection, this.mix);
            }
        },
    }),
    (spine.IkConstraint.apply1 = function (a, b, c, d) {
        var e = a.parent ? a.parent.getWorldRotationX() : 0,
            f = a.rotation,
            g = Math.atan2(c - a.worldY, b - a.worldX) * spine.radDeg - e;
        (a.worldSignX != a.worldSignY) != (a.skeleton.flipX != (a.skeleton.flipY != spine.Bone.yDown)) && (g = 360 - g),
            180 < g ? (g -= 360) : g < -180 && (g += 360),
            a.updateWorldTransform(a.x, a.y, f + (g - f) * d, a.appliedScaleX, a.appliedScaleY);
    }),
    (spine.IkConstraint.apply2 = function (a, b, c, d, e, f) {
        if (0 != f) {
            var g,
                h,
                i,
                j = a.x,
                k = a.y,
                l = a.appliedScaleX,
                m = a.appliedScaleY;
            (i = l < 0 ? ((l = -l), (g = 180), -1) : ((g = 0), 1)), m < 0 && ((m = -m), (i = -i));
            var n = b.x,
                o = b.y,
                p = b.appliedScaleX,
                q = Math.abs(l - m) <= 1e-4;
            q || 0 == o || ((b.worldX = a.a * n + a.worldX), (b.worldY = a.c * n + a.worldY), (o = 0)), (h = p < 0 ? ((p = -p), 180) : 0);
            var r,
                s,
                t,
                u,
                v = a.parent;
            if (v) {
                var w = v.a,
                    x = v.b,
                    y = v.c,
                    A = 1 / (w * (z = v.d) - x * y),
                    B = v.worldX,
                    C = v.worldY;
                (r = ((D = c - B) * z - (E = d - C) * x) * A - j), (s = (E * w - D * y) * A - k), (t = ((D = b.worldX - B) * z - (E = b.worldY - C) * x) * A - j), (u = (E * w - D * y) * A - k);
            } else (r = c - j), (s = d - k), (t = b.worldX - j), (u = b.worldY - k);
            var F,
                G,
                H = Math.sqrt(t * t + u * u),
                I = b.data.length * p;
            a: if (q) {
                var J = (r * r + s * s - H * H - (I *= l) * I) / (2 * H * I);
                J < -1 ? (J = -1) : 1 < J && (J = 1), (G = Math.acos(J) * e);
                w = H + I * J;
                var K = I * Math.sin(G);
                F = Math.atan2(s * w - r * K, r * w + s * K);
            } else {
                (w = l * I), (x = m * I);
                var z,
                    L = Math.atan2(s, r),
                    M = w * w,
                    N = x * x,
                    P = r * r + s * s,
                    Q = N * (H * H) + M * P - M * N,
                    R = -2 * N * H,
                    S = N - M;
                if (0 <= (z = R * R - 4 * S * Q)) {
                    var T = Math.sqrt(z);
                    R < 0 && (T = -T);
                    var U = (T = -(R + T) / 2) / S,
                        V = Q / T,
                        W = Math.abs(U) < Math.abs(V) ? U : V;
                    if (W * W <= P) {
                        var E = Math.sqrt(P - W * W) * e;
                        (F = L - Math.atan2(E, W)), (G = Math.atan2(E / m, (W - H) / l));
                        break a;
                    }
                }
                var D,
                    X = 0,
                    Y = Number.MAX_VALUE,
                    Z = 0,
                    $ = 0,
                    _ = 0,
                    aa = 0,
                    ba = 0,
                    ca = 0,
                    da = (D = H + w) * D;
                aa < da && ((_ = 0), (aa = da), (ba = D)), (da = (D = H - w) * D) < Y && ((X = Math.PI), (Y = da), (Z = D));
                var ea = Math.acos((-w * H) / (M - N));
                (da = (D = w * Math.cos(ea) + H) * D + (E = x * Math.sin(ea)) * E) < Y && ((X = ea), (Y = da), (Z = D), ($ = E)),
                    aa < da && ((_ = ea), (aa = da), (ba = D), (ca = E)),
                    (G = P <= (Y + aa) / 2 ? ((F = L - Math.atan2($ * e, Z)), X * e) : ((F = L - Math.atan2(ca * e, ba)), _ * e));
            }
            var fa = Math.atan2(o, n) * i;
            180 < (F = (F - fa) * spine.radDeg + g) ? (F -= 360) : F < -180 && (F += 360), 180 < (G = (G + fa) * spine.radDeg * i + h) ? (G -= 360) : G < -180 && (G += 360);
            var ga = a.rotation;
            a.updateWorldTransform(j, k, ga + (F - ga) * f, a.appliedScaleX, a.appliedScaleY), (ga = b.rotation), b.updateWorldTransform(n, o, ga + (G - ga) * f, b.appliedScaleX, b.appliedScaleY);
        }
    }),
    (spine.TransformConstraint = function (a, b) {
        (this.data = a), (this.translateMix = a.translateMix), (this.x = a.x), (this.y = a.y), (this.bone = b.findBone(a.bone.name)), (this.target = b.findBone(a.target.name));
    }),
    (spine.TransformConstraint.prototype = {
        apply: function () {
            this.update();
        },
        update: function () {
            var a = this.translateMix;
            if (0 < a) {
                var b = spine.temp;
                (b[0] = x), (b[1] = y), this.target.localToWorld(b);
                var c = this.bone;
                (c.worldX += (b[0] - c.worldX) * a), (c.worldY += (b[1] - c.worldY) * a);
            }
        },
    }),
    (spine.Skin = function (a) {
        (this.name = a), (this.attachments = {});
    }),
    (spine.Skin.prototype = {
        addAttachment: function (a, b, c) {
            this.attachments[a + ":" + b] = c;
        },
        getAttachment: function (a, b) {
            return this.attachments[a + ":" + b];
        },
        _attachAll: function (a, b) {
            for (var c in b.attachments) {
                var d = c.indexOf(":"),
                    e = parseInt(c.substring(0, d)),
                    f = c.substring(d + 1),
                    g = a.slots[e];
                if (g.attachment && g.attachment.name == f) {
                    var h = this.getAttachment(e, f);
                    h && g.setAttachment(h);
                }
            }
        },
    }),
    (spine.Animation = function (a, b, c) {
        (this.name = a), (this.timelines = b), (this.duration = c);
    }),
    (spine.Animation.prototype = {
        apply: function (a, b, c, d, e) {
            d && 0 != this.duration && ((c %= this.duration), 0 < b && (b %= this.duration));
            for (var f = this.timelines, g = 0, h = f.length; g < h; g++) f[g].apply(a, b, c, e, 1);
        },
        mix: function (a, b, c, d, e, f) {
            d && 0 != this.duration && ((c %= this.duration), 0 < b && (b %= this.duration));
            for (var g = this.timelines, h = 0, i = g.length; h < i; h++) g[h].apply(a, b, c, e, f);
        },
    }),
    (spine.Animation.binarySearch = function (a, b, c) {
        var d = 0,
            e = Math.floor(a.length / c) - 2;
        if (!e) return c;
        for (var f = e >>> 1; ; ) {
            if ((a[(f + 1) * c] <= b ? (d = f + 1) : (e = f), d == e)) return (d + 1) * c;
            f = (d + e) >>> 1;
        }
    }),
    (spine.Animation.binarySearch1 = function (a, b) {
        var c = 0,
            d = a.length - 2;
        if (!d) return 1;
        for (var e = d >>> 1; ; ) {
            if ((a[e + 1] <= b ? (c = e + 1) : (d = e), c == d)) return c + 1;
            e = (c + d) >>> 1;
        }
    }),
    (spine.Animation.linearSearch = function (a, b, c) {
        for (var d = 0, e = a.length - c; d <= e; d += c) if (a[d] > b) return d;
        return -1;
    }),
    (spine.Curves = function (a) {
        var b = 19 * (a - 1);
        (this.curves = new spine.Float32Array(b)), (this.curves.length = b);
    }),
    (spine.Curves.prototype = {
        setLinear: function (a) {
            this.curves[19 * a] = 0;
        },
        setStepped: function (a) {
            this.curves[19 * a] = 1;
        },
        setCurve: function (a, b, c, d, e) {
            var g = 0.1 * 0.1,
                h = 0.1 * g,
                j = 3 * g,
                k = 6 * g,
                l = 6 * h,
                m = 2 * -b + d,
                n = 2 * -c + e,
                o = 3 * (b - d) + 1,
                p = 3 * (c - e) + 1,
                q = b * (3 * 0.1) + m * j + o * h,
                r = c * (3 * 0.1) + n * j + p * h,
                s = m * k + o * l,
                t = n * k + p * l,
                u = o * l,
                v = p * l,
                w = 19 * a,
                x = this.curves;
            x[w++] = 2;
            for (var y = q, z = r, A = w + 19 - 1; w < A; w += 2) (x[w] = y), (x[w + 1] = z), (q += s), (r += t), (s += u), (t += v), (y += q), (z += r);
        },
        getCurvePercent: function (a, b) {
            b = b < 0 ? 0 : 1 < b ? 1 : b;
            var c = this.curves,
                d = 19 * a,
                e = c[d];
            if (0 === e) return b;
            if (1 == e) return 0;
            for (var f = 0, g = ++d, h = d + 19 - 1; d < h; d += 2)
                if (b <= (f = c[d])) {
                    var i, j;
                    return (j = d == g ? (i = 0) : ((i = c[d - 2]), c[d - 1])) + ((c[d + 1] - j) * (b - i)) / (f - i);
                }
            var k = c[d - 1];
            return k + ((1 - k) * (b - f)) / (1 - f);
        },
    }),
    (spine.RotateTimeline = function (a) {
        (this.curves = new spine.Curves(a)), (this.frames = new spine.Float32Array(2 * a)), (this.frames.length = 2 * a);
    }),
    (spine.RotateTimeline.prototype = {
        boneIndex: 0,
        getFrameCount: function () {
            return this.frames.length / 2;
        },
        setFrame: function (a, b, c) {
            (a *= 2), (this.frames[a] = b), (this.frames[a + 1] = c);
        },
        apply: function (a, b, c, d, e) {
            var f = this.frames;
            if (!(c < f[0])) {
                var g = a.bones[this.boneIndex];
                if (c >= f[f.length - 2]) {
                    for (var h = g.data.rotation + f[f.length - 1] - g.rotation; 180 < h; ) h -= 360;
                    for (; h < -180; ) h += 360;
                    return void (g.rotation += h * e);
                }
                var i = spine.Animation.binarySearch(f, c, 2),
                    j = f[i - 1],
                    k = f[i],
                    l = 1 - (c - k) / (f[i - 2] - k);
                l = this.curves.getCurvePercent(i / 2 - 1, l);
                for (h = f[i + 1] - j; 180 < h; ) h -= 360;
                for (; h < -180; ) h += 360;
                for (h = g.data.rotation + (j + h * l) - g.rotation; 180 < h; ) h -= 360;
                for (; h < -180; ) h += 360;
                g.rotation += h * e;
            }
        },
    }),
    (spine.TranslateTimeline = function (a) {
        (this.curves = new spine.Curves(a)), (this.frames = new spine.Float32Array(3 * a)), (this.frames.length = 3 * a);
    }),
    (spine.TranslateTimeline.prototype = {
        boneIndex: 0,
        getFrameCount: function () {
            return this.frames.length / 3;
        },
        setFrame: function (a, b, c, d) {
            (a *= 3), (this.frames[a] = b), (this.frames[a + 1] = c), (this.frames[a + 2] = d);
        },
        apply: function (a, b, c, d, e) {
            var f = this.frames;
            if (!(c < f[0])) {
                var g = a.bones[this.boneIndex];
                if (c >= f[f.length - 3]) return (g.x += (g.data.x + f[f.length - 2] - g.x) * e), void (g.y += (g.data.y + f[f.length - 1] - g.y) * e);
                var h = spine.Animation.binarySearch(f, c, 3),
                    i = f[h - 2],
                    j = f[h - 1],
                    k = f[h],
                    l = 1 - (c - k) / (f[h + -3] - k);
                (l = this.curves.getCurvePercent(h / 3 - 1, l)), (g.x += (g.data.x + i + (f[h + 1] - i) * l - g.x) * e), (g.y += (g.data.y + j + (f[h + 2] - j) * l - g.y) * e);
            }
        },
    }),
    (spine.ScaleTimeline = function (a) {
        (this.curves = new spine.Curves(a)), (this.frames = new spine.Float32Array(3 * a)), (this.frames.length = 3 * a);
    }),
    (spine.ScaleTimeline.prototype = {
        boneIndex: 0,
        getFrameCount: function () {
            return this.frames.length / 3;
        },
        setFrame: function (a, b, c, d) {
            (a *= 3), (this.frames[a] = b), (this.frames[a + 1] = c), (this.frames[a + 2] = d);
        },
        apply: function (a, b, c, d, e) {
            var f = this.frames;
            if (!(c < f[0])) {
                var g = a.bones[this.boneIndex];
                if (c >= f[f.length - 3]) return (g.scaleX += (g.data.scaleX * f[f.length - 2] - g.scaleX) * e), void (g.scaleY += (g.data.scaleY * f[f.length - 1] - g.scaleY) * e);
                var h = spine.Animation.binarySearch(f, c, 3),
                    i = f[h - 2],
                    j = f[h - 1],
                    k = f[h],
                    l = 1 - (c - k) / (f[h + -3] - k);
                (l = this.curves.getCurvePercent(h / 3 - 1, l)), (g.scaleX += (g.data.scaleX * (i + (f[h + 1] - i) * l) - g.scaleX) * e), (g.scaleY += (g.data.scaleY * (j + (f[h + 2] - j) * l) - g.scaleY) * e);
            }
        },
    }),
    (spine.ColorTimeline = function (a) {
        (this.curves = new spine.Curves(a)), (this.frames = new spine.Float32Array(5 * a)), (this.frames.length = 5 * a);
    }),
    (spine.ColorTimeline.prototype = {
        slotIndex: 0,
        getFrameCount: function () {
            return this.frames.length / 5;
        },
        setFrame: function (a, b, c, d, e, f) {
            (a *= 5), (this.frames[a] = b), (this.frames[a + 1] = c), (this.frames[a + 2] = d), (this.frames[a + 3] = e), (this.frames[a + 4] = f);
        },
        apply: function (a, b, c, d, e) {
            var f = this.frames;
            if (!(c < f[0])) {
                var g, h, i, j;
                if (c >= f[f.length - 5]) {
                    var k = f.length - 1;
                    (g = f[k - 3]), (h = f[k - 2]), (i = f[k - 1]), (j = f[k]);
                } else {
                    var l = spine.Animation.binarySearch(f, c, 5),
                        m = f[l - 4],
                        n = f[l - 3],
                        o = f[l - 2],
                        p = f[l - 1],
                        q = f[l],
                        r = 1 - (c - q) / (f[l - 5] - q);
                    (r = this.curves.getCurvePercent(l / 5 - 1, r)), (g = m + (f[l + 1] - m) * r), (h = n + (f[l + 2] - n) * r), (i = o + (f[l + 3] - o) * r), (j = p + (f[l + 4] - p) * r);
                }
                var s = a.slots[this.slotIndex];
                e < 1 ? ((s.r += (g - s.r) * e), (s.g += (h - s.g) * e), (s.b += (i - s.b) * e), (s.a += (j - s.a) * e)) : ((s.r = g), (s.g = h), (s.b = i), (s.a = j));
            }
        },
    }),
    (spine.AttachmentTimeline = function (a) {
        (this.curves = new spine.Curves(a)), (this.frames = new spine.Float32Array(a)), (this.frames.length = a), (this.attachmentNames = []), (this.attachmentNames.length = a);
    }),
    (spine.AttachmentTimeline.prototype = {
        slotIndex: 0,
        getFrameCount: function () {
            return this.frames.length;
        },
        setFrame: function (a, b, c) {
            (this.frames[a] = b), (this.attachmentNames[a] = c);
        },
        apply: function (a, b, c, d, e) {
            var f = this.frames;
            if (c < f[0]) c < b && this.apply(a, b, Number.MAX_VALUE, null, 0);
            else {
                c < b && (b = -1);
                var g = c >= f[f.length - 1] ? f.length - 1 : spine.Animation.binarySearch1(f, c) - 1;
                if (!(f[g] < b)) {
                    var h = this.attachmentNames[g];
                    a.slots[this.slotIndex].setAttachment(h ? a.getAttachmentBySlotIndex(this.slotIndex, h) : null);
                }
            }
        },
    }),
    (spine.EventTimeline = function (a) {
        (this.frames = new spine.Float32Array(a)), (this.frames.length = a), (this.events = []), (this.events.length = a);
    }),
    (spine.EventTimeline.prototype = {
        getFrameCount: function () {
            return this.frames.length;
        },
        setFrame: function (a, b) {
            (this.frames[a] = b.time), (this.events[a] = b);
        },
        apply: function (a, b, c, d, e) {
            if (d) {
                var f = this.frames,
                    g = f.length;
                if (c < b) this.apply(a, b, Number.MAX_VALUE, d, e), (b = -1);
                else if (b >= f[g - 1]) return;
                if (!(c < f[0])) {
                    var h;
                    if (b < f[0]) h = 0;
                    else for (var i = f[(h = spine.Animation.binarySearch1(f, b))]; 0 < h && f[h - 1] == i; ) h--;
                    for (var j = this.events; h < g && c >= f[h]; h++) d[d.length] = j[h];
                }
            }
        },
    }),
    (spine.DrawOrderTimeline = function (a) {
        (this.frames = new spine.Float32Array(a)), (this.frames.length = a), (this.drawOrders = []), (this.drawOrders.length = a);
    }),
    (spine.DrawOrderTimeline.prototype = {
        getFrameCount: function () {
            return this.frames.length;
        },
        setFrame: function (a, b, c) {
            (this.frames[a] = b), (this.drawOrders[a] = c);
        },
        apply: function (a, b, c, d, e) {
            var f = this.frames;
            if (!(c < f[0])) {
                var g;
                g = c >= f[f.length - 1] ? f.length - 1 : spine.Animation.binarySearch1(f, c) - 1;
                var h = a.drawOrder,
                    i = a.slots,
                    j = this.drawOrders[g];
                if (j) for (var k = 0, l = j.length; k < l; k++) h[k] = a.slots[j[k]];
                else for (k = 0, l = i.length; k < l; k++) h[k] = i[k];
            }
        },
    }),
    (spine.FfdTimeline = function (a) {
        (this.curves = new spine.Curves(a)), (this.frames = new spine.Float32Array(a)), (this.frames.length = a), (this.frameVertices = []), (this.frameVertices.length = a);
    }),
    (spine.FfdTimeline.prototype = {
        slotIndex: 0,
        attachment: 0,
        getFrameCount: function () {
            return this.frames.length;
        },
        setFrame: function (a, b, c) {
            (this.frames[a] = b), (this.frameVertices[a] = c);
        },
        apply: function (a, b, c, d, e) {
            var f = a.slots[this.slotIndex],
                g = f.attachment;
            if (g && (g == this.attachment || (g.inheritFFD && g.parentMesh == this.attachment))) {
                var h = this.frames;
                if (!(c < h[0])) {
                    var i = this.frameVertices,
                        j = i[0].length,
                        k = f.attachmentVertices;
                    if ((k.length != j && ((f.attachmentVertices = k = new spine.Float32Array(j)), (e = 1)), c >= h[h.length - 1])) {
                        var l = i[h.length - 1];
                        if (e < 1) for (var m = 0; m < j; m++) k[m] += (l[m] - k[m]) * e;
                        else for (m = 0; m < j; m++) k[m] = l[m];
                    } else {
                        var n = spine.Animation.binarySearch1(h, c),
                            o = h[n],
                            p = 1 - (c - o) / (h[n - 1] - o);
                        p = this.curves.getCurvePercent(n - 1, p < 0 ? 0 : 1 < p ? 1 : p);
                        var q = i[n - 1],
                            r = i[n];
                        if (e < 1)
                            for (m = 0; m < j; m++) {
                                var s = q[m];
                                k[m] += (s + (r[m] - s) * p - k[m]) * e;
                            }
                        else
                            for (m = 0; m < j; m++) {
                                s = q[m];
                                k[m] = s + (r[m] - s) * p;
                            }
                    }
                }
            }
        },
    }),
    (spine.IkConstraintTimeline = function (a) {
        (this.curves = new spine.Curves(a)), (this.frames = new spine.Float32Array(3 * a)), (this.frames.length = 3 * a);
    }),
    (spine.IkConstraintTimeline.prototype = {
        ikConstraintIndex: 0,
        getFrameCount: function () {
            return this.frames.length / 3;
        },
        setFrame: function (a, b, c, d) {
            (a *= 3), (this.frames[a] = b), (this.frames[a + 1] = c), (this.frames[a + 2] = d);
        },
        apply: function (a, b, c, d, e) {
            var f = this.frames;
            if (!(c < f[0])) {
                var g = a.ikConstraints[this.ikConstraintIndex];
                if (c >= f[f.length - 3]) return (g.mix += (f[f.length - 2] - g.mix) * e), void (g.bendDirection = f[f.length - 1]);
                var h = spine.Animation.binarySearch(f, c, 3),
                    i = f[h + -2],
                    j = f[h],
                    k = 1 - (c - j) / (f[h + -3] - j);
                k = this.curves.getCurvePercent(h / 3 - 1, k);
                var l = i + (f[h + 1] - i) * k;
                (g.mix += (l - g.mix) * e), (g.bendDirection = f[h + -1]);
            }
        },
    }),
    (spine.SkeletonData = function () {
        (this.bones = []), (this.slots = []), (this.skins = []), (this.events = []), (this.animations = []), (this.ikConstraints = []), (this.transformConstraints = []);
    }),
    (spine.SkeletonData.prototype = {
        name: null,
        defaultSkin: null,
        width: 0,
        height: 0,
        version: null,
        hash: null,
        findBone: function (a) {
            for (var b = this.bones, c = 0, d = b.length; c < d; c++) if (b[c].name == a) return b[c];
            return null;
        },
        findBoneIndex: function (a) {
            for (var b = this.bones, c = 0, d = b.length; c < d; c++) if (b[c].name == a) return c;
            return -1;
        },
        findSlot: function (a) {
            for (var b = this.slots, c = 0, d = b.length; c < d; c++) if (b[c].name == a) return slot[c];
            return null;
        },
        findSlotIndex: function (a) {
            for (var b = this.slots, c = 0, d = b.length; c < d; c++) if (b[c].name == a) return c;
            return -1;
        },
        findSkin: function (a) {
            for (var b = this.skins, c = 0, d = b.length; c < d; c++) if (b[c].name == a) return b[c];
            return null;
        },
        findEvent: function (a) {
            for (var b = this.events, c = 0, d = b.length; c < d; c++) if (b[c].name == a) return b[c];
            return null;
        },
        findAnimation: function (a) {
            for (var b = this.animations, c = 0, d = b.length; c < d; c++) if (b[c].name == a) return b[c];
            return null;
        },
        findIkConstraint: function (a) {
            for (var b = this.ikConstraints, c = 0, d = b.length; c < d; c++) if (b[c].name == a) return b[c];
            return null;
        },
        findTransformConstraints: function (a) {
            for (var b = this.transformConstraints, c = 0, d = b.length; c < d; c++) if (b[c].name == a) return b[c];
            return null;
        },
    }),
    (spine.Skeleton = function (a) {
        (this.data = a), (this.bones = []);
        for (var b = 0, c = a.bones.length; b < c; b++) {
            var d = a.bones[b],
                e = d.parent ? this.bones[a.bones.indexOf(d.parent)] : null;
            this.bones[b] = new spine.Bone(d, this, e);
        }
        (this.slots = []), (this.drawOrder = []);
        for (b = 0, c = a.slots.length; b < c; b++) {
            var f = a.slots[b],
                g = this.bones[a.bones.indexOf(f.boneData)],
                h = new spine.Slot(f, g);
            (this.slots[b] = h), (this.drawOrder[b] = h);
        }
        this.ikConstraints = [];
        for (b = 0, c = a.ikConstraints.length; b < c; b++) this.ikConstraints[b] = new spine.IkConstraint(a.ikConstraints[b], this);
        this.transformConstraints = [];
        for (b = 0, c = a.transformConstraints.length; b < c; b++) this.transformConstraints[b] = new spine.TransformConstraint(a.transformConstraints[b], this);
        (this.cache = []), this.updateCache();
    }),
    (spine.Skeleton.prototype = {
        x: 0,
        y: 0,
        skin: null,
        r: 1,
        g: 1,
        b: 1,
        a: 1,
        time: 0,
        flipX: !1,
        flipY: !1,
        updateCache: function () {
            for (var a = this.bones, b = this.cache, c = this.ikConstraints, d = this.transformConstraints, e = c.length, f = d.length, g = (b.length = 0), h = a.length; g < h; g++) {
                var i = a[g];
                b[b.length] = i;
                for (var j = 0; j < e; j++) {
                    var k = c[j];
                    if (i == k.bones[k.bones.length - 1]) {
                        b[b.length] = k;
                        break;
                    }
                }
            }
            for (g = 0; g < f; g++) {
                var l = d[g];
                for (j = b.length - 1; 0 <= j; j--) {
                    var m = b[j];
                    if (m == l.bone || m == l.target) {
                        b.splice(j + 1, 0, l);
                        break;
                    }
                }
            }
        },
        updateWorldTransform: function () {
            for (var a = this.cache, b = 0, c = a.length; b < c; b++) a[b].update();
        },
        setToSetupPose: function () {
            this.setBonesToSetupPose(), this.setSlotsToSetupPose();
        },
        setBonesToSetupPose: function () {
            for (var a = this.bones, b = 0, c = a.length; b < c; b++) a[b].setToSetupPose();
            var d = this.ikConstraints;
            for (b = 0, c = d.length; b < c; b++) {
                ((e = d[b]).bendDirection = e.data.bendDirection), (e.mix = e.data.mix);
            }
            var f = this.transformConstraints;
            for (b = 0, c = f.length; b < c; b++) {
                var e;
                ((e = f[b]).translateMix = e.data.translateMix), (e.x = e.data.x), (e.y = e.data.y);
            }
        },
        setSlotsToSetupPose: function () {
            for (var a = this.slots, b = this.drawOrder, c = 0, d = a.length; c < d; c++) (b[c] = a[c]), a[c].setToSetupPose(c);
        },
        getRootBone: function () {
            return this.bones.length ? this.bones[0] : null;
        },
        findBone: function (a) {
            for (var b = this.bones, c = 0, d = b.length; c < d; c++) if (b[c].data.name == a) return b[c];
            return null;
        },
        findBoneIndex: function (a) {
            for (var b = this.bones, c = 0, d = b.length; c < d; c++) if (b[c].data.name == a) return c;
            return -1;
        },
        findSlot: function (a) {
            for (var b = this.slots, c = 0, d = b.length; c < d; c++) if (b[c].data.name == a) return b[c];
            return null;
        },
        findSlotIndex: function (a) {
            for (var b = this.slots, c = 0, d = b.length; c < d; c++) if (b[c].data.name == a) return c;
            return -1;
        },
        setSkinByName: function (a) {
            var b = this.data.findSkin(a);
            if (!b) throw "Skin not found: " + a;
            this.setSkin(b);
        },
        setSkin: function (a) {
            if (a)
                if (this.skin) a._attachAll(this, this.skin);
                else
                    for (var b = this.slots, c = 0, d = b.length; c < d; c++) {
                        var e = b[c],
                            f = e.data.attachmentName;
                        if (f) {
                            var g = a.getAttachment(c, f);
                            g && e.setAttachment(g);
                        }
                    }
            this.skin = a;
        },
        getAttachmentBySlotName: function (a, b) {
            return this.getAttachmentBySlotIndex(this.data.findSlotIndex(a), b);
        },
        getAttachmentBySlotIndex: function (a, b) {
            if (this.skin) {
                var c = this.skin.getAttachment(a, b);
                if (c) return c;
            }
            return this.data.defaultSkin ? this.data.defaultSkin.getAttachment(a, b) : null;
        },
        setAttachment: function (a, b) {
            for (var c = this.slots, d = 0, e = c.length; d < e; d++) {
                var f = c[d];
                if (f.data.name == a) {
                    var g = null;
                    if (b && !(g = this.getAttachmentBySlotIndex(d, b))) throw "Attachment not found: " + b + ", for slot: " + a;
                    return void f.setAttachment(g);
                }
            }
            throw "Slot not found: " + a;
        },
        findIkConstraint: function (a) {
            for (var b = this.ikConstraints, c = 0, d = b.length; c < d; c++) if (b[c].data.name == a) return b[c];
            return null;
        },
        findTransformConstraint: function (a) {
            for (var b = this.transformConstraints, c = 0, d = b.length; c < d; c++) if (b[c].data.name == a) return b[c];
            return null;
        },
        update: function (a) {
            this.time += a;
        },
    }),
    (spine.EventData = function (a) {
        this.name = a;
    }),
    (spine.EventData.prototype = { intValue: 0, floatValue: 0, stringValue: null }),
    (spine.Event = function (a, b) {
        (this.time = a), (this.data = b);
    }),
    (spine.Event.prototype = { intValue: 0, floatValue: 0, stringValue: null }),
    (spine.AttachmentType = { region: 0, boundingbox: 1, mesh: 2, weightedmesh: 3, linkedmesh: 4, weightedlinkedmesh: 5 }),
    (spine.RegionAttachment = function (a) {
        (this.name = a), (this.offset = new spine.Float32Array(8)), (this.offset.length = 8), (this.uvs = new spine.Float32Array(8)), (this.uvs.length = 8);
    }),
    (spine.RegionAttachment.prototype = {
        type: spine.AttachmentType.region,
        x: 0,
        y: 0,
        rotation: 0,
        scaleX: 1,
        scaleY: 1,
        width: 0,
        height: 0,
        r: 1,
        g: 1,
        b: 1,
        a: 1,
        path: null,
        rendererObject: null,
        regionOffsetX: 0,
        regionOffsetY: 0,
        regionWidth: 0,
        regionHeight: 0,
        regionOriginalWidth: 0,
        regionOriginalHeight: 0,
        setUVs: function (a, b, c, d, e) {
            var f = this.uvs;
            e ? ((f[2] = a), (f[3] = d), (f[4] = a), (f[5] = b), (f[6] = c), (f[7] = b), (f[0] = c), (f[1] = d)) : ((f[0] = a), (f[1] = d), (f[2] = a), (f[3] = b), (f[4] = c), (f[5] = b), (f[6] = c), (f[7] = d));
        },
        updateOffset: function () {
            var a = (this.width / this.regionOriginalWidth) * this.scaleX,
                b = (this.height / this.regionOriginalHeight) * this.scaleY,
                c = (-this.width / 2) * this.scaleX + this.regionOffsetX * a,
                d = (-this.height / 2) * this.scaleY + this.regionOffsetY * b,
                e = c + this.regionWidth * a,
                f = d + this.regionHeight * b,
                g = this.rotation * spine.degRad,
                h = Math.cos(g),
                i = Math.sin(g),
                j = c * h + this.x,
                k = c * i,
                l = d * h + this.y,
                m = d * i,
                n = e * h + this.x,
                o = e * i,
                p = f * h + this.y,
                q = f * i,
                r = this.offset;
            (r[0] = j - m), (r[1] = l + k), (r[2] = j - q), (r[3] = p + k), (r[4] = n - q), (r[5] = p + o), (r[6] = n - m), (r[7] = l + o);
        },
        computeVertices: function (a, b, c, d) {
            (a += c.worldX), (b += c.worldY);
            var e = c.a,
                f = c.b,
                g = c.c,
                h = c.d,
                i = this.offset;
            (d[0] = i[0] * e + i[1] * f + a),
                (d[1] = i[0] * g + i[1] * h + b),
                (d[2] = i[2] * e + i[3] * f + a),
                (d[3] = i[2] * g + i[3] * h + b),
                (d[4] = i[4] * e + i[5] * f + a),
                (d[5] = i[4] * g + i[5] * h + b),
                (d[6] = i[6] * e + i[7] * f + a),
                (d[7] = i[6] * g + i[7] * h + b);
        },
    }),
    (spine.MeshAttachment = function (a) {
        this.name = a;
    }),
    (spine.MeshAttachment.prototype = {
        type: spine.AttachmentType.mesh,
        vertices: null,
        uvs: null,
        regionUVs: null,
        triangles: null,
        hullLength: 0,
        r: 1,
        g: 1,
        b: 1,
        a: 1,
        path: null,
        inheritFFD: !0,
        parentMesh: null,
        rendererObject: null,
        regionU: 0,
        regionV: 0,
        regionU2: 0,
        regionV2: 0,
        regionRotate: !1,
        regionOffsetX: 0,
        regionOffsetY: 0,
        regionWidth: 0,
        regionHeight: 0,
        regionOriginalWidth: 0,
        regionOriginalHeight: 0,
        edges: null,
        width: 0,
        height: 0,
        updateUVs: function () {
            var a = this.regionU2 - this.regionU,
                b = this.regionV2 - this.regionV,
                c = this.regionUVs.length;
            if (((this.uvs && this.uvs.length == c) || (this.uvs = new spine.Float32Array(c)), this.regionRotate))
                for (var d = 0; d < c; d += 2) (this.uvs[d] = this.regionU + this.regionUVs[d + 1] * a), (this.uvs[d + 1] = this.regionV + b - this.regionUVs[d] * b);
            else for (d = 0; d < c; d += 2) (this.uvs[d] = this.regionU + this.regionUVs[d] * a), (this.uvs[d + 1] = this.regionV + this.regionUVs[d + 1] * b);
        },
        computeWorldVertices: function (a, b, c, d) {
            var e = c.bone;
            (a += e.worldX), (b += e.worldY);
            var f = e.a,
                g = e.b,
                h = e.c,
                i = e.d,
                j = this.vertices,
                k = j.length;
            c.attachmentVertices.length == k && (j = c.attachmentVertices);
            for (var l = 0; l < k; l += 2) {
                var m = j[l],
                    n = j[l + 1];
                (d[l] = m * f + n * g + a), (d[l + 1] = m * h + n * i + b);
            }
        },
        setParentMesh: function (a) {
            (this.parentMesh = a) && ((this.vertices = a.vertices), (this.regionUVs = a.regionUVs), (this.triangles = a.triangles), (this.hullLength = a.hullLength), (this.edges = a.edges), (this.width = a.width), (this.height = a.height));
        },
    }),
    (spine.WeightedMeshAttachment = function (a) {
        this.name = a;
    }),
    (spine.WeightedMeshAttachment.prototype = {
        type: spine.AttachmentType.weightedmesh,
        bones: null,
        weights: null,
        uvs: null,
        regionUVs: null,
        triangles: null,
        hullLength: 0,
        r: 1,
        g: 1,
        b: 1,
        a: 1,
        path: null,
        inheritFFD: !0,
        parentMesh: null,
        rendererObject: null,
        regionU: 0,
        regionV: 0,
        regionU2: 0,
        regionV2: 0,
        regionRotate: !1,
        regionOffsetX: 0,
        regionOffsetY: 0,
        regionWidth: 0,
        regionHeight: 0,
        regionOriginalWidth: 0,
        regionOriginalHeight: 0,
        edges: null,
        width: 0,
        height: 0,
        updateUVs: function (a, b, c, d, e) {
            var f = this.regionU2 - this.regionU,
                g = this.regionV2 - this.regionV,
                h = this.regionUVs.length;
            if (((this.uvs && this.uvs.length == h) || (this.uvs = new spine.Float32Array(h)), this.regionRotate))
                for (var i = 0; i < h; i += 2) (this.uvs[i] = this.regionU + this.regionUVs[i + 1] * f), (this.uvs[i + 1] = this.regionV + g - this.regionUVs[i] * g);
            else for (i = 0; i < h; i += 2) (this.uvs[i] = this.regionU + this.regionUVs[i] * f), (this.uvs[i + 1] = this.regionV + this.regionUVs[i + 1] * g);
        },
        computeWorldVertices: function (a, b, c, d) {
            var e,
                f,
                g,
                h,
                i,
                j,
                k,
                l = c.bone.skeleton.bones,
                m = this.weights,
                n = this.bones,
                o = 0,
                p = 0,
                q = 0,
                r = 0,
                s = n.length;
            if (c.attachmentVertices.length)
                for (var t = c.attachmentVertices; p < s; o += 2) {
                    for (g = f = 0, e = n[p++] + p; p < e; p++, q += 3, r += 2)
                        (h = l[n[p]]), (i = m[q] + t[r]), (j = m[q + 1] + t[r + 1]), (k = m[q + 2]), (f += (i * h.a + j * h.b + h.worldX) * k), (g += (i * h.c + j * h.d + h.worldY) * k);
                    (d[o] = f + a), (d[o + 1] = g + b);
                }
            else
                for (; p < s; o += 2) {
                    for (g = f = 0, e = n[p++] + p; p < e; p++, q += 3) (h = l[n[p]]), (i = m[q]), (j = m[q + 1]), (k = m[q + 2]), (f += (i * h.a + j * h.b + h.worldX) * k), (g += (i * h.c + j * h.d + h.worldY) * k);
                    (d[o] = f + a), (d[o + 1] = g + b);
                }
        },
        setParentMesh: function (a) {
            (this.parentMesh = a) &&
                ((this.bones = a.bones),
                (this.weights = a.weights),
                (this.regionUVs = a.regionUVs),
                (this.triangles = a.triangles),
                (this.hullLength = a.hullLength),
                (this.edges = a.edges),
                (this.width = a.width),
                (this.height = a.height));
        },
    }),
    (spine.BoundingBoxAttachment = function (a) {
        (this.name = a), (this.vertices = new spine.Float32Array());
    }),
    (spine.BoundingBoxAttachment.prototype = {
        type: spine.AttachmentType.boundingbox,
        computeWorldVertices: function (a, b, c, d) {
            (a += c.worldX), (b += c.worldY);
            for (var e = c.a, f = c.b, g = c.c, h = c.d, i = this.vertices, j = 0, k = i.length; j < k; j += 2) {
                var l = i[j],
                    m = i[j + 1];
                (d[j] = l * e + m * f + a), (d[j + 1] = l * g + m * h + b);
            }
        },
    }),
    (spine.AnimationStateData = function (a) {
        (this.skeletonData = a), (this.animationToMixTime = {});
    }),
    (spine.AnimationStateData.prototype = {
        defaultMix: 0,
        setMixByName: function (a, b, c) {
            var d = this.skeletonData.findAnimation(a);
            if (!d) throw "Animation not found: " + a;
            var e = this.skeletonData.findAnimation(b);
            if (!e) throw "Animation not found: " + b;
            this.setMix(d, e, c);
        },
        setMix: function (a, b, c) {
            this.animationToMixTime[a.name + ":" + b.name] = c;
        },
        getMix: function (a, b) {
            var c = a.name + ":" + b.name;
            return this.animationToMixTime.hasOwnProperty(c) ? this.animationToMixTime[c] : this.defaultMix;
        },
    }),
    (spine.TrackEntry = function () {}),
    (spine.TrackEntry.prototype = {
        next: null,
        previous: null,
        animation: null,
        loop: !1,
        delay: 0,
        time: 0,
        lastTime: -1,
        endTime: 0,
        timeScale: 1,
        mixTime: 0,
        mixDuration: 0,
        mix: 1,
        onStart: null,
        onEnd: null,
        onComplete: null,
        onEvent: null,
    }),
    (spine.AnimationState = function (a) {
        (this.data = a), (this.tracks = []), (this.events = []);
    }),
    (spine.AnimationState.prototype = {
        onStart: null,
        onEnd: null,
        onComplete: null,
        onEvent: null,
        timeScale: 1,
        update: function (a) {
            a *= this.timeScale;
            for (var b = 0; b < this.tracks.length; b++) {
                var c = this.tracks[b];
                if (c) {
                    if (((c.time += a * c.timeScale), c.previous)) {
                        var d = a * c.previous.timeScale;
                        (c.previous.time += d), (c.mixTime += d);
                    }
                    var e = c.next;
                    e ? ((e.time = c.lastTime - e.delay), 0 <= e.time && this.setCurrent(b, e)) : !c.loop && c.lastTime >= c.endTime && this.clearTrack(b);
                }
            }
        },
        apply: function (a) {
            for (var b = 0; b < this.tracks.length; b++) {
                var c = this.tracks[b];
                if (c) {
                    this.events.length = 0;
                    var d = c.time,
                        e = c.lastTime,
                        f = c.endTime,
                        g = c.loop;
                    !g && f < d && (d = f);
                    var h = c.previous;
                    if (h) {
                        var i = h.time;
                        !h.loop && i > h.endTime && (i = h.endTime), h.animation.apply(a, i, i, h.loop, null);
                        var j = (c.mixTime / c.mixDuration) * c.mix;
                        1 <= j && ((j = 1), (c.previous = null)), c.animation.mix(a, c.lastTime, d, g, this.events, j);
                    } else 1 == c.mix ? c.animation.apply(a, c.lastTime, d, g, this.events) : c.animation.mix(a, c.lastTime, d, g, this.events, c.mix);
                    for (var k = 0, l = this.events.length; k < l; k++) {
                        var m = this.events[k];
                        c.onEvent && c.onEvent(b, m), this.onEvent && this.onEvent(b, m);
                    }
                    if (g ? d % f < e % f : e < f && f <= d) {
                        var n = Math.floor(d / f);
                        c.onComplete && c.onComplete(b, n), this.onComplete && this.onComplete(b, n);
                    }
                    c.lastTime = c.time;
                }
            }
        },
        clearTracks: function () {
            for (var a = 0, b = this.tracks.length; a < b; a++) this.clearTrack(a);
            this.tracks.length = 0;
        },
        clearTrack: function (a) {
            if (!(a >= this.tracks.length)) {
                var b = this.tracks[a];
                b && (b.onEnd && b.onEnd(a), this.onEnd && this.onEnd(a), (this.tracks[a] = null));
            }
        },
        _expandToIndex: function (a) {
            if (a < this.tracks.length) return this.tracks[a];
            for (; a >= this.tracks.length; ) this.tracks[this.tracks.length] = null;
            return null;
        },
        setCurrent: function (a, b) {
            var c = this._expandToIndex(a);
            if (c) {
                var d = c.previous;
                (c.previous = null),
                    c.onEnd && c.onEnd(a),
                    this.onEnd && this.onEnd(a),
                    (b.mixDuration = this.data.getMix(c.animation, b.animation)),
                    0 < b.mixDuration && ((b.mixTime = 0), d && c.mixTime / c.mixDuration < 0.5 ? (b.previous = d) : (b.previous = c));
            }
            (this.tracks[a] = b).onStart && b.onStart(a), this.onStart && this.onStart(a);
        },
        setAnimationByName: function (a, b, c) {
            var d = this.data.skeletonData.findAnimation(b);
            if (!d) throw "Animation not found: " + b;
            return this.setAnimation(a, d, c);
        },
        setAnimation: function (a, b, c) {
            var d = new spine.TrackEntry();
            return (d.animation = b), (d.loop = c), (d.endTime = b.duration), this.setCurrent(a, d), d;
        },
        addAnimationByName: function (a, b, c, d) {
            var e = this.data.skeletonData.findAnimation(b);
            if (!e) throw "Animation not found: " + b;
            return this.addAnimation(a, e, c, d);
        },
        addAnimation: function (a, b, c, d) {
            var e = new spine.TrackEntry();
            (e.animation = b), (e.loop = c), (e.endTime = b.duration);
            var f = this._expandToIndex(a);
            if (f) {
                for (; f.next; ) f = f.next;
                f.next = e;
            } else this.tracks[a] = e;
            return d <= 0 && (f ? (d += f.endTime - this.data.getMix(f.animation, b)) : (d = 0)), (e.delay = d), e;
        },
        getCurrent: function (a) {
            return a >= this.tracks.length ? null : this.tracks[a];
        },
    }),
    (spine.SkeletonJson = function (a) {
        (this.attachmentLoader = a), (this.linkedMeshes = []);
    }),
    (spine.SkeletonJson.prototype = {
        scale: 1,
        readSkeletonData: function (a, b) {
            var c = new spine.SkeletonData();
            c.name = b;
            var d = a.skeleton;
            d && ((c.hash = d.hash), (c.version = d.spine), (c.width = d.width || 0), (c.height = d.height || 0));
            for (var f = 0, g = (e = a.bones).length; f < g; f++) {
                var h = e[f],
                    i = null;
                if (h.parent && !(i = c.findBone(h.parent))) throw "Parent bone not found: " + h.parent;
                ((j = new spine.BoneData(h.name, i)).length = (h.length || 0) * this.scale),
                    (j.x = (h.x || 0) * this.scale),
                    (j.y = (h.y || 0) * this.scale),
                    (j.rotation = h.rotation || 0),
                    (j.scaleX = h.hasOwnProperty("scaleX") ? h.scaleX : 1),
                    (j.scaleY = h.hasOwnProperty("scaleY") ? h.scaleY : 1),
                    (j.inheritScale = !h.hasOwnProperty("inheritScale") || h.inheritScale),
                    (j.inheritRotation = !h.hasOwnProperty("inheritRotation") || h.inheritRotation),
                    (c.bones[f] = j);
            }
            var k = a.ik;
            if (k)
                for (f = 0, g = k.length; f < g; f++) {
                    for (var e, l = k[f], m = new spine.IkConstraintData(l.name), n = 0, o = (e = l.bones).length; n < o; n++) {
                        var p = c.findBone(e[n]);
                        if (!p) throw "IK bone not found: " + e[n];
                        m.bones[n] = p;
                    }
                    if (((m.target = c.findBone(l.target)), !m.target)) throw "Target bone not found: " + l.target;
                    (m.bendDirection = !l.hasOwnProperty("bendPositive") || l.bendPositive ? 1 : -1), (m.mix = l.hasOwnProperty("mix") ? l.mix : 1), (c.ikConstraints[f] = m);
                }
            var q = a.transform;
            if (q)
                for (f = 0, g = q.length; f < g; f++) {
                    var r = q[f],
                        s = new spine.TransformConstraintData(r.name);
                    if (((s.bone = c.findBone(r.bone)), !s.bone)) throw "Bone not found: " + r.bone;
                    if (((s.target = c.findBone(r.target)), !s.target)) throw "Target bone not found: " + r.target;
                    (s.mix = r.hasOwnProperty("translateMix") ? l.translateMix : 1), (s.x = (r.x || 0) * this.scale), (s.y = (r.y || 0) * this.scale), (c.transformConstraints[f] = s);
                }
            var t = a.slots;
            for (f = 0, g = t.length; f < g; f++) {
                var j,
                    u = t[f];
                if (!(j = c.findBone(u.bone))) throw "Slot bone not found: " + u.bone;
                var v = new spine.SlotData(u.name, j),
                    w = u.color;
                w && ((v.r = this.toColor(w, 0)), (v.g = this.toColor(w, 1)), (v.b = this.toColor(w, 2)), (v.a = this.toColor(w, 3))),
                    (v.attachmentName = u.attachment),
                    (v.blendMode = spine.BlendMode[u.blend || "normal"]),
                    (c.slots[f] = v);
            }
            var x = a.skins;
            for (var y in x)
                if (x.hasOwnProperty(y)) {
                    var z = x[y],
                        A = new spine.Skin(y);
                    for (var B in z)
                        if (z.hasOwnProperty(B)) {
                            var C = c.findSlotIndex(B),
                                D = z[B];
                            for (var E in D)
                                if (D.hasOwnProperty(E)) {
                                    var F = this.readAttachment(A, C, E, D[E]);
                                    F && A.addAttachment(C, E, F);
                                }
                        }
                    "default" == (c.skins[c.skins.length] = A).name && (c.defaultSkin = A);
                }
            for (f = 0, g = this.linkedMeshes.length; f < g; f++) {
                var G = this.linkedMeshes[f];
                if (!(A = G.skin ? c.findSkin(G.skin) : c.defaultSkin)) throw "Skin not found: " + G.skin;
                if (!(i = A.getAttachment(G.slotIndex, G.parent))) throw "Parent mesh not found: " + G.parent;
                G.mesh.setParentMesh(i), G.mesh.updateUVs();
            }
            this.linkedMeshes.length = 0;
            var H = a.events;
            for (var I in H)
                if (H.hasOwnProperty(I)) {
                    var J = H[I],
                        K = new spine.EventData(I);
                    (K.intValue = J.int || 0), (K.floatValue = J.float || 0), (K.stringValue = J.string || null), (c.events[c.events.length] = K);
                }
            var L = a.animations;
            for (var M in L) L.hasOwnProperty(M) && this.readAnimation(M, L[M], c);
            return c;
        },
        readAttachment: function (a, b, c, d) {
            c = d.name || c;
            var e = d.type || "region";
            "skinnedmesh" == e && (e = "weightedmesh"), (e = spine.AttachmentType[e]);
            var f = d.path || c,
                g = this.scale;
            switch (e) {
                case spine.AttachmentType.region:
                    var h = this.attachmentLoader.newRegionAttachment(a, c, f);
                    if (!h) return null;
                    (h.path = f),
                        (h.x = (d.x || 0) * g),
                        (h.y = (d.y || 0) * g),
                        (h.scaleX = d.hasOwnProperty("scaleX") ? d.scaleX : 1),
                        (h.scaleY = d.hasOwnProperty("scaleY") ? d.scaleY : 1),
                        (h.rotation = d.rotation || 0),
                        (h.width = (d.width || 0) * g),
                        (h.height = (d.height || 0) * g);
                    var i = d.color;
                    return i && ((h.r = this.toColor(i, 0)), (h.g = this.toColor(i, 1)), (h.b = this.toColor(i, 2)), (h.a = this.toColor(i, 3))), h.updateOffset(), h;
                case spine.AttachmentType.mesh:
                case spine.AttachmentType.linkedmesh:
                    return (j = this.attachmentLoader.newMeshAttachment(a, c, f))
                        ? ((j.path = f),
                          (i = d.color) && ((j.r = this.toColor(i, 0)), (j.g = this.toColor(i, 1)), (j.b = this.toColor(i, 2)), (j.a = this.toColor(i, 3))),
                          (j.width = (d.width || 0) * g),
                          (j.height = (d.height || 0) * g),
                          d.parent
                              ? ((j.inheritFFD = !d.hasOwnProperty("ffd") || d.ffd), (this.linkedMeshes[this.linkedMeshes.length] = { mesh: j, skin: d.skin, slotIndex: b, parent: d.parent }))
                              : ((j.vertices = this.getFloatArray(d, "vertices", g)),
                                (j.triangles = this.getUint32Array(d, "triangles")),
                                (j.regionUVs = this.getFloatArray(d, "uvs", 1)),
                                j.updateUVs(),
                                (j.hullLength = 2 * (d.hull || 0)),
                                d.edges && (j.edges = this.getUint16Array(d, "edges"))),
                          j)
                        : null;
                case spine.AttachmentType.weightedmesh:
                case spine.AttachmentType.weightedlinkedmesh:
                    var j;
                    if (!(j = this.attachmentLoader.newWeightedMeshAttachment(a, c, f))) return null;
                    if (
                        ((j.path = f),
                        (i = d.color) && ((j.r = this.toColor(i, 0)), (j.g = this.toColor(i, 1)), (j.b = this.toColor(i, 2)), (j.a = this.toColor(i, 3))),
                        (j.width = (d.width || 0) * g),
                        (j.height = (d.height || 0) * g),
                        d.parent)
                    )
                        (j.inheritFFD = !d.hasOwnProperty("ffd") || d.ffd), (this.linkedMeshes[this.linkedMeshes.length] = { mesh: j, skin: d.skin, slotIndex: b, parent: d.parent });
                    else {
                        for (
                            var k = this.getFloatArray(d, "uvs", 1), l = this.getFloatArray(d, "vertices", 1), m = new spine.Float32Array(3 * k.length * 3), n = new spine.Uint32Array(3 * k.length), o = 0, p = 0, q = 0, r = l.length;
                            o < r;

                        )
                            for (var s = 0 | l[o++], t = o + 4 * (n[p++] = s); o < t; ) (n[p++] = l[o]), (m[q++] = l[o + 1] * g), (m[q++] = l[o + 2] * g), (m[q++] = l[o + 3]), (o += 4);
                        (j.bones = n), (j.weights = m), (j.triangles = this.getUint32Array(d, "triangles")), (j.regionUVs = k), j.updateUVs(), (j.hullLength = 2 * (d.hull || 0)), d.edges && (j.edges = this.getUint16Array(d, "edges"));
                    }
                    return j;
                case spine.AttachmentType.boundingbox:
                    var u = this.attachmentLoader.newBoundingBoxAttachment(a, c);
                    l = d.vertices;
                    u.vertices = new spine.Float32Array(l.length);
                    for (o = 0, r = l.length; o < r; o++) u.vertices[o] = l[o] * g;
                    return u;
            }
            throw "Unknown attachment type: " + e;
        },
        readAnimation: function (a, b, c) {
            var d = [],
                e = 0,
                f = b.slots;
            for (var g in f)
                if (f.hasOwnProperty(g)) {
                    var h = f[g],
                        i = c.findSlotIndex(g);
                    for (var j in h)
                        if (h.hasOwnProperty(j)) {
                            var k = h[j];
                            if ("color" == j) {
                                (l = new spine.ColorTimeline(k.length)).slotIndex = i;
                                for (var m = 0, n = 0, o = k.length; n < o; n++) {
                                    var q = (p = k[n]).color,
                                        r = this.toColor(q, 0),
                                        s = this.toColor(q, 1),
                                        t = this.toColor(q, 2),
                                        u = this.toColor(q, 3);
                                    l.setFrame(m, p.time, r, s, t, u), this.readCurve(l, m, p), m++;
                                }
                                (d[d.length] = l), (e = Math.max(e, l.frames[5 * l.getFrameCount() - 5]));
                            } else {
                                if ("attachment" != j) throw "Invalid timeline type for a slot: " + j + " (" + g + ")";
                                (l = new spine.AttachmentTimeline(k.length)).slotIndex = i;
                                for (m = 0, n = 0, o = k.length; n < o; n++) {
                                    var p = k[n];
                                    l.setFrame(m++, p.time, p.name);
                                }
                                (d[d.length] = l), (e = Math.max(e, l.frames[l.getFrameCount() - 1]));
                            }
                        }
                }
            var v = b.bones;
            for (var w in v)
                if (v.hasOwnProperty(w)) {
                    var x = c.findBoneIndex(w);
                    if (-1 == x) throw "Bone not found: " + w;
                    var y = v[w];
                    for (var j in y)
                        if (y.hasOwnProperty(j)) {
                            k = y[j];
                            if ("rotate" == j) {
                                (l = new spine.RotateTimeline(k.length)).boneIndex = x;
                                for (m = 0, n = 0, o = k.length; n < o; n++) {
                                    p = k[n];
                                    l.setFrame(m, p.time, p.angle), this.readCurve(l, m, p), m++;
                                }
                                (d[d.length] = l), (e = Math.max(e, l.frames[2 * l.getFrameCount() - 2]));
                            } else {
                                if ("translate" != j && "scale" != j) throw "Invalid timeline type for a bone: " + j + " (" + w + ")";
                                var z = 1;
                                "scale" == j ? (l = new spine.ScaleTimeline(k.length)) : ((l = new spine.TranslateTimeline(k.length)), (z = this.scale)), (l.boneIndex = x);
                                for (m = 0, n = 0, o = k.length; n < o; n++) {
                                    var A = ((p = k[n]).x || 0) * z,
                                        B = (p.y || 0) * z;
                                    l.setFrame(m, p.time, A, B), this.readCurve(l, m, p), m++;
                                }
                                (d[d.length] = l), (e = Math.max(e, l.frames[3 * l.getFrameCount() - 3]));
                            }
                        }
                }
            var C = b.ik;
            for (var D in C)
                if (C.hasOwnProperty(D)) {
                    var E = c.findIkConstraint(D);
                    k = C[D];
                    (l = new spine.IkConstraintTimeline(k.length)).ikConstraintIndex = c.ikConstraints.indexOf(E);
                    for (m = 0, n = 0, o = k.length; n < o; n++) {
                        var F = (p = k[n]).hasOwnProperty("mix") ? p.mix : 1,
                            G = !p.hasOwnProperty("bendPositive") || p.bendPositive ? 1 : -1;
                        l.setFrame(m, p.time, F, G), this.readCurve(l, m, p), m++;
                    }
                    (d[d.length] = l), (e = Math.max(e, l.frames[3 * l.getFrameCount() - 3]));
                }
            var H = b.ffd;
            for (var I in H) {
                var J = c.findSkin(I);
                h = H[I];
                for (g in h) {
                    i = c.findSlotIndex(g);
                    var K = h[g];
                    for (var L in K) {
                        k = K[L];
                        var l = new spine.FfdTimeline(k.length),
                            M = J.getAttachment(i, L);
                        if (!M) throw "FFD attachment not found: " + L;
                        l.slotIndex = i;
                        var N,
                            O = (l.attachment = M).type == spine.AttachmentType.mesh;
                        N = O ? M.vertices.length : (M.weights.length / 3) * 2;
                        for (m = 0, n = 0, o = k.length; n < o; n++) {
                            if ((p = k[n]).vertices) {
                                var P,
                                    Q = p.vertices;
                                (P = new spine.Float32Array(N)).length = N;
                                var R = p.offset || 0,
                                    S = Q.length;
                                if (1 == this.scale) for (var T = 0; T < S; T++) P[T + R] = Q[T];
                                else for (T = 0; T < S; T++) P[T + R] = Q[T] * this.scale;
                                if (O) {
                                    var U = M.vertices;
                                    for (T = 0, S = P.length; T < S; T++) P[T] += U[T];
                                }
                            } else O ? (P = M.vertices) : ((P = new spine.Float32Array(N)).length = N);
                            l.setFrame(m, p.time, P), this.readCurve(l, m, p), m++;
                        }
                        (d[d.length] = l), (e = Math.max(e, l.frames[l.getFrameCount() - 1]));
                    }
                }
            }
            var V = b.drawOrder;
            if ((V || (V = b.draworder), V)) {
                l = new spine.DrawOrderTimeline(V.length);
                var W = c.slots.length;
                for (m = 0, n = 0, o = V.length; n < o; n++) {
                    var X = V[n],
                        Y = null;
                    if (X.offsets) {
                        for (T = ((Y = new spine.Uint32Array(W)).length = W) - 1; 0 <= T; T--) Y[T] = 4294967295;
                        var Z = X.offsets,
                            $ = new spine.Uint32Array(W - Z.length);
                        $.length = W - Z.length;
                        var _ = 0,
                            aa = 0;
                        for (T = 0, S = Z.length; T < S; T++) {
                            var ba = Z[T];
                            if (-1 == (i = c.findSlotIndex(ba.slot))) throw "Slot not found: " + ba.slot;
                            for (; _ != i; ) $[aa++] = _++;
                            Y[_ + ba.offset] = _++;
                        }
                        for (; _ < W; ) $[aa++] = _++;
                        for (T = W - 1; 0 <= T; T--) 4294967295 == Y[T] && (Y[T] = $[--aa]);
                    }
                    l.setFrame(m++, X.time, Y);
                }
                (d[d.length] = l), (e = Math.max(e, l.frames[l.getFrameCount() - 1]));
            }
            var ca = b.events;
            if (ca) {
                for (l = new spine.EventTimeline(ca.length), m = 0, n = 0, o = ca.length; n < o; n++) {
                    var da = ca[n],
                        ea = c.findEvent(da.name);
                    if (!ea) throw "Event not found: " + da.name;
                    var fa = new spine.Event(da.time, ea);
                    (fa.intValue = da.hasOwnProperty("int") ? da.int : ea.intValue),
                        (fa.floatValue = da.hasOwnProperty("float") ? da.float : ea.floatValue),
                        (fa.stringValue = da.hasOwnProperty("string") ? da.string : ea.stringValue),
                        l.setFrame(m++, fa);
                }
                (d[d.length] = l), (e = Math.max(e, l.frames[l.getFrameCount() - 1]));
            }
            c.animations[c.animations.length] = new spine.Animation(a, d, e);
        },
        readCurve: function (a, b, c) {
            var d = c.curve;
            d ? ("stepped" == d ? a.curves.setStepped(b) : d instanceof Array && a.curves.setCurve(b, d[0], d[1], d[2], d[3])) : a.curves.setLinear(b);
        },
        toColor: function (a, b) {
            if (8 != a.length) throw "Color hexidecimal length must be 8, recieved: " + a;
            return parseInt(a.substring(2 * b, 2 * b + 2), 16) / 255;
        },
        getFloatArray: function (a, b, c) {
            var d = a[b],
                e = new spine.Float32Array(d.length),
                f = 0,
                g = d.length;
            if (1 == c) for (; f < g; f++) e[f] = d[f];
            else for (; f < g; f++) e[f] = d[f] * c;
            return e;
        },
        getUint32Array: function (a, b) {
            for (var c = a[b], d = new spine.Uint32Array(c.length), e = 0, f = c.length; e < f; e++) d[e] = 0 | c[e];
            return d;
        },
        getUint16Array: function (a, b) {
            for (var c = a[b], d = new spine.Uint16Array(c.length), e = 0, f = c.length; e < f; e++) d[e] = 0 | c[e];
            return d;
        },
    }),
    (spine.Atlas = function (a, b) {
        (this.textureLoader = b), (this.pages = []), (this.regions = []);
        var c = new spine.AtlasReader(a),
            d = [];
        d.length = 4;
        for (var e = null; ; ) {
            var f = c.readLine();
            if (null === f) break;
            if ((f = c.trim(f)).length)
                if (e) {
                    var g = new spine.AtlasRegion();
                    (g.name = f), (g.page = e), (g.rotate = "true" == c.readValue()), c.readTuple(d);
                    var h = parseInt(d[0]),
                        i = parseInt(d[1]);
                    c.readTuple(d);
                    var j = parseInt(d[0]),
                        k = parseInt(d[1]);
                    (g.u = h / e.width),
                        (g.v = i / e.height),
                        g.rotate ? ((g.u2 = (h + k) / e.width), (g.v2 = (i + j) / e.height)) : ((g.u2 = (h + j) / e.width), (g.v2 = (i + k) / e.height)),
                        (g.x = h),
                        (g.y = i),
                        (g.width = Math.abs(j)),
                        (g.height = Math.abs(k)),
                        4 == c.readTuple(d) &&
                            ((g.splits = [parseInt(d[0]), parseInt(d[1]), parseInt(d[2]), parseInt(d[3])]), 4 == c.readTuple(d) && ((g.pads = [parseInt(d[0]), parseInt(d[1]), parseInt(d[2]), parseInt(d[3])]), c.readTuple(d))),
                        (g.originalWidth = parseInt(d[0])),
                        (g.originalHeight = parseInt(d[1])),
                        c.readTuple(d),
                        (g.offsetX = parseInt(d[0])),
                        (g.offsetY = parseInt(d[1])),
                        (g.index = parseInt(c.readValue())),
                        (this.regions[this.regions.length] = g);
                } else {
                    ((e = new spine.AtlasPage()).name = f),
                        2 == c.readTuple(d) && ((e.width = parseInt(d[0])), (e.height = parseInt(d[1])), c.readTuple(d)),
                        (e.format = spine.Atlas.Format[d[0]]),
                        c.readTuple(d),
                        (e.minFilter = spine.Atlas.TextureFilter[d[0]]),
                        (e.magFilter = spine.Atlas.TextureFilter[d[1]]);
                    var l = c.readValue();
                    (e.uWrap = spine.Atlas.TextureWrap.clampToEdge),
                        (e.vWrap = spine.Atlas.TextureWrap.clampToEdge),
                        "x" == l ? (e.uWrap = spine.Atlas.TextureWrap.repeat) : "y" == l ? (e.vWrap = spine.Atlas.TextureWrap.repeat) : "xy" == l && (e.uWrap = e.vWrap = spine.Atlas.TextureWrap.repeat),
                        b.load(e, f, this),
                        (this.pages[this.pages.length] = e);
                }
            else e = null;
        }
    }),
    (spine.Atlas.prototype = {
        findRegion: function (a) {
            for (var b = this.regions, c = 0, d = b.length; c < d; c++) if (b[c].name == a) return b[c];
            return null;
        },
        dispose: function () {
            for (var a = this.pages, b = 0, c = a.length; b < c; b++) this.textureLoader.unload(a[b].rendererObject);
        },
        updateUVs: function (a) {
            for (var b = this.regions, c = 0, d = b.length; c < d; c++) {
                var e = b[c];
                e.page == a &&
                    ((e.u = e.x / a.width), (e.v = e.y / a.height), e.rotate ? ((e.u2 = (e.x + e.height) / a.width), (e.v2 = (e.y + e.width) / a.height)) : ((e.u2 = (e.x + e.width) / a.width), (e.v2 = (e.y + e.height) / a.height)));
            }
        },
    }),
    (spine.Atlas.Format = { alpha: 0, intensity: 1, luminanceAlpha: 2, rgb565: 3, rgba4444: 4, rgb888: 5, rgba8888: 6 }),
    (spine.Atlas.TextureFilter = { nearest: 0, linear: 1, mipMap: 2, mipMapNearestNearest: 3, mipMapLinearNearest: 4, mipMapNearestLinear: 5, mipMapLinearLinear: 6 }),
    (spine.Atlas.TextureWrap = { mirroredRepeat: 0, clampToEdge: 1, repeat: 2 }),
    (spine.AtlasPage = function () {}),
    (spine.AtlasPage.prototype = { name: null, format: null, minFilter: null, magFilter: null, uWrap: null, vWrap: null, rendererObject: null, width: 0, height: 0 }),
    (spine.AtlasRegion = function () {}),
    (spine.AtlasRegion.prototype = { page: null, name: null, x: 0, y: 0, width: 0, height: 0, u: 0, v: 0, u2: 0, v2: 0, offsetX: 0, offsetY: 0, originalWidth: 0, originalHeight: 0, index: 0, rotate: !1, splits: null, pads: null }),
    (spine.AtlasReader = function (a) {
        this.lines = a.split(/\r\n|\r|\n/);
    }),
    (spine.AtlasReader.prototype = {
        index: 0,
        trim: function (a) {
            return a.replace(/^\s+|\s+$/g, "");
        },
        readLine: function () {
            return this.index >= this.lines.length ? null : this.lines[this.index++];
        },
        readValue: function () {
            var a = this.readLine(),
                b = a.indexOf(":");
            if (-1 == b) throw "Invalid line: " + a;
            return this.trim(a.substring(b + 1));
        },
        readTuple: function (a) {
            var b = this.readLine(),
                c = b.indexOf(":");
            if (-1 == c) throw "Invalid line: " + b;
            for (var d = 0, e = c + 1; d < 3; d++) {
                var f = b.indexOf(",", e);
                if (-1 == f) break;
                (a[d] = this.trim(b.substr(e, f - e))), (e = f + 1);
            }
            return (a[d] = this.trim(b.substring(e))), d + 1;
        },
    }),
    (spine.AtlasAttachmentLoader = function (a) {
        this.atlas = a;
    }),
    (spine.AtlasAttachmentLoader.prototype = {
        newRegionAttachment: function (a, b, c) {
            var d = this.atlas.findRegion(c);
            if (!d) throw "Region not found in atlas: " + c + " (region attachment: " + b + ")";
            var e = new spine.RegionAttachment(b);
            return (
                (e.rendererObject = d),
                e.setUVs(d.u, d.v, d.u2, d.v2, d.rotate),
                (e.regionOffsetX = d.offsetX),
                (e.regionOffsetY = d.offsetY),
                (e.regionWidth = d.width),
                (e.regionHeight = d.height),
                (e.regionOriginalWidth = d.originalWidth),
                (e.regionOriginalHeight = d.originalHeight),
                e
            );
        },
        newMeshAttachment: function (a, b, c) {
            var d = this.atlas.findRegion(c);
            if (!d) throw "Region not found in atlas: " + c + " (mesh attachment: " + b + ")";
            var e = new spine.MeshAttachment(b);
            return (
                (e.rendererObject = d),
                (e.regionU = d.u),
                (e.regionV = d.v),
                (e.regionU2 = d.u2),
                (e.regionV2 = d.v2),
                (e.regionRotate = d.rotate),
                (e.regionOffsetX = d.offsetX),
                (e.regionOffsetY = d.offsetY),
                (e.regionWidth = d.width),
                (e.regionHeight = d.height),
                (e.regionOriginalWidth = d.originalWidth),
                (e.regionOriginalHeight = d.originalHeight),
                e
            );
        },
        newWeightedMeshAttachment: function (a, b, c) {
            var d = this.atlas.findRegion(c);
            if (!d) throw "Region not found in atlas: " + c + " (weighted mesh attachment: " + b + ")";
            var e = new spine.WeightedMeshAttachment(b);
            return (
                (e.rendererObject = d),
                (e.regionU = d.u),
                (e.regionV = d.v),
                (e.regionU2 = d.u2),
                (e.regionV2 = d.v2),
                (e.regionRotate = d.rotate),
                (e.regionOffsetX = d.offsetX),
                (e.regionOffsetY = d.offsetY),
                (e.regionWidth = d.width),
                (e.regionHeight = d.height),
                (e.regionOriginalWidth = d.originalWidth),
                (e.regionOriginalHeight = d.originalHeight),
                e
            );
        },
        newBoundingBoxAttachment: function (a, b) {
            return new spine.BoundingBoxAttachment(b);
        },
    }),
    (spine.SkeletonBounds = function () {
        (this.polygonPool = []), (this.polygons = []), (this.boundingBoxes = []);
    }),
    (spine.SkeletonBounds.prototype = {
        minX: 0,
        minY: 0,
        maxX: 0,
        maxY: 0,
        update: function (a, b) {
            for (var c = a.slots, d = c.length, e = a.x, f = a.y, g = this.boundingBoxes, h = this.polygonPool, i = this.polygons, j = (g.length = 0), k = i.length; j < k; j++) h[h.length] = i[j];
            for (j = i.length = 0; j < d; j++) {
                var l = c[j],
                    m = l.attachment;
                if (m.type == spine.AttachmentType.boundingbox) {
                    g[g.length] = m;
                    var n,
                        o = h.length;
                    0 < o ? ((n = h[o - 1]), h.splice(o - 1, 1)) : (n = new spine.Float32Array()), ((i[i.length] = n).length = m.vertices.length), m.computeWorldVertices(e, f, l.bone, n);
                }
            }
            b && this.aabbCompute();
        },
        aabbCompute: function () {
            for (var a = this.polygons, b = Number.MAX_VALUE, c = Number.MAX_VALUE, d = -Number.MAX_VALUE, e = -Number.MAX_VALUE, f = 0, g = a.length; f < g; f++)
                for (var h = a[f], i = 0, j = h.length; i < j; i += 2) {
                    var k = h[i],
                        l = h[i + 1];
                    (b = Math.min(b, k)), (c = Math.min(c, l)), (d = Math.max(d, k)), (e = Math.max(e, l));
                }
            (this.minX = b), (this.minY = c), (this.maxX = d), (this.maxY = e);
        },
        aabbContainsPoint: function (a, b) {
            return a >= this.minX && a <= this.maxX && b >= this.minY && b <= this.maxY;
        },
        aabbIntersectsSegment: function (a, b, c, d) {
            var e = this.minX,
                f = this.minY,
                g = this.maxX,
                h = this.maxY;
            if ((a <= e && c <= e) || (b <= f && d <= f) || (g <= a && g <= c) || (h <= b && h <= d)) return !1;
            var i = (d - b) / (c - a),
                j = i * (e - a) + b;
            if (f < j && j < h) return !0;
            if (f < (j = i * (g - a) + b) && j < h) return !0;
            var k = (f - b) / i + a;
            return (e < k && k < g) || (e < (k = (h - b) / i + a) && k < g);
        },
        aabbIntersectsSkeleton: function (a) {
            return this.minX < a.maxX && this.maxX > a.minX && this.minY < a.maxY && this.maxY > a.minY;
        },
        containsPoint: function (a, b) {
            for (var c = this.polygons, d = 0, e = c.length; d < e; d++) if (this.polygonContainsPoint(c[d], a, b)) return this.boundingBoxes[d];
            return null;
        },
        intersectsSegment: function (a, b, c, d) {
            for (var e = this.polygons, f = 0, g = e.length; f < g; f++) if (e[f].intersectsSegment(a, b, c, d)) return this.boundingBoxes[f];
            return null;
        },
        polygonContainsPoint: function (a, b, c) {
            for (var d = a.length, e = d - 2, f = !1, g = 0; g < d; g += 2) {
                var h = a[g + 1],
                    i = a[e + 1];
                if ((h < c && c <= i) || (i < c && c <= h)) {
                    var j = a[g];
                    j + ((c - h) / (i - h)) * (a[e] - j) < b && (f = !f);
                }
                e = g;
            }
            return f;
        },
        polygonIntersectsSegment: function (a, b, c, d, e) {
            for (var f = a.length, g = b - d, h = c - e, i = b * e - c * d, j = a[f - 2], k = a[f - 1], l = 0; l < f; l += 2) {
                var m = a[l],
                    n = a[l + 1],
                    o = j * n - k * m,
                    p = j - m,
                    q = k - n,
                    r = g * q - h * p,
                    s = (i * p - g * o) / r;
                if (((j <= s && s <= m) || (m <= s && s <= j)) && ((b <= s && s <= d) || (d <= s && s <= b))) {
                    var t = (i * q - h * o) / r;
                    if (((k <= t && t <= n) || (n <= t && t <= k)) && ((c <= t && t <= e) || (e <= t && t <= c))) return !0;
                }
                (j = m), (k = n);
            }
            return !1;
        },
        getPolygon: function (a) {
            var b = this.boundingBoxes.indexOf(a);
            return -1 == b ? null : this.polygons[b];
        },
        getWidth: function () {
            return this.maxX - this.minX;
        },
        getHeight: function () {
            return this.maxY - this.minY;
        },
    });
var PhaserSpine, PhaserSuperStorage;
__extends =
    (this && this.__extends) ||
    function (a, b) {
        function c() {
            this.constructor = a;
        }
        for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]);
        a.prototype = null === b ? Object.create(b) : ((c.prototype = b.prototype), new c());
    };
!(function (a) {
    var b = (function (b) {
        function c(a, c) {
            var d = b.call(this, a, c) || this;
            return d.addSpineCache(), d.addSpineFactory(), d.addSpineLoader(), d;
        }
        return (
            __extends(c, b),
            (c.prototype.addSpineLoader = function () {
                Phaser.Loader.prototype.spine = function (a, b, c) {
                    var d = this,
                        e = a + "Atlas",
                        f = { atlas: e, basePath: "" === b.substring(0, b.lastIndexOf("/")) ? "." : b.substring(0, b.lastIndexOf("/")), variants: void 0 };
                    void 0 === c ? (c = [""]) : (f.variants = c),
                        c.forEach(function (a) {
                            d.onFileComplete.add(function (b, c) {
                                c === e &&
                                    new spine.Atlas(d.game.cache.getText(c), {
                                        load: function (b, c, e) {
                                            d.image(c, f.basePath + "/" + c.substr(0, c.lastIndexOf(".")) + a + ".png");
                                        },
                                    });
                            }),
                                d.text(e, b.substr(0, b.lastIndexOf(".")) + a + ".atlas");
                        }),
                        this.json(a, b),
                        this.game.cache.addSpine(a, f);
                };
            }),
            (c.prototype.addSpineFactory = function () {
                (Phaser.GameObjectFactory.prototype.spine = function (b, c, d, e, f) {
                    void 0 === f && (f = this.world);
                    var g = new a.Spine(this.game, d, e);
                    return g.setToSetupPose(), (g.position.x = b), (g.position.y = c), f.add(g);
                }),
                    (Phaser.GameObjectCreator.prototype.spine = function (b, c, d, e, f) {
                        return new a.Spine(this.game, d, e);
                    });
            }),
            (c.prototype.addSpineCache = function () {
                (Phaser.Cache.prototype.spine = {}),
                    (Phaser.Cache.prototype.addSpine = function (a, b) {
                        this.spine[a] = b;
                    }),
                    (Phaser.Cache.prototype.getSpine = function (a) {
                        return this.spine.hasOwnProperty(a), this.spine[a];
                    });
            }),
            c
        );
    })(Phaser.Plugin);
    (b.RESOLUTION_REGEXP = /@(.+)x/), (a.SpinePlugin = b);
})(PhaserSpine || (PhaserSpine = {})),
    (Phaser.Rope.prototype.postUpdate = function () {}),
    (spine.Bone.yDown = !0),
    (function (a) {
        var b = (function (b) {
            function c(c, d, e) {
                var f = b.call(this, c) || this;
                f.imageScale = 1;
                var g = f.game.cache.getSpine(d);
                void 0 !== e && -1 !== g.variants.indexOf(e) ? (f.imageScale = f.getScaleFromVariant(e)) : g.variants && 1 <= g.variants.length && (f.imageScale = f.getScaleFromVariant(g.variants[0]));
                var h = new a.SpineTextureLoader(c),
                    i = new spine.Atlas(c.cache.getText(g.atlas), h),
                    j = new spine.AtlasAttachmentLoader(i),
                    k = new spine.SkeletonJson(j);
                if (((f.skeletonData = k.readSkeletonData(c.cache.getJSON(d))), !f.skeletonData)) throw new Error("Spine data must be preloaded using Loader.spine");
                (f.onEvent = new Phaser.Signal()),
                    (f.onComplete = new Phaser.Signal()),
                    (f.onEnd = new Phaser.Signal()),
                    (f.skeleton = new spine.Skeleton(f.skeletonData)),
                    f.skeleton.updateWorldTransform(),
                    (f.stateData = new spine.AnimationStateData(f.skeletonData)),
                    (f.state = new spine.AnimationState(f.stateData)),
                    (f.state.onEvent = f.onEvent.dispatch.bind(f.onEvent)),
                    (f.state.onComplete = f.onComplete.dispatch.bind(f.onComplete)),
                    (f.state.onEnd = f.onEnd.dispatch.bind(f.onEnd)),
                    (f.slotContainers = []);
                for (var l = 0, m = f.skeleton.slots.length; l < m; l++) {
                    var n = f.skeleton.slots[l],
                        o = n.attachment,
                        p = new Phaser.Group(c);
                    if ((f.slotContainers.push(p), f.add(p), o instanceof spine.RegionAttachment)) {
                        var q = o.rendererObject.name,
                            r = f.createSprite(n, o);
                        (n.currentSprite = r), (n.currentSpriteName = q), p.add(r);
                    } else {
                        if (!(o instanceof spine.WeightedMeshAttachment)) continue;
                        var s = f.createMesh(n, o);
                        (n.currentMesh = s), (n.currentMeshName = o.name), p.add(s);
                    }
                }
                return (f.autoUpdate = !0), f;
            }
            return (
                __extends(c, b),
                Object.defineProperty(c.prototype, "autoUpdate", {
                    get: function () {
                        return this.updateTransform === a.Spine.prototype.autoUpdateTransform;
                    },
                    set: function (b) {
                        this.updateTransform = b ? a.Spine.prototype.autoUpdateTransform : PIXI.DisplayObjectContainer.prototype.updateTransform;
                    },
                    enumerable: !0,
                    configurable: !0,
                }),
                (c.prototype.getScaleFromVariant = function (b) {
                    var c = a.SpinePlugin.RESOLUTION_REGEXP.exec(b);
                    return c ? parseFloat(c[1]) : 1;
                }),
                (c.prototype.setTint = function (a) {
                    this.globalTint = a;
                    for (var b = this.skeleton.slots, c = 0; c < b.length; c++) {
                        var d = b[c];
                        d.currentSprite && (d.currentSprite.tint = a);
                    }
                }),
                (c.prototype.update = function (a) {
                    if (void 0 !== a) {
                        this.state.update(a), this.state.apply(this.skeleton), this.skeleton.updateWorldTransform();
                        for (var b = this.skeleton.drawOrder, c = this.skeleton.slots, d = 0, e = b.length; d < e; d++) void 0 !== b[d].currentSprite && (this.children[d] = b[d].currentSprite.parent);
                        for (d = 0, e = c.length; d < e; d++) {
                            var f = c[d],
                                g = f.attachment,
                                h = this.slotContainers[d];
                            if (g) {
                                var i = g.type;
                                if (i === spine.AttachmentType.region) {
                                    if (g.rendererObject && (!f.currentSpriteName || f.currentSpriteName !== g.name)) {
                                        var j = g.rendererObject.name;
                                        if ((void 0 !== f.currentSprite && (f.currentSprite.visible = !1), (f.sprites = f.sprites || {}), void 0 !== f.sprites[j])) f.sprites[j].visible = !0;
                                        else {
                                            var k = this.createSprite(f, g);
                                            h.add(k);
                                        }
                                        (f.currentSprite = f.sprites[j]), (f.currentSpriteName = j);
                                    }
                                    var l = f.bone;
                                    (h.position.x = g.x * l.a + g.y * l.b + l.worldX),
                                        (h.position.y = g.x * l.c + g.y * l.d + l.worldY),
                                        (h.scale.x = l.getWorldScaleX()),
                                        (h.scale.y = l.getWorldScaleY()),
                                        (h.rotation = ((l.getWorldRotationX() - g.rotation) * Math.PI) / 180),
                                        l.getWorldScaleY() < 0 && (h.scale.y = -h.scale.y),
                                        l.getWorldScaleX() < 0 && (h.scale.x = -h.scale.x),
                                        (l.getWorldScaleY() < 0 || l.getWorldScaleX() < 0) && (h.rotation = -h.rotation),
                                        (f.currentSprite.blendMode = f.blendMode),
                                        this.globalTint ||
                                            (f.currentSprite.tint = f.currentSprite.tint = parseInt(
                                                Phaser.Color.componentToHex(255 * f.r).substring(0, 2) + Phaser.Color.componentToHex(255 * f.g).substring(0, 2) + Phaser.Color.componentToHex(255 * f.b).substring(0, 2),
                                                16
                                            ));
                                } else {
                                    if (i !== spine.AttachmentType.weightedmesh && i !== spine.AttachmentType.weightedlinkedmesh) {
                                        h.visible = !1;
                                        continue;
                                    }
                                    if (!f.currentMeshName || f.currentMeshName !== g.name) {
                                        var m = g.name;
                                        if ((void 0 !== f.currentMesh && (f.currentMesh.visible = !1), (f.meshes = f.meshes || {}), void 0 !== f.meshes[m])) f.meshes[m].visible = !0;
                                        else {
                                            var n = this.createMesh(f, g);
                                            h.add(n);
                                        }
                                        (f.currentMesh = f.meshes[m]), (f.currentMeshName = m);
                                    }
                                    g.computeWorldVertices(f.bone.skeleton.x, f.bone.skeleton.y, f, f.currentMesh.vertices);
                                }
                                (h.visible = !0), (h.alpha = f.a);
                            } else h.visible = !1;
                        }
                    }
                }),
                (c.prototype.destroy = function (a, c) {
                    b.prototype.destroy.call(this, !0, c);
                }),
                (c.prototype.autoUpdateTransform = function () {
                    if (c.globalAutoUpdate) {
                        this.lastTime = this.lastTime || Date.now();
                        var a = 0.001 * (Date.now() - this.lastTime);
                        (this.lastTime = Date.now()), this.update(a);
                    } else this.lastTime = 0;
                    PIXI.DisplayObjectContainer.prototype.updateTransform.call(this);
                }),
                (c.prototype.createSprite = function (a, b) {
                    var c = b.rendererObject,
                        d = c.page.rendererObject,
                        e = new PIXI.Rectangle(c.x, c.y, c.rotate ? c.height : c.width, c.rotate ? c.width : c.height),
                        f = new PIXI.Texture(d, e),
                        g = new Phaser.Sprite(this.game, 0, 0, f),
                        h = c.rotate ? 0.5 * Math.PI : 0;
                    if (
                        ((g.scale.x = ((c.width / c.originalWidth) * b.scaleX) / this.imageScale),
                        (g.scale.y = ((c.height / c.originalHeight) * b.scaleY) / this.imageScale),
                        (g.rotation = h),
                        (g.anchor.x = (0.5 * c.originalWidth - c.offsetX) / c.width),
                        (g.anchor.y = 1 - (0.5 * c.originalHeight - c.offsetY) / c.height),
                        (g.alpha = b.a),
                        c.rotate)
                    ) {
                        var i = g.scale.x;
                        (g.scale.x = g.scale.y), (g.scale.y = i);
                    }
                    return (a.sprites = a.sprites || {}), (a.sprites[c.name] = g);
                }),
                (c.prototype.createMesh = function (a, b) {
                    var d = b.rendererObject.page.rendererObject,
                        e = new PIXI.Texture(d),
                        f = new Phaser.Rope(this.game, 0, 0, e);
                    return (f.drawMode = 1), (f.canvasPadding = 1.5), (f.vertices = new spine.Float32Array(b.uvs.length)), (f.uvs = b.uvs), (f.indices = b.triangles), (f.alpha = b.a), (a.meshes = a.meshes || {}), (a.meshes[b.name] = f);
                }),
                (c.prototype.setMixByName = function (a, b, c) {
                    this.stateData.setMixByName(a, b, c);
                }),
                (c.prototype.setAnimationByName = function (a, b, c) {
                    void 0 === c && (c = !1);
                    var d = this.state.data.skeletonData.findAnimation(b);
                    return d ? this.state.setAnimation(a, d, c) : null;
                }),
                (c.prototype.addAnimationByName = function (a, b, c, d) {
                    void 0 === c && (c = !1), void 0 === d && (d = 0);
                    var e = this.state.data.skeletonData.findAnimation(b);
                    return e ? this.state.addAnimation(a, e, c, d) : null;
                }),
                (c.prototype.getCurrentAnimationForTrack = function (a) {
                    return this.state.tracks[a].animation.name;
                }),
                (c.prototype.setSkinByName = function (a) {
                    var b = this.skeleton.data.findSkin(a);
                    b && this.skeleton.setSkin(b);
                }),
                (c.prototype.setSkin = function (a) {
                    this.skeleton.setSkin(a);
                }),
                (c.prototype.setToSetupPose = function () {
                    this.skeleton.setToSetupPose();
                }),
                (c.prototype.createCombinedSkin = function (a) {
                    for (var b = [], c = 1; c < arguments.length; c++) b[c - 1] = arguments[c];
                    if (0 !== b.length) {
                        for (var d = new spine.Skin(a), e = 0; e < b.length; e++) {
                            var f = b[e],
                                g = this.skeleton.data.findSkin(f);
                            if (!g) return;
                            for (var h in g.attachments) {
                                var i = h.split(":"),
                                    j = i[0],
                                    k = i[1],
                                    l = g.attachments[h];
                                if (void 0 === j || void 0 === k) return;
                                void 0 === d.getAttachment(j, k) && d.addAttachment(j, k, l);
                            }
                        }
                        return this.skeleton.data.skins.push(d), d;
                    }
                }),
                c
            );
        })(Phaser.Group);
        (b.globalAutoUpdate = !0), (a.Spine = b);
    })(PhaserSpine || (PhaserSpine = {})),
    (function (a) {
        var b = function (a) {
            (this.load = function (a, b, c) {
                var d = this.game.make.image(0, 0, b);
                a.rendererObject = d.texture.baseTexture;
            }),
                (this.unload = function (a) {
                    a.destroy();
                }),
                (this.game = a);
        };
        (PhaserSpine || (PhaserSpine = {})).SpineTextureLoader = b;
    })(),
    (function (a) {
        !(function (a) {
            var b = (function () {
                function a(a) {
                    void 0 === a && (a = ""), (this.namespace = ""), (this.forcePromises = !1), this.setNamespace(a);
                }
                return (
                    Object.defineProperty(a.prototype, "length", {
                        get: function () {
                            return null !== this.getNameSpaceMatches() ? this.getNameSpaceMatches().length : 0;
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    (a.prototype.key = function (a) {
                        var b = this.getNameSpaceMatches()[a],
                            c = this.getCookiesForNameSpace()[b] || null;
                        return this.forcePromises ? this.promisefy(c) : c;
                    }),
                    (a.prototype.getItem = function (a) {
                        var b = this.getCookiesForNameSpace()[a] || null;
                        return this.forcePromises ? this.promisefy(b) : b;
                    }),
                    (a.prototype.setItem = function (a, b) {
                        if (((document.cookie = encodeURIComponent(this.namespace + a) + "=" + encodeURIComponent(b) + "; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/"), this.forcePromises)) return this.promisefy(null);
                    }),
                    (a.prototype.removeItem = function (a) {
                        if (((document.cookie = encodeURIComponent(this.namespace + a) + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/"), this.forcePromises)) return this.promisefy(null);
                    }),
                    (a.prototype.clear = function () {
                        var a = this.getCookiesForNameSpace();
                        for (var b in a) a.hasOwnProperty(b) && this.removeItem(b);
                        if (this.forcePromises) return this.promisefy(null);
                    }),
                    (a.prototype.setNamespace = function (a) {
                        if ((a && ((this.namespace = a + ":"), (this.reg = new RegExp("^" + this.namespace + "[a-zA-Z0-9]*", "g"))), this.forcePromises)) return this.promisefy(a);
                    }),
                    (a.prototype.getNameSpaceMatches = function () {
                        var a = this;
                        return decodeURIComponent(document.cookie)
                            .split("; ")
                            .filter(function (b) {
                                return null !== b.match(a.reg) && 0 < b.match(a.reg).length;
                            });
                    }),
                    (a.prototype.getCookiesForNameSpace = function () {
                        var a = this,
                            b = {};
                        return (
                            this.getNameSpaceMatches().forEach(function (c) {
                                var d = c.replace(a.namespace, "").split("=");
                                b[d[0]] = d[1];
                            }),
                            b
                        );
                    }),
                    (a.prototype.promisefy = function (a) {
                        return new Promise(function (b, c) {
                            b(a);
                        });
                    }),
                    a
                );
            })();
            a.CookieStorage = b;
        })(a.StorageAdapters || (a.StorageAdapters = {}));
    })(PhaserSuperStorage || (PhaserSuperStorage = {})),
    (function (a) {
        !(function (a) {
            var b = (function () {
                function a() {
                    (this.namespace = ""), (this.keys = []);
                }
                return (
                    Object.defineProperty(a.prototype, "forcePromises", {
                        get: function () {
                            return !0;
                        },
                        set: function (a) {},
                        enumerable: !0,
                        configurable: !0,
                    }),
                    Object.defineProperty(a.prototype, "length", {
                        get: function () {
                            return this.keys.length;
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    (a.prototype.key = function (a) {
                        return this.promisefy(this.keys[a]);
                    }),
                    (a.prototype.getItem = function (a) {
                        var b = this;
                        return new Promise(function (c, d) {
                            NativeStorage.getItem(
                                b.namespace + a,
                                function (a) {
                                    c(a);
                                },
                                function (a) {
                                    2 === a.code ? c(null) : d(a);
                                }
                            );
                        });
                    }),
                    (a.prototype.setItem = function (a, b) {
                        var c = this;
                        return a.length < 1
                            ? void 0
                            : new Promise(function (d, e) {
                                  NativeStorage.setItem(
                                      c.namespace + a,
                                      b,
                                      function () {
                                          c.keys.indexOf(a) < 0 && (c.keys.push(a), c.save()), d(null);
                                      },
                                      function (a) {
                                          e(a);
                                      }
                                  );
                              });
                    }),
                    (a.prototype.removeItem = function (a) {
                        var b = this;
                        return new Promise(function (c, d) {
                            NativeStorage.remove(
                                b.namespace + a,
                                function () {
                                    var d = b.keys.indexOf(a);
                                    0 <= d && (b.keys.splice(d, 1), b.save()), c(null);
                                },
                                function (a) {
                                    d(a);
                                }
                            );
                        });
                    }),
                    (a.prototype.clear = function () {
                        var a = this;
                        return new Promise(function (b, c) {
                            for (var d = 0, e = 0; e < a.keys.length; e++)
                                NativeStorage.remove(
                                    a.namespace + a.keys[e],
                                    function () {
                                        ++d >= a.keys.length && ((a.keys = []), a.save(), b(null));
                                    },
                                    function (a) {
                                        c(a);
                                    }
                                );
                        });
                    }),
                    (a.prototype.setNamespace = function (a) {
                        var b = this;
                        return (
                            void 0 === a && (a = ""),
                            (this.namespace = a + ":"),
                            (this.keys = []),
                            new Promise(function (a, c) {
                                b.load().then(a).catch(a);
                            })
                        );
                    }),
                    (a.prototype.promisefy = function (a) {
                        return new Promise(function (b, c) {
                            b(a);
                        });
                    }),
                    (a.prototype.load = function () {
                        var a = this;
                        return new Promise(function (b, c) {
                            NativeStorage.getItem(
                                a.namespace,
                                function (c) {
                                    (a.keys = JSON.parse(c)), b(null);
                                },
                                function (a) {
                                    c(a);
                                }
                            );
                        });
                    }),
                    (a.prototype.save = function () {
                        NativeStorage.setItem(
                            this.namespace,
                            JSON.stringify(this.keys),
                            function () {},
                            function (a) {}
                        );
                    }),
                    a
                );
            })();
            a.CordovaStorage = b;
        })(a.StorageAdapters || (a.StorageAdapters = {}));
    })(PhaserSuperStorage || (PhaserSuperStorage = {})),
    (function (a) {
        !(function (b) {
            var c = (function () {
                function b(a, b) {
                    void 0 === a && (a = ""), void 0 === b && (b = "*"), (this.namespace = ""), (this.expectedOrigin = ""), (this.storageLength = 0), (this.enabled = !1), "" !== a && this.setNamespace(a), (this.expectedOrigin = b);
                }
                return (
                    Object.defineProperty(b.prototype, "forcePromises", {
                        get: function () {
                            return !0;
                        },
                        set: function (a) {},
                        enumerable: !0,
                        configurable: !0,
                    }),
                    Object.defineProperty(b.prototype, "length", {
                        get: function () {
                            return this.storageLength;
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    (b.prototype.init = function () {
                        var b = this;
                        return this.sendMessage({ command: a.StorageCommand.init }).then(function () {
                            b.enabled = !0;
                        });
                    }),
                    (b.prototype.key = function (b) {
                        return this.sendMessage({ command: a.StorageCommand.key, value: b });
                    }),
                    (b.prototype.getItem = function (b) {
                        return this.sendMessage({ command: a.StorageCommand.getItem, key: b });
                    }),
                    (b.prototype.setItem = function (b, c) {
                        return this.sendMessage({ command: a.StorageCommand.setItem, key: b, value: c });
                    }),
                    (b.prototype.removeItem = function (b) {
                        return this.sendMessage({ command: a.StorageCommand.removeItem, key: b });
                    }),
                    (b.prototype.clear = function () {
                        return this.sendMessage({ command: a.StorageCommand.clear });
                    }),
                    (b.prototype.setNamespace = function (b) {
                        return this.sendMessage({ command: a.StorageCommand.setNamespace, value: b });
                    }),
                    (b.prototype.sendMessage = function (b) {
                        var c,
                            d = this;
                        b.command === a.StorageCommand.init && (c = !1);
                        var e = new MessageChannel();
                        return new Promise(function (f, g) {
                            d.enabled || b.command === a.StorageCommand.init || g("Messaging not enabled!"),
                                b.command === a.StorageCommand.init &&
                                    setTimeout(function () {
                                        c || g("Unable to get a response in time");
                                    }, 1e3),
                                (e.port1.onmessage = function (b) {
                                    var e = a.StorageUtils.validateMessage(b.data);
                                    switch ((e.command === a.StorageCommand.init && (c = !0), (void 0 !== e.status && "ok" === e.status) || g(e.value), void 0 !== e.length && (d.storageLength = e.length), e.command)) {
                                        case a.StorageCommand.setNamespace:
                                            d.namespace = e.value + ":";
                                        case a.StorageCommand.getItem:
                                        case a.StorageCommand.length:
                                        case a.StorageCommand.key:
                                            f(e.value);
                                            break;
                                        case a.StorageCommand.setItem:
                                        case a.StorageCommand.removeItem:
                                        case a.StorageCommand.clear:
                                        case a.StorageCommand.init:
                                            f(e.status);
                                            break;
                                        default:
                                            g(e.value);
                                    }
                                }),
                                (d.enabled || b.command === a.StorageCommand.init) && window.parent.postMessage(b, d.expectedOrigin, [e.port2]);
                        });
                    }),
                    b
                );
            })();
            b.IframeStorage = c;
        })(a.StorageAdapters || (a.StorageAdapters = {}));
    })(PhaserSuperStorage || (PhaserSuperStorage = {})),
    (function (a) {
        !(function (b) {
            var c = (function () {
                function b(a) {
                    void 0 === a && (a = ""), (this.namespace = ""), (this.forcePromises = !1), this.setNamespace(a);
                }
                return (
                    Object.defineProperty(b.prototype, "length", {
                        get: function () {
                            var b = Object.keys(localStorage);
                            return a.StorageUtils.nameSpaceKeyFilter(b, this.namespace).length;
                        },
                        enumerable: !0,
                        configurable: !0,
                    }),
                    (b.prototype.key = function (a) {
                        return this.forcePromises ? this.promisefy(this._key, arguments) : this._key(a);
                    }),
                    (b.prototype._key = function (b) {
                        var c = Object.keys(localStorage),
                            d = a.StorageUtils.nameSpaceKeyFilter(c, this.namespace);
                        return localStorage.getItem(d[b]);
                    }),
                    (b.prototype.getItem = function (a) {
                        return this.forcePromises ? this.promisefy(this._getItem, arguments) : this._getItem(a);
                    }),
                    (b.prototype._getItem = function (a) {
                        return localStorage.getItem(this.namespace + a);
                    }),
                    (b.prototype.setItem = function (a, b) {
                        return this.forcePromises ? this.promisefy(this._setItem, arguments) : this._setItem(a, b);
                    }),
                    (b.prototype._setItem = function (a, b) {
                        return localStorage.setItem(this.namespace + a, b);
                    }),
                    (b.prototype.removeItem = function (a) {
                        return this.forcePromises ? this.promisefy(this._removeItem, arguments) : this._removeItem(a);
                    }),
                    (b.prototype._removeItem = function (a) {
                        return localStorage.removeItem(this.namespace + a);
                    }),
                    (b.prototype.clear = function () {
                        return this.forcePromises ? this.promisefy(this._clear, arguments) : this._clear();
                    }),
                    (b.prototype._clear = function () {
                        for (var b = Object.keys(localStorage), c = a.StorageUtils.nameSpaceKeyFilter(b, this.namespace), d = 0; d < c.length; d++) localStorage.removeItem(c[d]);
                    }),
                    (b.prototype.setNamespace = function (a) {
                        return this.forcePromises ? this.promisefy(this._setNameSpace, arguments) : this._setNameSpace(a);
                    }),
                    (b.prototype._setNameSpace = function (a) {
                        a && (this.namespace = a + ":");
                    }),
                    (b.prototype.promisefy = function (a, b) {
                        var c = this;
                        return new Promise(function (d, e) {
                            d(a.apply(c, b));
                        });
                    }),
                    b
                );
            })();
            b.LocalStorage = c;
        })(a.StorageAdapters || (a.StorageAdapters = {}));
    })(PhaserSuperStorage || (PhaserSuperStorage = {})),
    (function (a) {
        var b = (function () {
            function b(c) {
                if (void 0 !== c) Object.defineProperty(c, "storage", { value: this });
                else {
                    if (null !== b.instance) return b.instance;
                    b.instance = this;
                }
                a.StorageUtils.isLocalStorageSupport() ? this.setAdapter(new a.StorageAdapters.LocalStorage()) : this.setAdapter(new a.StorageAdapters.CookieStorage());
            }
            return (
                (b.prototype.setAdapter = function (a) {
                    this.storage = a;
                }),
                Object.defineProperty(b.prototype, "forcePromises", {
                    get: function () {
                        return this.storage.forcePromises;
                    },
                    set: function (a) {
                        this.storage.forcePromises = a;
                    },
                    enumerable: !0,
                    configurable: !0,
                }),
                Object.defineProperty(b.prototype, "length", {
                    get: function () {
                        return null === this.storage ? 0 : this.storage.length;
                    },
                    enumerable: !0,
                    configurable: !0,
                }),
                (b.prototype.setNamespace = function (a) {
                    if (null !== this.storage) return this.storage.setNamespace(a);
                }),
                (b.prototype.key = function (a) {
                    return null === this.storage ? "" : this.storage.key(a);
                }),
                (b.prototype.getItem = function (a) {
                    return null === this.storage ? null : this.storage.getItem(a);
                }),
                (b.prototype.setItem = function (a, b) {
                    if (null !== this.storage) return this.storage.setItem(a, b);
                }),
                (b.prototype.removeItem = function (a) {
                    if (null !== this.storage) return this.storage.removeItem(a);
                }),
                (b.prototype.clear = function () {
                    if (null !== this.storage) return this.storage.clear();
                }),
                b
            );
        })();
        (b.instance = null), (a.StoragePlugin = b);
    })(PhaserSuperStorage || (PhaserSuperStorage = {})),
    void 0 !== window.Phaser && Phaser.Utils.mixinPrototype(PhaserSuperStorage.StoragePlugin, Phaser.Plugin),
    (function (a) {
        !(function (a) {
            (a[(a.init = 0)] = "init"),
                (a[(a.setItem = 1)] = "setItem"),
                (a[(a.getItem = 2)] = "getItem"),
                (a[(a.removeItem = 3)] = "removeItem"),
                (a[(a.clear = 4)] = "clear"),
                (a[(a.setNamespace = 5)] = "setNamespace"),
                (a[(a.length = 6)] = "length"),
                (a[(a.key = 7)] = "key"),
                (a[(a.error = 8)] = "error");
        })(a.StorageCommand || (a.StorageCommand = {}));
        var c = (function () {
            function a() {}
            return (
                (a.isLocalStorageSupport = function () {
                    try {
                        if ("object" == typeof localStorage) return localStorage.setItem("testingLocalStorage", "foo"), localStorage.removeItem("testingLocalStorage"), !0;
                    } catch (a) {
                        return !1;
                    }
                    return !1;
                }),
                (a.validateMessage = function (a) {
                    return a.hasOwnProperty("command") ? a : null;
                }),
                (a.nameSpaceKeyFilter = function (a, b) {
                    return a.filter(function (a) {
                        return a.substring(0, b.length) === b;
                    });
                }),
                a
            );
        })();
        a.StorageUtils = c;
    })(PhaserSuperStorage || (PhaserSuperStorage = {}));
var PhaserCachebuster;
__extends =
    (this && this.__extends) ||
    function (a, b) {
        function c() {
            this.constructor = a;
        }
        for (var d in b) b.hasOwnProperty(d) && (a[d] = b[d]);
        a.prototype = null === b ? Object.create(b) : ((c.prototype = b.prototype), new c());
    };
!(function (a) {
    var b = (function (a) {
        function b(b, c) {
            var d = a.call(this, b, c) || this;
            return d.patchLoader(), d;
        }
        return (
            __extends(b, a),
            (b.prototype.patchLoader = function () {
                Object.defineProperty(Phaser.Loader, "cacheBuster", { value: null }),
                    (Phaser.Loader.prototype.transformUrl = function (a, b) {
                        return a ? (null !== this.cacheBuster && null === a.match(/^(data:)/) && (a += "?v=" + this.cacheBuster), a.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/) ? a : this.baseURL + b.path + a) : "";
                    });
            }),
            b
        );
    })(Phaser.Plugin);
    a.CacheBuster = b;
})(PhaserCachebuster || (PhaserCachebuster = {}));
var AdFreeUntrackedProvider = (function () {
    function AdFreeUntrackedProvider() {
        this.adsEnabled = !1;
    }
    return (
        (AdFreeUntrackedProvider.prototype.setManager = function (manager) {
            this.adManager = manager;
        }),
        (AdFreeUntrackedProvider.prototype.showAd = function (adType) {
            void 0 === adType && (adType = h5ads.AdType.interstitial), this.resumeGameplay();
        }),
        (AdFreeUntrackedProvider.prototype.resumeGameplay = function () {
            this.adManager.emit(h5ads.AdEvents.CONTENT_RESUMED);
        }),
        (AdFreeUntrackedProvider.prototype.preloadAd = function (adType) {
            void 0 === adType && (adType = h5ads.AdType.interstitial);
        }),
        (AdFreeUntrackedProvider.prototype.destroyAd = function () {}),
        (AdFreeUntrackedProvider.prototype.hideAd = function () {}),
        (AdFreeUntrackedProvider.prototype.adAvailable = function (adType) {
            return !0;
        }),
        AdFreeUntrackedProvider
    );
})();
