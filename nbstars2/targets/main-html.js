/** Cooked with Flambe, https://getflambe.com */
'use strict';(function(){function l(a,b){function c(){}c.prototype=a;var d=new c,e;for(e in b)d[e]=b[e];b.toString!==Object.prototype.toString&&(d.toString=b.toString);return d}function Om(a){return a instanceof Array?function(){return Q.iter(a)}:"function"==typeof a.iterator?m(a,a.iterator):a.iterator}function m(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=Hn++);var c;null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__];null==c&&(c=function(){return c.method.apply(c.scope,
arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c);return c}var f={},s=function(){return ga.__string_rec(this,"")},hd=function(a,b){b=b.split("u").join("");this.r=RegExp(a,b)};f.EReg=hd;hd.__name__=["EReg"];hd.prototype={match:function(a){this.r.global&&(this.r.lastIndex=0);this.r.m=this.r.exec(a);this.r.s=a;return null!=this.r.m},matched:function(a){if(null!=this.r.m&&0<=a&&a<this.r.m.length)return this.r.m[a];throw"EReg::matched";},matchedPos:function(){if(null==this.r.m)throw"No string matched";
return{pos:this.r.m.index,len:this.r.m[0].length}},replace:function(a,b){return a.replace(this.r,b)},__class__:hd};var Q=function(){};f.HxOverrides=Q;Q.__name__=["HxOverrides"];Q.dateStr=function(a){var b=a.getMonth()+1,c=a.getDate(),d=a.getHours(),e=a.getMinutes(),h=a.getSeconds();return a.getFullYear()+"-"+(10>b?"0"+b:""+b)+"-"+(10>c?"0"+c:""+c)+" "+(10>d?"0"+d:""+d)+":"+(10>e?"0"+e:""+e)+":"+(10>h?"0"+h:""+h)};Q.strDate=function(a){switch(a.length){case 8:var a=a.split(":"),b=new Date;b.setTime(0);
b.setUTCHours(a[0]);b.setUTCMinutes(a[1]);b.setUTCSeconds(a[2]);return b;case 10:return a=a.split("-"),new Date(a[0],a[1]-1,a[2],0,0,0);case 19:return b=a.split(" "),a=b[0].split("-"),b=b[1].split(":"),new Date(a[0],a[1]-1,a[2],b[0],b[1],b[2]);default:throw"Invalid date format : "+a;}};Q.cca=function(a,b){var c=a.charCodeAt(b);return c!=c?void 0:c};Q.substr=function(a,b,c){if(null!=b&&0!=b&&null!=c&&0>c)return"";null==c&&(c=a.length);0>b?(b=a.length+b,0>b&&(b=0)):0>c&&(c=a.length+c-b);return a.substr(b,
c)};Q.remove=function(a,b){var c=a.indexOf(b);if(-1==c)return!1;a.splice(c,1);return!0};Q.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}};var of=function(){};f.Lambda=of;of.__name__=["Lambda"];of.array=function(a){for(var b=[],a=Om(a)();a.hasNext();){var c=a.next();b.push(c)}return b};of.exists=function(a,b){for(var c=Om(a)();c.hasNext();){var d=c.next();if(b(d))return!0}return!1};of.count=function(a,b){var c=0;
if(null==b)for(var d=Om(a)();d.hasNext();)d.next(),c++;else for(d=Om(a)();d.hasNext();){var e=d.next();b(e)&&c++}return c};var $d=function(){this.length=0};f.List=$d;$d.__name__=["List"];$d.prototype={add:function(a){a=[a];null==this.h?this.h=a:this.q[1]=a;this.q=a;this.length++},push:function(a){this.h=a=[a,this.h];null==this.q&&(this.q=a);this.length++},pop:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];null==this.h&&(this.q=null);this.length--;return a},iterator:function(){return{h:this.h,
hasNext:function(){return null!=this.h},next:function(){if(null==this.h)return null;var a=this.h[0];this.h=this.h[1];return a}}},__class__:$d};var Kf=function(){};f.IMap=Kf;Kf.__name__=["IMap"];Kf.prototype={__class__:Kf};Math.__name__=["Math"];var w=function(){};f.Reflect=w;w.__name__=["Reflect"];w.field=function(a,b){try{return a[b]}catch(c){return null}};w.setField=function(a,b,c){a[b]=c};w.getProperty=function(a,b){var c;return null==a?null:a.__properties__&&(c=a.__properties__["get_"+b])?a[c]():
a[b]};w.setProperty=function(a,b,c){var d;if(a.__properties__&&(d=a.__properties__["set_"+b]))a[d](c);else a[b]=c};w.fields=function(a){var b=[];if(null!=a){var c=Object.prototype.hasOwnProperty,d;for(d in a)"__id__"!=d&&"hx__closures__"!=d&&c.call(a,d)&&b.push(d)}return b};w.isFunction=function(a){return"function"==typeof a&&!(a.__name__||a.__ename__)};w.compare=function(a,b){return a==b?0:a>b?1:-1};w.isEnumValue=function(a){return null!=a&&null!=a.__enum__};w.deleteField=function(a,b){if(!Object.prototype.hasOwnProperty.call(a,
b))return!1;delete a[b];return!0};var y=function(){};f.Std=y;y.__name__=["Std"];y.is=function(a,b){return ga.__instanceof(a,b)};y.instance=function(a,b){return a instanceof b?a:null};y.string=function(a){return ga.__string_rec(a,"")};y["int"]=function(a){return a|0};y.parseInt=function(a){var b=parseInt(a,10);if(0==b&&(120==Q.cca(a,1)||88==Q.cca(a,1)))b=parseInt(a);return isNaN(b)?null:b};y.parseFloat=function(a){return parseFloat(a)};var Je=function(){this.b=""};f.StringBuf=Je;Je.__name__=["StringBuf"];
Je.prototype={add:function(a){this.b+=y.string(a)},addSub:function(a,b,c){this.b=null==c?this.b+Q.substr(a,b,null):this.b+Q.substr(a,b,c)},__class__:Je};var xa=function(){};f.StringTools=xa;xa.__name__=["StringTools"];xa.startsWith=function(a,b){return a.length>=b.length&&Q.substr(a,0,b.length)==b};xa.isSpace=function(a,b){var c=Q.cca(a,b);return 8<c&&14>c||32==c};xa.ltrim=function(a){for(var b=a.length,c=0;c<b&&xa.isSpace(a,c);)c++;return 0<c?Q.substr(a,c,b-c):a};xa.rtrim=function(a){for(var b=a.length,
c=0;c<b&&xa.isSpace(a,b-c-1);)c++;return 0<c?Q.substr(a,0,b-c):a};xa.trim=function(a){return xa.ltrim(xa.rtrim(a))};xa.lpad=function(a,b,c){if(0>=b.length)return a;for(;a.length<c;)a=b+a;return a};xa.replace=function(a,b,c){return a.split(b).join(c)};xa.fastCodeAt=function(a,b){return a.charCodeAt(b)};var K=f.ValueType={__ename__:["ValueType"],__constructs__:"TNull,TInt,TFloat,TBool,TObject,TFunction,TClass,TEnum,TUnknown".split(",")};K.TNull=["TNull",0];K.TNull.toString=s;K.TNull.__enum__=K;K.TInt=
["TInt",1];K.TInt.toString=s;K.TInt.__enum__=K;K.TFloat=["TFloat",2];K.TFloat.toString=s;K.TFloat.__enum__=K;K.TBool=["TBool",3];K.TBool.toString=s;K.TBool.__enum__=K;K.TObject=["TObject",4];K.TObject.toString=s;K.TObject.__enum__=K;K.TFunction=["TFunction",5];K.TFunction.toString=s;K.TFunction.__enum__=K;K.TClass=function(a){a=["TClass",6,a];a.__enum__=K;a.toString=s;return a};K.TEnum=function(a){a=["TEnum",7,a];a.__enum__=K;a.toString=s;return a};K.TUnknown=["TUnknown",8];K.TUnknown.toString=s;
K.TUnknown.__enum__=K;K.__empty_constructs__=[K.TNull,K.TInt,K.TFloat,K.TBool,K.TObject,K.TFunction,K.TUnknown];var ja=function(){};f.Type=ja;ja.__name__=["Type"];ja.getClass=function(a){return null==a?null:a instanceof Array&&null==a.__enum__?Array:a.__class__};ja.getClassName=function(a){return a.__name__.join(".")};ja.getEnumName=function(a){return a.__ename__.join(".")};ja.resolveClass=function(a){a=f[a];return null==a||!a.__name__?null:a};ja.resolveEnum=function(a){a=f[a];return null==a||!a.__ename__?
null:a};ja.createInstance=function(a,b){switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6]);case 8:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6],b[7]);default:throw"Too many arguments";}};ja.createEmptyInstance=function(a){function b(){}
b.prototype=a.prototype;return new b};ja.createEnum=function(a,b,c){var d=w.field(a,b);if(null==d)throw"No such constructor "+b;if(w.isFunction(d)){if(null==c)throw"Constructor "+b+" need parameters";return d.apply(a,c)}if(null!=c&&0!=c.length)throw"Constructor "+b+" does not need parameters";return d};ja.getEnumConstructs=function(a){return a.__constructs__.slice()};ja["typeof"]=function(a){switch(typeof a){case "boolean":return K.TBool;case "string":return K.TClass(String);case "number":return Math.ceil(a)==
a%2147483648?K.TInt:K.TFloat;case "object":if(null==a)return K.TNull;var b=a.__enum__;if(null!=b)return K.TEnum(b);a=a instanceof Array&&null==a.__enum__?Array:a.__class__;return null!=a?K.TClass(a):K.TObject;case "function":return a.__name__||a.__ename__?K.TObject:K.TFunction;case "undefined":return K.TNull;default:return K.TUnknown}};ja.enumEq=function(a,b){if(a==b)return!0;try{if(a[0]!=b[0])return!1;for(var c=2,d=a.length;c<d;){var e=c++;if(!ja.enumEq(a[e],b[e]))return!1}var h=a.__enum__;if(h!=
b.__enum__||null==h)return!1}catch(n){return!1}return!0};ja.enumIndex=function(a){return a[1]};ja.allEnums=function(a){return a.__empty_constructs__};(f.XmlType={__ename__:["XmlType"],__constructs__:[]}).__empty_constructs__=[];var R=function(){};f.Xml=R;R.__name__=["Xml"];R.parse=function(a){return Ke.parse(a)};R.createElement=function(a){var b=new R;b.nodeType=R.Element;b._children=[];b._attributes=new N;b.set_nodeName(a);return b};R.createPCData=function(a){var b=new R;b.nodeType=R.PCData;b.set_nodeValue(a);
return b};R.createCData=function(a){var b=new R;b.nodeType=R.CData;b.set_nodeValue(a);return b};R.createComment=function(a){var b=new R;b.nodeType=R.Comment;b.set_nodeValue(a);return b};R.createDocType=function(a){var b=new R;b.nodeType=R.DocType;b.set_nodeValue(a);return b};R.createProcessingInstruction=function(a){var b=new R;b.nodeType=R.ProcessingInstruction;b.set_nodeValue(a);return b};R.createDocument=function(){var a=new R;a.nodeType=R.Document;a._children=[];return a};R.prototype={get_nodeName:function(){if(this.nodeType!=
R.Element)throw"bad nodeType";return this._nodeName},set_nodeName:function(a){if(this.nodeType!=R.Element)throw"bad nodeType";return this._nodeName=a},get_nodeValue:function(){if(this.nodeType==R.Element||this.nodeType==R.Document)throw"bad nodeType";return this._nodeValue},set_nodeValue:function(a){if(this.nodeType==R.Element||this.nodeType==R.Document)throw"bad nodeType";return this._nodeValue=a},get:function(a){if(this.nodeType!=R.Element)throw"bad nodeType";return this._attributes.get(a)},set:function(a,
b){if(this.nodeType!=R.Element)throw"bad nodeType";this._attributes.set(a,b)},exists:function(a){if(this.nodeType!=R.Element)throw"bad nodeType";return this._attributes.exists(a)},iterator:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){return this.cur<this.x.length},next:function(){return this.x[this.cur++]}}},elements:function(){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var a=this.cur,
b=this.x.length;a<b&&!(this.x[a].nodeType==R.Element);)a+=1;this.cur=a;return a<b},next:function(){for(var a=this.cur,b=this.x.length;a<b;){var c=this.x[a],a=a+1;if(c.nodeType==R.Element)return this.cur=a,c}return null}}},elementsNamed:function(a){if(null==this._children)throw"bad nodetype";return{cur:0,x:this._children,hasNext:function(){for(var b=this.cur,c=this.x.length;b<c;){var d=this.x[b];if(d.nodeType==R.Element&&d._nodeName==a)break;b++}this.cur=b;return b<c},next:function(){for(var b=this.cur,
c=this.x.length;b<c;){var d=this.x[b];b++;if(d.nodeType==R.Element&&d._nodeName==a)return this.cur=b,d}return null}}},firstElement:function(){if(null==this._children)throw"bad nodetype";for(var a=0,b=this._children.length;a<b;){var c=this._children[a];if(c.nodeType==R.Element)return c;a++}return null},addChild:function(a){if(null==this._children)throw"bad nodetype";null!=a._parent&&Q.remove(a._parent._children,a);a._parent=this;this._children.push(a)},__class__:R,__properties__:{set_nodeValue:"set_nodeValue",
get_nodeValue:"get_nodeValue",set_nodeName:"set_nodeName",get_nodeName:"get_nodeName"}};var cc=function(){};f["flambe.util.Disposable"]=cc;cc.__name__=["flambe","util","Disposable"];cc.prototype={__class__:cc};var k=function(){this._flags=0;this.owner=this.next=null};f["flambe.Component"]=k;k.__name__=["flambe","Component"];k.__interfaces__=[cc];k.prototype={onAdded:function(){},onRemoved:function(){},onStart:function(){},onStop:function(){},onUpdate:function(){},dispose:function(){null!=this.owner&&
this.owner.remove(this)},get_name:function(){return null},__class__:k,__properties__:{get_name:"get_name"}};var xb=function(){k.call(this);this._disposables=[]};f["flambe.Disposer"]=xb;xb.__name__=["flambe","Disposer"];xb.__super__=k;xb.prototype=l(k.prototype,{get_name:function(){return"Disposer_61"},add:function(a){this._disposables.push(a);return this},connect0:function(a,b){this.add(a.connect(b));return this},connect1:function(a,b){this.add(a.connect(b));return this},onRemoved:function(){this.freeDisposables()},
dispose:function(){k.prototype.dispose.call(this);this.freeDisposables()},freeDisposables:function(){var a=this._disposables;this._disposables=[];for(var b=0;b<a.length;){var c=a[b];++b;c.dispose()}},__class__:xb});var r=function(){this.parent=this.firstChild=this.next=this.firstComponent=null;this._compMap={}};f["flambe.Entity"]=r;r.__name__=["flambe","Entity"];r.__interfaces__=[cc];r.prototype={add:function(a){null!=a.owner&&a.owner.remove(a);var b=a.get_name(),c=this._compMap[b];null!=c&&this.remove(c);
this._compMap[b]=a;b=null;for(c=this.firstComponent;null!=c;)b=c,c=c.next;null!=b?b.next=a:this.firstComponent=a;a.owner=this;a.next=null;a.onAdded();return this},remove:function(a){for(var b=null,c=this.firstComponent;null!=c;){var d=c.next;if(c==a)return null==b?this.firstComponent=d:(b.owner=this,b.next=d),delete this._compMap[c.get_name()],0!=(c._flags&1)&&(c.onStop(),c._flags&=-2),c.onRemoved(),c.owner=null,c.next=null,!0;b=c;c=d}return!1},getComponent:function(a){return this._compMap[a]},addChild:function(a,
b){null==b&&(b=!0);null!=a.parent&&a.parent.removeChild(a);a.parent=this;if(b){for(var c=null,d=this.firstChild;null!=d;)c=d,d=d.next;null!=c?c.next=a:this.firstChild=a}else a.next=this.firstChild,this.firstChild=a;return this},removeChild:function(a){for(var b=null,c=this.firstChild;null!=c;){var d=c.next;if(c==a){null==b?this.firstChild=d:b.next=d;c.parent=null;c.next=null;break}b=c;c=d}},disposeChildren:function(){for(;null!=this.firstChild;)this.firstChild.dispose()},dispose:function(){for(null!=
this.parent&&this.parent.removeChild(this);null!=this.firstComponent;)this.firstComponent.dispose();this.disposeChildren()},_internal_getFromParents:function(a,b){var c=this;do{var d=c._compMap[a];null!=b&&!(d instanceof b)&&(d=null);if(null!=d)return d;c=c.parent}while(null!=c);return null},_internal_getFromChildren:function(a,b){var c=this._compMap[a];null!=b&&!(c instanceof b)&&(c=null);if(null!=c)return c;for(c=this.firstChild;null!=c;){var d=c._internal_getFromChildren(a,b);if(null!=d)return d;
c=c.next}return null},__class__:r};var Pm=function(){};f["flambe.util.PackageLog"]=Pm;Pm.__name__=["flambe","util","PackageLog"];var vl=function(){};f["flambe.platform.Platform"]=vl;vl.__name__=["flambe","platform","Platform"];vl.prototype={__class__:vl};var Od=function(){};f["flambe.platform.html.HtmlPlatform"]=Od;Od.__name__=["flambe","platform","html","HtmlPlatform"];Od.__interfaces__=[vl];Od.prototype={init:function(){var a=this;ra.fixAndroidMath();var b=null;try{b=window.flambe.canvas}catch(c){}b.setAttribute("tabindex",
"0");b.style.outlineStyle="none";b.style.webkitTapHighlightColor="transparent";b.setAttribute("moz-opaque","true");this._stage=new wg(b);this._pointer=new nc;this._mouse=new Jh(this._pointer,b);this._renderer=this.createRenderer(b);this.mainLoop=new Lf;this.musicPlaying=!1;this._canvas=b;this._container=b.parentElement;this._container.style.overflow="hidden";this._container.style.position="relative";this._container.style.msTouchAction="none";var d=0,e=function(c){if(!(1E3>c.timeStamp-d)){var e=b.getBoundingClientRect(),
h=a.getX(c,e),e=a.getY(c,e);switch(c.type){case "mousedown":c.target==b&&(c.preventDefault(),a._mouse.submitDown(h,e,c.button),b.focus());break;case "mousemove":a._mouse.submitMove(h,e);break;case "mouseup":a._mouse.submitUp(h,e,c.button);break;case "mousewheel":case "DOMMouseScroll":a._mouse.submitScroll(h,e,"mousewheel"==c.type?c.wheelDelta/40:-c.detail)&&c.preventDefault()}}};window.addEventListener("mousedown",e,!1);window.addEventListener("mousemove",e,!1);window.addEventListener("mouseup",e,
!1);b.addEventListener("mousewheel",e,!1);b.addEventListener("DOMMouseScroll",e,!1);b.addEventListener("contextmenu",function(a){a.preventDefault()},!1);var h="undefined"!=typeof window.ontouchstart,e="msMaxTouchPoints"in window.navigator&&1<window.navigator.msMaxTouchPoints;if(h||e){var n=new Kh(this._pointer,h?4:window.navigator.msMaxTouchPoints);this._touch=n;e=function(b){var c;c=h?b.changedTouches:[b];var e=b.target.getBoundingClientRect();d=b.timeStamp;switch(b.type){case "touchstart":case "MSPointerDown":case "pointerdown":b.preventDefault();
ra.SHOULD_HIDE_MOBILE_BROWSER&&ra.hideMobileBrowser();for(b=0;b<c.length;){var g=c[b];++b;var wl=a.getX(g,e),f=a.getY(g,e);n.submitDown((h?g.identifier:g.pointerId)|0,wl,f)}break;case "touchmove":case "MSPointerMove":case "pointermove":b.preventDefault();for(b=0;b<c.length;)g=c[b],++b,wl=a.getX(g,e),f=a.getY(g,e),n.submitMove((h?g.identifier:g.pointerId)|0,wl,f);break;case "touchend":case "touchcancel":case "MSPointerUp":case "pointerup":for(b=0;b<c.length;)g=c[b],++b,wl=a.getX(g,e),f=a.getY(g,e),
n.submitUp((h?g.identifier:g.pointerId)|0,wl,f)}};h?(b.addEventListener("touchstart",e,!1),b.addEventListener("touchmove",e,!1),b.addEventListener("touchend",e,!1),b.addEventListener("touchcancel",e,!1)):(b.addEventListener("MSPointerDown",e,!1),b.addEventListener("MSPointerMove",e,!1),b.addEventListener("MSPointerUp",e,!1))}else this._touch=new Lh;var g=window.onerror;window.onerror=function(a,b,c){x.uncaughtError.emit(a);return null!=g?g(a,b,c):!1};var f=ra.loadExtension("hidden",window.document);
null!=f.value?(e=function(){x.hidden.set__(w.field(window.document,f.field))},e(null),window.document.addEventListener(f.prefix+"visibilitychange",e,!1)):(e=function(a){x.hidden.set__("pagehide"==a.type)},window.addEventListener("pageshow",e,!1),window.addEventListener("pagehide",e,!1));x.hidden.get_changed().connect(function(b){b||(a._skipFrame=!0)});this._skipFrame=!1;this._lastUpdate=Date.now();var i=ra.loadExtension("requestAnimationFrame").value;if(null!=i){var j=window.performance,k=null!=j&&
ra.polyfill("now",j);k?this._lastUpdate=j.now():null;var l=null,l=function(c){a.update(k?j.now():c);i(l,b)};i(l,b)}else window.setInterval(function(){a.update(Date.now())},16);xg.info("Initialized HTML platform",["renderer",this._renderer.get_type()])},loadAssetPack:function(a){return(new sa(this,a)).promise},getStage:function(){return this._stage},getStorage:function(){if(null==this._storage){var a=Mh.getLocalStorage();this._storage=null!=a?new Nh(a):new Oh}return this._storage},getLocale:function(){var a=
window.navigator.language;null==a&&(a=window.navigator.userLanguage);return a},getTime:function(){return Date.now()/1E3},update:function(a){var b=(a-this._lastUpdate)/1E3;this._lastUpdate=a;x.hidden._value||(this._skipFrame?this._skipFrame=!1:(this.mainLoop.update(b),this.mainLoop.render(this._renderer)))},getPointer:function(){return this._pointer},getMouse:function(){return this._mouse},getTouch:function(){return this._touch},getKeyboard:function(){var a=this;if(null==this._keyboard){this._keyboard=
new xd;var b=function(b){switch(b.type){case "keydown":a._keyboard.submitDown(b.keyCode)&&b.preventDefault();break;case "keyup":a._keyboard.submitUp(b.keyCode)}};this._canvas.addEventListener("keydown",b,!1);this._canvas.addEventListener("keyup",b,!1)}return this._keyboard},getExternal:function(){null==this._external&&(this._external=new Ph);return this._external},getRenderer:function(){return this._renderer},getX:function(a,b){return(a.clientX-b.left)*this._stage.get_width()/b.width},getY:function(a,
b){return(a.clientY-b.top)*this._stage.get_height()/b.height},createRenderer:function(a){try{var b=Qm.getContextWebGL(a,{alpha:!1,depth:!1,failIfMajorPerformanceCaveat:!0});if(null!=b)if(ra.detectSlowDriver(b))null;else return new Qh(this._stage,b)}catch(c){}return new Mf(a)},__class__:Od};var yb=function(a,b){this._value=a;this._changed=null!=b?new Nc(b):null};f["flambe.util.Value"]=yb;yb.__name__=["flambe","util","Value"];yb.prototype={watch:function(a){a(this._value,this._value);return this.get_changed().connect(a)},
get__:function(){return this._value},set__:function(a){var b=this._value;a!=b&&(this._value=a,null!=this._changed&&this._changed.emit(a,b));return a},get_changed:function(){null==this._changed&&(this._changed=new Nc);return this._changed},__class__:yb,__properties__:{get_changed:"get_changed",set__:"set__",get__:"get__"}};var Nf=function(a,b){this._next=null;this._signal=a;this._listener=b;this.stayInList=!0};f["flambe.util.SignalConnection"]=Nf;Nf.__name__=["flambe","util","SignalConnection"];Nf.__interfaces__=
[cc];Nf.prototype={once:function(){this.stayInList=!1;return this},dispose:function(){null!=this._signal&&(this._signal.disconnect(this),this._signal=null)},__class__:Nf};var zb=function(a){this._head=null!=a?new Nf(this,a):null;this._deferredTasks=null};f["flambe.util.SignalBase"]=zb;zb.__name__=["flambe","util","SignalBase"];zb.prototype={connectImpl:function(a,b){var c=this,d=new Nf(this,a);this._head==zb.DISPATCHING_SENTINEL?this.defer(function(){c.listAdd(d,b)}):this.listAdd(d,b);return d},disconnect:function(a){var b=
this;this._head==zb.DISPATCHING_SENTINEL?this.defer(function(){b.listRemove(a)}):this.listRemove(a)},defer:function(a){for(var b=null,c=this._deferredTasks;null!=c;)b=c,c=c.next;a=new xl(a);null!=b?b.next=a:this._deferredTasks=a},willEmit:function(){var a=this._head;this._head=zb.DISPATCHING_SENTINEL;return a},didEmit:function(a){this._head=a;a=this._deferredTasks;for(this._deferredTasks=null;null!=a;)a.fn(),a=a.next},listAdd:function(a,b){if(b)a._next=this._head,this._head=a;else{for(var c=null,
d=this._head;null!=d;)c=d,d=d._next;null!=c?c._next=a:this._head=a}},listRemove:function(a){for(var b=null,c=this._head;null!=c;){if(c==a){a=c._next;null==b?this._head=a:b._next=a;break}b=c;c=c._next}},__class__:zb};var Nc=function(a){zb.call(this,a)};f["flambe.util.Signal2"]=Nc;Nc.__name__=["flambe","util","Signal2"];Nc.__super__=zb;Nc.prototype=l(zb.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a,b){var c=this;this._head==zb.DISPATCHING_SENTINEL?this.defer(function(){c.emitImpl(a,
b)}):this.emitImpl(a,b)},emitImpl:function(a,b){for(var c=this.willEmit(),d=c;null!=d;)d._listener(a,b),d.stayInList||d.dispose(),d=d._next;this.didEmit(c)},__class__:Nc});var O=function(a){zb.call(this,a)};f["flambe.util.Signal1"]=O;O.__name__=["flambe","util","Signal1"];O.__super__=zb;O.prototype=l(zb.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(a){var b=this;this._head==zb.DISPATCHING_SENTINEL?this.defer(function(){b.emitImpl(a)}):this.emitImpl(a)},
emitImpl:function(a){for(var b=this.willEmit(),c=b;null!=c;)c._listener(a),c.stayInList||c.dispose(),c=c._next;this.didEmit(b)},__class__:O});var J=function(a,b){this._behavior=null;yb.call(this,a,b)};f["flambe.animation.AnimatedFloat"]=J;J.__name__=["flambe","animation","AnimatedFloat"];J.__super__=yb;J.prototype=l(yb.prototype,{set__:function(a){this._behavior=null;return yb.prototype.set__.call(this,a)},update:function(a){null!=this._behavior&&(yb.prototype.set__.call(this,this._behavior.update(a)),
this._behavior.isComplete()&&(this._behavior=null))},animateTo:function(a,b,c){this.set_behavior(new yg(this._value,a,b,c))},set_behavior:function(a){this._behavior=a;this.update(0);return a},__class__:J,__properties__:l(yb.prototype.__properties__,{set_behavior:"set_behavior"})});var x=function(){};f["flambe.System"]=x;x.__name__=["flambe","System"];x.init=function(){x._calledInit||(x._platform.init(),x._calledInit=!0)};var xg=function(){};f["flambe.Log"]=xg;xg.__name__=["flambe","Log"];xg.info=
function(){null};xg.__super__=Pm;xg.prototype=l(Pm.prototype,{__class__:xg});var Of=function(a){null==a&&(a=1);this._realDt=0;k.call(this);this.scale=new J(a)};f["flambe.SpeedAdjuster"]=Of;Of.__name__=["flambe","SpeedAdjuster"];Of.__super__=k;Of.prototype=l(k.prototype,{get_name:function(){return"SpeedAdjuster_57"},onUpdate:function(a){0<this._realDt&&(a=this._realDt,this._realDt=0);this.scale.update(a)},__class__:Of});var pf=function(){};f["flambe.animation.Behavior"]=pf;pf.__name__=["flambe","animation",
"Behavior"];pf.prototype={__class__:pf};var t=function(){};f["flambe.animation.Ease"]=t;t.__name__=["flambe","animation","Ease"];t.linear=function(a){return a};t.quadIn=function(a){return a*a};t.quadOut=function(a){return a*(2-a)};t.quadInOut=function(a){return 0.5>=a?2*a*a:1-2*--a*a};t.cubeOut=function(a){return 1+--a*a*a};t.quintIn=function(a){return a*a*a*a*a};t.quintOut=function(a){return(a-=1)*a*a*a*a+1};t.quintInOut=function(a){return 1>(a*=2)?a*a*a*a*a/2:((a-=2)*a*a*a*a+2)/2};t.sineIn=function(a){return 1-
Math.cos(1.5707963267948966*a)};t.sineOut=function(a){return Math.sin(1.5707963267948966*a)};t.sineInOut=function(a){return 0.5-Math.cos(3.141592653589793*a)/2};t.bounceIn=function(a){a=1-a;return 0.36363636363636365>a?1-7.5625*a*a:0.7272727272727273>a?1-(7.5625*(a-0.5454545454545454)*(a-0.5454545454545454)+0.75):0.9090909090909091>a?1-(7.5625*(a-0.8181818181818182)*(a-0.8181818181818182)+0.9375):1-(7.5625*(a-0.9545454545454546)*(a-0.9545454545454546)+0.984375)};t.bounceOut=function(a){return 0.36363636363636365>
a?7.5625*a*a:0.7272727272727273>a?7.5625*(a-0.5454545454545454)*(a-0.5454545454545454)+0.75:0.9090909090909091>a?7.5625*(a-0.8181818181818182)*(a-0.8181818181818182)+0.9375:7.5625*(a-0.9545454545454546)*(a-0.9545454545454546)+0.984375};t.backIn=function(a){return a*a*(2.70158*a-1.70158)};t.backOut=function(a){return 1- --a*a*(-2.70158*a-1.70158)};t.backInOut=function(a){a*=2;if(1>a)return a*a*(2.70158*a-1.70158)/2;a-=2;return(1-a*a*(-2.70158*a-1.70158))/2+0.5};t.elasticOut=function(a){return 1*Math.pow(2,
-10*a)*Math.sin(6.283185307179586*(a-0.06366197723675814*Math.asin(1))/0.4)+1};var Pf=function(a,b){this.base=a;this.strength=b};f["flambe.animation.Jitter"]=Pf;Pf.__name__=["flambe","animation","Jitter"];Pf.__interfaces__=[pf];Pf.prototype={update:function(){return this.base+2*Math.random()*this.strength-this.strength},isComplete:function(){return!1},__class__:Pf};var Cc=function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=1);this.start=a;this.end=b;this.cycles=d;this.speed=new J(c);this._count=
1.5707963267948966+e*(3.141592653589793/c);this._distance=0.5*(a-b);this._center=b+this._distance};f["flambe.animation.Sine"]=Cc;Cc.__name__=["flambe","animation","Sine"];Cc.__interfaces__=[pf];Cc.prototype={update:function(a){this.speed.update(a);this._count+=a*(3.141592653589793/this.speed._value);return this._center+Math.sin(this._count)*this._distance},isComplete:function(){return 0<this.cycles&&0.5*((this._count-1.5707963267948966)/3.141592653589793)>=this.cycles},__class__:Cc};var yg=function(a,
b,c,d){this._from=a;this._to=b;this._duration=c;this.elapsed=0;this._easing=null!=d?d:t.linear};f["flambe.animation.Tween"]=yg;yg.__name__=["flambe","animation","Tween"];yg.__interfaces__=[pf];yg.prototype={update:function(a){this.elapsed+=a;return this.elapsed>=this._duration?this._to:this._from+(this._to-this._from)*this._easing(this.elapsed/this._duration)},isComplete:function(){return this.elapsed>=this._duration},__class__:yg};var qf=function(){};f["flambe.asset.Asset"]=qf;qf.__name__=["flambe",
"asset","Asset"];qf.__interfaces__=[cc];qf.prototype={__class__:qf};var L=f["flambe.asset.AssetFormat"]={__ename__:["flambe","asset","AssetFormat"],__constructs__:"WEBP,JXR,PNG,JPG,GIF,DDS,PVR,PKM,MP3,M4A,OPUS,OGG,WAV,Data".split(",")};L.WEBP=["WEBP",0];L.WEBP.toString=s;L.WEBP.__enum__=L;L.JXR=["JXR",1];L.JXR.toString=s;L.JXR.__enum__=L;L.PNG=["PNG",2];L.PNG.toString=s;L.PNG.__enum__=L;L.JPG=["JPG",3];L.JPG.toString=s;L.JPG.__enum__=L;L.GIF=["GIF",4];L.GIF.toString=s;L.GIF.__enum__=L;L.DDS=["DDS",
5];L.DDS.toString=s;L.DDS.__enum__=L;L.PVR=["PVR",6];L.PVR.toString=s;L.PVR.__enum__=L;L.PKM=["PKM",7];L.PKM.toString=s;L.PKM.__enum__=L;L.MP3=["MP3",8];L.MP3.toString=s;L.MP3.__enum__=L;L.M4A=["M4A",9];L.M4A.toString=s;L.M4A.__enum__=L;L.OPUS=["OPUS",10];L.OPUS.toString=s;L.OPUS.__enum__=L;L.OGG=["OGG",11];L.OGG.toString=s;L.OGG.__enum__=L;L.WAV=["WAV",12];L.WAV.toString=s;L.WAV.__enum__=L;L.Data=["Data",13];L.Data.toString=s;L.Data.__enum__=L;L.__empty_constructs__=[L.WEBP,L.JXR,L.PNG,L.JPG,L.GIF,
L.DDS,L.PVR,L.PKM,L.MP3,L.M4A,L.OPUS,L.OGG,L.WAV,L.Data];var yl=function(a,b,c,d){this.name=a;this.url=b;this.format=c;this.bytes=d};f["flambe.asset.AssetEntry"]=yl;yl.__name__=["flambe","asset","AssetEntry"];yl.prototype={__class__:yl};var Rh=function(){};f["flambe.asset.AssetPack"]=Rh;Rh.__name__=["flambe","asset","AssetPack"];Rh.__interfaces__=[cc];Rh.prototype={__class__:Rh};var Sh=function(){};f["flambe.asset.File"]=Sh;Sh.__name__=["flambe","asset","File"];Sh.__interfaces__=[qf];Sh.prototype=
{__class__:Sh};var va=function(){this._localBase=this._remoteBase=null;this._entries=[]};f["flambe.asset.Manifest"]=va;va.__name__=["flambe","asset","Manifest"];va.fromAssets=function(a,b){null==b&&(b=!0);var c=w.field(zl.getType(va).assets[0],a);if(null==c){if(b)throw ob.withFields("Missing asset pack",["name",a]);return null}var d=new va;d.set_localBase("assets");for(var e=0;e<c.length;){var h=c[e];++e;var n=h.name,g=a+"/"+n+"?v="+y.string(h.md5),f=va.inferFormat(n);f!=L.Data&&(n=ob.removeFileExtension(n));
d.add(n,g,h.bytes,f)}return d};va.fromAssetsLocalized=function(a,b,c){null==c&&(c=!0);null==b&&(b=x._platform.getLocale());if(null!=b)for(b=b.split("-");0<b.length;){var d=va.fromAssets(a+"_"+b.join("-"),!1);if(null!=d)return d;b.pop()}return va.fromAssets(a,c)};va.exists=function(a){return Object.prototype.hasOwnProperty.call(zl.getType(va).assets[0],a)};va.inferFormat=function(a){a=ob.getUrlExtension(a);if(null!=a)switch(a.toLowerCase()){case "gif":return L.GIF;case "jpg":case "jpeg":return L.JPG;
case "jxr":case "wdp":return L.JXR;case "png":return L.PNG;case "webp":return L.WEBP;case "dds":return L.DDS;case "pvr":return L.PVR;case "pkm":return L.PKM;case "m4a":return L.M4A;case "mp3":return L.MP3;case "ogg":return L.OGG;case "opus":return L.OPUS;case "wav":return L.WAV}else null;return L.Data};va.prototype={add:function(a,b,c,d){null==c&&(c=0);null==d&&(d=va.inferFormat(b));a=new yl(a,b,d,c);this._entries.push(a);return a},iterator:function(){return Q.iter(this._entries)},getFullURL:function(a){var b;
b=null!=this.get_remoteBase()&&va._supportsCrossOrigin?this.get_remoteBase():this.get_localBase();return null!=b?ob.joinPath(b,a.url):a.url},get_localBase:function(){return this._localBase},set_localBase:function(a){null!=a&&Al.that(!xa.startsWith(a,"http://")&&!xa.startsWith(a,"https://"),"localBase must be a path on the same domain, NOT starting with http(s)://",null);return this._localBase=a},get_remoteBase:function(){return this._remoteBase},set_remoteBase:function(a){null!=a&&Al.that(xa.startsWith(a,
"http://")||xa.startsWith(a,"https://"),"remoteBase must be on a remote domain, starting with http(s)://",null);return this._remoteBase=a},__class__:va,__properties__:{set_remoteBase:"set_remoteBase",get_remoteBase:"get_remoteBase",set_localBase:"set_localBase",get_localBase:"get_localBase"}};var Fa=f["flambe.display.BlendMode"]={__ename__:["flambe","display","BlendMode"],__constructs__:"Normal,Add,Multiply,Screen,Mask,Copy".split(",")};Fa.Normal=["Normal",0];Fa.Normal.toString=s;Fa.Normal.__enum__=
Fa;Fa.Add=["Add",1];Fa.Add.toString=s;Fa.Add.__enum__=Fa;Fa.Multiply=["Multiply",2];Fa.Multiply.toString=s;Fa.Multiply.__enum__=Fa;Fa.Screen=["Screen",3];Fa.Screen.toString=s;Fa.Screen.__enum__=Fa;Fa.Mask=["Mask",4];Fa.Mask.toString=s;Fa.Mask.__enum__=Fa;Fa.Copy=["Copy",5];Fa.Copy.toString=s;Fa.Copy.__enum__=Fa;Fa.__empty_constructs__=[Fa.Normal,Fa.Add,Fa.Multiply,Fa.Screen,Fa.Mask,Fa.Copy];var jb=function(a,b){null==b&&(b=0);null==a&&(a=0);this.x=a;this.y=b};f["flambe.math.Point"]=jb;jb.__name__=
["flambe","math","Point"];jb.prototype={set:function(a,b){this.x=a;this.y=b},__class__:jb};var A=function(){this._viewMatrixUpdateCount=this._parentViewMatrixUpdateCount=0;this.blendMode=this.scissor=this._viewMatrix=null;var a=this;k.call(this);this._flags|=54;this._localMatrix=new Oc;var b=function(){a._flags|=24};this.x=new J(0,b);this.y=new J(0,b);this.rotation=new J(0,b);this.scaleX=new J(1,b);this.scaleY=new J(1,b);this.anchorX=new J(0,b);this.anchorY=new J(0,b);this.alpha=new J(1)};f["flambe.display.Sprite"]=
A;A.__name__=["flambe","display","Sprite"];A.hitTest=function(a,b,c){var d=a._compMap.Sprite_5;if(null!=d){if(6!=(d._flags&6))return null;d.getLocalMatrix().inverseTransform(b,c,A._scratchPoint)&&(b=A._scratchPoint.x,c=A._scratchPoint.y);var e=d.scissor;if(null!=e&&!e.contains(b,c))return null}a=A.hitTestBackwards(a.firstChild,b,c);return null!=a?a:null!=d&&d.containsLocal(b,c)?d:null};A.getBounds=function(a,b){null==b&&(b=new id);b.set(1.79769313486231E308,1.79769313486231E308,-1.79769313486231E308,
-1.79769313486231E308);A.getBoundsImpl(a,null,b);b.width-=b.x;b.height-=b.y;return b};A.render=function(a,b){var c=a._compMap.Sprite_5;if(null!=c){var d=c.alpha._value;if(0==(c._flags&2)||0>=d)return;b.save();1>d&&b.multiplyAlpha(d);null!=c.blendMode&&b.setBlendMode(c.blendMode);var d=c.getLocalMatrix(),e=d.m02,h=d.m12;0!=(c._flags&32)&&(e=Math.round(e),h=Math.round(h));b.transform(d.m00,d.m10,d.m01,d.m11,e,h);d=c.scissor;null!=d&&b.applyScissor(d.x,d.y,d.width,d.height);c.draw(b)}d=a._compMap.Director_62;
if(null!=d){d=d.occludedScenes;for(e=0;e<d.length;)h=d[e],++e,A.render(h,b)}for(d=a.firstChild;null!=d;)e=d.next,A.render(d,b),d=e;null!=c&&b.restore()};A.hitTestBackwards=function(a,b,c){if(null!=a){var d=A.hitTestBackwards(a.next,b,c);return null!=d?d:A.hitTest(a,b,c)}return null};A.getBoundsImpl=function(a,b,c){var d=a._compMap.Sprite_5;if(null!=d){var b=null!=b?Oc.multiply(b,d.getLocalMatrix()):d.getLocalMatrix(),e=d.getNaturalWidth(),d=d.getNaturalHeight();0<e&&0<d&&(A.extendRect(b,0,0,c),A.extendRect(b,
e,0,c),A.extendRect(b,e,d,c),A.extendRect(b,0,d,c))}e=a._compMap.Director_62;if(null!=e)for(var e=e.occludedScenes,d=0,h=e.length;d<h;)A.getBoundsImpl(e[d],b,c),++d;for(a=a.firstChild;null!=a;)e=a.next,A.getBoundsImpl(a,b,c),a=e};A.extendRect=function(a,b,c,d){a=a.transform(b,c,A._scratchPoint);b=a.x;c=a.y;b<d.x&&(d.x=b);c<d.y&&(d.y=c);b>d.width&&(d.width=b);c>d.height&&(d.height=c)};A.__super__=k;A.prototype=l(k.prototype,{get_name:function(){return"Sprite_5"},getNaturalWidth:function(){return 0},
getNaturalHeight:function(){return 0},containsLocal:function(a,b){return 0<=a&&a<this.getNaturalWidth()&&0<=b&&b<this.getNaturalHeight()},getLocalMatrix:function(){0!=(this._flags&8)&&(this._flags&=-9,this._localMatrix.compose(this.x._value,this.y._value,this.scaleX._value,this.scaleY._value,3.141592653589793*this.rotation._value/180),this._localMatrix.translate(-this.anchorX._value,-this.anchorY._value));return this._localMatrix},getViewMatrix:function(){if(this.isViewMatrixDirty()){var a=this.getParentSprite();
this._viewMatrix=null!=a?Oc.multiply(a.getViewMatrix(),this.getLocalMatrix(),this._viewMatrix):this.getLocalMatrix().clone(this._viewMatrix);this._flags&=-17;null!=a&&(this._parentViewMatrixUpdateCount=a._viewMatrixUpdateCount);++this._viewMatrixUpdateCount}return this._viewMatrix},setAnchor:function(a,b){this.anchorX.set__(a);this.anchorY.set__(b);return this},centerAnchor:function(){this.anchorX.set__(this.getNaturalWidth()/2);this.anchorY.set__(this.getNaturalHeight()/2);return this},setXY:function(a,
b){this.x.set__(a);this.y.set__(b);return this},setAlpha:function(a){this.alpha.set__(a);return this},setRotation:function(a){this.rotation.set__(a);return this},setScale:function(a){this.scaleX.set__(a);this.scaleY.set__(a);return this},setScaleXY:function(a,b){this.scaleX.set__(a);this.scaleY.set__(b);return this},disablePointer:function(){this.set_pointerEnabled(!1);return this},onAdded:function(){0!=(this._flags&64)&&this.connectHover()},onRemoved:function(){null!=this._hoverConnection&&(this._hoverConnection.dispose(),
this._hoverConnection=null)},onUpdate:function(a){this.x.update(a);this.y.update(a);this.rotation.update(a);this.scaleX.update(a);this.scaleY.update(a);this.alpha.update(a);this.anchorX.update(a);this.anchorY.update(a)},draw:function(){},isViewMatrixDirty:function(){if(0!=(this._flags&16))return!0;var a=this.getParentSprite();return null==a?!1:this._parentViewMatrixUpdateCount!=a._viewMatrixUpdateCount||a.isViewMatrixDirty()},getParentSprite:function(){if(null==this.owner)return null;for(var a=this.owner.parent;null!=
a;){var b=a._compMap.Sprite_5;if(null!=b)return b;a=a.parent}return null},get_pointerDown:function(){null==this._pointerDown&&(this._pointerDown=new O);return this._pointerDown},get_pointerUp:function(){null==this._pointerUp&&(this._pointerUp=new O);return this._pointerUp},get_pointerOut:function(){null==this._pointerOut&&(this._pointerOut=new O);return this._pointerOut},connectHover:function(){var a=this;null==this._hoverConnection&&(this._hoverConnection=x._platform.getPointer().move.connect(function(b){for(var c=
b.hit;null!=c;){if(c==a)return;c=c.getParentSprite()}null!=a._pointerOut&&0!=(a._flags&64)&&a._pointerOut.emit(b);a._flags&=-65;a._hoverConnection.dispose();a._hoverConnection=null}))},set_visible:function(a){this._flags=Th.set(this._flags,2,a);return a},set_pointerEnabled:function(a){this._flags=Th.set(this._flags,4,a);return a},set_pixelSnapping:function(a){this._flags=Th.set(this._flags,32,a);return a},onPointerDown:function(a){this.onHover(a);null!=this._pointerDown&&this._pointerDown.emit(a)},
onPointerMove:function(a){this.onHover(a);null!=this._pointerMove&&this._pointerMove.emit(a)},onHover:function(a){if(0==(this._flags&64)&&(this._flags|=64,null!=this._pointerIn||null!=this._pointerOut))null!=this._pointerIn&&this._pointerIn.emit(a),this.connectHover()},onPointerUp:function(a){switch(a.source[1]){case 1:null!=this._pointerOut&&0!=(this._flags&64)&&this._pointerOut.emit(a),this._flags&=-65,null!=this._hoverConnection&&(this._hoverConnection.dispose(),this._hoverConnection=null)}null!=
this._pointerUp&&this._pointerUp.emit(a)},__class__:A,__properties__:l(k.prototype.__properties__,{set_pixelSnapping:"set_pixelSnapping",set_pointerEnabled:"set_pointerEnabled",set_visible:"set_visible",get_pointerOut:"get_pointerOut",get_pointerUp:"get_pointerUp",get_pointerDown:"get_pointerDown"})});var eb=function(a,b,c){A.call(this);this.color=a;this.width=new J(b);this.height=new J(c)};f["flambe.display.FillSprite"]=eb;eb.__name__=["flambe","display","FillSprite"];eb.__super__=A;eb.prototype=
l(A.prototype,{draw:function(a){a.fillRect(this.color,0,0,this.width._value,this.height._value)},getNaturalWidth:function(){return this.width._value},getNaturalHeight:function(){return this.height._value},setSize:function(a,b){this.width.set__(a);this.height.set__(b);return this},onUpdate:function(a){A.prototype.onUpdate.call(this,a);this.width.update(a);this.height.update(a)},__class__:eb});var Uh=function(a){this._kernings=null;this.xOffset=this.yOffset=this.xAdvance=0;this.page=null;this.x=this.y=
this.width=this.height=0;this.charCode=a};f["flambe.display.Glyph"]=Uh;Uh.__name__=["flambe","display","Glyph"];Uh.prototype={draw:function(a,b,c){0<this.width&&a.drawSubTexture(this.page,b+this.xOffset,c+this.yOffset,this.x,this.y,this.width,this.height)},getKerning:function(a){return null!=this._kernings?y["int"](this._kernings.get(a)):0},setKerning:function(a,b){null==this._kernings&&(this._kernings=new Dc);this._kernings.set(a,b)},__class__:Uh};var rf=function(a,b){this.name=b;this._pack=a;this._file=
a.getFile(b+".fnt");this.reload()};f["flambe.display.Font"]=rf;rf.__name__=["flambe","display","Font"];rf.prototype={layoutText:function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=0);null==c&&(c=0);null==b&&(b=X.Left);return new sf(this,a,b,c,d,e)},reload:function(){this._glyphs=new Dc;this._glyphs.set(rf.NEWLINE.charCode,rf.NEWLINE);for(var a=new Qf(this._file.toString()),b=new Dc,c=this.name.lastIndexOf("/"),c=0<=c?Q.substr(this.name,0,c+1):"",d=a.keywords();d.hasNext();)switch(d.next()){case "info":for(var e=
a.pairs();e.hasNext();){var h=e.next();switch(h.key){case "size":this.size=h.getInt()}}break;case "common":for(e=a.pairs();e.hasNext();)switch(h=e.next(),h.key){case "lineHeight":this.lineHeight=h.getInt()}break;case "page":for(var e=0,h=null,n=a.pairs();n.hasNext();){var g=n.next();switch(g.key){case "id":e=g.getInt();break;case "file":h=g.getString()}}h=this._pack.getTexture(c+ob.removeFileExtension(h));b.set(e,h);break;case "char":e=null;for(h=a.pairs();h.hasNext();)switch(n=h.next(),n.key){case "id":e=
new Uh(n.getInt());break;case "x":e.x=n.getInt();break;case "y":e.y=n.getInt();break;case "width":e.width=n.getInt();break;case "height":e.height=n.getInt();break;case "page":n=n.getInt();e.page=b.get(n);break;case "xoffset":e.xOffset=n.getInt();break;case "yoffset":e.yOffset=n.getInt();break;case "xadvance":e.xAdvance=n.getInt()}this._glyphs.set(e.charCode,e);break;case "kerning":e=null;n=h=0;for(g=a.pairs();g.hasNext();){var f=g.next();switch(f.key){case "first":e=this._glyphs.get(f.getInt());break;
case "second":h=f.getInt();break;case "amount":n=f.getInt()}}null!=e&&0!=n&&e.setKerning(h,n)}},__class__:rf};var X=f["flambe.display.TextAlign"]={__ename__:["flambe","display","TextAlign"],__constructs__:["Left","Center","Right"]};X.Left=["Left",0];X.Left.toString=s;X.Left.__enum__=X;X.Center=["Center",1];X.Center.toString=s;X.Center.__enum__=X;X.Right=["Right",2];X.Right.toString=s;X.Right.__enum__=X;X.__empty_constructs__=[X.Left,X.Center,X.Right];var sf=function(a,b,c,d,e,h){this.lines=0;var n=
this;this._font=a;this._glyphs=[];this._offsets=[];this._lineOffset=Math.round(a.lineHeight+h);this.bounds=new id;for(var g=[],h=b.length,f=0;f<h;){var i=f++,i=b.charCodeAt(i),i=a._glyphs.get(i);null!=i?this._glyphs.push(i):null}for(var b=-1,j=0,k=0,a=a._glyphs.get(10),h=function(){n.bounds.width=Ib.max(n.bounds.width,j);n.bounds.height+=k;g[n.lines]=j;k=j=0;++n.lines},f=0;f<this._glyphs.length;){i=this._glyphs[f];this._offsets[f]=Math.round(j);var l=0<d&&j+i.width>d;l||i==a?(l&&(0<=b?(this._glyphs[b]=
a,j=this._offsets[b],f=b):this._glyphs.splice(f,0,a)),b=-1,k=this._lineOffset,h()):(32==i.charCode&&(b=f),j+=i.xAdvance+e,k=Ib.max(k,i.height+i.yOffset),f+1<this._glyphs.length&&(j+=i.getKerning(this._glyphs[f+1].charCode)));++f}h();e=0;a=sf.getAlignOffset(c,g[0],d);b=1.79769313486231E308;h=-1.79769313486231E308;i=f=0;for(l=this._glyphs.length;i<l;){var m=this._glyphs[i];10==m.charCode&&(e+=this._lineOffset,++f,a=sf.getAlignOffset(c,g[f],d));this._offsets[i]+=a;var o=e+m.yOffset;b<o||(b=o);h=Ib.max(h,
o+m.height);++i}this.bounds.x=sf.getAlignOffset(c,this.bounds.width,d);this.bounds.y=b;this.bounds.height=h-b};f["flambe.display.TextLayout"]=sf;sf.__name__=["flambe","display","TextLayout"];sf.getAlignOffset=function(a,b,c){switch(a[1]){case 0:return 0;case 2:return c-b;case 1:return Math.round((c-b)/2)}};sf.prototype={draw:function(a){for(var b=0,c=0,d=this._glyphs.length;c<d;){var e=this._glyphs[c];10==e.charCode?b+=this._lineOffset:e.draw(a,this._offsets[c],b);++c}},__class__:sf};var Qf=function(a){this._configText=
a;this._keywordPattern=new hd("([A-Za-z]+)(.*)","");this._pairPattern=new hd('([A-Za-z]+)=("[^"]*"|[^\\s]+)',"")};f["flambe.display._Font.ConfigParser"]=Qf;Qf.__name__=["flambe","display","_Font","ConfigParser"];Qf.advance=function(a,b){var c=b.matchedPos();return Q.substr(a,c.pos+c.len,a.length)};Qf.prototype={keywords:function(){var a=this,b=this._configText;return{next:function(){b=Qf.advance(b,a._keywordPattern);a._pairText=a._keywordPattern.matched(2);return a._keywordPattern.matched(1)},hasNext:function(){return a._keywordPattern.match(b)}}},
pairs:function(){var a=this,b=this._pairText;return{next:function(){b=Qf.advance(b,a._pairPattern);return new Bl(a._pairPattern.matched(1),a._pairPattern.matched(2))},hasNext:function(){return a._pairPattern.match(b)}}},__class__:Qf};var Bl=function(a,b){this.key=a;this._value=b};f["flambe.display._Font.ConfigPair"]=Bl;Bl.__name__=["flambe","display","_Font","ConfigPair"];Bl.prototype={getInt:function(){return y.parseInt(this._value)},getString:function(){return 34!=this._value.charCodeAt(0)?null:
Q.substr(this._value,1,this._value.length-2)},__class__:Bl};var Cl=function(){};f["flambe.display.Graphics"]=Cl;Cl.__name__=["flambe","display","Graphics"];Cl.prototype={__class__:Cl};var ta=function(a){A.call(this);this.texture=a};f["flambe.display.ImageSprite"]=ta;ta.__name__=["flambe","display","ImageSprite"];ta.__super__=A;ta.prototype=l(A.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():
0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:ta});var jd=f["flambe.display.Orientation"]={__ename__:["flambe","display","Orientation"],__constructs__:["Portrait","Landscape"]};jd.Portrait=["Portrait",0];jd.Portrait.toString=s;jd.Portrait.__enum__=jd;jd.Landscape=["Landscape",1];jd.Landscape.toString=s;jd.Landscape.__enum__=jd;jd.__empty_constructs__=[jd.Portrait,jd.Landscape];var Vh=function(){};f["flambe.display.Texture"]=Vh;Vh.__name__=["flambe",
"display","Texture"];Vh.__interfaces__=[qf];Vh.prototype={__class__:Vh};var Rm=function(){};f["flambe.display.SubTexture"]=Rm;Rm.__name__=["flambe","display","SubTexture"];Rm.__interfaces__=[Vh];var Pc=function(a,b){null==b&&(b="");this._layout=null;var c=this;A.call(this);this._font=a;this._text=b;this._align=X.Left;this._flags|=128;var d=function(){c._flags|=128};this.wrapWidth=new J(0,d);this.letterSpacing=new J(0,d);this.lineSpacing=new J(0,d)};f["flambe.display.TextSprite"]=Pc;Pc.__name__=["flambe",
"display","TextSprite"];Pc.__super__=A;Pc.prototype=l(A.prototype,{draw:function(a){this.updateLayout();this._layout.draw(a)},getNaturalWidth:function(){this.updateLayout();return 0<this.wrapWidth._value?this.wrapWidth._value:this._layout.bounds.width},getNaturalHeight:function(){this.updateLayout();var a=this._layout.lines*(this._font.lineHeight+this.lineSpacing._value),b=this._layout.bounds.height;return a>b?a:b},containsLocal:function(a,b){this.updateLayout();return this._layout.bounds.contains(a,
b)},setWrapWidth:function(a){this.wrapWidth.set__(a);return this},setAlign:function(a){this.set_align(a);return this},set_text:function(a){a!=this._text&&(this._text=a,this._flags|=128);return a},set_font:function(a){a!=this._font&&(this._font=a,this._flags|=128);return a},set_align:function(a){a!=this._align&&(this._align=a,this._flags|=128);return a},updateLayout:function(){0!=(this._flags&128)&&(this._flags&=-129,this._layout=this._font.layoutText(this._text,this._align,this.wrapWidth._value,this.letterSpacing._value,
this.lineSpacing._value))},onUpdate:function(a){A.prototype.onUpdate.call(this,a);this.wrapWidth.update(a);this.letterSpacing.update(a);this.lineSpacing.update(a)},__class__:Pc,__properties__:l(A.prototype.__properties__,{set_align:"set_align",set_font:"set_font",set_text:"set_text"})});var i=f["flambe.input.Key"]={__ename__:["flambe","input","Key"],__constructs__:"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,Number0,Number1,Number2,Number3,Number4,Number5,Number6,Number7,Number8,Number9,Numpad0,Numpad1,Numpad2,Numpad3,Numpad4,Numpad5,Numpad6,Numpad7,Numpad8,Numpad9,NumpadAdd,NumpadDecimal,NumpadDivide,NumpadEnter,NumpadMultiply,NumpadSubtract,F1,F2,F3,F4,F5,F6,F7,F8,F9,F10,F11,F12,F13,F14,F15,Left,Up,Right,Down,Alt,Backquote,Backslash,Backspace,CapsLock,Comma,Command,Control,Delete,End,Enter,Equals,Escape,Home,Insert,LeftBracket,Minus,PageDown,PageUp,Period,Quote,RightBracket,Semicolon,Shift,Slash,Space,Tab,Menu,Search,Unknown".split(",")};
i.A=["A",0];i.A.toString=s;i.A.__enum__=i;i.B=["B",1];i.B.toString=s;i.B.__enum__=i;i.C=["C",2];i.C.toString=s;i.C.__enum__=i;i.D=["D",3];i.D.toString=s;i.D.__enum__=i;i.E=["E",4];i.E.toString=s;i.E.__enum__=i;i.F=["F",5];i.F.toString=s;i.F.__enum__=i;i.G=["G",6];i.G.toString=s;i.G.__enum__=i;i.H=["H",7];i.H.toString=s;i.H.__enum__=i;i.I=["I",8];i.I.toString=s;i.I.__enum__=i;i.J=["J",9];i.J.toString=s;i.J.__enum__=i;i.K=["K",10];i.K.toString=s;i.K.__enum__=i;i.L=["L",11];i.L.toString=s;i.L.__enum__=
i;i.M=["M",12];i.M.toString=s;i.M.__enum__=i;i.N=["N",13];i.N.toString=s;i.N.__enum__=i;i.O=["O",14];i.O.toString=s;i.O.__enum__=i;i.P=["P",15];i.P.toString=s;i.P.__enum__=i;i.Q=["Q",16];i.Q.toString=s;i.Q.__enum__=i;i.R=["R",17];i.R.toString=s;i.R.__enum__=i;i.S=["S",18];i.S.toString=s;i.S.__enum__=i;i.T=["T",19];i.T.toString=s;i.T.__enum__=i;i.U=["U",20];i.U.toString=s;i.U.__enum__=i;i.V=["V",21];i.V.toString=s;i.V.__enum__=i;i.W=["W",22];i.W.toString=s;i.W.__enum__=i;i.X=["X",23];i.X.toString=
s;i.X.__enum__=i;i.Y=["Y",24];i.Y.toString=s;i.Y.__enum__=i;i.Z=["Z",25];i.Z.toString=s;i.Z.__enum__=i;i.Number0=["Number0",26];i.Number0.toString=s;i.Number0.__enum__=i;i.Number1=["Number1",27];i.Number1.toString=s;i.Number1.__enum__=i;i.Number2=["Number2",28];i.Number2.toString=s;i.Number2.__enum__=i;i.Number3=["Number3",29];i.Number3.toString=s;i.Number3.__enum__=i;i.Number4=["Number4",30];i.Number4.toString=s;i.Number4.__enum__=i;i.Number5=["Number5",31];i.Number5.toString=s;i.Number5.__enum__=
i;i.Number6=["Number6",32];i.Number6.toString=s;i.Number6.__enum__=i;i.Number7=["Number7",33];i.Number7.toString=s;i.Number7.__enum__=i;i.Number8=["Number8",34];i.Number8.toString=s;i.Number8.__enum__=i;i.Number9=["Number9",35];i.Number9.toString=s;i.Number9.__enum__=i;i.Numpad0=["Numpad0",36];i.Numpad0.toString=s;i.Numpad0.__enum__=i;i.Numpad1=["Numpad1",37];i.Numpad1.toString=s;i.Numpad1.__enum__=i;i.Numpad2=["Numpad2",38];i.Numpad2.toString=s;i.Numpad2.__enum__=i;i.Numpad3=["Numpad3",39];i.Numpad3.toString=
s;i.Numpad3.__enum__=i;i.Numpad4=["Numpad4",40];i.Numpad4.toString=s;i.Numpad4.__enum__=i;i.Numpad5=["Numpad5",41];i.Numpad5.toString=s;i.Numpad5.__enum__=i;i.Numpad6=["Numpad6",42];i.Numpad6.toString=s;i.Numpad6.__enum__=i;i.Numpad7=["Numpad7",43];i.Numpad7.toString=s;i.Numpad7.__enum__=i;i.Numpad8=["Numpad8",44];i.Numpad8.toString=s;i.Numpad8.__enum__=i;i.Numpad9=["Numpad9",45];i.Numpad9.toString=s;i.Numpad9.__enum__=i;i.NumpadAdd=["NumpadAdd",46];i.NumpadAdd.toString=s;i.NumpadAdd.__enum__=i;i.NumpadDecimal=
["NumpadDecimal",47];i.NumpadDecimal.toString=s;i.NumpadDecimal.__enum__=i;i.NumpadDivide=["NumpadDivide",48];i.NumpadDivide.toString=s;i.NumpadDivide.__enum__=i;i.NumpadEnter=["NumpadEnter",49];i.NumpadEnter.toString=s;i.NumpadEnter.__enum__=i;i.NumpadMultiply=["NumpadMultiply",50];i.NumpadMultiply.toString=s;i.NumpadMultiply.__enum__=i;i.NumpadSubtract=["NumpadSubtract",51];i.NumpadSubtract.toString=s;i.NumpadSubtract.__enum__=i;i.F1=["F1",52];i.F1.toString=s;i.F1.__enum__=i;i.F2=["F2",53];i.F2.toString=
s;i.F2.__enum__=i;i.F3=["F3",54];i.F3.toString=s;i.F3.__enum__=i;i.F4=["F4",55];i.F4.toString=s;i.F4.__enum__=i;i.F5=["F5",56];i.F5.toString=s;i.F5.__enum__=i;i.F6=["F6",57];i.F6.toString=s;i.F6.__enum__=i;i.F7=["F7",58];i.F7.toString=s;i.F7.__enum__=i;i.F8=["F8",59];i.F8.toString=s;i.F8.__enum__=i;i.F9=["F9",60];i.F9.toString=s;i.F9.__enum__=i;i.F10=["F10",61];i.F10.toString=s;i.F10.__enum__=i;i.F11=["F11",62];i.F11.toString=s;i.F11.__enum__=i;i.F12=["F12",63];i.F12.toString=s;i.F12.__enum__=i;i.F13=
["F13",64];i.F13.toString=s;i.F13.__enum__=i;i.F14=["F14",65];i.F14.toString=s;i.F14.__enum__=i;i.F15=["F15",66];i.F15.toString=s;i.F15.__enum__=i;i.Left=["Left",67];i.Left.toString=s;i.Left.__enum__=i;i.Up=["Up",68];i.Up.toString=s;i.Up.__enum__=i;i.Right=["Right",69];i.Right.toString=s;i.Right.__enum__=i;i.Down=["Down",70];i.Down.toString=s;i.Down.__enum__=i;i.Alt=["Alt",71];i.Alt.toString=s;i.Alt.__enum__=i;i.Backquote=["Backquote",72];i.Backquote.toString=s;i.Backquote.__enum__=i;i.Backslash=
["Backslash",73];i.Backslash.toString=s;i.Backslash.__enum__=i;i.Backspace=["Backspace",74];i.Backspace.toString=s;i.Backspace.__enum__=i;i.CapsLock=["CapsLock",75];i.CapsLock.toString=s;i.CapsLock.__enum__=i;i.Comma=["Comma",76];i.Comma.toString=s;i.Comma.__enum__=i;i.Command=["Command",77];i.Command.toString=s;i.Command.__enum__=i;i.Control=["Control",78];i.Control.toString=s;i.Control.__enum__=i;i.Delete=["Delete",79];i.Delete.toString=s;i.Delete.__enum__=i;i.End=["End",80];i.End.toString=s;i.End.__enum__=
i;i.Enter=["Enter",81];i.Enter.toString=s;i.Enter.__enum__=i;i.Equals=["Equals",82];i.Equals.toString=s;i.Equals.__enum__=i;i.Escape=["Escape",83];i.Escape.toString=s;i.Escape.__enum__=i;i.Home=["Home",84];i.Home.toString=s;i.Home.__enum__=i;i.Insert=["Insert",85];i.Insert.toString=s;i.Insert.__enum__=i;i.LeftBracket=["LeftBracket",86];i.LeftBracket.toString=s;i.LeftBracket.__enum__=i;i.Minus=["Minus",87];i.Minus.toString=s;i.Minus.__enum__=i;i.PageDown=["PageDown",88];i.PageDown.toString=s;i.PageDown.__enum__=
i;i.PageUp=["PageUp",89];i.PageUp.toString=s;i.PageUp.__enum__=i;i.Period=["Period",90];i.Period.toString=s;i.Period.__enum__=i;i.Quote=["Quote",91];i.Quote.toString=s;i.Quote.__enum__=i;i.RightBracket=["RightBracket",92];i.RightBracket.toString=s;i.RightBracket.__enum__=i;i.Semicolon=["Semicolon",93];i.Semicolon.toString=s;i.Semicolon.__enum__=i;i.Shift=["Shift",94];i.Shift.toString=s;i.Shift.__enum__=i;i.Slash=["Slash",95];i.Slash.toString=s;i.Slash.__enum__=i;i.Space=["Space",96];i.Space.toString=
s;i.Space.__enum__=i;i.Tab=["Tab",97];i.Tab.toString=s;i.Tab.__enum__=i;i.Menu=["Menu",98];i.Menu.toString=s;i.Menu.__enum__=i;i.Search=["Search",99];i.Search.toString=s;i.Search.__enum__=i;i.Unknown=function(a){a=["Unknown",100,a];a.__enum__=i;a.toString=s;return a};i.__empty_constructs__=[i.A,i.B,i.C,i.D,i.E,i.F,i.G,i.H,i.I,i.J,i.K,i.L,i.M,i.N,i.O,i.P,i.Q,i.R,i.S,i.T,i.U,i.V,i.W,i.X,i.Y,i.Z,i.Number0,i.Number1,i.Number2,i.Number3,i.Number4,i.Number5,i.Number6,i.Number7,i.Number8,i.Number9,i.Numpad0,
i.Numpad1,i.Numpad2,i.Numpad3,i.Numpad4,i.Numpad5,i.Numpad6,i.Numpad7,i.Numpad8,i.Numpad9,i.NumpadAdd,i.NumpadDecimal,i.NumpadDivide,i.NumpadEnter,i.NumpadMultiply,i.NumpadSubtract,i.F1,i.F2,i.F3,i.F4,i.F5,i.F6,i.F7,i.F8,i.F9,i.F10,i.F11,i.F12,i.F13,i.F14,i.F15,i.Left,i.Up,i.Right,i.Down,i.Alt,i.Backquote,i.Backslash,i.Backspace,i.CapsLock,i.Comma,i.Command,i.Control,i.Delete,i.End,i.Enter,i.Equals,i.Escape,i.Home,i.Insert,i.LeftBracket,i.Minus,i.PageDown,i.PageUp,i.Period,i.Quote,i.RightBracket,
i.Semicolon,i.Shift,i.Slash,i.Space,i.Tab,i.Menu,i.Search];var Dl=function(){this.init(0,null)};f["flambe.input.KeyboardEvent"]=Dl;Dl.__name__=["flambe","input","KeyboardEvent"];Dl.prototype={init:function(a,b){this.id=a;this.key=b},__class__:Dl};var bb=f["flambe.input.MouseButton"]={__ename__:["flambe","input","MouseButton"],__constructs__:["Left","Middle","Right","Unknown"]};bb.Left=["Left",0];bb.Left.toString=s;bb.Left.__enum__=bb;bb.Middle=["Middle",1];bb.Middle.toString=s;bb.Middle.__enum__=
bb;bb.Right=["Right",2];bb.Right.toString=s;bb.Right.__enum__=bb;bb.Unknown=function(a){a=["Unknown",3,a];a.__enum__=bb;a.toString=s;return a};bb.__empty_constructs__=[bb.Left,bb.Middle,bb.Right];var Nb=f["flambe.input.MouseCursor"]={__ename__:["flambe","input","MouseCursor"],__constructs__:["Default","Button","None"]};Nb.Default=["Default",0];Nb.Default.toString=s;Nb.Default.__enum__=Nb;Nb.Button=["Button",1];Nb.Button.toString=s;Nb.Button.__enum__=Nb;Nb.None=["None",2];Nb.None.toString=s;Nb.None.__enum__=
Nb;Nb.__empty_constructs__=[Nb.Default,Nb.Button,Nb.None];var El=function(){this.init(0,0,0,null)};f["flambe.input.MouseEvent"]=El;El.__name__=["flambe","input","MouseEvent"];El.prototype={init:function(a,b,c,d){this.id=a;this.viewX=b;this.viewY=c;this.button=d},__class__:El};var zg=f["flambe.input.EventSource"]={__ename__:["flambe","input","EventSource"],__constructs__:["Mouse","Touch"]};zg.Mouse=function(a){a=["Mouse",0,a];a.__enum__=zg;a.toString=s;return a};zg.Touch=function(a){a=["Touch",1,a];
a.__enum__=zg;a.toString=s;return a};zg.__empty_constructs__=[];var Fl=function(){this.init(0,0,0,null,null)};f["flambe.input.PointerEvent"]=Fl;Fl.__name__=["flambe","input","PointerEvent"];Fl.prototype={init:function(a,b,c,d,e){this.id=a;this.viewX=b;this.viewY=c;this.hit=d;this.source=e;this._stopped=!1},__class__:Fl};var Gl=function(a){this.id=a;this._source=zg.Touch(this)};f["flambe.input.TouchPoint"]=Gl;Gl.__name__=["flambe","input","TouchPoint"];Gl.prototype={init:function(a,b){this.viewX=a;
this.viewY=b},__class__:Gl};var Ib=function(){};f["flambe.math.FMath"]=Ib;Ib.__name__=["flambe","math","FMath"];Ib.toRadians=function(a){return 3.141592653589793*a/180};Ib.toDegrees=function(a){return 180*a/3.141592653589793};Ib.max=function(a,b){return a>b?a:b};Ib.min=function(a,b){return a<b?a:b};Ib.clamp=function(a,b,c){return a<b?b:a>c?c:a};var Oc=function(){this.identity()};f["flambe.math.Matrix"]=Oc;Oc.__name__=["flambe","math","Matrix"];Oc.multiply=function(a,b,c){null==c&&(c=new Oc);var d=
a.m00*b.m00+a.m01*b.m10,e=a.m00*b.m01+a.m01*b.m11,h=a.m00*b.m02+a.m01*b.m12+a.m02;c.m00=d;c.m01=e;c.m02=h;d=a.m10*b.m00+a.m11*b.m10;e=a.m10*b.m01+a.m11*b.m11;h=a.m10*b.m02+a.m11*b.m12+a.m12;c.m10=d;c.m11=e;c.m12=h;return c};Oc.prototype={set:function(a,b,c,d,e,h){this.m00=a;this.m01=c;this.m02=e;this.m10=b;this.m11=d;this.m12=h},identity:function(){this.set(1,0,0,1,0,0)},compose:function(a,b,c,d,e){var h=Math.sin(e),e=Math.cos(e);this.set(e*c,h*c,-h*d,e*d,a,b)},translate:function(a,b){this.m02+=this.m00*
a+this.m01*b;this.m12+=this.m11*b+this.m10*a},invert:function(){var a=this.determinant();if(0==a)return!1;this.set(this.m11/a,-this.m01/a,-this.m10/a,this.m00/a,(this.m01*this.m12-this.m11*this.m02)/a,(this.m10*this.m02-this.m00*this.m12)/a);return!0},transform:function(a,b,c){null==c&&(c=new jb);c.x=a*this.m00+b*this.m01+this.m02;c.y=a*this.m10+b*this.m11+this.m12;return c},transformArray:function(a,b,c){for(var d=0;d<b;){var e=a[d],h=a[d+1];c[d++]=e*this.m00+h*this.m01+this.m02;c[d++]=e*this.m10+
h*this.m11+this.m12}},determinant:function(){return this.m00*this.m11-this.m01*this.m10},inverseTransform:function(a,b,c){var d=this.determinant();if(0==d)return!1;a-=this.m02;b-=this.m12;c.x=(a*this.m11-b*this.m01)/d;c.y=(b*this.m00-a*this.m10)/d;return!0},clone:function(a){null==a&&(a=new Oc);a.set(this.m00,this.m10,this.m01,this.m11,this.m02,this.m12);return a},__class__:Oc};var id=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.set(a,b,c,d)};f["flambe.math.Rectangle"]=
id;id.__name__=["flambe","math","Rectangle"];id.prototype={set:function(a,b,c,d){this.x=a;this.y=b;this.width=c;this.height=d},contains:function(a,b){a-=this.x;if(0<=this.width){if(0>a||a>this.width)return!1}else if(0<a||a<this.width)return!1;b-=this.y;if(0<=this.height){if(0>b||b>this.height)return!1}else if(0<b||b<this.height)return!1;return!0},clone:function(a){null==a&&(a=new id);a.set(this.x,this.y,this.width,this.height);return a},equals:function(a){return this.x==a.x&&this.y==a.y&&this.width==
a.width&&this.height==a.height},__class__:id};var dc=function(){this._disposed=!1};f["flambe.platform.BasicAsset"]=dc;dc.__name__=["flambe","platform","BasicAsset"];dc.__interfaces__=[qf];dc.prototype={dispose:function(){this._disposed||(this._disposed=!0,this.onDisposed())},onDisposed:function(){null},__class__:dc};var uf=function(a,b){var c=this;this.manifest=b;this._platform=a;this.promise=new tf;this._bytesLoaded=new N;this._pack=new Wh(b,this);var d=of.array(b);if(0==d.length)this.handleSuccess();
else{for(var e=new N,h=0;h<d.length;){var n=d[h];++h;var g=e.get(n.name);null==g&&(g=[],e.set(n.name,g));g.push(n)}this._assetsRemaining=of.count(e);for(d=e.iterator();d.hasNext();)e=[d.next()],this.pickBestEntry(e[0],function(a){return function(d){if(null!=d){var e=b.getFullURL(d);try{c.loadEntry(e,d)}catch(h){c.handleError(d,"Unexpected error: "+y.string(h))}e=c.promise;e.set_total(e._total+d.bytes)}else d=a[0][0],uf.isAudio(d.format)?c.handleLoad(d,Qc.getInstance()):c.handleError(d,"Could not find a supported format to load")}}(e))}};
f["flambe.platform.BasicAssetPackLoader"]=uf;uf.__name__=["flambe","platform","BasicAssetPackLoader"];uf.isAudio=function(a){switch(a[1]){case 8:case 9:case 10:case 11:case 12:return!0;default:return!1}};uf.prototype={onDisposed:function(){},pickBestEntry:function(a,b){this.getAssetFormats(function(c){for(var d=0;d<c.length;){var e=c[d];++d;for(var h=0;h<a.length;){var n=a[h];++h;if(n.format==e){b(n);return}}}b(null)})},loadEntry:function(){null},getAssetFormats:function(){null},handleLoad:function(a,
b){if(!this._pack.disposed){this.handleProgress(a,a.bytes);var c;switch(a.format[1]){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c=this._pack.textures;break;case 8:case 9:case 10:case 11:case 12:c=this._pack.sounds;break;case 13:c=this._pack.files}c.set(a.name,b);this._assetsRemaining-=1;0==this._assetsRemaining&&this.handleSuccess()}},handleProgress:function(a,b){this._bytesLoaded.set(a.name,b);for(var c=0,d=this._bytesLoaded.iterator();d.hasNext();)var e=d.next(),c=c+e;this.promise.set_progress(c)},
handleSuccess:function(){this.promise.set_result(this._pack)},handleError:function(a,b){this.promise.error.emit(ob.withFields(b,["url",a.url]))},handleTextureError:function(a){this.handleError(a,"Failed to create texture. Is the GPU context unavailable?")},__class__:uf};var Wh=function(a,b){this.disposed=!1;this._manifest=a;this.loader=b;this.textures=new N;this.sounds=new N;this.files=new N};f["flambe.platform._BasicAssetPackLoader.BasicAssetPack"]=Wh;Wh.__name__=["flambe","platform","_BasicAssetPackLoader",
"BasicAssetPack"];Wh.__interfaces__=[Rh];Wh.prototype={getTexture:function(a,b){null==b&&(b=!0);var c=this.textures.get(a);if(null==c&&b)throw ob.withFields("Missing texture",["name",a]);return c},getSound:function(a,b){null==b&&(b=!0);var c=this.sounds.get(a);if(null==c&&b)throw ob.withFields("Missing sound",["name",a]);return c},getFile:function(a,b){null==b&&(b=!0);var c=this.files.get(a);if(null==c&&b)throw ob.withFields("Missing file",["name",a]);return c},dispose:function(){if(!this.disposed){this.disposed=
!0;for(var a=this.textures.iterator();a.hasNext();)a.next().dispose();this.textures=null;for(a=this.sounds.iterator();a.hasNext();)a.next().dispose();this.sounds=null;for(a=this.files.iterator();a.hasNext();)a.next().dispose();this.files=null;this.loader.onDisposed()}},get_manifest:function(){return this._manifest},__class__:Wh,__properties__:{get_manifest:"get_manifest"}};var Ag=function(a){this._disposed=!1;this._content=a};f["flambe.platform.BasicFile"]=Ag;Ag.__name__=["flambe","platform","BasicFile"];
Ag.__interfaces__=[Sh];Ag.__super__=dc;Ag.prototype=l(dc.prototype,{toString:function(){return this._content},onDisposed:function(){this._content=null},__class__:Ag});var Hl=function(){};f["flambe.subsystem.KeyboardSystem"]=Hl;Hl.__name__=["flambe","subsystem","KeyboardSystem"];Hl.prototype={__class__:Hl};var xd=function(){this.down=new O;this.up=new O;this.backButton=new ka;this._keyStates=new Dc};f["flambe.platform.BasicKeyboard"]=xd;xd.__name__=["flambe","platform","BasicKeyboard"];xd.__interfaces__=
[Hl];xd.prototype={isDown:function(a){return this.isCodeDown(Bg.toKeyCode(a))},isCodeDown:function(a){return this._keyStates.exists(a)},submitDown:function(a){if(16777238==a)return null!=this.backButton._head?(this.backButton.emit(),!0):!1;this._keyStates.exists(a)||(this._keyStates.set(a,!0),xd._sharedEvent.init(xd._sharedEvent.id+1,Bg.toKey(a)),this.down.emit(xd._sharedEvent));return!0},submitUp:function(a){this._keyStates.exists(a)&&(this._keyStates.remove(a),xd._sharedEvent.init(xd._sharedEvent.id+
1,Bg.toKey(a)),this.up.emit(xd._sharedEvent))},__class__:xd};var Il=function(){};f["flambe.subsystem.MouseSystem"]=Il;Il.__name__=["flambe","subsystem","MouseSystem"];Il.prototype={__class__:Il};var oc=function(a){this._pointer=a;this._source=zg.Mouse(oc._sharedEvent);this.down=new O;this.move=new O;this.up=new O;this.scroll=new O;this._y=this._x=0;this._cursor=Nb.Default;this._buttonStates=new Dc};f["flambe.platform.BasicMouse"]=oc;oc.__name__=["flambe","platform","BasicMouse"];oc.__interfaces__=
[Il];oc.prototype={get_x:function(){return this._x},get_y:function(){return this._y},set_cursor:function(a){return this._cursor=a},submitDown:function(a,b,c){this._buttonStates.exists(c)||(this._buttonStates.set(c,!0),this.prepare(a,b,Jl.toButton(c)),this._pointer.submitDown(a,b,this._source),this.down.emit(oc._sharedEvent))},submitMove:function(a,b){this.prepare(a,b,null);this._pointer.submitMove(a,b,this._source);this.move.emit(oc._sharedEvent)},submitUp:function(a,b,c){this._buttonStates.exists(c)&&
(this._buttonStates.remove(c),this.prepare(a,b,Jl.toButton(c)),this._pointer.submitUp(a,b,this._source),this.up.emit(oc._sharedEvent))},submitScroll:function(a,b,c){this._x=a;this._y=b;if(null==this.scroll._head)return!1;this.scroll.emit(c);return!0},prepare:function(a,b,c){this._x=a;this._y=b;oc._sharedEvent.init(oc._sharedEvent.id+1,a,b,c)},__class__:oc,__properties__:{set_cursor:"set_cursor",get_y:"get_y",get_x:"get_x"}};var Kl=function(){};f["flambe.subsystem.PointerSystem"]=Kl;Kl.__name__=["flambe",
"subsystem","PointerSystem"];Kl.prototype={__class__:Kl};var nc=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.down=new O;this.move=new O;this.up=new O;this._x=a;this._y=b;this._isDown=c};f["flambe.platform.BasicPointer"]=nc;nc.__name__=["flambe","platform","BasicPointer"];nc.__interfaces__=[Kl];nc.prototype={get_x:function(){return this._x},get_y:function(){return this._y},submitDown:function(a,b,c){if(!this._isDown){this.submitMove(a,b,c);this._isDown=!0;var d=[],e=A.hitTest(x.root,
a,b);if(null!=e){var h=e.owner;do{var n=h._compMap.Sprite_5;null!=n&&d.push(n);h=h.parent}while(null!=h)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerDown(nc._sharedEvent),nc._sharedEvent._stopped)return;this.down.emit(nc._sharedEvent)}},submitMove:function(a,b,c){if(!(a==this._x&&b==this._y)){var d=[],e=A.hitTest(x.root,a,b);if(null!=e){var h=e.owner;do{var n=h._compMap.Sprite_5;null!=n&&d.push(n);h=h.parent}while(null!=h)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],
++a,b.onPointerMove(nc._sharedEvent),nc._sharedEvent._stopped)return;this.move.emit(nc._sharedEvent)}},submitUp:function(a,b,c){if(this._isDown){this.submitMove(a,b,c);this._isDown=!1;var d=[],e=A.hitTest(x.root,a,b);if(null!=e){var h=e.owner;do{var n=h._compMap.Sprite_5;null!=n&&d.push(n);h=h.parent}while(null!=h)}this.prepare(a,b,e,c);for(a=0;a<d.length;)if(b=d[a],++a,b.onPointerUp(nc._sharedEvent),nc._sharedEvent._stopped)return;this.up.emit(nc._sharedEvent)}},prepare:function(a,b,c,d){this._x=
a;this._y=b;nc._sharedEvent.init(nc._sharedEvent.id+1,a,b,c,d)},__class__:nc,__properties__:{get_y:"get_y",get_x:"get_x"}};var Ec=function(a,b,c){this._x=this._y=0;this._parent=null;this.rootX=this.rootY=0;this._disposed=!1;this.root=a;this._width=b;this._height=c};f["flambe.platform.BasicTexture"]=Ec;Ec.__name__=["flambe","platform","BasicTexture"];Ec.__interfaces__=[Rm];Ec.__super__=dc;Ec.prototype=l(dc.prototype,{subTexture:function(a,b,c,d){c=this.root.createTexture(c,d);c._parent=this;c._x=a;
c._y=b;c.rootX=this.rootX+a;c.rootY=this.rootY+b;return c},get_graphics:function(){return this.root.getGraphics()},onDisposed:function(){null==this._parent&&this.root.dispose()},get_width:function(){return this._width},get_height:function(){return this._height},__class__:Ec,__properties__:{get_height:"get_height",get_width:"get_width",get_graphics:"get_graphics"}});var Xh=function(){};f["flambe.subsystem.TouchSystem"]=Xh;Xh.__name__=["flambe","subsystem","TouchSystem"];Xh.prototype={__class__:Xh};
var Kh=function(a,b){null==b&&(b=4);this._pointer=a;this._maxPoints=b;this._pointMap=new Dc;this._points=[];this.down=new O;this.move=new O;this.up=new O};f["flambe.platform.BasicTouch"]=Kh;Kh.__name__=["flambe","platform","BasicTouch"];Kh.__interfaces__=[Xh];Kh.prototype={get_supported:function(){return!0},submitDown:function(a,b,c){if(!this._pointMap.exists(a)){var d=new Gl(a);d.init(b,c);this._pointMap.set(a,d);this._points.push(d);null==this._pointerTouch&&(this._pointerTouch=d,this._pointer.submitDown(b,
c,d._source));this.down.emit(d)}},submitMove:function(a,b,c){a=this._pointMap.get(a);null!=a&&(a.init(b,c),this._pointerTouch==a&&this._pointer.submitMove(b,c,a._source),this.move.emit(a))},submitUp:function(a,b,c){var d=this._pointMap.get(a);null!=d&&(d.init(b,c),this._pointMap.remove(a),Q.remove(this._points,d),this._pointerTouch==d&&(this._pointerTouch=null,this._pointer.submitUp(b,c,d._source)),this.up.emit(d))},__class__:Kh,__properties__:{get_supported:"get_supported"}};var Rf=function(){};
f["flambe.sound.Sound"]=Rf;Rf.__name__=["flambe","sound","Sound"];Rf.__interfaces__=[qf];Rf.prototype={__class__:Rf};var Qc=function(){this._disposed=!1;this._playback=new Yh(this)};f["flambe.platform.DummySound"]=Qc;Qc.__name__=["flambe","platform","DummySound"];Qc.__interfaces__=[Rf];Qc.getInstance=function(){null==Qc._instance&&(Qc._instance=new Qc);return Qc._instance};Qc.__super__=dc;Qc.prototype=l(dc.prototype,{play:function(){return this._playback},loop:function(){return this._playback},get_duration:function(){return 0},
onDisposed:function(){},__class__:Qc,__properties__:{get_duration:"get_duration"}});var Sf=function(){};f["flambe.sound.Playback"]=Sf;Sf.__name__=["flambe","sound","Playback"];Sf.__interfaces__=[cc];Sf.prototype={__class__:Sf};var Yh=function(a){this._sound=a;this.volume=new J(0);this._complete=new yb(!0)};f["flambe.platform.DummyPlayback"]=Yh;Yh.__name__=["flambe","platform","DummyPlayback"];Yh.__interfaces__=[Sf];Yh.prototype={set_paused:function(){return!0},get_complete:function(){return this._complete},
dispose:function(){},__class__:Yh,__properties__:{get_complete:"get_complete",set_paused:"set_paused"}};var Zh=function(){};f["flambe.subsystem.StorageSystem"]=Zh;Zh.__name__=["flambe","subsystem","StorageSystem"];Zh.prototype={__class__:Zh};var Oh=function(){this.clear()};f["flambe.platform.DummyStorage"]=Oh;Oh.__name__=["flambe","platform","DummyStorage"];Oh.__interfaces__=[Zh];Oh.prototype={set:function(a,b){this._hash.set(a,b);return!0},get:function(a,b){return this._hash.exists(a)?this._hash.get(a):
b},clear:function(){this._hash=new N},__class__:Oh};var Lh=function(){this.down=new O;this.move=new O;this.up=new O};f["flambe.platform.DummyTouch"]=Lh;Lh.__name__=["flambe","platform","DummyTouch"];Lh.__interfaces__=[Xh];Lh.prototype={get_supported:function(){return!1},__class__:Lh,__properties__:{get_supported:"get_supported"}};var Cg=function(){this._entries=[]};f["flambe.platform.EventGroup"]=Cg;Cg.__name__=["flambe","platform","EventGroup"];Cg.__interfaces__=[cc];Cg.prototype={addListener:function(a,
b,c){a.addEventListener(b,c,!1);this._entries.push(new Ll(a,b,c))},addDisposingListener:function(a,b,c){var d=this;this.addListener(a,b,function(a){d.dispose();c(a)})},dispose:function(){for(var a=0,b=this._entries;a<b.length;){var c=b[a];++a;c.dispatcher.removeEventListener(c.type,c.listener,!1)}this._entries=[]},__class__:Cg};var Ll=function(a,b,c){this.dispatcher=a;this.type=b;this.listener=c};f["flambe.platform._EventGroup.Entry"]=Ll;Ll.__name__=["flambe","platform","_EventGroup","Entry"];Ll.prototype=
{__class__:Ll};var Dg=function(){};f["flambe.platform.InternalGraphics"]=Dg;Dg.__name__=["flambe","platform","InternalGraphics"];Dg.__interfaces__=[Cl];Dg.prototype={__class__:Dg};var Ml=function(){};f["flambe.subsystem.RendererSystem"]=Ml;Ml.__name__=["flambe","subsystem","RendererSystem"];Ml.prototype={__class__:Ml};var Eg=function(){};f["flambe.platform.InternalRenderer"]=Eg;Eg.__name__=["flambe","platform","InternalRenderer"];Eg.__interfaces__=[Ml];Eg.prototype={__class__:Eg};var Bg=function(){};
f["flambe.platform.KeyCodes"]=Bg;Bg.__name__=["flambe","platform","KeyCodes"];Bg.toKey=function(a){switch(a){case 65:return i.A;case 66:return i.B;case 67:return i.C;case 68:return i.D;case 69:return i.E;case 70:return i.F;case 71:return i.G;case 72:return i.H;case 73:return i.I;case 74:return i.J;case 75:return i.K;case 76:return i.L;case 77:return i.M;case 78:return i.N;case 79:return i.O;case 80:return i.P;case 81:return i.Q;case 82:return i.R;case 83:return i.S;case 84:return i.T;case 85:return i.U;
case 86:return i.V;case 87:return i.W;case 88:return i.X;case 89:return i.Y;case 90:return i.Z;case 48:return i.Number0;case 49:return i.Number1;case 50:return i.Number2;case 51:return i.Number3;case 52:return i.Number4;case 53:return i.Number5;case 54:return i.Number6;case 55:return i.Number7;case 56:return i.Number8;case 57:return i.Number9;case 96:return i.Numpad0;case 97:return i.Numpad1;case 98:return i.Numpad2;case 99:return i.Numpad3;case 100:return i.Numpad4;case 101:return i.Numpad5;case 102:return i.Numpad6;
case 103:return i.Numpad7;case 104:return i.Numpad8;case 105:return i.Numpad9;case 107:return i.NumpadAdd;case 110:return i.NumpadDecimal;case 111:return i.NumpadDivide;case 108:return i.NumpadEnter;case 106:return i.NumpadMultiply;case 109:return i.NumpadSubtract;case 112:return i.F1;case 113:return i.F2;case 114:return i.F3;case 115:return i.F4;case 116:return i.F5;case 117:return i.F6;case 118:return i.F7;case 119:return i.F8;case 120:return i.F9;case 121:return i.F10;case 122:return i.F11;case 123:return i.F12;
case 37:return i.Left;case 38:return i.Up;case 39:return i.Right;case 40:return i.Down;case 18:return i.Alt;case 192:return i.Backquote;case 220:return i.Backslash;case 8:return i.Backspace;case 20:return i.CapsLock;case 188:return i.Comma;case 15:return i.Command;case 17:return i.Control;case 46:return i.Delete;case 35:return i.End;case 13:return i.Enter;case 187:return i.Equals;case 27:return i.Escape;case 36:return i.Home;case 45:return i.Insert;case 219:return i.LeftBracket;case 189:return i.Minus;
case 34:return i.PageDown;case 33:return i.PageUp;case 190:return i.Period;case 222:return i.Quote;case 221:return i.RightBracket;case 186:return i.Semicolon;case 16:return i.Shift;case 191:return i.Slash;case 32:return i.Space;case 9:return i.Tab;case 16777234:return i.Menu;case 16777247:return i.Search}return i.Unknown(a)};Bg.toKeyCode=function(a){switch(a[1]){case 0:return 65;case 1:return 66;case 2:return 67;case 3:return 68;case 4:return 69;case 5:return 70;case 6:return 71;case 7:return 72;
case 8:return 73;case 9:return 74;case 10:return 75;case 11:return 76;case 12:return 77;case 13:return 78;case 14:return 79;case 15:return 80;case 16:return 81;case 17:return 82;case 18:return 83;case 19:return 84;case 20:return 85;case 21:return 86;case 22:return 87;case 23:return 88;case 24:return 89;case 25:return 90;case 26:return 48;case 27:return 49;case 28:return 50;case 29:return 51;case 30:return 52;case 31:return 53;case 32:return 54;case 33:return 55;case 34:return 56;case 35:return 57;
case 36:return 96;case 37:return 97;case 38:return 98;case 39:return 99;case 40:return 100;case 41:return 101;case 42:return 102;case 43:return 103;case 44:return 104;case 45:return 105;case 46:return 107;case 47:return 110;case 48:return 111;case 49:return 108;case 50:return 106;case 51:return 109;case 52:return 112;case 53:return 113;case 54:return 114;case 55:return 115;case 56:return 116;case 57:return 117;case 58:return 118;case 59:return 119;case 60:return 120;case 61:return 121;case 62:return 122;
case 63:return 123;case 64:return 124;case 65:return 125;case 66:return 126;case 67:return 37;case 68:return 38;case 69:return 39;case 70:return 40;case 71:return 18;case 72:return 192;case 73:return 220;case 74:return 8;case 75:return 20;case 76:return 188;case 77:return 15;case 78:return 17;case 79:return 46;case 80:return 35;case 81:return 13;case 82:return 187;case 83:return 27;case 84:return 36;case 85:return 45;case 86:return 219;case 87:return 189;case 88:return 34;case 89:return 33;case 90:return 190;
case 91:return 222;case 92:return 221;case 93:return 186;case 94:return 16;case 95:return 191;case 96:return 32;case 97:return 9;case 98:return 16777234;case 99:return 16777247;case 100:return a[2]}};var Lf=function(){this._tickables=[]};f["flambe.platform.MainLoop"]=Lf;Lf.__name__=["flambe","platform","MainLoop"];Lf.updateEntity=function(a,b){var c=a._compMap.SpeedAdjuster_57;if(null!=c&&(c._realDt=b,b*=c.scale._value,0>=b)){c.onUpdate(b);return}for(c=a.firstComponent;null!=c;){var d=c.next;0==(c._flags&
1)&&(c._flags|=1,c.onStart());c.onUpdate(b);c=d}for(c=a.firstChild;null!=c;)d=c.next,Lf.updateEntity(c,b),c=d};Lf.prototype={update:function(a){if(!(0>=a)){1<a&&(a=1);for(var b=0;b<this._tickables.length;){var c=this._tickables[b];null==c||c.update(a)?this._tickables.splice(b,1):++b}x.volume.update(a);Lf.updateEntity(x.root,a)}},render:function(a){var b=a.graphics;null!=b&&(a.willRender(),A.render(x.root,b),a.didRender())},addTickable:function(a){this._tickables.push(a)},__class__:Lf};var Nl=function(){};
f["flambe.platform.MathUtil"]=Nl;Nl.__name__=["flambe","platform","MathUtil"];Nl.nextPowerOfTwo=function(a){for(var b=1;b<a;)b<<=1;return b};var Jl=function(){};f["flambe.platform.MouseCodes"]=Jl;Jl.__name__=["flambe","platform","MouseCodes"];Jl.toButton=function(a){switch(a){case 0:return bb.Left;case 1:return bb.Middle;case 2:return bb.Right}return bb.Unknown(a)};var $h=function(){};f["flambe.platform.TextureRoot"]=$h;$h.__name__=["flambe","platform","TextureRoot"];$h.prototype={__class__:$h};var ai=
function(){};f["flambe.platform.Tickable"]=ai;ai.__name__=["flambe","platform","Tickable"];ai.prototype={__class__:ai};var kd=function(a,b){this._firstDraw=!1;this._canvasCtx=a.getContext("2d",{alpha:b})};f["flambe.platform.html.CanvasGraphics"]=kd;kd.__name__=["flambe","platform","html","CanvasGraphics"];kd.__interfaces__=[Dg];kd.prototype={save:function(){this._canvasCtx.save()},translate:function(a,b){this._canvasCtx.translate(a|0,b|0)},scale:function(a,b){this._canvasCtx.scale(a,b)},rotate:function(a){this._canvasCtx.rotate(3.141592653589793*
a/180)},transform:function(a,b,c,d,e,h){this._canvasCtx.transform(a,b,c,d,e,h)},restore:function(){this._canvasCtx.restore()},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,b,c,d,e,h,n){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawSubTexture(a,b,c,d,e,h,n),this._canvasCtx.globalCompositeOperation="source-over"):this._canvasCtx.drawImage(a.root.image,a.rootX+d|0,a.rootY+e|0,h|0,n|0,b|
0,c|0,h|0,n|0)},drawPattern:function(a,b,c,d,e){this._firstDraw?(this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.drawPattern(a,b,c,d,e),this._canvasCtx.globalCompositeOperation="source-over"):(this._canvasCtx.fillStyle=a.getPattern(),this._canvasCtx.fillRect(b|0,c|0,d|0,e|0))},fillRect:function(a,b,c,d,e){if(this._firstDraw)this._firstDraw=!1,this._canvasCtx.globalCompositeOperation="copy",this.fillRect(a,b,c,d,e),this._canvasCtx.globalCompositeOperation="source-over";else{for(a=
(16777215&a).toString(16);6>a.length;)a="0"+y.string(a);this._canvasCtx.fillStyle="#"+y.string(a);this._canvasCtx.fillRect(b|0,c|0,d|0,e|0)}},multiplyAlpha:function(a){this._canvasCtx.globalAlpha*=a},setBlendMode:function(a){var b;switch(a[1]){case 0:b="source-over";break;case 1:b="lighter";break;case 2:b="multiply";break;case 3:b="screen";break;case 4:b="destination-in";break;case 5:b="copy"}this._canvasCtx.globalCompositeOperation=b},applyScissor:function(a,b,c,d){this._canvasCtx.beginPath();this._canvasCtx.rect(a|
0,b|0,c|0,d|0);this._canvasCtx.clip()},willRender:function(){this._firstDraw=!0},didRender:function(){},onResize:function(){},__class__:kd};var Mf=function(a){this.graphics=new kd(a,!1);this._hasGPU=new yb(!0)};f["flambe.platform.html.CanvasRenderer"]=Mf;Mf.__name__=["flambe","platform","html","CanvasRenderer"];Mf.__interfaces__=[Eg];Mf.prototype={get_type:function(){return pc.Canvas},createTextureFromImage:function(a){a=new Tf(Mf.CANVAS_TEXTURES?ra.createCanvas(a):a);return a.createTexture(a.width,
a.height)},createTexture:function(a,b){return(new Tf(ra.createEmptyCanvas(a,b))).createTexture(a,b)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},__class__:Mf,__properties__:{get_type:"get_type"}};var bi=function(a,b,c){this._rootUpdateCount=0;this._pattern=null;Ec.call(this,a,b,c)};f["flambe.platform.html.CanvasTexture"]=bi;bi.__name__=["flambe","platform",
"html","CanvasTexture"];bi.__super__=Ec;bi.prototype=l(Ec.prototype,{getPattern:function(){if(this._rootUpdateCount!=this.root.updateCount||null==this._pattern)this._rootUpdateCount=this.root.updateCount,this._pattern=this.root.createPattern(this.rootX,this.rootY,this._width,this._height);return this._pattern},__class__:bi});var Tf=function(a){this._graphics=null;this.updateCount=0;this._disposed=!1;this.image=a;this.width=a.width;this.height=a.height};f["flambe.platform.html.CanvasTextureRoot"]=
Tf;Tf.__name__=["flambe","platform","html","CanvasTextureRoot"];Tf.__interfaces__=[$h];Tf.__super__=dc;Tf.prototype=l(dc.prototype,{createTexture:function(a,b){return new bi(this,a,b)},getGraphics:function(){null==this._graphics&&(this.getContext2d(),this._graphics=new ci(this));return this._graphics},createPattern:function(a,b,c,d){var e=this.getContext2d(),h=this.image;if(0!=a||0!=b||c!=this.width||d!=this.height)h=ra.createEmptyCanvas(c,d),c=h.getContext("2d"),c.globalCompositeOperation="copy",
c.drawImage(this.image,-a,-b);return e.createPattern(h,"repeat")},getContext2d:function(){ga.__instanceof(this.image,HTMLCanvasElement)||(this.image=ra.createCanvas(this.image));return this.image.getContext("2d")},onDisposed:function(){this._graphics=this.image=null},__class__:Tf});var ci=function(a){kd.call(this,a.image,!0);this._renderTarget=a};f["flambe.platform.html._CanvasTextureRoot.InternalGraphics"]=ci;ci.__name__=["flambe","platform","html","_CanvasTextureRoot","InternalGraphics"];ci.__super__=
kd;ci.prototype=l(kd.prototype,{drawTexture:function(a,b,c){kd.prototype.drawTexture.call(this,a,b,c);++this._renderTarget.updateCount},drawSubTexture:function(a,b,c,d,e,h,n){kd.prototype.drawSubTexture.call(this,a,b,c,d,e,h,n);++this._renderTarget.updateCount},drawPattern:function(a,b,c,d,e){kd.prototype.drawPattern.call(this,a,b,c,d,e);++this._renderTarget.updateCount},fillRect:function(a,b,c,d,e){kd.prototype.fillRect.call(this,a,b,c,d,e);++this._renderTarget.updateCount},__class__:ci});var sa=
function(a,b){uf.call(this,a,b)};f["flambe.platform.html.HtmlAssetPackLoader"]=sa;sa.__name__=["flambe","platform","html","HtmlAssetPackLoader"];sa.detectImageFormats=function(a){var b=[L.PNG,L.JPG,L.GIF],c=2,d;d=window.document.createElement("img");d.onload=d.onerror=function(){1==d.width&&b.unshift(L.WEBP);--c;0==c&&a(b)};d.src="data:image/webp;base64,UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==";var e;e=window.document.createElement("img");e.onload=e.onerror=function(){1==e.width&&b.unshift(L.JXR);
--c;0==c&&a(b)};e.src="data:image/vnd.ms-photo;base64,SUm8AQgAAAAFAAG8AQAQAAAASgAAAIC8BAABAAAAAQAAAIG8BAABAAAAAQAAAMC8BAABAAAAWgAAAMG8BAABAAAAHwAAAAAAAAAkw91vA07+S7GFPXd2jckNV01QSE9UTwAZAYBxAAAAABP/gAAEb/8AAQAAAQAAAA=="};sa.detectAudioFormats=function(){var a;a=window.document.createElement("audio");if(null==a||null==m(a,a.canPlayType))return[];var b=new hd("\\b(iPhone|iPod|iPad|Windows Phone)\\b",""),c=window.navigator.userAgent;if(!Ia.get_supported()&&b.match(c))return[];for(var b=[{format:L.M4A,
mimeType:"audio/mp4; codecs=mp4a"},{format:L.MP3,mimeType:"audio/mpeg"},{format:L.OPUS,mimeType:"audio/ogg; codecs=opus"},{format:L.OGG,mimeType:"audio/ogg; codecs=vorbis"},{format:L.WAV,mimeType:"audio/wav"}],c=[],d=0;d<b.length;){var e=b[d];++d;var h="";try{h=a.canPlayType(e.mimeType)}catch(n){}""!=h&&c.push(e.format)}return c};sa.supportsBlob=function(){if(sa._detectBlobSupport){sa._detectBlobSupport=!1;if((new hd("\\bSilk\\b","")).match(window.navigator.userAgent)||null==window.Blob)return!1;
var a=new XMLHttpRequest;a.open("GET",".",!0);if(""!=a.responseType)return!1;a.responseType="blob";if("blob"!=a.responseType)return!1;sa._URL=ra.loadExtension("URL").value}return null!=sa._URL&&null!=sa._URL.createObjectURL};sa.__super__=uf;sa.prototype=l(uf.prototype,{loadEntry:function(a,b){var c=this;switch(b.format[1]){case 0:case 1:case 2:case 3:case 4:var d;d=window.document.createElement("img");var e=new Cg;e.addDisposingListener(d,"load",function(){sa.supportsBlob()&&sa._URL.revokeObjectURL(d.src);
var a=c._platform.getRenderer().createTextureFromImage(d);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});e.addDisposingListener(d,"error",function(){c.handleError(b,"Failed to load image")});sa.supportsBlob()?this.download(a,b,"blob",function(a){d.src=sa._URL.createObjectURL(a)}):d.src=a;break;case 5:case 6:case 7:this.download(a,b,"arraybuffer",function(){var a=c._platform.getRenderer().createCompressedTexture(b.format,null);null!=a?c.handleLoad(b,a):c.handleTextureError(b)});break;case 8:case 9:case 10:case 11:case 12:if(Ia.get_supported())this.download(a,
b,"arraybuffer",function(a){Ia.ctx.decodeAudioData(a,function(a){c.handleLoad(b,new Ia(a))},function(){c.handleLoad(b,Qc.getInstance())})});else{var h;h=window.document.createElement("audio");h.preload="auto";var n=++sa._mediaRefCount;null==sa._mediaElements&&(sa._mediaElements=new Dc);sa._mediaElements.set(n,h);e=new Cg;e.addDisposingListener(h,"canplaythrough",function(){sa._mediaElements.remove(n);c.handleLoad(b,new Fg(h))});e.addDisposingListener(h,"error",function(){sa._mediaElements.remove(n);
var a=h.error.code;3==a||4==a?c.handleLoad(b,Qc.getInstance()):c.handleError(b,"Failed to load audio: "+h.error.code)});e.addListener(h,"progress",function(){if(0<h.buffered.length&&0<h.duration){var a=h.buffered.end(0)/h.duration;c.handleProgress(b,a*b.bytes|0)}});h.src=a;h.load()}break;case 13:this.download(a,b,"text",function(a){c.handleLoad(b,new Ag(a))})}},getAssetFormats:function(a){var b=this;null==sa._supportedFormats&&(sa._supportedFormats=new tf,sa.detectImageFormats(function(a){sa._supportedFormats.set_result(b._platform.getRenderer().getCompressedTextureFormats().concat(a).concat(sa.detectAudioFormats()).concat([L.Data]))}));
sa._supportedFormats.get(a)},download:function(a,b,c,d){var e=this,h=null,n=null,g=0,f=!1,i=function(){f&&(f=!1,window.clearInterval(g))},j=3,k=function(){--j;return 0<=j?(n(),!0):!1},n=function(){i();null!=h&&h.abort();h=new XMLHttpRequest;h.open("GET",a,!0);h.responseType=c;var n=0;h.onprogress=function(a){f||(f=!0,g=window.setInterval(function(){4!=h.readyState&&5E3<Date.now()-n&&!k()&&(i(),e.handleError(b,"Download stalled"))},1E3));n=Date.now();e.handleProgress(b,a.loaded)};h.onerror=function(){if(0!=
h.status||!k())i(),e.handleError(b,"HTTP error "+h.status)};h.onload=function(){var a=h.response;null==a&&(a=h.responseText);i();d(a)};h.send()};n()},__class__:sa});var Ol=function(){};f["flambe.subsystem.ExternalSystem"]=Ol;Ol.__name__=["flambe","subsystem","ExternalSystem"];Ol.prototype={__class__:Ol};var Ph=function(){};f["flambe.platform.html.HtmlExternal"]=Ph;Ph.__name__=["flambe","platform","html","HtmlExternal"];Ph.__interfaces__=[Ol];Ph.prototype={call:function(a,b){null==b&&(b=[]);for(var c=
window,d=c,e=0,h=a.split(".");e<h.length;){var n=h[e];++e;c=d;d=w.field(c,n)}return d.apply(c,b)},__class__:Ph};var Jh=function(a,b){oc.call(this,a);this._canvas=b};f["flambe.platform.html.HtmlMouse"]=Jh;Jh.__name__=["flambe","platform","html","HtmlMouse"];Jh.__super__=oc;Jh.prototype=l(oc.prototype,{set_cursor:function(a){var b;switch(a[1]){case 0:b="";break;case 1:b="pointer";break;case 2:b="none"}this._canvas.style.cursor=b;return oc.prototype.set_cursor.call(this,a)},__class__:Jh});var Fg=function(a){this._disposed=
!1;this.audioElement=a};f["flambe.platform.html.HtmlSound"]=Fg;Fg.__name__=["flambe","platform","html","HtmlSound"];Fg.__interfaces__=[Rf];Fg.__super__=dc;Fg.prototype=l(dc.prototype,{play:function(a){null==a&&(a=1);return new Gg(this,a,!1)},loop:function(a){null==a&&(a=1);return new Gg(this,a,!0)},get_duration:function(){return this.audioElement.duration},onDisposed:function(){this.audioElement=null},__class__:Fg,__properties__:{get_duration:"get_duration"}});var Gg=function(a,b,c){var d=this;this._sound=
a;this._tickableAdded=!1;this._clonedElement=window.document.createElement("audio");this._clonedElement.loop=c;this._clonedElement.src=a.audioElement.src;this.volume=new J(b,function(){d.updateVolume()});this.updateVolume();this._complete=new yb(!1);this.playAudio();x.hidden._value&&this.set_paused(!0)};f["flambe.platform.html._HtmlSound.HtmlPlayback"]=Gg;Gg.__name__=["flambe","platform","html","_HtmlSound","HtmlPlayback"];Gg.__interfaces__=[ai,Sf];Gg.prototype={set_paused:function(a){this._clonedElement.paused!=
a&&(a?this._clonedElement.pause():this.playAudio());return a},get_complete:function(){return this._complete},update:function(a){this.volume.update(a);this._complete.set__(this._clonedElement.ended);return this._complete._value||this._clonedElement.paused?(this._tickableAdded=!1,this._volumeBinding.dispose(),this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},playAudio:function(){var a=this;this._clonedElement.loop&&!Od.instance.musicPlaying&&(Od.instance.musicPlaying=
!0,this._clonedElement.play(),this._tickableAdded||(Od.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._volumeBinding=x.volume.get_changed().connect(function(){a.updateVolume()}),this._hideBinding=x.hidden.get_changed().connect(function(b){b?(a._wasPaused=a._clonedElement.paused,a.set_paused(!0)):a.set_paused(a._wasPaused)})))},updateVolume:function(){this._clonedElement.volume=x.volume._value*this.volume._value},__class__:Gg,__properties__:{get_complete:"get_complete",set_paused:"set_paused"}};
var Pl=function(){};f["flambe.subsystem.StageSystem"]=Pl;Pl.__name__=["flambe","subsystem","StageSystem"];Pl.prototype={__class__:Pl};var wg=function(a){var b=this;this._canvas=a;this.resize=new ka;this.scaleFactor=1;ra.SHOULD_HIDE_MOBILE_BROWSER&&(window.addEventListener("orientationchange",function(){ra.callLater(m(b,b.hideMobileBrowser),200)},!1),this.hideMobileBrowser());window.addEventListener("resize",m(this,this.onWindowResize),!1);this.onWindowResize(null);this.orientation=new yb(null);null!=
window.orientation&&(window.addEventListener("orientationchange",m(this,this.onOrientationChange),!1),this.onOrientationChange(null));this.fullscreen=new yb(!1);ra.addVendorListener(window.document,"fullscreenchange",function(){b.updateFullscreen()},!1);this.updateFullscreen()};f["flambe.platform.html.HtmlStage"]=wg;wg.__name__=["flambe","platform","html","HtmlStage"];wg.__interfaces__=[Pl];wg.prototype={get_width:function(){return this._canvas.width},get_height:function(){return this._canvas.height},
onWindowResize:function(){var a=this._canvas.parentElement.getBoundingClientRect();this.resizeCanvas(a.width,a.height)},resizeCanvas:function(a,b){var c=this.scaleFactor*a,d=this.scaleFactor*b;if(this._canvas.width==c&&this._canvas.height==d)return!1;this._canvas.width=c|0;this._canvas.height=d|0;this.resize.emit();return!0},hideMobileBrowser:function(){var a=this,b=window.document.documentElement.style;b.height=window.innerHeight+100+"px";b.width=window.innerWidth+"px";b.overflow="visible";ra.callLater(function(){ra.hideMobileBrowser();
ra.callLater(function(){b.height=window.innerHeight+"px";a.onWindowResize(null)},100)})},onOrientationChange:function(){this.orientation.set__(ra.orientation(window.orientation))},updateFullscreen:function(){this.fullscreen.set__(!0==ra.loadFirstExtension(["fullscreen","fullScreen","isFullScreen"],window.document).value)},__class__:wg,__properties__:{get_height:"get_height",get_width:"get_width"}};var Nh=function(a){this._storage=a};f["flambe.platform.html.HtmlStorage"]=Nh;Nh.__name__=["flambe","platform",
"html","HtmlStorage"];Nh.__interfaces__=[Zh];Nh.prototype={set:function(a,b){var c;try{var d=new se;d.useCache=!0;d.useEnumIndex=!1;d.serialize(b);c=d.toString()}catch(e){return!1}try{this._storage.setItem("flambe:"+a,c)}catch(h){return!1}return!0},get:function(a,b){var c=null;try{c=this._storage.getItem("flambe:"+a)}catch(d){null}if(null!=c)try{return qc.run(c)}catch(e){null}return b},__class__:Nh};var ra=function(){};f["flambe.platform.html.HtmlUtil"]=ra;ra.__name__=["flambe","platform","html",
"HtmlUtil"];ra.callLater=function(a,b){null==b&&(b=0);window.setTimeout(a,b)};ra.hideMobileBrowser=function(){window.scrollTo(1,0)};ra.loadExtension=function(a,b){null==b&&(b=window);var c=w.field(b,a);if(null!=c)return{prefix:"",field:a,value:c};for(var c=a.charAt(0).toUpperCase()+Q.substr(a,1,null),d=0,e=ra.VENDOR_PREFIXES;d<e.length;){var h=e[d];++d;var n=h+c,g=w.field(b,n);if(null!=g)return{prefix:h,field:n,value:g}}return{prefix:null,field:null,value:null}};ra.loadFirstExtension=function(a,b){for(var c=
0;c<a.length;){var d=a[c];++c;d=ra.loadExtension(d,b);if(null!=d.field)return d}return{prefix:null,field:null,value:null}};ra.polyfill=function(a,b){null==b&&(b=window);var c=ra.loadExtension(a,b).value;if(null==c)return!1;b[a]=c;return!0};ra.addVendorListener=function(a,b,c,d){for(var e=0,h=ra.VENDOR_PREFIXES;e<h.length;){var n=h[e];++e;a.addEventListener(n+b,c,d)}a.addEventListener(b,c,d)};ra.orientation=function(a){switch(a){case -90:case 90:return jd.Landscape;default:return jd.Portrait}};ra.createEmptyCanvas=
function(a,b){var c;c=window.document.createElement("canvas");c.width=a;c.height=b;return c};ra.createCanvas=function(a){var b=ra.createEmptyCanvas(a.width,a.height),c=b.getContext("2d");c.save();c.globalCompositeOperation="copy";c.drawImage(a,0,0);c.restore();return b};ra.detectSlowDriver=function(a){if(0<=window.navigator.platform.indexOf("Win")&&null!=window.chrome){for(var b=0,a=a.getSupportedExtensions();b<a.length;){var c=a[b];++b;if(0<=c.indexOf("WEBGL_compressed_texture"))return!1}return!0}return!1};
ra.fixAndroidMath=function(){if(0<=window.navigator.userAgent.indexOf("Linux; U; Android 4")){var a=Math.sin,b=Math.cos;Math.sin=function(b){return 0==b?0:a(b)};Math.cos=function(a){return 0==a?1:b(a)}}};var Ia=function(a){this._disposed=!1;this.buffer=a};f["flambe.platform.html.WebAudioSound"]=Ia;Ia.__name__=["flambe","platform","html","WebAudioSound"];Ia.__interfaces__=[Rf];Ia.__properties__={get_supported:"get_supported"};Ia.get_supported=function(){if(Ia._detectSupport){Ia._detectSupport=!1;var a=
ra.loadExtension("AudioContext").value;null!=a&&(Ia.ctx=new a,Ia.gain=Ia.createGain(),Ia.gain.connect(Ia.ctx.destination),x.volume.watch(function(a){Ia.gain.gain.value=a}))}return null!=Ia.ctx};Ia.createGain=function(){return null!=Ia.ctx.createGain?Ia.ctx.createGain():Ia.ctx.createGainNode()};Ia.start=function(a,b){null!=a.start?a.start(b):a.noteOn(b)};Ia.__super__=dc;Ia.prototype=l(dc.prototype,{play:function(a){null==a&&(a=1);return new Hg(this,a,!1)},loop:function(a){null==a&&(a=1);return new Hg(this,
a,!0)},get_duration:function(){return this.buffer.duration},onDisposed:function(){this.buffer=null},__class__:Ia,__properties__:{get_duration:"get_duration"}});var Hg=function(a,b,c){var d=this;this._sound=a;this._head=Ia.gain;this._complete=new yb(!1);this._sourceNode=Ia.ctx.createBufferSource();this._sourceNode.buffer=a.buffer;this._sourceNode.loop=c;this._sourceNode.onended=function(){d._complete.set__(!0)};Ia.start(this._sourceNode,0);this.playAudio();this.volume=new J(b,function(a){d.setVolume(a)});
1!=b&&this.setVolume(b);x.hidden._value&&this.set_paused(!0)};f["flambe.platform.html._WebAudioSound.WebAudioPlayback"]=Hg;Hg.__name__=["flambe","platform","html","_WebAudioSound","WebAudioPlayback"];Hg.__interfaces__=[ai,Sf];Hg.prototype={set_paused:function(a){a!=0<=this._pausedAt&&(a?(this._sourceNode.disconnect(),this._pausedAt=this.get_position()):this.playAudio());return a},get_complete:function(){return this._complete},get_position:function(){return this._complete._value?this._sound.get_duration():
0<=this._pausedAt?this._pausedAt:(Ia.ctx.currentTime-this._startedAt)%this._sound.get_duration()},update:function(a){this.volume.update(a);3==this._sourceNode.playbackState&&this._complete.set__(!0);return this._complete._value||0<=this._pausedAt?(this._tickableAdded=!1,this._hideBinding.dispose(),!0):!1},dispose:function(){this.set_paused(!0);this._complete.set__(!0)},setVolume:function(a){null==this._gainNode&&(this._gainNode=Ia.createGain(),this.insertNode(this._gainNode));this._gainNode.gain.value=
a},insertNode:function(a){0<=this._pausedAt||(this._sourceNode.disconnect(),this._sourceNode.connect(a));a.connect(this._head);this._head=a},playAudio:function(){var a=this;this._sourceNode.connect(this._head);this._startedAt=Ia.ctx.currentTime;this._pausedAt=-1;this._tickableAdded||(Od.instance.mainLoop.addTickable(this),this._tickableAdded=!0,this._hideBinding=x.hidden.get_changed().connect(function(b){b?(a._wasPaused=0<=a._pausedAt,a.set_paused(!0)):a.set_paused(a._wasPaused)}))},__class__:Hg,
__properties__:{get_position:"get_position",get_complete:"get_complete",set_paused:"set_paused"}};var Ql=function(a){this._quads=this._maxQuads=this._dataOffset=this._backbufferWidth=this._backbufferHeight=0;this._pendingSetScissor=!1;this._lastBlendMode=this._lastRenderTarget=this._lastShader=this._lastTexture=this._lastScissor=this._currentBlendMode=this._currentShader=this._currentTexture=this._currentRenderTarget=null;this._gl=a;a.clearColor(0,0,0,0);a.enable(3042);a.pixelStorei(37441,1);this._vertexBuffer=
a.createBuffer();a.bindBuffer(34962,this._vertexBuffer);this._quadIndexBuffer=a.createBuffer();a.bindBuffer(34963,this._quadIndexBuffer);this._drawTextureShader=new di(a);this._drawPatternShader=new ei(a);this._fillRectShader=new fi(a);this.resize(16)};f["flambe.platform.html.WebGLBatcher"]=Ql;Ql.__name__=["flambe","platform","html","WebGLBatcher"];Ql.prototype={resizeBackbuffer:function(a,b){this._gl.viewport(0,0,a,b);this._backbufferWidth=a;this._backbufferHeight=b},willRender:function(){},didRender:function(){this.flush()},
bindTexture:function(a){this.flush();this._currentTexture=this._lastTexture=null;this._gl.bindTexture(3553,a)},deleteTexture:function(a){null!=this._lastTexture&&this._lastTexture.root==a&&(this.flush(),this._currentTexture=this._lastTexture=null);this._gl.deleteTexture(a.nativeTexture)},bindFramebuffer:function(a){a!=this._lastRenderTarget&&(this.flush(),this.bindRenderTarget(a))},deleteFramebuffer:function(a){a==this._lastRenderTarget&&(this.flush(),this._currentRenderTarget=this._lastRenderTarget=
null);this._gl.deleteFramebuffer(a.framebuffer)},prepareDrawTexture:function(a,b,c,d){d!=this._lastTexture&&(this.flush(),this._lastTexture=d);return this.prepareQuad(5,a,b,c,this._drawTextureShader)},prepareDrawPattern:function(a,b,c,d){d!=this._lastTexture&&(this.flush(),this._lastTexture=d);return this.prepareQuad(5,a,b,c,this._drawPatternShader)},prepareFillRect:function(a,b,c){return this.prepareQuad(6,a,b,c,this._fillRectShader)},prepareQuad:function(a,b,c,d,e){b!=this._lastRenderTarget&&(this.flush(),
this._lastRenderTarget=b);c!=this._lastBlendMode&&(this.flush(),this._lastBlendMode=c);e!=this._lastShader&&(this.flush(),this._lastShader=e);if(null!=d||null!=this._lastScissor)if(null==d||null==this._lastScissor||!this._lastScissor.equals(d))this.flush(),this._lastScissor=null!=d?d.clone(this._lastScissor):null,this._pendingSetScissor=!0;this._quads>=this._maxQuads&&this.resize(2*this._maxQuads);++this._quads;b=this._dataOffset;this._dataOffset+=4*a;return b},flush:function(){if(!(1>this._quads)){this._lastRenderTarget!=
this._currentRenderTarget&&this.bindRenderTarget(this._lastRenderTarget);if(this._lastBlendMode!=this._currentBlendMode){switch(this._lastBlendMode[1]){case 0:this._gl.blendFunc(1,771);break;case 1:this._gl.blendFunc(1,1);break;case 2:this._gl.blendFunc(774,771);break;case 3:this._gl.blendFunc(1,769);break;case 4:this._gl.blendFunc(0,770);break;case 5:this._gl.blendFunc(1,0)}this._currentBlendMode=this._lastBlendMode}this._pendingSetScissor&&(null!=this._lastScissor?(this._gl.enable(3089),this._gl.scissor(this._lastScissor.x|
0,this._lastScissor.y|0,this._lastScissor.width|0,this._lastScissor.height|0)):this._gl.disable(3089),this._pendingSetScissor=!1);this._lastTexture!=this._currentTexture&&(this._gl.bindTexture(3553,this._lastTexture.root.nativeTexture),this._currentTexture=this._lastTexture);this._lastShader!=this._currentShader&&(this._lastShader.useProgram(),this._lastShader.prepare(),this._currentShader=this._lastShader);if(this._lastShader==this._drawPatternShader){var a=this._lastTexture,b=a.root;this._drawPatternShader.setRegion(a.rootX/
b.width,a.rootY/b.height,a._width/b.width,a._height/b.height)}this._gl.bufferData(34962,this.data.subarray(0,this._dataOffset),35040);this._gl.drawElements(4,6*this._quads,5123,0);this._dataOffset=this._quads=0}},resize:function(a){this.flush();if(!(1024<a)){this._maxQuads=a;this.data=new Float32Array(24*a);this._gl.bufferData(34962,4*this.data.length,35040);for(var b=new Uint16Array(6*a),c=0;c<a;){var d=c++;b[6*d]=4*d;b[6*d+1]=4*d+1;b[6*d+2]=4*d+2;b[6*d+3]=4*d+2;b[6*d+4]=4*d+3;b[6*d+5]=4*d}this._gl.bufferData(34963,
b,35044)}},bindRenderTarget:function(a){null!=a?(this._gl.bindFramebuffer(36160,a.framebuffer),this._gl.viewport(0,0,a.width,a.height)):(this._gl.bindFramebuffer(36160,null),this._gl.viewport(0,0,this._backbufferWidth,this._backbufferHeight));this._lastRenderTarget=this._currentRenderTarget=a},__class__:Ql};var Rc=function(a,b){this._inverseProjection=this._stateList=null;null==Rc._scratchQuadArray&&(Rc._scratchQuadArray=new Float32Array(8));this._batcher=a;this._renderTarget=b};f["flambe.platform.html.WebGLGraphics"]=
Rc;Rc.__name__=["flambe","platform","html","WebGLGraphics"];Rc.__interfaces__=[Dg];Rc.prototype={save:function(){var a=this._stateList,b=this._stateList.next;null==b&&(b=new gi,b.prev=a,a.next=b);a.matrix.clone(b.matrix);b.alpha=a.alpha;b.blendMode=a.blendMode;b.scissor=null!=a.scissor?a.scissor.clone(b.scissor):null;this._stateList=b},translate:function(a,b){var c=this._stateList.matrix;c.m02+=c.m00*a+c.m01*b;c.m12+=c.m10*a+c.m11*b},scale:function(a,b){var c=this._stateList.matrix;c.m00*=a;c.m10*=
a;c.m01*=b;c.m11*=b},rotate:function(a){var b=this._stateList.matrix,a=3.141592653589793*a/180,c=Math.sin(a),a=Math.cos(a),d=b.m00,e=b.m10,h=b.m01,n=b.m11;b.m00=d*a+h*c;b.m10=e*a+n*c;b.m01=h*a-d*c;b.m11=n*a-e*c},transform:function(a,b,c,d,e,h){var n=this._stateList;Rc._scratchMatrix.set(a,b,c,d,e,h);Oc.multiply(n.matrix,Rc._scratchMatrix,n.matrix)},restore:function(){this._stateList=this._stateList.prev},drawTexture:function(a,b,c){this.drawSubTexture(a,b,c,0,0,a.get_width(),a.get_height())},drawSubTexture:function(a,
b,c,d,e,h,n){var g=this._stateList,f=a.root,b=this.transformQuad(b,c,h,n),c=f.width,f=f.height,d=(a.rootX+d)/c,e=(a.rootY+e)/f,h=d+h/c,n=e+n/f,c=g.alpha,a=this._batcher.prepareDrawTexture(this._renderTarget,g.blendMode,g.scissor,a),g=this._batcher.data;g[a]=b[0];g[++a]=b[1];g[++a]=d;g[++a]=e;g[++a]=c;g[++a]=b[2];g[++a]=b[3];g[++a]=h;g[++a]=e;g[++a]=c;g[++a]=b[4];g[++a]=b[5];g[++a]=h;g[++a]=n;g[++a]=c;g[++a]=b[6];g[++a]=b[7];g[++a]=d;g[++a]=n;g[++a]=c},drawPattern:function(a,b,c,d,e){var h=this._stateList,
n=a.root,b=this.transformQuad(b,c,d,e),d=d/n.width,e=e/n.height,n=h.alpha,a=this._batcher.prepareDrawPattern(this._renderTarget,h.blendMode,h.scissor,a),h=this._batcher.data;h[a]=b[0];h[++a]=b[1];h[++a]=0;h[++a]=0;h[++a]=n;h[++a]=b[2];h[++a]=b[3];h[++a]=d;h[++a]=0;h[++a]=n;h[++a]=b[4];h[++a]=b[5];h[++a]=d;h[++a]=e;h[++a]=n;h[++a]=b[6];h[++a]=b[7];h[++a]=0;h[++a]=e;h[++a]=n},fillRect:function(a,b,c,d,e){var h=this._stateList,b=this.transformQuad(b,c,d,e),c=(a&16711680)/16711680,d=(a&65280)/65280,a=
(a&255)/255,e=h.alpha,h=this._batcher.prepareFillRect(this._renderTarget,h.blendMode,h.scissor),n=this._batcher.data;n[h]=b[0];n[++h]=b[1];n[++h]=c;n[++h]=d;n[++h]=a;n[++h]=e;n[++h]=b[2];n[++h]=b[3];n[++h]=c;n[++h]=d;n[++h]=a;n[++h]=e;n[++h]=b[4];n[++h]=b[5];n[++h]=c;n[++h]=d;n[++h]=a;n[++h]=e;n[++h]=b[6];n[++h]=b[7];n[++h]=c;n[++h]=d;n[++h]=a;n[++h]=e},multiplyAlpha:function(a){this._stateList.alpha*=a},setBlendMode:function(a){this._stateList.blendMode=a},applyScissor:function(a,b,c,d){var e=this._stateList,
h=Rc._scratchQuadArray;h[0]=a;h[1]=b;h[2]=a+c;h[3]=b+d;e.matrix.transformArray(h,4,h);this._inverseProjection.transformArray(h,4,h);a=h[0];b=h[1];c=h[2]-a;d=h[3]-b;0>c&&(a+=c,c=-c);0>d&&(b+=d,d=-d);e.applyScissor(a,b,c,d)},willRender:function(){this._batcher.willRender()},didRender:function(){this._batcher.didRender()},onResize:function(a,b){this._stateList=new gi;var c;c=null!=this._renderTarget?-1:1;this._stateList.matrix.set(2/a,0,0,-2*c/b,-1,c);this._inverseProjection=new Oc;this._inverseProjection.set(2/
a,0,0,2/b,-1,-1);this._inverseProjection.invert()},transformQuad:function(a,b,c,d){var c=a+c,d=b+d,e=Rc._scratchQuadArray;e[0]=a;e[1]=b;e[2]=c;e[3]=b;e[4]=c;e[5]=d;e[6]=a;e[7]=d;this._stateList.matrix.transformArray(e,8,e);return e},__class__:Rc};var gi=function(){this.scissor=this.prev=this.next=null;this.matrix=new Oc;this.alpha=1;this.blendMode=Fa.Normal};f["flambe.platform.html._WebGLGraphics.DrawingState"]=gi;gi.__name__=["flambe","platform","html","_WebGLGraphics","DrawingState"];gi.prototype=
{applyScissor:function(a,b,c,d){if(null!=this.scissor)var e=Ib.max(this.scissor.x,a),h=Ib.max(this.scissor.y,b),c=Ib.min(this.scissor.x+this.scissor.width,a+c),d=Ib.min(this.scissor.y+this.scissor.height,b+d),a=e,b=h,c=c-e,d=d-h;else this.scissor=new id;this.scissor.set(Math.round(a),Math.round(b),Math.round(c),Math.round(d))},__class__:gi};var Qh=function(a,b){var c=this;this._hasGPU=new yb(!0);this.gl=b;b.canvas.addEventListener("webglcontextlost",function(a){a.preventDefault();c._hasGPU.set__(!1)},
!1);b.canvas.addEventListener("webglcontextrestore",function(){c.init();c._hasGPU.set__(!0)},!1);a.resize.connect(m(this,this.onResize));this.init()};f["flambe.platform.html.WebGLRenderer"]=Qh;Qh.__name__=["flambe","platform","html","WebGLRenderer"];Qh.__interfaces__=[Eg];Qh.prototype={get_type:function(){return pc.WebGL},createTextureFromImage:function(a){if(this.gl.isContextLost())return null;var b=new Le(this,a.width,a.height);b.uploadImageData(a);return b.createTexture(a.width,a.height)},createTexture:function(a,
b){if(this.gl.isContextLost())return null;var c=new Le(this,a,b);c.clear();return c.createTexture(a,b)},getCompressedTextureFormats:function(){return[]},createCompressedTexture:function(){this.gl.isContextLost();return null},willRender:function(){this.graphics.willRender()},didRender:function(){this.graphics.didRender()},onResize:function(){var a=this.gl.canvas.width,b=this.gl.canvas.height;this.batcher.resizeBackbuffer(a,b);this.graphics.onResize(a,b)},init:function(){this.batcher=new Ql(this.gl);
this.graphics=new Rc(this.batcher,null);this.onResize()},__class__:Qh,__properties__:{get_type:"get_type"}};var hi=function(a,b,c){Ec.call(this,a,b,c)};f["flambe.platform.html.WebGLTexture"]=hi;hi.__name__=["flambe","platform","html","WebGLTexture"];hi.__super__=Ec;hi.prototype=l(Ec.prototype,{__class__:hi});var Le=function(a,b,c){this.framebuffer=this._graphics=null;this._disposed=!1;this._renderer=a;this.width=Ib.max(2,Nl.nextPowerOfTwo(b));this.height=Ib.max(2,Nl.nextPowerOfTwo(c));b=a.gl;this.nativeTexture=
b.createTexture();a.batcher.bindTexture(this.nativeTexture);b.texParameteri(3553,10242,33071);b.texParameteri(3553,10243,33071);b.texParameteri(3553,10240,9729);b.texParameteri(3553,10241,9729)};f["flambe.platform.html.WebGLTextureRoot"]=Le;Le.__name__=["flambe","platform","html","WebGLTextureRoot"];Le.__interfaces__=[$h];Le.drawBorder=function(a,b,c){var d=a.getContext("2d");d.drawImage(a,b-1,0,1,c,b,0,1,c);d.drawImage(a,0,c-1,b,1,0,c,b,1)};Le.__super__=dc;Le.prototype=l(dc.prototype,{createTexture:function(a,
b){return new hi(this,a,b)},uploadImageData:function(a){if(this.width!=a.width||this.height!=a.height){var b=ra.createEmptyCanvas(this.width,this.height);b.getContext("2d").drawImage(a,0,0);Le.drawBorder(b,a.width,a.height);a=b}this._renderer.batcher.bindTexture(this.nativeTexture);this._renderer.gl.texImage2D(3553,0,6408,6408,5121,a)},clear:function(){this._renderer.batcher.bindTexture(this.nativeTexture);this._renderer.gl.texImage2D(3553,0,6408,this.width,this.height,0,6408,5121,null)},getGraphics:function(){if(null==
this._graphics){this._graphics=new Rc(this._renderer.batcher,this);this._graphics.onResize(this.width,this.height);var a=this._renderer.gl;this.framebuffer=a.createFramebuffer();this._renderer.batcher.bindFramebuffer(this);a.framebufferTexture2D(36160,36064,3553,this.nativeTexture,0)}return this._graphics},onDisposed:function(){var a=this._renderer.batcher;a.deleteTexture(this);null!=this.framebuffer&&a.deleteFramebuffer(this);this._graphics=this.framebuffer=this.nativeTexture=null},__class__:Le});
var ec=function(a,b,c){c="#ifdef GL_ES\nprecision mediump float;\n#endif\n"+c;this._gl=a;this._program=a.createProgram();a.attachShader(this._program,ec.createShader(a,35633,b));a.attachShader(this._program,ec.createShader(a,35632,c));a.linkProgram(this._program);a.useProgram(this._program)};f["flambe.platform.shader.ShaderGL"]=ec;ec.__name__=["flambe","platform","shader","ShaderGL"];ec.createShader=function(a,b,c){b=a.createShader(b);a.shaderSource(b,c);a.compileShader(b);return b};ec.prototype=
{useProgram:function(){this._gl.useProgram(this._program)},prepare:function(){null},getAttribLocation:function(a){return this._gl.getAttribLocation(this._program,a)},getUniformLocation:function(a){return this._gl.getUniformLocation(this._program,a)},__class__:ec};var ei=function(a){ec.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}",
"varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nuniform mediump vec4 u_region;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, u_region.xy + mod(v_uv, u_region.zw)) * v_alpha;\n}");this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.u_region=this.getUniformLocation("u_region");this.setTexture(0)};f["flambe.platform.shader.DrawPatternGL"]=
ei;ei.__name__=["flambe","platform","shader","DrawPatternGL"];ei.__super__=ec;ei.prototype=l(ec.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},setRegion:function(a,b,c,d){this._gl.uniform4f(this.u_region,a,b,c,d)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,
8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:ei});var di=function(a){ec.call(this,a,"attribute highp vec2 a_pos;\nattribute mediump vec2 a_uv;\nattribute lowp float a_alpha;\nvarying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nvoid main (void) {\nv_uv = a_uv;\nv_alpha = a_alpha;\ngl_Position = vec4(a_pos, 0, 1);\n}","varying mediump vec2 v_uv;\nvarying lowp float v_alpha;\nuniform lowp sampler2D u_texture;\nvoid main (void) {\ngl_FragColor = texture2D(u_texture, v_uv) * v_alpha;\n}");
this.a_pos=this.getAttribLocation("a_pos");this.a_uv=this.getAttribLocation("a_uv");this.a_alpha=this.getAttribLocation("a_alpha");this.u_texture=this.getUniformLocation("u_texture");this.setTexture(0)};f["flambe.platform.shader.DrawTextureGL"]=di;di.__name__=["flambe","platform","shader","DrawTextureGL"];di.__super__=ec;di.prototype=l(ec.prototype,{setTexture:function(a){this._gl.uniform1i(this.u_texture,a)},prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_uv);
this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,20,0);this._gl.vertexAttribPointer(this.a_uv,2,5126,!1,20,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,20,16)},__class__:di});var fi=function(a){ec.call(this,a,"attribute highp vec2 a_pos;\nattribute lowp vec3 a_rgb;\nattribute lowp float a_alpha;\nvarying lowp vec4 v_color;\nvoid main (void) {\nv_color = vec4(a_rgb*a_alpha, a_alpha);\ngl_Position = vec4(a_pos, 0, 1);\n}","varying lowp vec4 v_color;\nvoid main (void) {\ngl_FragColor = v_color;\n}");
this.a_pos=this.getAttribLocation("a_pos");this.a_rgb=this.getAttribLocation("a_rgb");this.a_alpha=this.getAttribLocation("a_alpha")};f["flambe.platform.shader.FillRectGL"]=fi;fi.__name__=["flambe","platform","shader","FillRectGL"];fi.__super__=ec;fi.prototype=l(ec.prototype,{prepare:function(){this._gl.enableVertexAttribArray(this.a_pos);this._gl.enableVertexAttribArray(this.a_rgb);this._gl.enableVertexAttribArray(this.a_alpha);this._gl.vertexAttribPointer(this.a_pos,2,5126,!1,24,0);this._gl.vertexAttribPointer(this.a_rgb,
3,5126,!1,24,8);this._gl.vertexAttribPointer(this.a_alpha,1,5126,!1,24,20)},__class__:fi});var ii=function(){this._transitor=null;k.call(this);this.scenes=[];this.occludedScenes=[];this._root=new r};f["flambe.scene.Director"]=ii;ii.__name__=["flambe","scene","Director"];ii.__super__=k;ii.prototype=l(k.prototype,{get_name:function(){return"Director_62"},pushScene:function(a,b){var c=this;this.completeTransition();var d=this.get_topScene();null!=d?this.playTransition(d,a,b,function(){c.hide(d)}):(this.add(a),
this.invalidateVisibility())},popScene:function(a){var b=this;this.completeTransition();var c=this.get_topScene();if(null!=c){this.scenes.pop();var d=this.get_topScene();null!=d?this.playTransition(c,d,a,function(){b.hideAndDispose(c)}):(this.hideAndDispose(c),this.invalidateVisibility())}},unwindToScene:function(a,b){var c=this;this.completeTransition();var d=this.get_topScene();if(null!=d){if(d!=a){for(this.scenes.pop();0<this.scenes.length&&this.scenes[this.scenes.length-1]!=a;)this.scenes.pop().dispose();
this.playTransition(d,a,b,function(){c.hideAndDispose(d)})}}else this.pushScene(a,b)},onAdded:function(){this.owner.addChild(this._root)},onRemoved:function(){this.completeTransition();for(var a=0,b=this.scenes;a<b.length;){var c=b[a];++a;c.dispose()}this.scenes=[];this.occludedScenes=[];this._root.dispose()},onUpdate:function(a){null!=this._transitor&&this._transitor.update(a)&&this.completeTransition()},get_topScene:function(){var a=this.scenes.length;return 0<a?this.scenes[a-1]:null},add:function(a){var b=
this.get_topScene();null!=b&&this._root.removeChild(b);Q.remove(this.scenes,a);this.scenes.push(a);this._root.addChild(a)},hide:function(a){a=a._compMap.Scene_39;null!=a&&a.hidden.emit()},hideAndDispose:function(a){this.hide(a);a.dispose()},show:function(a){a=a._compMap.Scene_39;null!=a&&a.shown.emit()},invalidateVisibility:function(){for(var a=this.scenes.length;0<a;){var b=this.scenes[--a]._compMap.Scene_39;if(null==b||b.opaque)break}this.occludedScenes=0<this.scenes.length?this.scenes.slice(a,
this.scenes.length-1):[];a=this.get_topScene();null!=a&&this.show(a)},completeTransition:function(){null!=this._transitor&&(this._transitor.complete(),this._transitor=null,this.invalidateVisibility())},playTransition:function(a,b,c,d){this.completeTransition();this.add(b);null!=c?(this.occludedScenes.push(a),this._transitor=new Rl(a,b,c,d),this._transitor.init(this)):(d(),this.invalidateVisibility())},__class__:ii,__properties__:l(k.prototype.__properties__,{get_topScene:"get_topScene"})});var Rl=
function(a,b,c,d){this._from=a;this._to=b;this._transition=c;this._onComplete=d};f["flambe.scene._Director.Transitor"]=Rl;Rl.__name__=["flambe","scene","_Director","Transitor"];Rl.prototype={init:function(a){this._transition.init(a,this._from,this._to)},update:function(a){return this._transition.update(a)},complete:function(){this._transition.complete();this._onComplete()},__class__:Rl};var Ig=function(){};f["flambe.scene.Transition"]=Ig;Ig.__name__=["flambe","scene","Transition"];Ig.prototype={init:function(a,
b,c){this._director=a;this._from=b;this._to=c},update:function(){return!0},complete:function(){},__class__:Ig};var Me=function(a,b){this._duration=a;this._ease=null!=b?b:t.linear};f["flambe.scene.TweenTransition"]=Me;Me.__name__=["flambe","scene","TweenTransition"];Me.__super__=Ig;Me.prototype=l(Ig.prototype,{init:function(a,b,c){Ig.prototype.init.call(this,a,b,c);this._elapsed=0},update:function(a){this._elapsed+=a;return this._elapsed>=this._duration},interp:function(a,b){return a+(b-a)*this._ease(this._elapsed/
this._duration)},__class__:Me});var ji=function(a,b){Me.call(this,a,b)};f["flambe.scene.FadeTransition"]=ji;ji.__name__=["flambe","scene","FadeTransition"];ji.__super__=Me;ji.prototype=l(Me.prototype,{init:function(a,b,c){Me.prototype.init.call(this,a,b,c);a=this._to._compMap.Sprite_5;null==a&&this._to.add(a=new A);a.alpha.set__(0)},update:function(a){a=Me.prototype.update.call(this,a);this._to._compMap.Sprite_5.alpha.set__(this.interp(0,1));return a},complete:function(){this._to._compMap.Sprite_5.alpha.set__(1)},
__class__:ji});var Ne=function(a){null==a&&(a=!0);k.call(this);this.opaque=a;this.shown=new ka;this.hidden=new ka};f["flambe.scene.Scene"]=Ne;Ne.__name__=["flambe","scene","Scene"];Ne.__super__=k;Ne.prototype=l(k.prototype,{get_name:function(){return"Scene_39"},__class__:Ne});var Oe=function(){};f["flambe.script.Action"]=Oe;Oe.__name__=["flambe","script","Action"];Oe.prototype={__class__:Oe};var rc=function(a,b,c,d){this._value=a;this._to=b;this._seconds=c;this._easing=d};f["flambe.script.AnimateTo"]=
rc;rc.__name__=["flambe","script","AnimateTo"];rc.__interfaces__=[Oe];rc.prototype={update:function(a){null==this._tween&&(this._tween=new yg(this._value._value,this._to,this._seconds,this._easing),this._value.set_behavior(this._tween),this._value.update(a));if(this._value._behavior!=this._tween){var b=this._tween.elapsed-this._seconds;this._tween=null;return 0<b?Math.max(0,a-b):0}return-1},__class__:rc};var ma=function(a){this._fn=a};f["flambe.script.CallFunction"]=ma;ma.__name__=["flambe","script",
"CallFunction"];ma.__interfaces__=[Oe];ma.prototype={update:function(){this._fn();return 0},__class__:ma};var U=function(a){this._duration=a;this._elapsed=0};f["flambe.script.Delay"]=U;U.__name__=["flambe","script","Delay"];U.__interfaces__=[Oe];U.prototype={update:function(a){this._elapsed+=a;if(this._elapsed>=this._duration){var b=this._elapsed-this._duration;this._elapsed=0;return a-b}return-1},__class__:U};var ld=function(a){this._completedActions=[];this._runningActions=null!=a?a.slice():[]};
f["flambe.script.Parallel"]=ld;ld.__name__=["flambe","script","Parallel"];ld.__interfaces__=[Oe];ld.prototype={add:function(a){this._runningActions.push(a)},update:function(a,b){for(var c=!0,d=0,e=0,h=this._runningActions.length;e<h;){var n=e++,g=this._runningActions[n];if(null!=g){var f=g.update(a,b);0<=f?(this._runningActions[n]=null,this._completedActions.push(g),f>d&&(d=f)):c=!1}}return c?(this._runningActions=this._completedActions,this._completedActions=[],d):-1},__class__:ld};var sb=function(){k.call(this);
this.stopAll()};f["flambe.script.Script"]=sb;sb.__name__=["flambe","script","Script"];sb.__super__=k;sb.prototype=l(k.prototype,{get_name:function(){return"Script_56"},run:function(a){a=new ki(a);this._handles.push(a);return a},stopAll:function(){this._handles=[]},onUpdate:function(a){for(var b=0;b<this._handles.length;){var c=this._handles[b];c.removed||0<=c.action.update(a,this.owner)?this._handles.splice(b,1):++b}},__class__:sb});var ki=function(a){this.removed=!1;this.action=a};f["flambe.script._Script.Handle"]=
ki;ki.__name__=["flambe","script","_Script","Handle"];ki.__interfaces__=[cc];ki.prototype={dispose:function(){this.removed=!0;this.action=null},__class__:ki};var Za=function(a){this._idx=0;this._runningActions=null!=a?a.slice():[]};f["flambe.script.Sequence"]=Za;Za.__name__=["flambe","script","Sequence"];Za.__interfaces__=[Oe];Za.prototype={add:function(a){this._runningActions.push(a)},removeAll:function(){this._idx=0;this._runningActions=[]},update:function(a,b){for(var c=0;;){var d=this._runningActions[this._idx];
if(null!=d)if(d=d.update(a-c,b),0<=d)c+=d;else return-1;++this._idx;if(this._idx>=this._runningActions.length){this._idx=0;break}else if(c>a)return-1}return c},__class__:Za};var li=function(a,b,c){this._strengthX=a;this._strengthY=b;this._duration=c;this._elapsed=0};f["flambe.script.Shake"]=li;li.__name__=["flambe","script","Shake"];li.__interfaces__=[Oe];li.prototype={update:function(a,b){var c=b._compMap.Sprite_5;null==this._jitterX&&(this._jitterX=new Pf(c.x._value,this._strengthX),this._jitterY=
new Pf(c.y._value,this._strengthY),c.x.set_behavior(this._jitterX),c.y.set_behavior(this._jitterY));this._elapsed+=a;if(this._elapsed>=this._duration){var d=this._elapsed-this._duration;c.x._behavior==this._jitterX&&c.x.set__(this._jitterX.base);c.y._behavior==this._jitterY&&c.y.set__(this._jitterY.base);this._jitterY=this._jitterX=null;this._elapsed=0;return a-d}return-1},__class__:li};var pc=f["flambe.subsystem.RendererType"]={__ename__:["flambe","subsystem","RendererType"],__constructs__:["Stage3D",
"WebGL","Canvas"]};pc.Stage3D=["Stage3D",0];pc.Stage3D.toString=s;pc.Stage3D.__enum__=pc;pc.WebGL=["WebGL",1];pc.WebGL.toString=s;pc.WebGL.__enum__=pc;pc.Canvas=["Canvas",2];pc.Canvas.toString=s;pc.Canvas.__enum__=pc;pc.__empty_constructs__=[pc.Stage3D,pc.WebGL,pc.Canvas];var mi=function(){};f["flambe.swf.Symbol"]=mi;mi.__name__=["flambe","swf","Symbol"];mi.prototype={__class__:mi};var ni=function(a,b){this._name=a.symbol;var c=a.rect;this.texture=b.subTexture(c[0],c[1],c[2],c[3]);c=a.origin;null!=
c?(this.anchorX=c[0],this.anchorY=c[1]):this.anchorY=this.anchorX=0};f["flambe.swf.BitmapSymbol"]=ni;ni.__name__=["flambe","swf","BitmapSymbol"];ni.__interfaces__=[mi];ni.prototype={createSprite:function(){var a=new ta(this.texture);a.setAnchor(this.anchorX,this.anchorY);return a},__class__:ni};var Sl=function(a,b){this._file=a.getFile(b+"/library.json");var c=JSON.parse(this._file.toString());this._symbols=new N;this.frameRate=c.frameRate;for(var d=[],e=0,h=c.movies;e<h.length;){var n=h[e];++e;n=
new oi(this,n);d.push(n);this._symbols.set(n._name,n)}c=c.textureGroups;(1!=c[0].scaleFactor||1<c.length)&&null;c=c[0].atlases;for(e=0;e<c.length;){var g=c[e];++e;h=a.getTexture(b+"/"+ob.removeFileExtension(g.file));n=0;for(g=g.textures;n<g.length;){var f=g[n];++n;f=new ni(f,h);this._symbols.set(f._name,f)}}for(c=0;c<d.length;){h=d[c];++c;e=0;for(h=h.layers;e<h.length;){n=h[e];++e;n=n.keyframes;g=n.length;for(f=0;f<g;){var i=f++,j=n[i];if(null!=j.symbolName){var k=this._symbols.get(j.symbolName);
j.symbol=k}if(j.tweened&&1==j.duration&&i+1<g&&(i=n[i+1],!i.visible||null==i.symbolName))j.visible=!1}}}};f["flambe.swf.Library"]=Sl;Sl.__name__=["flambe","swf","Library"];Sl.prototype={createSprite:function(a,b){null==b&&(b=!0);var c=this._symbols.get(a);if(null==c){if(b)throw ob.withFields("Missing symbol",["name",a]);return null}return c.createSprite()},__class__:Sl};var Jg=function(a){this._looped=null;A.call(this);this.symbol=a;this.speed=new J(1);this._animators=Array(a.layers.length);for(var b=
0,c=this._animators.length;b<c;){var d=b++;this._animators[d]=new Tl(a.layers[d])}this._position=this._frame=0;this["goto"](1)};f["flambe.swf.MovieSprite"]=Jg;Jg.__name__=["flambe","swf","MovieSprite"];Jg.__super__=A;Jg.prototype=l(A.prototype,{getLayer:function(a,b){null==b&&(b=!0);for(var c=0,d=this._animators;c<d.length;){var e=d[c];++c;if(e.layer.name==a)return e.content}if(b)throw ob.withFields("Missing layer",["name",a]);return null},onAdded:function(){A.prototype.onAdded.call(this);for(var a=
0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.addChild(c.content)}},onRemoved:function(){A.prototype.onRemoved.call(this);for(var a=0,b=this._animators;a<b.length;){var c=b[a];++a;this.owner.removeChild(c.content)}},onUpdate:function(a){A.prototype.onUpdate.call(this,a);this.speed.update(a);switch(this._flags&384){case 0:this._position+=this.speed._value*a;this._position>this.symbol.duration&&(this._position%=this.symbol.duration,null!=this._looped&&this._looped.emit());break;case 256:this._flags&=
-257}this["goto"](this._position*this.symbol.frameRate)},"goto":function(a){if(this._frame!=a){if(a<this._frame)for(var b=0,c=this._animators;b<c.length;){var d=c[b];++b;d.needsKeyframeUpdate=!0;d.keyframeIdx=0}b=0;for(c=this._animators;b<c.length;)d=c[b],++b,d.composeFrame(a);this._frame=a}},set_position:function(a){return this._position=Ib.clamp(a,0,this.symbol.duration)},get_looped:function(){null==this._looped&&(this._looped=new ka);return this._looped},set_pixelSnapping:function(a){for(var b=
0,c=this._animators;b<c.length;){var d=c[b];++b;d.setPixelSnapping(a)}return A.prototype.set_pixelSnapping.call(this,a)},rewind:function(){this._position=0;this._flags|=256},__class__:Jg,__properties__:l(A.prototype.__properties__,{get_looped:"get_looped",set_position:"set_position"})});var Tl=function(a){this.keyframeIdx=0;this.needsKeyframeUpdate=!1;this.layer=a;this.content=new r;if(a.empty)this._sprites=null;else{this._sprites=Array(a.keyframes.length);for(var b=0,c=this._sprites.length;b<c;){var d=
b++,e=a.keyframes[d];this._sprites[d]=0<d&&a.keyframes[d-1].symbol==e.symbol?this._sprites[d-1]:null==e.symbol?new A:e.symbol.createSprite()}this.content.add(this._sprites[0])}};f["flambe.swf._MovieSprite.LayerAnimator"]=Tl;Tl.__name__=["flambe","swf","_MovieSprite","LayerAnimator"];Tl.prototype={composeFrame:function(a){if(null!=this._sprites){var b=this.layer.keyframes,c=b.length-1;if(a>this.layer.frames)this.content._compMap.Sprite_5.set_visible(!1),this.keyframeIdx=c,this.needsKeyframeUpdate=
!0;else{for(;this.keyframeIdx<c&&b[this.keyframeIdx+1].index<=a;)++this.keyframeIdx,this.needsKeyframeUpdate=!0;var d;this.needsKeyframeUpdate?(this.needsKeyframeUpdate=!1,d=this._sprites[this.keyframeIdx],d!=this.content._compMap.Sprite_5&&(ja.getClass(d)==Jg&&d.rewind(),this.content.add(d))):d=this.content._compMap.Sprite_5;var e=b[this.keyframeIdx],h=e.visible&&null!=e.symbol;d.set_visible(h);if(h){var h=e.x,n=e.y,g=e.scaleX,f=e.scaleY,i=e.skewX,j=e.skewY,k=e.alpha;if(e.tweened&&this.keyframeIdx<
c){a=(a-e.index)/e.duration;c=e.ease;if(0!=c){var l;0>c?(l=1-a,l=1-l*l,c=-c):l=a*a;a=c*l+(1-c)*a}b=b[this.keyframeIdx+1];h+=(b.x-h)*a;n+=(b.y-n)*a;g+=(b.scaleX-g)*a;f+=(b.scaleY-f)*a;i+=(b.skewX-i)*a;j+=(b.skewY-j)*a;k+=(b.alpha-k)*a}b=d.getLocalMatrix();a=Math.sin(i);i=Math.cos(i);c=Math.sin(j);j=Math.cos(j);b.set(j*g,c*g,-a*f,i*f,h,n);b.translate(-e.pivotX,-e.pivotY);d.alpha.set__(k)}}}},setPixelSnapping:function(a){for(var b=0,c=this._sprites;b<c.length;){var d=c[b];++b;d.set_pixelSnapping(a)}},
__class__:Tl};var oi=function(a,b){this._name=b.id;this.frameRate=a.frameRate;this.frames=0;this.layers=Array(b.layers.length);for(var c=0,d=this.layers.length;c<d;){var e=c++,h=new Ul(b.layers[e]);this.frames=Math.max(h.frames,this.frames);this.layers[e]=h}this.duration=this.frames/this.frameRate};f["flambe.swf.MovieSymbol"]=oi;oi.__name__=["flambe","swf","MovieSymbol"];oi.__interfaces__=[mi];oi.prototype={createSprite:function(){return new Jg(this)},__class__:oi};var Ul=function(a){this.empty=!0;
this.name=a.name;var b=null;this.keyframes=Array(a.keyframes.length);for(var c=0,d=this.keyframes.length;c<d;){var e=c++,b=new Vl(a.keyframes[e],b);this.keyframes[e]=b;this.empty=this.empty&&null==b.symbolName}this.frames=null!=b?b.index+b.duration:0};f["flambe.swf.MovieLayer"]=Ul;Ul.__name__=["flambe","swf","MovieLayer"];Ul.prototype={__class__:Ul};var Vl=function(a,b){this.ease=0;this.visible=this.tweened=!0;this.alpha=1;this.skewX=this.skewY=this.pivotX=this.pivotY=0;this.scaleX=this.scaleY=1;
this.x=this.y=0;this.symbol=null;this.index=null!=b?b.index+b.duration:0;this.duration=a.duration;this.label=a.label;this.symbolName=a.ref;var c=a.loc;null!=c&&(this.x=c[0],this.y=c[1]);c=a.scale;null!=c&&(this.scaleX=c[0],this.scaleY=c[1]);c=a.skew;null!=c&&(this.skewX=c[0],this.skewY=c[1]);c=a.pivot;null!=c&&(this.pivotX=c[0],this.pivotY=c[1]);null!=a.alpha&&(this.alpha=a.alpha);null!=a.visible&&(this.visible=a.visible);null!=a.tweened&&(this.tweened=a.tweened);null!=a.ease&&(this.ease=a.ease)};
f["flambe.swf.MovieKeyframe"]=Vl;Vl.__name__=["flambe","swf","MovieKeyframe"];Vl.prototype={__class__:Vl};var Al=function(){};f["flambe.util.Assert"]=Al;Al.__name__=["flambe","util","Assert"];Al.that=function(){};var Th=function(){};f["flambe.util.BitSets"]=Th;Th.__name__=["flambe","util","BitSets"];Th.set=function(a,b,c){return c?a|b:a&~b};var tf=function(){this.success=new O;this.error=new O;this.progressChanged=new ka;this.hasResult=!1;this._total=this._progress=0};f["flambe.util.Promise"]=tf;
tf.__name__=["flambe","util","Promise"];tf.prototype={get_result:function(){if(!this.hasResult)throw"Promise result not yet available";return this._result},set_result:function(a){if(this.hasResult)throw"Promise result already assigned";this._result=a;this.hasResult=!0;this.success.emit(a);return a},get:function(a){return this.hasResult?(a(this._result),null):this.success.connect(a).once()},set_progress:function(a){this._progress!=a&&(this._progress=a,this.progressChanged.emit());return a},set_total:function(a){this._total!=
a&&(this._total=a,this.progressChanged.emit());return a},__class__:tf,__properties__:{set_total:"set_total",set_progress:"set_progress",set_result:"set_result",get_result:"get_result"}};var pi=function(a){tf.call(this);this._promises=a.slice();this._successCount=0;this._disposer=new xb;this.onProgressChanged();for(var a=this._promises,b=0;b<a.length;){var c=a[b];++b;this._disposer.connect1(c.error,m(this,this.onError));this._disposer.connect0(c.progressChanged,m(this,this.onProgressChanged));c=c.get(m(this,
this.onSuccess));null!=c&&this._disposer.add(c)}};f["flambe.util.MultiPromise"]=pi;pi.__name__=["flambe","util","MultiPromise"];pi.__super__=tf;pi.prototype=l(tf.prototype,{onSuccess:function(){if(null!=this._promises&&(++this._successCount,this._successCount>=this._promises.length)){for(var a=[],b=0,c=this._promises;b<c.length;){var d=c[b];++b;a.push(d.get_result())}this.finalize();this.set_result(a)}},onError:function(a){null!=this._promises&&(this.finalize(),this.error.emit(a))},onProgressChanged:function(){if(null!=
this._promises){for(var a=this._total=this._progress=0,b=this._promises;a<b.length;){var c=b[a];++a;this._progress+=c._progress;this._total+=c._total}this.progressChanged.emit()}},finalize:function(){this._disposer.dispose();this._promises=null},__class__:pi});var ka=function(a){zb.call(this,a)};f["flambe.util.Signal0"]=ka;ka.__name__=["flambe","util","Signal0"];ka.__super__=zb;ka.prototype=l(zb.prototype,{connect:function(a,b){null==b&&(b=!1);return this.connectImpl(a,b)},emit:function(){var a=this;
this._head==zb.DISPATCHING_SENTINEL?this.defer(function(){a.emitImpl()}):this.emitImpl()},emitImpl:function(){for(var a=this.willEmit(),b=a;null!=b;)b._listener(),b.stayInList||b.dispose(),b=b._next;this.didEmit(a)},__class__:ka});var xl=function(a){this.next=null;this.fn=a};f["flambe.util._SignalBase.Task"]=xl;xl.__name__=["flambe","util","_SignalBase","Task"];xl.prototype={__class__:xl};var ob=function(){};f["flambe.util.Strings"]=ob;ob.__name__=["flambe","util","Strings"];ob.getFileExtension=function(a){var b=
a.lastIndexOf(".");return 0<b?Q.substr(a,b+1,null):null};ob.removeFileExtension=function(a){var b=a.lastIndexOf(".");return 0<b?Q.substr(a,0,b):a};ob.getUrlExtension=function(a){var b=a.lastIndexOf("?");0<=b&&(a=Q.substr(a,0,b));b=a.lastIndexOf("/");0<=b&&(a=Q.substr(a,b+1,null));return ob.getFileExtension(a)};ob.joinPath=function(a,b){0<a.length&&47!=a.charCodeAt(a.length-1)&&(a+="/");return a+b};ob.withFields=function(a,b){var c=b.length;if(0<c){for(var a=0<a.length?a+" [":a+"[",d=0;d<c;){0<d&&
(a+=", ");var e=b[d],h=b[d+1];if(y.is(h,Error)){var n=h.stack;null!=n&&(h=n)}a+=e+"="+y.string(h);d+=2}a+="]"}return a};var qi=function(){k.call(this);this.sdk=new sc;x.uncaughtError.connect((Fc=this.sdk,m(Fc,Fc.onException)));ya.onSuspendToggle=function(a){x.root.add(new Of(a?0:1))}};f["flambesdk.SDKComponent"]=qi;qi.__name__=["flambesdk","SDKComponent"];qi.__super__=k;qi.prototype=l(k.prototype,{get_name:function(){return"SDKComponent_1"},onUpdate:function(a){this.sdk.onUpdate(a)},__class__:qi});
var aa=function(){};f["game.Analytics"]=aa;aa.__name__=["game","Analytics"];aa.init=function(){null!=j.config.canada_tracking&&(aa.canadaTrackingEnabled=j.config.canada_tracking.enabled);oa.initDeltaDNA(j.config,aa.onDeltaDNAReady)};aa.onDeltaDNAReady=function(){aa.isReady=!0;F.isNewPlayer&&aa.track("newPlayer",{});aa.track("gameStarted");F.trackClientDevice()};aa.track=function(a,b){null==b&&(b={});F.track(a,b)};aa.trackMatchStarted=function(){aa.track("matchStarted",{matchID:j.matchId(),gamemodeName:j.modeToString(),
characterName:j.players[0].name.toUpperCase()})};aa.trackMatchSummary=function(){aa.track("matchSummary",{userLevel:j.userLevel(),matchID:j.matchId(),gamemodeName:j.modeToString(),characterName:j.players[0].name.toUpperCase(),opponentName:j.players[1].name.toUpperCase(),dunkScored:j.dunkSuccess,stealsScored:j.steals,megaDunksScored:j.megaDunks,superAbilityActivated:j.megaDunks,pointsScored:j.homeScore,roundsPlayed:j.turn,timeSpentInMatch:j.time})};aa.trackPickup=function(a){aa.track("powerUpUsed",
{matchID:j.matchId(),gamemodeName:j.modeToString(),characterName:j.players[0].name.toUpperCase(),powerUpName:a})};aa.trackAchievement=function(a){aa.track("achievementUnlocked",{isPoster:!1,characterSelection:j.players[0].name.toUpperCase(),achievementName:Ta.localize(a.name).text})};aa.trackPoster=function(){aa.track("achievementUnlocked",{isPoster:!0,characterSelection:j.players[0].name.toUpperCase(),achievementName:""})};aa.trackUI=function(a,b){aa.track("uiInteraction",{UIName:a,UIAction:"Click",
UIType:"Button",UILocation:b})};aa.trackPlayButton=function(){aa.canadaTrackingEnabled&&x._platform.getExternal().call("trackFlashEvent",["Show Title: Game Title","play","true"])};aa.emitSdkEvent=function(a,b){Sc.sendGameEvent(a,b)};var Gc=function(){};f["game.Main"]=Gc;Gc.__name__=["game","Main"];Gc.main=function(){kb.init();x.init();-1!=Xa.getCurrentURL().indexOf("editor.html")&&(kb.enabled=!1);q.init(o.width,o.height);var a=new oa(!0);x.root.add(a);I.setScenes(ri.scenes);I.onChange.connect(Gc.onSceneChange);
C.loadPacks(["config","ui_loading"],Gc.onInitPacksReady)};Gc.onSceneChange=function(){u.killAll()};Gc.onInitPacksReady=function(){j.init();W.parse(Pe.list);j.loadConfig("config.json");aa.init();aa.emitSdkEvent("onLoadingStart");Ga.checkPiracy(j.config.nick.url);oa.configure(j.config);I.change("Loading",I.createInstantTransition());Ob.instance.load(q.slow?"text,fonts,ui,ui_title,ui_mode,levels,actors,ai".split(","):"text,fonts,ui,ui_posters,ui_htp,ui_title,ui_stats,ui_level,ui_character,ui_mode,ui_win,ui_win_multi,ui_preview,ui_hud,ui_pause,particles_fx,sprites_platforms,levels,actors,ai,sprites_pack".split(","),
function(){Ob.instance.fill(Gc.onBasePacksLoaded)})};Gc.onBasePacksLoaded=function(){p.loadSounds(Gc.getSoundPack(),Gc.onSoundsLoaded);E.setSharedAssets("ui");S.defaultTransform="uppercase";S.addFontPack(C.getPack("fonts"));Ta.loadXML();Tc.init("actors",Sm.components,!0);aa.emitSdkEvent("onLoadingEnd");W.registerPopup(new tb);Oa.init();I.change(ri.DefaultScene)};Gc.onSoundsLoaded=function(){p.defaultMusicVolume=0.6;p.playMusic("menu")};Gc.getSoundPack=function(){if(q.mobile){if(!q.slow||q.android)return j.config.announcer=
!1,"sound_mobile";j.config.announcer=!1;return"sound_mobile_slow"}return"sound"};var D=function(a){null==a&&(a=!0);this._disposer=new xb;Ne.call(this,a)};f["stolo.ui.BaseScene"]=D;D.__name__=["stolo","ui","BaseScene"];D.__super__=Ne;D.prototype=l(Ne.prototype,{dispose:function(){Ne.prototype.dispose.call(this);this.set_pack(null)},loadAssets:function(a,b){null==b&&(b=!0);this._loadedPackName=a;this._autoDisposePack=b;C.loadPack(a,m(this,this.onAssetsLoaded))},onAssetsLoaded:function(a){this.set_pack(a)},
onAssetsReady:function(){},onStart:function(){this.owner.add(this._disposer);this.makeReady()},makeReady:function(){if(!this.isReady&&!(null==this._pack||null==this.owner))this.onAssetsReady(),this.isReady=!0},createButton:function(a,b,c,d,e,h){null==d&&(d="buttons");a=E.createButton(a,b,c,d,this.getPack(h));this.addSprite(a,e);return a},createImage:function(a,b,c){a=E.createImage(a,this.getPack(c));this.addSprite(a,b);return a},createText:function(a,b,c,d){a=S.getLocalizedTextSprite(a,b,0,0,d);this.addSprite(a,
c);return a},createTextSprite:function(a,b,c){b=S.getTextSprite(b,null,0,0);b.set_text(a);this.addSprite(b,c);return b},addSprite:function(a,b){null==b&&(b=this.owner);return E.addSprite(a,b)},getTexture:function(a,b){return E.getTexture(a,this.getPack(b))},getPack:function(a){null==a&&(a=this._pack);null==a&&(a=E.get_sharedAssets());return a},get_pack:function(){return this._pack},set_pack:function(a){null!=this._pack&&null!=this._loadedPackName&&this._autoDisposePack&&this._pack!=a&&(C.disposePack(this._loadedPackName),
this._loadedPackName=null);this._pack=a;null!=a&&this.makeReady();return this._pack},__class__:D,__properties__:l(Ne.prototype.__properties__,{set_pack:"set_pack",get_pack:"get_pack"})});var ae=function(a){this._time=0;D.call(this);this._packName=a};f["stolo.ui.PreloadingScene"]=ae;ae.__name__=["stolo","ui","PreloadingScene"];ae.__super__=D;ae.prototype=l(D.prototype,{dispose:function(){D.prototype.dispose.call(this);this._loader=null},onStart:function(){D.prototype.onStart.call(this);null==this._packName&&
(this._packName=ae.defaultPack);this.loadAssets(this._packName,!1)},onUpdate:function(a){D.prototype.onUpdate.call(this,a);this._time+=a},load:function(a,b){this.set_loader(C.loadPacks(a,b));return this._loader},setProgress:function(){},set_loader:function(a){this._loader=a;null!=this._loader&&this._disposer.add(this._loader.progressChanged.connect(m(this,this.onLoaderProgress)));return this._loader},onLoaderProgress:function(){this.setProgress(this._loader._progress/this._loader._total)},__class__:ae,
__properties__:l(D.prototype.__properties__,{set_loader:"set_loader"})});var Ob=function(){ae.call(this);Ob.instance=this};f["game.ui.Loading"]=Ob;Ob.__name__=["game","ui","Loading"];Ob.__super__=ae;Ob.prototype=l(ae.prototype,{dispose:function(){ae.prototype.dispose.call(this);Ob.instance==this&&(Ob.instance=null)},fill:function(a){var b=new eb(Hc.COLOR_FILL,o.width,o.height);b.setAlpha(0);this.addSprite(b);u.to(b,{alpha:1},{time:0.3,delay:0.1,ease:t.quintOut,onComplete:a})},onAssetsReady:function(){this.createImage("bg");
var a=new Ca("loading","ui_loading");a.speed.set__(0.7);this.owner.addChild((new r).add(a));a.centerAnchor().setXY(0.5*o.width+3,0.5*o.height-35);this._ellipse1=this.createImage("ellipse1");this._ellipse1.set_pixelSnapping(!1);this._ellipse1.centerAnchor().setXY(0.5*o.width,0.5*o.height);this._ellipse2=this.createImage("ellipse2");this._ellipse2.set_pixelSnapping(!1);this._ellipse2.centerAnchor().setXY(0.5*o.width,0.5*o.height);a=new rf(this._pack,"loading");this._txtProgress=new Pc(a);this.owner.addChild((new r).add(this._txtProgress));
this._txtProgress.setXY(0.5*o.width-110,0.5*o.height-75)},onUpdate:function(a){var b=this._ellipse1.rotation;b.set__(b._value+a*Ob.speed1);b=this._ellipse2.rotation;b.set__(b._value+a*Ob.speed2)},setProgress:function(a){null!=this._txtProgress&&this._txtProgress.set_text(Math.floor(100*a)+"%")},__class__:Ob});var si=function(){D.call(this)};f["game.ui.Gameplay"]=si;si.__name__=["game","ui","Gameplay"];si.__super__=D;si.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);j.gameMode==
Z.TOURNAMENT&&j.save.levelNotNew(j.currentLevel);this._gameEntity=new r;this._gameEntity.add(new A);this._gameSystem=new ti;this._gameEntity.add(this._gameSystem);this.owner.addChild(this._gameEntity);this.owner.addChild(this._gameSystem.hud.container);p.playMusic("gameplay");aa.trackMatchStarted()},onRemoved:function(){this._gameSystem=this._gameEntity=null;for(var a=za.getPacks(j.currentLevel),b=0;b<a.length;){var c=a[b];++b;C.disposePack(c)}Aa.clearCache();D.prototype.onRemoved.call(this)},__class__:si});
var ui=function(){this._positions=[{x:275,y:255,direction:1},{x:685,y:255,direction:-1},{x:61,y:255,direction:1},{x:899,y:255,direction:-1}];D.call(this)};f["game.ui.GameplayLoading"]=ui;ui.__name__=["game","ui","GameplayLoading"];ui.__super__=D;ui.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);this.loadAssets("ui_preview")},dispose:function(){D.prototype.dispose.call(this)},onUpdate:function(a){D.prototype.onUpdate.call(this,a);if(null!=this._ellipse){var b=this._ellipse.rotation;
b.set__(b._value+90*a)}},onAssetsReady:function(){this._uiPack=C.getPack("ui");this.createImage("bg");var a=this.createText(j.isPassNPlay()?"MODE_PASS_N_PLAY":"MODE_"+j.modeToString().toUpperCase(),"36_white");a.setXY(0.5*o.width,45);a.setAlign(X.Center);a=this.createText(j.isPassNPlay()?"ALL_STARS_"+j.modeToString().toUpperCase():j.currentLevel,"17_orange");a.setXY(0.5*o.width,85);a.setAlign(X.Center);for(var a=j.players.length,b=0;b<a;){var c=b++;this.createPlayer(a-1-c)}this.addTips();this._btnPlay=
this.createButton(m(this,this.onPlay),"btn_play",null,null,null,this._uiPack);this._btnPlay.setXY(897,o.getModifiedHeight()-80);this._btnPlay.centerAnchor();this._btnPlay.set_visible(!1);this._btnPlay.scaleX.set_behavior(new Cc(1.1,1,0.35));this._btnPlay.scaleY.set_behavior(new Cc(1.1,1,0.35));this._packs=za.getPacks(j.currentLevel);this.load(this._packs.shift(),m(this,this.onPacksLoaded))},load:function(a,b){this._loader=C.loadPack(a,b)},onPacksLoaded:function(){0<this._packs.length?this.load(this._packs.shift(),
m(this,this.onPacksLoaded)):this._btnPlay.set_visible(!0)},onPlay:function(a){a.disable();a.set_visible(!1);p.play("click","UI");aa.trackUI("Play","Game Preview");I.change("gameplay")},createPlayer:function(a){var b=j.players[a],a=this._positions[a],c=b.name;-1==a.direction&&b.accessoryFlip&&(c+="_b",a.direction=1,a.x-=105);b=this.createImage(c,null,this._pack);b.centerAnchor().setXY(a.x,a.y);b.setScaleXY(0.8*a.direction,0.8)},addTips:function(){var a=this.createImage("blackbar");a.setXY(0,450);var b=
this.createImage("icon_tip");b.centerAnchor().setXY(85,0.5*a.getNaturalHeight()+3);a.owner.addChild(b.owner);b=this.createText("TIP_"+Math.floor(8*Math.random()+1),"21_white");b.setWrapWidth(600);b.setXY(125,0.5*a.getNaturalHeight()-0.5*b.getNaturalHeight()+3);a.owner.addChild((new r).add(b));b=this.createImage("ball",new r);b.centerAnchor().setXY(a.getNaturalWidth()-35,0.5*a.getNaturalHeight()+3);a.owner.addChild(b.owner);this._ellipse=this.createImage("ellipse",new r);this._ellipse.centerAnchor().setXY(b.x._value,
b.y._value);this._ellipse.set_pixelSnapping(!1);a.owner.addChild(this._ellipse.owner)},__class__:ui});var vi=function(){D.call(this)};f["game.editor.Editor"]=vi;vi.__name__=["game","editor","Editor"];vi.__super__=D;vi.prototype=l(D.prototype,{onAdded:function(){this._entity=new r;this._entity.add(new A);this._system=new Uc(za.get(j.currentLevel));this._entity.add(this._system);this.owner.addChild(this._entity)},__class__:vi});var wi=function(){Ob.call(this)};f["game.editor.EditorLoading"]=wi;wi.__name__=
["game","editor","EditorLoading"];wi.__super__=Ob;wi.prototype=l(Ob.prototype,{dispose:function(){Ob.prototype.dispose.call(this)},onAssetsReady:function(){Ob.prototype.onAssetsReady.call(this);this.load(za.getPacks(j.currentLevel,!0),m(this,this.onPacksLoaded))},onPacksLoaded:function(){I.change("editor")},__class__:wi});var Uf=function(){D.call(this,!1)};f["game.ui.GameplayWin"]=Uf;Uf.__name__=["game","ui","GameplayWin"];Uf.onPlay=function(){p.play("click","UI");aa.trackUI("EXIT","Win screen");
if(j.gameMode==Z.TOURNAMENT&&j.hasWon){if("level6"==j.currentLevel){I.change("End");return}j.currentLevel=za.get(j.currentLevel).unlock;j.gameType=Kg.levels.get(j.currentLevel).type}j.setRandomOpponent();j.gameMode==Z.TOURNAMENT?I.change("GameplayLoading"):I.change("Mode")};Uf.__super__=D;Uf.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);this._uiPack=C.getPack("ui");this.loadAssets("ui_win")},dispose:function(){C.disposePack("ui_win");D.prototype.dispose.call(this)},onAssetsReady:function(){p.setMusicVolume(0,
0);u.delayCallTo(function(){p.setMusicVolume(1,3);p.playMusic("menu")},1);this.createImage("bg");var a=this.createText(j.hasWon?"WIN_TITLE":"FAIL_TITLE");a.setXY(o.width/2,88);a.anchorY.set__(a.getNaturalHeight()/2);a.setAlign(X.Center);var b=this.buildConfettiBG(),a=this.createImage("winner_bar"),c=this.createImage("loser_bar"),d=this.createText("SCORE","50_white_shadow",null,{p:j.homeScore});d.setXY(325,85);d.setAlign(X.Center);var e=this.createText("SCORE","50_white_shadow",null,{p:j.awayScore});
e.setXY(635,85);e.setAlign(X.Center);this.createAvatars();j.hasWon?(p.play("win","END"),p.play("win_"+j.player.name,"VO"),a.setXY(0,60),c.setXY(o.width-c.getNaturalWidth(),60)):(p.play("fail","END"),p.play("lose_"+j.player.name,"VO"),a.setScaleXY(-1,1),a.setXY(o.width,60),c.setScaleXY(-1,1),c.setXY(c.getNaturalWidth(),60));a=this.createText("STATS_ATTACKS","17_blue").setXY(o.width/2,200);a.setAlign(X.Center);c=this.createTextSprite(y.string(j.attacks),"36_white",null).setXY(o.width/2,220);c.setAlign(X.Center);
var h=this.createText("STATS_LONG_SHOTS","17_blue").setXY(o.width/2,265);h.setAlign(X.Center);var n=this.createTextSprite(y.string(j.longShots),"36_white",null).setXY(o.width/2,285);n.setAlign(X.Center);var g=this.createText("STATS_MEGA_DUNKS","17_blue").setXY(o.width/2,330);g.setAlign(X.Center);var f=this.createTextSprite(y.string(j.megaDunks),"36_white",null).setXY(o.width/2,350);f.setAlign(X.Center);var i=this.buildConfettiFG(),k=this.createButton(Uf.onPlay,"btn_play",null,null,null,C.getPack("ui"));
k.centerAnchor().setXY(887,o.getModifiedHeight()-65);this.owner.addChild(k.owner);u.delayCallTo(function(){b.start();i.start()},0.5);u.from(d,{x:"-=200"},{time:0.4,onComplete:function(){u.to(d,{scaleX:1.5,scaleY:1.5},{time:0.2,onComplete:function(){u.to(d,{scaleX:1,scaleY:1},{time:0.2},t.quintIn)}},t.quintOut)}},t.bounceOut);u.from(e,{x:"+=200"},{time:0.4,onComplete:function(){u.to(e,{scaleX:1.5,scaleY:1.5},{time:0.2,onComplete:function(){u.to(e,{scaleX:1,scaleY:1},{time:0.2},t.quintIn)}},t.quintOut)}},
t.bounceOut);u.from(c,{y:"-=40",alpha:0},{time:0.4,delay:0.8},t.quadOut);u.from(a,{y:"-=40",alpha:0},{time:0.4,delay:0.8},t.quadOut);u.from(n,{y:"-=40",alpha:0},{time:0.4,delay:1},t.quadOut);u.from(h,{y:"-=40",alpha:0},{time:0.4,delay:1},t.quadOut);u.from(f,{y:"-=40",alpha:0},{time:0.4,delay:1.2},t.quadOut);u.from(g,{y:"-=40",alpha:0},{time:0.4,delay:1.2},t.quadOut);D.prototype.onAssetsReady.call(this)},createAvatars:function(){var a=j.gameType==Ja.TWO_VERSUS_TWO;if(a){var b=this.createCharacter(ca.getDataByName(j.player.partner),
j.hasWon?this._uiPack:this._pack,0.075*o.width,300,1);u.from(b,{x:"-=200"},{time:0.5},t.quintOut);b=this.createCharacter(ca.getDataByName(j.opponent.partner),j.hasWon?this._pack:this._uiPack,0.925*o.width,300,-1);u.from(b,{x:"+=200"},{time:0.5},t.quintOut)}b=this.createCharacter(j.player,j.hasWon?this._uiPack:this._pack,a?0.25*o.width:0.15*o.width,300,1);u.from(b,{x:"-=200"},{time:0.5},t.quintOut);a=this.createCharacter(j.opponent,j.hasWon?this._pack:this._uiPack,a?0.75*o.width:0.85*o.width,300,-1);
u.from(a,{x:"+=200"},{time:0.5},t.quintOut);j.hasWon&&j.config.announcer&&this.playAnnouncer(j.player.name)},playAnnouncer:function(a){p.play("announcer_"+a," ANNOUNCER").get_complete().get_changed().connect(m(this,this.playAnnouncerHtp)).once()},playAnnouncerHtp:function(){p.play("announcer_wins"," ANNOUNCER")},createCharacter:function(a,b,c,d,e){var h="avatar_"+a.name;a.accessoryFlip&&(h+="_b",e*=-1,c-=25*e);a=this.createImage(h,null,b);a.centerAnchor().setXY(c,d).setScaleXY(e,1);return a},buildConfettiBG:function(){var a=
new te(0.333*o.width,o.height);a.autoStart=!1;this.owner.add(a);a.maxCount=80;a.startSpreadY=0.3;a.speed.set__(2);a.speed.animateTo(1,2);a.centerX=j.hasWon?o.width/6:5*o.width/6;return a},buildConfettiFG:function(){var a=new te(0.333*o.width,o.height);a.autoStart=!1;this.owner.addChild((new r).add(a));a.maxCount=20;a.startSpreadY=0.3;a.speed.set__(2);a.speed.animateTo(1,2);a.centerX=j.hasWon?o.width/6:5*o.width/6;return a},__class__:Uf});var xi=function(){this._tie=!1;this._results=[];D.call(this,
!1)};f["game.ui.MultiWin"]=xi;xi.__name__=["game","ui","MultiWin"];xi.__super__=D;xi.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);this.loadAssets("ui_win_multi")},dispose:function(){C.disposePack("ui_win_multi");D.prototype.dispose.call(this)},onAssetsReady:function(){u.delayCallTo(function(){p.playMusic("menu")},0.5);this._uiPack=C.getPack("ui");this._isShootout=j.gameMode==Z.SHOOTOUT;this.createImage("bg");this.createImage("star").centerAnchor().setXY(0.5*o.width,0.5*
o.height);this.buildConfettiBG();for(var a=this.orderPlayers(),b=0,c=j.nbPlayers;b<c;){var d=b++;this.createPlayer(j.nbPlayers-d-1)}!this._tie&&!this._isShootout&&j.config.announcer&&this.playAnnouncer(a.name);b=this.createText(this._tie&&!this._isShootout?"TIE":"PLAYER_WIN","50_white_shadow",new r,{name:Ta.localize(a.name).text});b.setXY(0.5*o.width,15);b.setAlign(X.Center);this.owner.addChild(b.owner);this.buildConfettiFG();a.name==j.player1&&this.updateAchievement();a=this.createButton(m(this,
this.onPlay),"btn_play",null,null,null,C.getPack("ui"));a.centerAnchor().setXY(887,o.getModifiedHeight()-65);this.owner.addChild(a.owner);4==j.nbPlayers&&(a=W.getAchievementByName("ACHIEVEMENT_4_PLAYERS"),a.isComplete()||(a.complete(),W.save()));D.prototype.onAssetsReady.call(this)},onPlay:function(){p.play("click","UI");aa.trackUI("EXIT","Win screen");I.change("Mode")},orderPlayers:function(){var a=j.players.slice();a.sort(m(this,this.sortPlayersByScore));for(var b=-1,c=-1,d=0,e,h=0,n=a.length;h<
n;){var g=h++,b=a[g],b=j.playerScores.get(b.name);e={character:a[g].name,score:b,position:b==c?d:++d};1==d&&b==c&&(this._tie=!0,this._isShootout&&(e.position++,d++));c=b;0==g%2?this._results.unshift(e):this._results.push(e)}return a[0]},sortPlayersByScore:function(a,b){var c=j.playerScores.get(a.name),d=j.playerScores.get(b.name);return c==d?this._isShootout?(c=j.playerTimes.get(a.name),d=j.playerTimes.get(b.name),c<d?-1:1):0:c>d?-1:1},createPlayer:function(a){var b=200*(a+1)+0.5*o.width-100*j.nbPlayers-
100,a=this._results[a],c=E.getTexture(1==a.position?"banner_winner":"banner",this._pack),c=new yi(c);c.setXY(b-80,-85+15*a.position);this.owner.addChild((new r).add(c));c.init(a.score,a.position);c=E.createImage("podium",this._pack);c.centerAnchor().setXY(b,o.height-35+20*a.position);this.owner.addChild((new r).add(c));b=E.createImage("avatar_"+a.character,this._uiPack);b.centerAnchor().setScale(0.84).setXY(75,-125);c.owner.addChild((new r).add(b));this._tie&&1==a.position&&this._isShootout&&(b=E.createText("BEST_TIME",
"17_orange",c.owner),b.setAlign(X.Center),b.setXY(0.5*c.getNaturalWidth(),40))},playAnnouncer:function(a){p.play("announcer_"+a," ANNOUNCER").get_complete().get_changed().connect(m(this,this.playAnnouncerHtp)).once()},playAnnouncerHtp:function(){p.play("announcer_wins"," ANNOUNCER")},buildConfettiBG:function(){var a=new te(0.5*o.width,o.height);a.autoStart=!1;this.owner.add(a);a.maxCount=80;a.startSpreadY=0.3;a.speed.set__(2);a.speed.animateTo(1,2);a.centerX=0.5*o.width;a.start();return a},buildConfettiFG:function(){var a=
new te(0.5*o.width,o.height);a.autoStart=!1;this.owner.addChild((new r).add(a));a.maxCount=40;a.startSpreadY=0.3;a.speed.set__(2);a.speed.animateTo(1,2);a.centerX=0.5*o.width;a.start();return a},updateAchievement:function(){var a="ACHIEVEMENT_"+j.modeToString().toUpperCase()+"_WIN",a=W.getAchievementByName(a);null!=a&&!a.isComplete()&&(a.complete(),W.save())},__class__:xi});var Vf=function(){D.call(this,!1)};f["game.ui.GameplayEnd"]=Vf;Vf.__name__=["game","ui","GameplayEnd"];Vf.onPlay=function(){p.play("click",
"UI");aa.trackUI("EXIT","End game");j.currentLevel=null;I.change("SelectCharacter")};Vf.__super__=D;Vf.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);this.loadAssets("ui_end");p.playMusic("menu",!0)},dispose:function(){C.disposePack("ui_end");D.prototype.dispose.call(this)},onAssetsReady:function(){this.createImage("bg");var a=this.buildConfettiBG(),b=this.createImage("blackbar");b.setXY(0,450);var c=this.createImage("icon_tip");c.centerAnchor().setXY(85,0.5*b.getNaturalHeight()+
3);b.owner.addChild(c.owner);c=this.createText("TIP_"+Math.floor(8*Math.random()+1),"21_white");c.setWrapWidth(600);c.setXY(125,0.5*b.getNaturalHeight()-0.5*c.getNaturalHeight()+3);b.owner.addChild((new r).add(c));b=this.createImage(j.player.name);b.centerAnchor().setXY(0.2*o.width,0.5*o.height-25);var c=j.player.partner,d=-1,e=0.8*o.width;j.player.accessoryFlip&&(c+="_b",d=1,e-=105);c=this.createImage(c);c.centerAnchor().setXY(e,0.5*o.height-25).setScaleXY(d,1);this.createImage("trophy").setXY(327,
136);d=this.createText("END_TITLE","60_white");d.setAlign(X.Center);d.setXY(0.5*o.width,40);e=this.buildConfettiFG();this._btnPlay=this.createButton(Vf.onPlay,"btn_play");this._btnPlay.setXY(897,o.getModifiedHeight()-80);this._btnPlay.centerAnchor();u.from(b,{x:"+=300",alpha:0},{time:0.6,delay:0.3},t.quadOut);u.from(c,{x:"-=300",alpha:0},{time:0.6,delay:0.3},t.quadOut);u.from(d,{y:"+=30",alpha:0},{time:0.6,delay:0.3},t.quadOut);a.start();e.start();this.checkAchievement();D.prototype.onAssetsReady.call(this)},
checkAchievement:function(){j.save.completeTournament(j.player.name);var a=W.getAchievementByName("ACHIEVEMENT_TOURNAMENT");a.isComplete()||(a.complete(),W.save());for(var a=!0,b=0,c=ca.list;b<c.length;){var d=c[b];++b;if(!j.save.isTournamentCompleted(d.name)){a=!1;break}}a&&(a=W.getAchievementByName("ACHIEVEMENT_ALL_TOURNAMENT"),a.isComplete()||(a.complete(),W.save()))},buildConfettiBG:function(){var a=new te(o.width,o.height);a.autoStart=!1;this.owner.addChild((new r).add(a));a.maxCount=100;a.startSpreadY=
0.3;a.speed.set__(2);a.speed.animateTo(1,2);a.centerX=o.width/2;return a},buildConfettiFG:function(){var a=new te(o.width,o.height);a.autoStart=!1;this.owner.addChild((new r).add(a));a.maxCount=20;a.startSpreadY=0.3;a.speed.set__(2);a.speed.animateTo(1,2);a.centerX=o.width/2;return a},__class__:Vf});var Hc=function(){D.call(this,!1)};f["game.ui.Title"]=Hc;Hc.__name__=["game","ui","Title"];Hc.__super__=D;Hc.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);Hc.eventSent||aa.emitSdkEvent("onTitleScreenStart");
this.loadAssets("ui_title");p.playMusic("menu")},dispose:function(){C.disposePack("ui_title");C.disposePack("ui_level");C.disposePack("ui_stats");C.disposePack("ui_posters");C.disposePack("ui_hall");D.prototype.dispose.call(this)},onStart:function(){D.prototype.onStart.call(this);this.bindClick()},onClick:function(){Hc.eventSent||(aa.emitSdkEvent("onTitleScreenEnd"),Hc.eventSent=!0);p.playMusic("menu");aa.trackUI("PLAY","Title");I.change("Mode")},bindClick:function(){var a=this;u.delayCallTo(function(){x._platform.getPointer().up.connect(m(a,
a.onClick)).once()},0.7)},onAssetsReady:function(){D.prototype.onAssetsReady.call(this);this.createImage("bg");var a=this.createImage("logo");a.centerAnchor().setXY(478,179);var b=this.createImage("swoosh");b.centerAnchor().setXY(456,270);var c=new Ca("title_ball","ui_title");c.centerAnchor().setXY(480,260);this.owner.addChild((new r).add(c));this.createImage("lynn").centerAnchor().setXY(360,375);var d=this.createImage("nick");d.centerAnchor().setXY(479,70);var e=this.createImage("basketball");e.centerAnchor().setXY(479,
143);var h=this.createImage("stars");h.centerAnchor().setXY(480,190);var n=this.createImage("2");n.centerAnchor().setXY(480,260);var g=this.createText(x._platform.getTouch().get_supported()?"PLAY_TOUCH":"PLAY","25_white_outline");g.setXY(480,500);g.setAlign(X.Center);var f=new eb(Hc.COLOR_FILL,o.width,o.height);this.addSprite(f);u.to(f,{alpha:0},{time:2,ease:t.quintInOut,delay:0});u.from(a,{y:-400},{time:1,ease:t.backOut,delay:0.5});u.from(b,{y:-400},{time:0.5,ease:t.bounceOut,delay:1});u.from(c,
{y:-400},{time:0.5,ease:t.bounceOut,delay:1});u.from(d,{y:-200},{time:0.35,ease:t.bounceOut,delay:1.2});u.from(e,{y:-200},{time:0.35,ease:t.bounceOut,delay:1.6});u.from(h,{y:-200},{time:0.35,ease:t.bounceOut,delay:2});u.from(n,{alpha:0,scaleX:0,scaleY:0},{time:0.7,ease:t.backOut,delay:2.5});g.alpha.set_behavior(new Cc(1,0.5,0.5))},__class__:Hc});var zi=function(){this._buttons=[];D.call(this,!0)};f["game.ui.SelectMode"]=zi;zi.__name__=["game","ui","SelectMode"];zi.__super__=D;zi.prototype=l(D.prototype,
{onAdded:function(){D.prototype.onAdded.call(this);this.loadAssets("ui_mode");p.playMusic("menu")},dispose:function(){C.disposePack("ui_mode");D.prototype.dispose.call(this)},onAssetsReady:function(){var a=C.getPack("ui");j.config.announcer&&p.play("announcer_select_mode","ANNOUNCER");this._backgroundSprite=this.createImage("bg");this._title=this.createText("MODE_TITLE","36_white");this._title.setAlign(X.Center);this._title.setXY(0.5*o.width,50);this._subtitle=this.createText("MODE_SUBTITLE","17_orange");
this._subtitle.setAlign(X.Center);this._subtitle.setXY(0.5*o.width,85);this._btnAchievement=this.createButton(m(this,this.onAchievement),"btn_achievements",null,null,null,a);this._btnAchievement.setXY(o.width-this._btnAchievement.getNaturalWidth()-25,25);this._btnQuickPlay=this.createButton(m(this,this.onQuickmatch),"btn_quick_play");this._btnQuickPlay.setXY(48,134);a=this.createImage("quick_play",this._btnQuickPlay.owner,this._pack);a.set_pointerEnabled(!1);a.setXY(-12,164);a=this.createText("MODE_QUICK_PLAY",
"21_white",a.owner);a.setAlign(X.Right);a.setWrapWidth(100);a.setXY(65,40-0.5*a.getNaturalHeight());this.owner.addChild(this._btnQuickPlay.owner);this._buttons.push(this._btnQuickPlay);this._btnChampionship=this.createButton(m(this,this.onTournament),"btn_championship");this._btnChampionship.setXY(282,195);a=this.createImage("championship",this._btnChampionship.owner,this._pack);a.set_pointerEnabled(!1);a.setXY(-68,153);a=this.createText("MODE_CHAMPIONSHIP","21_white",a.owner);a.setAlign(X.Right);
a.setXY(230,40-0.5*a.getNaturalHeight());this.owner.addChild(this._btnChampionship.owner);this._buttons.push(this._btnChampionship);this._btnAllStars=this.createButton(m(this,this.onAllStars),"btn_pass_n_play");this._btnAllStars.setXY(482,124);a=this.createImage("pass_n_play",this._btnAllStars.owner,this._pack);a.set_pointerEnabled(!1);a.setXY(-12,175);a=this.createText("MODE_PASS_N_PLAY","21_white",a.owner);a.setAlign(X.Right);a.setWrapWidth(120);a.setXY(55,40-0.5*a.getNaturalHeight());this.owner.addChild(this._btnAllStars.owner);
this._buttons.push(this._btnAllStars);this._btnHallOfFame=this.createButton(m(this,this.onHallOfFame),"btn_hall_of_fame");this._btnHallOfFame.setXY(716,223);a=this.createImage("hall_of_fame",this._btnHallOfFame.owner,this._pack);a.set_pointerEnabled(!1);a.setXY(-15,134);a=this.createText("MODE_HALL_OF_FAME","21_white",a.owner);a.setAlign(X.Right);a.setWrapWidth(120);a.setXY(55,40-0.5*a.getNaturalHeight());this.owner.addChild(this._btnHallOfFame.owner);this._buttons.push(this._btnHallOfFame);u.from(this._subtitle,
{y:"-=60",alpha:0},{time:0.7,ease:t.quintOut,delay:0});u.from(this._title,{y:"-=60",alpha:0},{time:0.7,ease:t.quintOut,delay:0.1});u.from(this._btnAchievement,{y:"-=60",alpha:0},{time:0.7,ease:t.quintOut,delay:0.2});for(var b=a=0,c=this._buttons;b<c.length;){var d=c[b];++b;u.from(d,{y:"-=100",alpha:0},{time:0.5,ease:t.backOut,delay:0.06*a});a++}D.prototype.onAssetsReady.call(this)},onStop:function(){D.prototype.onStop.call(this);this._btnHallOfFame=this._btnQuickPlay=this._btnChampionship=this._backgroundSprite=
this._title=null},onAchievement:function(){p.play("click","UI");j.config.announcer&&p.play("announcer_achievements","ANNOUNCER");aa.trackUI("ACHIEVEMENTS","Select mode");I.push("Achievements")},onTournament:function(){p.play("click","UI");j.config.announcer&&p.play("announcer_championship","ANNOUNCER");j.gameMode=Z.TOURNAMENT;aa.trackUI("TOURNAMENT","Select mode");I.change("SelectCharacter")},onQuickmatch:function(){p.play("click","UI");j.config.announcer&&p.play("announcer_quickmatch","ANNOUNCER");
j.gameMode=Z.QUICKMATCH;aa.trackUI("RANDOM GAME","Select mode");I.push("QuickMatchPopup")},onAllStars:function(){p.play("click","UI");j.config.announcer&&p.play("announcer_all_stars","ANNOUNCER");aa.trackUI("ALL STARS","Select mode");I.push("AllStarModePopup")},onHallOfFame:function(){p.play("click","UI");j.config.announcer&&p.play("announcer_hall_of_fame","ANNOUNCER");aa.trackUI("HALL OF FAME","Select mode");I.push("HallOfFame")},__class__:zi});var Ai=function(){this._first=!0;D.call(this,!1)};f["game.ui.widget.QuickMatchPopup"]=
Ai;Ai.__name__=["game","ui","widget","QuickMatchPopup"];Ai.__super__=D;Ai.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);this.loadAssets("ui_mode_popup")},onAssetsLoaded:function(a){D.prototype.onAssetsLoaded.call(this,a);this._uiPack=C.getPack("ui");this._darken=new eb(0,o.width,o.height);this._darken.centerAnchor();this._darken.setAlpha(0.5);this._darken.setXY(0.5*o.width,0.5*o.height);this._darken.get_pointerUp().connect(m(this,this.onClickOutside));this.owner.addChild((new r).add(this._darken));
this._bg=this.createImage("popup",this.owner,this._uiPack);this._bg.centerAnchor();this._bg.setXY(0.5*o.width,0.5*o.height);this.setupType();this.setupDifficulty();this._btnClose=this.createButton(m(this,this.onClose),"btn_quit",null,null,this._bg.owner,this._uiPack);this._btnClose.centerAnchor();this._btnClose.setXY(this._bg.getNaturalWidth(),10);this._btnDone=this.createButton(m(this,this.onDone),"btn_done",null,null,this._bg.owner,this._uiPack);this._btnDone.centerAnchor();this._btnDone.setXY(this._bg.getNaturalWidth(),
this._bg.getNaturalHeight()-10)},setupType:function(){this._typeTitle=this.createText("SELECT_QUICKMATCH_TYPE","21_white",this.owner);this._typeTitle.setAlign(X.Center);this._typeTitle.setXY(0.5*o.width,135);this._typeSelection=this.createImage("btn_round_selection",this.owner,this._pack);this._typeSelection.centerAnchor();this._btn1v1=this.createButton(m(this,this.onSelectType),"btn_1v1",null,null,null,this._pack);this._btn1v1.data=Ja.ONE_VERSUS_ONE;this._btn1v1.centerAnchor();this._btn1v1.setXY(0.5*
o.width-75,215);this._btn2v2=this.createButton(m(this,this.onSelectType),"btn_2v2",null,null,null,this._pack);this._btn2v2.data=Ja.TWO_VERSUS_TWO;this._btn2v2.centerAnchor();this._btn2v2.setXY(0.5*o.width+75,215);this.onSelectType(this._btn1v1)},setupDifficulty:function(){this._difficultyTitle=this.createText("SELECT_DIFFICULTY","21_white",this.owner);this._difficultyTitle.setAlign(X.Center);this._difficultyTitle.setXY(0.5*o.width,290);this._difficultySelection=this.createImage("btn_green_selection",
this.owner,this._pack);this._difficultySelection.centerAnchor();this._btnEasy=this.createLabelButton("EASY",m(this,this.onSelectDifficulty));this._btnEasy.data=Jb.EASY;this._btnEasy.setXY(0.5*o.width-175,365);this._btnMedium=this.createLabelButton("MEDIUM",m(this,this.onSelectDifficulty));this._btnMedium.data=Jb.MEDIUM;this._btnMedium.setXY(0.5*o.width,365);this._btnHard=this.createLabelButton("HARD",m(this,this.onSelectDifficulty));this._btnHard.data=Jb.HARD;this._btnHard.setXY(0.5*o.width+175,365);
this.onSelectDifficulty(this._btnEasy)},onSelectType:function(a){j.gameType=a.data;this._first=!1;this._typeSelection.setXY(a.origin.x,a.origin.y)},onSelectDifficulty:function(a){p.play("click","UI");j.gameDifficulty=a.data;this._difficultySelection.setXY(a.origin.x,a.origin.y)},onClickOutside:function(){p.play("click","UI");I.pop()},onClose:function(){p.play("click","UI");I.pop()},onDone:function(){p.play("click","UI");I.change("SelectCharacter")},createLabelButton:function(a,b){var c=this.createButton(b,
"btn_orange",null,null,this.owner,this._uiPack);c.centerAnchor();var d=this.createText(a,"15_black",c.owner);d.setWrapWidth(120);d.setXY(-60,0.5*-d.getNaturalHeight()-3);d.setAlign(X.Center);return c},__class__:Ai});var Bi=function(){this._first=!0;D.call(this,!1)};f["game.ui.widget.AllStarModePopup"]=Bi;Bi.__name__=["game","ui","widget","AllStarModePopup"];Bi.__super__=D;Bi.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);this.loadAssets("ui_mode_popup")},onAssetsLoaded:function(a){D.prototype.onAssetsLoaded.call(this,
a);this._uiPack=C.getPack("ui");this._darken=new eb(0,o.width,o.height);this._darken.centerAnchor();this._darken.setAlpha(0.5);this._darken.setXY(0.5*o.width,0.5*o.height);this._darken.get_pointerUp().connect(m(this,this.onClickOutside));this.owner.addChild((new r).add(this._darken));this._bg=this.createImage("popup",this.owner,this._uiPack);this._bg.centerAnchor();this._bg.setXY(0.5*o.width,0.5*o.height);this.setupMode();this.setupPlayers();this._btnClose=this.createButton(m(this,this.onClose),"btn_quit",
null,null,this._bg.owner,this._uiPack);this._btnClose.centerAnchor();this._btnClose.setXY(this._bg.getNaturalWidth(),10);this._btnDone=this.createButton(m(this,this.onDone),"btn_done",null,null,this._bg.owner,this._uiPack);this._btnDone.centerAnchor();this._btnDone.setXY(this._bg.getNaturalWidth(),this._bg.getNaturalHeight()-10)},setupMode:function(){this._modeTitle=this.createText("SELECT_MODE","21_white",this.owner);this._modeTitle.setAlign(X.Center);this._modeTitle.setXY(0.5*o.width,135);this._modeSelection=
this.createImage("btn_green_selection",this.owner,this._pack);this._modeSelection.centerAnchor();this._btnShootout=this.createModeButton("ALL_STARS_SHOOTOUT");this._btnShootout.data=Z.SHOOTOUT;this._btnShootout.setXY(0.5*o.width-175,215);this._btnHorse=this.createModeButton("ALL_STARS_HORSE");this._btnHorse.data=Z.HORSE;this._btnHorse.setXY(0.5*o.width,215);this._btnDunk=this.createModeButton("ALL_STARS_DUNK_CHALLENGE");this._btnDunk.data=Z.DUNK_CHALLENGE;this._btnDunk.setXY(0.5*o.width+175,215);
this.onSelectMode(this._btnHorse)},setupPlayers:function(){this._playersTitle=this.createText("SELECT_PLAYERS","21_white",this.owner);this._playersTitle.setAlign(X.Center);this._playersTitle.setXY(0.5*o.width,290);this._playerSelection=this.createImage("btn_round_selection",this.owner,this._pack);this._playerSelection.centerAnchor();this._btn2=this.createButton(m(this,this.onSelectPlayers),"btn_2",null,null,null,this._pack);this._btn2.data=2;this._btn2.centerAnchor();this._btn2.setXY(0.5*o.width-
150,365);this._btn3=this.createButton(m(this,this.onSelectPlayers),"btn_3",null,null,null,this._pack);this._btn3.data=3;this._btn3.centerAnchor();this._btn3.setXY(0.5*o.width,365);this._btn4=this.createButton(m(this,this.onSelectPlayers),"btn_4",null,null,null,this._pack);this._btn4.data=4;this._btn4.centerAnchor();this._btn4.setXY(0.5*o.width+150,365);this.onSelectPlayers(this._btn2)},onSelectMode:function(a){j.gameMode=a.data;!this._first&&j.config.announcer&&p.play("announcer_"+j.modeToString(),
"ANNOUNCER");this._first=!1;this._modeSelection.setXY(a.origin.x,a.origin.y)},onSelectPlayers:function(a){p.play("click","UI");j.nbPlayers=a.data;this._playerSelection.setXY(a.origin.x,a.origin.y)},onClickOutside:function(){p.play("click","UI");I.pop()},onClose:function(){p.play("click","UI");I.pop()},onDone:function(){p.play("click","UI");I.change("SelectCharacter")},createModeButton:function(a){var b=this.createButton(m(this,this.onSelectMode),"btn_green",null,null,this.owner,this._uiPack);b.centerAnchor();
a=this.createText(a,"15_black",b.owner);a.setWrapWidth(120);a.setXY(-60,0.5*-a.getNaturalHeight()-3);a.setAlign(X.Center);return b},__class__:Bi});var Ci=function(){this._players=[];D.call(this,!1)};f["game.ui.widget.AllStarIntroPopup"]=Ci;Ci.__name__=["game","ui","widget","AllStarIntroPopup"];Ci.__super__=D;Ci.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);this._darken=new eb(0,o.width,o.height);this._darken.centerAnchor();this._darken.setAlpha(0.5);this._darken.setXY(0.5*
o.width,0.5*o.height);this.owner.addChild((new r).add(this._darken));this.loadAssets("ui_all_stars")},onAssetsLoaded:function(a){var b=this;D.prototype.onAssetsLoaded.call(this,a);this._bg=this.createImage("popup",this.owner,this._pack);this._bg.centerAnchor();this._bg.setXY(0.5*o.width,0.5*o.height);this._htp=new Di;this.owner.addChild((new r).add(this._htp));this._btnClose=this.createButton(m(this,this.onClose),"btn_done",null,null,this._bg.owner,this._pack);this._btnClose.centerAnchor();this._btnClose.setXY(this._bg.getNaturalWidth()-
25,this._bg.getNaturalHeight()-25);for(var c,a=0,d=j.players.length;a<d;)c=a++,c=new Ei(c),this._bg.owner.addChild((new r).add(c)),this._players.push(c);u.delayCallTo(function(){null!=b._btnClose&&(b._keyboard=x._platform.getKeyboard().up.connect(m(b,b.OnKeyboard)))},0.3)},dispose:function(){D.prototype.dispose.call(this)},onClose:function(){this._btnClose=null;p.play("click","UI");I.pop();x._platform.getKeyboard().up.disconnect(this._keyboard)},OnKeyboard:function(a){if(a.key==i.Enter||a.key==i.Escape)this.onClose(null)},
__class__:Ci});var Fi=function(){D.call(this,!1)};f["game.ui.widget.HallOfFamePopup"]=Fi;Fi.__name__=["game","ui","widget","HallOfFamePopup"];Fi.__super__=D;Fi.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);this.loadAssets("ui_mode_popup")},onAssetsLoaded:function(a){D.prototype.onAssetsLoaded.call(this,a);this._uiPack=C.getPack("ui");this._darken=new eb(0,o.width,o.height);this._darken.centerAnchor();this._darken.setAlpha(0.5);this._darken.setXY(0.5*o.width,0.5*o.height);
this._darken.get_pointerUp().connect(m(this,this.onClickOutside));this.owner.addChild((new r).add(this._darken));this._bg=this.createImage("popup",this.owner,this._uiPack);this._bg.centerAnchor();this._bg.setXY(0.5*o.width,0.5*o.height);this._title=this.createText("MODE_HALL_OF_FAME","21_white",this.owner);this._title.setAlign(X.Center);this._title.setXY(0.5*o.width,125);this._statsImage=this.createImage("icon_stats");this._statsImage.centerAnchor().setXY(0.5*o.width-125,250);this._btnStats=E.createButton(m(this,
this.onStats),"btn_orange","HALL_BTN_STATS","buttons",this._pack);this._btnStats.setXY(0.5*o.width-125-78,350);this.owner.addChild((new r).add(this._btnStats));this._postersImage=this.createImage("icon_posters");this._postersImage.centerAnchor().setXY(0.5*o.width+125,250);this._btnPosters=E.createButton(m(this,this.onPosters),"btn_orange","HALL_BTN_POSTERS","buttons",this._pack);this._btnPosters.setXY(0.5*o.width+125-78,350);this.owner.addChild((new r).add(this._btnPosters));this._btnClose=this.createButton(m(this,
this.onClose),"btn_quit",null,null,null,this._uiPack);this._btnClose.centerAnchor();this._btnClose.setXY(775,90)},onClickOutside:function(){p.play("click","UI");I.pop()},onClose:function(){p.play("click","UI");I.pop()},onStats:function(){p.play("click","UI");j.config.announcer&&p.play("announcer_stats","ANNOUNCER");I.change("Stats")},onPosters:function(){p.play("click","UI");j.config.announcer&&p.play("announcer_posters","ANNOUNCER");I.change("Posters")},__class__:Fi});var Gi=function(){this._index=
0;D.call(this,!0)};f["game.ui.Achievements"]=Gi;Gi.__name__=["game","ui","Achievements"];Gi.__super__=D;Gi.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);this.loadAssets("ui_achievements",!1)},onAssetsReady:function(){D.prototype.onAssetsReady.call(this);this._uiPack=C.getPack("ui");this._bg=this.createImage("bg");this.createAchievements();this._title=this.createText("ACHIEVEMENTS","36_white");this._title.setXY(0.5*o.width,40);this._title.setAlign(X.Center);this.owner.addChild(this._title.owner);
this._btnBack=this.createButton(m(this,this.onBack),"btn_back",null,null,null,this._uiPack);this._btnBack.setXY(25,o.getModifiedHeight()-this._btnBack.getNaturalHeight()-25);this._btnUp=this.createButton(m(this,this.onUp),"arrow");this._btnUp.centerAnchor().setXY(850,150);this._btnDown=this.createButton(m(this,this.onDown),"arrow");this._btnDown.centerAnchor().setXY(850,450).setScaleXY(1,-1)},onBack:function(){p.play("click","UI");I.pop()},onUp:function(){0!=this._index&&(this._index--,this.scroll())},
onDown:function(){this._index!=Pe.list.length-5&&(this._index++,this.scroll())},scroll:function(){u.to(this._container,{y:-(80*this._index)+85},{time:0.7},t.quadOut)},createAchievements:function(){this._container=new A;this._container.setXY(140,85);this.owner.addChild((new r).add(this._container));for(var a,b=0,c=Pe.list.length;b<c;){var d=b++;a=new Hi(W.getAchievementByName(Pe.list[d].name));a.setXY(0,80*d);this._container.owner.addChild((new r).add(a))}this._maskTop=this.createImage("mask_top");
this._maskTop.setXY(0,0);this._maskBottom=this.createImage("mask_bottom");this._maskBottom.setXY(0,o.height-this._maskBottom.getNaturalHeight())},__class__:Gi});var Pd=function(){this._list=ca.list;D.call(this,!0)};f["game.ui.Stats"]=Pd;Pd.__name__=["game","ui","Stats"];Pd.__super__=D;Pd.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);this.loadAssets("ui_stats")},dispose:function(){C.disposePack("ui_stats");D.prototype.dispose.call(this)},onAssetsReady:function(){D.prototype.onAssetsReady.call(this);
this.createImage("bg");this.createImage("icon").centerAnchor().setXY(59,54);var a=this.createText("STATS_TITLE");a.setXY(110,40);this.buildGrid();this._statsScroller=new Ii;this.owner.addChild((new r).add(this._statsScroller));this._statsScroller.init(j.player);this._btnBack=this.createButton(m(this,this.onBack),"btn_back",null,null,null,C.getPack("ui"));this._btnBack.setXY(25,o.getModifiedHeight()-this._btnBack.getNaturalHeight()-25);u.from(a,{y:"-=60",alpha:0},{time:0.7,ease:t.quintOut,delay:0})},
onBack:function(){p.play("click","UI");aa.trackUI("EXIT","Stats");I.change("Mode")},onSelect:function(a){p.play("click","UI");var b=this._list[a.index];if(null==b)throw"No data for button"+a.index;this._selectedButton!=a&&(null!=this._selectedButton&&this._selectedButton.deselect(),j.player=b,this._selectedButton=a,this._selectedButton.select(),this.moveSelector(),this._statsScroller.init(b))},moveSelector:function(){this._selector.x.animateTo(this._selectedButton.origin.x,0.2,t.quadInOut);this._selector.y.animateTo(this._selectedButton.origin.y+
2,0.2,t.quadInOut)},buildGrid:function(){this._buttons=[];this._gridContainer=(new A).setXY(Pd.Grid.x,Pd.Grid.y);this.owner.addChild((new r).add(this._gridContainer));this._selector=this.createImage("selected",this._gridContainer.owner);this._selector.centerAnchor();for(var a=0,b=0,c=ca.list;b<c.length;){var d=c[b];++b;this.addButton(d,a);d==j.player&&(this._selectedButton=this._buttons[a]);a++}this._selector.setXY(this._selectedButton.origin.x,this._selectedButton.origin.y)},addButton:function(a,
b){var c=new Qe(a,m(this,this.onSelect));c.index=b;c.setXY(Pd.Grid.positions[b].x,Pd.Grid.positions[b].y);this._gridContainer.owner.addChild((new r).add(c));this._buttons.push(c)},__class__:Pd});var Ji=function(){this._selectedIndex=-1;this._list=Ha.all;D.call(this,!1)};f["game.ui.Posters"]=Ji;Ji.__name__=["game","ui","Posters"];Ji.__super__=D;Ji.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);C.loadPack("posters_preview",m(this,this.onPreviewLoaded))},onPreviewLoaded:function(){this.loadAssets("ui_posters")},
dispose:function(){C.disposePack("ui_posters");D.prototype.dispose.call(this)},onAssetsReady:function(){D.prototype.onAssetsReady.call(this);this._uiPack=C.getPack("ui");this.createImage("bg");var a=this.createText("POSTERS_TITLE","36_white");a.setXY(120,25);this.createText("POSTERS_SUBTITLE","17_blue").setXY(120,60);this._btnBack=this.createButton(m(this,this.onBack),"btn_back",null,null,null,C.getPack("ui"));this._btnBack.setXY(25,o.getModifiedHeight()-this._btnBack.getNaturalHeight()-25);this.buildPosters();
this._magnifier=this.createButton(m(this,this.onClickMagnifier),"btn_magnifier",null,null,null,this.get_pack());this._magnifier.centerAnchor().setXY(0.5*o.width+70,0.5*o.height+120);this._magnifier.setAlpha(0);this.createImage("mask_l").setXY(0,0);var b=this.createImage("mask_r");b.setXY(o.width-b.getNaturalWidth(),0);this._btnLeft=this.createButton(m(this,this.nextPoster),"arrow").centerAnchor().setXY(50,0.5*o.height).setScaleXY(-1,1);this._btnRight=this.createButton(m(this,this.previousPoster),
"arrow").centerAnchor().setXY(873,0.5*o.height);b=this.createImage("team_container");b.centerAnchor().setXY(0.5*o.width,o.getModifiedHeight()-75);this._teamLogo=this.createImage(j.player.team);this._teamLogo.centerAnchor().setXY(0.5*b.getNaturalWidth(),0.5*b.getNaturalHeight()).setScale(0.7);b.owner.addChild((new r).add(this._teamLogo));this._character1=new Qe(j.player);this._character1.set_pointerEnabled(!1);this._character1.setXY(0.5*b.getNaturalWidth()-80,0.5*b.getNaturalHeight()).setScale(0.7);
b.owner.addChild((new r).add(this._character1));this._check1=this.createImage("check");this._check1.setXY(0.5*b.getNaturalWidth()-80,0.5*b.getNaturalHeight());b.owner.addChild((new r).add(this._check1));this._check1.setAlpha(0);this._character2=new Qe(ca.getDataByName(j.player.partner));this._character2.set_pointerEnabled(!1);this._character2.setXY(0.5*b.getNaturalWidth()+80,0.5*b.getNaturalHeight()).setScaleXY(-0.7,0.7);b.owner.addChild((new r).add(this._character2));this._check2=this.createImage("check");
this._check2.setXY(0.5*b.getNaturalWidth()+80,0.5*b.getNaturalHeight());b.owner.addChild((new r).add(this._check2));this._check2.setAlpha(0);this.select(this._list.indexOf(j.player.team));this._posters[this.absolutePosition(this._selectedIndex+3)].x.set__(615);this._posters[this.absolutePosition(this._selectedIndex-3)].x.set__(-615);u.from(a,{y:"-=60",alpha:0},{time:0.7,ease:t.quintOut,delay:0})},onBack:function(){p.play("click","UI");aa.trackUI("EXIT","Posters");I.change("Mode")},nextPoster:function(){p.play("click",
"UI");this.select(this.absolutePosition(this._selectedIndex-1),0.5);this.animateTo(this._posters[this.absolutePosition(this._selectedIndex+3)],615,0,0,0.7);this.animateTo(this._posters[this.absolutePosition(this._selectedIndex-3)],-615,0,0,0)},previousPoster:function(){p.play("click","UI");this.select(this.absolutePosition(this._selectedIndex+1),0.5);this.animateTo(this._posters[this.absolutePosition(this._selectedIndex+3)],615,0,0,0);this.animateTo(this._posters[this.absolutePosition(this._selectedIndex-
3)],-615,0,0,0.7)},absolutePosition:function(a){return(a+this._list.length)%this._list.length},animateTo:function(a,b,c,d,e){u.to(a,{x:b,scaleX:c,scaleY:c,alpha:d},{time:e,ease:t.quadOut,delay:0})},select:function(a,b){null==b&&(b=0);var c=this._list[a];this._selectedIndex=a;var d=ca.getDataByTeam(c);this._teamLogo.texture=E.getTexture(c,this._uiPack);this._character1.changeCharacter(d[0]);this._character2.changeCharacter(d[1]);this._check1.setAlpha(j.save.isCharacterPosterUnlocked(d[0])?1:0);this._check2.setAlpha(j.save.isCharacterPosterUnlocked(d[1])?
1:0);this.animateTo(this._posters[this._selectedIndex],0,1,1,b);this._posters[this._selectedIndex].set_pointerEnabled(this._posters[this._selectedIndex].unlocked);this.animateTo(this._posters[this.absolutePosition(this._selectedIndex+1)],205,0.9,0.7,b);this._posters[this.absolutePosition(this._selectedIndex+1)].set_pointerEnabled(!1);this.animateTo(this._posters[this.absolutePosition(this._selectedIndex-1)],-205,0.9,0.7,b);this._posters[this.absolutePosition(this._selectedIndex-1)].set_pointerEnabled(!1);
this.animateTo(this._posters[this.absolutePosition(this._selectedIndex+2)],390,0.8,0.4,b);this._posters[this.absolutePosition(this._selectedIndex+2)].set_pointerEnabled(!1);this.animateTo(this._posters[this.absolutePosition(this._selectedIndex-2)],-390,0.8,0.4,b);this._posters[this.absolutePosition(this._selectedIndex-2)].set_pointerEnabled(!1);u.to(this._magnifier,{alpha:0},{time:0.1},t.quadOut);u.delayCallTo(m(this,this.checkMagnifier),0.5,this._magnifier.owner)},checkMagnifier:function(){this._posters[this._selectedIndex].unlocked&&
u.to(this._magnifier,{alpha:1},{time:0.35},t.quadOut)},buildPosters:function(){this._posters=[];this._container=(new A).setXY(o.width/2,0.5*o.height);this.owner.addChild((new r).add(this._container));for(var a,b=0,c=this._list;b<c.length;)a=c[b],++b,a=new Ki(a),a.setXY(410,-20).setScale(0),this._container.owner.addChild((new r).add(a)),a.unlocked&&a.get_pointerDown().connect(m(this,this.onClickPoster)),this._posters.push(a)},onClickMagnifier:function(){this.onClickPoster(null)},onClickPoster:function(){p.play("click",
"UI");aa.trackUI("CLICK POSTERS "+j.player.name.toUpperCase(),"Posters");Xa.getURL(tc.BASE_URL+"posters/"+j.player.team+".jpg")},onStop:function(){D.prototype.onStop.call(this);this._btnRight=this._btnLeft=this._btnBack=this._container=this._posters=this._list=null},__class__:Ji});var yd=function(){this._list=za.list;D.call(this,!1)};f["game.ui.SelectLevel"]=yd;yd.__name__=["game","ui","SelectLevel"];yd.__super__=D;yd.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);this.loadAssets("ui_level")},
dispose:function(){C.disposePack("ui_level");D.prototype.dispose.call(this)},onAssetsReady:function(){D.prototype.onAssetsReady.call(this);this.createImage("bg");var a=this.createText("LEVEL_TITLE");a.setXY(0.5*o.width,50);a.setAlign(X.Center);this.buildGrid();this._selector=this.createImage("selected");this._levelName=E.createText("","17_blue",new r);this._levelName.setWrapWidth(75);this._selector.owner.addChild(this._levelName.owner);for(var b=0,c=0,d=za.list;c<d.length;){var e=d[c];++c;if(j.save.isLevelLocked(e))break;
++b}this.select(b-1,!0);b=C.getPack("ui");this._btnPrev=this.createButton(m(this,this.prevPage),"btn_back",null,null,null,b);this._btnPrev.setXY(25,o.getModifiedHeight()-this._btnPrev.getNaturalHeight()-25);this._btnNext=this.createButton(m(this,this.onNextClick),"btn_play",null,null,null,b);this._btnNext.centerAnchor();this._btnNext.setXY(887,o.getModifiedHeight()-65);u.from(a,{y:"-=60",alpha:0},{time:0.7,ease:t.quintOut,delay:0});a=0;for(b=this._buttons;a<b.length;)c=b[a],++a,u.from(c,{y:"-=100",
alpha:0},{time:0.5,ease:t.backOut,delay:0.06*c.index});u.from(this._btnNext,{x:"+=100",alpha:0},{time:0.7,ease:t.quintOut,delay:0.5})},prevPage:function(){p.play("click","UI");aa.trackUI("EXIT","Select level");I.change("SelectCharacter")},onNextClick:function(a){p.play("click","UI");null!=j.currentLevel&&(j.setRandomOpponent(),a.disablePointer(),aa.trackUI("PLAY","Select level"),aa.trackPlayButton(),I.change("GameplayLoading"))},select:function(a,b){null==b&&(b=!1);var c=this._list[a];if(null==c)throw"No data for button"+
a;if(b||j.currentLevel!=c)j.currentLevel=c,j.gameType=Kg.levels.get(j.currentLevel).type,this._selector.x.animateTo(this._buttons[a].origin.x-75,0.2,t.quadInOut),this._selector.y.animateTo(this._buttons[a].origin.y-84,0.2,t.quadInOut),this._levelName.setText(c),this._levelName.x.animateTo(155,0.2,t.quadInOut),this._levelName.y.animateTo(93-0.5*this._levelName.getNaturalHeight(),0.2,t.quadInOut)},buildGrid:function(){this._buttons=[];this._container=(new A).setXY(yd.Grid.x,yd.Grid.y);this.owner.addChild((new r).add(this._container));
for(var a=0,b=0,c=this._list;b<c.length;){var d=c[b];++b;this.addButton(d,a);a++}},addButton:function(a,b){var c=j.save.isLevelLocked(a),d=this.createButton(m(this,this.onButtonClick),"level_"+(c?"locked":y.string(b+1)));d.centerAnchor();d.index=b;d.id=a;var e=this.createText("LEVEL","17_orange",new r);d.owner.addChild(e.owner);e.setXY(0,-27);e.centerAnchor();var h=this.createText("LEVEL_NUMBER","36_white",new r,{p:"0"+(b+1)});d.owner.addChild(h.owner);h.setXY(-1,-5);h.centerAnchor();c&&(d.disable(),
d.set_pointerEnabled(!1),e.setAlpha(0.5),h.setAlpha(0.5));d.setXY(yd.Grid.positions[b].x,yd.Grid.positions[b].y);this._container.owner.addChild(d.owner);this._buttons.push(d)},onButtonClick:function(a){p.play("click","UI");this.select(a.index)},onStop:function(){this._selector=this._btnPrev=this._btnNext=this._container=this._buttons=this._list=null;D.prototype.onStop.call(this)},__class__:yd});var Vc=function(){this._clickCount=this._nightCount=0;this._first=!0;this._currentPlayerId=0;this._visible=
!1;this._tags=[];D.call(this,!1)};f["game.ui.SelectCharacter"]=Vc;Vc.__name__=["game","ui","SelectCharacter"];Vc.onPlay=function(a){p.play("click","UI");a.disablePointer();aa.trackUI("PLAY","Select character");j.playerId=0;switch(j.gameMode[1]){case 0:j.setRandomOpponent();I.change("SelectLevel");return;case 1:j.setRandomOpponent();j.currentLevel=za.list[Math.floor(Math.random()*za.list.length)];break;case 2:j.currentLevel=za.shootout[Math.floor(Math.random()*za.shootout.length)];break;case 3:j.currentLevel=
za.dunk[Math.floor(Math.random()*za.dunk.length)];break;case 4:j.currentLevel=za.horse[Math.floor(Math.random()*za.horse.length)]}I.change("GameplayLoading")};Vc.__super__=D;Vc.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);j.players=[];this.loadAssets("ui_character",!1)},onStop:function(){D.prototype.onStop.call(this)},dispose:function(){D.prototype.dispose.call(this)},onAssetsReady:function(){D.prototype.onAssetsReady.call(this);this._uiPack=C.getPack("ui");this.createImage("bg");
this._title=this.createText(j.isPassNPlay()?"CHARACTER_TITLE_NEXT":"CHARACTER_TITLE","36_white");this._title.setXY(o.width+this._title.getNaturalWidth(),35);this.buildGrid();this._btnPlay=this.createButton(Vc.onPlay,"btn_play",null,null,null,this._uiPack);this._btnPlay.centerAnchor();this._btnPlay.setXY(887,o.getModifiedHeight()-65);j.isPassNPlay()&&(this._btnNext=this.createButton(m(this,this.onNext),"btn_done",null,null,null,this._uiPack),this._btnNext.centerAnchor(),this._btnNext.setXY(887,o.getModifiedHeight(32)-
55),this._btnPlay.set_pointerEnabled(!1),this._btnPlay.setAlpha(0),this._arrow=this.createImage("arrow"),this._arrow.centerAnchor().setXY(o.width+300,80),this._progress=this.createTextSprite(Ta.localize("SELECT_PROGRESS",{x:this._currentPlayerId+1,y:j.nbPlayers}).text.toUpperCase(),"17_orange",this._arrow.owner),this._progress.setXY(-this._progress.getNaturalWidth()-10,-3));this._eggNightTrigger=new eb(0,o.width,75);this._eggNightTrigger.setAlpha(0);this._eggNightTrigger.get_pointerDown().connect(m(this,
this.onNightClick));this.owner.addChild((new r).add(this._eggNightTrigger));this.preselect();this._btnBack=this.createButton(m(this,this.onBack),"btn_back",null,null,null,this._uiPack);this._btnBack.setXY(25,o.getModifiedHeight()-this._btnBack.getNaturalHeight()-25)},preselect:function(){null!=j.player?(this._currentData=j.player,this._selectedButton=this._buttons[ca.list.indexOf(this._currentData)]):(this._currentData=ca.list[0],this._selectedButton=this._buttons[0]);j.isPassNPlay()&&(j.config.announcer&&
p.play("announcer_player1","ANNOUNCER"),this._currentTag=new Lg(this._currentPlayerId+1),this.owner.addChild((new r).add(this._currentTag)),this._tags.push(this._currentTag));this.setCharacter()},setCharacter:function(){this._visible?this.hide():this.updateCharacter()},show:function(){this._visible||this._title.x.animateTo(o.width-this._title.getNaturalWidth()-50,0.35,t.quintOut);this._avatar.x.animateTo(-65,0.35,t.quadOut);this._teamBg.x.animateTo(-64,0.35,t.quadOut);this._specialBg.x.animateTo(0,
0.35,t.quadOut);j.isPassNPlay()&&(this._progress.set_text(Ta.localize("SELECT_PROGRESS",{x:this._currentPlayerId+1,y:j.nbPlayers}).text.toUpperCase()),this._arrow.x.animateTo(o.width-70,0.35,t.quadOut));this.moveSelector();this._selector.alpha.animateTo(1,0.35,t.quadOut);this._visible=!0},hide:function(){this._title.x.animateTo(o.width+this._title.getNaturalWidth(),0.2,t.quadIn);this._avatar.x.animateTo(-465,0.2,t.quadIn);this._teamBg.x.animateTo(-464,0.2,t.quadIn);this._specialBg.x.animateTo(-400,
0.2,t.quadIn);this._selector.alpha.animateTo(0,0.2,t.quadIn);j.isPassNPlay()&&this._arrow.x.animateTo(o.width+300,0.2,t.quadIn);this._visible=!1;u.delayCallTo(m(this,this.updateCharacter),0.2,this.owner)},updateCharacter:function(){j.player=this._currentData;j.players[this._currentPlayerId]=this._currentData;!this._first&&j.config.announcer&&p.play("announcer_"+this._currentData.name,"ANNOUNCER");this._first=!1;this.showAvatar();this.showTeam();this.showSpecial();this.show()},showAvatar:function(){null==
this._avatar?(this._avatar=this.createImage("avatar_"+this._currentData.name),this._avatar.setXY(-465,131)):this._avatar.texture=this.getTexture("avatar_"+this._currentData.name)},showTeam:function(){null==this._teamBg?(this._teamBg=this.createImage("ball"),this._teamBg.setXY(-464,-31),this._teamBg.get_pointerDown().connect(m(this,this.onBallClick)),this._playerName=this.createText(this._currentData.name,"25_black"),this._playerName.setXY(155,83),this._teamName=this.createText(this._currentData.team,
"17_blue"),this._teamName.setXY(155,115),this._teamLogo=this.createImage(this._currentData.team,this._teamBg.owner),this._teamLogo.centerAnchor().setXY(120,105),this._teamLogo.setScale(0.8)):(this._playerName.setText(this._currentData.name),this._teamName.setText(this._currentData.team),this._teamLogo.texture=this.getTexture(this._currentData.team))},showSpecial:function(){var a=this._currentData.name+"_SM",b=this._currentData.name+"_SM_DESC";null==this._specialBg?(this._specialBg=this.createImage("black_bottom"),
this._specialBg.setXY(-400,o.height-this._specialBg.getNaturalHeight()),this._special=this.createText(a,"17_white",this._specialBg.owner),this._special.setXY(125,25),this._specialDesc=this.createText(b,"17_white",this._specialBg.owner),this._specialDesc.setAlpha(0.5),this._specialDesc.setWrapWidth(200),this._specialDesc.setXY(125,45)):(this._special.setText(a),this._specialDesc.setText(b))},buildGrid:function(){this._buttons=[];this._gridContainer=(new A).setXY(Vc.Grid.x,Vc.Grid.y);this.owner.addChild((new r).add(this._gridContainer));
this._selector=this.createImage("selected",this._gridContainer.owner);this._selector.centerAnchor();for(var a=0,b=0,c=ca.list;b<c.length;){var d=c[b];++b;this.addButton(d,a);a++}},addButton:function(a,b){var c=new Qe(a,m(this,this.onButtonClick));c.index=b;c.setXY(Vc.Grid.positions[b].x,Vc.Grid.positions[b].y);this._gridContainer.owner.addChild((new r).add(c));this._buttons.push(c)},updateSelection:function(){this._selectedButton.deselect();this._selectedButton=this._buttons[ca.list.indexOf(this._currentData)];
this._selectedButton.enable();this._selectedButton.select()},moveSelector:function(){this._visible?(this._selector.x.animateTo(this._selectedButton.origin.x,0.2,t.quadInOut),this._selector.y.animateTo(this._selectedButton.origin.y+2,0.2,t.quadInOut),null!=this._currentTag&&(this._currentTag.x.animateTo(this._selectedButton.origin.x-60,0.2,t.quadInOut),this._currentTag.y.animateTo(this._selectedButton.origin.y-60,0.2,t.quadInOut))):(this._selector.setXY(this._selectedButton.origin.x,this._selectedButton.origin.y+
2),null!=this._currentTag&&this._currentTag.setXY(this._selectedButton.origin.x-60,this._selectedButton.origin.y-60))},onButtonClick:function(a){a.isDisabled||(p.play("click","UI"),this._selectedButton==a?(this._clickCount++,5==this._clickCount&&(Oa.toggle(Oa.jump),this._clickCount=0)):(this._clickCount=0,this._currentData=ca.list[a.index],null!=this._selectedButton&&this._selectedButton.deselect(),this.updateCharacter(),this._selectedButton=a,this._selectedButton.select(),this.moveSelector()))},
onBack:function(){p.play("click","UI");0==this._currentPlayerId?(aa.trackUI("EXIT","Select character"),I.change("Mode")):(this._currentTag.owner.dispose(),this._tags.pop(),this._currentTag=this._tags[this._tags.length-1],this._currentTag.setActive(!0),this._currentPlayerId--,this._currentData=j.players[this._currentPlayerId],this._first=!0,j.config.announcer&&p.play("announcer_player"+(this._currentPlayerId+1),"ANNOUNCER"),this.setCharacter(),this.updateSelection(),null!=this._btnNext&&(this._btnNext.set_pointerEnabled(!0),
this._btnNext.setAlpha(1),this._btnPlay.set_pointerEnabled(!1),this._btnPlay.setAlpha(0)))},onNext:function(a){var b=this;p.play("click","UI");this._btnNext.set_pointerEnabled(!1);this._selectedButton.deselect();this._selectedButton.disable();this._currentPlayerId++;for(var c=0,d=this._buttons.length;c<d;){var e=c++;if(!this._buttons[e].isDisabled){this._currentData=ca.list[e];break}}this._currentTag.setActive(!1);this._currentTag=new Lg(this._currentPlayerId+1);this.owner.addChild((new r).add(this._currentTag));
this._tags.push(this._currentTag);this._first=!0;j.config.announcer&&p.play("announcer_player"+(this._currentPlayerId+1),"ANNOUNCER");this.setCharacter();this.updateSelection();u.delayCallTo(function(){b._currentPlayerId==j.nbPlayers-1?(b._btnNext.setAlpha(0),b._btnPlay.set_pointerEnabled(!0),b._btnPlay.setAlpha(1)):a.set_pointerEnabled(!0)},0.35,this.owner)},onNightClick:function(){this._nightCount++;5==this._nightCount&&(Oa.toggle(Oa.nightTime),this._nightCount=0)},onBallClick:function(){Oa.toggle(Oa.ball)},
__class__:Vc});var Li=function(){D.call(this,!1)};f["game.ui.Pause"]=Li;Li.__name__=["game","ui","Pause"];Li.__super__=D;Li.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);this.loadAssets("ui_pause")},onAssetsReady:function(){var a=C.getPack("ui");this.owner.add(new ta(this.getTexture("bg")));this.owner.addChild(this.createButton(m(this,this.onResume),"btn_play",null,null,null,a).centerAnchor().setXY(480,235).owner);this.owner.addChild(this.createButton(m(this,this.onHelp),
"btn_help").centerAnchor().setXY(395,300).owner);this.owner.addChild(this.createButton(m(this,this.onAchievement),"btn_achievements",null,null,null,a).centerAnchor().setXY(480,360).owner);this.owner.addChild(this.createButton(m(this,this.onQuit),"btn_quit",null,null,null,a).centerAnchor().setXY(565,300).owner)},onResume:function(){p.play("click","UI");aa.trackUI("PLAY","Pause");I.pop()},onHelp:function(){p.play("click","UI");aa.trackUI("TUTORIAL","Pause");I.push("Help")},onAchievement:function(){p.play("click",
"UI");aa.trackUI("ACHIEVEMENTS","Pause");I.push("Achievements")},onQuit:function(){p.play("click","UI");I.push("QuitConfirmation")},__class__:Li});var Mi=function(){D.call(this,!1)};f["game.ui.widget.QuitConfirmation"]=Mi;Mi.__name__=["game","ui","widget","QuitConfirmation"];Mi.__super__=D;Mi.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);this._darken=new eb(0,o.width,o.height);this._darken.centerAnchor();this._darken.setAlpha(0.5);this._darken.setXY(0.5*o.width,0.5*o.height);
this.owner.addChild((new r).add(this._darken));this._bg=this.createImage("popup");this._bg.centerAnchor().setXY(0.5*o.width,0.5*o.height).setScale(0.7);var a=this.createText("QUIT_CONFIRMATION");a.setWrapWidth(250);a.setXY(0.5*o.width-125,200);a.setAlign(X.Center);var a=this.createButton(m(this,this.onYes),"btn_green","BTN_YES"),b=a.label.y;b.set__(b._value-2);a.setXY(0.5*o.width-0.5*a.getNaturalWidth()-90,330);a=this.createButton(m(this,this.onNo),"btn_orange","BTN_NO");b=a.label.y;b.set__(b._value-
2);a.setXY(0.5*o.width-0.5*a.getNaturalWidth()+90,330)},onYes:function(){p.play("click","UI");aa.trackUI("EXIT","Pause");p.playMusic("menu");I.change("Mode")},onNo:function(){p.play("click","UI");I.pop()},__class__:Mi});var Ni=function(){this._texts=[];this._totalPages=8;this._currentPage=0;this._alphaTweenDuration=0.25;D.call(this,!1)};f["game.ui.Help"]=Ni;Ni.__name__=["game","ui","Help"];Ni.__super__=D;Ni.prototype=l(D.prototype,{onAdded:function(){D.prototype.onAdded.call(this);this._isMobile=
x._platform.getTouch().get_supported();this._tutorial=Wl.tutorials;C.loadPack(this._isMobile?"htp_mobile":"htp",m(this,this.onHtpLoaded))},onHtpLoaded:function(a){this._htpPack=a;this.loadAssets("ui_htp",!1)},onAssetsReady:function(){this.owner.add(new ta(this.getTexture("bg")));this._title=this.createText("HTP_TITLE","36_white");this._title.setXY(0.5*o.width,45);this._title.setAlign(X.Center);this.owner.addChild((new r).add(this._title));this._subtitle=this.createText("","17_orange");this._subtitle.setXY(0.5*
o.width,85);this._subtitle.setAlign(X.Center);this.owner.addChild((new r).add(this._subtitle));this._btnPrev=this.createButton(m(this,this.onPrev),"arrow","","",null,this._pack);this._btnPrev.centerAnchor().setXY(50,0.5*o.height).setScaleXY(-1,1);this.owner.addChild(this._btnPrev.owner);this._btnPrev.setAlpha(0);this._btnPrev.set_pointerEnabled(!1);this._btnNext=this.createButton(m(this,this.onNext),"arrow","","",null,this._pack);this._btnNext.centerAnchor().setXY(o.width-50,0.5*o.height);this.owner.addChild(this._btnNext.owner);
var a=this.createButton(m(this,this.onQuit),"btn_play");a.centerAnchor().setXY(887,o.getModifiedHeight()-65);this.owner.addChild(a.owner);this._bar=this.createImage("blackbar");this._bar.setXY(0,450);this._description=this.createText("","21_white");this._description.setWrapWidth(650);this._description.setXY(75,0.5*this._bar.getNaturalHeight()-0.5*this._description.getNaturalHeight()+3);this.updatePage();this.owner.addChild(this._bar.owner);this._bar.owner.addChild((new r).add(this._description))},
onPrev:function(){this._currentPage==this._totalPages-1&&(this._btnNext.alpha.animateTo(1,0.25),this._btnNext.set_pointerEnabled(!0));this._currentPage--;0==this._currentPage&&(this._btnPrev.alpha.animateTo(0,0.25),this._btnPrev.set_pointerEnabled(!1));this.changePage()},onNext:function(){0==this._currentPage&&(this._btnPrev.alpha.animateTo(1,0.25),this._btnPrev.set_pointerEnabled(!0));this._currentPage++;this._currentPage==this._totalPages-1&&(this._btnNext.alpha.animateTo(0,0.25),this._btnNext.set_pointerEnabled(!1));
this.changePage()},onQuit:function(){p.play("click","UI");I.pop()},changePage:function(){this._subtitle.alpha.animateTo(0,this._alphaTweenDuration);this._image.alpha.animateTo(0,this._alphaTweenDuration);for(var a=0,b=this._texts;a<b.length;){var c=b[a];++a;c.alpha.animateTo(0,this._alphaTweenDuration)}u.delayCallTo(m(this,this.updatePage),this._alphaTweenDuration)},updatePage:function(){0>this._currentPage||this._currentPage>=this._totalPages||(this._currentTutorial=this._tutorial[this._currentPage],
this._subtitle.setText(this._currentTutorial.titleID),this._subtitle.setAlign(X.Center),this._subtitle.setAlpha(0),this._subtitle.alpha.animateTo(1,this._alphaTweenDuration),this.setImage("htp_"+(this._currentPage+1)),this.setTexts())},setImage:function(a){null==this._image?(this._image=new ta(this._htpPack.getTexture(a)),this.owner.addChild((new r).add(this._image))):this._image.texture=this._htpPack.getTexture(a);this._image.centerAnchor();a=this._currentTutorial.imagePosition;this._image.setXY(0.5*
o.width+a.x,0.5*o.height+a.y);this._image.setAlpha(0);this._image.alpha.animateTo(1,this._alphaTweenDuration)},setTexts:function(){this._description.setText(this._currentTutorial.description+(this._isMobile&&this._currentTutorial.mobileDescription?"_MOBILE":""));this._description.setXY(75,0.5*this._bar.getNaturalHeight()-0.5*this._description.getNaturalHeight()+3);if(0<this._texts.length)for(var a=0,b=this._texts;a<b.length;){var c=b[a];++a;c.owner.dispose()}this._texts=[];b=this._currentTutorial.texts;
for(c=0;c<b.length;){var d=b[c];++c;a=new uc(d.textID+(this._isMobile&&d.mobileVariant?"_MOBILE":""),d.font);this._isMobile&&null!=d.mobileX?a.setXY(d.mobileX,d.mobileY):a.setXY(d.x,d.y);if(null!=d.width&&0<d.width){a.setWrapWidth(d.width);var e=a.x;e.set__(e._value-0.5*d.width)}a.setAlign(X.Center);a.setAlpha(0);a.alpha.animateTo(1,this._alphaTweenDuration);this.owner.addChild((new r).add(a));this._texts.push(a)}},__class__:Ni});var ri=function(){};f["game.SceneList"]=ri;ri.__name__=["game","SceneList"];
var Da=function(){this._isDirty=!1;this._children=[];this.depthSorter=new Xl;A.call(this)};f["stolo.display.Container"]=Da;Da.__name__=["stolo","display","Container"];Da.__super__=A;Da.prototype=l(A.prototype,{onStop:function(){A.prototype.onStop.call(this);this._children=null},onUpdate:function(){this._isDirty&&this.sortDepth()},addChild:function(a){this._children.push(a);this.owner.addChild(a);return a},removeChild:function(a){Q.remove(this._children,a);this.owner.removeChild(a);return a},addSprite:function(a){null==
a.owner&&(new r).add(a);this.addChild(a.owner);return a},setChildIndex:function(a,b){return 0<=b&&b<=this._children.length&&a.parent==this.owner?(Q.remove(this._children,a),this._children.splice(b,0,a),this._isDirty=!0,a):null},getChildIndex:function(a){for(var b=0,c=this._children.length;b<c;){var d=b++;if(this._children[d]==a)return d}return-1},sortDepth:function(){this.depthSorter.reorder(this._children,this.owner);this._isDirty=!1},bringToFront:function(a){this.owner.addChild(a);Q.remove(this._children,
a);this._children.push(a)},sendToBack:function(a){this.owner.addChild(a,!1);Q.remove(this._children,a);this._children.unshift(a)},__class__:Da});var Hi=function(a){Da.call(this);this._achievement=a};f["game.achievements.AchievementBar"]=Hi;Hi.__name__=["game","achievements","AchievementBar"];Hi.__super__=Da;Hi.prototype=l(Da.prototype,{onAdded:function(){Da.prototype.onAdded.call(this);this._pack=C.getPack("ui_achievements");this._bg=E.createImage("container",this._pack);this.owner.addChild((new r).add(this._bg));
this._name=E.createText(this._achievement.name,"17_blue",new r);this._name.setXY(75,25);this.owner.addChild(this._name.owner);var a=null;Pe.quantities.exists(this._achievement.name)&&(a={x:Pe.quantities.get(this._achievement.name)});this._description=E.createText(this._achievement.name+"_DESC","17_white",new r,a);this._description.setXY(75,45);this.owner.addChild(this._description.owner);a="medal";this._achievement.isComplete()||(a+="_locked",this._name.setAlpha(0.5),this._description.setAlpha(0.5));
this._medal=E.createImage(a,this._pack);this._medal.centerAnchor().setXY(45,45);this.owner.addChild((new r).add(this._medal))},__class__:Hi});var Re=function(){this._showing=!1;this._toShow=[];A.call(this);this.setAlpha(0);this.set_pointerEnabled(!1)};f["stolo.achievements.AchievementPopup"]=Re;Re.__name__=["stolo","achievements","AchievementPopup"];Re.__super__=A;Re.prototype=l(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this)},show:function(a){this._toShow.push(a);this.showNext()},
animate:function(){this._showing=!0},showNext:function(){if(!this._showing){var a=this._toShow.shift();null!=a&&this.animate(a)}},__class__:Re});var tb=function(){Re.call(this)};f["game.achievements.AchievementToaster"]=tb;tb.__name__=["game","achievements","AchievementToaster"];tb.__super__=Re;tb.prototype=l(Re.prototype,{onAdded:function(){Re.prototype.onAdded.call(this);var a=C.getPack("ui");tb._bg=E.createImage("toaster",a);tb._bg.centerAnchor().setXY(0.5*o.width,o.height+100);this.owner.add(tb._bg);
a=E.createImage("icon_achievements",a);a.centerAnchor().setXY(40,38);tb._bg.owner.addChild((new r).add(a));tb._name=E.createText("","17_blue",tb._bg.owner);tb._name.setXY(75,27)},animate:function(a){Re.prototype.animate.call(this,a);aa.trackAchievement(a);tb._name.setText(a.name);tb._bg.y.set__(o.height+100);tb._bg.alpha.set__(0);u.to(tb._bg,{y:o.getModifiedHeight()-75,alpha:1},{time:0.5},t.backOut);u.delayCallTo(m(this,this.endAnim),1.75,this.owner)},endAnim:function(){this._showing=!1;u.to(tb._bg,
{y:o.height+100,alpha:0},{time:0.7},t.backIn);u.delayCallTo(m(this,this.showNext),0.7)},__class__:tb});var Pe=function(){};f["game.achievements.AchievementsData"]=Pe;Pe.__name__=["game","achievements","AchievementsData"];var Mg=function(){this.homeTeam=!1};f["game.ai.AIDestination"]=Mg;Mg.__name__=["game","ai","AIDestination"];Mg.__super__=k;Mg.prototype=l(k.prototype,{get_name:function(){return"AIDestination_38"},__class__:Mg});var Ic=function(){this._currentTickDt=0;this.variables=new N;this.behaviorTickRate=
0.5;this.behaviorPack=Ic.DefaultPack;this.playerId=Ic.PlayerID;this.playerDistance=300;this.detectionDistance=150;this.enabled=!0;k.call(this)};f["stolo.ensys.components.ai.BaseAI"]=Ic;Ic.__name__=["stolo","ensys","components","ai","BaseAI"];Ic.__super__=k;Ic.prototype=l(k.prototype,{get_name:function(){return"BaseAI_10"},onStart:function(){k.prototype.onStart.call(this);this._actors=this.owner._internal_getFromParents("ActorSystem_41");this._physic=this.owner._compMap.PhysicsComponent_34;this._transform=
this.owner._compMap.TransformComponent_43;this._disposer=this.owner._compMap.Disposer_61;T.getSystemEntity(this.owner);this._disposer.add(T.getSystemEntity(this.owner).getComponent("PhysicSystem_36").onPhysicUpdate.connect(m(this,this.onFixedUpdate)));this.createBehavior(this.behaviorData)},onStop:function(){k.prototype.onStop.call(this);this._disposer.dispose();this.variables=this._transform=this._physic=this._actors=this._disposer=null;this.disposeBehavior()},onFixedUpdate:function(a){if(null!=
this._behavior&&this.enabled)for(this._currentTickDt+=a;this._currentTickDt>=this.behaviorTickRate;)this.updateBehavior(),this._currentTickDt-=this.behaviorTickRate},updateBehavior:function(){this._behavior.tick(this)},createBehavior:function(a,b){null==b&&(b=!0);null==a&&null!=this.behaviorFile&&(a=Pa.getBehaviorData(this.behaviorFile,this.behaviorPack));if(null!=a)this._behavior=Pa.fromData(a);else if(b)throw"No data to create behavior!";},disposeBehavior:function(){null!=this._behavior&&(this._behavior.abort(),
this._behavior.dispose(),this.behaviorFile=this.behaviorData=this._behavior=null)},setParam:function(a,b){null!=a&&Object.prototype.hasOwnProperty.call(a,"variable")&&(this.variables.set(a.variable,b),b)},getParam:function(a,b){return null==a?b:Object.prototype.hasOwnProperty.call(a,"variable")&&"string"==typeof a.variable?this.variables.get(a.variable):a},getTarget:function(a){return null==a||null==a.target?this.variables.get("target"):this.getParam(a.target)},HasComponent:function(a){var b=this.getParam(a.entity);
if(null!=b){a=this.getParam(a.type);a=ja.resolveClass(a);for(b=b.firstComponent;null!=b;){if(ga.__instanceof(b,a))return H.Success;b=b.next}}return H.Failure},IsNull:function(a){return this.variables.exists(a.variable)&&null!=this.variables.get(a.variable)?H.Failure:H.Success},SetVariable:function(a){var b=a.value;this.variables.set(a.variable,b);b;return H.Success},RemoveVariable:function(a){this.variables.remove(a.variable);return H.Success},CopyVariable:function(a){var b=a.destination,a=this.variables.get(a.origin);
this.variables.set(b,a);a;return H.Success},DetectHole:function(a){return null==this._physic.raycast(null!=a?this.getParam(a.distance,this.detectionDistance):this.detectionDistance,0,1,50*this._transform.direction)?H.Success:H.Failure},DetectObject:function(a){var b=this._physic.raycast(null!=a?this.getParam(a.distance,this.playerDistance):this.playerDistance,this._transform.direction,0,this._transform.direction*(this._physic.shape.width-1)/2,0);this.setParam(a.out,b);return null!=b?H.Success:H.Failure},
DistanceDifference:function(a){var b=this.getParam(a.target);if(null==b)return H.Failure;b=b._compMap.TransformComponent_43;if(null!=a.x&&this.getParam(a.x)>Math.abs(this._transform.position.x-b.position.x)||null!=a.y&&(a=this.getParam(a.y),0<a&&a>b.position.y-this._transform.position.y||0>a&&a<b.position.y-this._transform.position.y))return H.Failure;return H.Success},ChangeDirection:function(a){if(null==this._transform)return H.Failure;var b=null;null!=a&&(b=this.getParam(a.lookAt));this._transform.direction=
null!=b?vf.getDirection(this.owner,b):-1*this._transform.direction;return H.Success},GetPlayer:function(a){var b=this._actors.getActorById(this.playerId);null!=a&&this.setParam(a.out,b);return null!=b?H.Success:H.Failure},IsPlayer:function(a){a=this.getParam(a.entity);return null!=a&&(a=a._compMap.TemplateComponent_40,null!=a&&a.uuid==this.playerId)?H.Success:H.Failure},DetectPlayer:function(a){var b=this._physic.raycast(null!=a?this.getParam(a.distance,this.playerDistance):this.playerDistance,this._transform.direction,
0,this._transform.direction*(this._physic.shape.width-1)/2,0);this.setParam(a.out,b);return null!=b&&(a=b._compMap.TemplateComponent_40,null!=a&&a.uuid==this.playerId)?H.Success:H.Failure},__class__:Ic});var Oi=function(){this._attackCooldown=0;this._movingForward=!1;this.attackCooldown=5;this.shootSuccessRate=1;this.maxShootSpeed=0.5;this.minShootSpeed=0.3;this.maxDistanceShoot=500;this.minDistanceShoot=350;this.jumpBuffer=25;Ic.call(this);this.behaviorPack="ai";this.enabled=!0;this.detectionDistance=
150;this.playerDistance=300;this.behaviorTickRate=0.5};f["game.ai.CharacterAI"]=Oi;Oi.__name__=["game","ai","CharacterAI"];Oi.__super__=Ic;Oi.prototype=l(Ic.prototype,{get_name:function(){return"CharacterAI_11"},onStart:function(){Ic.prototype.onStart.call(this);this._character=this.owner._compMap.Character_13;this._character.state.shoot.aimingTime=Kb.randomBetween(this.minShootSpeed,this.maxShootSpeed);this._character.get_isPlayer()&&this.owner.remove(this)},onStop:function(){Ic.prototype.onStop.call(this);
this._character=null},onFixedUpdate:function(a){this.enabled&&this._character.isEnabled&&!this._character.isStun()&&(Ic.prototype.onFixedUpdate.call(this,a),this._character.hasBall()||(this._character.action=!1),this._movingForward&&(this._character.runDirection=this._transform.direction),this._attackCooldown-=a)},updateBehavior:function(){this._movingForward=!1;Ic.prototype.updateBehavior.call(this)},reset:function(){this.RemoveVariable({variable:"player"})},Jump:function(){return this._character.state.jump.canJump(this._character)?
(this._character.state.change(this._character.state.jump.init(this._character)),H.Success):H.Failure},MoveForward:function(){this._movingForward=!0;return H.Success},JumpForward:function(){return this._character.state.jump.canJump(this._character)?(this._movingForward=!0,this._character.state.change(this._character.state.jump.init(this._character)),H.Success):H.Failure},JumpTowards:function(a){var b=this.getTarget(a);if(null==b)return H.Failure;var c=b._compMap.TransformComponent_43;if(a.onlyHigher&&
c.position.y+this.jumpBuffer>this._transform.position.y||!this._character.state.jump.canJump(this._character))return H.Failure;this._character.state.change(this._character.state.jump.init(this._character,b));this._movingForward=!0;return H.Success},HasBall:function(a){var b=this._character;null!=a&&(a=this.getParam(a.entity),null!=a&&null!=a._compMap.Character_13&&(b=a._compMap.Character_13));return b.hasBall()?H.Success:H.Failure},IsTeammate:function(a){return null!=a&&null!=this._character.getTeammate()&&
(a=this.getParam(a.entity),null!=a&&a==this._character.getTeammate().owner)?H.Success:H.Failure},GetPlayerWithBall:function(a){for(var b=this._actors.getActorsByComponent(ue),c=0;c<b.length;){var d=b[c];++c;if(d._compMap.Character_13.hasBall())return this.setParam(a.out,d),H.Success}return H.Failure},GetLooseBall:function(a){var b=this._actors.getActorById("ball");return null!=b.parent?(this.setParam(a.out,b),H.Success):H.Failure},GetOpponent:function(a){for(var b=this._actors.getActorsByComponent(ue),
c=0;c<b.length;){var d=b[c];++c;if(!d._compMap.PhysicsComponent_34.hasContactType(this._character.contacts.contactType))return this.setParam(a.out,d),H.Success}return H.Failure},GetBasket:function(a){null!=a&&this.setParam(a.out,this._character.targetBasket);return null!=this._character.targetBasket?H.Success:H.Failure},Attack:function(a){var b=this.getTarget(a);if(null!=b._compMap.Ball_31||!this.inRange(b,a.distance)||0<this._attackCooldown)return H.Failure;this._character.attack(b);this._attackCooldown=
this.attackCooldown;return H.Success},Dunk:function(){return this._character.isDunking()?H.Running:this._character.special()?H.Running:this._character.dunk()?H.Running:H.Failure},Shoot:function(){if(this._character.isShooting())return H.Running;this._character.shoot();return H.Success},InRange:function(a){var b=this.getTarget(a);if(null!=b)if(a.horizontalOnly){if(vf.getDistanceX(this.owner,b)<=a.distance)return H.Success}else if(this.inRange(b,a.distance))return H.Success;return H.Failure},DisableScoreType:function(){this._scoreType=
null;return H.Success},IsScoreType:function(a){return this._scoreType==a.scoreType?H.Success:H.Failure},ChooseScoreType:function(a){if(null!=this._scoreType)return H.Success;this._scoreType=0.5<Math.random()?"SHOOT":"DUNK";null!=a&&this.setParam(a.out,this.getDestination());return H.Success},inRange:function(a,b){null==b&&(b=-1);-1==b&&(b=this.attackDistance);return vf.getLinearDistance(this.owner,a)<=b},getDestination:function(){if("DUNK"==this._scoreType)return this._character.targetBasket;if("SHOOT"==
this._scoreType){var a=this._actors.getActorsByComponent(Mg);if(0==a.length)return this._scoreType="DUNK",this._character.targetBasket;for(var b=[],c=0;c<a.length;){var d=a[c];++c;d._compMap.AIDestination_38.homeTeam==this._character.onPlayerTeam&&b.push(d)}a=Math.floor(Math.random()*b.length);return b[a]}return null},__class__:Oi});var Pi=function(){};f["stolo.ensys.components.ICullingComponent"]=Pi;Pi.__name__=["stolo","ensys","components","ICullingComponent"];Pi.prototype={__class__:Pi};var V=
function(){this.onInitComplete=new ka;this.initialized=!1;this.forceUpdate=!0;this.scale=this.flipX=this.flipY=1;A.call(this);this.set_pointerEnabled(V.ENABLE_POINTER);this.set_visible(!1)};f["stolo.ensys.components.DisplayComponent"]=V;V.__name__=["stolo","ensys","components","DisplayComponent"];V.__interfaces__=[Pi];V.__super__=A;V.prototype=l(A.prototype,{dispose:function(){this.layer=this.offset=this._transform=null;A.prototype.dispose.call(this)},onAdded:function(){A.prototype.onAdded.call(this);
this.mobilePack&&q.mobile&&(this.pack+=V.mobilePackSuffix);q.slow&&(this.lowEndPack&&(this.pack+=V.lowEndPackSuffix),null!=this.lowEndAsset&&(this.asset=this.lowEndAsset));this.initialized||this.initStart()},initStart:function(){this.initEnd()},initEnd:function(){this.set_pointerEnabled(0!=(this._flags&4))},initComplete:function(){this.initialized||(this.applyOffset(),this.updateDisplay(),this.initialized=!0,this.onInitComplete.emit())},onStart:function(){A.prototype.onStart.call(this);this._transform=
this.owner._compMap.TransformComponent_43;T.getSystemEntity(this.owner);this._cullingSystem=T.getSystemEntity(this.owner).getComponent("CullingSystem_42");null!=this._cullingSystem?this._cullingSystem.addComponent(this,this.owner):this.enableCulling(!1);this.initComplete()},onStop:function(){null!=this._cullingSystem&&this._cullingSystem.removeComponent(this,this.owner);A.prototype.onStop.call(this)},applyOffset:function(){this.centerAnchor();null!=this.pivot&&(0<=this.pivot.x&&this.anchorX.set__(this.getNaturalWidth()*
this.pivot.x),0<=this.pivot.y&&this.anchorY.set__(this.getNaturalHeight()*this.pivot.y));null!=this.align&&("none"==this.align?this.setAnchor(0,0):"left"==this.align?this.anchorX.set__(0):"right"==this.align&&this.anchorX.set__(this.getNaturalWidth()));if(null!=this.offset){if(0!=this.offset.x){var a=this.anchorX;a.set__(a._value-this.offset.x)}0!=this.offset.y&&(a=this.anchorY,a.set__(a._value-this.offset.y))}},enableCulling:function(a){this.set_visible(!a)},updateDisplay:function(){if(null!=this._transform){if(!this._transform.fixed||
this.forceUpdate)this.setXY(this._transform.position.x,this._transform.position.y),this.setScaleXY(this._transform.direction*this.scale*this.flipX,this.scale*this.flipY),this.set_visible(!0);(!this._transform.fixedRotation||this.forceUpdate)&&this.setRotation(this._transform.rotation);this.forceUpdate=!1}},onUpdate:function(a){this.updateDisplay();A.prototype.onUpdate.call(this,a)},getTexture:function(a,b){var c=C.getPack(a,!1);if(null==c)throw"Cannot load asset '"+b+"', pack '"+a+"' was not found or loaded...";
return E.getTexture(b,c)},__class__:V});var Pb=function(){this.onAnimStart=new ka;this.onCreate=new ka;this.locked=!1;this.fps=-1;this.loop=!0;this.delay=0;this.autoRemove=!1;V.call(this)};f["stolo.ensys.components.AnimationComponent"]=Pb;Pb.__name__=["stolo","ensys","components","AnimationComponent"];Pb.__super__=V;Pb.prototype=l(V.prototype,{onAdded:function(){this.createAnim();V.prototype.onAdded.call(this)},onUpdate:function(a){V.prototype.onUpdate.call(this,a);0<this._timeout&&(this._timeout-=
a,0>this._timeout&&this._timeoutCallback())},createAnim:function(){this.animation=new Ca(this.asset,this.pack,null,!1,this.overrides);this.owner.addChild((new r).add(this.animation));this.onCreate.emit()},initStart:function(){this.animation.setAnchor(0,0);0<this.fps&&(this.animation.get_spritesheet().fps=this.fps);if(this.autoRemove)this.animation.animComplete.connect(m(this,this.onAutoRemove)).once();0<this.delay?(this.setTimeout(m(this,this.startAnim),this.delay),this.animation.set_visible(!1)):
this.startAnim();this.initEnd()},startAnim:function(){null==this.start&&(this.start=this.animation.get_spritesheet().defaultAnim);var a=this.start;-1!=this.start.indexOf(",")&&(a=this.start.split(","));this.animation.set_visible(!0);a=this.animation.gotoAndPlay(a);!this.loop&&null!=a&&(a.loop=!1);this.onAnimStart.emit()},onAutoRemove:function(){!T.inEditor()&&this.autoRemove&&(T.getSystemEntity(this.owner),T.getSystemEntity(this.owner).getComponent("ActorSystem_41").removeActor(this.owner))},enableCulling:function(a){V.prototype.enableCulling.call(this,
a);this.animation.set_isPlaying(!a)},set:function(a,b,c,d){null==d&&(d=!0);null==c&&(c=!1);if(this.locked)return this._unlockTo=a,this.animation.animName;d&&null!=this.suffix&&(a+=this.suffix);this.animation.gotoAndPlay(a,b);c&&(this.locked=!0,this.animation.animComplete.connect(m(this,this.onLockedAnimComplete)).once());return this.animation.animName},onLockedAnimComplete:function(){this.unlock()},getDuration:function(a,b){null==b&&(b=!0);b&&null!=this.suffix&&(a+=this.suffix);return null==this.animation||
null==this.animation.get_spritesheet()?0:this.animation.getDuration(a)},hasAnimation:function(a,b){null==b&&(b=!0);if(null==this.animation)return!1;b&&null!=this.suffix&&(a+=this.suffix);return this.animation.hasAnim(a)},unlock:function(a){this.locked=!1;null==a&&(a=this._unlockTo);null!=a&&this.set(a);this._unlockTo=null},getAnimation:function(){return this.animation},getNaturalWidth:function(){return null!=this.animation?this.animation.getNaturalWidth():100},getNaturalHeight:function(){return null!=
this.animation?this.animation.getNaturalHeight():100},set_pointerEnabled:function(a){null!=this.animation&&this.animation.set_pointerEnabled(a);return V.prototype.set_pointerEnabled.call(this,a)},setTimeout:function(a,b){this._timeout=b;this._timeoutCallback=a},__class__:Pb});var zd=function(){this.labelLayer="Time";Pb.call(this)};f["stolo.ensys.components.FlumpAnimationComponent"]=zd;zd.__name__=["stolo","ensys","components","FlumpAnimationComponent"];zd.__super__=Pb;zd.prototype=l(Pb.prototype,
{onStart:function(){Pb.prototype.onStart.call(this)},onStop:function(){this.flump=null;Pb.prototype.onStop.call(this)},createAnim:function(){this.animation=this.flump=new Ng(this.prefix,this.asset,this.pack,null,!1);this.owner.addChild((new r).add(this.animation));this.setReplacementAnim()},setReplacementAnim:function(){null!=this.textureReplace&&(this.flump.setDecorator(m(this,this.replaceAnims)),null!=this.flump.movie&&this.replaceAnims(this.flump.movie))},replaceAnims:function(a){if(this.textureReplace instanceof
Array&&null==this.textureReplace.__enum__)for(var b=this.textureReplace,c=0;c<b.length;){var d=b[c];++c;this.replaceAnim(a,d)}else this.replaceAnim(a,this.textureReplace)},replaceAnim:function(a,b){var c=null;null!=b.asset&&null!=b.sprite&&(c=C.getPack(b.sprite).getTexture(b.asset));var d=a.getLayer(b.layer,!1);null!=d&&(d=d._internal_getFromChildren("Sprite_5",ta),null!=d&&(d.texture=c))},__class__:zd});var Og=function(){this._lastAnimName=this._lastAnimParams=null;this.onChange=new ka;zd.call(this)};
f["game.animation.MixedAnimation"]=Og;Og.__name__=["game","animation","MixedAnimation"];Og.__super__=zd;Og.prototype=l(zd.prototype,{onStop:function(){this._flumpConnection.dispose();this._lastAnimParams=this._lastAnimName=this._flumpConnection=null;this.flump.owner.dispose();zd.prototype.onStop.call(this)},onUpdateFlump:function(){null!=this.flump.owner.parent&&null!=this.animation&&this.animation.isReady&&null!=this.flump&&this.flump.isReady&&this.flump.gotoAndStop(this.animation.animName,this.animation.get_currentFrame())},
createAnim:function(){this.animation=new Ca(this.asset,this.pack,null,!1,this.overrides);this.owner.addChild((new r).add(this.animation));this.flump=new Ng(this.prefix,null!=this.flumpAsset?this.flumpAsset:this.asset+"_flump",this.pack,m(this,this.onFlumpReady),!1);this.owner.addChild((new r).add(this.flump));this.setAnimXY(0,0);this._flumpConnection=this.flump.onUpdateSignal.connect(m(this,this.onUpdateFlump));this.setReplacementAnim();this.setFlump();this.onCreate.emit()},setAnimXY:function(a,b){this.animation.setXY(a+
this.animOffset.x,b+this.animOffset.y);this.flump.setXY(a+this.flumpOffset.x,b+this.flumpOffset.y)},onFlumpReady:function(){this.setFlump()},applyOffset:function(){if(null!=this.offset){if(0!=this.offset.x){var a=this.anchorX;a.set__(a._value-this.offset.x)}0!=this.offset.y&&(a=this.anchorY,a.set__(a._value-this.offset.y))}},startAnim:function(){zd.prototype.startAnim.call(this);this.setFlump()},set:function(a,b,c,d){null==d&&(d=!0);null==c&&(c=!1);d=zd.prototype.set.call(this,a,b,c,d);this._lastAnimName=
a;this._lastAnimParams=b;this._lastAnimLock=c;this.setFlump();this.onChange.emit();return d},relaunchAnim:function(){null!=this._lastAnimName&&this.set(this._lastAnimName,this._lastAnimParams,this._lastAnimLock)},setFlump:function(){if(null!=this.flump&&this.flump.isReady){var a=this.flump.hasAnim(this.animation.animName);a&&null==this.flump.owner.parent?this.owner.addChild(this.flump.owner):!a&&null!=this.flump.owner.parent&&this.owner.removeChild(this.flump.owner)}},__class__:Og});var la=function(){this.complete=
new ka;this.started=new ka;A.call(this);this.set_pointerEnabled(!1)};f["game.callouts.BaseCallout"]=la;la.__name__=["game","callouts","BaseCallout"];la.__super__=A;la.prototype=l(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);this._pack=C.getPack("ui_hud");null==this._script?this.build():(this._script.dispose(),this._script=new sb,this.owner.add(this._script),u.kill(this),u.kill(this._txt1),u.kill(this._txt2),u.kill(this._txt3),u.kill(this._bg1),u.kill(this._bg2))},dispose:function(){A.prototype.dispose.call(this);
this._bg2=this._bg1=this._txt3=this._txt2=this._txt1=this._script=null},start:function(){throw"override";},build:function(){this._script=new sb;this.owner.add(this._script)},runSequence:function(a,b){if(null!=b){if(null!=b.onStart)this.started.connect(b.onStart).once();if(null!=b.onComplete)this.complete.connect(b.onComplete).once();0<b.delay&&a.unshift(new U(b.delay))}a.unshift(new ma((Fc=this.started,m(Fc,Fc.emit))));a.push(new ma((Fc=this.complete,m(Fc,Fc.emit))));this._script.run(new Za(a))},
createText:function(a,b,c){a=S.getLocalizedTextSprite(a,b,null,null,c);a.centerAnchor();a.disablePointer();this.addSprite(a);return a},createImage:function(a){a=E.createImage(a,this._pack);a.centerAnchor();a.disablePointer();this.addSprite(a);return a},addSprite:function(a){null==a.owner&&(new r).add(a);this.owner.addChild(a.owner);return a},scaleIn:function(a,b){if(null==a)throw"Target cannot be null";null==b&&(b={});0<b.time||(b.time=0.5);null==b.ease&&(b.ease=t.quintOut);a.setAlpha(0);a.setScale(0);
return u.to(a,{scaleX:1,scaleY:1,alpha:1},b)},scaleOut:function(a,b){if(null==a)throw"Target cannot be null";null==b&&(b={});0<b.time||(b.time=0.3);null==b.ease&&(b.ease=t.quintIn);return u.to(a,{scaleX:0,scaleY:0,alpha:0},b)},itemScaleIn:function(a,b){var c=0.4,d=0.3,e=0.01,h=1;null!=b&&(0<b.time&&(c=b.time),0<b.inDelay&&(d=b.inDelay),0<b.outDelay&&(e=b.outDelay),0<b.scale&&(h=b.scale));a.centerAnchor();a.setScale(0);a.alpha.set_behavior(null);a.alpha.set__(1);return new Za([new U(d),new ma(function(){if(null!=
b&&null!=b.onStart)b.onStart()}),new ld([new rc(a.scaleX,h,c,t.backOut),new rc(a.scaleY,h,c,t.backOut)]),new ma(function(){if(null!=b&&null!=b.onComplete)b.onComplete()}),new U(e),new ld([new rc(a.scaleX,1.5,0.5*c,t.quintOut),new rc(a.scaleY,1.5,0.5*c,t.quintOut),new rc(a.alpha,0,0.5*c,t.quintOut)])])},shake:function(a,b,c,d,e){null==d&&(d=2);null==c&&(c=2);null==b&&(b=2);var h=a.owner._compMap.Script_56;null==h&&(h=new sb);a.owner.add(h);a=new Za([new li(c,d,b),new U(b)]);null!=e&&a.add(new ma(e));
h.run(a)},__class__:la});var Qi=function(){la.call(this)};f["game.callouts.DunkBreakerCallout"]=Qi;Qi.__name__=["game","callouts","DunkBreakerCallout"];Qi.__super__=la;Qi.prototype=l(la.prototype,{build:function(){la.prototype.build.call(this);this._txt1=this.createText("CALLOUT_BREAKER_1_1","hud_callout");this._txt1.setXY(50,-50);this._txt2=this.createText("CALLOUT_BREAKER_2","hud_callout");this._txt2.setAlpha(0);this._txt2.setXY(0,50);this._ballL=E.createImage("ball_left",this._pack);this._ballL.setXY(0,
60);this._ballL.centerAnchor();this._ballL.disablePointer();this.owner.addChild((new r).add(this._ballL));this._ballR=E.createImage("ball_right",this._pack);this._ballR.setXY(0,60);this._ballR.centerAnchor();this._ballR.disablePointer();this.owner.addChild((new r).add(this._ballR))},start:function(a){var b=this;p.play("announcer_dunk_breaker"," ANNOUNCER");this._ballL.setXY(0,60);this._ballL.setRotation(0);this._ballR.setXY(0,60);this._ballR.setRotation(0);this.scaleIn(this._txt1);this.scaleIn(this._ballL);
this.scaleIn(this._ballR);this.runSequence([new U(0.1),new ma(function(){b._txt1.setText("CALLOUT_BREAKER_1_2");b._txt1.setAlign(X.Center)}),new U(0.1),new ma(function(){b._txt1.setText("CALLOUT_BREAKER_1_3");b._txt1.setAlign(X.Center)}),new U(0.1),new ma(function(){b._txt1.setText("CALLOUT_BREAKER_1_4");b._txt1.setAlign(X.Center)}),new U(0.1),new ma(function(){b._txt1.setText("CALLOUT_BREAKER_1_5");b._txt1.setAlign(X.Center)}),new U(0.1),new ma(function(){b._txt1.setText("CALLOUT_BREAKER_1_6");b._txt1.setAlign(X.Center)}),
new U(0.3),new ma(function(){u.to(b._ballL,{x:"-=280",rotation:"-=40"},{time:1,delay:0},t.quintOut);u.to(b._ballR,{x:"+=280",rotation:"+=40"},{time:1,delay:0},t.quintOut);b.scaleIn(b._txt2)}),new U(1),new ma(function(){b.scaleOut(b._txt1);b.scaleOut(b._txt2);b.scaleOut(b._ballL);b.scaleOut(b._ballR)}),new U(1)],a)},dispose:function(){la.prototype.dispose.call(this);this._ballR=this._ballL=null},__class__:Qi});var Ri=function(){la.call(this)};f["game.callouts.DunkalityCallout"]=Ri;Ri.__name__=["game",
"callouts","DunkalityCallout"];Ri.__super__=la;Ri.prototype=l(la.prototype,{build:function(){la.prototype.build.call(this);this._emitter=new Ua("particle","ui_hud");this._emitter.setXY(0,0);this._emitter.textures=[this._pack.getTexture("star_white"),this._pack.getTexture("star_black")];this.addSprite(this._emitter);this._txt1=this.createText("CALLOUT_DUNKALITY","hud_callout")},start:function(a){var b=this;this.scaleIn(this._txt1);p.play("dunkality","CALLOUT");this.runSequence([new U(0.5),new ma(function(){b.shake(b._txt1,
2,3,3)}),new U(2),new ma(function(){b.scaleOut(b._txt1);b.scaleOut(b._emitter)}),new U(0.7)],a)},dispose:function(){la.prototype.dispose.call(this);this._emitter=null},__class__:Ri});var Si=function(){la.call(this)};f["game.callouts.EliminatedCallout"]=Si;Si.__name__=["game","callouts","EliminatedCallout"];Si.__super__=la;Si.prototype=l(la.prototype,{build:function(){la.prototype.build.call(this);this._txt1=this.createText("CALLOUT_ELIMINATED","hud_callout");this._txt1.anchorX.set__(0)},start:function(a){var b=
this;this._txt1.setXY(0.5*-this._txt1.getNaturalWidth()+20,-20);this._txt1.setAlpha(1);this._txt1.setRotation(90);this._txt1.rotation.animateTo(0,0.6,t.quintOut);this.scaleIn(this._txt1);this.runSequence([new U(0.8),new ma(function(){u.to(b._txt1,{rotation:90},{time:1.2,ease:t.backInOut,delay:0.08})}),new U(1),new ma(function(){b._txt1.y.animateTo(700,0.6,t.quadIn);b._txt1.alpha.animateTo(0,0.6,t.quadIn)}),new U(1)],a)},__class__:Si});var Ti=function(){this.onBallThrown=new ka;la.call(this)};f["game.callouts.FaceoffCallout"]=
Ti;Ti.__name__=["game","callouts","FaceoffCallout"];Ti.__super__=la;Ti.prototype=l(la.prototype,{build:function(){la.prototype.build.call(this);this._bg2=this.createImage("bg2");this._bg2.setXY(0,10);this._bg1=this.createImage("bg1");this._bg1.setXY(0,20);this._txt1=this.createText("CALLOUT_1","hud_callout");this._txt2=this.createText("CALLOUT_2","hud_callout");this._txt3=this.createText("CALLOUT_3","hud_callout");this._ball=this.createImage("ball")},start:function(a){var b=this;this._bg1.setAlpha(0);
this._bg2.setAlpha(0);this._ball.setScale(3);this._ball.setXY(0,700);this._ball.set_visible(!0);this.runSequence([new ld([this.itemScaleIn(this._txt1,{time:0.4,inDelay:0.3,onStart:function(){},onComplete:function(){b._bg1.alpha.animateTo(0,1,t.quintInOut)}}),this.itemScaleIn(this._bg1,{time:0.4,inDelay:0.3})]),new ld([this.itemScaleIn(this._txt2,{time:0.4,inDelay:0.3,onStart:function(){},onComplete:function(){b._bg1.alpha.animateTo(0,1,t.quintInOut);b.throwBall()}}),this.itemScaleIn(this._bg2,{time:0.4,
inDelay:0.3})]),new ld([this.itemScaleIn(this._txt3,{time:0.4,inDelay:0.3,onStart:function(){b._bg2.setScale(0);b._bg2.alpha.set_behavior(null);b._bg2.alpha.set__(1)},onComplete:function(){}}),this.itemScaleIn(this._bg2,{time:0.4,inDelay:0.3})]),new ma(function(){p.play("ref_whistle_1","CALLOUT")}),new U(2)],a)},throwBall:function(){var a=this;this._ball.rotation.animateTo(360,5,t.quintOut);u.to(this._ball,{y:-200,scaleX:1,scaleY:1},{delay:0.1,time:0.4,ease:t.sineOut,onComplete:function(){a.owner.addChild(a._txt3.owner);
u.to(a._ball,{y:40,scaleX:0.2,scaleY:0.2},{time:0.4,ease:t.sineIn,onComplete:function(){a._ball.set_visible(!1);a.onBallThrown.emit()}})}})},__class__:Ti});var Ui=function(){la.call(this)};f["game.callouts.LongShotCallout"]=Ui;Ui.__name__=["game","callouts","LongShotCallout"];Ui.__super__=la;Ui.prototype=l(la.prototype,{build:function(){la.prototype.build.call(this);var a=new r;this.owner.addChild(a);this._basketball=new A;a.add(this._basketball);var b=E.createImage("ball_lines_back",this._pack);
b.setXY(0,0);b.centerAnchor();b.disablePointer();a.addChild((new r).add(b));b=E.createImage("ball",this._pack);b.setXY(25,50);b.centerAnchor();b.disablePointer();a.addChild((new r).add(b));b=E.createImage("ball_lines",this._pack);b.setXY(20,15);b.centerAnchor();b.disablePointer();a.addChild((new r).add(b));this._txt1=this.createText("CALLOUT_LONG_SHOT","hud_callout");this._txt1.setXY(-25,-75)},start:function(a){var b=this;this._basketball.setXY(-40,-30);this._basketball.setScale(1);this._basketball.setAlpha(1);
this.scaleIn(this._txt1);u.from(this._basketball,{x:-80,y:-200,alpha:0},{time:0.5},t.quintOut);p.play("cheer_1","SCORE");this.runSequence([new U(0.5),new ma(function(){b.shake(b._txt1);b.shake(b._basketball)}),new U(1),new ma(function(){b.scaleOut(b._txt1);b.scaleOut(b._basketball)}),new U(0.7)],a)},dispose:function(){la.prototype.dispose.call(this);this._basketball=null},__class__:Ui});var Vi=function(){la.call(this)};f["game.callouts.MissedCallout"]=Vi;Vi.__name__=["game","callouts","MissedCallout"];
Vi.__super__=la;Vi.prototype=l(la.prototype,{build:function(){la.prototype.build.call(this);this._txt1=this.createText("CALLOUT_MISSED_1","hud_callout");this._txt1.anchorX.set__(0)},start:function(a){var b=this;this._txt1.setXY(0.5*-this._txt1.getNaturalWidth()+20,-20);this._txt1.setAlpha(1);this._txt1.setRotation(90);this._txt1.rotation.animateTo(0,0.6,t.quintOut);this.scaleIn(this._txt1);this.runSequence([new U(0.8),new ma(function(){u.to(b._txt1,{rotation:90},{time:1.2,ease:t.backInOut,delay:0.08})}),
new U(1),new ma(function(){b._txt1.y.animateTo(700,0.6,t.quadIn);b._txt1.alpha.animateTo(0,0.6,t.quadIn)}),new U(1)],a)},__class__:Vi});var Wi=function(){la.call(this)};f["game.callouts.NextTurnCallout"]=Wi;Wi.__name__=["game","callouts","NextTurnCallout"];Wi.__super__=la;Wi.prototype=l(la.prototype,{build:function(){la.prototype.build.call(this);this._bg2=this.createImage("bg2");this._bg1=this.createImage("bg1");this._image=this.createImage("mega");this._txt1=this.createText("CALLOUT_NEXT","hud_callout");
this._txt1.x.set__(-40);this._txt2=this.createText("CALLOUT_TURN","hud_callout");this._txt2.x.set__(this._txt1.x._value);this._image.setXY(this._txt1.x._value+0.5*this._txt1.getNaturalWidth()+100,20)},start:function(a){var b=this;this._txt1.setXY(0,-150);this._txt2.setXY(0,150);this.scaleIn(this._bg1,{time:0.6,ease:t.quintOut,delay:0.3});this.scaleIn(this._bg2,{time:0.6,ease:t.quintOut,delay:0.5});this.scaleIn(this._txt1,{time:0.6,ease:t.quintOut});this.scaleIn(this._txt2,{time:0.6,ease:t.quintOut,
delay:0.3,onStart:function(){b._txt1.y.animateTo(-40,0.9,t.bounceOut);b._txt2.y.animateTo(40,0.9,t.bounceOut)}});this.scaleIn(this._image,{time:1.5,ease:t.elasticOut,delay:0.4});this.runSequence([new U(1.3),new ma(function(){b.scaleOut(b._bg1);b.scaleOut(b._bg2);b.scaleOut(b._txt1,{delay:0.3});b.scaleOut(b._txt2,{delay:0.3});b.scaleOut(b._image,{delay:0.2})}),new U(1)],a)},__class__:Wi});var Xi=function(){la.call(this)};f["game.callouts.PosterizedCallout"]=Xi;Xi.__name__=["game","callouts","PosterizedCallout"];
Xi.__super__=la;Xi.prototype=l(la.prototype,{build:function(){la.prototype.build.call(this);j.config.announcer&&p.play("announcer_posterize","ANNOUNCER");this._camera=E.createImage("camera",this._pack);this._camera.setXY(-200,0);this._camera.centerAnchor();this._camera.disablePointer();this.owner.addChild((new r).add(this._camera));this._flash=new eb(16777215,o.width,o.height);this._flash.setXY(0.5*-o.width,0.5*-o.height);this._flash.disablePointer();this._flash.setAlpha(0);this.owner.addChild((new r).add(this._flash));
this._txt1=this.createText("CALLOUT_POSTERIZED","hud_callout");this._txt1.setAlpha(0);this._txt1.setXY(0,-50);this._txt2=this.createText("CALLOUT_POSTERIZED_NUM","hud_callout");this._txt2.setAlpha(0);this._txt2.setXY(0,50)},start:function(a){var b=this,c=ca.getDataByName(j.player.partner);this._txt2.setText("CALLOUT_POSTERIZED_NUM",{n:j.save.isCharacterPosterUnlocked(c)?2:1});this._txt2.setAlpha(0);this._txt2.setXY(0,50);this.scaleIn(this._camera);this.runSequence([new U(0.5),new ma(function(){b._flash.setAlpha(1);
p.play("posterized","CALLOUT")}),new U(0.2),new ma(function(){u.to(b._flash,{alpha:0},{time:0.5});b._txt1.setAlpha(1);b._txt2.setAlpha(1)}),new U(1),new ma(function(){b.scaleOut(b._txt1);b.scaleOut(b._txt2);b.scaleOut(b._camera)}),new U(1)],a)},dispose:function(){la.prototype.dispose.call(this);this._flash=this._camera=null},__class__:Xi});var Yi=function(){la.call(this)};f["game.callouts.ScoreCallout"]=Yi;Yi.__name__=["game","callouts","ScoreCallout"];Yi.__super__=la;Yi.prototype=l(la.prototype,
{build:function(){la.prototype.build.call(this);var a=new r;this.owner.addChild(a);this._basketball=new A;a.add(this._basketball);var b=E.createImage("ball_lines_back",this._pack);b.setXY(0,0);b.centerAnchor();b.disablePointer();a.addChild((new r).add(b));b=E.createImage("ball",this._pack);b.setXY(25,50);b.centerAnchor();b.disablePointer();a.addChild((new r).add(b));b=E.createImage("ball_lines",this._pack);b.setXY(20,15);b.centerAnchor();b.disablePointer();a.addChild((new r).add(b));this._txt1=this.createText("CALLOUT_SCORE",
"hud_callout");this._txt1.setXY(-25,-75)},start:function(a){var b=this;this._basketball.setXY(-40,-30);this._basketball.setScale(1);this._basketball.setAlpha(1);this.scaleIn(this._txt1);u.from(this._basketball,{x:-80,y:-200,alpha:0},{time:0.5},t.quintOut);p.play("cheer_1","SCORE");this.runSequence([new U(0.5),new ma(function(){b.shake(b._txt1);b.shake(b._basketball)}),new U(1),new ma(function(){b.scaleOut(b._txt1);b.scaleOut(b._basketball)}),new U(0.7)],a)},dispose:function(){la.prototype.dispose.call(this);
this._basketball=null},__class__:Yi});var Zi=function(){la.call(this)};f["game.callouts.SuperDunkCallout"]=Zi;Zi.__name__=["game","callouts","SuperDunkCallout"];Zi.__super__=la;Zi.prototype=l(la.prototype,{build:function(){la.prototype.build.call(this);this._bg2=this.createImage("bg2");this._bg1=this.createImage("bg1");this._mega=this.createImage("mega");this._txt1=this.createText("CALLOUT_MEGA_1","hud_callout");this._txt1.x.set__(-40);this._txt2=this.createText("CALLOUT_MEGA_2","hud_callout");this._txt2.x.set__(this._txt1.x._value);
this._mega.setXY(this._txt1.x._value+0.5*this._txt1.getNaturalWidth()+100,20)},start:function(a){var b=this;this._txt1.setXY(0,-150);this._txt2.setXY(0,150);this.scaleIn(this._bg1,{time:0.6,ease:t.quintOut,delay:0.3});this.scaleIn(this._bg2,{time:0.6,ease:t.quintOut,delay:0.5});this.scaleIn(this._txt1,{time:0.6,ease:t.quintOut});this.scaleIn(this._txt2,{time:0.6,ease:t.quintOut,delay:0.3,onStart:function(){b._txt1.y.animateTo(-40,0.9,t.bounceOut);b._txt2.y.animateTo(40,0.9,t.bounceOut)}});this.scaleIn(this._mega,
{time:1.5,ease:t.elasticOut,delay:0.4});this.runSequence([new U(1.3),new ma(function(){b.scaleOut(b._bg1);b.scaleOut(b._bg2);b.scaleOut(b._txt1,{delay:0.3});b.scaleOut(b._txt2,{delay:0.3});b.scaleOut(b._mega,{delay:0.2})}),new U(1)],a)},__class__:Zi});var $i=function(){la.call(this)};f["game.callouts.TimeoutCallout"]=$i;$i.__name__=["game","callouts","TimeoutCallout"];$i.__super__=la;$i.prototype=l(la.prototype,{build:function(){la.prototype.build.call(this);this._txt1=this.createText("CALLOUT_TIMEOUT",
"hud_callout")},start:function(a){var b=this;this._txt1.setXY(0,-700);this._txt1.setAlpha(1);this._txt1.y.animateTo(-20,0.6,t.bounceOut);this.runSequence([new U(0.8),new ma(function(){b._txt1.y.animateTo(700,0.6,t.backIn);b._txt1.alpha.animateTo(0,0.6,t.quadIn)}),new U(1)],a)},__class__:$i});var aj=function(){this.width=this.height=0};f["game.camera.CameraFrame"]=aj;aj.__name__=["game","camera","CameraFrame"];aj.__super__=k;aj.prototype=l(k.prototype,{get_name:function(){return"CameraFrame_32"},onStart:function(){k.prototype.onStart.call(this);
this._transform=this.owner._compMap.TransformComponent_43},onStop:function(){k.prototype.onStop.call(this)},onUpdate:function(a){null!=this._target1&&(k.prototype.onUpdate.call(this,a),null==this._target2?this.setPointPosition():this.setFramePosition())},setMainTarget:function(a){this._target1=a},setSecondaryTarget:function(a){this._target2=a},setPointPosition:function(){this._transform.position.x=this._target1.x;this._transform.position.y=this._target1.y;this.width=this._target1.width;this.height=
this._target1.height},setFramePosition:function(){var a=0,b=0,c=0,d=0;this._target1.x<this._target2.x?(a=this._target1.x-0.5*this._target1.width,b=this._target2.x+0.5*this._target2.width):(a=this._target2.x-0.5*this._target2.width,b=this._target1.x+0.5*this._target2.width);this._target1.y<this._target2.y?(c=this._target1.y-0.5*this._target1.height,d=this._target2.y+0.5*this._target2.width):(c=this._target2.y-0.5*this._target2.height,d=this._target1.y+0.5*this._target2.width);this.width=Math.abs(b-
a);this.height=Math.abs(d-c);this._transform.position.x=a+0.5*this.width;this._transform.position.y=c+0.5*this.height},__class__:aj});var Ab=function(){this.offsetDirectionX=this.offsetDirectionY=1;this.offsetX=this.offsetY=0;this.active=!1;k.call(this)};f["stolo.ensys.components.CameraTargetComponent"]=Ab;Ab.__name__=["stolo","ensys","components","CameraTargetComponent"];Ab.__super__=k;Ab.prototype=l(k.prototype,{get_name:function(){return"CameraTargetComponent_9"},dispose:function(){k.prototype.dispose.call(this);
null!=this._cameraSystem&&(this._cameraSystem.removeTarget(this),this._cameraSystem=null);this._returnParams=this._returnTarget=null},onActorAdded:function(){T.getSystemEntity(this.owner);this._cameraSystem=T.getSystemEntity(this.owner).getComponent("CameraSystem_25");null!=this._cameraSystem&&(this._cameraSystem.addTarget(this),this.active&&this._cameraSystem.setTarget(this))},setOffsetDirectionX:function(a,b,c){this._cameraSystem.get_target()!=this||a==this.offsetDirectionX||(this.offsetDirectionX=
a,this._cameraSystem.offsetTargetDirectionX(this,a,b,c))},__class__:Ab});var Se=function(){this.width=this.height=this.x=this.y=0};f["game.camera.CameraFrameTarget"]=Se;Se.__name__=["game","camera","CameraFrameTarget"];Se.__super__=Ab;Se.prototype=l(Ab.prototype,{onStart:function(){Ab.prototype.onStart.call(this);this._transform=this.owner._compMap.TransformComponent_43},onStop:function(){Ab.prototype.onStop.call(this)},dispose:function(){Ab.prototype.dispose.call(this)},onUpdate:function(a){Ab.prototype.onUpdate.call(this,
a);this.x=this._transform.position.x;this.y=this._transform.position.y},__class__:Se});var Jc=function(){this._saveLimits={};this._camera=new Pg;this._targets=[];this.currentTargetIndex=-1;this.selfUpdate=!0;this.autoSwitch=!1;this.enabled=this.autoCenterZoom=!0;k.call(this)};f["stolo.ensys.system.CameraSystem"]=Jc;Jc.__name__=["stolo","ensys","system","CameraSystem"];Jc.__super__=k;Jc.prototype=l(k.prototype,{get_name:function(){return"CameraSystem_25"},dispose:function(){k.prototype.dispose.call(this);
this._saveLimits=this._renderer=this._camera=this._target=this._targets=this.rendererOffset=null},onAdded:function(){this.sharedBase=new r;this.owner.addChild(this.sharedBase)},onStart:function(){this._renderer=this.owner._compMap.RendererSystem_45},onUpdate:function(a){this.selfUpdate&&this.update(a)},update:function(a){if(this.enabled){this.autoSwitch&&null==this._camera.target&&this.nextTarget();this._camera.update(a);var b=0,c=0;null!=this.rendererOffset&&(this.rendererOffset.update(a),b+=this.rendererOffset.x._value,
c+=this.rendererOffset.y._value);null!=this._camera.zoom&&(this.autoCenterZoom&&(a=this._renderer.dimensions,b+=0.5*(a.width-a.width*this._camera.zoom._value),c+=0.5*(a.height-a.height*this._camera.zoom._value)),this._renderer.setScale(this._camera.zoom._value));this._renderer.move(-this._camera.x+b,-this._camera.y+c)}},zoomTo:function(a,b,c){null==b&&(b=0);this._camera.zoomTo(a,b,c)},centerRenderer:function(){null==this._renderer&&(this._renderer=this.owner._compMap.RendererSystem_45);null==this.rendererOffset&&
(this.rendererOffset=new Ad);this.rendererOffset.x.set__(Math.round(this._renderer.dimensions.width/2));this.rendererOffset.y.set__(Math.round(this._renderer.dimensions.height/2))},configure:function(a){if(null!=a)for(var b=0,c=w.fields(a);b<c.length;){var d=c[b];++b;w.setProperty(this._camera,d,w.field(a,d))}},addTarget:function(a){this._targets.push(a);null==this._target&&this.autoSwitch&&this.nextTarget()},removeTarget:function(a){null!=this._targets&&Q.remove(this._targets,a)&&this._target==a&&
this.previousTarget()},setTarget:function(a,b){null==b&&(b={time:0});if(null==a){if(0==this._targets.length)return this._target=null;a=this._targets[0]}this._target=a;if(null==this._target||null==this._target.owner)return null;if(0<b.time){var c=this._target.owner._compMap.TransformComponent_43.position,d=this._target.owner._compMap.Sprite_5;null!=d&&(c={x:d.x._value,y:d.y._value});this._wasSpringX=this.get_camera().springX;this._wasSpringY=this.get_camera().springY;this.get_camera().springX=this.get_camera().springY=
!1;this.offsetTarget(a,0,0,b.time,b.ease);this.get_camera().animateTo(c.x+a.offsetX,c.y+a.offsetY,b.time,b.ease);u.delayCallTo(m(this,this.onCameraAnimationComplete),b.time,this.owner)}else this.syncTarget(!1),this.offsetTarget(a,a.offsetX,a.offsetY,b.offsetTime,b.offsetEase,b.offsetTimeY,b.offsetEaseY);return a},onCameraAnimationComplete:function(){this.offsetTarget(this.get_target(),this.get_target().offsetX,this.get_target().offsetY,0.3);this.syncTarget(!1);this.get_camera().springX=this._wasSpringX;
this.get_camera().springY=this._wasSpringY},syncTarget:function(a){null==a&&(a=!1);if(!(null==this._target||null==this._target.owner)){var b=this._target.owner._compMap.Sprite_5;null!=b&&this._camera.followSprite(b);a&&this._camera.moveToTarget()}},get_target:function(){return this._target},offsetTarget:function(a,b,c,d,e,h,n){null==h&&(h=-1);null==d&&(d=-1);a.offsetX=b;a.offsetY=c;0>d&&(d=Jc.DEFAULT_OFFET_TIME);null==e&&(e=Jc.DEFAULT_OFFET_EASING);this._camera.setOffset(b*a.offsetDirectionX,c*a.offsetDirectionY,
d,e,h,n)},offsetTargetDirectionX:function(a,b,c,d){null==c&&(c=0);this._camera.setOffsetX(a.offsetX*a.offsetDirectionX,c,d)},get_camera:function(){return this._camera},nextTarget:function(){this.currentTargetIndex++;this.currentTargetIndex>this._targets.length-1&&(this.currentTargetIndex=0);return this.setTarget(this._targets[this.currentTargetIndex])},previousTarget:function(){this.currentTargetIndex--;0>this.currentTargetIndex&&(this.currentTargetIndex=this._targets.length-1);return this.setTarget(this._targets[this.currentTargetIndex])},
__class__:Jc,__properties__:l(k.prototype.__properties__,{get_camera:"get_camera",get_target:"get_target"})});var wf=function(){this._targetZoom=1;this._minZoom=0.5;this.autoZoomSpeed=0.7;this.autoZoom=!0;Jc.call(this)};f["game.camera.GameCamera"]=wf;wf.__name__=["game","camera","GameCamera"];wf.__super__=Jc;wf.prototype=l(Jc.prototype,{onStart:function(){Jc.prototype.onStart.call(this);this._logic=this.owner._compMap.GameLogic_26},onStop:function(){this._logic=this._limits=this._frameTransform=this.frame=
null;Jc.prototype.onStop.call(this)},onUpdate:function(a){if(this._logic.isStarted&&null!=this.frame){this.calculateZoom(a);this.calculatePosition();this._camera.update(a);var b=0,c=0;null!=this.rendererOffset&&(this.rendererOffset.update(a),b+=this.rendererOffset.x._value,c+=this.rendererOffset.y._value);null!=this._camera.zoom&&this._renderer.setScale(this._camera.zoom._value);this._renderer.move(-this._camera.x*this._camera.zoom._value+b,-this._camera.y*this._camera.zoom._value+c)}},configure:function(){Jc.prototype.configure.call(this,
{linearDampingX:0.2,linearDampingY:0.2,springX:!0,stiffnessX:0.7,massX:40,dampingX:20,springY:!0,stiffnessY:0.9,massY:20,dampingY:20});this.centerRenderer()},setFrameLimits:function(a){this._limits=a;this._frameTransform=this.frame.owner._compMap.TransformComponent_43;this._camera.checkLimit=!1;this.frame.setMainTarget(y.instance(this._logic.player.owner._compMap.CameraTargetComponent_9,Se));this._minZoom=Kb.getDistance(0,0,o.width,o.height)/Kb.getDistance(this._limits.minX,this._limits.maxX,this._limits.minY,
this._limits.maxY)},centerForFaceoff:function(a,b,c){null==a&&(a=0);null==b&&(b=t.backInOut);null==c&&(c=t.quintInOut);this.animateTo(0,0,a,b,c)},showBasket:function(a,b,c,d){null==b&&(b=1);var e=a.owner._compMap.TransformComponent_43.position;this.animateTo(e.x+(a.isHome?50:-50),e.y+-100,b,c,d)},animateTo:function(){this.get_camera().linearDampingX=this.get_camera().linearDampingY=1},dunkShake:function(a){switch(a){case 0:break;case 2:this.get_camera().shake(4.5,50);break;default:this.get_camera().shake(0.5,
30)}},calculatePosition:function(){var a=this._limits.minX*this._camera.zoom._value,b=this._limits.maxX*this._camera.zoom._value,c=this._limits.minY*this._camera.zoom._value,d=this._limits.maxY-Math.max(0,o.height-o.height*this._camera.zoom._value);this._camera.setTarget(Kb.clamp(this._frameTransform.position.x,a,b),Kb.clamp(this._frameTransform.position.y,c,d))},calculateZoom:function(a){if(this.autoZoom)try{this._targetZoom=Math.min(1,Math.max(this._minZoom,Math.min(o.width/this.frame.width,o.height/
this.frame.height))),null==this._camera.zoom&&(this._camera.zoom=new J(1)),this._camera.zoom.set__(Kb.lerp(this._camera.zoom._value,this._targetZoom,a*this.autoZoomSpeed))}catch(b){null}},__class__:wf});var bj=function(){k.call(this)};f["game.characters.AnimOverlay"]=bj;bj.__name__=["game","characters","AnimOverlay"];bj.__super__=k;bj.prototype=l(k.prototype,{get_name:function(){return"AnimOverlay_8"},onAdded:function(){k.prototype.onAdded.call(this);this._anim=new Ca(this.asset,this.pack,m(this,
this.onAnimInit));this._anim.centerAnchor();null!=this.offset&&this._anim.setXY(this.offset.x,this.offset.y);this.owner.addChild((new r).add(this._anim));this.setTarget(this.owner)},onStart:function(){k.prototype.onStart.call(this);this._characterAnim.onChange.connect(m(this,this.onChange));this._prevDirection=this._transform.direction},setTarget:function(a){this._transform=a._compMap.TransformComponent_43;this._character=a._compMap.Character_13;this._characterAnim=a._compMap.Sprite_5},dispose:function(){k.prototype.dispose.call(this)},
onUpdate:function(a){k.prototype.onUpdate.call(this,a);this._prevDirection!=this._transform.direction&&(this.onChange(),this._prevDirection=this._transform.direction)},onAnimInit:function(){},onChange:function(){this._anim.gotoAndPlay(this._characterAnim.animation.animName+(1==this._transform.direction?"":"_reverse"),{loop:this._characterAnim.loop,frame:this._characterAnim.animation.get_currentFrame()})},__class__:bj});var Ba=function(){};f["game.characters.DefaultAttributes"]=Ba;Ba.__name__=["game",
"characters","DefaultAttributes"];var ue=function(){this._isDunking=this._isShooting=!1;this._lastDirection=0;this._teammate=this._opponent1=this._opponent2=null;this._stunTime=0;this._isPlayer=this.onPlayerTeam=!1;this.targetBasket=null;this.canMove=this.canSpecial=this.canShoot=!0;this.runDirection=0;this.tryJump=this.action=this.shouldFly=!1;this.isEnabled=this._onGround=!0;this.aiSpeedFactor=this.superMoveFactor=this.speedFactor=this.floatyFactor=1;this.onStartAction=new ka;this.onLoseBall=new ka;
this.onGetBall=new O;this.onScore=new O;this.onDunkCancelled=new O;this.onDunkContact=new O;this.onDunkAnim=new O;this.onDunkIntro=new O;this.onDunkStart=new O;this.onFirstUpdate=new ka;this.isReady=!1;this.minDunkPct=this.dunks=0.5;this.maxDunkPct=1;this.dunkTreshold=100;this.dunkVariation=3;this.weapon="punch";this.character="leo";k.call(this)};f["game.characters.Character"]=ue;ue.__name__=["game","characters","Character"];ue.__super__=k;ue.prototype=l(k.prototype,{get_name:function(){return"Character_13"},
onStart:function(){k.prototype.onStart.call(this);var a=T.getSystemEntity(this.owner);this._physicsSystem=a._compMap.PhysicSystem_36;this._soundSystem=a._compMap.SoundSystem_19;this._actors=a._compMap.ActorSystem_41;this._anim=this.owner._compMap.Sprite_5;this._disposer=this.owner._compMap.Disposer_61;this._physics=this.owner._compMap.PhysicsComponent_34;this._transform=this.owner._compMap.TransformComponent_43;this._health=this.owner._compMap.HealthComponent_12;this._effect=this.owner._compMap.Effect_14;
this._superDunk=this.owner._compMap.CharacterDunk_16;this.state=this.owner._compMap.CharacterState_15;this.contacts=this.owner._compMap.CharacterContacts_7;this._script=new sb;this.owner.add(this._script);this._disposer.add(this._health.onDamage.connect(m(this,this.onHurt)));this._disposer.add(this._physicsSystem.onPhysicUpdate.connect(m(this,this.onPhysicUpdate)));this._disposer.add(this._effect.onAddEffect.connect(m(this,this.effectOnAttributes)));this._disposer.add(this._effect.onClearEffect.connect(m(this,
this.resetAttributes)));this._disposer.add(this.contacts.onLand.connect(m(this,this.onLand)));this.spawnPosition={x:this._transform.position.x,y:this._transform.position.y};this._data=ca.getDataByName(this.character);this._gender=this._data.gender;if(this._physics.initialized)this.resetAttributes();else this._physics.onInitialize.connect(m(this,this.resetAttributes)).once()},onStop:function(){k.prototype.onStop.call(this);null!=this._superDunk&&this._superDunk.dispose();null!=this._dunk&&this._dunk.dispose();
this._data=this._playerIndicator=this._currentDunk=this._dunk=this._superDunk=this._opponent2=this._opponent1=this._teammate=this._ball=this._script=this._effect=this._health=this._transform=this._physics=this.state=this.contacts=this._disposer=this._anim=this._actors=this._soundSystem=this._physicsSystem=null;this.isReady=!1},effectOnAttributes:function(a){if(this.get_isPlayer()&&(p.play("pickup","PLAYER"),j.pickupGrabbed+=1,aa.trackPickup(a.name),5<=j.pickupGrabbed)){var b=W.getAchievementByName("ACHIEVEMENT_PICKUPS_QTY");
b.isComplete()||(b.complete(),W.save())}this.state.jump.jumpImpulse=Ba.jumpImpulse*a.jumpForce;this._runForce=Ba.runForce*a.runForce;this._airForce=Ba.airForce*a.airForce;this._maxVelocityX=Ba.maxVelocityX*a.maxVelocityX*this.aiSpeedFactor*this.speedFactor;this._maxVelocityXWithBall=Ba.maxVelocityXWithBall*a.maxVelocityXWithBall*this.aiSpeedFactor*this.speedFactor;this._maxVelocityY=Ba.maxVelocityY*a.maxVelocityY;this._physics.setMassScale(Ba.gravFactor*a.gravFactor*this.floatyFactor);this.state.shoot.autoShoot=
a.autoShoot;this.state.dunk.autoDunk=a.autoDunk},resetAttributes:function(){this.state.jump.jumpImpulse=Ba.jumpImpulse;this._runForce=Ba.runForce;this._airForce=Ba.airForce;this._maxVelocityX=Ba.maxVelocityX*this.aiSpeedFactor*this.speedFactor;this._maxVelocityXWithBall=Ba.maxVelocityXWithBall*this.aiSpeedFactor*this.speedFactor;this._maxVelocityY=Ba.maxVelocityY;this._physics.setMassScale(Ba.gravFactor*this.floatyFactor);this.state.shoot.autoShoot=!1;this.state.dunk.autoDunk=!1},resetState:function(){this._isDunking=
this.shouldFly=this.action=this.tryJump=!1;this._stunTime=0;this.setKinematic(!1);this._physics.resetType();this._physics.resetImpulse();this._physics.resetVelocity();this.state.setAnimSuffix(this.hasBall());this.state.reset();this._anim.relaunchAnim()},enable:function(a){null==a&&(a=!0);if(!a)return this.disable();this.isEnabled||(this.isEnabled=!0,null!=this._physics&&this._physics.enable())},disable:function(a,b){null==b&&(b=!1);null==a&&(a=!1);this.isEnabled&&(this.isEnabled=!1,a&&this._physics.disable(),
b&&this.resetState())},setKinematic:function(a){null==a&&(a=!0);if(!this._physics.initialized)return null;a?(this.kinematicPosition=new Ad(this._transform.position.x,this._transform.position.y),this._physics.setTransform=!1,this._physics.setKinematic()):(this._physics.setTransform=!0,this._physics.setDynamic(),null!=this.kinematicPosition&&(this._physics.setPosition(this.kinematicPosition.x._value,this.kinematicPosition.y._value),this._transform.setXY(this.kinematicPosition.x._value,this.kinematicPosition.y._value),
this.kinematicPosition.dispose()),this.kinematicPosition=null);return this.kinematicPosition},onUpdate:function(a){if(!this.isReady){if(!this._physics.initialized)return;this.isReady=!0;this.onFirstUpdate.emit()}null!=this._playerIndicator&&(this._playerIndicator.scaleX.set__(this._transform.direction),this._playerIndicator.set_visible(!(this.state.current==this.state.dunk&&null!=this._currentDunk&&this._currentDunk.isSuperDunk)));null!=this.kinematicPosition&&(this.kinematicPosition.update(a),this._physics.setTransform=
!1,this._physics.setPosition(this.kinematicPosition.x._value,this.kinematicPosition.y._value),this._transform.setXY(this.kinematicPosition.x._value,this.kinematicPosition.y._value));this.isEnabled&&(0<this._stunTime&&(this._stunTime-=a),this._onGround&&this.isStun()&&!this.isDunking()&&this.state.change(this.state.hurt,null,!0),null!=this._superDunk&&this._superDunk.addSuperMoveValue(o.superMovePerSecond*a))},onPhysicUpdate:function(a){this.state.current.update(a);this._isShooting?!o.autoAim&&!this.action&&
this.stopAction():(this.isEnabled&&!this.isStun()&&!this.isDunking()&&(5>Math.abs(this._physics.getVelocity().get_x())&&this._onGround&&!this.isAttacking()&&this.state.change(this.state.idle),this.canMove&&this.tryJump&&this.state.jump.canJump(this)&&this.state.change(this.state.jump.init(this)),this.action?this.startAction():this.stopAction(),this.canMove&&0!=this.runDirection&&this.run(this.runDirection)),this.shouldFly=this.tryJump=!1,this.runDirection=0)},startAction:function(){this.hasBall()?
this.canSpecial&&this._superDunk.canSuperMove()?this.special():this.canDunk()?this.dunk():this.canShoot&&this.shoot():this.attack();this.onStartAction.emit()},stopAction:function(){this._isShooting&&(this._isShooting=!1,this.state.change(this.state.idle))},run:function(a){!this.isStun()&&!this.isDunking()&&!this._isShooting&&(this.get_isPlayer()&&this.get_onGround()&&this._lastDirection!=a&&(p.play("sneaker_{random(3)}","FEET"),this._lastDirection=a),this._transform.direction=0>a?-1:1,this._onGround?
(this.isAttacking()||this.state.change(this.state.run),this._physics.applyImpulse(this._runForce*a,0)):this._physics.applyImpulse(this._airForce*a,0),a=this.hasBall()?this._maxVelocityXWithBall:this._maxVelocityX,this._physics.getVelocity().set_x(Ib.clamp(this._physics.getVelocity().get_x(),-a,a)))},onLand:function(){this.set_onGround(!0);null!=this._currentDunk?(this._currentDunk.land(),this._currentDunk=null):this.state.change(this.state.idle)},respawn:function(a,b){null==b&&(b=1);this.enable(!0);
null==a&&(a=this.respawnPosition);null==a&&(a=this.spawnPosition);this.action=this._isShooting=this._health.invincible=!1;this.state.reset();this.setKinematic(!1);this._physics.setPosition(a.x,a.y);this._transform.direction=b;null!=this.owner._compMap.Effect_14&&this.owner._compMap.Effect_14.clearEffect();this._effect.clearParticles()},isAttacking:function(){return this.state.current==this.state.attack},attack:function(){var a=this.state.attack.init(this,null==this._teammate?null:this._teammate.owner,
this.weapon);null!=this._attackConnection&&this._attackConnection.dispose();this._attackConnection=a.onHit.connect(m(this,this.onHit));this.state.change(a)},shoot:function(){this._isShooting||(this._isShooting=!0,this._transform.direction=this.onPlayerTeam?1:-1,this.state.change(this.state.shoot.init(this,this._ball,this.targetBasket)))},special:function(a){return this.hasBall()&&this._superDunk.canSuperMove()?(this._opponent1.disable(!1),null!=this._teammate&&this._teammate.disable(!1),null!=this._opponent2&&
this._opponent2.disable(!1),this._isDunking=!0,this._health.invincible=!0,this._ball.set_intangible(!0),this.owner.add(this._superDunk),this._currentDunk=this._superDunk,a=this._superDunk.start(this.targetBasket._compMap.Basket_17,a),this._superDunk.onComplete.connect(m(this,this.onDunkComplete)).once(),this.onDunkStart.emit(this._superDunk),null!=this._teammate&&this._teammate.state.change(this._teammate.state.hurt),null!=this._opponent1&&this._opponent1.state.change(this._opponent1.state.hurt),
null!=this._opponent2&&this._opponent2.state.change(this._opponent2.state.hurt),p.play("mega_start","SUPER"),a):!1},dunk:function(a){return this.canDunk()?(this._isDunking=!0,null==this._dunk&&(this._dunk=new Qb),this._dunk.autoDunk=this.state.dunk.autoDunk,this.owner.add(this._dunk),this._currentDunk=this._dunk,a=this._currentDunk.start(this.contacts.nearBasket,a),this._currentDunk.onComplete.connect(m(this,this.onDunkComplete)).once(),this.onDunkStart.emit(this._currentDunk),a):!1},onDunkComplete:function(a){null!=
a.get_basket()&&a.success&&this.onScore.emit({fromPlayer:this.get_isPlayer(),isHome:a.get_basket().isHome,character:this,basket:a.get_basket(),dunk:a});a.isSuperDunk||this.addSuperMoveValue(o.superMovePerDunk);null!=a.owner&&a.owner.remove(a);this._isDunking=!1},onHit:function(){this.addSuperMoveValue(o.superMovePerAttack)},onHurt:function(a){a=a._compMap.Weapon_6;this._stunTime=a.stunTime;if(this.get_isPlayer()&&(j.stuns+=1,20<=j.stuns)){var b=W.getAchievementByName("ACHIEVEMENT_DAMAGED_QTY");b.isComplete()||
(b.complete(),W.save())}this.hasBall()&&(this._isDunking&&null!=this._currentDunk&&(this._isDunking=!1,this._currentDunk.cancelable&&(this._currentDunk.cancel(),this.onDunkCancelled.emit(this._currentDunk),this._currentDunk.isAnimStarted&&null!=a.wielder&&a.wielder.get_isPlayer()&&this.checkDunkInteruptAchievement())),this._isShooting&&(this.state.shoot.cancel(),this._isShooting=!1),this._ball.setPosition(this._transform.position.x,this._transform.position.y),this._ball.applyForce(this._transform.direction*
(100*Math.random()+150),-500,0.5),this._ball.interupt(),this.removeBall(),null!=a.wielder&&a.wielder.get_isPlayer()&&(j.steals+=1),p.play("ball_lost","FX"));null!=a.wielder&&a.wielder.get_isPlayer()&&(p.play("hit_{random(2)}","HIT"),0.333>=Math.random()&&p.play("ooh_1","CROWD"));this.get_isPlayer()&&p.play("hit_{random(2)}","HIT");this._actors.spawn({template:{key:"hit"},transform:{position:{x:this._transform.position.x,y:this._transform.position.y}}});this._isShooting=this._isDunking=!1;this.state.change(this.state.hurt,
null,!0)},checkDunkInteruptAchievement:function(){var a=W.getAchievementByName("ACHIEVEMENT_INTERUPT_QTY");a.isComplete()||(a.updateProgress(1),W.save())},isStun:function(){return 0<this._stunTime},canDunk:function(){return!this._isDunking&&null!=this.contacts.nearBasket&&this.hasBall()},isDunking:function(){return this._isDunking},isShooting:function(){return this.action&&this._isShooting},get_ball:function(){return this._ball},set_ball:function(a){this._ball=a;this._ball.setOwner(this.owner);this.state.setAnimSuffix(this.hasBall());
this.isAttacking()?this.state.change(this.state.idle):this._anim.relaunchAnim();null!=this._ball&&this.onGetBall.emit(this);return this._ball},removeBall:function(a){null!=this._ball&&(this._ball.removeOwner(),null!=a&&this._ball.setPosition(this._transform.position.x+50*this._transform.direction,this._transform.position.y));this._ball=null;this.state.setAnimSuffix(!1);this._anim.relaunchAnim();this.onLoseBall.emit()},hasBall:function(){return null!=this._ball},getTeammate:function(){return this._teammate},
setPlayers:function(a,b,c){this.get_isPlayer()&&(this.onPlayerTeam=!0);this._opponent1=b;j.gameType==Ja.TWO_VERSUS_TWO&&(this._teammate=a,this._teammate.get_isPlayer()&&(this.onPlayerTeam=!0),this._opponent2=c,null!=this._weapon&&null!=a&&this._weapon.owner._compMap.DamageComponent_33.ignoreActor(a.owner,!0))},canSuperMove:function(){return this._superDunk.canSuperMove()},resetSuperMove:function(){this._superDunk.resetSuperMove()},addSuperMoveValue:function(a){this._superDunk.addSuperMoveValue(a)},
get_superDunk:function(){return this._superDunk},get_onGround:function(){return this._onGround},set_onGround:function(a){return this._onGround=a},get_isPlayer:function(){return this._isPlayer},get_charData:function(){return this._data},set_isPlayer:function(a){(this._isPlayer=a)&&this.addIndicator();return this._isPlayer},addIndicator:function(){this._playerIndicator=new ta(C.getPack("sprites_pack").getTexture("arrow_you"));this._playerIndicator.centerAnchor();this._playerIndicator.setXY(0,-75);this.owner.addChild((new r).add(this._playerIndicator),
!1);var a=E.createText("YOU","25_white_outline",new r);a.setAlign(X.Center);a.setXY(15,-30);this._playerIndicator.owner.addChild(a.owner)},__class__:ue,__properties__:l(k.prototype.__properties__,{set_isPlayer:"set_isPlayer",get_charData:"get_charData",get_isPlayer:"get_isPlayer",set_onGround:"set_onGround",get_onGround:"get_onGround",get_superDunk:"get_superDunk",set_ball:"set_ball",get_ball:"get_ball"})});var Rb=function(){this._groundContacts=new Bb;this.onLand=new O;this.contactType="DEFAULT";
k.call(this)};f["game.characters.CharacterContacts"]=Rb;Rb.__name__=["game","characters","CharacterContacts"];Rb.__super__=k;Rb.prototype=l(k.prototype,{get_name:function(){return"CharacterContacts_7"},onStart:function(){k.prototype.onStart.call(this);this._physicsSystem=T.getSystemEntity(this.owner)._compMap.PhysicSystem_36;this._disposer=this.owner._compMap.Disposer_61;this._anim=this.owner._compMap.Sprite_5;this._character=this.owner._compMap.Character_13;this._physics=this.owner._compMap.PhysicsComponent_34;
this.addListeners()},onStop:function(){this.removeListeners();k.prototype.onStop.call(this)},addListeners:function(){null!=this._physics&&(this._physics.addContactType(this.contactType),this._physics.addContactType(Rb.CHARACTER_CONTACT_TYPE));this._physicsSystem.addContactListener(ea.PRELISTENER,wa.ANY,Rb.CHARACTER_CONTACT_TYPE,Rb.CHARACTER_CONTACT_TYPE,this.owner,m(this,this.onPreContact));this._physicsSystem.addContactListener(ea.BEGIN,wa.COLLISION,this.contactType,"ANY_BODY",this.owner,m(this,
this.onContactBegin));this._physicsSystem.addContactListener(ea.END,wa.COLLISION,this.contactType,"ANY_BODY",this.owner,m(this,this.onContactEnd));this._physicsSystem.addContactListener(ea.BEGIN,wa.SENSOR,this.contactType,this.contactType,this.owner,m(this,this.onBasketBegin));this._physicsSystem.addContactListener(ea.END,wa.SENSOR,this.contactType,this.contactType,this.owner,m(this,this.onBasketEnd))},removeListeners:function(){this._physicsSystem.removeContactListener(ea.PRELISTENER,wa.ANY,Rb.CHARACTER_CONTACT_TYPE,
Rb.CHARACTER_CONTACT_TYPE,this.owner);this._physicsSystem.removeContactListener(ea.BEGIN,wa.COLLISION,this.contactType,"ANY_BODY",this.owner);this._physicsSystem.removeContactListener(ea.END,wa.COLLISION,this.contactType,"ANY_BODY",this.owner);this._physicsSystem.removeContactListener(ea.BEGIN,wa.SENSOR,this.contactType,this.contactType,this.owner);this._physicsSystem.removeContactListener(ea.END,wa.SENSOR,this.contactType,this.contactType,this.owner)},onPreContact:function(){return!1},onContactBegin:function(a,
b){90==180*b.angle/3.141592653589793&&this.land(a)},onContactEnd:function(a){!0==this._groundContacts.remove(a)&&this._character.set_onGround(this._groundContacts.iterator().hasNext())},onBasketBegin:function(a){a=a._compMap.Basket_17;a.isActive()&&(this.nearBasket=a,this._character.canDunk()&&!this._character.isDunking()&&this._anim.set("dunk1_pre",null,!1,!1))},onBasketEnd:function(){this._character.canDunk()&&!this._character.isDunking()&&this._character.state.change(this._character.state.fall);
this.nearBasket=null},land:function(a){this._groundContacts.set(a,!0);this.onLand.emit(a)},__class__:Rb});var Qb=function(){this.completeOnLanding=this.physicsAnimation=!1;this.cancelable=!0;this.autoDunk=!1;this.onComplete=new O;this.showBasket=!1;this.anticipationTime=this.introTime=this.animTime=this.outroTime=this.endDelay=-1;this.cameraZoomEase=t.quintInOut;this.cameraZoomTime=1.5;this.cameraZoom=1.25;k.call(this)};f["game.characters.CharacterDunk"]=Qb;Qb.__name__=["game","characters","CharacterDunk"];
Qb.__super__=k;Qb.prototype=l(k.prototype,{get_name:function(){return"CharacterDunk_16"},onAdded:function(){},onStart:function(){null==this._character&&null!=this.owner&&this.getContext()},onStop:function(){null!=this.owner._compMap.Script_56&&this.owner._compMap.Script_56.stopAll();k.prototype.onStop.call(this)},getContext:function(){null==this._character&&(this._character=this.owner._compMap.Character_13,this._anim=this.owner._compMap.Sprite_5,null!=this._anim&&(this.anim=this._anim.getAnimation()),
this._disposer=this.owner._compMap.Disposer_61,this._physics=this.owner._compMap.PhysicsComponent_34,this._transform=this.owner._compMap.TransformComponent_43,this._system=this.owner._internal_getFromParents("BaseGameSystem_20"),this._camera=this.owner._internal_getFromParents("CameraSystem_25"),this._sound=this.owner._internal_getFromParents("SoundSystem_19"))},dispose:function(){this._camera=this._system=this._character=this._basket=this._transform=this._physics=null;k.prototype.dispose.call(this)},
start:function(a){null==this._character&&null!=this.owner&&this.getContext();if(this.isStarted)return!1;this._basket=a;this._ball=this._character.get_ball();this.setDunkSuccess();this.setVariation();this.isStarted=!0;this.cancelled=this.isAnimStarted=this.isComplete=!1;this.charData=this._character.get_charData();this.fromPlayer=this._character.get_isPlayer();this.fromPlayerTeam=this._character.onPlayerTeam;null==this.dunkData&&null!=this._character.dunks&&Object.prototype.hasOwnProperty.call(this._character.dunks,
"dunk"+this.variation)&&(this.dunkData=w.field(this._character.dunks,"dunk"+this.variation));null==this.dunkData&&(this.dunkData=Qb.defaultDunkData);this._transform.direction=-1*a.getTransform().direction;this._basket.handleDunkStart(this);this._character.state.change(this._character.state.dunk.init(this._character),null,!0);this.animate();return this.success},end:function(){this.isComplete||(this.isStarted=!1,this.isComplete=!0,this._position=null,null!=this._basket&&this._basket.handleDunkEnd(this),
this.onComplete.emit(this))},cancel:function(){this.cancelled=!0;this.success=!1;this.owner._compMap.Script_56.stopAll();this.end()},animate:function(){var a=this._transform.position,b=100;-20<this._transform.position.x-this._basket.getTransform().position.x&&(this.wasUnderBasket=!0,b=20);this.setEndPosition();this._middlePosition=new jb(this._endPosition.x-0.5*(this._endPosition.x-a.x),this._endPosition.y-0.5*(this._endPosition.y-a.y)-b);this.introTime=this.getDuration("in");this.animTime=this.getDuration(null);
this.outroTime=this.getDuration("out");this.outroTime<Qb.minHangTime&&(this.outroTime=Qb.minHangTime);this.endDelay=this.success?Qb.defaultSuccessEndDelay:0;this.startSequence()},setEndPosition:function(){var a=this.get_basket().getTransform().position;this._endPosition=new jb(a.x+this._character.dunkOffset.x*this.get_basket().getTransform().direction,a.y+this._character.dunkOffset.y)},getDuration:function(a){a=this.getAnimName(a);return this._anim.getDuration(a,!1)},setAnim:function(a,b,c){null==
c&&(c=0);if(!this.cancelled){var a=this.getAnimName(a),d=this._character.character+"_"+a;0<c?u.delayCallTo(function(){p.play(d,a)},c,this.owner):p.play(d,a);this._anim.suffix=null;this._anim.set(a,b)}},getAnimName:function(a){null==a&&(a="");var b;b=this.isSuperDunk?"special":"dunk"+this.variation;""!=a&&(b+="_"+a);return b},startSequence:function(){this._position=this._character.setKinematic(!0);this._system.runDunkSequence(this.getSequence());0>=this.anticipationTime&&this.startIntro()},getSequence:function(){var a=
this,b=[new ma(function(){0<a.anticipationTime&&a.startIntro();a._character.onDunkIntro.emit(a)}),new U(this.introTime),new ma(function(){a.startAnim();a._character.onDunkAnim.emit(a)}),new U(this.animTime),new ma(function(){a.releaseBall();a.startOutro()}),new U(this.outroTime),new ma(function(){a.startFall();a.endAnim()}),new U(this.endDelay),new ma(function(){a.completeOnLanding||a.end()})];0<this.anticipationTime&&(b.unshift(new U(this.anticipationTime)),b.unshift(new ma(function(){a.startAnticipation()})));
return b},startAnticipation:function(a){null==a&&(a="pre");this.setAnim(a,{loop:this.dunkData.loopPre?!0:!1})},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._middlePosition.x,this.introTime/2,t.quintIn),this._position.y.animateTo(this._middlePosition.y,this.introTime/2,t.quadOut),u.delayCallTo(m(this,this.onHalfway),this.introTime/2))},startCameraZoom:function(){this._camera.frame.setMainTarget(this.owner._compMap.CameraTargetComponent_9);
this._camera.frame.setSecondaryTarget(null)},onHalfway:function(){this.isStarted&&null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.animTime,t.quintOut),this._position.y.animateTo(this._endPosition.y,this.animTime,t.sineIn))},onIntroAnimComplete:function(){},startAnim:function(a){this.isAnimStarted=!0;null==a&&(a=null);this.setAnim(a,{loop:this.dunkData.loop?!0:!1,onComplete:m(this,this.onAnimComplete)});this.success&&(!this.completeOnLanding&&this.showBasket&&this._camera.showBasket(this.get_basket()),
this.isSuperDunk&&this.startCameraZoom())},onAnimComplete:function(){},releaseBall:function(){null!=this._character&&(this._character.hasBall()&&(this._character.removeBall(),this._character.owner._compMap.HealthComponent_12.invincible=!0,this.success?(this._ball.setPosition(this.get_basket().getTransform().position.x+20*this._transform.direction,this.get_basket().getTransform().position.y),this._ball.applyForce(10*-this.get_basket().getTransform().direction,200*Math.random()-100,0.5),this._ball.set_intangible(!0)):
(this._ball.setPosition(this.get_basket().getTransform().position.x+50*this._transform.direction,this.get_basket().getTransform().position.y-50),this._ball.set_intangible(!1),this._ball.applyForce(400*this.get_basket().getTransform().direction,-600,0.5),this._character.owner._compMap.HealthComponent_12.invincible=!1,p.play("ball_lost","FX"))),this._character.onDunkContact.emit(this))},startOutro:function(a){null==a&&(a="out");this.setAnim(a,{onComplete:m(this,this.onOutroAnimComplete),loop:this.dunkData.loopOut?
!0:!1})},onOutroAnimComplete:function(){},startFall:function(a){null!=this._character&&(null==a&&(a="jump"),this._character.setKinematic(!1),this._physics.resetVelocity(),this.success&&this._system.setSpeed(0.6,this.endDelay+0.2,t.sineInOut),this._physics.moveBy(this._character.dunkOffset.x*-this.get_basket().getTransform().direction,this._character.dunkOffset.y),this.usedDunkFallAnim=!1,this._character.state.change(this._character.state.fall,null,!0),this.setAnim(a),this._anim.animation.stop())},
endAnim:function(){},land:function(){this.completeOnLanding&&this.end();var a=this._transform.direction;this._character.resetState();this._character.setKinematic(!1);this._transform.direction=a;this.usedDunkFallAnim&&this._anim.setAnimXY(0,0)},setVariation:function(){this.variation=""+Math.min(Math.floor(Math.random()*this._character.dunkVariation)+1,this._character.dunkVariation)},setDunkSuccess:function(){this.success=!0;var a=this.get_basket().getTransform().distanceTo(this._transform),b=this._character.maxDunkPct,
c=this._character.dunkTreshold;a>c&&(b=this._character.minDunkPct+(this._character.maxDunkPct-this._character.minDunkPct)*(1-(a-c)/(this.get_basket().getSize()-c)));(this.success=this.autoDunk||b>Math.random())?j.dunkSuccess+=1:j.dunkFail+=1},get_basket:function(){return this._basket},__class__:Qb,__properties__:l(k.prototype.__properties__,{get_basket:"get_basket"})});var Qd=function(){this._cooldown=this._attackDelay=this._attackTime=0;this.attackDirectionX=this.attackDirectionY=1;this.autoDisablePhysics=
!0;this.isAttacking=!1;this.ignoreDamageOnParent=!0;this.followParent=!1;k.call(this)};f["game.characters.Weapon"]=Qd;Qd.__name__=["game","characters","Weapon"];Qd.__super__=k;Qd.prototype=l(k.prototype,{get_name:function(){return"Weapon_6"},onStart:function(){k.prototype.onStart.call(this);this._defaultAttack=this.data;this._transform=this.owner._compMap.TransformComponent_43;this._damage=this.owner._compMap.DamageComponent_33;this._physics=this.owner._compMap.PhysicsComponent_34;this._damage.disable();
null!=this._parent&&this.setParent(this._parent)},onStop:function(){k.prototype.onStop.call(this);this._damage=this._transform=this._physics=this._parent=null},onUpdate:function(a){this.updatePosition(a);0<this._attackDelay?(this._attackDelay-=a,0>=this._attackDelay&&this.startAttack()):0<this._attackTime?(this._attackTime-=a,0>=this._attackTime&&this.endAttack()):0<this._cooldown&&(this._cooldown-=a,0>=this._cooldown&&this.endCooldown())},canAttack:function(){return this.isAttacking||0<this._cooldown?
!1:!0},attack:function(){if(!this.canAttack())return!1;if(null==this.data)throw"No attack data!";this.isAttacking=!0;0<this.data.delay?this._attackDelay=this.data.delay:this.startAttack();return!0},setParent:function(a,b){null==b&&(b=!0);a!=this._parent&&(this.removeParent(),this._parent=a);null!=this._damage&&(null!=this._parent?(this.ignoreDamageOnParent&&this._damage.ignoreActor(this._parent),this.followParent=b):this.removeParent())},removeParent:function(){null!=this._parent&&this._damage.ignoreActor(this._parent,
!1);this._parent=null;this.followParent=!1},startAttack:function(){this.isAttacking=!0;this._damage.enable();this.autoDisablePhysics&&this.enablePhysics();this.setShape(this.data);this._attackTime=this.data.time;this.animateAttack()},animateAttack:function(){null==this.attackPosition&&(this.attackPosition=new Ad);0>=this._attackTime&&this.endAttack();this.attackPosition.x.animateTo(this.data.x,this._attackTime,t.quintOut);this.attackPosition.y.animateTo(this.data.y,this._attackTime,t.quintOut);this.updatePosition(0)},
endAttack:function(){this.isAttacking=!1;this.startCooldown(this.data.cooldown);this.data=this.getNextAttack();this._damage.disable();this.autoDisablePhysics&&this.disablePhysics();null!=this.attackPosition&&(this.attackPosition.dispose(),this.attackPosition=null)},startCooldown:function(a){null==a&&(a=0);this._cooldown=a;if(0>=this._cooldown)return!1;this._damage.disable();return!0},endCooldown:function(){this._damage.enable()},getNextAttack:function(){return this._defaultAttack},updatePosition:function(a){if(this._physics.enabled&&
null!=this._transform){var b=null;this.followParent&&null!=this._parent&&null!=this._parent._compMap.TransformComponent_43?(b=this._parent._compMap.TransformComponent_43,this._transform.direction=b.direction):b=this.owner._compMap.TransformComponent_43;null!=b&&(null!=this.attackPosition?(this.attackPosition.update(a),this._physics.setPosition(b.position.x+(this.attackPosition.x._value+this.offset.x)*this.attackDirectionX*b.direction,b.position.y+(this.attackPosition.y._value+this.offset.y)*this.attackDirectionY)):
this._physics.setPosition(b.position.x+this.offset.x*this.attackDirectionX*b.direction,b.position.y+this.offset.y*this.attackDirectionX))}},enablePhysics:function(){this._physics.enable()},disablePhysics:function(){this._physics.setPosition(-1E3,-1E3);this._physics.disable()},setShape:function(a){if(null==this._physics.shape)throw"No shape on physics!";null==a.shape&&(a.shape={width:0,height:0});0>=a.shape.width&&(a.shape.width=this._physics.shape.width);0>=a.shape.height&&(a.shape.height=this._physics.shape.height)},
__class__:Qd});var Qg=function(){this.stunTime=1;Qd.call(this)};f["game.characters.CharacterWeapon"]=Qg;Qg.__name__=["game","characters","CharacterWeapon"];Qg.__super__=Qd;Qg.prototype=l(Qd.prototype,{setParent:function(a,b){null==b&&(b=!0);Qd.prototype.setParent.call(this,a,b);this.wielder=a._compMap.Character_13},onStop:function(){Qd.prototype.onStop.call(this);this.wielder=null},__class__:Qg});var Ha=function(){};f["game.characters.Teams"]=Ha;Ha.__name__=["game","characters","Teams"];var z=function(){this._superMoveValue=
0;this.onChange=new O;this.delayVO=1;Qb.call(this);this.cancelable=this.completeOnLanding=!1;this.isSuperDunk=this.physicsAnimation=!0};f["game.characters.specials.SuperDunk"]=z;z.__name__=["game","characters","specials","SuperDunk"];z.__super__=Qb;z.prototype=l(Qb.prototype,{onAdded:function(){Qb.prototype.onAdded.call(this)},dispose:function(){null!=this._specialFx&&null!=this._specialFx.owner&&this._specialFx.owner.dispose();this._specialFx=null;Qb.prototype.dispose.call(this)},start:function(a,
b){var c=this;if(this.isStarted)return!1;0>this.introTime&&(this.introTime=this.getDuration("in"));0>this.animTime&&(this.animTime=this.getDuration(null));this.cameraZoomTime=2;this.cameraZoomEase=t.quintInOut;this.canSuperMove()?(this.hideFX(),Qb.prototype.start.call(this,a,b),u.delayCallTo(function(){p.play("mega_"+c._character.get_charData().name,"VO")},this.delayVO)):this.success=!1;return this.success},canSuperMove:function(){return j.isPassNPlay()?!1:this._superMoveValue>=o.superMoveTotal},
resetSuperMove:function(){this.hideFX();this._superMoveValue=0;this.onChange.emit(0)},addSuperMoveValue:function(a){if(null!=this._character){var a=a*this._character.superMoveFactor,b=Math.floor(this._superMoveValue);this._superMoveValue=Math.max(0,Math.min(o.superMoveTotal,this._superMoveValue+a));b!=Math.floor(this._superMoveValue)&&(this.onChange.emit(this._superMoveValue/o.superMoveTotal),this.canSuperMove()&&!this._character.isDunking()?this.showFX():this._superMoveValue<o.superMoveTotal&&this.hideFX())}},
showFX:function(){null!=this._character&&(null==this._specialFx&&(this._specialFx=new Ca("fx","sprites_pack",null,!0,{anims:{special_explosion:{fps:6}}}),(new r).add(this._specialFx)),this._character.owner.addChild(this._specialFx.owner),this._specialFx.animComplete.connect(m(this,this.specialFxNextAnim)).once(),this._specialFx.gotoAndPlay("special_explosion"),this._specialFx.alpha.set__(1))},specialFxNextAnim:function(){this._character.owner.addChild(this._specialFx.owner,!1);this._specialFx.gotoAndPlay(["special_in",
"special_idle"])},hideFX:function(){var a=this;null!=this._specialFx&&null!=this._specialFx.owner.parent&&1==this._specialFx.alpha._value&&u.to(this._specialFx,{alpha:0},{time:1,ease:t.quintInOut,onComplete:function(){a._specialFx.owner.parent.removeChild(a._specialFx.owner)}})},setDunkSuccess:function(){this.success=!0},setVariation:function(){this.variation="special"},endAnim:function(){this._character.removeBall(this._transform);this.resetSuperMove();Qb.prototype.endAnim.call(this)},__class__:z});
var cj=function(){z.call(this);this.dunkData={direction:1,loopIn:!1,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};f["game.characters.specials.CaptainDangerSpecial"]=cj;cj.__name__=["game","characters","specials","CaptainDangerSpecial"];cj.__super__=z;cj.prototype=l(z.prototype,{start:function(a,b){return z.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=0.75;this.animTime=this.getDuration(null);this.outroTime=0.3;z.prototype.startSequence.call(this)},
startAnticipation:function(){z.prototype.startAnticipation.call(this,"pre")},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});this._position.x.animateTo(this._endPosition.x-100,this.introTime,t.quadOut);this._position.y.animateTo(this._endPosition.y,this.introTime,t.quadOut)},startAnim:function(){z.prototype.startAnim.call(this,null);this._position.x.animateTo(this._endPosition.x,this.introTime,t.quadOut);this._position.y.animateTo(this._endPosition.y,
this.introTime,t.quadOut);u.delayCallTo(function(){p.play("captain_hit","DUNK")},0.5)},__class__:cj});var dj=function(){z.call(this);this.dunkData={direction:1,loopIn:!0,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};f["game.characters.specials.DonnieSpecial"]=dj;dj.__name__=["game","characters","specials","DonnieSpecial"];dj.__super__=z;dj.prototype=l(z.prototype,{start:function(a,b){return z.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=
1;this.animTime=this.getDuration(null);this.outroTime=0.3;z.prototype.startSequence.call(this)},startAnticipation:function(){z.prototype.startAnticipation.call(this,"pre")},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime,t.backIn),this._position.y.animateTo(this._endPosition.y,this.introTime,t.backIn))},startAnim:function(){z.prototype.startAnim.call(this)},
startOutro:function(){z.prototype.startOutro.call(this)},__class__:dj});var ej=function(){z.call(this);this.dunkData={direction:1,loopIn:!0,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};f["game.characters.specials.FeeSpecial"]=ej;ej.__name__=["game","characters","specials","FeeSpecial"];ej.__super__=z;ej.prototype=l(z.prototype,{start:function(a,b){return z.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=1.25;this._middlePosition.x=
this._endPosition.x;this._middlePosition.y=this._endPosition.y;z.prototype.startSequence.call(this)},startAnticipation:function(){z.prototype.startAnticipation.call(this,"pre")},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._middlePosition.x,this.introTime/2,t.linear),this._position.y.animateTo(this._middlePosition.y,this.introTime/2,t.backOut),u.delayCallTo(m(this,
this.onHalfway),this.introTime/2))},startAnim:function(a){z.prototype.startAnim.call(this,a)},startOutro:function(){z.prototype.startOutro.call(this,"out")},__class__:ej});var fj=function(){z.call(this);this.dunkData={direction:1,loopIn:!0,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};f["game.characters.specials.FooSpecial"]=fj;fj.__name__=["game","characters","specials","FooSpecial"];fj.__super__=z;fj.prototype=l(z.prototype,{start:function(a,b){return z.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=
this.getDuration("pre");this.animTime=this.getDuration(null);this.outroTime=0.3;z.prototype.startSequence.call(this)},startAnticipation:function(){z.prototype.startAnticipation.call(this,"pre")},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime/2,t.linear),this._position.y.animateTo(this._endPosition.y,this.introTime,t.backOut))},
startAnim:function(a){z.prototype.startAnim.call(this,a)},startOutro:function(){z.prototype.startOutro.call(this,"out")},startFall:function(a){z.prototype.startFall.call(this,a);this._physics.moveBy(50*-this.get_basket().getTransform().direction,-50)},__class__:fj});var gj=function(){this._inTime1=this._inTime2=1.5;z.call(this);this.dunkData={direction:1,loopIn:!0,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};f["game.characters.specials.HenrySpecial"]=gj;gj.__name__=["game","characters","specials",
"HenrySpecial"];gj.__super__=z;gj.prototype=l(z.prototype,{dispose:function(){z.prototype.dispose.call(this)},onUpdate:function(a){z.prototype.onUpdate.call(this,a)},start:function(a,b){var c=z.prototype.start.call(this,a,b);this._middlePosition.x=this._endPosition.x;this._middlePosition.y=this._endPosition.y;return c},startSequence:function(){this.anticipationTime=this.getDuration("pre");this._inTime1=this.getDuration("in");this._inTime2=this.getDuration("in2");this.introTime=this._inTime1+this._inTime2;
this.animTime=0.7;this.outroTime=0.3;z.prototype.startSequence.call(this)},startAnticipation:function(){z.prototype.startAnticipation.call(this,"pre")},startIntro:function(){p.play("henry_snap","FX");this.setAnim("in");this._position.x.set__(Math.min(460,Math.max(-460,this._position.x._value-300)));this._position.y.set__(Math.max(-250,this._position.y._value-100));this._position.x.animateTo(this._position.x._value+100,this._inTime1,t.quadIn);u.delayCallTo(m(this,this.endIntro1),this._inTime1)},endIntro1:function(){u.delayCallTo(function(){p.play("henry_snap",
"FX")},0.2);this._anim.alpha.set__(0);this.startIntro2()},startIntro2:function(){u.delayCallTo(function(){p.play("henry_snap","FX")},0.2);this._anim.alpha.set__(1);this.setAnim("in2");var a=this._position.y;a.set__(a._value-200);this._position.x.animateTo(this._position.x._value+100,this._inTime2,t.quadIn);u.delayCallTo(m(this,this.endIntro2),this._inTime1)},endIntro2:function(){u.delayCallTo(function(){p.play("henry_snap","FX")},0.5);this._anim.alpha.set__(0);this.startCameraZoom()},startAnim:function(a){u.delayCallTo(function(){p.play("henry_snap",
"FX")},0.5);this._anim.alpha.set__(1);null==a&&(a=null);this.setAnim(a,{loop:this.dunkData.loop?!0:!1,onComplete:m(this,this.onAnimComplete)});this._position.x.set__(this._endPosition.x);this._position.y.set__(this._endPosition.y);u.delayCallTo(function(){p.play("mike_spinning_arms","DUNK")},0.25)},startOutro:function(){z.prototype.startOutro.call(this)},__class__:gj});var Cb=function(){z.call(this);this.dunkData={direction:1,loopIn:!1,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};f["game.characters.specials.LeoSpecial"]=
Cb;Cb.__name__=["game","characters","specials","LeoSpecial"];Cb.__super__=z;Cb.prototype=l(z.prototype,{dispose:function(){null!=Cb._blackScreen&&Cb._blackScreen.dispose();Cb._blackScreen=null;z.prototype.dispose.call(this)},start:function(a,b){return z.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre")+2.25;this.introTime=0.25;this.animTime=this.getDuration(null);this.outroTime=this.getDuration("out");this._middlePosition.x=this._endPosition.x;
this._middlePosition.y=this._endPosition.y;z.prototype.startSequence.call(this)},startAnticipation:function(){var a=this;z.prototype.startAnticipation.call(this,"pre");null==Cb._blackScreen&&(Cb._blackScreen=(new r).add(new eb(0,o.width,o.height)));u.delayCallTo(function(){a.owner.parent.parent.addChild(Cb._blackScreen);null!=Cb._blackScreen._compMap.Sprite_5&&(Cb._blackScreen._compMap.Sprite_5.setAlpha(0),Cb._blackScreen._compMap.Sprite_5.alpha.animateTo(0.8,0.25,t.quintInOut),u.delayCallTo(function(){Cb._blackScreen._compMap.Sprite_5.setAlpha(0.8);
Cb._blackScreen._compMap.Sprite_5.alpha.set_behavior(new Pf(0,0.5));u.to(Cb._blackScreen._compMap.Sprite_5,{alpha:0},{delay:1.1,onComplete:function(){null!=Cb._blackScreen.parent&&Cb._blackScreen.parent.removeChild(Cb._blackScreen.parent)}})},1.5,a.owner))},0.65,this.owner);u.delayCallTo(function(){a._position.x.animateTo(a._endPosition.x,0.3,t.quadOut);a._position.y.animateTo(a._endPosition.y-400,0.3,t.quadOut)},1.8,this.owner)},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?
!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._middlePosition.x,this.introTime,t.quadOut),this._position.y.animateTo(this._middlePosition.y,this.introTime,t.quadOut))},startAnim:function(){z.prototype.startAnim.call(this,null)},startOutro:function(){z.prototype.startOutro.call(this)},startFall:function(){z.prototype.startFall.call(this);this.anim.set_isPlaying(!1)},__class__:Cb});var hj=function(){z.call(this);this.dunkData={direction:1,
loopIn:!1,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};f["game.characters.specials.LincolnSpecial"]=hj;hj.__name__=["game","characters","specials","LincolnSpecial"];hj.__super__=z;hj.prototype=l(z.prototype,{start:function(a,b){return z.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=0.75;this.animTime=this.getDuration(null);this.outroTime=1;this.completeOnLanding=!0;z.prototype.startSequence.call(this)},startAnticipation:function(){z.prototype.startAnticipation.call(this,
"pre")},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime,t.quadOut),this._position.y.animateTo(this._endPosition.y,this.introTime,t.quadOut))},startAnim:function(){this.isAnimStarted=!0;this.setAnim(null,{loop:this.dunkData.loop?!0:!1,onComplete:m(this,this.onAnimComplete)},0.7);this.success&&(!this.completeOnLanding&&this.showBasket&&
this._camera.showBasket(this.get_basket()),this.isSuperDunk&&this.startCameraZoom());null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime,t.quadOut),this._position.y.animateTo(this._endPosition.y,this.introTime,t.quadOut))},startOutro:function(){z.prototype.startOutro.call(this,"out");this._character.setKinematic(!1);this._physics.resetVelocity()},startFall:function(){this.usedDunkFallAnim=!0},land:function(){var a=this;this.setAnim("land");u.delayCallTo(function(){a.completeOnLanding&&
a.end()},0.5)},__class__:hj});var ij=function(){z.call(this);this.dunkData={direction:1,loopIn:!1,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};f["game.characters.specials.LynnSpecial"]=ij;ij.__name__=["game","characters","specials","LynnSpecial"];ij.__super__=z;ij.prototype=l(z.prototype,{start:function(a,b){return z.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=0.75;this.animTime=this.getDuration(null);this.outroTime=this.getDuration("out");
this.endDelay=0;z.prototype.startSequence.call(this)},startAnticipation:function(){z.prototype.startAnticipation.call(this,"pre")},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime,t.quadOut),this._position.y.animateTo(this._endPosition.y-60,this.introTime,t.quadOut))},startAnim:function(){z.prototype.startAnim.call(this,null);
null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime,t.quadOut),this._position.y.animateTo(this._endPosition.y,this.introTime,t.quadOut))},startOutro:function(){z.prototype.startOutro.call(this,"out")},startFall:function(){this.setAnim("jump");this._character.state.change(this._character.state.fall,null,!0);this._character.setKinematic(!1);this._physics.resetVelocity()},land:function(){this.completeOnLanding&&this.end()},__class__:ij});var jj=function(){this._rotationSpeed=
0.5;this._rotate=!1;this._puffTime=0.35;this._inTime1=this._inTime2=1.5;z.call(this);this.dunkData={direction:1,loopIn:!0,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};f["game.characters.specials.MikeSpecial"]=jj;jj.__name__=["game","characters","specials","MikeSpecial"];jj.__super__=z;jj.prototype=l(z.prototype,{dispose:function(){null!=this._fx&&this._fx.dispose();this._fx=null;null!=this._fx2&&this._fx2.dispose();this._fx2=null;z.prototype.dispose.call(this)},onUpdate:function(a){z.prototype.onUpdate.call(this,
a);this._rotate&&(this._transform.rotation+=this._rotationSpeed);null!=this._fx&&null!=this._fx.parent&&this._fx._compMap.Sprite_5.setXY(this._transform.position.x,this._transform.position.y);null!=this._fx2&&null!=this._fx2.parent&&this._fx2._compMap.Sprite_5.setXY(this._transform.position.x,this._transform.position.y)},start:function(a,b){var c=z.prototype.start.call(this,a,b);this._middlePosition.x=this._endPosition.x;this._middlePosition.y=this._endPosition.y;null==this._fx&&(this._fx=this.createFx());
null==this._fx2&&(this._fx2=this.createFx());return c},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=this._inTime1+this._inTime2;this.animTime=0.7;this.outroTime=0.3;z.prototype.startSequence.call(this)},startAnticipation:function(){z.prototype.startAnticipation.call(this,"pre");u.delayCallTo(function(){p.play("smoke_puff2","FX")},this.anticipationTime-this._puffTime)},startIntro:function(){p.play("smoke_puff","FX");this.owner.parent.addChild(this._fx);this.setAnim("in");
this._position.x.set__(Math.min(460,Math.max(-460,this._position.x._value-300)));this._position.y.set__(Math.max(-250,this._position.y._value-100));this._position.x.animateTo(this._position.x._value+100,this._inTime1,t.quadIn);this._transform.fixedRotation=!1;this._rotate=!0;u.delayCallTo(m(this,this.endIntro1),this._inTime1-this._puffTime)},endIntro1:function(){p.play("smoke_puff2","FX");this._anim.alpha.set__(0);this.owner.parent.addChild(this._fx2);u.delayCallTo(m(this,this.startIntro2),this._puffTime)},
startIntro2:function(){p.play("smoke_puff","FX");this._anim.alpha.set__(1);this.owner.parent.addChild(this._fx);this._transform.rotation=0;this._rotate=!1;this.setAnim("in2");var a=this._position.y;a.set__(a._value-200);this._position.x.animateTo(this._position.x._value+100,this._inTime2,t.quadIn);u.delayCallTo(m(this,this.endIntro2),this._inTime1-this._puffTime)},endIntro2:function(){p.play("smoke_puff2","FX");this._anim.alpha.set__(0);this.owner.parent.addChild(this._fx2);this.startCameraZoom()},
startAnim:function(a){p.play("smoke_puff","FX");this._anim.alpha.set__(1);null==a&&(a=null);this._transform.fixedRotation=!0;this.setAnim(a,{loop:this.dunkData.loop?!0:!1,onComplete:m(this,this.onAnimComplete)});this._position.x.set__(this._endPosition.x);this._position.y.set__(this._endPosition.y);u.delayCallTo(function(){p.play("mike_spinning_arms","DUNK")},0.25)},startOutro:function(){z.prototype.startOutro.call(this)},createFx:function(){var a=new r,b=new Ca("mike_fx","team_tmnt_2");this._disposer.add(b.animComplete.connect(m(this,
this.onFxComplete)));a.add(b);return a},onFxComplete:function(a,b){this.owner.parent.removeChild(b.owner)},__class__:jj});var kj=function(){z.call(this);this.dunkData={direction:1,loopPre:!1,loopIn:!1,loop:!0,loopOut:!0,loopHang:!0}};f["game.characters.specials.PatrickSpecial"]=kj;kj.__name__=["game","characters","specials","PatrickSpecial"];kj.__super__=z;kj.prototype=l(z.prototype,{onStop:function(){if(null!=this._hooks){for(var a=0,b=this._hooks;a<b.length;){var c=b[a];++a;c.dispose()}this._hooks=
null}z.prototype.onStop.call(this)},start:function(a,b){this.completeOnLanding=!1;this._hooks=[];this.createHook("hook1",-100,-800);this.createHook("hook2",150,-850);this.createHook("hook3",250,-750);var c=z.prototype.start.call(this,a,b);this._middlePosition.y-=75;this._endPosition.x+=20;return c},onUpdate:function(a){z.prototype.onUpdate.call(this,a)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=1;this.animTime=this.getDuration(null);this.outroTime=this.getDuration("out");
for(var a=1,b=0,c=this._hooks;b<c.length;){var d=c[b];++b;u.to(d._compMap.Sprite_5,{y:d._compMap.Sprite_5.y._value+400},{time:0.75,delay:0.2*a,ease:t.bounceOut});this.owner.parent.addChild(d);a++}z.prototype.startSequence.call(this)},startAnticipation:function(){z.prototype.startAnticipation.call(this,"pre");u.delayCallTo(function(){p.play("patrick_bite","DUNK")},0.75)},startIntro:function(){z.prototype.startIntro.call(this,"in")},startAnim:function(){for(var a=this,b=1,c=0,d=this._hooks;c<d.length;){var e=
[d[c]];++c;u.to(e[0]._compMap.Sprite_5,{y:e[0]._compMap.Sprite_5.y._value-600},{time:0.75,delay:0.2*b,ease:t.bounceIn}).then(function(b){return function(){a.owner.parent.removeChild(b[0])}}(e));b++}z.prototype.startAnim.call(this,null);u.delayCallTo(function(){p.play("patrick_pop","DUNK")},0.4)},startOutro:function(){z.prototype.startOutro.call(this,"out")},startFall:function(a){z.prototype.startFall.call(this,a);null!=this._position&&null!=this._position.y&&this._position.y.animateTo(this._position.y._value+
50,1,t.sineIn)},createHook:function(a,b,c){var d=new r,a=E.createImage(a,C.getPack("team_sb")),e=this.owner._compMap.TransformComponent_43;a.setXY(e.position.x+b,e.position.y+c);d.add(a);this._hooks.push(d)},__class__:kj});var lj=function(){z.call(this);this.dunkData={direction:1,loopPre:!1,loopIn:!1,loop:!0,loopOut:!0,loopHang:!0}};f["game.characters.specials.PinkRangerSpecial"]=lj;lj.__name__=["game","characters","specials","PinkRangerSpecial"];lj.__super__=z;lj.prototype=l(z.prototype,{onStop:function(){z.prototype.onStop.call(this)},
start:function(a,b){this.completeOnLanding=!1;var c=z.prototype.start.call(this,a,b);this._middlePosition.y-=75;this._endPosition.x+=20;return c},onUpdate:function(a){z.prototype.onUpdate.call(this,a)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=1;this.animTime=this.getDuration(null);this.outroTime=this.getDuration("out");z.prototype.startSequence.call(this)},startAnticipation:function(){z.prototype.startAnticipation.call(this,"pre");u.delayCallTo(function(){p.play("pink_r_throw",
"DUNK")},1)},startIntro:function(){z.prototype.startIntro.call(this,"in")},startAnim:function(){z.prototype.startAnim.call(this,null)},startOutro:function(){z.prototype.startOutro.call(this,"out")},startFall:function(a){z.prototype.startFall.call(this,a);null!=this._position&&null!=this._position.y&&this._position.y.animateTo(this._position.y._value+50,1,t.sineIn)},__class__:lj});var mj=function(){z.call(this);this.dunkData={direction:1,loopIn:!0,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};f["game.characters.specials.RaphSpecial"]=
mj;mj.__name__=["game","characters","specials","RaphSpecial"];mj.__super__=z;mj.prototype=l(z.prototype,{start:function(a,b){return z.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=1;this.animTime=this.getDuration(null);this.outroTime=0.3;this._middlePosition.y-=100;z.prototype.startSequence.call(this)},startAnticipation:function(){z.prototype.startAnticipation.call(this,"pre")},startIntro:function(a){null==a&&(a="in");this.setAnim(a,
{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime,t.quadOut),this._position.y.animateTo(this._middlePosition.y,this.introTime/2,t.quadOut),u.delayCallTo(m(this,this.onHalfway),this.introTime/2))},onHalfway:function(){this.isStarted&&null!=this._position.x&&this._position.y.animateTo(this._endPosition.y,this.animTime,t.sineIn)},startAnim:function(a){z.prototype.startAnim.call(this,a)},
startOutro:function(){z.prototype.startOutro.call(this,"out")},__class__:mj});var nj=function(){z.call(this);this.dunkData={direction:1,loopIn:!0,loopPre:!1,loop:!1,loopOut:!1,loopHang:!1}};f["game.characters.specials.RedRangerSpecial"]=nj;nj.__name__=["game","characters","specials","RedRangerSpecial"];nj.__super__=z;nj.prototype=l(z.prototype,{start:function(a,b){return z.prototype.start.call(this,a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=1;this.animTime=
this.getDuration(null);this.outroTime=0.3;z.prototype.startSequence.call(this)},startAnticipation:function(){z.prototype.startAnticipation.call(this,"pre");u.delayCallTo(function(){p.play("red_r_water","DUNK")},1.3)},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime,t.backIn),this._position.y.animateTo(this._endPosition.y,this.introTime,
t.backIn))},startAnim:function(){z.prototype.startAnim.call(this);u.delayCallTo(function(){p.play("red_r_explosion","DUNK")},0)},startOutro:function(){z.prototype.startOutro.call(this)},__class__:nj});var oj=function(){z.call(this);this.dunkData={direction:1,loopPre:!1,loopIn:!1,loop:!0,loopOut:!1,loopHang:!1}};f["game.characters.specials.SpongebobSpecial"]=oj;oj.__name__=["game","characters","specials","SpongebobSpecial"];oj.__super__=z;oj.prototype=l(z.prototype,{start:function(a,b){return z.prototype.start.call(this,
a,b)},startSequence:function(){this.anticipationTime=this.getDuration("pre");this.introTime=0.65;this.animTime=this.getDuration(null);this.outroTime=0.25;z.prototype.startSequence.call(this)},startIntro:function(a){null==a&&(a="in");this.setAnim(a,{loop:this.dunkData.loopIn?!0:!1,onComplete:m(this,this.onIntroAnimComplete)});null!=this._position.x&&(this._position.x.animateTo(this._endPosition.x,this.introTime,t.cubeOut),this._position.y.animateTo(this._endPosition.y,this.introTime,t.quintOut))},
startAnim:function(){z.prototype.startAnim.call(this,null)},startOutro:function(){z.prototype.startOutro.call(this,"land")},__class__:oj});var ba=function(){this.onExit=new O;this.onEnter=new O;this.fallbackAnim="idle";this.animName=""};f["game.characters.states.BaseState"]=ba;ba.__name__=["game","characters","states","BaseState"];ba.prototype={enter:function(){this.onEnter.emit(this)},update:function(){},exit:function(){this.onExit.emit(this)},__class__:ba};var pj=function(){this.onHit=new O;ba.call(this);
this.animName="atk"};f["game.characters.states.Attack"]=pj;pj.__name__=["game","characters","states","Attack"];pj.__super__=ba;pj.prototype=l(ba.prototype,{init:function(a,b,c){this._actors=T.getSystemEntity(a.owner)._compMap.ActorSystem_41;this._character=a;this._teammate=b;this._anim=a.owner._compMap.Sprite_5;this._anim.animation.animComplete.connect(m(this,this.onAnimComplete)).once();null==this._weapon&&this.spawnWeapon(c);return this},onAnimComplete:function(){this._character.state.change(this._character.state.idle)},
enter:function(a){ba.prototype.enter.call(this,a);this._weapon.attack()},exit:function(){null!=this._hitConnection&&(this._hitConnection.dispose(),this._hitConnection=null);ba.prototype.exit.call(this)},spawnWeapon:function(a,b){null==b&&(b={});null==b.template&&(b.template={key:a});var c=this._actors.spawn(b)._compMap.Weapon_6;if(null==c)throw"PlatformerWeapon not found in template '"+a+"'";this.equipWeapon(c)},equipWeapon:function(a){null!=this._weapon&&this._weapon.removeParent();this._weapon=
a;this._weapon.setParent(this._character.owner);var b=this._weapon.owner._compMap.DamageComponent_33;b.ignoreActor(this._character.owner,!0);null!=this._teammate&&b.ignoreActor(this._teammate,!0);b.onDamage.connect(m(this,this.onDamage));return a},onDamage:function(a){if(this._character.get_isPlayer()&&(j.attacks++,20<=j.attacks)){var b=W.getAchievementByName("ACHIEVEMENT_ATTACK_QTY");b.isComplete()||(b.complete(),W.save())}this.onHit.emit(a)},__class__:pj});var yj=function(){this._hasSuffix=!1;this.special=
new qj;this.dunk=new rj;this.shoot=new sj;this.fall=new tj;this.jump=new uj;this.hurt=new vj;this.attack=new pj;this.run=new wj;this.idle=new xj};f["game.characters.states.CharacterState"]=yj;yj.__name__=["game","characters","states","CharacterState"];yj.__super__=k;yj.prototype=l(k.prototype,{get_name:function(){return"CharacterState_15"},onStart:function(){k.prototype.onStart.call(this);this._anim=this.owner._compMap.Sprite_5;this.setAnimSuffix(this._hasSuffix);null!=this.current&&this.setAnim()},
onStop:function(){this.current=this.special=this.dunk=this.shoot=this.fall=this.jump=this.hurt=this.attack=this.run=this.idle=this._callback=this._nextState=this._anim=null;k.prototype.onStop.call(this)},reset:function(){this.change(this.idle,null,!0)},change:function(a,b,c){null==c&&(c=!1);a==this.current&&a!=this.jump||this.current==this.dunk&&!c||(null==this.current?this.setState(a,b):(this._nextState=a,this._callback=b,this.current.onExit.connect(m(this,this.onStateExit)).once(),this.current.exit()))},
onStateExit:function(){null==this._nextState&&(this._nextState=this.idle);this.setState(this._nextState,this._callback);this._callback=this._nextState=null},setState:function(a,b){this.current=a;null!=this._anim&&this.setAnim();a.enter(b)},setAnimSuffix:function(a){this._hasSuffix=a;null!=this._anim&&(this._anim.suffix=a?"_ball":"")},setAnim:function(){this._anim.hasAnimation(this.current.animName)?this._anim.set(this.current.animName):this._anim.set(this.current.fallbackAnim)},__class__:yj});var rj=
function(){this.autoDunk=!1;ba.call(this);this.animName="dunk"};f["game.characters.states.Dunk"]=rj;rj.__name__=["game","characters","states","Dunk"];rj.__super__=ba;rj.prototype=l(ba.prototype,{init:function(a){this._camera=a.owner._internal_getFromParents("CameraSystem_25");return this},exit:function(){this._camera.autoZoom=!0;ba.prototype.exit.call(this)},__class__:rj});var tj=function(){ba.call(this);this.animName="fall"};f["game.characters.states.Fall"]=tj;tj.__name__=["game","characters","states",
"Fall"];tj.__super__=ba;tj.prototype=l(ba.prototype,{__class__:tj});var vj=function(){ba.call(this);this.animName="hurt"};f["game.characters.states.Hurt"]=vj;vj.__name__=["game","characters","states","Hurt"];vj.__super__=ba;vj.prototype=l(ba.prototype,{__class__:vj});var xj=function(){ba.call(this);this.animName="idle"};f["game.characters.states.Idle"]=xj;xj.__name__=["game","characters","states","Idle"];xj.__super__=ba;xj.prototype=l(ba.prototype,{__class__:xj});var uj=function(){this._impulseMultiplier=
1;this._jumpCount=0;this.hasJumped=!1;this.jumpsLimit=1;this.lateralImpulse=600;this.jumpImpulse=0;ba.call(this);this.animName="jump";Oa.jump.state==Sb.HIGH&&(this._impulseMultiplier=1.4);Oa.jump.state==Sb.LOW&&(this._impulseMultiplier=0.5)};f["game.characters.states.Jump"]=uj;uj.__name__=["game","characters","states","Jump"];uj.__super__=ba;uj.prototype=l(ba.prototype,{init:function(a,b){this._character=a;this._contacts=a.owner._compMap.CharacterContacts_7;this._physics=a.owner._compMap.PhysicsComponent_34;
this._target=b;return this},enter:function(a){ba.prototype.enter.call(this,a);null!=this._character&&(this._character.get_isPlayer()&&(p.play("jump","PLAYER"),0<this._jumpCount?j.doubleJumps+=1:j.jumps+=1),this._character.set_onGround(!1),this._physics.resetImpulse(),this._physics.resetVelocity(),null==this._target?this._physics.applyImpulse(0,this.jumpImpulse*this._impulseMultiplier):this._physics.applyImpulse(this.lateralImpulse*vf.getDirection(this._character.owner,this._target),this.jumpImpulse*
this._impulseMultiplier))},exit:function(){ba.prototype.exit.call(this)},resetJumpCount:function(){this._jumpCount=0},canJump:function(a){if(a.isStun())return!1;var b=!1;a.get_onGround()?this.hasJumped||(b=!0,this.resetJumpCount()):this._jumpCount<this.jumpsLimit&&(this._jumpCount++,b=!0);return b},__class__:uj});var wj=function(){ba.call(this);this.animName="run"};f["game.characters.states.Run"]=wj;wj.__name__=["game","characters","states","Run"];wj.__super__=ba;wj.prototype=l(ba.prototype,{__class__:wj});
var sj=function(){this._successRate=1;this._aimingTime=-1;this._isShooting=!1;this._target=new jb;this.aimingTime=-1;this.onShoot=new O;this.autoShoot=!1;ba.call(this);this.animName="shoot";this.fallbackAnim="atk"};f["game.characters.states.Shoot"]=sj;sj.__name__=["game","characters","states","Shoot"];sj.__super__=ba;sj.prototype=l(ba.prototype,{init:function(a,b,c){var d;T.getSystemEntity(a.owner);d=T.getSystemEntity(a.owner).getComponent("BaseGameSystem_20");o.autoAim||(this._bar=d.hud.shootBar);
this._character=a;this._transform=this._character.owner._compMap.TransformComponent_43;this._anim=this._character.owner._compMap.Sprite_5;this._ball=b;a=c._compMap.TransformComponent_43;b=c._compMap.Basket_17;this._movement=c._compMap.BasketMovement_4;this._target.set(a.position.x+b.offset.x*a.direction,a.position.y+b.offset.y);this._transform.direction=a.position.x<this._transform.position.x?-1:1;return this},enter:function(a){ba.prototype.enter.call(this,a);if(null==this._ball)this._character.state.change(this._character.state.idle);
else{this._character.setKinematic(!0);this._ball.setPosition(this._transform.position.x,this._transform.position.y);var a=Math.abs(this._target.x-this._transform.position.x),b=0;o.autoAim?(this._aimingTime=-1==this.aimingTime?0.3:this.aimingTime,this._successRate=150>=a?0.9:Math.max(0.1,0.9*(1-(a-150)/500))):(b=Math.max(0.05,1-a/750),this._aimingTime=-1,this._character.get_isPlayer()&&(this._bar.goodSize=0.5*b,this._bar.movement=this._movement,this._bar.show()));this._anim.set("shoot_in",null,!1,
!1);this._anim.loop=!1;this._isShooting=!0}},update:function(a){ba.prototype.update.call(this,a);0<this._aimingTime&&(this._aimingTime-=a,0>=this._aimingTime&&this._character.stopAction())},exit:function(){ba.prototype.exit.call(this);this._character.setKinematic(!1);this._isShooting&&this.shoot(this.getPrecision());!o.autoAim&&this._character.get_isPlayer()&&this._bar.hide();this._isShooting=!1},cancel:function(){this._isShooting=!1;this.exit()},shoot:function(a){null==a&&(a=0.7);this._character.get_isPlayer()&&
(0.7==a?j.shootSuccess+=1:j.shootFail+=1);this._anim.set("shoot",{onComplete:m(this,this.onShootComplete)},!1,!1);var b=this._target.x-this._transform.position.x,c=this._target.y-this._transform.position.y,d=Math.sqrt(b*b+c*c)*a,c=Math.atan2(c,b);0.7!=a&&(c+=Math.random()-0.5);j.isLongShot=Math.abs(b)>o.distanceForLongShot;this._character.get_isPlayer()&&(p.play("shoot","PLAYER"),j.isLongShot?j.longShots++:j.shortShots++,!j.isPassNPlay()&&0.7==a&&0>this._transform.position.x&&(b=W.getAchievementByName("ACHIEVEMENT_LONG_SHOT"),
b.isComplete()||(b.complete(),W.save())));b=Math.cos(c)*d;d=Math.sin(c)*d+-800;this._ball.applyForce(b,d,0.5);this._ball.detectBasket=!0;this._ball.removeOwner();this._character.removeBall();null!=this._movement&&this._movement.freeze(1);this.onShoot.emit(0.7==a)},onShootComplete:function(){this._character.stopAction();this._anim.set("idle")},getPrecision:function(){if(this.autoShoot)return 0.7;if(this._character.get_isPlayer())if(o.autoAim){if(Math.random()<=this._successRate)return 0.7}else{if(this._bar.isGood())return 0.7}else{var a=
this._character.owner._compMap.CharacterAI_11;if(1<=a.shootSuccessRate||Math.random()<a.shootSuccessRate)return 0.7}return 0.6},__class__:sj});var qj=function(){ba.call(this);this.animName="super"};f["game.characters.states.Special"]=qj;qj.__name__=["game","characters","states","Special"];qj.__super__=ba;qj.prototype=l(ba.prototype,{__class__:qj});var o=function(){};f["game.config.GameConfig"]=o;o.__name__=["game","config","GameConfig"];o.getModifiedHeight=function(a){null==a&&(a=45);return o.height-
(q.iphone?a:0)};var zj=function(a,b,c,d,e){null==e&&(e=0.001);null==d&&(d=1);null==c&&(c=2);null==b&&(b=1);null==a&&(a=0);this.zpp_inner=null;null==na.zpp_pool?this.zpp_inner=new na:(this.zpp_inner=na.zpp_pool,na.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);null;this.zpp_inner.outer=this;a!=this.zpp_inner.elasticity&&(this.zpp_inner.elasticity=a/1,this.zpp_inner.invalidate(na.WAKE|na.ARBITERS));this.zpp_inner.elasticity;b!=this.zpp_inner.dynamicFriction&&(this.zpp_inner.dynamicFriction=
b/1,this.zpp_inner.invalidate(na.WAKE|na.ANGDRAG|na.ARBITERS));this.zpp_inner.dynamicFriction;c!=this.zpp_inner.staticFriction&&(this.zpp_inner.staticFriction=c/1,this.zpp_inner.invalidate(na.WAKE|na.ARBITERS));this.zpp_inner.staticFriction;d!=1E3*this.zpp_inner.density&&(this.zpp_inner.density=d/1E3,this.zpp_inner.invalidate(na.WAKE|na.PROPS));1E3*this.zpp_inner.density;e!=this.zpp_inner.rollingFriction&&(this.zpp_inner.rollingFriction=e/1,this.zpp_inner.invalidate(na.WAKE|na.ARBITERS));this.zpp_inner.rollingFriction};
f["nape.phys.Material"]=zj;zj.__name__=["nape","phys","Material"];zj.prototype={toString:function(){return"{ elasticity: "+this.zpp_inner.elasticity+" dynamicFriction: "+this.zpp_inner.dynamicFriction+" staticFriction: "+this.zpp_inner.staticFriction+" density: "+1E3*this.zpp_inner.density+" rollingFriction: "+this.zpp_inner.rollingFriction+" }"},__class__:zj};var na=function(){this.dynamicFriction=this.staticFriction=this.density=this.elasticity=this.rollingFriction=0;this.next=this.outer=this.shapes=
null;this.shapes=new xf;this.elasticity=0;this.dynamicFriction=1;this.staticFriction=2;this.density=0.001;this.rollingFriction=0.01};f["zpp_nape.phys.ZPP_Material"]=na;na.__name__=["zpp_nape","phys","ZPP_Material"];na.prototype={wrapper:function(){if(null==this.outer){this.outer=new zj;var a=this.outer.zpp_inner;a.outer=null;a.next=na.zpp_pool;na.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},set:function(a){this.dynamicFriction=a.dynamicFriction;this.staticFriction=a.staticFriction;this.density=
a.density;this.elasticity=a.elasticity;this.rollingFriction=a.rollingFriction},invalidate:function(a){for(var b=this.shapes.head;null!=b;)b.elt.invalidate_material(a),b=b.next},__class__:na};var xf=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_Shape"]=xf;xf.__name__=["zpp_nape","util","ZNPList_ZPP_Shape"];xf.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Wc.zpp_pool?b=new Wc:(b=Wc.zpp_pool,Wc.zpp_pool=
b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==Wc.zpp_pool?c=new Wc:(c=Wc.zpp_pool,Wc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=
Wc.zpp_pool;Wc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=
null;a.next=Wc.zpp_pool;Wc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:xf};var Te=function(){};f["game.config.PhysicsConfig"]=Te;Te.__name__=["game","config","PhysicsConfig"];Te.configure=function(a){a.setGravity(0,Te.gravity);a.setFixedDt(Te.fixedDt);Bd.add("ball",Te.BallMaterial)};var Aj=function(a){this._disposer=new xb;k.call(this);this._hud=a};f["game.controls.TouchControls"]=Aj;Aj.__name__=
["game","controls","TouchControls"];Aj.__super__=k;Aj.prototype=l(k.prototype,{get_name:function(){return"TouchControls_23"},onStart:function(){this.owner.addChild((new r).add(this._disposer));this.buildTouchControls()},onStop:function(){this._specialTexture=this._shootTexture=this._attackTexture=this._currentTexture=this._jumpButton=this._actionButton=this.slider=this._player=this._hud=null},onUpdate:function(){null==this._player||null==this._player.owner||(null!=this.slider&&this.slider.isActive&&
0!=this.slider.value&&(this._player.runDirection=0<this.slider.value?1:-1),this.checkActionTexture())},buildTouchControls:function(){null==this.slider&&(this.slider=new Bj(this._hud.pack),this.slider.deadZone=0,this._hud.addSprite(this.slider),this._attackTexture=this._hud.pack.getTexture("btn_action"),this._shootTexture=this._hud.pack.getTexture("btn_action"),this._specialTexture=this._hud.pack.getTexture("btn_dunk"),this._currentTexture=this._attackTexture,this._actionButton=new ta(this._attackTexture),
this._actionButton.centerAnchor().setXY(882,o.getModifiedHeight()-69),this._hud.container.addChild((new r).add(this._actionButton)),this._jumpButton=new ta(this._hud.pack.getTexture("btn_jump")),this._jumpButton.centerAnchor().setXY(896,o.getModifiedHeight()-172),this._hud.container.addChild((new r).add(this._jumpButton)),x._platform.getTouch().get_supported()?(this._disposer.add(x._platform.getTouch().down.connect(m(this,this.onTouchDown))),this._disposer.add(x._platform.getTouch().up.connect(m(this,
this.onTouchUp)))):(this._disposer.add(this._actionButton.get_pointerDown().connect(m(this,this.onActionDown))),this._disposer.add(this._actionButton.get_pointerUp().connect(m(this,this.onActionUp))),this._disposer.add(this._actionButton.get_pointerOut().connect(m(this,this.onActionUp))),this._disposer.add(this._jumpButton.get_pointerDown().connect(m(this,this.onJumpDown))),this._disposer.add(this._jumpButton.get_pointerUp().connect(m(this,this.onJumpUp))),this._disposer.add(this._jumpButton.get_pointerOut().connect(m(this,
this.onJumpUp)))))},onTouchDown:function(a){var b=a.viewX,c=a.viewY;1!=q.scale&&(b/=q.scale,c/=q.scale);b<0.5*x._platform.getStage().get_width()||(this._hud.hitTest(this._actionButton,b,c)&&(this._actionTouch=a,this._player.action=!0),this._hud.hitTest(this._jumpButton,b,c)&&(this._jumpTouch=a,this._player.tryJump=!0))},onTouchUp:function(a){null!=this._actionTouch&&this._actionTouch.id==a.id&&(this._player.action=!1,this._actionTouch=null);null!=this._jumpTouch&&this._jumpTouch.id==a.id&&(this._jumpTouch=
null,this._player.tryJump=!1)},onActionDown:function(){this._player.action=!0},onActionUp:function(){this._player.action=!1},onJumpDown:function(){this._player.tryJump=!0},onJumpUp:function(){this._player.tryJump=!1},checkActionTexture:function(){var a;a=this._player.hasBall()?this._player.canSuperMove()?this._specialTexture:this._shootTexture:this._attackTexture;a!=this._currentTexture&&(this._currentTexture=this._actionButton.texture=a)},set_player:function(a){this._player=a;this._player.action=
!1;this._player.tryJump=!1;return this._player},__class__:Aj,__properties__:l(k.prototype.__properties__,{set_player:"set_player"})});var Cj=function(){this._jumpDown=!1;this._disposer=new xb;this.isEnabled=this._actionDown2=this._jumpDown2=this._actionDown3=this._jumpDown3=this._actionDown4=this._jumpDown4=!1;k.call(this)};f["game.controls.WebControls"]=Cj;Cj.__name__=["game","controls","WebControls"];Cj.__super__=k;Cj.prototype=l(k.prototype,{get_name:function(){return"WebControls_22"},onStart:function(){this.owner.addChild((new r).add(this._disposer));
this.enable(!0)},onRemoved:function(){this.enable(!1)},dispose:function(){this.enable(!1);k.prototype.dispose.call(this)},enable:function(a){a&&!this.isEnabled?(this.isEnabled=!0,this._disposer.add(x._platform.getKeyboard().down.connect(m(this,this.onKeyDown))),this._disposer.add(x._platform.getKeyboard().up.connect(m(this,this.onKeyUp)))):!a&&this.isEnabled&&(this.isEnabled=!1,this._disposer.dispose())},onKeyDown:function(a){null!=this._player&&(a.key==i.Up?this._jumpDown=!0:a.key==i.Space&&(this._player.action=
!0),null!=this.secondPlayer&&(a.key==i.W?this._jumpDown2=!0:a.key==i.Number1&&(this.secondPlayer.action=!0)),null!=this.thirdPlayer&&(a.key==i.Numpad8?this._jumpDown3=!0:a.key==i.Enter&&(this.thirdPlayer.action=!0)),null!=this.fourthPlayer&&(a.key==i.I?this._jumpDown4=!0:a.key==i.Number6&&(this.fourthPlayer.action=!0)))},onKeyUp:function(a){null!=this._player&&(a.key==i.Space&&(this._player.action=!1),null!=this.secondPlayer&&a.key==i.Number1&&(this.secondPlayer.action=!1),null!=this.thirdPlayer&&
a.key==i.Enter&&(this.thirdPlayer.action=!1),null!=this.fourthPlayer&&a.key==i.Number6&&(this.fourthPlayer.action=!1))},onUpdate:function(){null!=this._player&&this.isEnabled&&(x._platform.getKeyboard().isDown(i.Left)&&(this._player.runDirection=-1),x._platform.getKeyboard().isDown(i.Right)&&(this._player.runDirection=1),this._jumpDown&&(this._player.tryJump=this._jumpDown),this._jumpDown=!1,null!=this.secondPlayer&&(x._platform.getKeyboard().isDown(i.A)&&(this.secondPlayer.runDirection=-1),x._platform.getKeyboard().isDown(i.D)&&
(this.secondPlayer.runDirection=1),this._jumpDown2&&(this.secondPlayer.tryJump=this._jumpDown2),this._actionDown2&&(this.secondPlayer.action=this._actionDown2),this._actionDown2=this._jumpDown2=!1),null!=this.thirdPlayer&&(x._platform.getKeyboard().isDown(i.Numpad4)&&(this.thirdPlayer.runDirection=-1),x._platform.getKeyboard().isDown(i.Numpad6)&&(this.thirdPlayer.runDirection=1),this._jumpDown3&&(this.thirdPlayer.tryJump=this._jumpDown3),this._actionDown3&&(this.thirdPlayer.action=this._actionDown3),
this._actionDown3=this._jumpDown3=!1),null!=this.fourthPlayer&&(x._platform.getKeyboard().isDown(i.J)&&(this.fourthPlayer.runDirection=-1),x._platform.getKeyboard().isDown(i.L)&&(this.fourthPlayer.runDirection=1),this._jumpDown4&&(this.fourthPlayer.tryJump=this._jumpDown4),this._actionDown4&&(this.fourthPlayer.action=this._actionDown4),this._actionDown4=this._jumpDown4=!1))},set_player:function(a){return this._player=a},__class__:Cj,__properties__:l(k.prototype.__properties__,{set_player:"set_player"})});
var ca=function(){};f["game.data.Characters"]=ca;ca.__name__=["game","data","Characters"];ca.getDataByName=function(a){for(var b=0,c=ca.list;b<c.length;){var d=c[b];++b;if(d.name==a)return d}return null};ca.getDataByTeam=function(a){for(var b=[],c=0,d=ca.list;c<d.length;){var e=d[c];++c;e.team==a&&b.push(e)}return b};var Ja=f["game.data.GameType"]={__ename__:["game","data","GameType"],__constructs__:["TWO_VERSUS_TWO","ONE_VERSUS_ONE"]};Ja.TWO_VERSUS_TWO=["TWO_VERSUS_TWO",0];Ja.TWO_VERSUS_TWO.toString=
s;Ja.TWO_VERSUS_TWO.__enum__=Ja;Ja.ONE_VERSUS_ONE=["ONE_VERSUS_ONE",1];Ja.ONE_VERSUS_ONE.toString=s;Ja.ONE_VERSUS_ONE.__enum__=Ja;Ja.__empty_constructs__=[Ja.TWO_VERSUS_TWO,Ja.ONE_VERSUS_ONE];var Z=f["game.data.GameMode"]={__ename__:["game","data","GameMode"],__constructs__:["TOURNAMENT","QUICKMATCH","SHOOTOUT","DUNK_CHALLENGE","HORSE"]};Z.TOURNAMENT=["TOURNAMENT",0];Z.TOURNAMENT.toString=s;Z.TOURNAMENT.__enum__=Z;Z.QUICKMATCH=["QUICKMATCH",1];Z.QUICKMATCH.toString=s;Z.QUICKMATCH.__enum__=Z;Z.SHOOTOUT=
["SHOOTOUT",2];Z.SHOOTOUT.toString=s;Z.SHOOTOUT.__enum__=Z;Z.DUNK_CHALLENGE=["DUNK_CHALLENGE",3];Z.DUNK_CHALLENGE.toString=s;Z.DUNK_CHALLENGE.__enum__=Z;Z.HORSE=["HORSE",4];Z.HORSE.toString=s;Z.HORSE.__enum__=Z;Z.__empty_constructs__=[Z.TOURNAMENT,Z.QUICKMATCH,Z.SHOOTOUT,Z.DUNK_CHALLENGE,Z.HORSE];var Jb=f["game.data.GameDifficulty"]={__ename__:["game","data","GameDifficulty"],__constructs__:["EASY","MEDIUM","HARD"]};Jb.EASY=["EASY",0];Jb.EASY.toString=s;Jb.EASY.__enum__=Jb;Jb.MEDIUM=["MEDIUM",1];
Jb.MEDIUM.toString=s;Jb.MEDIUM.__enum__=Jb;Jb.HARD=["HARD",2];Jb.HARD.toString=s;Jb.HARD.__enum__=Jb;Jb.__empty_constructs__=[Jb.EASY,Jb.MEDIUM,Jb.HARD];var j=function(){};f["game.data.GameData"]=j;j.__name__=["game","data","GameData"];j.init=function(){fa.Prefix=o.$name+"_";fa.Defaults=j.StorageDefaults;j.save=new Yl;j.save.load()};j.reset=function(){j.turn=0;j.homeScore=0;j.awayScore=0;j.dunks=0;j.attacks=0;j.shortShots=0;j.longShots=0;j.megaDunks=0;j.blocks=0;j.steals=0;j.pickupGrabbed=0;j.jumps=
0;j.doubleJumps=0};j.userLevel=function(){return za.list.indexOf(j.currentLevel)+1};j.matchId=function(){return"Round_"+j.round};j.modeToString=function(){switch(j.gameMode[1]){case 0:return"championship";case 1:return"quick_play";case 2:return"shootout";case 3:return"dunk_challenge";case 4:return"horse"}};j.isPassNPlay=function(){return j.gameMode==Z.TOURNAMENT||j.gameMode==Z.QUICKMATCH?!1:!0};j.loadConfig=function(a,b,c){null==c&&(c=!0);null==b&&(b="config");null==a&&(a="config.json");j.config=
C.getJSON(a,b,c,!1)};j.isNewPosterize=function(){return!j.save.isPosterUnlocked(j.player.team)};j.setRandomOpponent=function(){for(var a=[],b=0,c=ca.list;b<c.length;){var d=c[b];++b;d.team!=j.player.team&&(null==j.opponent||j.opponent.team!=d.team)&&a.push(d)}j.opponent=a[Math.floor(Math.random()*a.length)];j.players=[j.player,j.opponent];j.gameType==Ja.TWO_VERSUS_TWO&&(j.players.push(ca.getDataByName(j.player.partner)),j.players.push(ca.getDataByName(j.opponent.partner)))};j.endGame=function(a,b,
c){null==c&&(c=-1);var d=j.player;j.newCharacterUnlock=!1;j.newPosterUnlock=!1;j.updateStats(d);if(j.hasWon=a){switch(j.gameMode[1]){case 3:j.save.addToStat(d.name,B.DUNK_CHALLENGE_WON,1);break;case 4:j.save.addToStat(d.name,B.HORSE_WON,1);break;case 2:j.save.addToStat(d.name,B.SHOOTOUT_WON,1);break;default:j.save.addToStat(d.name,B.GAMES_WON,1)}j.gameMode==Z.TOURNAMENT&&(j.save.unlockLevel(za.get(j.currentLevel).unlock),0<c&&j.save.setBestTime(j.currentLevel,c));b&&(j.newPosterUnlock=j.save.unlockPoster(d),
j.newPosterUnlock&&aa.trackPoster())}else j.isPassNPlay()||j.save.addToStat(d.name,B.GAMES_FAILED,1);j.save.save();aa.trackMatchSummary();++j.round};j.updateStats=function(a){j.save.addToStat(a.name,B.GAMES_PLAYED,1);j.save.addToStat(a.name,B.DUNKS,j.dunks);j.save.addToStat(a.name,B.MEGA_DUNKS,j.megaDunks);j.save.addToStat(a.name,B.STEALS,j.steals);j.save.addToStat(a.name,B.PICKUPS,j.pickupGrabbed);j.save.addToStat(a.name,B.JUMPS,j.jumps);j.save.addToStat(a.name,B.DOUBLE_JUMPS,j.doubleJumps);j.save.addToStat(a.name,
B.ATTACKS,j.attacks);j.save.addToStat(a.name,B.STUNS,j.stuns);j.save.addToStat(a.name,B.SHORT_SHOTS,j.shortShots);j.save.addToStat(a.name,B.SHOOT_SUCCESSES,j.shootSuccess);j.save.addToStat(a.name,B.SHOOT_FAILS,j.shootFail);j.save.addToStat(a.name,B.DUNK_SUCCESSES,j.dunkSuccess);j.save.addToStat(a.name,B.DUNK_FAILS,j.dunkFail)};j.getDifficultyConfig=function(){var a;switch(j.gameDifficulty[1]){case 0:a={tickRate:0.4,weapon:"punch_ai_easy",minShootSpeed:1,maxShootSpeed:1.5,shootSuccessRate:0.5};break;
case 1:a={tickRate:0.3,weapon:"punch_ai_normal",minShootSpeed:0.5,maxShootSpeed:1,shootSuccessRate:0.75};break;case 2:a={tickRate:0.2,weapon:"punch_ai_hard",minShootSpeed:0.3,maxShootSpeed:1,shootSuccessRate:1}}return a};var Rg=function(){};f["stolo.ensys.data.LevelData"]=Rg;Rg.__name__=["stolo","ensys","data","LevelData"];Rg.prototype={getDefaultLayers:function(){return[{name:"default",parallax:{x:0,y:0},editor:{locked:!0},alpha:1}]},parse:function(a){if(null==a)throw"Level data null";this.data=
a;this.name=this.parseName();this.filename=this.parseFilename();this.env=this.parseEnv();this.layers=this.parseLayers();this.actors=this.parseActors()},parseName:function(){return null==this.data.name?"noname":this.data.name},parseFilename:function(){return null==this.data.filename?"nofilename":this.data.filename},parseEnv:function(){return null==this.data.env?"1":this.data.env},parseActors:function(){return null==this.data.actors?[]:this.data.actors},parseLayers:function(){return null==this.data.layers?
this.getDefaultLayers():this.data.layers},__class__:Rg};var Wf=function(a){null!=a&&this.parse(a)};f["game.data.LevelData"]=Wf;Wf.__name__=["game","data","LevelData"];Wf.__super__=Rg;Wf.prototype=l(Rg.prototype,{parse:function(a){Rg.prototype.parse.call(this,a);null!=a.unlock&&(this.unlock=a.unlock);null!=a.endGame&&(this.endGame=a.endGame)},getDefaultLayers:function(){return Wf.DefaultLayers},__class__:Wf});var za=function(){};f["game.data.Levels"]=za;za.__name__=["game","data","Levels"];za.get=
function(a){var b;za._levelCache.exists(a)?b=za._levelCache.get(a):(b=C.getJSON(a,za.PackName),b=new Wf(b),b.name=a,za._levelCache.set(a,b),b);return b};za.getPacks=function(a,b){null==b&&(b=!1);var c=za.get(a),d=x._platform.getTouch().get_supported(),e;e="sprites_env"+c.env+(q.slow?V.lowEndPackSuffix:"");c="sprites_env"+c.env+"_common"+(q.slow?V.lowEndPackSuffix:"");Oa.nightTime.state==fb.ON&&(e+="_night");e=[e,c,"sprites_pack","sprites_platforms","particles_fx","ui_hud"];j.isPassNPlay()&&e.push("ui_all_stars");
for(var c=0,h=j.players;c<h.length;){var n=h[c];++c;e.push(n.team)}b&&(e.push("sprites_env1"),e.push("sprites_env1_common"),e.push("team_hb"),e.push("team_hd"),e.push("team_loud"),e.push("team_pr"),e.push("team_sb"),e.push("team_tmnt_1"),e.push("team_tmnt_2"));if(!j.isPassNPlay()&&(j.save.isFirstGame()||j.save.isSecondGame()))e.push(d?"ingame_htp_mobile":"ingame_htp");return e};var Kg=function(){};f["game.data.LevelsConfig"]=Kg;Kg.__name__=["game","data","LevelsConfig"];var B=f["game.data.GameStats"]=
{__ename__:["game","data","GameStats"],__constructs__:"GAMES_PLAYED,GAMES_WON,GAMES_FAILED,DUNKS,MEGA_DUNKS,PICKUPS,STEALS,JUMPS,DOUBLE_JUMPS,ATTACKS,STUNS,SHORT_SHOTS,LONG_SHOTS,SHOOT_SUCCESSES,SHOOT_FAILS,DUNK_SUCCESSES,DUNK_FAILS,HORSE_WON,SHOOTOUT_WON,DUNK_CHALLENGE_WON".split(",")};B.GAMES_PLAYED=["GAMES_PLAYED",0];B.GAMES_PLAYED.toString=s;B.GAMES_PLAYED.__enum__=B;B.GAMES_WON=["GAMES_WON",1];B.GAMES_WON.toString=s;B.GAMES_WON.__enum__=B;B.GAMES_FAILED=["GAMES_FAILED",2];B.GAMES_FAILED.toString=
s;B.GAMES_FAILED.__enum__=B;B.DUNKS=["DUNKS",3];B.DUNKS.toString=s;B.DUNKS.__enum__=B;B.MEGA_DUNKS=["MEGA_DUNKS",4];B.MEGA_DUNKS.toString=s;B.MEGA_DUNKS.__enum__=B;B.PICKUPS=["PICKUPS",5];B.PICKUPS.toString=s;B.PICKUPS.__enum__=B;B.STEALS=["STEALS",6];B.STEALS.toString=s;B.STEALS.__enum__=B;B.JUMPS=["JUMPS",7];B.JUMPS.toString=s;B.JUMPS.__enum__=B;B.DOUBLE_JUMPS=["DOUBLE_JUMPS",8];B.DOUBLE_JUMPS.toString=s;B.DOUBLE_JUMPS.__enum__=B;B.ATTACKS=["ATTACKS",9];B.ATTACKS.toString=s;B.ATTACKS.__enum__=B;
B.STUNS=["STUNS",10];B.STUNS.toString=s;B.STUNS.__enum__=B;B.SHORT_SHOTS=["SHORT_SHOTS",11];B.SHORT_SHOTS.toString=s;B.SHORT_SHOTS.__enum__=B;B.LONG_SHOTS=["LONG_SHOTS",12];B.LONG_SHOTS.toString=s;B.LONG_SHOTS.__enum__=B;B.SHOOT_SUCCESSES=["SHOOT_SUCCESSES",13];B.SHOOT_SUCCESSES.toString=s;B.SHOOT_SUCCESSES.__enum__=B;B.SHOOT_FAILS=["SHOOT_FAILS",14];B.SHOOT_FAILS.toString=s;B.SHOOT_FAILS.__enum__=B;B.DUNK_SUCCESSES=["DUNK_SUCCESSES",15];B.DUNK_SUCCESSES.toString=s;B.DUNK_SUCCESSES.__enum__=B;B.DUNK_FAILS=
["DUNK_FAILS",16];B.DUNK_FAILS.toString=s;B.DUNK_FAILS.__enum__=B;B.HORSE_WON=["HORSE_WON",17];B.HORSE_WON.toString=s;B.HORSE_WON.__enum__=B;B.SHOOTOUT_WON=["SHOOTOUT_WON",18];B.SHOOTOUT_WON.toString=s;B.SHOOTOUT_WON.__enum__=B;B.DUNK_CHALLENGE_WON=["DUNK_CHALLENGE_WON",19];B.DUNK_CHALLENGE_WON.toString=s;B.DUNK_CHALLENGE_WON.__enum__=B;B.__empty_constructs__=[B.GAMES_PLAYED,B.GAMES_WON,B.GAMES_FAILED,B.DUNKS,B.MEGA_DUNKS,B.PICKUPS,B.STEALS,B.JUMPS,B.DOUBLE_JUMPS,B.ATTACKS,B.STUNS,B.SHORT_SHOTS,B.LONG_SHOTS,
B.SHOOT_SUCCESSES,B.SHOOT_FAILS,B.DUNK_SUCCESSES,B.DUNK_FAILS,B.HORSE_WON,B.SHOOTOUT_WON,B.DUNK_CHALLENGE_WON];var Yl=function(){this.clear()};f["game.data.SaveGame"]=Yl;Yl.__name__=["game","data","SaveGame"];Yl.prototype={clear:function(){this.firstGame=!0;this.secondGame=!1;this.stats=new N;this.highscores=new N;this.unlockedLevels=new N;this.levelBestTime=new N;this.unlockedPosters=new N;this.newLevels=new N;this.tournamentCompleted=new N},load:function(){this.firstGame=fa.get("firstGame",!0);
this.secondGame=fa.get("secondGame",!1);this.unlockedLevels=fa.get("levels",new N);this.levelBestTime=fa.get("levelBestTime",new N);this.stats=fa.get("stats",new N);this.highscores=fa.get("highscores",new N);this.unlockedPosters=fa.get("posters",new N);this.newLevels=fa.get("newLevels",new N);this.tournamentCompleted=fa.get("tournamentCompleted",new N);this.unlockLevel("level1")},save:function(){fa.set("firstGame",this.firstGame);fa.set("secondGame",this.secondGame);fa.set("characters",this.unlockedCharacters);
fa.set("levels",this.unlockedLevels);fa.set("levelBestTime",this.levelBestTime);fa.set("stats",this.stats);fa.set("highscores",this.highscores);fa.set("posters",this.unlockedPosters);fa.set("newLevels",this.newLevels)},isFirstGame:function(){return this.firstGame},isSecondGame:function(){return this.secondGame},setSecondGame:function(){this.firstGame=!1;this.secondGame=!0;this.save()},endHtp:function(){this.secondGame=this.firstGame=!1;this.save()},isLevelLocked:function(a){return!yf.isUnlocked(a,
this.unlockedLevels)},unlockLevel:function(a){yf.unlock(a,this.unlockedLevels)&&(yf.unlock(a,this.newLevels),this.levelBestTime.set(a,0),this.save());return!0},isNewLevel:function(a){return yf.isUnlocked(a,this.newLevels)},levelNotNew:function(a){this.isNewLevel(a)&&(this.newLevels.set(a,!1),this.save())},completeTournament:function(a){this.tournamentCompleted.exists(a)||(this.tournamentCompleted.set(a,!0),this.save());return!0},isTournamentCompleted:function(a){return this.tournamentCompleted.get(a)},
getBestTime:function(a){return this.isLevelLocked(a)?0:this.levelBestTime.get(a)},setBestTime:function(a,b){if(this.isLevelLocked(a))return!1;var c=this.getBestTime(a);return 0==c||c>b?(this.levelBestTime.set(a,b),this.save(),!0):!1},isPosterUnlocked:function(a){if(!this.unlockedPosters.exists(a))return!1;for(var b=this.unlockedPosters.get(a),a=ca.getDataByTeam(a),c=0;c<a.length;){var d=a[c];++c;if(!b.exists(d.name)||!b.get(d.name))return!1}return!0},isCharacterPosterUnlocked:function(a){return!this.unlockedPosters.exists(a.team)?
!1:this.unlockedPosters.get(a.team).get(a.name)},unlockPoster:function(a){var b=!1,c;this.unlockedPosters.exists(a.team)?(c=this.unlockedPosters.get(a.team),c.exists(a.name)||(c.set(a.name,!0),b=!0,this.save())):(c=new N,c.set(a.name,!0),this.unlockedPosters.set(a.team,c),b=!0,this.save());a=!0;c=0;for(var d=Ha.all;c<d.length;){var e=d[c];++c;if(!this.isPosterUnlocked(e)){a=!1;break}}a&&(a=W.getAchievementByName("ACHIEVEMENT_POSTERS"),a.isComplete()||(a.complete(),W.save()));return b},getStats:function(a,
b){var c;if(!(c=!this.stats.exists(a)))c=!this.stats.get(a).exists(b);return c?0:this.stats.get(a).get(b)},addToStat:function(a,b,c){var d=this.getStats(a,b),e=this.stats.get(a);null==e&&(e=new Xf,this.stats.set(a,e));e.set(b,d+c);return!0},__class__:Yl};var fb=function(){this.state=fb.OFF;this.name="BASE_EASTER_EGG";this.onChange=new O};f["game.eastereggs.EasterEgg"]=fb;fb.__name__=["game","eastereggs","EasterEgg"];fb.prototype={toggle:function(){var a=this.state+1;a>=fb._stateId&&(a=0);this.changeState(a)},
changeState:function(a){this.state=a;this.onChange.emit(this)},__class__:fb};var lb=function(){fb.call(this)};f["game.eastereggs.AlternateBall"]=lb;lb.__name__=["game","eastereggs","AlternateBall"];lb.__super__=fb;lb.prototype=l(fb.prototype,{toggle:function(){var a=this.state+1;a>=lb._stateId&&(a=0);this.changeState(a)},changeState:function(a){switch(a){case lb.NORMAL:this.name="EGG_BALL_NORMAL";break;case lb.BASEBALL:this.name="EGG_BALL_BASEBALL";break;case lb.SOCCER:this.name="EGG_BALL_SOCCER";
break;case lb.SLIME:this.name="EGG_BALL_SLIME"}fb.prototype.changeState.call(this,a)},__class__:lb});var Sb=function(){fb.call(this)};f["game.eastereggs.JumpEgg"]=Sb;Sb.__name__=["game","eastereggs","JumpEgg"];Sb.__super__=fb;Sb.prototype=l(fb.prototype,{toggle:function(){var a=this.state+1;a>=Sb._stateId&&(a=0);this.changeState(a)},changeState:function(a){switch(a){case Sb.NORMAL:this.name="EGG_JUMP_NORMAL";break;case Sb.HIGH:this.name="EGG_JUMP_HIGH";break;case Sb.LOW:this.name="EGG_JUMP_LOW"}fb.prototype.changeState.call(this,
a)},__class__:Sb});var Dj=function(){fb.call(this)};f["game.eastereggs.NightTime"]=Dj;Dj.__name__=["game","eastereggs","NightTime"];Dj.__super__=fb;Dj.prototype=l(fb.prototype,{changeState:function(a){this.name=a==fb.ON?"EGG_NIGHT_TIME":"EGG_DAY_TIME";fb.prototype.changeState.call(this,a)},__class__:Dj});var Oa=function(){};f["game.eastereggs.EasterEggManager"]=Oa;Oa.__name__=["game","eastereggs","EasterEggManager"];Oa.init=function(){Oa.nightTime.onChange.connect(Oa.showPopup);Oa.ball.onChange.connect(Oa.showPopup);
Oa.jump.onChange.connect(Oa.showPopup);Oa.registerPopup(new Tb)};Oa.toggle=function(a){a.toggle()};Oa.registerPopup=function(a){Oa._popup=a;x.root.addChild((new r).add(Oa._popup))};Oa.showPopup=function(a){null!=Oa._popup&&Oa._popup.show(a)};var Tb=function(){this._showing=!1;this._toShow=[];A.call(this);this.setAlpha(0);this.set_pointerEnabled(!1)};f["game.eastereggs.EasterEggToaster"]=Tb;Tb.__name__=["game","eastereggs","EasterEggToaster"];Tb.__super__=A;Tb.prototype=l(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);
var a=C.getPack("ui");Tb._bg=E.createImage("toaster",a);Tb._bg.centerAnchor().setXY(0.5*o.width,o.height+100);this.owner.add(Tb._bg);a=E.createImage("icon_golden_egg",a);a.centerAnchor().setXY(40,37);Tb._bg.owner.addChild((new r).add(a));Tb._name=E.createText("","17_blue",Tb._bg.owner);Tb._name.setXY(75,27)},show:function(a){this._toShow.push(a);this.showNext()},showNext:function(){if(!this._showing){var a=this._toShow.shift();null!=a&&this.animate(a)}},animate:function(a){p.play("easter_egg","UI");
this._showing=!0;Tb._name.setText(a.name);Tb._bg.y.set__(o.height+100);Tb._bg.alpha.set__(0);u.to(Tb._bg,{y:o.getModifiedHeight()-75,alpha:1},{time:0.5},t.backOut);u.delayCallTo(m(this,this.endAnim),1.75,this.owner)},endAnim:function(){this._showing=!1;u.to(Tb._bg,{y:o.height+100,alpha:0},{time:0.7},t.backIn);u.delayCallTo(m(this,this.showNext),0.7)},__class__:Tb});var ve=function(){this._startingSymbol=null;V.call(this)};f["stolo.ensys.components.ImageComponent"]=ve;ve.__name__=["stolo","ensys",
"components","ImageComponent"];ve.__super__=V;ve.prototype=l(V.prototype,{dispose:function(){V.prototype.dispose.call(this);this._startingSymbol=this._texture=this.bitmapSprite=this.sprite=null},initStart:function(){null!=this.spritesheet?this.loadSpritesheet(this.spritesheet,this.asset):(this.set_texture(this.getTexture(this.pack,this.asset)),this.width=this.get_texture().get_width(),this.height=this.get_texture().get_height(),this.useSprite&&this.createSprite(),V.prototype.initStart.call(this))},
initEnd:function(){null!=this._startingSymbol&&(this.setSymbol(this._startingSymbol),this._startingSymbol=null);V.prototype.initEnd.call(this)},createSprite:function(){null==this.sprite&&(this.sprite=new ta(this._texture),this.sprite.set_pointerEnabled(!1),this.owner.addChild((new r).add(this.sprite)),this._texture=null)},centerSprite:function(){null!=this.sprite&&(this.sprite.centerAnchor(),this.sprite.setXY(0.5*this.getNaturalWidth(),0.5*this.getNaturalHeight()))},draw:function(a){null!=this._texture&&
a.drawTexture(this._texture,0,0)},get_texture:function(){return null!=this.sprite?this.sprite.texture:this._texture},set_texture:function(a){this.width=a.get_width();this.height=a.get_height();return null!=this.sprite?this.sprite.texture=a:this._texture=a},set_pointerEnabled:function(a){null!=this.sprite&&this.sprite.set_pointerEnabled(a);null!=this.bitmapSprite&&this.bitmapSprite.set_pointerEnabled(a);return V.prototype.set_pointerEnabled.call(this,a)},getNaturalWidth:function(){return this.width},
getNaturalHeight:function(){return this.height},loadSpritesheet:function(a,b){var c=new r;this.owner.addChild(c);this.bitmapSprite=new hb(a,b,this.pack,m(this,this.onBitmapSpriteInit),!1);c.add(this.bitmapSprite)},onBitmapSpriteInit:function(){this.updateBitmapSprite();this.initEnd()},setSymbol:function(a){if(!this.initialized)return this._startingSymbol=a,null;if(null==this.bitmapSprite)throw"Not spritesheet loaded!";a=this.bitmapSprite.setSymbol(a);this.updateBitmapSprite();return a},updateBitmapSprite:function(){this.width=
Math.round(this.bitmapSprite.getNaturalWidth());this.height=Math.round(this.bitmapSprite.getNaturalHeight())},__class__:ve,__properties__:l(V.prototype.__properties__,{set_texture:"set_texture",get_texture:"get_texture"})});var Sg=function(){ve.call(this)};f["game.eastereggs.NightImageComponent"]=Sg;Sg.__name__=["game","eastereggs","NightImageComponent"];Sg.__super__=ve;Sg.prototype=l(ve.prototype,{initStart:function(){Oa.nightTime.state==fb.ON&&(this.pack+="_night");ve.prototype.initStart.call(this)},
__class__:Sg});var Yf=function(){this.disposer=new xb;this.onlyHighEnd=this.onlyLowEnd=!1;this.uuid="";this.spawner=0;this.tags=[];this.comment="";this.key="no_name";k.call(this)};f["stolo.ensys.components.TemplateComponent"]=Yf;Yf.__name__=["stolo","ensys","components","TemplateComponent"];Yf.__super__=k;Yf.prototype=l(k.prototype,{get_name:function(){return"TemplateComponent_40"},onAdded:function(){k.prototype.onAdded.call(this);this.owner.add(this.disposer)},dispose:function(){k.prototype.dispose.call(this);
this.tags=this.disposer=null},__class__:Yf});var Xc=function(){this.isReady=!1;this.onFirstUpdate=new ka;this.velocityFromLastPosition=new jb;this.lastPosition=new jb;this._coolDown=0;this._intangible=!1;this.carrier=null;this.baskets=[];this.detectBasket=!1;this.onCatch=new ka;this.onMissed=new ka;this.onScore=new O;k.call(this)};f["game.gameplay.ball.Ball"]=Xc;Xc.__name__=["game","gameplay","ball","Ball"];Xc.__super__=k;Xc.prototype=l(k.prototype,{get_name:function(){return"Ball_31"},onStart:function(){k.prototype.onStart.call(this);
var a=T.getSystemEntity(this.owner);this._physicsSystem=a._compMap.PhysicSystem_36;this._physics=this.owner._compMap.PhysicsComponent_34;this._transform=this.owner._compMap.TransformComponent_43;this._display=this.owner._compMap.Sprite_5;this._layer=a._compMap.RendererSystem_45.getLayer("default");if(this._display.initialized)this.initSprite();else this._display.onInitComplete.connect(m(this,this.initSprite)).once();this._transform.fixedRotation=!0;this._physics.addContactType(Xc.BALL_CONTACT_TYPE);
this._physicsSystem.addContactListener(ea.PRELISTENER,wa.ANY,Xc.BALL_CONTACT_TYPE,ue.CHARACTER_CONTACT_TYPE,this.owner,m(this,this.onPreContact),!0);this._physicsSystem.addContactListener(ea.BEGIN,wa.COLLISION,Xc.BALL_CONTACT_TYPE,"ANY_BODY",this.owner,m(this,this.onGroundContact))},initSprite:function(){this._whiteBall=new ta(C.getPack(this._display.pack).getTexture(this._display.asset+"_white"));this._whiteBall.disablePointer();this._display.owner.addChild((new r).add(this._whiteBall));this._whiteBall.alpha.set__(0);
this._display.centerSprite()},onStop:function(){this._physicsSystem.removeContactListener(ea.PRELISTENER,wa.ANY,Xc.BALL_CONTACT_TYPE,ue.CHARACTER_CONTACT_TYPE,this.owner);this._physicsSystem.removeContactListener(ea.BEGIN,wa.COLLISION,Xc.BALL_CONTACT_TYPE,"ANY_BODY",this.owner);this.carrier=this.baskets=this._layer=this._display=this._transform=this._physics=this._physicsSystem=null;null==this._whiteBall.owner.parent&&this._whiteBall.owner.dispose();this._whiteBall=null;k.prototype.onStop.call(this)},
onUpdate:function(a){if(!this.isReady)if(null!=this._physics&&this._physics.initialized&&null!=this._display&&this._display.initialized)this.isReady=!0,this.onFirstUpdate.emit();else return;k.prototype.onUpdate.call(this,a);this.floorDistance=Math.abs(Xc.floorY-this._transform.position.y);this.velocityFromLastPosition.set(this.lastPosition.x-this._transform.position.x,this.lastPosition.y-this._transform.position.y);var b=0.1*(30-this.floorDistance),c=Math.abs(0.1*this.velocityFromLastPosition.y);
50>this.floorDistance&&(c-=b);1>b&&(b=1);1.3<b&&(b=1.3);1>c&&(c=1);1.4<c&&(c=1.4);this._display.setScaleXY(b,c);null==this._carrier&&(b=this._display.rotation,b.set__(b._value-0.5*this.velocityFromLastPosition.x),this.detectBasket&&this.detectBaskets());this.lastPosition.set(this._transform.position.x,this._transform.position.y);0<this._coolDown&&(this._coolDown-=a);0>=this._coolDown&&0!=this._whiteBall.alpha._value&&this._whiteBall.alpha.set__(0)},interupt:function(){this.detectBasket=!1},reset:function(a,
b){this.removeOwner();this.setPosition(a,b);this.set_intangible(!1);this.detectBasket=!1},get_carrier:function(){return this._carrier},get_intangible:function(){return this._intangible||0<this._coolDown},set_intangible:function(a){this._intangible=a;this._coolDown=0;return this.get_intangible()},setKinetic:function(){this._physics.setKinematic()},setDynamic:function(){this._physics.setDynamic()},onPreContact:function(a){if(!this._physics.enabled||this.get_intangible())return!1;a=a._compMap.Character_13;
!a.isStun()&&a.isEnabled&&a.set_ball(this);return!1},onGroundContact:function(a){-1!=a._compMap.TemplateComponent_40.tags.indexOf("ground")&&(this.detectBasket&&this.onMissed.emit(),j.isLongShot=!1);p.play("bounce_{random(2)}");return!0},setOwner:function(a){null!=this.owner.parent&&(this.owner.parent.removeChild(this.owner),this._physics.enable(!1));null!=a&&a!=this._carrier&&a.parent.addChild(a);this._carrier=a;this.onCatch.emit()},setPosition:function(a,b){this._physics.setPosition(a,b);this._physics.resetVelocity();
this._physics.resetImpulse()},applyForce:function(a,b,c){null==c&&(c=0);this._physics.applyImpulse(a,b);this._coolDown=c;0<this._coolDown&&this.flashBall(this._coolDown)},flashBall:function(a){this._whiteBall.alpha.set_behavior(new Cc(0,1,0.2,a/0.4))},removeOwner:function(){this._carrier=null;this._physics.enable(!0);this._layer.addChild(this.owner)},detectBaskets:function(){if(!(0>this._physics.getVelocity().get_y()))for(var a,b,c=0,d=this.baskets;c<d.length;){b=d[c];++c;a=b._compMap.TransformComponent_43;
b=b._compMap.Basket_17;var e=Math.abs(this._transform.position.x-a.position.x-b.offset.x*a.direction);a=Math.abs(this._transform.position.y-a.position.y-b.offset.y-10);50>e&&25>a&&(p.play("dunk_miss","sfx"),b.animateRim(),this.onScore.emit(!b.isHome),this.detectBasket=!1)}},__class__:Xc,__properties__:l(k.prototype.__properties__,{set_intangible:"set_intangible",get_intangible:"get_intangible",get_carrier:"get_carrier"})});var zf=function(){this._visible=!0;this._propellers=[];this.isHome=!0;k.call(this)};
f["game.gameplay.basket.Basket"]=zf;zf.__name__=["game","gameplay","basket","Basket"];zf.__super__=k;zf.prototype=l(k.prototype,{get_name:function(){return"Basket_17"},onStart:function(){k.prototype.onStart.call(this);this._transform=this.owner._compMap.TransformComponent_43;this._physicComponent=this.owner._compMap.PhysicsComponent_34;this.addPropellers();this._display=this.owner._compMap.Sprite_5;this._exploder=y.instance(this.owner._compMap.LauncherComponent_18,Zf);if(this._display.initialized)this.onInit();
else this._display.onInitComplete.connect(m(this,this.onInit)).once()},onInit:function(){this.rim=new Ca(this._display.spritesheet,this._display.pack);if(this.rim.isReady)this.onRimInit();else this.rim.onInit.connect(m(this,this.onRimInit)).once()},onRimInit:function(){T.getSystemEntity(this.owner);T.getSystemEntity(this.owner).getComponent("RendererSystem_45").getLayer("front").addChild((new r).add(this.rim));this.rim.scaleX.set__(this._transform.direction);this.rim.setXY(this._transform.position.x+
this.rimPosition.x*this._transform.direction,this._transform.position.y+this.rimPosition.y);this.rim.gotoAndStop(this.rimAsset).loop=!1},onStop:function(){this.rim=this._propellers=this._physicComponent=this._exploder=this._display=this._transform=null;null!=this._zone&&this._zone.owner.dispose();this._zone=null;k.prototype.onStop.call(this)},showZone:function(){null==this._zone&&(this._zone=E.createImage("basket_zone",C.getPack("sprites_pack")),this._zone.setXY(-this._display.offset.x+5,-this._display.offset.y+
this._physicComponent.offset.y+25),this.owner.addChild((new r).add(this._zone)),this._zone.alpha.set__(0),u.to(this._zone,{alpha:1},{time:1,ease:t.quadIn,delay:1}))},hideZone:function(){null!=this._zone&&this._zone.alpha.animateTo(0,1,t.quadOut)},handleDunkStart:function(){var a=this.owner._compMap.BasketMovement_4;null!=a&&(a.enabled=!1)},handleDunkContact:function(a,b){this.animateRim();b&&(p.play("glass_break"),this.isHome?this._display.setSymbol("basket_broken_r"):this._display.setSymbol("basket_broken_l"),
this._exploder.explode())},handleDunkEnd:function(){if(null!=this.owner){var a=this.owner._compMap.BasketMovement_4;null!=a&&(a.enabled=!0)}},score:function(){},getTransform:function(){return this._transform},getSize:function(){return this._physicComponent.shape.radius},isActive:function(){return this.rim.isReady&&this._visible},animateRim:function(){this.rim.gotoAndPlay(this.rimAsset)},show:function(){this._visible||(this._visible=!0,this._display.setAlpha(1),this.rim.setAlpha(1))},hide:function(){this._visible&&
(this._visible=!1,this._display.setAlpha(0),this.rim.setAlpha(0))},addPropellers:function(){var a=new Ca("propeller","sprites_pack");a.centerAnchor();a.setXY(32,255);this.owner.addChild((new r).add(a),!1);this._propellers.push(a);a=new Ca("propeller","sprites_pack");a.centerAnchor();a.setXY(100,255).setScaleXY(-1,1);this.owner.addChild((new r).add(a),!1);this._propellers.push(a)},__class__:zf});var Tg=function(){this.minY=-700;this.maxY=0;this.minX=-300;this.maxX=300;this.maxVelocity=3;k.call(this)};
f["game.hud.Scoreboard"]=Tg;Tg.__name__=["game","hud","Scoreboard"];Tg.__super__=k;Tg.prototype=l(k.prototype,{get_name:function(){return"Scoreboard_28"},onStart:function(){k.prototype.onStart.call(this);this._leftPropeller=new Ca("propeller","sprites_pack");this._leftPropeller.centerAnchor();this._leftPropeller.setXY(65,115);this.owner.addChild((new r).add(this._leftPropeller),!1);this._rightPropeller=new Ca("propeller","sprites_pack");this._rightPropeller.centerAnchor();this._rightPropeller.setXY(175,
115);this._rightPropeller.setScaleXY(-1,1);this.owner.addChild((new r).add(this._rightPropeller),!1);this._display=this.owner._compMap.Sprite_5;this._transform=this.owner._compMap.TransformComponent_43;if(this._display.initialized)this.init();else this._display.onInitComplete.connect(m(this,this.init)).once()},init:function(){this._springX=new Ue(0.3,20,200);this._springX.maxVelocity=this.maxVelocity;this._springY=new Ue(0.3,20,200);this._springY.maxVelocity=this.maxVelocity;this._springRotation=
new Ue(0.3,8,200);this._floatSine=new Cc(this._transform.position.y-10,this._transform.position.y+10,2.2);this._timeMinutes=new hb("scoreboard","small8","sprites_pack");this._timeMinutes.setXY(98,90);this.owner.addChild((new r).add(this._timeMinutes));this._timeTens=new hb("scoreboard","small8","sprites_pack");this._timeTens.setXY(118,90);this.owner.addChild((new r).add(this._timeTens));this._timeOnes=new hb("scoreboard","small8","sprites_pack");this._timeOnes.setXY(128,90);this.owner.addChild((new r).add(this._timeOnes));
j.isPassNPlay()?j.gameMode==Z.HORSE?this.buildHorse():this.buildPlayerScore():this.buildTeams()},setTarget:function(a){this._target=a},buildTeams:function(){this._homeTeam=new hb("scoreboard","team_tmnt_1","sprites_pack");this._homeTeam.centerAnchor().setXY(86,37).setScale(0.5);this.owner.addChild((new r).add(this._homeTeam));this._homeScoreTens=new hb("scoreboard","big0","sprites_pack");this._homeScoreTens.setXY(64,50);this.owner.addChild((new r).add(this._homeScoreTens));this._homeScoreOnes=new hb("scoreboard",
"big0","sprites_pack");this._homeScoreOnes.setXY(84,50);this.owner.addChild((new r).add(this._homeScoreOnes));this._awayTeam=new hb("scoreboard","team_tmnt_2","sprites_pack");this._awayTeam.centerAnchor().setXY(156,37).setScale(0.5);this.owner.addChild((new r).add(this._awayTeam));this._awayScoreTens=new hb("scoreboard","big0","sprites_pack");this._awayScoreTens.setXY(134,50);this.owner.addChild((new r).add(this._awayScoreTens));this._awayScoreOnes=new hb("scoreboard","big0","sprites_pack");this._awayScoreOnes.setXY(154,
50);this.owner.addChild((new r).add(this._awayScoreOnes))},buildHorse:function(){this._horseWord=[];for(var a,b=0;5>b;){var c=b++;a=E.createText("HUD_HORSE_"+c,"15_black",new r);a.setXY(25*c+60,45).setAlpha(0.5);this.owner.addChild(a.owner);this._horseWord.push(a)}},buildPlayerScore:function(){this._player=new hb("scoreboard",j.player.name,"sprites_pack");this._player.centerAnchor().setXY(87,53);this.owner.addChild((new r).add(this._player));this._homeScoreTens=new hb("scoreboard","big0","sprites_pack");
this._homeScoreTens.setXY(130,37);this.owner.addChild((new r).add(this._homeScoreTens));this._homeScoreOnes=new hb("scoreboard","big0","sprites_pack");this._homeScoreOnes.setXY(150,37);this.owner.addChild((new r).add(this._homeScoreOnes))},onUpdate:function(a){null==this._springX||null==this._target||(k.prototype.onUpdate.call(this,a),this._springX.setTargetValue(Math.min(this.maxX,Math.max(this.minX,this._target.position.x))),this._springX.update(a),this._springY.setTargetValue(Math.min(this.maxY,
Math.max(this.minY,this._target.position.y))),this._springY.update(a),this._springRotation.setTargetValue(this._springX.velocity),this._springRotation.update(a),this._transform.position.x=this._springX.value,this._transform.position.y=this._springY.value+this._floatSine.update(a),this._transform.rotation=this._springRotation.value,this._transform.fixedRotation=!1)},onStop:function(){k.prototype.onStop.call(this);this._horseWord=this._player=this._awayTeam=this._homeTeam=this._timeOnes=this._timeTens=
this._timeMinutes=this._awayScoreOnes=this._awayScoreTens=this._homeScoreOnes=this._homeScoreTens=this._rightPropeller=this._leftPropeller=this._display=null},setTime:function(a){if(null!=this._timeMinutes){0>a&&(a=0);var b=a%60;this._timeMinutes.setSymbol("small"+Math.floor(a/60));this._timeTens.setSymbol("small"+Math.floor(b/10));this._timeOnes.setSymbol("small"+b%10)}},setTeams:function(a,b){this._homeTeam.setSymbol(a);this._awayTeam.setSymbol(b)},setHomeScore:function(a){null!=this._homeScoreTens&&
(this._homeScoreTens.setSymbol("big"+Math.floor(a/10)),this._homeScoreOnes.setSymbol("big"+a%10))},setAwayScore:function(a){null!=this._awayScoreTens&&(this._awayScoreTens.setSymbol("big"+Math.floor(a/10)),this._awayScoreOnes.setSymbol("big"+a%10))},setPlayer:function(){null!=this._player&&this._player.setSymbol(j.players[j.playerId].name)},setHORSE:function(a){if(null!=this._horseWord)for(var b,c=0;5>c;){var d=c++;b=this._horseWord[d];d<a?(b.setAlpha(1),b.applyFontStyle(S.getFontStyle("17_blue"),
!0)):(b.setAlpha(0.5),b.applyFontStyle(S.getFontStyle("15_black"),!0))}},__class__:Tg});var $f=function(){this._texts=[];this._firstPageNumber=this._pageNumber=this._currentPage=0;this._alphaTweenDuration=0.25;this._nextPanelIn=0;this._duration=5;this._isMobile=!1;this.onHtpDone=new ka;this.minX=-200;this.maxX=200;this.maxVelocity=3;k.call(this)};f["game.hud.Htpboard"]=$f;$f.__name__=["game","hud","Htpboard"];$f.__super__=k;$f.prototype=l(k.prototype,{get_name:function(){return"Htpboard_29"},onStart:function(){k.prototype.onStart.call(this);
this._isMobile=x._platform.getTouch().get_supported();this._tutorial=Wl.tutorials;this._pack=C.getPack(this._isMobile?"ingame_htp_mobile":"ingame_htp");this._firstPageNumber=j.save.isFirstGame()||j.gameMode==Z.QUICKMATCH?1:6;this._board=E.createImage("htp_panel",this._pack);this._board.centerAnchor();this.owner.addChild((new r).add(this._board));this._image=new ta(this._pack.getTexture("htp_1"));this._image.setAlpha(0);this._board.owner.addChild((new r).add(this._image));this._title=new uc("","17_orange");
this._title.setXY(0.5*this._board.getNaturalWidth(),7);this._board.owner.addChild((new r).add(this._title));this._description=new uc("","17_white");this._description.setWrapWidth(410);this._description.setXY(0.5*this._board.getNaturalWidth()-205,255);this._board.owner.addChild((new r).add(this._description));this.init()},init:function(){this._board.y.set__(-600);u.to(this._board,{y:-90},{time:1.5,ease:t.quadIn,onComplete:m(this,this.onShown)});this.updatePage();this._floatSine=new Cc(-90,-70,2.2)},
onShown:function(){this._nextPanelIn=this._duration;this._springX=new Ue(0.3,20,200);this._springX.maxVelocity=this.maxVelocity;this._springRotation=new Ue(0.3,8,200)},onUpdate:function(a){k.prototype.onUpdate.call(this,a);null!=this._springX&&(this._board.y.set__(this._floatSine.update(a)),this._nextPanelIn-=a,0>=this._nextPanelIn&&this.changePage())},onStop:function(){k.prototype.onStop.call(this);this._board=null},changePage:function(){this._currentPage++;if(j.gameMode==Z.TOURNAMENT){if(j.save.isFirstGame()&&
5<=this._currentPage){this.hide();j.save.setSecondGame();return}if(j.save.isSecondGame()&&3<=this._currentPage){this.hide();j.save.endHtp();return}}else if(8<=this._currentPage){this.hide();j.save.endHtp();return}this._title.alpha.animateTo(0,this._alphaTweenDuration);this._description.alpha.animateTo(0,this._alphaTweenDuration);this._image.alpha.animateTo(0,this._alphaTweenDuration);for(var a=0,b=this._texts;a<b.length;){var c=b[a];++a;c.alpha.animateTo(0,this._alphaTweenDuration)}u.delayCallTo(m(this,
this.updatePage),this._alphaTweenDuration);this._nextPanelIn=this._duration},updatePage:function(){this._pageNumber=this._currentPage+this._firstPageNumber;this._currentTutorial=this._tutorial[this._pageNumber-1];null==this._currentTutorial?this.hide():(this._title.setText(this._currentTutorial.titleID),this._title.setAlign(X.Center),this._title.setAlpha(0),this._title.alpha.animateTo(1,this._alphaTweenDuration),this._description.setText(this._currentTutorial.description+(this._isMobile&&this._currentTutorial.mobileDescription?
"_MOBILE":"")),this._description.y.set__(255-0.5*this._description.getNaturalHeight()),this._description.setAlign(X.Center),this._description.setAlpha(0),this._description.alpha.animateTo(1,this._alphaTweenDuration),this.setImage("htp_"+this._pageNumber),this.setTexts())},setImage:function(a){this._image.texture=this._pack.getTexture(a);this._image.centerAnchor().setXY(0.5*this._board.getNaturalWidth(),0.5*this._board.getNaturalHeight()-70);this._image.setAlpha(0);this._image.alpha.animateTo(1,this._alphaTweenDuration)},
setTexts:function(){if(0<this._texts.length)for(var a=0,b=this._texts;a<b.length;){var c=b[a];++a;c.owner.dispose()}p.play("announcer_htp_"+this._pageNumber," ANNOUNCER");this._texts=[];b=this._currentTutorial.inGameTexts;if(null!=b)for(c=0;c<b.length;){var d=b[c];++c;var a=new uc(d.textID+(this._isMobile&&d.mobileVariant?"_MOBILE":""),d.font),e=d.x;null!=d.width&&0<d.width&&(a.setWrapWidth(d.width),e-=0.5*d.width);a.setXY(e,d.y);a.setAlpha(0);a.setAlign(X.Center);a.alpha.animateTo(1,this._alphaTweenDuration);
this._board.owner.addChild((new r).add(a));this._texts.push(a)}},hide:function(){this._springX=this._floatSine=null;u.to(this._board,{y:-800},{time:1.5,ease:t.backOut,onComplete:m(this,this.onHidden)})},onHidden:function(){this.onHtpDone.emit()},__class__:$f});var Ug=function(){this._pauseSpawning=!1;this._coolDown=0;k.call(this)};f["game.pickups.PickupSpawner"]=Ug;Ug.__name__=["game","pickups","PickupSpawner"];Ug.__super__=k;Ug.prototype=l(k.prototype,{get_name:function(){return"PickupSpawner_88"},
onStart:function(){k.prototype.onStart.call(this);T.getSystemEntity(this.owner);this._actorSystem=T.getSystemEntity(this.owner).getComponent("ActorSystem_41");this._transform=this.owner._compMap.TransformComponent_43;this._coolDown=this.time},onStop:function(){this._actorSystem=this._transform=null;k.prototype.onStop.call(this)},onUpdate:function(a){this._pauseSpawning||(k.prototype.onUpdate.call(this,a),this._coolDown-=a,0>=this._coolDown&&(a=Math.random()*this.rangeX-0.5*this.rangeX,a=this._actorSystem.spawn(P.merge(M.getTemplate(this.getPickup()),
{transform:{position:{x:this._transform.position.x+a,y:this._transform.position.y}}},!0)),p.play("pickup_spawn","PICKUP"),this._coolDown=this.time,this._pauseSpawning=!0,a._compMap.Pickup_89.onCollect.connect(m(this,this.onCollected)).once()))},onCollected:function(){this._pauseSpawning=!1},getPickup:function(){if(this.pickup instanceof Array&&null==this.pickup.__enum__){var a=this.pickup;if(0==a.length)throw"No pickup provided";var b=Math.floor(Math.random()*a.length);return a[b]}if("string"==typeof this.pickup)return this.pickup;
throw"Wrong pickup value: "+y.string(this.pickup);},__class__:Ug});var Vg=function(){this._hooked=!0;this._toDestroy=!1;this.onCollect=new ka;k.call(this)};f["game.pickups.Pickup"]=Vg;Vg.__name__=["game","pickups","Pickup"];Vg.__super__=k;Vg.prototype=l(k.prototype,{get_name:function(){return"Pickup_89"},onStart:function(){k.prototype.onStart.call(this);this._physicsSystem=T.getSystemEntity(this.owner)._compMap.PhysicSystem_36;this._physics=this.owner._compMap.PhysicsComponent_34;this._display=this.owner._compMap.Sprite_5;
if(this._display.initialized)this.showHook();else this._display.onInitComplete.connect(m(this,this.showHook)).once();this._physicsSystem.addContactListener(ea.PRELISTENER,wa.ANY,"ANY_BODY","ANY_BODY",this.owner,m(this,this.onContact))},onStop:function(){this._physicsSystem.removeContactListener(ea.PRELISTENER,wa.ANY,"ANY_BODY","ANY_BODY",this.owner);this._physics=this._physicsSystem=null;null!=this._balloon&&(u.kill(this._balloon),this._balloon.owner.dispose(),this._balloon=null);k.prototype.onStop.call(this)},
onUpdate:function(a){k.prototype.onUpdate.call(this,a);null!=this._physics&&this._hooked&&this._physics.moveBy(0,this.fallSpeed*a);null!=this._balloon&&0==this._balloon.alpha._value&&this._toDestroy&&(T.getSystemEntity(this.owner),T.getSystemEntity(this.owner).getComponent("ActorSystem_41").removeActor(this.owner))},showHook:function(){this._balloon=E.createImage("pickup_balloon",C.getPack("sprites_pack"));this.owner.addChild((new r).add(this._balloon),!1);this._balloon.setXY(0.5*(this._display.getNaturalWidth()-
this._balloon.getNaturalWidth()),0.5*this._display.getNaturalHeight()-this._balloon.getNaturalHeight())},hideHook:function(){null!=this._balloon&&this._balloon.alpha.set__(0)},onContact:function(a){var b=!0;if(null!=this.owner.parent){var c=a._compMap.Effect_14;if(null!=c)c.addEffect(this.effect),this._toDestroy=!0,this._display.animation.alpha.set__(0),b=!1,this.onCollect.emit();else if(null!=a._compMap.Ball_31)return!1}null!=this._balloon&&null==u.tweens.h.__keys__[this._balloon.__id__]&&(u.to(this._balloon,
{y:-1E3},{time:1,onComplete:m(this,this.hideHook)},t.quadIn),null!=this._physics&&!this._toDestroy&&(this._physics.setMassScale(0.25),this._hooked=!1));return b},__class__:Vg});var Ej=function(){this._currentEffect=null;this.onClearEffect=new ka;this.onAddEffect=new O;this.scale=1;k.call(this)};f["game.pickups.Effect"]=Ej;Ej.__name__=["game","pickups","Effect"];Ej.__super__=k;Ej.prototype=l(k.prototype,{get_name:function(){return"Effect_14"},onStart:function(){k.prototype.onStart.call(this);this._display=
this.owner._compMap.Sprite_5;this._transform=this.owner._compMap.TransformComponent_43;this._physic=this.owner._compMap.PhysicsComponent_34;this._frontFx=new Ca(this.asset,this.pack);this._frontFx.setScale(this.scale);(new r).add(this._frontFx);this._backFx=new Ca(this.asset,this.pack);this._backFx.setScale(this.scale);(new r).add(this._backFx)},onStop:function(){this._physic=this._transform=this._display=this._currentEffect=null;null!=this._frontFx&&this._frontFx.owner.dispose();null!=this._backFx&&
this._backFx.owner.dispose();this._fxEmitter=this._backFx=this._frontFx=null;k.prototype.onStop.call(this)},onUpdate:function(a){k.prototype.onUpdate.call(this,a);if(null!=this._currentEffect)if(this._currentEffect.duration-=a,0>=this._currentEffect.duration)this.clearEffect();else if(null!=this._display&&null!=this._display.flump&&null!=this._display.flump.movie){a=this._display.flump.movie.getLayer("footF",!1);null!=a&&a!=this._frontFx.owner.parent&&(a.addChild(this._frontFx.owner),this._frontFx.gotoAndPlay(this._currentEffect.fx));
if(null!=this._fxEmitter&&this._fxEmitter.enabled){var a=this._frontFx.getViewMatrix(),b=this._fxEmitter.getViewMatrix();this._fxEmitter.emitX.set__(a.m02-b.m02-this._offset.x*this._transform.direction);this._fxEmitter.emitY.set__(a.m12-b.m12+this._frontFx.anchorY._value-this._offset.y);this._fxEmitter.direction=this._transform.direction}a=this._display.flump.movie.getLayer("footB",!1);"shoot"!=this._currentEffect.fx&&null!=a&&a!=this._backFx.owner.parent&&(a.addChild(this._backFx.owner),this._backFx.gotoAndPlay(this._currentEffect.fx))}},
addEffect:function(a){this.clearEffect();this._currentEffect=P.clone(a);null!=this._fxEmitter&&null!=this._fxEmitter.owner&&this._fxEmitter.owner.dispose();this._fxEmitter=pa.setEmitter(this._fxEmitter,this._currentEffect.fx,"particles_fx");null==this._fxEmitter.owner&&this.owner.parent.addChild((new r).add(this._fxEmitter),!1);this._fxEmitter.restart();this._offset=this._currentEffect.offset;null==this._offset&&(this._offset={x:0,y:0});null!=this._frontFx&&this._frontFx.setXY(this._offset.x,this._offset.y);
null!=this._backFx&&this._backFx.setXY(this._offset.x,this._offset.y);this.onAddEffect.emit(this._currentEffect)},clearParticles:function(){null!=this._currentEffect&&null!=this._fxEmitter&&this._fxEmitter.clearParticles()},clearEffect:function(){this._currentEffect=null;null!=this._frontFx.owner.parent&&this._frontFx.owner.parent.removeChild(this._frontFx.owner);null!=this._fxEmitter&&(this._fxEmitter.enabled=!1);null!=this._backFx.owner.parent&&this._backFx.owner.parent.removeChild(this._backFx.owner);
this.onClearEffect.emit()},__class__:Ej});var Wg=function(){k.call(this)};f["game.gameplay.crowd.Crowd"]=Wg;Wg.__name__=["game","gameplay","crowd","Crowd"];Wg.__super__=k;Wg.prototype=l(k.prototype,{get_name:function(){return"Crowd_30"},onStart:function(){k.prototype.onStart.call(this);this._display=this.owner._compMap.Sprite_5;this._script=new sb;this.owner.add(this._script)},onStop:function(){this._script=this._display=null;k.prototype.onStop.call(this)},cheer:function(a){null==a&&(a=1);var b=this;
this._display.set("cheer");a*=this._display.getDuration("cheer");this._script.run(new Za([new U(a),new ma(function(){b._display.set("idle")})]))},__class__:Wg});var ag=function(){this.normalDuration=1;this.megaDuration=2;this.anim="idle";V.call(this)};f["game.gameplay.crowd.Flashes"]=ag;ag.__name__=["game","gameplay","crowd","Flashes"];ag.__super__=V;ag.prototype=l(V.prototype,{onStart:function(){V.prototype.onStart.call(this);this._script=new sb;this.owner.add(this._script);this._anims=[];for(var a,
b=0,c=this.positions;b<c.length;){var d=c[b];++b;a=new Ca(this.asset,this.pack);a.setXY(d.x,d.y);(new r).add(a);this._anims.push(a)}},dispose:function(){for(var a=0,b=this._anims;a<b.length;){var c=b[a];++a;c.owner.dispose()}this._script=this._anims=null;V.prototype.dispose.call(this)},trigger:function(a){null==a&&(a=!1);for(var b=this,c=0,d=this._anims;c<d.length;){var e=[d[c]];++c;null==e[0].owner.parent&&this._script.run(new Za([new U(0.3*Math.random()),new ma(function(a){return function(){b.owner.addChild(a[0].owner);
a[0].gotoAndPlay(a[0])}}(e)),new U(a?this.megaDuration:this.normalDuration),new ma(function(a){return function(){a[0].owner.parent.removeChild(a[0].owner)}}(e))]))}},__class__:ag});var Fj=function(){this._freeze=0;this.enabled=!0;this.minX=this.maxX=this.minY=this.maxY=0;this.speed=1;k.call(this)};f["game.gameplay.basket.BasketMovement"]=Fj;Fj.__name__=["game","gameplay","basket","BasketMovement"];Fj.__super__=k;Fj.prototype=l(k.prototype,{get_name:function(){return"BasketMovement_4"},onStart:function(){k.prototype.onStart.call(this);
this._transform=this.owner._compMap.TransformComponent_43;this._basket=this.owner._compMap.Basket_17;this._physicComponent=this.owner._compMap.PhysicsComponent_34;this._transform.fixed=!1;this.offsetX=new J(0);this.offsetY=new J(0);this.progress=new J(0);this._origin=new jb(this._transform.position.x,this._transform.position.y);if(this._physicComponent.initialized)this.onInit();else this._physicComponent.onInitialize.connect(m(this,this.onInit)).once()},onStop:function(){this.progress=this.offsetY=
this.offsetX=this._physicComponent=this._transform=null;k.prototype.onStop.call(this)},onUpdate:function(a){k.prototype.onUpdate.call(this,a);this.enabled&&this._physicComponent.initialized&&(0<this._freeze?this._freeze-=a:(this.offsetX.update(a),this.offsetY.update(a),this.progress.update(a),this._physicComponent.setPosition(this._origin.x+this.offsetX._value,this._origin.y+this.offsetY._value),null!=this._basket&&null!=this._basket.rim&&this._basket.rim.setXY(this._transform.position.x+this._basket.rimPosition.x*
this._transform.direction,this._transform.position.y+this._basket.rimPosition.y)))},freeze:function(a){this._freeze=a},onInit:function(){this._physicComponent.setKinematic();this.offsetX.set_behavior(new Cc(this.minX,this.maxX,this.speed));this.offsetY.set_behavior(new Cc(this.minY,this.maxY,this.speed));this.progress.set_behavior(new Cc(0,1,this.speed))},__class__:Fj});var Gj=function(){};f["game.gameplay.platforms.HorseToken"]=Gj;Gj.__name__=["game","gameplay","platforms","HorseToken"];Gj.__super__=
k;Gj.prototype=l(k.prototype,{get_name:function(){return"HorseToken_2"},onStart:function(){k.prototype.onStart.call(this);this._anim=this.owner._compMap.Sprite_5;this.changeState(Va.NEW)},onStop:function(){k.prototype.onStop.call(this)},reset:function(){this.changeState(Va.NEW)},changeState:function(a){if(a!=this.state)switch(this.state=a,this.state[1]){case 0:p.play("horse_good","sfx");this._anim.animation.gotoAndPlay("new");break;case 1:this._anim.animation.gotoAndPlay("next");break;case 2:p.play("horse_good",
"sfx");this._anim.animation.gotoAndPlay("good");break;case 3:p.play("horse_wrong","sfx"),this._anim.animation.gotoAndPlay("bad")}},__class__:Gj});var bg=function(){this._tokens=[];this.onLand=new Nc;this.id=-1;this.tokenOffset=-50;k.call(this)};f["game.gameplay.platforms.HorsePlatform"]=bg;bg.__name__=["game","gameplay","platforms","HorsePlatform"];bg.__super__=k;bg.prototype=l(k.prototype,{get_name:function(){return"HorsePlatform_3"},onStart:function(){k.prototype.onStart.call(this);var a=T.getSystemEntity(this.owner);
this._actors=a._compMap.ActorSystem_41;this._physicsSystem=a._compMap.PhysicSystem_36;this._image=this.owner._compMap.Sprite_5;this._transform=this.owner._compMap.TransformComponent_43;this._physicsSystem.addContactListener(ea.BEGIN,wa.COLLISION,"ANY_BODY","ANY_BODY",this.owner,m(this,this.onContactBegin))},reset:function(){for(var a=0,b=this._tokens;a<b.length;){var c=b[a];++a;c.owner.dispose()}this._tokens=[]},spawnToken:function(a){this.repositionTokens();var b=this._actors.spawnTemplate("horse_token");
b._compMap.TransformComponent_43.position={x:this._transform.position.x+40*this._tokens.length,y:this._transform.position.y+this.tokenOffset};var c=b._compMap.HorseToken_2;this._tokens.push(c);a=E.createTextSprite(null==a?"null":""+a,"25_white_outline",b.addChild(new r));a.setXY(35,22);a.setAlign(X.Center);return c},isUsed:function(){return 0<this._tokens.length},hasToken:function(a){return-1!=this._tokens.indexOf(a)?!0:!1},repositionTokens:function(){for(var a,b=0,c=this._tokens;b<c.length;){var d=
c[b];++b;a=d.owner._compMap.TransformComponent_43;a.setXY(a.position.x-25,a.position.y);ga.__cast(d.owner._compMap.Sprite_5,V).forceUpdate=!0}},onContactBegin:function(a){null!=a._compMap.Character_13&&(u.from(this._image,{y:this._image.y._value+5},{time:0.1},t.backIn),this.onLand.emit(this,a._compMap.Character_13))},__class__:bg});var Sm=function(){};f["game.gameplay.ComponentList"]=Sm;Sm.__name__=["game","gameplay","ComponentList"];var Hj=function(a){this._numToLoad=4;this._previousTime=0;this.paused=
this.gameStarted=this._endless=!1;this.onScore=new O;this.onGameStart=new ka;this.onReady=new ka;k.call(this);this.levelConfig=Kg.levels.get(j.currentLevel);this._timeToBeat=this._timer=this.levelConfig.time;this.system=a};f["game.gameplay.GameLogic"]=Hj;Hj.__name__=["game","gameplay","GameLogic"];Hj.__super__=k;Hj.prototype=l(k.prototype,{get_name:function(){return"GameLogic_26"},onAdded:function(){this._disposer=this.owner._compMap.Disposer_61;k.prototype.onAdded.call(this)},onStop:function(){k.prototype.onStop.call(this);
this.playerTransform=this.player=this.system=this._disposer=null;null==this.ball.owner.parent&&this.ball.owner.dispose();this.characters=this._crowds=this.opponent2=this.opponent1=this.teammate=this.ball=null},onUpdate:function(a){this.isStarted&&(k.prototype.onUpdate.call(this,a),!this._endless&&this.gameStarted&&!this.paused&&(j.time+=a,this._timer-=a,a=Math.ceil(this._timer),a!=this._previousTime&&(this.system.hud.scoreboard.setTime(a),this._previousTime=a,0==a&&this.mode.timeOut())))},getTimeLeft:function(){return this._timer},
start:function(){this.isStarted||(this.isStarted=!0,this.SetupMode(),this.SetupIntroOutro(),this._camera=this.system.camera,j.reset(),this.createFieldLogo(j.player.team),this.createBall())},swapPlayer:function(){this.player.owner.dispose();this.player=this.createCharacter(j.players[j.playerId].name,"HOME_TEAM");this.player.onPlayerTeam=!0;this.playerTransform=this.player.owner._compMap.TransformComponent_43},SetupMode:function(){null!=this.mode&&this.mode.dispose();switch(j.gameMode[1]){case 0:this.mode=
new Xg(this);break;case 1:this.mode=new Xg(this);break;case 2:this.mode=new Yg(this);break;case 3:this.mode=new Ij(this);break;case 4:this.mode=new Jj(this)}j.isPassNPlay()&&this.system.hud.supergauge.owner.dispose()},SetupIntroOutro:function(){this.intro=j.isPassNPlay()?new Kj(this):new Lj(this);this.intro.onComplete.connect(m(this,this.onIntroComplete));this.outro=new Zl(this);this.outro.onStart.connect(m(this,this.onOutroStart));this.end=new $l(this)},onBallLoaded:function(){this.setupCrowd();
this.characters=[];j.isPassNPlay()?this.createCurrentPlayer():this.createCharacters();this.onReady.emit()},setupCrowd:function(){this._crowds=[];var a=this.system.actors.getActorsByComponent(Wg);if(null!=a)for(var b=0;b<a.length;){var c=a[b];++b;this._crowds.push(c._compMap.Crowd_30)}a=this.system.actors.getActorsByComponent(ag);null!=a&&0<a.length&&(this._flash=y.instance(a[0]._compMap.Sprite_5,ag))},createCurrentPlayer:function(){this._numToLoad=1;var a=j.players[j.playerId];this.player=this.createCharacter(a.name,
"HOME_TEAM");this.player.onPlayerTeam=!0;j.isPassNPlay()?j.gameMode!=Z.HORSE&&this.system.hud.scoreboard.setPlayer():this.system.hud.scoreboard.setTeams(a.team,a.team)},createCharacters:function(){this._numToLoad=2;this.player=this.createCharacter(j.player.name,"HOME_TEAM");this.opponent1=this.createCharacter(j.opponent.name,"AWAY_TEAM",!0);this.system.hud.scoreboard.setTeams(j.player.team,j.opponent.team);j.gameType==Ja.TWO_VERSUS_TWO&&(this._numToLoad+=2,this.teammate=this.createCharacter(j.player.partner,
"HOME_TEAM",!0),this.opponent2=this.createCharacter(j.opponent.partner,"AWAY_TEAM",!0))},onLoaded:function(){--this._numToLoad;if(0>=this._numToLoad){var a=this.system.actors.spawnTemplate("cameraFrame");this._camera.frame=a._compMap.CameraFrame_32;var b=P.clone(this.levelConfig.limits);b.minX+=0.5*o.width;b.maxX-=0.5*o.width;b.minY+=0.5*o.height;b.maxY-=0.5*o.height;this._camera.setFrameLimits(b);this.system.hud.scoreboard.setTarget(a._compMap.TransformComponent_43);this.createPlayer();this.mode.init();
this.setupControls();this.checkTutorial();this.intro.init(!0,!0)}},setupControls:function(){},checkTutorial:function(){j.isPassNPlay()||!j.save.isFirstGame()&&!j.save.isSecondGame()||(this.htpBoard=new $f,this.htpBoard.onHtpDone.connect(m(this,this.onHtpDone)),this.system.renderer.getLayer("back").addChild((new r).add(this.htpBoard)),this.player.targetBasket._compMap.Basket_17.showZone())},onHtpDone:function(){this.system.hud.showScoreboard();this.htpBoard.owner.dispose();this.htpBoard=null;this.player.targetBasket._compMap.Basket_17.hideZone()},
onIntroComplete:function(){this.gameStarted=!0;this.paused=!1;this.onGameStart.emit();this._camera.frame.setMainTarget(this.player.owner._compMap.CameraTargetComponent_9)},onOutroStart:function(){this.paused=!0;this.gameStarted=!1},endGame:function(a,b){this.isStarted&&(this.isStarted=!1,this.player.isEnabled=!1,j.isPassNPlay()||(this.opponent1.isEnabled=!1,j.gameType==Ja.TWO_VERSUS_TWO&&(this.teammate.isEnabled=!1,this.opponent2.isEnabled=!1)),this.system.setSpeed(0,0.5),j.endGame(a,b,this._endless?
-1:Math.ceil(this.getTimeSpent())),u.delayCallTo(m(this,this.onEndComplete),1.25))},setTimeToBeat:function(a){this._timer=a},getTimeSpent:function(){return this._timeToBeat-this._timer},onEndComplete:function(){j.gameMode==Z.TOURNAMENT&&this.homeWins()&&za.get(j.currentLevel).endGame?I.change("End"):I.change(j.isPassNPlay()?"MultiWin":"Win")},createPlayer:function(){var a=this.player.owner;this.player.set_isPlayer(!0);this.player.superMoveFactor=this.levelConfig.playerSuperMoveFactor;this.playerTransform=
a._compMap.TransformComponent_43;null!=this.system.webControls&&this.system.webControls.set_player(this.player);null!=this.system.touchControls&&this.system.touchControls.set_player(this.player);a._compMap.TemplateComponent_40.uuid="player";this.system.actors.updateRegisteredActor(a);this._camera.frame.setMainTarget(a._compMap.CameraTargetComponent_9);this._disposer.add(this.player.get_superDunk().onChange.connect(m(this,this.onSuperDunkChange)));this._disposer.add(this.player.state.shoot.onShoot.connect(m(this,
this.onPlayerShoot)))},createCharacter:function(a,b,c){null==c&&(c=!1);var d=P.clone(M.getTemplate("defaultCharacter")),e=this.getBallAsset();d.mixed_anim.textureReplace.push({layer:"Ball-flump",sprite:"sprites_pack",asset:e});e=M.getTemplate(a);d=P.merge(d,e,!0);d=P.merge(d,{character:{character:a},contacts:{contactType:b}},!0);c&&(a=j.gameMode==Z.QUICKMATCH,b=j.getDifficultyConfig(),d=P.merge(d,{character:{weapon:a?b.weapon:this.levelConfig.ai.aiWeapon},ai:{attackDistance:50,detectionDistance:300,
behaviorFile:"basket_ai.json",behaviorTickRate:a?b.tickRate:this.levelConfig.ai.behaviorTickRate,enabled:!0,minShootSpeed:a?b.minShootSpeed:this.levelConfig.ai.minShootSpeed,maxShootSpeed:a?b.maxShootSpeed:this.levelConfig.ai.maxShootSpeed,shootSuccessRate:a?b.shootSuccessRate:this.levelConfig.ai.shootSuccessRate}},!0));a=this.system.actors.spawn(d)._compMap.Character_13;a.onFirstUpdate.connect(m(this,this.onLoaded)).once();this._disposer.add(a.onDunkStart.connect(m(this,this.onDunkStart)));this._disposer.add(a.onDunkContact.connect(m(this,
this.onDunkContact)));this._disposer.add(a.onDunkCancelled.connect(m(this,this.onDunkCancelled)));this._disposer.add(a.onGetBall.connect(m(this,this.onCharacterGetBall)));this._disposer.add(a.onLoseBall.connect(m(this,this.onCharacterLoseBall)));c&&(a.aiSpeedFactor=this.levelConfig.ai.aiSpeedFactor,a.superMoveFactor=this.levelConfig.ai.aiSuperMoveFactor);this.characters.push(a);return a},onCharacterLoseBall:function(){u.delayCallTo(m(this,this.resetCameraFrame),0.5,this._camera.frame.owner)},resetCameraFrame:function(){null==
this.ball.get_carrier()&&this._camera.frame.setSecondaryTarget(this.ball.owner._compMap.CameraTargetComponent_9)},onCharacterGetBall:function(a){a.get_isPlayer()?this._camera.frame.setSecondaryTarget(this.player.targetBasket._compMap.CameraTargetComponent_9):this._camera.frame.setSecondaryTarget(a.owner._compMap.CameraTargetComponent_9)},onPlayerShoot:function(a){a&&this._camera.frame.setMainTarget(this.ball.owner._compMap.CameraTargetComponent_9)},onBallMissed:function(){this._camera.frame.setMainTarget(this.player.owner._compMap.CameraTargetComponent_9)},
onBallCatch:function(){this._camera.frame.setMainTarget(this.player.owner._compMap.CameraTargetComponent_9)},onSuperDunkChange:function(a){this.system.hud.setSuperMove(a)},onDunkStart:function(a){a.success&&a.fromPlayer&&null!=this._flash&&this._flash.trigger(a.isSuperDunk);a.isSuperDunk&&a.startCameraZoom()},onDunkCancelled:function(a){a.isAnimStarted&&(this.ball.interupt(),this.system.hud.callout("dunkbreaker",{delay:0}))},onDunkContact:function(a){var b=!1,c;c=a.isSuperDunk?o.pointPerMegaDunk:
o.pointPerDunk;if(null==this.htpBoard&&a.success&&(a.get_basket().isHome&&j.homeScore+c>=o.pointPerGame||!a.get_basket().isHome&&j.awayScore+c>=o.pointPerGame))b=!0;c=b;a.get_basket().handleDunkContact(a,c);c&&a.startCameraZoom();if(a.success){a.isSuperDunk?p.play("mega_dunk","DUNK"):p.play("dunk","DUNK");c=0;for(var d=this._crowds;c<d.length;){var e=d[c];++c;e.cheer(3)}a.isSuperDunk?(this._camera.dunkShake(2),b&&a.fromPlayer?j.isNewPosterize()?(this.system.hud.callout("posterized",{delay:0.3}),a=
W.getAchievementByName("ACHIEVEMENT_SPECIAL_WIN"),a.isComplete()||(a.complete(),W.save())):this.system.hud.callout("dunkality",{delay:0.3}):this.system.hud.callout("superdunk",{delay:0.3})):(this._camera.dunkShake(1),this.system.hud.callout("score",{delay:0.5}),p.play("dunk_"+a.charData.name,"VO"))}else a.cancelled||(p.play("dunk_miss","DUNK"),p.play("miss_"+a.charData.name,"VO"),a.fromPlayer&&this.system.hud.callout("missed",{delay:0.2}))},onBallScore:function(){this.system.hud.callout("score",{delay:0.5})},
homeWins:function(){return j.homeScore>=j.awayScore},createFieldLogo:function(a){this.system.actors.spawn(M.getTemplate("field_logo_"+a))},createBall:function(){var a=this.getBallAsset(),b=M.getTemplate("ball"),a=this.system.actors.spawn(P.merge(b,{image:{asset:a},physics:{shape:{material:"ball"}}},!0));a._compMap.TemplateComponent_40.uuid="ball";this.ball=a._compMap.Ball_31;this.ball.onFirstUpdate.connect(m(this,this.onBallLoaded)).once();this._disposer.add(this.ball.onScore.connect(m(this,this.onBallScore)));
this._disposer.add(this.ball.onMissed.connect(m(this,this.onBallMissed)));this._disposer.add(this.ball.onCatch.connect(m(this,this.onBallCatch)));this.system.actors.updateRegisteredActor(a)},getBallAsset:function(){switch(Oa.ball.state){case lb.BASEBALL:return"baseball";case lb.SOCCER:return"soccer_ball";case lb.SLIME:return"slime_ball"}return"ball"},__class__:Hj});var Yc=function(a){this._disposer=new xb;this.onInitComplete=new ka;k.call(this);this.dimensions=a};f["stolo.ensys.system.BaseGameSystem"]=
Yc;Yc.__name__=["stolo","ensys","system","BaseGameSystem"];Yc.__super__=k;Yc.prototype=l(k.prototype,{get_name:function(){return"BaseGameSystem_20"},dispose:function(){k.prototype.dispose.call(this);null!=this.parallelEntity&&(this.parallelEntity.dispose(),this.parallelEntity=null);this.level=this.camera=this.culling=this.physics=this.sound=this.actors=this.renderer=this.parallelScript=this._speedAdjuster=this._disposer=null},onAdded:function(){k.prototype.onAdded.call(this);this.owner.add(this._disposer);
this.parallelEntity=new r;this.parallelScript=new sb;this.parallelEntity.add(this.parallelScript);this._speedAdjuster=new Of;this.owner.add(this._speedAdjuster);this.buildSubSystems();this.init()},onStart:function(){k.prototype.onStart.call(this);null!=this.owner.parent?this.owner.parent.addChild(this.parallelEntity):x.root.addChild(this.parallelEntity)},buildSubSystems:function(){this.buildRenderer();this.buildCamera();this.buildActors();this.buildPhysics();this.buildSound();this.buildLevel()},buildRenderer:function(){this.renderer=
new Zg(this.dimensions);this.culling=new $g(this.renderer,this.dimensions);this.owner.add(this.renderer);this.owner.add(this.culling)},buildCamera:function(){this.camera=new Jc;this.owner.add(this.camera)},buildActors:function(){this.actors=new Ve;this.owner.add(this.actors)},buildPhysics:function(){this.physics=new Rd;this.owner.add(this.physics)},buildSound:function(){this.sound=new ah;this.owner.add(this.sound)},buildLevel:function(){this.level=new we;this.owner.add(this.level)},init:function(){this.onInitComplete.emit()},
setSpeed:function(a,b,c){null==b&&(b=0.2);0>=b?(this._speedAdjuster.scale.set__(a),this._speedAdjuster.scale.set_behavior(null)):this._speedAdjuster.scale.animateTo(a,b,c)},__class__:Yc});var ti=function(){this.touchControlsEnabled=x._platform.getTouch().get_supported();Yc.call(this,new id(0,0,o.width,o.height))};f["game.gameplay.GameSystem"]=ti;ti.__name__=["game","gameplay","GameSystem"];ti.__super__=Yc;ti.prototype=l(Yc.prototype,{onAdded:function(){Yc.prototype.onAdded.call(this)},onStop:function(){Yc.prototype.onStop.call(this);
null!=this._dunkscript.owner&&(this._dunkscript.owner.parent.removeChild(this._dunkscript.owner),this._dunkscript.owner.dispose());this.touchControls=this.webControls=this.logic=this.hud=this._dunkscript=null},buildSubSystems:function(){this.renderer=new Zg(this.dimensions);this.actors=new Ve;this.sound=new ah;this.physics=new Rd;this.level=new we;this.culling=new $g(this.renderer,this.dimensions);this.camera=new wf;this.owner.add(this.renderer);this.owner.add(this.actors);this.owner.add(this.sound);
this.owner.add(this.physics);this.owner.add(this.level);this.owner.add(this.culling);this.owner.add(this.camera);this._dunkscript=new sb;this.parallelEntity.addChild((new r).add(this._dunkscript));this.hud=new Mj;this.parallelEntity.add(this.hud);this.touchControlsEnabled?(this.touchControls=new Aj(this.hud),this.owner.add(this.touchControls)):(this.webControls=new Cj,this.owner.add(this.webControls));this.logic=new Hj(this);this.owner.add(this.logic)},init:function(){Yc.prototype.init.call(this);
Te.configure(this.physics);this.camera.configure();var a=za.get(j.currentLevel);this.level.build(a.layers,a.actors);this.onLevelLoaded()},onLevelLoaded:function(){this.actors.getActorsByTags("scoreboard");this.hud.scoreboard=this.actors.getActorsByTags("scoreboard")[0].getComponent("Scoreboard_28");this.logic.start()},runDunkSequence:function(a){a=new Za(a);this._dunkscript.stopAll();this._dunkscript.run(a);return a},__class__:ti});var Ub=function(a){this._firstInit=!0;this._logic=a;this._firstInit=
!0};f["game.gameplay.modes.BaseMode"]=Ub;Ub.__name__=["game","gameplay","modes","BaseMode"];Ub.prototype={init:function(){this._firstInit=!1;this.connectBasket()},dispose:function(){this._logic=null},timeOut:function(){this._logic.end.init(this._logic.homeWins(),!1)},connectBasket:function(){},__class__:Ub};var Db=function(a){this._forceNextTurn=!1;Ub.call(this,a);j.playerId=0;j.player1=j.players[0].name;this.reorderPlayers();o.autoAim=!1;j.playerScores=new N;for(var a=0,b=j.players.length;a<b;){var c=
a++;j.playerScores.set(j.players[c].name,0)}};f["game.gameplay.modes.AllStarMode"]=Db;Db.__name__=["game","gameplay","modes","AllStarMode"];Db.__super__=Ub;Db.prototype=l(Ub.prototype,{init:function(){this._firstInit&&(this._logic.ball.onScore.connect(m(this,this.onBallScore)),this._logic.ball.onMissed.connect(m(this,this.onBallMissed)));this._logic.ball.interupt();this._outroConnection=this._logic.outro.onTransition.connect(m(this,this.nextPlayer)).once();null!=this._characterScoreConnection&&this._characterScoreConnection.dispose();
this._characterScoreConnection=this._logic.player.onScore.connect(m(this,this.onCharacterScore));Ub.prototype.init.call(this)},connectBasket:function(){var a=this._logic.system.actors.getActorsByComponent(zf);this._logic.ball.baskets=a;this._logic.player.targetBasket=a[0]},reorderPlayers:function(){j.players=Tm.shuffle(j.players)},nextPlayer:function(){this._forceNextTurn||j.playerId<j.players.length-1?(this.nextPlayerId(),this._logic.swapPlayer()):(this._forceNextTurn=!1,this.nextTurn())},nextPlayerId:function(){j.playerId++},
nextTurn:function(){j.turn++;j.playerId=0;this._logic.swapPlayer()},onBallScore:function(){},onBallMissed:function(){},onCharacterScore:function(){},increaseScore:function(){var a=j.players[j.playerId].name,b=j.playerScores.get(a);b++;j.playerScores.set(a,b)},__class__:Db});var Ij=function(a){this._isEnd=!1;Db.call(this,a);this._baskets=a.system.actors.getActorsByComponent(zf);this._availableBaskets=this._baskets.slice()};f["game.gameplay.modes.DunkChallenge"]=Ij;Ij.__name__=["game","gameplay","modes",
"DunkChallenge"];Ij.__super__=Db;Ij.prototype=l(Db.prototype,{init:function(){this._logic.player.canMove=!0;this._logic.player.canShoot=!1;Db.prototype.init.call(this);this._logic.player.enable();this.reset()},dispose:function(){this._baskets=this._availableBaskets=null;Db.prototype.dispose.call(this)},timeOut:function(){this._isEnd=!0;this._logic.player.removeBall();this._logic.ball.setPosition(this._logic.playerTransform.position.x,this._logic.playerTransform.position.y);var a=this._logic.player.owner._compMap.CharacterDunk_16;
null!=a&&(a.cancel(),null!=a.owner&&a.owner.remove(a));this._logic.system.setSpeed(0);this._logic.system.hud.callout("timeout",{onComplete:m(this,this.checkForEnding)})},onCharacterScore:function(){this._isEnd=!1;this.increaseScore();if(15<=j.playerScores.get(j.players[j.playerId].name)){var a=W.getAchievementByName("ACHIEVEMENT_DUNK_CHALLENGE_QTY");a.isComplete()||a.complete()}this.checkForEnding()},onBallMissed:function(){this._logic.paused||(this._isEnd=!1,this.checkForEnding())},nextPlayer:function(){this._logic.intro.simplified=
!this._isEnd;this._isEnd?(this._logic.setTimeToBeat(this._logic.levelConfig.time),Db.prototype.nextPlayer.call(this),this._logic.system.hud.scoreboard.setPlayer(),this._logic.system.hud.scoreboard.setHomeScore(0)):this.reset()},increaseScore:function(){Db.prototype.increaseScore.call(this);this._logic.system.hud.scoreboard.setHomeScore(j.playerScores.get(j.players[j.playerId].name))},checkForEnding:function(){this._logic.player.disable();this._isEnd&&j.playerId==j.players.length-1?this._logic.end.init(!0,
!1):this._logic.outro.init(!0,0.4,this._isEnd)},reset:function(){this.changeBasket();this.respawnPlayer();this._logic.gameStarted=!0;this._logic.paused=!1;null!=this._outroConnection&&this._outroConnection.dispose();this._outroConnection=this._logic.outro.onTransition.connect(m(this,this.nextPlayer)).once();0>=this._logic.getTimeLeft()&&this.timeOut()},respawnPlayer:function(){this._logic.player.respawn();this._logic.player.set_ball(this._logic.ball);this._logic.player.targetBasket=this._currentBasket;
ga.__cast(this._logic.system.camera,wf).frame.setSecondaryTarget(y.instance(this._currentBasket._compMap.CameraTargetComponent_9,Se))},changeBasket:function(){null!=this._currentBasket&&this._currentBasket._compMap.Basket_17.hide();this._currentBasket=this._availableBaskets.splice(Math.floor(Math.random()*this._availableBaskets.length),1)[0];0==this._availableBaskets.length&&(this._availableBaskets=this._baskets.slice());for(var a=0,b=this._baskets;a<b.length;){var c=b[a];++a;c==this._currentBasket?
c._compMap.Basket_17.show():c._compMap.Basket_17.hide()}},__class__:Ij});var Jj=function(a){this._checkPath=this._actionDone=!1;this._platformIndex=this._platformLandingCount=0;this._path=[];this._leaderHasDunked=!1;this._timeToBeat=-1;Db.call(this,a);j.playerWords=new N;for(var a=0,b=j.players.length;a<b;){var c=a++;j.playerWords.set(j.players[c].name,0)}};f["game.gameplay.modes.HORSE"]=Jj;Jj.__name__=["game","gameplay","modes","HORSE"];Jj.__super__=Db;Jj.prototype=l(Db.prototype,{init:function(){this._firstInit&&
(this._platforms=this._logic.system.actors.getActorsByComponent(bg));for(var a,b=0,c=this._platforms.length;b<c;){var d=b++;a=this._platforms[d]._compMap.HorsePlatform_3;this._firstInit&&(a.id=d,a.onLand.connect(m(this,this.onPlatformLand)))}Db.prototype.init.call(this);this._logic.setTimeToBeat(this._logic.levelConfig.time);this._logic.intro.onComplete.connect(m(this,this.start));null!=this._loseBallConnection&&this._loseBallConnection.dispose();this._loseBallConnection=this._logic.player.onLoseBall.connect(m(this,
this.onLoseBall));null!=this._dunkStartConnection&&this._dunkStartConnection.dispose();this._dunkStartConnection=this._logic.player.onDunkStart.connect(m(this,this.onDunkStart));null!=this._dunkContactConnection&&this._dunkContactConnection.dispose();this._dunkContactConnection=this._logic.player.onDunkContact.connect(m(this,this.onDunkContact));null!=this._actionConnection&&this._actionConnection.dispose();this._actionConnection=this._logic.player.onStartAction.connect(m(this,this.onStartAction))},
timeOut:function(){this.addFail();this._logic.player.disable();this._logic.ball.setKinetic()},start:function(){this._checkPath=!0;this._actionDone=!1;this.highlightNextToken()},onStartAction:function(){this._actionDone=!0;this._logic.player.disable()},nextPlayer:function(){this._logic.ball.setDynamic();for(var a=this._platformLandingCount=this._platformIndex=0,b=this._path;a<b.length;){var c=b[a];++a;c.reset()}this._forceNextTurn?(this._forceNextTurn=!1,this.nextLeader()):j.playerId<j.players.length-
1?(this.nextPlayerId(),this._logic.swapPlayer(),j.isLeader=!1):this.nextTurn();a=j.playerWords.get(j.players[j.playerId].name);this._logic.system.hud.scoreboard.setPlayer();this._logic.system.hud.scoreboard.setHORSE(a)},nextPlayerId:function(){j.playerId==j.players.length-1&&this.nextTurn();j.playerId++;this.isEliminated(j.playerId)&&this.nextPlayerId()},nextLeader:function(){this.removeIcon();var a=j.players.slice(),b=a.shift();a.push(b);j.players=a;this._platformLandingCount=this._platformIndex=
0;this._path=[];a=0;for(b=this._platforms;a<b.length;){var c=b[a];++a;c._compMap.HorsePlatform_3.reset()}j.turn++;for(j.playerId=0;this.isEliminated(j.playerId);)j.playerId++;this._logic.swapPlayer();j.isLeader=!0},nextTurn:function(){this.nextLeader()},onBallScore:function(){this._logic.gameStarted&&this._checkPath&&(j.isLeader?(this._leaderHasDunked=!1,this.addIcon(),this.increaseScore(),this.checkTokenAchievement()):this._leaderHasDunked?this.addHorse():this._platformLandingCount<this._path.length?
this.addHorse():(this.increaseScore(),p.play("horse_good","sfx")),this.checkForEnding())},onBallMissed:function(){this._logic.gameStarted&&this._checkPath&&(this._logic.ball.interupt(),this.addFail(),this.checkForEnding())},isEliminated:function(a){return 5<=j.playerWords.get(j.players[a].name)?!0:!1},onDunkStart:function(){this.pauseTimer()},onDunkContact:function(a){this._logic.gameStarted&&this._checkPath&&(a.success?(j.isLeader?(this._leaderHasDunked=!0,this.addIcon(),this.increaseScore(),this.checkTokenAchievement()):
this._leaderHasDunked?this._platformLandingCount<this._path.length?this.addHorse():(this.increaseScore(),p.play("horse_good","sfx")):this.addHorse(),u.delayCallTo(m(this,this.checkForEnding),0.1,this._logic.owner)):this.addFail())},onLoseBall:function(){this.pauseTimer()},pauseTimer:function(){null!=this._loseBallConnection&&this._loseBallConnection.dispose();null!=this._dunkStartConnection&&this._loseBallConnection.dispose();this._logic.paused=!0},checkTokenAchievement:function(){for(var a=!0,b=
this._logic.system.actors.getActorsByComponent(bg),c=0;c<b.length;){var d=b[c];++c;if(!d._compMap.HorsePlatform_3.isUsed()){a=!1;break}}a&&(a=W.getAchievementByName("ACHIEVEMENT_ALL_TOKENS"),a.isComplete()||(a.complete(),W.save()))},checkForEnding:function(){if(this._logic.gameStarted){this._logic.player.disable();this.pauseTimer();this._checkPath=!1;for(var a=0,b=0,c=j.players.length;b<c;)this.isEliminated(b++)||a++;j.isLeader&&1>=a?this._logic.end.init(!0,!1):(j.isLeader&&(this._timeToBeat=this._logic.getTimeSpent()),
this._logic.outro.init(!0,0.4,!0))}},addFail:function(){j.isLeader?this._forceNextTurn=!0:this.addHorse();this.checkForEnding()},highlightNextToken:function(){this._path.length<=this._platformIndex||this._path[this._platformIndex].changeState(Va.NEXT)},onPlatformLand:function(a){if(this._checkPath&&!this._logic.paused&&!this._actionDone){this._platformLandingCount++;var b;j.isLeader?(b=a.spawnToken(this._path.length+1),this._path.push(b)):(b=this._path[this._platformIndex],null==b?(this.addHorse(),
this.checkForEnding()):a.hasToken(b)?(b.changeState(Va.GOOD),this._platformIndex++,this.highlightNextToken()):(b.changeState(Va.BAD),this.addHorse(),this.checkForEnding()))}},addIcon:function(){var a=C.getPack("sprites_platforms"),b=this._logic.system.renderer.getLayer("default");this._icon=E.createImage("token_basket",a);a=this._logic.player.targetBasket._compMap.TransformComponent_43;this._icon.centerAnchor().setXY(a.position.x-50,a.position.y-80);b.addChild((new r).add(this._icon));b=E.createText(this._leaderHasDunked?
"TOKEN_DUNK":"TOKEN_SHOOT","25_white_outline",new r);b.setXY(0.5*this._icon.getNaturalWidth(),0.5*this._icon.getNaturalHeight()-0.5*b.getNaturalHeight());b.setAlign(X.Center);this._icon.owner.addChild(b.owner)},removeIcon:function(){null!=this._icon&&(this._icon.owner.dispose(),this._icon=null)},addHorse:function(){p.play("horse_wrong","sfx");var a=j.players[j.playerId].name,b=j.playerWords.get(a);b++;j.playerWords.set(a,b);this._logic.system.hud.scoreboard.setHORSE(b)},__class__:Jj});var Xg=function(a){Ub.call(this,
a);o.autoAim=!0};f["game.gameplay.modes.NormalMode"]=Xg;Xg.__name__=["game","gameplay","modes","NormalMode"];Xg.__super__=Ub;Xg.prototype=l(Ub.prototype,{init:function(){Ub.prototype.init.call(this);this._logic.player.setPlayers(this._logic.teammate,this._logic.opponent1,this._logic.opponent2);this._logic.opponent1.setPlayers(this._logic.opponent2,this._logic.player,this._logic.teammate);j.gameType==Ja.TWO_VERSUS_TWO&&(this._logic.teammate.setPlayers(this._logic.player,this._logic.opponent1,this._logic.opponent2),
this._logic.opponent2.setPlayers(this._logic.opponent1,this._logic.player,this._logic.teammate));this._logic.ball.onScore.connect(m(this,this.onBallScore));this._logic.ball.onMissed.connect(m(this,this.onBallMissed));for(var a=0,b=this._logic.characters;a<b.length;){var c=b[a];++a;c.onScore.connect(m(this,this.onCharacterScore))}},connectBasket:function(){var a=this._logic.system.actors.getActorsByComponent(zf);this._logic.ball.baskets=a;for(var b=0;b<a.length;){var c=a[b];++b;"AWAY_TEAM"==c._compMap.PhysicsComponent_34.contacts?
(this._logic.opponent1.targetBasket=c,j.gameType==Ja.TWO_VERSUS_TWO&&(this._logic.opponent2.targetBasket=c)):"HOME_TEAM"==c._compMap.PhysicsComponent_34.contacts&&(this._logic.player.targetBasket=c,j.gameType==Ja.TWO_VERSUS_TWO&&(this._logic.teammate.targetBasket=c))}},onBallScore:function(a){this._logic.ball.set_intangible(!0);a?(j.config.announcer&&p.play("announcer_bad"+Math.floor(2*Math.random()+1),"ANNOUNCER"),j.awayScore=j.isLongShot?j.awayScore+o.pointPerLongShot:j.awayScore+o.pointPerShortShot,
this._logic.system.hud.scoreboard.setAwayScore(j.awayScore)):(j.isLongShot?(j.config.announcer&&p.play("announcer_nice_shot","ANNOUNCER"),j.homeScore+=o.pointPerLongShot):(j.config.announcer&&p.play("announcer_good"+Math.floor(2*Math.random()+1),"ANNOUNCER"),j.homeScore+=o.pointPerShortShot),this._logic.system.hud.scoreboard.setHomeScore(j.homeScore));j.isLongShot&&this._logic.system.hud.callout("long_shot");this.checkForEnding(!a,!1)},onBallMissed:function(){},onCharacterScore:function(a){var b=
a.dunk.isSuperDunk;a.basket.score(a.dunk);for(var c=0,d=this._logic.characters;c<d.length;){var e=d[c];++c;!a.character.get_isPlayer()&&a.dunk.isSuperDunk&&null!=a.character.owner._compMap.CharacterAI_11&&null!=e.owner._compMap.CharacterAI_11&&e.resetSuperMove()}null==this._logic.htpBoard&&(a.isHome?(j.config.announcer&&p.play("announcer_good"+Math.floor(2*Math.random()+1),"ANNOUNCER"),j.homeScore=a.dunk.isSuperDunk?j.homeScore+o.pointPerMegaDunk:j.homeScore+o.pointPerDunk,this._logic.system.hud.scoreboard.setHomeScore(j.homeScore)):
(j.config.announcer&&p.play("announcer_bad"+Math.floor(2*Math.random()+1),"ANNOUNCER"),j.awayScore=a.dunk.isSuperDunk?j.awayScore+o.pointPerMegaDunk:j.awayScore+o.pointPerDunk,this._logic.system.hud.scoreboard.setAwayScore(j.awayScore)));a.fromPlayer&&(b?(j.config.announcer&&p.play("announcer_special","ANNOUNCER"),j.megaDunks+=1):j.dunks+=1);this.checkForEnding(a.fromPlayer,a.dunk.isSuperDunk);this._logic.onScore.emit(a.fromPlayer)},checkForEnding:function(a,b){j.homeScore>=o.pointPerGame||j.awayScore>=
o.pointPerGame?this._logic.end.init(this._logic.homeWins(),b&&a):this._logic.outro.init(!a,b?1.2:0.4)},__class__:Xg});var Yg=function(a){this._balls=[];this._isEnd=!1;Db.call(this,a);j.playerTimes=new N;for(var a=0,b=j.players.length;a<b;){var c=a++;j.playerTimes.set(j.players[c].name,0)}this.createBalls()};f["game.gameplay.modes.Shootout"]=Yg;Yg.__name__=["game","gameplay","modes","Shootout"];Yg.__super__=Db;Yg.prototype=l(Db.prototype,{init:function(){this._logic.player.canMove=!1;Db.prototype.init.call(this);
this._logic.setTimeToBeat(this._logic.levelConfig.time);for(var a=0,b=this._balls;a<b.length;){var c=b[a];++a;c.setAlpha(1)}null!=this._actionConnection&&this._actionConnection.dispose();this._actionConnection=this._logic.player.onStartAction.connect(m(this,this.onStartAction))},nextPlayer:function(){this.increaseTime();this._logic.intro.simplified=!this._isEnd;if(this._isEnd){if(j.playerScores.get(j.players[j.playerId].name)>=j.maxTurn&&15>this._logic.getTimeSpent()){var a=W.getAchievementByName("ACHIEVEMENT_SHOOTOUT_TIME");
a.isComplete()||a.complete()}j.turn=0;this._logic.setTimeToBeat(this._logic.levelConfig.time);Db.prototype.nextPlayer.call(this);this._logic.system.hud.scoreboard.setPlayer();this._logic.system.hud.scoreboard.setHomeScore(0)}else this.reset();this._logic.player.isEnabled=!0},timeOut:function(){this._isEnd=!0;this._logic.ball.interupt();this._logic.player.state.shoot.cancel();this._logic.player.resetState();this._logic.player.removeBall();this._logic.player.disable();this._logic.system.hud.callout("timeout",
{onComplete:m(this,this.checkForEnding)})},onBallScore:function(){this._logic.paused||(this._isEnd=j.turn>=j.maxTurn-1,this.increaseScore(),this.checkForEnding())},onBallMissed:function(){this._logic.paused||(this._isEnd=j.turn>=j.maxTurn-1,this._logic.ball.interupt(),this.checkForEnding())},increaseScore:function(){Db.prototype.increaseScore.call(this);this._logic.system.hud.scoreboard.setHomeScore(j.playerScores.get(j.players[j.playerId].name))},onStartAction:function(){this._logic.player.disable()},
checkForEnding:function(){j.turn++;this._logic.player.disable();this._logic.gameStarted=!1;this._isEnd&&j.playerId==j.players.length-1?this._logic.end.init(!0,!1):this._logic.outro.init(!0,0.4,this._isEnd)},reset:function(){this._balls[j.turn-1].setAlpha(0);this._logic.player.respawn(this.getNextSpawn(j.turn));this._logic.player.set_ball(this._logic.ball);null!=this._outroConnection&&this._outroConnection.dispose();this._outroConnection=this._logic.outro.onTransition.connect(m(this,this.nextPlayer)).once();
this._isEnd||(this._logic.paused=!1,this._logic.gameStarted=!0);0>=this._logic.getTimeLeft()&&this.timeOut()},createBalls:function(){for(var a=this._logic.system.renderer.getLayer("back"),b=C.getPack("sprites_pack"),c,d=0,e=j.maxTurn-1;d<e;){var h=d++;c=E.createImage("ball_shadow",b);c.setXY(300-50*h,60);a.addChild((new r).add(c));this._balls.push(c)}},getNextSpawn:function(a){var b=this._logic.system.actors.getActorsByTemplate("spawnPoint");if(null==b||b.length<=a)throw"No spawn point found at index "+
a+"!";return b[a]._compMap.TransformComponent_43.position},increaseTime:function(){var a=j.players[j.playerId].name,b=j.playerTimes.get(a),b=b+j.time;j.playerTimes.set(a,b)},__class__:Yg});var Va=f["game.gameplay.platforms.TokenState"]={__ename__:["game","gameplay","platforms","TokenState"],__constructs__:["NEW","NEXT","GOOD","BAD"]};Va.NEW=["NEW",0];Va.NEW.toString=s;Va.NEW.__enum__=Va;Va.NEXT=["NEXT",1];Va.NEXT.toString=s;Va.NEXT.__enum__=Va;Va.GOOD=["GOOD",2];Va.GOOD.toString=s;Va.GOOD.__enum__=
Va;Va.BAD=["BAD",3];Va.BAD.toString=s;Va.BAD.__enum__=Va;Va.__empty_constructs__=[Va.NEW,Va.NEXT,Va.GOOD,Va.BAD];var xe=function(a){this.simplified=!1;this.onComplete=new ka;this._logic=a};f["game.gameplay.states.GameIntro"]=xe;xe.__name__=["game","gameplay","states","GameIntro"];xe.prototype={init:function(){},end:function(){this.onComplete.emit()},__class__:xe};var Kj=function(a){xe.call(this,a)};f["game.gameplay.states.AllStarIntro"]=Kj;Kj.__name__=["game","gameplay","states","AllStarIntro"];Kj.__super__=
xe;Kj.prototype=l(xe.prototype,{init:function(){this._logic.player.respawn(this.getSpawnPointPosition(ga.__instanceof(this._logic.mode,Yg)?j.turn:0),1);this._logic.player.isEnabled=!1;this.start()},start:function(a){null==a&&(a=-800);this._logic.player.set_ball(this._logic.ball);this._logic.system.hud.fadeToGame(0.1);this._logic.system.camera.zoomTo(1);this.simplified?this.end():(u.delayCallTo(function(){I.push("AllStarIntroPopup")},0.1,this._logic.owner),I.onPop.connect(m(this,this.end)).once())},
end:function(){for(var a=0,b=this._logic.characters;a<b.length;){var c=b[a];++a;c.enable()}xe.prototype.end.call(this)},getSpawnPointPosition:function(a){var b=this._logic.system.actors.getActorsByTemplate("spawnPoint");if(null==b||b.length<=a)throw"No spawn point found at index "+a+"!";return b[a]._compMap.TransformComponent_43.position},__class__:Kj});var Lj=function(a){xe.call(this,a)};f["game.gameplay.states.FaceOff"]=Lj;Lj.__name__=["game","gameplay","states","FaceOff"];Lj.__super__=xe;Lj.prototype=
l(xe.prototype,{init:function(a,b){var c=this,d=this.getSpawnPointPosition("HOME_SPAWN_1");this._logic.player.respawn(d,1);var e=this.getSpawnPointPosition("AWAY_SPAWN_1");this._logic.opponent1.respawn(e,-1);a?this._logic.ball.reset(0,0):b?this._logic.ball.reset(d.x,0):this._logic.ball.reset(e.x,0);this._logic.ball.setKinetic();this._logic.player.isEnabled=!1;this._logic.opponent1.isEnabled=!1;this._logic.player.owner.parent.addChild(this._logic.player.owner);j.gameType==Ja.TWO_VERSUS_TWO&&(this._logic.teammate.respawn(this.getSpawnPointPosition("HOME_SPAWN_2"),
1),this._logic.teammate.isEnabled=!1,this._logic.opponent2.respawn(this.getSpawnPointPosition("AWAY_SPAWN_2"),-1),this._logic.opponent2.isEnabled=!1);d=this._logic.system.camera;d.frame.setMainTarget(y.instance(this._logic.ball.owner._compMap.CameraTargetComponent_9,Se));d.centerForFaceoff();a?(d=this._logic.system.hud.callout("faceoff"),this._logic.ball.owner._compMap.Sprite_5.alpha.set__(0),d.onBallThrown.connect(m(this,this.onBallThrown)).once(),u.delayCallTo(function(){c._logic.system.hud.fadeToGame(0.5)},
0.2)):this.start()},onBallThrown:function(){this._logic.ball.owner._compMap.Sprite_5.alpha.set__(1);ga.__cast(this._logic.system.camera,wf).frame.setMainTarget(y.instance(this._logic.player.owner._compMap.CameraTargetComponent_9,Se));this.start(600)},start:function(a){null==a&&(a=-800);this._logic.system.camera.zoomTo(1);this._logic.ball.setDynamic();this._logic.ball.applyForce(0,a);this._logic.ball.set_intangible(!1);for(var a=0,b=this._logic.characters;a<b.length;){var c=b[a];++a;c.enable();null!=
c.owner._compMap.CharacterAI_11&&c.owner._compMap.CharacterAI_11.reset()}this.end()},getSpawnPointPosition:function(a){var b=this._logic.system.actors.getActorsByTags(a);if(null==b||1>b.length)throw"No spawn point '"+a+"' found!";return b[0]._compMap.TransformComponent_43.position},__class__:Lj});var $l=function(a){this._logic=a};f["game.gameplay.states.GameEnd"]=$l;$l.__name__=["game","gameplay","states","GameEnd"];$l.prototype={init:function(a,b){var c=this;this._logic.system.setSpeed(0,1);this._logic.system.parallelScript.run(new Za([new U(1.2),
new ma(function(){c._logic.endGame(a,b)})]))},__class__:$l};var Zl=function(a){this.onComplete=new ka;this.onTransition=new ka;this.onStart=new ka;this._logic=a};f["game.gameplay.states.GameOutro"]=Zl;Zl.__name__=["game","gameplay","states","GameOutro"];Zl.prototype={init:function(a,b,c){null==c&&(c=!1);null==b&&(b=0.4);this._homeBall=a;this._fadeDelay=b;c&&j.isPassNPlay()?(a="nextturn",j.gameMode==Z.HORSE&&5==j.playerWords.get(j.players[j.playerId].name)&&(a="eliminated"),this._logic.system.hud.callout(a,
{onComplete:m(this,this.startSequence)})):this.startSequence();this.onStart.emit()},startSequence:function(){var a=this;this._logic.system.setSpeed(0,1,t.quintInOut);this._logic.system.parallelScript.run(new Za([new U(this._fadeDelay),new ma(function(){a._logic.system.hud.fadeToBlack(0.4)}),new U(0.4),new ma(function(){a.onTransition.emit();a._logic.system.setSpeed(0.7,0);a._logic.system.setSpeed(1,0.7)}),new U(0.1),new ma(function(){ga.__cast(a._logic.system.camera,wf).centerForFaceoff();j.isPassNPlay()||
a._logic.intro.init(!1,a._homeBall);a._logic.system.hud.fadeToGame();a.onComplete.emit()})]))},__class__:Zl};var Di=function(){k.call(this)};f["game.hud.HtpPanel"]=Di;Di.__name__=["game","hud","HtpPanel"];Di.__super__=k;Di.prototype=l(k.prototype,{get_name:function(){return"HtpPanel_93"},onStart:function(){k.prototype.onStart.call(this);this._image=E.createImage("htp_"+j.modeToString(),C.getPack("ui_all_stars"));this._image.centerAnchor();this._image.setXY(575,285);this.owner.addChild((new r).add(this._image));
this._title=E.createText("","36_white",new r);this._title.setXY(600,96);this.owner.addChild(this._title.owner);this._label=E.createText("","21_white",new r);this._label.setWrapWidth(400);this._label.setXY(375,420);this.owner.addChild(this._label.owner);this.show()},onStop:function(){this._label=this._title=this._image=null;k.prototype.onStop.call(this)},show:function(){if(null!=this._image){j.config.announcer&&this.playAnnouncer();var a=Ta.localize(j.players[j.playerId].name).text;switch(j.gameMode[1]){case 3:this._title.setText("HTP_PLAYER_TURN",
{name:a});this._label.setText("HTP_DUNK_CHALLENGE");break;case 4:a=j.isLeader?"1":"2";this._title.setText("HTP_HORSE_TURN_"+a);this._label.setText("HTP_HORSE_"+a);break;case 2:this._title.setText("HTP_PLAYER_TURN",{name:a}),this._label.setText("HTP_SHOOTOUT")}this._title.setAlign(X.Center);this._label.setAlign(X.Center);u.to(this._image,{alpha:1},0.35,t.quadOut)}},playAnnouncer:function(){p.play("announcer_"+j.players[j.playerId].name," ANNOUNCER").get_complete().get_changed().connect(m(this,this.playAnnouncerHtp)).once()},
playAnnouncerHtp:function(){var a="turn";j.gameMode==Z.HORSE&&(a=j.isLeader?"htp_horse_leader":"htp_horse_follower");p.play("announcer_"+a," ANNOUNCER")},__class__:Di});var Mj=function(){this._itemCount=0;k.call(this)};f["game.hud.Hud"]=Mj;Mj.__name__=["game","hud","Hud"];Mj.__super__=k;Mj.prototype=l(k.prototype,{get_name:function(){return"Hud_27"},onAdded:function(){this.pack=C.getPack("ui_hud");this.gameOverlay=new r;this.owner.addChild(this.gameOverlay);this.container=new r;this.container.add(new A);
this.owner.addChild(this.container);this._disposer=new xb;this.owner.addChild((new r).add(this._disposer));this.build();this._blackScreen=new eb(0,o.width,o.height);this.gameOverlay.add(this._blackScreen);this._blackScreen.alpha.set__(1)},onStop:function(){this._disposer=this.shootBar=this.supergauge=this.scoreboard=this._pauseButton=this.container=this.pack=null;null!=this._blackScreen&&this._blackScreen.dispose();this.removeCallout(this._currentCallout);for(var a=this._callouts.iterator();a.hasNext();)a.next().dispose();
this._callouts=this._currentCallout=null;k.prototype.onStop.call(this)},build:function(){this._pauseButton=E.createButton(m(this,this.onPauseClick),"btn_pause",null,null,this.pack);this._pauseButton.centerAnchor().setXY(o.width-50,50);this.addSprite(this._pauseButton);this.supergauge=new Nj(this.pack);this.addSprite(this.supergauge);this.setSuperMove(0);this.shootBar=new Oj;this.shootBar.setXY(0.5*o.width,o.height-35);this.addSprite(this.shootBar);this.buildCallouts()},setSuperMove:function(a){this.supergauge.set_value(a)},
onPauseClick:function(){aa.trackUI("PAUSE","Gameplay");I.push("Pause")},addSprite:function(a,b){null==b&&(b=this.container);b.addChild((new r).add(a),!1);var c=a.owner._compMap.Sprite_5;null!=c&&(c.y._value<o.height/2?Math.random():Math.random(),c.y.animateTo(c.y._value,1.5+0.2*this._itemCount,t.elasticOut));this._itemCount++;return a},hitTest:function(a,b,c){return A.hitTest(this.container,b,c)==a?!0:!1},buildCallouts:function(){null==this._callouts&&(this._callouts=new N,this._callouts.set("faceoff",
new Ti),this._callouts.set("missed",new Vi),this._callouts.set("superdunk",new Zi),this._callouts.set("score",new Yi),this._callouts.set("dunkbreaker",new Qi),this._callouts.set("posterized",new Xi),this._callouts.set("dunkality",new Ri),this._callouts.set("nextturn",new Wi),this._callouts.set("timeout",new $i),this._callouts.set("eliminated",new Si),this._callouts.set("long_shot",new Ui));this._calloutEntity=this.owner},callout:function(a,b){this.removeCallout(this._currentCallout);this._currentCallout=
this._callouts.get(a);if(null==this._currentCallout)throw"Callout not found: '"+a+"'";null==this._currentCallout.owner&&(new r).add(this._currentCallout);this._calloutEntity.addChild(this._currentCallout.owner);this._currentCallout.setXY(0.5*o.width,0.5*o.height);this._currentCallout.complete.connect(m(this,this.onCalloutComplete)).once();this._currentCallout.start(b);return this._currentCallout},onCalloutComplete:function(){this.removeCallout(this._currentCallout);this._currentCallout=null},removeCallout:function(a){null!=
a&&null!=a.owner&&null!=a.owner.parent&&a.owner.parent.removeChild(a.owner)},fadeToBlack:function(a){null==a&&(a=0.5);this.gameOverlay.add(this._blackScreen);this._blackScreen.setAlpha(0);this._blackScreen.alpha.animateTo(1,a,t.quintInOut);return this._blackScreen},fadeToGame:function(a){null==a&&(a=0.5);var b=this;this._blackScreen.alpha.animateTo(0,a,t.quintInOut);u.delayCallTo(function(){b.gameOverlay.remove(b._blackScreen)},a,this.gameOverlay);return this._blackScreen},showScoreboard:function(){this.scoreboard.owner._compMap.Sprite_5.alpha.animateTo(1,
0.5)},__class__:Mj});var Nj=function(a){this._value=-1;Da.call(this);this.pack=a};f["game.hud.HudSpecial"]=Nj;Nj.__name__=["game","hud","HudSpecial"];Nj.__super__=Da;Nj.prototype=l(Da.prototype,{onAdded:function(){Da.prototype.onAdded.call(this);this._bg=E.createImage("prog_bar_bg",this.pack);this._bg.centerAnchor().setXY(795,o.getModifiedHeight()-55);this._bg.disablePointer();this.addSprite(this._bg);this._bar=E.createImage("prog_bar",this.pack);this._bar.centerAnchor().setXY(this._bg.x._value,this._bg.y._value);
this._bar.disablePointer();this._bar.scissor=new id(0,0,this._bar.getNaturalWidth(),this._bar.getNaturalHeight());this.addSprite(this._bar);x._platform.getTouch().get_supported()||(this._button=E.createImage("btn_dunk",this.pack),this._button.centerAnchor().setXY(882,o.getModifiedHeight()-69),this.addSprite(this._button));this.set_value(0)},set_value:function(a){if(a==this._value)return this._value;this._bar.scissor.width=this._value*this._bar.getNaturalWidth();1<=a?(p.play("super_ready","HUD"),this._bar.alpha.set_behavior(new Cc(0.4,
0.9,0.4))):this._bar.alpha.set__(1);return this._value=a},__class__:Nj,__properties__:l(Da.prototype.__properties__,{set_value:"set_value"})});var Oj=function(){this._visible=!1;this._halfWidth=this._goodWidth=this._movementRatio=this._offset=0;this.indicatorRandomStart=!1;this.minPosition=this.maxPosition=0.5;this.goodSize=0.2;this.speed=1.5;Da.call(this)};f["game.hud.ShootBar"]=Oj;Oj.__name__=["game","hud","ShootBar"];Oj.__super__=Da;Oj.prototype=l(Da.prototype,{onStart:function(){Da.prototype.onStart.call(this);
var a=C.getPack("ui_hud");this._bg=E.createImage("charge_bg",a);this._bg.centerAnchor();this._bg.disablePointer();this.addChild((new r).add(this._bg));this._barGood=E.createImage("charge_bar",a);this._barGood.centerAnchor();var b=this._barGood.y;b.set__(b._value-1);this._barGood.setScaleXY(0.15,1);this.addChild((new r).add(this._barGood));this._indicator=E.createImage("charge_indicator",a);this._indicator.centerAnchor();this.addChild((new r).add(this._indicator));this._halfWidth=0.5*this._bg.getNaturalWidth()-
5;this._position=new Cc(-this._halfWidth,this._halfWidth,this.speed);this.alpha.set__(0);this.configure()},onUpdate:function(a){Da.prototype.onUpdate.call(this,a);this.alpha.update(a);this._visible&&(this._indicator.x.set__(this._position.update(a)),null!=this.movement&&(this._offset=this._barGood.getNaturalWidth()*(this._movementRatio*this.movement.progress._value+this.minPosition)-this._halfWidth,this._barGood.x.set__(this._offset)))},show:function(){this._visible||(this.getBasketOffset(),this._barGood.setScaleXY(this.goodSize,
1),this._goodWidth=0.5*this._barGood.getNaturalWidth()*this.goodSize,this.indicatorRandomStart?this._position.update(2*Math.random()*this.speed):this._position=new Cc(-this._halfWidth+25,this._halfWidth-25,this.speed),this.alpha.animateTo(1,0.2,t.quadOut),this._visible=!0)},hide:function(){this._visible&&(this.alpha.animateTo(0,0.2,t.quadOut),this._visible=!1)},isGood:function(){return Math.abs(this._indicator.x._value-this._offset)<this._goodWidth},configure:function(){var a=Kg.levels.get(j.currentLevel).shoot;
null!=a?(this.speed=a.speed,this.minPosition=a.minPosition,this.maxPosition=a.maxPosition,this.indicatorRandomStart=a.indicatorRandomStart):null;this._movementRatio=this.maxPosition-this.minPosition},getBasketOffset:function(){return null!=this.movement&&this.minPosition<this.maxPosition?(this.maxPosition-this.minPosition)*this.movement.progress._value:0},__class__:Oj});var Wl=function(){};f["game.ui.htp.TutorialPages"]=Wl;Wl.__name__=["game","ui","htp","TutorialPages"];var Ei=function(a){this._index=
-1;this._index=a;k.call(this)};f["game.ui.widget.AllStarPlayer"]=Ei;Ei.__name__=["game","ui","widget","AllStarPlayer"];Ei.__super__=k;Ei.prototype=l(k.prototype,{get_name:function(){return"AllStarPlayer_92"},onAdded:function(){k.prototype.onAdded.call(this);this._pack=C.getPack("ui_all_stars");var a=j.players[this._index],b=this._index==j.playerId;this._bg=b?E.createImage("bar_orange",this._pack):E.createImage("bar_black",this._pack);this._bg.setAnchor(0,0.5);this._bg.setXY(0,85*this._index+35);this.owner.addChild((new r).add(this._bg));
b&&(this._selection=E.createImage("selected",this._pack),this._selection.centerAnchor(),this._selection.setXY(10,0.5*this._bg.getNaturalHeight()),this._bg.owner.addChild((new r).add(this._selection)));this._character=new Qe(a);this._character.setScale(0.75);this._character.setXY(10,0.5*this._bg.getNaturalHeight());this._bg.owner.addChild((new r).add(this._character));this._name=E.createText(a.name,"17_blue",new r);this._name.setXY(70,10);this._bg.owner.addChild(this._name.owner);j.gameMode==Z.HORSE?
this.showHorse():this.showScore()},showHorse:function(){for(var a=j.playerWords.get(j.players[this._index].name),b,c=0;5>c;){var d=c++;b=E.createText("HUD_HORSE_"+d,"25_white_outline",new r);d>=a&&b.setAlpha(0.5);b.setXY(30*d+70,40);this._bg.owner.addChild(b.owner)}},showScore:function(){var a=j.playerScores.get(j.players[this._index].name);E.createTextSprite(null==a?"null":""+a,"25_white_outline",this._bg.owner).setXY(70,40)},__class__:Ei});var Cd=function(a,b,c,d,e){null==e&&(e="buttons");null==
d&&(d="");this._centered=this._hadDown=!1;this._textID=this._fontStyle="";this._state=ha.up;this.onDownCallback=this.onUpCallback=null;this.onChange=new O;this.onDown=new O;this.onUp=new O;this.onClick=new O;this.pressAnimation=Um.bounceDownTemplate;this.clickNeedsDown=this.upClick=!0;this.data={};this.index=-1;this.isSelected=this.isDisabled=!1;A.call(this);null==a&&(a=E.get_sharedAssets());this._pack=a;this._disposer=new xb;this.updateTexture(b);null!=c&&this._disposer.add(this.onClick.connect(c));
this._textID=d;this._fontStyle=e};f["stolo.ui.Button"]=Cd;Cd.__name__=["stolo","ui","Button"];Cd.__super__=A;Cd.prototype=l(A.prototype,{onAdded:function(){this.owner.add(this._disposer);this.build();null==this.origin&&this.updateOrigin()},onRemoved:function(){u.kill(this);A.prototype.onRemoved.call(this);this.pressAnimation=this.onChange=this.onDown=this.onUp=this.onClick=this.onUpCallback=this.onDownCallback=this._disposer=this.origin=this._pack=this._downTexture=this._texture=this.display=null},
setXY:function(a,b){A.prototype.setXY.call(this,a,b);this.updateOrigin();return this},updateOrigin:function(){null==this.origin&&(this.origin=new jb(this.x._value,this.y._value));this.origin.x=this.x._value;this.origin.y=this.y._value},build:function(){if(null!=this.display)throw"This button was already added into an Entity.";this.display=new ta(this._texture);this.owner.addChild((new r).add(this.display));this._centered&&this.display.centerAnchor();this._disposer.add(x._platform.getPointer().up.connect(m(this,
this.onStageUp)));""!=this._textID&&this.createLabel()},createLabel:function(){this.label=new uc(this._textID,this._fontStyle);this.label.setAlign(X.Center);this.owner.addChild((new r).add(this.label));var a=A.getBounds(this.owner);this.label.centerAnchor().setXY(0.5*a.width+0.5*this.label.getNaturalWidth(),0.5*a.height)},updateUpTexture:function(a){this._texture=a},updateTexture:function(a){null!=a&&(this._texture=E.getTexture(a,this._pack),this._downTexture=E.getTexture(a+"_pressed",this._pack,
!1),this._disabledTexture=E.getTexture(a+"_disabled",this._pack,!1),this._selectedTexture=E.getTexture(a+"_selected",this._pack,!1))},updateState:function(a,b){switch(a[1]){case 1:b=this._downTexture;this.PressedAnimation();break;case 2:b=this._selectedTexture;break;case 4:b=this._disabledTexture;break;default:if(this.isDisabled)return this.updateState(ha.disabled);if(this.isSelected)return this.updateState(ha.selected);b=this._texture}null==b&&(b=this._texture);this.display.texture=b;this._state!=
a&&this._state},PressedAnimation:function(){null!=this.pressAnimation&&(this.setXY(this.origin.x,this.origin.y),u.runTemplate(this.pressAnimation,this))},centerAnchor:function(){null!=this.display&&this.display.centerAnchor();this._centered=!0;return this},getNaturalWidth:function(){return this.owner.firstChild._compMap.Sprite_5.getNaturalWidth()},getNaturalHeight:function(){return this.owner.firstChild._compMap.Sprite_5.getNaturalHeight()},onStageUp:function(){this._hadDown&&this.updateState(ha.up);
this._hadDown=!1},disable:function(){this.isSelected||(this.isDisabled=!0,this.updateState(ha.disabled),this.onChange.emit(this))},enable:function(){this.isDisabled&&(this.isDisabled=!1,this.updateState(ha.up),this.onChange.emit(this))},select:function(){this.isSelected||(this.isSelected=!0,this.updateState(ha.selected),this.onChange.emit(this))},deselect:function(){this.isSelected&&(this.isSelected=!1,this.updateState(ha.up),this.onChange.emit(this))},onPointerDown:function(a){if(!this.isDisabled){A.prototype.onPointerDown.call(this,
a);this._hadDown=!0;a._stopped=!0;this.updateState(ha.pressed);this.onDown.emit(this);if(null!=this.onDownCallback)this.onDownCallback(a);this.upClick||this.dispatchClick()}},onPointerUp:function(a){if(!this.isDisabled&&(A.prototype.onPointerUp.call(this,a),!this.clickNeedsDown||this._hadDown)){this.updateState(ha.up);this.onUp.emit(this);if(null!=this.onUpCallback)this.onUpCallback(a);this.upClick&&this.dispatchClick();this._hadDown=!1}},dispatchClick:function(){this.onClick.emit(this)},__class__:Cd});
var Qe=function(a,b){this._data=a;this._pack=C.getPack("ui");Cd.call(this,this._pack,"btn_"+a.team,b)};f["game.ui.widget.CharacterButton"]=Qe;Qe.__name__=["game","ui","widget","CharacterButton"];Qe.__super__=Cd;Qe.prototype=l(Cd.prototype,{onAdded:function(){Cd.prototype.onAdded.call(this);var a=new r;this._portrait=E.createImage(this._data.name,this._pack);this._portrait.centerAnchor();this._portrait.set_pointerEnabled(!1);this._portrait.setXY(-3,-14);this.owner.addChild(a.add(this._portrait));this.centerAnchor()},
changeCharacter:function(a){this._data=a;this.updateTexture("btn_"+a.team);this.updateState(ha.up);this._portrait.texture=E.getTexture(a.name,this._pack)},dispose:function(){this._portrait=this._pack=this._data=null;Cd.prototype.dispose.call(this)},enable:function(){null!=this._portrait&&this._portrait.setAlpha(1);Cd.prototype.enable.call(this)},disable:function(){null!=this._portrait&&this._portrait.setAlpha(0.5);Cd.prototype.disable.call(this)},__class__:Qe});var Lg=function(a){this._id=a;this._pack=
C.getPack("ui");ta.call(this,E.getTexture("circle_selected",this._pack))};f["game.ui.widget.PlayerTag"]=Lg;Lg.__name__=["game","ui","widget","PlayerTag"];Lg.__super__=ta;Lg.prototype=l(ta.prototype,{onAdded:function(){ta.prototype.onAdded.call(this);this._label=E.createText("PLAYER_ID","25_white_outline",this.owner,{id:this._id});this._label.setAlign(X.Center);this._label.setXY(0.5*this.getNaturalWidth()-2,8)},setActive:function(a){this.texture=E.getTexture("circle"+(a?"_selected":""),this._pack);
this._label.applyFontStyle(S.getFontStyle(a?"25_white_outline":"25_black"));this._label.setAlign(X.Center);this._label.y.set__(a?8:10)},__class__:Lg});var Ki=function(a){this._team=a;A.call(this)};f["game.ui.widget.Poster"]=Ki;Ki.__name__=["game","ui","widget","Poster"];Ki.__super__=A;Ki.prototype=l(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);this.unlocked=j.save.isPosterUnlocked(this._team);var a=C.getPack("ui_posters"),b=E.createImage("frame",a);b.centerAnchor().setXY(19,8);this.owner.addChild((new r).add(b));
this.unlocked?(a=C.getPack("posters_preview"),a=E.createImage(this._team,a)):a=E.createImage("locked",a);a.centerAnchor();this.owner.addChild((new r).add(a))},__class__:Ki});var Ii=function(){this._ready=!1;this._stats=new Xf;k.call(this)};f["game.ui.widget.StatsScroller"]=Ii;Ii.__name__=["game","ui","widget","StatsScroller"];Ii.__super__=k;Ii.prototype=l(k.prototype,{get_name:function(){return"StatsScroller_96"},onAdded:function(){k.prototype.onAdded.call(this);var a=C.getPack("ui_stats");this._uiPack=
C.getPack("ui");var b=0;this._nbStats=ja.allEnums(B).length;for(var c=0,d=ja.allEnums(B);c<d.length;){var e=d[c];++c;var h=this.createStat(e,b++);this._stats.set(e,h)}b=E.createImage("mask_top",a);b.setXY(o.width-b.getNaturalWidth(),0);this.owner.addChild((new r).add(b));c=E.createImage("mask_bottom",a);c.setXY(o.width-b.getNaturalWidth(),o.height-c.getNaturalHeight());this.owner.addChild((new r).add(c));this._bg=E.createImage("logo_name_bg",a);this._bg.setXY(645,59);this.owner.addChild((new r).add(this._bg));
this._logo=E.createImage(Ha.TMNT_1);this._logo.centerAnchor().setXY(48,45).setScale(0.8);this._bg.owner.addChild((new r).add(this._logo));this._name=E.createText(j.player.name,"21_white",new r);this._name.setXY(110,38);this._bg.owner.addChild((new r).add(this._name));this._ready=!0},init:function(a){if(this._ready){this._logo.texture=E.getTexture(a.team,this._uiPack);this._name.setText(a.name);for(var b=1,c=this._stats.iterator();c.hasNext();){var d=c.next();d.updateValue(a.name);d.y.set__(175+60*
b);b++}}},onUpdate:function(a){k.prototype.onUpdate.call(this,a);for(var b=this._stats.iterator();b.hasNext();){var c=b.next(),d=c.y;d.set__(d._value-40*a);150>c.y._value&&c.y.set__(150+60*this._nbStats)}},createStat:function(a,b){var c=new Pj;c.type=a;c.setXY(695,175+60*(b+1));this.owner.addChild((new r).add(c));return c},__class__:Ii});var Pj=function(){Da.call(this)};f["game.ui.widget.StatValue"]=Pj;Pj.__name__=["game","ui","widget","StatValue"];Pj.__super__=Da;Pj.prototype=l(Da.prototype,{onAdded:function(){Da.prototype.onAdded.call(this);
this._value=E.createTextSprite("0","36_white",new r);this._value.setXY(25,-15);this._value.setAlign(X.Center);this.owner.addChild(this._value.owner);this._label=E.createText("STATS_"+y.string(this.type),"17_blue",new r);this._label.setXY(50,0);this.owner.addChild(this._label.owner)},updateValue:function(a){this._value.set_text(y.string(j.save.getStats(a,this.type)))},__class__:Pj});var yi=function(a){ta.call(this,a)};f["game.ui.widget.WinBanner"]=yi;yi.__name__=["game","ui","widget","WinBanner"];
yi.__super__=ta;yi.prototype=l(ta.prototype,{init:function(a,b){this._score=E.createTextSprite(null==a?"null":""+a,"50_white_shadow",new r);this._score.setXY(73,215);this._score.setAlign(X.Center);this.owner.addChild(this._score.owner);this._position=E.createTextSprite(null==b?"null":""+b,1==b?"50_white_shadow":"36_white",new r);this._position.setXY(70,125);this._position.setAlign(X.Right);this.owner.addChild(this._position.owner);this._positionSuffix=E.createText("POSITION_"+b,"21_white",new r);
this._positionSuffix.setXY(75,130);this.owner.addChild(this._positionSuffix.owner)},__class__:yi});var Kc=f["haxe.StackItem"]={__ename__:["haxe","StackItem"],__constructs__:["CFunction","Module","FilePos","Method","LocalFunction"]};Kc.CFunction=["CFunction",0];Kc.CFunction.toString=s;Kc.CFunction.__enum__=Kc;Kc.Module=function(a){a=["Module",1,a];a.__enum__=Kc;a.toString=s;return a};Kc.FilePos=function(a,b,c){a=["FilePos",2,a,b,c];a.__enum__=Kc;a.toString=s;return a};Kc.Method=function(a,b){var c=
["Method",3,a,b];c.__enum__=Kc;c.toString=s;return c};Kc.LocalFunction=function(a){a=["LocalFunction",4,a];a.__enum__=Kc;a.toString=s;return a};Kc.__empty_constructs__=[Kc.CFunction];var Dd=function(){};f["haxe.CallStack"]=Dd;Dd.__name__=["haxe","CallStack"];Dd.callStack=function(){var a=Error.prepareStackTrace;Error.prepareStackTrace=function(a,b){for(var e=[],h=0;h<b.length;){var n=b[h];++h;var g=null,f=n.getFunctionName();if(null!=f){var i=f.lastIndexOf(".");0<=i&&(g=Q.substr(f,0,i),f=Q.substr(f,
i+1,null),g=Kc.Method(g,f))}e.push(Kc.FilePos(g,n.getFileName(),n.getLineNumber()))}return e};var b=Dd.makeStack(Error().stack);b.shift();Error.prepareStackTrace=a;return b};Dd.exceptionStack=function(){return[]};Dd.toString=function(a){for(var b=new Je,c=0;c<a.length;){var d=a[c];++c;b.b+="\nCalled from ";Dd.itemToString(b,d)}return b.b};Dd.itemToString=function(a,b){switch(b[1]){case 0:a.b+="a C function";break;case 1:var c=b[2];a.b+="module ";a.b=null==c?a.b+"null":a.b+(""+c);break;case 2:var c=
b[4],d=b[3],e=b[2];null!=e&&(Dd.itemToString(a,e),a.b+=" (");a.b=null==d?a.b+"null":a.b+(""+d);a.b+=" line ";a.b=null==c?a.b+"null":a.b+(""+c);null!=e&&(a.b+=")");break;case 3:c=b[3];d=b[2];a.b=null==d?a.b+"null":a.b+(""+d);a.b+=".";a.b=null==c?a.b+"null":a.b+(""+c);break;case 4:c=b[2],a.b+="local function #",a.b=null==c?a.b+"null":a.b+(""+c)}};Dd.makeStack=function(a){if("string"==typeof a){for(var a=a.split("\n"),b=[],c=0;c<a.length;){var d=a[c];++c;b.push(Kc.Module(d))}return b}return a};var bh=
function(a){this.url=a;this.headers=new $d;this.params=new $d;this.async=!0};f["haxe.Http"]=bh;bh.__name__=["haxe","Http"];bh.prototype={addHeader:function(a,b){this.headers.push({header:a,value:b});return this},setPostData:function(a){this.postData=a;return this},request:function(a){var b=this;b.responseData=null;var c=this.req=Mh.createXMLHttpRequest(),d=function(){if(4==c.readyState){var a;try{a=c.status}catch(d){a=null}void 0==a&&(a=null);if(null!=a)b.onStatus(a);if(null!=a&&200<=a&&400>a)b.req=
null,b.onData(b.responseData=c.responseText);else if(null==a)b.req=null,b.onError("Failed to connect or resolve host");else switch(a){case 12029:b.req=null;b.onError("Failed to connect to host");break;case 12007:b.req=null;b.onError("Unknown host");break;default:b.req=null,b.responseData=c.responseText,b.onError("Http Error #"+c.status)}}};this.async&&(c.onreadystatechange=d);var e=this.postData;if(null!=e)a=!0;else for(var h=this.params.iterator();h.hasNext();)var n=h.next(),e=null==e?"":e+"&",e=
e+(encodeURIComponent(n.param)+"="+encodeURIComponent(n.value));try{if(a)c.open("POST",this.url,this.async);else if(null!=e){var g=1>=this.url.split("?").length;c.open("GET",this.url+(g?"?":"&")+e,this.async);e=null}else c.open("GET",this.url,this.async)}catch(f){b.req=null;this.onError(f.toString());return}!of.exists(this.headers,function(a){return"Content-Type"==a.header})&&a&&null==this.postData&&c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(a=this.headers.iterator();a.hasNext();)h=
a.next(),c.setRequestHeader(h.header,h.value);c.send(e);this.async||d(null)},onData:function(){},onError:function(){},onStatus:function(){},__class__:bh};var se=function(){this.buf=new Je;this.cache=[];this.useCache=se.USE_CACHE;this.useEnumIndex=se.USE_ENUM_INDEX;this.shash=new N;this.scount=0};f["haxe.Serializer"]=se;se.__name__=["haxe","Serializer"];se.prototype={toString:function(){return this.buf.b},serializeString:function(a){var b=this.shash.get(a);null!=b?(this.buf.b+="R",this.buf.b=null==
b?this.buf.b+"null":this.buf.b+(""+b)):(this.shash.set(a,this.scount++),this.buf.b+="y",a=encodeURIComponent(a),this.buf.b=null==a.length?this.buf.b+"null":this.buf.b+(""+a.length),this.buf.b+=":",this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a))},serializeRef:function(a){for(var b=typeof a,c=0,d=this.cache.length;c<d;){var e=c++,h=this.cache[e];if(typeof h==b&&h==a)return this.buf.b+="r",this.buf.b=null==e?this.buf.b+"null":this.buf.b+(""+e),!0}this.cache.push(a);return!1},serializeFields:function(a){for(var b=
0,c=w.fields(a);b<c.length;){var d=c[b];++b;this.serializeString(d);this.serialize(w.field(a,d))}this.buf.b+="g"},serialize:function(a){var b=ja["typeof"](a);switch(b[1]){case 0:this.buf.b+="n";break;case 1:if(0==a){this.buf.b+="z";break}this.buf.b+="i";this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a);break;case 2:Math.isNaN(a)?this.buf.b+="k":Math.isFinite(a)?(this.buf.b+="d",this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a)):this.buf.b=0>a?this.buf.b+"m":this.buf.b+"p";break;case 3:this.buf.b=
a?this.buf.b+"t":this.buf.b+"f";break;case 6:b=b[2];if(b==String){this.serializeString(a);break}if(this.useCache&&this.serializeRef(a))break;switch(b){case Array:b=0;this.buf.b+="a";for(var c=a.length,d=0;d<c;){var e=d++;null==a[e]?b++:(0<b&&(1==b?this.buf.b+="n":(this.buf.b+="u",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)),b=0),this.serialize(a[e]))}0<b&&(1==b?this.buf.b+="n":(this.buf.b+="u",this.buf.b=null==b?this.buf.b+"null":this.buf.b+(""+b)));this.buf.b+="h";break;case $d:this.buf.b+=
"l";for(a=a.iterator();a.hasNext();)this.serialize(a.next());this.buf.b+="h";break;case Date:this.buf.b+="v";this.buf.add(Q.dateStr(a));break;case N:this.buf.b+="b";for(b=a.keys();b.hasNext();)c=b.next(),this.serializeString(c),this.serialize(a.get(c));this.buf.b+="h";break;case Dc:this.buf.b+="q";for(b=a.keys();b.hasNext();)c=b.next(),this.buf.b+=":",this.buf.b=null==c?this.buf.b+"null":this.buf.b+(""+c),this.serialize(a.get(c));this.buf.b+="h";break;case Bb:this.buf.b+="M";for(b=a.keys();b.hasNext();)c=
b.next(),d=w.field(c,"__id__"),w.deleteField(c,"__id__"),this.serialize(c),c.__id__=d,this.serialize(a.h[c.__id__]);this.buf.b+="h";break;case Sd:d=0;e=a.length-2;b=new Je;for(c=se.BASE64;d<e;){var h=a.get(d++),n=a.get(d++),g=a.get(d++);b.add(c.charAt(h>>2));b.add(c.charAt((h<<4|n>>4)&63));b.add(c.charAt((n<<2|g>>6)&63));b.add(c.charAt(g&63))}d==e?(e=a.get(d++),a=a.get(d++),b.add(c.charAt(e>>2)),b.add(c.charAt((e<<4|a>>4)&63)),b.add(c.charAt(a<<2&63))):d==e+1&&(a=a.get(d++),b.add(c.charAt(a>>2)),
b.add(c.charAt(a<<4&63)));a=b.b;this.buf.b+="s";this.buf.b=null==a.length?this.buf.b+"null":this.buf.b+(""+a.length);this.buf.b+=":";this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a);break;default:this.useCache&&this.cache.pop(),null!=a.hxSerialize?(this.buf.b+="C",this.serializeString(ja.getClassName(b)),this.useCache&&this.cache.push(a),a.hxSerialize(this),this.buf.b+="g"):(this.buf.b+="c",this.serializeString(ja.getClassName(b)),this.useCache&&this.cache.push(a),this.serializeFields(a))}break;
case 4:if(this.useCache&&this.serializeRef(a))break;this.buf.b+="o";this.serializeFields(a);break;case 7:b=b[2];if(this.useCache){if(this.serializeRef(a))break;this.cache.pop()}this.buf.b=this.useEnumIndex?this.buf.b+"j":this.buf.b+"w";this.serializeString(ja.getEnumName(b));this.useEnumIndex?(this.buf.b+=":",this.buf.b+=y.string(a[1])):this.serializeString(a[0]);this.buf.b+=":";b=a.length;this.buf.b+=y.string(b-2);for(c=2;c<b;)d=c++,this.serialize(a[d]);this.useCache&&this.cache.push(a);break;case 5:throw"Cannot serialize function";
default:throw"Cannot serialize "+y.string(a);}},__class__:se};var ze=function(a){var b=this;this.id=setInterval(function(){b.run()},a)};f["haxe.Timer"]=ze;ze.__name__=["haxe","Timer"];ze.delay=function(a,b){var c=new ze(b);c.run=function(){c.stop();a()};return c};ze.stamp=function(){return(new Date).getTime()/1E3};ze.prototype={stop:function(){null!=this.id&&(clearInterval(this.id),this.id=null)},run:function(){},__class__:ze};var qc=function(a){this.buf=a;this.length=a.length;this.pos=0;this.scache=
[];this.cache=[];a=qc.DEFAULT_RESOLVER;null==a&&(a=ja,qc.DEFAULT_RESOLVER=a);this.setResolver(a)};f["haxe.Unserializer"]=qc;qc.__name__=["haxe","Unserializer"];qc.initCodes=function(){for(var a=[],b=0,c=qc.BASE64.length;b<c;){var d=b++;a[qc.BASE64.charCodeAt(d)]=d}return a};qc.run=function(a){return(new qc(a)).unserialize()};qc.prototype={setResolver:function(a){this.resolver=null==a?{resolveClass:function(){return null},resolveEnum:function(){return null}}:a},get:function(a){return this.buf.charCodeAt(a)},
readDigits:function(){for(var a=0,b=!1,c=this.pos;;){var d=this.buf.charCodeAt(this.pos);if(d!=d)break;if(45==d){if(this.pos!=c)break;b=!0}else{if(48>d||57<d)break;a=10*a+(d-48)}this.pos++}b&&(a*=-1);return a},unserializeObject:function(a){for(;;){if(this.pos>=this.length)throw"Invalid object";if(103==this.buf.charCodeAt(this.pos))break;var b=this.unserialize();if("string"!=typeof b)throw"Invalid object key";var c=this.unserialize();a[b]=c}this.pos++},unserializeEnum:function(a,b){if(58!=this.get(this.pos++))throw"Invalid enum format";
var c=this.readDigits();if(0==c)return ja.createEnum(a,b);for(var d=[];0<c--;)d.push(this.unserialize());return ja.createEnum(a,b,d)},unserialize:function(){switch(this.get(this.pos++)){case 110:return null;case 116:return!0;case 102:return!1;case 122:return 0;case 105:return this.readDigits();case 100:for(var a=this.pos;;){var b=this.buf.charCodeAt(this.pos);if(43<=b&&58>b||101==b||69==b)this.pos++;else break}return y.parseFloat(Q.substr(this.buf,a,this.pos-a));case 121:a=this.readDigits();if(58!=
this.get(this.pos++)||this.length-this.pos<a)throw"Invalid string length";b=Q.substr(this.buf,this.pos,a);this.pos+=a;b=decodeURIComponent(b.split("+").join(" "));this.scache.push(b);return b;case 107:return Math.NaN;case 109:return Math.NEGATIVE_INFINITY;case 112:return Math.POSITIVE_INFINITY;case 97:a=[];for(this.cache.push(a);;){b=this.buf.charCodeAt(this.pos);if(104==b){this.pos++;break}117==b?(this.pos++,b=this.readDigits(),a[a.length+b-1]=null):a.push(this.unserialize())}return a;case 111:return a=
{},this.cache.push(a),this.unserializeObject(a),a;case 114:a=this.readDigits();if(0>a||a>=this.cache.length)throw"Invalid reference";return this.cache[a];case 82:a=this.readDigits();if(0>a||a>=this.scache.length)throw"Invalid string reference";return this.scache[a];case 120:throw this.unserialize();case 99:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw"Class not found "+a;a=ja.createEmptyInstance(b);this.cache.push(a);this.unserializeObject(a);return a;case 119:a=this.unserialize();
b=this.resolver.resolveEnum(a);if(null==b)throw"Enum not found "+a;a=this.unserializeEnum(b,this.unserialize());this.cache.push(a);return a;case 106:a=this.unserialize();b=this.resolver.resolveEnum(a);if(null==b)throw"Enum not found "+a;this.pos++;var c=this.readDigits(),d=ja.getEnumConstructs(b)[c];if(null==d)throw"Unknown enum index "+a+"@"+c;a=this.unserializeEnum(b,d);this.cache.push(a);return a;case 108:a=new $d;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)a.add(this.unserialize());
this.pos++;return a;case 98:a=new N;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 113:a=new Dc;this.cache.push(a);for(b=this.get(this.pos++);58==b;)b=this.readDigits(),a.set(b,this.unserialize()),b=this.get(this.pos++);if(104!=b)throw"Invalid IntMap format";return a;case 77:a=new Bb;for(this.cache.push(a);104!=this.buf.charCodeAt(this.pos);)b=this.unserialize(),a.set(b,this.unserialize());this.pos++;return a;case 118:return a=
Q.substr(this.buf,this.pos,19),a=Q.strDate(a),this.cache.push(a),this.pos+=19,a;case 115:a=this.readDigits();d=this.buf;if(58!=this.get(this.pos++)||this.length-this.pos<a)throw"Invalid bytes length";var e=qc.CODES;null==e&&(e=qc.initCodes(),qc.CODES=e);for(var h=this.pos,n=a&3,g=h+(a-n),b=Sd.alloc(3*(a>>2)+(2<=n?n-1:0)),c=0;h<g;){var f=e[xa.fastCodeAt(d,h++)],i=e[xa.fastCodeAt(d,h++)];b.set(c++,f<<2|i>>4);f=e[xa.fastCodeAt(d,h++)];b.set(c++,i<<4|f>>2);i=e[xa.fastCodeAt(d,h++)];b.set(c++,f<<6|i)}2<=
n&&(i=e[xa.fastCodeAt(d,h++)],g=e[xa.fastCodeAt(d,h++)],b.set(c++,i<<2|g>>4),3==n&&(d=e[xa.fastCodeAt(d,h++)],b.set(c++,g<<4|d>>2)));this.pos+=a;this.cache.push(b);return b;case 67:a=this.unserialize();b=this.resolver.resolveClass(a);if(null==b)throw"Class not found "+a;a=ja.createEmptyInstance(b);this.cache.push(a);a.hxUnserialize(this);if(103!=this.get(this.pos++))throw"Invalid custom data";return a}this.pos--;throw"Invalid char "+this.buf.charAt(this.pos)+" at position "+this.pos;},__class__:qc};
var Sd=function(a,b){this.length=a;this.b=b};f["haxe.io.Bytes"]=Sd;Sd.__name__=["haxe","io","Bytes"];Sd.alloc=function(a){for(var b=[],c=0;c<a;)c++,b.push(0);return new Sd(a,b)};Sd.ofString=function(a){for(var b=[],c=0;c<a.length;){var d=xa.fastCodeAt(a,c++);55296<=d&&56319>=d&&(d=d-55232<<10|xa.fastCodeAt(a,c++)&1023);127>=d?b.push(d):(2047>=d?b.push(192|d>>6):(65535>=d?b.push(224|d>>12):(b.push(240|d>>18),b.push(128|d>>12&63)),b.push(128|d>>6&63)),b.push(128|d&63))}return new Sd(b.length,b)};Sd.prototype=
{get:function(a){return this.b[a]},set:function(a,b){this.b[a]=b&255},getString:function(a,b){if(0>a||0>b||a+b>this.length)throw fc.OutsideBounds;for(var c="",d=this.b,e=String.fromCharCode,h=a,n=a+b;h<n;){var g=d[h++];if(128>g){if(0==g)break;c+=e(g)}else if(224>g)c+=e((g&63)<<6|d[h++]&127);else if(240>g)var f=d[h++],c=c+e((g&31)<<12|(f&127)<<6|d[h++]&127);else var f=d[h++],i=d[h++],g=(g&15)<<18|(f&127)<<12|(i&127)<<6|d[h++]&127,c=c+e((g>>10)+55232),c=c+e(g&1023|56320)}return c},toString:function(){return this.getString(0,
this.length)},__class__:Sd};var cg=function(){};f["haxe.crypto.Base64"]=cg;cg.__name__=["haxe","crypto","Base64"];cg.decode=function(a,b){null==b&&(b=!0);if(b)for(;61==Q.cca(a,a.length-1);)a=Q.substr(a,0,-1);return(new am(cg.BYTES)).decodeBytes(Sd.ofString(a))};var am=function(a){for(var b=a.length,c=1;b>1<<c;)c++;if(8<c||b!=1<<c)throw"BaseCode : base length must be a power of two.";this.base=a;this.nbits=c};f["haxe.crypto.BaseCode"]=am;am.__name__=["haxe","crypto","BaseCode"];am.prototype={initTable:function(){for(var a=
[],b=0;256>b;){var c=b++;a[c]=-1}b=0;for(c=this.base.length;b<c;){var d=b++;a[this.base.b[d]]=d}this.tbl=a},decodeBytes:function(a){var b=this.nbits;null==this.tbl&&this.initTable();for(var c=this.tbl,d=a.length*b>>3,e=Sd.alloc(d),h=0,n=0,g=0,f=0;f<d;){for(;8>n;){var n=n+b,h=h<<b,i=c[a.get(g++)];if(-1==i)throw"BaseCode : invalid encoded char";h|=i}n-=8;e.set(f++,h>>n&255)}return e},__class__:am};var mb=function(){};f["haxe.ds.ArraySort"]=mb;mb.__name__=["haxe","ds","ArraySort"];mb.sort=function(a,
b){mb.rec(a,b,0,a.length)};mb.rec=function(a,b,c,d){var e=c+d>>1;if(12>d-c){if(!(d<=c))for(e=c+1;e<d;)for(var h=e++;h>c;){if(0>b(a[h],a[h-1]))mb.swap(a,h-1,h);else break;h--}}else mb.rec(a,b,c,e),mb.rec(a,b,e,d),mb.doMerge(a,b,c,e,d,e-c,d-e)};mb.doMerge=function(a,b,c,d,e,h,n){var g,f,i,j;0==h||0==n||(2==h+n?0>b(a[d],a[c])&&mb.swap(a,d,c):(h>n?(i=h>>1,g=c+i,f=mb.lower(a,b,d,e,g),j=f-d):(j=n>>1,f=d+j,g=mb.upper(a,b,c,d,f),i=g-c),mb.rotate(a,b,g,d,f),d=g+j,mb.doMerge(a,b,c,g,d,i,j),mb.doMerge(a,b,d,
f,e,h-i,n-j)))};mb.rotate=function(a,b,c,d,e){if(!(c==d||d==e))for(b=mb.gcd(e-c,d-c);0!=b--;){for(var h=a[c+b],n=d-c,g=c+b,f=c+b+n;f!=c+b;)a[g]=a[f],g=f,f=e-f>n?f+n:c+(n-(e-f));a[g]=h}};mb.gcd=function(a,b){for(;0!=b;)var c=a%b,a=b,b=c;return a};mb.upper=function(a,b,c,d,e){for(var d=d-c,h,n;0<d;)h=d>>1,n=c+h,0>b(a[e],a[n])?d=h:(c=n+1,d=d-h-1);return c};mb.lower=function(a,b,c,d,e){for(var d=d-c,h,n;0<d;)h=d>>1,n=c+h,0>b(a[n],a[e])?(c=n+1,d=d-h-1):d=h;return c};mb.swap=function(a,b,c){var d=a[b];
a[b]=a[c];a[c]=d};var Qj=function(){};f["haxe.ds.BalancedTree"]=Qj;Qj.__name__=["haxe","ds","BalancedTree"];Qj.prototype={set:function(a,b){this.root=this.setLoop(a,b,this.root)},get:function(a){for(var b=this.root;null!=b;){var c=this.compare(a,b.key);if(0==c)return b.value;b=0>c?b.left:b.right}return null},exists:function(a){for(var b=this.root;null!=b;){var c=this.compare(a,b.key);if(0==c)return!0;b=0>c?b.left:b.right}return!1},iterator:function(){var a=[];this.iteratorLoop(this.root,a);return Q.iter(a)},
setLoop:function(a,b,c){if(null==c)return new gc(null,a,b,null);var d=this.compare(a,c.key);if(0==d)return new gc(c.left,a,b,c.right,null==c?0:c._height);if(0>d)return this.balance(this.setLoop(a,b,c.left),c.key,c.value,c.right);a=this.setLoop(a,b,c.right);return this.balance(c.left,c.key,c.value,a)},iteratorLoop:function(a,b){null!=a&&(this.iteratorLoop(a.left,b),b.push(a.value),this.iteratorLoop(a.right,b))},balance:function(a,b,c,d){var e;e=null==a?0:a._height;var h;h=null==d?0:d._height;return e>
h+2?function(){var b=a.left;return null==b?0:b._height}(this)>=function(){var b=a.right;return null==b?0:b._height}(this)?new gc(a.left,a.key,a.value,new gc(a.right,b,c,d)):new gc(new gc(a.left,a.key,a.value,a.right.left),a.right.key,a.right.value,new gc(a.right.right,b,c,d)):h>e+2?function(){var a=d.right;return null==a?0:a._height}(this)>function(){var a=d.left;return null==a?0:a._height}(this)?new gc(new gc(a,b,c,d.left),d.key,d.value,d.right):new gc(new gc(a,b,c,d.left.left),d.left.key,d.left.value,
new gc(d.left.right,d.key,d.value,d.right)):new gc(a,b,c,d,(e>h?e:h)+1)},compare:function(a,b){return w.compare(a,b)},__class__:Qj};var gc=function(a,b,c,d,e){null==e&&(e=-1);this.left=a;this.key=b;this.value=c;this.right=d;this._height=-1==e?(function(a){a=a.left;return null==a?0:a._height}(this)>function(a){a=a.right;return null==a?0:a._height}(this)?function(a){a=a.left;return null==a?0:a._height}(this):function(a){a=a.right;return null==a?0:a._height}(this))+1:e};f["haxe.ds.TreeNode"]=gc;gc.__name__=
["haxe","ds","TreeNode"];gc.prototype={__class__:gc};var Xf=function(){};f["haxe.ds.EnumValueMap"]=Xf;Xf.__name__=["haxe","ds","EnumValueMap"];Xf.__interfaces__=[Kf];Xf.__super__=Qj;Xf.prototype=l(Qj.prototype,{compare:function(a,b){var c=a[1]-b[1];if(0!=c)return c;var c=a.slice(2),d=b.slice(2);return 0==c.length&&0==d.length?0:this.compareArgs(c,d)},compareArgs:function(a,b){var c=a.length-b.length;if(0!=c)return c;for(var c=0,d=a.length;c<d;){var e=c++,e=this.compareArg(a[e],b[e]);if(0!=e)return e}return 0},
compareArg:function(a,b){return w.isEnumValue(a)&&w.isEnumValue(b)?this.compare(a,b):a instanceof Array&&null==a.__enum__&&b instanceof Array&&null==b.__enum__?this.compareArgs(a,b):w.compare(a,b)},__class__:Xf});var Dc=function(){this.h={}};f["haxe.ds.IntMap"]=Dc;Dc.__name__=["haxe","ds","IntMap"];Dc.__interfaces__=[Kf];Dc.prototype={set:function(a,b){this.h[a]=b},get:function(a){return this.h[a]},exists:function(a){return this.h.hasOwnProperty(a)},remove:function(a){if(!this.h.hasOwnProperty(a))return!1;
delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b|0);return Q.iter(a)},__class__:Dc};var Bb=function(){this.h={};this.h.__keys__={}};f["haxe.ds.ObjectMap"]=Bb;Bb.__name__=["haxe","ds","ObjectMap"];Bb.__interfaces__=[Kf];Bb.prototype={set:function(a,b){var c=a.__id__||(a.__id__=++Bb.count);this.h[c]=b;this.h.__keys__[c]=a},get:function(a){return this.h[a.__id__]},exists:function(a){return null!=this.h.__keys__[a.__id__]},remove:function(a){a=a.__id__;
if(null==this.h.__keys__[a])return!1;delete this.h[a];delete this.h.__keys__[a];return!0},keys:function(){var a=[],b;for(b in this.h.__keys__)this.h.hasOwnProperty(b)&&a.push(this.h.__keys__[b]);return Q.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref[this.it.next().__id__]}}},__class__:Bb};var N=function(){this.h={}};f["haxe.ds.StringMap"]=N;N.__name__=["haxe","ds","StringMap"];N.__interfaces__=[Kf];N.prototype=
{set:function(a,b){this.h["$"+a]=b},get:function(a){return this.h["$"+a]},exists:function(a){return this.h.hasOwnProperty("$"+a)},remove:function(a){a="$"+a;if(!this.h.hasOwnProperty(a))return!1;delete this.h[a];return!0},keys:function(){var a=[],b;for(b in this.h)this.h.hasOwnProperty(b)&&a.push(b.substr(1));return Q.iter(a)},iterator:function(){return{ref:this.h,it:this.keys(),hasNext:function(){return this.it.hasNext()},next:function(){return this.ref["$"+this.it.next()]}}},__class__:N};var ch=
function(a,b){this.replacer=a;this.indent=b;this.pretty=null!=b;this.nind=0;this.buf=new Je};f["haxe.format.JsonPrinter"]=ch;ch.__name__=["haxe","format","JsonPrinter"];ch.print=function(a,b,c){b=new ch(b,c);b.write("",a);return b.buf.b};ch.prototype={ipad:function(){if(this.pretty){var a=xa.lpad("",this.indent,this.nind*this.indent.length);this.buf.b=null==a?this.buf.b+"null":this.buf.b+(""+a)}},write:function(a,b){null!=this.replacer&&(b=this.replacer(a,b));var c=ja["typeof"](b);switch(c[1]){case 8:this.buf.b+=
'"???"';break;case 4:this.fieldsString(b,w.fields(b));break;case 1:c=b;this.buf.b=null==c?this.buf.b+"null":this.buf.b+(""+c);break;case 2:c=Math.isFinite(b)?b:"null";this.buf.b=null==c?this.buf.b+"null":this.buf.b+(""+c);break;case 5:this.buf.b+='"<fun>"';break;case 6:c=c[2];if(c==String)this.quote(b);else if(c==Array){c=b;this.buf.b+="[";for(var d=c.length,e=d-1,h=0;h<d;){var n=h++;0<n?this.buf.b+=",":this.nind++;this.pretty&&(this.buf.b+="\n");this.ipad();this.write(n,c[n]);n==e&&(this.nind--,
this.pretty&&(this.buf.b+="\n"),this.ipad())}this.buf.b+="]"}else if(c==N){c=b;d={};for(e=c.keys();e.hasNext();)h=e.next(),w.setField(d,h,c.get(h));this.fieldsString(d,w.fields(d))}else c==Date?this.quote(Q.dateStr(b)):this.fieldsString(b,w.fields(b));break;case 7:c=ja.enumIndex(b);this.buf.b=null==c?this.buf.b+"null":this.buf.b+(""+c);break;case 3:c=b;this.buf.b=null==c?this.buf.b+"null":this.buf.b+(""+c);break;case 0:this.buf.b+="null"}},fieldsString:function(a,b){this.buf.b+="{";for(var c=b.length,
d=c-1,e=0;e<c;){var h=e++,n=b[h],g=w.field(a,n);w.isFunction(g)||(0<h?this.buf.b+=",":this.nind++,this.pretty&&(this.buf.b+="\n"),this.ipad(),this.quote(n),this.buf.b+=":",this.pretty&&(this.buf.b+=" "),this.write(n,g),h==d&&(this.nind--,this.pretty&&(this.buf.b+="\n"),this.ipad()))}this.buf.b+="}"},quote:function(a){this.buf.b+='"';for(var b=0;;){var c=xa.fastCodeAt(a,b++);if(c!=c)break;switch(c){case 34:this.buf.b+='\\"';break;case 92:this.buf.b+="\\\\";break;case 10:this.buf.b+="\\n";break;case 13:this.buf.b+=
"\\r";break;case 9:this.buf.b+="\\t";break;case 8:this.buf.b+="\\b";break;case 12:this.buf.b+="\\f";break;default:this.buf.b+=String.fromCharCode(c)}}this.buf.b+='"'},__class__:ch};var Vm=function(){};f["haxe.io.Eof"]=Vm;Vm.__name__=["haxe","io","Eof"];Vm.prototype={toString:function(){return"Eof"},__class__:Vm};var fc=f["haxe.io.Error"]={__ename__:["haxe","io","Error"],__constructs__:["Blocked","Overflow","OutsideBounds","Custom"]};fc.Blocked=["Blocked",0];fc.Blocked.toString=s;fc.Blocked.__enum__=
fc;fc.Overflow=["Overflow",1];fc.Overflow.toString=s;fc.Overflow.__enum__=fc;fc.OutsideBounds=["OutsideBounds",2];fc.OutsideBounds.toString=s;fc.OutsideBounds.__enum__=fc;fc.Custom=function(a){a=["Custom",3,a];a.__enum__=fc;a.toString=s;return a};fc.__empty_constructs__=[fc.Blocked,fc.Overflow,fc.OutsideBounds];var zl=function(){};f["haxe.rtti.Meta"]=zl;zl.__name__=["haxe","rtti","Meta"];zl.getType=function(a){a=a.__meta__;return null==a||null==a.obj?{}:a.obj};var bm=function(a){this.__x=a};f["haxe.xml._Fast.NodeAccess"]=
bm;bm.__name__=["haxe","xml","_Fast","NodeAccess"];bm.prototype={resolve:function(a){var b=this.__x.elementsNamed(a).next();if(null==b)throw(this.__x.nodeType==R.Document?"Document":this.__x.get_nodeName())+" is missing element "+a;return new dh(b)},__class__:bm};var cm=function(a){this.__x=a};f["haxe.xml._Fast.AttribAccess"]=cm;cm.__name__=["haxe","xml","_Fast","AttribAccess"];cm.prototype={resolve:function(a){if(this.__x.nodeType==R.Document)throw"Cannot access document attribute "+a;var b=this.__x.get(a);
if(null==b)throw this.__x.get_nodeName()+" is missing attribute "+a;return b},__class__:cm};var dm=function(a){this.__x=a};f["haxe.xml._Fast.HasAttribAccess"]=dm;dm.__name__=["haxe","xml","_Fast","HasAttribAccess"];dm.prototype={resolve:function(a){if(this.__x.nodeType==R.Document)throw"Cannot access document attribute "+a;return this.__x.exists(a)},__class__:dm};var em=function(a){this.__x=a};f["haxe.xml._Fast.HasNodeAccess"]=em;em.__name__=["haxe","xml","_Fast","HasNodeAccess"];em.prototype={resolve:function(a){return this.__x.elementsNamed(a).hasNext()},
__class__:em};var fm=function(a){this.__x=a};f["haxe.xml._Fast.NodeListAccess"]=fm;fm.__name__=["haxe","xml","_Fast","NodeListAccess"];fm.prototype={resolve:function(a){for(var b=new $d,a=this.__x.elementsNamed(a);a.hasNext();){var c=a.next();b.add(new dh(c))}return b},__class__:fm};var dh=function(a){if(a.nodeType!=R.Document&&a.nodeType!=R.Element)throw"Invalid nodeType "+y.string(a.nodeType);this.x=a;this.node=new bm(a);this.nodes=new fm(a);this.att=new cm(a);this.has=new dm(a);this.hasNode=new em(a)};
f["haxe.xml.Fast"]=dh;dh.__name__=["haxe","xml","Fast"];dh.prototype={get_name:function(){return this.x.nodeType==R.Document?"Document":this.x.get_nodeName()},get_innerData:function(){var a=this.x.iterator();if(!a.hasNext())throw this.get_name()+" does not have data";var b=a.next(),c=a.next();if(null!=c){if(b.nodeType==R.PCData&&c.nodeType==R.CData&&""==xa.trim(b.get_nodeValue())&&(b=a.next(),null==b||b.nodeType==R.PCData&&""==xa.trim(b.get_nodeValue())&&null==a.next()))return c.get_nodeValue();throw this.get_name()+
" does not only have data";}if(b.nodeType!=R.PCData&&b.nodeType!=R.CData)throw this.get_name()+" does not have data";return b.get_nodeValue()},__class__:dh,__properties__:{get_innerData:"get_innerData",get_name:"get_name"}};var Ke=function(){};f["haxe.xml.Parser"]=Ke;Ke.__name__=["haxe","xml","Parser"];Ke.parse=function(a){var b=R.createDocument();Ke.doParse(a,0,b);return b};Ke.doParse=function(a,b,c){null==b&&(b=0);for(var d=null,e=1,h=1,n=null,g=0,f=0,i=0,j=a.charCodeAt(b),k=new Je;j==j;){switch(e){case 0:switch(j){case 10:case 13:case 9:case 32:break;
default:e=h;continue}break;case 1:switch(j){case 60:e=0;h=2;break;default:g=b;e=13;continue}break;case 13:60==j?(h=R.createPCData(k.b+Q.substr(a,g,b-g)),k=new Je,c.addChild(h),f++,e=0,h=2):38==j&&(k.addSub(a,g,b-g),e=18,h=13,g=b+1);break;case 17:93==j&&93==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(e=R.createCData(Q.substr(a,g,b-g)),c.addChild(e),f++,b+=2,e=1);break;case 2:switch(j){case 33:if(91==a.charCodeAt(b+1)){b+=2;if("CDATA["!=Q.substr(a,b,6).toUpperCase())throw"Expected <![CDATA[";b+=5;e=
17}else if(68==a.charCodeAt(b+1)||100==a.charCodeAt(b+1)){if("OCTYPE"!=Q.substr(a,b+2,6).toUpperCase())throw"Expected <!DOCTYPE";b+=8;e=16}else{if(45!=a.charCodeAt(b+1)||45!=a.charCodeAt(b+2))throw"Expected <\!--";b+=2;e=15}g=b+1;break;case 63:e=14;g=b;break;case 47:if(null==c)throw"Expected node name";g=b+1;e=0;h=10;break;default:e=3;g=b;continue}break;case 3:if(!(97<=j&&122>=j||65<=j&&90>=j||48<=j&&57>=j||58==j||46==j||95==j||45==j)){if(b==g)throw"Expected node name";d=R.createElement(Q.substr(a,
g,b-g));c.addChild(d);e=0;h=4;continue}break;case 4:switch(j){case 47:e=11;f++;break;case 62:e=9;f++;break;default:e=5;g=b;continue}break;case 5:if(!(97<=j&&122>=j||65<=j&&90>=j||48<=j&&57>=j||58==j||46==j||95==j||45==j)){if(g==b)throw"Expected attribute name";n=Q.substr(a,g,b-g);if(d.exists(n))throw"Duplicate attribute";e=0;h=6;continue}break;case 6:switch(j){case 61:e=0;h=7;break;default:throw"Expected =";}break;case 7:switch(j){case 34:case 39:e=8;g=b;break;default:throw'Expected "';}break;case 8:j==
a.charCodeAt(g)&&(h=Q.substr(a,g+1,b-g-1),d.set(n,h),e=0,h=4);break;case 9:g=b=Ke.doParse(a,b,d);e=1;break;case 11:switch(j){case 62:e=1;break;default:throw"Expected >";}break;case 12:switch(j){case 62:return 0==f&&c.addChild(R.createPCData("")),b;default:throw"Expected >";}case 10:if(!(97<=j&&122>=j||65<=j&&90>=j||48<=j&&57>=j||58==j||46==j||95==j||45==j)){if(g==b)throw"Expected node name";if(Q.substr(a,g,b-g)!=c.get_nodeName())throw"Expected </"+c.get_nodeName()+">";e=0;h=12;continue}break;case 15:45==
j&&45==a.charCodeAt(b+1)&&62==a.charCodeAt(b+2)&&(c.addChild(R.createComment(Q.substr(a,g,b-g))),b+=2,e=1);break;case 16:91==j?i++:93==j?i--:62==j&&0==i&&(c.addChild(R.createDocType(Q.substr(a,g,b-g))),e=1);break;case 14:63==j&&62==a.charCodeAt(b+1)&&(b++,e=Q.substr(a,g+1,b-g-2),c.addChild(R.createProcessingInstruction(e)),e=1);break;case 18:59==j&&(g=Q.substr(a,g,b-g),35==g.charCodeAt(0)?(g=120==g.charCodeAt(1)?y.parseInt("0"+Q.substr(g,1,g.length-1)):y.parseInt(Q.substr(g,1,g.length-1)),k.add(String.fromCharCode(g))):
Ke.escapes.exists(g)?k.add(Ke.escapes.get(g)):k.b+=y.string("&"+g+";"),g=b+1,e=h)}j=xa.fastCodeAt(a,++b)}1==e&&(g=b,e=13);if(13==e)return(b!=g||0==f)&&c.addChild(R.createPCData(k.b+Q.substr(a,g,b-g))),b;throw"Unexpected end";};var ga=function(){};f["js.Boot"]=ga;ga.__name__=["js","Boot"];ga.getClass=function(a){return a instanceof Array&&null==a.__enum__?Array:a.__class__};ga.__string_rec=function(a,b){if(null==a)return"null";if(5<=b.length)return"<...>";var c=typeof a;if("function"==c&&(a.__name__||
a.__ename__))c="object";switch(c){case "object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];for(var c=a[0]+"(",b=b+"\t",d=2,e=a.length;d<e;)var h=d++,c=2!=h?c+(","+ga.__string_rec(a[h],b)):c+ga.__string_rec(a[h],b);return c+")"}c=a.length;d="[";b+="\t";for(e=0;e<c;)h=e++,d+=(0<h?",":"")+ga.__string_rec(a[h],b);return d+"]"}try{d=a.toString}catch(n){return"???"}if(null!=d&&d!=Object.toString&&(c=a.toString(),"[object Object]"!=c))return c;c=null;d="{\n";b+="\t";e=null!=a.hasOwnProperty;
for(c in a)if(!e||a.hasOwnProperty(c))"prototype"==c||"__class__"==c||"__super__"==c||"__interfaces__"==c||"__properties__"==c||(2!=d.length&&(d+=", \n"),d+=b+c+" : "+ga.__string_rec(a[c],b));b=b.substring(1);return d+("\n"+b+"}");case "function":return"<function>";case "string":return a;default:return""+a}};ga.__interfLoop=function(a,b){if(null==a)return!1;if(a==b)return!0;var c=a.__interfaces__;if(null!=c)for(var d=0,e=c.length;d<e;){var h=d++,h=c[h];if(h==b||ga.__interfLoop(h,b))return!0}return ga.__interfLoop(a.__super__,
b)};ga.__instanceof=function(a,b){if(null==b)return!1;switch(b){case In:return(a|0)===a;case Dn:return"number"==typeof a;case En:return"boolean"==typeof a;case String:return"string"==typeof a;case Array:return a instanceof Array&&null==a.__enum__;case Jn:return!0;default:if(null!=a){if("function"==typeof b&&(a instanceof b||ga.__interfLoop(ga.getClass(a),b)))return!0}else return!1;return b==Kn&&null!=a.__name__||b==Ln&&null!=a.__ename__?!0:a.__enum__==b}};ga.__cast=function(a,b){if(ga.__instanceof(a,
b))return a;throw"Cannot cast "+y.string(a)+" to "+y.string(b);};var Mh=function(){};f["js.Browser"]=Mh;Mh.__name__=["js","Browser"];Mh.getLocalStorage=function(){try{var a=window.localStorage;a.getItem("");return a}catch(b){return null}};Mh.createXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)return new ActiveXObject("Microsoft.XMLHTTP");throw"Unable to create XMLHttpRequest object.";};var Qm=function(){};f["js.html._CanvasElement.CanvasUtil"]=
Qm;Qm.__name__=["js","html","_CanvasElement","CanvasUtil"];Qm.getContextWebGL=function(a,b){for(var c=0,d=["webgl","experimental-webgl"];c<d.length;){var e=d[c];++c;e=a.getContext(e,b);if(null!=e)return e}return null};var pb=function(){k.call(this);if(null!=pb._scaleSprite)throw"AutoScale should be added only once!";ua.init()};f["jsembed.AutoScale"]=pb;pb.__name__=["jsembed","AutoScale"];pb.__super__=k;pb.prototype=l(k.prototype,{get_name:function(){return"AutoScale_91"},onAdded:function(){null!=
this.owner._compMap.Sprite_5?pb._scaleSprite=this.owner._compMap.Sprite_5:(pb._scaleSprite=new A,this.owner.add(pb._scaleSprite))},onUpdate:function(){pb.tmp=ua.get_canvasScale();0<pb.tmp&&pb.tmp!=pb.SCALE&&(pb.SCALE=pb.tmp,pb._scaleSprite.scaleX.set__(pb.tmp),pb._scaleSprite.scaleY.set__(pb.tmp))},__class__:pb});var tc=function(){};f["jsembed.BaseUtils"]=tc;tc.__name__=["jsembed","BaseUtils"];tc.setupManifest=function(a){""!=tc.BASE_URL&&(ua.get_isCrossdomain()?a.set_remoteBase(tc.BASE_URL):a.set_localBase(tc.BASE_URL))};
tc.setupBaseURL=function(){ua.init();tc.BASE_URL=ua.get_exists()?ua.get_isCrossdomain()?tc.appendAssetsToUrl(ua.get_base()):tc.trimUrl(ua.get_base()):""};tc.trimUrl=function(a){if(""==a)return"";if(0>a.indexOf("http"))return"/"==a.charAt(0)&&(a=Q.substr(a,1,a.length-1)),a;var b=a.indexOf("http://");0>b?(b=a.indexOf("https://"),b=0>b?0:b+8):b+=7;b=a.indexOf("/",b);a=Q.substr(a,b,a.length-b);return a=tc.appendAssetsToUrl(a)};tc.appendAssetsToUrl=function(a){"/"!=a.charAt(a.length-1)&&(a+="/");return a+
"assets/"};var kb=function(a,b){k.call(this);if(!kb.hasInit)throw"Please call 'jsembed.HardwareAutoScale.init();' BEFORE  Flambe 'System.init()'";ua.init();this.gameWidth=a;this.gameHeight=b;this._htmlStage=x._platform.getStage();this._stage=x._platform.getStage();this._canvas=this._stage._canvas;this.resizeCanvas(a,b)};f["jsembed.HardwareAutoScale"]=kb;kb.__name__=["jsembed","HardwareAutoScale"];kb.init=function(){if(!kb.hasInit){kb.hasInit=!0;var a=wg;a.prototype.onWindowResize=function(){};a.prototype.requestResize=
function(){};a.prototype.resizeCanvas=function(a,c){this._canvas.width=a;this._canvas.height=c;this.resize.emit();return!0}}};kb.__super__=k;kb.prototype=l(k.prototype,{get_name:function(){return"HardwareAutoScale_90"},resizeCanvas:function(a,b){kb.enabled&&(this._canvas.width=this._stage.width=a,this._canvas.height=this._stage.width=b,this._htmlStage.resize.emit())},onUpdate:function(){kb._tmp=ua.get_canvasScale();0<kb._tmp&&kb._tmp!=kb.SCALE&&(kb.SCALE=kb._tmp,this._canvas.style.width=this.gameWidth*
kb.SCALE+"px",this._canvas.style.height=this.gameHeight*kb.SCALE+"px")},__class__:kb});var ua=function(){};f["jsembed.JSEmbedProxy"]=ua;ua.__name__=["jsembed","JSEmbedProxy"];ua.__properties__={get_canvasScale:"get_canvasScale",get_isCrossdomain:"get_isCrossdomain",get_base:"get_base",get_exists:"get_exists"};ua.init=function(){if(null!=ua.JSEMBED)return!0;try{return ua.JSEMBED=eval("jsembed"),ua.enabled=!0}catch(a){}return!1};ua.get_exists=function(){return!ua.enabled?!1:ua.JSEMBED.exists()};ua.get_base=
function(){return!ua.enabled?null:ua.JSEMBED.baseUrl()};ua.get_isCrossdomain=function(){return!ua.enabled?!0:ua.JSEMBED.isBaseCrossdomain()};ua.get_canvasScale=function(){return!ua.enabled?0:y.parseFloat(ua.JSEMBED.canvasScale())};var v=function(){};f["nape.Config"]=v;v.__name__=["nape","Config"];var md=function(){this.zpp_inner=null};f["nape.callbacks.Callback"]=md;md.__name__=["nape","callbacks","Callback"];md.prototype={toString:function(){return""},__class__:md};var Rj=function(){this.zpp_inner=
null};f["nape.callbacks.BodyCallback"]=Rj;Rj.__name__=["nape","callbacks","BodyCallback"];Rj.__super__=md;Rj.prototype=l(md.prototype,{toString:function(){var a;a="Cb:"+["WAKE","SLEEP"][this.zpp_inner.event-g.id_CbEvent_WAKE];a+=":"+this.zpp_inner.body.outer.toString();return a+=" : listener: "+y.string(this.zpp_inner.listener.outer)},__class__:Rj});var Zc=function(){this.zpp_inner=null};f["nape.callbacks.Listener"]=Zc;Zc.__name__=["nape","callbacks","Listener"];Zc.prototype={toString:function(){var a=
"BEGIN,END,WAKE,SLEEP,BREAK,PRE,ONGOING".split(",")[this.zpp_inner.event];if(this.zpp_inner.type==g.id_ListenerType_BODY)return"BodyListener{"+a+"::"+y.string(this.zpp_inner.body.outer_zn.zpp_inner_zn.options.outer)+"}";if(this.zpp_inner.type==g.id_ListenerType_CONSTRAINT)return"ConstraintListener{"+a+"::"+y.string(this.zpp_inner.constraint.outer_zn.zpp_inner_zn.options.outer)+"}";var b=this.zpp_inner.interaction,c;switch(b.itype){case g.id_InteractionType_COLLISION:c="COLLISION";break;case g.id_InteractionType_SENSOR:c=
"SENSOR";break;case g.id_InteractionType_FLUID:c="FLUID";break;default:c="ALL"}return(this.zpp_inner.type==g.id_ListenerType_INTERACTION?"InteractionListener{"+a+"#"+c+"::"+y.string(b.outer_zni.zpp_inner_zn.options1.outer)+":"+y.string(b.outer_zni.zpp_inner_zn.options2.outer)+"}":"PreListener{"+c+"::"+y.string(b.outer_znp.zpp_inner_zn.options1.outer)+":"+y.string(b.outer_znp.zpp_inner_zn.options2.outer)+"}")+" precedence="+this.zpp_inner.precedence},__class__:Zc};var gm=function(){this.zpp_inner_zn=
null};f["nape.callbacks.BodyListener"]=gm;gm.__name__=["nape","callbacks","BodyListener"];gm.__super__=Zc;gm.prototype=l(Zc.prototype,{__class__:gm});var Vb=function(){};f["nape.callbacks.CbEvent"]=Vb;Vb.__name__=["nape","callbacks","CbEvent"];Vb.prototype={toString:function(){var a;null==g.CbEvent_PRE&&(g.internal=!0,g.CbEvent_PRE=new Vb,g.internal=!1);this==g.CbEvent_PRE?a="PRE":(null==g.CbEvent_BEGIN&&(g.internal=!0,g.CbEvent_BEGIN=new Vb,g.internal=!1),this==g.CbEvent_BEGIN?a="BEGIN":(null==g.CbEvent_ONGOING&&
(g.internal=!0,g.CbEvent_ONGOING=new Vb,g.internal=!1),this==g.CbEvent_ONGOING?a="ONGOING":(null==g.CbEvent_END&&(g.internal=!0,g.CbEvent_END=new Vb,g.internal=!1),this==g.CbEvent_END?a="END":(null==g.CbEvent_WAKE&&(g.internal=!0,g.CbEvent_WAKE=new Vb,g.internal=!1),this==g.CbEvent_WAKE?a="WAKE":(null==g.CbEvent_SLEEP&&(g.internal=!0,g.CbEvent_SLEEP=new Vb,g.internal=!1),this==g.CbEvent_SLEEP?a="SLEEP":(null==g.CbEvent_BREAK&&(g.internal=!0,g.CbEvent_BREAK=new Vb,g.internal=!1),a=this==g.CbEvent_BREAK?
"BREAK":""))))));return a},__class__:Vb};var We=function(){this.zpp_inner=null;this.zpp_inner=new Eb;this.zpp_inner.outer=this};f["nape.callbacks.CbType"]=We;We.__name__=["nape","callbacks","CbType"];We.prototype={toString:function(){return this==Eb.ANY_BODY?"ANY_BODY":this==Eb.ANY_SHAPE?"ANY_SHAPE":this==Eb.ANY_COMPOUND?"ANY_COMPOUND":this==Eb.ANY_CONSTRAINT?"ANY_CONSTRAINT":"CbType#"+this.zpp_inner.id},__class__:We};var Td=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=
null};f["nape.callbacks.CbTypeIterator"]=Td;Td.__name__=["nape","callbacks","CbTypeIterator"];Td.get=function(a){var b;null==Td.zpp_pool?(be.internal=!0,b=new Td,be.internal=!1):(b=Td.zpp_pool,Td.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Td.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Td.zpp_pool;Td.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=
!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Td};var Sj=function(){this.zpp_inner=null;this.zpp_inner=new be;this.zpp_inner.outer=this};f["nape.callbacks.CbTypeList"]=Sj;Sj.__name__=["nape","callbacks","CbTypeList"];Sj.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},has:function(a){this.zpp_inner.valmod();return this.zpp_inner.inner.has(a.zpp_inner)},
at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):
!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?
this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},
remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Td.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==
d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Sj,__properties__:{get_length:"get_length"}};var Tj=function(){this.zpp_inner=null};f["nape.callbacks.ConstraintCallback"]=Tj;Tj.__name__=["nape","callbacks","ConstraintCallback"];Tj.__super__=md;Tj.prototype=l(md.prototype,{toString:function(){var a;a="Cb:"+["WAKE","SLEEP","BREAK"][this.zpp_inner.event-g.id_CbEvent_WAKE];a+=":"+this.zpp_inner.constraint.outer.toString();return a+=" : listener: "+y.string(this.zpp_inner.listener.outer)},__class__:Tj});
var hm=function(){this.zpp_inner_zn=null};f["nape.callbacks.ConstraintListener"]=hm;hm.__name__=["nape","callbacks","ConstraintListener"];hm.__super__=Zc;hm.prototype=l(Zc.prototype,{__class__:hm});var Uj=function(){this.zpp_inner=null};f["nape.callbacks.InteractionCallback"]=Uj;Uj.__name__=["nape","callbacks","InteractionCallback"];Uj.__super__=md;Uj.prototype=l(md.prototype,{toString:function(){var a;a="Cb:"+"BEGIN,END,,,,,ONGOING".split(",")[this.zpp_inner.event];a+=":"+this.zpp_inner.int1.outer_i.toString()+
"/"+this.zpp_inner.int2.outer_i.toString();a+=" : "+this.zpp_inner.wrap_arbiters.toString();return a+=" : listener: "+y.string(this.zpp_inner.listener.outer)},__class__:Uj});var dg=function(a,b,c,d,e,h){null==h&&(h=0);this.zpp_inner=this.zpp_inner_zn=null;var n=-1;null==g.CbEvent_BEGIN&&(g.internal=!0,g.CbEvent_BEGIN=new Vb,g.internal=!1);a==g.CbEvent_BEGIN?n=g.id_CbEvent_BEGIN:(null==g.CbEvent_END&&(g.internal=!0,g.CbEvent_END=new Vb,g.internal=!1),a==g.CbEvent_END?n=g.id_CbEvent_END:(null==g.CbEvent_ONGOING&&
(g.internal=!0,g.CbEvent_ONGOING=new Vb,g.internal=!1),a==g.CbEvent_ONGOING&&(n=g.id_CbEvent_ONGOING)));this.zpp_inner=this.zpp_inner_zn=new Ya(Xe.argument(c),Xe.argument(d),n,g.id_ListenerType_INTERACTION);this.zpp_inner.outer=this;this.zpp_inner_zn.outer_zni=this;this.zpp_inner.precedence=h;this.zpp_inner_zn.handleri=e;this.set_interactionType(b)};f["nape.callbacks.InteractionListener"]=dg;dg.__name__=["nape","callbacks","InteractionListener"];dg.__super__=Zc;dg.prototype=l(Zc.prototype,{get_interactionType:function(){var a=
this.zpp_inner_zn.itype;if(a==g.id_InteractionType_COLLISION)return null==g.InteractionType_COLLISION&&(g.internal=!0,g.InteractionType_COLLISION=new Qa,g.internal=!1),g.InteractionType_COLLISION;if(a==g.id_InteractionType_SENSOR)return null==g.InteractionType_SENSOR&&(g.internal=!0,g.InteractionType_SENSOR=new Qa,g.internal=!1),g.InteractionType_SENSOR;if(a==g.id_InteractionType_FLUID)return null==g.InteractionType_FLUID&&(g.internal=!0,g.InteractionType_FLUID=new Qa,g.internal=!1),g.InteractionType_FLUID;
return a==g.id_InteractionType_ANY?(null==g.InteractionType_ANY&&(g.internal=!0,g.InteractionType_ANY=new Qa,g.internal=!1),g.InteractionType_ANY):null},set_interactionType:function(a){if(this.get_interactionType()!=a){var b=this.zpp_inner_zn;null==g.InteractionType_COLLISION&&(g.internal=!0,g.InteractionType_COLLISION=new Qa,g.internal=!1);a==g.InteractionType_COLLISION?a=g.id_InteractionType_COLLISION:(null==g.InteractionType_SENSOR&&(g.internal=!0,g.InteractionType_SENSOR=new Qa,g.internal=!1),
a==g.InteractionType_SENSOR?a=g.id_InteractionType_SENSOR:(null==g.InteractionType_FLUID&&(g.internal=!0,g.InteractionType_FLUID=new Qa,g.internal=!1),a=a==g.InteractionType_FLUID?g.id_InteractionType_FLUID:g.id_InteractionType_ANY));b.itype=a}return this.get_interactionType()},__class__:dg,__properties__:{set_interactionType:"set_interactionType",get_interactionType:"get_interactionType"}});var Qa=function(){};f["nape.callbacks.InteractionType"]=Qa;Qa.__name__=["nape","callbacks","InteractionType"];
Qa.prototype={toString:function(){var a;null==g.InteractionType_COLLISION&&(g.internal=!0,g.InteractionType_COLLISION=new Qa,g.internal=!1);this==g.InteractionType_COLLISION?a="COLLISION":(null==g.InteractionType_SENSOR&&(g.internal=!0,g.InteractionType_SENSOR=new Qa,g.internal=!1),this==g.InteractionType_SENSOR?a="SENSOR":(null==g.InteractionType_FLUID&&(g.internal=!0,g.InteractionType_FLUID=new Qa,g.internal=!1),this==g.InteractionType_FLUID?a="FLUID":(null==g.InteractionType_ANY&&(g.internal=!0,
g.InteractionType_ANY=new Qa,g.internal=!1),a=this==g.InteractionType_ANY?"ANY":"")));return a},__class__:Qa};var $c=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};f["nape.callbacks.ListenerIterator"]=$c;$c.__name__=["nape","callbacks","ListenerIterator"];$c.get=function(a){var b;null==$c.zpp_pool?(Ye.internal=!0,b=new $c,Ye.internal=!1):(b=$c.zpp_pool,$c.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};$c.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();
var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=$c.zpp_pool;$c.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:$c};var im=function(){this.zpp_inner=null;this.zpp_inner=new Ye;this.zpp_inner.outer=this};f["nape.callbacks.ListenerList"]=im;im.__name__=["nape","callbacks","ListenerList"];im.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&
(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},
push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&
this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),
null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a=
"[",b=!0,c;this.zpp_inner.valmod();for(c=$c.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:im,__properties__:{get_length:"get_length"}};var eg=function(){};f["nape.callbacks.ListenerType"]=eg;eg.__name__=["nape","callbacks","ListenerType"];eg.prototype={toString:function(){var a;null==g.ListenerType_BODY&&(g.internal=!0,g.ListenerType_BODY=new eg,g.internal=!1);this==g.ListenerType_BODY?a="BODY":
(null==g.ListenerType_CONSTRAINT&&(g.internal=!0,g.ListenerType_CONSTRAINT=new eg,g.internal=!1),this==g.ListenerType_CONSTRAINT?a="CONSTRAINT":(null==g.ListenerType_INTERACTION&&(g.internal=!0,g.ListenerType_INTERACTION=new eg,g.internal=!1),this==g.ListenerType_INTERACTION?a="INTERACTION":(null==g.ListenerType_PRE&&(g.internal=!0,g.ListenerType_PRE=new eg,g.internal=!1),a=this==g.ListenerType_PRE?"PRE":"")));return a},__class__:eg};var fg=function(a,b){this.zpp_inner=null;this.zpp_inner=new Xe;
this.zpp_inner.outer=this;null!=a&&this.including(a);null!=b&&this.excluding(b)};f["nape.callbacks.OptionType"]=fg;fg.__name__=["nape","callbacks","OptionType"];fg.prototype={including:function(a){this.zpp_inner.append(this.zpp_inner.includes,a);return this},excluding:function(a){this.zpp_inner.append(this.zpp_inner.excludes,a);return this},toString:function(){null==this.zpp_inner.wrap_includes&&this.zpp_inner.setup_includes();var a=this.zpp_inner.wrap_includes.toString();null==this.zpp_inner.wrap_excludes&&
this.zpp_inner.setup_excludes();return"@{"+a+" excluding "+this.zpp_inner.wrap_excludes.toString()+"}"},__class__:fg};var Vj=function(){this.zpp_inner=null};f["nape.callbacks.PreCallback"]=Vj;Vj.__name__=["nape","callbacks","PreCallback"];Vj.__super__=md;Vj.prototype=l(md.prototype,{toString:function(){var a;a="Cb:PRE:"+(":"+this.zpp_inner.int1.outer_i.toString()+"/"+this.zpp_inner.int2.outer_i.toString());a+=" : "+this.zpp_inner.pre_arbiter.wrapper().toString();return a+=" : listnener: "+y.string(this.zpp_inner.listener.outer)},
__class__:Vj});var cb=function(){};f["nape.callbacks.PreFlag"]=cb;cb.__name__=["nape","callbacks","PreFlag"];cb.prototype={toString:function(){var a;null==g.PreFlag_ACCEPT&&(g.internal=!0,g.PreFlag_ACCEPT=new cb,g.internal=!1);this==g.PreFlag_ACCEPT?a="ACCEPT":(null==g.PreFlag_IGNORE&&(g.internal=!0,g.PreFlag_IGNORE=new cb,g.internal=!1),this==g.PreFlag_IGNORE?a="IGNORE":(null==g.PreFlag_ACCEPT_ONCE&&(g.internal=!0,g.PreFlag_ACCEPT_ONCE=new cb,g.internal=!1),this==g.PreFlag_ACCEPT_ONCE?a="ACCEPT_ONCE":
(null==g.PreFlag_IGNORE_ONCE&&(g.internal=!0,g.PreFlag_IGNORE_ONCE=new cb,g.internal=!1),a=this==g.PreFlag_IGNORE_ONCE?"IGNORE_ONCE":"")));return a},__class__:cb};var Wj=function(a,b,c,d,e,h){null==h&&(h=!1);null==e&&(e=0);this.zpp_inner=this.zpp_inner_zn=null;this.zpp_inner=this.zpp_inner_zn=new Ya(Xe.argument(b),Xe.argument(c),g.id_CbEvent_PRE,g.id_ListenerType_PRE);this.zpp_inner.outer=this;this.zpp_inner_zn.outer_znp=this;this.zpp_inner.precedence=e;this.zpp_inner_zn.pure=h;this.zpp_inner_zn.handlerp=
d;this.set_interactionType(a)};f["nape.callbacks.PreListener"]=Wj;Wj.__name__=["nape","callbacks","PreListener"];Wj.__super__=Zc;Wj.prototype=l(Zc.prototype,{get_interactionType:function(){var a=this.zpp_inner_zn.itype;if(a==g.id_InteractionType_COLLISION)return null==g.InteractionType_COLLISION&&(g.internal=!0,g.InteractionType_COLLISION=new Qa,g.internal=!1),g.InteractionType_COLLISION;if(a==g.id_InteractionType_SENSOR)return null==g.InteractionType_SENSOR&&(g.internal=!0,g.InteractionType_SENSOR=
new Qa,g.internal=!1),g.InteractionType_SENSOR;if(a==g.id_InteractionType_FLUID)return null==g.InteractionType_FLUID&&(g.internal=!0,g.InteractionType_FLUID=new Qa,g.internal=!1),g.InteractionType_FLUID;return a==g.id_InteractionType_ANY?(null==g.InteractionType_ANY&&(g.internal=!0,g.InteractionType_ANY=new Qa,g.internal=!1),g.InteractionType_ANY):null},set_interactionType:function(a){if(this.get_interactionType()!=a){var b=this.zpp_inner_zn;null==g.InteractionType_COLLISION&&(g.internal=!0,g.InteractionType_COLLISION=
new Qa,g.internal=!1);a==g.InteractionType_COLLISION?a=g.id_InteractionType_COLLISION:(null==g.InteractionType_SENSOR&&(g.internal=!0,g.InteractionType_SENSOR=new Qa,g.internal=!1),a==g.InteractionType_SENSOR?a=g.id_InteractionType_SENSOR:(null==g.InteractionType_FLUID&&(g.internal=!0,g.InteractionType_FLUID=new Qa,g.internal=!1),a=a==g.InteractionType_FLUID?g.id_InteractionType_FLUID:g.id_InteractionType_ANY));b.itype=a}return this.get_interactionType()},__class__:Wj,__properties__:{set_interactionType:"set_interactionType",
get_interactionType:"get_interactionType"}});var Wm=function(){};f["nape.constraint.Constraint"]=Wm;Wm.__name__=["nape","constraint","Constraint"];Wm.prototype={toString:function(){return"{Constraint}"},__class__:Wm};var ce=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};f["nape.constraint.ConstraintIterator"]=ce;ce.__name__=["nape","constraint","ConstraintIterator"];ce.get=function(a){var b;null==ce.zpp_pool?(Ae.internal=!0,b=new ce,Ae.internal=!1):(b=ce.zpp_pool,
ce.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};ce.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=ce.zpp_pool;ce.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:ce};var jm=function(){this.zpp_inner=null;this.zpp_inner=new Ae;this.zpp_inner.outer=this};f["nape.constraint.ConstraintList"]=
jm;jm.__name__=["nape","constraint","ConstraintList"];jm.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=
a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();
for(c=ce.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:jm,__properties__:{get_length:"get_length"}};var Ze=function(){this.zpp_inner=null};f["nape.dynamics.Arbiter"]=Ze;Ze.__name__=["nape","dynamics","Arbiter"];Ze.prototype={get_collisionArbiter:function(){return this.zpp_inner.type==qa.COL?this.zpp_inner.colarb.outer_zn:null},get_state:function(){var a=this.zpp_inner.immState;if(a==(g.id_ImmState_ACCEPT|
g.id_ImmState_ALWAYS))return null==g.PreFlag_ACCEPT&&(g.internal=!0,g.PreFlag_ACCEPT=new cb,g.internal=!1),g.PreFlag_ACCEPT;switch(a){case g.id_ImmState_ACCEPT:return null==g.PreFlag_ACCEPT_ONCE&&(g.internal=!0,g.PreFlag_ACCEPT_ONCE=new cb,g.internal=!1),g.PreFlag_ACCEPT_ONCE;default:if(a==(g.id_ImmState_IGNORE|g.id_ImmState_ALWAYS))return null==g.PreFlag_IGNORE&&(g.internal=!0,g.PreFlag_IGNORE=new cb,g.internal=!1),g.PreFlag_IGNORE;null==g.PreFlag_IGNORE_ONCE&&(g.internal=!0,g.PreFlag_IGNORE_ONCE=
new cb,g.internal=!1);return g.PreFlag_IGNORE_ONCE}},toString:function(){var a;a=this.zpp_inner.type==qa.COL?"CollisionArbiter":this.zpp_inner.type==qa.FLUID?"FluidArbiter":"SensorArbiter";return this.zpp_inner.cleared?a+"(object-pooled)":a+"("+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws2.outer:this.zpp_inner.ws1.outer).toString()+"|"+(this.zpp_inner.ws1.id>this.zpp_inner.ws2.id?this.zpp_inner.ws1.outer:this.zpp_inner.ws2.outer).toString()+")"+(this.zpp_inner.type==qa.COL?"["+["SD",
"DD"][this.zpp_inner.colarb.stat?0:1]+"]":"")+"<-"+this.get_state().toString()},__class__:Ze,__properties__:{get_state:"get_state",get_collisionArbiter:"get_collisionArbiter"}};var nd=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};f["nape.dynamics.ArbiterIterator"]=nd;nd.__name__=["nape","dynamics","ArbiterIterator"];nd.get=function(a){var b;null==nd.zpp_pool?($e.internal=!0,b=new nd,$e.internal=!1):(b=nd.zpp_pool,nd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=
a;b.zpp_critical=!1;return b};nd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.zpp_gl();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=nd.zpp_pool;nd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:nd};var km=function(){this.zpp_inner=null;this.zpp_inner=new $e;this.zpp_inner.outer=this};f["nape.dynamics.ArbiterList"]=km;km.__name__=["nape","dynamics","ArbiterList"];
km.prototype={zpp_gl:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=0;for(var a=this.zpp_inner.inner.head;null!=a;)a.elt.active&&this.zpp_inner.user_length++,a=a.next}return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite){this.zpp_inner.at_index=0;for(this.zpp_inner.at_ite=
this.zpp_inner.inner.head;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}for(;this.zpp_inner.at_index!=a;){this.zpp_inner.at_index++;for(this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;!this.zpp_inner.at_ite.elt.active;)this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}return this.zpp_inner.at_ite.elt.wrapper()},iterator:function(){this.zpp_vm();return nd.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d;c.zpp_critical=!1;
d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:km};var eh=function(){};f["nape.dynamics.ArbiterType"]=eh;eh.__name__=["nape","dynamics","ArbiterType"];eh.prototype={toString:function(){var a;null==g.ArbiterType_COLLISION&&(g.internal=!0,g.ArbiterType_COLLISION=new eh,g.internal=!1);this==g.ArbiterType_COLLISION?a="COLLISION":(null==g.ArbiterType_SENSOR&&(g.internal=!0,g.ArbiterType_SENSOR=new eh,g.internal=!1),this==g.ArbiterType_SENSOR?a="SENSOR":
(null==g.ArbiterType_FLUID&&(g.internal=!0,g.ArbiterType_FLUID=new eh,g.internal=!1),a=this==g.ArbiterType_FLUID?"FLUID":""));return a},__class__:eh};var Xj=function(){this.zpp_inner=null};f["nape.dynamics.CollisionArbiter"]=Xj;Xj.__name__=["nape","dynamics","CollisionArbiter"];Xj.__super__=Ze;Xj.prototype=l(Ze.prototype,{get_dynamicFriction:function(){var a=this.zpp_inner.colarb;a.invalidated&&(a.invalidated=!1,a.userdef_restitution||(a.restitution=a.s1.material.elasticity<=Math.NEGATIVE_INFINITY||
a.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:a.s1.material.elasticity>=Math.POSITIVE_INFINITY||a.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(a.s1.material.elasticity+a.s2.material.elasticity)/2,0>a.restitution&&(a.restitution=0),1<a.restitution&&(a.restitution=1)),a.userdef_dyn_fric||(a.dyn_fric=Math.sqrt(a.s1.material.dynamicFriction*a.s2.material.dynamicFriction)),a.userdef_stat_fric||(a.stat_fric=Math.sqrt(a.s1.material.staticFriction*a.s2.material.staticFriction)),a.userdef_rfric||
(a.rfric=Math.sqrt(a.s1.material.rollingFriction*a.s2.material.rollingFriction)));return a.dyn_fric},set_dynamicFriction:function(a){var b=this.zpp_inner.colarb;b.dyn_fric=a;b.userdef_dyn_fric=!0;return this.get_dynamicFriction()},get_staticFriction:function(){var a=this.zpp_inner.colarb;a.invalidated&&(a.invalidated=!1,a.userdef_restitution||(a.restitution=a.s1.material.elasticity<=Math.NEGATIVE_INFINITY||a.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:a.s1.material.elasticity>=Math.POSITIVE_INFINITY||
a.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(a.s1.material.elasticity+a.s2.material.elasticity)/2,0>a.restitution&&(a.restitution=0),1<a.restitution&&(a.restitution=1)),a.userdef_dyn_fric||(a.dyn_fric=Math.sqrt(a.s1.material.dynamicFriction*a.s2.material.dynamicFriction)),a.userdef_stat_fric||(a.stat_fric=Math.sqrt(a.s1.material.staticFriction*a.s2.material.staticFriction)),a.userdef_rfric||(a.rfric=Math.sqrt(a.s1.material.rollingFriction*a.s2.material.rollingFriction)));return a.stat_fric},
set_staticFriction:function(a){var b=this.zpp_inner.colarb;b.stat_fric=a;b.userdef_stat_fric=!0;return this.get_staticFriction()},get_rollingFriction:function(){var a=this.zpp_inner.colarb;a.invalidated&&(a.invalidated=!1,a.userdef_restitution||(a.restitution=a.s1.material.elasticity<=Math.NEGATIVE_INFINITY||a.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:a.s1.material.elasticity>=Math.POSITIVE_INFINITY||a.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(a.s1.material.elasticity+a.s2.material.elasticity)/
2,0>a.restitution&&(a.restitution=0),1<a.restitution&&(a.restitution=1)),a.userdef_dyn_fric||(a.dyn_fric=Math.sqrt(a.s1.material.dynamicFriction*a.s2.material.dynamicFriction)),a.userdef_stat_fric||(a.stat_fric=Math.sqrt(a.s1.material.staticFriction*a.s2.material.staticFriction)),a.userdef_rfric||(a.rfric=Math.sqrt(a.s1.material.rollingFriction*a.s2.material.rollingFriction)));return a.rfric},set_rollingFriction:function(a){var b=this.zpp_inner.colarb;b.rfric=a;b.userdef_rfric=!0;return this.get_rollingFriction()},
__class__:Xj,__properties__:l(Ze.prototype.__properties__,{set_rollingFriction:"set_rollingFriction",get_rollingFriction:"get_rollingFriction",set_staticFriction:"set_staticFriction",get_staticFriction:"get_staticFriction",set_dynamicFriction:"set_dynamicFriction",get_dynamicFriction:"get_dynamicFriction"})});var lm=function(){this.zpp_inner=null};f["nape.dynamics.Contact"]=lm;lm.__name__=["nape","dynamics","Contact"];lm.prototype={toString:function(){return null==this.zpp_inner.arbiter||this.zpp_inner.arbiter.cleared?
"{object-pooled}":"{Contact}"},__class__:lm};var de=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};f["nape.dynamics.ContactIterator"]=de;de.__name__=["nape","dynamics","ContactIterator"];de.get=function(a){var b;null==de.zpp_pool?(fh.internal=!0,b=new de,fh.internal=!1):(b=de.zpp_pool,de.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};de.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();
this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=de.zpp_pool;de.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:de};var Xm=function(){this.zpp_inner=null};f["nape.dynamics.ContactList"]=Xm;Xm.__name__=["nape","dynamics","ContactList"];Xm.prototype={get_length:function(){this.zpp_inner.valmod();if(this.zpp_inner.zip_length){this.zpp_inner.zip_length=!1;this.zpp_inner.user_length=0;for(var a=this.zpp_inner.inner.next;null!=
a;){var b=a;b.active&&b.arbiter.active&&this.zpp_inner.user_length++;a=a.next}}return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite){this.zpp_inner.at_index=0;for(this.zpp_inner.at_ite=this.zpp_inner.inner.next;;){var b=this.zpp_inner.at_ite;if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}for(;this.zpp_inner.at_index!=a;){this.zpp_inner.at_index++;
for(this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;;){b=this.zpp_inner.at_ite;if(b.active&&b.arbiter.active)break;this.zpp_inner.at_ite=this.zpp_inner.at_ite.next}}return this.zpp_inner.at_ite.wrapper()},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=de.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Xm,__properties__:{get_length:"get_length"}};var Yj=function(){this.zpp_inner=
null};f["nape.dynamics.FluidArbiter"]=Yj;Yj.__name__=["nape","dynamics","FluidArbiter"];Yj.__super__=Ze;Yj.prototype=l(Ze.prototype,{__class__:Yj});var mm=function(a,b,c,d,e,h){null==h&&(h=-1);null==e&&(e=1);null==d&&(d=-1);null==c&&(c=1);null==b&&(b=-1);null==a&&(a=1);this.zpp_inner=null;null==Wb.zpp_pool?this.zpp_inner=new Wb:(this.zpp_inner=Wb.zpp_pool,Wb.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);null;this.zpp_inner.outer=this;this.zpp_inner.collisionGroup!=a&&(this.zpp_inner.collisionGroup=
a,this.zpp_inner.invalidate());this.zpp_inner.collisionGroup;this.zpp_inner.collisionMask!=b&&(this.zpp_inner.collisionMask=b,this.zpp_inner.invalidate());this.zpp_inner.collisionMask;this.zpp_inner.sensorGroup!=c&&(this.zpp_inner.sensorGroup=c,this.zpp_inner.invalidate());this.zpp_inner.sensorGroup;this.zpp_inner.sensorMask!=d&&(this.zpp_inner.sensorMask=d,this.zpp_inner.invalidate());this.zpp_inner.sensorMask;this.zpp_inner.fluidGroup!=e&&(this.zpp_inner.fluidGroup=e,this.zpp_inner.invalidate());
this.zpp_inner.fluidGroup;this.zpp_inner.fluidMask!=h&&(this.zpp_inner.fluidMask=h,this.zpp_inner.invalidate());this.zpp_inner.fluidMask};f["nape.dynamics.InteractionFilter"]=mm;mm.__name__=["nape","dynamics","InteractionFilter"];mm.prototype={set_collisionGroup:function(a){this.zpp_inner.collisionGroup!=a&&(this.zpp_inner.collisionGroup=a,this.zpp_inner.invalidate());return this.zpp_inner.collisionGroup},set_collisionMask:function(a){this.zpp_inner.collisionMask!=a&&(this.zpp_inner.collisionMask=
a,this.zpp_inner.invalidate());return this.zpp_inner.collisionMask},set_sensorGroup:function(a){this.zpp_inner.sensorGroup!=a&&(this.zpp_inner.sensorGroup=a,this.zpp_inner.invalidate());return this.zpp_inner.sensorGroup},set_sensorMask:function(a){this.zpp_inner.sensorMask!=a&&(this.zpp_inner.sensorMask=a,this.zpp_inner.invalidate());return this.zpp_inner.sensorMask},set_fluidGroup:function(a){this.zpp_inner.fluidGroup!=a&&(this.zpp_inner.fluidGroup=a,this.zpp_inner.invalidate());return this.zpp_inner.fluidGroup},
set_fluidMask:function(a){this.zpp_inner.fluidMask!=a&&(this.zpp_inner.fluidMask=a,this.zpp_inner.invalidate());return this.zpp_inner.fluidMask},__class__:mm,__properties__:{set_fluidMask:"set_fluidMask",set_fluidGroup:"set_fluidGroup",set_sensorMask:"set_sensorMask",set_sensorGroup:"set_sensorGroup",set_collisionMask:"set_collisionMask",set_collisionGroup:"set_collisionGroup"}};var Ym=function(){this.zpp_inner=null};f["nape.dynamics.InteractionGroup"]=Ym;Ym.__name__=["nape","dynamics","InteractionGroup"];
Ym.prototype={toString:function(){var a="InteractionGroup";this.zpp_inner.ignore&&(a+=":ignore");return a},__class__:Ym};var ee=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};f["nape.dynamics.InteractionGroupIterator"]=ee;ee.__name__=["nape","dynamics","InteractionGroupIterator"];ee.get=function(a){var b;null==ee.zpp_pool?(gh.internal=!0,b=new ee,gh.internal=!1):(b=ee.zpp_pool,ee.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};ee.prototype=
{hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=ee.zpp_pool;ee.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:ee};var Zm=function(){this.zpp_inner=null};f["nape.dynamics.InteractionGroupList"]=Zm;Zm.__name__=["nape","dynamics","InteractionGroupList"];Zm.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&
(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},
toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=ee.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Zm,__properties__:{get_length:"get_length"}};var nm=function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.zpp_inner=null;this.zpp_inner=$a.get(a,b,a+c,b+d);this.zpp_inner.outer=this};f["nape.geom.AABB"]=nm;nm.__name__=["nape","geom","AABB"];nm.prototype=
{get_width:function(){this.zpp_inner.validate();return this.zpp_inner.width()},get_height:function(){this.zpp_inner.validate();return this.zpp_inner.height()},toString:function(){this.zpp_inner.validate();return this.zpp_inner.toString()},__class__:nm,__properties__:{get_height:"get_height",get_width:"get_width"}};var $m=function(){this.zpp_inner=null};f["nape.geom.ConvexResult"]=$m;$m.__name__=["nape","geom","ConvexResult"];$m.prototype={toString:function(){return"{ shape: "+y.string(this.zpp_inner.shape)+
" toi: "+this.zpp_inner.toiDistance+" }"},__class__:$m};var fe=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};f["nape.geom.ConvexResultIterator"]=fe;fe.__name__=["nape","geom","ConvexResultIterator"];fe.get=function(a){var b;null==fe.zpp_pool?(hh.internal=!0,b=new fe,hh.internal=!1):(b=fe.zpp_pool,fe.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};fe.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();
this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=fe.zpp_pool;fe.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:fe};var an=function(){this.zpp_inner=null};f["nape.geom.ConvexResultList"]=an;an.__name__=["nape","geom","ConvexResultList"];an.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);
return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=fe.get(this);c.hasNext();){var d;
c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:an,__properties__:{get_length:"get_length"}};var om=function(){this.zpp_inner=null};f["nape.geom.GeomPoly"]=om;om.__name__=["nape","geom","GeomPoly"];om.prototype={toString:function(){var a="GeomPoly[",b=this.zpp_inner.vertices,c=this.zpp_inner.vertices;if(null!=b){do{var d=b;d!=this.zpp_inner.vertices&&(a+=",");a+="{"+d.x+","+d.y+"}";b=b.next}while(b!=c)}return a+"]"},__class__:om};
var Ed=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};f["nape.geom.GeomPolyIterator"]=Ed;Ed.__name__=["nape","geom","GeomPolyIterator"];Ed.get=function(a){var b;null==Ed.zpp_pool?(ih.internal=!0,b=new Ed,ih.internal=!1):(b=Ed.zpp_pool,Ed.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Ed.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=
Ed.zpp_pool;Ed.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Ed};var bn=function(){this.zpp_inner=null};f["nape.geom.GeomPolyList"]=bn;bn.__name__=["nape","geom","GeomPolyList"];bn.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();
this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Ed.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=
",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:bn,__properties__:{get_length:"get_length"}};var cn=function(){this.zpp_inner=null};f["nape.geom.Mat23"]=cn;cn.__name__=["nape","geom","Mat23"];cn.prototype={toString:function(){return"{ a: "+this.zpp_inner.a+" b: "+this.zpp_inner.b+" c: "+this.zpp_inner.c+" d: "+this.zpp_inner.d+" tx: "+this.zpp_inner.tx+" ty: "+this.zpp_inner.ty+" }"},__class__:cn};var dn=function(){this.zpp_inner=null};f["nape.geom.MatMN"]=dn;dn.__name__=["nape",
"geom","MatMN"];dn.prototype={toString:function(){for(var a="{ ",b=!0,c=0,d=this.zpp_inner.m;c<d;){var e=c++;b||(a+="; ");for(var b=!1,h=0,n=this.zpp_inner.n;h<n;)var g=h++,a=a+(this.zpp_inner.x[e*this.zpp_inner.n+g]+" ")}return a+"}"},__class__:dn};var qm=function(a,b){this.zpp_inner=null;this.zpp_inner=new pm;this.zpp_inner.origin.set(a);this.zpp_inner.origin;this.zpp_inner.direction.set(b);this.zpp_inner.zip_dir=!0;this.zpp_inner.direction;this.zpp_inner.maxdist=Math.POSITIVE_INFINITY};f["nape.geom.Ray"]=
qm;qm.__name__=["nape","geom","Ray"];qm.prototype={set_maxDistance:function(a){this.zpp_inner.maxdist=a;return this.zpp_inner.maxdist},__class__:qm,__properties__:{set_maxDistance:"set_maxDistance"}};var rm=function(){this.zpp_inner=null};f["nape.geom.RayResult"]=rm;rm.__name__=["nape","geom","RayResult"];rm.prototype={toString:function(){return"{ shape: "+y.string(this.zpp_inner.shape)+" distance: "+this.zpp_inner.toiDistance+" ?inner: "+y.string(this.zpp_inner.inner)+" }"},__class__:rm};var Fd=
function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};f["nape.geom.RayResultIterator"]=Fd;Fd.__name__=["nape","geom","RayResultIterator"];Fd.get=function(a){var b;null==Fd.zpp_pool?(jh.internal=!0,b=new Fd,jh.internal=!1):(b=Fd.zpp_pool,Fd.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Fd.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=
Fd.zpp_pool;Fd.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Fd};var en=function(){this.zpp_inner=null};f["nape.geom.RayResultList"]=en;en.__name__=["nape","geom","RayResultList"];en.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();
this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Fd.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");
a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:en,__properties__:{get_length:"get_length"}};var da=function(a,b){null==b&&(b=0);null==a&&(a=0);this.zpp_inner=this.zpp_pool=null;this.zpp_inner=Ea.get(a,b,null);this.zpp_inner.outer=this};f["nape.geom.Vec2"]=da;da.__name__=["nape","geom","Vec2"];da.weak=function(a,b){null==b&&(b=0);null==a&&(a=0);return da.get(a,b,!0)};da.get=function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);var d;null==kh.poolVec2?d=new da:(d=kh.poolVec2,
kh.poolVec2=d.zpp_pool,d.zpp_pool=null);if(null==d.zpp_inner)d.zpp_inner=Ea.get(a,b,null),d.zpp_inner.outer=d;else{var e;d.zpp_inner.validate();if(e=d.zpp_inner.x==a)d.zpp_inner.validate(),e=d.zpp_inner.y==b;e||(d.zpp_inner.x=a,d.zpp_inner.y=b,d.zpp_inner.invalidate());d}d.zpp_inner.weak=c;return d};da.prototype={dispose:function(){var a=this.zpp_inner;this.zpp_inner=this.zpp_inner.outer=null;this.zpp_pool=kh.poolVec2;kh.poolVec2=this;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=
null;a._validate=null;a._invalidate=null;a.next=Ea.zpp_pool;Ea.zpp_pool=a},get_x:function(){this.zpp_inner.validate();return this.zpp_inner.x},set_x:function(a){this.zpp_inner.validate();this.zpp_inner.x!=a&&(this.zpp_inner.x=a,this.zpp_inner.invalidate());this.zpp_inner.validate();return this.zpp_inner.x},get_y:function(){this.zpp_inner.validate();return this.zpp_inner.y},set_y:function(a){this.zpp_inner.validate();this.zpp_inner.y!=a&&(this.zpp_inner.y=a,this.zpp_inner.invalidate());this.zpp_inner.validate();
return this.zpp_inner.y},set:function(a){var b=this.setxy(function(){a.zpp_inner.validate();return a.zpp_inner.x}(this),function(){a.zpp_inner.validate();return a.zpp_inner.y}(this));a.zpp_inner.weak?(a.dispose(),!0):!1;return b},setxy:function(a,b){var c;this.zpp_inner.validate();if(c=this.zpp_inner.x==a)this.zpp_inner.validate(),c=this.zpp_inner.y==b;c||(this.zpp_inner.x=a,this.zpp_inner.y=b,this.zpp_inner.invalidate());return this},sub:function(a,b){null==b&&(b=!1);var c=da.get(function(a){a.zpp_inner.validate();
return a.zpp_inner.x}(this)-function(){a.zpp_inner.validate();return a.zpp_inner.x}(this),function(a){a.zpp_inner.validate();return a.zpp_inner.y}(this)-function(){a.zpp_inner.validate();return a.zpp_inner.y}(this),b);a.zpp_inner.weak?(a.dispose(),!0):!1;return c},muleq:function(a){return this.setxy(function(a){a.zpp_inner.validate();return a.zpp_inner.x}(this)*a,function(a){a.zpp_inner.validate();return a.zpp_inner.y}(this)*a)},toString:function(){this.zpp_inner.validate();return this.zpp_inner.toString()},
__class__:da,__properties__:{set_y:"set_y",get_y:"get_y",set_x:"set_x",get_x:"get_x"}};var ge=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};f["nape.geom.Vec2Iterator"]=ge;ge.__name__=["nape","geom","Vec2Iterator"];ge.get=function(a){var b;null==ge.zpp_pool?(gg.internal=!0,b=new ge,gg.internal=!1):(b=ge.zpp_pool,ge.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};ge.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=
this.zpp_inner.zpp_gl();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=ge.zpp_pool;ge.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:ge};var Af=function(){this.zpp_inner=null;this.zpp_inner=new gg;this.zpp_inner.outer=this};f["nape.geom.Vec2List"]=Af;Af.__name__=["nape","geom","Vec2List"];Af.prototype={zpp_gl:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=
this.zpp_inner.inner.length);return this.zpp_inner.user_length},zpp_vm:function(){this.zpp_inner.valmod()},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&(a=this.zpp_gl()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},push:function(a){this.zpp_inner.modify_test();
this.zpp_vm();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=this.empty()?null:this.zpp_inner.inner.iterator_at(this.zpp_gl()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},empty:function(){return 0==this.zpp_gl()},
iterator:function(){this.zpp_vm();return ge.get(this)},toString:function(){for(var a="[",b=!0,c=this.iterator();c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:Af};var fn=function(){this.zpp_inner=null};f["nape.geom.Vec3"]=fn;fn.__name__=["nape","geom","Vec3"];fn.prototype={toString:function(){this.zpp_inner.validate();var a="{ x: "+this.zpp_inner.x+" y: ";this.zpp_inner.validate();a=a+this.zpp_inner.y+" z: ";
this.zpp_inner.validate();return a+this.zpp_inner.z+" }"},__class__:fn};var lh=function(){};f["nape.geom.Winding"]=lh;lh.__name__=["nape","geom","Winding"];lh.prototype={toString:function(){var a;null==g.Winding_UNDEFINED&&(g.internal=!0,g.Winding_UNDEFINED=new lh,g.internal=!1);this==g.Winding_UNDEFINED?a="UNDEFINED":(null==g.Winding_CLOCKWISE&&(g.internal=!0,g.Winding_CLOCKWISE=new lh,g.internal=!1),this==g.Winding_CLOCKWISE?a="CLOCKWISE":(null==g.Winding_ANTICLOCKWISE&&(g.internal=!0,g.Winding_ANTICLOCKWISE=
new lh,g.internal=!1),a=this==g.Winding_ANTICLOCKWISE?"ANTICLOCKWISE":""));return a},__class__:lh};var he=function(){this.zpp_inner_i=null};f["nape.phys.Interactor"]=he;he.__name__=["nape","phys","Interactor"];he.prototype={get_userData:function(){null==this.zpp_inner_i.userData&&(this.zpp_inner_i.userData={});return this.zpp_inner_i.userData},get_castBody:function(){return null!=this.zpp_inner_i.ibody?this.zpp_inner_i.ibody.outer:null},get_cbTypes:function(){null==this.zpp_inner_i.wrap_cbTypes&&
this.zpp_inner_i.setupcbTypes();return this.zpp_inner_i.wrap_cbTypes},toString:function(){return""},__class__:he,__properties__:{get_cbTypes:"get_cbTypes",get_castBody:"get_castBody",get_userData:"get_userData"}};var mh=function(a,b){this.zpp_inner_i=this.zpp_inner=null;this.zpp_inner=new Be;this.zpp_inner.outer=this;this.zpp_inner.outer_i=this;this.zpp_inner_i=this.zpp_inner;null!=b?(b.zpp_inner.validate(),this.zpp_inner.posx=b.zpp_inner.x,b.zpp_inner.validate(),this.zpp_inner.posy=b.zpp_inner.y):
(this.zpp_inner.posx=0,this.zpp_inner.posy=0);this.set_type(null==a?function(){null==g.BodyType_DYNAMIC&&(g.internal=!0,g.BodyType_DYNAMIC=new La,g.internal=!1);return g.BodyType_DYNAMIC}(this):a);null!=b&&(b.zpp_inner.weak?(b.dispose(),!0):!1);this.zpp_inner_i.insert_cbtype(Eb.ANY_BODY.zpp_inner)};f["nape.phys.Body"]=mh;mh.__name__=["nape","phys","Body"];mh.__super__=he;mh.prototype=l(he.prototype,{set_type:function(a){this.zpp_inner.immutable_midstep("Body::type");Be.types[this.zpp_inner.type]!=
a&&(null==g.BodyType_DYNAMIC&&(g.internal=!0,g.BodyType_DYNAMIC=new La,g.internal=!1),a==g.BodyType_DYNAMIC?a=g.id_BodyType_DYNAMIC:(null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new La,g.internal=!1),a=a==g.BodyType_KINEMATIC?g.id_BodyType_KINEMATIC:g.id_BodyType_STATIC),a==g.id_BodyType_STATIC&&null!=this.zpp_inner.space&&(this.zpp_inner.velx=0,this.zpp_inner.vely=0,this.zpp_inner.angvel=0),this.zpp_inner.invalidate_type(),null!=this.zpp_inner.space?this.zpp_inner.space.transmitType(this.zpp_inner,
a):this.zpp_inner.type=a);return Be.types[this.zpp_inner.type]},set_isBullet:function(a){this.zpp_inner.bulletEnabled=a;return this.zpp_inner.bulletEnabled},get_space:function(){return null==this.zpp_inner.space?null:this.zpp_inner.space.outer},get_position:function(){null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();return this.zpp_inner.wrap_pos},set_position:function(a){null==this.zpp_inner.wrap_pos&&this.zpp_inner.setupPosition();this.zpp_inner.wrap_pos.set(a);null==this.zpp_inner.wrap_pos&&
this.zpp_inner.setupPosition();return this.zpp_inner.wrap_pos},get_velocity:function(){null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();return this.zpp_inner.wrap_vel},setVelocityFromTarget:function(a,b,c){c=1/c;null==this.zpp_inner.wrap_vel&&this.zpp_inner.setupVelocity();this.zpp_inner.wrap_vel.set(a.sub(function(a){null==a.zpp_inner.wrap_pos&&a.zpp_inner.setupPosition();return a.zpp_inner.wrap_pos}(this),!0).muleq(c));this.set_angularVel((b-this.zpp_inner.rot)*c);a.zpp_inner.weak?
(a.dispose(),!0):!1;return this},set_force:function(a){null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce();this.zpp_inner.wrap_force.set(a);null==this.zpp_inner.wrap_force&&this.zpp_inner.setupForce();return this.zpp_inner.wrap_force},set_rotation:function(a){this.zpp_inner.immutable_midstep("Body::rotation");this.zpp_inner.rot!=a&&(this.zpp_inner.rot=a,this.zpp_inner.invalidate_rot(),this.zpp_inner.wake());return this.zpp_inner.rot},set_angularVel:function(a){this.zpp_inner.angvel!=a&&(this.zpp_inner.angvel=
a,this.zpp_inner.wake());return this.zpp_inner.angvel},set_allowRotation:function(a){this.zpp_inner.immutable_midstep("Body::"+(null==a?"null":""+a));!this.zpp_inner.norotate!=a&&(this.zpp_inner.norotate=!a,this.zpp_inner.invalidate_inertia());return!this.zpp_inner.norotate},set_mass:function(a){this.zpp_inner.immutable_midstep("Body::mass");this.zpp_inner.massMode=g.id_MassMode_FIXED;this.zpp_inner.cmass=a;this.zpp_inner.invalidate_mass();this.zpp_inner.validate_mass();return this.zpp_inner.cmass},
set_gravMassScale:function(a){this.zpp_inner.immutable_midstep("Body::gravMassScale");this.zpp_inner.gravMassMode=g.id_GravMassMode_SCALED;this.zpp_inner.gravMassScale=a;this.zpp_inner.invalidate_gravMassScale();this.zpp_inner.validate_gravMassScale();return this.zpp_inner.gravMassScale},localPointToWorld:function(a,b){null==b&&(b=!1);this.zpp_inner.validate_axis();var c=0,d=0,c=this.zpp_inner.axisy;a.zpp_inner.validate();c*=a.zpp_inner.x;d=this.zpp_inner.axisx;a.zpp_inner.validate();c-=d*a.zpp_inner.y;
a.zpp_inner.validate();d=a.zpp_inner.x*this.zpp_inner.axisx;a.zpp_inner.validate();d+=a.zpp_inner.y*this.zpp_inner.axisy;a.zpp_inner.weak?(a.dispose(),!0):!1;return da.get(c+this.zpp_inner.posx,d+this.zpp_inner.posy,b)},applyImpulse:function(a,b,c){null==c&&(c=!1);if(c&&this.zpp_inner.component.sleeping)return a.zpp_inner.weak?(a.dispose(),!0):!1,null!=b&&(b.zpp_inner.weak?(b.dispose(),!0):!1),this;this.zpp_inner.validate_mass();var d=this.zpp_inner.imass,e=this.zpp_inner,h=this.zpp_inner.velx;a.zpp_inner.validate();
e.velx=h+a.zpp_inner.x*d;e=this.zpp_inner;h=this.zpp_inner.vely;a.zpp_inner.validate();e.vely=h+a.zpp_inner.y*d;if(null!=b){var n=0,d=0;b.zpp_inner.validate();n=b.zpp_inner.x-this.zpp_inner.posx;b.zpp_inner.validate();d=b.zpp_inner.y-this.zpp_inner.posy;this.zpp_inner.validate_inertia();e=this.zpp_inner;h=this.zpp_inner.angvel;a.zpp_inner.validate();n*=a.zpp_inner.y;a.zpp_inner.validate();e.angvel=h+(n-a.zpp_inner.x*d)*this.zpp_inner.iinertia;b.zpp_inner.weak?(b.dispose(),!0):!1}c||this.zpp_inner.type==
g.id_BodyType_DYNAMIC&&this.zpp_inner.wake();a.zpp_inner.weak?(a.dispose(),!0):!1;return this},toString:function(){return(this.zpp_inner.world?"(space::world":"("+(this.zpp_inner.type==g.id_BodyType_DYNAMIC?"dynamic":this.zpp_inner.type==g.id_BodyType_STATIC?"static":"kinematic"))+")#"+this.zpp_inner_i.id},__class__:mh,__properties__:l(he.prototype.__properties__,{set_gravMassScale:"set_gravMassScale",set_mass:"set_mass",set_allowRotation:"set_allowRotation",set_angularVel:"set_angularVel",set_rotation:"set_rotation",
set_force:"set_force",get_velocity:"get_velocity",set_position:"set_position",get_position:"get_position",get_space:"get_space",set_isBullet:"set_isBullet",set_type:"set_type"})});var hc=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};f["nape.phys.BodyIterator"]=hc;hc.__name__=["nape","phys","BodyIterator"];hc.get=function(a){var b;null==hc.zpp_pool?(Ce.internal=!0,b=new hc,Ce.internal=!1):(b=hc.zpp_pool,hc.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=
!1;return b};hc.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=hc.zpp_pool;hc.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:hc};var sm=function(){this.zpp_inner=null;this.zpp_inner=new Ce;this.zpp_inner.outer=this};f["nape.phys.BodyList"]=sm;sm.__name__=["nape","phys","BodyList"];sm.prototype={get_length:function(){this.zpp_inner.valmod();
this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},
push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&
this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),
null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a=
"[",b=!0,c;this.zpp_inner.valmod();for(c=hc.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:sm,__properties__:{get_length:"get_length"}};var La=function(){};f["nape.phys.BodyType"]=La;La.__name__=["nape","phys","BodyType"];La.prototype={toString:function(){var a;null==g.BodyType_STATIC&&(g.internal=!0,g.BodyType_STATIC=new La,g.internal=!1);this==g.BodyType_STATIC?a="STATIC":(null==g.BodyType_DYNAMIC&&
(g.internal=!0,g.BodyType_DYNAMIC=new La,g.internal=!1),this==g.BodyType_DYNAMIC?a="DYNAMIC":(null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new La,g.internal=!1),a=this==g.BodyType_KINEMATIC?"KINEMATIC":""));return a},__class__:La};var tm=function(){this.zpp_inner=null};f["nape.phys.Compound"]=tm;tm.__name__=["nape","phys","Compound"];tm.__super__=he;tm.prototype=l(he.prototype,{toString:function(){return"Compound"+this.zpp_inner_i.id},__class__:tm});var ic=function(){this.zpp_next=
null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};f["nape.phys.CompoundIterator"]=ic;ic.__name__=["nape","phys","CompoundIterator"];ic.get=function(a){var b;null==ic.zpp_pool?(af.internal=!0,b=new ic,af.internal=!1):(b=ic.zpp_pool,ic.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};ic.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=ic.zpp_pool;ic.zpp_pool=
this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:ic};var um=function(){this.zpp_inner=null;this.zpp_inner=new af;this.zpp_inner.outer=this};f["nape.phys.CompoundList"]=um;um.__name__=["nape","phys","CompoundList"];um.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();
this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=
!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),this.zpp_inner.invalidate());return b},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=ic.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:um,__properties__:{get_length:"get_length"}};var Bf=function(a,b){null==b&&(b=1);null==a&&(a=1);this.zpp_inner=
null;null==bf.zpp_pool?this.zpp_inner=new bf:(this.zpp_inner=bf.zpp_pool,bf.zpp_pool=this.zpp_inner.next,this.zpp_inner.next=null);null;this.zpp_inner.outer=this;a!=1E3*this.zpp_inner.density&&(this.zpp_inner.density=a/1E3,this.zpp_inner.invalidate());1E3*this.zpp_inner.density;b!=this.zpp_inner.viscosity&&(this.zpp_inner.viscosity=b/1,this.zpp_inner.invalidate());this.zpp_inner.viscosity};f["nape.phys.FluidProperties"]=Bf;Bf.__name__=["nape","phys","FluidProperties"];Bf.prototype={set_density:function(a){a!=
1E3*this.zpp_inner.density&&(this.zpp_inner.density=a/1E3,this.zpp_inner.invalidate());return 1E3*this.zpp_inner.density},set_viscosity:function(a){a!=this.zpp_inner.viscosity&&(this.zpp_inner.viscosity=a/1,this.zpp_inner.invalidate());return this.zpp_inner.viscosity},toString:function(){return"{ density: "+1E3*this.zpp_inner.density+" viscosity: "+this.zpp_inner.viscosity+" gravity: "+y.string(this.zpp_inner.wrap_gravity)+" }"},__class__:Bf,__properties__:{set_viscosity:"set_viscosity",set_density:"set_density"}};
var nh=function(){};f["nape.phys.GravMassMode"]=nh;nh.__name__=["nape","phys","GravMassMode"];nh.prototype={toString:function(){var a;null==g.GravMassMode_DEFAULT&&(g.internal=!0,g.GravMassMode_DEFAULT=new nh,g.internal=!1);this==g.GravMassMode_DEFAULT?a="DEFAULT":(null==g.GravMassMode_FIXED&&(g.internal=!0,g.GravMassMode_FIXED=new nh,g.internal=!1),this==g.GravMassMode_FIXED?a="FIXED":(null==g.GravMassMode_SCALED&&(g.internal=!0,g.GravMassMode_SCALED=new nh,g.internal=!1),a=this==g.GravMassMode_SCALED?
"SCALED":""));return a},__class__:nh};var Zj=function(){};f["nape.phys.InertiaMode"]=Zj;Zj.__name__=["nape","phys","InertiaMode"];Zj.prototype={toString:function(){var a;null==g.InertiaMode_DEFAULT&&(g.internal=!0,g.InertiaMode_DEFAULT=new Zj,g.internal=!1);this==g.InertiaMode_DEFAULT?a="DEFAULT":(null==g.InertiaMode_FIXED&&(g.internal=!0,g.InertiaMode_FIXED=new Zj,g.internal=!1),a=this==g.InertiaMode_FIXED?"FIXED":"");return a},__class__:Zj};var ie=function(){this.zpp_next=null;this.zpp_critical=
!1;this.zpp_i=0;this.zpp_inner=null};f["nape.phys.InteractorIterator"]=ie;ie.__name__=["nape","phys","InteractorIterator"];ie.get=function(a){var b;null==ie.zpp_pool?(oh.internal=!0,b=new ie,oh.internal=!1):(b=ie.zpp_pool,ie.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};ie.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=ie.zpp_pool;ie.zpp_pool=this;this.zpp_inner=
null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:ie};var gn=function(){this.zpp_inner=null};f["nape.phys.InteractorList"]=gn;gn.__name__=["nape","phys","InteractorList"];gn.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&(a=
this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer_i},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=ie.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();
b=!1}return a+"]"},__class__:gn,__properties__:{get_length:"get_length"}};var $j=function(){};f["nape.phys.MassMode"]=$j;$j.__name__=["nape","phys","MassMode"];$j.prototype={toString:function(){var a;null==g.MassMode_DEFAULT&&(g.internal=!0,g.MassMode_DEFAULT=new $j,g.internal=!1);this==g.MassMode_DEFAULT?a="DEFAULT":(null==g.MassMode_FIXED&&(g.internal=!0,g.MassMode_FIXED=new $j,g.internal=!1),a=this==g.MassMode_FIXED?"FIXED":"");return a},__class__:$j};var De=function(){this.zpp_inner_i=this.zpp_inner=
null};f["nape.shape.Shape"]=De;De.__name__=["nape","shape","Shape"];De.__super__=he;De.prototype=l(he.prototype,{get_body:function(){return null!=this.zpp_inner.body?this.zpp_inner.body.outer:null},set_localCOM:function(a){this.zpp_inner.immutable_midstep("Body::localCOM");null==this.zpp_inner.wrap_localCOM&&(this.zpp_inner.type==g.id_ShapeType_CIRCLE?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM());this.zpp_inner.wrap_localCOM.set(a);null==this.zpp_inner.wrap_localCOM&&
(this.zpp_inner.type==g.id_ShapeType_CIRCLE?this.zpp_inner.circle.setupLocalCOM():this.zpp_inner.polygon.setupLocalCOM());return this.zpp_inner.wrap_localCOM},set_fluidProperties:function(a){this.zpp_inner.setFluid(a.zpp_inner);this.zpp_inner.immutable_midstep("Shape::fluidProperties");null==this.zpp_inner.fluidProperties&&this.zpp_inner.setFluid((new Bf).zpp_inner);return this.zpp_inner.fluidProperties.wrapper()},set_sensorEnabled:function(a){this.zpp_inner.immutable_midstep("Shape::sensorEnabled");
this.zpp_inner.sensorEnabled=a;this.zpp_inner.wake();return this.zpp_inner.sensorEnabled},rotate:function(a){this.zpp_inner.immutable_midstep("Shape::rotate()");if(0!=a%(2*Math.PI)){var b=Math.cos(a),a=Math.sin(a);this.zpp_inner.type==g.id_ShapeType_CIRCLE?this.zpp_inner.circle.__rotate(a,b):this.zpp_inner.polygon.__rotate(a,b)}return this},toString:function(){return(this.zpp_inner.type==g.id_ShapeType_CIRCLE?"Circle":"Polygon")+"#"+this.zpp_inner_i.id},__class__:De,__properties__:l(he.prototype.__properties__,
{set_sensorEnabled:"set_sensorEnabled",set_fluidProperties:"set_fluidProperties",set_localCOM:"set_localCOM",get_body:"get_body"})});var bk=function(a,b,c,d){this.zpp_inner_zn=null;De.call(this);this.zpp_inner_zn=new ak;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner_i=this.zpp_inner=this.zpp_inner_zn;this.zpp_inner_i.outer_i=this;this.zpp_inner.immutable_midstep("Circle::radius");a!=this.zpp_inner_zn.radius&&(this.zpp_inner_zn.radius=a,this.zpp_inner_zn.invalidate_radius());
this.zpp_inner_zn.radius;null==b?(this.zpp_inner.localCOMx=0,this.zpp_inner.localCOMy=0):(b.zpp_inner.validate(),this.zpp_inner.localCOMx=b.zpp_inner.x,b.zpp_inner.validate(),this.zpp_inner.localCOMy=b.zpp_inner.y,b.zpp_inner.weak?(b.dispose(),!0):!1);null==c?(null==na.zpp_pool?this.zpp_inner.material=new na:(this.zpp_inner.material=na.zpp_pool,na.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null),null):(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(c.zpp_inner),
this.zpp_inner.material.wrapper());null==d?(null==Wb.zpp_pool?this.zpp_inner.filter=new Wb:(this.zpp_inner.filter=Wb.zpp_pool,Wb.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null),null):(this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(d.zpp_inner),this.zpp_inner.filter.wrapper());this.zpp_inner_i.insert_cbtype(Eb.ANY_SHAPE.zpp_inner)};f["nape.shape.Circle"]=bk;bk.__name__=["nape","shape","Circle"];bk.__super__=De;bk.prototype=l(De.prototype,{__class__:bk});
var vm=function(){this.zpp_inner=null};f["nape.shape.Edge"]=vm;vm.__name__=["nape","shape","Edge"];vm.prototype={toString:function(){if(null==this.zpp_inner.polygon)return"Edge(object-pooled)";if(null==this.zpp_inner.polygon.body)return this.zpp_inner.polygon.validate_laxi(),"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" }";this.zpp_inner.polygon.validate_gaxi();return"{ localNormal : "+("{ x: "+this.zpp_inner.lnormx+" y: "+this.zpp_inner.lnormy+" }")+" worldNormal : "+
("{ x: "+this.zpp_inner.gnormx+" y: "+this.zpp_inner.gnormy+" }")+" }"},__class__:vm};var ye=function(){this.zpp_next=null;this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};f["nape.shape.EdgeIterator"]=ye;ye.__name__=["nape","shape","EdgeIterator"];ye.get=function(a){var b;null==ye.zpp_pool?(ph.internal=!0,b=new ye,ph.internal=!1):(b=ye.zpp_pool,ye.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};ye.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=
this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=ye.zpp_pool;ye.zpp_pool=this;this.zpp_inner=null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:ye};var hn=function(){this.zpp_inner=null};f["nape.shape.EdgeList"]=hn;hn.__name__=["nape","shape","EdgeList"];hn.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);
return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();this.zpp_inner.reverse_flag&&a!=this.get_length()-1&&(a=this.get_length()-2-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.wrapper()},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();
for(c=ye.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:hn,__properties__:{get_length:"get_length"}};var od=function(a,b,c){this.zpp_inner_zn=null;De.call(this);this.zpp_inner_zn=new ck;this.zpp_inner_zn.outer=this;this.zpp_inner_zn.outer_zn=this;this.zpp_inner_i=this.zpp_inner=this.zpp_inner_zn;this.zpp_inner_i.outer_i=this;if(a instanceof Array&&null==a.__enum__)for(var d=0;d<a.length;){var e=
a[d];++d;var h=e;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(da.get(function(){h.zpp_inner.validate();return h.zpp_inner.x}(this),function(){h.zpp_inner.validate();return h.zpp_inner.y}(this),!1))}else if(ga.__instanceof(a,Af))for(d=a.iterator();d.hasNext();){var n;d.zpp_critical=!1;n=d.zpp_inner.at(d.zpp_i++);null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(da.get(function(){n.zpp_inner.validate();
return n.zpp_inner.x}(this),function(){n.zpp_inner.validate();return n.zpp_inner.y}(this),!1))}else if(ga.__instanceof(a,om)&&(d=a.zpp_inner.vertices,null!=d)){e=d;do{var g=da.get(e.x,e.y,null),e=e.next;null==this.zpp_inner_zn.wrap_lverts&&this.zpp_inner_zn.getlverts();this.zpp_inner_zn.wrap_lverts.push(da.get(function(){g.zpp_inner.validate();return g.zpp_inner.x}(this),function(){g.zpp_inner.validate();return g.zpp_inner.y}(this),!1));g.dispose()}while(e!=d)}if(a instanceof Array&&null==a.__enum__)for(d=
0;d<a.length;){var e=a[d],f;if(f=e.zpp_inner.weak)e.dispose(),f=!0;f?a.splice(d,1):d++}else if(ga.__instanceof(a,Af)){null!=a.zpp_inner._validate&&a.zpp_inner._validate();a=a.zpp_inner.inner;d=null;for(e=a.head;null!=e;)f=e.elt,f.outer.zpp_inner.weak?(e=a.erase(d),f.outer.zpp_inner.weak?(f.outer.dispose(),!0):!1):(d=e,e=e.next)}null==b?(null==na.zpp_pool?this.zpp_inner.material=new na:(this.zpp_inner.material=na.zpp_pool,na.zpp_pool=this.zpp_inner.material.next,this.zpp_inner.material.next=null),
null):(this.zpp_inner.immutable_midstep("Shape::material"),this.zpp_inner.setMaterial(b.zpp_inner),this.zpp_inner.material.wrapper());null==c?(null==Wb.zpp_pool?this.zpp_inner.filter=new Wb:(this.zpp_inner.filter=Wb.zpp_pool,Wb.zpp_pool=this.zpp_inner.filter.next,this.zpp_inner.filter.next=null),null):(this.zpp_inner.immutable_midstep("Shape::filter"),this.zpp_inner.setFilter(c.zpp_inner),this.zpp_inner.filter.wrapper());this.zpp_inner_i.insert_cbtype(Eb.ANY_SHAPE.zpp_inner)};f["nape.shape.Polygon"]=
od;od.__name__=["nape","shape","Polygon"];od.rect=function(a,b,c,d,e){null==e&&(e=!1);return[da.get(a,b,e),da.get(a+c,b,e),da.get(a+c,b+d,e),da.get(a,b+d,e)]};od.box=function(a,b,c){null==c&&(c=!1);return od.rect(-a/2,-b/2,a,b,c)};od.regular=function(a,b,c,d,e){null==e&&(e=!1);null==d&&(d=0);for(var h=[],n=2*Math.PI/c,g=0;g<c;){var f=g++*n+d,f=da.get(Math.cos(f)*a,Math.sin(f)*b,e);h.push(f)}return h};od.__super__=De;od.prototype=l(De.prototype,{__class__:od});var Xb=function(){this.zpp_next=null;
this.zpp_critical=!1;this.zpp_i=0;this.zpp_inner=null};f["nape.shape.ShapeIterator"]=Xb;Xb.__name__=["nape","shape","ShapeIterator"];Xb.get=function(a){var b;null==Xb.zpp_pool?(cf.internal=!0,b=new Xb,cf.internal=!1):(b=Xb.zpp_pool,Xb.zpp_pool=b.zpp_next);b.zpp_i=0;b.zpp_inner=a;b.zpp_critical=!1;return b};Xb.prototype={hasNext:function(){this.zpp_inner.zpp_inner.valmod();var a=this.zpp_inner.get_length();this.zpp_critical=!0;if(this.zpp_i<a)return!0;this.zpp_next=Xb.zpp_pool;Xb.zpp_pool=this;this.zpp_inner=
null;return!1},next:function(){this.zpp_critical=!1;return this.zpp_inner.at(this.zpp_i++)},__class__:Xb};var wm=function(){this.zpp_inner=null;this.zpp_inner=new cf;this.zpp_inner.outer=this};f["nape.shape.ShapeList"]=wm;wm.__name__=["nape","shape","ShapeList"];wm.prototype={get_length:function(){this.zpp_inner.valmod();this.zpp_inner.zip_length&&(this.zpp_inner.zip_length=!1,this.zpp_inner.user_length=this.zpp_inner.inner.length);return this.zpp_inner.user_length},at:function(a){this.zpp_inner.valmod();
this.zpp_inner.reverse_flag&&(a=this.get_length()-1-a);if(a<this.zpp_inner.at_index||null==this.zpp_inner.at_ite)this.zpp_inner.at_index=a,this.zpp_inner.at_ite=this.zpp_inner.inner.iterator_at(a);else for(;this.zpp_inner.at_index!=a;)this.zpp_inner.at_index++,this.zpp_inner.at_ite=this.zpp_inner.at_ite.next;return this.zpp_inner.at_ite.elt.outer},push:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?
this.zpp_inner.inner.add(a.zpp_inner):(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},unshift:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):
!0)this.zpp_inner.reverse_flag?(null==this.zpp_inner.push_ite&&(this.zpp_inner.push_ite=null==this.zpp_inner.inner.head?null:this.zpp_inner.inner.iterator_at(this.get_length()-1)),this.zpp_inner.push_ite=this.zpp_inner.inner.insert(this.zpp_inner.push_ite,a.zpp_inner)):this.zpp_inner.inner.add(a.zpp_inner),this.zpp_inner.invalidate(),null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},pop:function(){this.zpp_inner.modify_test();this.zpp_inner.valmod();var a=null;if(this.zpp_inner.reverse_flag){var a=
this.zpp_inner.inner.head.elt,b=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(b);this.zpp_inner.dontremove||this.zpp_inner.inner.pop()}else{null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var b=1==this.get_length()?null:this.zpp_inner.inner.iterator_at(this.get_length()-2),a=null==b?this.zpp_inner.inner.head.elt:b.next.elt,c=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(c);this.zpp_inner.dontremove||this.zpp_inner.inner.erase(b)}this.zpp_inner.invalidate();
return a.outer},shift:function(){this.zpp_inner.modify_test();this.zpp_inner.valmod();var a=null;if(this.zpp_inner.reverse_flag){null!=this.zpp_inner.at_ite&&null==this.zpp_inner.at_ite.next&&(this.zpp_inner.at_ite=null);var b;b=1==this.get_length()?null:this.zpp_inner.inner.iterator_at(this.get_length()-2);var a=null==b?this.zpp_inner.inner.head.elt:b.next.elt,c=a.outer;null!=this.zpp_inner.subber&&this.zpp_inner.subber(c);this.zpp_inner.dontremove||this.zpp_inner.inner.erase(b)}else a=this.zpp_inner.inner.head.elt,
b=a.outer,null!=this.zpp_inner.subber&&this.zpp_inner.subber(b),this.zpp_inner.dontremove||this.zpp_inner.inner.pop();this.zpp_inner.invalidate();return a.outer},add:function(a){return this.zpp_inner.reverse_flag?this.push(a):this.unshift(a)},remove:function(a){this.zpp_inner.modify_test();this.zpp_inner.valmod();var b;b=!1;for(var c=this.zpp_inner.inner.head;null!=c;){if(c.elt==a.zpp_inner){b=!0;break}c=c.next}b&&(null!=this.zpp_inner.subber&&this.zpp_inner.subber(a),this.zpp_inner.dontremove||this.zpp_inner.inner.remove(a.zpp_inner),
this.zpp_inner.invalidate());return b},clear:function(){if(this.zpp_inner.reverse_flag)for(;null!=this.zpp_inner.inner.head;)this.pop();else for(;null!=this.zpp_inner.inner.head;)this.shift()},empty:function(){return null==this.zpp_inner.inner.head},toString:function(){var a="[",b=!0,c;this.zpp_inner.valmod();for(c=Xb.get(this);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);b||(a+=",");a=null==d?a+"NULL":a+d.toString();b=!1}return a+"]"},__class__:wm,__properties__:{get_length:"get_length"}};
var dk=function(){};f["nape.shape.ShapeType"]=dk;dk.__name__=["nape","shape","ShapeType"];dk.prototype={toString:function(){var a;null==g.ShapeType_CIRCLE&&(g.internal=!0,g.ShapeType_CIRCLE=new dk,g.internal=!1);this==g.ShapeType_CIRCLE?a="CIRCLE":(null==g.ShapeType_POLYGON&&(g.internal=!0,g.ShapeType_POLYGON=new dk,g.internal=!1),a=this==g.ShapeType_POLYGON?"POLYGON":"");return a},__class__:dk};var hg=function(){};f["nape.shape.ValidationResult"]=hg;hg.__name__=["nape","shape","ValidationResult"];
hg.prototype={toString:function(){var a;null==g.ValidationResult_VALID&&(g.internal=!0,g.ValidationResult_VALID=new hg,g.internal=!1);this==g.ValidationResult_VALID?a="VALID":(null==g.ValidationResult_DEGENERATE&&(g.internal=!0,g.ValidationResult_DEGENERATE=new hg,g.internal=!1),this==g.ValidationResult_DEGENERATE?a="DEGENERATE":(null==g.ValidationResult_CONCAVE&&(g.internal=!0,g.ValidationResult_CONCAVE=new hg,g.internal=!1),this==g.ValidationResult_CONCAVE?a="CONCAVE":(null==g.ValidationResult_SELF_INTERSECTING&&
(g.internal=!0,g.ValidationResult_SELF_INTERSECTING=new hg,g.internal=!1),a=this==g.ValidationResult_SELF_INTERSECTING?"SELF_INTERSECTING":"")));return a},__class__:hg};var ig=function(){};f["nape.space.Broadphase"]=ig;ig.__name__=["nape","space","Broadphase"];ig.prototype={toString:function(){var a;null==g.Broadphase_DYNAMIC_AABB_TREE&&(g.internal=!0,g.Broadphase_DYNAMIC_AABB_TREE=new ig,g.internal=!1);this==g.Broadphase_DYNAMIC_AABB_TREE?a="DYNAMIC_AABB_TREE":(null==g.Broadphase_SWEEP_AND_PRUNE&&
(g.internal=!0,g.Broadphase_SWEEP_AND_PRUNE=new ig,g.internal=!1),a=this==g.Broadphase_SWEEP_AND_PRUNE?"SWEEP_AND_PRUNE":"");return a},__class__:ig};var ym=function(a,b){this.zpp_inner=null;this.zpp_inner=new xm(null==a?null:a.zpp_inner,b);this.zpp_inner.outer=this;null!=a&&(a.zpp_inner.weak?(a.dispose(),!0):!1)};f["nape.space.Space"]=ym;ym.__name__=["nape","space","Space"];ym.prototype={get_gravity:function(){null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();return this.zpp_inner.wrap_gravity},
set_gravity:function(a){null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();this.zpp_inner.wrap_gravity.set(a);null==this.zpp_inner.wrap_gravity&&this.zpp_inner.getgravity();return this.zpp_inner.wrap_gravity},clear:function(){this.zpp_inner.clear()},step:function(a,b,c){null==c&&(c=10);null==b&&(b=10);this.zpp_inner.step(a,b,c)},rayCast:function(a,b,c){null==b&&(b=!1);return this.zpp_inner.rayCast(a,b,c)},__class__:ym,__properties__:{set_gravity:"set_gravity",get_gravity:"get_gravity"}};
var oa=function(a,b){null==b&&(b=!0);null==a&&(a=!1);k.call(this);ua.init();tc.setupBaseURL();C.onManifestInit.connect(oa.onManifestInit);x.root.add(new qi);a&&(b?x.root.add(new kb(q.gameWidth,q.gameHeight)):(oa.autoScaleEnabled=!0,x.root.add(new A),x.root.add(new pb)))};f["nick.NickUtils"]=oa;oa.__name__=["nick","NickUtils"];oa.configure=function(a){if(null==a.nick)throw"No nick section found in config.json";if(null==a.nick.url)throw"nick.url not set in config.json";if(null!=a.nick.url&&-1<a.nick.url.indexOf("GAME_PAGE.html"))throw"nick.url requires actual game url (should not be GAME_PAGE)";
a=Ga;if(""==a.REDIRECT_URL||null==a.REDIRECT_URL)throw"Please call AntiPiracy.checkPiracy(GameData.config.nick.url) before NickUtils.configure!";if(null!=a.DOMAIN_LIST)for(var b=0,c=oa.staging;b<c.length;){var d=c[b];++b;a.DOMAIN_LIST.push(d)}oa.setupSdkListeners()};oa.onManifestInit=function(a,b){tc.setupManifest(b)};oa.initDeltaDNA=function(a,b){var c=a.delta_dna;F.allowLiveKey=!0==c.allowLiveKey;F.staging=oa.staging;var d=a.nick.url;null!=a.version&&(F.clientVersion=a.version);null!=c.platforms&&
F.setPlatforms(c.platforms);F.onReady.connect(b).once();F.init(d,c.key_dev,c.key_live,c.collect,c.engage)};oa.setupSdkListeners=function(){ya.onAudioToggle=oa.onAudioToggle;ya.onPlaybackToggle=oa.onPlaybackToggle};oa.onAudioToggle=function(a){oa.onMute.emit(a)};oa.onPlaybackToggle=function(a){a?oa.onResume.emit():oa.onPause.emit()};oa.__super__=k;oa.prototype=l(k.prototype,{get_name:function(){return"NickUtils_0"},onUpdate:function(){oa.autoScaleEnabled&&q.setScale(pb.SCALE)},__class__:oa});var Ga=
function(){};f["nicksdk.AntiPiracy"]=Ga;Ga.__name__=["nicksdk","AntiPiracy"];Ga.checkPiracy=function(a){null==a&&(a="");var b;b=cg.decode("aHR0cHM6Ly93OC5zbm9raWRvLmNvbS9nYW1lcy9odG1sNS9uaWNrL05pY2tEb21haW4uanNvbg==").toString();Ga.REDIRECT_URL=a;""==Ga.REDIRECT_URL&&(Ga.REDIRECT_URL="http://www.nick.com/games/");Sc.sendGameEvent("Check AntiPiracy : ",Ga.REDIRECT_URL);sc.eval("eval",["window.getDomains = function(data) {eval('list=data.domains');}"]);sc.eval("eval",["window.getList = function() {return list;}"]);
Ga.eval("var script = document.createElement('script');script.src = \""+b+'",document.body.insertBefore(script, document.body.firstChild);');ze.delay(function(){for(var a=null,a=sc.eval("getList"),a=ga.__cast(a,Array),b=0;b<a.length;){var e=a[b];++b;Ga.DOMAIN_LIST.push(e)}Ga.startCheck()},Ga.GET_DOMAINS_DELAY)};Ga.startCheck=function(){Ga.debug("startCheck()");var a="",b=a="",c=!1,d=!0,a=window.location.host;try{b=window.parent.location.host}catch(e){c=!0}b!=a&&(c=!0);Ga.debug("childURL : "+a);Ga.debug("parentURL : "+
b);Ga.debug("isiFrameCrossDomain : "+(null==c?"null":""+c))};Ga.eval=function(a){sc.eval("eval",["void (function() {"+a+"}())"])};Ga.debug=function(){};var sc=function(){this.isDirty=!1;this.eventQueue=new $d;this.debugMode=!1;this.modules=
[];this.gameObj={majorversion:1,minorversion:0.4,apiversion:1};ya.init(this);Sc.init(this);this.initializeBridge()};f["nicksdk.SDK"]=sc;sc.__name__=["nicksdk","SDK"];sc.eval=function(a,b){null==b&&(b=[]);for(var c=null,d=null,e=0,h=a.split(".");e<h.length;){var n=h[e];++e;c=d;d=null==c?w.field(window,n):w.field(c,n)}return d.apply(c,b)};sc.prototype={onException:function(a){try{this.queueEvent("error",{msg:a,callstack:Dd.toString(Dd.callStack()),exceptionstack:Dd.toString(Dd.exceptionStack())})}catch(b){this.queueEvent("error",
{msg:a})}},initializeBridge:function(){try{this.queueEvent("init",{js:ya.executeWebRequest})}catch(a){null}},setDebugMode:function(a){(this.debugMode=a)?this.gameObj.debugmode=!0:w.deleteField(this.gameObj,"debugmode");this.isDirty=!0;for(var b=0,c=this.modules;b<c.length;){var d=c[b];++b;d.setDebugMode(a)}},queueEvent:function(a,b){b.eventName=a;w.setField(b,"timestamp",(new Date).getTime());this.eventQueue.add(b);this.flush_events();this.sync_state()},onUpdate:function(a){var b=this.isDirty;this.isDirty=
!1;for(var c=0,d=this.modules;c<d.length;){var e=d[c];++c;b=b||e.update(a)}0<this.eventQueue.length&&(b=!0,this.flush_events());b&&this.sync_state()},flush_events:function(){for(;0<this.eventQueue.length;)sc.output_event_array.push(this.eventQueue.pop())},sync_state:function(){try{sc.eval("nsdk_expose",[this.gameObj,sc.output_event_array]),sc.output_event_array.length=0}catch(a){null}},log:function(a,b){this.debugMode&&this.queueEvent("log",{id:a,msg:b})},__class__:sc};var jn=function(){};f["nicksdk.SDKModule"]=
jn;jn.__name__=["nicksdk","SDKModule"];jn.prototype={__class__:jn};var Sc=function(){};f["nicksdk.event.GameEventEmitter"]=Sc;Sc.__name__=["nicksdk","event","GameEventEmitter"];Sc.init=function(a){Sc.sdk=a};Sc.sendGameEvent=function(a,b){Sc.callExternal(a,b)};Sc.callExternal=function(a,b){if(null!=Sc.sdk)Sc.sdk.queueEvent(a,{params:b});else throw"SDK not initialized!";};var ya=function(){};f["nicksdk.event.GameEventListener"]=ya;ya.__name__=["nicksdk","event","GameEventListener"];ya.init=function(a){ya.sdk=
a};ya.executeWebRequest=function(a){ya.AssertType(a,K.TObject);if(null==a.name)return!1;switch(a.name){case "toggleaudio":ya.AssertParameter(a,"enable",K.TBool);if(null!=ya.onAudioToggle)return ya.onAudioToggle(a.enable),!0;ya.sdk.log("SDKGameEventListener","Audio Toggle is not implemented.");break;case "toggleplayback":ya.AssertParameter(a,"enable",K.TBool);if(null!=ya.onPlaybackToggle)return ya.onPlaybackToggle(a.enable),!0;ya.sdk.log("SDKGameEventListener","Playback Toggle is not implemented.");
break;case "togglesuspend":ya.AssertParameter(a,"enable",K.TBool);if(null!=ya.onSuspendToggle)ya.onSuspendToggle(a.enable);else ya.sdk.log("SDKGameEventListener","Suspend Toggle is not implemented.");break;case "toggledebug":ya.AssertParameter(a,"enable",K.TBool);if(null!=ya.onDebugModeToggle)ya.onDebugModeToggle(a.enable);else ya.sdk.log("SDKGameEventListener","Debug Mode Toggle is not implemented.");if(null!=ya.sdk)return ya.sdk.setDebugMode(a.enable),!0;break;default:ya.sdk.log("SDKGameEventListener",
"Unknown function")}return!1};ya.AssertType=function(a,b){var c=ja["typeof"](a);if(c!=b)throw c="TypeCheck: Object {"+y.string(a)+"} was of type {"+y.string(c)+"}. Expected type {"+y.string(b)+"}",null!=ya.sdk&&ya.sdk.log("SDKGameEventListener",c),c;};ya.AssertParameter=function(a,b,c){if(Object.prototype.hasOwnProperty.call(a,b))a=w.field(a,b),ya.AssertType(a,c);else throw c="ParameterCheck: Parameter {"+b+"} of type{"+y.string(c)+"} does not exist!",null!=ya.sdk&&ya.sdk.log("SDKGameEventListener",
c),c;};var Yb=function(a,b,c,d){this._data=new qh;this.onComplete=new O;this.onChange=new O;this.id=-1;this.id=a;this.name=b;this.description=c;null!=d&&(this._data.state=d)};f["stolo.achievements.Achievement"]=Yb;Yb.__name__=["stolo","achievements","Achievement"];Yb.prototype={changeState:function(a){a!=this._data.state&&(this._data.state=a,this.onChange.emit(this),this._data.state==Ma.Complete&&(null==this.parent?this.complete():this.parent.validate()));return this._data.state},isComplete:function(){return this._data.state==
Ma.Complete},complete:function(){this._data.state=Ma.Complete;this.onComplete.emit(this);return this.isComplete()},getData:function(){return this._data},setData:function(a){this._data=a},__class__:Yb};var Ma=f["stolo.achievements.AchievementState"]={__ename__:["stolo","achievements","AchievementState"],__constructs__:["Hidden","Ready","Fail","Complete"]};Ma.Hidden=["Hidden",0];Ma.Hidden.toString=s;Ma.Hidden.__enum__=Ma;Ma.Ready=["Ready",1];Ma.Ready.toString=s;Ma.Ready.__enum__=Ma;Ma.Fail=["Fail",
2];Ma.Fail.toString=s;Ma.Fail.__enum__=Ma;Ma.Complete=["Complete",3];Ma.Complete.toString=s;Ma.Complete.__enum__=Ma;Ma.__empty_constructs__=[Ma.Hidden,Ma.Ready,Ma.Fail,Ma.Complete];var qh=function(){this.progress=0;this.state=qh.DefaultState};f["stolo.achievements.AchievementData"]=qh;qh.__name__=["stolo","achievements","AchievementData"];qh.prototype={__class__:qh};var ek=function(a,b,c,d,e){this._achievementList=[];if(null!=e)for(var h=0;h<e.length;){var n=e[h];++h;this.add(n)}Yb.call(this,a,b,
c,d)};f["stolo.achievements.AchievementGroup"]=ek;ek.__name__=["stolo","achievements","AchievementGroup"];ek.__super__=Yb;ek.prototype=l(Yb.prototype,{add:function(a){this._achievementList.push(a)},validate:function(){for(var a=0,b=this._achievementList;a<b.length;){var c=b[a];++a;if(!c.isComplete())return!1}return this.complete()},complete:function(){for(var a=0,b=this._achievementList;a<b.length;){var c=b[a];++a;c.changeState(Ma.Complete)}return Yb.prototype.complete.call(this)},__class__:ek});
var fk=function(a,b,c,d,e){null==e&&(e=-1);this._goal=0;this.isOverGoal=!1;this._goal=e;Yb.call(this,a,b,c,d)};f["stolo.achievements.AchievementProgress"]=fk;fk.__name__=["stolo","achievements","AchievementProgress"];fk.__super__=Yb;fk.prototype=l(Yb.prototype,{updateProgress:function(a){this._data.state==Ma.Ready&&!this.isOverGoal&&(this._data.progress+=a,this._data.progress>=this._goal&&this.complete());null!=this.parent&&this.parent.validate()},__class__:fk});var ad=function(){this.status=H.Invalid};
f["stolo.ai.bt.Behavior"]=ad;ad.__name__=["stolo","ai","bt","Behavior"];ad.prototype={initialize:function(){},terminate:function(){},update:function(){return this.status},reset:function(){this.status=H.Invalid},abort:function(){this.terminate(H.Aborted);this.status=H.Aborted},dispose:function(){},tick:function(a){this.status!=H.Running&&this.initialize();this.status=this.update(a);this.status!=H.Running&&this.terminate(this.status);return this.status},__class__:ad};var gk=function(a,b){this.status=
H.Invalid;this._action=a;this._params=b};f["stolo.ai.bt.Action"]=gk;gk.__name__=["stolo","ai","bt","Action"];gk.__super__=ad;gk.prototype=l(ad.prototype,{update:function(a){return null==this._action?H.Failure:w.field(a,this._action).apply(a,[this._params])},dispose:function(){ad.prototype.dispose.call(this);this._params=this._action=null},__class__:gk});var qb=function(){this.status=H.Invalid;this.children=new $d};f["stolo.ai.bt.Composite"]=qb;qb.__name__=["stolo","ai","bt","Composite"];qb.__super__=
ad;qb.prototype=l(ad.prototype,{initialize:function(){},addChild:function(a){this.children.add(a)},terminate:function(){for(var a=this.children.iterator();a.hasNext();){var b=a.next();b.status==H.Running&&b.abort()}},dispose:function(){ad.prototype.dispose.call(this);for(var a=this.children.iterator();a.hasNext();)a.next().dispose();this.children=null},__class__:qb});var Ee=function(){qb.call(this)};f["stolo.ai.bt.Selector"]=Ee;Ee.__name__=["stolo","ai","bt","Selector"];Ee.__super__=qb;Ee.prototype=
l(qb.prototype,{initialize:function(){null!=this.children&&(this._current=this.children.iterator(),this._currentBehavior=this._current.next())},update:function(a){for(;null!=this._currentBehavior;){var b=this._currentBehavior.tick(a);if(b!=H.Failure)return b;if(this._current.hasNext())this._currentBehavior=this._current.next();else break}return H.Failure},terminate:function(a){qb.prototype.terminate.call(this,a)},dispose:function(){qb.prototype.dispose.call(this);this._currentBehavior=this._current=
null},__class__:Ee});var hk=function(){qb.call(this)};f["stolo.ai.bt.ActiveSelector"]=hk;hk.__name__=["stolo","ai","bt","ActiveSelector"];hk.__super__=Ee;hk.prototype=l(Ee.prototype,{initialize:function(){for(this._current=this.children.iterator();this._current.hasNext();)this._currentBehavior=this._current.next()},update:function(a){var b=this._currentBehavior;Ee.prototype.initialize.call(this);a=Ee.prototype.update.call(this,a);this._currentBehavior!=b&&b.terminate(H.Aborted);return a},__class__:hk});
var H=f["stolo.ai.bt.BehaviorStatus"]={__ename__:["stolo","ai","bt","BehaviorStatus"],__constructs__:["Invalid","Success","Running","Failure","Aborted"]};H.Invalid=["Invalid",0];H.Invalid.toString=s;H.Invalid.__enum__=H;H.Success=["Success",1];H.Success.toString=s;H.Success.__enum__=H;H.Running=["Running",2];H.Running.toString=s;H.Running.__enum__=H;H.Failure=["Failure",3];H.Failure.toString=s;H.Failure.__enum__=H;H.Aborted=["Aborted",4];H.Aborted.toString=s;H.Aborted.__enum__=H;H.__empty_constructs__=
[H.Invalid,H.Success,H.Running,H.Failure,H.Aborted];var Pa=function(){};f["stolo.ai.bt.BehaviorTree"]=Pa;Pa.__name__=["stolo","ai","bt","BehaviorTree"];Pa.getBehaviorData=function(a,b){null==b&&(b=Pa.defaultPack);var c=b+"_"+a;if(Pa._cache.exists(c))return Pa._cache.get(c);var d=C.getJSON(a,b);Pa._cache.set(c,d);d;if(d instanceof Array&&null==d.__enum__)throw"Unsupported format: Array";return d};Pa.fromData=function(a){if(null!=a&&null!=a.type)return Pa.createBehavior(a);var b=new Ee;null!=a&&Pa.createComposite(a,
b);return b};Pa.createComposite=function(a,b){for(var c,d=0,e=a.behaviors.length;d<e;)c=d++,c=a.behaviors[c],b.addChild(Pa.createBehavior(c))};Pa.createBehavior=function(a){switch(a.type){case "action":return new gk(a.action,a.params);case "sequence":var b=new ik;Pa.createComposite(a,b);return b;case "random":return b=new jk,Pa.createComposite(a,b),b;case "parallel":var b=null!=a.success?Pa.policyFromString(a.success):Fb.RequireOne,c;c=null!=a.failure?Pa.policyFromString(a.failure):Fb.RequireOne;
b=new kk(b,c);Pa.createComposite(a,b);return b;case "repeat":return b=Pa.createBehavior(a.behavior),a=null!=a.count?y.parseInt(a.count):1,new lk(b,a);case "inverter":return a=Pa.createBehavior(a.behavior),new mk(a);case "succeeder":return a=Pa.createBehavior(a.behavior),new nk(a);case "active":return b=new hk,Pa.createComposite(a,b),b;case "selector":return b=new Ee,Pa.createComposite(a,b),b;case "wait":return new ok(null!=a.time?a.time:1);case "file":return a=Pa.getBehaviorData(a.file,a.pack),Pa.fromData(a);
default:throw"Unrecognized behavior type : "+y.string(a.type);}};Pa.policyFromString=function(a){switch(a){case "one":return Fb.RequireOne;case "all":return Fb.RequireAll;default:throw"Invalid policy, expected `one` or `all`.";}};var pd=function(a){this.status=H.Invalid;this.child=a};f["stolo.ai.bt.Decorator"]=pd;pd.__name__=["stolo","ai","bt","Decorator"];pd.__super__=ad;pd.prototype=l(ad.prototype,{terminate:function(){this.child.status==H.Running&&this.child.abort()},dispose:function(){ad.prototype.dispose.call(this);
this.child=null},__class__:pd});var mk=function(a){pd.call(this,a)};f["stolo.ai.bt.Inverter"]=mk;mk.__name__=["stolo","ai","bt","Inverter"];mk.__super__=pd;mk.prototype=l(pd.prototype,{update:function(a){a=this.child.tick(a);switch(a[1]){case 1:return H.Failure;case 3:return H.Success}return a},__class__:mk});var Fb=f["stolo.ai.bt.Policy"]={__ename__:["stolo","ai","bt","Policy"],__constructs__:["RequireOne","RequireAll"]};Fb.RequireOne=["RequireOne",0];Fb.RequireOne.toString=s;Fb.RequireOne.__enum__=
Fb;Fb.RequireAll=["RequireAll",1];Fb.RequireAll.toString=s;Fb.RequireAll.__enum__=Fb;Fb.__empty_constructs__=[Fb.RequireOne,Fb.RequireAll];var kk=function(a,b){qb.call(this);this._successPolicy=a;this._failurePolicy=b};f["stolo.ai.bt.Parallel"]=kk;kk.__name__=["stolo","ai","bt","Parallel"];kk.__super__=qb;kk.prototype=l(qb.prototype,{update:function(a){for(var b=0,c=0,d=this.children.iterator();d.hasNext();){var e=d.next();e.status==H.Success||e.status==H.Failure||e.tick(a);switch(e.status[1]){case 1:b+=
1;if(this._successPolicy==Fb.RequireOne)return H.Success;break;case 3:if(c+=1,this._failurePolicy==Fb.RequireOne)return H.Failure}}return this._failurePolicy==Fb.RequireAll&&c==this.children.length?H.Failure:this._successPolicy==Fb.RequireAll&&b==this.children.length?H.Success:H.Running},__class__:kk});var jk=function(){qb.call(this)};f["stolo.ai.bt.Random"]=jk;jk.__name__=["stolo","ai","bt","Random"];jk.__super__=qb;jk.prototype=l(qb.prototype,{initialize:function(){var a=of.array(this.children),
b=Math.floor(Math.random()*a.length);this._currentBehavior=a[b]},update:function(a){return this._currentBehavior.tick(a)},terminate:function(a){qb.prototype.terminate.call(this,a)},dispose:function(){qb.prototype.dispose.call(this);this._currentBehavior=null},__class__:jk});var lk=function(a,b){null==b&&(b=0);this.count=this._counter=0;pd.call(this,a);this.count=b};f["stolo.ai.bt.Repeat"]=lk;lk.__name__=["stolo","ai","bt","Repeat"];lk.__super__=pd;lk.prototype=l(pd.prototype,{initialize:function(){this._counter=
0},update:function(a){try{for(;;){switch(this.child.tick(a)[1]){case 2:throw"__break__";case 3:return H.Failure;default:if(++this._counter==this.count)return H.Success}this.child.reset()}}catch(b){if("__break__"!=b)throw b;}return H.Invalid},__class__:lk});var ik=function(){qb.call(this)};f["stolo.ai.bt.Sequence"]=ik;ik.__name__=["stolo","ai","bt","Sequence"];ik.__super__=qb;ik.prototype=l(qb.prototype,{initialize:function(){null!=this.children&&(this._current=this.children.iterator(),this._currentBehavior=
this._current.next())},update:function(a){for(;null!=this._currentBehavior;){var b=this._currentBehavior.tick(a);if(b!=H.Success)return b;if(this._current.hasNext())this._currentBehavior=this._current.next();else break}return H.Success},terminate:function(a){qb.prototype.terminate.call(this,a)},dispose:function(){qb.prototype.dispose.call(this);this._currentBehavior=this._current=null},__class__:ik});var nk=function(a){pd.call(this,a)};f["stolo.ai.bt.Succeeder"]=nk;nk.__name__=["stolo","ai","bt",
"Succeeder"];nk.__super__=pd;nk.prototype=l(pd.prototype,{update:function(a){a=this.child.tick(a);switch(a[1]){case 3:return H.Success}return a},__class__:nk});var ok=function(a){this.status=H.Invalid;this._time=a};f["stolo.ai.bt.Wait"]=ok;ok.__name__=["stolo","ai","bt","Wait"];ok.__super__=ad;ok.prototype=l(ad.prototype,{initialize:function(){this._countTimer=this._time},update:function(a){this._countTimer-=a.behaviorTickRate;return 0>=this._countTimer?H.Success:H.Running},__class__:ok});var u=function(){};
f["stolo.animation.Animate"]=u;u.__name__=["stolo","animation","Animate"];u.delayCallTo=function(a,b,c){if(0>=b)return a(),null;null==c&&(c=x.root);var d=c._compMap.Script_56;null==d&&(d=new sb,c.add(d));a=new Za([new U(b),new ma(a)]);d.run(a);return a};u.kill=function(a){u.removeSequence(a)};u.killAll=function(){for(var a=u.tweens.iterator();a.hasNext();)a.next().dispose();u.tweens=new Bb};u.removeSequence=function(a){if(null!=u.tweens.h.__keys__[a.__id__]){var b=u.tweens.h[a.__id__];u.tweens.remove(a);
b.dispose()}};u.to=function(a,b,c,d){if(null==a)return null;c=u.checkTweenParams(c,d);u.kill(a);d=new rh(a,c.entity,c.delay);d.to(b,c.time,c.ease,0,c.origin);u.tweens.set(a,d);d.addListener(d.onStart,c.onStart);d.run(null,c.onComplete);return d};u.from=function(a,b,c,d){if(null==a)return null;c=u.checkTweenParams(c,d);u.kill(a);d=new rh(a,c.entity,c.delay);d.from(b,c.time,c.ease,0,c.origin);u.tweens.set(a,d);d.addListener(d.onStart,c.onStart);d.run(null,c.onComplete);return d};u.checkTweenParams=
function(a,b){0<a&&(a={time:a});null==a&&(a={});null==a.time&&(a.time=u.DefaultTime);null!=b&&(a.ease=b);null==a.ease&&(a.ease=u.DefaultEase);return a};u.runTemplate=function(a,b,c){for(var d=null,e=0;e<a.length;){var h=a[e];++e;if(null!=h.then){if(null==d)throw"'then' can be used only after 'to' or 'from' sequences";d.then(h.then,h.time,h.ease,h.delay,null!=c?c.origin:null)}else if(null!=h.to||null!=h.from)if(null!=c?(d={time:h.time,ease:h.ease},d.delay=c.delay,d.onStart=c.onStart,d.onComplete=c.onComplete,
d.origin=c.origin):d=h,null!=h.to)d=u.to(b,h.to,d);else if(null!=h.from)d=u.from(b,h.from,d);else throw"Unsupported tween data:"+y.string(h);else null!=h.delay&&0<h.delay&&d.addDelay(h.delay)}return d};var Um=function(){};f["stolo.animation.Animations"]=Um;Um.__name__=["stolo","animation","Animations"];var Ad=function(a,b,c){null==c&&(c=0);null==b&&(b=0);null==a&&(a=0);this.x=new J(a);this.y=new J(b);this.z=new J(c)};f["stolo.animation.behaviors.AnimatedPoint"]=Ad;Ad.__name__=["stolo","animation",
"behaviors","AnimatedPoint"];Ad.__interfaces__=[pf];Ad.prototype={dispose:function(){this.z=this.y=this.x=null},setXY:function(a,b,c){null==c&&(c=!1);null==b&&(b=0);null==a&&(a=0);this.x.set__(a);this.y.set__(b);c&&(this.x.set_behavior(null),this.y.set_behavior(null))},update:function(a){this.x.update(a);this.y.update(a);this.z.update(a);return 0},isComplete:function(){return null!=this.x._behavior&&!this.x._behavior.isComplete()||null!=this.y._behavior&&!this.y._behavior.isComplete()||null!=this.z._behavior&&
!this.z._behavior.isComplete()?!1:!0},__class__:Ad};var Ue=function(a,b,c,d,e,h){null==e&&(e=0);null==d&&(d=0);null==c&&(c=40);null==b&&(b=10);null==a&&(a=0.8);this.value=this.velocity=this.force=this.diff=0;this.stiffness=new J(a);this.damping=new J(b);this.mass=new J(c);this.maxVelocity=e;this.value=d;this.target=h;null==this.target&&(this.target=new J(this.value),this.updateTarget=!0)};f["stolo.animation.behaviors.AnimatedSpring"]=Ue;Ue.__name__=["stolo","animation","behaviors","AnimatedSpring"];
Ue.__interfaces__=[pf];Ue.prototype={setTargetValue:function(a){this.target.set__(a);return this.target},update:function(a){this.updateTarget&&this.target.update(a);this.stiffness.update(a);this.damping.update(a);this.mass.update(a);this.diff=this.target._value-this.value;0.01<Math.abs(this.diff)?(this.force=this.stiffness._value*this.diff-this.damping._value*this.velocity,this.velocity+=this.force/this.mass._value,0<this.maxVelocity&&(this.velocity>this.maxVelocity?this.velocity=this.maxVelocity:
this.velocity<-this.maxVelocity&&(this.velocity=-this.maxVelocity)),this.value+=this.velocity):this.isComplete()&&(this.diff=0,this.value=this.target._value);return this.value},isComplete:function(){return 0.01>Math.abs(this.velocity)},__class__:Ue};var qd=function(a,b){null==b&&(b=0);this.currentIndex=0;this._disposables=new xb;this.onComplete=new ka;this.onStart=new ka;this.isRunning=this.isPaused=!1;Za.call(this);null!=a&&(this._entity=a);this.setDelay(b);this.add(new ma((Fc=this.onStart,m(Fc,
Fc.emit))))};f["stolo.animation.sequences.AnimationSequence"]=qd;qd.__name__=["stolo","animation","sequences","AnimationSequence"];qd.__super__=Za;qd.prototype=l(Za.prototype,{dispose:function(){this._ownScript&&null!=this._script&&(null!=this._script.owner&&this._script.owner.dispose(),this._script.stopAll(),this._script.dispose());this.onComplete=this.onStart=this._entity=this._script=null;this.isRunning=!1;this.removeAll();null!=this._disposables&&this._disposables.dispose();this._disposables=
null},update:function(a,b){if(this.isPaused)return-1;var c=Za.prototype.update.call(this,a,b);this.currentIndex=this._idx;return c},add:function(a){if(this.isRunning){var b=this._runningActions.pop();Za.prototype.add.call(this,a);Za.prototype.add.call(this,b)}else Za.prototype.add.call(this,a)},setDelay:function(a){return this.addDelay(a)},addDelay:function(a){null==a&&(a=0);if(0>=a)return this;this.add(new U(a));return this},run:function(a,b){null!=a&&(this._entity=a);this.currentIndex=this._idx=
0;this._ownScript=!0;this._script=new sb;this._entity.addChild((new r).add(this._script));this.add(new ma(m(this,this.complete)));null!=b&&this.addListener(this.onComplete,b);this.isRunning=!0;this._script.run(this);return this},addListener:function(a,b){null!=b&&this._disposables.add(a.connect(b))},complete:function(){this.isRunning=!1;this._ownScript&&null!=this._script&&this._script.stopAll();null!=this.onComplete&&this.onComplete.emit();this.dispose()},__class__:qd});var Zb=function(a,b){null==
b&&(b=0);qd.call(this,a,b)};f["stolo.animation.sequences.RelativeSequence"]=Zb;Zb.__name__=["stolo","animation","sequences","RelativeSequence"];Zb.__super__=qd;Zb.prototype=l(qd.prototype,{init:function(a,b,c,d,e){null==e&&(e=0);null==d&&(d=!1);null==c&&(c=!0);Zb.lastDest=null;this.appendActions(a,b);d&&(a=a.reverse(),a.shift(),this.appendActions(a,b),this.appendActions([{x:0,y:0}],b));(c||d)&&this.appendActions([{x:0,y:0}],b);0<e&&this.add(new U(e));return this},appendActions:function(a,b){for(var c=
0;c<a.length;){var d=a[c];++c;Object.prototype.hasOwnProperty.call(d,"delay")&&this.add(new U(d.delay));var e=Object.prototype.hasOwnProperty.call(d,"x"),h=Object.prototype.hasOwnProperty.call(d,"y");e&&h&&(e=new jb(d.x+b.offsetX,d.y+b.offsetY),this.add(this.getMovementAction(d,b.x,b.y,e,Zb.lastDest,b)),Zb.lastDest=e)}return this},getMovementAction:function(a,b,c,d,e,h){var n=Zb.DefaultMoveSpeed,g=Zb.DefaultMovePPS,f=Zb.DefaultMoveEase,i=Zb.DefaultMoveTime,j=!1;0<a.time?i=a.time:j=!0;0<a.pps&&(g=
a.pps);0<a.speed&&(n=a.speed);j&&(a=null!=e?Math.abs(e.x-d.x)+Math.abs(e.y-d.y):Math.abs(b._value-d.x)+Math.abs(c._value-d.y),i=a/g-0.1*(a/g)*n,0>=i&&(i=Zb.DefaultMoveTime));null!=h&&null!=h.ease&&(f=h.ease);return new ld([new rc(b,d.x,i,f),new rc(c,d.y,i,f)])},__class__:Zb});var Cf=function(a){qd.call(this,a)};f["stolo.animation.sequences.ShakeSequence"]=Cf;Cf.__name__=["stolo","animation","sequences","ShakeSequence"];Cf.shake=function(a,b,c,d,e){null==d&&(d=60);null==c&&(c=1);a=new Cf(a);a.sineShake(b,
c,d,e);return a};Cf.__super__=qd;Cf.prototype=l(qd.prototype,{sineShake:function(a,b,c,d){null==c&&(c=60);null==b&&(b=1);if(null==a)throw"No shakeProp set!";c=new Cc(0.5*-c,0.5*c,0.05);c.speed.animateTo(0.3*b,0.75*b,t.sineInOut);a.set_behavior(c);this.add(new U(0.75*b));this.add(new rc(a,0,0.25*b,t.sineInOut));this.run(null,d)},__class__:Cf});var rh=function(a,b,c){null==c&&(c=0);this._target=a;this._entity=b;null==b&&(b=a.owner);null==b&&(b=x.root);qd.call(this,b,c)};f["stolo.animation.sequences.TweenSequence"]=
rh;rh.__name__=["stolo","animation","sequences","TweenSequence"];rh.__super__=qd;rh.prototype=l(qd.prototype,{dispose:function(){qd.prototype.dispose.call(this);null!=this._target&&(null!=u.tweens.h.__keys__[this._target.__id__]&&u.tweens.remove(this._target),this._target=null)},to:function(a,b,c,d,e){null==d&&(d=0);null==c&&(c=u.DefaultEase);if(0>b||null==b)b=u.DefaultTime;this.addDelay(d);this.add(this.getActions(a,b,c,!1,e));return this},from:function(a,b,c,d,e){null==d&&(d=0);null==c&&(c=u.DefaultEase);
if(0>b||null==b)b=u.DefaultTime;this.addDelay(d);this.add(this.getActions(a,b,c,!0,e));return this},then:function(a,b,c,d,e){null==d&&(d=0);null==c&&(c=u.DefaultEase);if(0>b||null==b)b=u.DefaultTime;this.addDelay(d);this.add(this.getActions(a,b,c,!1,e));return this},getActions:function(a,b,c,d,e){null==d&&(d=!1);for(var h=[],n,g,f=0,i=w.fields(a);f<i.length;){var j=i[f];++f;n=w.field(this._target,j);if(null==n)throw"Cannot find property '"+j+"' to animate";var k=w.field(a,j);g=n._value;null!=e&&Object.prototype.hasOwnProperty.call(e,
j)&&(g=w.field(e,j));"string"==typeof k&&(k=P.mod(g,k));d&&(n.set__(k),k=g);h.push(new rc(n,k,b,c))}return new ld(h)},__class__:rh});var Xl=function(){};f["stolo.display.DepthSorter"]=Xl;Xl.__name__=["stolo","display","DepthSorter"];Xl.prototype={reorder:function(a,b){for(var c=0;c<a.length;){var d=a[c];++c;b.addChild(d)}},__class__:Xl};var pk=function(a,b){null==b&&(b=2);null==a&&(a=16711680);eb.call(this,a,100,b)};f["stolo.display.Line"]=pk;pk.__name__=["stolo","display","Line"];pk.__super__=eb;
pk.prototype=l(eb.prototype,{fromTo:function(a,b,c,d){this.gap=E.gap(a,b,c,d,this.gap);this.setXY(this.gap.x,this.gap.y);this.scaleX.set__(this.gap.width/100);this.rotation.set__(this.gap.rotation)},__class__:pk});var qk=function(){this.skewX=this.skewY=0;k.call(this)};f["stolo.display.Skew"]=qk;qk.__name__=["stolo","display","Skew"];qk.__super__=k;qk.prototype=l(k.prototype,{get_name:function(){return"Skew_67"},dispose:function(){k.prototype.dispose.call(this);this._sprite=null},onStart:function(){k.prototype.onStart.call(this);
this._sprite=this.owner._compMap.Sprite_5},onUpdate:function(a){k.prototype.onUpdate.call(this,a);if(null!=this._sprite){var a=this._sprite.getLocalMatrix(),b=0,c=1,d=0,e=1,h=-3.141592653589793*this.skewX/180,n=3.141592653589793*this.skewY/180;0!=h&&(b=Math.sin(h),c=Math.cos(h));0!=n&&(d=Math.sin(n),e=Math.cos(n));a.set(e*this._sprite.scaleX._value,d*this._sprite.scaleX._value,-b*this._sprite.scaleY._value,c*this._sprite.scaleY._value,a.m02,a.m12)}},__class__:qk});var rd=f["stolo.display.particles.EmitterType"]=
{__ename__:["stolo","display","particles","EmitterType"],__constructs__:["Gravity","Radial"]};rd.Gravity=["Gravity",0];rd.Gravity.toString=s;rd.Gravity.__enum__=rd;rd.Radial=["Radial",1];rd.Radial.toString=s;rd.Radial.__enum__=rd;rd.__empty_constructs__=[rd.Gravity,rd.Radial];var Ua=function(a,b){this.direction=1;this.tangentialAccelVariance=new J(0);this.tangentialAccel=new J(0);this.radialAccelVariance=new J(0);this.radialAccel=new J(0);this.speedVariance=new J(0);this.speed=new J(0);this.sizeEndVariance=
new J(0);this.sizeEnd=new J(0);this.sizeStartVariance=new J(0);this.sizeStart=new J(0);this.rotationEndVariance=new J(0);this.rotationEnd=new J(0);this.rotationStartVariance=new J(0);this.rotationStart=new J(0);this.rotatePerSecondVariance=new J(0);this.rotatePerSecond=new J(0);this.lifespan=new J(0);this.lifespanVariance=new J(0);this.minRadius=new J(0);this.maxRadiusVariance=new J(0);this.maxRadius=new J(0);this.gravityY=new J(0);this.gravityX=new J(0);this.angleVariance=new J(0);this.angle=new J(0);
this.alphaEndVariance=new J(0);this.alphaEnd=new J(0);this.alphaStartVariance=new J(0);this.alphaStart=new J(0);this.emitYVariance=new J(0);this.emitY=new J(0);this.emitXVariance=new J(0);this.emitX=new J(0);this.enabled=!0;this.emitElapsed=this.totalElapsed=this.numParticles=this.duration=0;null!=a&&null!=b&&pa.setEmitter(this,a,b);A.call(this)};f["stolo.display.particles.Emitter"]=Ua;Ua.__name__=["stolo","display","particles","Emitter"];Ua.random=function(a,b){0!=b&&(a+=b*(2*Math.random()-1));return a};
Ua.__super__=A;Ua.prototype=l(A.prototype,{onAdded:function(){this.build()},build:function(){this.particles=Array(this._maxParticles);for(var a=0,b=this.particles.length;a<b;)this.particles[a]=new rk,++a},restart:function(){this.enabled=!0;this.totalElapsed=0},clearParticles:function(){this.numParticles=0},onUpdate:function(a){A.prototype.onUpdate.call(this,a);this.alphaEnd.update(a);this.alphaEndVariance.update(a);this.alphaStart.update(a);this.alphaStartVariance.update(a);this.angle.update(a);this.angleVariance.update(a);
this.emitX.update(a);this.emitXVariance.update(a);this.emitY.update(a);this.emitYVariance.update(a);this.gravityX.update(a);this.gravityY.update(a);this.lifespan.update(a);this.lifespanVariance.update(a);this.maxRadius.update(a);this.maxRadiusVariance.update(a);this.minRadius.update(a);this.radialAccel.update(a);this.radialAccelVariance.update(a);this.rotatePerSecond.update(a);this.rotatePerSecondVariance.update(a);this.rotationEnd.update(a);this.rotationEndVariance.update(a);this.rotationStart.update(a);
this.rotationStartVariance.update(a);this.sizeEnd.update(a);this.sizeEndVariance.update(a);this.sizeStart.update(a);this.sizeStartVariance.update(a);this.speed.update(a);this.speedVariance.update(a);this.tangentialAccel.update(a);this.tangentialAccelVariance.update(a);for(var b=this.type==rd.Gravity,c=0;c<this.numParticles;){var d=this.particles[c];if(d.life>a){if(b){d.x+=d.velX*a;d.y+=d.velY*a;var e=this.gravityX._value,h=-this.gravityY._value;if(0!=d.radialAccel||0!=d.tangentialAccel)var n=d.x-
d.emitX,g=d.y-d.emitY,f=Math.sqrt(n*n+g*g),n=n/f,g=g/f,e=e+n*d.radialAccel,h=h+g*d.radialAccel,f=n,e=e+-g*d.tangentialAccel,h=h+f*d.tangentialAccel;d.velX+=e*a;d.velY+=h*a}else d.radialRotation+=d.velRadialRotation*a,d.radialRadius+=d.velRadialRadius*a,e=d.radialRadius,d.x=this.emitX._value-Math.cos(d.radialRotation)*e,d.y=this.emitY._value-Math.sin(d.radialRotation)*e,e<this.minRadius._value&&(d.life=0);d.scale+=d.velScale*a;d.rotation+=d.velRotation*a;d.alpha+=d.velAlpha*a;d.life-=a;++c}else--this.numParticles,
c!=this.numParticles&&(this.particles[c]=this.particles[this.numParticles],this.particles[this.numParticles]=d)}if(this.enabled){if(0<this.duration&&(this.totalElapsed+=a,this.totalElapsed>=this.duration)){this.enabled=!1;return}b=this.lifespan._value/this.particles.length;for(this.emitElapsed+=a;this.emitElapsed>=b;)this.numParticles<this.particles.length&&this.initParticle(this.particles[this.numParticles])&&++this.numParticles,this.emitElapsed-=b}},draw:function(a){for(var b=0,c=this.numParticles;b<
c;){var d=this.particles[b];a.save();a.translate(d.x,d.y);d.draw(a);a.restore();++b}},getRandomTexture:function(){return 1>=this.textures.length?this.textures[0]:this.textures[Math.floor(Math.random()*this.textures.length)]},getRandomColor:function(){return null==this.colors?16777215:1>=this.colors.length?this.colors[0]:this.colors[Math.round(Math.random()*this.colors.length)]},initParticle:function(a){a.life=Ua.random(this.lifespan._value,this.lifespanVariance._value);if(0>=a.life)return!1;a.emitX=
this.emitX._value;a.emitY=this.emitY._value;var b=-Ib.toRadians(Ua.random(this.angle._value,this.angleVariance._value)),c=Ua.random(this.speed._value,this.speedVariance._value)*this.direction;a.velX=c*Math.cos(b);a.velY=c*Math.sin(b);a.radialAccel=Ua.random(this.radialAccel._value,this.radialAccelVariance._value);a.tangentialAccel=Ua.random(this.tangentialAccel._value,this.tangentialAccelVariance._value);a.radialRadius=Ua.random(this.maxRadius._value,this.maxRadiusVariance._value);a.velRadialRadius=
-a.radialRadius/a.life;a.radialRotation=b;a.velRadialRotation=Ib.toRadians(Ua.random(this.rotatePerSecond._value,this.rotatePerSecondVariance._value));this.type==rd.Gravity?(a.x=Ua.random(this.emitX._value,this.emitXVariance._value),a.y=Ua.random(this.emitY._value,this.emitYVariance._value)):(b=a.radialRadius,a.x=this.emitX._value-Math.cos(a.radialRotation)*b,a.y=this.emitY._value-Math.sin(a.radialRotation)*b);null!=this.textures&&0<this.textures.length?(a.texture=this.getRandomTexture(a),a.width=
a.texture.get_width(),a.height=a.texture.get_height()):(a.color=this.getRandomColor(a),a.width=0<this.particleWidth?this.particleWidth:this.particleHeight,a.height=0<this.particleHeight?this.particleHeight:this.particleWidth);c=a.width;a.offsetX=-a.width/2;a.offsetY=-a.height/2;b=Ua.random(this.sizeStart._value,this.sizeStartVariance._value)/c;c=Ua.random(this.sizeEnd._value,this.sizeEndVariance._value)/c;a.scale=b;a.velScale=(c-b)/a.life;b=Ua.random(this.rotationStart._value,this.rotationStartVariance._value);
c=Ua.random(this.rotationEnd._value,this.rotationEndVariance._value);a.rotation=b;a.velRotation=(c-b)/a.life;b=Ua.random(this.alphaStart._value,this.alphaStartVariance._value);c=Ua.random(this.alphaEnd._value,this.alphaEndVariance._value);a.alpha=b;a.velAlpha=(c-b)/a.life;a.direction=this.direction;return!0},set_maxParticles:function(a){this._maxParticles=a;if(null==this.particles)return this._maxParticles;var b=this.particles.length;for(this.particles.length=a;b<a;)this.particles[b]=new rk,++b;this.numParticles>
a&&(this.numParticles=a);return this._maxParticles},__class__:Ua,__properties__:l(A.prototype.__properties__,{set_maxParticles:"set_maxParticles"})});var sk=f["stolo.display.particles.FileFormat"]={__ename__:["stolo","display","particles","FileFormat"],__constructs__:["ParticleDesignerXML"]};sk.ParticleDesignerXML=["ParticleDesignerXML",0];sk.ParticleDesignerXML.toString=s;sk.ParticleDesignerXML.__enum__=sk;sk.__empty_constructs__=[sk.ParticleDesignerXML];var pa=function(){};f["stolo.display.particles.EmitterFactory"]=
pa;pa.__name__=["stolo","display","particles","EmitterFactory"];pa.setEmitter=function(a,b,c){return pa.getPexEmitter(b,c,a)};pa.getPexEmitter=function(a,b,c){var d=C.getPack(b),e=C.getXML(a+".pex",b,!0,!0);null==c&&(c=new Ua);c.textures=null;for(var b=a.lastIndexOf("/"),a=0<=b?Q.substr(a,0,b+1):"",h=b=0,e=e.firstElement().elements();e.hasNext();){var n=e.next();switch(n.get_nodeName().toLowerCase()){case "colors":n=n.get("value").split(",");c.colors=[];for(var g=0;g<n.length;){var f=n[g];++g;f=y.parseInt("0x"+
f);c.colors.push(f)}break;case "width":c.particleWidth=pa.getFloat(n,"value");break;case "height":c.particleHeight=pa.getFloat(n,"value");break;case "texture":null==c.textures&&(c.textures=[]);c.textures.push(d.getTexture(a+ob.removeFileExtension(n.get("name"))));break;case "angle":c.angle.set__(pa.getFloat(n,"value"));break;case "anglevariance":c.angleVariance.set__(pa.getFloat(n,"value"));break;case "blendfuncdestination":b=y["int"](pa.getFloat(n,"value"));break;case "blendfuncsource":h=y["int"](pa.getFloat(n,
"value"));break;case "duration":c.duration=pa.getFloat(n,"value");break;case "emittertype":c.type=0==y["int"](pa.getFloat(n,"value"))?rd.Gravity:rd.Radial;break;case "finishcolor":c.alphaEnd.set__(pa.getFloat(n,"alpha"));break;case "finishcolorvariance":c.alphaEndVariance.set__(pa.getFloat(n,"alpha"));break;case "finishparticlesize":c.sizeEnd.set__(pa.getFloat(n,"value"));break;case "finishparticlesizevariance":c.sizeEndVariance.set__(pa.getFloat(n,"value"));break;case "gravity":c.gravityX.set__(pa.getFloat(n,
"x"));c.gravityY.set__(pa.getFloat(n,"y"));break;case "maxparticles":c.set_maxParticles(y["int"](pa.getFloat(n,"value")));break;case "maxradius":c.maxRadius.set__(pa.getFloat(n,"value"));break;case "maxradiusvariance":c.maxRadiusVariance.set__(pa.getFloat(n,"value"));break;case "minradius":c.minRadius.set__(pa.getFloat(n,"value"));break;case "particlelifespan":c.lifespan.set__(pa.getFloat(n,"value"));break;case "particlelifespanvariance":c.lifespanVariance.set__(pa.getFloat(n,"value"));break;case "radialaccelvariance":c.radialAccelVariance.set__(pa.getFloat(n,
"value"));break;case "radialacceleration":c.radialAccel.set__(pa.getFloat(n,"value"));break;case "rotatepersecond":c.rotatePerSecond.set__(pa.getFloat(n,"value"));break;case "rotatepersecondvariance":c.rotatePerSecondVariance.set__(pa.getFloat(n,"value"));break;case "rotationend":c.rotationEnd.set__(pa.getFloat(n,"value"));break;case "rotationendvariance":c.rotationEndVariance.set__(pa.getFloat(n,"value"));break;case "rotationstart":c.rotationStart.set__(pa.getFloat(n,"value"));break;case "rotationstartvariance":c.rotationStartVariance.set__(pa.getFloat(n,
"value"));break;case "sourcepositionvariance":c.emitXVariance.set__(pa.getFloat(n,"x"));c.emitYVariance.set__(pa.getFloat(n,"y"));break;case "speed":c.speed.set__(pa.getFloat(n,"value"));break;case "speedvariance":c.speedVariance.set__(pa.getFloat(n,"value"));break;case "startcolor":c.alphaStart.set__(pa.getFloat(n,"alpha"));break;case "startcolorvariance":c.alphaStartVariance.set__(pa.getFloat(n,"alpha"));break;case "startparticlesize":c.sizeStart.set__(pa.getFloat(n,"value"));break;case "startparticlesizevariance":c.sizeStartVariance.set__(pa.getFloat(n,
"value"));break;case "tangentialaccelvariance":c.tangentialAccelVariance.set__(pa.getFloat(n,"value"));break;case "tangentialacceleration":c.tangentialAccel.set__(pa.getFloat(n,"value"))}}0>=c.lifespan._value&&c.lifespan.set__(c.duration);1==h&&1==b?c.blendMode=Fa.Add:1==h&&771==b?c.blendMode=null:(0!=h||0!=b)&&null;return c};pa.getFloat=function(a,b){return y.parseFloat(a.get(b))};var rk=function(){this.direction=1;this.color=16777215;this.emitX=this.emitY=this.x=this.velX=this.y=this.velY=this.radialRadius=
this.velRadialRadius=this.radialRotation=this.velRadialRotation=this.radialAccel=this.tangentialAccel=this.scale=this.velScale=this.rotation=this.velRotation=this.alpha=this.velAlpha=this.life=this.offsetX=this.offsetY=0};f["stolo.display.particles.Particle"]=rk;rk.__name__=["stolo","display","particles","Particle"];rk.prototype={draw:function(a){null==this.texture?this.drawRect(a):(1>this.alpha&&a.multiplyAlpha(this.alpha),0!=this.rotation&&a.rotate(this.rotation),(1!=this.scale||1!=this.direction)&&
a.scale(this.scale*this.direction,this.scale),a.drawTexture(this.texture,this.offsetX,this.offsetY))},drawRect:function(a){1>this.alpha&&a.multiplyAlpha(this.alpha);0!=this.rotation&&a.rotate(this.rotation);1!=this.scale&&a.scale(this.scale,this.scale);a.fillRect(this.color,this.offsetX,this.offsetY,this.width,this.height)},__class__:rk};var M=function(){};f["stolo.ensys.actor.ActorFactory"]=M;M.__name__=["stolo","ensys","actor","ActorFactory"];M.reset=function(){for(var a=M._registeredComponents.keys();a.hasNext();){var b=
a.next();M._registeredComponents.remove(b)}for(a=M._componentMap.keys();a.hasNext();)b=a.next(),M._componentMap.remove(b);for(a=M._templateMap.keys();a.hasNext();)b=a.next(),M._templateMap.remove(b)};M.create=function(a){var b=new r,c=M.getTemplate(M.getTemplateName(a,!0));if(null!=c&&(c.template.onlyHighEnd&&q.slow||c.template.onlySlowEnd&&!q.slow))return null;a=P.merge(c,a,!0);if(null==a)return null;M.onActorData.emit(a);return M.compose(b,a)};M.fromTemplate=function(a){var b=M.getTemplate(a);if(null==
b)throw"Template not found: '"+a+"'";a=new r;return M.compose(a,b)};M.compose=function(a,b){for(var c=0,d=w.fields(b);c<d.length;){var e=d[c];++c;var h=w.field(b,e);if(!(null==h||!1==h)&&null==h.debug){h=M.createComponent(e,h);if(null==h)throw"ActorFactory: Unknown component '"+e+"'";a.add(h)}}null==a._compMap.TransformComponent_43&&a.add(new Fe);return a};M.registerComponent=function(a,b){M._registeredComponents.set(a,b);var c=ja.getClassName(b);M._componentMap.set(c,a)};M.getComponentName=function(a){a=
ja.getClassName(ja.getClass(a));return M._componentMap.get(a)};M.getComponentsIds=function(){for(var a=[],b=M._registeredComponents.iterator();b.hasNext();){var c=b.next();a.push(ja.getClassName(c))}return a};M.getTemplateIds=function(){for(var a=[],b=M._templateMap.iterator();b.hasNext();){var c=b.next();a.push(c.template.key)}return a};M.getTemplate=function(a,b){null==b&&(b=!0);M._lastTempalte=a;var c=M._templateMap.get(a);if(b&&null!=c&&Object.prototype.hasOwnProperty.call(c.template,"parent")){var d;
d=M._templateMap.get(c.template.parent);if(null==d)throw"parent template not found: '"+y.string(c.template.parent)+"' for template '"+a+"'";c=P.merge(d,c,!0)}return c};M.addTemplate=function(a){var b=M.getTemplateName(a);null!=b&&(M._templateMap.exists(b)?null:M._templateMap.set(b,a),M.onTemplateAdded.emit(a))};M.getTemplateName=function(a,b){null==b&&(b=!1);var c=w.getProperty(a,"template");if(null!=c&&null!=c.key){c=c.key;if(b&&!M._templateMap.exists(c))throw"ActorFactory: Unknown template '"+c+
"'";return c}return null};M.createComponent=function(a,b){var c;if("string"==typeof a){if(c=M._registeredComponents.get(a),null==c)return null}else c=a;return M.initComponent(ja.createInstance(c,[]),b)};M.initComponent=function(a,b){var c=M.getComponentDefaults(a);null!=c&&(b=null!=b?P.merge(c,b,!0):c);M.applyProps(a,b);return a};M.applyProps=function(a,b){for(var c=0,d=w.fields(b);c<d.length;){var e=d[c];++c;var h=w.field(b,e);w.setProperty(a,e,h)}return a};M.getComponentDefaults=function(a){return w.getProperty(ja.getClass(a),
"DEFAULTS")};var tk=function(){this.target="ANY_BODY";this.enabled=!0;k.call(this)};f["stolo.ensys.components.BouncerComponent"]=tk;tk.__name__=["stolo","ensys","components","BouncerComponent"];tk.__super__=k;tk.prototype=l(k.prototype,{get_name:function(){return"BouncerComponent_87"},onStart:function(){k.prototype.onStart.call(this);T.getSystemEntity(this.owner);this._physicsSystem=T.getSystemEntity(this.owner).getComponent("PhysicSystem_36");null!=this.owner._compMap.PhysicsComponent_34&&this.owner._compMap.PhysicsComponent_34.addContactType("BOUNCER");
this._physicsSystem.addContactListener(ea.BEGIN,wa.ANY,this.target,"BOUNCER",this.owner,m(this,this.onContactBegin))},onStop:function(){this._physicsSystem.removeContactListener(ea.BEGIN,wa.ANY,this.target,"BOUNCER",this.owner);this._physicsSystem=null;k.prototype.onStop.call(this)},onContactBegin:function(a,b){if(this.enabled&&null!=b){var c=a._compMap.PhysicsComponent_34;if(null!=c){var d=c.getVelocity();if(0<this.impulse){var e=-Math.cos(b.angle)*this.impulse,e=Math.round(100*e)/100,h=-Math.sin(b.angle)*
this.impulse,h=Math.round(100*h)/100;c.setVelocity(function(){d.zpp_inner.validate();return d.zpp_inner.x}(this)+e,function(){d.zpp_inner.validate();return d.zpp_inner.y}(this)+h)}else 0<this.ratio&&c.setVelocity(function(){d.zpp_inner.validate();return d.zpp_inner.x}(this)*this.ratio,function(){d.zpp_inner.validate();return d.zpp_inner.y}(this)*this.ratio)}}},__class__:tk});var uk=function(){this.directionEaseX=t.quadInOut;this.directionTimeX=1.5;this.directionSwapX=!0;k.call(this)};f["stolo.ensys.components.CameraTargetDirection"]=
uk;uk.__name__=["stolo","ensys","components","CameraTargetDirection"];uk.__super__=k;uk.prototype=l(k.prototype,{get_name:function(){return"CameraTargetDirection_70"},onStart:function(){k.prototype.onStart.call(this);this._target=this.owner._compMap.CameraTargetComponent_9;this._transform=this.owner._compMap.TransformComponent_43},onStop:function(){k.prototype.onStop.call(this);this._transform=this._target=null},onUpdate:function(){this.directionSwapX&&this.setCameraDirectionX(this._transform.direction)},
setCameraDirectionX:function(a){this._target.setOffsetDirectionX(a,this.directionTimeX,this.directionEaseX)},__class__:uk});var vk=function(){this.enabled=!0;k.call(this)};f["stolo.ensys.components.CheckpointComponent"]=vk;vk.__name__=["stolo","ensys","components","CheckpointComponent"];vk.__super__=k;vk.prototype=l(k.prototype,{get_name:function(){return"CheckpointComponent_83"},onStart:function(){null!=this.owner._compMap.PhysicsComponent_34&&this.owner._compMap.PhysicsComponent_34.addContactType("CHECKPOINT")},
__class__:vk});var wk=function(){this._respawnPosition=new jb;k.call(this)};f["stolo.ensys.components.CheckpointerComponent"]=wk;wk.__name__=["stolo","ensys","components","CheckpointerComponent"];wk.__super__=k;wk.prototype=l(k.prototype,{get_name:function(){return"CheckpointerComponent_84"},dispose:function(){k.prototype.dispose.call(this);this._physicsSystem=this._physics=this._transform=null;this.clear();this._respawnPosition=null},onStart:function(){this._transform=this.owner._compMap.TransformComponent_43;
this._physics=this.owner._compMap.PhysicsComponent_34;null!=this._physics&&this._physics.addContactType("CHECKPOINTER");null==this.position&&(this.position={x:this._transform.position.x,y:this._transform.position.y});T.getSystemEntity(this.owner);this._physicsSystem=T.getSystemEntity(this.owner).getComponent("PhysicSystem_36");this._physicsSystem.addContactListener(ea.BEGIN,wa.SENSOR,"CHECKPOINT","CHECKPOINTER",this.owner,m(this,this.onContactBegin))},onStop:function(){this._physicsSystem.removeContactListener(ea.BEGIN,
wa.SENSOR,"CHECKPOINT","CHECKPOINTER",this.owner);k.prototype.onStop.call(this)},onContactBegin:function(a){this.lastCheckPoint=a._compMap.CheckpointComponent_83},clear:function(){this.lastCheckPoint=null},__class__:wk});var jg=function(){this.isCollected=!1;this.collectedSound="";this.type="COLLECTABLE";this.data={};this.amount=1;this.isActive=!0;k.call(this)};f["stolo.ensys.components.CollectableComponent"]=jg;jg.__name__=["stolo","ensys","components","CollectableComponent"];jg.__super__=k;jg.prototype=
l(k.prototype,{get_name:function(){return"CollectableComponent_81"},onStart:function(){T.getSystemEntity(this.owner);this._actorSystem=T.getSystemEntity(this.owner).getComponent("ActorSystem_41");null!=this.owner._compMap.PhysicsComponent_34&&this.owner._compMap.PhysicsComponent_34.addContactType(this.type);this._soundSystem=T.getSystemEntity(this.owner)._compMap.SoundSystem_19},collect:function(a){""!=this.collectedSound&&this._soundSystem.play(this.collectedSound,this.owner,jg.SOUND_CHANNEL);this.isCollected=
!0;null!=this.owner._compMap.PhysicsComponent_34&&this.owner._compMap.PhysicsComponent_34.enable(!1);if(ga.__instanceof(this.owner._compMap.Sprite_5,Pb)){var b=this.owner._compMap.Sprite_5;if(b.animation.hasAnim("pickup")){b.animation.gotoAndPlay("pickup",{onComplete:function(a,b){return function(){return a(b)}}(m(this,this.onCollect),a),loop:!1});return}}this.onCollect(a)},onCollect:function(){this._actorSystem.removeActor(this.owner)},isCollectable:function(){return this.isActive&&!this.isCollected},
__class__:jg});var xk=function(){this.onCollection=new Nc;this.targets=["COLLECTABLE"];k.call(this)};f["stolo.ensys.components.CollectorComponent"]=xk;xk.__name__=["stolo","ensys","components","CollectorComponent"];xk.__super__=k;xk.prototype=l(k.prototype,{get_name:function(){return"CollectorComponent_80"},onStart:function(){k.prototype.onStart.call(this);this._physic=this.owner._compMap.PhysicsComponent_34;null!=this._physic&&this._physic.addContactType("COLLECTOR");T.getSystemEntity(this.owner);
this._physicSystem=T.getSystemEntity(this.owner).getComponent("PhysicSystem_36");this._physicSystem.addContactListener(ea.BEGIN,wa.ANY,"COLLECTOR",this.targets,this.owner,m(this,this.onContactBegin))},onStop:function(){this._physicSystem.removeContactListener(ea.BEGIN,wa.ANY,"COLLECTOR",this.targets,this.owner);this._physic=this._physicSystem=null;k.prototype.onStop.call(this)},onContactBegin:function(a){var b=a._compMap.CollectableComponent_81;null!=b&&(b.isCollectable()&&b.collect(this.owner),this.onCollection.emit(this.owner,
a))},__class__:xk});var sh=function(){this.onDamage=new O;this._ignoreList=new Bb;this._actorsToDamage=[];this.currentCooldown=-100;k.call(this)};f["stolo.ensys.components.DamageComponent"]=sh;sh.__name__=["stolo","ensys","components","DamageComponent"];sh.__super__=k;sh.prototype=l(k.prototype,{get_name:function(){return"DamageComponent_33"},enable:function(a){null==a&&(a=!0);if(!a)return this.disable();this.enabled=!0},disable:function(){this.enabled=!1},ignoreActor:function(a,b){null==b&&(b=!0);
(b||null!=this._ignoreList.h.__keys__[a.__id__])&&this._ignoreList.set(a,b)},onStart:function(){null==this.damager&&(this.damager=this.owner);this._physicsSystem=T.getSystemEntity(this.owner)._compMap.PhysicSystem_36;null!=this.owner._compMap.PhysicsComponent_34&&this.owner._compMap.PhysicsComponent_34.addContactType("DAMAGER");this._physicsSystem.addContactListener(ea.PRELISTENER,wa.ANY,this.target,"DAMAGER",this.owner,m(this,this.onPreContact));this._physicsSystem.addContactListener(ea.BEGIN,wa.ANY,
this.target,"DAMAGER",this.owner,m(this,this.onContactBegin));this._physicsSystem.addContactListener(ea.END,wa.ANY,this.target,"DAMAGER",this.owner,m(this,this.onContactEnd));k.prototype.onStart.call(this)},onStop:function(){this._physicsSystem.removeContactListener(ea.PRELISTENER,wa.ANY,this.target,"DAMAGER",this.owner);this._physicsSystem.removeContactListener(ea.BEGIN,wa.ANY,this.target,"DAMAGER",this.owner);this._physicsSystem.removeContactListener(ea.END,wa.ANY,this.target,"DAMAGER",this.owner);
this._actorsToDamage=this._ignoreList=this._physicsSystem=null;k.prototype.onStop.call(this)},onUpdate:function(a){this.currentCooldown-=a;if(!(0<this.currentCooldown||0==this._actorsToDamage.length||!this.enabled||0==this.charge)){for(var a=0,b=this._actorsToDamage;a<b.length;){var c=b[a];++a;this.damageActor(c)}this.charge--;this.currentCooldown=this.cooldown}},damageActor:function(a){if(!this._ignoreList.h[a.__id__]){var b=a._compMap.HealthComponent_12,c=!1;null!=b&&(c=b.damage(this.value,this.damager,
this.knockBackX,this.knockBackY))&&this.onDamage.emit(a)}},onPreContact:function(){return!0},onContactBegin:function(a){this._actorsToDamage.push(a)},onContactEnd:function(a){Q.remove(this._actorsToDamage,a)},__class__:sh});var Ge=function(a,b,c,d,e){null==e&&(e=0.3);null==d&&(d=16727552);null==b&&(b=100);null==a&&(a=100);this.font=Ge.DefaultFont;this.debugOnly=!0;k.call(this);this.shape=Ge.getShape(a,b,d,e);this.text=c};f["stolo.ensys.components.DebugComponent"]=Ge;Ge.__name__=["stolo","ensys","components",
"DebugComponent"];Ge.getShape=function(a,b,c,d){null==d&&(d=0.3);null==c&&(c=16727552);null==b&&(b=100);null==a&&(a=100);return{alpha:d,color:c,width:a,height:b}};Ge.__super__=k;Ge.prototype=l(k.prototype,{get_name:function(){return"DebugComponent_59"},onAdded:function(){this.debugOnly&&this.owner.remove(this)},onStart:function(){this.debugOnly||(null==this.owner._compMap.Sprite_5&&this.owner.add(new V),null!=this.shape&&0<this.shape.width&&0<this.shape.height&&(0>=this.shape.color&&(this.shape.color=
0),0>=this.shape.alpha&&(this.shape.alpha=0.3),this.setShape(this.shape)),null!=this.text&&""!=this.text&&(this.textSprite=S.getTextSprite(this.font),this.textSprite.set_text(this.text),this.owner.addChild((new r).add(this.textSprite)),this.centerText&&this.textSprite.centerAnchor()),k.prototype.onStart.call(this))},setShape:function(a){null!=this.bg&&this.bg.owner.dispose();this.bg=new eb(a.color,a.width,a.height);this.bg.alpha.set__(a.alpha);this.owner.addChild((new r).add(this.bg));this.center&&
this.bg.centerAnchor();return this.bg},__class__:Ge});var Fe=function(){this.fixed=this.fixedRotation=!0;this.direction=1;this.rotation=0;k.call(this)};f["stolo.ensys.components.TransformComponent"]=Fe;Fe.__name__=["stolo","ensys","components","TransformComponent"];Fe.__super__=k;Fe.prototype=l(k.prototype,{get_name:function(){return"TransformComponent_43"},onAdded:function(){k.prototype.onAdded.call(this);null==this.position&&(this.position={x:0,y:0})},setXY:function(a,b){this.position.x=a;this.position.y=
b},flip:function(){this.direction*=-1;var a=this.owner._compMap.Sprite_5;null!=a&&(a.forceUpdate=!0)},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.position.x-a.position.x,a=this.position.y-a.position.y;return b*b+a*a},__class__:Fe});var yk=function(){this.y=new J(0);this.x=new J(0);k.call(this)};f["stolo.ensys.components.MoveTransformComponent"]=yk;yk.__name__=["stolo","ensys","components","MoveTransformComponent"];yk.__super__=k;yk.prototype=
l(k.prototype,{get_name:function(){return"MoveTransformComponent_68"},dispose:function(){k.prototype.dispose.call(this);this.y=this.x=this._callback=this._transform=null},onActorAdded:function(){this._transform=this.owner._compMap.TransformComponent_43;if(null==this._transform)throw"This component depends on a transform component";this.x.set__(this._transform.position.x);this.y.set__(this._transform.position.y)},onUpdate:function(a){k.prototype.onUpdate.call(this,a);this.isComplete()||(this.x.update(a),
this.y.update(a),this._transform.setXY(this.x._value,this.y._value),this.isComplete()&&this.complete())},complete:function(){if(null!=this._callback){var a=this._callback;this._callback=null;a(this.owner)}},isComplete:function(){return null!=this.x._behavior&&!this.x._behavior.isComplete()||null!=this.y._behavior&&!this.y._behavior.isComplete()?!1:!0},__class__:yk});var Bn=function(){};f["stolo.ensys.components.IActivable"]=Bn;Bn.__name__=["stolo","ensys","components","IActivable"];var th=function(){this.speed=
1;this.isToggle=this.repeat=!1;this.isActive=!0;k.call(this)};f["stolo.ensys.components.MoveSequenceComponent"]=th;th.__name__=["stolo","ensys","components","MoveSequenceComponent"];th.__interfaces__=[Bn];th.__super__=k;th.prototype=l(k.prototype,{get_name:function(){return"MoveSequenceComponent_69"},dispose:function(){k.prototype.dispose.call(this);null!=this._sequence&&this._sequence.dispose();this.initPosition=this.position=this._sequence=this._script=this._physics=this._transform=null},onStart:function(){this._transform=
this.owner._compMap.TransformComponent_43;this._transform.fixed=!1;this.initPosition=new jb(this._transform.position.x,this._transform.position.y);this._physics=this.owner._compMap.PhysicsComponent_34;null!=this._physics&&this._physics.setKinematic(!0);!T.inEditor(this.owner)&&this.isActive&&(this.isActive=!1,this.activate())},onUpdate:function(a){null!=this.position&&(this.position.update(a),this._transform.setXY(this.position.x._value,this.position.y._value))},startSequence:function(){if(!(null==
this.sequence||null!=this._sequence)){var a=this.sequence.actions;this.position=new Ad(this.initPosition.x,this.initPosition.y);var b={x:this.position.x,y:this.position.y,offsetX:this.initPosition.x,offsetY:this.initPosition.y};null==this.sequence.loop&&(this.sequence.loop=!0);this.repeat=this.sequence.yoyo||this.sequence.loop;this._sequence=new Zb;this._sequence.init(a,b,this.sequence.loop,this.sequence.yoyo,this.sequence.delay);this._sequence.add(new ma(m(this,this.onSequenceComplete)));this._script=
new sb;this.owner.add(this._script);this._script.run(this._sequence)}},onSequenceComplete:function(){this.repeat&&this._script.run(this._sequence)},activate:function(){this.isActive||(this.isActive=!0,null!=this.sequence&&this.startSequence())},__class__:th});var kg=function(){this.crossLength=20;this.crossThickness=3;this.padding=0;this.color2=16777215;this.color1=0;this.dotLength=5;this.thickness=1;k.call(this)};f["stolo.ensys.editor.component.EditorSelectionComponent"]=kg;kg.__name__=["stolo",
"ensys","editor","component","EditorSelectionComponent"];kg.__super__=k;kg.prototype=l(k.prototype,{get_name:function(){return"EditorSelectionComponent_49"},onStart:function(){k.prototype.onStart.call(this);this._transform=this.owner._compMap.TransformComponent_43;this._display=this.owner._compMap.Sprite_5;if(null!=this._display)if(this._display.initialized)this.build();else this._display.onInitComplete.connect(m(this,this.build)).once()},onRemoved:function(){k.prototype.onRemoved.call(this);null!=
this._container&&(this._container.parent.removeChild(this._container),this._container=null);this._display=this._transform=this._sprite=null},onUpdate:function(a){k.prototype.onUpdate.call(this,a);this.updateTransform()},updateTransform:function(){null!=this._sprite&&(this._sprite.setXY(this._transform.position.x,this._transform.position.y),this._sprite.setRotation(this._transform.rotation))},build:function(){null!=this._container&&this._container.dispose();var a;a=this.owner._internal_getFromParents("RendererSystem_45");
var b=a.getActorLayer(this.owner);a=a.addLayer({name:b.getName()+"_selection\u00a0",parallax:b.parallax,editor:{unlockable:!0,locked:!0}});a.set_pointerEnabled(!1);var b=this._display.getNaturalWidth()+2*this.padding,c=this._display.getNaturalHeight()+2*this.padding;if(ga.__instanceof(this._display,Pb)&&null!=this.owner._compMap.PhysicsComponent_34){var d=this.owner._compMap.PhysicsComponent_34.shape;null!=d.width&&null!=d.height&&(b=d.width+2*this.padding,c=d.height+2*this.padding)}var d=x._platform.getRenderer().createTexture(b,
c),e=d.get_graphics();this.drawDottedLine(e,!0,0,0,b,this.dotLength,this.thickness,this.color1,this.color2);this.drawDottedLine(e,!1,0,0,c,this.dotLength,this.thickness,this.color1,this.color2);this.drawDottedLine(e,!0,0,c-this.thickness,b,this.dotLength,this.thickness,this.color1,this.color2);this.drawDottedLine(e,!1,b-this.thickness,0,c,this.dotLength,this.thickness,this.color1,this.color2);this.drawDottedLine(e,!0,this._display.anchorX._value-0.5*this.crossLength,this._display.anchorY._value-0.5*
this.crossThickness,this.crossLength,this.dotLength,this.crossThickness,this.color1,this.color1);this.drawDottedLine(e,!1,this._display.anchorX._value-0.5*this.crossThickness,this._display.anchorY._value-0.5*this.crossLength,this.crossLength,this.dotLength,this.crossThickness,this.color1,this.color1);this._sprite=new ta(d);this._sprite.setAnchor(this._display.anchorX._value,this._display.anchorY._value);b=this._sprite.scaleX;b.set__(b._value*this._transform.direction);this._container=new r;this._container.add(this._sprite);
a.owner.addChild(this._container)},drawDottedLine:function(a,b,c,d,e,h,n,g,f){for(var i=0,j=!1;i<e;){var k;k=j?g:f;b?a.fillRect(k,c+i,d,Math.min(h,e-i),n):a.fillRect(k,c,d+i,n,Math.min(h,e-i));j=!j;i+=h}},__class__:kg});var uh=function(){V.call(this)};f["stolo.ensys.components.FillComponent"]=uh;uh.__name__=["stolo","ensys","components","FillComponent"];uh.__super__=V;uh.prototype=l(V.prototype,{initStart:function(){this.setAlpha(1-this.transparency);this.initEnd()},draw:function(a){a.fillRect(this.color,
0,0,this.width,this.height)},getNaturalWidth:function(){return this.width},getNaturalHeight:function(){return this.height},__class__:uh});var Ud=function(){V.call(this)};f["stolo.ensys.components.PatternComponent"]=Ud;Ud.__name__=["stolo","ensys","components","PatternComponent"];Ud.__super__=V;Ud.prototype=l(V.prototype,{initStart:function(){this._texture=this.getTexture(this.pack,this.asset);null!=this._texture&&(0<this.width||(this.width=this._texture.get_width()),0<this.height||(this.height=this._texture.get_height()));
this.initEnd()},draw:function(a){null!=this._texture&&a.drawPattern(this._texture,0,0,this.width,this.height)},getNaturalWidth:function(){return this.width},getNaturalHeight:function(){return this.height},__class__:Ud});var $b=function(){this._px=this._py=this._tx=this._ty=0;V.call(this)};f["stolo.ensys.components.TilerComponent"]=$b;$b.__name__=["stolo","ensys","components","TilerComponent"];$b.__super__=V;$b.prototype=l(V.prototype,{draw:function(a){null!=this._texture&&a.drawTexture(this._texture,
0,0)},enableCulling:function(a){V.prototype.enableCulling.call(this,a);this.cullTexture&&!a&&!this.isBuilt&&this.buildTexture()},getNaturalWidth:function(){return this.width},getNaturalHeight:function(){return this.height},onStart:function(){this._transform=this.owner._compMap.TransformComponent_43;this._image=this.getTexture(this.pack,this.asset);this.updatePosition();this.width=this.xsize*this.tileWidth|0;this.height=this.ysize*this.tileHeight|0;0!=this.xsize%2&&(this._px+=0.5*this.tileWidth|0);
0!=this.ysize%2&&(this._py+=0.5*this.tileHeight|0);this._tx=(this._px-0.5*this.width)/this.tileWidth|0;this._ty=(this._py-0.5*this.height)/this.tileHeight|0;null!=this.owner._compMap.PhysicsComponent_34&&this.owner._compMap.PhysicsComponent_34.setPosition(this._transform.position.x,this._transform.position.y);this._grid=$b.tileCache.get(this.grid);null==this._grid&&(this._grid=new N,$b.tileCache.set(this.grid,this._grid));for(var a=0,b=this.xsize;a<b;)for(var c=a++,d=0,e=this.ysize;d<e;){var h=d++;
this.setTile(this._tx+c,this._ty+h)}this.cullTexture||this.buildTexture();V.prototype.onStart.call(this)},updatePosition:function(){this._px=y["int"](Math.floor(this._transform.position.x/this.tileWidth)*this.tileWidth);this._py=y["int"](Math.floor(this._transform.position.y/this.tileHeight)*this.tileHeight);this._transform.position.x=this._px;this._transform.position.y=this._py;this.forceUpdate=!0},onUpdate:function(a){V.prototype.onUpdate.call(this,a);null!=this.owner._internal_getFromParents("BaseGameSystem_20",
Uc)&&this.updatePosition()},getTileId:function(a,b){return a+"_"+b},getTile:function(a,b){return this._grid.get(this.getTileId(a,b))},setTile:function(a,b,c){null==c&&(c=!0);this._grid.set(this.getTileId(a,b),c)},getTextureCacheId:function(){return"tiler_"+this.pack+"_"+this.asset+"_"+this.width+"x"+this.height},buildTexture:function(){this.isBuilt=!0;var a=null,b=null;if(this.drawTexture){a=this.getTextureCacheId();this._texture=$b.cache.get(a);if(null!=this._texture)return this.endBuild();this._texture=
x._platform.getRenderer().createTexture(this.width,this.height);b=this._texture.get_graphics()}for(var c=Math.floor(this._image.get_width()/this.tileWidth),d=0,e=this.xsize;d<e;)for(var h=d++,n=0,g=this.ysize;n<g;){var f=n++,i=this._tx+h,j=this._ty+f,k=0;this.cornerMode?(this.getTile(i+1,j-1)&&(k+=1),this.getTile(i+1,j+1)&&(k+=2),this.getTile(i-1,j+1)&&(k+=4),this.getTile(i-1,j-1)&&(k+=8),7==k&&!this.getTile(i,j-1)&&(k=6),7==k&&!this.getTile(i-1,j)&&(k=3),14==k&&!this.getTile(i,j-1)&&(k=6),14==k&&
!this.getTile(i+1,j)&&(k=12),11==k&&!this.getTile(i,j+1)&&(k=9),11==k&&!this.getTile(i-1,j)&&(k=3),13==k&&!this.getTile(i,j+1)&&(k=9),13==k&&!this.getTile(i+1,j)&&(k=12)):(this.getTile(i,j-1)&&(k+=1),this.getTile(i+1,j)&&(k+=2),this.getTile(i,j+1)&&(k+=4),this.getTile(i-1,j)&&(k+=8));var i=this.mapping[k],l=i[Math.floor(Math.random()*i.length)],i=l%c,j=Math.floor(l/c);this.drawTexture?b.drawSubTexture(this._image,h*this.tileWidth,f*this.tileHeight,i*this.tileWidth,j*this.tileHeight,this.tileWidth,
this.tileHeight):(a="tiler_"+this.pack+"_"+this.asset+"_"+k+"_"+l,k=null,$b.cache.exists(a)?k=$b.cache.get(a):(k=this._image.subTexture(i*this.tileWidth,j*this.tileHeight,this.tileWidth,this.tileHeight),$b.cache.set(a,k)),k=new ta(k),k.set_pointerEnabled(0!=(this._flags&4)),this.owner.addChild((new r).add(k)),k.setXY(h*this.tileWidth,f*this.tileHeight))}this.drawTexture&&$b.cache.set(a,this._texture);this.endBuild()},endBuild:function(){this.initEnd();this.isBuilt=!0},dispose:function(){this._texture=
this._grid=this._image=null;V.prototype.dispose.call(this)},__class__:$b});var sd=function(){V.call(this)};f["stolo.ensys.components.SlicerComponent"]=sd;sd.__name__=["stolo","ensys","components","SlicerComponent"];sd.ValidateActorExport=function(a,b){a.width=b.dataWidth;a.height=b.dataHeight;return a};sd.__super__=V;sd.prototype=l(V.prototype,{draw:function(a){null!=this._texture&&a.drawTexture(this._texture,0,0)},onAdded:function(){this.dataWidth=this.width;this.dataHeight=this.height;V.prototype.onAdded.call(this)},
enableCulling:function(a){V.prototype.enableCulling.call(this,a);this.cullTexture&&!a&&!this.isBuilt&&this.buildTexture()},getNaturalWidth:function(){return this.width},getNaturalHeight:function(){return this.height},initStart:function(){this._image=this.getTexture(this.pack,this.asset);var a=this.slices[0],b=this.slices[1];this.slicesData=new Dc;for(var c=0,d=0,e,h,n=0,g=0,f=b.length-1;g<f;){c=g++;d=b[c];h=b[c+1]-d;for(var i=0,j=a.length-1;i<j;)e=i++,c=a[e],e=a[e+1]-c,this.slicesData.set(++n,{id:n,
x:c,y:d,width:e,height:h})}this.slicesData.set(-1,{id:-1,x:0,y:0,width:0,height:0});b=this.slicesData.get(this.template[0][0][0]);n=this.slicesData.get(this.template[0][2][0]);a=this.slicesData.get(this.template[1][1][0]);this.slicesData.get(this.template[2][0][0]);d=this.slicesData.get(this.template[2][2][0]);n=b.width+n.width;this.widthVar=this.width-n;this.widthRepeat=Math.ceil(this.widthVar/a.width);this.widthVar=this.widthRepeat*a.width|0;b=b.height+d.height;this.heightVar=this.height-b;this.heightRepeat=
Math.ceil(this.heightVar/a.height);this.heightVar=this.heightRepeat*a.height|0;this.width=this.widthVar+n;this.height=this.heightVar+b;this.cullTexture||this.buildTexture()},getTextureCacheId:function(){return"slicer_"+this.pack+"_"+this.asset+"_"+this.slices[0].toString()+"_"+this.slices[1].toString()+"_"+this.dataWidth+"x"+this.dataHeight},buildTexture:function(){var a=0,b=0,c,d,e=null,h=null,n=null;if(this.drawTexture){n=this.getTextureCacheId();this._texture=sd.cache.get(n);if(null!=this._texture)return this.endBuild();
this._texture=x._platform.getRenderer().createTexture(this.width,this.height);h=this._texture.get_graphics()}for(var g=0;3>g;){for(var f=g++,i=this.template[f],j=0;3>j;){var k=j++,l=i[k];d=1==f?this.heightRepeat:1;c=1==k?this.widthRepeat:1;for(var m=0,o=0,p=0;p<d;){p++;for(var s=0;s<c;){s++;e=this.slicesData.get(l[Math.floor(Math.random()*l.length)]);if(-1!=e.id&&0<e.width&&0<e.height)if(this.drawTexture)h.drawSubTexture(this._image,a+m,b+o,e.x,e.y,e.width,e.height);else{var n="slicer_"+this.pack+
"_"+this.asset+"_"+y.string(e.x)+"x"+y.string(e.y)+"_"+y.string(e.width)+"x"+y.string(e.height),t=null;sd.cache.exists(n)?t=sd.cache.get(n):(t=this._image.subTexture(e.x,e.y,e.width,e.height),sd.cache.set(n,t));t=new ta(t);t.set_pointerEnabled(0!=(this._flags&4));this.owner.addChild((new r).add(t));t.setXY(a+m,b+o)}m+=e.width}o+=e.height;m=0}a=1==k?a+this.widthVar:a+e.width}a=0;b=1==f?b+this.heightVar:b+e.height}this.drawTexture&&sd.cache.set(n,this._texture);this.endBuild()},endBuild:function(){this.initEnd();
this.isBuilt=!0},dispose:function(){this.slicesData=this._texture=this.template=this.slices=this._image=null;V.prototype.dispose.call(this)},__class__:sd});var zk=function(){this.textvars={};this.localized=!0;this.font="debug_font";this.text="notext";V.call(this)};f["stolo.ensys.components.TextComponent"]=zk;zk.__name__=["stolo","ensys","components","TextComponent"];zk.__super__=V;zk.prototype=l(V.prototype,{initStart:function(){this.localized?this.textfield=new uc(this.text,this.font,this.textvars):
(this.textfield=S.getTextSprite(this.font),this.textfield.set_text(this.text));this.owner.addChild((new r).add(this.textfield));this.initEnd()},getNaturalWidth:function(){return this.textfield.getNaturalWidth()},getNaturalHeight:function(){return this.textfield.getNaturalWidth()},__class__:zk});var Vd=function(){this._partsTotal=0;this._parts=[];this.horizontal=!0;this.scroll=this.scrollOffset=this.autoScroll=0;V.call(this)};f["stolo.ensys.components.ScrollerComponent"]=Vd;Vd.__name__=["stolo","ensys",
"components","ScrollerComponent"];Vd.__super__=V;Vd.prototype=l(V.prototype,{onAdded:function(){V.prototype.onAdded.call(this);null==this.assets&&(this.assets=[]);null!=this.asset&&""!=this.asset&&this.assets.push(this.asset)},onRemoved:function(){V.prototype.onRemoved.call(this);for(var a=0,b=this._parts;a<b.length;){var c=b[a];++a;c.texture=null;c.next=null;c.previous=null}this._parts=null},onUpdate:function(a){this.scrollOffset+=this.autoScroll;V.prototype.onUpdate.call(this,a)},onStart:function(){for(var a=
0,b=this.assets;a<b.length;){var c=b[a];++a;var d=0,e=null,h=0,n=0,h=c.split("@");if("void"==h[0]){if(1==h.length)throw"You must specify a size for the void "+y.string(this.assets);2==h.length?d=y.parseInt(h[1]):3==h.length&&(d=y.parseInt(h[1])+Math.round(Math.random()*y.parseInt(h[2])));h=this.horizontal?d:this.width;n=this.horizontal?this.height:d}else e=this.getTexture(this.pack,c),d=this.horizontal?e.get_width():e.get_height(),h=e.get_width(),n=e.get_height();this._parts.push({texture:e,width:h,
height:n,next:null,previous:null,first:!1,last:!1,start:this._partsTotal,end:this._partsTotal+d});this._partsTotal+=d}a=0;for(b=this._parts.length;a<b;)c=a++,d=this._parts[c],d.next=this._parts[c+1],d.previous=this._parts[c-1],d.first=0==c,d.last=c==this._parts.length-1;this._parts[0].previous=this._parts[this._parts.length-1];this._parts[this._parts.length-1].next=this._parts[0];this._drawTextureFunc=this.horizontal?m(this,this.drawTextureHorizontal):m(this,this.drawTextureVertical);V.prototype.onStart.call(this)},
draw:function(a){if(!(0>=this._parts.length)){var b=(this.scroll+this.scrollOffset)%this._partsTotal;0>b&&(b=this._partsTotal+b);for(var c=this._parts[0];b>c.end&&!(c=c.next,c.last););this._drawTextureFunc(a,c,b-c.start,0)}},drawTextureHorizontal:function(a,b,c,d){var e=Math.max(1,b.width-c),h=Math.max(1,this.width-d);e<h?(null!=b.texture&&a.drawSubTexture(b.texture,d,0,c,0,e,this.height),this.drawTextureHorizontal(a,b.next,0,d+e)):null!=b.texture&&a.drawSubTexture(b.texture,d,0,c,0,h,this.height)},
drawTextureVertical:function(a,b,c,d){var e=Math.max(1,b.height-c),h=Math.max(1,this.height-d);e<h?(null!=b.texture&&a.drawSubTexture(b.texture,0,d,0,c,this.width,e),this.drawTextureVertical(a,b.next,0,d+e)):null!=b.texture&&a.drawSubTexture(b.texture,0,d,0,c,this.width,h)},getNaturalWidth:function(){return this.width},getNaturalHeight:function(){return this.height},__class__:Vd});var Ak=function(){this.lockHorizontal=this.lockVertical=this.lockWidth=this.lockHeight=!1;Vd.call(this)};f["stolo.ensys.components.LayerScrollerComponent"]=
Ak;Ak.__name__=["stolo","ensys","components","LayerScrollerComponent"];Ak.__super__=Vd;Ak.prototype=l(Vd.prototype,{onAdded:function(){Vd.prototype.onAdded.call(this)},onRemoved:function(){Vd.prototype.onRemoved.call(this)},onStart:function(){Vd.prototype.onStart.call(this);this._layer=this.owner.parent._compMap.Sprite_5;this._layerX=this._layer.x;this._layerY=this._layer.y;this._layerS=this.horizontal?this._layerX:this._layerY;var a;T.getSystemEntity(this.owner);a=T.getSystemEntity(this.owner).getComponent("RendererSystem_45");
this._rendererDimensions=null!=a?a.dimensionsScaled:new id(0,0,q.gameWidth,q.gameHeight)},onUpdate:function(a){Vd.prototype.onUpdate.call(this,a);this.scroll=-this._layerS._value;this.lockHorizontal&&this.anchorX.set__(this._layerX._value);this.lockVertical&&this.anchorY.set__(this._layerY._value);this.lockWidth&&(this.width=this._rendererDimensions.width|0);this.lockHeight&&(this.height=this._rendererDimensions.height|0)},__class__:Ak});var Bk=function(){this.lockX=this.lockY=!1;k.call(this)};f["stolo.ensys.components.PositionLockComponent"]=
Bk;Bk.__name__=["stolo","ensys","components","PositionLockComponent"];Bk.__super__=k;Bk.prototype=l(k.prototype,{get_name:function(){return"PositionLockComponent_71"},onStart:function(){k.prototype.onStart.call(this);this._transform=this.owner._compMap.TransformComponent_43;this._targetX=this._transform.position.x;this._targetY=this._transform.position.y},onStop:function(){k.prototype.onStop.call(this)},onUpdate:function(a){k.prototype.onUpdate.call(this,a);this.lockX&&(this._transform.position.x=
this._targetX);this.lockY&&(this._transform.position.y=this._targetY)},__class__:Bk});var Gd=function(){this.color=0;this.thickness=1;this.dotLength=5;this.length=100;V.call(this)};f["stolo.ensys.components.LineComponent"]=Gd;Gd.__name__=["stolo","ensys","components","LineComponent"];Gd.__super__=V;Gd.prototype=l(V.prototype,{dispose:function(){V.prototype.dispose.call(this);null!=this._texture&&!Gd.USE_CACHE&&this._texture.dispose()},onStart:function(){V.prototype.onStart.call(this);this._texture=
this.createDottedLine(this.length,this.dotLength,this.thickness,this.color)},draw:function(a){null!=this._texture&&a.drawTexture(this._texture,0,0)},createDottedLine:function(a,b,c,d){null==d&&(d=0);var e=a+"@"+b+"@"+c+"@"+d;if(Gd.USE_CACHE&&Gd.CACHE.exists(e))return Gd.CACHE.get(e);var h=x._platform.getRenderer().createTexture(a,c),n=h.get_graphics();if(0<b)for(var g=0,f=!1;g<a;)f&&n.fillRect(d,g,0,Math.min(b,a-g),c),f=!f,g+=b;else n.fillRect(d,0,0,a,c);Gd.USE_CACHE&&Gd.CACHE.set(e,h);return h},
getNaturalWidth:function(){return this.length},getNaturalHeight:function(){return this.thickness},__class__:Gd});var Ck=function(){this.spread=200;this.maxScale=1;this.minScale=0.1;this.maxAlpha=0.3;this.minAlpha=0.1;this.pack="sprites";this.asset="shadow";this.enabled=!0;k.call(this)};f["stolo.ensys.components.GroundShadowComponent"]=Ck;Ck.__name__=["stolo","ensys","components","GroundShadowComponent"];Ck.__super__=k;Ck.prototype=l(k.prototype,{get_name:function(){return"GroundShadowComponent_72"},
dispose:function(){k.prototype.dispose.call(this);this.reference=this._shadow=null},onStart:function(){k.prototype.onStart.call(this);this._shadow=new ta(E.getTextureFromPack(this.asset,this.pack));this._shadow.centerAnchor();null!=this.offset&&this._shadow.setXY(this.offset.x,this.offset.y);(new r).add(this._shadow);this.sendToBack()},sendToBack:function(){null!=this._shadow&&this.owner.addChild(this._shadow.owner,!1)},onUpdate:function(a){k.prototype.onUpdate.call(this,a);this.enabled&&null!=this.reference&&
this.set(this.reference.y._value)},set:function(a){var b=1-a/-this.spread,a=this.minAlpha+b*(this.maxAlpha-this.minAlpha),b=this.minScale+b*(this.maxScale-this.minScale);0<a?(this._shadow.set_visible(!0),this._shadow.setScale(b),this._shadow.setAlpha(a)):this._shadow.set_visible(!1)},__class__:Ck});var td=function(){this._typesToRemove=[];this._typesToAdd=[];this._complexShape=!1;this.onShapeCreated=new Nc;this.onShapesCreated=new ka;this.onInitialize=new ka;this.forceUpdate=this.initialized=!1;this.setTransform=
!0;this.damping=td.defaultDamping;k.call(this)};f["stolo.ensys.components.PhysicsComponent"]=td;td.__name__=["stolo","ensys","components","PhysicsComponent"];td.__interfaces__=[Pi];td.__super__=k;td.prototype=l(k.prototype,{get_name:function(){return"PhysicsComponent_34"},onAdded:function(){k.prototype.onAdded.call(this);this.cleanShapes()},onActorAdded:function(){T.getSystemEntity(this.owner);this._cullingSystem=T.getSystemEntity(this.owner).getComponent("CullingSystem_42");T.getSystemEntity(this.owner);
this._physicSystem=T.getSystemEntity(this.owner).getComponent("PhysicSystem_36");T.getSystemEntity(this.owner);this._physicDebugSystem=T.getSystemEntity(this.owner).getComponent("PhysicDebugSystem_35");this._transform=this.owner._compMap.TransformComponent_43;this._display=this.owner._compMap.Sprite_5;this.createBody();if(null!=this._display&&!this._display.initialized&&null!=this._display.onInitComplete)this._display.onInitComplete.connect(m(this,this.initBody)).once();else this.initBody()},onStart:function(){},
onStop:function(){this.enable(!1);this._cullingSystem.removeComponent(this,this.owner);k.prototype.onRemoved.call(this);this._physicDebugSystem=this._display=this._cullingSystem=this._physicSystem=null;null!=this._body&&(this._body.get_userData().component=null,this._body.get_userData().actor=null);this._transform=this._rayResultList=this._ray=null},onUpdate:function(a){if(this.enabled){if(!this._transform.fixed||this.forceUpdate)this.setTransform?0<this.damping?(this._transform.position.x=Kb.lerp(this._transform.position.x,
this._body.get_position().get_x(),a*this.damping),this._transform.position.y=Kb.lerp(this._transform.position.y,this._body.get_position().get_y(),a*this.damping)):(this._transform.position.x=this._body.get_position().get_x(),this._transform.position.y=this._body.get_position().get_y()):this.setPosition(this._transform.position.x,this._transform.position.y);if(!this._transform.fixedRotation||this.forceUpdate)this.setTransform?this._transform.rotation=180*this._body.zpp_inner.rot/3.141592653589793:
this.setRotation(3.141592653589793*this._transform.rotation/180);this.forceUpdate=!1}},enableCulling:function(a){a?this._physicSystem.removeBody(this._body):this.enabled&&this._physicSystem.addBody(this._body)},enable:function(a){null==a&&(a=!0);null!=this._physicSystem&&(a?(!this.enabled&&null!=this._transform&&this.setPosition(this._transform.position.x,this._transform.position.y),this._physicSystem.addBody(this._body)):this._physicSystem.removeBody(this._body),this.enabled=a)},disable:function(){this.enable(!1)},
createBody:function(){this._body=new mh;this.resetType();0!=this.mass&&this._body.set_mass(this.mass);-1!=this.massScale&&this._body.set_gravMassScale(this.massScale);this._body.set_allowRotation(!this._transform.fixedRotation);this._body.set_isBullet(this.bullet);this._body.get_userData().component=this;this._body.get_userData().actor=this.owner;this._body.get_position().set_x(this._transform.position.x);this._body.get_position().set_y(this._transform.position.y);this._body.set_rotation(3.141592653589793*
this._transform.rotation/180)},initBody:function(){this.createShapes();this.initContacts();for(var a=0,b=this._typesToAdd;a<b.length;){var c=b[a];++a;this.addContactType(c)}a=0;for(b=this._typesToRemove;a<b.length;)c=b[a],++a,this.removeContactType(c);this.setVelocity(this.velocity.x,this.velocity.y);this.applyImpulse(this.impulse.x,this.impulse.y);this._cullingSystem.addComponent(this,this.owner);this.onInitialize.emit();this.initialized=!0},cleanShapes:function(){if(P.is(this.shape,K.TObject))this.shape=
P.merge(td.DEFAULT_SHAPE,this.shape,!0);else if(P.is(this.shape,K.TClass(Array))){var a;a=ga.__cast(this.shape,Array);for(var b=0,c=a.length;b<c;){var d=b++;a[d]=P.merge(td.DEFAULT_SHAPE,a[d],!0)}this.shape=a}},createShapes:function(){this._body.zpp_inner.wrap_shapes.clear();if(P.is(this.shape,K.TObject))this._complexShape=!1,this.createShape(this.shape);else if(P.is(this.shape,K.TClass(Array))){this._complexShape=!0;var a=0,b;for(b=ga.__cast(this.shape,Array);a<b.length;){var c=b[a];++a;this.createShape(c)}}this.onShapesCreated.emit()},
createShape:function(a){this._complexShape||(this._complexShape=!("box"==a.type||null==a.type));var b=kn.createShape(a,this._display,this.offset);this.addShape(b);this.onShapeCreated.emit(a,b);return b},addShape:function(a){a=this._body.zpp_inner.wrap_shapes.add(a);1<this._body.zpp_inner.wrap_shapes.get_length()&&(this._complexShape=!0);return a},getBody:function(){return this._body},initContacts:function(){if(P.is(this.contacts,K.TClass(String)))this.addContactType(this.contacts.toUpperCase());else if(P.is(this.contacts,
K.TClass(Array))){var a=0,b;for(b=ga.__cast(this.contacts,Array);a<b.length;){var c=b[a];++a;this.addContactType(c.toUpperCase())}}},getCbType:function(a){return this._physicSystem.getCbType(a)},hasContactType:function(a){return this._body.get_cbTypes().has(this.getCbType(a))},removeContactType:function(a){null==this._body?this._typesToRemove.push(a):this._body.get_cbTypes().remove(this.getCbType(a))},addContactType:function(a){null==this._body?this._typesToAdd.push(a):this._body.get_cbTypes().add(this.getCbType(a))},
raycast:function(a,b,c,d,e,h){null==e&&(e=0);null==d&&(d=0);if(null==this._body||null==this._body.get_space())return null;null==this._ray&&(this._ray=new qm(da.get(0,0,!0),da.get(0,0,!0)));b=da.get(b,c,null);this._ray.zpp_inner.origin.set(this._body.localPointToWorld(da.get(d,e,!0),!0));this._ray.zpp_inner.direction.set(b);this._ray.set_maxDistance(a);a=this._body.get_space().rayCast(this._ray,!1,h);if(null!=a)return a.zpp_inner.shape.get_body().get_userData().actor;b.dispose();return null},getSize:function(){return this._complexShape?
{width:this._body.zpp_inner.aabb.wrapper().get_width(),height:this._body.zpp_inner.aabb.wrapper().get_height()}:{width:this.shape.width,height:this.shape.height}},getVelocity:function(){return null==this._body?da.get(0,0,!0):this._body.get_velocity()},resetVelocity:function(){null!=this._body&&this.getVelocity().setxy(0,0)},setVelocity:function(a,b){null!=this._body&&(this._body.get_velocity().set_x(a),this._body.get_velocity().set_y(b))},applyImpulse:function(a,b){null!=this._body&&this._body.applyImpulse(da.get(a,
b,!0))},applyAngularImpulse:function(a,b){null!=this._body&&this._body.applyImpulse(da.weak(Math.cos(a)*b,Math.sin(a)*b))},resetImpulse:function(){null!=this._body&&this._body.set_force(da.get(0,0,!0))},setPosition:function(a,b,c){null==c&&(c=0);null!=this._body&&(0<c?this._body.setVelocityFromTarget(da.get(a,b,!0),this._body.zpp_inner.rot,c):(this._body.set_position(da.get(a,b,!0)),this.setTransform&&(this._transform.position.x=a,this._transform.position.y=b)))},moveBy:function(a,b,c){null==c&&(c=
0);null!=this._transform&&this.setPosition(this._transform.position.x+a,this._transform.position.y+b,c)},enableRotation:function(a){this._transform.fixedRotation=!a;this._body.set_allowRotation(a);a||(this._body.set_angularVel(0),this._transform.rotation=0,a=this.owner._compMap.Sprite_5,null!=a&&a.setRotation(0))},rotate:function(a){var b=this._body;b.set_rotation(b.zpp_inner.rot+a)},setRotation:function(a){null!=this._body&&(this._body.set_rotation(a),this.setTransform&&(this._transform.rotation=
180*this._body.zpp_inner.rot/3.141592653589793))},getRotation:function(){return this._body.zpp_inner.rot},getAngle:function(a){var b=a._compMap.PhysicsComponent_34.getBody().get_position();return Math.atan2(function(){b.zpp_inner.validate();return b.zpp_inner.y}(this)-this._body.get_position().get_y(),function(){b.zpp_inner.validate();return b.zpp_inner.x}(this)-this._body.get_position().get_x())},setKinematic:function(a){null==a&&(a=!1);this.kinematic=!0;null!=this._body&&this._body.set_type(function(){null==
g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new La,g.internal=!1);return g.BodyType_KINEMATIC}(this));a&&(this.setTransform=!1)},setDynamic:function(){this._body.set_type(function(){null==g.BodyType_DYNAMIC&&(g.internal=!0,g.BodyType_DYNAMIC=new La,g.internal=!1);return g.BodyType_DYNAMIC}(this))},setMassScale:function(a){this._body.set_gravMassScale(a)},resetType:function(){if(null!=this._transform){var a;this._transform.fixed?(null==g.BodyType_STATIC&&(g.internal=!0,g.BodyType_STATIC=
new La,g.internal=!1),a=g.BodyType_STATIC):(null==g.BodyType_DYNAMIC&&(g.internal=!0,g.BodyType_DYNAMIC=new La,g.internal=!1),a=g.BodyType_DYNAMIC);this.kinematic&&(null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new La,g.internal=!1),a=g.BodyType_KINEMATIC,this._transform.fixed=!1);null!=this._body&&this._body.set_type(a)}},__class__:td});var vh=function(){this.color=16776960;this.debug=!0;k.call(this)};f["stolo.ensys.components.PhysicsDebugComponent"]=vh;vh.__name__=["stolo","ensys",
"components","PhysicsDebugComponent"];vh.__super__=k;vh.prototype=l(k.prototype,{get_name:function(){return"PhysicsDebugComponent_37"},onActorAdded:function(){this._transform=this.owner._compMap.TransformComponent_43;this._physics=this.owner._compMap.PhysicsComponent_34;if(null!=this._physics){var a=this._physics.getBody();if(null!=a&&!a.zpp_inner.wrap_shapes.empty())this.onShapesCreated();this._physics.onShapesCreated.connect(m(this,this.onShapesCreated));this._physics.onShapeCreated.connect(m(this,
this.onNewShape))}},onStop:function(){null!=this.container&&(this.container.parent.removeChild(this.container),this.container=null);this.sprite=null;k.prototype.onStop.call(this)},onUpdate:function(a){k.prototype.onUpdate.call(this,a);this.updateTransform()},updateTransform:function(){null!=this.sprite&&(this.sprite.setAlpha(this._physics.enabled?1:0),this.sprite.setXY(this._transform.position.x,this._transform.position.y),this.sprite.setRotation(this._transform.rotation))},init:function(){if(null==
this.container){var a;T.getSystemEntity(this.owner);a=T.getSystemEntity(this.owner).getComponent("RendererSystem_45");var b=a.getActorLayer(this.owner);this.layer=a.addLayer({name:b.getName()+"_physics",parallax:b.parallax,editor:{unlockable:!0,locked:!0}});this.layer.set_pointerEnabled(!1);this.createContainer()}},createContainer:function(){this.container=new r;this.sprite=new A;this.sprite.setAnchor(-this._physics.offset.x,-this._physics.offset.y);this.container.add(this.sprite);this.layer.owner.addChild(this.container)},
onShapesCreated:function(){null!=this.container&&(this.container.remove(this.sprite),this.container.dispose(),this.container=null,this.createContainer());this.onNewShape(this._physics.shape,null)},onNewShape:function(a){if(P.is(a,K.TObject))this.createShape(a);else if(P.is(a,K.TClass(Array)))for(var b=0,a=ga.__cast(a,Array);b<a.length;){var c=a[b];++b;this.createShape(c)}},createShape:function(a){this.init();a=new Wd(a,this.color);null!=a.texture&&(a.actor=this.owner,this.container.addChild((new r).add(a)));
this.firstSprite=y.instance(this.container.firstChild._compMap.Sprite_5,Wd)},__class__:vh});var wh=function(){this.left=this.right=this.top=this.bottom=this.acceptOnce=!1;k.call(this)};f["stolo.ensys.components.PassthroughComponent"]=wh;wh.__name__=["stolo","ensys","components","PassthroughComponent"];wh.__super__=k;wh.prototype=l(k.prototype,{get_name:function(){return"PassthroughComponent_73"},onStart:function(){k.prototype.onStart.call(this);null!=this.owner._compMap.PhysicsComponent_34&&this.owner._compMap.PhysicsComponent_34.addContactType("PASSTHROUGH");
T.getSystemEntity(this.owner);this._physicSystem=T.getSystemEntity(this.owner).getComponent("PhysicSystem_36");this._physicSystem.addContactListener(ea.PRELISTENER,wa.COLLISION,"PASSTHROUGH","PASSTHROUGHABLE",this.owner,m(this,this.onPreContact),this.acceptOnce)},onStop:function(){this._physicSystem.removeContactListener(ea.PRELISTENER,wa.COLLISION,"PASSTHROUGH","PASSTHROUGHABLE",this.owner);k.prototype.onStop.call(this);this._physicSystem=null},onPreContact:function(a,b){var c=a._compMap.PassthroughableComponent_74,
d=null!=a._compMap.TransformComponent_43&&1==a._compMap.TransformComponent_43.direction;return this.left||c.left&&180*b.angle/3.141592653589793==(d?180:0)||this.right||c.right&&180*b.angle/3.141592653589793==(d?0:180)||this.top||c.top&&90==180*b.angle/3.141592653589793||this.bottom||c.bottom&&-90==180*b.angle/3.141592653589793?!1:!0},__class__:wh});var xh=function(){k.call(this)};f["stolo.ensys.components.PassthroughableComponent"]=xh;xh.__name__=["stolo","ensys","components","PassthroughableComponent"];
xh.__super__=k;xh.prototype=l(k.prototype,{get_name:function(){return"PassthroughableComponent_74"},onStart:function(){null!=this.owner._compMap.PhysicsComponent_34&&this.owner._compMap.PhysicsComponent_34.addContactType("PASSTHROUGHABLE")},__class__:xh});var yh=function(){k.call(this)};f["stolo.ensys.components.FrictionerComponent"]=yh;yh.__name__=["stolo","ensys","components","FrictionerComponent"];yh.__super__=k;yh.prototype=l(k.prototype,{get_name:function(){return"FrictionerComponent_75"},onStart:function(){k.prototype.onStart.call(this);
null!=this.owner._compMap.PhysicsComponent_34&&this.owner._compMap.PhysicsComponent_34.addContactType("FRICTIONER");T.getSystemEntity(this.owner);this._physicSystem=T.getSystemEntity(this.owner).getComponent("PhysicSystem_36");this._physicSystem.addContactListener(ea.PRELISTENER,wa.COLLISION,"FRICTIONER","ANY_BODY",this.owner,m(this,this.onPreContact))},onStop:function(){this._physicSystem.removeContactListener(ea.PRELISTENER,wa.COLLISION,"FRICTIONER","ANY_BODY",this.owner);k.prototype.onStop.call(this)},
onPreContact:function(a,b){90!=180*b.angle/3.141592653589793&&b.disableFriction();return!0},__class__:yh});var df=function(){this._contacts=new xb;this.listenFrom=this.listenTo="ANY_BODY";this.enabled=!0;k.call(this)};f["stolo.ensys.physics.components.BaseContactHandler"]=df;df.__name__=["stolo","ensys","physics","components","BaseContactHandler"];df.__super__=k;df.prototype=l(k.prototype,{get_name:function(){return"BaseContactHandler_76"},dispose:function(){null!=this._contacts&&this._contacts.dispose();
this._system=this._contacts=this._interactionType=null;k.prototype.dispose.call(this)},onActorAdded:function(){this._system=this.owner._internal_getFromParents("PhysicSystem_36")},onStart:function(){k.prototype.onStart.call(this);this.listenFrom=this.validateContactType(this.listenFrom);this.listenTo=this.validateContactType(this.listenTo);if(null==this._interactionType){if(null!=this.contactMode&&""!=this.contactMode)throw"TODO: handle contactMode string";this._interactionType=wa.ANY}},addLocalListeners:function(a,
b,c,d){return this.addListeners(this.listenFrom,this.listenTo,this._interactionType,a,b,c,d)},addListeners:function(a,b,c,d,e,h,n){null==c&&(c=wa.ANY);if(null==a||null==b)throw"Need both listenFrom and listenTo";null!=d&&this.addContactListener(ea.BEGIN,c,a,b,this.owner,d);null!=e&&this.addContactListener(ea.END,c,a,b,this.owner,e);null!=h&&this.addContactListener(ea.PRELISTENER,c,a,b,this.owner,h);null!=n&&this.addContactListener(ea.ONGOING,c,a,b,this.owner,n)},addContactListener:function(a,b,c,
d,e,h,n){null==n&&(n=!1);this._contacts.add(new Dk(this._system,a,b,c,d,e,h,n))},validateContactType:function(a){return null==a||""==a?"ANY_BODY":a},onStop:function(){null!=this._contacts&&this._contacts.dispose();k.prototype.onStop.call(this)},__class__:df});var Ek=function(){this.adaptive=this.ongoing=this._fixedAngle=!1;this.unidirectional=!0;this.angle=-1;this.center=!1;this.force=3E3;df.call(this)};f["stolo.ensys.physics.components.ForceField"]=Ek;Ek.__name__=["stolo","ensys","physics","components",
"ForceField"];Ek.__super__=df;Ek.prototype=l(df.prototype,{get_name:function(){return"ForceField_77"},dispose:function(){df.prototype.dispose.call(this)},onStart:function(){df.prototype.onStart.call(this);this.addLocalListeners(m(this,this.onContactBegin),null,null,this.ongoing?m(this,this.onContactOnGoing):null);this.setAngle(this.angle)},onContactBegin:function(a,b){if(!this.enabled||!this.isValidContact(a,b))return!1;this.applyForce(a,this.getContactAngle(a,b));return!0},onContactOnGoing:function(a,
b){if(!this.enabled||!this.isValidContact(a,b))return!1;this.applyForce(a,this.getContactAngle(a,b));return!0},isValidContact:function(a){return this._fixedAngle&&this.unidirectional&&0>a._compMap.PhysicsComponent_34.getVelocity().get_x()*this.owner._compMap.TransformComponent_43.direction?!1:!0},getContactAngle:function(a,b){return this._fixedAngle?this.adaptive&&-1==this.owner._compMap.TransformComponent_43.direction?this._radians+Math.PI:this._radians:this.center||null==b?this.owner._compMap.PhysicsComponent_34.getAngle(a):
b.angle},applyForce:function(a,b){a._compMap.PhysicsComponent_34.applyAngularImpulse(b,this.force)},setAngle:function(a){this.angle=a;-1==a?this._fixedAngle=!1:(this._fixedAngle=!0,this._radians=Kb.radians(a+-90))},__class__:Ek});var lg=function(){this.resistanceX=this.resistanceY=-1;this.resistance=lg.defaultResistance;this.enabled=!0;k.call(this)};f["stolo.ensys.physics.components.AirFriction"]=lg;lg.__name__=["stolo","ensys","physics","components","AirFriction"];lg.__super__=k;lg.prototype=l(k.prototype,
{get_name:function(){return"AirFriction_78"},dispose:function(){k.prototype.dispose.call(this);this._physics=null},onStart:function(){k.prototype.onStart.call(this);-1==this.resistanceX&&(this.resistanceX=this.resistance);-1==this.resistanceY&&(this.resistanceY=this.resistance);this._physics=this.owner._compMap.PhysicsComponent_34},onUpdate:function(a){k.prototype.onUpdate.call(this,a);if(this.enabled){var b=this._physics.getBody();if(null!=b){var c;null==b.zpp_inner.wrap_vel&&b.zpp_inner.setupVelocity();
c=b.zpp_inner.wrap_vel;0<this.resistanceX&&c.set_x(function(){c.zpp_inner.validate();return c.zpp_inner.x}(this)-function(){c.zpp_inner.validate();return c.zpp_inner.x}(this)*this.resistanceX*a);0<this.resistanceY&&c.set_y(function(){c.zpp_inner.validate();return c.zpp_inner.y}(this)-function(){c.zpp_inner.validate();return c.zpp_inner.y}(this)*this.resistanceY*a)}}},__class__:lg});var Fk=function(){k.call(this)};f["stolo.ensys.components.SpawnPointComponent"]=Fk;Fk.__name__=["stolo","ensys","components",
"SpawnPointComponent"];Fk.__super__=k;Fk.prototype=l(k.prototype,{get_name:function(){return"SpawnPointComponent_79"},__class__:Fk});var je=function(){this._cooldown=0;this.onDeath=new O;this.onDamageCancelled=new O;this.onDamage=new O;this.health=new yb(0);k.call(this)};f["stolo.ensys.components.HealthComponent"]=je;je.__name__=["stolo","ensys","components","HealthComponent"];je.__super__=k;je.prototype=l(k.prototype,{get_name:function(){return"HealthComponent_12"},dispose:function(){k.prototype.dispose.call(this);
this._soundSystem=null},onAdded:function(){0<this.hits&&(this.maximum=this.hits);this.set(0<this.start?this.start:this.maximum)},onStart:function(){k.prototype.onStart.call(this);this._soundSystem=T.getSystemEntity(this.owner)._compMap.SoundSystem_19;null!=this.owner._compMap.PhysicsComponent_34&&this.owner._compMap.PhysicsComponent_34.addContactType("DAMAGEABLE")},onUpdate:function(a){0<this._cooldown&&(this._cooldown-=a);k.prototype.onUpdate.call(this,a)},onStop:function(){k.prototype.onStop.call(this);
this.onDeath=this.onDamage=this.onDamageCancelled=null},modify:function(a){this.health.set__(Math.min(Math.max(0,this.health._value+a),this.maximum));return this.health._value},set:function(a){this.health.set__(Math.min(Math.max(0,a),this.maximum));return this.health._value},isDead:function(){return 0>=this.health._value},canDamage:function(){return this.invincible||0>=this.health._value?!1:!0},damage:function(a,b,c,d){null==d&&(d=0);null==c&&(c=0);if(0<this._cooldown)return!1;if(!this.canDamage())return this.invincible&&
null!=this.invincibleSound&&!this.isDead()&&this._soundSystem.play(this.invincibleSound,this.owner,je.SOUND_CHANNEL),this.onDamageCancelled.emit(b),!1;0<this.hits?(this.modify(-1),this.lastDamage=1):(this.modify(-a),this.lastDamage=a);0<this.cooldown&&(this._cooldown=this.cooldown);null!=this.damageSound&&!this.isDead()&&this._soundSystem.play(this.damageSound,this.owner,je.SOUND_CHANNEL);(0!=this.knock&&0!=c||0!=d)&&this.knockPhysics(b,c,d,this.knock);this.onDamage.emit(b);this.isDead()&&this.die(b);
return!0},die:function(a){this.health.set__(0);""!=this.deathSound&&this._soundSystem.play(this.deathSound,this.owner,je.SOUND_CHANNEL_DEATH);if(this.disposeOwner)T.getSystemEntity(this.owner),T.getSystemEntity(this.owner).getComponent("ActorSystem_41").removeActor(this.owner);else if(this.removePhysics){var b=this.owner._compMap.PhysicsComponent_34;null!=b&&b.enable(!1)}this.onDeath.emit(a)},knockPhysics:function(a,b,c,d){null==d&&(d=1);null==c&&(c=0);null==b&&(b=0);if(0!=d){var e=this.owner._compMap.PhysicsComponent_34,
h=this.owner._compMap.TransformComponent_43;null!=e&&!e.kinematic&&e.setVelocity(b*d*(a._compMap.TransformComponent_43.position.x>h.position.x?-1:1),-c*d)}},__class__:je});var ef=function(){this._timer=0;this.ignoreActors=[];this.assetDisplayType="image";this.assetBase=1;this.assetIndex=0;k.call(this)};f["stolo.ensys.components.LauncherComponent"]=ef;ef.__name__=["stolo","ensys","components","LauncherComponent"];ef.__super__=k;ef.prototype=l(k.prototype,{get_name:function(){return"LauncherComponent_18"},
onStart:function(){this._timer=this.shotDelay;T.getSystemEntity(this.owner);this._actors=T.getSystemEntity(this.owner).getComponent("ActorSystem_41");T.getSystemEntity(this.owner);this._sounds=T.getSystemEntity(this.owner).getComponent("SoundSystem_19");this._transform=this.owner._compMap.TransformComponent_43},onStop:function(){k.prototype.onStop.call(this);this._sounds=this._actors=this._transform=null},onUpdate:function(a){0<this._timer&&(this._timer-=a)},launch:function(a){if(null==this._transform||
0<this._timer)return null;var b=this.projectile,c=this.offset,d=this.force,e=this.angle;null!=a&&(null!=a.projectile&&(b=a.projectile),null!=a.offset&&(c=a.offset),null!=a.force&&(d=a.force),null!=a.angle&&(e=a.angle));this._timer=null!=a&&null!=a.shotDelay?a.shotDelay:this.shotDelay;a=3.141592653589793*this._transform.rotation/180;e=a+3.141592653589793*e/180;""!=this.launchSound&&this._sounds.play(this.launchSound,this.owner,"LAUNCHER");b={template:{key:b},transform:{position:{x:this._transform.position.x+
this._transform.direction*c.x*Math.cos(a)-c.y*Math.sin(a),y:this._transform.position.y+c.y*Math.cos(a)+c.x*Math.sin(a)},rotation:180*e/3.141592653589793*this._transform.direction,direction:this._transform.direction},physics:{impulse:{x:Math.cos(e)*d*this._transform.direction,y:Math.sin(e)*d}}};null!=this.asset&&0<this.assetMax&&(c=this.getNextAsset(),b[this.assetDisplayType]={asset:c});b=this._actors.spawn(b);c=b._compMap.ProjectileComponent_82;null!=c&&(d=this.ignoreActors.slice(),d.push(this.owner),
c.ignoreActors=d);return b},getNextAsset:function(){var a=this.assetBase;"linear"==this.assetProgression?(a+=this.assetIndex,this.assetIndex++,this.assetIndex>=this.assetMax&&(this.assetIndex=0)):a+=Math.round(Math.random()*(this.assetMax-this.assetBase));return this.asset+a},__class__:ef});var Zf=function(){this.angleSpread=50;this.projectiles=0;ef.call(this)};f["stolo.ensys.components.ExploderComponent"]=Zf;Zf.__name__=["stolo","ensys","components","ExploderComponent"];Zf.__super__=ef;Zf.prototype=
l(ef.prototype,{explode:function(){for(var a=0,b=this.projectiles;a<b;)this.launch({angle:this.getNextAngle(a++),shotDelay:0})},getNextAngle:function(){return this.getRandomAngle()},getRandomAngle:function(){return this.angle+Math.random()*this.angleSpread-0.5*this.angleSpread},__class__:Zf});var zh=function(){this._removeIn=0;this.onExploded=new O;this.onExplode=new O;this.ignoreActors=[];this.exploded=!1;k.call(this)};f["stolo.ensys.components.ProjectileComponent"]=zh;zh.__name__=["stolo","ensys",
"components","ProjectileComponent"];zh.__super__=k;zh.prototype=l(k.prototype,{get_name:function(){return"ProjectileComponent_82"},onStart:function(){k.prototype.onStart.call(this);T.getSystemEntity(this.owner);this._actorSystem=T.getSystemEntity(this.owner).getComponent("ActorSystem_41");T.getSystemEntity(this.owner);this._physicSystem=T.getSystemEntity(this.owner).getComponent("PhysicSystem_36");T.getSystemEntity(this.owner);this._soundSystem=T.getSystemEntity(this.owner).getComponent("SoundSystem_19");
this._sprite=this.owner._compMap.Sprite_5;this._animation=null!=y.instance(this.owner._compMap.Sprite_5,Pb)?this._sprite:null;this._physics=this.owner._compMap.PhysicsComponent_34;this._transform=this.owner._compMap.TransformComponent_43;null!=this._physics&&(this._physics.addContactType("PROJECTILE"),this._physicSystem.addContactListener(ea.PRELISTENER,wa.COLLISION,"PROJECTILE",this.target,this.owner,m(this,this.onContactBegin)));this._removeIn=this.expire;if(null!=this._animation){this.velocityRotation&&
this._animation.rotation.set__(0);var a=this._animation.animation;null!=a&&a.hasAnim("shoot")&&a.hasAnim("idle")&&(a.gotoAndPlay(["shoot","idle"]).loop=!1)}},onStop:function(){this._physicSystem.removeContactListener(ea.PRELISTENER,wa.COLLISION,"PROJECTILE",this.target,this.owner);k.prototype.onStop.call(this);this._soundSystem=this._physicSystem=this._actorSystem=this._transform=this._animation=this._physics=this._sprite=this.onExploded=this.onExplode=this.ignoreActors=null},onUpdate:function(a){if(this.exploded||
0<this.expire)0<this._removeIn?this._removeIn-=a:this._actorSystem.removeActor(this.owner);!this.exploded&&this.velocityRotation&&(a=this._physics.getVelocity(),null!=this._animation&&(a.zpp_inner.validate(),0>a.zpp_inner.y?this._animation.rotation.set__(0):this._animation.rotation.set__(180)))},onContactBegin:function(a){var b=a._compMap.PhysicsComponent_34;if(null==b||b.hasContactType("PROJECTILE")&&this.ignoreProjectiles)return!1;for(var b=0,c=this.ignoreActors;b<c.length;){var d=c[b];++b;if(d==
a)return!1}this.exploded||this.explode();return!0},explode:function(){if(!this.exploded){this.onExplode.emit(this.owner);this.exploded=!0;this._removeIn=this.removeAfter;if(null!=this._animation){var a=this._animation.animation;null!=a&&a.hasAnim("explode")&&(a.gotoAndPlay("explode",{onComplete:m(this,this.onExplodeComplete)}),this._removeIn=999,""!=this.explodeSound&&this._soundSystem.play(this.explodeSound,this.owner,"PROJECTILE"),this._animation.rotation.set__(0),this._transform.rotation=0,this._transform.fixedRotation=
!0)}else this.onExploded.emit(this.owner);null!=this._physics&&this.stopPhysicOnExplode&&(this._physics.enable(!1),""!=this.hitSound&&this._soundSystem.play(this.hitSound,this.owner,"PROJECTILE"))}},onExplodeComplete:function(){this._removeIn=-1;null!=this._animation&&this._animation.animation.stop();this.onExploded.emit(this.owner)},__class__:zh});var Ah=function(){this._activated=!1;k.call(this)};f["stolo.ensys.components.PlatformComponent"]=Ah;Ah.__name__=["stolo","ensys","components","PlatformComponent"];
Ah.__super__=k;Ah.prototype=l(k.prototype,{get_name:function(){return"PlatformComponent_85"},onStart:function(){this._physics=this.owner._compMap.PhysicsComponent_34;this._initPosition=new jb(this.owner._compMap.TransformComponent_43.position.x,this.owner._compMap.TransformComponent_43.position.y);this._script=this.owner._compMap.Script_56;null==this._script&&(this._script=new sb,this.owner.add(this._script));this._activated&&(this._activated=!1);this.activate()},onStop:function(){k.prototype.onStop.call(this);
this._position=this._sequence=this._physics=this._script=null},onUpdate:function(a){null!=this._position&&(this._position.update(a),this._physics.setPosition(this._position.x._value,this._position.y._value,0.6))},startSequence:function(){if(!this.repeat&&null!=this._sequence)this._script.run(this._sequence);else if(!(null==this.sequence||null!=this._sequence)){var a=this.sequence.actions;this._position=new Ad(this._initPosition.x,this._initPosition.y);var b={x:this._position.x,y:this._position.y,
offsetX:this._initPosition.x,offsetY:this._initPosition.y};null==this.sequence.loop&&(this.sequence.loop=!0);this.repeat=this.sequence.yoyo||this.sequence.loop;this._sequence=gb.getMovementSequence(a,b,this.sequence.loop,this.sequence.yoyo,this.sequence.delay);this._sequence.add(new ma(m(this,this.onSequenceComplete)));this._script.run(this._sequence)}},onSequenceComplete:function(){null!=this._script&&(this.repeat?this._script.run(this._sequence):this._activated=!1)},activate:function(){this._activated||
(this._activated=!0,null!=this.sequence&&this.startSequence())},__class__:Ah});var Df=function(){k.call(this)};f["stolo.mods.components.ModsComponent"]=Df;Df.__name__=["stolo","mods","components","ModsComponent"];Df.__super__=k;Df.prototype=l(k.prototype,{get_name:function(){return"ModsComponent_66"},onStart:function(){k.prototype.onStart.call(this);null!=this.mods&&this.applyMods(this.mods)},applyMods:function(a){for(var b=this.owner.firstComponent;null!=b;){var c=M.getComponentName(b),c=w.field(a,
c);null!=c&&this.applyComponentMods(b,c);b=b.next}},applyComponentMods:function(a,b){P.applyMods(a,b)},__class__:Df});var Bh=function(){k.call(this)};f["stolo.mods.components.StatsModsComponent"]=Bh;Bh.__name__=["stolo","mods","components","StatsModsComponent"];Bh.__super__=Df;Bh.prototype=l(Df.prototype,{onStart:function(){Df.prototype.onStart.call(this);null!=this.stats&&this.applyStats(this.stats,this.source)},applyStats:function(a,b){null==b&&(b=this.source);null==b&&(b=Bh.defaultSource);if(null==
b)throw"No statistic source to apply!";for(var c=0,d=w.fields(a);c<d.length;){var e=d[c];++c;var h=0;Object.prototype.hasOwnProperty.call(a,e)&&(h=w.field(a,e));e=w.field(b,e);null!=e&&(h=e[h],null!=h&&this.applyMods(h))}},__class__:Bh});var ln=function(){};f["stolo.ensys.components.DefaultComponents"]=ln;ln.__name__=["stolo","ensys","components","DefaultComponents"];var Ef=function(a){this.parallax={x:1,y:1};Da.call(this);this.data=a;this._name=a.name;null!=a.parallax&&(this.parallax.x=y.parseFloat(a.parallax.x),
this.parallax.y=y.parseFloat(a.parallax.y));a.alpha&&this.setAlpha(a.alpha)};f["stolo.ensys.display.LayerSprite"]=Ef;Ef.__name__=["stolo","ensys","display","LayerSprite"];Ef.__super__=Da;Ef.prototype=l(Da.prototype,{getName:function(){return this._name},move:function(a,b){null!=this.offset&&(a+=this.offset.x,b+=this.offset.y);this.setXY(a*this.parallax.x,b*this.parallax.y)},__class__:Ef});var Gk=function(a,b,c,d){null==d&&(d=100);this._width=this._height=1E3;this._size=100;Ef.call(this,a);this._width=
b;this._height=c;this._size=d;this.setAlpha(0.4);this.construct()};f["stolo.ensys.display.LayerGridSprite"]=Gk;Gk.__name__=["stolo","ensys","display","LayerGridSprite"];Gk.__super__=Ef;Gk.prototype=l(Ef.prototype,{draw:function(a){a.drawTexture(this._texture,(-Math.floor(this.x._value/this._size)-1)*this._size,(-Math.floor(this.y._value/this._size)-1)*this._size)},construct:function(){var a=Math.ceil(this._width/this._size)+1,b=Math.ceil(this._height/this._size)+1;this._gridTexture=C.getPack("debug").getTexture("grid");
this._texture=x._platform.getRenderer().createTexture(a*this._size,b*this._size);for(var c=this._texture.get_graphics(),d=0;d<a;)for(var e=d++,h=0;h<b;){var n=h++;c.drawTexture(this._gridTexture,e*this._size,n*this._size)}},__class__:Gk});var Uc=function(a){this.storagePrefix="editor";this.roundValues=!0;this.preventReload=!1;this.onEditorLoaded=new ka;this.onEditorReady=new ka;Yc.call(this);Hk.init();this.levelData=a};f["stolo.ensys.editor.EditorSystem"]=Uc;Uc.__name__=["stolo","ensys","editor",
"EditorSystem"];Uc.__super__=Yc;Uc.prototype=l(Yc.prototype,{buildSubSystems:function(){Yc.prototype.buildSubSystems.call(this);this.level.onLevelLoaded.connect(m(this,this.onLevelLoaded));this.camera.enabled=!1;this.clipboard=new Ik;this.owner.add(this.clipboard);this.tool=new Jk;this.owner.add(this.tool);this.shortcut=new Kk;this.owner.add(this.shortcut);this.history=new Lk;this.history.onCommand.connect(m(this,this.onCommand));this.owner.add(this.history);this.selection=new Mk;this.owner.add(this.selection);
this.document=new Nk;this.owner.add(this.document);this.rendererState=new Ok(this);this.owner.add(this.rendererState);this.dialog=new Pk;this.owner.add(this.dialog);this.logic=new Qk;this.logic.onComplete.connect(m(this,this.onLogicComplete));this.owner.add(this.logic);window.onbeforeunload=m(this,this.onWindowBeforeUnload);db.focusOnCanvas();this.onEditorReady.emit()},onLevelLoaded:function(){ia.main.load()},onCommand:function(){this.document.isDirty=!0},onWindowBeforeUnload:function(){if(this.document.isDirty||
this.preventReload){if(this.document.isDirty)this.document["export"]();return"Dude, are you sure you want to leave? Think of the kittens!"}return null},buildLevel:function(){this.level=new Rk;this.owner.add(this.level)},onLogicComplete:function(){this.onEditorLoaded.emit()},__class__:Uc});var ub=function(a){this._system=a};f["stolo.ensys.editor.actions.Action"]=ub;ub.__name__=["stolo","ensys","editor","actions","Action"];ub.prototype={execute:function(){throw"action execute not implemented";},__class__:ub};
var Sk=function(a){this._system=a};f["stolo.ensys.editor.actions.BringToFrontAction"]=Sk;Sk.__name__=["stolo","ensys","editor","actions","BringToFrontAction"];Sk.__super__=ub;Sk.prototype=l(ub.prototype,{execute:function(){var a=this._system.selection.getAll();if(0!=a.length)if(1==a.length)this._system.history.add(new Ff(a[0],!0));else{for(var b=new Gf,c=0;c<a.length;){var d=a[c];++c;b.add(new Ff(d,!0))}this._system.history.add(b)}},__class__:Sk});var Ch=function(a){this._system=a};f["stolo.ensys.editor.actions.CopyAction"]=
Ch;Ch.__name__=["stolo","ensys","editor","actions","CopyAction"];Ch.__super__=ub;Ch.prototype=l(ub.prototype,{execute:function(){var a=this._system.selection.getAll();if(0!=a.length){for(var b=[],c=0;c<a.length;){var d=a[c];++c;d=d._compMap.EditorMetaComponent_44;null!=d&&b.push(P.clone(d.getTemplate()))}this._system.clipboard.set(b)}},__class__:Ch});var Tk=function(a){this._system=a};f["stolo.ensys.editor.actions.DuplicateAction"]=Tk;Tk.__name__=["stolo","ensys","editor","actions","DuplicateAction"];
Tk.__super__=ub;Tk.prototype=l(ub.prototype,{execute:function(){(new Ch(this._system)).execute();(new Dh(this._system)).execute()},__class__:Tk});var Dh=function(a){this.offset=new jb(10,10);this._system=a};f["stolo.ensys.editor.actions.PasteAction"]=Dh;Dh.__name__=["stolo","ensys","editor","actions","PasteAction"];Dh.__super__=ub;Dh.prototype=l(ub.prototype,{execute:function(){var a=P.clone(this._system.clipboard.get());if(0!=a.length){for(var b=new Gf,c=0;c<a.length;){var d=a[c];++c;b.add(this.createSpawnCommand(d))}this._system.history.add(b);
this._system.selection.clear();a=0;for(b=b.get_commands();a<b.length;)c=b[a],++a,this._system.selection.add(ga.__cast(c,mg).actor)}},createSpawnCommand:function(a){a=P.clone(a);null==a.transform&&(a.transform={});var b=a.transform.position;null==b&&(b=a.transform.position={x:0,y:0});b.x+=this.offset.x;b.y+=this.offset.y;return new mg(this._system,a.template.key,b,a)},__class__:Dh});var Uk=function(a){this._system=a};f["stolo.ensys.editor.actions.RedoAction"]=Uk;Uk.__name__=["stolo","ensys","editor",
"actions","RedoAction"];Uk.__super__=ub;Uk.prototype=l(ub.prototype,{execute:function(){this._system.history.redo()},__class__:Uk});var Vk=function(a){this._system=a};f["stolo.ensys.editor.actions.SendToBackAction"]=Vk;Vk.__name__=["stolo","ensys","editor","actions","SendToBackAction"];Vk.__super__=ub;Vk.prototype=l(ub.prototype,{execute:function(){var a=this._system.selection.getAll();if(0!=a.length)if(1==a.length)this._system.history.add(new Ff(a[0],!1));else{for(var b=new Gf,c=0;c<a.length;){var d=
a[c];++c;b.add(new Ff(d,!1))}this._system.history.add(b)}},__class__:Vk});var Wk=function(a){this._system=a};f["stolo.ensys.editor.actions.TestAction"]=Wk;Wk.__name__=["stolo","ensys","editor","actions","TestAction"];Wk.__super__=ub;Wk.prototype=l(ub.prototype,{execute:function(){this._system.history.add(new Xk(this._system))},__class__:Wk});var Yk=function(a){this._system=a};f["stolo.ensys.editor.actions.UndoAction"]=Yk;Yk.__name__=["stolo","ensys","editor","actions","UndoAction"];Yk.__super__=ub;
Yk.prototype=l(ub.prototype,{execute:function(){this._system.history.undo()},__class__:Yk});var Gb=function(a){null==a&&(a=ja.getClassName(ja.getClass(this)));this.label=this.name=a};f["stolo.ensys.editor.commands.Command"]=Gb;Gb.__name__=["stolo","ensys","editor","commands","Command"];Gb.prototype={redo:function(){throw"redo not implemented";},undo:function(){throw"undo not implemented";},__class__:Gb};var Gf=function(){this._commands=[];Gb.call(this,"Compound")};f["stolo.ensys.editor.commands.CompoundCommand"]=
Gf;Gf.__name__=["stolo","ensys","editor","commands","CompoundCommand"];Gf.__super__=Gb;Gf.prototype=l(Gb.prototype,{get_commands:function(){return this._commands},add:function(a){this._commands.push(a)},redo:function(){for(var a=0,b=this._commands;a<b.length;){var c=b[a];++a;c.redo()}},undo:function(){for(var a=0,b=this._commands;a<b.length;){var c=b[a];++a;c.undo()}},__class__:Gf,__properties__:{get_commands:"get_commands"}});var Ff=function(a,b){null==b&&(b=!1);Gb.call(this,b?"Bring actor to front":
"Send actor to back");this._actor=a;this._container=a.parent._compMap.Sprite_5;this._index=this._container.getChildIndex(a);this._bringToFront=b};f["stolo.ensys.editor.commands.DepthCommand"]=Ff;Ff.__name__=["stolo","ensys","editor","commands","DepthCommand"];Ff.__super__=Gb;Ff.prototype=l(Gb.prototype,{redo:function(){this._bringToFront?this._container.bringToFront(this._actor):this._container.sendToBack(this._actor)},undo:function(){this._container.setChildIndex(this._actor,this._index)},__class__:Ff});
var Zk=function(a,b,c,d){var e=b._compMap.TemplateComponent_40;Gb.call(this,"Move actor '"+(null!=e?e.key:"unknown")+"' from "+y.string(c)+" to "+y.string(d));this.system=a;this.actor=b;this.from=c;this.to=d};f["stolo.ensys.editor.commands.MoveCommand"]=Zk;Zk.__name__=["stolo","ensys","editor","commands","MoveCommand"];Zk.__super__=Gb;Zk.prototype=l(Gb.prototype,{redo:function(){this.system.logic.setDefaultTool();this.system.tool.getCurrent().moveActor(this.to.x,this.to.y,this.actor,!1,!1)},undo:function(){this.system.logic.setDefaultTool();
this.system.tool.getCurrent().moveActor(this.from.x,this.from.y,this.actor,!1,!1)},__class__:Zk});var $k=function(a,b,c,d,e){Gb.call(this,"Rotate actor '"+b._compMap.TemplateComponent_40.key+"' from "+c+" to "+d);this.system=a;this.actor=b;this.from=c;this.to=d;this.snap=e};f["stolo.ensys.editor.commands.RotateCommand"]=$k;$k.__name__=["stolo","ensys","editor","commands","RotateCommand"];$k.__super__=Gb;$k.prototype=l(Gb.prototype,{redo:function(){this.system.logic.setDefaultTool();this.system.tool.getCurrent().rotateActor(this.to,
this.actor,!1,this.snap)},undo:function(){this.system.logic.setDefaultTool();this.system.tool.getCurrent().rotateActor(this.from,this.actor,!1,this.snap)},__class__:$k});var mg=function(a,b,c,d){Gb.call(this,"Spawn actor '"+b+"'");this.system=a;this.templateName=b;this.position=c;this.data=d};f["stolo.ensys.editor.commands.SpawnCommand"]=mg;mg.__name__=["stolo","ensys","editor","commands","SpawnCommand"];mg.__super__=Gb;mg.prototype=l(Gb.prototype,{redo:function(){var a={template:{key:this.templateName},
transform:{position:this.position}};null!=this.data&&(a=P.merge(this.data,a,!0));this.actor=this.system.level.spawnActor(a);this.system.selection.set(this.actor)},undo:function(){this.system.actors.removeActor(this.actor)},__class__:mg});var Xk=function(a,b){null==b&&(b="trace command");Gb.call(this,"Trace");this.label=b;this._editor=a;this._text=b};f["stolo.ensys.editor.commands.TraceCommand"]=Xk;Xk.__name__=["stolo","ensys","editor","commands","TraceCommand"];Xk.__super__=Gb;Xk.prototype=l(Gb.prototype,
{redo:function(){null},undo:function(){null},__class__:Xk});var He=function(){this._disposer=new xb;this.smallStepX=this.smallStepY=-1;this.smallStep=10;this.stepX=this.stepY=-1;this.step=100;this.buttonSize=new jb(30,30);this.isActive=!1;this.fontStyle=Uc.DEFAULT_FONT;k.call(this)};f["stolo.ensys.editor.component.BaseEditorResizer"]=He;He.__name__=["stolo","ensys","editor","component","BaseEditorResizer"];He.__super__=k;He.prototype=l(k.prototype,{get_name:function(){return"BaseEditorResizer_63"},
onStart:function(){k.prototype.onStart.call(this);0>this.stepX&&(this.stepX=this.step);0>this.stepY&&(this.stepY=this.step);0>this.smallStepX&&(this.smallStepX=this.smallStep);0>this.smallStepY&&(this.smallStepY=this.smallStep);this._buttonsX=this.addButtons(m(this,this.onIncreaseX),m(this,this.onDecreaseX));this._buttonsX._compMap.Sprite_5.setXY(0,-this.buttonSize.y);this._buttonsY=this.addButtons(m(this,this.onIncreaseY),m(this,this.onDecreaseY));this._buttonsY._compMap.Sprite_5.setXY(0,0);this._buttonsY._compMap.Sprite_5.setRotation(90);
this.owner._compMap.EditorMetaComponent_44.onSelect.connect(m(this,this.onSelect));this.owner._compMap.EditorMetaComponent_44.onDeselect.connect(m(this,this.onDeselect));this.onDeselect(null)},onSelect:function(){this.isActive=!0;this._buttonsX._compMap.Sprite_5.set_visible(!0);this._buttonsY._compMap.Sprite_5.set_visible(!0);this._disposer.add(x._platform.getKeyboard().up.connect(m(this,this.onKeyUp)))},onKeyUp:function(a){switch(a.key[1]){case 89:this.onIncreaseY(null);break;case 88:this.onDecreaseY(null);
break;case 82:this.onIncreaseX(null);break;case 87:this.onDecreaseX(null)}},smallSteps:function(){return x._platform.getKeyboard().isDown(He.SMALL_STEP_MODIFIER)},onDeselect:function(){this.isActive=!1;this._buttonsX._compMap.Sprite_5.set_visible(!1);this._buttonsY._compMap.Sprite_5.set_visible(!1);this._disposer.dispose()},addButtons:function(a,b){var c=new r;c.add(new A);this.owner.addChild(c);var d=this.addButton("-",b);c.addChild(d.owner);d=this.addButton("+",a);d.setXY(this.buttonSize.x,0);c.addChild(d.owner);
return c},addButton:function(a,b){var c=new r,d=new eb(10053375,this.buttonSize.x,this.buttonSize.y);d.alpha.set__(0.3);c.add(d);c=E.createTextSprite(a,this.fontStyle,c);c.set_pointerEnabled(!1);c.set_align(X.Center);c.centerAnchor();c.setXY(this.buttonSize.x/2,this.buttonSize.y/2);d.get_pointerDown().connect(b);return d},onIncreaseX:function(){this.smallSteps()},onDecreaseX:function(){this.smallSteps()},onIncreaseY:function(){this.smallSteps()},onDecreaseY:function(){this.smallSteps()},updateSelection:function(){var a=
this.owner._compMap.EditorSelectionComponent_49;null!=a&&(a.dispose(),this.owner.add(new kg))},__class__:He});var ng=function(){He.call(this)};f["stolo.ensys.editor.component.EditorPatternResizer"]=ng;ng.__name__=["stolo","ensys","editor","component","EditorPatternResizer"];ng.__super__=He;ng.prototype=l(He.prototype,{onStart:function(){He.prototype.onStart.call(this);this._display=y.instance(this.owner._compMap.Sprite_5,Ud)},onIncreaseX:function(){this._display.width+=this.smallSteps()?this.smallStepX:
this.stepX;this.owner._compMap.EditorMetaComponent_44.updateProperty(Ud.COMPONENT_NAME,"width",this._display.width);this.updateSelection()},onDecreaseX:function(){var a;a=this.smallSteps()?this.smallStepX:this.stepX;this._display.width=y["int"](Math.max(this.stepX,this._display.width-a));this.owner._compMap.EditorMetaComponent_44.updateProperty(Ud.COMPONENT_NAME,"width",this._display.width);this.updateSelection()},onIncreaseY:function(){this._display.height+=this.smallSteps()?this.smallStepY:this.stepY;
this.owner._compMap.EditorMetaComponent_44.updateProperty(Ud.COMPONENT_NAME,"height",this._display.height);this.updateSelection()},onDecreaseY:function(){var a;a=this.smallSteps()?this.smallStepY:this.stepY;this._display.height=y["int"](Math.max(a,this._display.height-a));this.owner._compMap.EditorMetaComponent_44.updateProperty(Ud.COMPONENT_NAME,"height",this._display.height);this.updateSelection()},__class__:ng});var og=function(){this._disposer=new xb;this.isActive=!1;this.fontStyle=Uc.DEFAULT_FONT;
this.lineSize=2;this.lineColor=-1;this.vertexSize=10;this.vertexColor=-1;this.color=16711680;this.drawLines=!1;this.targetProperty="shape";this.targetComponent="physics";this.buttonSize=new jb(30,30);k.call(this)};f["stolo.ensys.editor.component.EditorPolygons"]=og;og.__name__=["stolo","ensys","editor","component","EditorPolygons"];og.__super__=k;og.prototype=l(k.prototype,{get_name:function(){return"EditorPolygons_64"},onStart:function(){k.prototype.onStart.call(this);this.owner._compMap.EditorMetaComponent_44.onSelect.connect(m(this,
this.onSelect));this.owner._compMap.EditorMetaComponent_44.onDeselect.connect(m(this,this.onDeselect));-1<this.color&&0>this.lineColor&&(this.lineColor=this.color);-1<this.color&&0>this.vertexColor&&(this.vertexColor=this.color);this._buttons=this.addButtons();this._buttons.setXY(-30,-30);var a=this.owner._compMap.Sprite_5;a.set_pointerEnabled(!0);null!=a&&"sprite"==a.asset&&"debug"==a.pack&&(a.createSprite(),a.setAnchor(0,0),a.sprite.alpha.set__(0.2),this.drawLines&&a.sprite.alpha.set__(0));this.drawLines&&
(this._lines=[],this.onSelect(null));this.onDeselect(null)},onSelect:function(){this.isActive=!0;this._buttons.set_visible(!0);if(null==this._container)if(this._container=new A,this._container.set_pointerEnabled(!0),this.owner.addChild((new r).add(this._container)),this._physics=this.owner._compMap.PhysicsComponent_34,null!=this._physics)if(null!=this._physics.shape&&null!=this._physics.shape.points)this.setPoints(this._physics.shape.points),this._physics.onShapesCreated.connect(m(this,this.onPhysicsShapes)),
this.onPhysicsShapes();else throw"No polygon on "+this.owner._compMap.TemplateComponent_40.key;else throw"Need physics component on "+this.owner._compMap.TemplateComponent_40.key;this._container.set_visible(!0)},onPhysicsShapes:function(){if(this.drawLines){null!=this._physics&&this._physics.owner._compMap.PhysicsDebugComponent_37.sprite.set_visible(!1);for(var a=this._points.length,b,c,d,e=0;e<a;)b=e++,d=this._points[b],c=b==a-1?this._points[0]:this._points[b+1],null==this._lines[b]&&this._lines.push(new pk(this.lineColor,
this.lineSize)),b=this._lines[b],null==b.owner&&this.owner.addChild((new r).add(b),!1),b.fromTo(d.x,d.y,c.x,c.y)}},setPoints:function(a){this._points=a;for(var b=0;b<a.length;){var c=a[b];++b;this.addPoint(c)}this.updateContainer()},updateContainer:function(){},addPoint:function(a){var b=new al;b.data=a;b.context=this.owner;b.color=this.vertexColor;b.size=this.vertexSize;b.disposer.add(b.onChange.connect(m(this,this.onVertexChanged)));b.disposer.add(b.onSelect.connect(m(this,this.onVertexSelect)));
b.disposer.add(b.onDeselect.connect(m(this,this.onVertexDeselect)));this._container.owner.addChild((new r).add(b))},onVertexChanged:function(){null!=this._physics&&(this._physics.createShapes(),this.updateContainer());this.owner._compMap.EditorMetaComponent_44.updateProperty(this.targetComponent,this.targetProperty,{points:this._points});this.owner._compMap.EditorMetaComponent_44.updateProperty(this.targetComponent,"offset",this.getCenter())},onVertexSelect:function(a){null!=this.currentVertex&&this.currentVertex!=
a&&this.currentVertex.cancel();this.currentVertex=a;null!=this.currentVertex&&(a=this.owner._compMap.EditorMetaComponent_44,null!=a&&(a.moveEnabled=!1))},onVertexDeselect:function(a){a==this.currentVertex&&(a=this.owner._compMap.EditorMetaComponent_44,null!=a&&(a.moveEnabled=!0))},onDeselect:function(){this.isActive=!1;this._buttons.set_visible(!1);null!=this._container&&this._container.set_visible(!1);this._disposer.dispose()},addButtons:function(){var a=new r;a.add(new A);this.owner.addChild(a);
var b=this.addButton("-",m(this,this.onBtnRemove));a.addChild(b.owner);b=this.addButton("+",m(this,this.onBtnAdd));b.setXY(this.buttonSize.x,0);a.addChild(b.owner);return a._compMap.Sprite_5},addButton:function(a,b){var c=new r,d=new eb(10053375,this.buttonSize.x,this.buttonSize.y);d.alpha.set__(0.3);c.add(d);c=E.createTextSprite(a,this.fontStyle,c);c.set_pointerEnabled(!1);c.set_align(X.Center);c.centerAnchor();c.setXY(this.buttonSize.x/2,this.buttonSize.y/2);d.get_pointerDown().connect(b);return d},
onBtnRemove:function(){if(null!=this.currentVertex)for(var a=0,b=0,c=this._points;b<c.length;){var d=c[b];++b;if(d==this.currentVertex.data){Q.remove(this._points,d);this.currentVertex.cancel();this.currentVertex.owner.dispose();this.onVertexChanged(this.currentVertex);break}a++}},onBtnAdd:function(){if(null!=this.currentVertex)for(var a=0,b=0,c=this._points;b<c.length;){var d=c[b];++b;if(d==this.currentVertex.data){this._points.splice(a+1,0,{x:d.x+10,y:d.y+10});this.addPoint(this._points[a+1]);this.onVertexChanged(null);
break}a++}else this._points.push({x:0,y:0}),this.addPoint(this._points[this._points.length-1]),this.onVertexChanged(null)},getCenter:function(){for(var a=this._points[0].x,b=this._points[0].x,c=this._points[0].y,d=this._points[0].y,e=1,h=this._points.length;e<h;){var n=e++;this._points[n].x<a?a=this._points[n].x:this._points[n].x>b&&(b=this._points[n].x);this._points[n].y<c?c=this._points[n].y:this._points[n].y>d&&(d=this._points[n].y)}return{x:(b-a)/2+a,y:(d-c)/2+c}},__class__:og});var Hf=function(){k.call(this)};
f["stolo.ensys.editor.component.EditorRemover"]=Hf;Hf.__name__=["stolo","ensys","editor","component","EditorRemover"];Hf.__super__=k;Hf.prototype=l(k.prototype,{get_name:function(){return"EditorRemover_55"},onStart:function(){k.prototype.onStart.call(this);this.owner._internal_getFromParents("ActorSystem_41").removeActor(this.owner)},__class__:Hf});var Hk=function(){};f["stolo.ensys.editor.component.EditorComponents"]=Hk;Hk.__name__=["stolo","ensys","editor","component","EditorComponents"];Hk.init=
function(){Tc.registerComponents(Hk.map,!1)};var bl=function(a){this.moveEnabled=!0;this.onDeselect=new O;this.onSelect=new O;k.call(this);this._template=null==a?{}:a};f["stolo.ensys.editor.component.EditorMetaComponent"]=bl;bl.__name__=["stolo","ensys","editor","component","EditorMetaComponent"];bl.__super__=k;bl.prototype=l(k.prototype,{get_name:function(){return"EditorMetaComponent_44"},onAdded:function(){k.prototype.onAdded.call(this)},onRemoved:function(){k.prototype.onRemoved.call(this)},updateProperty:function(a,
b,c){Object.prototype.hasOwnProperty.call(this._template,a)||w.setProperty(this._template,a,{});a=w.getProperty(this._template,a);w.setProperty(a,b,c)},getTemplate:function(){return this._template},__class__:bl});var cl=function(){this.selection="";A.call(this)};f["stolo.ensys.editor.component.EditorSelectionInfo"]=cl;cl.__name__=["stolo","ensys","editor","component","EditorSelectionInfo"];cl.__super__=A;cl.prototype=l(A.prototype,{onStart:function(){A.prototype.onStart.call(this);this._text=S.getTextSprite("debug_font");
this.owner.addChild((new r).add(this._text))},onUpdate:function(a){A.prototype.onUpdate.call(this,a);null!=this.thumbnail?this._text.set_text(this.thumbnail):null!=this.current&&this.updateInfo()},show:function(a){this.current=a;this.updateInfo()},updateInfo:function(){if(!(null==this.current||null==this.current.firstComponent)){var a=this.current._compMap.TransformComponent_43;this.selection=this.current._compMap.TemplateComponent_40.key+": "+y.string(a.position.x)+","+y.string(a.position.y);this._text.set_text(this.selection)}},
hide:function(){this.current=null;this._text.set_text(this.selection="")},__class__:cl});var al=function(){this.round=this.liveUpdate=!0;this.isSelected=this.isDragging=this.hasMoved=!1;this.lastPointerPosition=new jb;this.disposer=new xb;this.alpha=0.5;this.scale=1;this.size=10;this.color=16711680;this.onDeselect=new O;this.onSelect=new O;this.onChange=new O;k.call(this)};f["stolo.ensys.editor.component.EditorVertex"]=al;al.__name__=["stolo","ensys","editor","component","EditorVertex"];al.__super__=
k;al.prototype=l(k.prototype,{get_name:function(){return"EditorVertex_65"},dispose:function(){k.prototype.dispose.call(this);null!=this.disposer&&this.disposer.dispose();this.disposer=null},onStart:function(){this._system=this.owner._internal_getFromParents("BaseGameSystem_20",Uc);this.display=null!=this.asset?E.createImage(this.asset,C.getPack("editor_icons")):new eb(this.color,this.size,this.size);this.display.setAlpha(this.alpha);this.display.centerAnchor();this.display.set_pointerEnabled(!0);
this.owner.add(this.display);this.display.setXY(this.data.x,this.data.y);this.disposer.add(this.display.get_pointerDown().connect(m(this,this.onPointerDown)));this.disposer.add(x._platform.getPointer().up.connect(m(this,this.onPointerUp)));this.disposer.add(x._platform.getKeyboard().up.connect(m(this,this.onKeyUp)))},onKeyUp:function(a){if(this.isSelected)switch(a.key[1]){case 83:this.deselect()}},onPointerDown:function(){this.isDragging=!0;this.select()},onPointerUp:function(){this.isDragging=!1;
this.isSelected&&this.hasMoved&&this.deselect()},select:function(){this.isSelected||(this.isSelected=!0,this.hasMoved=!1,this.lastPointerPosition.set(x._platform.getPointer().get_x(),x._platform.getPointer().get_y()),this.display.setAlpha(1),this.onSelect.emit(this))},onUpdate:function(){if(this.isSelected&&this.isDragging&&(this.lastPointerPosition.x!=x._platform.getPointer().get_x()||this.lastPointerPosition.y!=x._platform.getPointer().get_y()))this.hasMoved=!0,this.display.setXY(this.display.x._value+
(x._platform.getPointer().get_x()-this.lastPointerPosition.x)*this.scale/this._system.renderer.scale,this.display.y._value+(x._platform.getPointer().get_y()-this.lastPointerPosition.y)/this._system.renderer.scale),this.round&&this.display.setXY(Math.round(this.display.x._value),Math.round(this.display.y._value)),this.lastPointerPosition.set(x._platform.getPointer().get_x(),x._platform.getPointer().get_y()),this.liveUpdate&&this.updateData()},deselect:function(){this.isSelected&&(this.isSelected=!1,
this.display.setAlpha(this.alpha),this.onDeselect.emit(this),this.hasMoved&&this.updateData())},updateData:function(){this.data.x=this.display.x._value;this.data.y=this.display.y._value;this.onChange.emit(this)},cancel:function(){this.isDragging=this.hasMoved=!1;this.deselect()},__class__:al});var ia=function(a,b,c,d){this.folders=new N;A.call(this);this._system=b;null==c&&(null==ia.main&&(ia.main=new Eh(b)),c=ia.main.gui);this.id=a;this.gui=c;null!=d&&P.configure(this,d)};f["stolo.ensys.editor.dialog.Dialog"]=
ia;ia.__name__=["stolo","ensys","editor","dialog","Dialog"];ia.createGui=function(a){return new dat.GUI(a)};ia.__super__=A;ia.prototype=l(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this)},getFolder:function(a){var b=this.folders.get(a);if(null==b){var c=b=this.gui.addFolder(a);this.folders.set(a,c);c}return b},getRangeController:function(a,b,c,d,e){null==e&&(e=-1);var h=null;if(c instanceof Array&&null==c.__enum__)h=d.add(a,b,c[0],c[1]).listen();else if(0<c){var n=null;0>=e&&(e=1,10>
c&&(e=0.25),5>c&&(e=0.1),1>=c&&(e=0.05),500<c&&(e=10));1>e&&(n=w.field(a,b),a[b]=0.1);h=d.add(a,b,0,c).listen().step(e);1>e&&(a[b]=n,h[b]=n)}return h},__class__:ia});var dl=function(a){ia.call(this,"editor",a)};f["stolo.ensys.editor.dialog.EditorDialog"]=dl;dl.__name__=["stolo","ensys","editor","dialog","EditorDialog"];dl.__super__=ia;dl.prototype=l(ia.prototype,{onStart:function(){var a=this;ia.prototype.onStart.call(this);this._folder=this.getFolder("Editor");this._data={snapX:this._system.logic.snapX,
snapY:this._system.logic.snapY,snapRotation:this._system.logic.snapRotation,enablePhysics:this._system.logic.get_enablePhysics(),launch:function(){var b=a._system.document["export"](!1),c=a._system.document.getName();fa.set(c,b);Xa.getURL("./?level="+c+"&levels_pack=storage")},"export":function(){a._system.document["export"]()}};this.gui.remember(this._data);this._folder.add(this._system.selection.info,"selection").listen();this._folder.add(this._data,"snapX",0,100).step(10).listen().onChange(function(b){a._system.logic.snapX=
b});this._folder.add(this._data,"snapY",0,100).step(10).listen().onChange(function(b){a._system.logic.snapY=b});this._folder.add(this._data,"snapRotation",0,180).step(5).listen().onChange(function(b){a._system.logic.snapRotation=b});this._folder.add(this._data,"enablePhysics").onChange(function(b){a._system.logic.set_enablePhysics(b)});this._folder.add(this._data,"export");this._folder.add(this._data,"launch");var b=Xa.getUrlParams();if(0!=b.width&&0!=b.height){var c=b.width,d=b.height;if(!(1E4<c||
1E4<d)){var b=this._system.renderer.addLayer({name:"borders",parallax:{x:1,y:1},editor:{locked:!0}}),e=x._platform.getRenderer().createTexture(c,d),h=e.get_graphics();h.fillRect(16777215,0,0,c,2);h.fillRect(16777215,0,d-2,c,2);h.fillRect(16777215,0,0,2,d);h.fillRect(16777215,c-2,0,2,d);h.translate(0.5*c,0.5*d);h.fillRect(16777215,-10,-1,20,2);h.fillRect(16777215,-1,-10,2,20);c=new ta(e);c.set_pointerEnabled(!1);b.owner.addChild((new r).add(c))}}},onUpdate:function(a){ia.prototype.onUpdate.call(this,
a);this._data.snapX=this._system.logic.snapX;this._data.snapY=this._system.logic.snapY;this._data.snapRotation=this._system.logic.snapRotation;this._data.enablePhysics=this._system.logic.get_enablePhysics()},__class__:dl});var el=function(a){this._opened=!0;this._folders=[];this.skipTemplates=["disposer","editorSelection"];ia.call(this,"entity",a,ia.createGui());this._selection=a.selection};f["stolo.ensys.editor.dialog.EntityDialog"]=el;el.__name__=["stolo","ensys","editor","dialog","EntityDialog"];
el.__super__=ia;el.prototype=l(ia.prototype,{onStart:function(){ia.prototype.onStart.call(this);this._selection.onSelect.connect(m(this,this.onSelect));this._selection.onDeselect.connect(m(this,this.onDeselect))},addComponent:function(a){var b=M.getComponentName(a);!(null!=this.skipTemplates&&-1<this.skipTemplates.indexOf(b))&&null!=b&&(b=this.gui.addFolder(b),this._folders.push(b),this.expose(a,b,["_flags"]))},onSelect:function(a){if(null!=this._currentEntity)this.onDeselect();this._currentEntity=
a;null==this.gui&&(this.gui=ia.createGui({closed:!this._opened}));this.template=a._compMap.TemplateComponent_40.key;this.titleController=this.gui.add(this,"template");for(a=a.firstComponent;null!=a;)this.addComponent(a),a=a.next},onDeselect:function(){this._currentEntity=null;null!=this.gui&&(this._opened=!this.gui.closed,this.gui.destroy(),this.gui=null)},expose:function(a,b,c,d,e,h){for(var n=this,g=[],f=null,f=null,i=[],j=this.getExcludes(a),k=0,l=w.fields(a);k<l.length;){var m=l[k];++k;!(null!=
c&&-1<c.indexOf(m))&&!(null!=j&&-1<j.indexOf(m))&&(f=w.field(a,m),"boolean"!=typeof f&&"string"!=typeof f&&"number"!=typeof f&&(f|0)!==f?0<w.fields(f).length&&ja["typeof"](f)==K.TObject&&this.expose(f,b.addFolder(m),c,a,m):i.push(m))}if(0==i.length)return null;for(c=0;c<i.length;)f=[i[c]],++c,null!=h&&h.exists(f[0])?(j=h.get(f[0]),f=this.getRangeController(a,f[0],j,b)):f=b.add(a,f[0]).listen().onChange(function(b){return function(c){var h=!1;d?(h=ga.__instanceof(d,Fe),n.updateComponentMeta(d,e)):
(h=ga.__instanceof(a,Fe),n.updateProperty(a,b[0],c));h&&n.updateTransform()}}(f)),null!=f&&g.push(g);this.addMethods(a,b);return g},getExcludes:function(a){a=ja.getClass(a);if(null==a)return null;a=w.getProperty(a,"EDITOR_EXCLUDE");return null==a?null:a},addMethods:function(a,b){var c=ja.getClass(a);if(null!=c&&(c=w.getProperty(c,"EDITOR_METHODS"),null!=c))for(var d=0;d<c.length;){var e=c[d];++d;b.add(a,e)}},updateProperty:function(a,b,c){var d=this._currentEntity._compMap.EditorMetaComponent_44,
a=M.getComponentName(a);d.updateProperty(a,b,c)},updateComponentMeta:function(a,b){var c=this._currentEntity._compMap.EditorMetaComponent_44,d=M.getComponentName(a),e=w.field(a,b);c.updateProperty(d,b,e)},updateTransform:function(){var a=this._currentEntity._compMap.TransformComponent_43;this._system.tool.getCurrent().moveActor(a.position.x,a.position.y,this._currentEntity,!1,!1)},__class__:el});var fl=function(a){ia.call(this,"history",a)};f["stolo.ensys.editor.dialog.HistoryDialog"]=fl;fl.__name__=
["stolo","ensys","editor","dialog","HistoryDialog"];fl.__super__=ia;fl.prototype=l(ia.prototype,{onStart:function(){var a=this;ia.prototype.onStart.call(this);this._folder=this.getFolder("History");this._data={undo:function(){a._system.history.undo()},redo:function(){a._system.history.redo()}};this._folder.add(this._data,"redo");this._folder.add(this._data,"undo")},__class__:fl});var Eh=function(a){ia.call(this,"main",a,ia.createGui())};f["stolo.ensys.editor.dialog.MainDialog"]=Eh;Eh.__name__=["stolo",
"ensys","editor","dialog","MainDialog"];Eh.__super__=ia;Eh.prototype=l(ia.prototype,{onAdded:function(){var a=this;ia.prototype.onAdded.call(this);this._rendererState=this._system.rendererState;this.gui._save=this.gui.save;this.gui.save=function(){var b=a.gui.preset;a.gui._save();null!=a._rendererState&&(a._rendererState.preset=b,a._rendererState.save())};this.gui._revert=this.gui.revert;this.gui.revert=function(){var b=a.gui.preset;null!=a._rendererState&&(a._rendererState.preset=b,a._rendererState.load());
a.gui._revert()}},load:function(){var a=this,b=this.gui.preset;this._rendererState.preset=b;this._rendererState.load();ze.delay(function(){a.gui.preset=b},50)},__class__:Eh});var gl=function(a){this._layersLock=new N;ia.call(this,"renderer",a);this._renderer=a.renderer};f["stolo.ensys.editor.dialog.RendererDialog"]=gl;gl.__name__=["stolo","ensys","editor","dialog","RendererDialog"];gl.__super__=ia;gl.prototype=l(ia.prototype,{onStart:function(){var a=this;ia.prototype.onStart.call(this);this._layers=
this._renderer.getLayers();this._folder=this.getFolder("Renderer");this._data={x:this._renderer.displacement.x,y:this._renderer.displacement.y,scale:this._renderer.scale};this._folder.add(this._data,"x").listen().onChange(function(b){a._renderer.move(b,a._data.y)});this._folder.add(this._data,"y").listen().onChange(function(b){a._renderer.move(a._data.x,b)});this._folder.add(this._data,"scale",0.2,1).listen().onChange(function(b){a._renderer.setScale(b)});for(var b=this._system.rendererState.layersAlphaData,
c=this._system.rendererState.layersLockedData,d=this._folder.addFolder("Layers lock"),e=this._folder.addFolder("Layers alpha"),h=0,n=this._layers;h<n.length;){var g=[n[h]];++h;var f=g[0].getName(),i=g[0].data.editor;if(null==i||!0!=i.unlockable)w.setProperty(c,f,0==(g[0]._flags&4)),i=d.add(c,f).listen().onChange(function(a){return function(b){a[0].set_pointerEnabled(!b)}}(g)),this._layersLock.set(f,i),i;w.setProperty(b,f,g[0].alpha._value);e.add(b,f,0,1).listen().onChange(function(a){return function(b){a[0].setAlpha(b)}}(g))}this._system.rendererState.onLoad.connect(m(this,
this.onRenderStateLoaded))},onRenderStateLoaded:function(){for(var a,b=this._layersLock.keys();b.hasNext();){var c=b.next();a=this._layersLock.get(c);a.setValue(w.field(this._system.rendererState.layersLockedData,c))}},onUpdate:function(a){ia.prototype.onUpdate.call(this,a);this._data.scale=this._renderer.scale;this._data.x=this._renderer.displacement.x;this._data.y=this._renderer.displacement.y},__class__:gl});var Xd=function(a){this._hasDisplay=!1;this.padding=2;A.call(this);this._template=a;this.templateKey=
this._template.template.key};f["stolo.ensys.editor.dialog.TemplateThumbnail"]=Xd;Xd.__name__=["stolo","ensys","editor","dialog","TemplateThumbnail"];Xd.getDisplayComponent=function(a){for(var b=0,a=w.fields(a);b<a.length;){var c=a[b];++b;if(-1!=Xd.spriteComponents.indexOf(c))return c}return null};Xd.__super__=A;Xd.prototype=l(A.prototype,{onAdded:function(){A.prototype.onAdded.call(this);this._background=new eb(16777215,50,50);this.owner.addChild((new r).add(this._background));try{this.createSimplifiedActor(Xd.getDisplayComponent(this._template))}catch(a){if(ga.__instanceof(a,
String))this.createSimplifiedActor();else throw a;}this._textSprite=S.getTextSprite("debug_font");this._textSprite.set_text(this.templateKey);this.owner.addChild((new r).add(this._textSprite))},createSimplifiedActor:function(a){null!=this._displaySprite&&null!=this._displaySprite.owner&&(this._displaySprite.owner.parent.removeChild(this._displaySprite.owner),this._displaySprite=null);var b={transform:{}};null!=this._template.transform&&(P.configure(b.transform,this._template.transform),b.transform.fixed=
!0);null!=a?(this._hasDisplay=!0,w.setField(b,a,P.clone(w.field(this._template,a)))):(this._hasDisplay=!1,b.image={pack:"debug",asset:"sprite"});null!=this._template.customization&&(b.customization=P.clone(this._template.customization));a=M.create(b);this._displaySprite=a._compMap.Sprite_5;ga.__cast(this._displaySprite,V).offset=null;ga.__cast(this._displaySprite,V).applyOffset();this._displaySprite.centerAnchor();this.owner.addChild(a)},onStart:function(){A.prototype.onStart.call(this)},setSize:function(a,
b){var c=a-2*this.padding,d=b-2*this.padding;this._background.setSize(a,b);this._displaySprite.setScaleXY(1,1);var e=A.getBounds(this._displaySprite.owner),h=e.width,e=e.height,n=h/c,g=e/d;this._displaySprite.centerAnchor();var f=1;if(1<n||1<g)f=n>g?c/h:d/e,this._displaySprite.setScaleXY(f*(0<this._displaySprite.scaleX._value?1:-1),f);this._displaySprite.setXY(0.5*a,0.5*b);this._textSprite.setXY(this.padding,this.padding);this._textSprite.setWrapWidth(c)},setTextVisible:function(a){this._textSprite.set_visible(this._hasDisplay?
a:!0)},filter:function(a){if(""==a)return!0;a=a.toLowerCase();if(-1!=this.templateKey.toLowerCase().indexOf(a))return!0;var b=this._template.template.tags;if(null!=b&&-1!=b.toString().toLowerCase().indexOf(a))return!0;for(var b=0,c=w.fields(this._template);b<c.length;){var d=c[b];++b;if(-1!=d.toLowerCase().indexOf(a))return!0}return!1},__class__:Xd});var hl=function(a){this._lastPointerUpTime=0;this._filter="";this._sprite=new A;this._container=new r;this._thumbnails=[];this._showLabel=!1;this._thumbnailMargin=
5;this._thumbnailSize=40;this._width=200;this._height=x._platform.getStage().get_height();ia.call(this,"editor",a);this._backgroundSprite=new eb(0,this._width,this._height);this._backgroundSprite.setAlpha(0.5)};f["stolo.ensys.editor.dialog.TemplatesDialog"]=hl;hl.__name__=["stolo","ensys","editor","dialog","TemplatesDialog"];hl.__super__=ia;hl.prototype=l(ia.prototype,{onStart:function(){var a=this;ia.prototype.onStart.call(this);this.owner.addChild((new r).add(this._backgroundSprite));this.owner.addChild(this._container.add(this._sprite));
this._sprite.set_visible(!1);this.createThumbnails();this._folder=this.getFolder("Templates");this._data={visible:0!=(this._flags&2),width:this._width,size:this._thumbnailSize,margin:this._thumbnailMargin,filter:this._filter,text:!1};this._folder.add(this._data,"visible").onChange(function(b){a.set_visible(b)});this._folder.add(this._data,"width",0,x._platform.getStage().get_width()).onChange(function(b){a._width=b;a.refresh()});this._folder.add(this._data,"size",20,200).step(10).onChange(function(b){a._thumbnailSize=
b;a.refresh()});this._folder.add(this._data,"margin",0,100).step(10).onChange(function(b){a._thumbnailMargin=b;a.refresh()});this._folder.add(this._data,"text").onChange(function(b){a._showLabel=b;a.refresh()});this._folder.add(this._data,"filter").onChange(function(b){a._filter=b;a.refresh()})},createThumbnails:function(){for(var a,b=0,c=M.getTemplateIds();b<c.length;)a=c[b],++b,a=M.getTemplate(a),Object.prototype.hasOwnProperty.call(a,Hf.COMPONENT_NAME)||(a=new Xd(a),this._container.addChild((new r).add(a)),
this._thumbnails.push(a),a.get_pointerUp().connect(m(this,this.onThumbnailPointerUp)));this.refresh();u.delayCallTo(m(this,this.refresh),0.1)},refresh:function(){this._sprite.set_visible(!0);for(var a=[],b=0,c=this._thumbnails;b<c.length;){var d=c[b];++b;d.filter(this._filter)?(d.set_visible(!0),d.setTextVisible(this._showLabel),a.push(d)):d.set_visible(!1)}b=Math.floor(this._width/(this._thumbnailSize+this._thumbnailMargin));c=0;for(d=a.length;c<d;){var e=c++,h=a[e];h.setSize(this._thumbnailSize,
this._thumbnailSize);h.setXY(this._thumbnailMargin+e%b*(this._thumbnailSize+this._thumbnailMargin),this._thumbnailMargin+Math.floor(e/b)*(this._thumbnailSize+this._thumbnailMargin))}this._backgroundSprite.setSize(this._width,this._thumbnailMargin+Math.floor(a.length/b)*(this._thumbnailSize+this._thumbnailMargin))},onUpdate:function(a){ia.prototype.onUpdate.call(this,a);var b=null;if(x._platform.getPointer().get_x()<this._backgroundSprite.getNaturalWidth()){if(50>x._platform.getPointer().get_y()&&
0>this._sprite.y._value){var c=this._sprite.y;c.set__(c._value+600*a)}else x._platform.getPointer().get_y()>this._height-50&&this._sprite.y._value>-this._backgroundSprite.getNaturalHeight()+this._height&&(c=this._sprite.y,c.set__(c._value-600*a));a=A.hitTest(this._container,x._platform.getPointer().get_x(),x._platform.getPointer().get_y());if(null!=a){if(null==a.owner._internal_getFromParents("Sprite_5",Xd))return;b=a.owner._internal_getFromParents("Sprite_5",Xd).templateKey}}this._system.selection.info.thumbnail=
b},onThumbnailPointerUp:function(a){if(0.3>x._platform.getTime()-this._lastPointerUpTime){for(var b=this._system.renderer.displacement,a=a.hit,c=null;null!=a&&null==c;)ga.__instanceof(a,Xd)&&(c=a),a=null==a.owner?null:null==a.owner.parent?null:a.owner.parent._compMap.Sprite_5;if(null==c)return;this._system.history.add(new mg(this._system,c.templateKey,{x:0.5*this._system.renderer.dimensionsScaled.width-b.x,y:0.5*this._system.renderer.dimensionsScaled.height-b.y}))}this._lastPointerUpTime=x._platform.getTime()},
__class__:hl});var ff=function(a){this.preset="Default";this.isLoading=this.isSaving=!1;this.onSave=new O;this.onLoad=new O;k.call(this);this._system=a};f["stolo.ensys.editor.states.BaseEditorState"]=ff;ff.__name__=["stolo","ensys","editor","states","BaseEditorState"];ff.__super__=k;ff.prototype=l(k.prototype,{get_name:function(){return"BaseEditorState_58"},isBusy:function(){return this.isLoading||this.isSaving},save:function(a){if(!this.isBusy()&&(null==a&&(a=this.get()),null!=a)){this.isSaving=
!0;var b=JSON.stringify(a),c=this.getStorageprefix();fa.setWithPrefix(c,"renderer",b);this.onSave.emit(a);this.isSaving=!1}},get:function(){return{}},getStorageprefix:function(){return this._system.storagePrefix+this.preset+"_"},load:function(){if(!this.isBusy()){var a=this.getStorageprefix(),a=fa.getWithPrefix(a,"renderer");null!=a&&(this.isLoading=!0,a=JSON.parse(a),null!=a&&this.apply(a),this.onLoad.emit(a),this.isLoading=!1)}},apply:function(a){P.configure(this,a,!0)},__class__:ff});var Ok=function(a){this.layersLockedData=
{};this.layersAlphaData={};this.zoomMin=0.2;this.zoomMax=1;ff.call(this,a)};f["stolo.ensys.editor.states.EditorRendererState"]=Ok;Ok.__name__=["stolo","ensys","editor","states","EditorRendererState"];Ok.__super__=ff;Ok.prototype=l(ff.prototype,{setRendererScale:function(a,b){null==b&&(b=!0);b&&(a+=this._system.renderer.scale);this._system.renderer.setScale(Math.max(this.zoomMin,Math.min(this.zoomMax,a)))},setRendererPosition:function(a,b,c){null==c&&(c=!1);c&&(a+=this._system.renderer.displacement.x,
b+=this._system.renderer.displacement.y);this._system.renderer.move(a,b)},load:function(){for(var a=0,b=this._system.renderer.getLayers();a<b.length;){var c=b[a];++a;c.getName();var d=c.data.editor;null!=d&&!0==d.locked&&c.set_pointerEnabled(!1)}ff.prototype.load.call(this)},get:function(){if(null==this._system.renderer)return null;for(var a={renderer:{x:this._system.renderer.displacement.x,y:this._system.renderer.displacement.y,scale:this._system.renderer.scale},alpha:this.layersAlphaData,locked:this.layersLockedData},
b=0,c=this._system.renderer.getLayers();b<c.length;){var d=c[b];++b;var e=d.getName();this.layersAlphaData[e]=d.alpha._value;this.layersLockedData[e]=0==(d._flags&4)}return a},apply:function(a){null!=a.renderer&&(this.setRendererPosition(a.renderer.x,a.renderer.y),this.setRendererScale(a.renderer.scale,!1),w.deleteField(a,"renderer"));this.layersAlphaData={};this.layersLockedData={};var b;if(null!=a.locked){for(var c=0,d=w.fields(a.locked);c<d.length;){var e=d[c];++c;b=this._system.renderer.getLayer(e);
if(null!=b){var h=w.field(a.locked,e);b.set_pointerEnabled(!h);this.layersLockedData[e]=h}}w.deleteField(a,"locked")}if(null!=a.alpha){c=0;for(d=w.fields(a.alpha);c<d.length;)e=d[c],++c,b=this._system.renderer.getLayer(e),null!=b&&(h=w.field(a.alpha,e),0<=h&&(b.setAlpha(h),this.layersAlphaData[e]=h));w.deleteField(a,"alpha")}ff.prototype.apply.call(this,a)},__class__:Ok});var Ik=function(){this._templates=[];k.call(this)};f["stolo.ensys.editor.system.ClipboardSystem"]=Ik;Ik.__name__=["stolo","ensys",
"editor","system","ClipboardSystem"];Ik.__super__=k;Ik.prototype=l(k.prototype,{get_name:function(){return"ClipboardSystem_46"},set:function(a){this._templates=a},get:function(){return this._templates},__class__:Ik});var Pk=function(){this._map=new N;k.call(this)};f["stolo.ensys.editor.system.DialogSystem"]=Pk;Pk.__name__=["stolo","ensys","editor","system","DialogSystem"];Pk.__super__=k;Pk.prototype=l(k.prototype,{get_name:function(){return"DialogSystem_54"},onAdded:function(){this._system=y.instance(this.owner._compMap.BaseGameSystem_20,
Uc);this.container=new r;this.container.add(new A);this._disposer=this.owner._compMap.Disposer_61;this.build()},onStart:function(){k.prototype.onStart.call(this);null==this.container.parent&&this.owner.addChild(this.container)},onStop:function(){k.prototype.onStop.call(this);this._disposer=this.container=null},build:function(){this.createMainDialog();this.editor=this.add(new dl(this._system),this.main.owner);this.renderer=this.add(new gl(this._system),this.main.owner);this.history=this.add(new fl(this._system),
this.main.owner);this.templates=this.add(new hl(this._system),this.container);this.entity=this.add(new el(this._system))},createMainDialog:function(){this.main=ia.main=new Eh(this._system);this.main.setXY(x._platform.getStage().get_width(),x._platform.getStage().get_height());this.add(this.main)},add:function(a,b){null==b&&(b=this.container);this._map.set(a.id,a);a;b.addChild((new r).add(a));return a},onUpdate:function(a){k.prototype.onUpdate.call(this,a)},__class__:Pk});var Nk=function(){this.isDirty=
!1;k.call(this)};f["stolo.ensys.editor.system.DocumentSystem"]=Nk;Nk.__name__=["stolo","ensys","editor","system","DocumentSystem"];Nk.__super__=k;Nk.prototype=l(k.prototype,{get_name:function(){return"DocumentSystem_52"},onStart:function(){k.prototype.onStart.call(this);this._system=y.instance(this.owner._compMap.BaseGameSystem_20,Uc);this.show()},onStop:function(){k.prototype.onStop.call(this)},getName:function(){var a=this._system.levelData.filename.split("/");return a[a.length-1]},"export":function(a){null==
a&&(a=!0);var b=this._system.actors.getAll();mb.sort(b,m(this,this.sortActors));for(var c=[],d,e=0;e<b.length;)d=b[e],++e,d=d._compMap.EditorMetaComponent_44,null!=d&&c.push(d.getTemplate());this._system.levelData.data.actors=c;b=this.getName();c=ch.print(this._system.levelData.data,null,"\t");fa.setWithPrefix(this._system.storagePrefix,b,c);this.isDirty=!1;a&&Xa.getURL("./editor.html?json=true&level="+b+"&r="+Math.random());return c},show:function(){var a=Xa.getUrlParams();if(null!=a.json&&null!=
a.level){var b=this.getName(),b=fa.getWithPrefix(this._system.storagePrefix,b),c=eval("document");c.title=a.level+".json';";c.body.innerHTML="<pre>"+y.string(b.toString())+"</pre>";null!=ia.main&&ia.main.gui.getRoot().destroy()}},sortActors:function(a,b){var c=a.parent._compMap.Sprite_5,d=b.parent._compMap.Sprite_5,e=this._system.renderer.getSprite().getChildIndex(c.owner),h=this._system.renderer.getSprite().getChildIndex(d.owner);return c==d?c.getChildIndex(a)>d.getChildIndex(b)?1:-1:e>h?1:-1},__class__:Nk});
var we=function(){this.onLevelLoaded=new O;k.call(this)};f["stolo.ensys.system.LevelSystem"]=we;we.__name__=["stolo","ensys","system","LevelSystem"];we.__super__=k;we.prototype=l(k.prototype,{get_name:function(){return"LevelSystem_21"},onAdded:function(){this._actors=this.owner._compMap.ActorSystem_41;this._renderer=this.owner._compMap.RendererSystem_45},onRemoved:function(){k.prototype.onRemoved.call(this);this._renderer=this._actors=null},load:function(a){this.build(a.layers,a.actors);this.onLevelLoaded.emit(a)},
build:function(a,b){if(null==a)throw"No layers in level!";for(var c=0;c<a.length;){var d=a[c];++c;this._renderer.addLayer(d)}if(null!=b)for(c=0;c<b.length;)d=b[c],++c,null!=d.template&&(d.template.spawner=1),this.spawnActor(d)},spawnActor:function(a){return this._actors.spawn(a)},__class__:we});var Rk=function(){we.call(this)};f["stolo.ensys.editor.system.EditorLevelSystem"]=Rk;Rk.__name__=["stolo","ensys","editor","system","EditorLevelSystem"];Rk.__super__=we;Rk.prototype=l(we.prototype,{onAdded:function(){we.prototype.onAdded.call(this);
this._system=y.instance(this.owner._compMap.BaseGameSystem_20,Uc)},spawnActor:function(a){if(this._system.roundValues&&null!=a.transform&&(a.transform.position.x=Math.round(a.transform.position.x),a.transform.position.y=Math.round(a.transform.position.y),0<a.transform.rotation||0>a.transform.rotation))a.transform.rotation=Math.round(a.transform.rotation);var b=this._actors.spawn(a);b.add(new bl(a));if(null==b._compMap.Sprite_5){a=new Ud;a.asset="sprite";a.pack="debug";a.width=a.height=10;var c=b._compMap.PhysicsComponent_34;
null!=c&&(c=c.getSize(),a.width=c.width,a.height=c.height);b.add(a)}return b},__class__:Rk});var Lk=function(){this.onCommand=new O;this.limit=50;k.call(this)};f["stolo.ensys.editor.system.HistorySystem"]=Lk;Lk.__name__=["stolo","ensys","editor","system","HistorySystem"];Lk.__super__=k;Lk.prototype=l(k.prototype,{get_name:function(){return"HistorySystem_51"},onStart:function(){k.prototype.onStart.call(this);this._redos=[];this._undos=[]},onStop:function(){k.prototype.onStop.call(this);this._redos=
this._undos=null},add:function(a,b){null==b&&(b=!0);b&&a.redo();this._redos.push(a);this._undos.splice(0,this._undos.length);this._undos.length>this.limit&&this._undos.splice(0,1);this.onCommand.emit(a)},redo:function(){var a=this._undos.pop();null!=a&&(a.redo(),this._redos.push(a),this.onCommand.emit(a))},undo:function(){var a=this._redos.pop();null!=a&&(a.undo(),this._undos.push(a),this.onCommand.emit(a))},__class__:Lk});var Qk=function(){this._enablePhysics=!1;this.snapRotation=45;this.snapX=this.snapY=
30;this.onComplete=new ka;k.call(this);V.ENABLE_POINTER=!0;pg.enabled=!0};f["stolo.ensys.editor.system.LogicSystem"]=Qk;Qk.__name__=["stolo","ensys","editor","system","LogicSystem"];Qk.__super__=k;Qk.prototype=l(k.prototype,{get_name:function(){return"LogicSystem_47"},onStart:function(){k.prototype.onStart.call(this);this._system=y.instance(this.owner._compMap.BaseGameSystem_20,Uc);this._disposer=this.owner._compMap.Disposer_61;this._system.physics.enable(this.get_enablePhysics());this._disposer.add(this._system.shortcut.onAction.connect(m(this,
this.onAction)));this._disposer.add(x._platform.getKeyboard().down.connect(m(this,this.onKeyDown)));this._disposer.add(x._platform.getKeyboard().up.connect(m(this,this.onKeyUp)));this._system.shortcut.add(new Wk(this._system),[i.Shift,i.T]);this._system.shortcut.add(new Yk(this._system),[i.Control,i.Z]);this._system.shortcut.add(new Uk(this._system),[i.Control,i.Y]);this._system.shortcut.add(new Ch(this._system),[i.Control,i.C]);this._system.shortcut.add(new Tk(this._system),[i.Control,i.D]);this._system.shortcut.add(new Dh(this._system),
[i.Control,i.V]);this._system.shortcut.add(new Sk(this._system),[i.Control,i.F]);this._system.shortcut.add(new Vk(this._system),[i.Control,i.B]);this.setDefaultTool();this._system.level.load(this._system.levelData);this.onComplete.emit()},onStop:function(){k.prototype.onStop.call(this);this._disposer=this._system=null},setDefaultTool:function(){this._system.tool.set(new il(this._system))},onAction:function(a){a.execute()},onKeyUp:function(a){a.key==i.Space&&this.setDefaultTool()},onKeyDown:function(a){a.key==
i.Space&&this._system.tool.set(new jl(this._system))},get_enablePhysics:function(){return this._enablePhysics},set_enablePhysics:function(a){null!=this._system&&this._system.physics.enable(a);return this._enablePhysics=a},__class__:Qk,__properties__:l(k.prototype.__properties__,{set_enablePhysics:"set_enablePhysics",get_enablePhysics:"get_enablePhysics"})});var Mk=function(){this.onDeselect=new ka;this.onSelect=new O;k.call(this)};f["stolo.ensys.editor.system.SelectionSystem"]=Mk;Mk.__name__=["stolo",
"ensys","editor","system","SelectionSystem"];Mk.__super__=k;Mk.prototype=l(k.prototype,{get_name:function(){return"SelectionSystem_48"},onStart:function(){k.prototype.onStart.call(this);this._actors=[];this.info=new cl;this.info.setXY(210,10);this.owner.addChild((new r).add(this.info))},onStop:function(){this._actors=null;k.prototype.onStop.call(this)},contains:function(a){return-1!=this._actors.indexOf(a)},set:function(a){this.clear();this.add(a)},add:function(a){if(!(this.contains(a)||null==a)){this._actors.push(a);
a.add(new kg);var b=a._compMap.EditorMetaComponent_44;null!=b&&(b.isSelected=!0,b.onSelect.emit(a));this.onSelect.emit(a);this.info.show(a)}},remove:function(a){if(this.contains(a)&&null!=a){Q.remove(this._actors,a);a.remove(a._compMap.EditorSelectionComponent_49);var b=a._compMap.EditorMetaComponent_44;null!=b&&(b.isSelected=!1,b.onDeselect.emit(a));this.onDeselect.emit();this.info.hide()}},toggle:function(a){null!=a&&(this.contains(a)?this.remove(a):this.add(a))},getAll:function(){for(var a=[],
b=0,c=this._actors;b<c.length;){var d=c[b];++b;a.push(d)}return a},clear:function(){for(var a=this.getAll(),b=0;b<a.length;){var c=a[b];++b;this.remove(c)}this.onDeselect.emit()},__class__:Mk});var Kk=function(){this.onAction=new O;k.call(this)};f["stolo.ensys.editor.system.ShortcutSystem"]=Kk;Kk.__name__=["stolo","ensys","editor","system","ShortcutSystem"];Kk.__super__=k;Kk.prototype=l(k.prototype,{get_name:function(){return"ShortcutSystem_53"},onStart:function(){k.prototype.onStart.call(this);this._disposer=
this.owner._compMap.Disposer_61;this._disposer.add(x._platform.getKeyboard().down.connect(m(this,this.onKeyDown)));this._actions=new Bb},onStop:function(){k.prototype.onStop.call(this);this._disposer=this._actions=null},add:function(a,b){this._actions.set(a,b)},onKeyDown:function(a){for(var b=this._actions.keys();b.hasNext();){for(var c=b.next(),d=this._actions.h[c.__id__],e=!0,h=0;h<d.length;){var n=d[h];++h;if(!x._platform.getKeyboard().isDown(n)&&a.key!=n){e=!1;break}}e&&this.onAction.emit(c)}},
__class__:Kk});var Jk=function(){k.call(this)};f["stolo.ensys.editor.system.ToolSystem"]=Jk;Jk.__name__=["stolo","ensys","editor","system","ToolSystem"];Jk.__super__=k;Jk.prototype=l(k.prototype,{get_name:function(){return"ToolSystem_50"},onStart:function(){k.prototype.onStart.call(this)},onStop:function(){k.prototype.onStop.call(this);this._tool=null},onUpdate:function(a){if(null!=this._tool)this._tool.onUpdate(a)},set:function(a){null!=this._tool&&this._tool.stop();this._tool=a;null!=this._tool&&
this._tool.start();return this._tool},getCurrent:function(){return this._tool},__class__:Jk});var Hd=function(a){this._started=!1;this._disposer=new xb;this._system=a};f["stolo.ensys.editor.tools.Tool"]=Hd;Hd.__name__=["stolo","ensys","editor","tools","Tool"];Hd.prototype={onKeyRelease:function(){},onKeyPress:function(){},onDragStart:function(){},onDrag:function(){},onDragStop:function(){},onTap:function(){},onWheel:function(){},onUpdate:function(){},start:function(){this._disposer.add(x._platform.getPointer().down.connect(m(this,
this.onPointerDown)));this._disposer.add(x._platform.getPointer().move.connect(m(this,this.onPointerMove)));this._disposer.add(x._platform.getPointer().up.connect(m(this,this.onPointerUp)));this._disposer.add(x._platform.getKeyboard().down.connect(m(this,this.onKeyDown)));this._disposer.add(x._platform.getKeyboard().up.connect(m(this,this.onKeyUp)));this._disposer.add(x._platform.getMouse().scroll.connect(m(this,this.onMouseWheel)));this._started=!0},stop:function(){this._disposer.dispose();this._system=
null;this._started=!1},onKeyDown:function(a){if(this._started)this.onKeyPress(a.key)},onKeyUp:function(a){if(this._started)this.onKeyRelease(a.key)},onMouseWheel:function(a){if(this._started)this.onWheel(a)},onPointerDown:function(a){if(this._started){var b=this.findActor(a.viewX,a.viewY);this._pointer={drag:!1,x:0,y:0,xo:a.viewX,yo:a.viewY,xl:0,yl:0,distance:0,actor:b}}},onPointerMove:function(a){if(this._started&&null!=this._pointer)if(this._pointer.xl=this._pointer.x,this._pointer.yl=this._pointer.y,
this._pointer.x=a.viewX,this._pointer.y=a.viewY,this._pointer.distance=Math.sqrt(Math.pow(this._pointer.xo-this._pointer.x,2)+Math.pow(this._pointer.yo-this._pointer.y,2)),this._pointer.drag)this.onDrag(this._pointer);else 10<this._pointer.distance&&(this._pointer.drag=!0,this.onDragStart(this._pointer))},onPointerUp:function(){if(this._started&&null!=this._pointer){if(this._pointer.drag)this.onDragStop(this._pointer);else this.onTap(this._pointer);this._pointer=null}},findActor:function(a,b){var c=
A.hitTest(this._system.renderer.getContainer(),a,b);if(null==c)return null;for(c=c.owner;null!=c&&null==c._compMap.TransformComponent_43;)c=c.parent;return c},getRendererInverseScale:function(){return 1/this._system.renderer.scale},__class__:Hd};var il=function(a){this._actorStartRotations=new Bb;this._actorStartPositions=new Bb;this._rotate=!1;this.selectorAlpha=0.5;this.selectorColor=65280;Hd.call(this,a)};f["stolo.ensys.editor.tools.ActorTransformTool"]=il;il.__name__=["stolo","ensys","editor",
"tools","ActorTransformTool"];il.__super__=Hd;il.prototype=l(Hd.prototype,{start:function(){Hd.prototype.start.call(this);x._platform.getMouse().set_cursor(Nb.Default)},stop:function(){this._rotate=!1;this._positions=null;this.removeSelector();Hd.prototype.stop.call(this)},onTap:function(a){a=a.actor;(null==a||!x._platform.getKeyboard().isDown(i.Shift))&&this._system.selection.clear();this._system.selection.toggle(a)},onDragStart:function(a){var b=a.actor;if(null!=b)if(x._platform.getKeyboard().isDown(i.Control))this._rotate=
!0;else{a=this._system.selection.contains(b)?this._system.selection.getAll():[b];this._positions=[];for(b=0;b<a.length;){var c=a[b];++b;var d=c._compMap.TransformComponent_43.position;this._positions.push(new jb(d.x,d.y));d={x:d.x,y:d.y};this._actorStartPositions.set(c,d);d;d=c._compMap.TransformComponent_43.rotation;this._actorStartRotations.set(c,d);d}}else b=this._system.renderer.getLayers(),b=b[b.length-1],this._selector=(new r).add((new eb(this.selectorColor,1,1)).setAlpha(this.selectorAlpha).setXY(-this._system.renderer.displacement.x+
a.x*this.getRendererInverseScale(),-this._system.renderer.displacement.y+a.y*this.getRendererInverseScale())),b.owner.addChild(this._selector)},getSelectedActors:function(){return this._system.selection.contains(this._selectedActor)?this._system.selection.getAll():[this._selectedActor]},onDrag:function(a){this._selectedActor=a.actor;if(null!=this._selector)y.instance(this._selector._compMap.Sprite_5,eb).setSize(this.getRendererInverseScale()*(a.x-a.xo),this.getRendererInverseScale()*(a.y-a.yo));else if(this._rotate){var b=
this._selectedActor._compMap.TransformComponent_43.position;this.rotateActor(Ib.toDegrees(Math.atan2(-this._system.renderer.displacement.y+a.y*this.getRendererInverseScale()-b.y,-this._system.renderer.displacement.x+a.x*this.getRendererInverseScale()-b.x)),this._selectedActor)}else if(null!=this._positions){this._system.selection.contains(this._selectedActor);for(var b=this.getSelectedActors(),c=0,d=0;d<b.length;){var e=b[d];++d;var h=this._positions[c],n=h.x+this.getRendererInverseScale()*(a.x-a.xo),
h=h.y+this.getRendererInverseScale()*(a.y-a.yo);this.moveActor(n,h,e,!1,!0);c++}}},onDragStop:function(a){if(null!=this._selector){var b=y.instance(this._selector._compMap.Sprite_5,eb),c=this._system.actors.getAll(),d=a.xo*this.getRendererInverseScale()-this._system.renderer.displacement.x,e;0>b.width._value?(e=d,d=e+b.width._value):e=d+b.width._value;var a=a.yo*this.getRendererInverseScale()-this._system.renderer.displacement.y,h;0>b.height._value?(h=a,a=h+b.height._value):h=a+b.height._value;for(b=
0;b<c.length;){var n=c[b];++b;if(!(null==n||null==n.parent)){var g=n.parent._compMap.Sprite_5;null==g||0==(g._flags&4)||(g=n._compMap.TransformComponent_43.position,d>g.x||e<g.x||a>g.y||h<g.y||this._system.selection.add(n))}}}else if(null!=this._positions||this._rotate){c=this._system.selection.contains(this._selectedActor);d=this.getSelectedActors();e=new Gf;for(a=0;a<d.length;)h=d[a],++a,this._rotate?e.add(new $k(this._system,h,this._actorStartRotations.h[h.__id__],h._compMap.TransformComponent_43.rotation,
c?!1:!0)):(b=h._compMap.TransformComponent_43.position,e.add(new Zk(this._system,h,this._actorStartPositions.h[h.__id__],{x:b.x,y:b.y})));this._system.history.add(e,!1)}this._rotate=!1;this._positions=null;this.removeSelector()},onKeyRelease:function(a){var b=this._system.selection.getAll(),c;c=x._platform.getKeyboard().isDown(i.Shift)?1:this._system.logic.snapX;if(a==i.Backspace||a==i.Delete){for(var d=0;d<b.length;){var e=b[d];++d;this._system.actors.removeActor(e)}this._system.selection.clear()}if(a==
i.I)for(d=0;d<b.length;)++d,null;if(a==i.Left)for(a=0;a<b.length;)d=b[a],++a,this.moveActor(-c,0,d,!0,!1);else if(a==i.Right)for(a=0;a<b.length;)d=b[a],++a,this.moveActor(c,0,d,!0,!1);else if(a==i.Up)for(a=0;a<b.length;)d=b[a],++a,this.moveActor(0,-c,d,!0,!1);else if(a==i.Down)for(a=0;a<b.length;)d=b[a],++a,this.moveActor(0,c,d,!0,!1)},removeSelector:function(){null!=this._selector&&(this._selector.parent.removeChild(this._selector),this._selector=null)},moveActor:function(a,b,c,d,e){null==e&&(e=
!0);null==d&&(d=!1);var h=c._compMap.PhysicsComponent_34,n=c._compMap.Sprite_5,g=c._compMap.TransformComponent_43,c=c._compMap.EditorMetaComponent_44;c.moveEnabled&&(d&&(a+=g.position.x,b+=g.position.y),!x._platform.getKeyboard().isDown(i.Shift)&&0!=this._system.logic.snapX&&0!=this._system.logic.snapY&&e&&(a=Math.round(a/this._system.logic.snapX)*this._system.logic.snapX,b=Math.round(b/this._system.logic.snapY)*this._system.logic.snapY),null!=g&&(g.position.x=a,g.position.y=b),null!=h&&(h.forceUpdate=
!0,h.setPosition(a,b)),null!=n&&(n.forceUpdate=!0),null!=c&&c.updateProperty("transform","position",{x:this._system.roundValues?Math.round(a):a,y:this._system.roundValues?Math.round(b):b}))},rotateActor:function(a,b,c,d){null==d&&(d=!0);null==c&&(c=!1);var e=b._compMap.PhysicsComponent_34,h=b._compMap.Sprite_5,n=b._compMap.TransformComponent_43,b=b._compMap.EditorMetaComponent_44;c&&(a+=n.rotation);!x._platform.getKeyboard().isDown(i.Shift)&&0!=this._system.logic.snapRotation&&d&&(a=Math.round(a/
this._system.logic.snapRotation)*this._system.logic.snapRotation);null!=n&&(n.rotation=a);null!=e&&(e.forceUpdate=!0,e.setRotation(3.141592653589793*a/180));null!=h&&(h.forceUpdate=!0);null!=b&&b.updateProperty("transform","rotation",this._system.roundValues?Math.round(a):a)},__class__:il});var jl=function(a){this.zoomSpeed=0.1;this.moveSpeedMultiplicator=5;this.moveSpeed=50;Hd.call(this,a)};f["stolo.ensys.editor.tools.RendererTransformTool"]=jl;jl.__name__=["stolo","ensys","editor","tools","RendererTransformTool"];
jl.__super__=Hd;jl.prototype=l(Hd.prototype,{start:function(){Hd.prototype.start.call(this);this._state=this._system.rendererState;x._platform.getMouse().set_cursor(Nb.Button)},stop:function(){this._state.save();this._start=null;x._platform.getMouse().set_cursor(Nb.Default);Hd.prototype.stop.call(this)},onDragStart:function(){this._start=new jb(this._system.renderer.displacement.x,this._system.renderer.displacement.y)},onDrag:function(a){null!=this._start&&this._state.setRendererPosition(this._start.x+
this.getRendererInverseScale()*(a.x-a.xo),this._start.y+this.getRendererInverseScale()*(a.y-a.yo))},onDragStop:function(){this._start=null;this._state.save()},onKeyRelease:function(a){var b=this.moveSpeed*this.getRendererInverseScale();x._platform.getKeyboard().isDown(i.Shift)&&(b*=this.moveSpeedMultiplicator);a==i.PageUp&&this._state.setRendererScale(this.zoomSpeed);a==i.PageDown&&this._state.setRendererScale(-this.zoomSpeed);a==i.Left?this._state.setRendererPosition(b,0,!0):a==i.Right?this._state.setRendererPosition(-b,
0,!0):a==i.Up?this._state.setRendererPosition(0,b,!0):a==i.Down&&this._state.setRendererPosition(0,-b,!0)},onWheel:function(a){var b=this._system.renderer.displacement.x,c=this._system.renderer.displacement.y,d=x._platform.getMouse().get_x()*this.getRendererInverseScale(),e=x._platform.getMouse().get_y()*this.getRendererInverseScale();this._state.setRendererScale(a/100);var a=x._platform.getMouse().get_x()*this.getRendererInverseScale(),h=x._platform.getMouse().get_y()*this.getRendererInverseScale();
this._state.setRendererPosition(b+(a-d),c+(h-e))},__class__:jl});var vf=function(){};f["stolo.ensys.helpers.ActorHelper"]=vf;vf.__name__=["stolo","ensys","helpers","ActorHelper"];vf.getDistanceX=function(a,b,c){null==c&&(c=!0);a=a._compMap.TransformComponent_43.position.x-b._compMap.TransformComponent_43.position.x;return c?Math.abs(a):a};vf.getLinearDistance=function(a,b){var c=a._compMap.TransformComponent_43,d=b._compMap.TransformComponent_43;return Math.abs(c.position.x-d.position.x)+Math.abs(c.position.y-
d.position.y)};vf.getDirection=function(a,b){return a._compMap.TransformComponent_43.position.x<b._compMap.TransformComponent_43.position.x?1:-1};var T=function(){};f["stolo.ensys.helpers.ComponentHelper"]=T;T.__name__=["stolo","ensys","helpers","ComponentHelper"];T.getSystemEntity=function(a){return a.parent.parent.parent};T.inEditor=function(){if(-1!=T.isInEditor)return 1==T.isInEditor;T.isInEditor=null!=x.root._internal_getFromChildren("BaseGameSystem_20",Uc)?1:0;return T.inEditor()};var Tc=function(){};
f["stolo.ensys.helpers.SystemHelper"]=Tc;Tc.__name__=["stolo","ensys","helpers","SystemHelper"];Tc.init=function(a,b,c){null==c&&(c=!0);M.reset();Tc.registerComponents(b,c);Tc.loadTemplates(a)};Tc.registerComponents=function(a,b){null==b&&(b=!0);if(!Tc.defaultComponentsRegistered&&b){for(var c=ln.ComponentMap,d=c.keys();d.hasNext();){var e=d.next();M.registerComponent(e,c.get(e))}Tc.defaultComponentsRegistered=!0}if(null!=a)for(c=a.keys();c.hasNext();)d=c.next(),M.registerComponent(d,a.get(d))};Tc.loadTemplates=
function(a){for(var b=C.getPack(a).get_manifest().iterator();b.hasNext();){var c=b.next();if(-1<c.name.indexOf(".json")){var d=C.getJSON(c.name,a,!0,!1);if(null==d)throw"Invalid actors file '"+c.name+"'";Tc.addTemplates(d)}}};Tc.addTemplates=function(a){for(var b=0;b<a.length;){var c=a[b];++b;Tc.addTemplate(c)}};Tc.addTemplate=function(a){M.addTemplate(a)};var Dk=function(a,b,c,d,e,h,n,g){null==g&&(g=!1);if(null==a)throw"No physics system received";this._system=a;this._event=b;this._mode=c;this._type1=
d;this._type2=e;this._entity=h;a.addContactListener(b,c,d,e,h,n,g)};f["stolo.ensys.physics.Contact"]=Dk;Dk.__name__=["stolo","ensys","physics","Contact"];Dk.__interfaces__=[cc];Dk.prototype={dispose:function(){null!=this._system&&(this._system.removeContactListener(this._event,this._mode,this._type1,this._type2,this._entity),this._entity=this._type2=this._type1=this._mode=this._event=this._system=null)},__class__:Dk};var kl=function(){};f["stolo.ensys.physics.ContactArbiter"]=kl;kl.__name__=["stolo",
"ensys","physics","ContactArbiter"];kl.__interfaces__=[cc];kl.prototype={init:function(a,b){this._arbiter=a;var c;b.zpp_inner.validate();c=b.zpp_inner.x;b.zpp_inner.validate();if(c=c==b.zpp_inner.y)b.zpp_inner.validate(),c=0==b.zpp_inner.x;this.angle=c?0:Math.atan2(function(){b.zpp_inner.validate();return b.zpp_inner.y}(this),function(){b.zpp_inner.validate();return b.zpp_inner.x}(this));b.zpp_inner.validate();this.normaly=b.zpp_inner.y},dispose:function(){this._arbiter=null},disableFriction:function(){this._arbiter.set_dynamicFriction(0);
this._arbiter.set_rollingFriction(0);this._arbiter.set_staticFriction(0)},__class__:kl};var g=function(){};f["zpp_nape.util.ZPP_Flags"]=g;g.__name__=["zpp_nape","util","ZPP_Flags"];var ea=function(){};f["stolo.ensys.physics.ContactEvent"]=ea;ea.__name__=["stolo","ensys","physics","ContactEvent"];var ll=function(a,b){null==b&&(b=!1);this._alwaysInverseNormal=this._acceptOnce=!1;this._contactArbiter=new kl;this._entities=new Bb;this._alwaysInverseNormal=a;this._acceptOnce=b};f["stolo.ensys.physics.ContactListenerHandler"]=
ll;ll.__name__=["stolo","ensys","physics","ContactListenerHandler"];ll.__interfaces__=[cc];ll.prototype={dispose:function(){this._entities=null;this._contactArbiter.dispose();this._contactArbiter=null},addEntity:function(a,b){this._entities.set(a,b)},removeEntity:function(a){this._entities.remove(a)},onPreContact:function(a){var b=a.zpp_inner.int1.outer_i.get_userData().actor,c=a.zpp_inner.int2.outer_i.get_userData().actor,d=null,e=a.zpp_inner.pre_arbiter.wrapper().get_collisionArbiter(),h=!0;if(null!=
e&&(d=this.fixNormal(a.zpp_inner.int1.outer_i.get_castBody(),a.zpp_inner.int2.outer_i.get_castBody(),function(){null==e.zpp_inner.colarb.wrap_normal&&e.zpp_inner.colarb.getnormal();return e.zpp_inner.colarb.wrap_normal}(this)),this._contactArbiter.init(e,d),d=this._contactArbiter,h=e.get_state(),null==g.PreFlag_ACCEPT&&(g.internal=!0,g.PreFlag_ACCEPT=new cb,g.internal=!1),!(h=h==g.PreFlag_ACCEPT)))h=e.get_state(),null==g.PreFlag_ACCEPT_ONCE&&(g.internal=!0,g.PreFlag_ACCEPT_ONCE=new cb,g.internal=
!1),h=h==g.PreFlag_ACCEPT_ONCE;var a=this.getCallback(b),n=this.getCallback(c),f=!0,i=!0;null!=a&&null!=c&&(f=a(c,d));null!=n&&null!=b&&(i=n(b,d));if(h&&f&&i){if(this._acceptOnce)return null==g.PreFlag_ACCEPT_ONCE&&(g.internal=!0,g.PreFlag_ACCEPT_ONCE=new cb,g.internal=!1),g.PreFlag_ACCEPT_ONCE;null==g.PreFlag_ACCEPT&&(g.internal=!0,g.PreFlag_ACCEPT=new cb,g.internal=!1);return g.PreFlag_ACCEPT}if(this._acceptOnce)return null==g.PreFlag_IGNORE_ONCE&&(g.internal=!0,g.PreFlag_IGNORE_ONCE=new cb,g.internal=
!1),g.PreFlag_IGNORE_ONCE;null==g.PreFlag_IGNORE&&(g.internal=!0,g.PreFlag_IGNORE=new cb,g.internal=!1);return g.PreFlag_IGNORE},onOngoingContact:function(a){var b=a.zpp_inner.int1.outer_i.get_userData().actor,a=a.zpp_inner.int2.outer_i.get_userData().actor,c=this.getCallback(b),d=this.getCallback(a);null!=c&&null!=a&&c(a,null);null!=d&&null!=b&&d(b,null)},onContactBegin:function(a){var b=a.zpp_inner.int1.outer_i.get_userData().actor,c=a.zpp_inner.int2.outer_i.get_userData().actor,d=this.getCallback(b),
e=this.getCallback(c),h=null,n=a.zpp_inner.wrap_arbiters.at(0).get_collisionArbiter();if(null!=n){h=n.get_state();null==g.PreFlag_IGNORE&&(g.internal=!0,g.PreFlag_IGNORE=new cb,g.internal=!1);if(h==g.PreFlag_IGNORE)return;a=this.fixNormal(a.zpp_inner.int1.outer_i.get_castBody(),a.zpp_inner.int2.outer_i.get_castBody(),function(){null==n.zpp_inner.colarb.wrap_normal&&n.zpp_inner.colarb.getnormal();return n.zpp_inner.colarb.wrap_normal}(this));this._contactArbiter.init(n,a);h=this._contactArbiter}null!=
d&&null!=c&&d(c,h);null!=e&&null!=b&&e(b,h)},onContactEnd:function(a){var b=a.zpp_inner.int1.outer_i.get_userData().actor,a=a.zpp_inner.int2.outer_i.get_userData().actor,c=this.getCallback(b),d=this.getCallback(a);null!=c&&null!=a&&c(a,null);null!=d&&null!=b&&d(b,null)},getCallback:function(a){return null==a?null:this._entities.h[a.__id__]},fixNormal:function(a,b,c){var d=da.get(function(){c.zpp_inner.validate();return c.zpp_inner.x}(this),function(){c.zpp_inner.validate();return c.zpp_inner.y}(this),
!0);if(this._alwaysInverseNormal||a.zpp_inner_i.id>b.zpp_inner_i.id)d.set_x(-1*function(){d.zpp_inner.validate();return d.zpp_inner.x}(this)),d.set_y(-1*function(){d.zpp_inner.validate();return d.zpp_inner.y}(this));return d},__class__:ll};var wa=function(){};f["stolo.ensys.physics.ContactMode"]=wa;wa.__name__=["stolo","ensys","physics","ContactMode"];var Na=function(){};f["stolo.ensys.physics.ContactType"]=Na;Na.__name__=["stolo","ensys","physics","ContactType"];var Bd=function(){};f["stolo.ensys.physics.Materials"]=
Bd;Bd.__name__=["stolo","ensys","physics","Materials"];Bd.get=function(a){return Bd._materialMap.exists(a)?Bd._materialMap.get(a):w.getProperty(Bd,a)};Bd.add=function(a,b){Bd._materialMap.set(a,b);return!0};var kn=function(){};f["stolo.ensys.physics.PhysicsFactory"]=kn;kn.__name__=["stolo","ensys","physics","PhysicsFactory"];kn.createShape=function(a,b,c){var d=null,e;e=0<a.x||0>a.x?a.x:0;var h;h=0<a.y||0>a.y?a.y:0;if("box"==a.type||null==a.type){null==a.width&&(a.width=0);null==a.height&&(a.height=
0);0>=a.width&&null!=b&&(a.width=b.getNaturalWidth());0>=a.height&&null!=b&&(a.height=b.getNaturalHeight());var d=a.width,n=a.height,g=a.padding,f=a.docking;if(null!=b&&null!=f){var i=0.5*b.getNaturalWidth(),j=0.5*b.getNaturalHeight();0!=f.left&&0!=f.right?d=(f.left+f.right)*i:0!=f.left?e=-i+0.5*d:0!=f.right&&(e=i-0.5*d);0!=f.top&&0!=f.bottom?n=(f.top+f.bottom)*j:0!=f.top?h=-j+0.5*n:0!=f.bottom&&(h=j-0.5*n);null!=b.align&&(-1<b.align.indexOf("left")&&(e-=-i),-1<b.align.indexOf("top")&&(h-=-j))}null!=
g&&(0!=g.left&&(d-=g.left,e+=0.5*g.left),0!=g.right&&(d-=g.right,e-=0.5*g.right),0!=g.top&&(n-=g.top,h+=0.5*g.top),0!=g.bottom&&(n-=g.bottom,h-=0.5*g.bottom));0>=d&&(d=100);0>=n&&(n=100);a.finalw=d;a.finalh=n;d=new od(od.box(d,n,!0))}else if("circle"==a.type)d=new bk(a.radius);else if("regular"==a.type)d=new od(od.regular(a.xRadius,a.yRadius,a.edge));else if("polygon"==a.type){b=[];d=a.points;for(n=0;n<d.length;)g=d[n],++n,b.push(da.weak(g.x,g.y));d=new od(b)}a.finalx=e;a.finaly=h;if(null==d)return null;
(0<a.rotation||0>a.rotation)&&d.rotate(Kb.radians(a.rotation));b=null!=a.filter?a.filter:td.defaultShapeFilter;if(null!=b){n=0;for(g=w.fields(b);n<g.length;)switch(f=g[n],++n,f){case "collisionMask":d.zpp_inner.filter.wrapper().set_collisionMask(w.field(b,f));break;case "collisionGroup":d.zpp_inner.filter.wrapper().set_collisionGroup(w.field(b,f));break;case "sensorGroup":d.zpp_inner.filter.wrapper().set_sensorGroup(w.field(b,f));break;case "sensorMask":d.zpp_inner.filter.wrapper().set_sensorMask(w.field(b,
f));break;case "fluidGroup":d.zpp_inner.filter.wrapper().set_fluidGroup(w.field(b,f));break;case "fluidMask":d.zpp_inner.filter.wrapper().set_fluidMask(w.field(b,f));break;default:null}}null!=a.material&&(b=Bd.get(a.material),null!=b?(d.zpp_inner.immutable_midstep("Shape::material"),d.zpp_inner.setMaterial(b.zpp_inner),d.zpp_inner.material.wrapper()):null);null!=a.fluid&&(d.zpp_inner.immutable_midstep("Shape::fluidEnabled"),d.zpp_inner.fluidEnabled=!0,null==d.zpp_inner.fluidProperties&&d.set_fluidProperties(new Bf),
d.zpp_inner.wake(),d.zpp_inner.fluidEnabled,null!=a.fluid.density&&(d.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==d.zpp_inner.fluidProperties&&d.zpp_inner.setFluid((new Bf).zpp_inner),d.zpp_inner.fluidProperties.wrapper().set_density(a.fluid.density)),null!=a.fluid.viscosity&&(d.zpp_inner.immutable_midstep("Shape::fluidProperties"),null==d.zpp_inner.fluidProperties&&d.zpp_inner.setFluid((new Bf).zpp_inner),d.zpp_inner.fluidProperties.wrapper().set_viscosity(a.fluid.viscosity)));null!=
c?d.set_localCOM(da.weak(c.x+e,c.y+h)):d.set_localCOM(da.get(e,h,!0));d.set_sensorEnabled(a.sensor);return d};var Wd=function(a,b){null==b&&(b=-1);this.color=16776960;this.size=1;A.call(this);-1!=b&&(this.color=b);null!=a&&this.drawShape(a)};f["stolo.ensys.physics.debug.PhysicsDebugSprite"]=Wd;Wd.__name__=["stolo","ensys","physics","debug","PhysicsDebugSprite"];Wd.__super__=A;Wd.prototype=l(A.prototype,{draw:function(a){null!=this.texture&&a.drawTexture(this.texture,0,0)},drawShape:function(a){if("box"==
a.type||null==a.type){var b=Math.round(a.finalw),c=Math.round(a.finalh);if(b>Wd.maxSize||c>Wd.maxSize)b=Math.min(Wd.maxSize,a.finalw),c=Math.min(Wd.maxSize,a.finalh);this.texture=x._platform.getRenderer().createTexture(b,c);var d=this.texture.get_graphics();d.fillRect(this.color,0,0,b,this.size);d.fillRect(this.color,0,c-this.size,b,this.size);d.fillRect(this.color,0,0,this.size,c);d.fillRect(this.color,b-this.size,0,this.size,c);d.translate(0.5*b,0.5*c);d.fillRect(this.color,-10,0.5*-this.size,20,
this.size);d.fillRect(this.color,0.5*-this.size,-10,this.size,20);this.setAnchor(0.5*b,0.5*c)}else if("circle"==a.type){b=a.radius;this.texture=x._platform.getRenderer().createTexture(Math.ceil(2*b+2*this.size),Math.ceil(2*b+2*this.size));c=this.texture.get_graphics();for(d=0;360>d;){var e=d++;c.fillRect(this.color,this.size+b+Math.cos(e)*b,this.size+b+Math.sin(e)*b,this.size,this.size)}c.translate(this.size+b,this.size+b);c.fillRect(this.color,0,0,b,this.size);this.setAnchor(b,b)}else if("polygon"==
a.type){var c=b=9999999,d=e=-9999999,h=0,n;for(n=ga.__cast(a.points,Array);h<n.length;){var g=n[h];++h;b=Math.min(b,g.x);c=Math.min(c,g.y);e=Math.max(e,g.x);d=Math.max(d,g.y)}b=e-b;c=d-c;this.texture=x._platform.getRenderer().createTexture(b,c);d=this.texture.get_graphics();e=a.points[0];d.translate(-e.x,-e.y);h=0;for(n=a.points.length;h<n;){var f=h++,g=a.points[f],i;i=f==a.points.length-1?e:a.points[f+1];var f=i.x-g.x,j=i.y-g.y;i=Math.sqrt(Math.pow(f,2)+Math.pow(j,2));f=180*Math.atan2(j,f)/Math.PI;
d.save();d.translate(g.x,g.y);d.rotate(f);d.fillRect(this.color,0,0,i,this.size);d.restore()}this.setAnchor(0.5*b,0.5*c)}this.setXY(a.finalx,a.finaly);(0<a.rotation||0>a.rotation)&&this.setRotation(a.rotation)},getNaturalWidth:function(){return null!=this.texture?this.texture.get_width():0},getNaturalHeight:function(){return null!=this.texture?this.texture.get_height():0},__class__:Wd});var Ve=function(){this._actorsToRemove=[];this._actorsById=new N;this._actorsByTags=new N;this._actorsByTemplate=
new N;this._actorsByComponents=new N;this._actors=[];this.onActorRemoved=new O;this.onActorAdded=new O;this.onActorSpawn=new Nc;k.call(this)};f["stolo.ensys.system.ActorSystem"]=Ve;Ve.__name__=["stolo","ensys","system","ActorSystem"];Ve.__super__=k;Ve.prototype=l(k.prototype,{get_name:function(){return"ActorSystem_41"},onAdded:function(){this._renderer=this.owner._compMap.RendererSystem_45;for(var a=M.getComponentsIds(),b=0;b<a.length;){var c=a[b];++b;this._actorsByComponents.set(c,[])}a=M.getTemplateIds();
for(b=0;b<a.length;)c=a[b],++b,this._actorsByTemplate.set(c,[])},onRemoved:function(){k.prototype.onRemoved.call(this);this._actorsToRemove=this._actorsById=this._actorsByTags=this._actorsByTemplate=this._actorsByComponents=this._renderer=null},onUpdate:function(){for(;0<this._actorsToRemove.length;)this._removeActor(this._actorsToRemove.pop())},spawn:function(a,b){var c=M.create(a);if(null==c)return null;this.onActorSpawn.emit(c,a);this.addActor(c);if(null!=b){var d=c._compMap.Sprite_5;if(null!=
d)d.onInitComplete.connect(b).once();else b()}return c},spawnTemplate:function(a){a=M.fromTemplate(a);null!=a&&(this.onActorSpawn.emit(a,null),this.addActor(a));return a},addActor:function(a){this.registerActor(a);this._renderer.addActor(a);null!=Ve.addedMethod&&this.callMethodOn(a,Ve.addedMethod);this.onActorAdded.emit(a);return a},callMethodOn:function(a,b){for(var c=a.firstComponent,d;null!=c;)d=w.getProperty(c,b),null!=d&&d.apply(c,null),c=c.next;return a},removeActor:function(a){if(null==this._actorsToRemove)return null;
this._actorsToRemove.push(a);return a},_removeActor:function(a){this.unregisterActor(a);this.onActorRemoved.emit(a);this._renderer.removeActor(a);a.dispose();return a},getAll:function(){return this._actors},getActorsByComponent:function(a){return this._actorsByComponents.get(ja.getClassName(a))},getActorsByTemplate:function(a){return this._actorsByTemplate.get(a)},getActorsByTags:function(a){return this._actorsByTags.get(a)},getActorById:function(a){return this._actorsById.get(a)},updateRegisteredActor:function(a){this.unregisterActor(a);
this.registerActor(a)},registerActor:function(a){this._actors.push(a);for(var b=a.firstComponent;null!=b;){var c=ja.getClassName(ja.getClass(b)),d=this._actorsByComponents.get(c);null==d&&(d=[],this._actorsByComponents.set(c,d));d.push(a);b=b.next}b=a._compMap.TemplateComponent_40;if(null!=b){c=this._actorsByTemplate.get(b.key);null==c&&(c=[],this._actorsByTemplate.set(b.key,c));c.push(a);c=0;for(d=b.tags;c<d.length;){var e=d[c];++c;var h=this._actorsByTags.get(e);null==h&&(h=[],this._actorsByTags.set(e,
h));h.push(a)}""!=b.uuid&&null!=b.uuid&&this._actorsById.set(b.uuid,a)}},unregisterActor:function(a){Q.remove(this._actors,a);for(var b=[this._actorsByComponents,this._actorsByTemplate,this._actorsByTags],c=0;c<b.length;){var d=b[c];++c;for(d=d.iterator();d.hasNext();){var e=d.next();Q.remove(e,a)}}a=a._compMap.TemplateComponent_40;null!=a&&this._actorsById.remove(a.uuid)},__class__:Ve});var $g=function(a,b){this._actorMap=new Bb;this.enable=!1;k.call(this);this._dimensions=b;this._renderer=a};f["stolo.ensys.system.CullingSystem"]=
$g;$g.__name__=["stolo","ensys","system","CullingSystem"];$g.__super__=k;$g.prototype=l(k.prototype,{get_name:function(){return"CullingSystem_42"},onAdded:function(){null==this._dimensions&&(this._dimensions=this._renderer.dimensions)},addComponent:function(a,b){if(this.enable){var c=this._actorMap.h[b.__id__];if(null==c){var c=b._compMap.Sprite_5,d=this._renderer.getLayer(null==c?"default":c.layer);null==d&&(d=this._renderer.getLayer("default"));c={actor:b,position:b._compMap.TransformComponent_43.position,
display:c,layer:d,components:[],culling:!0,start:!0};this._actorMap.set(b,c)}c.components.push(a)}else a.enableCulling(!1)},removeComponent:function(a,b){var c=this._actorMap.h[b.__id__];if(null!=c){for(var c=c.components,d=0,e=c.length;d<e;){var h=d++;if(a==c[h]){c.splice(h,1);break}}0==c.length&&this._actorMap.remove(b)}},onUpdate:function(){if(this.enable){var a;a=null==this._camera?this._dimensions.width/2-100:this._camera.x-100;for(var b=a+this._dimensions.width+100,c=0,d=0,c=!1,e=this._actorMap.iterator();e.hasNext();){var h=
e.next(),d=null==h.display?0:0.5*h.display.getNaturalWidth(),c=h.position.x+h.layer.x._value+(null==this._camera?this._dimensions.width/2:this._camera.x),c=c+d<a||c-d>b;if(h.start||c!=h.culling){h.start=!1;h.culling=c;h=h.components;for(d=0;d<h.length;){var g=h[d];++d;g.enableCulling(c)}}}}},__class__:$g});var pg=function(){this.onComplete=new ka};f["stolo.ensys.system.PhysicDebugSystem"]=pg;pg.__name__=["stolo","ensys","system","PhysicDebugSystem"];pg.__super__=k;pg.prototype=l(k.prototype,{get_name:function(){return"PhysicDebugSystem_35"},
onAdded:function(){this.initActors(this.owner._compMap.ActorSystem_41)},onStart:function(){this._renderer=this.owner._compMap.RendererSystem_45;this._space=this.owner._compMap.PhysicSystem_36.getSpace();null==this.dimensions&&(this.dimensions=this._renderer.dimensions);k.prototype.onStart.call(this);this.onComplete.emit()},onUpdate:function(){},dispose:function(){k.prototype.dispose.call(this)},initActors:function(a){a.onActorSpawn.connect(m(this,this.onActorSpawn))},onActorSpawn:function(a){null!=
a&&pg.enabled&&null!=a._compMap.PhysicsComponent_34&&null==a._compMap.PhysicsDebugComponent_37&&a.add(new vh)},__class__:pg});var Rd=function(){this._bodiesToRemove=[];this._bodiesToAdd=[];this._contactsListenerHandler=new N;this._contactsListener=new N;this._contactTypes=new N;this._speed=1;this._fixedDt=0.025;this._currentDt=0;this._enabled=!0;this.alwaysInverseNormal=!1;this.stepMode=1;this.onPhysicUpdate=new O;k.call(this);this._contactTypes.set("ANY_BODY",Eb.ANY_BODY)};f["stolo.ensys.system.PhysicSystem"]=
Rd;Rd.__name__=["stolo","ensys","system","PhysicSystem"];Rd.getListenerId=function(a,b,c,d){return y.string(a)+"-"+y.string(b)+"-"+Rd.getOptionId(c)+"-"+Rd.getOptionId(d)};Rd.getOptionId=function(a){return P.is(a,K.TClass(Array))?a.join(","):a};Rd.__super__=k;Rd.prototype=l(k.prototype,{get_name:function(){return"PhysicSystem_36"},getSpace:function(){return this._space},setGravity:function(a,b){this._space.set_gravity(da.get(a,b,!0));return this._space.get_gravity()},setFixedDt:function(a){this._fixedDt=
a},onAdded:function(){this._space=new ym(da.get(0,900,!0));this._speedAdjuster=this.owner._compMap.SpeedAdjuster_57},onRemoved:function(){this._space.clear();if(null!=this._contactsListenerHandler)for(var a=this._contactsListenerHandler.iterator();a.hasNext();)a.next().dispose();this._speedAdjuster=this._contactTypes=this._contactsListener=this._bodiesToRemove=this._bodiesToAdd=this._space=null;k.prototype.onRemoved.call(this)},onUpdate:function(a){if(this._enabled){null!=this._speedAdjuster&&(this._speed=
this._speedAdjuster.scale._value);if(0>=this._speed)return;switch(this.stepMode){case 1:this._fixedDiff=a/(this._fixedDt*this._speed);this._step=1.1<this._fixedDiff?(this._fixedDt*this._fixedDiff+0.008)*this._speed:this._fixedDt*this._speed;0.009>=this._step&&(this._step=0.009);0.06<this._step&&(this._step=0.06);this._space.step(this._step);break;case 2:for(this._currentDt+=a;this._currentDt>=this._fixedDt;)this.onPhysicUpdate.emit(this._fixedDt),this._space.step(this._fixedDt),this._currentDt-=this._fixedDt;
break;case 0:this._space.step(this._fixedDt)}this.onPhysicUpdate.emit(a)}for(;0<this._bodiesToAdd.length;)this._space.zpp_inner.wrap_bodies.add(this._bodiesToAdd.pop());for(;0<this._bodiesToRemove.length;)this._space.zpp_inner.wrap_bodies.remove(this._bodiesToRemove.pop())},enable:function(a){this._enabled=a},addBody:function(a){null!=this._space&&null!=a&&this._bodiesToAdd.push(a)},removeBody:function(a){null!=this._space&&null!=a&&this._bodiesToRemove.push(a)},addContactListener:function(a,b,c,
d,e,h,g){null==g&&(g=!1);if(null!=this._space){var f=this.getCbType(c),i=this.getCbType(d),c=Rd.getListenerId(a,b,c,d);if(null==this._contactsListener.get(c)){g=new ll(this.alwaysInverseNormal,g);if(a==ea.PRELISTENER)a=new Wj(b,f,i,m(g,g.onPreContact));else if(a==ea.ONGOING)a=new dg(a,b,f,i,m(g,g.onOngoingContact));else if(a==ea.END)a=new dg(a,b,f,i,m(g,g.onContactEnd));else if(a==ea.BEGIN)a=new dg(a,b,f,i,m(g,g.onContactBegin));else throw"PhysicSystem: Contact listener unsupported: "+y.string(a);
this._space.zpp_inner.wrap_listeners.add(a);this._contactsListener.set(c,a);this._contactsListenerHandler.set(c,g)}this._contactsListenerHandler.get(c).addEntity(e,h)}},removeContactListener:function(a,b,c,d,e){null!=this._space&&(this.getCbType(c),this.getCbType(d),a=this._contactsListenerHandler.get(Rd.getListenerId(a,b,c,d)),null!=a&&a.removeEntity(e))},getCbType:function(a){if(null==this._space)return null;if(P.is(a,K.TClass(Array))){if(1==a.length)return this.getCbType(a[0]);var b=a.join(","),
c=this._contactTypes.get(b);if(null==c){for(var c=new fg,d=0;d<a.length;){var e=a[d];++d;e=this.getCbType(e);c.including(e)}this._contactTypes.set(b,c)}return c}if(P.is(a,K.TClass(String)))return a=a.toUpperCase(),b=this._contactTypes.get(a),null==b&&(b=new We,this._contactTypes.set(a,b)),b;throw"Unknown kind of contact type "+y.string(a);},__class__:Rd});var Zg=function(a,b){null==b&&(b=!1);this._layers=new N;this._container=new r;this.onLayerAdded=new O;this.scale=1;this.displacement=new jb;this.dimensions=
null!=a?a:new id(0,0,x._platform.getStage().get_width(),x._platform.getStage().get_height());this.dimensionsScaled=this.dimensions.clone();this._useScissor=b;k.call(this)};f["stolo.ensys.system.RendererSystem"]=Zg;Zg.__name__=["stolo","ensys","system","RendererSystem"];Zg.__super__=k;Zg.prototype=l(k.prototype,{get_name:function(){return"RendererSystem_45"},onAdded:function(){this._sprite=new Da;this._useScissor&&(this._sprite.scissor=new id(0,0,this.dimensions.width,this.dimensions.height));this._sprite.setXY(this.dimensions.x,
this.dimensions.y);this._container.add(this._sprite);this.owner.addChild(this._container)},getContainer:function(){return this._container},getSprite:function(){return this._sprite},addLayer:function(a){var b=a.name,c=this.getLayer(b);null==c&&(c=xa.startsWith(b,"grid")&&4<b.length?new Gk(a,Math.round(this.dimensions.width),Math.round(this.dimensions.height),y.parseInt(Q.substr(b,4,null))):new Ef(a),this._layers.set(b,c),this._sprite.addChild((new r).add(c)),this.onLayerAdded.emit(c),this.move(this.displacement.x,
this.displacement.y));return c},getLayer:function(a){return this._layers.get(a)},getLayers:function(){for(var a=[],b=this._layers.iterator();b.hasNext();){var c=b.next();a.push(c)}return a},addActor:function(a){this.getActorLayer(a).addChild(a)},removeActor:function(a){this.getActorLayer(a).removeChild(a)},getActorLayer:function(a,b){null==b&&(b=!0);var c=a._compMap.Sprite_5,c=null!=c&&null!=c.layer?c.layer:"default",d=this.getLayer(c);if(null==d&&b)throw"Layer not found:"+c;return d},move:function(a,
b){this.displacement.set(a,b);for(var c=this._layers.iterator();c.hasNext();)c.next().move(a,b)},setScale:function(a){this.scale=a;this.dimensionsScaled.width=this.dimensions.width/a;this.dimensionsScaled.height=this.dimensions.height/a;for(var b=this._layers.iterator();b.hasNext();){var c=b.next();c.setScale(Math.min(1,a/c.parallax.y))}},__class__:Zg});var ah=function(){k.call(this)};f["stolo.ensys.system.SoundSystem"]=ah;ah.__name__=["stolo","ensys","system","SoundSystem"];ah.__super__=k;ah.prototype=
l(k.prototype,{get_name:function(){return"SoundSystem_19"},play:function(a,b,c,d,e,h,g){null==h&&(h=!1);null==e&&(e=!1);null==d&&(d=1);if(null==a||""==a)return null;if(null!=b){if(null==this._targetTransform)return null;b=b._compMap.TransformComponent_43;if(null==b||64E4<Math.pow(b.position.x-this._targetTransform.position.x,2)+Math.pow(b.position.y-this._targetTransform.position.y,2))return null}return p.play(a,c,d,e,h,g)},__class__:ah});var W=function(){};f["stolo.managers.AchievementManager"]=
W;W.__name__=["stolo","managers","AchievementManager"];W.parse=function(a,b){null==b&&(b=!0);for(var c,d=0;d<a.length;)c=a[d],++d,c=W.createAchievement(c),b&&W.add(c);W.load()};W.save=function(){for(var a=new N,b=W._achievementMapByName.iterator();b.hasNext();){var c=b.next(),d=c.getData();a.set(c.name,d)}fa.set("achievements",a)};W.load=function(){var a=fa.get("achievements"),b;if(null!=a)for(var c=W._achievementMapByName.iterator();c.hasNext();){var d=c.next();b=a.get(d.name);null!=b&&d.setData(b)}};
W.getAchievementByName=function(a){return W._achievementMapByName.get(a)};W.add=function(a,b){null==b&&(b=!1);(null==W._achievementMapById.get(a.id)||b)&&W._achievementMapById.set(a.id,a);(null==W._achievementMapByName.get(a.name)||b)&&W._achievementMapByName.set(a.name,a);W._disposer.add(a.onComplete.connect(W.showPopup).once())};W.registerPopup=function(a){W._popup=a;x.root.addChild((new r).add(W._popup))};W.showPopup=function(a){null!=W._popup&&W._popup.show(a)};W.createAchievement=function(a){var b=
null;if(null!=a.type)switch(a.type){case "progress":b=new fk(W._idIncrement++,a.name,a.description,W.parseState(a.state),null==a.goal?-1:a.goal);break;case "group":for(var b=[],c=a.achievements,d=0;d<c.length;){var e=c[d];++d;b.push(W.createAchievement(e))}b=new ek(W._idIncrement++,a.name,a.description,W.parseState(a.state),b)}else b=new Yb(W._idIncrement++,a.name,a.description,W.parseState(a.state));return b};W.parseState=function(a){var b=Ma.Hidden;switch(a){case "ready":b=Ma.Ready;break;case "fail":b=
Ma.Fail;break;case "complete":b=Ma.Complete}return b};var C=function(){};f["stolo.managers.AssetManager"]=C;C.__name__=["stolo","managers","AssetManager"];C.loadPacks=function(a,b,c){null==c&&(c=!0);for(var d=[],e=0;e<a.length;){var h=a[e];++e;var g=null;P.is(h,K.TObject)?null!=h.files&&(g=C.createDynamicPack(h.name,h.files,function(){},null!=h.useFileAsEntryName?h.useFileAsEntryName:!1)):P.is(h,K.TClass(String))&&(g=C.loadPack(h,function(){},c));null!=g&&d.push(g)}if(0==d.length)return null!=b&&
b(),null;a=new pi(d);if(null!=b)a.success.connect(function(){null!=b&&b()}).once();return a};C.getPack=function(a,b){null==b&&(b=!0);a=C.validatePackName(a);if(!C._cachedPacks.exists(a)){if(b)throw"Assetpack "+a+" is not loaded: use AssetManager.loadPack";return null}return C._cachedPacks.get(a)};C.validatePackName=function(a){C._replacedPacks.exists(a)&&(a=C._replacedPacks.get(a));return a};C.loadPack=function(a,b,c,d,e){null==c&&(c=!0);null==d&&(d=C.locale);a=C.validatePackName(a);if(C._cachedPacks.exists(a))return b(C._cachedPacks.get(a)),
null;if(C._loadingPacks.exists(a))return C._loadingPacks.get(a).callbacks.push(b),C._loadingPacks.get(a).loader;if(null==e){if(!va.exists(a)){if(-1<a.indexOf("/"))return C.createSubPack(a,b);if(c)throw"Pack not found: '"+a+"'";return null}e=null==d?va.fromAssets(a):va.fromAssetsLocalized(a,d)}C.onManifestInit.emit(a,e);c=x._platform.loadAssetPack(e);d=[];d.push(b);b={name:a,manifest:e,loader:c,callbacks:d};C._loadingPacks.set(a,b);C._loadingPacksDict.set(e,b);c.get(C.onAssetsLoaded);return c};C.createDynamicPack=
function(a,b,c,d){null==d&&(d=!1);var e=new va;e.set_localBase("assets");for(var h,g=0,f=0;f<b.length;){var i=b[f];++f;h=i.split("/");h=va.fromAssets(h[0]);if(null==h)throw"Unable to create the Manifest for the file "+i;for(var j=Q.iter(h._entries);j.hasNext();)if(h=j.next(),-1!=h.url.indexOf(i)){g++;i=d?i:h.name.substring(h.name.lastIndexOf("/")+1,h.name.length);e.add(i,h.url,h.bytes,h.format);break}}if(0==g)throw"The dynamic pack "+a+" is empty";return C.loadPack(a,c,!1,null,e)};C.createSubPack=
function(a,b){if(va.exists(a))throw"Manifest"+a+" already exist";var c=a.split("/"),d=a.substring(a.indexOf("/")+1,a.length),e=va.fromAssets(c[0]);if(null==e)throw"Unable to create the Manifest for the path "+a;c=new va;c.set_localBase("assets");for(var h=0,g=Q.iter(e._entries);g.hasNext();){var f=g.next();-1!=f.name.indexOf(d)&&(h++,e=f.name.substring(f.name.lastIndexOf("/")+1,f.name.length),c.add(e,f.url,f.bytes,f.format))}if(0==h)throw"The sub pack "+a+" is empty";return C.loadPack(a,b,!1,null,
c)};C.onAssetsLoaded=function(a){var b,c=a.get_manifest();b=C._loadingPacksDict.h[c.__id__];C._loadingPacks.remove(b.name);c=a.get_manifest();C._loadingPacksDict.remove(c);C._cachedPacks.set(b.name,a);c=0;for(b=b.callbacks;c<b.length;){var d=b[c];++c;d(a)}};C.disposePack=function(a){if(C._protectedPacks.exists(a))throw"AssetPack "+a+" was protected using AssetManager.protectPack(), Please make sure you do not attempt to dispose of it!";if(C._loadingPacks.exists(a))throw"Pack '"+a+"' is loading";if(!C._cachedPacks.exists(a))return null;
var b=C._cachedPacks.get(a);b.dispose();C._cachedPacks.remove(a);return b};C.getJSON=function(a,b,c,d){null==d&&(d=!0);null==c&&(c=!0);null!=a&&0>a.indexOf(".")&&(a+=".json");var e=C.getPack(b),h=null;if(d&&(h=b+"_"+a,C._jsonCache.exists(h)))return C._jsonCache.get(h);e=e.getFile(a,!1);if(null==e){if(c)throw"Cannot find JSON file '"+a+"' in pack "+b;return null}try{var g=JSON.parse(e.toString());d&&(C._jsonCache.set(h,g),g);e.dispose();return g}catch(f){throw"Error loading JSON '"+a+"', pack:"+b+
"\n\t"+y.string(f);}};C.getXML=function(a,b,c,d){null==d&&(d=!0);null==c&&(c=!0);null!=a&&0>a.indexOf(".")&&(a+=".xml");var e=C.getPack(b),h=null;if(d&&(h=b+"_"+a,C._xmlCache.exists(h)))return C._xmlCache.get(h);e=e.getFile(a,!1);if(null==e){if(c)throw"Cannot find XML file '"+a+"' in pack "+b;return null}try{var g=R.parse(e.toString());d&&(C._xmlCache.set(h,g),g);e.dispose();return g}catch(f){throw"Error loading XML '"+a+"', pack:"+b+"\n\t"+y.string(f);}};var Ta=function(){};f["stolo.managers.LocalizationManager"]=
Ta;Ta.__name__=["stolo","managers","LocalizationManager"];Ta.getLocale=function(a){return Ta.localesMap.get(a)};Ta.localize=function(a,b){var c=Ta.getLocale(a);null!=c?(c.text=Ta.applyTemplate(c._text,b),c.localized=!0):c={text:Ta.NOT_FOUND_PREFIX+a+Ta.NOT_FOUND_SUFFIX,localized:!1};return c};Ta.localizeTextField=function(a,b,c,d){c=Ta.localize(b,c);null!=c?(a.set_text(c.text),null!=c.fontStyle?S.applyFontStyle(a,c.fontStyle):a.set_font(d)):a.set_text(b);return c};Ta.applyTemplate=function(a,b){if(null==
b)return a;for(var c=0,d=w.fields(b);c<d.length;){var e=d[c];++c;a=xa.replace(a,"{{"+e+"}}",w.field(b,e))}return a};Ta.loadXML=function(a,b,c){null==c&&(c=!0);null==b&&(b="text");null==a&&(a="localization.xml");var d=C.getPack(b).getFile(a,!1);if(null==d)throw"Cannot find '"+a+"' in pack "+b;a=d.toString();a=Ta.processCharacters(a);a=R.parse(a);a=new dh(a.firstElement());a.hasNode.resolve("fonts")&&(b=a.node.resolve("fonts"),S.configureFromXML(b));if(a.hasNode.resolve("strings")){a.node.resolve("strings");
for(a=a.node.resolve("strings").nodes.resolve("string").iterator();a.hasNext();)b=a.next(),Ta.addLocaleFormatFromXML(b)}c&&d.dispose()};Ta.addLocaleFormatFromXML=function(a){var b=a.att.resolve("id"),c={_text:a.get_innerData()},d=null;a.has.resolve("fontStyle")&&(d=S.getFontStyle(a.att.resolve("fontStyle")));a.has.resolve("fontScale")&&(d=S.extendFontStyle(d,"fontScale",y.parseFloat(a.att.resolve("fontScale"))));a.has.resolve("offsetX")&&(d=S.extendFontStyle(d,"offsetX",y.parseFloat(a.att.resolve("offsetX"))));
a.has.resolve("offsetY")&&(d=S.extendFontStyle(d,"offsetY",y.parseFloat(a.att.resolve("offsetY"))));a.has.resolve("align")&&""!=a.att.resolve("align")&&(d=S.extendFontStyle(d,"align",a.att.resolve("align")));if(a.has.resolve("fontName")){var e=S.getFont(a.att.resolve("fontName"));null==e?null:(d=S.extendFontStyle(d,"fontName",a.att.resolve("fontName")),d=S.extendFontStyle(d,"fontName",e))}null!=d&&(!0==d.generated&&(d.name=b+"_style"),c.fontStyle=d);Ta.localesMap.set(b,c)};Ta.processCharacters=function(a){a=
(new hd("\r\n","g")).replace(a,"\n");return a=(new hd("\r","g")).replace(a,"\n")};var I=function(){};f["stolo.managers.SceneManager"]=I;I.__name__=["stolo","managers","SceneManager"];I.createInstantTransition=function(){return new ji(0,t.quintOut)};I.change=function(a,b){null==b&&(b=I.createInstantTransition());if(null==I._director)throw"Director not set, was SceneManager.setScenes called?";I.onChange.emit();if(I.SkipChange)return I.SkipChange=!1,null;var c=I.getScene(a);I._director.unwindToScene((new r).add(c),
b);return c};I.push=function(a,b){null==b&&(b=I.createInstantTransition());if(null==I._director)throw"Director not set, was SceneManager.setScenes called?";I.onPush.emit();var c=I.getScene(a);I._director.pushScene((new r).add(c),b);return c};I.pop=function(a){if(1==I._director.scenes.length)throw"Scene will not be removed (last in stack!)";var b=I._director.scenes[I._director.scenes.length-1]._compMap.Scene_39;I.onPop.emit();I._director.popScene(a);return b};I.setScenes=function(a,b){null==b&&(b=
!0);null==I._director&&(I._director=new ii,b?x.root.addChild((new r).add(I._director)):x.root.add(I._director));I.addScenes(a)};I.addScenes=function(a){for(var b=a.keys();b.hasNext();){var c=b.next();I.addScene(c,a.get(c))}};I.addScene=function(a,b){I.CaseSensitive||(a=a.toLowerCase());if(I._sceneMap.exists(a))throw"Illegal operation: scene '"+a+"' is already registered";I._sceneMap.set(a,b)};I.getScene=function(a){I.CaseSensitive||(a=a.toLowerCase());if(!I._sceneMap.exists(a))throw"Scene '"+a+"' is not registered or does not exists.";
a=I._sceneMap.get(a);return ja.createInstance(a,[])};var p=function(){};f["stolo.managers.SoundManager"]=p;p.__name__=["stolo","managers","SoundManager"];p.__properties__={get_isMuted:"get_isMuted"};p.playMusic=function(a,b,c){null==c&&(c=-1);null==b&&(b=!1);if(p._musicDisabled||null==p._soundPack)return null;p._unmuteMusic=a;if(0==p._volume)return null;0>c&&(c=p.defaultMusicVolume);if(p._currentMusic==a&&!b)return null;b=p.play(a,"MUSIC",c,!0,!1);if(null==b)return b;p._currentMusic=a;return p._currentMusicPlayback=
b};p.setMusicVolume=function(a,b,c){null==b&&(b=1);if(null==p._currentMusicPlayback)return null;null==c&&(c=t.quadInOut);p._currentMusicPlayback.volume.animateTo(a,b,c);return p._currentMusicPlayback};p.play=function(a,b,c,d,e,h){null==e&&(e=!1);null==d&&(d=!1);null==c&&(c=1);if(null==p._soundPack||0==p._volume||null==a)return null;0<=a.indexOf("{")&&(a=p.getIdFromTemplate(a,h));h=ze.stamp();if(p.soundPollingMap.exists(a)){var g=p.soundPollingMap.get(a);if(h-g<p.soundPollingSeconds)return null}p.soundPollingMap.set(a,
h);h=null;a=p._soundPack.getSound(a,!1);if(null==a||0>=a.get_duration())return null;null==b&&(b="OTHER");if(p.channels.exists(b)){h=p.channels.get(b);if(!(null==h||h.get_complete().get__())&&e)return null;h=p.__playSoundInChannel(a,c,d,b,h)}else h=p.__playSoundInChannel(a,c,d,b);b=h;null!=b._clonedElement&&(b._clonedElement.autoplay=!0);return h};p.getIdFromTemplate=function(a,b){var c=a;if(0<=c.indexOf("{random("))var d=c.split("{random(")[1],d=y.parseInt(d.split(")}")[0]),e=Math.floor(Math.random()*
d+1),c=xa.replace(c,"{random("+d+")}",""+e);if(null!=b){d=0;for(e=w.fields(b);d<e.length;){var h=e[d];++d;c=xa.replace(c,"{{"+h+"}}",w.field(b,h))}}return c};p.__playSoundInChannel=function(a,b,c,d,e){null!=e&&(e.set_paused(!0),e.dispose(),p.channels.set(d,null));e=c?a.loop(b):a.play(b);p.channels.set(d,e);return e};p.mute=function(a){null==a&&(a=!1);p.setVolume(0);a&&fa.set("soundMuted",!0)};p.unmute=function(){p.setVolume(p._unmuteVolume);null!=p._unmuteMusic&&p.playMusic(p._unmuteMusic)};p.setVolume=
function(a,b,c){null==b&&(b=0.2);null==c&&(c=t.quadInOut);0==a?(p._unmuteVolume=0<p._volume?p._volume:p.defaultVolume,p._volume=0):(p._volume=a,0>p._volume&&(p._volume=p.defaultVolume),fa.set("soundMuted",!1));x.volume.animateTo(p._volume,b,c);return x.volume};p.get_isMuted=function(){return-1<p._volume?0==p._volume:!1};p.loadSounds=function(a,b){C.loadPack(a,p.onAssetsLoaded);!0==fa.get("soundMuted",!1)?p.mute():p.setVolume(p.defaultVolume);p._callback=b};p.setSounds=function(a){p._soundPack=a};
p.onAssetsLoaded=function(a){p.setSounds(a);null!=p._callback&&p._callback()};var Ra=f["stolo.managers.SpritesheetType"]={__ename__:["stolo","managers","SpritesheetType"],__constructs__:["Auto","JsonArray","Grid","Flump","Zoe"]};Ra.Auto=["Auto",0];Ra.Auto.toString=s;Ra.Auto.__enum__=Ra;Ra.JsonArray=["JsonArray",1];Ra.JsonArray.toString=s;Ra.JsonArray.__enum__=Ra;Ra.Grid=["Grid",2];Ra.Grid.toString=s;Ra.Grid.__enum__=Ra;Ra.Flump=["Flump",3];Ra.Flump.toString=s;Ra.Flump.__enum__=Ra;Ra.Zoe=["Zoe",4];
Ra.Zoe.toString=s;Ra.Zoe.__enum__=Ra;Ra.__empty_constructs__=[Ra.Auto,Ra.JsonArray,Ra.Grid,Ra.Flump,Ra.Zoe];var Aa=function(){};f["stolo.managers.SpritesheetManager"]=Aa;Aa.__name__=["stolo","managers","SpritesheetManager"];Aa.getSpritesheet=function(a,b,c,d){null==b&&(b=Aa.DefaultManifest);null==d&&(d=Ra.Auto);var e=b+"_"+a;if(Aa._cachedSpritesheets.exists(e))c(Aa._cachedSpritesheets.get(e));else if(Aa._loadingSpritesheets.exists(e))Aa._loadingSpritesheets.get(e).callbacks.push(c);else{var h=Aa.createRequest(e,
a,b,c,d);Aa._loadingSpritesheets.set(e,h);h.loader=C.loadPack(b,function(a){Aa.onRequestComplete(h,a)})}};Aa.createRequest=function(a,b,c,d,e){for(var h=b.split(","),g=[],f=0;f<h.length;){var i=h[f];++f;switch(e[1]){case 3:i=zm.getFileInfo(i,null);break;default:i=zm.getFileInfo(i,Aa.DefaultFileName)}g.push(i)}h=[];h.push(d);return{id:a,pack:c,name:b,type:e,jsonFiles:g,callbacks:h}};Aa.clearCache=function(){Aa._cachedSpritesheets=new N};Aa.onRequestComplete=function(a,b){var c=null,d=a.jsonFiles[0],
e;if(a.type==Ra.Flump)c=new ml(a.name,b),c.set_name(a.id);else for(var h=0,g=a.jsonFiles;h<g.length;){var f=g[h];++h;e=b.getFile(f.url,!1);if(null==e)for(var i=!1,j=0;!i;){e=xa.replace(f.url,".json",j+".json");e=b.getFile(e,!1);if(null==e){if(0==j)throw"Spritesheet not found: '"+f.url+"' on pack '"+a.pack+"'";i=!0}else e=JSON.parse(e.toString()),c=Aa.appendToSpriteSheet(c,e,b,f);j++}else e=JSON.parse(e.toString()),c=Aa.appendToSpriteSheet(c,e,b,f);c.set_name(a.id)}c.finalize();d=xa.replace(d.url,
".json","_meta.json");e=b.getFile(d,!1);null!=e&&(d=JSON.parse(e.toString()),c.applyOverrides(d));Aa._loadingSpritesheets.remove(a.id);Aa._cachedSpritesheets.set(a.id,c);if(null!=c){d=0;for(h=a.callbacks;d<h.length;)g=h[d],++d,g(c)}};Aa.appendToSpriteSheet=function(a,b,c,d){if(null!=b.frames&&b.frames.length)null==a&&(a=new bd),a.parseData(c,b,d.path);else if(0<b.frameWidth)null==a&&(a=new qg),a.parseData(c,b,d.path);else throw"Unsupported JSON data: "+y.string(b);return a};var fa=function(){};f["stolo.managers.StorageManager"]=
fa;fa.__name__=["stolo","managers","StorageManager"];fa.get=function(a,b,c){null==c&&(c=!0);null==b&&null!=fa.Defaults&&(b=fa.getDefaultValue(a));c&&(a=fa.Prefix+a);return x._platform.getStorage().get(a,b)};fa.getDefaultValue=function(a){return!Object.prototype.hasOwnProperty.call(fa.Defaults,a)?null:w.field(fa.Defaults,a)};fa.set=function(a,b,c){null==c&&(c=!0);if(c){if(null==fa.Prefix)throw"StorageManager.Prefix was not set";a=fa.Prefix+a}return x._platform.getStorage().set(a,b)};fa.getWithPrefix=
function(a,b,c){null==c&&null!=fa.Defaults&&(c=fa.getDefaultValue(b));return null==a?fa.get(b,c):x._platform.getStorage().get(a+b,c)};fa.setWithPrefix=function(a,b,c){return null==a?fa.set(b,c):x._platform.getStorage().set(a+b,c)};var S=function(){};f["stolo.managers.TextManager"]=S;S.__name__=["stolo","managers","TextManager"];S.addFontPack=function(a){for(var b,c,d=a.get_manifest().iterator();d.hasNext();)b=d.next(),c=b.name.indexOf(".fnt"),-1<c&&(c=b.name.substring(0,c),b=new rf(a,c),null==S.defaultFont&&
(S.defaultFont=b),S._fontMap.set(c,b))};S.getFont=function(a,b){null==b&&(b=!0);if(b&&!S._fontMap.exists(a))throw"Font not found: '"+a+"'";return S._fontMap.get(a)};S.setDefaultFont=function(a){S.defaultFont=a;S._fontMap.set(S.defaultFontName,a)};S.getFontStyle=function(a,b){null==b&&(b=!0);if(b&&!S._fontStylesMap.exists(a))throw"Font style not found: '"+a+"'";return S._fontStylesMap.get(a)};S.addFontStyle=function(a){if(null==a.font&&(a.font=S.getFont(a.fontName),null==a.font))throw"Font '"+a.fontName+
"' not found to create font style '"+a.name+"'";S._fontStylesMap.set(a.name,a);return a};S.applyFontStyle=function(a,b){null!=b.font&&a.set_font(b.font);0<b.fontScale&&(a.setScale(b.fontScale),S.ChangePixelSnapping&&1!=b.fontScale&&a.set_pixelSnapping(!1));if((0<b.offsetX||0>b.offsetX||0<b.offsetY||0>b.offsetY)&&!ga.__instanceof(a,uc)){if(0<b.offsetX||0>b.offsetX){var c=a.anchorX;c.set__(c._value-b.offsetX)}if(0<b.offsetY||0>b.offsetY)c=a.anchorY,c.set__(c._value-b.offsetY)}null!=b.align&&a.set_align(b.align);
null!=b.letterSpacing&&a.letterSpacing.set__(b.letterSpacing);return a};S.getLocalizedTextSprite=function(a,b,c,d,e){a=new uc(a,b,e);null!=c&&null!=d&&a.setXY(c,d);return a};S.getTextSprite=function(a,b,c,d){null==b&&(b="");null==a&&(a=S.defaultFontName);var e=S.getFontStyle(a,!1),a=null!=e?e.font:S.getFont(a),b=new Pc(a,b);null!=c&&b.x.set__(c);null!=d&&b.y.set__(d);null!=e&&(S.applyFontStyle(b,e),null!=e.transform&&b.set_text(S.applyTransform(b._text,e.transform)));return b};S.applyTransform=function(a,
b){return"uppercase"==b?a.toUpperCase():"lowercase"==b?a.toLowerCase():a};S.extendFontStyle=function(a,b,c){if(null==a||!0!=a.generated){var d={generated:!0};if(null!=a){d.parent=a;for(var e=0,h=w.fields(a);e<h.length;){var g=h[e];++e;w.setProperty(d,g,w.field(a,g))}}a=d}w.setProperty(a,b,c);return a};S.configureFromXML=function(a){var b=null;if(a.has.resolve("defaultFont")&&(b=S.getFont(a.att.resolve("defaultFont")),null==b))throw"Default font '"+a.att.resolve("defaultFont")+"' not found";for(a=
a.nodes.resolve("style").iterator();a.hasNext();){var c=a.next(),d=S.createFontStyle(c.att.resolve("name"));c.has.resolve("fontName")&&(d.fontName=c.att.resolve("fontName"));c.has.resolve("fontScale")&&(d.fontScale=y.parseFloat(c.att.resolve("fontScale")));c.has.resolve("offsetX")&&(d.offsetX=y.parseFloat(c.att.resolve("offsetX")));c.has.resolve("offsetY")&&(d.offsetY=y.parseFloat(c.att.resolve("offsetY")));c.has.resolve("letterSpacing")&&(d.letterSpacing=y.parseFloat(c.att.resolve("letterSpacing")));
c.has.resolve("align")&&("center"==c.att.resolve("align")&&(d.align=X.Center),"left"==c.att.resolve("align")&&(d.align=X.Left),"right"==c.att.resolve("align")&&(d.align=X.Right));c.has.resolve("transform")&&(d.transform=c.att.resolve("transform"));null==b&&(b=d.font);S.addFontStyle(d)}null!=b?S.setDefaultFont(b):null};S.createFontStyle=function(a){return{name:a,fontName:S.defaultFontName,transform:S.defaultTransform}};var rg=function(a,b,c,d,e,h,g){null==g&&(g=!0);this.fps=-1;this.frames=[];this.name=
b;this.prefix=c;this.spriteSheet=a;this.fps=d;this.width=e;this.height=h;this.loop=g};f["stolo.sprites.AnimationSymbol"]=rg;rg.__name__=["stolo","sprites","AnimationSymbol"];rg.prototype={getReversedFrames:function(){return null!=this._reversedFrames?this._reversedFrames:this._reversedFrames=this.frames.slice().reverse()},addCuePoint:function(a){null==this.cues&&(this.cues=[]);this.cues.push(a)},addFrame:function(a){this.frames.push(a)},get_duration:function(){return this.frames.length/(-1==this.fps?
this.spriteSheet.fps:this.fps)},orderFramesByName:function(){this.frames.sort(function(a,b){return a.name==b.name?0:a.name>b.name?1:-1})},setFrames:function(a,b){for(var c=[],d=0;d<a.length;){var e=a[d];++d;var h=b[e-bd.BaseIndex];if(null==h)throw"Frame "+e+" not found";c.push(h)}0<c.length&&(this.frames=c);return this.frames},setFrameData:function(a,b){null!=this.frames[a]&&(this.frames[a].data=b)},__class__:rg,__properties__:{get_duration:"get_duration"}};var hb=function(a,b,c,d,e){null==e&&(e=
!0);this.onInit=new ka;this.autoCenter=!0;ta.call(this,null);this.autoCenter=e;this.currentSymbolName=b;if(null!=d)this.onInit.connect(d).once();null!=a&&Aa.getSpritesheet(a,c,function(a){return function(b){return a(b)}}(m(this,this.onSpritesheetReady)))};f["stolo.sprites.BitmapSprite"]=hb;hb.__name__=["stolo","sprites","BitmapSprite"];hb.__super__=ta;hb.prototype=l(ta.prototype,{set_currentSymbol:function(a){this._currentSymbol=a;null!=this._currentSymbol&&(this.currentSymbolName=this._currentSymbol.name);
return this._currentSymbol},onStop:function(){ta.prototype.onStop.call(this);this.onInit=this.currentSymbolName=this._currentSymbol=this._spritesheet=null},onAdded:function(){ta.prototype.onAdded.call(this);null!=this._spritesheet&&this.onInit.emit()},onSpritesheetReady:function(a){this.initialize(a)},setSymbol:function(a,b){null==b&&(b=!0);var c=this._spritesheet.getBitmapSymbol(a);if(null==c){if(b)throw"Symbol not found: '"+a+"' for spritesheet '"+this._spritesheet.get_name()+"'";return null}this.set_currentSymbol(c);
return this._currentSymbol},initialize:function(a){this._spritesheet=a;null!=this.currentSymbolName&&this.setSymbol(this.currentSymbolName);this.autoCenter&&null!=this._currentSymbol&&0>=this._currentSymbol.width&&this.centerAnchor();null!=this.owner&&this.onInit.emit()},draw:function(a){null!=this._currentSymbol?0<this._currentSymbol.width&&0<this._currentSymbol.height&&a.drawSubTexture(this._currentSymbol.texture,this._currentSymbol.offsetX,this._currentSymbol.offsetY,this._currentSymbol.x,this._currentSymbol.y,
this._currentSymbol.width,this._currentSymbol.height):ta.prototype.draw.call(this,a)},getNaturalWidth:function(){return null==this._currentSymbol?0:this._currentSymbol.sourceWidth},getNaturalHeight:function(){return null==this._currentSymbol?0:this._currentSymbol.sourceHeight},__class__:hb,__properties__:l(ta.prototype.__properties__,{set_currentSymbol:"set_currentSymbol"})});var Ca=function(a,b,c,d,e){null==d&&(d=!0);this._isPlaying=!1;this._currentFrame=0;this.nextCuePointFrame=this._cuepointIndex=
-1;this.isReady=!1;this.onCuePoint=new Nc;this.onReady=new O;this.onPlaylistComplete=new ka;this.animComplete=new Nc;this.isReady=this.autoRestart=!1;this._position=this._currentFrame=0;this.speed=new J(1);this._overrides=e;hb.call(this,a,null,b,c,d)};f["stolo.sprites.BitmapAnimation"]=Ca;Ca.__name__=["stolo","sprites","BitmapAnimation"];Ca.__super__=hb;Ca.prototype=l(hb.prototype,{onSpritesheetReady:function(a){this.initialize(a)},dispose:function(){hb.prototype.dispose.call(this);this.onReady=this.animComplete=
null;this._isPlaying=!1;this._completeCallback=this._animation=this._currentSprite=this._spritesheet=this._frames=null},initialize:function(a){this._spritesheet=a;null!=this._overrides&&a.applyOverrides(this._overrides);null==this.animName&&(this.animName=this._spritesheet.defaultAnim);this.start();this.onInit.emit()},onAdded:function(){hb.prototype.onAdded.call(this);null!=this._spritesheet&&(this.isReady?this.onReady.emit(this):this.start())},start:function(){this.isReady||(this.isReady=!0,this.gotoAndPlay(this.animName,
this.animParams),this.autoCenter&&null!=this._animation&&0<this._animation.width&&this.centerAnchor(),null==this._animation&&(this._isPlaying=!1,this.animName=null),null!=this.owner&&this.onReady.emit(this))},onUpdate:function(a){this.isReady&&(this.updateAnim(a),hb.prototype.onUpdate.call(this,a))},updateAnim:function(a){0!=(this._flags&2)&&this._isPlaying&&(this.speed.update(a),this._newPos=this._position+a*this._currentFPS*this.speed._value,this._newPos>this._frames.length?this.handleAnimComplete():
(this._position=this._newPos,this.gotoFrame(Math.floor(this._position)+1)))},handleAnimComplete:function(){!this._animation.loop||null!=this._frames&&1>=this._frames.length?(this.stop(),this.gotoFrame(this._frames.length)):this._position=0;if(null!=this._completeCallback){var a=this._completeCallback;this._completeCallback=null;a()}null!=this.animComplete&&(this.animComplete.emit(this._animation.name,this),this.nextAnim())},nextAnim:function(a){null!=this._playlist&&(0>=this._playlist.length?(this._animCompletePlaylistCallback=
this._playlist=null,this.onPlaylistComplete.emit()):(this.gotoAnim(this._playlist.shift(),a),null==a&&null!=this._animCompletePlaylistCallback&&(this._completeCallback=this._animCompletePlaylistCallback)))},getDuration:function(a){a=null==a?this._animation:this._spritesheet.getAnimation(a,this.prefix);return null==a?0:a.get_duration()},hasAnim:function(a){return null==this._spritesheet?!1:null!=this._spritesheet.getAnimation(a,this.prefix)},stop:function(){this._isPlaying=!1},gotoAndStop:function(a,
b){this.gotoAndPlay(a,b);this._isPlaying=!1;return this._animation},gotoAndPlay:function(a,b){this.isReady&&(this._playlist=null);if("string"==typeof a){if(!this.autoRestart&&null!=this._animation&&a==this._animation.name&&this._isPlaying)return this.gotoAnim(a,b),this._animation;this.gotoAnim(a,b)}else if((a|0)===a)this.gotoFrame(a,!0),this._position=this._currentFrame-1;else if(a instanceof Array&&null==a.__enum__){this._playlist=a;if(0>=this._playlist.length)throw"Received empty playlist!";this.nextAnim(b)}this._isPlaying=
!0;return this._animation},gotoAnim:function(a,b){if(null==this._spritesheet)this.animName=a,this.animParams=b;else{var c=this._spritesheet.getAnimation(a,this.prefix);if(null==c)Ca.verbose&&null;else if(this.animName=a,this.animParams=b,this._completeCallback=null,null==b)this.setAnim(c);else if((b|0)===b&&0<b)this.setAnim(c),this.gotoAndPlay(b);else{null!=b.onComplete&&(this._completeCallback=b.onComplete);Object.prototype.hasOwnProperty.call(b,"next")&&(null==this._playlist&&(this._playlist=[]),
this._playlist.push(b.next));null!=this._playlist&&(null!=b.onPlaylistComplete?(this.onPlaylistComplete.connect(b.onPlaylistComplete).once(),this._animCompletePlaylistCallback=b.onComplete):null!=this._completeCallback&&(this.onPlaylistComplete.connect(this._completeCallback).once(),this._completeCallback=null));this.setAnim(c,b.reverse);if(Object.prototype.hasOwnProperty.call(b,"loop")&&null!=this.get_animation()&&(!0==b.loop||!1==b.loop))this.get_animation().loop=b.loop;0<b.frame&&this.gotoAndPlay(b.frame)}}},
setAnim:function(a,b){null==b&&(b=!1);this._animation=a;this._frames=b?a.getReversedFrames():a.frames;this._currentFPS=0<this._animation.fps?this._animation.fps:this.get_spritesheet().fps;this.nextCuePointFrame=this._cuepointIndex=-1;this.gotoFrame(1,!0);this.getNextCuePoint();this._position=0;if(null==this._frames)throw"Animation '"+this._defaultAnimName+"' does not have frames!";this.autoCenter&&this.centerAnchor()},gotoFrame:function(a,b){null==b&&(b=!1);1>a&&(a=1);a>this._frames.length&&(a=this._frames.length);
if(this._currentFrame!=a||b)-1<this.nextCuePointFrame&&a>=this.nextCuePointFrame&&this._currentFrame!=a&&(this.onCuePoint.emit(this._animation.cues[this._cuepointIndex].name,this),this.nextCuePointFrame=-1,this.getNextCuePoint()),a<this._currentFrame&&(this._cuepointIndex=-1,this.getNextCuePoint()),this._currentFrame=a,this._currentSymbol=this._frames[a-1]},getNextCuePoint:function(){null==this._animation.cues?this.nextCuePointFrame=-1:(this._cuepointIndex++,null==this._animation.cues[this._cuepointIndex]?
this._cuepointIndex--:this.nextCuePointFrame=this._animation.cues[this._cuepointIndex].frame)},get_spritesheet:function(){return this._spritesheet},set_isPlaying:function(a){return this._isPlaying=a},get_animation:function(){return this._animation},get_currentFrame:function(){return this._currentFrame},__class__:Ca,__properties__:l(hb.prototype.__properties__,{get_currentFrame:"get_currentFrame",get_animation:"get_animation",set_isPlaying:"set_isPlaying",get_spritesheet:"get_spritesheet"})});var nl=
function(){};f["stolo.sprites.BitmapFrameSymbol"]=nl;nl.__name__=["stolo","sprites","BitmapFrameSymbol"];nl.prototype={get_subTexture:function(){null==this._subTexture&&null!=this.texture&&(this._subTexture=this.texture.subTexture(this.x,this.y,this.width,this.height));return this._subTexture},__class__:nl,__properties__:{get_subTexture:"get_subTexture"}};var Ng=function(a,b,c,d,e){null==e&&(e=!0);this._root=new r;this._cache=new N;this.onUpdateSignal=new O;""==a&&(a=null);this.prefix=a;Ca.call(this,
null,null,d,e);null!=b&&Aa.getSpritesheet(b,c,function(a){return function(b){return a(b)}}(m(this,this.onSpritesheetReady)),Ra.Flump)};f["stolo.sprites.FlumpAnimation"]=Ng;Ng.__name__=["stolo","sprites","FlumpAnimation"];Ng.__super__=Ca;Ng.prototype=l(Ca.prototype,{onAdded:function(){this.owner.addChild(this._root);Ca.prototype.onAdded.call(this)},onUpdate:function(a){this.onUpdateSignal.emit(a);Ca.prototype.onUpdate.call(this,a)},initialize:function(a){this.flump=a;if(null==this.flump)throw"Missing or incompatible spritesheet: "+
y.string(a);this._lib=this.flump.lib;Ca.prototype.initialize.call(this,a)},setDecorator:function(a){this._decorator=a;return this},start:function(){this.isReady||(this.onReady.emit(this),this.isReady=!0,this.gotoAndPlay(this.animName,this.animParams))},updateAnim:function(a){0!=(this._flags&2)&&this._isPlaying&&this.speed.update(a)},setAnim:function(a){this._animation=a;this._currentFPS=0<this._animation.fps?this._animation.fps:this.get_spritesheet().fps;this.playFromCache(a.name)},gotoFrame:function(a){null!=
this.movie&&this.movie.set_position((a-1)/this.movie.symbol.frameRate)},playFromCache:function(a){var b;if(null!=this._cache)if(b=this._cache.get(a),null!=b)b.set_position(0);else{if(null==this._lib._symbols.get(a))return Ca.verbose&&null,null;b=this.createMovie(a);this._cache.set(a,b)}else b=this.createMovie(a);return this.setCurrent(b)},createMovie:function(a){a=this._lib.createSprite(a,!0);null!=this._decorator&&this._decorator(a);return a},setCurrent:function(a){this._root.add(a);this.movie=a;
null!=this._animCompleteConnection&&this._animCompleteConnection.dispose();this._animCompleteConnection=a.get_looped().connect(m(this,this.handleAnimComplete));return a},__class__:Ng});var bd=function(){this._animations=new N;this.nameSeparator="/";this.prefixSeparator="_";this.defaultAnim="idle";this.fps=bd.DefaultFPS;this.type=Ra.JsonArray};f["stolo.sprites.Spritesheet"]=bd;bd.__name__=["stolo","sprites","Spritesheet"];bd.prototype={getAnimation:function(a,b,c){null==c&&(c=!1);null!=b&&(a=b+this.prefixSeparator+
a);if(!this._animations.exists(a)){if(c)throw"Animation not found: '"+a+"' in spritesheet "+this._name;return null}return this._animations.get(a)},getTexture:function(a,b,c){null==c&&(c=!0);a=this.getBitmapSymbol(a,b,c);return null==a?null:a.get_subTexture()},getBitmapSymbol:function(a,b,c){null==c&&(c=!1);if(c&&!this._bitmapSymbols.exists(a))throw"Symbol '"+a+"' not found in spritesheet "+this._name;return this._bitmapSymbols.get(a)},finalize:function(){this.orderFramesByName();null!=this._overrides&&
this.applyOverrides(this._overrides)},parseData:function(a,b,c){for(var a=a.getTexture(c+ob.removeFileExtension(b.meta.image)),d,e=c=0,h=b.frames;e<h.length;){var g=h[e];++e;d=null!=this.nameSeparator?g.filename.lastIndexOf(this.nameSeparator):-1;d=0>=d?null:Q.substr(g.filename,0,d);g=this.createFrameSymbol(g,a,c);null!=d&&this.addToAnim(d,g,a,c);this.addBitmapSymbol(g);null==this._frames&&(this._frames=[]);this._frames.push(g);c++}null==this._animations.get(this.defaultAnim)&&null!=this._firstSymbol&&
(this.defaultAnim=this._firstSymbol.name);if(null==this._animations.get(this.defaultAnim)){c=0;for(e=this._frames;c<e.length;)h=e[c],++c,this.addToAnim(this.defaultAnim,h,a)}null!=b.spritesheet&&(this._overrides=b.spritesheet)},orderFramesByName:function(){for(var a=this._animations.iterator();a.hasNext();)a.next().orderFramesByName();null!=this._frames&&this._frames.sort(function(a,c){return a.name==c.name?0:a.name>c.name?1:-1})},addToAnim:function(a,b){var c=this._animations.get(a);null==c&&(c=
new rg(this,a,null,-1,b.sourceWidth,b.sourceHeight),this._animations.set(a,c),null==this._firstSymbol&&(this._firstSymbol=c));c.addFrame(b);return c},addBitmapSymbol:function(a,b){null==this._bitmapSymbols&&(this._bitmapSymbols=new N);null==b&&(b=a.name);this._bitmapSymbols.set(b,a)},createFrameSymbol:function(a,b,c){var d=new nl;d.index=c;d.name=a.filename;d.name.lastIndexOf(".")==d.name.length-4&&(c=d.name.lastIndexOf("."),d.name=Q.substr(d.name,0,c));d.texture=b;d.x=a.frame.x;d.y=a.frame.y;d.width=
a.frame.w;d.height=a.frame.h;d.offsetX=a.spriteSourceSize.x;d.offsetY=a.spriteSourceSize.y;d.sourceWidth=a.sourceSize.w;d.sourceHeight=a.sourceSize.h;return d},applyOverrides:function(a){for(var b,c=0,d=w.fields(a);c<d.length;){var e=d[c];++c;b=w.field(a,e);if("animations"==e||"anims"==e)for(var e=0,h=w.fields(b);e<h.length;){var g=h[e];++e;this.modAnim(g,w.field(b,g),!0)}else this.applyOverride(e,b)}},applyOverride:function(a,b){Object.prototype.hasOwnProperty.call(this,a)&&w.setProperty(this,a,
b)},modAnim:function(a,b,c,d){null==c&&(c=!0);var e=this.getAnimation(a,d);if(null==e)if(c&&null!=b.frames)e=new rg(this,a,d,-1,0,0),this._animations.set(a,e);else throw"Anim '"+a+"' not found";a=0;for(c=w.fields(b);a<c.length;){var h=c[a];++a;d=w.field(b,h);if("frames"==h)if(0<d.length&&0<=d[0]&&e.setFrames(d,this._frames),0<d.length)for(var h=0,g=d.length;h<g;){var f=h++;e.setFrameData(f,d[f])}else throw"Unknown frames format: "+y.string(d);else"cues"==h||"cuepoints"==h?(d=w.field(b,h),this.addCuePoints(e.name,
d,null,e)):w.setProperty(e,h,d)}return e},addCuePoints:function(a,b,c,d){null==d&&(d=this.getAnimation(a,c,!0));for(var e=0;e<b.length;){var h=b[e];++e;this.addCuePoint(a,h,c,d)}},addCuePoint:function(a,b,c,d){null==d&&(d=this.getAnimation(a,c,!0));d.addCuePoint(b);return d},get_name:function(){return this._name},set_name:function(a){return this._name=a},__class__:bd,__properties__:{set_name:"set_name",get_name:"get_name"}};var ml=function(a,b){bd.call(this);this.type=Ra.Flump;this.loadLibrary(a,
b)};f["stolo.sprites.FlumpSpritesheet"]=ml;ml.__name__=["stolo","sprites","FlumpSpritesheet"];ml.__super__=bd;ml.prototype=l(bd.prototype,{getAnimation:function(a,b){null!=b&&(a=b+this.prefixSeparator+a);return!this._animations.exists(a)?this.createAnimation(a,b):this._animations.get(a)},loadLibrary:function(a,b){this.lib=new Sl(b,a)},createAnimation:function(a,b){if(null==this.lib._symbols.get(a))return null;var c=new rg(this,a,b,-1,0,0);this._animations.set(a,c);return c},finalize:function(){},
__class__:ml});var qg=function(){this._framesMap=new Dc;bd.call(this);this.type=Ra.Grid};f["stolo.sprites.GridSpritesheet"]=qg;qg.__name__=["stolo","sprites","GridSpritesheet"];qg.__super__=bd;qg.prototype=l(bd.prototype,{finalize:function(){},parseData:function(a,b,c){a=a.getTexture(c+ob.removeFileExtension(b.image));null!=b.defaultAnim&&(this.defaultAnim=b.defaultAnim);for(var d=0,e=w.fields(b.animations);d<e.length;){var h=e[d];++d;var g=w.field(b.animations,h),c=new rg(this,h,null,0<g.fps?g.fps:
-1,b.frameWidth,b.frameHeight,g.loop),g=g.frames;if(null!=g)for(var f=0;f<g.length;){var i=g[f];++f;var i=i-qg.BaseIndex,j;if(this._framesMap.exists(i))j=this._framesMap.get(i);else{j=new nl;this._framesMap.set(i,j);for(var k=0,l=0,m=c.width*i;m>=a.get_width();)m-=a.get_width(),l+=c.height;k+=m;j.index=i;j.name=h+"_"+i;j.texture=a;j.x=k;j.y=l;j.width=b.frameWidth;j.height=b.frameHeight;j.offsetX=0;j.offsetY=0;j.sourceWidth=b.frameWidth;j.sourceHeight=b.frameHeight}c.addFrame(j)}this._animations.set(h,
c)}},__class__:qg});var ha=f["stolo.ui.ButtonState"]={__ename__:["stolo","ui","ButtonState"],__constructs__:["up","pressed","selected","over","disabled"]};ha.up=["up",0];ha.up.toString=s;ha.up.__enum__=ha;ha.pressed=["pressed",1];ha.pressed.toString=s;ha.pressed.__enum__=ha;ha.selected=["selected",2];ha.selected.toString=s;ha.selected.__enum__=ha;ha.over=["over",3];ha.over.toString=s;ha.over.__enum__=ha;ha.disabled=["disabled",4];ha.disabled.toString=s;ha.disabled.__enum__=ha;ha.__empty_constructs__=
[ha.up,ha.pressed,ha.selected,ha.over,ha.disabled];var uc=function(a,b,c){this._x=this._y=this._offsetX=this._offsetY=0;this.localized=!1;null!=b&&(this.fontStyle=S.getFontStyle(b),this._defaultFont=null!=this.fontStyle?this.fontStyle.font:S.getFont(b));null==this._defaultFont&&(this._defaultFont=S.defaultFont);Pc.call(this,this._defaultFont);null!=a&&this.setText(a,c)};f["stolo.ui.LocalizedTextSprite"]=uc;uc.__name__=["stolo","ui","LocalizedTextSprite"];uc.__super__=Pc;uc.prototype=l(Pc.prototype,
{applyFontStyle:function(a,b){null==b&&(b=!0);null==a&&(a=this.fontStyle);null!=a&&(b&&S.applyFontStyle(this,a),null!=a.offsetX&&(this._offsetX=a.offsetX),null!=a.offsetY&&(this._offsetY=a.offsetY),null!=a.transform&&Pc.prototype.set_text.call(this,S.applyTransform(this._text,a.transform)),this.setXY(this._x,this._y))},onAdded:function(){Pc.prototype.onAdded.call(this)},setText:function(a,b,c){null==c&&(c=!0);this._id=a;this.localized=!1;a=Ta.localizeTextField(this,a,b,this._defaultFont);this.localized=
a.localized;c&&(null!=this.fontStyle&&this.applyFontStyle(this.fontStyle),null!=a.fontStyle&&this.applyFontStyle(a.fontStyle))},set_text:function(a){if(this.localized)throw"Attempting to set text directly with '"+a+"', please use setText() send null as constructor id or use a TextSprite instead";this.localized=!1;return Pc.prototype.set_text.call(this,a)},setXY:function(a,b){this._x=a;this._y=b;return Pc.prototype.setXY.call(this,this._x+this._offsetX,this._y+this._offsetY)},__class__:uc});var Bj=
function(a){this.sliderInactiveX=this.sliderInactiveY=0;this.hideSlider=!0;this.horizontalId=-1;this.value=0;this.screenZoneY=0.35;this.screenZoneX=0.5;this.textureName_handle="slider_handle";this.textureName_slider="slider";this.isActive=!1;this.enabled=!0;this.deadZone=0.25;k.call(this);this.pack=a};f["stolo.ui.Slider"]=Bj;Bj.__name__=["stolo","ui","Slider"];Bj.__super__=k;Bj.prototype=l(k.prototype,{get_name:function(){return"Slider_24"},dispose:function(){this.pack=null;k.prototype.dispose.call(this)},
onStart:function(){this._disposer=new xb;this.owner.addChild((new r).add(this._disposer));this.setupListeners();this.build()},build:function(){x._platform.getTouch().get_supported()&&(this.sliderBar=(new ta(E.getTexture(this.textureName_slider,this.pack))).disablePointer(),this.slider=(new ta(E.getTexture(this.textureName_handle,this.pack))).disablePointer(),this.sliderBar.centerAnchor(),this.slider.centerAnchor(),this.hideSlider&&this.sliderBar.set_visible(this.slider.set_visible(!1)),this.owner.addChild((new r).add(this.sliderBar)),
this.owner.addChild((new r).add(this.slider)),this.resetSliderPosition())},setupListeners:function(){this._disposer.add(x._platform.getTouch().down.connect(m(this,this.onTouchDown)));this._disposer.add(x._platform.getTouch().move.connect(m(this,this.onTouchMove)));this._disposer.add(x._platform.getTouch().up.connect(m(this,this.onTouchUp)))},onTouchDown:function(a){this.onPointerDown(a.viewX,a.viewY,a.id)},onTouchMove:function(a){this.onPointerMove(a.viewX,a.viewY,a.id)},onTouchUp:function(a){this.onPointerUp(a.viewX,
a.viewY,a.id)},onPointerDown:function(a,b,c){this.enabled&&(1!=q.scale&&(a/=q.scale,b/=q.scale),null==this.horizontalOrigin&&a<q.gameWidth*this.screenZoneX&&b>q.gameHeight*this.screenZoneY&&(this.hideSlider&&this.slider.set_visible(this.sliderBar.set_visible(!0)),this.slider.setXY(a,b),this.sliderBar.setXY(a,b),this.horizontalOrigin=new jb(a,b),this.horizontalId=c,this.isActive=!0))},onPointerMove:function(a,b,c){if(this.enabled&&(1!=q.scale&&(a/=q.scale),null!=this.horizontalOrigin&&this.horizontalId==
c)){this.slider.x.set__(a);b=this.sliderBar.getNaturalWidth()/2*this.sliderBar.scaleX._value;c=this.sliderBar.x._value;this.slider.x._value>c+b?this.slider.x.set__(c+b):this.slider.x._value<c-b&&this.slider.x.set__(c-b);this.value=(this.slider.x._value-c)/b;Math.abs(this.value)<this.deadZone&&(this.value=0);var d=c+10+b;if(a>d){var d=a-d,e=this.sliderBar.x;e.set__(e._value+d);e=this.slider.x;e.set__(e._value+d)}b=c-10-b;a<b&&(a=b-a,b=this.sliderBar.x,b.set__(b._value-a),b=this.slider.x,b.set__(b._value-
a));this.slider.x.set__(Math.max(this.slider.x._value,0));this.sliderBar.x.set__(Math.max(this.sliderBar.x._value,0));this.isActive=!0}},onPointerUp:function(a,b,c){null!=this.horizontalOrigin&&this.horizontalId==c&&(this.hideSlider&&this.slider.set_visible(this.sliderBar.set_visible(!1)),this.resetSliderPosition(),this.horizontalOrigin=null,this.horizontalId=-1,this.value=0,this.isActive=!1)},resetSliderPosition:function(){var a=this.sliderInactiveY;this.sliderBar.setXY(this.sliderInactiveX,a);this.slider.setXY(this.sliderInactiveX,
a)},__class__:Bj});var Am=function(a){this.onUpdateSound=new O;Da.call(this);this._pack=a;this._downOnTexture=E.getTexture("btn_sound_on_pressed",this._pack);this._downOffTexture=E.getTexture("btn_sound_off_pressed",this._pack)};f["stolo.ui.SoundButton"]=Am;Am.__name__=["stolo","ui","SoundButton"];Am.__super__=Da;Am.prototype=l(Da.prototype,{dispose:function(){this.onUpdateSound=this._pack=null;Da.prototype.dispose.call(this)},onAdded:function(){Da.prototype.onAdded.call(this);this._soundButton=new Cd(this._pack,
"btn_sound_off");this._soundButton.setXY(0,0);this._soundButton.get_pointerUp().connect(m(this,this.onUp));this._soundButton.get_pointerDown().connect(m(this,this.onDown));this.owner.addChild((new r).add(this._soundButton));this.updateSoundState()},onUp:function(a){a._stopped=!0;p.get_isMuted()?p.unmute():p.mute();this.onUpdateSound.emit(p.get_isMuted());this.updateSoundState()},onDown:function(a){a._stopped=!0;p.get_isMuted()?null!=this._downOnTexture&&(this._soundButton.display.texture=this._downOnTexture):
null!=this._downOffTexture&&(this._soundButton.display.texture=this._downOffTexture)},updateSoundState:function(){this._soundButton.display.texture=p.get_isMuted()?E.getTexture("btn_sound_off",this._pack):E.getTexture("btn_sound_on",this._pack);this._soundButton.updateUpTexture(this._soundButton.display.texture)},__class__:Am});var Fh=function(){this.shortLived=this.isDisposed=!1;this.maxY=580;this.spreadX=30;this.startX=0;k.call(this)};f["stolo.ui.fx.Confetti"]=Fh;Fh.__name__=["stolo","ui","fx",
"Confetti"];Fh.__super__=k;Fh.prototype=l(k.prototype,{get_name:function(){return"Confetti_95"},dispose:function(){this.isDisposed=!0;this.allWaveProps=this.flipHolderSprite=this.rotHolderSprite=this.confettiSprite=null;k.prototype.dispose.call(this)},onAdded:function(){this.build();k.prototype.onAdded.call(this)},build:function(){var a=Math.round(10+5*Math.random());this.flipHolderSprite=new A;this.owner.add(this.flipHolderSprite);this.flipHolderSprite.disablePointer();var b=new r;this.owner.addChild(b);
this.rotHolderSprite=new A;b.add(this.rotHolderSprite);this.rotHolderSprite.disablePointer();var c=new r;b.addChild(c);this.confettiSprite=new eb(this.color,a,a);c.add(this.confettiSprite);this.confettiSprite.x.set__(-a/2);this.confettiSprite.y.set__(-a/2);this.confettiSprite.disablePointer();this.xProp=new If(0.25,1);this.yProp=new If(2,4);this.flipProp=new If(4,8);this.rotProp=new If(1,4);this.flipRotProp=new If(0.25,1);this.allWaveProps=[this.xProp,this.yProp,this.flipProp,this.rotProp,this.flipRotProp];
this.reset()},reset:function(){for(var a=0,b=this.allWaveProps.length;a<b;)this.allWaveProps[a++].randomizeSpeed();this.yProp.value=0},update:function(a){if(!this.isDisposed){for(var b=0,c=this.allWaveProps.length;b<c;)this.allWaveProps[b++].update(a);this.yProp.value>2*Math.PI&&(this.shortLived?this.dispose():this.reset());this.flipHolderSprite.x.set__(this.startX+Math.sin(this.xProp.value)*this.spreadX);this.flipHolderSprite.y.set__(this.yProp.value/(2*Math.PI)*this.maxY);null!=this.flipRotProp&&
this.flipHolderSprite.rotation.set__(360*this.flipRotProp.value);null!=this.flipProp&&this.flipHolderSprite.scaleX.set__(Math.cos(this.flipProp.value));null!=this.rotProp&&this.rotHolderSprite.rotation.set__(360*this.rotProp.value)}},__class__:Fh});var If=function(a,b){this.min=a;this.max=b;this.value=2*Math.random()*Math.PI};f["stolo.ui.fx.WaveProp"]=If;If.__name__=["stolo","ui","fx","WaveProp"];If.prototype={randomizeSpeed:function(){this.speed=this.min+Math.random()*(this.min-this.max)},update:function(a){this.value+=
a*this.speed},__class__:If};var te=function(a,b){this.confettiColors=[16711680,16746496,16776960,8978176,65280,65416,65535,35071,255,8913151,16711935];this.startSpreadY=1;this.shortLived=!1;this.maxCount=50;this.spreadX=30;this.centerX=0;this.autoStart=!0;this.speed=new J(0.3);k.call(this);this.width=a;this.height=b};f["stolo.ui.fx.Confettis"]=te;te.__name__=["stolo","ui","fx","Confettis"];te.__super__=k;te.prototype=l(k.prototype,{get_name:function(){return"Confettis_94"},dispose:function(){k.prototype.dispose.call(this)},
onAdded:function(){0==this.centerX&&(this.centerX=0.5*this.width);this.autoStart&&this.start()},onRemoved:function(){},onUpdate:function(a){this.speed.update(a);if(!(0==this.speed._value||null==this.items))for(var b=0,c=this.items.length;b<c;)this.items[b++].update(a*this.speed._value)},start:function(){this._container=new A;this.owner.addChild((new r).add(this._container));this._container.disablePointer();this.items=[];for(var a=0,b=this.maxCount;a<b;){var c=a++,d=this.getConfetti();this.setupConfetti(d,
c);this.addConfetti(d,c)}},getConfetti:function(){return new Fh},setupConfetti:function(a,b){a.startX=this.centerX+(b/(this.maxCount-1)-0.5)*this.width;a.color=this.confettiColors[Math.floor(0.999*b/(this.maxCount-1)*this.confettiColors.length)];a.spreadX=this.spreadX;a.maxY=this.height;a.shortLived=this.shortLived;return new Fh},addConfetti:function(a){this._container.owner.addChild((new r).add(a));a.yProp.value=2*Math.random()*Math.PI*this.startSpreadY;this.items.push(a);return a},__class__:te});
var Tm=function(){};f["stolo.utils.ArrayUtils"]=Tm;Tm.__name__=["stolo","utils","ArrayUtils"];Tm.shuffle=function(a){for(var b=a.length,c,d;0<b;)d=Math.floor(Math.random()*b),b--,c=a[b],a[b]=a[d],a[d]=c;return a};var zm=function(){};f["stolo.utils.AssetUtils"]=zm;zm.__name__=["stolo","utils","AssetUtils"];zm.getFileInfo=function(a,b){var c,d=ob.getFileExtension(a),e;null==d&&null!=b?(a.lastIndexOf("/")==a.length-1&&(e=a.lastIndexOf("/"),a=Q.substr(a,0,e)),e=a,c=a.substring(a.lastIndexOf("/")+1,a.length),
b=xa.replace(b,"{{name}}",c),-1<c.indexOf(".")&&a.substring(0,a.lastIndexOf(".")),e.lastIndexOf("/")<e.length-1&&(e+="/"),a=b,d=ob.getFileExtension(a)):(e=a.substring(0,a.lastIndexOf("/")+1),c=-1<a.indexOf("/")?a.substring(a.lastIndexOf("/")+1,a.lastIndexOf(".")):a.substring(0,a.lastIndexOf(".")));return{name:c,path:e,url:a,ext:d}};var Xa=function(){};f["stolo.utils.BrowserUtils"]=Xa;Xa.__name__=["stolo","utils","BrowserUtils"];Xa.getCurrentURL=function(a){null==a&&(a=!1);var b=x._platform.getExternal().call("window.location.href.toString");
a&&null!=b&&(b=b.split("?")[0]);return b};Xa.getUrlParams=function(){if(null!=Xa.urlParams)return Xa.urlParams;var a=Xa.getCurrentURL().split("?");if(1==a.length)return{};for(var b={},a=a[1].split("&"),c=0;c<a.length;){var d=a[c];++c;d=d.split("=");2==d.length&&(d[1]=xa.replace(d[1],"#",""),w.setProperty(b,d[0],d[1]))}Xa.urlParams=b;return Xa.urlParams};Xa.getURL=function(a,b){null==b&&(b="_blank");window.open(a,b)};Xa.execute=function(a){return eval(a)};var yf=function(){};f["stolo.utils.DataUtils"]=
yf;yf.__name__=["stolo","utils","DataUtils"];yf.isUnlocked=function(a,b){return!b.exists(a)?!1:b.get(a)};yf.unlock=function(a,b){if(yf.isUnlocked(a,b))return!1;b.set(a,!0);return!0};var q=function(){};f["stolo.utils.DeviceUtils"]=q;q.__name__=["stolo","utils","DeviceUtils"];q.init=function(a,b){null==q.UA&&(0<a&&0<b?q.setSize(a,b):q.setSize(x._platform.getStage().get_width(),x._platform.getStage().get_height()),q.touch=x._platform.getTouch().get_supported(),q.mobile=q.touch,q.power=30,q.UA=q.getUA(),
null!=q.UA&&(q.ua=q.UA.toLowerCase(),q.getScreenSize(),q.iphone=q.phone=-1<q.ua.indexOf("iphone")||-1<q.ua.indexOf("ipod"),q.ipad=q.tablet=-1<q.ua.indexOf("ipad"),q.ios=q.iphone||q.ipad,q.ie=-1<q.ua.indexOf("msie")||-1<=q.ua.indexOf("trident"),q.android=q.touch&&(-1<q.ua.indexOf("linux")||-1<q.ua.indexOf("android")),q.ios?q.setupIos():q.android&&q.setupAndroid()),q.slow=0>=q.power)};q.setupIos=function(){q.mobile=!0;var a=y.parseInt(x._platform.getExternal().call("window.devicePixelRatio.toString"));
0<a&&(q.ipadVersion=1+a);var b=eval("window"),c=b.ondevicemotion;b.ondevicemotion=function(a){null==a.acceleration&&(q.ipadVersion-=1);b.ondevicemotion=c};if(-1<q.ua.indexOf("ipod")||3>q.ipadVersion)q.power=0,q.lowPerformance=!0,q.lowMemory=!0};q.setupAndroid=function(){q.mobile=!0;if(-1<q.ua.indexOf("mobile")){if(q.phone=!0,q.tablet=q.detectTablet(),q.lowPerformance=q.detectLowPerformance(),q.lowMemory=q.detectLowMemory(),q.lowPerformance||q.lowMemory)q.power=0}else q.tablet=!0,-1<q.ua.indexOf("sgh-t")&&
(q.tablet=!1,q.phone=!0)};q.detectTablet=function(){return-1<q.ua.indexOf("nexus 5")||-1<q.ua.indexOf("tablet")||700<q.landscapeScreenWidth?!0:!1};q.detectLowPerformance=function(){for(var a=0,b=q.lowPerformanceDevices;a<b.length;){var c=b[a];++a;for(var d=0;d<c.length;){var e=c[d];++d;if(-1<q.UA.indexOf(e))return!0}}return!1};q.detectLowMemory=function(){for(var a=0,b=q.lowMemoryDevices;a<b.length;){var c=b[a];++a;for(var d=0;d<c.length;){var e=c[d];++d;if(-1<q.UA.indexOf(e))return!0}}return!1};
q.getScreenSize=function(){q.screenWidth=y.parseFloat(x._platform.getExternal().call("window.screen.width.toString"));q.screenHeight=y.parseFloat(x._platform.getExternal().call("window.screen.height.toString"));q.screenWidth>q.screenHeight?(q.landscapeScreenWidth=q.screenWidth,q.landscapeScreenHeight=q.screenHeight):(q.landscapeScreenWidth=q.screenHeight,q.landscapeScreenHeight=q.screenWidth)};q.setSize=function(a,b){q.gameWidth=Math.round(a);q.gameHeight=Math.round(b);q.stageWidth=a*q.scale;q.stageHeight=
b*q.scale};q.setScale=function(a){a!=q.scale&&(q.scale=a,q.stageWidth=q.gameWidth*a,q.stageHeight=q.gameHeight*a,q.onScaleChange.emit())};q.getUA=function(){if(null!=q.UA)return q.UA;q.UA=eval("navigator.userAgent");return q.UA};var E=function(){};f["stolo.utils.DisplayUtils"]=E;E.__name__=["stolo","utils","DisplayUtils"];E.__properties__={get_sharedAssets:"get_sharedAssets"};E.setSharedAssets=function(a){E._sharedPack=a;E._sharedAssets=C.getPack(a);return E._sharedAssets};E.get_sharedAssets=function(){return E._sharedAssets};
E.createButton=function(a,b,c,d,e){null==d&&(d="buttons");null==e&&(e=E._sharedAssets);return new Cd(e,b,a,c,d)};E.createImage=function(a,b){null==b&&(b=E._sharedAssets);return new ta(E.getTexture(a,b))};E.createText=function(a,b,c,d){a=S.getLocalizedTextSprite(a,b,0,0,d);E.addSprite(a,c);return a};E.createTextSprite=function(a,b,c){b=S.getTextSprite(b,null,0,0);b.set_text(a);E.addSprite(b,c);return b};E.getTexture=function(a,b,c){null==c&&(c=!0);var d=null;null==b&&(b=E._sharedAssets);if(null==b)throw"Asset pack must be provided";
d=b.getTexture(a,null==E._sharedAssets);null==d&&null!=E._spritesheets.h.__keys__[b.__id__]&&(d=E._spritesheets.h[b.__id__].getTexture(a,null,!1));null==d&&null!=E._sharedAssets&&(null!=E._spritesheets.h.__keys__[E._sharedAssets.__id__]&&(d=E._spritesheets.h[E._sharedAssets.__id__].getTexture(a,null,!1)),null==d&&(d=E._sharedAssets.getTexture(a,c)));return d};E.getTextureFromPack=function(a,b,c){null==c&&(c=!0);return E.getTexture(a,C.getPack(b,c),c)};E.addSprite=function(a,b){null!=a.owner?b.addChild(a.owner):
b.addChild((new r).add(a));return a};E.gap=function(a,b,c,d,e){null==e&&(e={});var c=a-c,h=b-d,d=Math.sqrt(c*c+h*h),c=Kb.degrees(Math.atan2(h,c))+180;ga.__instanceof(e,A)?(h=e,h.setXY(a,b),h.scaleX.set__(d/h.getNaturalWidth()),h.rotation.set__(c)):(e.x=a,e.y=b,e.width=d,e.rotation=c);return e};var P=function(){};f["stolo.utils.DynamicUtils"]=P;P.__name__=["stolo","utils","DynamicUtils"];P.is=function(a,b){var c=ja["typeof"](a);return ja.enumEq(c,b)};P.configure=function(a,b,c){null==c&&(c=!0);for(var d=
0,e=w.fields(b);d<e.length;){var h=e[d];++d;var g=w.field(b,h);"string"==typeof g&&("false"==g&&(g=!1),"true"==g&&(g=!0));(c||!(null==g||""==g))&&w.setProperty(a,h,g)}};P.applyMods=function(a,b){for(var c=0,d=w.fields(b);c<d.length;){var e=d[c];++c;var h=w.field(b,e);null==h||""==h||w.setProperty(a,e,P.mod(w.getProperty(a,e),h))}};P.mod=function(a,b){if("string"==typeof b){var c=b.split("="),d;if(2<=c.length)switch(d=y.parseFloat(c[c.length-1]),c[0]){case "+":a+=d;break;case "-":a-=d;break;case "/":a/=
d;break;case "*":a*=d;break;default:a=d}else a=y.parseFloat(b)}else return b;return a};P.merge=function(a,b,c){null==c&&(c=!1);if(P.is(b,K.TNull)||P.is(b,K.TInt)||P.is(b,K.TFloat)||P.is(b,K.TBool)||P.is(b,K.TClass(String))||P.is(b,K.TFunction))return b;if(P.is(b,K.TClass(Array)))return c?P.clone(b):b;if(P.is(b,K.TObject)){if(P.is(a,K.TObject)){var d;d=c?P.clone(a):a;for(var e=0,h=w.fields(b);e<h.length;){var g=h[e];++e;var f=w.field(a,g),i=w.field(b,g);w.setField(d,g,P.merge(f,i,c))}return d}return c?
P.clone(b):b}throw"Type not supported in the merge :"+y.string(b);};P.clone=function(a){if(P.is(a,K.TNull)||P.is(a,K.TInt)||P.is(a,K.TFloat)||P.is(a,K.TBool)||P.is(a,K.TClass(String))||P.is(a,K.TFunction))return a;if(P.is(a,K.TClass(Array))){for(var b=[],c=0,d=a.length;c<d;){var e=c++;b[e]=P.clone(a[e])}return b}if(P.is(a,K.TObject)){b={};c=0;for(d=w.fields(a);c<d.length;)e=d[c],++c,w.setField(b,e,P.clone(w.field(a,e)));return b}return null};var Kb=function(){};f["stolo.utils.MathUtils"]=Kb;Kb.__name__=
["stolo","utils","MathUtils"];Kb.getDistance=function(a,b,c,d){a-=b;c-=d;return Math.sqrt(a*a+c*c)};Kb.degrees=function(a){return a*(180/Math.PI)};Kb.radians=function(a){return a*Math.PI/180};Kb.randomBetween=function(a,b){return Math.random()*(b-a)+a};Kb.lerp=function(a,b,c){return 0>c?a:1<c?b:a*(1-c)+b*c};Kb.clamp=function(a,b,c){return a<b?b:a>c?c:a};var gb=function(){};f["stolo.utils.SequenceUtils"]=gb;gb.__name__=["stolo","utils","SequenceUtils"];gb.getMovementSequence=function(a,b,c,d,e){null==
e&&(e=0);null==d&&(d=!1);null==c&&(c=!0);var h=new Za;gb.lastDest=null;gb.appendMovementActions(a,h,b);d&&(a=a.reverse(),a.shift(),gb.appendMovementActions(a,h,b),gb.appendMovementActions([{x:0,y:0}],h,b));(c||d)&&gb.appendMovementActions([{x:0,y:0}],h,b);0<e&&h.add(new U(e));return h};gb.appendMovementActions=function(a,b,c){null==b&&(b=new Za);for(var d=0;d<a.length;){var e=a[d];++d;Object.prototype.hasOwnProperty.call(e,"delay")&&b.add(new U(e.delay));var h=Object.prototype.hasOwnProperty.call(e,
"x"),g=Object.prototype.hasOwnProperty.call(e,"y"),f;if(h||g)f=new jb,h&&(f.x=e.x+c.offsetX),g&&(f.y=e.y+c.offsetY),b.add(gb.getMovementAction(e,h?c.x:null,g?c.y:null,f,gb.lastDest,c)),gb.lastDest=f}return b};gb.getMovementAction=function(a,b,c,d,e,h){var g=gb.DefaultMoveSpeed,f=gb.DefaultMovePPS,i=gb.DefaultMoveEase,j=gb.DefaultMoveTime,k=!1;0<a.time?j=a.time:k=!0;0<a.pps&&(f=a.pps);0<a.speed&&(g=a.speed);k&&(j=0,null!=e?(null!=b&&(j+=Math.abs(e.x-d.x)),null!=c&&(j+=Math.abs(e.y-d.y))):(null!=b&&
(j+=Math.abs(b._value-d.x)),null!=c&&(j+=Math.abs(c._value-d.y))),j=j/f-0.1*(j/f)*g,0>=j&&(j=gb.DefaultMoveTime));null!=h&&null!=h.ease&&(i=h.ease);e=new ld;null!=b&&e.add(new rc(b,d.x,j,i));null!=c&&e.add(new rc(c,d.y,j,i));return e};gb.__super__=k;gb.prototype=l(k.prototype,{get_name:function(){return"SequenceUtils_86"},__class__:gb});var db=function(){};f["stolo.web.BrowserTools"]=db;db.__name__=["stolo","web","BrowserTools"];db.init=function(a,b){null==a&&(a=!1);if(!db.hasInit){db.hasInit=!0;
Xa.execute("/**\n* Those utilities are added to the browser window by BrowserTools.hx\n*/\nvar stolo = stolo || { };\nwindow.stolo = stolo;\n\nstolo.version = \"v0.1\";\nstolo.loadingScripts = {};\nstolo.loadedScripts = {};\n\nstolo.url_jquery = 'http://code.jquery.com/jquery-1.11.3.min.js';\n\nstolo.getJquery = function(success)\n{\n\treturn stolo.loadScriptIf(window.jQuery==null, stolo.url_jquery, function()\n\t{\n\t\tsuccess(window.jQuery);\n\t})\n};\n\nstolo.loadScriptIf = function(condition, url, success)\n{\n\tif(condition) {\n\t\tstolo.loadScript(url, success);\n\t} else {\n\t\tsuccess();\n\t}\n};\n\nstolo.loadScript = function(url, success)\n{\n\tvar id = encodeURIComponent(url);\n\t\n\t// Already loaded\n\tif(stolo.loadedScripts[id]) success();\n\t\n\t// Already loading\n\tif(stolo.loadingScripts[id]) return;\n\t\n\tvar head = document.getElementsByTagName('head')[0];\n\tvar script = document.createElement('script');\n\tscript.src = url;\n\t\n\tstolo.loadingScripts[id] = script;\n\n\t// Attach handlers for all browsers\n\tscript.onload = script.onreadystatechange = function()\n\t{\n\t\tif (stolo.loadingScripts[id] && (!this.readyState || this.readyState == 'loaded' || this.readyState == 'complete'))\n\t\t{\n\t\t\tstolo.loadingScripts[id] = null;\n\t\t\tdelete stolo.loadedScripts[id];\n\n\t\t\t// callback function provided as param\n\t\t\tsuccess();\n\t\t\t\n\t\t\tscript.onload = script.onreadystatechange = null;\n\t\t\thead.removeChild(script);\n\t\t};\n\t};\n\n\thead.appendChild(script);\n};");
var c=x;db.canvas=c._platform._canvas;db.container=c._platform._container;db.stolo=w.field(window,"stolo");a?db.LoadJquery(b):null!=b&&b()}};db.focusOnCanvas=function(){db.init();db.canvas.focus()};db.LoadJquery=function(a){db.stolo.getJquery(function(b){db.jQuery=b;null!=a&&a()})};var F=function(){};f["stolo.web.DeltaDNA"]=F;F.__name__=["stolo","web","DeltaDNA"];F.init=function(a,b,c,d,e){if(null==a)throw"Missing gameURL";a=xa.replace(a,"http://","");a=xa.replace(a,"https://","");F.gameURL=a;F.collectURL=
d;F.engageURL=e;F.setLiveStatus();F.getPlatform();F.getDeviceType();F.key=F.isLive?c:b;a=fa.get("UserId",null);F.isValidUserID(a)?F.setUserID(a):F.getNewUserID()};F.setLiveStatus=function(){if(F.allowLiveKey){F.isLive=!0;var a=F.getCurrentURL();if(null!=a&&null!=F.staging)for(var a=a.toLowerCase(),b=0,c=F.staging;b<c.length;){var d=c[b];++b;if(-1<a.indexOf(d)){F.isLive=!1;break}}F.isLive&&F.debug&&null}};F.setReady=function(){if(!F.isReady&&(F.isReady=!0,F.onReady.emit(),null!=F._trackRequestsQueue)){for(var a=
0,b=F._trackRequestsQueue;a<b.length;){var c=b[a];++a;F.track(c.eventName,c.eventParams)}F._trackRequestsQueue=null}};F.setUserID=function(a){F.userID=a;fa.set(F.userIDStorageField,a);null==F.sessionID?F.createSession():F.setReady()};F.getNewUserID=function(){F.isNewPlayer=!0;var a=new bh(F.collectURL+"/uuid");a.onData=function(a){var c=JSON.parse(a);F.isValidUserID(c.userID)?F.setUserID(c.userID):(F.logError("Invalid or missing userID:"),F.logError(a))};a.request()};F.isValidUserID=function(a){return null==
a||""==a||"NULL"==a.toUpperCase()?!1:!0};F.createSession=function(){var a=new bh(F.collectURL+"/uuid");a.onData=function(a){var c=JSON.parse(a);F.isValidUserID(c.userID)?(F.sessionID=c.userID,F.setReady()):(F.logError("Invalid or missing uuid for sessionID:"),F.logError(a))};a.request()};F.track=function(a,b){F.isReady?F.collectRequest(a,b):(null==F._trackRequestsQueue&&(F._trackRequestsQueue=[]),F._trackRequestsQueue.push({eventName:a,eventParams:b}))};F.collectRequest=function(a,b,c,d,e){null==
e&&(e=F.collectURL+"/"+F.key);e=new bh(e);b||(b={});b.sdkVersion=F.sdkVersion;b.platform=F.getPlatform();F.useTimezoneOffset&&(b.timezoneOffset=F.getTimeZoneOffset());null!=F.clientVersion&&(b.clientVersion=F.clientVersion);a={eventName:a,userID:F.userID,sessionID:F.sessionID,eventParams:b};e.addHeader("Content-Type","application/json");e.setPostData(JSON.stringify(a));e.onData=function(a){F.debug&&null;a=null!=a&&""!=a&&" "!=a?JSON.parse(a):null;null!=c&&c(a)};e.onStatus=function(a){204!=a&&F.logError("status: "+
a)};e.onError=function(a){F.logError(a);null!=d&&d(a)};F.debug&&null;e.request(!0);return e};F.getPlatform=function(){if(null!=F.platform)return F.platform;F.platform="PIRACY_UNKNOWN";var a=F.getCurrentURL(),b=q.UA.toLowerCase(),c=F.getReferrer();if(null==a)return F.platform;a=a.toLowerCase();null!=c&&(c=c.toLowerCase());if(!(-1<a.indexOf(".nick")||-1<a.indexOf("nick.com/games/data/")))return F.platform;var d=!1,e=window;if(q.android||q.ios){if(null!=c&&(-1<c.indexOf("apikey")||-1<c.indexOf("www.ludei.com")))d=
!0;null!=e.cocoonjsCheckArgs&&(d=!0);q.ios&&-1==b.indexOf("safari")&&-1==b.indexOf("chrome")&&(d=!0)}if(d)F.platform=q.ios?F.platforms.app.ios:F.platforms.app.android;else{F.platform=F.platforms.web.desktop;if(-1<a.indexOf("m.nick")||q.mobile)F.platform=F.platforms.web.mobile;if(-1<a.indexOf("t.nick")||q.tablet)F.platform=F.platforms.web.tablet}return F.platform};F.getCurrentURL=function(){if(null!=F._currentURL)return F._currentURL;F._currentURL=eval("window.location.href");return null==F._currentURL?
"invalid URL":F._currentURL};F.getReferrer=function(){if(null!=F._currentReferrer)return F._currentReferrer;F._currentReferrer=window.document.referrer;return null==F._currentReferrer?"invalid Referrer":F._currentReferrer};F.setPlatforms=function(a){for(var b=0,c=w.fields(a);b<c.length;){var d=c[b];++b;for(var e=w.field(a,d),h=0,g=w.fields(e);h<g.length;){var f=g[h];++h;var i=w.field(e,f),j=w.field(F.platforms,d);if(null==j)throw"Invalid platform type '"+d+"'";j[f]=i}}};F.getDeviceType=function(){if(null!=
F.deviceType)return F.deviceType;F.deviceType=q.tablet?"TABLET":q.phone?"MOBILE_PHONE":"DESKTOP";return F.deviceType};F.trackClientDevice=function(){var a="DESKTOP";q.ipad&&(a="IPAD");q.iphone&&(a="IPHONE");q.android&&(a=q.tablet?"ANDROID_TABLET":"ANDROID_PHONE");var b="PC";q.mobile&&(b="MOBILE_PHONE");q.tablet&&(b="TABLET");var c="UNKNOWN",d="UNKNOWN",e=q.ua;if(null!=e){-1<e.indexOf("webkit")&&(c="UNKNOWN_WEBKIT");-1<e.indexOf("safari")&&(c="SAFARI");-1<e.indexOf("chrome")&&(c="CHROME");-1<e.indexOf("firefox")&&
(c="FIREFOX");-1<e.indexOf("opera")&&(c="Opera");-1<e.indexOf("tizen")&&(c="TIZEN");if(-1<e.indexOf("msie")||-1<e.indexOf("trident"))c="IE";if(-1<e.indexOf("iemobile")||-1<e.indexOf("msiemobile"))c="IE_MOBILE";-1<e.indexOf("windows")&&(d="WINDOWS");if(-1<e.indexOf("macos")||-1<e.indexOf("macintosh")||-1<e.indexOf("os x"))d="OSX";-1<e.indexOf("linux")&&(d="LINUX");q.ios&&(d="IOS");q.android&&(d="ANDROID");if(-1<e.indexOf("kindle")||-1<e.indexOf("silk"))d="FIREOS";-1<e.indexOf("blackberry")&&(d="BLACKBERRY")}e=
q.UA;null==e&&(e="UNKNOWN");F.track("clientDevice",{deviceName:a,deviceType:b,browserName:c,operatingSystem:d,operatingSystemVersion:e})};F.getTimeZoneOffset=function(){var a=F.getTimeZoneOffsetSeconds(),a=Math.round(-1*(a/60)),b=a+":00";0>a&&-10<a&&(b=xa.replace(b,"-","-0"));0<a&&(b="+"+b,10>a&&(b=xa.replace(b,"+","+0")));return b};F.getTimeZoneOffsetSeconds=function(){return Q.strDate("1970-01-01").getTime()/1E3/60};F.logError=function(a){x._platform.getExternal().call("window.console.error",[a])};
var Pg=function(){this._zoom=1;this._minX=this._maxX=this._minY=this._maxY=-1;this.limitTarget=this._limitX=this._limitY=!1;this.checkLimit=!0;this.x=this.y=this._x=this._y=0;this.followTarget=!0;this.velocityY=0;this.massY=40;this.dampingY=20;this.stiffnessY=0.7;this.springY=!1;this.velocityX=0;this.massX=40;this.dampingX=10;this.stiffnessX=0.8;this.springX=!1;this.linearDampingX=this.linearDampingY=0.2};f["stolo.world.Camera"]=Pg;Pg.__name__=["stolo","world","Camera"];Pg.prototype={update:function(a){null!=
this.zoom&&(this.zoom.update(a),this._zoom=this.zoom._value);this.followTarget&&(null!=this.target?(this.target.update(a),this._targetX=this.target.x._value,this._targetY=this.target.y._value):(this._targetX=this._x,this._targetY=this._y),this._targetX!=this._x&&(this._diff=this._targetX-this._x,this.springX?(this.velocityX+=(this.stiffnessX*this._diff-this.dampingX*this.velocityX)/this.massX,this._x+=this.velocityX):this._x+=this._diff*this.linearDampingX,0.5>Math.abs(this._diff)&&(this._x=this._targetX)),
this._targetY!=this._y&&(this._diff=this._targetY-this._y,this.springY?(this.velocityY+=(this.stiffnessY*this._diff-this.dampingY*this.velocityY)/this.massY,this._y+=this.velocityY):this._y+=this._diff*this.linearDampingY,0.5>Math.abs(this._diff)&&(this._y=this._targetY)),this.x=this._x,this.y=this._y,null!=this.offset&&(this.offset.update(a),this.x+=this.offset.x._value,this.y+=this.offset.y._value),null!=this.fx&&(this.fx.update(a),this.x+=this.fx.x._value,this.y+=this.fx.y._value));this.checkLimit&&
(this._limitX&&(-1!=this._minX&&(this.x=Math.max(this._minX,this.x)),-1!=this._maxX&&(this.x=Math.min(this.x,this._maxX))),this._limitY&&(-1!=this._minY&&(this.y=Math.max(this._minY,this.y)),-1!=this._maxY&&(this.y=Math.min(this.y,this._maxY))),this.limitTarget&&null!=this.target&&(this.target.x.set__(this.x*this._zoom),this.target.y.set__(this.y*this._zoom),null!=this.offset&&(a=this.target.y,a.set__(a._value-this.offset.x._value),a=this.target.y,a.set__(a._value-this.offset.y._value)),null!=this.fx&&
(a=this.target.y,a.set__(a._value-this.fx.x._value),a=this.target.y,a.set__(a._value-this.fx.y._value))))},zoomTo:function(a,b,c){null==b&&(b=0);null==this.zoom&&(this.zoom=new J(1));0<b?(null==c&&(c=t.quintOut),this.zoom.animateTo(a,b,c)):(this.zoom.set__(a),this.zoom.set_behavior(null))},setXY:function(a,b,c){null==c&&(c=!0);this.x=a;this.y=b;c&&(this._x=this.x,this._y=this.y,this.velocityY=this.velocityX=0,null!=this.offset&&(this.x+=this.offset.x._value,this.y+=this.offset.y._value),null!=this.fx&&
(this.x+=this.fx.x._value,this.y+=this.fx.y._value))},moveToTarget:function(){var a=this._x,b=this._y;null!=this.target&&(a=this.target.x._value,b=this.target.y._value);this.setXY(a,b,!0)},setTarget:function(a,b,c){null==c&&(c=!1);null==this.target?this.target=new Ad(a,b):this.target.setXY(a,b);c&&this.moveToTarget();return this.target},animateTo:function(a,b,c,d){null==d&&(d=Pg.DEFAULT_EASING);this.setTarget(this._x,this._y,!1);this.target.x.animateTo(a,c,d);this.target.y.animateTo(b,c,d)},setAnimatedTarget:function(a,
b,c){null==c&&(c=!1);null!=this.target&&this.target.dispose();this.setTarget(a._value,b._value,c);this.target.x=a;this.target.y=b;return this.target},followSprite:function(a,b){null==b&&(b=!1);return this.setAnimatedTarget(a.x,a.y,b)},setOffset:function(a,b,c,d,e,h){null==e&&(e=-1);null==c&&(c=0);null==this.offset&&(this.offset=new Ad(a,b));this.setOffsetX(a,c,d);this.setOffsetY(b,0<=e?e:c,null!=h?h:d)},setOffsetX:function(a,b,c){null==b&&(b=0);0<b?(null==c&&(c=t.quintInOut),this.offset.x.animateTo(a,
b,c)):(this.offset.x.set_behavior(null),this.offset.x.set__(a))},setOffsetY:function(a,b,c){null==b&&(b=0);0<b?(null==c&&(c=t.quintInOut),this.offset.y.animateTo(a,b,c)):(this.offset.y.set_behavior(null),this.offset.y.set__(a))},startFX:function(){null!=this._fxScript&&this._fxScript.dispose();null==this.fxEntity&&(this.fxEntity=new r,x.root.addChild(this.fxEntity));this._fxScript=new sb;this.fxEntity.add(this._fxScript);null!=this.fx&&this.fx.dispose();this.fx=new Ad(0,0)},endFX:function(){this.fx=
null;null!=this._fxScript&&(this._fxScript.dispose(),null!=this._fxScript.owner&&this._fxScript.owner.remove(this._fxScript),this._fxScript=null)},shake:function(a,b,c){null==c&&(c=0);null==b&&(b=30);null==a&&(a=0.5);this.startFX();0<b&&Cf.shake(this._fxScript.owner,this.fx.y,a,b,m(this,this.endFX));0<c&&Cf.shake(this._fxScript.owner,this.fx.x,a,c,m(this,this.endFX))},__class__:Pg};var Lb=function(){};f["zpp_nape.ZPP_ID"]=Lb;Lb.__name__=["zpp_nape","ZPP_ID"];Lb.Interactor=function(){return Lb._Interactor++};
Lb.CbType=function(){return Lb._CbType++};Lb.CbSet=function(){return Lb._CbSet++};Lb.Listener=function(){return Lb._Listener++};var ke=function(){this.body=this.constraint=null;this.pre_swapped=!1;this.int1=this.int2=this.set=this.wrap_arbiters=this.pre_arbiter=null;this.length=0;this.listener=this.next=this.prev=null;this.event=0;this.outer_body=this.outer_con=this.outer_int=null;this.length=0};f["zpp_nape.callbacks.ZPP_Callback"]=ke;ke.__name__=["zpp_nape","callbacks","ZPP_Callback"];ke.prototype=
{wrapper_body:function(){null==this.outer_body&&(this.outer_body=new Rj,this.outer_body.zpp_inner=this);return this.outer_body},wrapper_con:function(){null==this.outer_con&&(this.outer_con=new Tj,this.outer_con.zpp_inner=this);return this.outer_con},wrapper_int:function(){null==this.outer_int&&(this.outer_int=new Uj,this.outer_int.zpp_inner=this);null==this.wrap_arbiters?this.wrap_arbiters=$e.get(this.set.arbiters,!0):this.wrap_arbiters.zpp_inner.inner=this.set.arbiters;this.wrap_arbiters.zpp_inner.zip_length=
!0;this.wrap_arbiters.zpp_inner.at_ite=null;return this.outer_int},push:function(a){null!=this.prev?this.prev.next=a:this.next=a;a.prev=this.prev;a.next=null;this.prev=a;this.length++},pop:function(){var a=this.next;this.next=a.next;null==this.next?this.prev=null:this.next.prev=null;this.length--;return a},empty:function(){return null==this.next},__class__:ke};var Sa=function(){this.interactors=this.constraints=null;this.zip_conlisteners=!1;this.conlisteners=null;this.zip_bodylisteners=!1;this.bodylisteners=
null;this.zip_listeners=!1;this.manager=this.cbpairs=this.listeners=null;this.id=0;this.next=null;this.count=0;this.cbTypes=null;this.cbTypes=new Id;this.listeners=new sg;this.zip_listeners=!0;this.bodylisteners=new ol;this.zip_bodylisteners=!0;this.conlisteners=new pl;this.zip_conlisteners=!0;this.constraints=new gf;this.interactors=new hf;this.id=Lb.CbSet();this.cbpairs=new Bm};f["zpp_nape.callbacks.ZPP_CbSet"]=Sa;Sa.__name__=["zpp_nape","callbacks","ZPP_CbSet"];Sa.setlt=function(a,b){for(var c=
a.cbTypes.head,d=b.cbTypes.head;null!=c&&null!=d;){var e=c.elt,h=d.elt;if(e.id<h.id)return!0;if(h.id<e.id)return!1;c=c.next;d=d.next}return null!=d&&null==c};Sa.get=function(a){var b;null==Sa.zpp_pool?b=new Sa:(b=Sa.zpp_pool,Sa.zpp_pool=b.next,b.next=null);null;for(var c=null,a=a.head;null!=a;){var d=a.elt,c=b.cbTypes.insert(c,d);d.cbsets.add(b);a=a.next}return b};Sa.single_intersection=function(a,b,c){return a.manager.pair(a,b).single_intersection(c)};Sa.find_all=function(a,b,c,d){a.manager.pair(a,
b).forall(c,d)};Sa.prototype={invalidate_pairs:function(){for(var a=this.cbpairs.head;null!=a;)a.elt.zip_listeners=!0,a=a.next},realvalidate_listeners:function(){this.listeners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,c=this.listeners.head,d=a.elt.listeners.head;null!=d;){var e=d.elt;null!=c&&c.elt==e?(d=d.next,b=c,c=c.next):null==c||ud.setlt(e,c.elt)?(e.space==this.manager.space&&(b=this.listeners.inlined_insert(b,e)),d=d.next):(b=c,c=c.next)}a=a.next}},realvalidate_bodylisteners:function(){this.bodylisteners.clear();
for(var a=this.cbTypes.head;null!=a;){for(var b=null,c=this.bodylisteners.head,d=a.elt.bodylisteners.head;null!=d;){var e=d.elt;null!=c&&c.elt==e?(d=d.next,b=c,c=c.next):null==c||ud.setlt(e,c.elt)?(!e.options.excluded(this.cbTypes)&&e.space==this.manager.space&&(b=this.bodylisteners.inlined_insert(b,e)),d=d.next):(b=c,c=c.next)}a=a.next}},realvalidate_conlisteners:function(){this.conlisteners.clear();for(var a=this.cbTypes.head;null!=a;){for(var b=null,c=this.conlisteners.head,d=a.elt.conlisteners.head;null!=
d;){var e=d.elt;null!=c&&c.elt==e?(d=d.next,b=c,c=c.next):null==c||ud.setlt(e,c.elt)?(!e.options.excluded(this.cbTypes)&&e.space==this.manager.space&&(b=this.conlisteners.inlined_insert(b,e)),d=d.next):(b=c,c=c.next)}a=a.next}},validate:function(){this.zip_listeners&&(this.zip_listeners=!1,this.realvalidate_listeners());this.zip_bodylisteners&&(this.zip_bodylisteners=!1,this.realvalidate_bodylisteners());this.zip_conlisteners&&(this.zip_conlisteners=!1,this.realvalidate_conlisteners())},free:function(){this.listeners.clear();
this.zip_listeners=!0;this.bodylisteners.clear();this.zip_bodylisteners=!0;this.conlisteners.clear();for(this.zip_conlisteners=!0;null!=this.cbTypes.head;)this.cbTypes.pop_unsafe().cbsets.remove(this)},__class__:Sa};var jc=function(){this.listeners=null;this.zip_listeners=!1;this.a=this.b=this.next=null;this.listeners=new sg};f["zpp_nape.callbacks.ZPP_CbSetPair"]=jc;jc.__name__=["zpp_nape","callbacks","ZPP_CbSetPair"];jc.get=function(a,b){var c;null==jc.zpp_pool?c=new jc:(c=jc.zpp_pool,jc.zpp_pool=
c.next,c.next=null);c.zip_listeners=!0;Sa.setlt(a,b)?(c.a=a,c.b=b):(c.a=b,c.b=a);return c};jc.setlt=function(a,b){return Sa.setlt(a.a,b.a)||a.a==b.a&&Sa.setlt(a.b,b.b)};jc.prototype={__validate:function(){this.listeners.clear();for(var a=this.a.listeners.head,b=this.b.listeners.head;null!=a&&null!=b;){var c=a.elt,d=b.elt;c==d?((c.options1.compatible(this.a.cbTypes)&&c.options2.compatible(this.b.cbTypes)||c.options2.compatible(this.a.cbTypes)&&c.options1.compatible(this.b.cbTypes))&&this.listeners.add(c),
a=a.next,b=b.next):c.precedence>d.precedence||c.precedence==d.precedence&&c.id>d.id?a=a.next:b=b.next}},empty_intersection:function(){return null==this.listeners.head},single_intersection:function(a){var b=this.listeners.head;return null!=b&&b.elt==a&&null==b.next},forall:function(a,b){for(var c=this.listeners.head;null!=c;){var d=c.elt;d.event==a&&b(d);c=c.next}},__class__:jc};var sg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_InteractionListener"]=
sg;sg.__name__=["zpp_nape","util","ZNPList_ZPP_InteractionListener"];sg.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==vc.zpp_pool?b=new vc:(b=vc.zpp_pool,vc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_insert:function(a,b){var c;null==vc.zpp_pool?c=new vc:(c=vc.zpp_pool,vc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=
this.modified=!0;this.length++;return c},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=vc.zpp_pool;vc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=
!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=vc.zpp_pool;vc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:sg};var ol=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_BodyListener"]=ol;ol.__name__=["zpp_nape","util","ZNPList_ZPP_BodyListener"];
ol.prototype={inlined_insert:function(a,b){var c;null==vd.zpp_pool?c=new vd:(c=vd.zpp_pool,vd.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=vd.zpp_pool;vd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=
null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=vd.zpp_pool;vd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:ol};var pl=function(){this.length=0;this.modified=
this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_ConstraintListener"]=pl;pl.__name__=["zpp_nape","util","ZNPList_ZPP_ConstraintListener"];pl.prototype={inlined_insert:function(a,b){var c;null==le.zpp_pool?c=new le:(c=le.zpp_pool,le.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=le.zpp_pool;le.zpp_pool=
a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=le.zpp_pool;le.zpp_pool=a;this.modified=!0;this.length--;
this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:pl};var gf=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_Constraint"]=gf;gf.__name__=["zpp_nape","util","ZNPList_ZPP_Constraint"];gf.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==me.zpp_pool?b=new me:(b=me.zpp_pool,me.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=
!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=me.zpp_pool;me.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);
d=!0;break}b=c;c=c.next}return d},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=me.zpp_pool;me.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},
__class__:gf};var hf=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_Interactor"]=hf;hf.__name__=["zpp_nape","util","ZNPList_ZPP_Interactor"];hf.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==ne.zpp_pool?b=new ne:(b=ne.zpp_pool,ne.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=
this.head;this.head=a.next;a.elt=null;a.next=ne.zpp_pool;ne.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,
this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=ne.zpp_pool;ne.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},inlined_clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:hf};var tg=function(){this.length=0;this.modified=
this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_CbSet"]=tg;tg.__name__=["zpp_nape","util","ZNPList_ZPP_CbSet"];tg.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==oe.zpp_pool?b=new oe:(b=oe.zpp_pool,oe.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=oe.zpp_pool;oe.zpp_pool=
a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,
c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=oe.zpp_pool;oe.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:tg};var Eb=function(){this.cbsets=this.listeners=this.bodylisteners=this.conlisteners=null;this.id=0;this.outer=null;this.id=Lb.CbType();this.listeners=new sg;this.bodylisteners=new ol;this.conlisteners=new pl;this.constraints=new gf;this.interactors=new hf;this.cbsets=new tg};f["zpp_nape.callbacks.ZPP_CbType"]=Eb;Eb.__name__=["zpp_nape",
"callbacks","ZPP_CbType"];Eb.prototype={addint:function(a){for(var b=null,c=this.listeners.head;null!=c;){var d=c.elt;if(a.precedence>d.precedence||a.precedence==d.precedence&&a.id>d.id)break;b=c;c=c.next}this.listeners.inlined_insert(b,a);this.invalidateint()},invalidateint:function(){for(var a=this.cbsets.head;null!=a;){var b=a.elt;b.zip_listeners=!0;b.invalidate_pairs();a=a.next}},addbody:function(a){for(var b=null,c=this.bodylisteners.head;null!=c;){var d=c.elt;if(a.precedence>d.precedence||a.precedence==
d.precedence&&a.id>d.id)break;b=c;c=c.next}this.bodylisteners.inlined_insert(b,a);this.invalidatebody()},invalidatebody:function(){for(var a=this.cbsets.head;null!=a;)a.elt.zip_bodylisteners=!0,a=a.next},addconstraint:function(a){for(var b=null,c=this.conlisteners.head;null!=c;){var d=c.elt;if(a.precedence>d.precedence||a.precedence==d.precedence&&a.id>d.id)break;b=c;c=c.next}this.conlisteners.inlined_insert(b,a);this.invalidateconstraint()},invalidateconstraint:function(){for(var a=this.cbsets.head;null!=
a;)a.elt.zip_conlisteners=!0,a=a.next},__class__:Eb};var ud=function(){this.body=this.constraint=this.interaction=this.space=null;this.id=this.type=this.event=this.precedence=0;this.outer=null;this.id=Lb.Listener()};f["zpp_nape.callbacks.ZPP_Listener"]=ud;ud.__name__=["zpp_nape","callbacks","ZPP_Listener"];ud.setlt=function(a,b){return a.precedence>b.precedence||a.precedence==b.precedence&&a.id>b.id};ud.prototype={addedToSpace:function(){},removedFromSpace:function(){},__class__:ud};var Cm=function(){this.outer_zn=
this.options=this.handler=null};f["zpp_nape.callbacks.ZPP_BodyListener"]=Cm;Cm.__name__=["zpp_nape","callbacks","ZPP_BodyListener"];Cm.__super__=ud;Cm.prototype=l(ud.prototype,{addedToSpace:function(){this.options.handler=m(this,this.cbtype_change);for(var a=this.options.includes.head;null!=a;)a.elt.addbody(this),a=a.next},removedFromSpace:function(){for(var a=this.options.includes.head;null!=a;){var b=a.elt;b.bodylisteners.remove(this);b.invalidatebody();a=a.next}this.options.handler=null},cbtype_change:function(a,
b,c){this.removedFromSpace();this.options.effect_change(a,b,c);this.addedToSpace()},__class__:Cm});var Dm=function(){this.outer_zn=this.options=this.handler=null};f["zpp_nape.callbacks.ZPP_ConstraintListener"]=Dm;Dm.__name__=["zpp_nape","callbacks","ZPP_ConstraintListener"];Dm.__super__=ud;Dm.prototype=l(ud.prototype,{addedToSpace:function(){this.options.handler=m(this,this.cbtype_change);for(var a=this.options.includes.head;null!=a;)a.elt.addconstraint(this),a=a.next},removedFromSpace:function(){for(var a=
this.options.includes.head;null!=a;){var b=a.elt;b.conlisteners.remove(this);b.invalidateconstraint();a=a.next}this.options.handler=null},cbtype_change:function(a,b,c){this.removedFromSpace();this.options.effect_change(a,b,c);this.addedToSpace()},__class__:Dm});var Id=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_CbType"]=Id;Id.__name__=["zpp_nape","util","ZNPList_ZPP_CbType"];Id.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;
null==wc.zpp_pool?b=new wc:(b=wc.zpp_pool,wc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==wc.zpp_pool?c=new wc:(c=wc.zpp_pool,wc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=
this.head;this.head=a.next;a.elt=null;a.next=wc.zpp_pool;wc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,
this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=wc.zpp_pool;wc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},has:function(a){return this.inlined_has(a)},inlined_has:function(a){var b;b=!1;for(var c=this.head;null!=c;){if(c.elt==a){b=!0;break}c=c.next}return b},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=
b.next;return b},__class__:Id};var Ya=function(a,b,c,d){this.handlerp=null;this.allowSleepingCallbacks=this.pure=!1;this.options1=this.options2=this.handleri=null;this.itype=0;this.outer_zni=this.outer_znp=null;ud.call(this);this.type=d;this.interaction=this;this.event=c;this.options1=a.zpp_inner;this.options2=b.zpp_inner;this.allowSleepingCallbacks=!1};f["zpp_nape.callbacks.ZPP_InteractionListener"]=Ya;Ya.__name__=["zpp_nape","callbacks","ZPP_InteractionListener"];Ya.__super__=ud;Ya.prototype=l(ud.prototype,
{CbSetset:function(a,b,c){for(var d=Ya.UCbSet,e=Ya.VCbSet,h=Ya.WCbSet,a=a.head,g=b.head;null!=a&&null!=g;){var f=a.elt,i=g.elt;f==i?(h.inlined_add(f),a=a.next,g=g.next):Sa.setlt(f,i)?(d.inlined_add(f),a=a.next):(e.inlined_add(i),g=g.next)}for(;null!=a;)d.inlined_add(a.elt),a=a.next;for(;null!=g;)e.inlined_add(g.elt),g=g.next;for(;null!=d.head;){a=d.pop_unsafe();for(g=b.head;null!=g;)c(a,g.elt),g=g.next}for(;null!=e.head;){b=e.pop_unsafe();for(d=h.head;null!=d;)c(b,d.elt),d=d.next}for(;null!=h.head;){e=
h.pop_unsafe();c(e,e);for(b=h.head;null!=b;)c(e,b.elt),b=b.next}},CbTypeset:function(a,b,c){for(var d=Ya.UCbType,e=Ya.VCbType,h=Ya.WCbType,a=a.head,g=b.head;null!=a&&null!=g;){var f=a.elt,i=g.elt;f==i?(h.inlined_add(f),a=a.next,g=g.next):f.id<i.id?(d.inlined_add(f),a=a.next):(e.inlined_add(i),g=g.next)}for(;null!=a;)d.inlined_add(a.elt),a=a.next;for(;null!=g;)e.inlined_add(g.elt),g=g.next;for(;null!=d.head;){a=d.pop_unsafe();for(g=b.head;null!=g;)c(a,g.elt),g=g.next}for(;null!=e.head;){b=e.pop_unsafe();
for(d=h.head;null!=d;)c(b,d.elt),d=d.next}for(;null!=h.head;){e=h.pop_unsafe();c(e,e);for(b=h.head;null!=b;)c(e,b.elt),b=b.next}},with_uniquesets:function(a){var b=this,c;null==Ka.zpp_pool?c=new Ka:(c=Ka.zpp_pool,Ka.zpp_pool=c.next,c.next=null);null;c.lt=jc.setlt;this.CbTypeset(this.options1.includes,this.options2.includes,function(a,d){b.CbSetset(a.cbsets,d.cbsets,function(a,d){a.validate();d.validate();Sa.single_intersection(a,d,b)&&c.try_insert(jc.get(a,d))})});c.clear_with(function(c){a?b.space.freshListenerType(c.a,
c.b):b.space.nullListenerType(c.a,c.b);c.a=c.b=null;c.listeners.clear();c.next=jc.zpp_pool;jc.zpp_pool=c});var d=c;d.data=null;d.lt=null;d.swapped=null;d.next=Ka.zpp_pool;Ka.zpp_pool=d},with_union:function(a){for(var b=this.options1.includes.head,c=this.options2.includes.head;null!=b&&null!=c;){var d=b.elt,e=c.elt;d==e?(a(d),b=b.next,c=c.next):d.id<e.id?(a(d),b=b.next):(a(e),c=c.next)}for(;null!=b;)a(b.elt),b=b.next;for(;null!=c;)a(c.elt),c=c.next},addedToSpace:function(){var a=this,b=this.type==
g.id_ListenerType_PRE;this.with_union(function(c){c.addint(a);if(b)for(c=c.interactors.head;null!=c;)c.elt.wake(),c=c.next});this.options1.handler=m(this,this.cbtype_change1);this.options2.handler=m(this,this.cbtype_change2);this.with_uniquesets(!0)},removedFromSpace:function(){var a=this;this.with_uniquesets(!1);var b=this.type==g.id_ListenerType_PRE;this.with_union(function(c){c.listeners.remove(a);c.invalidateint();if(b)for(c=c.interactors.head;null!=c;)c.elt.wake(),c=c.next});this.options1.handler=
null;this.options2.handler=null},cbtype_change1:function(a,b,c){this.cbtype_change(this.options1,a,b,c)},cbtype_change2:function(a,b,c){this.cbtype_change(this.options2,a,b,c)},cbtype_change:function(a,b,c,d){this.removedFromSpace();a.effect_change(b,c,d);this.addedToSpace();null},__class__:Ya});var Xe=function(){this.outer=this.handler=this.includes=this.excludes=this.wrap_includes=this.wrap_excludes=null;this.includes=new Id;this.excludes=new Id};f["zpp_nape.callbacks.ZPP_OptionType"]=Xe;Xe.__name__=
["zpp_nape","callbacks","ZPP_OptionType"];Xe.argument=function(a){return null==a?new fg:ga.__instanceof(a,fg)?a:(new fg).including(a)};Xe.prototype={setup_includes:function(){this.wrap_includes=be.get(this.includes,!0)},setup_excludes:function(){this.wrap_excludes=be.get(this.excludes,!0)},excluded:function(a){return this.nonemptyintersection(a,this.excludes)},compatible:function(a){return this.nonemptyintersection(a,this.includes)&&!this.nonemptyintersection(a,this.excludes)},nonemptyintersection:function(a,
b){for(var c=!1,d=a.head,e=b.head;null!=e&&null!=d;){var h=e.elt,g=d.elt;if(h==g){c=!0;break}else h.id<g.id?e=e.next:d=d.next}return c},effect_change:function(a,b,c){if(b)if(c){b=null;for(c=this.includes.head;null!=c&&!(a.id<c.elt.id);){b=c;c=c.next}this.includes.inlined_insert(b,a)}else this.includes.remove(a);else if(c){b=null;for(c=this.excludes.head;null!=c&&!(a.id<c.elt.id);){b=c;c=c.next}this.excludes.inlined_insert(b,a)}else this.excludes.remove(a)},append_type:function(a,b){a==this.includes?
this.includes.has(b)||(this.excludes.has(b)?null!=this.handler?this.handler(b,!1,!1):this.effect_change(b,!1,!1):null!=this.handler?this.handler(b,!0,!0):this.effect_change(b,!0,!0)):this.excludes.has(b)||(this.includes.has(b)?null!=this.handler?this.handler(b,!0,!1):this.effect_change(b,!0,!1):null!=this.handler?this.handler(b,!1,!0):this.effect_change(b,!1,!0))},append:function(a,b){if(ga.__instanceof(b,We))this.append_type(a,b.zpp_inner);else if(ga.__instanceof(b,Sj)){var c;b.zpp_inner.valmod();
for(c=Td.get(b);c.hasNext();){var d;c.zpp_critical=!1;d=c.zpp_inner.at(c.zpp_i++);this.append_type(a,d.zpp_inner)}}else if(b instanceof Array&&null==b.__enum__)for(c=0;c<b.length;)d=b[c],++c,this.append_type(a,d.zpp_inner)},__class__:Xe};var mn=function(){this.cbTypes=this.cbSet=null;this.ignore=this.__velocity=!1;this.component=null;this.active=this.stiff=this.removeOnBreak=!1;this.outer=this.compound=this.space=null};f["zpp_nape.constraint.ZPP_Constraint"]=mn;mn.__name__=["zpp_nape","constraint",
"ZPP_Constraint"];mn.prototype={alloc_cbSet:function(){if(null!=(this.cbSet=this.space.cbsets.get(this.cbTypes)))this.cbSet.count++,this.cbSet.constraints.add(this)},dealloc_cbSet:function(){if(null!=this.cbSet){this.cbSet.constraints.remove(this);if(0==--this.cbSet.count){this.space.cbsets.remove(this.cbSet);var a=this.cbSet;a.free();a.next=Sa.zpp_pool;Sa.zpp_pool=a}this.cbSet=null}},addedToSpace:function(){this.active&&this.activeInSpace();this.activeBodies();for(var a=this.cbTypes.head;null!=a;)a.elt.constraints.add(this),
a=a.next},removedFromSpace:function(){this.active&&this.inactiveOrOutSpace();this.inactiveBodies();for(var a=this.cbTypes.head;null!=a;)a.elt.constraints.remove(this),a=a.next},activeInSpace:function(){this.alloc_cbSet();null==Lc.zpp_pool?this.component=new Lc:(this.component=Lc.zpp_pool,Lc.zpp_pool=this.component.next,this.component.next=null);null;this.component.isBody=!1;this.component.constraint=this},inactiveOrOutSpace:function(){this.dealloc_cbSet();var a=this.component;a.body=null;a.constraint=
null;null;a.next=Lc.zpp_pool;Lc.zpp_pool=a;this.component=null},activeBodies:function(){},inactiveBodies:function(){},clearcache:function(){},wake_connected:function(){},forest:function(){},pair_exists:function(){return!1},broken:function(){},warmStart:function(){},preStep:function(){return!1},applyImpulseVel:function(){return!1},applyImpulsePos:function(){return!1},__class__:mn};var qa=function(){this.colarb=this.fluidarb=this.sensorarb=null;this.type=0;this.b1=this.b2=this.ws1=this.ws2=this.pair=
null;this.invalidated=!1;this.immState=0;this.intchange=this.presentable=this.continuous=this.fresh=!1;this.present=0;this.active=this.cleared=this.sleeping=!1;this.id=this.di=this.stamp=this.up_stamp=this.sleep_stamp=this.endGenerated=0;this.outer=null};f["zpp_nape.dynamics.ZPP_Arbiter"]=qa;qa.__name__=["zpp_nape","dynamics","ZPP_Arbiter"];qa.prototype={wrapper:function(){null==this.outer&&(qa.internal=!0,this.type==qa.COL?(this.colarb.outer_zn=new Xj,this.outer=this.colarb.outer_zn):this.type==
qa.FLUID?(this.fluidarb.outer_zn=new Yj,this.outer=this.fluidarb.outer_zn):this.outer=new Ze,this.outer.zpp_inner=this,qa.internal=!1);return this.outer},__class__:qa};var kc=function(){this.next=null;qa.call(this);this.type=qa.SENSOR;this.sensorarb=this};f["zpp_nape.dynamics.ZPP_SensorArbiter"]=kc;kc.__name__=["zpp_nape","dynamics","ZPP_SensorArbiter"];kc.__super__=qa;kc.prototype=l(qa.prototype,{retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),
null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;this.intchange=this.active=!1;this.next=kc.zpp_pool;kc.zpp_pool=this},__class__:kc});var lc=function(){this.wMass=this.adamp=this.agamma=this.vMassa=this.vMassb=this.vMassc=this.dampx=this.dampy=this.lgamma=this.nx=this.ny=this.buoyx=this.buoyy=this.pre_dt=0;this.nodrag=!1;this.centroidx=this.centroidy=this.overlap=this.r1x=this.r1y=this.r2x=this.r2y=0;this.outer_zn=this.next=null;qa.call(this);this.type=qa.FLUID;this.fluidarb=
this;this.buoyy=this.buoyx=0;this.pre_dt=-1};f["zpp_nape.dynamics.ZPP_FluidArbiter"]=lc;lc.__name__=["zpp_nape","dynamics","ZPP_FluidArbiter"];lc.__super__=qa;lc.prototype=l(qa.prototype,{retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;this.intchange=this.active=!1;this.next=lc.zpp_pool;lc.zpp_pool=this;this.pre_dt=-1},preStep:function(a,b){-1==this.pre_dt&&(this.pre_dt=
b);var c=b/this.pre_dt;this.pre_dt=b;this.r1x=this.centroidx-this.b1.posx;this.r1y=this.centroidy-this.b1.posy;this.r2x=this.centroidx-this.b2.posx;this.r2y=this.centroidy-this.b2.posy;var d=0,e=0;this.ws1.fluidEnabled&&null!=this.ws1.fluidProperties.wrap_gravity?(d=this.ws1.fluidProperties.gravityx,e=this.ws1.fluidProperties.gravityy):(d=a.gravityx,e=a.gravityy);var h=0,f=0;this.ws2.fluidEnabled&&null!=this.ws2.fluidProperties.wrap_gravity?(h=this.ws2.fluidProperties.gravityx,f=this.ws2.fluidProperties.gravityy):
(h=a.gravityx,f=a.gravityy);var i=0,j=0;if(this.ws1.fluidEnabled&&this.ws2.fluidEnabled){var k=this.overlap*this.ws1.fluidProperties.density,l=this.overlap*this.ws2.fluidProperties.density;if(k>l)h=k+l,i-=d*h,j-=e*h;else if(k<l)d=k+l,i+=h*d,j+=f*d;else{var m=0,o=0,m=0.5*(d+h),o=0.5*(e+f);this.ws1.worldCOMx*m+this.ws1.worldCOMy*o>this.ws2.worldCOMx*m+this.ws2.worldCOMy*o?(d=k+l,i-=m*d,j-=o*d):(d=k+l,i+=m*d,j+=o*d)}}else this.ws1.fluidEnabled?(h=this.overlap*this.ws1.fluidProperties.density,i-=d*h,
j-=e*h):this.ws2.fluidEnabled&&(d=this.overlap*this.ws2.fluidProperties.density,i+=h*d,j+=f*d);i*=b;j*=b;this.buoyx=i;this.buoyy=j;this.b1.type==g.id_BodyType_DYNAMIC&&(d=this.b1.imass,this.b1.velx-=i*d,this.b1.vely-=j*d,this.b1.angvel-=(j*this.r1x-i*this.r1y)*this.b1.iinertia);this.b2.type==g.id_BodyType_DYNAMIC&&(d=this.b2.imass,this.b2.velx+=i*d,this.b2.vely+=j*d,this.b2.angvel+=(j*this.r2x-i*this.r2y)*this.b2.iinertia);if((!this.ws1.fluidEnabled||0==this.ws1.fluidProperties.viscosity)&&(!this.ws2.fluidEnabled||
0==this.ws2.fluidProperties.viscosity))this.nodrag=!0,this.adamp=this.dampy=this.dampx=0;else{this.nodrag=!1;i=0;this.ws1.fluidEnabled&&(this.ws2.validate_angDrag(),i+=this.ws1.fluidProperties.viscosity*this.ws2.angDrag*this.overlap/this.ws2.area);this.ws2.fluidEnabled&&(this.ws1.validate_angDrag(),i+=this.ws2.fluidProperties.viscosity*this.ws1.angDrag*this.overlap/this.ws1.area);0!=i?(j=this.b1.sinertia+this.b2.sinertia,this.wMass=0!=j?1/j:0,i=2*Math.PI*4.0E-4*i,this.agamma=1/(b*i*(2+i*b)),i=1/(1+
this.agamma),this.agamma*=i,this.wMass*=i):this.agamma=this.wMass=0;i=this.b2.velx+this.b2.kinvelx-this.r2y*(this.b2.angvel+this.b2.kinangvel)-(this.b1.velx+this.b1.kinvelx-this.r1y*(this.b2.angvel+this.b2.kinangvel));j=this.b2.vely+this.b2.kinvely+this.r2x*(this.b2.angvel+this.b2.kinangvel)-(this.b1.vely+this.b1.kinvely+this.r1x*(this.b1.angvel+this.b1.kinangvel));i*i+j*j<v.epsilon*v.epsilon||(d=1/Math.sqrt(i*i+j*j),this.nx=i*d,this.ny=j*d);i=0;if(this.ws1.fluidEnabled)if(j=-this.ws1.fluidProperties.viscosity*
this.overlap/this.ws2.area,this.ws2.type==g.id_ShapeType_CIRCLE)i-=j*this.ws2.circle.radius*v.fluidLinearDrag/(2*this.ws2.circle.radius*Math.PI);else{e=d=0;for(h=this.ws2.polygon.edges.head;null!=h;)f=h.elt,d+=f.length,f=j*f.length*(f.gnormx*this.nx+f.gnormy*this.ny),0<f&&(f=f*=-v.fluidVacuumDrag),e-=0.5*f*v.fluidLinearDrag,h=h.next;i+=e/d}if(this.ws2.fluidEnabled)if(j=-this.ws2.fluidProperties.viscosity*this.overlap/this.ws1.area,this.ws1.type==g.id_ShapeType_CIRCLE)i-=j*this.ws1.circle.radius*v.fluidLinearDrag/
(2*this.ws1.circle.radius*Math.PI);else{e=d=0;for(h=this.ws1.polygon.edges.head;null!=h;)f=h.elt,d+=f.length,f=j*f.length*(f.gnormx*this.nx+f.gnormy*this.ny),0<f&&(f=f*=-v.fluidVacuumDrag),e-=0.5*f*v.fluidLinearDrag,h=h.next;i+=e/d}0!=i?(h=this.b1.smass+this.b2.smass,e=d=j=0,j=h,d=0,e=h,0!=this.b1.sinertia&&(h=this.r1x*this.b1.sinertia,f=this.r1y*this.b1.sinertia,j+=f*this.r1y,d+=-f*this.r1x,e+=h*this.r1x),0!=this.b2.sinertia&&(h=this.r2x*this.b2.sinertia,f=this.r2y*this.b2.sinertia,j+=f*this.r2y,
d+=-f*this.r2x,e+=h*this.r2x),h=j*e-d*d,h!=h?(j=d=e=0,3):0==h?(h=0,0!=j?j=1/j:(j=0,h|=1),0!=e?e=1/e:(e=0,h|=2),d=0,h):(h=1/h,f=e*h,e=j*h,j=f,d*=-h,0),this.vMassa=j,this.vMassb=d,this.vMassc=e,i*=2*Math.PI,this.lgamma=1/(b*i*(2+i*b)),i=1/(1+this.lgamma),this.lgamma*=i,this.vMassa*=i,this.vMassb*=i,this.vMassc*=i):this.lgamma=this.vMassc=this.vMassb=this.vMassa=0}this.dampx*=c;this.dampy*=c;this.adamp*=c},warmStart:function(){var a=this.b1.imass;this.b1.velx-=this.dampx*a;this.b1.vely-=this.dampy*a;
a=this.b2.imass;this.b2.velx+=this.dampx*a;this.b2.vely+=this.dampy*a;this.b1.angvel-=this.b1.iinertia*(this.dampy*this.r1x-this.dampx*this.r1y);this.b2.angvel+=this.b2.iinertia*(this.dampy*this.r2x-this.dampx*this.r2y);this.b1.angvel-=this.adamp*this.b1.iinertia;this.b2.angvel+=this.adamp*this.b2.iinertia},applyImpulseVel:function(){if(!this.nodrag){var a=this.b1.angvel+this.b1.kinangvel,b=this.b2.angvel+this.b2.kinangvel,c=this.b1.velx+this.b1.kinvelx-this.r1y*a-(this.b2.velx+this.b2.kinvelx-this.r2y*
b),d=this.b1.vely+this.b1.kinvely+this.r1x*a-(this.b2.vely+this.b2.kinvely+this.r2x*b),e=this.vMassa*c+this.vMassb*d,d=this.vMassb*c+this.vMassc*d,h=this.lgamma,c=e-this.dampx*h,d=d-this.dampy*h;this.dampx+=1*c;this.dampy+=1*d;e=this.b1.imass;this.b1.velx-=c*e;this.b1.vely-=d*e;e=this.b2.imass;this.b2.velx+=c*e;this.b2.vely+=d*e;this.b1.angvel-=this.b1.iinertia*(d*this.r1x-c*this.r1y);this.b2.angvel+=this.b2.iinertia*(d*this.r2x-c*this.r2y);a=(a-b)*this.wMass-this.adamp*this.agamma;this.adamp+=a;
this.b1.angvel-=a*this.b1.iinertia;this.b2.angvel+=a*this.b2.iinertia}},__class__:lc});var mc=function(){this.pre_dt=0;this.stat=!1;this.next=null;this.hc2=this.hpc2=!1;this.c1=this.oc1=this.c2=this.oc2=null;this.__ref_vertex=0;this.__ref_edge1=this.__ref_edge2=null;this.biasCoef=0;this.rev=!1;this.kMassa=this.kMassb=this.kMassc=this.Ka=this.Kb=this.Kc=this.rMass=this.jrAcc=this.rn1a=this.rt1a=this.rn1b=this.rt1b=this.rn2a=this.rt2a=this.rn2b=this.rt2b=this.k1x=this.k1y=this.k2x=this.k2y=this.surfacex=
this.surfacey=this.lnormx=this.lnormy=this.lproj=this.radius=0;this.wrap_normal=null;this.nx=this.ny=0;this.s1=this.s2=this.contacts=this.innards=null;this.userdef_dyn_fric=this.userdef_stat_fric=this.userdef_restitution=this.userdef_rfric=!1;this.dyn_fric=this.stat_fric=this.restitution=this.rfric=0;this.outer_zn=null;qa.call(this);this.pre_dt=-1;this.contacts=new ac;this.innards=new ql;this.type=qa.COL;this.colarb=this};f["zpp_nape.dynamics.ZPP_ColArbiter"]=mc;mc.__name__=["zpp_nape","dynamics",
"ZPP_ColArbiter"];mc.__super__=qa;mc.prototype=l(qa.prototype,{normal_validate:function(){if(this.cleared)throw"Error: Arbiter not currently in use";this.wrap_normal.zpp_inner.x=this.nx;this.wrap_normal.zpp_inner.y=this.ny;this.ws1.id>this.ws2.id&&(this.wrap_normal.zpp_inner.x=-this.wrap_normal.zpp_inner.x,this.wrap_normal.zpp_inner.y=-this.wrap_normal.zpp_inner.y)},getnormal:function(){this.wrap_normal=da.get(0,0,null);this.wrap_normal.zpp_inner._immutable=!0;this.wrap_normal.zpp_inner._inuse=!0;
this.wrap_normal.zpp_inner._validate=m(this,this.normal_validate)},injectContact:function(a,b,c,d,e,h,g){null==g&&(g=!1);for(var f=null,i=this.contacts.next;null!=i;){var j=i;if(h==j.hash){f=j;break}i=i.next}null==f?(null==ac.zpp_pool?f=new ac:(f=ac.zpp_pool,ac.zpp_pool=f.next,f.next=null),null,i=f.inner,i.jnAcc=i.jtAcc=0,f.hash=h,f.fresh=!0,f.arbiter=this,this.jrAcc=0,this.contacts.inlined_add(f),this.innards.add(i)):f.fresh=!1;f.px=a;f.py=b;this.nx=c;this.ny=d;f.dist=e;f.stamp=this.stamp;f.posOnly=
g;return f},retire:function(){this.cleared||(this.b1.arbiters.inlined_try_remove(this),this.b2.arbiters.inlined_try_remove(this),null!=this.pair&&(this.pair=this.pair.arb=null));this.b1=this.b2=null;for(this.intchange=this.active=!1;null!=this.contacts.next;){var a=this.contacts.inlined_pop_unsafe();a.arbiter=null;a.next=ac.zpp_pool;ac.zpp_pool=a;this.innards.inlined_pop()}this.userdef_rfric=this.userdef_restitution=this.userdef_stat_fric=this.userdef_dyn_fric=!1;this.__ref_edge1=this.__ref_edge2=
null;this.next=mc.zpp_pool;mc.zpp_pool=this;this.pre_dt=-1},cleanupContacts:function(){var a=!0,b=null,c=null,d=this.innards.next;this.hc2=!1;for(var e=this.contacts.next;null!=e;){var h=e;h.stamp+v.arbiterExpirationDelay<this.stamp?(e=this.contacts.inlined_erase(b),d=this.innards.inlined_erase(c),h.arbiter=null,h.next=ac.zpp_pool,ac.zpp_pool=h):(b=h.inner,c=h.active,h.active=h.stamp==this.stamp,h.active&&(a?(a=!1,this.c1=b,this.oc1=h):(this.hc2=!0,this.c2=b,this.oc2=h)),c!=h.active&&(this.contacts.modified=
!0),b=e,c=d,d=d.next,e=e.next)}this.hc2?(this.hpc2=!0,this.oc1.posOnly?(d=this.c1,this.c1=this.c2,this.c2=d,d=this.oc1,this.oc1=this.oc2,this.oc2=d,this.hc2=!1):this.oc2.posOnly&&(this.hc2=!1),this.oc1.posOnly&&(a=!0)):this.hpc2=!1;return a},preStep:function(a){this.invalidated&&(this.invalidated=!1,this.userdef_restitution||(this.restitution=this.s1.material.elasticity<=Math.NEGATIVE_INFINITY||this.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:this.s1.material.elasticity>=Math.POSITIVE_INFINITY||
this.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(this.s1.material.elasticity+this.s2.material.elasticity)/2,0>this.restitution&&(this.restitution=0),1<this.restitution&&(this.restitution=1)),this.userdef_dyn_fric||(this.dyn_fric=Math.sqrt(this.s1.material.dynamicFriction*this.s2.material.dynamicFriction)),this.userdef_stat_fric||(this.stat_fric=Math.sqrt(this.s1.material.staticFriction*this.s2.material.staticFriction)),this.userdef_rfric||(this.rfric=Math.sqrt(this.s1.material.rollingFriction*
this.s2.material.rollingFriction)));-1==this.pre_dt&&(this.pre_dt=a);var b=a/this.pre_dt;this.pre_dt=a;var c=this.b1.smass+this.b2.smass;this.hc2=!1;a=!0;this.biasCoef=this.b1.type!=g.id_BodyType_DYNAMIC||this.b2.type!=g.id_BodyType_DYNAMIC?this.continuous?v.contactContinuousStaticBiasCoef:v.contactStaticBiasCoef:this.continuous?v.contactContinuousBiasCoef:v.contactBiasCoef;this.continuous=!1;for(var d=null,e=null,h=this.innards.next,f=this.contacts.next;null!=f;){var i=f;if(i.stamp+v.arbiterExpirationDelay<
this.stamp)f=this.contacts.inlined_erase(d),h=this.innards.inlined_erase(e),i.arbiter=null,i.next=ac.zpp_pool,ac.zpp_pool=i;else{d=i.inner;e=i.active;i.active=i.stamp==this.stamp;if(i.active){a?(a=!1,this.c1=d,this.oc1=i):(this.hc2=!0,this.c2=d,this.oc2=i);d.r2x=i.px-this.b2.posx;d.r2y=i.py-this.b2.posy;d.r1x=i.px-this.b1.posx;d.r1y=i.py-this.b1.posy;var j=c+this.b2.sinertia*Gh.sqr(d.r2x*this.nx+d.r2y*this.ny),j=j+this.b1.sinertia*Gh.sqr(d.r1x*this.nx+d.r1y*this.ny);d.tMass=j<v.epsilon*v.epsilon?
0:1/j;j=c+this.b2.sinertia*Gh.sqr(this.ny*d.r2x-this.nx*d.r2y);j+=this.b1.sinertia*Gh.sqr(this.ny*d.r1x-this.nx*d.r1y);d.nMass=j<v.epsilon*v.epsilon?0:1/j;var k=j=0,l=this.b2.angvel+this.b2.kinangvel,j=this.b2.velx+this.b2.kinvelx-d.r2y*l,k=this.b2.vely+this.b2.kinvely+d.r2x*l,l=this.b1.angvel+this.b1.kinangvel,j=j-(this.b1.velx+this.b1.kinvelx-d.r1y*l),k=k-(this.b1.vely+this.b1.kinvely+d.r1x*l),l=this.nx*j+this.ny*k;i.elasticity=this.restitution;d.bounce=l*i.elasticity;d.bounce>-v.elasticThreshold&&
(d.bounce=0);l=k*this.nx-j*this.ny;j=v.staticFrictionThreshold;d.friction=l*l>j*j?this.dyn_fric:this.stat_fric;d.jnAcc*=b;d.jtAcc*=b}e!=i.active&&(this.contacts.modified=!0);d=f;e=h;h=h.next;f=f.next}}this.hc2?(this.hpc2=!0,this.oc1.posOnly?(h=this.c1,this.c1=this.c2,this.c2=h,h=this.oc1,this.oc1=this.oc2,this.oc2=h,this.hc2=!1):this.oc2.posOnly&&(this.hc2=!1),this.oc1.posOnly&&(a=!0)):this.hpc2=!1;this.jrAcc*=b;a||(this.rn1a=this.ny*this.c1.r1x-this.nx*this.c1.r1y,this.rt1a=this.c1.r1x*this.nx+this.c1.r1y*
this.ny,this.rn1b=this.ny*this.c1.r2x-this.nx*this.c1.r2y,this.rt1b=this.c1.r2x*this.nx+this.c1.r2y*this.ny,this.k1x=this.b2.kinvelx-this.c1.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c1.r1y*this.b1.kinangvel),this.k1y=this.b2.kinvely+this.c1.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c1.r1x*this.b1.kinangvel));this.hc2&&(this.rn2a=this.ny*this.c2.r1x-this.nx*this.c2.r1y,this.rt2a=this.c2.r1x*this.nx+this.c2.r1y*this.ny,this.rn2b=this.ny*this.c2.r2x-this.nx*this.c2.r2y,this.rt2b=this.c2.r2x*this.nx+
this.c2.r2y*this.ny,this.k2x=this.b2.kinvelx-this.c2.r2y*this.b2.kinangvel-(this.b1.kinvelx-this.c2.r1y*this.b1.kinangvel),this.k2y=this.b2.kinvely+this.c2.r2x*this.b2.kinangvel-(this.b1.kinvely+this.c2.r1x*this.b1.kinangvel),this.kMassa=c+this.b1.sinertia*this.rn1a*this.rn1a+this.b2.sinertia*this.rn1b*this.rn1b,this.kMassb=c+this.b1.sinertia*this.rn1a*this.rn2a+this.b2.sinertia*this.rn1b*this.rn2b,this.kMassc=c+this.b1.sinertia*this.rn2a*this.rn2a+this.b2.sinertia*this.rn2b*this.rn2b,this.kMassa*
this.kMassa+2*this.kMassb*this.kMassb+this.kMassc*this.kMassc<v.illConditionedThreshold*(this.kMassa*this.kMassc-this.kMassb*this.kMassb)?(this.Ka=this.kMassa,this.Kb=this.kMassb,this.Kc=this.kMassc,b=this.kMassa*this.kMassc-this.kMassb*this.kMassb,b!=b?(this.kMassa=this.kMassb=this.kMassc=0,3):0==b?(b=0,0!=this.kMassa?this.kMassa=1/this.kMassa:(this.kMassa=0,b|=1),0!=this.kMassc?this.kMassc=1/this.kMassc:(this.kMassc=0,b|=2),this.kMassb=0,b):(b=1/b,c=this.kMassc*b,this.kMassc=this.kMassa*b,this.kMassa=
c,this.kMassb*=-b,0)):(this.hc2=!1,this.oc2.dist<this.oc1.dist&&(b=this.c1,this.c1=this.c2,this.c2=b),this.oc2.active=!1,this.contacts.modified=!0));this.surfacex=this.b2.svelx;this.surfacey=this.b2.svely;this.surfacex+=1*this.b1.svelx;this.surfacey+=1*this.b1.svely;this.surfacex=-this.surfacex;this.surfacey=-this.surfacey;this.rMass=this.b1.sinertia+this.b2.sinertia;0!=this.rMass&&(this.rMass=1/this.rMass);return a},warmStart:function(){var a=this.nx*this.c1.jnAcc-this.ny*this.c1.jtAcc,b=this.ny*
this.c1.jnAcc+this.nx*this.c1.jtAcc,c=this.b1.imass;this.b1.velx-=a*c;this.b1.vely-=b*c;this.b1.angvel-=this.b1.iinertia*(b*this.c1.r1x-a*this.c1.r1y);c=this.b2.imass;this.b2.velx+=a*c;this.b2.vely+=b*c;this.b2.angvel+=this.b2.iinertia*(b*this.c1.r2x-a*this.c1.r2y);this.hc2&&(a=this.nx*this.c2.jnAcc-this.ny*this.c2.jtAcc,b=this.ny*this.c2.jnAcc+this.nx*this.c2.jtAcc,c=this.b1.imass,this.b1.velx-=a*c,this.b1.vely-=b*c,this.b1.angvel-=this.b1.iinertia*(b*this.c2.r1x-a*this.c2.r1y),c=this.b2.imass,this.b2.velx+=
a*c,this.b2.vely+=b*c,this.b2.angvel+=this.b2.iinertia*(b*this.c2.r2x-a*this.c2.r2y));this.b2.angvel+=this.jrAcc*this.b2.iinertia;this.b1.angvel-=this.jrAcc*this.b1.iinertia},applyImpulseVel:function(){var a,b,c,d,e;d=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel);var h=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel);c=(h*this.nx-d*this.ny+this.surfacex)*this.c1.tMass;d=this.c1.friction*this.c1.jnAcc;a=this.c1.jtAcc;
e=a-c;e>d?e=d:e<-d&&(e=-d);c=e-a;this.c1.jtAcc=e;a=-this.ny*c;b=this.nx*c;this.b2.velx+=a*this.b2.imass;this.b2.vely+=b*this.b2.imass;this.b1.velx-=a*this.b1.imass;this.b1.vely-=b*this.b1.imass;this.b2.angvel+=this.rt1b*c*this.b2.iinertia;this.b1.angvel-=this.rt1a*c*this.b1.iinertia;this.hc2?(e=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),b=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel),c=(b*this.nx-e*this.ny+
this.surfacex)*this.c2.tMass,d=this.c2.friction*this.c2.jnAcc,a=this.c2.jtAcc,e=a-c,e>d?e=d:e<-d&&(e=-d),c=e-a,this.c2.jtAcc=e,a=-this.ny*c,b=this.nx*c,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=this.rt2b*c*this.b2.iinertia,this.b1.angvel-=this.rt2a*c*this.b1.iinertia,d=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),h=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-
(this.b1.vely+this.c1.r1x*this.b1.angvel),e=this.k2x+this.b2.velx-this.c2.r2y*this.b2.angvel-(this.b1.velx-this.c2.r1y*this.b1.angvel),b=this.k2y+this.b2.vely+this.c2.r2x*this.b2.angvel-(this.b1.vely+this.c2.r1x*this.b1.angvel),c=this.c1.jnAcc,a=this.c2.jnAcc,d=d*this.nx+h*this.ny+this.surfacey+this.c1.bounce-(this.Ka*c+this.Kb*a),e=e*this.nx+b*this.ny+this.surfacey+this.c2.bounce-(this.Kb*c+this.Kc*a),b=-(this.kMassa*d+this.kMassb*e),h=-(this.kMassb*d+this.kMassc*e),0<=b&&0<=h?(d=b-c,e=h-a,this.c1.jnAcc=
b,this.c2.jnAcc=h):(b=-this.c1.nMass*d,0<=b&&0<=this.Kb*b+e?(d=b-c,e=-a,this.c1.jnAcc=b,this.c2.jnAcc=0):(h=-this.c2.nMass*e,0<=h&&0<=this.Kb*h+d?(d=-c,e=h-a,this.c1.jnAcc=0,this.c2.jnAcc=h):0<=d&&0<=e?(d=-c,e=-a,this.c1.jnAcc=this.c2.jnAcc=0):e=d=0)),c=d+e,a=this.nx*c,b=this.ny*c,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=(this.rn1b*d+this.rn2b*e)*this.b2.iinertia,this.b1.angvel-=(this.rn1a*d+this.rn2a*e)*
this.b1.iinertia):(0!=this.radius&&(c=(this.b2.angvel-this.b1.angvel)*this.rMass,d=this.rfric*this.c1.jnAcc,a=this.jrAcc,this.jrAcc-=c,this.jrAcc>d?this.jrAcc=d:this.jrAcc<-d&&(this.jrAcc=-d),c=this.jrAcc-a,this.b2.angvel+=c*this.b2.iinertia,this.b1.angvel-=c*this.b1.iinertia),d=this.k1x+this.b2.velx-this.c1.r2y*this.b2.angvel-(this.b1.velx-this.c1.r1y*this.b1.angvel),h=this.k1y+this.b2.vely+this.c1.r2x*this.b2.angvel-(this.b1.vely+this.c1.r1x*this.b1.angvel),c=(this.c1.bounce+(this.nx*d+this.ny*
h)+this.surfacey)*this.c1.nMass,a=this.c1.jnAcc,e=a-c,0>e&&(e=0),c=e-a,this.c1.jnAcc=e,a=this.nx*c,b=this.ny*c,this.b2.velx+=a*this.b2.imass,this.b2.vely+=b*this.b2.imass,this.b1.velx-=a*this.b1.imass,this.b1.vely-=b*this.b1.imass,this.b2.angvel+=this.rn1b*c*this.b2.iinertia,this.b1.angvel-=this.rn1a*c*this.b1.iinertia)},applyImpulsePos:function(){if(2==this.ptype){var a=this.c1,b=0,c=0,b=this.b2.axisy*a.lr2x-this.b2.axisx*a.lr2y,c=a.lr2x*this.b2.axisx+a.lr2y*this.b2.axisy,b=b+1*this.b2.posx,c=c+
1*this.b2.posy,d=0,e=0,d=this.b1.axisy*a.lr1x-this.b1.axisx*a.lr1y,e=a.lr1x*this.b1.axisx+a.lr1y*this.b1.axisy,d=d+1*this.b1.posx,e=e+1*this.b1.posy,h=a=0,a=b-d,h=c-e,g=Math.sqrt(a*a+h*h),f=this.radius-v.collisionSlop,i=g-f;0>a*this.nx+h*this.ny&&(a=-a,h=-h,i-=this.radius);0>i&&(g<v.epsilon?0!=this.b1.smass?this.b1.posx+=10*v.epsilon:this.b2.posx+=10*v.epsilon:(i=1/g,a*=i,h*=i,b=0.5*(d+b),c=0.5*(e+c),d=b-this.b1.posx,e=c-this.b1.posy,b-=this.b2.posx,c-=this.b2.posy,d=h*d-a*e,b=h*b-a*c,c=this.b2.smass+
b*b*this.b2.sinertia+this.b1.smass+d*d*this.b1.sinertia,0!=c&&(g=-this.biasCoef*(g-f)/c,c=f=0,f=a*g,c=h*g,a=this.b1.imass,this.b1.posx-=f*a,this.b1.posy-=c*a,this.b1.delta_rot(-d*this.b1.iinertia*g),a=this.b2.imass,this.b2.posx+=f*a,this.b2.posy+=c*a,this.b2.delta_rot(b*this.b2.iinertia*g))))}else{var j=i=h=a=0,e=b=0;0==this.ptype?(a=this.b1.axisy*this.lnormx-this.b1.axisx*this.lnormy,h=this.lnormx*this.b1.axisx+this.lnormy*this.b1.axisy,f=this.lproj+(a*this.b1.posx+h*this.b1.posy),i=this.b2.axisy*
this.c1.lr1x-this.b2.axisx*this.c1.lr1y,j=this.c1.lr1x*this.b2.axisx+this.c1.lr1y*this.b2.axisy,i+=1*this.b2.posx,j+=1*this.b2.posy,this.hpc2&&(b=this.b2.axisy*this.c2.lr1x-this.b2.axisx*this.c2.lr1y,e=this.c2.lr1x*this.b2.axisx+this.c2.lr1y*this.b2.axisy,b+=1*this.b2.posx,e+=1*this.b2.posy)):(a=this.b2.axisy*this.lnormx-this.b2.axisx*this.lnormy,h=this.lnormx*this.b2.axisx+this.lnormy*this.b2.axisy,f=this.lproj+(a*this.b2.posx+h*this.b2.posy),i=this.b1.axisy*this.c1.lr1x-this.b1.axisx*this.c1.lr1y,
j=this.c1.lr1x*this.b1.axisx+this.c1.lr1y*this.b1.axisy,i+=1*this.b1.posx,j+=1*this.b1.posy,this.hpc2&&(b=this.b1.axisy*this.c2.lr1x-this.b1.axisx*this.c2.lr1y,e=this.c2.lr1x*this.b1.axisx+this.c2.lr1y*this.b1.axisy,b+=1*this.b1.posx,e+=1*this.b1.posy));g=i*a+j*h-f-this.radius;g+=v.collisionSlop;c=0;this.hpc2&&(c=b*a+e*h-f-this.radius,c+=v.collisionSlop);if(0>g||0>c){this.rev&&(a=-a,h=-h);var k=0,l=0,k=i-this.b1.posx,l=j-this.b1.posy,d=f=0,f=i-this.b2.posx,d=j-this.b2.posy,m=0,o=0,j=i=0;if(this.hpc2){m=
b-this.b1.posx;o=e-this.b1.posy;i=b-this.b2.posx;j=e-this.b2.posy;b=h*k-a*l;f=h*f-a*d;e=h*m-a*o;d=h*i-a*j;i=this.b1.smass+this.b2.smass;this.kMassa=i+this.b1.sinertia*b*b+this.b2.sinertia*f*f;this.kMassb=i+this.b1.sinertia*b*e+this.b2.sinertia*f*d;this.kMassc=i+this.b1.sinertia*e*e+this.b2.sinertia*d*d;k=j=i=0;i=this.kMassa;j=this.kMassb;k=this.kMassc;l=g*this.biasCoef;m=c*this.biasCoef;c=g=0;g=-l;c=-m;o=this.kMassa*this.kMassc-this.kMassb*this.kMassb;if(o!=o)g=c=0;else if(0==o)g=0!=this.kMassa?g/
this.kMassa:0,c=0!=this.kMassc?c/this.kMassc:0;else var o=1/o,p=o*(this.kMassc*g-this.kMassb*c),c=o*(this.kMassa*c-this.kMassb*g),g=p;0<=g&&0<=c?(i=(g+c)*this.b1.imass,this.b1.posx-=a*i,this.b1.posy-=h*i,this.b1.delta_rot(-this.b1.iinertia*(b*g+e*c)),b=(g+c)*this.b2.imass,this.b2.posx+=a*b,this.b2.posy+=h*b,this.b2.delta_rot(this.b2.iinertia*(f*g+d*c))):(g=-l/i,c=0,0<=g&&0<=j*g+m?(i=(g+c)*this.b1.imass,this.b1.posx-=a*i,this.b1.posy-=h*i,this.b1.delta_rot(-this.b1.iinertia*(b*g+e*c)),b=(g+c)*this.b2.imass,
this.b2.posx+=a*b,this.b2.posy+=h*b,this.b2.delta_rot(this.b2.iinertia*(f*g+d*c))):(g=0,c=-m/k,0<=c&&0<=j*c+l&&(i=(g+c)*this.b1.imass,this.b1.posx-=a*i,this.b1.posy-=h*i,this.b1.delta_rot(-this.b1.iinertia*(b*g+e*c)),b=(g+c)*this.b2.imass,this.b2.posx+=a*b,this.b2.posy+=h*b,this.b2.delta_rot(this.b2.iinertia*(f*g+d*c)))))}else b=h*k-a*l,f=h*f-a*d,c=this.b2.smass+f*f*this.b2.sinertia+this.b1.smass+b*b*this.b1.sinertia,0!=c&&(g=-this.biasCoef*g/c,d=c=0,c=a*g,d=h*g,a=this.b1.imass,this.b1.posx-=c*a,
this.b1.posy-=d*a,this.b1.delta_rot(-b*this.b1.iinertia*g),a=this.b2.imass,this.b2.posx+=c*a,this.b2.posy+=d*a,this.b2.delta_rot(f*this.b2.iinertia*g))}}},__class__:mc});var ac=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.dist=this.elasticity=0;this.fresh=!1;this.stamp=this.hash=0;this.active=this.posOnly=!1;this.arbiter=this.inner=null;this.px=this.py=0;this.outer=null;this.inner=new ql};f["zpp_nape.dynamics.ZPP_Contact"]=ac;ac.__name__=["zpp_nape","dynamics",
"ZPP_Contact"];ac.prototype={wrapper:function(){null==this.outer&&(ac.internal=!0,this.outer=new lm,ac.internal=!1,this.outer.zpp_inner=this);return this.outer},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.next;this.pop();return a},
inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:ac};var ql=function(){this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.r1x=this.r1y=this.r2x=this.r2y=this.nMass=this.tMass=this.bounce=this.friction=this.jnAcc=this.jtAcc=this.lr1x=this.lr1y=this.lr2x=this.lr2y=0};f["zpp_nape.dynamics.ZPP_IContact"]=
ql;ql.__name__=["zpp_nape","dynamics","ZPP_IContact"];ql.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=
!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:ql};var Wb=function(){this.collisionGroup=this.collisionMask=this.sensorGroup=this.sensorMask=this.fluidGroup=this.fluidMask=0;this.next=this.outer=this.shapes=null;this.shapes=new xf;this.collisionGroup=this.sensorGroup=this.fluidGroup=1;this.collisionMask=this.sensorMask=this.fluidMask=-1};f["zpp_nape.dynamics.ZPP_InteractionFilter"]=Wb;Wb.__name__=["zpp_nape","dynamics","ZPP_InteractionFilter"];Wb.prototype={wrapper:function(){if(null==
this.outer){this.outer=new mm;var a=this.outer.zpp_inner;a.outer=null;a.next=Wb.zpp_pool;Wb.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},shouldCollide:function(a){return 0!=(this.collisionMask&a.collisionGroup)&&0!=(a.collisionMask&this.collisionGroup)},shouldSense:function(a){return 0!=(this.sensorMask&a.sensorGroup)&&0!=(a.sensorMask&this.sensorGroup)},shouldFlow:function(a){return 0!=(this.fluidMask&a.fluidGroup)&&0!=(a.fluidMask&this.fluidGroup)},invalidate:function(){for(var a=this.shapes.head;null!=
a;)a.elt.invalidate_filter(),a=a.next},__class__:Wb};var nn=function(){this.depth=0;this.group=this.interactors=null;this.ignore=!1;this.outer=null};f["zpp_nape.dynamics.ZPP_InteractionGroup"]=nn;nn.__name__=["zpp_nape","dynamics","ZPP_InteractionGroup"];nn.prototype={__class__:nn};var $a=function(){this.wrap_max=null;this.maxx=this.maxy=0;this.wrap_min=null;this.minx=this.miny=0;this.outer=this.next=null;this._immutable=!1;this._invalidate=this._validate=null};f["zpp_nape.geom.ZPP_AABB"]=$a;$a.__name__=
["zpp_nape","geom","ZPP_AABB"];$a.get=function(a,b,c,d){var e;null==$a.zpp_pool?e=new $a:(e=$a.zpp_pool,$a.zpp_pool=e.next,e.next=null);null;e.minx=a;e.miny=b;e.maxx=c;e.maxy=d;return e};$a.prototype={validate:function(){null!=this._validate&&this._validate()},wrapper:function(){if(null==this.outer){this.outer=new nm;var a=this.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a.wrap_min=a.wrap_max=null;a._invalidate=null;a._validate=null;a.next=$a.zpp_pool;$a.zpp_pool=a;this.outer.zpp_inner=
this}return this.outer},width:function(){return this.maxx-this.minx},height:function(){return this.maxy-this.miny},perimeter:function(){return 2*(this.maxx-this.minx+(this.maxy-this.miny))},intersectY:function(a){return!(a.miny>this.maxy||this.miny>a.maxy)},intersect:function(a){return a.miny<=this.maxy&&this.miny<=a.maxy&&a.minx<=this.maxx&&this.minx<=a.maxx},combine:function(a){a.minx<this.minx&&(this.minx=a.minx);a.maxx>this.maxx&&(this.maxx=a.maxx);a.miny<this.miny&&(this.miny=a.miny);a.maxy>
this.maxy&&(this.maxy=a.maxy)},contains:function(a){return a.minx>=this.minx&&a.miny>=this.miny&&a.maxx<=this.maxx&&a.maxy<=this.maxy},setCombine:function(a,b){this.minx=a.minx<b.minx?a.minx:b.minx;this.miny=a.miny<b.miny?a.miny:b.miny;this.maxx=a.maxx>b.maxx?a.maxx:b.maxx;this.maxy=a.maxy>b.maxy?a.maxy:b.maxy},setExpand:function(a,b){this.minx=a.minx-b;this.miny=a.miny-b;this.maxx=a.maxx+b;this.maxy=a.maxy+b},toString:function(){return"{ x: "+this.minx+" y: "+this.miny+" w: "+(this.maxx-this.minx)+
" h: "+(this.maxy-this.miny)+" }"},__class__:$a};var Hh=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_Vec2"]=Hh;Hh.__name__=["zpp_nape","util","ZNPList_ZPP_Vec2"];Hh.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==xc.zpp_pool?b=new xc:(b=xc.zpp_pool,xc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,
b)},inlined_insert:function(a,b){var c;null==xc.zpp_pool?c=new xc:(c=xc.zpp_pool,xc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=xc.zpp_pool;xc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},
inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=xc.zpp_pool;xc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<
a--&&null!=b;)b=b.next;return b},__class__:Hh};var $=function(){};f["zpp_nape.geom.ZPP_Collide"]=$;$.__name__=["zpp_nape","geom","ZPP_Collide"];$.contactCollide=function(a,b,c,d){if(b.type==g.id_ShapeType_POLYGON)if(a.type==g.id_ShapeType_POLYGON){for(var e=!0,h=-1.0E100,f=-1,i=null,j=null,k=a.polygon.edges.head;null!=k;){for(var l=k.elt,m=1.0E100,o=b.polygon.gverts.next;null!=o;){var p=o,p=l.gnormx*p.x+l.gnormy*p.y;p<m&&(m=p);if(m-l.gprojection<=h)break;o=o.next}m-=l.gprojection;if(0<=m){e=!1;break}m>
h&&(h=m,i=l,f=1);k=k.next}if(e){for(k=b.polygon.edges.head;null!=k;){l=k.elt;m=1.0E100;for(o=a.polygon.gverts.next;null!=o;){p=o;p=l.gnormx*p.x+l.gnormy*p.y;p<m&&(m=p);if(m-l.gprojection<=h)break;o=o.next}m-=l.gprojection;if(0<=m){e=!1;break}m>h&&(h=m,j=l,f=2);k=k.next}if(e){1==f?(a=b.polygon,b=i,j=1):(a=a.polygon,b=j,j=-1);i=null;e=1.0E100;for(h=a.edges.head;null!=h;)k=h.elt,l=b.gnormx*k.gnormx+b.gnormy*k.gnormy,l<e&&(e=l,i=k),h=h.next;var h=e=0,e=i.gp0.x,h=i.gp0.y,l=k=0,k=i.gp1.x,l=i.gp1.y,o=m=
0,m=k-e,o=l-h,s=b.gnormy*e-b.gnormx*h,p=b.gnormy*k-b.gnormx*l,t=1/(p-s),s=(-b.tp1-s)*t;s>v.epsilon&&(e+=m*s,h+=o*s);p=(-b.tp0-p)*t;p<-v.epsilon&&(k+=m*p,l+=o*p);o=m=0;o=j;m=b.gnormx*o;o*=b.gnormy;c.lnormx=b.lnormx;c.lnormy=b.lnormy;c.lproj=b.lprojection;c.radius=0;c.rev=d!=(-1==j);c.ptype=c.rev?1:0;p=e*b.gnormx+h*b.gnormy-b.gprojection;j=k*b.gnormx+l*b.gnormy-b.gprojection;if(0<p&&0<j)return!1;d&&(m=-m,o=-o);d=c.injectContact(e-0.5*b.gnormx*p,h-0.5*b.gnormy*p,m,o,p,c.rev?1:0,0<p);e-=1*a.body.posx;
h-=1*a.body.posy;d.inner.lr1x=e*a.body.axisy+h*a.body.axisx;d.inner.lr1y=h*a.body.axisy-e*a.body.axisx;d=c.injectContact(k-0.5*b.gnormx*j,l-0.5*b.gnormy*j,m,o,j,c.rev?0:1,0<j);k-=1*a.body.posx;l-=1*a.body.posy;d.inner.lr1x=k*a.body.axisy+l*a.body.axisx;d.inner.lr1y=l*a.body.axisy-k*a.body.axisx;1==f?(c.__ref_edge1=b,c.__ref_edge2=i):(c.__ref_edge2=b,c.__ref_edge1=i);return!0}}}else{j=-1.0E100;i=!0;e=f=null;h=b.polygon.gverts.next;for(k=b.polygon.edges.head;null!=k;){l=k.elt;m=l.gnormx*a.circle.worldCOMx+
l.gnormy*a.circle.worldCOMy-l.gprojection-a.circle.radius;if(0<m){i=!1;break}m>j&&(j=m,f=l,e=h);h=h.next;k=k.next}if(i){i=e;e=null==e.next?b.polygon.gverts.next:e.next;h=a.circle.worldCOMy*f.gnormx-a.circle.worldCOMx*f.gnormy;if(h<=i.y*f.gnormx-i.x*f.gnormy)return j=a.circle.radius,h=e=0,e=i.x-a.circle.worldCOMx,h=i.y-a.circle.worldCOMy,k=e*e+h*h,k>j*j?j=null:k<v.epsilon*v.epsilon?j=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-j,0,null):(k=1/Math.sqrt(k),l=k<v.epsilon?1.0E100:1/k,m=
0.5+(a.circle.radius-0.5*j)*k,j=d?c.injectContact(a.circle.worldCOMx+e*m,a.circle.worldCOMy+h*m,-e*k,-h*k,l-j,0,null):c.injectContact(a.circle.worldCOMx+e*m,a.circle.worldCOMy+h*m,e*k,h*k,l-j,0,null)),null!=j&&(e=j.inner,c.ptype=2,k=h=0,h=i.x-b.polygon.body.posx,k=i.y-b.polygon.body.posy,c.__ref_edge1=f,c.__ref_vertex=-1,d?(e.lr1x=h*b.polygon.body.axisy+k*b.polygon.body.axisx,e.lr1y=k*b.polygon.body.axisy-h*b.polygon.body.axisx,e.lr2x=a.circle.localCOMx,e.lr2y=a.circle.localCOMy):(e.lr2x=h*b.polygon.body.axisy+
k*b.polygon.body.axisx,e.lr2y=k*b.polygon.body.axisy-h*b.polygon.body.axisx,e.lr1x=a.circle.localCOMx,e.lr1y=a.circle.localCOMy),c.radius=a.circle.radius),null!=j;if(h>=e.y*f.gnormx-e.x*f.gnormy)return i=a.circle.radius,h=j=0,j=e.x-a.circle.worldCOMx,h=e.y-a.circle.worldCOMy,k=j*j+h*h,k>i*i?i=null:k<v.epsilon*v.epsilon?i=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-i,0,null):(k=1/Math.sqrt(k),l=k<v.epsilon?1.0E100:1/k,m=0.5+(a.circle.radius-0.5*i)*k,i=d?c.injectContact(a.circle.worldCOMx+
j*m,a.circle.worldCOMy+h*m,-j*k,-h*k,l-i,0,null):c.injectContact(a.circle.worldCOMx+j*m,a.circle.worldCOMy+h*m,j*k,h*k,l-i,0,null)),null!=i&&(j=i.inner,c.ptype=2,k=h=0,h=e.x-b.polygon.body.posx,k=e.y-b.polygon.body.posy,c.__ref_edge1=f,c.__ref_vertex=1,d?(j.lr1x=h*b.polygon.body.axisy+k*b.polygon.body.axisx,j.lr1y=k*b.polygon.body.axisy-h*b.polygon.body.axisx,j.lr2x=a.circle.localCOMx,j.lr2y=a.circle.localCOMy):(j.lr2x=h*b.polygon.body.axisy+k*b.polygon.body.axisx,j.lr2y=k*b.polygon.body.axisy-h*
b.polygon.body.axisx,j.lr1x=a.circle.localCOMx,j.lr1y=a.circle.localCOMy),c.radius=a.circle.radius),null!=i;i=b=0;i=a.circle.radius+0.5*j;b=f.gnormx*i;i*=f.gnormy;h=e=0;e=a.circle.worldCOMx-b;h=a.circle.worldCOMy-i;b=d?c.injectContact(e,h,f.gnormx,f.gnormy,j,0,null):c.injectContact(e,h,-f.gnormx,-f.gnormy,j,0,null);c.ptype=d?0:1;c.lnormx=f.lnormx;c.lnormy=f.lnormy;c.rev=!d;c.lproj=f.lprojection;c.radius=a.circle.radius;b.inner.lr1x=a.circle.localCOMx;b.inner.lr1y=a.circle.localCOMy;c.__ref_edge1=
f;c.__ref_vertex=0;return!0}}else if(f=a.circle.radius+b.circle.radius,j=i=0,i=b.circle.worldCOMx-a.circle.worldCOMx,j=b.circle.worldCOMy-a.circle.worldCOMy,e=i*i+j*j,e>f*f?f=null:e<v.epsilon*v.epsilon?f=c.injectContact(a.circle.worldCOMx,a.circle.worldCOMy,1,0,-f,0,null):(e=1/Math.sqrt(e),h=e<v.epsilon?1.0E100:1/e,k=0.5+(a.circle.radius-0.5*f)*e,f=d?c.injectContact(a.circle.worldCOMx+i*k,a.circle.worldCOMy+j*k,-i*e,-j*e,h-f,0,null):c.injectContact(a.circle.worldCOMx+i*k,a.circle.worldCOMy+j*k,i*
e,j*e,h-f,0,null)),null!=f)return f=f.inner,d?(f.lr1x=b.circle.localCOMx,f.lr1y=b.circle.localCOMy,f.lr2x=a.circle.localCOMx,f.lr2y=a.circle.localCOMy):(f.lr1x=a.circle.localCOMx,f.lr1y=a.circle.localCOMy,f.lr2x=b.circle.localCOMx,f.lr2y=b.circle.localCOMy),c.radius=a.circle.radius+b.circle.radius,c.ptype=2,!0;return!1};$.testCollide_safe=function(a,b){if(b.type==g.id_ShapeType_CIRCLE)var c=a,a=b,b=c;return $.testCollide(a,b)};$.testCollide=function(a,b){if(b.type==g.id_ShapeType_POLYGON){if(a.type==
g.id_ShapeType_POLYGON){for(var c=!0,d=a.polygon.edges.head;null!=d;){for(var e=d.elt,h=1.0E100,f=b.polygon.gverts.next;null!=f;){var i=f,i=e.gnormx*i.x+e.gnormy*i.y;i<h&&(h=i);f=f.next}h-=e.gprojection;if(0<h){c=!1;break}d=d.next}if(c){for(d=b.polygon.edges.head;null!=d;){e=d.elt;h=1.0E100;for(f=a.polygon.gverts.next;null!=f;)i=f,i=e.gnormx*i.x+e.gnormy*i.y,i<h&&(h=i),f=f.next;h-=e.gprojection;if(0<h){c=!1;break}d=d.next}return c}}else{d=c=null;e=!0;h=-1.0E100;f=b.polygon.gverts.next;for(i=b.polygon.edges.head;null!=
i;){var j=i.elt,k=j.gnormx*a.circle.worldCOMx+j.gnormy*a.circle.worldCOMy-j.gprojection-a.circle.radius;if(0<k){e=!1;break}k>h&&(h=k,c=j,d=f);f=f.next;i=i.next}if(e){e=d;d=null==d.next?b.polygon.gverts.next:d.next;h=a.circle.worldCOMy*c.gnormx-a.circle.worldCOMx*c.gnormy;if(h<=e.y*c.gnormx-e.x*c.gnormy)return c=a.circle.radius,h=d=0,d=e.x-a.circle.worldCOMx,h=e.y-a.circle.worldCOMy,d*d+h*h<=c*c;return h>=d.y*c.gnormx-d.x*c.gnormy?(c=a.circle.radius,h=e=0,e=d.x-a.circle.worldCOMx,h=d.y-a.circle.worldCOMy,
e*e+h*h<=c*c):!0}}return!1}c=a.circle.radius+b.circle.radius;e=d=0;d=b.circle.worldCOMx-a.circle.worldCOMx;e=b.circle.worldCOMy-a.circle.worldCOMy;return d*d+e*e<=c*c};$.flowCollide=function(a,b,c){if(b.type==g.id_ShapeType_POLYGON){if(a.type==g.id_ShapeType_POLYGON){for(var d=[],e=[],h=!0,f=!0,i=a.polygon.edges.head;null!=i;){for(var j=i.elt,k=1.0E100,l=0,m=b.polygon.gverts.next;null!=m;){var o=m,p=j.gnormx*o.x+j.gnormy*o.y;p<k&&(k=p);p>=j.gprojection+v.epsilon&&(e[l]=!0,f=!1);l++;m=m.next}k-=j.gprojection;
if(0<k){h=!1;break}i=i.next}if(f)return b.polygon.validate_worldCOM(),c.overlap=b.polygon.area,c.centroidx=b.polygon.worldCOMx,c.centroidy=b.polygon.worldCOMy,null,!0;if(h){for(var f=!0,s=b.polygon.edges.head;null!=s;){for(var t=s.elt,r=1.0E100,q=0,u=a.polygon.gverts.next;null!=u;){var x=u,A=t.gnormx*x.x+t.gnormy*x.y;A<r&&(r=A);A>=t.gprojection+v.epsilon&&(d[q]=!0,f=!1);q++;u=u.next}r-=t.gprojection;if(0<r){h=!1;break}s=s.next}if(f)return a.polygon.validate_worldCOM(),c.overlap=a.polygon.area,c.centroidx=
a.polygon.worldCOMx,c.centroidy=a.polygon.worldCOMy,null,!0;if(h){for(;null!=$.flowpoly.head;){var F=$.flowpoly.pop_unsafe();if(!F._inuse){var C=F;null!=C.outer&&(C.outer.zpp_inner=null,C.outer=null);C._isimmutable=null;C._validate=null;C._invalidate=null;C.next=Ea.zpp_pool;Ea.zpp_pool=C}}for(var w=null,E=!1,z=a.polygon.gverts.next,D=0,B=b.polygon.gverts.next,y=0,H=0,L=b.polygon.edgeCnt;H<L;){var I=H++;if(e[I])B=B.next;else{y=I;break}}if(null==B){for(var B=b.polygon.gverts.next,E=!0,K=0,N=a.polygon.edgeCnt;K<
N;){var Q=K++;if(d[Q])z=z.next;else{D=Q;break}}null==z?z=a.polygon.gverts.next:($.flowpoly.add(z),w=$.flowpoly.head.elt)}else $.flowpoly.add(B),w=$.flowpoly.head.elt;var O=1;if(null==$.flowpoly.head){for(var X=!0,V=a.polygon.gverts.next,J=V,M=V.next;null!=M;){for(var S=M,T=2,R=b.polygon.gverts.next,P=R,W=R.next;null!=W;){var U=W,aa=0;(function(){var a=0,b=0,a=J.x-P.x,b=J.y-P.y,c=0,d=0,c=S.x-J.x,d=S.y-J.y,e=0,h=0,e=U.x-P.x,h=U.y-P.y,g=d*e-c*h;g*g>v.epsilon*v.epsilon?(g=1/g,e=(h*a-e*b)*g,e>v.epsilon&&
e<1-v.epsilon?(a=(d*a-c*b)*g,a>v.epsilon&&a<1-v.epsilon?(aa=e,a=!0):a=!1):a=!1):a=!1;return a})(this)&&aa<T&&(T=aa,B=R);R=W;P=U;W=W.next}var ca=W=b.polygon.gverts.next,la=0;(function(){var a=0,b=0,a=J.x-P.x,b=J.y-P.y,c=0,d=0,c=S.x-J.x,d=S.y-J.y,e=0,h=0,e=ca.x-P.x,h=ca.y-P.y,g=d*e-c*h;g*g>v.epsilon*v.epsilon?(g=1/g,e=(h*a-e*b)*g,e>v.epsilon&&e<1-v.epsilon?(a=(d*a-c*b)*g,a>v.epsilon&&a<1-v.epsilon?(la=e,a=!0):a=!1):a=!1):a=!1;return a})(this)&&la<T&&(T=la,B=R);if(2!=T){var ka=0,ma=0,ja=T,ka=J.x+(S.x-
J.x)*ja,ma=J.y+(S.y-J.y)*ja,w=Ea.get(ka,ma,null);$.flowpoly.add(w);E=!0;z=V;X=!1;break}V=M;J=S;M=M.next}if(X){for(var fa=M=a.polygon.gverts.next,G=2,ga=b.polygon.gverts.next,ea=ga,da=ga.next;null!=da;){var Z=da,pa=0;(function(){var a=0,b=0,a=J.x-ea.x,b=J.y-ea.y,c=0,d=0,c=fa.x-J.x,d=fa.y-J.y,e=0,h=0,e=Z.x-ea.x,h=Z.y-ea.y,g=d*e-c*h;g*g>v.epsilon*v.epsilon?(g=1/g,e=(h*a-e*b)*g,e>v.epsilon&&e<1-v.epsilon?(a=(d*a-c*b)*g,a>v.epsilon&&a<1-v.epsilon?(pa=e,a=!0):a=!1):a=!1):a=!1;return a})(this)&&pa<G&&(G=
pa,B=ga);ga=da;ea=Z;da=da.next}var xa=da=b.polygon.gverts.next,wa=0;(function(){var a=0,b=0,a=J.x-ea.x,b=J.y-ea.y,c=0,d=0,c=fa.x-J.x,d=fa.y-J.y,e=0,h=0,e=xa.x-ea.x,h=xa.y-ea.y,g=d*e-c*h;g*g>v.epsilon*v.epsilon?(g=1/g,e=(h*a-e*b)*g,e>v.epsilon&&e<1-v.epsilon?(a=(d*a-c*b)*g,a>v.epsilon&&a<1-v.epsilon?(wa=e,a=!0):a=!1):a=!1):a=!1;return a})(this)&&wa<G&&(G=wa,B=ga);if(2!=G){var ia=0,ra=0,ta=G,ia=J.x+(fa.x-J.x)*ta,ra=J.y+(fa.y-J.y)*ta,w=Ea.get(ia,ra,null);$.flowpoly.add(w);E=!0;z=V}}O=2}for(;;)if(E)if(z=
z.next,D++,null==z&&(z=a.polygon.gverts.next,D=0),d[D]){var ba=$.flowpoly.head.elt,qa=z,na=B,ya=B.next;null==ya&&(ya=b.polygon.gverts.next);var ha=-1,za=null,Ha=0,Fa=0,Ia=ya,sa=ya;do{var Oa=sa,Da=0;if(function(){var a=0,b=0,a=na.x-ba.x,b=na.y-ba.y,c=0,d=0,c=Oa.x-na.x,d=Oa.y-na.y,e=0,h=0,e=qa.x-ba.x,h=qa.y-ba.y,g=d*e-c*h;g*g>v.epsilon*v.epsilon?(g=1/g,e=(h*a-e*b)*g,e>v.epsilon&&e<1-v.epsilon?(a=(d*a-c*b)*g,a>v.epsilon&&a<1-v.epsilon?(Da=e,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Da>=ha)if(za=B,Ha=y,
++Fa==O){ha=Da;sa=Ia;break}else ha=Da;na=Oa;B=sa;y++;y>=b.polygon.edgeCnt&&(y=0);sa=sa.next;null==sa&&(sa=b.polygon.gverts.next)}while(0);for(;sa!=Ia;){var Ra=sa,Ga=0;if(function(){var a=0,b=0,a=na.x-ba.x,b=na.y-ba.y,c=0,d=0,c=Ra.x-na.x,d=Ra.y-na.y,e=0,h=0,e=qa.x-ba.x,h=qa.y-ba.y,g=d*e-c*h;g*g>v.epsilon*v.epsilon?(g=1/g,e=(h*a-e*b)*g,e>v.epsilon&&e<1-v.epsilon?(a=(d*a-c*b)*g,a>v.epsilon&&a<1-v.epsilon?(Ga=e,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Ga>=ha)if(za=B,Ha=y,++Fa==O){ha=Ga;sa=Ia;break}else ha=
Ga;na=Ra;B=sa;y++;y>=b.polygon.edgeCnt&&(y=0);sa=sa.next;null==sa&&(sa=b.polygon.gverts.next)}if(null==za)break;var ua=za,Ma=za.next;null==Ma&&(Ma=b.polygon.gverts.next);var Pa=Ma,Sa=0,ib=0,eb=ha,Sa=ua.x+(Pa.x-ua.x)*eb,ib=ua.y+(Pa.y-ua.y)*eb;if(null!=w&&Mc.vec_dsq(Sa,ib,w.x,w.y)<v.epsilon)break;$.flowpoly.add(Ea.get(Sa,ib,null));null==w&&(w=$.flowpoly.head.elt);B=za;y=Ha;E=!E;O=2}else{var oa=z;if(null!=w&&Mc.vec_dsq(oa.x,oa.y,w.x,w.y)<v.epsilon)break;$.flowpoly.add(oa);null==w&&(w=$.flowpoly.head.elt);
O=1}else if(B=B.next,y++,null==B&&(B=b.polygon.gverts.next,y=0),e[y]){var Ca=$.flowpoly.head.elt,Ja=B,Y=z,Ta=z.next;null==Ta&&(Ta=a.polygon.gverts.next);var Aa=-1,cb=null,$a=0,ab=0,Na=Ta,va=Ta;do{var jb=va,fb=0;if(function(){var a=0,b=0,a=Y.x-Ca.x,b=Y.y-Ca.y,c=0,d=0,c=jb.x-Y.x,d=jb.y-Y.y,e=0,h=0,e=Ja.x-Ca.x,h=Ja.y-Ca.y,g=d*e-c*h;g*g>v.epsilon*v.epsilon?(g=1/g,e=(h*a-e*b)*g,e>v.epsilon&&e<1-v.epsilon?(a=(d*a-c*b)*g,a>v.epsilon&&a<1-v.epsilon?(fb=e,a=!0):a=!1):a=!1):a=!1;return a}(this)&&fb>=Aa)if(cb=
z,$a=D,++ab==O){Aa=fb;va=Na;break}else Aa=fb;Y=jb;z=va;D++;D>=a.polygon.edgeCnt&&(D=0);va=va.next;null==va&&(va=a.polygon.gverts.next)}while(0);for(;va!=Na;){var Cn=va,Va=0;if(function(){var a=0,b=0,a=Y.x-Ca.x,b=Y.y-Ca.y,c=0,d=0,c=Cn.x-Y.x,d=Cn.y-Y.y,e=0,h=0,e=Ja.x-Ca.x,h=Ja.y-Ca.y,g=d*e-c*h;g*g>v.epsilon*v.epsilon?(g=1/g,e=(h*a-e*b)*g,e>v.epsilon&&e<1-v.epsilon?(a=(d*a-c*b)*g,a>v.epsilon&&a<1-v.epsilon?(Va=e,a=!0):a=!1):a=!1):a=!1;return a}(this)&&Va>=Aa)if(cb=z,$a=D,++ab==O){Aa=Va;va=Na;break}else Aa=
Va;Y=Cn;z=va;D++;D>=a.polygon.edgeCnt&&(D=0);va=va.next;null==va&&(va=a.polygon.gverts.next)}if(null==cb)break;var Qa=cb,gb=cb.next;null==gb&&(gb=a.polygon.gverts.next);var ob=gb,kb=0,hb=0,rb=Aa,kb=Qa.x+(ob.x-Qa.x)*rb,hb=Qa.y+(ob.y-Qa.y)*rb;if(null!=w&&Mc.vec_dsq(kb,hb,w.x,w.y)<v.epsilon)break;$.flowpoly.add(Ea.get(kb,hb,null));null==w&&(w=$.flowpoly.head.elt);z=cb;D=$a;E=!E;O=2}else{var qb=B;if(null!=w&&Mc.vec_dsq(qb.x,qb.y,w.x,w.y)<v.epsilon)break;$.flowpoly.add(qb);null==w&&(w=$.flowpoly.head.elt);
O=1}if(null!=$.flowpoly.head&&null!=$.flowpoly.head.next&&null!=$.flowpoly.head.next.next){for(var Ka=0,Za=0,Ua=0,Ka=Ua=Za=0,Ba=$.flowpoly.head,lb=Ba.elt,Ba=Ba.next,bc=Ba.elt,Ba=Ba.next;null!=Ba;)var mb=Ba.elt,Ka=Ka+bc.x*(mb.y-lb.y),xb=mb.y*bc.x-mb.x*bc.y,Za=Za+(bc.x+mb.x)*xb,Ua=Ua+(bc.y+mb.y)*xb,lb=bc,bc=mb,Ba=Ba.next;var Ba=$.flowpoly.head,bb=Ba.elt,Ka=Ka+bc.x*(bb.y-lb.y),Db=bb.y*bc.x-bb.x*bc.y,Za=Za+(bc.x+bb.x)*Db,Ua=Ua+(bc.y+bb.y)*Db,lb=bc,bc=bb,Ba=Ba.next,pb=Ba.elt,Ka=Ka+bc.x*(pb.y-lb.y),Gb=
pb.y*bc.x-pb.x*bc.y,Za=Za+(bc.x+pb.x)*Gb,Ua=Ua+(bc.y+pb.y)*Gb,Ka=0.5*Ka,Ib=1/(6*Ka),Za=Za*Ib,Ua=Ua*Ib;c.overlap=-Ka;c.centroidx=Za;c.centroidy=Ua;null;return!0}}}return!1}for(var Cb=[],Mb=!0,nb=null,zb=null,Nb=-1.0E100,Ob=!0,Jb=b.polygon.gverts.next,Qb=0,Bb=b.polygon.edges.head;null!=Bb;){var ub=Bb.elt,vb=ub.gnormx*a.circle.worldCOMx+ub.gnormy*a.circle.worldCOMy;if(vb>ub.gprojection+a.circle.radius){Ob=!1;break}else vb+a.circle.radius>ub.gprojection+v.epsilon&&(Mb=!1,Cb[Qb]=!0);vb-=ub.gprojection+
a.circle.radius;vb>Nb&&(Nb=vb,nb=ub,zb=Jb);Jb=Jb.next;Qb++;Bb=Bb.next}if(Ob){if(Mb)return c.overlap=a.circle.area,c.centroidx=a.circle.worldCOMx,c.centroidy=a.circle.worldCOMy,null,!0;var Hb=zb,yb;yb=null==zb.next?b.polygon.gverts.next:zb.next;var dc=a.circle.worldCOMy*nb.gnormx-a.circle.worldCOMx*nb.gnormy;if(dc<=Hb.y*nb.gnormx-Hb.x*nb.gnormy?function(){var b=a.circle.radius,c=0,d=0,c=Hb.x-a.circle.worldCOMx,d=Hb.y-a.circle.worldCOMy;return c*c+d*d<=b*b}(this):dc>=yb.y*nb.gnormx-yb.x*nb.gnormy?function(){var b=
a.circle.radius,c=0,d=0,c=yb.x-a.circle.worldCOMx,d=yb.y-a.circle.worldCOMy;return c*c+d*d<=b*b}(this):1){for(var Kb=[],Sb=0,fc=!0,Ya=null,La=0,Fb=b.polygon.gverts.next;null!=Fb;){var nc=Fb,Cc=Mc.vec_dsq(nc.x,nc.y,a.circle.worldCOMx,a.circle.worldCOMy);(Kb[Sb]=Cc<=a.circle.radius*a.circle.radius)?(La=Sb,Ya=Fb):fc=!1;Sb++;Fb=Fb.next}if(fc)return b.polygon.validate_worldCOM(),c.overlap=b.polygon.area,c.centroidx=b.polygon.worldCOMx,c.centroidy=b.polygon.worldCOMy,null,!0;for(;null!=$.flowpoly.head;){var pc=
$.flowpoly.pop_unsafe();if(!pc._inuse){var sb=pc;null!=sb.outer&&(sb.outer.zpp_inner=null,sb.outer=null);sb._isimmutable=null;sb._validate=null;sb._invalidate=null;sb.next=Ea.zpp_pool;Ea.zpp_pool=sb}}$.flowsegs.clear();var cd=null,Xa=1;null==Ya?(Ya=b.polygon.gverts.next,Xa=2):$.flowpoly.add(cd=Ya);for(;0!=Xa;)if(1==Xa)if(Ya=Ya.next,null==Ya&&(Ya=b.polygon.gverts.next),La++,La>=b.polygon.edgeCnt&&(La=0),Kb[La]){if(Mc.vec_dsq(cd.x,cd.y,Ya.x,Ya.y)<v.epsilon)break;$.flowpoly.add(Ya)}else{var tb=$.flowpoly.head.elt,
Tb=Ya,Vb=0,Wb=0,Vb=Tb.x-tb.x,Wb=Tb.y-tb.y,Zb=0,$b=0,Zb=tb.x-a.circle.worldCOMx,$b=tb.y-a.circle.worldCOMy,Lb=Vb*Vb+Wb*Wb,ac=2*(Zb*Vb+$b*Wb),yc=Math.sqrt(ac*ac-4*Lb*(Zb*Zb+$b*$b-a.circle.radius*a.circle.radius)),Lb=1/(2*Lb),Dc=(-ac-yc)*Lb,qc=0,tc=0,Kc=Dc<v.epsilon?(-ac+yc)*Lb:Dc,qc=tb.x+(Tb.x-tb.x)*Kc,tc=tb.y+(Tb.y-tb.y)*Kc;if(Mc.vec_dsq(cd.x,cd.y,qc,tc)<v.epsilon)break;$.flowpoly.add(Ea.get(qc,tc,null));Xa=2}else if(2==Xa){var gc=Ya.next;null==gc&&(gc=b.polygon.gverts.next);var Wa=Ya,Xa=0,Eb=gc,dd=
gc;do{var db=dd,jc=La+1;jc==b.polygon.edgeCnt&&(jc=0);if(Cb[La])if(Kb[jc]){var kc=0,lc=0,kc=db.x-Wa.x,lc=db.y-Wa.y,mc=0,oc=0,mc=Wa.x-a.circle.worldCOMx,oc=Wa.y-a.circle.worldCOMy,ec=kc*kc+lc*lc,rc=2*(mc*kc+oc*lc),Tc=Math.sqrt(rc*rc-4*ec*(mc*mc+oc*oc-a.circle.radius*a.circle.radius)),ec=1/(2*ec),Uc=(-rc-Tc)*ec,Ic=0,Jc=0,Wc=Uc<v.epsilon?(-rc+Tc)*ec:Uc,Ic=Wa.x+(db.x-Wa.x)*Wc,Jc=Wa.y+(db.y-Wa.y)*Wc;if(Mc.vec_dsq(cd.x,cd.y,Ic,Jc)<v.epsilon){Xa=0;dd=Eb;break}var bd=Ea.get(Ic,Jc,null);$.flowsegs.add($.flowpoly.head.elt);
$.flowsegs.add(bd);$.flowpoly.add(bd);Xa=1;dd=Eb;break}else{var vc=0,wc=0,Lc,xc=0,zc=0,xc=db.x-Wa.x,zc=db.y-Wa.y,Ac=0,Bc=0,Ac=Wa.x-a.circle.worldCOMx,Bc=Wa.y-a.circle.worldCOMy,cc=xc*xc+zc*zc,sc=2*(Ac*xc+Bc*zc),Pb=sc*sc-4*cc*(Ac*Ac+Bc*Bc-a.circle.radius*a.circle.radius);Pb*Pb<v.epsilon?(vc=0>Pb?10:wc=-sc/(2*cc),Lc=!1):(Pb=Math.sqrt(Pb),cc=1/(2*cc),vc=(-sc-Pb)*cc,wc=(-sc+Pb)*cc,Lc=!0);if(vc<1-v.epsilon&&wc>v.epsilon){var Yc=0,ad=0,qd=vc,Yc=Wa.x+(db.x-Wa.x)*qd,ad=Wa.y+(db.y-Wa.y)*qd;if(null!=cd&&Mc.vec_dsq(cd.x,
cd.y,Yc,ad)<v.epsilon){Xa=0;dd=Eb;break}var rd=Ea.get(Yc,ad,null);null!=$.flowpoly.head&&($.flowsegs.add($.flowpoly.head.elt),$.flowsegs.add(rd));$.flowpoly.add(rd);null==cd&&(cd=$.flowpoly.head.elt);if(Lc){var sd=0,td=0,ud=wc,sd=Wa.x+(db.x-Wa.x)*ud,td=Wa.y+(db.y-Wa.y)*ud;$.flowpoly.add(Ea.get(sd,td,null))}}}Wa=db;Ya=dd;La=jc;dd=dd.next;null==dd&&(dd=b.polygon.gverts.next)}while(0);for(;dd!=Eb;){var wb=dd,Nc=La+1;Nc==b.polygon.edgeCnt&&(Nc=0);if(Cb[La])if(Kb[Nc]){var Oc=0,Pc=0,Oc=wb.x-Wa.x,Pc=wb.y-
Wa.y,Qc=0,Rc=0,Qc=Wa.x-a.circle.worldCOMx,Rc=Wa.y-a.circle.worldCOMy,Gc=Oc*Oc+Pc*Pc,Xc=2*(Qc*Oc+Rc*Pc),Cd=Math.sqrt(Xc*Xc-4*Gc*(Qc*Qc+Rc*Rc-a.circle.radius*a.circle.radius)),Gc=1/(2*Gc),Dd=(-Xc-Cd)*Gc,od=0,pd=0,Gd=Dd<v.epsilon?(-Xc+Cd)*Gc:Dd,od=Wa.x+(wb.x-Wa.x)*Gd,pd=Wa.y+(wb.y-Wa.y)*Gd;if(Mc.vec_dsq(cd.x,cd.y,od,pd)<v.epsilon){Xa=0;dd=Eb;break}var Hd=Ea.get(od,pd,null);$.flowsegs.add($.flowpoly.head.elt);$.flowsegs.add(Hd);$.flowpoly.add(Hd);Xa=1;dd=Eb;break}else{var gd=0,hd=0,xd,id=0,jd=0,id=wb.x-
Wa.x,jd=wb.y-Wa.y,kd=0,ld=0,kd=Wa.x-a.circle.worldCOMx,ld=Wa.y-a.circle.worldCOMy,Hc=id*id+jd*jd,Vc=2*(kd*id+ld*jd),uc=Vc*Vc-4*Hc*(kd*kd+ld*ld-a.circle.radius*a.circle.radius);uc*uc<v.epsilon?(gd=0>uc?10:hd=-Vc/(2*Hc),xd=!1):(uc=Math.sqrt(uc),Hc=1/(2*Hc),gd=(-Vc-uc)*Hc,hd=(-Vc+uc)*Hc,xd=!0);if(gd<1-v.epsilon&&hd>v.epsilon){var zd=0,Ad=0,Rd=gd,zd=Wa.x+(wb.x-Wa.x)*Rd,Ad=Wa.y+(wb.y-Wa.y)*Rd;if(null!=cd&&Mc.vec_dsq(cd.x,cd.y,zd,Ad)<v.epsilon){Xa=0;dd=Eb;break}var Sd=Ea.get(zd,Ad,null);null!=$.flowpoly.head&&
($.flowsegs.add($.flowpoly.head.elt),$.flowsegs.add(Sd));$.flowpoly.add(Sd);null==cd&&(cd=$.flowpoly.head.elt);if(xd){var Td=0,Ud=0,Vd=hd,Td=Wa.x+(wb.x-Wa.x)*Vd,Ud=Wa.y+(wb.y-Wa.y)*Vd;$.flowpoly.add(Ea.get(Td,Ud,null))}}}Wa=wb;Ya=dd;La=Nc;dd=dd.next;null==dd&&(dd=b.polygon.gverts.next)}}if(null==$.flowpoly.head)return!1;if(null==$.flowpoly.head.next){for(var Xd=!0,wd=b.polygon.edges.head;null!=wd;){var Od=wd.elt;if(Od.gnormx*a.circle.worldCOMx+Od.gnormy*a.circle.worldCOMy>Od.gprojection){Xd=!1;break}wd=
wd.next}return Xd?(c.overlap=a.circle.area,c.centroidx=a.circle.worldCOMx,c.centroidy=a.circle.worldCOMy,null,!0):!1}var Ec=0,Fc=0,Sc=0;if(null!=$.flowpoly.head.next.next){for(var Ab=0,Rb=0,Ub=0,Ab=Ub=Rb=0,pe=$.flowpoly.head,md=pe.elt,pe=pe.next,ed=pe.elt,pe=pe.next;null!=pe;)var Zc=pe.elt,Ab=Ab+ed.x*(Zc.y-md.y),be=Zc.y*ed.x-Zc.x*ed.y,Rb=Rb+(ed.x+Zc.x)*be,Ub=Ub+(ed.y+Zc.y)*be,md=ed,ed=Zc,pe=pe.next;var pe=$.flowpoly.head,$c=pe.elt,Ab=Ab+ed.x*($c.y-md.y),ce=$c.y*ed.x-$c.x*ed.y,Rb=Rb+(ed.x+$c.x)*ce,
Ub=Ub+(ed.y+$c.y)*ce,md=ed,ed=$c,pe=pe.next,nd=pe.elt,Ab=Ab+ed.x*(nd.y-md.y),de=nd.y*ed.x-nd.x*ed.y,Rb=Rb+(ed.x+nd.x)*de,Ub=Ub+(ed.y+nd.y)*de,Ab=0.5*Ab,ee=1/(6*Ab),Rb=Rb*ee,Ub=Ub*ee,fe=-Ab,Ec=Ec+Rb*fe,Fc=Fc+Ub*fe,Sc=Sc-Ab}else $.flowsegs.add($.flowpoly.head.elt),$.flowsegs.add($.flowpoly.head.next.elt);for(;null!=$.flowsegs.head;)var Ed=$.flowsegs.pop_unsafe(),Fd=$.flowsegs.pop_unsafe(),ge=0,he=0,ge=Fd.x-Ed.x,he=Fd.y-Ed.y,hc=0,ic=0,hc=ge,ic=he,ie=1/Math.sqrt(hc*hc+ic*ic),hc=hc*ie,ic=ic*ie,ye=hc,hc=
-ic,ic=ye,Xb=0,Yb=0,Xb=Ed.x+Fd.x,Yb=Ed.y+Fd.y,Xb=0.5*Xb,Yb=0.5*Yb,Xb=Xb-1*a.circle.worldCOMx,Yb=Yb-1*a.circle.worldCOMy,Wd=0,je=0,ke=hc*Xb+ic*Yb,Id=ke/a.circle.radius,vd=Math.sqrt(1-Id*Id),le=Math.acos(Id),Wd=a.circle.radius*(a.circle.radius*le-ke*vd),je=0.6666666666666666*a.circle.radius*vd*vd*vd/(le-Id*vd),Xb=a.circle.worldCOMx,Yb=a.circle.worldCOMy,me=je,Xb=Xb+hc*me,Yb=Yb+ic*me,ne=Wd,Ec=Ec+Xb*ne,Fc=Fc+Yb*ne,Sc=Sc+Wd;var oe=1/Sc,Ec=Ec*oe,Fc=Fc*oe;c.overlap=Sc;c.centroidx=Ec;c.centroidy=Fc;null;
return!0}}return!1}var fd=a.circle,Jd=b.circle,Kd=0,Ld=0,Kd=Jd.worldCOMx-fd.worldCOMx,Ld=Jd.worldCOMy-fd.worldCOMy,qe=fd.radius+Jd.radius,Yd=Kd*Kd+Ld*Ld;if(Yd>qe*qe)return!1;if(Yd<v.epsilon*v.epsilon)fd.radius<Jd.radius?(c.overlap=fd.area,c.centroidx=fd.worldCOMx,c.centroidy=fd.worldCOMy):(c.overlap=Jd.area,c.centroidx=Jd.worldCOMx,c.centroidy=Jd.worldCOMy);else{var Md=Math.sqrt(Yd),re=1/Md,Nd=0.5*(Md-(Jd.radius*Jd.radius-fd.radius*fd.radius)*re);if(Nd<=-fd.radius)c.overlap=fd.area,c.centroidx=fd.worldCOMx,
c.centroidy=fd.worldCOMy;else{var Zd=Md-Nd;if(Zd<=-Jd.radius)c.overlap=Jd.area,c.centroidx=Jd.worldCOMx,c.centroidy=Jd.worldCOMy;else{var $d=0,se=0,ae=0,te=0,Pd=Nd/fd.radius,yd=Math.sqrt(1-Pd*Pd),ue=Math.acos(Pd),$d=fd.radius*(fd.radius*ue-Nd*yd),se=0.6666666666666666*fd.radius*yd*yd*yd/(ue-Pd*yd),Qd=Zd/Jd.radius,Bd=Math.sqrt(1-Qd*Qd),ve=Math.acos(Qd),ae=Jd.radius*(Jd.radius*ve-Zd*Bd),te=0.6666666666666666*Jd.radius*Bd*Bd*Bd/(ve-Qd*Bd),we=$d+ae,xe=(se*$d+(Md-te)*ae)/we*re;c.overlap=we;c.centroidx=
fd.worldCOMx+Kd*xe;c.centroidy=fd.worldCOMy+Ld*xe}}}null;return!0};var Mb=function(){this.toiDistance=0;this.next=null;this.inner=!1;this.normal=this.shape=this.convex=this.position=this.ray=null};f["zpp_nape.geom.ZPP_ConvexRayResult"]=Mb;Mb.__name__=["zpp_nape","geom","ZPP_ConvexRayResult"];Mb.getRay=function(a,b,c,d){var e;null==Mb.rayPool?(Mb.internal=!0,e=new rm,e.zpp_inner=new Mb,e.zpp_inner.ray=e,Mb.internal=!1):(e=Mb.rayPool.ray,Mb.rayPool=Mb.rayPool.next,e.zpp_inner.next=null);var h=e.zpp_inner;
h.normal=a;a.zpp_inner._immutable=!0;h.toiDistance=b;h.inner=c;h.shape=d;return e};Mb.prototype={free:function(){this.normal.zpp_inner._immutable=!1;this.normal.dispose();null!=this.position&&(this.position.zpp_inner._immutable=!1,this.position.dispose());this.shape=null;this.toiDistance=0;null!=this.convex?(this.next=Mb.convexPool,Mb.convexPool=this):(this.next=Mb.rayPool,Mb.rayPool=this)},__class__:Mb};var on=function(){this.next=null;this.x=this.y=0};f["zpp_nape.geom.ZPP_GeomVert"]=on;on.__name__=
["zpp_nape","geom","ZPP_GeomVert"];on.prototype={__class__:on};var pn=function(){this.outer=this.vertices=null};f["zpp_nape.geom.ZPP_GeomPoly"]=pn;pn.__name__=["zpp_nape","geom","ZPP_GeomPoly"];pn.prototype={__class__:pn};var qn=function(){this.a=this.b=this.c=this.d=this.tx=this.ty=0};f["zpp_nape.geom.ZPP_Mat23"]=qn;qn.__name__=["zpp_nape","geom","ZPP_Mat23"];qn.prototype={__class__:qn};var rn=function(){this.x=null;this.m=this.n=0};f["zpp_nape.geom.ZPP_MatMN"]=rn;rn.__name__=["zpp_nape","geom",
"ZPP_MatMN"];rn.prototype={__class__:rn};var pm=function(){this.zip_dir=!1;this.maxdist=this.originx=this.originy=this.dirx=this.diry=this.idirx=this.idiry=this.normalx=this.normaly=this.absnormalx=this.absnormaly=0;this.origin=this.direction=null;this.origin=da.get(null,null,null);this.origin.zpp_inner._invalidate=m(this,this.origin_invalidate);this.direction=da.get(null,null,null);this.direction.zpp_inner._invalidate=m(this,this.direction_invalidate);this.diry=this.dirx=this.originy=this.originx=
0;this.zip_dir=!1};f["zpp_nape.geom.ZPP_Ray"]=pm;pm.__name__=["zpp_nape","geom","ZPP_Ray"];pm.prototype={origin_invalidate:function(a){this.originx=a.x;this.originy=a.y},direction_invalidate:function(a){this.dirx=a.x;this.diry=a.y;this.zip_dir=!0},validate_dir:function(){if(this.zip_dir){this.zip_dir=!1;var a=1/Math.sqrt(this.dirx*this.dirx+this.diry*this.diry);this.dirx*=a;this.diry*=a;this.idirx=1/this.dirx;this.idiry=1/this.diry;this.normalx=-this.diry;this.normaly=this.dirx;a=this.normalx;this.absnormalx=
0>a?-a:a;a=this.normaly;this.absnormaly=0>a?-a:a}},rayAABB:function(){var a=this.originx,b=a,c=this.originy,d=c;this.maxdist>=Math.POSITIVE_INFINITY?(0<this.dirx?b=Math.POSITIVE_INFINITY:0>this.dirx&&(b=Math.NEGATIVE_INFINITY),0<this.diry?d=Math.POSITIVE_INFINITY:0>this.diry&&(d=Math.NEGATIVE_INFINITY)):(b+=this.maxdist*this.dirx,d+=this.maxdist*this.diry);if(b<a)var e=a,a=b,b=e;d<c&&(e=c,c=d,d=e);return $a.get(a,c,b,d)},aabbtest:function(a){var b=this.normalx*(this.originx-0.5*(a.minx+a.maxx))+this.normaly*
(this.originy-0.5*(a.miny+a.maxy));return(0>b?-b:b)<0.5*this.absnormalx*(a.maxx-a.minx)+0.5*this.absnormaly*(a.maxy-a.miny)},aabbsect:function(a){var b=this.originy>=a.miny&&this.originy<=a.maxy;if(this.originx>=a.minx&&this.originx<=a.maxx&&b)return 0;b=-1;do if(!(0<=this.dirx&&this.originx>=a.maxx)&&!(0>=this.dirx&&this.originx<=a.minx)&&!(0<=this.diry&&this.originy>=a.maxy)&&!(0>=this.diry&&this.originy<=a.miny)){if(0<this.dirx){var c=(a.minx-this.originx)*this.idirx;if(0<=c&&c<=this.maxdist){var d=
this.originy+c*this.diry;if(d>=a.miny&&d<=a.maxy){b=c;break}}}else if(0>this.dirx&&(c=(a.maxx-this.originx)*this.idirx,0<=c&&c<=this.maxdist&&(d=this.originy+c*this.diry,d>=a.miny&&d<=a.maxy))){b=c;break}0<this.diry?(c=(a.miny-this.originy)*this.idiry,0<=c&&c<=this.maxdist&&(d=this.originx+c*this.dirx,d>=a.minx&&d<=a.maxx&&(b=c))):0>this.diry&&(c=(a.maxy-this.originy)*this.idiry,0<=c&&c<=this.maxdist&&(d=this.originx+c*this.dirx,d>=a.minx&&d<=a.maxx&&(b=c)))}while(0);return b},circlesect:function(a,
b,c){a.zip_worldCOM&&null!=a.body&&(a.zip_worldCOM=!1,a.zip_localCOM&&(a.zip_localCOM=!1,a.type==g.id_ShapeType_POLYGON&&a.polygon.__validate_localCOM(),null!=a.wrap_localCOM&&(a.wrap_localCOM.zpp_inner.x=a.localCOMx,a.wrap_localCOM.zpp_inner.y=a.localCOMy)),a.body.validate_axis(),a.worldCOMx=a.body.posx+(a.body.axisy*a.localCOMx-a.body.axisx*a.localCOMy),a.worldCOMy=a.body.posy+(a.localCOMx*a.body.axisx+a.localCOMy*a.body.axisy));var d=0,e=0,d=this.originx-a.worldCOMx,e=this.originy-a.worldCOMy,
h=this.dirx*this.dirx+this.diry*this.diry,f=2*(d*this.dirx+e*this.diry),d=d*d+e*e-a.radius*a.radius,e=f*f-4*h*d;if(0==e){if(h*=-f/2,(!b||0<d)&&0<h&&h<c&&h<=this.maxdist)return c=b=0,b=this.originx,c=this.originy,b+=this.dirx*h,c+=this.diry*h,b-=1*a.worldCOMx,c-=1*a.worldCOMy,f=1/Math.sqrt(b*b+c*c),b*=f,c*=f,0>=d&&(b=-b,c=-c),Mb.getRay(da.get(b,c,null),h,0>=d,a.outer)}else if(e=Math.sqrt(e),h=1/(2*h),d=(-f-e)*h,h*=-f+e,0<d){if(d<c&&d<=this.maxdist)return c=b=0,b=this.originx,c=this.originy,b+=this.dirx*
d,c+=this.diry*d,b-=1*a.worldCOMx,c-=1*a.worldCOMy,h=1/Math.sqrt(b*b+c*c),Mb.getRay(da.get(b*h,c*h,null),d,!1,a.outer)}else if(0<h&&b&&h<c&&h<=this.maxdist)return c=b=0,b=this.originx,c=this.originy,b+=this.dirx*h,c+=this.diry*h,b-=1*a.worldCOMx,c-=1*a.worldCOMy,d=1/Math.sqrt(b*b+c*c),Mb.getRay(da.get(-(b*d),-(c*d),null),h,!0,a.outer);return null},polysect:function(a,b,c){for(var d=null,e=a.edges.head,h=a.gverts.next,g=h,h=h.next;null!=h;){var f=h,i=e.elt;if(b||0>i.gnormx*this.dirx+i.gnormy*this.diry){var j=
0,k=0,j=f.x-g.x,k=f.y-g.y,l=i=0,i=g.x-this.originx,l=g.y-this.originy,g=k*this.dirx-j*this.diry;g*g>v.epsilon&&(g=1/g,j=(k*i-j*l)*g,0<j&&j<c&&j<=this.maxdist&&(g*=this.diry*i-this.dirx*l,g>-v.epsilon&&g<1+v.epsilon&&(c=j,d=e.elt)))}e=e.next;g=f;h=h.next}f=h=a.gverts.next;h=e.elt;if(b||0>h.gnormx*this.dirx+h.gnormy*this.diry)h=b=0,b=f.x-g.x,h=f.y-g.y,i=f=0,f=g.x-this.originx,i=g.y-this.originy,g=h*this.dirx-b*this.diry,g*g>v.epsilon&&(g=1/g,b=(h*f-b*i)*g,0<b&&b<c&&b<=this.maxdist&&(g*=this.diry*f-
this.dirx*i,g>-v.epsilon&&g<1+v.epsilon&&(c=b,d=e.elt)));if(null!=d){b=e=0;e=d.gnormx;b=d.gnormy;if(d=0<e*this.dirx+b*this.diry)e=-e,b=-b;return Mb.getRay(da.get(e,b,null),c,d,a.outer)}return null},__class__:pm};var yc=function(){this.slipped=this.failed=this.kinematic=!1;this.c1=this.c2=this.axis=null;this.frozen1=this.frozen2=!1;this.s1=this.s2=this.arbiter=null;this.toi=0;this.next=null;this.c1=new Ea;this.c2=new Ea;this.axis=new Ea};f["zpp_nape.geom.ZPP_ToiEvent"]=yc;yc.__name__=["zpp_nape","geom",
"ZPP_ToiEvent"];yc.prototype={__class__:yc};var wd=function(){};f["zpp_nape.geom.ZPP_SweepDistance"]=wd;wd.__name__=["zpp_nape","geom","ZPP_SweepDistance"];wd.dynamicSweep=function(a,b,c,d,e){null==e&&(e=!1);var h=a.s1,g=a.s2,f=h.body,i=g.body,j=0,k=0,j=i.velx-f.velx,k=i.vely-f.vely,l=f.angvel;0>l&&(l=-l);var m=i.angvel;0>m&&(m=-m);var o=h.sweepCoef*l+g.sweepCoef*m;if(!e&&!a.kinematic&&j*j+k*k<v.dynamicSweepLinearThreshold*v.dynamicSweepLinearThreshold&&o<v.dynamicSweepAngularThreshold)a.toi=-1,a.failed=
!0;else{for(var p=a.c1,l=a.c2,m=a.axis,s=0;;){f.sweepIntegrate(c*b);f.sweepValidate(h);i.sweepIntegrate(c*b);i.sweepValidate(g);var t=wd.distance(h,g,p,l,m,null)+d,r=j*m.x+k*m.y;if(t<v.distanceThresholdCCD){if(e)break;var q=0,u=0,q=p.x-f.posx,u=p.y-f.posy,w=0,x=0,w=l.x-i.posx,x=l.y-i.posy,q=r-f.sweep_angvel*(m.y*q-m.x*u)+i.sweep_angvel*(m.y*w-m.x*x);0<q&&(a.slipped=!0);if(0>=q||t<0.5*v.distanceThresholdCCD)break}r=(o-r)*b;if(0>=r){c=-1;break}r=t/r;1.0E-6>r&&(r=1.0E-6);c+=r;if(1<=c){c=1;f.sweepIntegrate(c*
b);f.sweepValidate(h);i.sweepIntegrate(c*b);i.sweepValidate(g);b=wd.distance(h,g,p,l,m,null)+d;j=j*m.x+k*m.y;if(b<v.distanceThresholdCCD){if(e)break;k=e=0;e=p.x-f.posx;k=p.y-f.posy;d=p=0;p=l.x-i.posx;d=l.y-i.posy;f=j-f.sweep_angvel*(m.y*e-m.x*k)+i.sweep_angvel*(m.y*p-m.x*d);0<f&&(a.slipped=!0);if(0>=f||b<0.5*v.distanceThresholdCCD)break}c=-1;break}if(40<=++s){t>d&&(a.failed=!0);break}}a.toi=c}};wd.staticSweep=function(a,b,c,d){var e=a.s1,h=a.s2,g=e.body,f=0,i=0,f=-g.velx,i=-g.vely,j=g.sweep_angvel;
0>j&&(j=-j);for(var k=e.sweepCoef*j,j=a.c1,l=a.c2,m=a.axis,o=0;;){g.sweepIntegrate(c*b);g.sweepValidate(e);var p=wd.distance(e,h,j,l,m,null)+d,r=f*m.x+i*m.y;if(p<v.distanceThresholdCCD){var s=0,t=0,s=j.x-g.posx,t=j.y-g.posy,s=r-g.sweep_angvel*(m.y*s-m.x*t);0<s&&(a.slipped=!0);if(0>=s||p<0.5*v.distanceThresholdCCD)break}r=(k-r)*b;if(0>=r){c=-1;break}r=p/r;1.0E-6>r&&(r=1.0E-6);c+=r;if(1<=c){c=1;g.sweepIntegrate(c*b);g.sweepValidate(e);b=wd.distance(e,h,j,l,m,null)+d;f=f*m.x+i*m.y;if(b<v.distanceThresholdCCD&&
(d=i=0,i=j.x-g.posx,d=j.y-g.posy,g=f-g.sweep_angvel*(m.y*i-m.x*d),0<g&&(a.slipped=!0),0>=g||b<0.5*v.distanceThresholdCCD))break;c=-1;break}if(40<=++o){p>d&&(a.failed=!0);break}}a.toi=c};wd.distance=function(a,b,c,d,e,h){null==h&&(h=1.0E100);if(a.type==g.id_ShapeType_CIRCLE&&b.type==g.id_ShapeType_CIRCLE){var f=a.circle,i=b.circle,j,k=0,l=0,k=i.worldCOMx-f.worldCOMx,l=i.worldCOMy-f.worldCOMy,m=Math.sqrt(k*k+l*l);j=m-(f.radius+i.radius);if(j<h){if(0==m)k=1,l=0;else var o=1/m,k=k*o,l=l*o;var p=f.radius;
c.x=f.worldCOMx+k*p;c.y=f.worldCOMy+l*p;var r=-i.radius;d.x=i.worldCOMx+k*r;d.y=i.worldCOMy+l*r;e.x=k;e.y=l}return j}var s=!1;if(a.type==g.id_ShapeType_CIRCLE&&b.type==g.id_ShapeType_POLYGON)var t=a,a=b,b=t,q=c,c=d,d=q,s=!0;if(a.type==g.id_ShapeType_POLYGON&&b.type==g.id_ShapeType_CIRCLE){for(var u=b.circle,w=-1.0E100,x=null,z=a.polygon.edges.head;null!=z;){var B=z.elt,A=B.gnormx*u.worldCOMx+B.gnormy*u.worldCOMy-B.gprojection-u.radius;if(A>h){w=A;break}0<A?A>w&&(w=A,x=B):0>w&&A>w&&(w=A,x=B);z=z.next}if(w<
h){var C=x.gp0,E=x.gp1,F=u.worldCOMy*x.gnormx-u.worldCOMx*x.gnormy;if(F<=C.y*x.gnormx-C.x*x.gnormy){var D=0,y=0,D=u.worldCOMx-C.x,y=u.worldCOMy-C.y,H=Math.sqrt(D*D+y*y),w=H-u.radius;if(w<h){if(0==H)D=1,y=0;else var J=1/H,D=D*J,y=y*J;c.x=C.x+0*D;c.y=C.y+0*y;var L=-u.radius;d.x=u.worldCOMx+D*L;d.y=u.worldCOMy+y*L;e.x=D;e.y=y}}else if(F>=E.y*x.gnormx-E.x*x.gnormy){var I=0,K=0,I=u.worldCOMx-E.x,K=u.worldCOMy-E.y,N=Math.sqrt(I*I+K*K),w=N-u.radius;if(w<h){if(0==N)I=1,K=0;else var O=1/N,I=I*O,K=K*O;c.x=
E.x+0*I;c.y=E.y+0*K;var V=-u.radius;d.x=u.worldCOMx+I*V;d.y=u.worldCOMy+K*V;e.x=I;e.y=K}}else{var Q=-u.radius;d.x=u.worldCOMx+x.gnormx*Q;d.y=u.worldCOMy+x.gnormy*Q;var X=-w;c.x=d.x+x.gnormx*X;c.y=d.y+x.gnormy*X;e.x=x.gnormx;e.y=x.gnormy}}s&&(e.x=-e.x,e.y=-e.y);return w}for(var S=a.polygon,P=b.polygon,M=-1.0E100,$=null,T=null,R=0,W=S.edges.head;null!=W;){for(var U=W.elt,aa=1.0E100,ca=P.gverts.next;null!=ca;){var ea=ca,la=U.gnormx*ea.x+U.gnormy*ea.y;la<aa&&(aa=la);ca=ca.next}aa-=U.gprojection;if(aa>
h){M=aa;break}0<aa?aa>M&&(M=aa,$=U,R=1):0>M&&aa>M&&(M=aa,$=U,R=1);W=W.next}if(M<h){for(var fa=P.edges.head;null!=fa;){for(var da=fa.elt,G=1.0E100,ga=S.gverts.next;null!=ga;){var ka=ga,ma=da.gnormx*ka.x+da.gnormy*ka.y;ma<G&&(G=ma);ga=ga.next}G-=da.gprojection;if(G>h){M=G;break}0<G?G>M&&(M=G,T=da,R=2):0>M&&G>M&&(M=G,T=da,R=2);fa=fa.next}if(M<h){var ja,Z;if(1==R)ja=P,Z=$;else{ja=S;Z=T;var pa=c,c=d,d=pa,s=!s}for(var na=null,sa=1.0E100,ba=ja.edges.head;null!=ba;){var xa=ba.elt,wa=Z.gnormx*xa.gnormx+Z.gnormy*
xa.gnormy;wa<sa&&(sa=wa,na=xa);ba=ba.next}s?(e.x=-Z.gnormx,e.y=-Z.gnormy):(e.x=Z.gnormx,e.y=Z.gnormy);if(0<=M){var ia=Z.gp0,ra=Z.gp1,ha=na.gp0,qa=na.gp1,va=0,ta=0,ya=0,za=0,va=ra.x-ia.x,ta=ra.y-ia.y,ya=qa.x-ha.x,za=qa.y-ha.y,Ba=1/(va*va+ta*ta),Ca=1/(ya*ya+za*za),Ha=-(va*(ia.x-ha.x)+ta*(ia.y-ha.y))*Ba,Ea=-(va*(ia.x-qa.x)+ta*(ia.y-qa.y))*Ba,Ia=-(ya*(ha.x-ia.x)+za*(ha.y-ia.y))*Ca,Da=-(ya*(ha.x-ra.x)+za*(ha.y-ra.y))*Ca;0>Ha?Ha=0:1<Ha&&(Ha=1);0>Ea?Ea=0:1<Ea&&(Ea=1);0>Ia?Ia=0:1<Ia&&(Ia=1);0>Da?Da=0:1<Da&&
(Da=1);var Fa=0,Ga=0,Oa=Ha,Fa=ia.x+va*Oa,Ga=ia.y+ta*Oa,Aa=0,ua=0,Ya=Ea,Aa=ia.x+va*Ya,ua=ia.y+ta*Ya,Ra=0,Ka=0,Y=Ia,Ra=ha.x+ya*Y,Ka=ha.y+za*Y,cb=0,Ma=0,Za=Da,cb=ha.x+ya*Za,Ma=ha.y+za*Za,Ja=Mc.vec_dsq(Fa,Ga,ha.x,ha.y),Ua=Mc.vec_dsq(Aa,ua,qa.x,qa.y),Sa=Mc.vec_dsq(Ra,Ka,ia.x,ia.y),ib=Mc.vec_dsq(cb,Ma,ra.x,ra.y),oa=0,Ta=0,Pa=null;Ja<Ua?(oa=Fa,Ta=Ga,Pa=ha):(oa=Aa,Ta=ua,Pa=qa,Ja=Ua);var eb=0,$a=0,Xa=null;Sa<ib?(eb=Ra,$a=Ka,Xa=ia):(eb=cb,$a=Ma,Xa=ra,Sa=ib);Ja<Sa?(c.x=oa,c.y=Ta,d.x=Pa.x,d.y=Pa.y,M=Math.sqrt(Ja)):
(d.x=eb,d.y=$a,c.x=Xa.x,c.y=Xa.y,M=Math.sqrt(Sa));if(0!=M){e.x=d.x-c.x;e.y=d.y-c.y;var fb=1/M;e.x*=fb;e.y*=fb;s&&(e.x=-e.x,e.y=-e.y)}return M}var Va=0,Qa=0,Va=na.gp0.x,Qa=na.gp0.y,La=0,Na=0,La=na.gp1.x,Na=na.gp1.y,ab=0,jb=0,ab=La-Va,jb=Na-Qa,mb=Z.gnormy*Va-Z.gnormx*Qa,gb=Z.gnormy*La-Z.gnormx*Na,bb=1/(gb-mb),bc=(-Z.tp1-mb)*bb;bc>v.epsilon&&(Va+=ab*bc,Qa+=jb*bc);var kb=(-Z.tp0-gb)*bb;kb<-v.epsilon&&(La+=ab*kb,Na+=jb*kb);var lb=Va*Z.gnormx+Qa*Z.gnormy-Z.gprojection,hb=La*Z.gnormx+Na*Z.gnormy-Z.gprojection;
if(lb<hb){d.x=Va;d.y=Qa;var db=-lb;c.x=d.x+Z.gnormx*db;c.y=d.y+Z.gnormy*db;return lb}d.x=La;d.y=Na;var nb=-hb;c.x=d.x+Z.gnormx*nb;c.y=d.y+Z.gnormy*nb;return hb}}return h};var Ea=function(){this.length=this.x=this.y=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.weak=!1;this._isimmutable=this.outer=null;this._immutable=!1;this._invalidate=this._validate=null};f["zpp_nape.geom.ZPP_Vec2"]=Ea;Ea.__name__=["zpp_nape","geom","ZPP_Vec2"];Ea.get=function(a,b,c){null==c&&(c=!1);var d;null==
Ea.zpp_pool?d=new Ea:(d=Ea.zpp_pool,Ea.zpp_pool=d.next,d.next=null);d.weak=!1;d._immutable=c;d.x=a;d.y=b;return d};Ea.prototype={validate:function(){null!=this._validate&&this._validate()},invalidate:function(){null!=this._invalidate&&this._invalidate(this)},wrapper:function(){if(null==this.outer){this.outer=new da;var a=this.outer.zpp_inner;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=Ea.zpp_pool;Ea.zpp_pool=a;this.outer.zpp_inner=
this}return this.outer},add:function(a){return this.inlined_add(a)},inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){b._inuse=!0;null==a?(b.next=this.next,this.next=b):(b.next=a.next,a.next=b);this.pushmod=this.modified=!0;this.length++;return b},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=
b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},reverse:function(){for(var a=this.next,b=null;null!=a;){var c=a.next;a.next=b;b=this.next=a;a=c}this.pushmod=this.modified=!0},iterator_at:function(a){for(var b=this.next;0<a--&&null!=b;)b=b.next;return b},toString:function(){return"{ x: "+this.x+" y: "+this.y+" }"},__class__:Ea};var sn=function(){this._validate=null;this.x=this.y=
this.z=0};f["zpp_nape.geom.ZPP_Vec3"]=sn;sn.__name__=["zpp_nape","geom","ZPP_Vec3"];sn.prototype={validate:function(){null!=this._validate&&this._validate()},__class__:sn};var Mc=function(){};f["zpp_nape.geom.ZPP_VecMath"]=Mc;Mc.__name__=["zpp_nape","geom","ZPP_VecMath"];Mc.vec_dsq=function(a,b,c,d){var e=0,h=0,e=a-c,h=b-d;return e*e+h*h};var ib=function(){this.userData=this.ishape=this.ibody=this.icompound=this.cbsets=this.group=this.cbTypes=this.cbSet=this.wrap_cbTypes=null;this.id=0;this.outer_i=
null;this.id=Lb.Interactor();this.cbsets=new Em;this.cbTypes=new Id};f["zpp_nape.phys.ZPP_Interactor"]=ib;ib.__name__=["zpp_nape","phys","ZPP_Interactor"];ib.get=function(a,b){var c;c=a.id<b.id?a.id:b.id;var d;d=a.id<b.id?b.id:a.id;for(var e=null,h=(a.cbsets.length<b.cbsets.length?a.cbsets:b.cbsets).head;null!=h;){var g=h.elt;if(g.id==c&&g.di==d){e=g;break}h=h.next}return e};ib.int_callback=function(a,b,c){var d=a.int1,a=a.int2;b.options1.compatible(d.cbTypes)&&b.options2.compatible(a.cbTypes)?(c.int1=
d,c.int2=a):(c.int1=a,c.int2=d)};ib.prototype={__iaddedToSpace:function(){null!=this.group&&this.group.interactors.add(this);for(var a=this.cbTypes.head;null!=a;)a.elt.interactors.add(this),a=a.next;this.alloc_cbSet()},__iremovedFromSpace:function(){null!=this.group&&this.group.interactors.remove(this);for(var a=this.cbTypes.head;null!=a;)a.elt.interactors.remove(this),a=a.next;this.dealloc_cbSet()},wake:function(){if(null!=this.ishape){var a=this.ishape.body;null!=a&&null!=a.space&&a.space.non_inlined_wake(a);
!0}else null!=this.ibody?null!=this.ibody.space?this.ibody.space.non_inlined_wake(this.ibody):!1:(null!=this.icompound.space&&this.icompound.space.wakeCompound(this.icompound),!0)},setupcbTypes:function(){this.wrap_cbTypes=be.get(this.cbTypes);this.wrap_cbTypes.zpp_inner.adder=m(this,this.wrap_cbTypes_adder);this.wrap_cbTypes.zpp_inner.subber=m(this,this.wrap_cbTypes_subber);this.wrap_cbTypes.zpp_inner.dontremove=!0},wrap_cbTypes_subber:function(a){a=a.zpp_inner;if(this.cbTypes.has(a)){var b;b=null!=
this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=b&&(this.dealloc_cbSet(),a.interactors.remove(this));this.cbTypes.remove(a);null!=b&&(this.alloc_cbSet(),this.wake())}},wrap_cbTypes_adder:function(a){this.insert_cbtype(a.zpp_inner);return!1},insert_cbtype:function(a){if(!this.cbTypes.has(a)){var b;b=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=
b&&(this.dealloc_cbSet(),a.interactors.add(this));for(var c=null,d=this.cbTypes.head;null!=d&&!(a.id<d.elt.id);){c=d;d=d.next}this.cbTypes.inlined_insert(c,a);null!=b&&(this.alloc_cbSet(),this.wake())}},alloc_cbSet:function(){var a;a=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;if(null!=(this.cbSet=a.cbsets.get(this.cbTypes)))this.cbSet.count++,this.cbSet.interactors.add(this),this.cbSet.validate(),a.freshInteractorType(this)},
dealloc_cbSet:function(){var a;a=null!=this.ishape?null==this.ishape.body?null:this.ishape.body.space:null!=this.ibody?this.ibody.space:this.icompound.space;null!=this.cbSet&&(this.cbSet.interactors.remove(this),a.nullInteractorType(this),0==--this.cbSet.count&&(a.cbsets.remove(this.cbSet),a=this.cbSet,a.free(),a.next=Sa.zpp_pool,Sa.zpp_pool=a),this.cbSet=null)},immutable_midstep:function(a){null!=this.ibody?null:null!=this.ishape?this.ishape.__immutable_midstep(a):this.icompound.__imutable_midstep(a)},
lookup_group:function(){for(var a=this;null!=a&&null==a.group;)a=null!=a.ishape?a.ishape.body:null!=a.icompound?a.icompound.compound:a.ibody.compound;return null==a?null:a.group},__class__:ib};var Be=function(){this.wrap_localCOM=this.wrap_worldCOM=null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_aabb=!1;this.aabb=null;this.norotate=!1;this.cinertia=this.iinertia=this.sinertia=0;this.zip_inertia=!1;this.inertiaMode=this.inertia=
0;this.zip_gravMassScale=!1;this.gravMassMode=this.gravMassScale=0;this.zip_gravMass=!1;this.gravMass=0;this.nomove=!1;this.massMode=this.imass=this.smass=this.cmass=0;this.zip_mass=!1;this.mass=0;this.zip_axis=!1;this.kinvelx=this.kinvely=this.svelx=this.svely=this.angvel=this.torque=this.kinangvel=this.pre_rot=this.rot=this.axisx=this.axisy=0;this.wrap_force=null;this.forcex=this.forcey=0;this.wrap_vel=null;this.velx=this.vely=0;this.wrap_pos=null;this.pre_posx=this.pre_posy=this.posx=this.posy=
0;this.bullet=this.bulletEnabled=this.disableCCD=!1;this.sweepRadius=0;this.sweepFrozen=!1;this.sweepTime=this.sweep_angvel=0;this.compound=this.shapes=this.wrap_shapes=this.space=this.arbiters=this.constraints=this.component=null;this.type=0;this.world=!1;this.outer=null;ib.call(this);this.ibody=this;this.bulletEnabled=this.world=!1;this.sweep_angvel=this.sweepTime=0;this.disableCCD=this.norotate=this.nomove=!1;this.axisx=this.rot=this.posy=this.posx=0;this.axisy=1;this.torque=this.angvel=this.kinangvel=
this.forcey=this.forcex=this.kinvely=this.kinvelx=this.vely=this.velx=this.svely=this.svelx=0;this.pre_rot=this.pre_posy=this.pre_posx=Math.POSITIVE_INFINITY;this.worldCOMy=this.worldCOMx=this.localCOMy=this.localCOMx=0;this.zip_aabb=!0;this.aabb=$a.get(0,0,0,0);this.aabb._immutable=!0;this.aabb._validate=m(this,this.aabb_validate);this.massMode=g.id_MassMode_DEFAULT;this.gravMassMode=g.id_GravMassMode_DEFAULT;this.gravMassScale=1;this.inertiaMode=g.id_InertiaMode_DEFAULT;this.arbiters=new Ih;this.constraints=
new gf;this.shapes=new xf;this.wrap_shapes=cf.get(this.shapes);this.wrap_shapes.zpp_inner.adder=m(this,this.shapes_adder);this.wrap_shapes.zpp_inner.subber=m(this,this.shapes_subber);this.wrap_shapes.zpp_inner._invalidate=m(this,this.shapes_invalidate);this.kinematicDelaySleep=!1};f["zpp_nape.phys.ZPP_Body"]=Be;Be.__name__=["zpp_nape","phys","ZPP_Body"];Be.__static=function(){null==g.BodyType_STATIC&&(g.internal=!0,g.BodyType_STATIC=new La,g.internal=!1);var a=new mh(g.BodyType_STATIC),b=a.zpp_inner;
b.world=!0;b.wrap_shapes.zpp_inner.immutable=!0;b.smass=b.imass=b.cmass=b.mass=b.gravMass=0;b.sinertia=b.iinertia=b.cinertia=b.inertia=0;b.cbTypes.clear();return a};Be.__super__=ib;Be.prototype=l(ib.prototype,{invalidate_type:function(){this.invalidate_mass();this.invalidate_inertia()},invalidate_shapes:function(){this.zip_worldCOM=this.zip_localCOM=this.zip_aabb=!0;this.invalidate_mass();this.invalidate_inertia()},atRest:function(a){if(this.type!=g.id_BodyType_DYNAMIC)return this.component.sleeping;
var b=v.linearSleepThreshold,b=b*b;if(this.velx*this.velx+this.vely*this.vely>b)a=!1;else if(Mc.vec_dsq(this.posx,this.posy,this.pre_posx,this.pre_posy)>0.25*b*a*a)a=!1;else{var c=b=0,b=this.aabb.maxx-this.aabb.minx,c=this.aabb.maxy-this.aabb.miny,b=b*b+c*c,c=v.angularSleepThreshold,c=c*c;if(4*this.angvel*this.angvel*b>c)a=!1;else var d=this.rot-this.pre_rot,a=d*d*b>c*a*a?!1:!0}a||(this.component.waket=this.space.stamp);return this.component.waket+v.sleepDelay<this.space.stamp},refreshArbiters:function(){for(var a=
this.arbiters.head;null!=a;)a.elt.invalidated=!0,a=a.next},sweepIntegrate:function(a){var b=a-this.sweepTime;0!=b&&(this.sweepTime=a,this.posx+=this.velx*b,this.posy+=this.vely*b,0!=this.angvel&&this.delta_rot(this.sweep_angvel*b))},sweepValidate:function(a){if(a.type==g.id_ShapeType_CIRCLE)a.worldCOMx=this.posx+(this.axisy*a.localCOMx-this.axisx*a.localCOMy),a.worldCOMy=this.posy+(a.localCOMx*this.axisx+a.localCOMy*this.axisy);else{for(var a=a.polygon,b=a.lverts.next,c=a.gverts.next;null!=c;){var d=
c,e=b,b=b.next;d.x=this.posx+(this.axisy*e.x-this.axisx*e.y);d.y=this.posy+(e.x*this.axisx+e.y*this.axisy);c=c.next}c=a.edges.head;b=d=a.gverts.next;for(d=d.next;null!=d;){var e=d,h=c.elt,c=c.next;h.gnormx=this.axisy*h.lnormx-this.axisx*h.lnormy;h.gnormy=h.lnormx*this.axisx+h.lnormy*this.axisy;h.gprojection=this.posx*h.gnormx+this.posy*h.gnormy+h.lprojection;h.tp0=b.y*h.gnormx-b.x*h.gnormy;h.tp1=e.y*h.gnormx-e.x*h.gnormy;b=e;d=d.next}a=a.gverts.next;c=c.elt;c.gnormx=this.axisy*c.lnormx-this.axisx*
c.lnormy;c.gnormy=c.lnormx*this.axisx+c.lnormy*this.axisy;c.gprojection=this.posx*c.gnormx+this.posy*c.gnormy+c.lprojection;c.tp0=b.y*c.gnormx-b.x*c.gnormy;c.tp1=a.y*c.gnormx-a.x*c.gnormy}},invalidate_pos:function(){for(var a=this.shapes.head;null!=a;){var b=a.elt;b.type==g.id_ShapeType_POLYGON&&(b.polygon.invalidate_gverts(),b.polygon.invalidate_gaxi());b.invalidate_worldCOM();a=a.next}this.zip_worldCOM=!0},pos_invalidate:function(a){this.immutable_midstep("Body::position");this.posx==a.x&&this.posy==
a.y||(this.posx=a.x,this.posy=a.y,this.invalidate_pos(),this.wake())},pos_validate:function(){this.wrap_pos.zpp_inner.x=this.posx;this.wrap_pos.zpp_inner.y=this.posy},vel_invalidate:function(a){this.velx=a.x;this.vely=a.y;this.wake()},vel_validate:function(){this.wrap_vel.zpp_inner.x=this.velx;this.wrap_vel.zpp_inner.y=this.vely},force_invalidate:function(a){this.forcex=a.x;this.forcey=a.y;this.wake()},force_validate:function(){this.wrap_force.zpp_inner.x=this.forcex;this.wrap_force.zpp_inner.y=this.forcey},
setupPosition:function(){this.wrap_pos=da.get(this.posx,this.posy,null);this.wrap_pos.zpp_inner._inuse=!0;this.world?this.wrap_pos.zpp_inner._immutable=!0:(this.wrap_pos.zpp_inner._invalidate=m(this,this.pos_invalidate),this.wrap_pos.zpp_inner._validate=m(this,this.pos_validate))},setupVelocity:function(){this.wrap_vel=da.get(this.velx,this.vely,null);this.wrap_vel.zpp_inner._inuse=!0;this.world?this.wrap_vel.zpp_inner._immutable=!0:(this.wrap_vel.zpp_inner._invalidate=m(this,this.vel_invalidate),
this.wrap_vel.zpp_inner._validate=m(this,this.vel_validate))},setupForce:function(){this.wrap_force=da.get(this.forcex,this.forcey,null);this.wrap_force.zpp_inner._inuse=!0;this.world?this.wrap_force.zpp_inner._immutable=!0:(this.wrap_force.zpp_inner._invalidate=m(this,this.force_invalidate),this.wrap_force.zpp_inner._validate=m(this,this.force_validate))},invalidate_rot:function(){this.zip_axis=!0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.type==g.id_ShapeType_POLYGON&&(b.polygon.invalidate_gverts(),
b.polygon.invalidate_gaxi());b.invalidate_worldCOM();a=a.next}this.zip_worldCOM=!0},validate_axis:function(){this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null)},delta_rot:function(a){this.rot+=a;if(1.0E-4<a*a)this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null;else{var b=a*a,c=1-0.5*b,b=1-b*b/8,d=(c*this.axisx+a*this.axisy)*b;this.axisy=(c*this.axisy-a*this.axisx)*b;this.axisx=d}},invalidate_mass:function(){this.zip_mass=!0;this.invalidate_gravMass()},
validate_mass:function(){if(this.zip_mass){this.zip_mass=!1;if(this.massMode==g.id_MassMode_DEFAULT){this.cmass=0;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.refmaterial.density=b.material.density;b.validate_area_inertia();this.cmass+=b.area*b.material.density;a=a.next}}this.type==g.id_BodyType_DYNAMIC&&!this.nomove?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=Math.POSITIVE_INFINITY,this.imass=this.smass=0)}},invalidate_gravMass:function(){this.gravMassMode!=g.id_GravMassMode_FIXED&&
(this.zip_gravMass=!0);this.gravMassMode!=g.id_GravMassMode_SCALED&&(this.zip_gravMassScale=!0);this.wake()},validate_gravMass:function(){this.zip_gravMass&&(this.zip_gravMass=!1,this.validate_mass(),this.gravMassMode==g.id_GravMassMode_DEFAULT?(this.validate_mass(),this.gravMass=this.cmass):this.gravMassMode==g.id_GravMassMode_SCALED&&(this.validate_mass(),this.gravMass=this.cmass*this.gravMassScale))},invalidate_gravMassScale:function(){this.gravMassMode!=g.id_GravMassMode_SCALED?this.zip_gravMassScale=
!0:this.invalidate_gravMass()},validate_gravMassScale:function(){this.zip_gravMassScale&&(this.zip_gravMassScale=!1,this.gravMassMode==g.id_GravMassMode_DEFAULT?this.gravMassScale=1:this.gravMassMode==g.id_GravMassMode_FIXED&&(this.validate_mass(),this.gravMassScale=this.gravMass/this.cmass))},invalidate_inertia:function(){this.zip_inertia=!0;this.wake()},validate_inertia:function(){if(this.zip_inertia){this.zip_inertia=!1;if(this.inertiaMode==g.id_InertiaMode_DEFAULT){this.cinertia=0;for(var a=this.shapes.head;null!=
a;){var b=a.elt;b.refmaterial.density=b.material.density;b.validate_area_inertia();this.cinertia+=b.inertia*b.area*b.material.density;a=a.next}}this.type==g.id_BodyType_DYNAMIC&&!this.norotate?(this.inertia=this.cinertia,this.sinertia=this.iinertia=1/this.inertia):(this.inertia=Math.POSITIVE_INFINITY,this.sinertia=this.iinertia=0)}},validate_aabb:function(){if(this.zip_aabb){this.zip_aabb=!1;this.aabb.minx=Math.POSITIVE_INFINITY;this.aabb.miny=Math.POSITIVE_INFINITY;this.aabb.maxx=Math.NEGATIVE_INFINITY;
this.aabb.maxy=Math.NEGATIVE_INFINITY;for(var a=this.shapes.head;null!=a;){var b=a.elt;b.zip_aabb&&null!=b.body&&(b.zip_aabb=!1,b.type==g.id_ShapeType_CIRCLE?b.circle.__validate_aabb():b.polygon.__validate_aabb());this.aabb.combine(b.aabb);a=a.next}}},invalidate_localCOM:function(){this.zip_worldCOM=this.zip_localCOM=!0},validate_localCOM:function(){if(this.zip_localCOM){this.zip_localCOM=!1;for(var a=0,b=0,c=0,d=this.shapes.head;null!=d;){var e=d.elt;e.zip_localCOM&&(e.zip_localCOM=!1,e.type==g.id_ShapeType_POLYGON&&
e.polygon.__validate_localCOM(),null!=e.wrap_localCOM&&(e.wrap_localCOM.zpp_inner.x=e.localCOMx,e.wrap_localCOM.zpp_inner.y=e.localCOMy));e.validate_area_inertia();var h=e.area*e.material.density,a=a+e.localCOMx*h,b=b+e.localCOMy*h,c=c+e.area*e.material.density,d=d.next}0!=c&&(d=1/c,this.localCOMx=a*d,this.localCOMy=b*d);null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy);this.zip_mass&&this.massMode==g.id_MassMode_DEFAULT&&(this.zip_mass=
!1,this.cmass=c,this.type==g.id_BodyType_DYNAMIC?(this.mass=this.cmass,this.imass=this.smass=1/this.mass):(this.mass=Math.POSITIVE_INFINITY,this.imass=this.smass=0))}},validate_worldCOM:function(){this.zip_worldCOM&&(this.zip_worldCOM=!1,this.validate_localCOM(),this.zip_axis&&(this.zip_axis=!1,this.axisx=Math.sin(this.rot),this.axisy=Math.cos(this.rot),null),this.worldCOMx=this.posx+(this.axisy*this.localCOMx-this.axisx*this.localCOMy),this.worldCOMy=this.posy+(this.localCOMx*this.axisx+this.localCOMy*
this.axisy),null!=this.wrap_worldCOM&&(this.wrap_worldCOM.zpp_inner.x=this.worldCOMx,this.wrap_worldCOM.zpp_inner.y=this.worldCOMy))},aabb_validate:function(){this.validate_aabb()},shapes_adder:function(a){return a.zpp_inner.body!=this?(null!=a.zpp_inner.body&&a.zpp_inner.body.wrap_shapes.remove(a),a.zpp_inner.body=this,a.zpp_inner.addedToBody(),null!=this.space&&this.space.added_shape(a.zpp_inner,null),a.zpp_inner.type==g.id_ShapeType_POLYGON&&(a.zpp_inner.polygon.invalidate_gaxi(),a.zpp_inner.polygon.invalidate_gverts()),
!0):!1},shapes_subber:function(a){null!=this.space&&this.space.removed_shape(a.zpp_inner);a.zpp_inner.body=null;a.zpp_inner.removedFromBody()},shapes_invalidate:function(){this.invalidate_shapes()},addedToSpace:function(){null==Lc.zpp_pool?this.component=new Lc:(this.component=Lc.zpp_pool,Lc.zpp_pool=this.component.next,this.component.next=null);null;this.component.isBody=!0;this.component.body=this;this.__iaddedToSpace()},removedFromSpace:function(){for(;null!=this.arbiters.head;){var a=this.arbiters.pop_unsafe();
a.cleared=!0;a.b2==this&&a.b1.arbiters.inlined_try_remove(a);a.b1==this&&a.b2.arbiters.inlined_try_remove(a);null!=a.pair&&(a.pair.arb=null,a.pair=null);a.active=!1;this.space.f_arbiters.modified=!0}a=this.component;a.body=null;a.constraint=null;null;a.next=Lc.zpp_pool;Lc.zpp_pool=a;this.component=null;this.__iremovedFromSpace()},__class__:Be});var Fm=function(){this.compound=this.space=null;this.depth=0;this.outer=this.bodies=this.constraints=this.compounds=this.wrap_constraints=null};f["zpp_nape.phys.ZPP_Compound"]=
Fm;Fm.__name__=["zpp_nape","phys","ZPP_Compound"];Fm.__super__=ib;Fm.prototype=l(ib.prototype,{__imutable_midstep:function(){},addedToSpace:function(){this.__iaddedToSpace()},removedFromSpace:function(){this.__iremovedFromSpace()},__class__:Fm});var bf=function(){this.wrap_gravity=null;this.viscosity=this.density=this.gravityx=this.gravityy=0;this.next=this.outer=this.shapes=null;this.shapes=new xf;this.density=this.viscosity=1;this.wrap_gravity=null;this.gravityy=this.gravityx=0};f["zpp_nape.phys.ZPP_FluidProperties"]=
bf;bf.__name__=["zpp_nape","phys","ZPP_FluidProperties"];bf.prototype={wrapper:function(){if(null==this.outer){this.outer=new Bf;var a=this.outer.zpp_inner;a.outer=null;a.next=bf.zpp_pool;bf.zpp_pool=a;this.outer.zpp_inner=this}return this.outer},invalidate:function(){for(var a=this.shapes.head;null!=a;)a.elt.invalidate_fluidprops(),a=a.next},__class__:bf};var Ie=function(a){this.zip_aabb=!1;this.sweep=this.node=this.pairs=this.aabb=null;this.fluidEnabled=this.sensorEnabled=!1;this.circle=this.polygon=
this.refmaterial=this.material=this.filter=this.fluidProperties=null;this.sweepCoef=0;this.zip_sweepRadius=!1;this.sweepRadius=0;this.wrap_localCOM=null;this.zip_worldCOM=!1;this.worldCOMx=this.worldCOMy=0;this.zip_localCOM=!1;this.localCOMx=this.localCOMy=0;this.zip_angDrag=!1;this.inertia=this.angDrag=0;this.zip_area_inertia=!1;this.type=this.area=0;this.outer=this.body=null;ib.call(this);this.pairs=new Gm;this.ishape=this;this.type=a;this.aabb=$a.get(0,0,0,0);this.aabb._immutable=!0;this.aabb._validate=
m(this,this.aabb_validate);this.zip_area_inertia=this.zip_angDrag=this.zip_localCOM=this.zip_sweepRadius=!0;this.worldCOMy=this.worldCOMx=this.localCOMy=this.localCOMx=0;this.sensorEnabled=this.fluidEnabled=!1;this.body=this.fluidProperties=null;this.refmaterial=new na;this.sweepRadius=this.sweepCoef=0};f["zpp_nape.shape.ZPP_Shape"]=Ie;Ie.__name__=["zpp_nape","shape","ZPP_Shape"];Ie.__super__=ib;Ie.prototype=l(ib.prototype,{validate_sweepRadius:function(){this.zip_sweepRadius&&(this.zip_sweepRadius=
!1,this.type==g.id_ShapeType_CIRCLE?this.circle.__validate_sweepRadius():this.polygon.__validate_sweepRadius())},validate_area_inertia:function(){this.zip_area_inertia&&(this.zip_area_inertia=!1,this.type==g.id_ShapeType_CIRCLE?this.circle.__validate_area_inertia():this.polygon.__validate_area_inertia())},validate_angDrag:function(){if(this.zip_angDrag||this.refmaterial.dynamicFriction!=this.material.dynamicFriction)this.zip_angDrag=!1,this.refmaterial.dynamicFriction=this.material.dynamicFriction,
this.type==g.id_ShapeType_CIRCLE?this.circle.__validate_angDrag():this.polygon.__validate_angDrag()},validate_worldCOM:function(){this.zip_worldCOM&&null!=this.body&&(this.zip_worldCOM=!1,this.zip_localCOM&&(this.zip_localCOM=!1,this.type==g.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)),this.body.validate_axis(),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-
this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy))},invalidate_area_inertia:function(){this.zip_area_inertia=!0;null!=this.body&&(this.body.invalidate_localCOM(),this.body.invalidate_mass(),this.body.invalidate_inertia())},invalidate_angDrag:function(){this.zip_angDrag=!0},invalidate_localCOM:function(){this.zip_localCOM=!0;this.invalidate_area_inertia();this.type==g.id_ShapeType_CIRCLE&&(this.zip_sweepRadius=!0);this.invalidate_angDrag();
this.invalidate_worldCOM();null!=this.body&&this.body.invalidate_localCOM()},invalidate_worldCOM:function(){this.zip_aabb=this.zip_worldCOM=!0;null!=this.body&&(this.body.zip_aabb=!0)},invalidate_material:function(a){0!=(a&na.WAKE)&&this.wake();0!=(a&na.ARBITERS)&&null!=this.body&&this.body.refreshArbiters();0!=(a&na.PROPS)&&null!=this.body&&(this.body.invalidate_localCOM(),this.body.invalidate_mass(),this.body.invalidate_inertia());0!=(a&na.ANGDRAG)&&this.invalidate_angDrag();this.refmaterial.set(this.material)},
invalidate_filter:function(){this.wake()},invalidate_fluidprops:function(){this.fluidEnabled&&this.wake()},aabb_validate:function(){this.zip_aabb&&null!=this.body&&(this.zip_aabb=!1,this.type==g.id_ShapeType_CIRCLE?this.circle.__validate_aabb():this.polygon.__validate_aabb())},setMaterial:function(a){this.material!=a&&(null!=this.body&&null!=this.body.space&&null!=this.material&&this.material.shapes.remove(this),this.material=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),this.wake(),
null!=this.body&&this.body.refreshArbiters())},setFilter:function(a){this.filter!=a&&(null!=this.body&&null!=this.body.space&&null!=this.filter&&this.filter.shapes.remove(this),this.filter=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),this.wake())},setFluid:function(a){this.fluidProperties!=a&&(null!=this.body&&null!=this.body.space&&null!=this.fluidProperties&&this.fluidProperties.shapes.remove(this),this.fluidProperties=a,null!=this.body&&null!=this.body.space&&a.shapes.add(this),
this.fluidEnabled&&this.wake())},__immutable_midstep:function(){},addedToBody:function(){this.invalidate_worldCOM();this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0)},removedFromBody:function(){},addedToSpace:function(){this.__iaddedToSpace();this.material.shapes.add(this);this.filter.shapes.add(this);null!=this.fluidProperties&&this.fluidProperties.shapes.add(this)},removedFromSpace:function(){this.__iremovedFromSpace();this.material.shapes.remove(this);this.filter.shapes.remove(this);null!=
this.fluidProperties&&this.fluidProperties.shapes.remove(this)},__class__:Ie});var ak=function(){this.radius=0;this.outer_zn=null;Ie.call(this,g.id_ShapeType_CIRCLE);this.circle=this;this.zip_localCOM=!1};f["zpp_nape.shape.ZPP_Circle"]=ak;ak.__name__=["zpp_nape","shape","ZPP_Circle"];ak.__super__=Ie;ak.prototype=l(Ie.prototype,{invalidate_radius:function(){this.invalidate_area_inertia();this.invalidate_angDrag();this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0);null!=this.body&&this.body.wake()},
localCOM_validate:function(){this.wrap_localCOM.zpp_inner.x=this.localCOMx;this.wrap_localCOM.zpp_inner.y=this.localCOMy},localCOM_invalidate:function(a){this.localCOMx=a.x;this.localCOMy=a.y;this.invalidate_localCOM();null!=this.body&&this.body.wake()},setupLocalCOM:function(){this.wrap_localCOM=da.get(this.localCOMx,this.localCOMy,null);this.wrap_localCOM.zpp_inner._inuse=!0;this.wrap_localCOM.zpp_inner._validate=m(this,this.localCOM_validate);this.wrap_localCOM.zpp_inner._invalidate=m(this,this.localCOM_invalidate)},
__validate_aabb:function(){this.zip_worldCOM&&null!=this.body&&(this.zip_worldCOM=!1,this.zip_localCOM&&(this.zip_localCOM=!1,this.type==g.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy)),this.body.validate_axis(),this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy),this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*
this.body.axisy));var a=this.radius,b=this.radius;this.aabb.minx=this.worldCOMx-a;this.aabb.miny=this.worldCOMy-b;this.aabb.maxx=this.worldCOMx+a;this.aabb.maxy=this.worldCOMy+b},_force_validate_aabb:function(){this.worldCOMx=this.body.posx+(this.body.axisy*this.localCOMx-this.body.axisx*this.localCOMy);this.worldCOMy=this.body.posy+(this.localCOMx*this.body.axisx+this.localCOMy*this.body.axisy);this.aabb.minx=this.worldCOMx-this.radius;this.aabb.miny=this.worldCOMy-this.radius;this.aabb.maxx=this.worldCOMx+
this.radius;this.aabb.maxy=this.worldCOMy+this.radius},__validate_sweepRadius:function(){this.sweepCoef=Math.sqrt(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy);this.sweepRadius=this.sweepCoef+this.radius},__validate_area_inertia:function(){var a=this.radius*this.radius;this.area=a*Math.PI;this.inertia=0.5*a+(this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy)},__validate_angDrag:function(){var a=this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy,b=this.radius*this.radius;
this.angDrag=(a+2*b)*this.material.dynamicFriction*v.fluidAngularDragFriction+0.5*v.fluidAngularDrag*(1+v.fluidVacuumDrag)*a;this.angDrag/=2*(a+0.5*b)},__rotate:function(a,b){if(0<this.localCOMx*this.localCOMx+this.localCOMy*this.localCOMy){var c=0,d=0,c=b*this.localCOMx-a*this.localCOMy,d=this.localCOMx*a+this.localCOMy*b;this.localCOMx=c;this.localCOMy=d;this.invalidate_localCOM()}},__class__:ak});var rb=function(){this.tp0=this.tp1=0;this.lp0=this.gp0=this.lp1=this.gp1=null;this.length=this.lprojection=
this.gprojection=0;this.wrap_gnorm=null;this.gnormx=this.gnormy=0;this.wrap_lnorm=null;this.lnormx=this.lnormy=0;this.next=this.polygon=this.outer=null;this.gprojection=this.lprojection=this.length=this.gnormy=this.gnormx=this.lnormy=this.lnormx=0};f["zpp_nape.shape.ZPP_Edge"]=rb;rb.__name__=["zpp_nape","shape","ZPP_Edge"];rb.prototype={wrapper:function(){null==this.outer&&(rb.internal=!0,this.outer=new vm,rb.internal=!1,this.outer.zpp_inner=this);return this.outer},__class__:rb};var ck=function(){this.reverse_flag=
this.zip_lverts=this.zip_laxi=this.zip_gverts=this.zip_gaxi=this.zip_valid=this.zip_sanitation=!1;this.edgeCnt=0;this.outer_zn=this.lverts=this.wrap_lverts=this.gverts=this.wrap_gverts=this.edges=this.wrap_edges=null;Ie.call(this,g.id_ShapeType_POLYGON);this.polygon=this;this.lverts=new Ea;this.gverts=new Ea;this.edges=new Hm;this.edgeCnt=0};f["zpp_nape.shape.ZPP_Polygon"]=ck;ck.__name__=["zpp_nape","shape","ZPP_Polygon"];ck.__super__=Ie;ck.prototype=l(Ie.prototype,{lverts_pa_invalidate:function(){this.invalidate_lverts()},
gverts_pa_validate:function(){this.validate_gverts()},lverts_post_adder:function(a){a.zpp_inner._invalidate=m(this,this.lverts_pa_invalidate);for(var b=null,c=null,d=this.lverts.next;null!=d&&!(d==a.zpp_inner);){b=null==b?this.gverts.next:b.next,c=null==c?this.edges.head:c.next;d=d.next}a=Ea.get(0,0,!0);this.gverts.insert(b,a);null!=this.lverts.next.next&&(null==this.lverts.next.next.next?(null==rb.zpp_pool?c=new rb:(c=rb.zpp_pool,rb.zpp_pool=c.next,c.next=null),null,c.polygon=this,this.edges.add(c),
null==rb.zpp_pool?c=new rb:(c=rb.zpp_pool,rb.zpp_pool=c.next,c.next=null),null,c.polygon=this,this.edges.add(c),this.edgeCnt+=2):(null==rb.zpp_pool?b=new rb:(b=rb.zpp_pool,rb.zpp_pool=b.next,b.next=null),null,b.polygon=this,this.edges.insert(c,b),this.edgeCnt++));a._validate=m(this,this.gverts_pa_validate)},lverts_subber:function(a){this.cleanup_lvert(a.zpp_inner)},lverts_invalidate:function(){this.invalidate_lverts()},lverts_validate:function(){this.validate_lverts()},getlverts:function(){this.wrap_lverts=
ug.get(this.lverts);this.wrap_lverts.zpp_inner.post_adder=m(this,this.lverts_post_adder);this.wrap_lverts.zpp_inner.subber=m(this,this.lverts_subber);this.wrap_lverts.zpp_inner._invalidate=m(this,this.lverts_invalidate);this.wrap_lverts.zpp_inner._validate=m(this,this.lverts_validate);this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag},invalidate_lverts:function(){this.invalidate_laxi();this.invalidate_area_inertia();this.invalidate_angDrag();this.invalidate_localCOM();this.invalidate_gverts();
this.zip_sanitation=this.zip_valid=this.zip_lverts=!0;null!=this.body&&this.body.wake()},invalidate_laxi:function(){this.invalidate_gaxi();this.zip_laxi=this.zip_sweepRadius=!0},invalidate_gverts:function(){this.zip_aabb=!0;null!=this.body&&(this.body.zip_aabb=!0);this.zip_gverts=!0},invalidate_gaxi:function(){this.zip_gaxi=!0},validate_lverts:function(){this.zip_lverts&&(this.zip_lverts=!1,2<this.lverts.length&&(this.validate_area_inertia(),0>this.area&&(this.reverse_vertices(),this.area=-this.area)))},
cleanup_lvert:function(a){for(var b=null,c=null,d=this.lverts.next;null!=d&&!(d==a);){b=null==b?this.gverts.next:b.next,c=null==c?this.edges.head:c.next;d=d.next}a=null==b?this.gverts.next:b.next;this.gverts.erase(b);null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a._isimmutable=null;a._validate=null;a._invalidate=null;a.next=Ea.zpp_pool;Ea.zpp_pool=a;2==this.edgeCnt?(c=this.edges.pop_unsafe(),c.polygon=null,c.next=rb.zpp_pool,rb.zpp_pool=c,c=this.edges.pop_unsafe(),c.polygon=null,c.next=rb.zpp_pool,
rb.zpp_pool=c,this.edgeCnt=0):0!=this.edgeCnt&&(b=null==c?this.edges.head.elt:c.next.elt,this.edges.erase(c),b.polygon=null,b.next=rb.zpp_pool,rb.zpp_pool=b,this.edgeCnt--)},splice_collinear:function(){this.zip_sanitation&&(this.zip_sanitation=!1,this.splice_collinear_real())},splice_collinear_real:function(){if(!(null==this.lverts.next||null==this.lverts.next.next)&&null!=this.lverts.next.next.next){for(var a=null,b=this.lverts.next;null!=b;){var c=b,d=null==b.next?this.lverts.next:b.next;Mc.vec_dsq(c.x,
c.y,d.x,d.y)<v.epsilon*v.epsilon?(this.cleanup_lvert(b),b=this.lverts.erase(a)):(a=b,b=b.next)}if(null!=this.lverts.next){do{a=!1;for(b=this.lverts.next;null!=b;){var c=null==b.next?this.lverts.next:b.next,e=b,d=c,h=null==c.next?this.lverts.next:c.next,g=0,f=0,g=d.x-e.x,f=d.y-e.y,i=e=0,e=h.x-d.x,i=h.y-d.y,d=i*g-e*f;d*d>=v.epsilon*v.epsilon||(this.cleanup_lvert(c),this.lverts.erase(null==b.next?null:b),a=!0);b=b.next}}while(a)}}},reverse_vertices:function(){this.lverts.reverse();this.gverts.reverse();
this.edges.reverse();var a=this.edges.iterator_at(this.edgeCnt-1),b=this.edges.pop_unsafe();this.edges.insert(a,b);this.reverse_flag=!this.reverse_flag;null!=this.wrap_lverts&&(this.wrap_lverts.zpp_inner.reverse_flag=this.reverse_flag);null!=this.wrap_gverts&&(this.wrap_gverts.zpp_inner.reverse_flag=this.reverse_flag);null!=this.wrap_edges&&(this.wrap_edges.zpp_inner.reverse_flag=this.reverse_flag)},validate_laxi:function(){if(this.zip_laxi){this.zip_laxi=!1;this.validate_lverts();for(var a=this.edges.head,
b=this.lverts.next,c=b,b=b.next;null!=b;){var d=b,e=a.elt,a=a.next;e.lp0=c;e.lp1=d;var h=0,g=0,h=c.x-d.x,g=c.y-d.y,f=Math.sqrt(h*h+g*g);e.length=f;f=1/f;h*=f;g*=f;f=h;h=-g;g=f;e.lprojection=h*c.x+g*c.y;e.lnormx=h;e.lnormy=g;null!=e.wrap_lnorm&&(e.wrap_lnorm.zpp_inner.x=h,e.wrap_lnorm.zpp_inner.y=g);c=d;b=b.next}e=this.lverts.next;a=a.elt;a.lp0=c;a.lp1=e;d=b=0;b=c.x-e.x;d=c.y-e.y;e=Math.sqrt(b*b+d*d);a.length=e;e=1/e;h=b*e;b=-(d*e);d=h;a.lprojection=b*c.x+d*c.y;a.lnormx=b;a.lnormy=d;null!=a.wrap_lnorm&&
(a.wrap_lnorm.zpp_inner.x=b,a.wrap_lnorm.zpp_inner.y=d)}},validate_gverts:function(){if(this.zip_gverts&&null!=this.body){this.zip_gverts=!1;this.validate_lverts();this.body.validate_axis();for(var a=this.lverts.next,b=this.gverts.next;null!=b;){var c=b,d=a,a=a.next;c.x=this.body.posx+(this.body.axisy*d.x-this.body.axisx*d.y);c.y=this.body.posy+(d.x*this.body.axisx+d.y*this.body.axisy);b=b.next}}},validate_gaxi:function(){if(this.zip_gaxi&&null!=this.body){this.zip_gaxi=!1;this.validate_laxi();this.body.validate_axis();
this.validate_gverts();for(var a=this.edges.head,b=this.gverts.next,c=b,b=b.next;null!=b;){var d=b,e=a.elt,a=a.next;e.gp0=c;e.gp1=d;e.gnormx=this.body.axisy*e.lnormx-this.body.axisx*e.lnormy;e.gnormy=e.lnormx*this.body.axisx+e.lnormy*this.body.axisy;e.gprojection=this.body.posx*e.gnormx+this.body.posy*e.gnormy+e.lprojection;null!=e.wrap_gnorm&&(e.wrap_gnorm.zpp_inner.x=e.gnormx,e.wrap_gnorm.zpp_inner.y=e.gnormy);e.tp0=e.gp0.y*e.gnormx-e.gp0.x*e.gnormy;e.tp1=e.gp1.y*e.gnormx-e.gp1.x*e.gnormy;c=d;b=
b.next}b=this.gverts.next;a=a.elt;a.gp0=c;a.gp1=b;a.gnormx=this.body.axisy*a.lnormx-this.body.axisx*a.lnormy;a.gnormy=a.lnormx*this.body.axisx+a.lnormy*this.body.axisy;a.gprojection=this.body.posx*a.gnormx+this.body.posy*a.gnormy+a.lprojection;null!=a.wrap_gnorm&&(a.wrap_gnorm.zpp_inner.x=a.gnormx,a.wrap_gnorm.zpp_inner.y=a.gnormy);a.tp0=a.gp0.y*a.gnormx-a.gp0.x*a.gnormy;a.tp1=a.gp1.y*a.gnormx-a.gp1.x*a.gnormy}},__validate_aabb:function(){this.validate_gverts();var a=this.gverts.next;this.aabb.minx=
a.x;this.aabb.miny=a.y;this.aabb.maxx=a.x;this.aabb.maxy=a.y;for(a=this.gverts.next.next;null!=a;){var b=a;b.x<this.aabb.minx&&(this.aabb.minx=b.x);b.x>this.aabb.maxx&&(this.aabb.maxx=b.x);b.y<this.aabb.miny&&(this.aabb.miny=b.y);b.y>this.aabb.maxy&&(this.aabb.maxy=b.y);a=a.next}},_force_validate_aabb:function(){var a=this.lverts.next,b=this.gverts.next,c=a,a=a.next;b.x=this.body.posx+(this.body.axisy*c.x-this.body.axisx*c.y);b.y=this.body.posy+(c.x*this.body.axisx+c.y*this.body.axisy);this.aabb.minx=
b.x;this.aabb.miny=b.y;this.aabb.maxx=b.x;this.aabb.maxy=b.y;for(b=this.gverts.next.next;null!=b;){var c=b,d=a,a=a.next;c.x=this.body.posx+(this.body.axisy*d.x-this.body.axisx*d.y);c.y=this.body.posy+(d.x*this.body.axisx+d.y*this.body.axisy);c.x<this.aabb.minx&&(this.aabb.minx=c.x);c.x>this.aabb.maxx&&(this.aabb.maxx=c.x);c.y<this.aabb.miny&&(this.aabb.miny=c.y);c.y>this.aabb.maxy&&(this.aabb.maxy=c.y);b=b.next}},__validate_sweepRadius:function(){var a=0,b=0;this.validate_laxi();for(var c=this.lverts.next;null!=
c;){var d=c,d=d.x*d.x+d.y*d.y;d>a&&(a=d);c=c.next}for(c=this.edges.head;null!=c;){d=c.elt;if(d.lprojection<b&&(b=d.lprojection,0>b))break;c=c.next}0>b&&(b=0);this.sweepRadius=Math.sqrt(a);this.sweepCoef=this.sweepRadius-b},__validate_area_inertia:function(){if(null==this.lverts.next||null==this.lverts.next.next||null==this.lverts.next.next.next)this.inertia=this.area=0;else{for(var a=this.area=0,b=0,c=this.lverts.next,d=c,e=c=c.next,c=c.next;null!=c;){var h=c,g=e.y*d.x-e.x*d.y,a=a+g*(e.x*e.x+e.y*
e.y+(e.x*d.x+e.y*d.y)+(d.x*d.x+d.y*d.y)),b=b+g;this.area+=e.x*(h.y-d.y);d=e;e=h;c=c.next}g=c=this.lverts.next;h=e.y*d.x-e.x*d.y;a+=h*(e.x*e.x+e.y*e.y+(e.x*d.x+e.y*d.y)+(d.x*d.x+d.y*d.y));this.area+=e.x*(g.y-d.y);d=e;e=g;c=c.next;g=e.y*d.x-e.x*d.y;a+=g*(e.x*e.x+e.y*e.y+(e.x*d.x+e.y*d.y)+(d.x*d.x+d.y*d.y));this.area+=e.x*(c.y-d.y);this.inertia=a/(6*(b+h+g));this.area*=0.5;0>this.area&&(this.area=-this.area,this.reverse_vertices())}},__validate_angDrag:function(){this.validate_area_inertia();this.validate_laxi();
for(var a=0,b=this.edges.head,c=0,d=this.lverts.next,e=d,d=d.next;null!=d;){var h=d,g=b.elt,b=b.next,c=c+g.length,f=0,i=0,f=h.x-e.x,i=h.y-e.y,a=a+g.length*v.fluidAngularDragFriction*this.material.dynamicFriction*g.lprojection*g.lprojection,j=-(e.y*g.lnormx-e.x*g.lnormy)/(i*g.lnormx-f*g.lnormy);if(0<j){var k;k=1<j?1:j;var l=0,m=0,l=e.x,m=e.y,o=k,l=l+f*o,m=m+i*o,o=g.lnormy*e.x-g.lnormx*e.y,l=g.lnormy*l-g.lnormx*m,a=a+(l*l*l-o*o*o)/(3*(l-o))*k*g.length*v.fluidAngularDrag}1>j&&(j=0>j?0:j,l=k=0,k=e.x,
l=e.y,e=j,k+=f*e,l+=i*e,e=g.lnormy*k-g.lnormx*l,f=g.lnormy*h.x-g.lnormx*h.y,a+=(f*f*f-e*e*e)/(3*(f-e))*v.fluidVacuumDrag*(1-j)*g.length*v.fluidAngularDrag);e=h;d=d.next}d=this.lverts.next;b=b.elt;c+=b.length;g=h=0;h=d.x-e.x;g=d.y-e.y;a+=b.length*v.fluidAngularDragFriction*this.material.dynamicFriction*b.lprojection*b.lprojection;f=-(e.y*b.lnormx-e.x*b.lnormy)/(g*b.lnormx-h*b.lnormy);0<f&&(i=1<f?1:f,l=k=0,k=e.x,l=e.y,j=b.lnormy*e.x-b.lnormx*e.y,k=b.lnormy*(k+h*i)-b.lnormx*(l+g*i),a+=(k*k*k-j*j*j)/
(3*(k-j))*i*b.length*v.fluidAngularDrag);1>f&&(f=0>f?0:f,j=i=0,i=e.x,j=e.y,e=b.lnormy*(i+h*f)-b.lnormx*(j+g*f),d=b.lnormy*d.x-b.lnormx*d.y,a+=(d*d*d-e*e*e)/(3*(d-e))*v.fluidVacuumDrag*(1-f)*b.length*v.fluidAngularDrag);this.angDrag=a/(this.inertia*c)},__validate_localCOM:function(){if(null==this.lverts.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y;else if(null==this.lverts.next.next.next)this.localCOMx=this.lverts.next.x,this.localCOMy=this.lverts.next.y,this.localCOMx+=
1*this.lverts.next.next.x,this.localCOMy+=1*this.lverts.next.next.y,this.localCOMx*=0.5,this.localCOMy*=0.5;else{for(var a=this.localCOMy=this.localCOMx=0,b=this.lverts.next,c=b,d=b=b.next,b=b.next;null!=b;){var e=b,a=a+d.x*(e.y-c.y),c=e.y*d.x-e.x*d.y;this.localCOMx+=(d.x+e.x)*c;this.localCOMy+=(d.y+e.y)*c;c=d;d=e;b=b.next}e=b=this.lverts.next;a+=d.x*(e.y-c.y);c=e.y*d.x-e.x*d.y;this.localCOMx+=(d.x+e.x)*c;this.localCOMy+=(d.y+e.y)*c;c=d;d=e;b=b.next;a+=d.x*(b.y-c.y);c=b.y*d.x-b.x*d.y;this.localCOMx+=
(d.x+b.x)*c;this.localCOMy+=(d.y+b.y)*c;a=1/(3*a);this.localCOMx*=a;this.localCOMy*=a}},localCOM_validate:function(){this.zip_localCOM&&(this.zip_localCOM=!1,this.type==g.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy))},localCOM_invalidate:function(a){this.zip_localCOM&&(this.zip_localCOM=!1,this.type==g.id_ShapeType_POLYGON&&this.polygon.__validate_localCOM(),null!=this.wrap_localCOM&&
(this.wrap_localCOM.zpp_inner.x=this.localCOMx,this.wrap_localCOM.zpp_inner.y=this.localCOMy));for(var b=0,c=0,b=a.x-this.localCOMx,c=a.y-this.localCOMy,a=this.lverts.next;null!=a;){var d=a;d.x+=1*b;d.y+=1*c;a=a.next}this.invalidate_lverts()},setupLocalCOM:function(){this.wrap_localCOM=da.get(this.localCOMx,this.localCOMy,null);this.wrap_localCOM.zpp_inner._inuse=!0;this.wrap_localCOM.zpp_inner._validate=m(this,this.localCOM_validate);this.wrap_localCOM.zpp_inner._invalidate=m(this,this.localCOM_invalidate)},
__rotate:function(a,b){for(var c=this.lverts.next;null!=c;){var d=c,e=0,h=0,e=b*d.x-a*d.y,h=d.x*a+d.y*b;d.x=e;d.y=h;c=c.next}this.invalidate_lverts()},__class__:ck});var jf=function(){this.sweep=this.dynab=null;this.is_sweep=!1;this.space=null};f["zpp_nape.space.ZPP_Broadphase"]=jf;jf.__name__=["zpp_nape","space","ZPP_Broadphase"];jf.prototype={insert:function(a){this.is_sweep?this.sweep.__insert(a):this.dynab.__insert(a)},remove:function(a){this.is_sweep?this.sweep.__remove(a):this.dynab.__remove(a)},
sync:function(a){this.is_sweep?!this.sweep.space.continuous&&a.zip_aabb&&null!=a.body&&(a.zip_aabb=!1,a.type==g.id_ShapeType_CIRCLE?a.circle.__validate_aabb():a.polygon.__validate_aabb()):this.dynab.__sync(a)},broadphase:function(){},clear:function(){},rayCast:function(){return null},__class__:jf};var vb=function(){this.synced=this.first_sync=!1;this.snext=null;this.moved=!1;this.next=this.mnext=null;this.height=this.rayt=0;this.parent=this.child1=this.child2=null;this.dyn=!1;this.aabb=this.shape=
null;this.height=-1};f["zpp_nape.space.ZPP_AABBNode"]=vb;vb.__name__=["zpp_nape","space","ZPP_AABBNode"];vb.prototype={free:function(){this.height=-1;var a=this.aabb;null!=a.outer&&(a.outer.zpp_inner=null,a.outer=null);a.wrap_min=a.wrap_max=null;a._invalidate=null;a._validate=null;a.next=$a.zpp_pool;$a.zpp_pool=a;this.mnext=this.snext=this.next=this.child1=this.child2=this.parent=null},__class__:vb};var ab=function(){this.arb=this.next=null;this.id=this.di=0;this.first=this.sleeping=!1;this.n1=this.n2=
null};f["zpp_nape.space.ZPP_AABBPair"]=ab;ab.__name__=["zpp_nape","space","ZPP_AABBPair"];ab.prototype={__class__:ab};var wb=function(){this.root=null};f["zpp_nape.space.ZPP_AABBTree"]=wb;wb.__name__=["zpp_nape","space","ZPP_AABBTree"];wb.prototype={clear:function(){if(null!=this.root){var a;this.root.next=null;for(a=this.root;null!=a;){var b;b=a;a=b.next;b.next=null;null==b.child1?(b.shape.node=null,b.shape.removedFromSpace(),b.shape=null):(null!=b.child1&&(b.child1.next=a,a=b.child1),null!=b.child2&&
(b.child2.next=a,a=b.child2));b.free();b.next=vb.zpp_pool;vb.zpp_pool=b}this.root=null}},inlined_insertLeaf:function(a){if(null==this.root)this.root=a,this.root.parent=null;else{for(var b=a.aabb,c=this.root;null!=c.child1;){var d=c.child1,e=c.child2,h=c.aabb.perimeter();wb.tmpaabb.setCombine(c.aabb,b);var g=wb.tmpaabb.perimeter(),f=2*g,h=2*(g-h);wb.tmpaabb.setCombine(b,d.aabb);null==d.child1?g=wb.tmpaabb.perimeter()+h:(g=d.aabb.perimeter(),g=wb.tmpaabb.perimeter()-g+h);wb.tmpaabb.setCombine(b,e.aabb);
if(null==e.child1)h=wb.tmpaabb.perimeter()+h;else var i=e.aabb.perimeter(),h=wb.tmpaabb.perimeter()-i+h;if(f<g&&f<h)break;else c=g<h?d:e}d=c.parent;null==vb.zpp_pool?e=new vb:(e=vb.zpp_pool,vb.zpp_pool=e.next,e.next=null);null==$a.zpp_pool?e.aabb=new $a:(e.aabb=$a.zpp_pool,$a.zpp_pool=e.aabb.next,e.aabb.next=null);null;e.moved=!1;e.synced=!1;e.first_sync=!1;e.parent=d;e.aabb.setCombine(b,c.aabb);e.height=c.height+1;null!=d?(d.child1==c?d.child1=e:d.child2=e,e.child1=c,e.child2=a,c.parent=e,a.parent=
e):(e.child1=c,e.child2=a,c.parent=e,this.root=a.parent=e);for(c=a.parent;null!=c;)c=this.balance(c),a=c.child1,b=c.child2,d=a.height,e=b.height,c.height=1+(d>e?d:e),c.aabb.setCombine(a.aabb,b.aabb),c=c.parent}},removeLeaf:function(a){this.inlined_removeLeaf(a)},inlined_removeLeaf:function(a){if(a==this.root)this.root=null;else{var b=a.parent,c=b.parent,a=b.child1==a?b.child2:b.child1;if(null!=c){c.child1==b?c.child1=a:c.child2=a;a.parent=c;b.free();b.next=vb.zpp_pool;vb.zpp_pool=b;for(b=c;null!=
b;)b=this.balance(b),a=b.child1,c=b.child2,b.aabb.setCombine(a.aabb,c.aabb),a=a.height,c=c.height,b.height=1+(a>c?a:c),b=b.parent}else this.root=a,a.parent=null,b.free(),b.next=vb.zpp_pool,vb.zpp_pool=b}},balance:function(a){if(null==a.child1||2>a.height)return a;var b=a.child1,c=a.child2,d=c.height-b.height;if(1<d){var e=c.child1,h=c.child2;c.child1=a;c.parent=a.parent;a.parent=c;null!=c.parent?c.parent.child1==a?c.parent.child1=c:c.parent.child2=c:this.root=c;e.height>h.height?(c.child2=e,a.child2=
h,h.parent=a,a.aabb.setCombine(b.aabb,h.aabb),c.aabb.setCombine(a.aabb,e.aabb),a.height=1+function(){var a=b.height,c=h.height;return a>c?a:c}(this),c.height=1+function(){var b=a.height,c=e.height;return b>c?b:c}(this)):(c.child2=h,a.child2=e,e.parent=a,a.aabb.setCombine(b.aabb,e.aabb),c.aabb.setCombine(a.aabb,h.aabb),a.height=1+function(){var a=b.height,c=e.height;return a>c?a:c}(this),c.height=1+function(){var b=a.height,c=h.height;return b>c?b:c}(this));return c}if(-1>d){var g=b.child1,f=b.child2;
b.child1=a;b.parent=a.parent;a.parent=b;null!=b.parent?b.parent.child1==a?b.parent.child1=b:b.parent.child2=b:this.root=b;g.height>f.height?(b.child2=g,a.child1=f,f.parent=a,a.aabb.setCombine(c.aabb,f.aabb),b.aabb.setCombine(a.aabb,g.aabb),a.height=1+function(){var a=c.height,b=f.height;return a>b?a:b}(this),b.height=1+function(){var b=a.height,c=g.height;return b>c?b:c}(this)):(b.child2=f,a.child1=g,g.parent=a,a.aabb.setCombine(c.aabb,g.aabb),b.aabb.setCombine(a.aabb,f.aabb),a.height=1+function(){var a=
c.height,b=g.height;return a>b?a:b}(this),b.height=1+function(){var b=a.height,c=f.height;return b>c?b:c}(this));return b}return a},__class__:wb};var rl=function(a){this.stree=this.dtree=this.pairs=this.syncs=this.moves=this.openlist=null;jf.call(this);this.space=a;this.is_sweep=!1;this.dynab=this;this.stree=new wb;this.dtree=new wb};f["zpp_nape.space.ZPP_DynAABBPhase"]=rl;rl.__name__=["zpp_nape","space","ZPP_DynAABBPhase"];rl.__super__=jf;rl.prototype=l(jf.prototype,{__insert:function(a){var b;null==
vb.zpp_pool?b=new vb:(b=vb.zpp_pool,vb.zpp_pool=b.next,b.next=null);null==$a.zpp_pool?b.aabb=new $a:(b.aabb=$a.zpp_pool,$a.zpp_pool=b.aabb.next,b.aabb.next=null);null;b.moved=!1;b.synced=!1;b.first_sync=!1;b.shape=a;a.node=b;b.synced=!0;b.first_sync=!0;b.snext=this.syncs;this.syncs=b},__remove:function(a){var b=a.node;b.first_sync||(b.dyn?this.dtree.removeLeaf(b):this.stree.removeLeaf(b));a.node=null;if(b.synced){for(var c=null,d=this.syncs;null!=d&&!(d==b);){c=d;d=d.snext}null==c?this.syncs=d.snext:
c.snext=d.snext;d.snext=null;b.synced=!1}if(b.moved){c=null;for(d=this.moves;null!=d&&!(d==b);){c=d;d=d.mnext}null==c?this.moves=d.mnext:c.mnext=d.mnext;d.mnext=null;b.moved=!1}for(var c=null,e=this.pairs;null!=e;)d=e.next,e.n1==b||e.n2==b?(null==c?this.pairs=d:c.next=d,null!=e.arb&&(e.arb.pair=null),e.arb=null,e.n1.shape.pairs.remove(e),e.n2.shape.pairs.remove(e),e.n1=e.n2=null,e.sleeping=!1,e.next=ab.zpp_pool,ab.zpp_pool=e):c=e,e=d;for(;null!=a.pairs.head;)c=a.pairs.pop_unsafe(),c.n1==b?c.n2.shape.pairs.remove(c):
c.n1.shape.pairs.remove(c),null!=c.arb&&(c.arb.pair=null),c.arb=null,c.n1=c.n2=null,c.sleeping=!1,c.next=ab.zpp_pool,ab.zpp_pool=c;b.free();b.next=vb.zpp_pool;vb.zpp_pool=b},__sync:function(a){var b=a.node;if(!b.synced&&(!this.space.continuous&&a.zip_aabb&&null!=a.body&&(a.zip_aabb=!1,a.type==g.id_ShapeType_CIRCLE?a.circle.__validate_aabb():a.polygon.__validate_aabb()),b.dyn!=(a.body.type==g.id_BodyType_STATIC?!1:!a.body.component.sleeping)||!b.aabb.contains(a.aabb)))b.synced=!0,b.snext=this.syncs,
this.syncs=b},sync_broadphase:function(){this.space.validation();if(null!=this.syncs)if(null==this.moves){for(var a=this.syncs;null!=a;){var b=a.shape;a.first_sync?a.first_sync=!1:(a.dyn?this.dtree:this.stree).inlined_removeLeaf(a);var c=a.aabb;!this.space.continuous&&b.zip_aabb&&null!=b.body&&(b.zip_aabb=!1,b.type==g.id_ShapeType_CIRCLE?b.circle.__validate_aabb():b.polygon.__validate_aabb());c.setExpand(b.aabb,3);((b.body.type==g.id_BodyType_STATIC?a.dyn=!1:a.dyn=!b.body.component.sleeping)?this.dtree:
this.stree).inlined_insertLeaf(a);a.synced=!1;a.moved=!0;a.mnext=a.snext;a.snext=null;a=a.mnext}a=this.syncs;this.syncs=this.moves;this.moves=a}else for(;null!=this.syncs;)a=this.syncs,this.syncs=a.snext,a.snext=null,b=a.shape,a.first_sync?a.first_sync=!1:(a.dyn?this.dtree:this.stree).inlined_removeLeaf(a),c=a.aabb,!this.space.continuous&&b.zip_aabb&&null!=b.body&&(b.zip_aabb=!1,b.type==g.id_ShapeType_CIRCLE?b.circle.__validate_aabb():b.polygon.__validate_aabb()),c.setExpand(b.aabb,3),((b.body.type==
g.id_BodyType_STATIC?a.dyn=!1:a.dyn=!b.body.component.sleeping)?this.dtree:this.stree).inlined_insertLeaf(a),a.synced=!1,a.moved||(a.moved=!0,a.mnext=this.moves,this.moves=a)},broadphase:function(a,b){for(var c=this.syncs;null!=c;){var d=c.shape;c.first_sync?c.first_sync=!1:(c.dyn?this.dtree:this.stree).inlined_removeLeaf(c);var e=c.aabb;!a.continuous&&d.zip_aabb&&null!=d.body&&(d.zip_aabb=!1,d.type==g.id_ShapeType_CIRCLE?d.circle.__validate_aabb():d.polygon.__validate_aabb());e.setExpand(d.aabb,
3);((d.body.type==g.id_BodyType_STATIC?c.dyn=!1:c.dyn=!d.body.component.sleeping)?this.dtree:this.stree).inlined_insertLeaf(c);c.synced=!1;c=c.snext}for(;null!=this.syncs;)if(c=this.syncs,this.syncs=c.snext,c.snext=null,!c.moved&&(c.moved=!1,d=c.shape,!d.body.component.sleeping)){var e=c.aabb,h=null;null!=this.dtree.root&&(this.dtree.root.next=h,h=this.dtree.root);for(;null!=h;){var f;f=h;h=f.next;f.next=null;if(f!=c)if(null==f.child1){var i=f.shape;if(i.body!=d.body&&!(i.body.type==g.id_BodyType_STATIC&&
d.body.type==g.id_BodyType_STATIC)&&e.intersect(f.aabb)){var j,k;d.id<i.id?(j=d.id,k=i.id):(j=i.id,k=d.id);for(var l=null,m=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=m;){var o=m.elt;if(o.id==j&&o.di==k){l=o;break}m=m.next}null!=l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==ab.zpp_pool?l=new ab:(l=ab.zpp_pool,ab.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=f,l.id=j,l.di=k,l.next=this.pairs,this.pairs=l,l.first=!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else e.intersect(f.aabb)&&
(null!=f.child1&&(f.child1.next=h,h=f.child1),null!=f.child2&&(f.child2.next=h,h=f.child2))}null!=this.stree.root&&(this.stree.root.next=h,h=this.stree.root);for(;null!=h;)if(f=h,h=f.next,f.next=null,f!=c)if(null==f.child1){if(i=f.shape,i.body!=d.body&&!(i.body.type==g.id_BodyType_STATIC&&d.body.type==g.id_BodyType_STATIC)&&e.intersect(f.aabb)){d.id<i.id?(j=d.id,k=i.id):(j=i.id,k=d.id);l=null;for(m=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=m;){o=m.elt;if(o.id==j&&o.di==k){l=o;break}m=m.next}null!=
l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==ab.zpp_pool?l=new ab:(l=ab.zpp_pool,ab.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=f,l.id=j,l.di=k,l.next=this.pairs,this.pairs=l,l.first=!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else e.intersect(f.aabb)&&(null!=f.child1&&(f.child1.next=h,h=f.child1),null!=f.child2&&(f.child2.next=h,h=f.child2))}for(;null!=this.moves;)if(c=this.moves,this.moves=c.mnext,c.mnext=null,c.moved=!1,d=c.shape,!d.body.component.sleeping){e=
c.aabb;h=null;null!=this.dtree.root&&(this.dtree.root.next=h,h=this.dtree.root);for(;null!=h;)if(f=h,h=f.next,f.next=null,f!=c)if(null==f.child1){if(i=f.shape,i.body!=d.body&&!(i.body.type==g.id_BodyType_STATIC&&d.body.type==g.id_BodyType_STATIC)&&e.intersect(f.aabb)){d.id<i.id?(j=d.id,k=i.id):(j=i.id,k=d.id);l=null;for(m=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=m;){o=m.elt;if(o.id==j&&o.di==k){l=o;break}m=m.next}null!=l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=
!0):(null==ab.zpp_pool?l=new ab:(l=ab.zpp_pool,ab.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=f,l.id=j,l.di=k,l.next=this.pairs,this.pairs=l,l.first=!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else e.intersect(f.aabb)&&(null!=f.child1&&(f.child1.next=h,h=f.child1),null!=f.child2&&(f.child2.next=h,h=f.child2));null!=this.stree.root&&(this.stree.root.next=h,h=this.stree.root);for(;null!=h;)if(f=h,h=f.next,f.next=null,f!=c)if(null==f.child1){if(i=f.shape,i.body!=d.body&&!(i.body.type==g.id_BodyType_STATIC&&
d.body.type==g.id_BodyType_STATIC)&&e.intersect(f.aabb)){d.id<i.id?(j=d.id,k=i.id):(j=i.id,k=d.id);l=null;for(m=(d.pairs.length<i.pairs.length?d:i).pairs.head;null!=m;){o=m.elt;if(o.id==j&&o.di==k){l=o;break}m=m.next}null!=l?l.sleeping&&(l.sleeping=!1,l.next=this.pairs,this.pairs=l,l.first=!0):(null==ab.zpp_pool?l=new ab:(l=ab.zpp_pool,ab.zpp_pool=l.next,l.next=null),null,l.n1=c,l.n2=f,l.id=j,l.di=k,l.next=this.pairs,this.pairs=l,l.first=!0,d.pairs.inlined_add(l),i.pairs.inlined_add(l))}}else e.intersect(f.aabb)&&
(null!=f.child1&&(f.child1.next=h,h=f.child1),null!=f.child2&&(f.child2.next=h,h=f.child2))}c=null;for(d=this.pairs;null!=d;)!d.first&&!d.n1.aabb.intersect(d.n2.aabb)?(null==c?this.pairs=d.next:c.next=d.next,d.n1.shape.pairs.inlined_try_remove(d),d.n2.shape.pairs.inlined_try_remove(d),e=d.next,null!=d.arb&&(d.arb.pair=null),d.arb=null,d.n1=d.n2=null,d.sleeping=!1,d.next=ab.zpp_pool,ab.zpp_pool=d,d=e):(e=d.n1.shape,h=e.body,f=d.n2.shape,i=f.body,!d.first&&(h.component.sleeping||h.type==g.id_BodyType_STATIC)&&
(i.component.sleeping||i.type==g.id_BodyType_STATIC)?(d.sleeping=!0,null==c?this.pairs=d.next:c.next=d.next):(d.first=!1,e.aabb.intersect(f.aabb)&&(c=d.arb,d.arb=b?a.narrowPhase(e,f,h.type!=g.id_BodyType_DYNAMIC||i.type!=g.id_BodyType_DYNAMIC,d.arb,!1):a.continuousEvent(e,f,h.type!=g.id_BodyType_DYNAMIC||i.type!=g.id_BodyType_DYNAMIC,d.arb,!1),null==d.arb?null!=c&&(c.pair=null):d.arb.pair=d),c=d),d=d.next)},clear:function(){for(;null!=this.syncs;){var a=this.syncs.snext;this.syncs.snext=null;this.syncs.first_sync&&
(this.syncs.shape.node=null,this.syncs.shape.removedFromSpace(),this.syncs.shape=null);this.syncs=a}for(;null!=this.moves;)a=this.moves.mnext,this.moves.mnext=null,this.moves.first_sync&&(this.moves.shape.node=null,this.moves.shape.removedFromSpace(),this.moves.shape=null),this.moves=a;for(;null!=this.pairs;){a=this.pairs.next;null!=this.pairs.arb&&(this.pairs.arb.pair=null);this.pairs.arb=null;this.pairs.n1.shape.pairs.inlined_try_remove(this.pairs);this.pairs.n2.shape.pairs.inlined_try_remove(this.pairs);
var b=this.pairs;b.n1=b.n2=null;b.sleeping=!1;b.next=ab.zpp_pool;ab.zpp_pool=b;this.pairs=a}this.dtree.clear();this.stree.clear()},rayCast:function(a,b,c){null==this.openlist&&(this.openlist=new Im);this.sync_broadphase();a.validate_dir();var d=a.maxdist;if(null!=this.dtree.root&&a.aabbtest(this.dtree.root.aabb)){var e=a.aabbsect(this.dtree.root.aabb);if(0<=e&&e<d){this.dtree.root.rayt=e;for(var e=null,h=this.openlist.head;null!=h&&!(this.dtree.root.rayt<h.elt.rayt);){e=h;h=h.next}this.openlist.inlined_insert(e,
this.dtree.root)}}if(null!=this.stree.root&&a.aabbtest(this.stree.root.aabb)&&(e=a.aabbsect(this.stree.root.aabb),0<=e&&e<d)){this.stree.root.rayt=e;e=null;for(h=this.openlist.head;null!=h&&!(this.stree.root.rayt<h.elt.rayt);){e=h;h=h.next}this.openlist.inlined_insert(e,this.stree.root)}for(e=null;null!=this.openlist.head;){h=this.openlist.pop_unsafe();if(h.rayt>=d)break;if(null==h.child1){if(h=h.shape,null==c||h.filter.shouldCollide(c))h=h.type==g.id_ShapeType_CIRCLE?a.circlesect(h.circle,b,d):a.aabbtest(h.aabb)?
a.polysect(h.polygon,b,d):null,null!=h&&(d=h.zpp_inner.toiDistance,null!=e&&e.zpp_inner.free(),e=h)}else{if(null!=h.child1&&a.aabbtest(h.child1.aabb)){var f=a.aabbsect(h.child1.aabb);if(0<=f&&f<d){h.child1.rayt=f;for(var f=null,i=this.openlist.head;null!=i&&!(h.child1.rayt<i.elt.rayt);){f=i;i=i.next}this.openlist.inlined_insert(f,h.child1)}}if(null!=h.child2&&a.aabbtest(h.child2.aabb)&&(f=a.aabbsect(h.child2.aabb),0<=f&&f<d)){h.child2.rayt=f;f=null;for(i=this.openlist.head;null!=i&&!(h.child2.rayt<
i.elt.rayt);){f=i;i=i.next}this.openlist.inlined_insert(f,h.child2)}}}this.openlist.clear();return e},__class__:rl});var nb=function(){this.waket=0;this.sleep=!1;this.comps=null;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.next=null;this.comps=new Jm};f["zpp_nape.space.ZPP_Island"]=nb;nb.__name__=["zpp_nape","space","ZPP_Island"];nb.prototype={inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},
inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},inlined_pop_unsafe:function(){var a=this.next;this.pop();return a},__class__:nb};var Lc=function(){this.woken=!1;this.waket=0;this.sleeping=!1;this.body=this.constraint=this.island=null;this.isBody=!1;this.rank=0;this.next=this.parent=null;this.sleeping=!1;this.island=null;this.parent=this;this.rank=0;this.woken=!1};f["zpp_nape.space.ZPP_Component"]=Lc;Lc.__name__=
["zpp_nape","space","ZPP_Component"];Lc.prototype={__class__:Lc};var Hb=function(){this.freed=this.lazydel=!1;this.length=0;this._inuse=this.modified=this.pushmod=!1;this.int1=this.int2=this.next=null;this.id=this.di=0;this.arbiters=new Ih};f["zpp_nape.space.ZPP_CallbackSet"]=Hb;Hb.__name__=["zpp_nape","space","ZPP_CallbackSet"];Hb.get=function(a,b){var c;null==Hb.zpp_pool?c=new Hb:(c=Hb.zpp_pool,Hb.zpp_pool=c.next,c.next=null);c.freed=!1;c.lazydel=!1;c.COLLISIONstate=g.id_PreFlag_ACCEPT;c.COLLISIONstamp=
0;c.SENSORstate=g.id_PreFlag_ACCEPT;c.SENSORstamp=0;c.FLUIDstate=g.id_PreFlag_ACCEPT;c.FLUIDstamp=0;a.id<b.id?(c.int1=a,c.int2=b):(c.int1=b,c.int2=a);c.id=c.int1.id;c.di=c.int2.id;return c};Hb.prototype={inlined_add:function(a){a._inuse=!0;a.next=this.next;this.next=a;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.next;this.next=a.next;a._inuse=!1;null==this.next&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},
inlined_pop_unsafe:function(){var a=this.next;this.pop();return a},inlined_erase:function(a){var b,c;null==a?(b=this.next,this.next=c=b.next,null==this.next&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));b._inuse=!1;this.modified=!0;this.length--;this.pushmod=!0;return c},remove_arb:function(a){this.arbiters.inlined_try_remove(a)},empty_arb:function(a){var b;b=!0;for(var c=this.arbiters.head;null!=c;)if(0==(c.elt.type&a))c=c.next;else{b=!1;break}return b},sleeping:function(){var a;
a=!0;for(var b=this.arbiters.head;null!=b;)if(b.elt.sleeping)b=b.next;else{a=!1;break}return a},__class__:Hb};var Km=function(a){this.cbsets=this.space=null;null==gd.zpp_pool?this.cbsets=new gd:(this.cbsets=gd.zpp_pool,gd.zpp_pool=this.cbsets.next,this.cbsets.next=null);null;this.cbsets.lt=Sa.setlt;this.space=a};f["zpp_nape.space.ZPP_CbSetManager"]=Km;Km.__name__=["zpp_nape","space","ZPP_CbSetManager"];Km.prototype={get:function(a){if(null==a.head)return null;var b;null==Sa.zpp_pool?b=new Sa:(b=Sa.zpp_pool,
Sa.zpp_pool=b.next,b.next=null);null;var c=b.cbTypes;b.cbTypes=a;var d=this.cbsets.find_weak(b);null!=d?a=d.data:(a=Sa.get(a),this.cbsets.insert(a),a.manager=this);b.cbTypes=c;b.free();b.next=Sa.zpp_pool;Sa.zpp_pool=b;return a},remove:function(a){for(this.cbsets.remove(a);null!=a.cbpairs.head;){var b=a.cbpairs.pop_unsafe();b.a!=b.b&&(a==b.a?b.b.cbpairs.remove(b):b.a.cbpairs.remove(b));b.a=b.b=null;b.listeners.clear();b.next=jc.zpp_pool;jc.zpp_pool=b}a.manager=null},clear:function(){},validate:function(){if(!this.cbsets.empty()){for(var a=
this.cbsets.parent;null!=a.prev;)a=a.prev;for(;null!=a;)if(a.data.validate(),null!=a.next)for(a=a.next;null!=a.prev;)a=a.prev;else{for(;null!=a.parent&&a==a.parent.next;)a=a.parent;a=a.parent}}},pair:function(a,b){for(var c=null,d=(a.cbpairs.length<b.cbpairs.length?a.cbpairs:b.cbpairs).head;null!=d;){var e=d.elt;if(e.a==a&&e.b==b||e.a==b&&e.b==a){c=e;break}d=d.next}null==c&&(c=jc.get(a,b),a.cbpairs.add(c),b!=a&&b.cbpairs.add(c));c.zip_listeners&&(c.zip_listeners=!1,c.__validate());return c},__class__:Km};
var xm=function(a,b){this.precb=this.prelisteners=null;this.continuous=!1;this.toiEvents=null;this.pre_dt=0;this.c_arbiters_true=this.c_arbiters_false=this.f_arbiters=this.s_arbiters=this.live=this.wrap_live=this.live_constraints=this.wrap_livecon=this.staticsleep=this.islands=this.listeners=this.wrap_listeners=this.callbacks=this.callbackset_list=this.cbsets=null;this.sortcontacts=!1;this.time=0;this.midstep=!1;this.global_lin_drag=this.global_ang_drag=this.stamp=0;this.wrap_gravity=this.bodies=
this.wrap_bodies=this.compounds=this.wrap_compounds=this.constraints=this.wrap_constraints=this.kinematics=this.bphase=this.__static=null;this.gravityx=this.gravityy=0;this.outer=null;this.toiEvents=new Lm;this.global_ang_drag=this.global_lin_drag=0.015;this.precb=new Vj;this.precb.zpp_inner=new ke;this.sortcontacts=!0;this.pre_dt=0;var c;if(!(c=null==b))null==g.Broadphase_DYNAMIC_AABB_TREE&&(g.internal=!0,g.Broadphase_DYNAMIC_AABB_TREE=new ig,g.internal=!1),c=b==g.Broadphase_DYNAMIC_AABB_TREE;c?
this.bphase=new rl(this):(null==g.Broadphase_SWEEP_AND_PRUNE&&(g.internal=!0,g.Broadphase_SWEEP_AND_PRUNE=new ig,g.internal=!1),b==g.Broadphase_SWEEP_AND_PRUNE&&(this.bphase=new sl(this)));this.time=0;null!=a?(this.gravityx=a.x,this.gravityy=a.y):this.gravityy=this.gravityx=0;this.bodies=new Jf;this.wrap_bodies=Ce.get(this.bodies);this.wrap_bodies.zpp_inner.adder=m(this,this.bodies_adder);this.wrap_bodies.zpp_inner.subber=m(this,this.bodies_subber);this.compounds=new vg;this.wrap_compounds=af.get(this.compounds);
this.wrap_compounds.zpp_inner.adder=m(this,this.compounds_adder);this.wrap_compounds.zpp_inner.subber=m(this,this.compounds_subber);this.kinematics=new Jf;this.c_arbiters_true=new tl;this.c_arbiters_false=new tl;this.f_arbiters=new Mm;this.s_arbiters=new Nm;this.islands=new nb;this.live=new Jf;this.wrap_live=Ce.get(this.live,!0);this.staticsleep=new Jf;this.constraints=new gf;this.wrap_constraints=Ae.get(this.constraints);this.wrap_constraints.zpp_inner.adder=m(this,this.constraints_adder);this.wrap_constraints.zpp_inner.subber=
m(this,this.constraints_subber);this.live_constraints=new gf;this.wrap_livecon=Ae.get(this.live_constraints,!0);this.__static=Be.__static();this.__static.zpp_inner.space=this;this.callbacks=new ke;this.midstep=!1;this.listeners=new ul;this.wrap_listeners=Ye.get(this.listeners);this.wrap_listeners.zpp_inner.adder=m(this,this.listeners_adder);this.wrap_listeners.zpp_inner.subber=m(this,this.listeners_subber);this.callbackset_list=new Hb;this.mrca1=new hf;this.mrca2=new hf;this.prelisteners=new sg;this.cbsets=
new Km(this)};f["zpp_nape.space.ZPP_Space"]=xm;xm.__name__=["zpp_nape","space","ZPP_Space"];xm.prototype={getgravity:function(){this.wrap_gravity=da.get(this.gravityx,this.gravityy,null);this.wrap_gravity.zpp_inner._inuse=!0;this.wrap_gravity.zpp_inner._invalidate=m(this,this.gravity_invalidate);this.wrap_gravity.zpp_inner._validate=m(this,this.gravity_validate)},gravity_invalidate:function(a){this.gravityx=a.x;this.gravityy=a.y;for(var a=new vg,b=this.bodies.head;null!=b;){var c=b.elt;c.world||(c.component.waket=
this.stamp+(this.midstep?0:1),c.type==g.id_BodyType_KINEMATIC&&(c.kinematicDelaySleep=!0),c.component.sleeping&&this.really_wake(c,!1));b=b.next}for(b=this.compounds.head;null!=b;)a.add(b.elt),b=b.next;for(;null!=a.head;){b=a.pop_unsafe();for(c=b.bodies.head;null!=c;){var d=c.elt;d.world||(d.component.waket=this.stamp+(this.midstep?0:1),d.type==g.id_BodyType_KINEMATIC&&(d.kinematicDelaySleep=!0),d.component.sleeping&&this.really_wake(d,!1));c=c.next}for(b=b.compounds.head;null!=b;)a.add(b.elt),b=
b.next}},gravity_validate:function(){this.wrap_gravity.zpp_inner.x=this.gravityx;this.wrap_gravity.zpp_inner.y=this.gravityy},clear:function(){for(;null!=this.listeners.head;)this.remListener(this.listeners.pop_unsafe());for(;null!=this.callbackset_list.next;){var a=this.callbackset_list.pop_unsafe();a.arbiters.clear();a.int1=a.int2=null;a.id=a.di=-1;a.freed=!0;null;a.next=Hb.zpp_pool;Hb.zpp_pool=a}for(;null!=this.c_arbiters_true.head;)this.c_arbiters_true.pop_unsafe().retire();for(;null!=this.c_arbiters_false.head;)this.c_arbiters_false.pop_unsafe().retire();
for(;null!=this.s_arbiters.head;)this.s_arbiters.pop_unsafe().retire();for(;null!=this.f_arbiters.head;)this.f_arbiters.pop_unsafe().retire();for(this.bphase.clear();null!=this.bodies.head;){a=this.bodies.pop_unsafe();if(null!=a.component){var b=a.component.island;if(null!=b){for(;null!=b.comps.head;){var c=b.comps.pop_unsafe();c.sleeping=!1;c.island=null;c.parent=c;c.rank=0}b.next=nb.zpp_pool;nb.zpp_pool=b}}a.removedFromSpace();a.space=null}for(;null!=this.constraints.head;){a=this.constraints.pop_unsafe();
if(null!=a.component&&(b=a.component.island,null!=b)){for(;null!=b.comps.head;)c=b.comps.pop_unsafe(),c.sleeping=!1,c.island=null,c.parent=c,c.rank=0;b.next=nb.zpp_pool;nb.zpp_pool=b}a.removedFromSpace();a.space=null}this.kinematics.clear();for(a=new vg;null!=this.compounds.head;)b=this.compounds.pop_unsafe(),a.add(b);for(;null!=a.head;){b=a.pop_unsafe();b.removedFromSpace();b.space=null;for(c=b.bodies.head;null!=c;){var d=c.elt;if(null!=d.component){var e=d.component.island;if(null!=e){for(;null!=
e.comps.head;){var h=e.comps.pop_unsafe();h.sleeping=!1;h.island=null;h.parent=h;h.rank=0}e.next=nb.zpp_pool;nb.zpp_pool=e}}d.removedFromSpace();d.space=null;c=c.next}for(c=b.constraints.head;null!=c;){d=c.elt;if(null!=d.component&&(e=d.component.island,null!=e)){for(;null!=e.comps.head;)h=e.comps.pop_unsafe(),h.sleeping=!1,h.island=null,h.parent=h,h.rank=0;e.next=nb.zpp_pool;nb.zpp_pool=e}d.removedFromSpace();d.space=null;c=c.next}for(b=b.compounds.head;null!=b;)a.add(b.elt),b=b.next}this.staticsleep.clear();
this.live.clear();this.live_constraints.clear();this.time=this.stamp=0;this.mrca1.clear();this.mrca2.clear();this.prelisteners.clear();this.cbsets.clear()},bodies_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_bodies.remove(a),this.addBody(a.zpp_inner),!0):!1},bodies_subber:function(a){this.remBody(a.zpp_inner)},compounds_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.wrap_compounds.remove(a),
this.addCompound(a.zpp_inner),!0):!1},compounds_subber:function(a){this.remCompound(a.zpp_inner)},constraints_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_constraints.remove(a),this.addConstraint(a.zpp_inner),!0):!1},constraints_subber:function(a){this.remConstraint(a.zpp_inner)},listeners_adder:function(a){return a.zpp_inner.space!=this?(null!=a.zpp_inner.space&&a.zpp_inner.space.outer.zpp_inner.wrap_listeners.remove(a),this.addListener(a.zpp_inner),
!0):!1},listeners_subber:function(a){this.remListener(a.zpp_inner)},addListener:function(a){a.space=this;a.addedToSpace();null!=a.interaction&&null},remListener:function(a){null!=a.interaction&&null;a.removedFromSpace();a.space=null},add_callbackset:function(a){a.int1.cbsets.inlined_add(a);a.int2.cbsets.inlined_add(a);this.callbackset_list.inlined_add(a)},remove_callbackset:function(a){a.lazydel=!0;a.int1.cbsets.inlined_try_remove(a);a.int2.cbsets.inlined_try_remove(a)},transmitType:function(a,b){a.world||
(a.component.waket=this.stamp+(this.midstep?0:1),a.type==g.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!1));a.type==g.id_BodyType_DYNAMIC?this.live.remove(a):a.type==g.id_BodyType_KINEMATIC?(this.kinematics.remove(a),this.staticsleep.remove(a)):a.type==g.id_BodyType_STATIC&&this.staticsleep.remove(a);a.type=b;a.type==g.id_BodyType_KINEMATIC&&this.kinematics.add(a);a.type==g.id_BodyType_STATIC&&this.static_validation(a);a.component.sleeping=!0;a.world||
(a.component.waket=this.stamp+(this.midstep?0:1),a.type==g.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0))},added_shape:function(a,b){null==b&&(b=!1);if(!b){var c=a.body;c.world||(c.component.waket=this.stamp+(this.midstep?0:1),c.type==g.id_BodyType_KINEMATIC&&(c.kinematicDelaySleep=!0),c.component.sleeping&&this.really_wake(c,!1))}this.bphase.insert(a);a.addedToSpace()},removed_shape:function(a,b){null==b&&(b=!1);var c=this,d=a.body;b||d.wake();for(var e=
null,h=d.arbiters.head;null!=h;){var f=[h.elt];if(f[0].ws1==a||f[0].ws2==a){if(0!=f[0].present){this.MRCA_chains(f[0].ws1,f[0].ws2);for(h=this.mrca1.head;null!=h;){for(var i=h.elt,j=this.mrca2.head;null!=j;){var k=j.elt,l=i.cbSet,m=k.cbSet;l.validate();m.validate();l.manager.pair(l,m).empty_intersection()||(k=[ib.get(i,k)],k[0].remove_arb(f[0]),f[0].present--,l.manager.pair(l,m).forall(g.id_CbEvent_END,function(a,b){return function(d){if(0!=(d.itype&b[0].type)&&a[0].empty_arb(d.itype)){var e=c.push_callback(d);
e.event=g.id_CbEvent_END;ib.int_callback(a[0],d,e);e.set=a[0]}}}(k,f)),null==k[0].arbiters.head&&this.remove_callbackset(k[0]));j=j.next}h=h.next}}f[0].b1!=d&&f[0].b1.type==g.id_BodyType_DYNAMIC&&(h=f[0].b1,h.world||(h.component.waket=this.stamp+(this.midstep?0:1),h.type==g.id_BodyType_KINEMATIC&&(h.kinematicDelaySleep=!0),h.component.sleeping&&this.really_wake(h,!1)));f[0].b2!=d&&f[0].b2.type==g.id_BodyType_DYNAMIC&&(h=f[0].b2,h.world||(h.component.waket=this.stamp+(this.midstep?0:1),h.type==g.id_BodyType_KINEMATIC&&
(h.kinematicDelaySleep=!0),h.component.sleeping&&this.really_wake(h,!1)));f[0].cleared=!0;(null==d||f[0].b2==d)&&f[0].b1.arbiters.inlined_try_remove(f[0]);(null==d||f[0].b1==d)&&f[0].b2.arbiters.inlined_try_remove(f[0]);null!=f[0].pair&&(f[0].pair.arb=null,f[0].pair=null);f[0].active=!1;this.f_arbiters.modified=!0;h=d.arbiters.erase(e)}else e=h,h=h.next}this.bphase.remove(a);a.removedFromSpace()},addConstraint:function(a){a.space=this;a.addedToSpace();a.active&&(a.component.sleeping=!0,this.wake_constraint(a,
!0))},remConstraint:function(a){a.active&&(this.wake_constraint(a,!0),this.live_constraints.remove(a));a.removedFromSpace();a.space=null},addCompound:function(a){a.space=this;a.addedToSpace();for(var b=a.bodies.head;null!=b;)this.addBody(b.elt),b=b.next;for(b=a.constraints.head;null!=b;)this.addConstraint(b.elt),b=b.next;for(a=a.compounds.head;null!=a;)this.addCompound(a.elt),a=a.next},remCompound:function(a){for(var b=a.bodies.head;null!=b;)this.remBody(b.elt),b=b.next;for(b=a.constraints.head;null!=
b;)this.remConstraint(b.elt),b=b.next;for(b=a.compounds.head;null!=b;)this.remCompound(b.elt),b=b.next;a.removedFromSpace();a.space=null},addBody:function(a,b){null==b&&(b=-1);a.space=this;a.addedToSpace();a.component.sleeping=!0;a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==g.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0));for(var c=a.shapes.head;null!=c;)this.added_shape(c.elt,!0),c=c.next;a.type==g.id_BodyType_STATIC?this.static_validation(a):
a.type!=g.id_BodyType_DYNAMIC&&b!=g.id_BodyType_KINEMATIC&&this.kinematics.add(a)},remBody:function(a,b){null==b&&(b=-1);a.type==g.id_BodyType_STATIC?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==g.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.staticsleep.remove(a)):a.type==g.id_BodyType_DYNAMIC?(a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==g.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&
this.really_wake(a,!0)),this.live.remove(a)):(b!=g.id_BodyType_KINEMATIC&&this.kinematics.remove(a),a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==g.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,!0)),this.staticsleep.remove(a));for(var c=a.shapes.head;null!=c;)this.removed_shape(c.elt,!0),c=c.next;a.removedFromSpace();a.space=null},rayCast:function(a,b,c){return this.bphase.rayCast(a.zpp_inner,b,null==c?null:c.zpp_inner)},push_callback:function(a){var b;
null==ke.zpp_pool?b=new ke:(b=ke.zpp_pool,ke.zpp_pool=b.next,b.next=null);null;this.callbacks.push(b);b.listener=a;return b},step:function(a,b,c){var d=this;this.time+=a;this.pre_dt=a;this.midstep=!0;this.stamp++;this.validation();this.bphase.broadphase(this,!0);this.prestep(a);if(this.sortcontacts){var e=this.c_arbiters_false;if(null!=e.head&&null!=e.head.next){var h=e.head,f=null,i=null,j=null,k=null,l=1,m,o,p;do{m=0;i=h;for(f=h=null;null!=i;){m++;j=i;o=0;for(p=l;null!=j&&o<l;)o++,j=j.next;for(;0<
o||0<p&&null!=j;)0==o?(k=j,j=j.next,p--):0==p||null==j?(k=i,i=i.next,o--):(i.elt.active&&j.elt.active?i.elt.oc1.dist<j.elt.oc1.dist:1)?(k=i,i=i.next,o--):(k=j,j=j.next,p--),null!=f?f.next=k:h=k,f=k;i=j}f.next=null;l<<=1}while(1<m);e.head=h;e.modified=!0;e.pushmod=!0}}this.updateVel(a);this.warmStart();this.iterateVel(b);for(b=this.kinematics.head;null!=b;)e=b.elt,e.pre_posx=e.posx,e.pre_posy=e.posy,e.pre_rot=e.rot,b=b.next;for(b=this.live.head;null!=b;)e=b.elt,e.pre_posx=e.posx,e.pre_posy=e.posy,
e.pre_rot=e.rot,b=b.next;this.updatePos(a);this.continuous=!0;this.continuousCollisions(a);this.continuous=!1;this.iteratePos(c);for(c=this.kinematics.head;null!=c;)b=c.elt,e=b.pre_rot!=b.rot,!(b.posx==b.pre_posx&&b.posy==b.pre_posy)&&b.invalidate_pos(),e&&b.invalidate_rot(),c=c.next;for(c=this.live.head;null!=c;)b=c.elt,e=b.pre_rot!=b.rot,!(b.posx==b.pre_posx&&b.posy==b.pre_posy)&&b.invalidate_pos(),e&&b.invalidate_rot(),c=c.next;c=null;for(b=this.staticsleep.head;null!=b;)e=b.elt,e.type!=g.id_BodyType_KINEMATIC||
0==e.velx&&0==e.vely&&0==e.angvel?e.kinematicDelaySleep?(e.kinematicDelaySleep=!1,b=b.next):(e.component.sleeping=!0,b=this.staticsleep.inlined_erase(c)):(c=b,b=b.next);this.doForests(a);this.sleepArbiters();this.midstep=!1;c=null;for(a=this.callbackset_list.next;null!=a;)b=[a],null==b[0].arbiters.head?(a=this.callbackset_list.inlined_erase(c),b=b[0],b.int1=b.int2=null,b.id=b.di=-1,b.freed=!0,null,b.next=Hb.zpp_pool,Hb.zpp_pool=b):(c=[b[0].sleeping()],Sa.find_all(b[0].int1.cbSet,b[0].int2.cbSet,g.id_CbEvent_ONGOING,
function(a,b){return function(c){if((!a[0]||c.allowSleepingCallbacks)&&!b[0].empty_arb(c.itype)){var e=d.push_callback(c);e.event=g.id_CbEvent_ONGOING;ib.int_callback(b[0],c,e);e.set=b[0]}}}(c,b)),c=a,a=a.next);for(;!this.callbacks.empty();)a=this.callbacks.pop(),a.listener.type==g.id_ListenerType_BODY?a.listener.body.handler(a.wrapper_body()):a.listener.type==g.id_ListenerType_CONSTRAINT?a.listener.constraint.handler(a.wrapper_con()):a.listener.type==g.id_ListenerType_INTERACTION&&a.listener.interaction.handleri(a.wrapper_int()),
a.int1=a.int2=null,a.body=null,a.constraint=null,a.listener=null,null!=a.wrap_arbiters&&(a.wrap_arbiters.zpp_inner.inner=null),a.set=null,a.next=ke.zpp_pool,ke.zpp_pool=a},continuousCollisions:function(a){var b=2*Math.PI/a;this.bphase.broadphase(this,!1);for(var c=0;1>c&&null!=this.toiEvents.head;){for(var d=null,c=2,e=!1,h=null,f=null,i=this.toiEvents.head;null!=i;){var j=i.elt,k=j.s1.body,l=j.s2.body;if(k.sweepFrozen&&l.sweepFrozen)if(0!=j.toi&&$.testCollide_safe(j.s1,j.s2))j.toi=0;else{i=this.toiEvents.erase(f);
j.next=yc.zpp_pool;yc.zpp_pool=j;continue}if(j.frozen1!=k.sweepFrozen||j.frozen2!=l.sweepFrozen)if(j.kinematic){i=this.toiEvents.erase(f);j.next=yc.zpp_pool;yc.zpp_pool=j;continue}else if(j.frozen1=k.sweepFrozen,j.frozen2=l.sweepFrozen,j.frozen1&&(k=j.s1,j.s1=j.s2,j.s2=k,j.frozen1=!1,j.frozen2=!0),wd.staticSweep(j,a,0,v.collisionSlopCCD),0>j.toi){i=this.toiEvents.erase(f);j.next=yc.zpp_pool;yc.zpp_pool=j;continue}if(0<=j.toi&&(j.toi<c||!e&&j.kinematic))d=j,c=j.toi,e=j.kinematic,h=f;f=i;i=i.next}if(null==
d)break;this.toiEvents.erase(h);c=d.toi;e=d.s1.body;h=d.s2.body;e.sweepFrozen||(e.sweepIntegrate(c*a),e.sweepValidate(d.s1));h.sweepFrozen||(h.sweepIntegrate(c*a),h.sweepValidate(d.s2));f=this.narrowPhase(d.s1,d.s2,!0,d.arbiter,!0);null==f?null!=d.arbiter&&null!=d.arbiter.pair&&(d.arbiter.pair.arb=null,d.arbiter.pair=null):!this.presteparb(f,a,!0)&&f.type==qa.COL&&f.active&&0!=(f.immState&g.id_ImmState_ACCEPT)&&(f.colarb.warmStart(),f.colarb.applyImpulseVel(),f.colarb.applyImpulseVel(),f.colarb.applyImpulseVel(),
f.colarb.applyImpulseVel(),e.sweep_angvel=e.angvel%b,h.sweep_angvel=h.angvel%b);null!=f&&f.active&&0!=(f.immState&g.id_ImmState_ACCEPT)&&f.type==qa.COL&&(!e.sweepFrozen&&e.type!=g.id_BodyType_KINEMATIC&&(e.sweepFrozen=!0,e.angvel=d.failed?e.sweep_angvel=0:d.slipped?e.sweep_angvel*=v.angularCCDSlipScale:e.sweep_angvel),!h.sweepFrozen&&h.type!=g.id_BodyType_KINEMATIC&&(h.sweepFrozen=!0,h.angvel=d.failed?h.sweep_angvel=0:d.slipped?h.sweep_angvel*=v.angularCCDSlipScale:h.sweep_angvel))}for(;null!=this.toiEvents.head;)b=
this.toiEvents.pop_unsafe(),b.next=yc.zpp_pool,yc.zpp_pool=b;for(b=this.kinematics.head;null!=b;)d=b.elt,d.sweepIntegrate(a),d.sweepTime=0,b=b.next;for(b=this.live.head;null!=b;)d=b.elt,d.sweepFrozen||d.sweepIntegrate(a),d.sweepTime=0,b=b.next},continuousEvent:function(a,b,c,d){if(a.body.sweepFrozen&&b.body.sweepFrozen||a.body.disableCCD||b.body.disableCCD||null!=d&&null==d.colarb||0>=this.interactionType(a,b,a.body,b.body))return d;var e=a.body,h=b.body;if(c||e.bullet||h.bullet){var f;null==yc.zpp_pool?
f=new yc:(f=yc.zpp_pool,yc.zpp_pool=f.next,f.next=null);f.failed=!1;f.s1=f.s2=null;f.arbiter=null;e=e.type==g.id_BodyType_KINEMATIC||h.type==g.id_BodyType_KINEMATIC;c&&!e?(a.body.type!=g.id_BodyType_DYNAMIC?(f.s2=a,f.s1=b):(f.s1=a,f.s2=b),f.kinematic=!1,wd.staticSweep(f,this.pre_dt,0,v.collisionSlopCCD)):(f.s1=a,f.s2=b,f.kinematic=e,f.s1.body.sweepFrozen||f.s2.body.sweepFrozen?(f.s1.body.sweepFrozen&&(a=f.s1,f.s1=f.s2,f.s2=a,f.frozen1=!1,f.frozen2=!0),wd.staticSweep(f,this.pre_dt,0,v.collisionSlopCCD)):
wd.dynamicSweep(f,this.pre_dt,0,v.collisionSlopCCD));c&&0>f.toi||f.failed?(c=f,c.next=yc.zpp_pool,yc.zpp_pool=c):(this.toiEvents.add(f),f.frozen1=f.s1.body.sweepFrozen,f.frozen2=f.s2.body.sweepFrozen,f.arbiter=null!=d?d.colarb:null)}return d},bodyCbWake:function(a){if(a.type==g.id_BodyType_DYNAMIC&&null!=a.cbSet)if(this.midstep)for(var b=a.cbSet.bodylisteners.head;null!=b;){var c=b.elt;c.event==g.id_CbEvent_WAKE&&(c=this.push_callback(c),c.event=g.id_CbEvent_WAKE,c.body=a);b=b.next}else a.component.woken=
!0},bodyCbSleep:function(a){if(a.type==g.id_BodyType_DYNAMIC&&null!=a.cbSet)for(var b=a.cbSet.bodylisteners.head;null!=b;){var c=b.elt;c.event==g.id_CbEvent_SLEEP&&(c=this.push_callback(c),c.event=g.id_CbEvent_SLEEP,c.body=a);b=b.next}},constraintCbWake:function(a){if(null!=a.cbSet)if(this.midstep)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==g.id_CbEvent_WAKE&&(c=this.push_callback(c),c.event=g.id_CbEvent_WAKE,c.constraint=a);b=b.next}else a.component.woken=!0},constraintCbSleep:function(a){if(null!=
a.cbSet)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==g.id_CbEvent_SLEEP&&(c=this.push_callback(c),c.event=g.id_CbEvent_SLEEP,c.constraint=a);b=b.next}},constraintCbBreak:function(a){if(null!=a.cbSet)for(var b=a.cbSet.conlisteners.head;null!=b;){var c=b.elt;c.event==g.id_CbEvent_BREAK&&(c=this.push_callback(c),c.event=g.id_CbEvent_BREAK,c.constraint=a);b=b.next}},nullListenerType:function(a,b){for(var c=new hf,d=a.interactors.head;null!=d;)c.add(d.elt),d=d.next;if(a!=b)for(d=
b.interactors.head;null!=d;)c.add(d.elt),d=d.next;for(;null!=c.head;)if(d=c.pop_unsafe(),null!=d.icompound){for(var d=d.icompound,e=d.bodies.head;null!=e;)c.add(e.elt),e=e.next;for(d=d.compounds.head;null!=d;)c.add(d.elt),d=d.next}else{e=null!=d.ibody?d.ibody:d.ishape.body;d=null!=d.ishape?d.ishape:null;for(e=e.arbiters.head;null!=e;){var h=e.elt;if(0!=h.present&&(null==d||h.ws1==d||h.ws2==d)){this.MRCA_chains(h.ws1,h.ws2);for(h=this.mrca1.head;null!=h;){var g=h.elt;if(!(g.cbSet!=a&&g.cbSet!=b))for(var f=
this.mrca2.head;null!=f;){var i=f.elt;if(!(g.cbSet==a&&i.cbSet!=b||g.cbSet==b&&i.cbSet!=a))if(i=ib.get(g,i),null!=i){for(;null!=i.arbiters.head;)i.arbiters.pop_unsafe().present--;this.remove_callbackset(i)}f=f.next}h=h.next}}e=e.next}}},nullInteractorType:function(a,b){null==b&&(b=a);if(null!=a.icompound){for(var c=a.icompound,d=c.bodies.head;null!=d;)this.nullInteractorType(d.elt,b),d=d.next;for(c=c.compounds.head;null!=c;)this.nullInteractorType(c.elt,b),c=c.next}else{d=null!=a.ibody?a.ibody:a.ishape.body;
c=null!=a.ishape?a.ishape:null;for(d=d.arbiters.head;null!=d;){var e=d.elt;if(0!=e.present&&(null==c||e.ws1==c||e.ws2==c)){this.MRCA_chains(e.ws1,e.ws2);for(var h=this.mrca1.head;null!=h;){for(var g=h.elt,f=this.mrca2.head;null!=f;){var i=f.elt;g!=b&&i!=b||(i=ib.get(g,i),null!=i&&(e.present--,i.remove_arb(e),null==i.arbiters.head&&this.remove_callbackset(i)));f=f.next}h=h.next}}d=d.next}}},freshListenerType:function(a,b){for(var c=new hf,d=a.interactors.head;null!=d;)c.add(d.elt),d=d.next;if(a!=b)for(d=
b.interactors.head;null!=d;)c.add(d.elt),d=d.next;for(;null!=c.head;)if(d=c.pop_unsafe(),null!=d.icompound){for(var d=d.icompound,e=d.bodies.head;null!=e;)c.add(e.elt),e=e.next;for(d=d.compounds.head;null!=d;)c.add(d.elt),d=d.next}else{e=null!=d.ibody?d.ibody:d.ishape.body;d=null!=d.ishape?d.ishape:null;for(e=e.arbiters.head;null!=e;){var h=e.elt;if(h.presentable&&(null==d||h.ws1==d||h.ws2==d)){this.MRCA_chains(h.ws1,h.ws2);for(var g=this.mrca1.head;null!=g;){var f=g.elt;if(!(f.cbSet!=a&&f.cbSet!=
b))for(var i=this.mrca2.head;null!=i;){var j=i.elt;if(!(f.cbSet==a&&j.cbSet!=b||f.cbSet==b&&j.cbSet!=a)){var k=ib.get(f,j);null==k&&(k=Hb.get(f,j),this.add_callbackset(k));if(j=!k.arbiters.inlined_has(h))k.arbiters.inlined_add(h),j=!0;j&&h.present++}i=i.next}g=g.next}}e=e.next}}},freshInteractorType:function(a,b){null==b&&(b=a);if(null!=a.icompound){for(var c=a.icompound,d=c.bodies.head;null!=d;)this.freshInteractorType(d.elt,b),d=d.next;for(c=c.compounds.head;null!=c;)this.freshInteractorType(c.elt,
b),c=c.next}else{d=null!=a.ibody?a.ibody:a.ishape.body;c=null!=a.ishape?a.ishape:null;for(d=d.arbiters.head;null!=d;){var e=d.elt;if(e.presentable&&(null==c||e.ws1==c||e.ws2==c)){this.MRCA_chains(e.ws1,e.ws2);for(var h=this.mrca1.head;null!=h;){for(var g=h.elt,f=this.mrca2.head;null!=f;){var i=f.elt;if(!(g!=b&&i!=b)){var j=g.cbSet,k=i.cbSet;j.validate();k.validate();if(!j.manager.pair(j,k).empty_intersection()){j=ib.get(g,i);null==j&&(j=Hb.get(g,i),this.add_callbackset(j));if(i=!j.arbiters.inlined_has(e))j.arbiters.inlined_add(e),
i=!0;i&&e.present++}}f=f.next}h=h.next}}d=d.next}}},wakeCompound:function(a){for(var b=a.bodies.head;null!=b;){var c=b.elt;c.world||(c.component.waket=this.stamp+(this.midstep?0:1),c.type==g.id_BodyType_KINEMATIC&&(c.kinematicDelaySleep=!0),c.component.sleeping&&this.really_wake(c,!1));b=b.next}for(b=a.constraints.head;null!=b;)this.wake_constraint(b.elt),b=b.next;for(a=a.compounds.head;null!=a;)this.wakeCompound(a.elt),a=a.next},wakeIsland:function(a){for(;null!=a.comps.head;){var b=a.comps.pop_unsafe();
b.waket=this.stamp+(this.midstep?0:1);if(b.isBody){var c=b.body;this.live.add(c);for(var d=c.arbiters.head;null!=d;){var e=d.elt;e.sleeping&&(e.sleeping=!1,e.up_stamp+=this.stamp-e.sleep_stamp,e.type==qa.COL?(e=e.colarb,e.stat?this.c_arbiters_true.inlined_add(e):this.c_arbiters_false.inlined_add(e)):e.type==qa.FLUID?this.f_arbiters.inlined_add(e.fluidarb):this.s_arbiters.inlined_add(e.sensorarb));d=d.next}this.bodyCbWake(c);b.sleeping=!1;b.island=null;b.parent=b;b.rank=0;if(c.type!=g.id_BodyType_STATIC)for(b=
c.shapes.head;null!=b;)c=b.elt,null!=c.node&&this.bphase.sync(c),b=b.next}else c=b.constraint,this.live_constraints.inlined_add(c),this.constraintCbWake(c),b.sleeping=!1,b.island=null,b.parent=b,b.rank=0}a.next=nb.zpp_pool;nb.zpp_pool=a},non_inlined_wake:function(a,b){null==b&&(b=!1);a.world||(a.component.waket=this.stamp+(this.midstep?0:1),a.type==g.id_BodyType_KINEMATIC&&(a.kinematicDelaySleep=!0),a.component.sleeping&&this.really_wake(a,b))},really_wake:function(a,b){null==b&&(b=!1);if(null==a.component.island){a.component.sleeping=
!1;a.type==g.id_BodyType_KINEMATIC||a.type==g.id_BodyType_STATIC?this.staticsleep.inlined_add(a):this.live.inlined_add(a);for(var c=a.constraints.head;null!=c;){var d=c.elt;d.space==this&&this.wake_constraint(d);c=c.next}for(c=a.arbiters.head;null!=c;){d=c.elt;if(d.sleeping)if(d.sleeping=!1,d.up_stamp+=this.stamp+(this.midstep?0:1)-d.sleep_stamp,d.type==qa.COL){var e=d.colarb;e.stat?this.c_arbiters_true.inlined_add(e):this.c_arbiters_false.inlined_add(e)}else d.type==qa.FLUID?this.f_arbiters.inlined_add(d.fluidarb):
this.s_arbiters.inlined_add(d.sensorarb);d.type!=qa.SENSOR&&!d.cleared&&d.up_stamp>=this.stamp&&0!=(d.immState&g.id_ImmState_ACCEPT)&&(d.b1.type==g.id_BodyType_DYNAMIC&&d.b1.component.sleeping&&(e=d.b1,e.world||(e.component.waket=this.stamp+(this.midstep?0:1),e.type==g.id_BodyType_KINEMATIC&&(e.kinematicDelaySleep=!0),e.component.sleeping&&this.really_wake(e,!1))),d.b2.type==g.id_BodyType_DYNAMIC&&d.b2.component.sleeping&&(d=d.b2,d.world||(d.component.waket=this.stamp+(this.midstep?0:1),d.type==g.id_BodyType_KINEMATIC&&
(d.kinematicDelaySleep=!0),d.component.sleeping&&this.really_wake(d,!1))));c=c.next}!b&&a.type==g.id_BodyType_DYNAMIC&&this.bodyCbWake(a);if(!b&&!this.bphase.is_sweep&&a.type!=g.id_BodyType_STATIC)for(c=a.shapes.head;null!=c;)d=c.elt,null!=d.node&&this.bphase.sync(d),c=c.next}else this.wakeIsland(a.component.island)},wake_constraint:function(a,b){null==b&&(b=!1);return a.active&&(a.component.waket=this.stamp+(this.midstep?0:1),a.component.sleeping)?(null==a.component.island?(a.component.sleeping=
!1,this.live_constraints.inlined_add(a),a.wake_connected(),b||this.constraintCbWake(a)):this.wakeIsland(a.component.island),!0):!1},doForests:function(a){for(var b=this.c_arbiters_false.head;null!=b;){var c=b.elt;if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&g.id_ImmState_ACCEPT)&&c.b1.type==g.id_BodyType_DYNAMIC&&c.b2.type==g.id_BodyType_DYNAMIC){var d;if(c.b1.component==c.b1.component.parent)d=c.b1.component;else{d=c.b1.component;for(var e=null;d!=d.parent;){var h=d.parent;d.parent=e;e=
d;d=h}for(;null!=e;)h=e.parent,e.parent=d,e=h}if(c.b2.component==c.b2.component.parent)c=c.b2.component;else{c=c.b2.component;for(e=null;c!=c.parent;)h=c.parent,c.parent=e,e=c,c=h;for(;null!=e;)h=e.parent,e.parent=c,e=h}d!=c&&(d.rank<c.rank?d.parent=c:d.rank>c.rank?c.parent=d:(c.parent=d,d.rank++))}b=b.next}for(b=this.f_arbiters.head;null!=b;){c=b.elt;if(!c.cleared&&c.up_stamp==this.stamp&&0!=(c.immState&g.id_ImmState_ACCEPT)&&c.b1.type==g.id_BodyType_DYNAMIC&&c.b2.type==g.id_BodyType_DYNAMIC){if(c.b1.component==
c.b1.component.parent)d=c.b1.component;else{d=c.b1.component;for(e=null;d!=d.parent;)h=d.parent,d.parent=e,e=d,d=h;for(;null!=e;)h=e.parent,e.parent=d,e=h}if(c.b2.component==c.b2.component.parent)c=c.b2.component;else{c=c.b2.component;for(e=null;c!=c.parent;)h=c.parent,c.parent=e,e=c,c=h;for(;null!=e;)h=e.parent,e.parent=c,e=h}d!=c&&(d.rank<c.rank?d.parent=c:d.rank>c.rank?c.parent=d:(c.parent=d,d.rank++))}b=b.next}for(b=this.live_constraints.head;null!=b;)b.elt.forest(),b=b.next;for(;null!=this.live.head;){d=
this.live.inlined_pop_unsafe();b=d.component;if(b==b.parent)c=b;else{c=b;for(e=null;c!=c.parent;)h=c.parent,c.parent=e,e=c,c=h;for(;null!=e;)h=e.parent,e.parent=c,e=h}null==c.island&&(null==nb.zpp_pool?c.island=new nb:(c.island=nb.zpp_pool,nb.zpp_pool=c.island.next,c.island.next=null),c.island.waket=0,this.islands.inlined_add(c.island),c.island.sleep=!0);b.island=c.island;b.island.comps.inlined_add(b);d=d.atRest(a);b.island.sleep=b.island.sleep&&d;b.waket>b.island.waket&&(b.island.waket=b.waket)}for(;null!=
this.live_constraints.head;){a=this.live_constraints.inlined_pop_unsafe().component;if(a==a.parent)b=a;else{b=a;for(d=null;b!=b.parent;)c=b.parent,b.parent=d,d=b,b=c;for(;null!=d;)c=d.parent,d.parent=b,d=c}a.island=b.island;a.island.comps.inlined_add(a);a.waket>a.island.waket&&(a.island.waket=a.waket)}for(;null!=this.islands.next;)if(a=this.islands.inlined_pop_unsafe(),a.sleep)for(a=a.comps.head;null!=a;){d=a.elt;if(d.isBody){b=d.body;b.velx=0;b.vely=0;b.angvel=0;d.sleeping=!0;for(d=b.shapes.head;null!=
d;)this.bphase.sync(d.elt),d=d.next;this.bodyCbSleep(b)}else this.constraintCbSleep(d.constraint),d.sleeping=!0;a=a.next}else{for(;null!=a.comps.head;)b=a.comps.inlined_pop_unsafe(),b.waket=a.waket,b.isBody?this.live.inlined_add(b.body):this.live_constraints.inlined_add(b.constraint),b.sleeping=!1,b.island=null,b.parent=b,b.rank=0;a.next=nb.zpp_pool;nb.zpp_pool=a}},sleepArbiters:function(){var a=null,b=this.c_arbiters_true,c=b.head,d=null!=this.c_arbiters_false;d&&null==c&&(d=!1,c=this.c_arbiters_false.head,
b=this.c_arbiters_false,a=null);for(;null!=c;){var e=c.elt;e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next);d&&null==c&&(d=!1,c=this.c_arbiters_false.head,b=this.c_arbiters_false,a=null)}a=null;b=this.f_arbiters;c=b.head;d=!1;for(;null!=c;)e=c.elt,e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next),d&&null==c&&(d=!1,a=b=null);a=null;b=this.s_arbiters;
c=b.head;d=!1;for(;null!=c;)e=c.elt,e.b1.component.sleeping&&e.b2.component.sleeping?(e.sleep_stamp=this.stamp,e.sleeping=!0,c=b.inlined_erase(a)):(a=c,c=c.next),d&&null==c&&(d=!1,a=b=null)},static_validation:function(a){null!=a.shapes.head&&a.validate_aabb();a.validate_mass();a.validate_inertia();for(var b=a.shapes.head;null!=b;){var c=b.elt;c.type==g.id_ShapeType_POLYGON&&(c.polygon.splice_collinear(),c.polygon.validate_gaxi());b=b.next}a.sweepFrozen=!0},validation:function(){this.cbsets.validate();
for(var a=this.live.head;null!=a;){var b=a.elt;b.sweepRadius=0;for(var c=b.shapes.head;null!=c;){var d=c.elt;d.type==g.id_ShapeType_POLYGON&&(d.polygon.splice_collinear(),d.polygon.validate_gaxi());d.validate_sweepRadius();d.sweepRadius>b.sweepRadius&&(b.sweepRadius=d.sweepRadius);c=c.next}b.validate_mass();b.validate_inertia();null!=b.shapes.head&&(b.validate_aabb(),b.validate_worldCOM());b.validate_gravMass();b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot),null);if(b.component.woken&&
null!=b.cbSet)for(c=b.cbSet.bodylisteners.head;null!=c;)d=c.elt,d.event==g.id_CbEvent_WAKE&&(d=this.push_callback(d),d.event=g.id_CbEvent_WAKE,d.body=b),c=c.next;b.component.woken=!1;for(b=b.shapes.head;null!=b;)this.bphase.sync(b.elt),b=b.next;a=a.next}for(a=this.kinematics.head;null!=a;){b=a.elt;b.sweepRadius=0;for(c=b.shapes.head;null!=c;)d=c.elt,d.type==g.id_ShapeType_POLYGON&&(d.polygon.splice_collinear(),d.polygon.validate_gaxi()),d.validate_sweepRadius(),d.sweepRadius>b.sweepRadius&&(b.sweepRadius=
d.sweepRadius),c=c.next;b.validate_mass();b.validate_inertia();null!=b.shapes.head&&(b.validate_aabb(),b.validate_worldCOM());b.validate_gravMass();b.zip_axis&&(b.zip_axis=!1,b.axisx=Math.sin(b.rot),b.axisy=Math.cos(b.rot),null);for(b=b.shapes.head;null!=b;)this.bphase.sync(b.elt),b=b.next;a=a.next}for(a=this.live_constraints.head;null!=a;){b=a.elt;if(b.active){if(b.component.woken&&null!=b.cbSet)for(c=b.cbSet.conlisteners.head;null!=c;)d=c.elt,d.event==g.id_CbEvent_WAKE&&(d=this.push_callback(d),
d.event=g.id_CbEvent_WAKE,d.constraint=b),c=c.next;b.component.woken=!1}a=a.next}},updateVel:function(a){for(var b=1-a*this.global_lin_drag,c=1-a*this.global_ang_drag,d=this.live.head;null!=d;){var e=d.elt;if(0!=e.smass){var h=a*e.imass;e.velx=b*e.velx+(e.forcex+this.gravityx*e.gravMass)*h;e.vely=b*e.vely+(e.forcey+this.gravityy*e.gravMass)*h}if(0!=e.sinertia){var g=h=0,h=e.worldCOMx-e.posx,g=e.worldCOMy-e.posy;e.angvel=c*e.angvel+(e.torque+(this.gravityy*h-this.gravityx*g)*e.gravMass)*a*e.iinertia}d=
d.next}},updatePos:function(a){for(var b=2*Math.PI/a,c=this.live.head;null!=c;){var d=c.elt;d.pre_posx=d.posx;d.pre_posy=d.posy;d.pre_rot=d.rot;d.sweepTime=0;d.sweep_angvel=d.angvel%b;d.sweepIntegrate(a);if(d.disableCCD)d.sweepFrozen=!0,d.bullet=!1;else{var e=v.staticCCDLinearThreshold*d.sweepRadius,h=v.staticCCDAngularThreshold;if((d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>h*h||d.type==g.id_BodyType_KINEMATIC){e=d.sweep_angvel;0>e&&(e=-e);for(var h=1/e,f=d.shapes.head;null!=f;){var i=
f.elt,j=i.aabb,k=j.minx,l=j.miny,m=j.maxx,o=j.maxy,p=0.008333333333333333*e*a*i.sweepCoef|0;8<p&&(p=8);var r=e*a/p;d.sweepIntegrate(a);i.type==g.id_ShapeType_CIRCLE?i.circle._force_validate_aabb():i.polygon._force_validate_aabb();k<j.minx?j.minx=k:k=j.minx;l<j.miny?j.miny=l:l=j.miny;m>j.maxx?j.maxx=m:m=j.maxx;o>j.maxy?j.maxy=o:o=j.maxy;for(var s=1;s<p;){var t=s++;d.sweepIntegrate(r*t*h);i.type==g.id_ShapeType_CIRCLE?i.circle._force_validate_aabb():i.polygon._force_validate_aabb();k<j.minx?j.minx=
k:k=j.minx;l<j.miny?j.miny=l:l=j.miny;m>j.maxx?j.maxx=m:m=j.maxx;o>j.maxy?j.maxy=o:o=j.maxy}this.bphase.sync(i);f=f.next}d.sweepFrozen=!1;if(d.type==g.id_BodyType_DYNAMIC&&d.bulletEnabled&&(e=v.bulletCCDLinearThreshold*d.sweepRadius,h=v.bulletCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>h*h))d.bullet=!0}else d.sweepFrozen=!0,d.bullet=!1}c=c.next}for(c=this.kinematics.head;null!=c;){d=c.elt;d.pre_posx=d.posx;d.pre_posy=d.posy;d.pre_rot=d.rot;d.sweepTime=0;d.sweep_angvel=
d.angvel%b;d.sweepIntegrate(a);if(d.disableCCD)d.sweepFrozen=!0,d.bullet=!1;else if(e=v.staticCCDLinearThreshold*d.sweepRadius,h=v.staticCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>h*h||d.type==g.id_BodyType_KINEMATIC){e=d.sweep_angvel;0>e&&(e=-e);h=1/e;for(f=d.shapes.head;null!=f;){i=f.elt;j=i.aabb;k=j.minx;l=j.miny;m=j.maxx;o=j.maxy;p=0.008333333333333333*e*a*i.sweepCoef|0;8<p&&(p=8);r=e*a/p;d.sweepIntegrate(a);i.type==g.id_ShapeType_CIRCLE?i.circle._force_validate_aabb():
i.polygon._force_validate_aabb();k<j.minx?j.minx=k:k=j.minx;l<j.miny?j.miny=l:l=j.miny;m>j.maxx?j.maxx=m:m=j.maxx;o>j.maxy?j.maxy=o:o=j.maxy;for(s=1;s<p;)t=s++,d.sweepIntegrate(r*t*h),i.type==g.id_ShapeType_CIRCLE?i.circle._force_validate_aabb():i.polygon._force_validate_aabb(),k<j.minx?j.minx=k:k=j.minx,l<j.miny?j.miny=l:l=j.miny,m>j.maxx?j.maxx=m:m=j.maxx,o>j.maxy?j.maxy=o:o=j.maxy;this.bphase.sync(i);f=f.next}d.sweepFrozen=!1;if(d.type==g.id_BodyType_DYNAMIC&&d.bulletEnabled&&(e=v.bulletCCDLinearThreshold*
d.sweepRadius,h=v.bulletCCDAngularThreshold,(d.velx*d.velx+d.vely*d.vely)*a*a>e*e||d.angvel*d.angvel*a*a>h*h))d.bullet=!0}else d.sweepFrozen=!0,d.bullet=!1;c=c.next}},presteparb:function(a,b,c){null==c&&(c=!1);var d=this;if(!a.cleared&&a.b1.component.sleeping&&a.b2.component.sleeping)return a.sleep_stamp=this.stamp,a.sleeping=!0;if(!a.cleared||0!=a.present||a.intchange){var e=!c&&a.up_stamp==this.stamp-1&&!a.cleared&&!a.intchange,c=a.fresh&&!a.cleared&&!a.intchange;e&&(a.endGenerated=this.stamp);
if(c||e||a.cleared||a.intchange){this.inlined_MRCA_chains(a.ws1,a.ws2);for(e=this.mrca1.head;null!=e;){for(var h=e.elt,f=this.mrca2.head;null!=f;){var i=f.elt,j=h.cbSet,k=i.cbSet;if(!j.manager.pair(j,k).empty_intersection()){var l=[ib.get(h,i)];if(c||a.intchange){null==l[0]&&(l[0]=Hb.get(h,i),this.add_callbackset(l[0]));j.manager.pair(j,k).forall(g.id_CbEvent_BEGIN,function(b){return function(c){if(0!=(c.itype&a.type)&&b[0].empty_arb(c.itype)){var e=d.push_callback(c);e.event=g.id_CbEvent_BEGIN;ib.int_callback(b[0],
c,e);e.set=b[0]}}}(l));if(i=!l[0].arbiters.inlined_has(a))l[0].arbiters.inlined_add(a),i=!0;i&&a.present++}else a.present--,l[0].remove_arb(a),j.manager.pair(j,k).forall(g.id_CbEvent_END,function(b){return function(c){if(0!=(c.itype&a.type)&&b[0].empty_arb(c.itype)){var e=d.push_callback(c);e.event=g.id_CbEvent_END;ib.int_callback(b[0],c,e);e.set=b[0]}}}(l)),null==l[0].arbiters.head&&this.remove_callbackset(l[0])}f=f.next}e=e.next}}a.fresh=!1;a.intchange=!1}if(a.cleared||a.up_stamp+(a.type==qa.COL?
v.arbiterExpirationDelay:0)<this.stamp)return a.type==qa.SENSOR?a.sensorarb.retire():a.type==qa.FLUID?a.fluidarb.retire():a.colarb.retire(),!0;c=a.active;a.active=a.presentable=a.up_stamp==this.stamp;0!=(a.immState&g.id_ImmState_ACCEPT)?a.active&&a.type!=qa.SENSOR&&(null!=a.colarb?a.colarb.preStep(b)&&(a.active=!1):a.fluidarb.preStep(this,b)):null!=a.colarb&&a.colarb.cleanupContacts()&&(a.active=!1);c!=a.active&&(a.b1.arbiters.modified=!0,a.b2.arbiters.modified=!0,this.c_arbiters_true.modified=this.c_arbiters_false.modified=
!0,this.s_arbiters.modified=this.f_arbiters.modified=!0);return!1},prestep:function(a){for(var b=null,c=this.live_constraints.head;null!=c;){var d=c.elt;d.preStep(a)?(c=this.live_constraints.erase(b),d.broken(),this.constraintCbBreak(d),d.removeOnBreak?(d.component.sleeping=!0,this.midstep=!1,null!=d.compound?d.compound.wrap_constraints.remove(d.outer):this.wrap_constraints.remove(d.outer),this.midstep=!0):d.active=!1,d.clearcache()):(b=c,c=c.next)}var b=null,c=this.c_arbiters_true,d=c.head,e=null!=
this.c_arbiters_false;e&&null==d&&(e=!1,d=this.c_arbiters_false.head,c=this.c_arbiters_false,b=null);for(;null!=d;)this.presteparb(d.elt,a)?d=c.inlined_erase(b):(b=d,d=d.next),e&&null==d&&(e=!1,d=this.c_arbiters_false.head,c=this.c_arbiters_false,b=null);b=null;c=this.f_arbiters;d=c.head;e=!1;for(;null!=d;)this.presteparb(d.elt,a)?d=c.inlined_erase(b):(b=d,d=d.next),e&&null==d&&(e=!1,b=c=null);b=null;c=this.s_arbiters;d=c.head;e=!1;for(;null!=d;)this.presteparb(d.elt,a)?d=c.inlined_erase(b):(b=d,
d=d.next),e&&null==d&&(e=!1,b=c=null)},warmStart:function(){for(var a=this.f_arbiters.head;null!=a;){var b=a.elt;b.active&&0!=(b.immState&g.id_ImmState_ACCEPT)&&b.warmStart();a=a.next}a=this.c_arbiters_false.head;b=!0;null==a&&(a=this.c_arbiters_true.head,b=!1);for(;null!=a;){var c=a.elt;c.active&&0!=(c.immState&g.id_ImmState_ACCEPT)&&c.warmStart();a=a.next;b&&null==a&&(a=this.c_arbiters_true.head,b=!1)}for(a=this.live_constraints.head;null!=a;)a.elt.warmStart(),a=a.next},iterateVel:function(a){for(var b=
0;b<a;){b++;for(var c=this.f_arbiters.head;null!=c;){var d=c.elt;d.active&&0!=(d.immState&g.id_ImmState_ACCEPT)&&d.applyImpulseVel();c=c.next}c=null;for(d=this.live_constraints.head;null!=d;){var e=d.elt;e.applyImpulseVel()?(d=this.live_constraints.erase(c),e.broken(),this.constraintCbBreak(e),e.removeOnBreak?(e.component.sleeping=!0,this.midstep=!1,null!=e.compound?e.compound.wrap_constraints.remove(e.outer):this.wrap_constraints.remove(e.outer),this.midstep=!0):e.active=!1,e.clearcache()):(c=d,
d=d.next)}c=this.c_arbiters_false.head;d=!0;null==c&&(c=this.c_arbiters_true.head,d=!1);for(;null!=c;)e=c.elt,e.active&&0!=(e.immState&g.id_ImmState_ACCEPT)&&e.applyImpulseVel(),c=c.next,d&&null==c&&(c=this.c_arbiters_true.head,d=!1)}},iteratePos:function(a){for(var b=0;b<a;){b++;for(var c=null,d=this.live_constraints.head;null!=d;){var e=d.elt;!e.__velocity&&e.stiff&&e.applyImpulsePos()?(d=this.live_constraints.erase(c),e.broken(),this.constraintCbBreak(e),e.removeOnBreak?(e.component.sleeping=!0,
this.midstep=!1,null!=e.compound?e.compound.wrap_constraints.remove(e.outer):this.wrap_constraints.remove(e.outer),this.midstep=!0):e.active=!1,e.clearcache()):(c=d,d=d.next)}c=this.c_arbiters_false.head;d=!0;null==c&&(c=this.c_arbiters_true.head,d=!1);for(;null!=c;)e=c.elt,e.active&&0!=(e.immState&g.id_ImmState_ACCEPT)&&e.applyImpulsePos(),c=c.next,d&&null==c&&(c=this.c_arbiters_true.head,d=!1)}},group_ignore:function(a,b){var c=a.lookup_group();if(null==c)return!1;var d=b.lookup_group();if(null==
d)return!1;for(var e=!1;null!=c&&null!=d;){if(c==d){e=c.ignore;break}c.depth<d.depth?d=d.group:c=c.group}return e},interactionType:function(a,b,c,d){var e;e=!1;for(var h=c.constraints.head;null!=h;){var g=h.elt;if(g.ignore&&g.pair_exists(c.id,d.id)){e=!0;break}h=h.next}return!e&&!this.group_ignore(a,b)?(a.sensorEnabled||b.sensorEnabled)&&a.filter.shouldSense(b.filter)?2:(a.fluidEnabled||b.fluidEnabled)&&a.filter.shouldFlow(b.filter)&&!(0==c.imass&&0==d.imass&&0==c.iinertia&&0==d.iinertia)?0:a.filter.shouldCollide(b.filter)&&
!(0==c.imass&&0==d.imass&&0==c.iinertia&&0==d.iinertia)?1:-1:-1},narrowPhase:function(a,b,c,d,e){var h=this,f=null,i=a.body,j=b.body,k=this.interactionType(a,b,i,j);if(-1!=k){var l,m;a.type>b.type?(l=b,m=a):a.type==b.type?a.id<b.id?(l=a,m=b):(m=a,l=b):(l=a,m=b);var o=l==b;if(0==k){var p;if(null==d){for(var s=null,r=(i.arbiters.length<j.arbiters.length?i:j).arbiters.head;null!=r;){var t=r.elt;if(t.id==l.id&&t.di==m.id){s=t;break}r=r.next}p=s}else p=d;var u=null==p,q,v=!1;u?(null==lc.zpp_pool?q=new lc:
(q=lc.zpp_pool,lc.zpp_pool=q.next,q.next=null),null):null==p.fluidarb?(p.cleared=!0,p.b1.arbiters.inlined_try_remove(p),p.b2.arbiters.inlined_try_remove(p),null!=p.pair&&(p.pair.arb=null,p.pair=null),p.active=!1,this.f_arbiters.modified=!0,null==lc.zpp_pool?q=new lc:(q=lc.zpp_pool,lc.zpp_pool=q.next,q.next=null),null,v=u=q.intchange=!0):q=p.fluidarb;var x=g.id_InteractionType_FLUID;if(u||q.stamp!=this.stamp||e)if(q.stamp=this.stamp,$.flowCollide(l,m,q)){u?(q.b1=a.body,q.ws1=a,q.b2=b.body,q.ws2=b,
q.id=l.id,q.di=m.id,q.b1.arbiters.inlined_add(q),q.b2.arbiters.inlined_add(q),q.active=!0,q.present=0,q.cleared=!1,q.sleeping=!1,q.fresh=!1,q.presentable=!1,q.nx=0,q.ny=1,q.dampx=0,q.dampy=0,q.adamp=0,this.f_arbiters.inlined_add(q),q.fresh=!v):q.fresh=q.up_stamp<this.stamp-1||q.endGenerated==this.stamp&&e;q.up_stamp=q.stamp;if(q.fresh||0==(q.immState&g.id_ImmState_ALWAYS)){q.immState=g.id_ImmState_ACCEPT;var w=!1;this.inlined_MRCA_chains(q.ws1.id>q.ws2.id?q.ws2:q.ws1,q.ws1.id>q.ws2.id?q.ws1:q.ws2);
for(var z=this.mrca1.head;null!=z;){for(var A=z.elt,B=this.mrca2.head;null!=B;){var C=B.elt,D=A.cbSet,E=C.cbSet;if(!D.manager.pair(D,E).empty_intersection()){var y=null,F=null;this.prelisteners.inlined_clear();D.manager.pair(D,E).forall(g.id_CbEvent_PRE,function(a){return function(b){0!=(b.itype&x)&&(a[0]=h.prelisteners.inlined_insert(a[0],b),w=w||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(y=ib.get(A,C),null==y&&(F=Hb.get(A,C),this.add_callbackset(F)),null==y||(y.FLUIDstamp!=this.stamp||
e)&&0==(y.FLUIDstate&g.id_ImmState_ALWAYS)){null!=F&&(y=F);if(null!=y)for(var H=this.prelisteners.head;null!=H;)H.elt.itype==g.id_InteractionType_ANY&&(y.COLLISIONstamp=this.stamp,y.SENSORstamp=this.stamp),y.FLUIDstamp=this.stamp,H=H.next;var I=q.active;q.active=!0;this.precb.zpp_inner.pre_arbiter=q;this.precb.zpp_inner.set=y;for(var J=this.prelisteners.head;null!=J;){var L=J.elt;this.precb.zpp_inner.listener=L;ib.int_callback(y,L,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=A!=this.precb.zpp_inner.int1;
var K=L.handlerp(this.precb);if(null!=K){var M=q,N,O=K;null==g.PreFlag_ACCEPT&&(g.internal=!0,g.PreFlag_ACCEPT=new cb,g.internal=!1);if(O==g.PreFlag_ACCEPT)N=g.id_ImmState_ACCEPT|g.id_ImmState_ALWAYS;else{var V=K,Q;null==g.PreFlag_ACCEPT_ONCE&&(g.internal=!0,g.PreFlag_ACCEPT_ONCE=new cb,g.internal=!1);if(V==g.PreFlag_ACCEPT_ONCE)Q=g.id_ImmState_ACCEPT;else{var X=K;null==g.PreFlag_IGNORE&&(g.internal=!0,g.PreFlag_IGNORE=new cb,g.internal=!1);Q=X==g.PreFlag_IGNORE?g.id_ImmState_IGNORE|g.id_ImmState_ALWAYS:
g.id_ImmState_IGNORE}N=Q}M.immState=N}J=J.next}q.active=I;if(null!=y)for(var S=this.prelisteners.head;null!=S;)S.elt.itype==g.id_InteractionType_ANY&&(y.COLLISIONstate=q.immState,y.SENSORstate=q.immState),y.FLUIDstate=q.immState,S=S.next}else null==y?0==(q.immState&g.id_ImmState_ALWAYS)&&(q.immState=g.id_ImmState_ACCEPT):q.immState=y.FLUIDstate}B=B.next}z=z.next}if(w&&0==(q.immState&g.id_ImmState_ALWAYS)){if(q.b1.type==g.id_BodyType_DYNAMIC){var P=q.b1;P.world||(P.component.waket=this.stamp+(this.midstep?
0:1),P.type==g.id_BodyType_KINEMATIC&&(P.kinematicDelaySleep=!0),P.component.sleeping&&this.really_wake(P,!1))}if(q.b1.type==g.id_BodyType_DYNAMIC){var R=q.b2;R.world||(R.component.waket=this.stamp+(this.midstep?0:1),R.type==g.id_BodyType_KINEMATIC&&(R.kinematicDelaySleep=!0),R.component.sleeping&&this.really_wake(R,!1))}}}if(0!=(q.immState&g.id_ImmState_ACCEPT)){if(q.b1.type==g.id_BodyType_DYNAMIC&&q.b1.component.sleeping){var T=q.b1;T.world||(T.component.waket=this.stamp+(this.midstep?0:1),T.type==
g.id_BodyType_KINEMATIC&&(T.kinematicDelaySleep=!0),T.component.sleeping&&this.really_wake(T,!1))}if(q.b2.type==g.id_BodyType_DYNAMIC&&q.b2.component.sleeping){var W=q.b2;W.world||(W.component.waket=this.stamp+(this.midstep?0:1),W.type==g.id_BodyType_KINEMATIC&&(W.kinematicDelaySleep=!0),W.component.sleeping&&this.really_wake(W,!1))}}q.sleeping&&(q.sleeping=!1,this.f_arbiters.inlined_add(q));f=q}else if(u){var Z=q;Z.next=lc.zpp_pool;lc.zpp_pool=Z;f=null}else f=q;else f=q}else if(1==k){var aa;aa=c?
this.c_arbiters_true:this.c_arbiters_false;var U;if(null==d){for(var ca=null,ea=(i.arbiters.length<j.arbiters.length?i:j).arbiters.head;null!=ea;){var fa=ea.elt;if(fa.id==l.id&&fa.di==m.id){ca=fa;break}ea=ea.next}U=ca}else U=d;var da=null==U,G,ia=!1;da?(null==mc.zpp_pool?G=new mc:(G=mc.zpp_pool,mc.zpp_pool=G.next,G.next=null),null,G.stat=c):null==U.colarb?(U.cleared=!0,U.b1.arbiters.inlined_try_remove(U),U.b2.arbiters.inlined_try_remove(U),null!=U.pair&&(U.pair.arb=null,U.pair=null),U.active=!1,this.f_arbiters.modified=
!0,null==mc.zpp_pool?G=new mc:(G=mc.zpp_pool,mc.zpp_pool=G.next,G.next=null),null,G.intchange=!0,G.stat=c,ia=da=!0):(G=U.colarb,o=l!=G.s1,G.stat!=c&&(G.stat=c,G.sleeping||((c?this.c_arbiters_false:this.c_arbiters_true).remove(G),aa.add(G))));var la=g.id_InteractionType_COLLISION;if(da||G.stamp!=this.stamp||e)if(G.stamp=this.stamp,$.contactCollide(l,m,G,o)){da?(G.b1=a.body,G.ws1=a,G.b2=b.body,G.ws2=b,G.id=l.id,G.di=m.id,G.b1.arbiters.inlined_add(G),G.b2.arbiters.inlined_add(G),G.active=!0,G.present=
0,G.cleared=!1,G.sleeping=!1,G.fresh=!1,G.presentable=!1,G.s1=a,G.s2=b,G.userdef_restitution||(G.restitution=G.s1.material.elasticity<=Math.NEGATIVE_INFINITY||G.s2.material.elasticity<=Math.NEGATIVE_INFINITY?0:G.s1.material.elasticity>=Math.POSITIVE_INFINITY||G.s2.material.elasticity>=Math.POSITIVE_INFINITY?1:(G.s1.material.elasticity+G.s2.material.elasticity)/2,0>G.restitution&&(G.restitution=0),1<G.restitution&&(G.restitution=1)),G.userdef_dyn_fric||(G.dyn_fric=Math.sqrt(G.s1.material.dynamicFriction*
G.s2.material.dynamicFriction)),G.userdef_stat_fric||(G.stat_fric=Math.sqrt(G.s1.material.staticFriction*G.s2.material.staticFriction)),G.userdef_rfric||(G.rfric=Math.sqrt(G.s1.material.rollingFriction*G.s2.material.rollingFriction)),aa.inlined_add(G),G.fresh=!ia):G.fresh=G.up_stamp<this.stamp-1||G.endGenerated==this.stamp&&e;G.up_stamp=G.stamp;if(G.fresh||0==(G.immState&g.id_ImmState_ALWAYS)){G.immState=g.id_ImmState_ACCEPT;var ha=!1;this.inlined_MRCA_chains(G.ws1.id>G.ws2.id?G.ws2:G.ws1,G.ws1.id>
G.ws2.id?G.ws1:G.ws2);for(var ga=this.mrca1.head;null!=ga;){for(var ja=ga.elt,ka=this.mrca2.head;null!=ka;){var ma=ka.elt,na=ja.cbSet,ra=ma.cbSet;if(!na.manager.pair(na,ra).empty_intersection()){var ba=null,pa=null;this.prelisteners.inlined_clear();na.manager.pair(na,ra).forall(g.id_CbEvent_PRE,function(a){return function(b){0!=(b.itype&la)&&(a[0]=h.prelisteners.inlined_insert(a[0],b),ha=ha||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(ba=ib.get(ja,ma),null==ba&&(pa=Hb.get(ja,ma),this.add_callbackset(pa)),
null==ba||(ba.COLLISIONstamp!=this.stamp||e)&&0==(ba.COLLISIONstate&g.id_ImmState_ALWAYS)){null!=pa&&(ba=pa);if(null!=ba)for(var qa=this.prelisteners.head;null!=qa;)qa.elt.itype==g.id_InteractionType_ANY?(ba.COLLISIONstamp=this.stamp,ba.SENSORstamp=this.stamp,ba.FLUIDstamp=this.stamp):ba.COLLISIONstamp=this.stamp,qa=qa.next;var xa=G.active;G.active=!0;G.cleanupContacts();this.precb.zpp_inner.pre_arbiter=G;this.precb.zpp_inner.set=ba;for(var sa=this.prelisteners.head;null!=sa;){var va=sa.elt;this.precb.zpp_inner.listener=
va;ib.int_callback(ba,va,this.precb.zpp_inner);this.precb.zpp_inner.pre_swapped=ja!=this.precb.zpp_inner.int1;var ta=va.handlerp(this.precb);if(null!=ta){var ya=G,wa,za=ta;null==g.PreFlag_ACCEPT&&(g.internal=!0,g.PreFlag_ACCEPT=new cb,g.internal=!1);if(za==g.PreFlag_ACCEPT)wa=g.id_ImmState_ACCEPT|g.id_ImmState_ALWAYS;else{var Ha=ta,Ea;null==g.PreFlag_ACCEPT_ONCE&&(g.internal=!0,g.PreFlag_ACCEPT_ONCE=new cb,g.internal=!1);if(Ha==g.PreFlag_ACCEPT_ONCE)Ea=g.id_ImmState_ACCEPT;else{var Ia=ta;null==g.PreFlag_IGNORE&&
(g.internal=!0,g.PreFlag_IGNORE=new cb,g.internal=!1);Ea=Ia==g.PreFlag_IGNORE?g.id_ImmState_IGNORE|g.id_ImmState_ALWAYS:g.id_ImmState_IGNORE}wa=Ea}ya.immState=wa}sa=sa.next}G.active=xa;if(null!=ba)for(var Da=this.prelisteners.head;null!=Da;)Da.elt.itype==g.id_InteractionType_ANY?(ba.COLLISIONstate=G.immState,ba.SENSORstate=G.immState,ba.FLUIDstate=G.immState):ba.COLLISIONstate=G.immState,Da=Da.next}else null==ba?0==(G.immState&g.id_ImmState_ALWAYS)&&(G.immState=g.id_ImmState_ACCEPT):G.immState=ba.COLLISIONstate}ka=
ka.next}ga=ga.next}if(ha&&0==(G.immState&g.id_ImmState_ALWAYS)){if(G.b1.type==g.id_BodyType_DYNAMIC){var Ba=G.b1;Ba.world||(Ba.component.waket=this.stamp+(this.midstep?0:1),Ba.type==g.id_BodyType_KINEMATIC&&(Ba.kinematicDelaySleep=!0),Ba.component.sleeping&&this.really_wake(Ba,!1))}if(G.b1.type==g.id_BodyType_DYNAMIC){var Ca=G.b2;Ca.world||(Ca.component.waket=this.stamp+(this.midstep?0:1),Ca.type==g.id_BodyType_KINEMATIC&&(Ca.kinematicDelaySleep=!0),Ca.component.sleeping&&this.really_wake(Ca,!1))}}}if(0!=
(G.immState&g.id_ImmState_ACCEPT)){if(G.b1.type==g.id_BodyType_DYNAMIC&&G.b1.component.sleeping){var Fa=G.b1;Fa.world||(Fa.component.waket=this.stamp+(this.midstep?0:1),Fa.type==g.id_BodyType_KINEMATIC&&(Fa.kinematicDelaySleep=!0),Fa.component.sleeping&&this.really_wake(Fa,!1))}if(G.b2.type==g.id_BodyType_DYNAMIC&&G.b2.component.sleeping){var Ga=G.b2;Ga.world||(Ga.component.waket=this.stamp+(this.midstep?0:1),Ga.type==g.id_BodyType_KINEMATIC&&(Ga.kinematicDelaySleep=!0),Ga.component.sleeping&&this.really_wake(Ga,
!1))}}G.sleeping&&(G.sleeping=!1,aa.inlined_add(G));f=G}else if(da){var Aa=G;Aa.userdef_dyn_fric=!1;Aa.userdef_stat_fric=!1;Aa.userdef_restitution=!1;Aa.userdef_rfric=!1;Aa.__ref_edge1=Aa.__ref_edge2=null;Aa.next=mc.zpp_pool;mc.zpp_pool=Aa;f=null}else f=G;else f=G}else{var ua;if(null==d){for(var Ra=null,Ka=(i.arbiters.length<j.arbiters.length?i:j).arbiters.head;null!=Ka;){var Oa=Ka.elt;if(Oa.id==l.id&&Oa.di==m.id){Ra=Oa;break}Ka=Ka.next}ua=Ra}else ua=d;var Ja=null==ua,Y,Va=!1;Ja?(null==kc.zpp_pool?
Y=new kc:(Y=kc.zpp_pool,kc.zpp_pool=Y.next,Y.next=null),null):null==ua.sensorarb?(ua.cleared=!0,ua.b1.arbiters.inlined_try_remove(ua),ua.b2.arbiters.inlined_try_remove(ua),null!=ua.pair&&(ua.pair.arb=null,ua.pair=null),ua.active=!1,this.f_arbiters.modified=!0,null==kc.zpp_pool?Y=new kc:(Y=kc.zpp_pool,kc.zpp_pool=Y.next,Y.next=null),null,Va=Ja=Y.intchange=!0):Y=ua.sensorarb;var Ya=g.id_InteractionType_SENSOR;if(Ja||Y.stamp!=this.stamp||e)if(Y.stamp=this.stamp,$.testCollide(l,m)){Ja?(Y.b1=a.body,Y.ws1=
a,Y.b2=b.body,Y.ws2=b,Y.id=l.id,Y.di=m.id,Y.b1.arbiters.inlined_add(Y),Y.b2.arbiters.inlined_add(Y),Y.active=!0,Y.present=0,Y.cleared=!1,Y.sleeping=!1,Y.fresh=!1,Y.presentable=!1,this.s_arbiters.inlined_add(Y),Y.fresh=!Va):Y.fresh=Y.up_stamp<this.stamp-1||Y.endGenerated==this.stamp&&e;Y.up_stamp=Y.stamp;if(Y.fresh||0==(Y.immState&g.id_ImmState_ALWAYS)){Y.immState=g.id_ImmState_ACCEPT;var Qa=!1;this.inlined_MRCA_chains(Y.ws1.id>Y.ws2.id?Y.ws2:Y.ws1,Y.ws1.id>Y.ws2.id?Y.ws1:Y.ws2);for(var La=this.mrca1.head;null!=
La;){for(var Ma=La.elt,Na=this.mrca2.head;null!=Na;){var Sa=Na.elt,Pa=Ma.cbSet,Za=Sa.cbSet;if(!Pa.manager.pair(Pa,Za).empty_intersection()){var oa=null,Ta=null;this.prelisteners.inlined_clear();Pa.manager.pair(Pa,Za).forall(g.id_CbEvent_PRE,function(a){return function(b){0!=(b.itype&Ya)&&(a[0]=h.prelisteners.inlined_insert(a[0],b),Qa=Qa||!b.pure)}}([null]));if(null!=this.prelisteners.head)if(oa=ib.get(Ma,Sa),null==oa&&(Ta=Hb.get(Ma,Sa),this.add_callbackset(Ta)),null==oa||(oa.SENSORstamp!=this.stamp||
e)&&0==(oa.SENSORstate&g.id_ImmState_ALWAYS)){null!=Ta&&(oa=Ta);if(null!=oa)for(var Ua=this.prelisteners.head;null!=Ua;)Ua.elt.itype==g.id_InteractionType_ANY?(oa.COLLISIONstamp=this.stamp,oa.SENSORstamp=this.stamp,oa.FLUIDstamp=this.stamp):oa.SENSORstamp=this.stamp,Ua=Ua.next;var eb=Y.active;Y.active=!0;this.precb.zpp_inner.pre_arbiter=Y;this.precb.zpp_inner.set=oa;for(var Xa=this.prelisteners.head;null!=Xa;){var $a=Xa.elt;this.precb.zpp_inner.listener=$a;ib.int_callback(oa,$a,this.precb.zpp_inner);
this.precb.zpp_inner.pre_swapped=Ma!=this.precb.zpp_inner.int1;var ab=$a.handlerp(this.precb);if(null!=ab){var jb=Y,fb,kb=ab;null==g.PreFlag_ACCEPT&&(g.internal=!0,g.PreFlag_ACCEPT=new cb,g.internal=!1);if(kb==g.PreFlag_ACCEPT)fb=g.id_ImmState_ACCEPT|g.id_ImmState_ALWAYS;else{var lb=ab,hb;null==g.PreFlag_ACCEPT_ONCE&&(g.internal=!0,g.PreFlag_ACCEPT_ONCE=new cb,g.internal=!1);if(lb==g.PreFlag_ACCEPT_ONCE)hb=g.id_ImmState_ACCEPT;else{var mb=ab;null==g.PreFlag_IGNORE&&(g.internal=!0,g.PreFlag_IGNORE=
new cb,g.internal=!1);hb=mb==g.PreFlag_IGNORE?g.id_ImmState_IGNORE|g.id_ImmState_ALWAYS:g.id_ImmState_IGNORE}fb=hb}jb.immState=fb}Xa=Xa.next}Y.active=eb;if(null!=oa)for(var gb=this.prelisteners.head;null!=gb;)gb.elt.itype==g.id_InteractionType_ANY?(oa.COLLISIONstate=Y.immState,oa.SENSORstate=Y.immState,oa.FLUIDstate=Y.immState):oa.SENSORstate=Y.immState,gb=gb.next}else null==oa?0==(Y.immState&g.id_ImmState_ALWAYS)&&(Y.immState=g.id_ImmState_ACCEPT):Y.immState=oa.SENSORstate}Na=Na.next}La=La.next}if(Qa&&
0==(Y.immState&g.id_ImmState_ALWAYS)){if(Y.b1.type!=g.id_BodyType_STATIC){var bb=Y.b1;bb.world||(bb.component.waket=this.stamp+(this.midstep?0:1),bb.type==g.id_BodyType_KINEMATIC&&(bb.kinematicDelaySleep=!0),bb.component.sleeping&&this.really_wake(bb,!1))}if(Y.b2.type!=g.id_BodyType_STATIC){var db=Y.b2;db.world||(db.component.waket=this.stamp+(this.midstep?0:1),db.type==g.id_BodyType_KINEMATIC&&(db.kinematicDelaySleep=!0),db.component.sleeping&&this.really_wake(db,!1))}}}Y.sleeping&&(Y.sleeping=!1,
this.s_arbiters.inlined_add(Y));f=Y}else if(Ja){var nb=Y;nb.next=kc.zpp_pool;kc.zpp_pool=nb;f=null}else f=Y;else f=Y}}return f},MRCA_chains:function(a,b){this.inlined_MRCA_chains(a,b)},inlined_MRCA_chains:function(a,b){this.mrca1.inlined_clear();this.mrca2.inlined_clear();null!=a.cbSet&&this.mrca1.inlined_add(a);null!=a.body.cbSet&&this.mrca1.inlined_add(a.body);null!=b.cbSet&&this.mrca2.inlined_add(b);null!=b.body.cbSet&&this.mrca2.inlined_add(b.body);for(var c=a.body.compound,d=b.body.compound;c!=
d;)(null==c?0:c.depth)<(null==d?0:d.depth)?(null!=d.cbSet&&this.mrca2.inlined_add(d),d=d.compound):(null!=c.cbSet&&this.mrca1.inlined_add(c),c=c.compound)},__class__:xm};var kf=function(){this.next=this.prev=this.shape=this.aabb=null};f["zpp_nape.space.ZPP_SweepData"]=kf;kf.__name__=["zpp_nape","space","ZPP_SweepData"];kf.prototype={__class__:kf};var sl=function(a){this.list=null;jf.call(this);this.space=a;this.is_sweep=!0;this.sweep=this};f["zpp_nape.space.ZPP_SweepPhase"]=sl;sl.__name__=["zpp_nape",
"space","ZPP_SweepPhase"];sl.__super__=jf;sl.prototype=l(jf.prototype,{__insert:function(a){var b;null==kf.zpp_pool?b=new kf:(b=kf.zpp_pool,kf.zpp_pool=b.next,b.next=null);null;a.sweep=b;b.shape=a;b.aabb=a.aabb;b.next=this.list;null!=this.list&&(this.list.prev=b);this.list=b},__remove:function(a){var b=a.sweep;null==b.prev?this.list=b.next:b.prev.next=b.next;null!=b.next&&(b.next.prev=b.prev);a.sweep=null;b.prev=null;b.shape=null;b.aabb=null;b.next=kf.zpp_pool;kf.zpp_pool=b},sync_broadphase:function(){this.space.validation();
null!=this.list&&this.sync_broadphase_fast()},sync_broadphase_fast:function(){for(var a=this.list.next;null!=a;){var b=a.next,c=a.prev;if(!(a.aabb.minx>c.aabb.minx)){for(;null!=c.prev&&c.prev.aabb.minx>a.aabb.minx;)c=c.prev;var d=a.prev;d.next=a.next;null!=a.next&&(a.next.prev=d);null==c.prev?(a.prev=null,this.list=a,a.next=c,c.prev=a):(a.prev=c.prev,c.prev=a,a.prev.next=a,a.next=c)}a=b}},broadphase:function(a,b){if(null!=this.list){this.sync_broadphase_fast();for(var c=this.list;null!=c;){for(var d=
c.next,e=c.shape,h=e.body,f=c.aabb.maxx;null!=d&&!(d.aabb.minx>f);){var i=d.shape,j=i.body;if(j!=h&&!(h.type==g.id_BodyType_STATIC&&j.type==g.id_BodyType_STATIC)&&(!h.component.sleeping||!j.component.sleeping))e.aabb.intersectY(i.aabb)&&(b?a.narrowPhase(e,i,h.type!=g.id_BodyType_DYNAMIC||j.type!=g.id_BodyType_DYNAMIC,null,!1):a.continuousEvent(e,i,h.type!=g.id_BodyType_DYNAMIC||j.type!=g.id_BodyType_DYNAMIC,null,!1));d=d.next}c=c.next}}},clear:function(){for(;null!=this.list;)this.list.shape.removedFromSpace(),
this.__remove(this.list.shape)},rayCast:function(a,b,c){this.sync_broadphase();a.validate_dir();var d=a.rayAABB(),e=a.maxdist,h=null;if(0==a.dirx)for(var f=this.list;null!=f&&f.aabb.minx<=d.minx;){if(f.aabb.intersect(d)&&(null==c||f.shape.filter.shouldCollide(c))){var i=a.aabbsect(f.aabb);0<=i&&i<e&&(i=f.shape.type==g.id_ShapeType_CIRCLE?a.circlesect(f.shape.circle,b,e):a.polysect(f.shape.polygon,b,e),null!=i&&(e=i.zpp_inner.toiDistance,null!=h&&h.zpp_inner.free(),h=i))}f=f.next}else if(0>a.dirx){f=
this.list;for(i=null;null!=f&&f.aabb.minx<=d.maxx;)i=f,f=f.next;for(f=i;null!=f;){if(f.aabb.intersect(d)&&(null==c||f.shape.filter.shouldCollide(c)))i=a.aabbsect(f.aabb),0<=i&&i<e&&(i=f.shape.type==g.id_ShapeType_CIRCLE?a.circlesect(f.shape.circle,b,e):a.polysect(f.shape.polygon,b,e),null!=i&&(e=i.zpp_inner.toiDistance,null!=h&&h.zpp_inner.free(),h=i));f=f.prev}}else for(f=this.list;null!=f&&f.aabb.minx<=d.maxx&&f.aabb.minx<a.originx+a.dirx*e;){if(f.aabb.intersect(d)&&(null==c||f.shape.filter.shouldCollide(c)))i=
a.aabbsect(f.aabb),0<=i&&i<e&&(i=f.shape.type==g.id_ShapeType_CIRCLE?a.circlesect(f.shape.circle,b,e):a.polysect(f.shape.polygon,b,e),null!=i&&(e=i.zpp_inner.toiDistance,null!=h&&h.zpp_inner.free(),h=i));f=f.next}null!=d.outer&&(d.outer.zpp_inner=null,d.outer=null);d.wrap_min=d.wrap_max=null;d._invalidate=null;d._validate=null;d.next=$a.zpp_pool;$a.zpp_pool=d;return h},__class__:sl});var Em=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_CallbackSet"]=
Em;Em.__name__=["zpp_nape","util","ZNPList_ZPP_CallbackSet"];Em.prototype={inlined_add:function(a){var b;null==lf.zpp_pool?b=new lf:(b=lf.zpp_pool,lf.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=
!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=lf.zpp_pool;lf.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Em};var Jf=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_Body"]=Jf;Jf.__name__=["zpp_nape","util","ZNPList_ZPP_Body"];Jf.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==zc.zpp_pool?b=new zc:(b=zc.zpp_pool,zc.zpp_pool=b.next,b.next=
null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==zc.zpp_pool?c=new zc:(c=zc.zpp_pool,zc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=zc.zpp_pool;
zc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=
!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=zc.zpp_pool;zc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Jf};var vg=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_Compound"]=vg;vg.__name__=["zpp_nape","util","ZNPList_ZPP_Compound"];
vg.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Kd.zpp_pool?b=new Kd:(b=Kd.zpp_pool,Kd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Kd.zpp_pool;Kd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},
inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Kd.zpp_pool;Kd.zpp_pool=a;this.modified=!0;this.length--;
this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:vg};var Ih=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_Arbiter"]=Ih;Ih.__name__=["zpp_nape","util","ZNPList_ZPP_Arbiter"];Ih.prototype={inlined_add:function(a){var b;null==Ld.zpp_pool?b=new Ld:(b=Ld.zpp_pool,Ld.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},
inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Ld.zpp_pool;Ld.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,
c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Ld.zpp_pool;Ld.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},inlined_has:function(a){var b;b=!1;for(var c=this.head;null!=c;){if(c.elt==a){b=!0;break}c=c.next}return b},__class__:Ih};var Bm=function(){this.length=0;this.modified=this.pushmod=!1;this.head=
null};f["zpp_nape.util.ZNPList_ZPP_CbSetPair"]=Bm;Bm.__name__=["zpp_nape","util","ZNPList_ZPP_CbSetPair"];Bm.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==qe.zpp_pool?b=new qe:(b=qe.zpp_pool,qe.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=qe.zpp_pool;qe.zpp_pool=a;null==this.head&&
(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=
c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=qe.zpp_pool;qe.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Bm};var Gm=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_AABBPair"]=Gm;Gm.__name__=["zpp_nape","util","ZNPList_ZPP_AABBPair"];Gm.prototype={inlined_add:function(a){var b;null==Yd.zpp_pool?b=new Yd:(b=Yd.zpp_pool,Yd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;
this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Yd.zpp_pool;Yd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);
d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Yd.zpp_pool;Yd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Gm};var Hm=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_Edge"]=Hm;Hm.__name__=["zpp_nape","util","ZNPList_ZPP_Edge"];Hm.prototype={add:function(a){return this.inlined_add(a)},
inlined_add:function(a){var b;null==Ac.zpp_pool?b=new Ac:(b=Ac.zpp_pool,Ac.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==Ac.zpp_pool?c=new Ac:(c=Ac.zpp_pool,Ac.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},
inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Ac.zpp_pool;Ac.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=
!0));a=b;a.elt=null;a.next=Ac.zpp_pool;Ac.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},reverse:function(){for(var a=this.head,b=null;null!=a;){var c=a.next;a.next=b;b=this.head=a;a=c}this.pushmod=this.modified=!0},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:Hm};var Jm=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_Component"]=Jm;Jm.__name__=["zpp_nape","util","ZNPList_ZPP_Component"];
Jm.prototype={inlined_add:function(a){var b;null==mf.zpp_pool?b=new mf:(b=mf.zpp_pool,mf.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=mf.zpp_pool;mf.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;
this.pop();return a},__class__:Jm};var Im=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_AABBNode"]=Im;Im.__name__=["zpp_nape","util","ZNPList_ZPP_AABBNode"];Im.prototype={inlined_insert:function(a,b){var c;null==nf.zpp_pool?c=new nf:(c=nf.zpp_pool,nf.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=
this.head;this.head=a.next;a.elt=null;a.next=nf.zpp_pool;nf.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},clear:function(){for(;null!=this.head;)this.inlined_pop();this.pushmod=!0},__class__:Im};var tn=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_InteractionGroup"]=tn;tn.__name__=["zpp_nape",
"util","ZNPList_ZPP_InteractionGroup"];tn.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:tn};var Mm=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_FluidArbiter"]=Mm;Mm.__name__=["zpp_nape","util","ZNPList_ZPP_FluidArbiter"];Mm.prototype={inlined_add:function(a){var b;null==Md.zpp_pool?b=new Md:(b=Md.zpp_pool,Md.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=
!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Md.zpp_pool;Md.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&
(this.pushmod=!0));a=b;a.elt=null;a.next=Md.zpp_pool;Md.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Mm};var Nm=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_SensorArbiter"]=Nm;Nm.__name__=["zpp_nape","util","ZNPList_ZPP_SensorArbiter"];Nm.prototype={inlined_add:function(a){var b;null==re.zpp_pool?b=new re:(b=re.zpp_pool,re.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;
this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=re.zpp_pool;re.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=
!0));a=b;a.elt=null;a.next=re.zpp_pool;re.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Nm};var tl=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_ColArbiter"]=tl;tl.__name__=["zpp_nape","util","ZNPList_ZPP_ColArbiter"];tl.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Nd.zpp_pool?b=new Nd:(b=Nd.zpp_pool,Nd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=
b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Nd.zpp_pool;Nd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==
a){this.inlined_erase(b);d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Nd.zpp_pool;Nd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:tl};var ul=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_Listener"]=ul;ul.__name__=["zpp_nape","util","ZNPList_ZPP_Listener"];
ul.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Bc.zpp_pool?b=new Bc:(b=Bc.zpp_pool,Bc.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},insert:function(a,b){return this.inlined_insert(a,b)},inlined_insert:function(a,b){var c;null==Bc.zpp_pool?c=new Bc:(c=Bc.zpp_pool,Bc.zpp_pool=c.next,c.next=null);null;c.elt=b;null==a?(c.next=this.head,this.head=c):(c.next=a.next,a.next=c);this.pushmod=this.modified=
!0;this.length++;return c},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Bc.zpp_pool;Bc.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},remove:function(a){this.inlined_try_remove(a)},inlined_try_remove:function(a){for(var b=null,c=this.head,d=!1;null!=c;){if(c.elt==a){this.inlined_erase(b);
d=!0;break}b=c;c=c.next}return d},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Bc.zpp_pool;Bc.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:ul};var Lm=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_ToiEvent"]=
Lm;Lm.__name__=["zpp_nape","util","ZNPList_ZPP_ToiEvent"];Lm.prototype={add:function(a){return this.inlined_add(a)},inlined_add:function(a){var b;null==Zd.zpp_pool?b=new Zd:(b=Zd.zpp_pool,Zd.zpp_pool=b.next,b.next=null);null;b.elt=a;b.next=this.head;this.head=b;this.modified=!0;this.length++;return a},pop:function(){this.inlined_pop()},inlined_pop:function(){var a=this.head;this.head=a.next;a.elt=null;a.next=Zd.zpp_pool;Zd.zpp_pool=a;null==this.head&&(this.pushmod=!0);this.modified=!0;this.length--},
pop_unsafe:function(){return this.inlined_pop_unsafe()},inlined_pop_unsafe:function(){var a=this.head.elt;this.pop();return a},erase:function(a){return this.inlined_erase(a)},inlined_erase:function(a){var b,c;null==a?(b=this.head,this.head=c=b.next,null==this.head&&(this.pushmod=!0)):(b=a.next,c=b.next,a.next=c,null==c&&(this.pushmod=!0));a=b;a.elt=null;a.next=Zd.zpp_pool;Zd.zpp_pool=a;this.modified=!0;this.length--;this.pushmod=!0;return c},__class__:Lm};var un=function(){this.length=0;this.modified=
this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ConvexResult"]=un;un.__name__=["zpp_nape","util","ZNPList_ConvexResult"];un.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:un};var vn=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_ZPP_GeomPoly"]=vn;vn.__name__=["zpp_nape","util","ZNPList_ZPP_GeomPoly"];vn.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},
__class__:vn};var wn=function(){this.length=0;this.modified=this.pushmod=!1;this.head=null};f["zpp_nape.util.ZNPList_RayResult"]=wn;wn.__name__=["zpp_nape","util","ZNPList_RayResult"];wn.prototype={iterator_at:function(a){for(var b=this.head;0<a--&&null!=b;)b=b.next;return b},__class__:wn};var wc=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_CbType"]=wc;wc.__name__=["zpp_nape","util","ZNPNode_ZPP_CbType"];wc.prototype={__class__:wc};var lf=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_CallbackSet"]=
lf;lf.__name__=["zpp_nape","util","ZNPNode_ZPP_CallbackSet"];lf.prototype={__class__:lf};var Wc=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_Shape"]=Wc;Wc.__name__=["zpp_nape","util","ZNPNode_ZPP_Shape"];Wc.prototype={__class__:Wc};var zc=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_Body"]=zc;zc.__name__=["zpp_nape","util","ZNPNode_ZPP_Body"];zc.prototype={__class__:zc};var me=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_Constraint"]=me;
me.__name__=["zpp_nape","util","ZNPNode_ZPP_Constraint"];me.prototype={__class__:me};var Kd=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_Compound"]=Kd;Kd.__name__=["zpp_nape","util","ZNPNode_ZPP_Compound"];Kd.prototype={__class__:Kd};var vc=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_InteractionListener"]=vc;vc.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionListener"];vc.prototype={__class__:vc};var Ld=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_Arbiter"]=
Ld;Ld.__name__=["zpp_nape","util","ZNPNode_ZPP_Arbiter"];Ld.prototype={__class__:Ld};var oe=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_CbSet"]=oe;oe.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSet"];oe.prototype={__class__:oe};var ne=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_Interactor"]=ne;ne.__name__=["zpp_nape","util","ZNPNode_ZPP_Interactor"];ne.prototype={__class__:ne};var vd=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_BodyListener"]=
vd;vd.__name__=["zpp_nape","util","ZNPNode_ZPP_BodyListener"];vd.prototype={__class__:vd};var le=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_ConstraintListener"]=le;le.__name__=["zpp_nape","util","ZNPNode_ZPP_ConstraintListener"];le.prototype={__class__:le};var qe=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_CbSetPair"]=qe;qe.__name__=["zpp_nape","util","ZNPNode_ZPP_CbSetPair"];qe.prototype={__class__:qe};var Yd=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_AABBPair"]=
Yd;Yd.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBPair"];Yd.prototype={__class__:Yd};var Ac=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_Edge"]=Ac;Ac.__name__=["zpp_nape","util","ZNPNode_ZPP_Edge"];Ac.prototype={__class__:Ac};var xc=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_Vec2"]=xc;xc.__name__=["zpp_nape","util","ZNPNode_ZPP_Vec2"];xc.prototype={__class__:xc};var mf=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_Component"]=mf;mf.__name__=
["zpp_nape","util","ZNPNode_ZPP_Component"];mf.prototype={__class__:mf};var nf=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_AABBNode"]=nf;nf.__name__=["zpp_nape","util","ZNPNode_ZPP_AABBNode"];nf.prototype={__class__:nf};var xn=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_InteractionGroup"]=xn;xn.__name__=["zpp_nape","util","ZNPNode_ZPP_InteractionGroup"];xn.prototype={__class__:xn};var Md=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_FluidArbiter"]=
Md;Md.__name__=["zpp_nape","util","ZNPNode_ZPP_FluidArbiter"];Md.prototype={__class__:Md};var re=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_SensorArbiter"]=re;re.__name__=["zpp_nape","util","ZNPNode_ZPP_SensorArbiter"];re.prototype={__class__:re};var Nd=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_ColArbiter"]=Nd;Nd.__name__=["zpp_nape","util","ZNPNode_ZPP_ColArbiter"];Nd.prototype={__class__:Nd};var Bc=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_Listener"]=
Bc;Bc.__name__=["zpp_nape","util","ZNPNode_ZPP_Listener"];Bc.prototype={__class__:Bc};var Zd=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_ToiEvent"]=Zd;Zd.__name__=["zpp_nape","util","ZNPNode_ZPP_ToiEvent"];Zd.prototype={__class__:Zd};var yn=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ConvexResult"]=yn;yn.__name__=["zpp_nape","util","ZNPNode_ConvexResult"];yn.prototype={__class__:yn};var zn=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_ZPP_GeomPoly"]=
zn;zn.__name__=["zpp_nape","util","ZNPNode_ZPP_GeomPoly"];zn.prototype={__class__:zn};var An=function(){this.next=this.elt=null};f["zpp_nape.util.ZNPNode_RayResult"]=An;An.__name__=["zpp_nape","util","ZNPNode_RayResult"];An.prototype={__class__:An};var ug=function(){this.at_index=0;this.at_ite=null;this.zip_length=!1;this._length=0;this.inner=null;Af.call(this);this.at_ite=null;this.at_index=0;this.zip_length=!0;this._length=0};f["zpp_nape.util.ZPP_MixVec2List"]=ug;ug.__name__=["zpp_nape","util",
"ZPP_MixVec2List"];ug.get=function(a,b){null==b&&(b=!1);var c=new ug;c.inner=a;c.zpp_inner.immutable=b;return c};ug.__super__=Af;ug.prototype=l(Af.prototype,{zpp_gl:function(){this.zpp_vm();if(this.zip_length){this._length=0;for(var a=this.inner.next;null!=a;)this._length++,a=a.next;this.zip_length=!1}return this._length},zpp_vm:function(){this.zpp_inner.validate();this.inner.modified&&(this.zip_length=!0,this._length=0,this.at_ite=null)},at:function(a){this.zpp_vm();this.zpp_inner.reverse_flag&&
(a=this.zpp_gl()-1-a);if(a<this.at_index||null==this.at_ite){this.at_index=0;for(this.at_ite=this.inner.next;;)break}for(;this.at_index!=a;){this.at_index++;for(this.at_ite=this.at_ite.next;;)break}return this.at_ite.wrapper()},push:function(a){this.zpp_inner.modify_test();this.zpp_vm();var b;if(b=null!=this.zpp_inner.adder?this.zpp_inner.adder(a):!0)this.zpp_inner.reverse_flag?this.inner.add(a.zpp_inner):this.inner.insert(this.inner.iterator_at(this.zpp_gl()-1),a.zpp_inner),this.zpp_inner.invalidate(),
null!=this.zpp_inner.post_adder&&this.zpp_inner.post_adder(a);return b},__class__:ug});var Ae=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new gf;this._invalidated=!0};f["zpp_nape.util.ZPP_ConstraintList"]=Ae;Ae.__name__=["zpp_nape","util","ZPP_ConstraintList"];Ae.get=function(a,
b){null==b&&(b=!1);var c=new jm;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Ae.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&
this._invalidate(this)},__class__:Ae};var Ce=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Jf;this._invalidated=!0};f["zpp_nape.util.ZPP_BodyList"]=Ce;Ce.__name__=["zpp_nape","util","ZPP_BodyList"];Ce.get=function(a,b){null==b&&(b=!1);var c=new sm;c.zpp_inner.inner=
a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};Ce.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Ce};var oh=
function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};f["zpp_nape.util.ZPP_InteractorList"]=oh;oh.__name__=["zpp_nape","util","ZPP_InteractorList"];oh.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&
(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:oh};var af=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new vg;this._invalidated=!0};f["zpp_nape.util.ZPP_CompoundList"]=af;af.__name__=["zpp_nape","util","ZPP_CompoundList"];af.get=function(a,b){null==b&&(b=
!1);var c=new um;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};af.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},
__class__:af};var Ye=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new ul;this._invalidated=!0};f["zpp_nape.util.ZPP_ListenerList"]=Ye;Ye.__name__=["zpp_nape","util","ZPP_ListenerList"];Ye.get=function(a,b){null==b&&(b=!1);var c=new im;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=
!0);c.zpp_inner.zip_length=!0;return c};Ye.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:Ye};var be=function(){this.user_length=
0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Id;this._invalidated=!0};f["zpp_nape.util.ZPP_CbTypeList"]=be;be.__name__=["zpp_nape","util","ZPP_CbTypeList"];be.get=function(a,b){null==b&&(b=!1);var c=new Sj;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};
be.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:be};var gg=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=
null;this.at_index=0;this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Hh;this._invalidated=!0};f["zpp_nape.util.ZPP_Vec2List"]=gg;gg.__name__=["zpp_nape","util","ZPP_Vec2List"];gg.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},
validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:gg};var ih=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};f["zpp_nape.util.ZPP_GeomPolyList"]=ih;ih.__name__=["zpp_nape","util","ZPP_GeomPolyList"];ih.prototype={valmod:function(){this.validate();
this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:ih};var jh=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};f["zpp_nape.util.ZPP_RayResultList"]=jh;jh.__name__=["zpp_nape",
"util","ZPP_RayResultList"];jh.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:jh};var hh=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;
this.inner=null};f["zpp_nape.util.ZPP_ConvexResultList"]=hh;hh.__name__=["zpp_nape","util","ZPP_ConvexResultList"];hh.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:hh};var ph=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=
null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};f["zpp_nape.util.ZPP_EdgeList"]=ph;ph.__name__=["zpp_nape","util","ZPP_EdgeList"];ph.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:ph};var cf=function(){this.user_length=
0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.dontremove=this.reverse_flag=!1;this._invalidate=this._validate=this.adder=this.post_adder=this.subber=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new xf;this._invalidated=!0};f["zpp_nape.util.ZPP_ShapeList"]=cf;cf.__name__=["zpp_nape","util","ZPP_ShapeList"];cf.get=function(a,b){null==b&&(b=!1);var c=new wm;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};
cf.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},modify_test:function(){},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},invalidate:function(){this._invalidated=!0;null!=this._invalidate&&this._invalidate(this)},__class__:cf};var gh=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=
null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};f["zpp_nape.util.ZPP_InteractionGroupList"]=gh;gh.__name__=["zpp_nape","util","ZPP_InteractionGroupList"];gh.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},
__class__:gh};var $e=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this.immutable=this._invalidated=!1;this.outer=this.inner=null;this.inner=new Ih;this._invalidated=!0};f["zpp_nape.util.ZPP_ArbiterList"]=$e;$e.__name__=["zpp_nape","util","ZPP_ArbiterList"];$e.get=function(a,b){null==b&&(b=!1);var c=new km;c.zpp_inner.inner=a;b&&(c.zpp_inner.immutable=!0);c.zpp_inner.zip_length=!0;return c};$e.prototype={valmod:function(){this.validate();
this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:$e};var fh=function(){this.user_length=0;this.zip_length=!1;this.at_ite=this.push_ite=null;this.at_index=0;this.reverse_flag=!1;this._validate=null;this._invalidated=!1;this.inner=null};f["zpp_nape.util.ZPP_ContactList"]=fh;fh.__name__=["zpp_nape",
"util","ZPP_ContactList"];fh.prototype={valmod:function(){this.validate();this.inner.modified&&(this.inner.pushmod&&(this.push_ite=null),this.at_ite=null,this.inner.modified=!1,this.inner.pushmod=!1,this.zip_length=!0)},validate:function(){this._invalidated&&(this._invalidated=!1,null!=this._validate&&this._validate())},__class__:fh};var Gh=function(){};f["zpp_nape.util.ZPP_Math"]=Gh;Gh.__name__=["zpp_nape","util","ZPP_Math"];Gh.sqr=function(a){return a*a};var kh=function(){};f["zpp_nape.util.ZPP_PubPool"]=
kh;kh.__name__=["zpp_nape","util","ZPP_PubPool"];var Ka=function(){this.colour=0;this.lt=this.swapped=this.data=this.prev=this.next=this.parent=null};f["zpp_nape.util.ZPP_Set_ZPP_CbSetPair"]=Ka;Ka.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSetPair"];Ka.prototype={clear_with:function(a){if(null!=this.parent){for(var b=this.parent;null!=b;)b=null!=b.prev?b.prev:null!=b.next?b.next:this.clear_node(b,a);this.parent=null}},clear_node:function(a,b){b(a.data);var c=a.parent;null!=c&&(a==c.prev?c.prev=null:
c.next=null,a.parent=null);a.data=null;a.lt=null;a.swapped=null;a.next=Ka.zpp_pool;Ka.zpp_pool=a;return c},__fix_dbl_red:function(a){for(;;){var b=a.parent,c=b.parent;if(null==c){b.colour=1;break}var d,e,f,g,i,j,k;b==c.prev?(f=c,k=c.next,a==b.prev?(d=a,e=b,g=a.prev,i=a.next,j=b.next):(d=b,e=a,g=b.prev,i=a.prev,j=a.next)):(d=c,g=c.prev,a==b.prev?(e=a,f=b,i=a.prev,j=a.next,k=b.next):(e=b,f=a,i=b.prev,j=a.prev,k=a.next));a=c.parent;null==a?this.parent=e:a.prev==c?a.prev=e:a.next=e;null!=e&&(e.parent=
a);d.prev=g;null!=g&&(g.parent=d);d.next=i;null!=i&&(i.parent=d);e.prev=d;null!=d&&(d.parent=e);e.next=f;null!=f&&(f.parent=e);f.prev=j;null!=j&&(j.parent=f);f.next=k;null!=k&&(k.parent=f);e.colour=c.colour-1;d.colour=1;f.colour=1;if(e==this.parent)this.parent.colour=1;else if(0==e.colour&&0==e.parent.colour){a=e;continue}break}},try_insert:function(a){var b=null,c=null;if(null==this.parent)null==Ka.zpp_pool?b=new Ka:(b=Ka.zpp_pool,Ka.zpp_pool=b.next,b.next=null),null,b.data=a,this.parent=b;else for(c=
this.parent;;)if(this.lt(a,c.data))if(null==c.prev){null==Ka.zpp_pool?b=new Ka:(b=Ka.zpp_pool,Ka.zpp_pool=b.next,b.next=null);null;b.data=a;c.prev=b;b.parent=c;break}else c=c.prev;else if(this.lt(c.data,a))if(null==c.next){null==Ka.zpp_pool?b=new Ka:(b=Ka.zpp_pool,Ka.zpp_pool=b.next,b.next=null);null;b.data=a;c.next=b;b.parent=c;break}else c=c.next;else break;if(null==b)return c;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:Ka};var gd=function(){this.colour=
0;this.lt=this.swapped=this.data=this.prev=this.next=this.parent=null};f["zpp_nape.util.ZPP_Set_ZPP_CbSet"]=gd;gd.__name__=["zpp_nape","util","ZPP_Set_ZPP_CbSet"];gd.prototype={empty:function(){return null==this.parent},find:function(a){for(var b=this.parent;null!=b&&b.data!=a;)b=this.lt(a,b.data)?b.prev:b.next;return b},find_weak:function(a){for(var b=this.parent;null!=b;)if(this.lt(a,b.data))b=b.prev;else if(this.lt(b.data,a))b=b.next;else break;return b},remove:function(a){this.remove_node(this.find(a))},
remove_node:function(a){if(null!=a.next&&null!=a.prev){for(var b=a.next;null!=b.prev;)b=b.prev;var c=a.data;a.data=b.data;b.data=c;null!=this.swapped&&this.swapped(a.data,b.data);a=b}b=null==a.prev?a.next:a.prev;if(1==a.colour)if(null!=a.prev||null!=a.next)b.colour=1;else if(null!=a.parent)for(c=a.parent;;){c.colour++;c.prev.colour--;c.next.colour--;var d=c.prev;if(-1==d.colour){this.__fix_neg_red(d);break}else if(0==d.colour){if(null!=d.prev&&0==d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=
d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);break}}d=c.next;if(-1==d.colour){this.__fix_neg_red(d);break}else if(0==d.colour){if(null!=d.prev&&0==d.prev.colour){this.__fix_dbl_red(d.prev);break}if(null!=d.next&&0==d.next.colour){this.__fix_dbl_red(d.next);break}}if(2==c.colour)if(null==c.parent)c.colour=1;else{c=c.parent;continue}break}c=a.parent;null==c?this.parent=b:c.prev==a?c.prev=b:c.next=b;null!=b&&(b.parent=c);a.parent=a.prev=a.next=null;a.data=null;a.lt=null;a.swapped=null;a.next=
gd.zpp_pool;gd.zpp_pool=a},__fix_neg_red:function(a){var b=a.parent;if(b.prev==a){var c=a.prev,d=a.next,e=d.prev,f=d.next;c.colour=0;a.colour=b.colour=1;a.next=e;null!=e&&(e.parent=a);a=b.data;b.data=d.data;d.data=a;null!=this.swapped&&this.swapped(b.data,d.data);d.prev=f;null!=f&&(f.parent=d);d.next=b.next;null!=b.next&&(b.next.parent=d);b.next=d}else c=a.next,d=a.prev,e=d.next,f=d.prev,c.colour=0,a.colour=b.colour=1,a.prev=e,null!=e&&(e.parent=a),a=b.data,b.data=d.data,d.data=a,null!=this.swapped&&
this.swapped(b.data,d.data),d.next=f,null!=f&&(f.parent=d),d.prev=b.prev,null!=b.prev&&(b.prev.parent=d),b.prev=d;null!=d&&(d.parent=b);b=c;null!=b.prev&&0==b.prev.colour?this.__fix_dbl_red(b.prev):null!=b.next&&0==b.next.colour&&this.__fix_dbl_red(b.next)},__fix_dbl_red:function(a){for(;;){var b=a.parent,c=b.parent;if(null==c){b.colour=1;break}var d,e,f,g,i,j,k;b==c.prev?(f=c,k=c.next,a==b.prev?(d=a,e=b,g=a.prev,i=a.next,j=b.next):(d=b,e=a,g=b.prev,i=a.prev,j=a.next)):(d=c,g=c.prev,a==b.prev?(e=
a,f=b,i=a.prev,j=a.next,k=b.next):(e=b,f=a,i=b.prev,j=a.prev,k=a.next));a=c.parent;null==a?this.parent=e:a.prev==c?a.prev=e:a.next=e;null!=e&&(e.parent=a);d.prev=g;null!=g&&(g.parent=d);d.next=i;null!=i&&(i.parent=d);e.prev=d;null!=d&&(d.parent=e);e.next=f;null!=f&&(f.parent=e);f.prev=j;null!=j&&(j.parent=f);f.next=k;null!=k&&(k.parent=f);e.colour=c.colour-1;d.colour=1;f.colour=1;if(e==this.parent)this.parent.colour=1;else if(0==e.colour&&0==e.parent.colour){a=e;continue}break}},insert:function(a){var b;
null==gd.zpp_pool?b=new gd:(b=gd.zpp_pool,gd.zpp_pool=b.next,b.next=null);null;b.data=a;if(null==this.parent)this.parent=b;else for(a=this.parent;;)if(this.lt(b.data,a.data))if(null==a.prev){a.prev=b;b.parent=a;break}else a=a.prev;else if(null==a.next){a.next=b;b.parent=a;break}else a=a.next;null==b.parent?b.colour=1:(b.colour=0,0==b.parent.colour&&this.__fix_dbl_red(b));return b},__class__:gd};var Fc,Hn=0;Math.NaN=Number.NaN;Math.NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY;Math.POSITIVE_INFINITY=
Number.POSITIVE_INFINITY;f.Math=Math;Math.isFinite=function(a){return isFinite(a)};Math.isNaN=function(a){return isNaN(a)};String.prototype.__class__=f.String=String;String.__name__=["String"];f.Array=Array;Array.__name__=["Array"];Date.prototype.__class__=f.Date=Date;Date.__name__=["Date"];var In=f.Int={__name__:["Int"]},Jn=f.Dynamic={__name__:["Dynamic"]},Dn=f.Float=Number;Dn.__name__=["Float"];var En=f.Bool=Boolean;En.__ename__=["Bool"];var Kn=f.Class={__name__:["Class"]},Ln={};R.Element="element";
R.PCData="pcdata";R.CData="cdata";R.Comment="comment";R.DocType="doctype";R.ProcessingInstruction="processingInstruction";R.Document="document";Od.instance=new Od;zb.DISPATCHING_SENTINEL=new Nf(null,null);x.root=new r;x.uncaughtError=new O;x.hidden=new yb(!1);x.volume=new J(1);x._platform=Od.instance;x._calledInit=!1;va.__meta__={obj:{assets:[{ui_title:[{bytes:8697,md5:"536b0e0bff320d3bdeb60e8d98bed89c",name:"2.png"},{bytes:33668,md5:"6dfd297fb37cfa08a7a777845da1434b",name:"basketball.png"},{bytes:333018,
md5:"70b877bbe09f00430d4188c9480e3ec9",name:"bg.jpg"},{bytes:110107,md5:"c602a1e53cb79b92db7c1a8f10cf7560",name:"logo.png"},{bytes:54695,md5:"60e8def955526bd3e42ef5e6e5fdaafb",name:"lynn.png"},{bytes:3998,md5:"6e12eacce0f4b34216fb532cfb058bfa",name:"nick.png"},{bytes:15830,md5:"4946558a8d660b783cd2ace4085c6790",name:"stars.png"},{bytes:12424,md5:"5d6730399a5912758b451c2dadc4bb38",name:"swoosh.png"},{bytes:941,md5:"1f782ead5b33e7f2dda1234115aa383f",name:"title_ball/title_ball.json"},{bytes:77809,md5:"44a5ef97274d37ae68467c820560cfc9",
name:"title_ball/title_ball.png"}],sprites_env1_common:[{bytes:7075,md5:"951f11e6a71c7b946649b5dfa4c6db42",name:"bench.png"},{bytes:6328,md5:"0354a16778ef0dfb59d01b9424d150d2",name:"court_center.png"},{bytes:9720,md5:"21d0562a7911b350fae7a1ff5d32873e",name:"court_right.png"},{bytes:1776,md5:"af3c5091af8bece1306b94af2b497fed",name:"court_tile.png"},{bytes:14933,md5:"7a6d1571d81d433e0e13a4004f4a1d04",name:"decor_01.png"},{bytes:28817,md5:"c8fcab653ad22df6d24bb65e416cc223",name:"decor_03.png"},{bytes:134204,
md5:"40abfeebdf3c259391111e3d3167a423",name:"fence.png"}],ui_posters:[{bytes:6394,md5:"f8e81ad5301c6dfbfa320ab4d80a45c9",name:"arrow.png"},{bytes:158757,md5:"51f018815529260fe023c572770a1b78",name:"bg.jpg"},{bytes:12284,md5:"71db107559ad29ab22e0c8f5f301cb17",name:"btn_magnifier.png"},{bytes:2145,md5:"68c9a3bd70315e8afa9aeaaf50cb703f",name:"check.png"},{bytes:12706,md5:"0e3fe61b6b7ba17dc552350078f3954e",name:"frame.png"},{bytes:12663,md5:"4cfcec4b383e27f6242eb60d34b172f1",name:"locked.jpg"},{bytes:37295,
md5:"e04862e9f6bc891ec752c4b004e9bb82",name:"mask_l.png"},{bytes:38924,md5:"4a986b5db9ece99e7b2d28039fc3b979",name:"mask_r.png"},{bytes:13759,md5:"403edde5cddf52f66e78f31205b7c51b",name:"team_container.png"}],sprites_env1_common_low:[{bytes:2867,md5:"21db88873320500518e15e8b9d32bd06",name:"bench.png"},{bytes:3502,md5:"ec3d3680dbdaea6a1217c1079af8bb1a",name:"court_center.png"},{bytes:4153,md5:"5766f56cabde98de1915faf3aa0f9a1a",name:"court_right.png"},{bytes:1601,md5:"9f4cfbe832fd8726bb14e7f8cbe4b659",
name:"court_tile.png"},{bytes:4454,md5:"004ebb2661df12c63ce187db9ec3651f",name:"decor_01.png"},{bytes:6740,md5:"83e8f33aa1ef44992460a93bbc1addc9",name:"decor_03.png"},{bytes:25928,md5:"5ea028c3ee94d1af3dcd52496548062d",name:"fence.png"}],ui_stats:[{bytes:213774,md5:"edfb5c9ae4dcfe7996efa35d6869b7be",name:"bg.jpg"},{bytes:5293,md5:"747760d048d12d7eb7aa54059e42df90",name:"icon.png"},{bytes:16998,md5:"0bed52e78bb0ec5d61221889ae193da4",name:"logo_name_bg.png"},{bytes:72286,md5:"b9c83f4f3efb6c6006dc37a1d5613709",
name:"mask_bottom.png"},{bytes:103667,md5:"ade7ec35f0f89300b3606e53b98ee02b",name:"mask_top.png"},{bytes:9995,md5:"50ba4a92da85e878581fc45d773eafc1",name:"selected.png"}],ui_win_multi:[{bytes:69649,md5:"f3186bd7475476b4f1449e8c30377a32",name:"banner.png"},{bytes:73452,md5:"9034ae7b7780193dabd0916120368490",name:"banner_winner.png"},{bytes:271985,md5:"85ef8ab6c3b36c9c74b3000f36ec8197",name:"bg.jpg"},{bytes:40518,md5:"e4c57fe704f3ecef97e71efa68895039",name:"podium.png"},{bytes:76709,md5:"a8e64e6c595fc919cf6078be00bd45ad",
name:"star.png"}],ui_loading:[{bytes:168008,md5:"7a8d4b05dd859ec585eb3724ef4bb136",name:"bg.jpg"},{bytes:2957,md5:"0bf53f421a783a2a72820cb6e4182e51",name:"ellipse1.png"},{bytes:4043,md5:"664b25905ba6bbd7e521a80af878e2be",name:"ellipse2.png"},{bytes:1546,md5:"1a77e7b9db2fd72404250abef77708c7",name:"loading/loading.json"},{bytes:44883,md5:"3f87f08935e11935cddc93ea832cf67f",name:"loading/loading.png"},{bytes:3042,md5:"2f1f1f2753f6941e4499aca0f90b43d6",name:"loading.fnt"},{bytes:1417,md5:"30a71232c101e78e9f73b2dd5381d080",
name:"loading.png"}],levels:[{bytes:4651,md5:"e00d9ae8c023cb01d4cbcab0a1e01861",name:"level1.json"},{bytes:5469,md5:"adfbcd81f2e2ec7a6584078df955eae0",name:"level2.json"},{bytes:5119,md5:"9d607e4bc6da26a9f94f011fe8359370",name:"level3.json"},{bytes:5416,md5:"987a8924a63ee41f59c01eb1fcefc162",name:"level4.json"},{bytes:4740,md5:"b1a634b3a311fbc91277a7841f490544",name:"level5.json"},{bytes:5122,md5:"ed5b282d173bdd64fcca9ef48c74951d",name:"level6.json"},{bytes:4500,md5:"3704818f776beab4238fd4fd6dfcb081",
name:"level_dunk1.json"},{bytes:5134,md5:"68033d48329f2326e7eb00c6ac63f424",name:"level_dunk2.json"},{bytes:5043,md5:"7b49511c8036791239504867feb23d56",name:"level_dunk3.json"},{bytes:3765,md5:"083ac4e670ad540c77c48040d1e5b3c1",name:"level_horse1.json"},{bytes:4589,md5:"960dda91e17acb0f0853155b63321606",name:"level_horse2.json"},{bytes:4713,md5:"25580057a9bd87cf9f9d3c39dd571e9b",name:"level_horse3.json"},{bytes:3101,md5:"4bb3d08e78acc989120b630fce3885e4",name:"level_shootout1.json"},{bytes:3236,md5:"116eba902a1dc1d8d6b21d88239a4622",
name:"level_shootout2.json"},{bytes:3332,md5:"af515fd822417f1e223a56c48e178a85",name:"level_shootout3.json"}],ui_level:[{bytes:264945,md5:"2ba18095b16ea14c28ed78ad9084beea",name:"bg.jpg"},{bytes:35008,md5:"06212bc6d8d7ff7602278b3e54faf7ad",name:"level_1.png"},{bytes:32282,md5:"5967b17739616c6391deff591e471b2b",name:"level_2.png"},{bytes:32916,md5:"75653fcdb17f7ea981ad778e25399596",name:"level_3.png"},{bytes:32501,md5:"078ca54670a2adde6e4a0a00602200db",name:"level_4.png"},{bytes:33302,md5:"4308b6a7d6670bc1a6ca197fd4b014a3",
name:"level_5.png"},{bytes:34982,md5:"0d1970d256bd27d38e26832e58df16fd",name:"level_6.png"},{bytes:34079,md5:"cc2476a84f172bc51e3ad04516230500",name:"level_locked.png"},{bytes:8724,md5:"fbb7b58dd356422989090c4832446752",name:"selected.png"}],posters:[{bytes:915082,md5:"6b765ee502bbae61ecae3e3743257374",name:"team_hb.jpg"},{bytes:916040,md5:"a927d6006b146e56a4b15ef74671e12d",name:"team_hd.jpg"},{bytes:903320,md5:"dde685044a8951ed4ca4c1f93de4a5a3",name:"team_loud.jpg"},{bytes:963183,md5:"845f58137f0fa1d7bcfa9d6e0ced4784",
name:"team_pr.jpg"},{bytes:956965,md5:"05210caad1db1b69d1a83a39318660b1",name:"team_sb.jpg"},{bytes:1075476,md5:"b2ac0992e72e4e00413337177ff05a59",name:"team_tmnt_1.jpg"},{bytes:1014874,md5:"3c99067d7f69fa7b5204a438a16340fe",name:"team_tmnt_2.jpg"}],actors:[{bytes:665,md5:"dc24df3b409ebfd755371e026df75899",name:"characters/captain_danger.json"},{bytes:582,md5:"d7dbd21ac1f27786bfd877132ed8d8e1",name:"characters/donnie.json"},{bytes:389,md5:"e2fc845524292e8bcc69447035522943",name:"characters/fee.json"},
{bytes:422,md5:"76f2acdd684f80ee8a590c9a4a2853cb",name:"characters/foo.json"},{bytes:530,md5:"d69a3cbba1e93487781fc44d789da896",name:"characters/henry.json"},{bytes:624,md5:"c6c5eed60fad7b58ed53debb8b0d8363",name:"characters/leo.json"},{bytes:607,md5:"976832c35e230db39ec0e0398576fa0e",name:"characters/lincoln.json"},{bytes:478,md5:"af5d199de7ed2d5b427216e649b26a4a",name:"characters/lynn.json"},{bytes:538,md5:"0c928ce2a9cd40afdbcd80c52d385370",name:"characters/mike.json"},{bytes:605,md5:"5c0413b4218e35d949a86bd92cac917d",
name:"characters/patrick.json"},{bytes:779,md5:"39966637901201d8e333e849f127fbaa",name:"characters/pink_ranger.json"},{bytes:475,md5:"70bdb96fd0b32c0ff28af0d1292b9fac",name:"characters/raph.json"},{bytes:736,md5:"7fecf584bf7f4d7a2b02647981235c44",name:"characters/red_ranger.json"},{bytes:598,md5:"77d17742d8578fbe6ed0b027c6e71991",name:"characters/spongebob.json"},{bytes:2445,md5:"3318ce15abaff292d5a8b008bed91fc5",name:"characters.json"},{bytes:5322,md5:"f9b5236fd448b12ade86ae887178f5e0",name:"decors.json"},
{bytes:1474,md5:"51771af43581d99f728c91dd948e67cd",name:"decors_physic.json"},{bytes:1449,md5:"5d5b22467b62bacd60fff0e7a9779c68",name:"horse.json"},{bytes:2026,md5:"d54382327a0a17bc2146c222d250c35b",name:"interactives.json"},{bytes:1466,md5:"b4c691558a7714ef360ea808f5422e02",name:"pickup.json"}],sprites_platforms:[{bytes:25321,md5:"ea291ed61459e51c203ce6e691ef3dc6",name:"ball_blocker_small.png"},{bytes:1109,md5:"562bf3a930cf29e2801fbec91ff3affe",name:"horse_token/horse_token0.json"},{bytes:24455,
md5:"01227b552e79742fc30c630b6e54f9a2",name:"horse_token/horse_token0.png"},{bytes:25767,md5:"7a0946003a6f4dcaad28731f97544583",name:"platform_large.png"},{bytes:41648,md5:"68beeb9760bc036fdf79623a703dcfed",name:"platform_small.png"},{bytes:19908,md5:"662dde9d9123aedf163f3c0be8f5631c",name:"platform_small_wood.png"},{bytes:21204,md5:"1bdbcdbf7fd8ff283191866f78b59934",name:"platform_tiny.png"},{bytes:12473,md5:"8b73818f8e567b8222f72b16bc981f80",name:"token_basket.png"}],ui_character:[{bytes:427,md5:"26c156f6d52d47f6a562a582f48d4d16",
name:"arrow.png"},{bytes:63566,md5:"eac0c6b881812bb1600257cb9432781a",name:"ball.png"},{bytes:248832,md5:"a5253cc4a5d51c51dc646ad1d4459a50",name:"bg.jpg"},{bytes:4415,md5:"4e9568bb43aa8f46fad4cd850cd8c593",name:"black_bottom.png"},{bytes:9995,md5:"50ba4a92da85e878581fc45d773eafc1",name:"selected.png"}],fonts:[{bytes:35079,md5:"63b4f25c901d5973b8b30aa2b1f1bcd1",name:"movavi_15_black.fnt"},{bytes:9493,md5:"a7a6501f5132bb626be4ac1698825ec2",name:"movavi_15_black.png"},{bytes:35172,md5:"dbfe05d14b0ef782a579a8d3dc0dbf0b",
name:"movavi_17_blue.fnt"},{bytes:11631,md5:"1e7f99dda2ca17c14b24a04e00df7696",name:"movavi_17_blue.png"},{bytes:35176,md5:"6d1308214a44a7575cccab23ea163964",name:"movavi_17_orange.fnt"},{bytes:11367,md5:"53d2a622a7219d86b1ae91e761147dcc",name:"movavi_17_orange.png"},{bytes:35174,md5:"a31b1eb6839243624a532c8b82d5ad08",name:"movavi_17_white.fnt"},{bytes:11077,md5:"9bb008e9d16ff05b7f5e1412ece161e1",name:"movavi_17_white.png"},{bytes:35250,md5:"7906996df50c9751f0331f43c7af8d3c",name:"movavi_21_white.fnt"},
{bytes:13979,md5:"83c8e1a12a32caf6e6cb230f35f9bceb",name:"movavi_21_white.png"},{bytes:35064,md5:"2de4df2eb409c47d4f064c5532777515",name:"movavi_25_black.fnt"},{bytes:16099,md5:"b87922f9fa22f9b7d880ab4de7fc6617",name:"movavi_25_black.png"},{bytes:35137,md5:"c0e0af40d8104b64b227ad40d12cd724",name:"movavi_25_white_outline.fnt"},{bytes:29775,md5:"a2d1f44d2325bfdeb6a97d076c10dcc4",name:"movavi_25_white_outline.png"},{bytes:35250,md5:"01db70d8238c9f2489e60c617fbd49ae",name:"movavi_32_black.fnt"},{bytes:21195,
md5:"ecaf2b34d8677ae8ec42690790cdae1e",name:"movavi_32_black.png"},{bytes:35312,md5:"e4c2a96f77bca82fad636470a0169619",name:"movavi_36_white.fnt"},{bytes:26576,md5:"3d130ee6269b95124fc2b85f4f8c66c4",name:"movavi_36_white.png"},{bytes:35020,md5:"b612618952f85698d5e5de2082144e69",name:"movavi_50_white_shadow.fnt"},{bytes:47991,md5:"f58178f2255e8dbb7d935c0d5b09f10a",name:"movavi_50_white_shadow.png"},{bytes:35270,md5:"4277825331af02bebcdd6bdcc1679783",name:"movavi_60_white.fnt"},{bytes:47936,md5:"f70809ff09a3e75fb20f27bb742baafa",
name:"movavi_60_white.png"},{bytes:35462,md5:"78631ed1621b74bbd24c792da5d434dc",name:"movavi_72_white_outline.fnt"},{bytes:107095,md5:"2078739b5bfadcb2a9364f25bc4432c2",name:"movavi_72_white_outline.png"}],ui_mode_popup:[{bytes:20244,md5:"e3d0f14f96a1e596a539b9ec4c4d0316",name:"btn_1v1.png"},{bytes:4595,md5:"5dcf17b479940d92dc6db5cd7dbfa3ea",name:"btn_2.png"},{bytes:5837,md5:"8f2de0aac404b6d6554bb3b23588ae90",name:"btn_2v2.png"},{bytes:4308,md5:"b8c878d7a61346c3457d85ed87862cd6",name:"btn_3.png"},
{bytes:4586,md5:"a69c6cf7c737edf9a6ecc13adc1005a1",name:"btn_4.png"},{bytes:2374,md5:"7dc39625002146cb9e3efc320e87be48",name:"btn_green_selection.png"},{bytes:2425,md5:"2986ee48d34440534d9bbe74c86f9683",name:"btn_round_selection.png"},{bytes:16069,md5:"3980810c97ef2fa3119ca0d642ad7801",name:"icon_posters.png"},{bytes:7864,md5:"8d4fc02e8542a6fc5fcb596a17c7f212",name:"icon_stats.png"}],sound:[{bytes:5843,md5:"c2a2c400bd018d3946a7017cad264225",name:"announcer_achievements.mp3"},{bytes:8929,md5:"63fad20acf9a221e675a81ac58121778",
name:"announcer_achievements.ogg"},{bytes:5011,md5:"1f5f31b631362cb8f8191b5f52dbd820",name:"announcer_all_stars.mp3"},{bytes:7860,md5:"982897a8cf4a66f10fd74341998b89e7",name:"announcer_all_stars.ogg"},{bytes:5896,md5:"5fa0e0ef6b73757dff28e625b248b5ad",name:"announcer_captain_danger.mp3"},{bytes:8703,md5:"7e922642d6e5464969c769a8a72c8fb4",name:"announcer_captain_danger.ogg"},{bytes:5843,md5:"daac0f8ddfe4b92f05a42309f015c54f",name:"announcer_championship.mp3"},{bytes:8946,md5:"4dd00912350e427e6cd6379f20a2a8f0",
name:"announcer_championship.ogg"},{bytes:4542,md5:"4af4b2fdafa76250b56bea2fae5a2d11",name:"announcer_donnie.mp3"},{bytes:7781,md5:"2e876044a2fe20d541b28fb244f43fe3",name:"announcer_donnie.ogg"},{bytes:14219,md5:"aa54e225e7844bf79bac73623a1a32d4",name:"announcer_dunk_breaker.mp3"},{bytes:16675,md5:"139bf37dfa85aa91dcc05f24dd4166b3",name:"announcer_dunk_breaker.ogg"},{bytes:6937,md5:"7682ab8cb27aca145039813fc35c23c5",name:"announcer_dunk_challenge.mp3"},{bytes:9821,md5:"04a90a36d98cce7714c7390fa187e334",
name:"announcer_dunk_challenge.ogg"},{bytes:4672,md5:"d5865e8e1cdbf248c97fb0ed9921ee94",name:"announcer_fee.mp3"},{bytes:7824,md5:"6063355e8bb60cbcedc165177cd52afb",name:"announcer_fee.ogg"},{bytes:3684,md5:"38c57fbfa7372f38aed9e2c3df2d7ce1",name:"announcer_foo.mp3"},{bytes:6581,md5:"2f4230e31d58673119bdbd070ac007a8",name:"announcer_foo.ogg"},{bytes:5868,md5:"e7ab8baba3acefe447c289e83b2ff2c7",name:"announcer_hall_of_fame.mp3"},{bytes:8777,md5:"fb97bff55d3cbd2bdd68b9f18c0599bc",name:"announcer_hall_of_fame.ogg"},
{bytes:6287,md5:"4b8fb78d24a976126e2d97c69f877203",name:"announcer_henry.mp3"},{bytes:9309,md5:"6d18d0563f6a71d4c37679e7e9eaa1ed",name:"announcer_henry.ogg"},{bytes:3606,md5:"84684833d08445435bec4ce44ee0979e",name:"announcer_horse.mp3"},{bytes:6435,md5:"3de8dcf8090e8782d78cc97936bf4d5e",name:"announcer_horse.ogg"},{bytes:10030,md5:"03bf795599b2f40aa440add98e3252e1",name:"announcer_htp_1.mp3"},{bytes:13245,md5:"ab6ed486b9e6087c5774366b53a0c6c4",name:"announcer_htp_1.ogg"},{bytes:14872,md5:"86fb01904d19f0a09c7af7733a1c2444",
name:"announcer_htp_2.mp3"},{bytes:18170,md5:"26ce937991d72c57760ea01afdc00edd",name:"announcer_htp_2.ogg"},{bytes:8238,md5:"a61f5cf94d9dbb200bb0de1eb41b3f6a",name:"announcer_htp_3.mp3"},{bytes:11563,md5:"b12042e663f9ec2e5074a4c8166bd7a9",name:"announcer_htp_3.ogg"},{bytes:11175,md5:"70be16910425247ada1ee2198cd3d9d1",name:"announcer_htp_5.mp3"},{bytes:14305,md5:"ffc3538e780c5c24a8a8592141a266c9",name:"announcer_htp_5.ogg"},{bytes:10393,md5:"5bf1f1ce1ac679a826c4732598484b81",name:"announcer_htp_6.mp3"},
{bytes:13606,md5:"0a7ad99561c4604c77efcd18b6877e2e",name:"announcer_htp_6.ogg"},{bytes:15674,md5:"ff426c549f7e1154e2666870cf3cfa18",name:"announcer_htp_7.mp3"},{bytes:18968,md5:"55f66eac1b3f840152950ea9a463d669",name:"announcer_htp_7.ogg"},{bytes:13048,md5:"e74741a8a290c8a7889e0ee0caba09cc",name:"announcer_htp_8.mp3"},{bytes:16166,md5:"6e49acc14d0804060b22d2d6882b715e",name:"announcer_htp_8.ogg"},{bytes:5895,md5:"00a251de49517dcdd0a0952381dd7601",name:"announcer_htp_horse_follower.mp3"},{bytes:9210,
md5:"3b64b339bcd081d00284a433644fb797",name:"announcer_htp_horse_follower.ogg"},{bytes:6154,md5:"06b2c9295a44af08d2dbb525fcd4c571",name:"announcer_htp_horse_leader.mp3"},{bytes:9160,md5:"34a6dc67647bcc5daca4bead79874a33",name:"announcer_htp_horse_leader.ogg"},{bytes:5218,md5:"cc8d3d2e1157882ff554e303d04a7280",name:"announcer_leo.mp3"},{bytes:8521,md5:"d0690b9f786774ced377bccb780725b7",name:"announcer_leo.ogg"},{bytes:6884,md5:"cd92643bd9e5400fdfb817714214d249",name:"announcer_lincoln.mp3"},{bytes:9608,
md5:"7b6dfcaf7edff533dd41f7dd4dec2d84",name:"announcer_lincoln.ogg"},{bytes:4334,md5:"f28d50a42ae18466315ba1fdf7e42f85",name:"announcer_lynn.mp3"},{bytes:7509,md5:"75631d11b44d144789b2cd2121088957",name:"announcer_lynn.ogg"},{bytes:4308,md5:"4d62210436c4953e4b7c29f27c865ce1",name:"announcer_mike.mp3"},{bytes:7238,md5:"253f701dd1cb22ffffa1fa43ab169a7c",name:"announcer_mike.ogg"},{bytes:4439,md5:"5b9a529e0587480a43bae58feee7db9a",name:"announcer_nice_shot.mp3"},{bytes:7502,md5:"6a5c9ecbfd2cac5f3cab15e1fadba256",
name:"announcer_nice_shot.ogg"},{bytes:3866,md5:"782a455c5205b368444c4b157c4272a9",name:"announcer_patrick.mp3"},{bytes:6615,md5:"63ec70f05e2bcee19d91981542d428e4",name:"announcer_patrick.ogg"},{bytes:4438,md5:"debf97a0124dc8b38a6b88afb6f0d76a",name:"announcer_pink_ranger.mp3"},{bytes:7910,md5:"227060139b9a75bab557c15c9481f82e",name:"announcer_pink_ranger.ogg"},{bytes:3893,md5:"81dc9229d0081a917799f4d3ef26c7d4",name:"announcer_player1.mp3"},{bytes:6839,md5:"fccb712833432ffcddda36747c0e00d1",name:"announcer_player1.ogg"},
{bytes:5063,md5:"a712a39336c43a2b0b9aa9c07761076b",name:"announcer_player2.mp3"},{bytes:7983,md5:"e5ad6f18020b3264453f22b3e2c56903",name:"announcer_player2.ogg"},{bytes:6258,md5:"88cc87cf6197b2ec1d3ef2645d0f8aa2",name:"announcer_player3.mp3"},{bytes:9450,md5:"2b35ee6070e5c54eafadc3fe1af88819",name:"announcer_player3.ogg"},{bytes:6596,md5:"b6f1c788f7e9eda8ac2160777fcdffeb",name:"announcer_player4.mp3"},{bytes:9878,md5:"f5c22e432ff66865ec5131a8421f8b26",name:"announcer_player4.ogg"},{bytes:5974,md5:"d5cc2a1f14c801153bcc7e88a0ed5596",
name:"announcer_posterize.mp3"},{bytes:8549,md5:"c8384f05f5365222ac5d868f26057816",name:"announcer_posterize.ogg"},{bytes:5219,md5:"02083189849881779fab74514e7f07af",name:"announcer_posters.mp3"},{bytes:8170,md5:"21956948c66b692857f774f0c51598b8",name:"announcer_posters.ogg"},{bytes:5844,md5:"6e791f9133d5c73d2ef3ee60b817e56c",name:"announcer_quickmatch.mp3"},{bytes:8901,md5:"2e6315576c8b6e1b8c946552b247d74a",name:"announcer_quickmatch.ogg"},{bytes:4178,md5:"939acb36c05ea235e01c96fd95f6724e",name:"announcer_raph.mp3"},
{bytes:7453,md5:"987a4c48d314082bee0a042432795013",name:"announcer_raph.ogg"},{bytes:6154,md5:"274ae94710a9182df53555c75234a3a9",name:"announcer_red_ranger.mp3"},{bytes:9243,md5:"266ca32caca1c4cae0dc1b45b14f88e1",name:"announcer_red_ranger.ogg"},{bytes:3945,md5:"c89fd682f139700a5d20841e96accd66",name:"announcer_score_bad1.mp3"},{bytes:7014,md5:"b8245d750066222b066f4c4ee0b2fa02",name:"announcer_score_bad1.ogg"},{bytes:5479,md5:"3b8f15e4884bdd46c0aa75348f775e1b",name:"announcer_score_bad2.mp3"},{bytes:8490,
md5:"a0b74775c66b2a33276f888d5d27e580",name:"announcer_score_bad2.ogg"},{bytes:9586,md5:"ba5d956274a6659eb8928db881f975d2",name:"announcer_score_good1.mp3"},{bytes:11920,md5:"86a791951bae9566d3168473c2e694fd",name:"announcer_score_good1.ogg"},{bytes:6909,md5:"05a397284bd450d4051b83ad5eddcb6e",name:"announcer_score_good2.mp3"},{bytes:9792,md5:"d67f30fed97a5eb7af14afebfa6b57dd",name:"announcer_score_good2.ogg"},{bytes:9068,md5:"6d972bfc9361949d7b9c3886afba4f5e",name:"announcer_select_character.mp3"},
{bytes:12152,md5:"acb6cebc16f8f8171944a2bea46fb683",name:"announcer_select_character.ogg"},{bytes:7352,md5:"de69e9ae0c20044a2b38bb24958505d0",name:"announcer_select_mode.mp3"},{bytes:10334,md5:"d5452492da9b0da12b4860bddf70ae7a",name:"announcer_select_mode.ogg"},{bytes:6364,md5:"74d7a63073e4963621e1691b4ea10225",name:"announcer_shootout.mp3"},{bytes:9198,md5:"3c4c25b8ac9ef6c6833aabc6bff82eb0",name:"announcer_shootout.ogg"},{bytes:9251,md5:"6ab5685c594585b4601c72e834ba111d",name:"announcer_special.mp3"},
{bytes:12073,md5:"1adc13afbe8e44292b72175514cd8bce",name:"announcer_special.ogg"},{bytes:5271,md5:"79a8449985bf45f96cd5ffb709affefd",name:"announcer_spongebob.mp3"},{bytes:8245,md5:"74f98ec40006d11845e3bbbd885ff78b",name:"announcer_spongebob.ogg"},{bytes:5741,md5:"1c743af8ac86ca510a254a52747b6470",name:"announcer_stats.mp3"},{bytes:8799,md5:"ccbd25888a1210e5b599f5a52897a47b",name:"announcer_stats.ogg"},{bytes:6260,md5:"0a1228681d7179a53203b6e253828d56",name:"announcer_turn.mp3"},{bytes:9030,md5:"8921a5b2e9d839b3a833f60eff33b2b4",
name:"announcer_turn.ogg"},{bytes:5088,md5:"2073f61407ce69e32aa94e7ad64d9c25",name:"announcer_wins.mp3"},{bytes:7881,md5:"8ea3cc413255239d1db492df06350ad2",name:"announcer_wins.ogg"},{bytes:3063,md5:"0160393fae04584563997351fd224507",name:"ball_lost.mp3"},{bytes:5964,md5:"c0e3d41c803017ca44fd77e6afb751bd",name:"ball_lost.ogg"},{bytes:11226,md5:"d0b4f0c591ce0013bec5e7ced1f7bc0a",name:"boo_1.mp3"},{bytes:15256,md5:"dfa5084950a07ff906a00724506756d9",name:"boo_1.ogg"},{bytes:3660,md5:"80fe1537cc91089ed4490cde71d0a2b6",
name:"bounce_1.mp3"},{bytes:6749,md5:"0d01502dbf6a0f3cec6a1ab7e77625e7",name:"bounce_1.ogg"},{bytes:3192,md5:"a55e8203b13d5473a94bc4abe719eb1f",name:"bounce_2.mp3"},{bytes:6192,md5:"7f34d338c83a9fe08023d71e237b0e82",name:"bounce_2.ogg"},{bytes:11176,md5:"a9dd6df201042522865946a83389c39d",name:"captain_hit.mp3"},{bytes:16089,md5:"186424a8381985d659d3ff9edb80c9d2",name:"captain_hit.ogg"},{bytes:12137,md5:"06c36b11a399b1b17ca2414c6a9b5b33",name:"cheer_1.mp3"},{bytes:16736,md5:"c50d1b31c5cf79e10c6d8b119bd2789b",
name:"cheer_1.ogg"},{bytes:1763,md5:"1ef05df03cd62825f5ecb39f59589e83",name:"click.mp3"},{bytes:4393,md5:"9890139d1a8f46481d0475a95afd2d9b",name:"click.ogg"},{bytes:12864,md5:"0a295bdcc7de5bca3680dcf7df1e8f66",name:"crowd_2.mp3"},{bytes:17334,md5:"d3642ef234f67854070978d81532d74f",name:"crowd_2.ogg"},{bytes:6053,md5:"a54afb04a830d0d4f251c89c42bf7487",name:"donnie_special.mp3"},{bytes:9533,md5:"3c3a977c6b0d9014c9cf464a793e6b39",name:"donnie_special.ogg"},{bytes:8496,md5:"146a7ae232e9f4659109ad1a9297d61b",
name:"donnie_special_in.mp3"},{bytes:12202,md5:"1010c130bd1eb43f53236a791b819ebc",name:"donnie_special_in.ogg"},{bytes:3610,md5:"0c818dea23243657dc6e2b960b8191b9",name:"dunk.mp3"},{bytes:6209,md5:"6afca576a0b94765ec28bde87223b665",name:"dunk.ogg"},{bytes:4183,md5:"529b008ba29bd50a797b30254013674a",name:"dunk_captain_danger.mp3"},{bytes:7352,md5:"08cf83d4cacca6e0d420cf010c3e1421",name:"dunk_captain_danger.ogg"},{bytes:5692,md5:"9e73661af076d5823be209c629923f36",name:"dunk_donnie.mp3"},{bytes:9044,
md5:"607b4b30531b2fc3f47ba3859ad92067",name:"dunk_donnie.ogg"},{bytes:7848,md5:"941ad0f830bdef4f841e90b93c678791",name:"dunk_fee.mp3"},{bytes:11297,md5:"639eff56d09920ede87b84ad7f5becdc",name:"dunk_fee.ogg"},{bytes:5324,md5:"379ed0a674244d9c8509acc3e8034969",name:"dunk_foo.mp3"},{bytes:8812,md5:"a246ba3a80e17896de7ad9060a935017",name:"dunk_foo.ogg"},{bytes:5334,md5:"d55f1365c1226edf88a259c80d9f1a30",name:"dunk_henry.mp3"},{bytes:8710,md5:"c0b55b05cfb924d3501b732ee0e3a03d",name:"dunk_henry.ogg"},{bytes:6093,
md5:"c7784530bc78ef8115c3fc268eb80f58",name:"dunk_leo.mp3"},{bytes:9054,md5:"74ea72dc1c56eeaf6ff7279809a8a3e9",name:"dunk_leo.ogg"},{bytes:7468,md5:"0733ce3d665274f10c178f3932958fc8",name:"dunk_lincoln.mp3"},{bytes:10648,md5:"6e5eaa5f8f8ece55d90f0e64d31ce3b2",name:"dunk_lincoln.ogg"},{bytes:3815,md5:"4ac2221c11193f7b085e00503f60fd4b",name:"dunk_lynn.mp3"},{bytes:6740,md5:"398b7e411add86e22cd1dc6dfd68e506",name:"dunk_lynn.ogg"},{bytes:10786,md5:"11cb2b10cabce4800f6e93075bc78c56",name:"dunk_mike.mp3"},
{bytes:13786,md5:"73ecbd539479b76fd8c56bc509aac53a",name:"dunk_mike.ogg"},{bytes:4025,md5:"4ab0ee3ee05e2bafebbd7c45ce0a7800",name:"dunk_miss.mp3"},{bytes:13088,md5:"c0acfecc3c7f21299c66f73dae569745",name:"dunk_miss.ogg"},{bytes:4491,md5:"60d3590964e9cd209edd8a818b263311",name:"dunk_patrick.mp3"},{bytes:7883,md5:"2805b68f39f5864924cb208f15a9c32f",name:"dunk_patrick.ogg"},{bytes:3393,md5:"e6c78d72925b19caaa5470429da163e8",name:"dunk_pink_ranger.mp3"},{bytes:6640,md5:"761fe10513fa76c78985e75722b4b4e3",
name:"dunk_pink_ranger.ogg"},{bytes:6391,md5:"182241e414c5dfb2ea5bdc799ea39838",name:"dunk_raph.mp3"},{bytes:9334,md5:"63ac1cb2478b2654191a3350a8c6c4c6",name:"dunk_raph.ogg"},{bytes:2900,md5:"a535d5e341dd6f0ef32dba3a685dcb46",name:"dunk_red_ranger.mp3"},{bytes:5777,md5:"698653d4fe512efda49447fad65fffe4",name:"dunk_red_ranger.ogg"},{bytes:3426,md5:"3594c58d040c967b9180a9eceb90920f",name:"dunk_slime.mp3"},{bytes:7476,md5:"4f60d183e19073a13a63446333eb697a",name:"dunk_slime.ogg"},{bytes:5211,md5:"532eea629b9393ef8280168b8257a806",
name:"dunk_spongebob.mp3"},{bytes:8408,md5:"0a62abea6873d6dfc8b523386b41d35e",name:"dunk_spongebob.ogg"},{bytes:3062,md5:"6bcc40b9f8da3d00889c3cd36aaa2fb9",name:"easter_egg.mp3"},{bytes:6331,md5:"8b46ca9f68de25fc1712f708a8985ea9",name:"easter_egg.ogg"},{bytes:16606,md5:"79e51b00ebf69bfb961eba714b868576",name:"fail.mp3"},{bytes:19085,md5:"f57567043fd93a2dbe642f1d71fb6390",name:"fail.ogg"},{bytes:3661,md5:"adcb3f376ea584f19037e05c61b77ff2",name:"fee_special.mp3"},{bytes:7010,md5:"b4fda8ded38ae9dd4ccbce19e7af0046",
name:"fee_special.ogg"},{bytes:3661,md5:"9d40adc99565fb1d6982c5fac2814faa",name:"foo_special.mp3"},{bytes:6324,md5:"6459a9d8769cd397744f5e44cc9c2f44",name:"foo_special.ogg"},{bytes:2438,md5:"04eab99ec043a028e22bc12aef5a6e9b",name:"foo_special_pre.mp3"},{bytes:6172,md5:"32ad4f073f297af69489afdf89537d9e",name:"foo_special_pre.ogg"},{bytes:201214,md5:"a6968a43bdd8a1e62d95a71642275802",name:"gameplay.mp3"},{bytes:236603,md5:"2cde92a2c840d677ef57b97792c3bf9a",name:"gameplay.ogg"},{bytes:11850,md5:"5881aa5efd4e6bef3ec970531be3b0f2",
name:"glass_break.mp3"},{bytes:15701,md5:"02265fd2071f89769c857a972cd7ea16",name:"glass_break.ogg"},{bytes:2570,md5:"5cdffdd45e1fa2c988ac5bf4303ba36f",name:"henry_snap.mp3"},{bytes:5602,md5:"766622748479f6b6a9c2f5cbc74f6729",name:"henry_snap.ogg"},{bytes:1242,md5:"9aac948bbc448faea2f3927ad3bf8515",name:"hit_1.mp3"},{bytes:4493,md5:"6563ab5f4b629d2a736851c3cb0ae365",name:"hit_1.ogg"},{bytes:1528,md5:"3105349acd71d3c45c4900a4a6ba85d2",name:"hit_2.mp3"},{bytes:4831,md5:"c73532f4e459c324b332e865b7ecf040",
name:"hit_2.ogg"},{bytes:2750,md5:"01ad8c50819740f6e69df18bc75f5ea9",name:"horse_good.mp3"},{bytes:5921,md5:"9a7d81c72d811fceaa66c9b6705c4d25",name:"horse_good.ogg"},{bytes:4362,md5:"89675b964eb7414a856112603080aa6e",name:"horse_wrong.mp3"},{bytes:7684,md5:"076e890cad1d9b37b9e32983971c887a",name:"horse_wrong.ogg"},{bytes:2152,md5:"d736e66e6cca957ba575a404d7fe9100",name:"hurt_female.mp3"},{bytes:4975,md5:"17f363c2bc0b595cc2c1090b909110ac",name:"hurt_female.ogg"},{bytes:1970,md5:"b99218ace1269b7772f7d1f19fe1994e",
name:"hurt_male.mp3"},{bytes:5046,md5:"22366240829e1957c1ffb865901ba5ad",name:"hurt_male.ogg"},{bytes:1736,md5:"3ec5ddf5b1681b30f9f35cf076f639b2",name:"jump.mp3"},{bytes:4805,md5:"12dda52faae8a173f3ac8eaaf5f5fb82",name:"jump.ogg"},{bytes:5638,md5:"f871fe7bee0146d932d58346d180020c",name:"leo_special_pre.mp3"},{bytes:8843,md5:"10646aee2540d6b6c90bd1a3d3628461",name:"leo_special_pre.ogg"},{bytes:4048,md5:"9a5d38b6e9db7f7021d61f650a9bb093",name:"lincoln_special.mp3"},{bytes:6744,md5:"86722bb83855cc801dd6d3726c628c95",
name:"lincoln_special.ogg"},{bytes:2959,md5:"ac9f737bf547e6d29423705ace766ce7",name:"lose_captain_danger.mp3"},{bytes:6198,md5:"71ea6300e1a613b7999673ce007d9bdc",name:"lose_captain_danger.ogg"},{bytes:6312,md5:"927566de0a6d908b0491152c850d266a",name:"lose_donnie.mp3"},{bytes:10113,md5:"827f1efb7068c36653b1c498eaa7c93d",name:"lose_donnie.ogg"},{bytes:4051,md5:"12790bd0bdf1bf593af77a323602d894",name:"lose_fee.mp3"},{bytes:7238,md5:"68d1cb3f04aea2cbf497684c54cef648",name:"lose_fee.ogg"},{bytes:6468,
md5:"152a13159d9911f8969aa09a39ef318f",name:"lose_foo.mp3"},{bytes:9546,md5:"0c373c4a90db910909332618ea2df6fa",name:"lose_foo.ogg"},{bytes:4053,md5:"03453ea79e0e328d4c035f2e21b105d0",name:"lose_henry.mp3"},{bytes:7508,md5:"259a30165c23f04237c837bcdd403a2d",name:"lose_henry.ogg"},{bytes:7272,md5:"9e03081429190c0762b99ea3b36f358f",name:"lose_leo.mp3"},{bytes:10326,md5:"5e3134466dd405c2075b0b0bca5119df",name:"lose_leo.ogg"},{bytes:5837,md5:"aada53bebc9fa37eeafeb02601cd61ca",name:"lose_lincoln.mp3"},
{bytes:8684,md5:"efde2e74ea4999a7229a6c526f2c5c39",name:"lose_lincoln.ogg"},{bytes:5037,md5:"4f20f08b130b5bbf776357f2a1881cb6",name:"lose_lynn.mp3"},{bytes:8160,md5:"28d74ae72ca4809126856a846a811ca9",name:"lose_lynn.ogg"},{bytes:5378,md5:"7fdaa9574cc7a3415b82680ee650056f",name:"lose_mike.mp3"},{bytes:8089,md5:"bec2ed2700a8ad62db864e71e28e58bc",name:"lose_mike.ogg"},{bytes:6350,md5:"fa907e557b77a13b30105e08ab6916d6",name:"lose_patrick.mp3"},{bytes:10107,md5:"11da24453c9159038782805fd2b04774",name:"lose_patrick.ogg"},
{bytes:4644,md5:"7ad23f94ad2d17eb0cd440fb29dde1bb",name:"lose_pink_ranger.mp3"},{bytes:7445,md5:"dd6ae40379a39944915d41bbb1ab97bb",name:"lose_pink_ranger.ogg"},{bytes:4519,md5:"4a00735370524686b50f40dd42512cd4",name:"lose_raph.mp3"},{bytes:7506,md5:"97c58cc35b7d59e518dabd6ea4845a5b",name:"lose_raph.ogg"},{bytes:4059,md5:"1e648b24beeefd265a854944e1c1de37",name:"lose_red_ranger.mp3"},{bytes:7471,md5:"9a3d491b5ed50b3ec8a128f0467d97b7",name:"lose_red_ranger.ogg"},{bytes:6006,md5:"2fc98fbe3a2e1bf84afa26cc3ac703f9",
name:"lose_spongebob.mp3"},{bytes:9209,md5:"28fa1566590c4b18a345f2ada5a5d260",name:"lose_spongebob.ogg"},{bytes:4204,md5:"fe62ac6cfcb3f55ac4fc0f149ee741e9",name:"mega_captain_danger.mp3"},{bytes:6825,md5:"f1231cfe6784a57a0c122df80b4a752b",name:"mega_captain_danger.ogg"},{bytes:6573,md5:"41a4961300f132fc0cbabf890f07ca8c",name:"mega_donnie.mp3"},{bytes:10083,md5:"ee9eff22e2d64a63472143d108cfd2c8",name:"mega_donnie.ogg"},{bytes:12111,md5:"3a0992aa8309aa7bd209fb75a1e9a98f",name:"mega_dunk.mp3"},{bytes:16619,
md5:"190e36dec6e54168b1b24bcf98e56133",name:"mega_dunk.ogg"},{bytes:7690,md5:"0c0ad36e297d4c4bd39a458a5600acda",name:"mega_fee.mp3"},{bytes:11604,md5:"53ddb3304f6f48cf5afa3ca55e549527",name:"mega_fee.ogg"},{bytes:5039,md5:"aee80790e8bce48ded495380bb9c001c",name:"mega_foo.mp3"},{bytes:8086,md5:"e2e6ae519c1835abeac4a2f011a49bd2",name:"mega_foo.ogg"},{bytes:5545,md5:"43a838cb8ebdbe327cdd02159f34d20f",name:"mega_henry.mp3"},{bytes:8972,md5:"ae5cfc828af3672d3b6d2de0da59d6ca",name:"mega_henry.ogg"},{bytes:7978,
md5:"9a313e3f64b9967b4e0bad06dd58ce2f",name:"mega_leo.mp3"},{bytes:11250,md5:"9ece097085b59425c772d93c5f52d1cf",name:"mega_leo.ogg"},{bytes:2231,md5:"d29e01c260e8eef509f4a9021e75846b",name:"mega_lincoln.mp3"},{bytes:5379,md5:"78d149cb05d3e1d437444ce9143f4026",name:"mega_lincoln.ogg"},{bytes:3317,md5:"324d60276050c2a52339bc7015051c24",name:"mega_lynn.mp3"},{bytes:6265,md5:"96d391c520015c67a6314b804fe771ec",name:"mega_lynn.ogg"},{bytes:8626,md5:"b806797916f66cc46622a119f45c20db",name:"mega_mike.mp3"},
{bytes:11843,md5:"e0638caf641c513a46828a8bfcd0eb24",name:"mega_mike.ogg"},{bytes:4315,md5:"9dd6c490258e749902538044c81949ed",name:"mega_patrick.mp3"},{bytes:7482,md5:"498c4dc7d00befabf9fd49b64362fd1f",name:"mega_patrick.ogg"},{bytes:2816,md5:"530e931ee670f325c3a8081a15fc659e",name:"mega_pink_ranger.mp3"},{bytes:6188,md5:"593a6e474c738e7855e07fe0976c25e7",name:"mega_pink_ranger.ogg"},{bytes:7097,md5:"f9a16f761a2bbaabb9e3a0c982132178",name:"mega_raph.mp3"},{bytes:10635,md5:"8c6211d01b9ea4f6ef3e8c450e1a7c39",
name:"mega_raph.ogg"},{bytes:4521,md5:"b0c299886b2dedd2b49fc2e034cc7ea6",name:"mega_red_ranger.mp3"},{bytes:7907,md5:"4700a984fbc8c49cadd4daa8cc5c88f6",name:"mega_red_ranger.ogg"},{bytes:4944,md5:"b7a6a74b7b21d11af979544777d52d94",name:"mega_spongebob.mp3"},{bytes:7656,md5:"154c25a91707b8c9b2154f2959396981",name:"mega_spongebob.ogg"},{bytes:10939,md5:"5c36189ca0e80e7fff962cb438cd2a08",name:"mega_start.mp3"},{bytes:14657,md5:"161294c9b0926b4469e62cea7d127b3f",name:"mega_start.ogg"},{bytes:110216,md5:"1b62e0dc2d2bd306f94ee6f1c63345d1",
name:"menu.mp3"},{bytes:134055,md5:"947c57916d89e98931538275bbf09057",name:"menu.ogg"},{bytes:1659,md5:"48c9708055bc204d33dfeb3abf9560df",name:"mike_spinning_arms.mp3"},{bytes:4787,md5:"12824ab61b20c4bd3e76477dc33e8e67",name:"mike_spinning_arms.ogg"},{bytes:4079,md5:"bd50dd18531b7860ed572661db97bea0",name:"miss_captain_danger.mp3"},{bytes:7365,md5:"aa3fe43adcb732f84b6836c39f1f7180",name:"miss_captain_danger.ogg"},{bytes:6390,md5:"457714a827eea5329ce9e6b5241b8831",name:"miss_donnie.mp3"},{bytes:10212,
md5:"4d61a3483be562c29522a2d76f86c4ff",name:"miss_donnie.ogg"},{bytes:6548,md5:"fd6fb7c31984f5ce27d241d3e7ab0c5d",name:"miss_fee.mp3"},{bytes:9550,md5:"76196bd53ff39967c01f6e18551f46d8",name:"miss_fee.ogg"},{bytes:2807,md5:"bba7076efdd7a0f42f980918c0cfbdd2",name:"miss_foo.mp3"},{bytes:5869,md5:"3ee626f8a04c0555d9f8ccd3f92ca35f",name:"miss_foo.ogg"},{bytes:4085,md5:"53f7b8c830213211d12130c543c83d77",name:"miss_henry.mp3"},{bytes:6989,md5:"67ebf212ab844bda011ca04eb34200ce",name:"miss_henry.ogg"},{bytes:2984,
md5:"23997071e04ecd4df72d76e95ea6b04e",name:"miss_leo.mp3"},{bytes:6198,md5:"05757968c434bd8fb55e6f5115ea6998",name:"miss_leo.ogg"},{bytes:3349,md5:"e2adb6e7c7ab9fa212d27486cf654217",name:"miss_lincoln.mp3"},{bytes:6279,md5:"2d280a677b9b0c6fca7053c52cdec565",name:"miss_lincoln.ogg"},{bytes:4370,md5:"15cc47d8b341107790e1e38fb248a9cc",name:"miss_lynn.mp3"},{bytes:7605,md5:"0ae4e9ffe6db335d9a51bce2597bb356",name:"miss_lynn.ogg"},{bytes:5378,md5:"7fdaa9574cc7a3415b82680ee650056f",name:"miss_mike.mp3"},
{bytes:8089,md5:"d8e1382896880ae10648782f7cd172dd",name:"miss_mike.ogg"},{bytes:5178,md5:"c6abb6ffd72b9858a141caa4bf7451e7",name:"miss_patrick.mp3"},{bytes:8817,md5:"ab8456d5b2003cbadf8901cd7f2e41fc",name:"miss_patrick.ogg"},{bytes:5740,md5:"85944b7413f101a102cd1d49b0769f54",name:"miss_raph.mp3"},{bytes:8730,md5:"3d5802b985020183867cc1d8181e2dbe",name:"miss_raph.ogg"},{bytes:3862,md5:"c396870ead452b4b984de879f5bc602c",name:"miss_spongebob.mp3"},{bytes:6927,md5:"55258bbcdc170825304dbb993f98b666",name:"miss_spongebob.ogg"},
{bytes:2543,md5:"6cd3d2a790bbd12e20c3df80793795ee",name:"ninja_jump.mp3"},{bytes:5855,md5:"5dc313260b82a23ee717bb501e8b304b",name:"ninja_jump.ogg"},{bytes:7664,md5:"b2e8e7969ede03f91bd1bd538fb0a270",name:"ooh_1.mp3"},{bytes:11262,md5:"1aa9f3fb5ecd3c84542a89193fe32588",name:"ooh_1.ogg"},{bytes:2151,md5:"6e81c4da4147f346874fbb2325c44ee5",name:"patrick_bite.mp3"},{bytes:5638,md5:"bc9d96a871705876092bc7e649b9c115",name:"patrick_bite.ogg"},{bytes:1138,md5:"88f9e81de168ad4e219074223fc36613",name:"patrick_pop.mp3"},
{bytes:4133,md5:"8e8ec47e30c7af6fdf7a5db96d170b2d",name:"patrick_pop.ogg"},{bytes:3317,md5:"427daa16a1b77de5222ddc2b1c1aed21",name:"pickup.mp3"},{bytes:5783,md5:"8d76dd635d98643ff7866e6691679de9",name:"pickup.ogg"},{bytes:6625,md5:"80d7b4b493bd26453affa43abd751db1",name:"pickup_aim.mp3"},{bytes:10288,md5:"a77d6f3ee0a1d53a31ae2c23f354d33e",name:"pickup_aim.ogg"},{bytes:3290,md5:"47022985eded84a8019056461da3ad62",name:"pickup_dunk.mp3"},{bytes:5775,md5:"90a62c73ee8ce7ee801427bd8cedd80b",name:"pickup_dunk.ogg"},
{bytes:4051,md5:"b6b84baa973df60afd1e7027a4c42c92",name:"pickup_fast.mp3"},{bytes:7090,md5:"eda52c73519ef86ebbda2b2822881485",name:"pickup_fast.ogg"},{bytes:4440,md5:"b4431c0b38d76681ce90ed68fd210598",name:"pickup_jump.mp3"},{bytes:8316,md5:"da3039f5c0cc328faf45fb74b9d0c6fe",name:"pickup_jump.ogg"},{bytes:2984,md5:"d57ce094089e3a3f2a600fc9248ba95b",name:"pickup_spawn.mp3"},{bytes:6110,md5:"e4ddf872ce3d2ca6f40e5631e3bfe528",name:"pickup_spawn.ogg"},{bytes:9433,md5:"806c3180452d02171f7db41c43941e9d",
name:"pink_r_throw.mp3"},{bytes:13026,md5:"7548e91f064362a38c67306a608fc661",name:"pink_r_throw.ogg"},{bytes:2747,md5:"d517fbd6ef420da69b88e132f575f3aa",name:"posterized.mp3"},{bytes:5593,md5:"47b6f8b6c5ec38fd7104f7690d617bdc",name:"posterized.ogg"},{bytes:9041,md5:"a9c8a37f85ce14727375d3a70f005ea2",name:"raph_special_pre.mp3"},{bytes:13762,md5:"46a1f71adc6946b3c8e99e9708c52331",name:"raph_special_pre.ogg"},{bytes:8500,md5:"85a575a02e93288f1028fe7c0d9ee28f",name:"red_r_explosion.mp3"},{bytes:12609,
md5:"87afa23afc92b33d9934c846351779c4",name:"red_r_explosion.ogg"},{bytes:20535,md5:"d3874916e158e4f346c1f4585df03288",name:"red_r_water.mp3"},{bytes:27682,md5:"4b4f4bd2b1ebde8965da6b2c5481aa0f",name:"red_r_water.ogg"},{bytes:4258,md5:"147e9fbac3b25d1e425d8416b00d8e38",name:"ref_whistle_1.mp3"},{bytes:6372,md5:"8cb8f3b9299c1855b035abe2498fd12b",name:"ref_whistle_1.ogg"},{bytes:8496,md5:"146a7ae232e9f4659109ad1a9297d61b",name:"rocket.mp3"},{bytes:12202,md5:"38adc3f769df17e8136366a8aff4af8a",name:"rocket.ogg"},
{bytes:2308,md5:"a011c7ae4c2fa1a6aab8bfc14a3ed8ba",name:"shoot.mp3"},{bytes:5280,md5:"52cbb8174ffb8ec0a140fc1a3344fe05",name:"shoot.ogg"},{bytes:14374,md5:"8adc637b300f16975f1acc95644255b2",name:"singer_menu.mp3"},{bytes:15746,md5:"67db9ab4cafac430474d83dd7d97a988",name:"singer_menu.ogg"},{bytes:6548,md5:"069263ea5aabef26dc57ca3e3fcf4de8",name:"smoke_puff.mp3"},{bytes:9584,md5:"66fb45489e475cc2e3e685bc154db237",name:"smoke_puff.ogg"},{bytes:3426,md5:"30ce459f32bba6a8383c25b3fc1c5e3b",name:"smoke_puff2.mp3"},
{bytes:6716,md5:"3a68a270075ec270257b04055d5387a3",name:"smoke_puff2.ogg"},{bytes:2360,md5:"fa07185b7a61bee15800d7f0b77f29fb",name:"sneaker_1.mp3"},{bytes:8622,md5:"2c01c31eb4f04d860edd286e16665dd8",name:"sneaker_1.ogg"},{bytes:2412,md5:"1706e5905e2f4f902b6a2848018fb394",name:"sneaker_2.mp3"},{bytes:8537,md5:"2b19a4ca26b80aaddd7fb2d7f0624e40",name:"sneaker_2.ogg"},{bytes:3687,md5:"ac5094ea5c6c43b2584f1c14f3a16484",name:"sneaker_3.mp3"},{bytes:11672,md5:"3edf26fb6405a7a17c46370db34895d4",name:"sneaker_3.ogg"},
{bytes:3557,md5:"83bad5f8c0ea17da78e3b932fc3a70c0",name:"spongebob_special.mp3"},{bytes:5860,md5:"128a3179138ef41ee97225ab1f96b85a",name:"spongebob_special.ogg"},{bytes:5194,md5:"c19dd72897f15c660d7a07a62befec42",name:"super_ready.mp3"},{bytes:8058,md5:"d59e128b2063326ad2b688750b99f46f",name:"super_ready.ogg"},{bytes:1659,md5:"48c9708055bc204d33dfeb3abf9560df",name:"swoosh.mp3"},{bytes:4787,md5:"3124d5068e184ce6b5a2bd8acef1804d",name:"swoosh.ogg"},{bytes:1866,md5:"30e68df85e882376be20f905dfb7d7a6",
name:"throw_stars.mp3"},{bytes:7303,md5:"7abc97ad698a377ae57ce14a940bc1b1",name:"throw_stars.ogg"},{bytes:16190,md5:"a2d37fcfff387e8d51f3cd6750a61a44",name:"win.mp3"},{bytes:18098,md5:"153d43c3276f2c82ca24d9fe027ad03c",name:"win.ogg"},{bytes:5871,md5:"3fd0c6c2a1af1cc24adb26f03dfbe486",name:"win_captain_danger.mp3"},{bytes:8650,md5:"b931e28b74be1dc1c23152c504918362",name:"win_captain_danger.ogg"},{bytes:12682,md5:"836a7df089d680bb44eec4897c951385",name:"win_donnie.mp3"},{bytes:16184,md5:"d8dabc14a06d4cae9718efd895d4b69c",
name:"win_donnie.ogg"},{bytes:4833,md5:"ddd470fee94f49f52592548cfa09e35a",name:"win_fee.mp3"},{bytes:7827,md5:"8295ebf917bf6cf6a691d7c14561b9ce",name:"win_fee.ogg"},{bytes:5039,md5:"aee80790e8bce48ded495380bb9c001c",name:"win_foo.mp3"},{bytes:8086,md5:"cd0ad3b3e65e20230d131506ae04f89c",name:"win_foo.ogg"},{bytes:8593,md5:"f95ab7b9cbd89c43803a0a8414db7563",name:"win_henry.mp3"},{bytes:12341,md5:"aaafa7ef814ce24d0db384e827be17f9",name:"win_henry.ogg"},{bytes:9539,md5:"a860eca708186a81129e6417fb86c083",
name:"win_leo.mp3"},{bytes:13478,md5:"0ecc5128e590da3ed58efe0ca70aa263",name:"win_leo.ogg"},{bytes:5889,md5:"fbf18401c56bafbf2fce26c3e2aab602",name:"win_lincoln.mp3"},{bytes:9088,md5:"2fbe51afe2903f5e4a7df7d1c98d0a25",name:"win_lincoln.ogg"},{bytes:5851,md5:"df7003be8addb6a67545ce13bb025c17",name:"win_lynn.mp3"},{bytes:8625,md5:"363f562a1e87723826243bd0c278a1f9",name:"win_lynn.ogg"},{bytes:5664,md5:"1df8d7d0834f77990754b65af9d04d39",name:"win_mike.mp3"},{bytes:8601,md5:"5edc62e3fa42a944b024db3383a48bdf",
name:"win_mike.ogg"},{bytes:4491,md5:"fbafa1247cd358943d1446ca556a037d",name:"win_patrick.mp3"},{bytes:7883,md5:"a05039459bf03dfc5ab551a55e52a350",name:"win_patrick.ogg"},{bytes:5228,md5:"f2b0610efbafa40a7704edf642f2499f",name:"win_pink_ranger.mp3"},{bytes:8532,md5:"70dbe2b8956b17caca345f83591632bd",name:"win_pink_ranger.ogg"},{bytes:6735,md5:"5a66e03303628c8f4cfa5d1f3b27e40a",name:"win_raph.mp3"},{bytes:10369,md5:"2aa1f0129301498e6a71e0fc011fb328",name:"win_raph.ogg"},{bytes:7361,md5:"c81617ba0e44d874544a3505c58db3e5",
name:"win_red_ranger.mp3"},{bytes:10529,md5:"cf98564c23d47c344b434fab457bf3da",name:"win_red_ranger.ogg"},{bytes:10457,md5:"da68cb0a7f557165b95a7585b460603b",name:"win_spongebob.mp3"},{bytes:13504,md5:"15221c098d315eeed0f418d3186711ab",name:"win_spongebob.ogg"}],htp:[{bytes:27360,md5:"ffc7efdc8fd20b4f6067d86135326f1f",name:"htp_1.png"},{bytes:31606,md5:"9cd07375e782aad11142e6c1e2c14be6",name:"htp_2.png"},{bytes:66076,md5:"0fac1e4103e21ccfdd3b6a52f37a51bb",name:"htp_3.png"},{bytes:78250,md5:"7c46f9bac90c47f3d922d18ee7053227",
name:"htp_4.png"},{bytes:113607,md5:"f1ab7056d17b3b98e9f931ea4a0cd2f2",name:"htp_5.png"},{bytes:79730,md5:"afc2985b89146ab722bcb51525e6c16f",name:"htp_6.png"},{bytes:91925,md5:"5911aafa810df9aeaad54415576aef27",name:"htp_7.png"},{bytes:96791,md5:"47cb8f3fd4c38debf0020306186edca6",name:"htp_8.png"}],ui:[{bytes:5608,md5:"d98872acb11bf131747d0e052b5e28ab",name:"arrow.png"},{bytes:55131,md5:"be2b66e939fec6657b35b11bd3eb662f",name:"avatar_captain_danger.png"},{bytes:65280,md5:"3299271c1dc5c39d902f975ffbc24695",
name:"avatar_donnie.png"},{bytes:47513,md5:"171d9cd14c1a2b5a4843d70d7b0cfae1",name:"avatar_fee.png"},{bytes:35461,md5:"4967f7e7bc5852fc533629989ceab526",name:"avatar_foo.png"},{bytes:48632,md5:"e5e24d47fa3a6bc71781652fa98b95c1",name:"avatar_henry.png"},{bytes:59810,md5:"3c54d64c1b5889d9f63027ee28c61c33",name:"avatar_leo.png"},{bytes:33913,md5:"45e3b0c77cbb1181f216eb7d6ca5d2ea",name:"avatar_lincoln.png"},{bytes:29464,md5:"60b671b57cc46ad0ba47137b21c0ea5d",name:"avatar_lincoln_b.png"},{bytes:36807,
md5:"75008377494e187dd9e197d8b95016fb",name:"avatar_lynn.png"},{bytes:55015,md5:"bb81cb935e5835bc2102ed4c6cff14c9",name:"avatar_mike.png"},{bytes:40057,md5:"9f6336bde12890f1b779423744332244",name:"avatar_patrick.png"},{bytes:46571,md5:"f860b97df1e09b0f6f2f695468dc9e44",name:"avatar_pink_ranger.png"},{bytes:41931,md5:"e26489c4d73f5493700d993f25514f4c",name:"avatar_pink_ranger_b.png"},{bytes:56670,md5:"629460723b6f56f010524b6922d16db2",name:"avatar_raph.png"},{bytes:45256,md5:"d9acc24cf06ec7b01468b59bcd3da3ca",
name:"avatar_red_ranger.png"},{bytes:41224,md5:"2ea6fc8e7f5965c24e6988ec9fd5e015",name:"avatar_red_ranger_b.png"},{bytes:35513,md5:"af0a2cc6ade4db8a10398108fff0861d",name:"avatar_spongebob.png"},{bytes:8195,md5:"b7d44ad0c0fae0b8f519faacad94e371",name:"blackbar.png"},{bytes:10234,md5:"3d47d6789db8288193ef53ed20bdb626",name:"btn_achievements.png"},{bytes:7865,md5:"22b5c2fdb14428d0d5182b92dc86a38f",name:"btn_back.png"},{bytes:8044,md5:"e885ad340806056a2f189e16e1b1a8cd",name:"btn_done.png"},{bytes:4172,
md5:"07dcd9d98c68169a9923fbb754379d22",name:"btn_green.png"},{bytes:3338,md5:"27003d9717f4b988cd02f022f71a1c43",name:"btn_orange.png"},{bytes:16294,md5:"b93d2a74aedf3e59fe71f201ce20b1ba",name:"btn_play.png"},{bytes:8012,md5:"961afb48154ea411c30c876efe31ff73",name:"btn_quit.png"},{bytes:22783,md5:"2cb69595bd081e5ff214ec8e92e499de",name:"btn_team_hb.png"},{bytes:21358,md5:"bd21024b17dae22ce536a02021e77f14",name:"btn_team_hd.png"},{bytes:24159,md5:"47ae4df2650927a34ac0cedcab420912",name:"btn_team_loud.png"},
{bytes:23845,md5:"3af86521da60ddfad0a65ad5417e428c",name:"btn_team_pr.png"},{bytes:19657,md5:"bcebc8655d2fd79d72a4ce80b3298d73",name:"btn_team_sb.png"},{bytes:23403,md5:"24712792781d5b49d7a5b99074b94cb0",name:"btn_team_tmnt_1.png"},{bytes:26240,md5:"50627f16228fad3ea087a16be625680b",name:"btn_team_tmnt_2.png"},{bytes:14688,md5:"bf7a9b450a2af0c75045a8d883f0d96f",name:"captain_danger.png"},{bytes:1100,md5:"6a4ec1c8eea8762093ff10715c1cf97f",name:"circle.png"},{bytes:1234,md5:"44fbc6c35c434cd386224f25ee64e4a5",
name:"circle_selected.png"},{bytes:15625,md5:"339995e656de75431f621f136c561db2",name:"donnie.png"},{bytes:14948,md5:"7c2eeb23c4e4261cf85b03371789b240",name:"fee.png"},{bytes:12601,md5:"cc3205cc86a5a1c497fbe1f6f3f6bf56",name:"foo.png"},{bytes:1638,md5:"b6af5e27a4a4f1948a6fa9fbdea89d1f",name:"frame.png"},{bytes:13484,md5:"2de6862ef68bfdcb903b6794b429b0e6",name:"henry.png"},{bytes:4206,md5:"6bb1ce384485c9084e64263fe0d31d11",name:"icon_achievements.png"},{bytes:5178,md5:"a4a2a5d46cfeff173cb55e858ff155eb",
name:"icon_golden_egg.png"},{bytes:7349,md5:"ad436de6d962c43236adecd0fe5b743c",name:"icon_tip.png"},{bytes:13823,md5:"008c42fc0503e0a50ea6c0d85d98cc73",name:"leo.png"},{bytes:12734,md5:"4995f8e2911107624bdc80bc09d2295e",name:"lincoln.png"},{bytes:13723,md5:"c106c9d3a99e939b62dc7bd8971a0356",name:"lynn.png"},{bytes:12345,md5:"146dfb37ef59cf12a7783e8c68af695b",name:"mike.png"},{bytes:10507,md5:"119ccde3223c85b347212cf03fc82015",name:"patrick.png"},{bytes:13831,md5:"8f04bed59c142f57219e1cc9575f05b1",
name:"pink_ranger.png"},{bytes:96667,md5:"91bfe5e576e308af729bdf19b5b90b86",name:"popup.png"},{bytes:12910,md5:"96e119009274237174c1768b2e7076cc",name:"raph.png"},{bytes:14299,md5:"69f5ed93a95cec32e7f45199e9e697c2",name:"red_ranger.png"},{bytes:14705,md5:"6a7b3a8fb5170c8ebfd37123ce936ee9",name:"spongebob.png"},{bytes:16206,md5:"7c138110f10bf37047841e9df7474e17",name:"team_hb.png"},{bytes:16489,md5:"3b48456aa36c25a35b7544f388f75698",name:"team_hd.png"},{bytes:12018,md5:"bef03a7c5c7fd20f372961bc16f1cb59",
name:"team_loud.png"},{bytes:19419,md5:"09949c2ee7cc9585523afc5b3cd35c8f",name:"team_pr.png"},{bytes:15589,md5:"84a67825b8abd91e5803b0fbf8fe48ae",name:"team_sb.png"},{bytes:13147,md5:"d5db04510f64123718aca490263585fd",name:"team_tmnt_1.png"},{bytes:18246,md5:"28126afd7b7548462c8b84f3eb7b2b8b",name:"team_tmnt_2.png"},{bytes:4581,md5:"7a5f818db341161a9466ecf2c9fb79ce",name:"toaster.png"}],ai:[{bytes:211,md5:"3e9efe2be9e374c3e5f83c23c59d381b",name:"basket_ai.json"},{bytes:554,md5:"e807ab0c9dab571d3bb9af29bcd07dce",
name:"behaviors_structure.json"},{bytes:1019,md5:"e58517877ea46b023af1bc06aa77b7c1",name:"defense_ai.json"},{bytes:1155,md5:"b16d4b1995d0bdd77c11fb8766f25250",name:"offense_ai.json"}],ui_win:[{bytes:55076,md5:"c3d6727bd47c6549ee676f2e63459ece",name:"avatar_captain_danger.png"},{bytes:63401,md5:"5d7082b7a8738abab41bd313f64a556e",name:"avatar_donnie.png"},{bytes:50705,md5:"7ebbcefb0bf81f69776ca83c507d0b56",name:"avatar_fee.png"},{bytes:33258,md5:"fc2008cf3837fa82d48c58388989d210",name:"avatar_foo.png"},
{bytes:49492,md5:"1adc4ed24e7b0cc5774983f1b63f64db",name:"avatar_henry.png"},{bytes:59449,md5:"03bbcff455da7542325135161e0ec36c",name:"avatar_leo.png"},{bytes:31754,md5:"95df14f4048208c0a8120cfbafcc4aa0",name:"avatar_lincoln - Copy.png"},{bytes:45155,md5:"b02ec2141cc74809682f2c71c085a121",name:"avatar_lincoln_b.png"},{bytes:37078,md5:"fce7457104d7bf5ac4759f28fe795708",name:"avatar_lynn.png"},{bytes:53852,md5:"71761a5a837c143aa3ba74bb71c58f92",name:"avatar_mikey.png"},{bytes:40368,md5:"e4ebdbba284014f067a6f25c4abbe6ab",
name:"avatar_patrick.png"},{bytes:59609,md5:"7b4d29c13a569e2f06845668202b9b75",name:"avatar_pink_ranger.png"},{bytes:58860,md5:"0e6447f52a6d528992e42086e4b30c9a",name:"avatar_pink_ranger_b.png"},{bytes:57919,md5:"293e241dcf31561d019a70112368c02e",name:"avatar_raph.png"},{bytes:59356,md5:"c48379367440ced105d02c93ceae2b82",name:"avatar_red_ranger.png"},{bytes:58647,md5:"7e9d5edd7d6ee8c9b084b9cf88c1b46e",name:"avatar_red_ranger_b.png"},{bytes:43138,md5:"26ba5b2478dc41d8f47a09a405924ef2",name:"avatar_spongebob.png"},
{bytes:250849,md5:"72ff1ff67d31827aef4e8add1551ca05",name:"bg.jpg"},{bytes:30453,md5:"f6ca19a5d9b2d356946bb83b77418751",name:"loser_bar.png"},{bytes:27015,md5:"6508fff7fa5b05905f7c248bf0c83018",name:"winner_bar.png"}],ui_hud:[{bytes:21434,md5:"28f6bde718fadac30460ef651367992d",name:"ball.png"},{bytes:21197,md5:"7b664355317f3049427844364d18f18d",name:"ball_left.png"},{bytes:1427,md5:"81a49e9f033d482943546c4c4b349cd6",name:"ball_lines.png"},{bytes:8915,md5:"f11399f075170594293177c328a13624",name:"ball_lines_back.png"},
{bytes:16793,md5:"1e23119ade916e34ff40b6309c81b19f",name:"ball_right.png"},{bytes:10054,md5:"33ba985bc75f1f19c9435d7b7b85ba75",name:"bg1.png"},{bytes:42077,md5:"071ed91c46995ca2726f464085a48c5c",name:"bg2.png"},{bytes:16347,md5:"5d1fb929b155f05a9a541d2359eff256",name:"btn_action.png"},{bytes:22259,md5:"9e322e1cd6ff9884d163c696f79102fd",name:"btn_dunk.png"},{bytes:15183,md5:"f2af4272571f7739832323d11488f606",name:"btn_jump.png"},{bytes:19012,md5:"ead403763e29204094a77a3ede8b791a",name:"btn_pause.png"},
{bytes:40088,md5:"9cf0bd3342cf54f4f98ba52f2b02629d",name:"camera.png"},{bytes:15098,md5:"8d5d2bb0b9c3c81e327ee1a65c436ed6",name:"charge_bar.png"},{bytes:9255,md5:"c0369cc52b5b5fcbd0fccbada8a6d9db",name:"charge_bg.png"},{bytes:1152,md5:"5aff2a4e83cccbd2a05d8185e2759c17",name:"charge_indicator.png"},{bytes:25548,md5:"1f639e903e6cf5a86d22afd534a19e36",name:"impact.png"},{bytes:5471,md5:"6a39339e004b24aedf46389f309ac7dc",name:"mega.png"},{bytes:1392,md5:"dabc81a4b53501f13cb5abfd774a9c41",name:"particle.pex"},
{bytes:42007,md5:"0ee1128dfe44b0176b53862badd05f76",name:"pass_n_play_1.png"},{bytes:47290,md5:"345adeb618bca7562245c5be3ca2d918",name:"pass_n_play_2.png"},{bytes:5874,md5:"851f2b7aeb5b23307085b1d8925e5c7a",name:"prog_bar.png"},{bytes:3555,md5:"5ba998b73809715648482205ad150c2e",name:"prog_bar_bg.png"},{bytes:1009,md5:"a6200f82da21fe61c59e3a4d19372b3f",name:"slider.png"},{bytes:12108,md5:"00e5bb458f984a04e20fcfa214801204",name:"slider_handle.png"},{bytes:889,md5:"b4eec6dcb6c770011dd7fe67c54aea4f",
name:"star_black.png"},{bytes:1300,md5:"ee71d156738e46b4cb78f00707e9375c",name:"star_white.png"}],ui_htp:[{bytes:6394,md5:"f8e81ad5301c6dfbfa320ab4d80a45c9",name:"arrow.png"},{bytes:268951,md5:"4108217d82c2d24c4d3d7cf49fd95824",name:"bg.jpg"}],ui_end:[{bytes:251282,md5:"c4c7986df2d6da574d1709564d88232b",name:"bg.jpg"},{bytes:8195,md5:"b7d44ad0c0fae0b8f519faacad94e371",name:"blackbar.png"},{bytes:74775,md5:"19077b4a3636b7dd414415e4a12d2e42",name:"captain_danger.png"},{bytes:75788,md5:"637470b3dd411045150524007e97f33c",
name:"donnie.png"},{bytes:59705,md5:"28617084c216cd838f7516ec736bc3c2",name:"fee.png"},{bytes:51921,md5:"b6b4f6112c5a87e4add6c4987245a481",name:"foo.png"},{bytes:62513,md5:"cf46063ca637d78092438c124ac4dd1d",name:"henry.png"},{bytes:74964,md5:"ce9b54f02c47f03715e757f8be10df3a",name:"leo.png"},{bytes:42087,md5:"c907d669ced7d298e296f809811848bf",name:"lincoln.png"},{bytes:41770,md5:"b8a065881ae035e586c3da336532bae7",name:"lincoln_b.png"},{bytes:50434,md5:"8654982aabae47e58bcdb1238afbb9ff",name:"lynn.png"},
{bytes:58450,md5:"155d2d1a5c442788d20552837981257b",name:"mike.png"},{bytes:48050,md5:"8b3dc3717d8a85660776882e4d90a1f3",name:"patrick.png"},{bytes:62406,md5:"c0bd378a60b0ff521ec867da4b254b3a",name:"pink_ranger.png"},{bytes:62229,md5:"e0dedae96a8168bfa836c3b949a8bbd4",name:"pink_ranger_b.png"},{bytes:71087,md5:"962ac6f1eb05f83f74cdfbd1fb56874e",name:"raph.png"},{bytes:60921,md5:"25ea08f211027b0d0d1dc5f526f76575",name:"red_ranger.png"},{bytes:60649,md5:"0f0f6cc97edbda7e72b75db3cc0aee8f",name:"red_ranger_b.png"},
{bytes:49464,md5:"00a97e3a49e517ae82708c3aabc3feef",name:"spongebob.png"},{bytes:58219,md5:"3acb8044d0cd2c22ee3cf0e0b193a8e5",name:"trophy.png"}],particles_fx:[{bytes:1516,md5:"12feb6926567f4888fc15866bb2d15da",name:"cloud.pex"},{bytes:1961,md5:"c8c138358b1c12021596b00702ed107e",name:"cloud01.png"},{bytes:1555,md5:"7d14e15435d9e57d1ae17a2b2bacd289",name:"cloud02.png"},{bytes:1433,md5:"2e08276e6faedd822d5284a57d691cb4",name:"dunk.pex"},{bytes:2036,md5:"6b1bb1a1b80152c6f370eb1c898a114d",name:"dunk01.png"},
{bytes:1841,md5:"5d7a9fdb2fcaac2eae3c1f30dfac0526",name:"dunk02.png"},{bytes:1839,md5:"fac16638906e10886aadaaf8c4b4a665",name:"dunk03.png"},{bytes:1368,md5:"3b60d96625e6982d9e1d9c53bb4cf879",name:"shoot.pex"},{bytes:1835,md5:"ad0bf3df210e77e1c75c85115ef9d680",name:"shoot.png"},{bytes:1436,md5:"da7ad2dd3c93a284e3f27b7a621ea2de",name:"speed.pex"},{bytes:4117,md5:"ea789dd199953ba6daccc1f531a35567",name:"speed01.png"},{bytes:3389,md5:"6240bc4c47a5909c7d9a759e18026492",name:"speed02.png"},{bytes:3622,
md5:"be8980bca68efbaac09bf286930e1331",name:"speed03.png"}],ui_mode:[{bytes:259094,md5:"05a9dd1d30e368b2978798214c3979c3",name:"bg.jpg"},{bytes:85319,md5:"79368dcedd574413722601e6165f5793",name:"btn_championship.png"},{bytes:63420,md5:"47c8830b16422880b45ad0fd0fca9801",name:"btn_hall_of_fame.png"},{bytes:78749,md5:"23cf5845bccf96f07c8f1e58d083031f",name:"btn_pass_n_play.png"},{bytes:78805,md5:"0a999a77b2e9e46ae655fb87c8441d43",name:"btn_quick_play.png"},{bytes:9132,md5:"49b24b1665bfdde507fe15f43cb33d8d",
name:"championship.png"},{bytes:9662,md5:"d2476073035ac2c82f36e93475bd73f8",name:"hall_of_fame.png"},{bytes:8438,md5:"810db320fa30ce106397150d0a958e8b",name:"pass_n_play.png"},{bytes:9409,md5:"f72a57d2e5603e5e4e237160ab23b219",name:"quick_play.png"}],team_loud:[{bytes:4697,md5:"8c4ee3f0692798a2c01669aa7f90f355",name:"field_logo.png"},{bytes:34290,md5:"e3553b39c323fb2a4f6d5080bb0c8ce1",name:"lincoln/lincoln0.json"},{bytes:688796,md5:"b349ec7692bc4f24f16ef3e643cb0ccf",name:"lincoln/lincoln0.png"},{bytes:932,
md5:"515d47f78e8788fc8a3df61978007c1c",name:"lincoln/lincoln1.json"},{bytes:11321,md5:"20310c1b4777f642b9919f4431f73b22",name:"lincoln/lincoln1.png"},{bytes:2759,md5:"ad03aa99589083fbf0544fc7185ca787",name:"lincoln_flump/atlas0.png"},{bytes:75904,md5:"a6c2fcdff886ba3e33b6bd2629a9284d",name:"lincoln_flump/library.json"},{bytes:70702,md5:"b5a9590d4df6fd2c2de9a6dc7bbb72ab",name:"lincoln_hair/lincoln_hair0.json"},{bytes:32727,md5:"9f5abb9ba3c9f3e62c5c88ff92d4f635",name:"lincoln_hair/lincoln_hair0.png"},
{bytes:20527,md5:"94722f3f980b25a34be9d371ab2b8f70",name:"lynn/lynn0.json"},{bytes:500158,md5:"eb3a85d8acdbcf4ca122bc0312fbf0b3",name:"lynn/lynn0.png"},{bytes:16310,md5:"90bbc38bf96843f1c11781e571a55038",name:"lynn/lynn1.json"},{bytes:481891,md5:"3c609e9f7b55041becbafff1f8e942ec",name:"lynn/lynn1.png"},{bytes:2768,md5:"e0a088f5682232deb0a1140a40db5b27",name:"lynn_flump/atlas0.png"},{bytes:247,md5:"dac94bcd9d69bd04e1ec8891ea3f401c",name:"lynn_flump/atlas1.png"},{bytes:137205,md5:"148b9db4e6bef317db1ab5f7a081d091",
name:"lynn_flump/library.json"}],sound_mobile_slow:[{bytes:201136,md5:"5089ed562796a482dfd872e298d7b411",name:"gameplay.mp3"},{bytes:234547,md5:"9b51b54d851a0cc2d4bcb7b794c31a45",name:"gameplay.ogg"},{bytes:110447,md5:"d5b5504e6a12f0811c2b474ece8b4170",name:"menu.mp3"},{bytes:133833,md5:"13783ce1d003a3caccdaeb5038cfac41",name:"menu.ogg"}],sound_mobile:[{bytes:2828,md5:"8da54084ad780ddce9d6504aae1a99ae",name:"ball_lost.mp3"},{bytes:5979,md5:"29a9a6ba9da12953d5621d22157387c8",name:"ball_lost.ogg"},
{bytes:11304,md5:"36c5693b5a4230c59f284eac6c56548d",name:"boo_1.mp3"},{bytes:15381,md5:"00e5a84eb8d77120b0f7cfdd3e6e3fe3",name:"boo_1.ogg"},{bytes:3712,md5:"15aed4875ff435df00cc60c5331decba",name:"bounce_1.mp3"},{bytes:6736,md5:"43d0d8ab356868a9ffb781c45b0ed3fb",name:"bounce_1.ogg"},{bytes:3192,md5:"b0cc7f850ebd5341e89d48f8cec5d170",name:"bounce_2.mp3"},{bytes:6139,md5:"6f670f0d822239dcc46297720bea0f4a",name:"bounce_2.ogg"},{bytes:4052,md5:"a07b65d1cc246a8b6f4cf6866a9d339d",name:"bounce_slime.mp3"},
{bytes:6845,md5:"4a84ed4c26836f47c7d87571b9042611",name:"bounce_slime.ogg"},{bytes:11306,md5:"e753dcd6b2ded814150fca37f144ffa2",name:"captain_hit.mp3"},{bytes:15887,md5:"de6531e0d53c9a8f2be2645ae653066d",name:"captain_hit.ogg"},{bytes:12319,md5:"8bba6530210972a69d7a4b57765f05f9",name:"cheer_1.mp3"},{bytes:16716,md5:"3be78bc3991546054acae956a12bee30",name:"cheer_1.ogg"},{bytes:1763,md5:"1ef05df03cd62825f5ecb39f59589e83",name:"click.mp3"},{bytes:4393,md5:"66fc9073f29dfccef6226bb33b2501b2",name:"click.ogg"},
{bytes:12577,md5:"6bc661768b3d2be9f3fc8efa92b479ee",name:"crowd_2.mp3"},{bytes:17259,md5:"249f570dcb98bdb6a9de6630d488ae14",name:"crowd_2.ogg"},{bytes:5923,md5:"51a2a0d7e647aedb44a0fd6f37621930",name:"donnie_special.mp3"},{bytes:9615,md5:"8921f509c4f8fa1bf46b68bbf623d6fd",name:"donnie_special.ogg"},{bytes:8418,md5:"ba52dfc52ca772963fa4c97ff75df65d",name:"donnie_special_in.mp3"},{bytes:12251,md5:"8bcafe6b733c3a80178f74a5337e60f8",name:"donnie_special_in.ogg"},{bytes:3636,md5:"a8b8770ada5363b8bc026d47543471e5",
name:"dunk.mp3"},{bytes:6215,md5:"2d9814fd862b9b8385d2330960570fb1",name:"dunk.ogg"},{bytes:12191,md5:"6c77a247020867c6874bce4c276e97ce",name:"dunk_breaker.mp3"},{bytes:15858,md5:"f969f5dd847e9c17740b3e77b15a6141",name:"dunk_breaker.ogg"},{bytes:3946,md5:"57f4d0453db451f27feb813418f06745",name:"dunk_miss.mp3"},{bytes:10614,md5:"6b260c45a0920256ab729102ec9fc117",name:"dunk_miss.ogg"},{bytes:3452,md5:"4e7a928c7a90c3928c43c4426e4b27fe",name:"dunk_slime.mp3"},{bytes:7481,md5:"0cae0f6ccee425292d7b96383bea6dd4",
name:"dunk_slime.ogg"},{bytes:6574,md5:"1576b79b418cab67d391d2bd9721e8d3",name:"dunkality.mp3"},{bytes:10224,md5:"c90291f054f4885cf8f8d84cf8d90db4",name:"dunkality.ogg"},{bytes:3192,md5:"ead91a4d225402c0ef054f95e02050a9",name:"easter_egg.mp3"},{bytes:6340,md5:"168f633e2b967ff55a58be8540e147f5",name:"easter_egg.ogg"},{bytes:16606,md5:"fbc465c992077f08094a5c957ea7ad19",name:"fail.mp3"},{bytes:19165,md5:"786871cf72192bafe26a12b02a48cab5",name:"fail.ogg"},{bytes:3818,md5:"7ee8c0cc75e2d2acc47adcd5a48a5128",
name:"fee_special.mp3"},{bytes:6991,md5:"9f4050841a37820253f3fd6b4bdec80c",name:"fee_special.ogg"},{bytes:3478,md5:"ec9335d09b0a09e8d7fad792e56221ba",name:"foo_special.mp3"},{bytes:6439,md5:"0012e434ef15024c4658b75424992cf4",name:"foo_special.ogg"},{bytes:2411,md5:"e9e18cc5177143c91cd2408db44653a7",name:"foo_special_pre.mp3"},{bytes:6059,md5:"cbf00cae90038810154baef75dd812fc",name:"foo_special_pre.ogg"},{bytes:201136,md5:"5089ed562796a482dfd872e298d7b411",name:"gameplay.mp3"},{bytes:234547,md5:"208732a18b2b32bc79bf6ed3943dfad1",
name:"gameplay.ogg"},{bytes:11876,md5:"1a5c9999cb0fa0aec91784653b5db2c2",name:"glass_break.mp3"},{bytes:15965,md5:"7e7555a7b31e6590a595a0aff0c3c1f4",name:"glass_break.ogg"},{bytes:2439,md5:"6243c08846ea2a469c837c389e512594",name:"henry_snap.mp3"},{bytes:5551,md5:"7de55de33b9321a86dbaecef6b2f3940",name:"henry_snap.ogg"},{bytes:1242,md5:"32150427d749053ab471768f0dc130f8",name:"hit_1.mp3"},{bytes:4501,md5:"808460954809cf078b0d24a5f604eca6",name:"hit_1.ogg"},{bytes:1502,md5:"6eb826bb233618114d81eb1f3894bc6d",
name:"hit_2.mp3"},{bytes:4821,md5:"85e3d08717add509492ec566118e5a82",name:"hit_2.ogg"},{bytes:2724,md5:"47952196f714596836fe8195ee9febbe",name:"horse_good.mp3"},{bytes:5919,md5:"a54f5810a6929b6138db261b9a871826",name:"horse_good.ogg"},{bytes:4701,md5:"25900fd5e63640b5d9238be07e15141d",name:"horse_wrong.mp3"},{bytes:7652,md5:"850662b18b6bb3d1a31166cb30e677a5",name:"horse_wrong.ogg"},{bytes:2177,md5:"979ef5068c26cdba9f4f592154f95d86",name:"hurt_female.mp3"},{bytes:4975,md5:"10fc69f913200e030e0b19f50eb21dc0",
name:"hurt_female.ogg"},{bytes:1996,md5:"33828f38646a5d26ce4d810d546c274d",name:"hurt_male.mp3"},{bytes:5037,md5:"72523c7c67188662c4d752873f52ffa7",name:"hurt_male.ogg"},{bytes:1710,md5:"224e1e90da1ebe67ca28f69f0ca719fd",name:"jump.mp3"},{bytes:4805,md5:"a23bfb506b982358c4f22181eb15de00",name:"jump.ogg"},{bytes:5377,md5:"fb9c59ac1d5af67a0f344cfd291c201d",name:"leo_special_pre.mp3"},{bytes:8910,md5:"4665be4c4858209f682d63aef4331dea",name:"leo_special_pre.ogg"},{bytes:12294,md5:"bbc27493422861e0b07c55fad18c5cb6",
name:"mega_dunk.mp3"},{bytes:16773,md5:"9541a1445916c3bbe91d64824086d31b",name:"mega_dunk.ogg"},{bytes:10861,md5:"c1e2cca2ef194a6e309ae634e7b2555c",name:"mega_start.mp3"},{bytes:14561,md5:"2172140b1835e9480686f2993e4c52f9",name:"mega_start.ogg"},{bytes:110447,md5:"d5b5504e6a12f0811c2b474ece8b4170",name:"menu.mp3"},{bytes:133833,md5:"92428b9483bf2d9f4e6aca24fddea4b5",name:"menu.ogg"},{bytes:1658,md5:"54b134f70758ad7b20e6b2686b7f1708",name:"mike_spinning_arms.mp3"},{bytes:4767,md5:"278b3650ed046cd863dd203b53ff1569",
name:"mike_spinning_arms.ogg"},{bytes:2543,md5:"aaa91fd9d3cb77abde287b34b4b47d92",name:"ninja_jump.mp3"},{bytes:5897,md5:"37549736c1349d64de4b8b5f415c5240",name:"ninja_jump.ogg"},{bytes:7612,md5:"435189fa872d3aff66b3d1b68549e554",name:"ooh_1.mp3"},{bytes:11360,md5:"4c69eb53def10a2eee80b5a695d9ea44",name:"ooh_1.ogg"},{bytes:2022,md5:"859a56bea1ed5da4ecbedfb71668a82c",name:"patrick_bite.mp3"},{bytes:5952,md5:"3efbb71534117ef71dcec61c1727c195",name:"patrick_bite.ogg"},{bytes:1164,md5:"5287aa041264250485b06fd3da088307",
name:"patrick_pop.mp3"},{bytes:4098,md5:"f925104754692d2d358b38afb7fbd75f",name:"patrick_pop.ogg"},{bytes:3291,md5:"45291b056deda390adbcf9b333d68aad",name:"pickup.mp3"},{bytes:5766,md5:"43e46ad98933fea9b7d712b0875113ec",name:"pickup.ogg"},{bytes:6991,md5:"7a0739ec52695b081cadeedd4dd4b6c5",name:"pickup_aim.mp3"},{bytes:10532,md5:"3686f98738b409f4add66a48b84c6b9e",name:"pickup_aim.ogg"},{bytes:3264,md5:"ebbc43dd284ab4dda6add8d6c8bb7cfd",name:"pickup_dunk.mp3"},{bytes:5764,md5:"1bf948b646d035763219d07f2e55cc6d",
name:"pickup_dunk.ogg"},{bytes:4078,md5:"8d1363be8135417708949a796b576d4d",name:"pickup_fast.mp3"},{bytes:7055,md5:"23374c4d9085b61624ffa70495c5c1d9",name:"pickup_fast.ogg"},{bytes:4492,md5:"f96c5ae1ba99ca15162f27f160ce5e94",name:"pickup_jump.mp3"},{bytes:8294,md5:"4f7e6403446ec7873efa372d04ae7ccf",name:"pickup_jump.ogg"},{bytes:2828,md5:"0d3b66988175964dada303c8a04b3e06",name:"pickup_spawn.mp3"},{bytes:6011,md5:"8627adac856e43ade75c5bfc05c89d5b",name:"pickup_spawn.ogg"},{bytes:9148,md5:"315cacdc4cbda1af92ae71910ac03781",
name:"pink_r_throw.mp3"},{bytes:12958,md5:"15ff99df175ff363b8095df6f411c497",name:"pink_r_throw.ogg"},{bytes:2747,md5:"56b2a77ea14ce502d1d112f5aee479ef",name:"posterized.mp3"},{bytes:5444,md5:"42d07a084199483336d41f0b10055977",name:"posterized.ogg"},{bytes:9067,md5:"facb877a6e83cc9b2fb7b5222e4f9aae",name:"raph_special_pre.mp3"},{bytes:13921,md5:"163e82617cf79c9cce8d205c2796d8e3",name:"raph_special_pre.ogg"},{bytes:8499,md5:"5e2bf5cbcbc901922b1dafa0e3354ad7",name:"red_r_explosion.mp3"},{bytes:12524,
md5:"8ed4d46e20d9794201a3a78c07663405",name:"red_r_explosion.ogg"},{bytes:20535,md5:"e748207d280ee88becad19f07ac10e3e",name:"red_r_water.mp3"},{bytes:27752,md5:"5c734bcfafc193b3b3c05fb444f71973",name:"red_r_water.ogg"},{bytes:4415,md5:"ea4628b19cb7931ea9f60882fb296934",name:"ref_whistle_1.mp3"},{bytes:6408,md5:"9e5355435710a7b961336e2f4c8c4003",name:"ref_whistle_1.ogg"},{bytes:8418,md5:"ba52dfc52ca772963fa4c97ff75df65d",name:"rocket.mp3"},{bytes:12251,md5:"2b084040ac1c599f204b936553afc1a9",name:"rocket.ogg"},
{bytes:2282,md5:"55bb07d62596e2077be70885485b2c41",name:"shoot.mp3"},{bytes:5280,md5:"00aef9d00fb89aee1f0353997fdc84e4",name:"shoot.ogg"},{bytes:14453,md5:"8665dc3a811ae8a4bf9e43df5859b55c",name:"singer_menu.mp3"},{bytes:15803,md5:"48b692eeef2dbec4c7ae58f01a65400b",name:"singer_menu.ogg"},{bytes:6627,md5:"6406e19f3d469c59acefb81713d8a8db",name:"smoke_puff.mp3"},{bytes:9689,md5:"6672767f6f3c3d165cf5b2854b81a7f8",name:"smoke_puff.ogg"},{bytes:3322,md5:"a63f951286354bb5b9b546e4f0135f65",name:"smoke_puff2.mp3"},
{bytes:0,md5:"7c3560a0ef91db57dc8d180067e9da59",name:"smoke_puff2.ogg"},{bytes:2360,md5:"3adf950dc8228ab4ad26e36cb163c7f0",name:"sneaker_1.mp3"},{bytes:7056,md5:"71f6fb191d4d9132d168ebe09e9fd713",name:"sneaker_1.ogg"},{bytes:2543,md5:"8f06693ffe783da6565115a5efb8d463",name:"sneaker_2.mp3"},{bytes:6985,md5:"d8eec2ae5c59f6b185473afd70fdbcda",name:"sneaker_2.ogg"},{bytes:3739,md5:"421718845e37149f3aeceb482335d9cf",name:"sneaker_3.mp3"},{bytes:9827,md5:"e00fd43ee78f9c112c89147e5d47290e",name:"sneaker_3.ogg"},
{bytes:3557,md5:"e37009cc09d47e9d60558c7fadcd380a",name:"spongebob_special.mp3"},{bytes:5746,md5:"4993b8af6bf712974116e40466f61ed6",name:"spongebob_special.ogg"},{bytes:6002,md5:"58c826427f9d414e2a049fcd20fcfaf2",name:"spongebob_special_in.mp3"},{bytes:9025,md5:"0ebf09bc37b56446ff18a694ded5fe1e",name:"spongebob_special_in.ogg"},{bytes:5249,md5:"5e42c1198d0c128c2e8381c1d6327a04",name:"super_ready.mp3"},{bytes:7932,md5:"89f66eeee4e1469a204a2b587df0fca7",name:"super_ready.ogg"},{bytes:1658,md5:"54b134f70758ad7b20e6b2686b7f1708",
name:"swoosh.mp3"},{bytes:4767,md5:"5c9714529e72572c44e4338b662c924a",name:"swoosh.ogg"},{bytes:1867,md5:"12216faa986526848e1405d4501314db",name:"throw_stars.mp3"},{bytes:6037,md5:"ad099c1f0a3342d79c04a989f01c9a98",name:"throw_stars.ogg"},{bytes:16086,md5:"b10f0de81b6b05de731a03d4f4cd1efb",name:"win.mp3"},{bytes:17882,md5:"64a2625e934298dbf0614f095a6c34d7",name:"win.ogg"}],ui_pause:[{bytes:242102,md5:"dd33443f6e61b6a1f0e3040ca0e722a5",name:"bg.jpg"},{bytes:8078,md5:"a87754377423333176a3546e7fb2f5db",
name:"btn_help.png"}],posters_preview:[{bytes:109188,md5:"d9a751281ecddb197c72843e7e4a1b33",name:"team_hb.jpg"},{bytes:106172,md5:"b4d14c2c2649d5c9559fdcb5d5caafc4",name:"team_hd.jpg"},{bytes:111293,md5:"8787b0f9dffc198c7781aa9322f135c6",name:"team_loud.jpg"},{bytes:109387,md5:"1ab0bcc8b1d448c959cd48e6f6ba627b",name:"team_pr.jpg"},{bytes:114216,md5:"420773b1ed6ca8df8ac3ed352e05aa5c",name:"team_sb.jpg"},{bytes:119322,md5:"0f333a72c888527be9ec00b651526172",name:"team_tmnt_1.jpg"},{bytes:113404,md5:"538839c6757a7c2e276a599df83381d2",
name:"team_tmnt_2.jpg"}],htp_mobile:[{bytes:38796,md5:"ccfda7c32f721983fe2a8e86904bc8a3",name:"htp_1.png"},{bytes:46668,md5:"c2d853905170c90c671e1453cdd7888d",name:"htp_2.png"},{bytes:82439,md5:"eb6ec2e6d1794309fab271c92c124f71",name:"htp_3.png"},{bytes:98461,md5:"27fe9d9f11173b24e2c007a4b0b51658",name:"htp_4.png"},{bytes:140612,md5:"13cf985653405a6440f6e23482798a38",name:"htp_5.png"},{bytes:79730,md5:"afc2985b89146ab722bcb51525e6c16f",name:"htp_6.png"},{bytes:113328,md5:"c03107d8788bd6299bcee2980d0e4061",
name:"htp_7.png"},{bytes:96791,md5:"47cb8f3fd4c38debf0020306186edca6",name:"htp_8.png"}],sprites_env1_night_low:[{bytes:13825,md5:"d57189d6474b504fe03886c3bc801fad",name:"bg.png"},{bytes:44982,md5:"4889c32cc9d382f6b7d87e12259053bd",name:"building_left.png"},{bytes:41208,md5:"8da1c53eec1ffbc7e91fd84c3ec1f7ec",name:"building_right.png"},{bytes:13029,md5:"8cb2f2b9d51ffb71cfb3e2eec1f4bb0d",name:"city_far.png"},{bytes:71783,md5:"798e1b12fddbbca23e9673d7943b6512",name:"city_l.png"},{bytes:76859,md5:"4aa24f1a39cfc8bbd3b1296aecf58ad3",
name:"city_r.png"},{bytes:20527,md5:"9f934becb20aba8e2fa0cf982db22fae",name:"crowd_l.png"},{bytes:18869,md5:"bf8746ba16dc4a2f16c8b4fd6c77c353",name:"crowd_r.png"},{bytes:14252,md5:"04fa6934e858fd30d2a430a9f59d9b2d",name:"ground_r.jpg"},{bytes:24986,md5:"0cc896fa66cd8a04ff585486b1c4c933",name:"ol_l.png"},{bytes:22307,md5:"177754726175cc10a50ee6349a8a4027",name:"ol_r.png"},{bytes:10071,md5:"7abb7b69adbd15bb77a248d180ea2a0f",name:"tree1.png"}],team_tmnt_2:[{bytes:6729,md5:"8800b02f9f192764459f0b8c421d7c53",
name:"donnie/donnie0.json"},{bytes:408576,md5:"2668581baf07869fd2bd6325c300fb43",name:"donnie/donnie0.png"},{bytes:12273,md5:"5465e05ad5595eb87886713d26c951b8",name:"donnie/donnie1.json"},{bytes:579030,md5:"5dd0313ae2c6848a841f2629561d448c",name:"donnie/donnie1.png"},{bytes:16669,md5:"43ad3a6c5c94a5e50f79a6116532eb7c",name:"donnie/donnie2.json"},{bytes:754256,md5:"3d17c822786cbba8533cb1e35cec2fe0",name:"donnie/donnie2.png"},{bytes:6253,md5:"bef35b84e6332b670c73698ed9be0a60",name:"donnie/donnie3.json"},
{bytes:191145,md5:"c192c6d7748b8d3e5d62ae6d31f8ba35",name:"donnie/donnie3.png"},{bytes:4660,md5:"595449eb410a83b149aef9a4c901c669",name:"donnie_flump/atlas0.png"},{bytes:94038,md5:"850a9bb52608714a3c12026a24585e8d",name:"donnie_flump/library.json"},{bytes:4979,md5:"5020feba623d3a7ff3c44a45eff32a16",name:"field_logo.png"},{bytes:19066,md5:"09f3b73e4a3678cb7dac4d4d32739864",name:"mike/mike0.json"},{bytes:663920,md5:"877176946d9ee5900ec34601dca20d77",name:"mike/mike0.png"},{bytes:16384,md5:"81e5bb4426df1f597a0c4dc5afa30e25",
name:"mike/mike1.json"},{bytes:558034,md5:"2281a37779889763d0e34e91aac02551",name:"mike/mike1.png"},{bytes:4097,md5:"2eec261769c3b62dc263cbda7a657c02",name:"mike_flump/atlas0.png"},{bytes:93833,md5:"92aaf84cf249cec573bc257874aac8f0",name:"mike_flump/library.json"},{bytes:1805,md5:"d305697c90f0aedb4b472a93014dabbd",name:"mike_fx/mike_fx.json"},{bytes:58704,md5:"ff66a44cf3b5deb8d201852b50545cc4",name:"mike_fx/mike_fx.png"}],team_tmnt_1:[{bytes:6277,md5:"a7769db77f39cfa011162dd94f0c85c2",name:"field_logo.png"},
{bytes:6269,md5:"270dad8dadfc33e83abaf14ff4bc5ca6",name:"leo/leo0.json"},{bytes:325874,md5:"4bda181200abe86083dbbd00b9d64732",name:"leo/leo0.png"},{bytes:16038,md5:"1fb17074c72963fea3fdf19a7ea62f81",name:"leo/leo1.json"},{bytes:701684,md5:"868547efa5cce2b223a26a58d4139f8f",name:"leo/leo1.png"},{bytes:10295,md5:"fb11f43de19d094b51a22f36d92445f7",name:"leo/leo2.json"},{bytes:373317,md5:"1f09c5fd7aaa114d66abc401d3aa776e",name:"leo/leo2.png"},{bytes:3864,md5:"a5f11cd2ce0b261c1ea2e0a513bfe05b",name:"leo_flump/atlas0.png"},
{bytes:67323,md5:"a04becee9399f8f7c2b0bf75e827a117",name:"leo_flump/library.json"},{bytes:12637,md5:"818968af82d9a7f560ef9d9c0508dded",name:"raph/raph0.json"},{bytes:620343,md5:"771fb2f790182aac5975e0a02be3749a",name:"raph/raph0.png"},{bytes:18692,md5:"7a990ee42ad74fbfdd1ede8f1b63ee22",name:"raph/raph1.json"},{bytes:649900,md5:"8c815a87f9da5086ebe5a8441858d9b3",name:"raph/raph1.png"},{bytes:3542,md5:"cfdad49e007db89244005a48daa2a840",name:"raph_flump/atlas0.png"},{bytes:502,md5:"f20d6bfeaec604577087c0aa3cc5877b",
name:"raph_flump/atlas1.png"},{bytes:124519,md5:"e7ff3f701d7e21143355f0a03a77e0d4",name:"raph_flump/library.json"}],ingame_htp_mobile:[{bytes:20442,md5:"bdb48a3ed3eb5e4e2466c1495a75baa2",name:"htp_1.png"},{bytes:24161,md5:"f599e08ccb56833f99356f804cf16a8f",name:"htp_2.png"},{bytes:44150,md5:"36dbb793eb81c17f2c4552eb77e9bc9a",name:"htp_3.png"},{bytes:51114,md5:"066a63be6a3727e68cb0773b5d4aea39",name:"htp_4.png"},{bytes:70555,md5:"526daa9a007a48e3ba1729af96d4068d",name:"htp_5.png"},{bytes:81858,md5:"158655241e3961705df7a3556a768221",
name:"htp_6.png"},{bytes:61676,md5:"16a0f05209fa2c27488a8ecb3563b143",name:"htp_7.png"},{bytes:31399,md5:"df96d9532bf6ebdcc4bd7fe6c0cb972b",name:"htp_8.png"},{bytes:92003,md5:"4f53eca32409eea748a3c93b6c5adfe1",name:"htp_panel.png"}],sprites_env1_night:[{bytes:18790,md5:"1d48e024fbedcb0e7980370e647ff2fd",name:"bg.jpg"},{bytes:206809,md5:"e961d4f5b38639dd0d1210f980ee9ad8",name:"building_left.png"},{bytes:163378,md5:"6646a0182396ad8824edf265d046f1cb",name:"building_right.png"},{bytes:20586,md5:"13167ba2d7cf3347a1d62f3fe0057775",
name:"city_far.png"},{bytes:224318,md5:"1c3b3fba0b8a15d7593ad6dae2c7d43c",name:"city_l.png"},{bytes:239782,md5:"a9bc18da7930a31b52795c5a4a8f4bbe",name:"city_r.png"},{bytes:105857,md5:"1c17c87e47b3186a0020d716c8233c0c",name:"crowd_l.png"},{bytes:94593,md5:"17347f35d4c910fd0986b3dc233afc1e",name:"crowd_r.png"},{bytes:51481,md5:"b4bcff82d8aa164edc559e6082f13151",name:"ground_r.jpg"},{bytes:112708,md5:"f6a83825de0ba58e00b20b2398857e60",name:"ol_l.png"},{bytes:59261,md5:"8c85bff37c2bb17fad95ed3c197a516d",
name:"ol_r.png"},{bytes:30480,md5:"ae69a95dd34e9f1b9fe1a9780799e8d7",name:"tree1.png"}],ui_all_stars:[{bytes:2169,md5:"a33541bdd4a3c2186bdf1c82a12015e4",name:"bar_black.png"},{bytes:29671,md5:"2a4b19a4d7e528d9b0b6b1625a127b8c",name:"bar_orange.png"},{bytes:48580,md5:"8e3edc548e2d88a8d67e18e81befb24b",name:"htp_dunk_challenge.png"},{bytes:59066,md5:"279b10fb4288d4bc32ee7fcd92b809b9",name:"htp_horse.png"},{bytes:44922,md5:"9af0b5798f1193e441fa4a7f9a8a102a",name:"htp_shootout.png"},{bytes:280134,md5:"4f34c5d157bb8f72a0655f10e6d4a9c0",
name:"popup.png"},{bytes:3720,md5:"c167e115d7349e388fbf8e2e5297660d",name:"selected.png"}],ui_preview:[{bytes:1716,md5:"9453368756c3c6891e847af7e1d67d25",name:"ball.png"},{bytes:278452,md5:"48b98ec2b0dbb772bceaefee5f985752",name:"bg.jpg"},{bytes:74775,md5:"19077b4a3636b7dd414415e4a12d2e42",name:"captain_danger.png"},{bytes:75788,md5:"637470b3dd411045150524007e97f33c",name:"donnie.png"},{bytes:16506,md5:"6a9cb14ec9440f6931348a3f387aab99",name:"ellipse.png"},{bytes:59705,md5:"28617084c216cd838f7516ec736bc3c2",
name:"fee.png"},{bytes:51921,md5:"b6b4f6112c5a87e4add6c4987245a481",name:"foo.png"},{bytes:62513,md5:"cf46063ca637d78092438c124ac4dd1d",name:"henry.png"},{bytes:74964,md5:"ce9b54f02c47f03715e757f8be10df3a",name:"leo.png"},{bytes:42087,md5:"c907d669ced7d298e296f809811848bf",name:"lincoln.png"},{bytes:41770,md5:"b8a065881ae035e586c3da336532bae7",name:"lincoln_b.png"},{bytes:50434,md5:"8654982aabae47e58bcdb1238afbb9ff",name:"lynn.png"},{bytes:58450,md5:"155d2d1a5c442788d20552837981257b",name:"mike.png"},
{bytes:48050,md5:"8b3dc3717d8a85660776882e4d90a1f3",name:"patrick.png"},{bytes:62406,md5:"c0bd378a60b0ff521ec867da4b254b3a",name:"pink_ranger.png"},{bytes:62229,md5:"e0dedae96a8168bfa836c3b949a8bbd4",name:"pink_ranger_b.png"},{bytes:71087,md5:"962ac6f1eb05f83f74cdfbd1fb56874e",name:"raph.png"},{bytes:60921,md5:"25ea08f211027b0d0d1dc5f526f76575",name:"red_ranger.png"},{bytes:60649,md5:"0f0f6cc97edbda7e72b75db3cc0aee8f",name:"red_ranger_b.png"},{bytes:49464,md5:"00a97e3a49e517ae82708c3aabc3feef",name:"spongebob.png"}],
team_sb:[{bytes:4954,md5:"78d0a6ef3624a96330f1d2f21750f561",name:"field_logo.png"},{bytes:18714,md5:"662c6ca238ea51f0650e50f4be3fc032",name:"hook1.png"},{bytes:16319,md5:"69b143607e511487a6b6f1b45d8a5591",name:"hook2.png"},{bytes:21773,md5:"e6be73355227c046771f5a71ac902a78",name:"hook3.png"},{bytes:15829,md5:"3dca71eef3663926d58acc00f0e98e81",name:"patrick/patrick0.json"},{bytes:439084,md5:"8ddc71003cee759ebcc2eee3ae4308e7",name:"patrick/patrick0.png"},{bytes:15678,md5:"ed110ed63c8c671355f5c0f4293cc253",
name:"patrick/patrick1.json"},{bytes:363615,md5:"8687835b582a215fc2775e1419cb3d82",name:"patrick/patrick1.png"},{bytes:10958,md5:"0ec1e7e6d6b1da1f7d05d2bfacf7e923",name:"patrick_flump/atlas0.png"},{bytes:893,md5:"8a05fc3cc5895439f1c44f118b75db3b",name:"patrick_flump/atlas1.png"},{bytes:110927,md5:"0962d7d5438ed2c2a03c5ece5cf1cddc",name:"patrick_flump/library.json"},{bytes:28335,md5:"c7820785a5d92ffa8b66efe87f1ad80a",name:"spongebob/spongebob0.json"},{bytes:774162,md5:"0d058104f3a05c66a796730c1ef509cd",
name:"spongebob/spongebob0.png"},{bytes:2563,md5:"75b6bd58359b37913a59630b1180a0ac",name:"spongebob_flump/atlas0.png"},{bytes:326,md5:"f59b9323b60e3e5ad57180f1e9b6e471",name:"spongebob_flump/atlas1.png"},{bytes:356,md5:"1f6730c0f870bb83e0f090303047b016",name:"spongebob_flump/atlas2.png"},{bytes:95437,md5:"fbd6b246e326e196f290f19758754d8a",name:"spongebob_flump/library.json"}],team_pr:[{bytes:5621,md5:"f792cac434e1b04198ff0208b08600af",name:"field_logo.png"},{bytes:13744,md5:"c9df414247461542e6fea187c4156da9",
name:"pink_ranger/pink_ranger0.json"},{bytes:568365,md5:"53384de03eab0f2de83fa8f15a4876f2",name:"pink_ranger/pink_ranger0.png"},{bytes:23847,md5:"bf4950e16392a2aae0b3a41e0cfef7fb",name:"pink_ranger/pink_ranger1.json"},{bytes:812997,md5:"81691b7546d536e087f40fadb4272105",name:"pink_ranger/pink_ranger1.png"},{bytes:734,md5:"0bd51f34ee7b1dd40842ea68be5e00e0",name:"pink_ranger/pink_ranger2.json"},{bytes:16206,md5:"bf7a7cdfd3968c40eb9db9269bb809aa",name:"pink_ranger/pink_ranger2.png"},{bytes:90112,md5:"a45d507d3d5f7c7a6bab6f670df8b3c0",
name:"pink_ranger/Thumbs.db"},{bytes:3314,md5:"9c30ff7b69feeb302e10957171a6139a",name:"pink_ranger_flump/atlas0.png"},{bytes:91420,md5:"066265d696251477aaa872a5b7e7dfaf",name:"pink_ranger_flump/library.json"},{bytes:75127,md5:"1b4cdd787be956e3fadb5fe23ea5f6e7",name:"pink_ranger_sash/pink_ranger_sash0.json"},{bytes:41345,md5:"bda0d94d93e2be14a6baa487d3ee3637",name:"pink_ranger_sash/pink_ranger_sash0.png"},{bytes:4798,md5:"e2c288538f3cf8da192a3c5f3d6f10bd",name:"red_ranger/red_ranger0.json"},{bytes:300754,
md5:"777866a614d8f9502a6b0420f125c2ba",name:"red_ranger/red_ranger0.png"},{bytes:9524,md5:"90c03ac8aed63fabf36cb8979a4c9b9b",name:"red_ranger/red_ranger1.json"},{bytes:439679,md5:"bf7d343dbcf21a3572ec4c31dd7b74c9",name:"red_ranger/red_ranger1.png"},{bytes:18381,md5:"a8c8704b44b8fe8766d80136e786d082",name:"red_ranger/red_ranger2.json"},{bytes:641114,md5:"6d4f648ea87b91759bea3032aa4e4b7f",name:"red_ranger/red_ranger2.png"},{bytes:7291,md5:"90853d3e220c978b58ba9492bad0805c",name:"red_ranger/red_ranger3.json"},
{bytes:176809,md5:"acd99d68dd852cff3c7bf5b7536613a5",name:"red_ranger/red_ranger3.png"},{bytes:4193,md5:"732d3f10f1a4e41ba4d3d68056ba8ce4",name:"red_ranger_flump/atlas0.png"},{bytes:105098,md5:"1b7237aac940c1f4c22b9982909d65f2",name:"red_ranger_flump/library.json"},{bytes:78789,md5:"89bd3227c3049d97791eff70b3360495",name:"red_ranger_sash/red_ranger_sash0.json"},{bytes:69047,md5:"68b8c1f24a33e0dbafb5bd2b053c4c36",name:"red_ranger_sash/red_ranger_sash0.png"}],team_hd:[{bytes:4767,md5:"eb75b889c6d8f507e08910b14b4c2558",
name:"captain_danger/captain_danger0.json"},{bytes:311930,md5:"88b49f059527f21534d507bdca12ae10",name:"captain_danger/captain_danger0.png"},{bytes:8593,md5:"9ea1f54b641ec82ac6d80adeceb390f8",name:"captain_danger/captain_danger1.json"},{bytes:439773,md5:"5f0d57dc5466f8bf20164671d0f45b8f",name:"captain_danger/captain_danger1.png"},{bytes:20641,md5:"3536fdddde0005c953d237421115c77c",name:"captain_danger/captain_danger2.json"},{bytes:692457,md5:"c19b129e1947d56842a23235a303b635",name:"captain_danger/captain_danger2.png"},
{bytes:2523,md5:"b082e010d0e7606dad4224708e617a2d",name:"captain_danger_flump/atlas0.png"},{bytes:159927,md5:"6a5b4584d4b24ddf333887d9b9c42f66",name:"captain_danger_flump/library.json"},{bytes:5686,md5:"3749f5b5c567882f37575de45198b58c",name:"field_logo.png"},{bytes:18776,md5:"6bb1aff186059a81ace1ea1b5453ee88",name:"henry/henry0.json"},{bytes:499921,md5:"a1c1c99b1651cb1e573b3c7fd533371c",name:"henry/henry0.png"},{bytes:22636,md5:"71f73285502fdd7a4fc366a21faf31c5",name:"henry/henry1.json"},{bytes:615784,
md5:"32535348ac46eafba1752e10257360dc",name:"henry/henry1.png"},{bytes:3122,md5:"26db19eacf97185847a76a2bbc7fae86",name:"henry_flump/atlas0.png"},{bytes:92057,md5:"d674ae2a97376454c2b2937c0ec932a0",name:"henry_flump/library.json"}],team_hb:[{bytes:15296,md5:"0ba15c42d448ed16cb6b078b7b785291",name:"fee/fee0.json"},{bytes:518090,md5:"5918d022b78744f8ee98aa2747f748de",name:"fee/fee0.png"},{bytes:16059,md5:"de64688e0b117a074791d06d305ab5a4",name:"fee/fee1.json"},{bytes:461384,md5:"157c48fcd1b7034bad8cb678b7d54a30",
name:"fee/fee1.png"},{bytes:3014,md5:"4cabf820951c22787ba900b200cd2f2b",name:"fee_flump/atlas0.png"},{bytes:54492,md5:"aa71c720b9a344a6aa17b6e610b291fd",name:"fee_flump/library.json"},{bytes:5406,md5:"bcaa75c031eaf42631266eb17b3cbaad",name:"field_logo.png"},{bytes:35944,md5:"efb17028018392d5c5e011bba6148614",name:"foo/foo0.json"},{bytes:714101,md5:"e7d056b2acd3860985c847e3b9a36f90",name:"foo/foo0.png"},{bytes:3101,md5:"8b29344e6601d66159d3b49033de4957",name:"foo_flump/atlas0.png"},{bytes:139497,md5:"d4ad7be90d343de16254c9eb6d6bcd8b",
name:"foo_flump/library.json"}],sprites_pack:[{bytes:1047,md5:"9d1b54491fde0f5787e39af889425b25",name:"arrow_you.png"},{bytes:2556,md5:"c08f6bde2843515afe4aaba74132fe5d",name:"ball.png"},{bytes:3680,md5:"17205106f20e37a06a88ca3b24fce14a",name:"ball_shadow.png"},{bytes:1359,md5:"a948d50dcac2748018314a69640a0d57",name:"ball_white.png"},{bytes:3254,md5:"94096bf8a789046ebadb7c76c029c337",name:"baseball.png"},{bytes:1359,md5:"a948d50dcac2748018314a69640a0d57",name:"baseball_white.png"},{bytes:3641,md5:"839282e807a5cef4dd0d39e6835b0531",
name:"basket/basket0.json"},{bytes:149741,md5:"627e54a1ca78d1484721583511a914d3",name:"basket/basket0.png"},{bytes:31313,md5:"c83436e3272d5b70a149e0f5a4e72c00",name:"basket_zone.png"},{bytes:3992,md5:"fb147b008ca176d48495bf2438da68c4",name:"debug_basket.png"},{bytes:4027,md5:"88a20a7b4ee7dcb66dc02449fef59b6c",name:"ellipse.png"},{bytes:11777,md5:"a1d940f9ddf7ed95f0670e406385bb85",name:"fx/fx.json"},{bytes:433411,md5:"b9819e209e34b2d7d4e45003b34efc1b",name:"fx/fx.png"},{bytes:18860,md5:"675559fd0eb03c3c655c8ab11e58d38a",
name:"pickup_balloon.png"},{bytes:8609,md5:"040aab43c49aac82d481cf7271bc747f",name:"pickups/pickups0.json"},{bytes:269016,md5:"84267dbe9d1b3be1eab900e3ab0d38a1",name:"pickups/pickups0.png"},{bytes:916,md5:"07668ee214280f71795c3b90d64cc222",name:"propeller/propeller0.json"},{bytes:9195,md5:"1ec325e15a4cd4a308bcdaab7086e514",name:"propeller/propeller0.png"},{bytes:8662,md5:"54fb5f5730c72648636669981f99c42c",name:"scoreboard/scoreboard0.json"},{bytes:199128,md5:"98fa0c7793e4d9b83d12e1e33e250234",name:"scoreboard/scoreboard0.png"},
{bytes:2772,md5:"e4498cf6a6f2f52314b9493b6bc0ae6c",name:"slime_ball.png"},{bytes:1473,md5:"ad57fd298053ada3a5f08b9adf1bd6f3",name:"slime_ball_white.png"},{bytes:3641,md5:"d1c59404a90c990a847932fd848f32dc",name:"soccer_ball.png"},{bytes:1359,md5:"a948d50dcac2748018314a69640a0d57",name:"soccer_ball_white.png"}],ui_achievements:[{bytes:255381,md5:"6a62a93ccd7f78f8187e3b4fbb9da04d",name:"bg.jpg"},{bytes:13484,md5:"930ed7055b75fc9ec578af8155a518b9",name:"container.png"},{bytes:237613,md5:"dfec03f2f4ca146e8eead692410807c1",
name:"mask_bottom.png"},{bytes:261732,md5:"b36ef86379f08e2c2097f969a399f144",name:"mask_top.png"},{bytes:5723,md5:"5e785b954789e6e12ada392cc9108e94",name:"medal.png"},{bytes:6653,md5:"67c2ed8c351bb8202bd9df21655275c1",name:"medal_locked.png"}],debug:[{bytes:469,md5:"04498b8ce7ef791030ebd51e6afb4525",name:"debug_example.json"},{bytes:7992,md5:"a2d0330d20f20de8490e83806e1c7871",name:"debug_font.fnt"},{bytes:2280,md5:"46b451cac76fba01343500b3cc486efa",name:"debug_font.png"},{bytes:2197,md5:"37d9558189dd4cbffe736595c840600d",
name:"particles.pex"},{bytes:15509,md5:"c09943d1d4472f0ae6d4ac0e93dcde80",name:"sprite.png"}],sprites_env1:[{bytes:52727,md5:"283f3ba56e0ac1cb50324b7d9090f2e5",name:"bg.jpg"},{bytes:223258,md5:"76df4f9ccfc551ffe61684050461d89e",name:"building_left.png"},{bytes:206978,md5:"e64b55f19a114e7c92f2eb94d6f1d1d4",name:"building_right.png"},{bytes:48948,md5:"092834c29501246f9649a398e6a99002",name:"city_far.png"},{bytes:443088,md5:"9bc9caf02854370459e02de6d917186b",name:"city_l.png"},{bytes:473529,md5:"486b31e8177b61f91bab6b101223e26d",
name:"city_r.png"},{bytes:106326,md5:"b9ad3db5ff1c282deeb80c02aae95dd1",name:"crowd_l.png"},{bytes:96488,md5:"81957515ca216ba6f1d76e079c3d71f0",name:"crowd_r.png"},{bytes:41198,md5:"dee5d8ba1bf64ad568f79443d7a46e31",name:"ground_r.jpg"},{bytes:131079,md5:"4fc39184af432fcbc6ffcd94ba91d29e",name:"ol_l.png"},{bytes:69790,md5:"17b79ecf37e3de7a83bf7f991145e691",name:"ol_r.png"},{bytes:58939,md5:"d37797be9836fe61ca6bd124b3148d42",name:"tree1.png"}],sprites_env1_low:[{bytes:15181,md5:"e2bea2ce52faac7743ec8f27985e1856",
name:"bg.jpg"},{bytes:50396,md5:"95d6502b82b25fdb4ab14bd91d10ab43",name:"building_left.png"},{bytes:46704,md5:"2df1a7e8c1c2820ffe7ff5068e300b4b",name:"building_right.png"},{bytes:19011,md5:"6901139019048d112c3b85d3ffc2eebe",name:"city_far.png"},{bytes:102663,md5:"831f65f67c5b291647d18db1508f168a",name:"city_l.png"},{bytes:102776,md5:"f7f0459f05dc6f61429c9d734921173b",name:"city_r.png"},{bytes:20058,md5:"e6116cf17d5a24445bf0a775f3c3b280",name:"crowd_l.png"},{bytes:17948,md5:"3d3933e1724a78009acde59315662c59",
name:"crowd_r.png"},{bytes:16058,md5:"08bf1a6f20ad7a6ec33f9fa02d257f44",name:"ground_r.jpg"},{bytes:27732,md5:"6bf8281ecbb02243316785caac9b02ee",name:"ol_l.png"},{bytes:27108,md5:"d309bb03ba2f3ab56c15e8c12a289fe5",name:"ol_r.png"},{bytes:12140,md5:"add2c80dcf70527f70176f675dc20f1b",name:"tree1.png"}],text:[{bytes:16845,md5:"03080160e46dbf2d07f01c8e12660dd9",name:"localization.xml"},{bytes:143,md5:"f79720275ce71f51b2920ad544a02548",name:"README.md"}],temp:[],config:[{bytes:633,md5:"8a03d2844f1ca66b972400ce48fe0b0b",
name:"config.json"}],ingame_htp:[{bytes:16003,md5:"f967b52421cd81a04e3d4f5791d5b4e2",name:"htp_1.png"},{bytes:17502,md5:"dad074b4ce889f4b3c2732690fa3eaf2",name:"htp_2.png"},{bytes:37682,md5:"fb24b13b8fdb6defd0cec85f7433c101",name:"htp_3.png"},{bytes:44476,md5:"f356e4e4ab1f27032fd9528979cccfe8",name:"htp_4.png"},{bytes:57373,md5:"4381810cf872226d5850d6cb18c2f0f5",name:"htp_5.png"},{bytes:81858,md5:"158655241e3961705df7a3556a768221",name:"htp_6.png"},{bytes:56733,md5:"7d009dbbc2b272a6eefa99f90320ba9b",
name:"htp_7.png"},{bytes:31399,md5:"df96d9532bf6ebdcc4bd7fe6c0cb972b",name:"htp_8.png"},{bytes:92003,md5:"4f53eca32409eea748a3c93b6c5adfe1",name:"htp_panel.png"}]}]}};va._supportsCrossOrigin=function(){var a;a=0<=window.navigator.userAgent.indexOf("Linux; U; Android")?!1:null!=(new XMLHttpRequest).withCredentials;a||null;return a}();A._scratchPoint=new jb;rf.NEWLINE=new Uh(10);xd._sharedEvent=new Dl;oc._sharedEvent=new El;nc._sharedEvent=new Fl;Mf.CANVAS_TEXTURES=(new hd("(iPhone|iPod|iPad)","")).match(window.navigator.userAgent);
sa._mediaRefCount=0;sa._detectBlobSupport=!0;ra.VENDOR_PREFIXES=["webkit","moz","ms","o","khtml"];ra.SHOULD_HIDE_MOBILE_BROWSER=window.top==window&&(new hd("Mobile(/.*)? Safari","")).match(window.navigator.userAgent);Ia._detectSupport=!0;Rc._scratchMatrix=new Oc;aa.canadaTrackingEnabled=!1;aa.isReady=!1;ae.defaultPack="ui_loading";Ob.speed1=-90;Ob.speed2=90;Hc.COLOR_FILL=0;Hc.eventSent=!1;Pd.Grid={x:-250,y:0,positions:[{x:338,y:269},{x:453,y:221},{x:573,y:189},{x:696,y:173},{x:820,y:163},{x:327,y:392},
{x:440,y:346},{x:557,y:311},{x:678,y:293},{x:800,y:279},{x:424,y:473},{x:540,y:435},{x:660,y:415},{x:778,y:399}]};yd.Grid={x:0,y:0,positions:[{x:124,y:177},{x:219,y:347},{x:354,y:235},{x:448,y:404},{x:583,y:276},{x:677,y:446}]};Vc.Grid={x:0,y:0,positions:[{x:338,y:269},{x:453,y:221},{x:573,y:189},{x:696,y:173},{x:820,y:163},{x:327,y:392},{x:440,y:346},{x:557,y:311},{x:678,y:293},{x:800,y:279},{x:424,y:473},{x:540,y:435},{x:660,y:415},{x:778,y:399}]};ri.DefaultScene="title";ri.scenes=function(){var a=
new N;a.set("Loading",Ob);a.set("Gameplay",si);a.set("GameplayLoading",ui);a.set("Editor",vi);a.set("EditorLoading",wi);a.set("Win",Uf);a.set("MultiWin",xi);a.set("End",Vf);a.set("Title",Hc);a.set("Mode",zi);a.set("QuickMatchPopup",Ai);a.set("AllStarModePopup",Bi);a.set("AllStarIntroPopup",Ci);a.set("HallOfFame",Fi);a.set("Achievements",Gi);a.set("Stats",Pd);a.set("Posters",Ji);a.set("SelectLevel",yd);a.set("SelectCharacter",Vc);a.set("Pause",Li);a.set("QuitConfirmation",Mi);a.set("Help",Ni);return a}(this);
Pe.list=[{name:"ACHIEVEMENT_TOURNAMENT",state:"ready"},{name:"ACHIEVEMENT_ATTACK_QTY",state:"ready"},{name:"ACHIEVEMENT_DAMAGED_QTY",state:"ready"},{name:"ACHIEVEMENT_POSTERS",state:"ready"},{name:"ACHIEVEMENT_SPECIAL_WIN",state:"ready"},{name:"ACHIEVEMENT_INTERUPT_QTY",state:"ready",type:"progress",goal:10},{name:"ACHIEVEMENT_LONG_SHOT",state:"ready"},{name:"ACHIEVEMENT_PICKUPS_QTY",state:"ready"},{name:"ACHIEVEMENT_ALL_TOURNAMENT",state:"ready"},{name:"ACHIEVEMENT_SHOOTOUT_WIN",state:"ready"},{name:"ACHIEVEMENT_SHOOTOUT_TIME",
state:"ready"},{name:"ACHIEVEMENT_DUNK_CHALLENGE_WIN",state:"ready"},{name:"ACHIEVEMENT_DUNK_CHALLENGE_QTY",state:"ready"},{name:"ACHIEVEMENT_HORSE_WIN",state:"ready"},{name:"ACHIEVEMENT_ALL_TOKENS",state:"ready"},{name:"ACHIEVEMENT_4_PLAYERS",state:"ready"}];Pe.quantities=function(){var a=new N;a.set("ACHIEVEMENT_ATTACK_QTY",20);a.set("ACHIEVEMENT_DAMAGED_QTY",20);a.set("ACHIEVEMENT_INTERUPT_QTY",10);a.set("ACHIEVEMENT_PICKUPS_QTY",5);a.set("ACHIEVEMENT_SHOOTOUT_TIME",15);a.set("ACHIEVEMENT_DUNK_CHALLENGE_QTY",
15);return a}(this);Ic.PlayerID="player";Ic.DefaultPack="ai";V.EDITOR_EXCLUDE=["forceUpdate","initialized","_parentViewMatrixUpdateCount","_viewMatrixUpdateCount"];V.ENABLE_POINTER=!1;V.mobilePackSuffix="_mobile";V.lowEndPackSuffix="_low";Pb.EDITOR_DEFAULTS={};zd.DEFAULTS={pack:"",asset:"",layer:"default",offset:{x:0,y:0},overrides:{},start:null,autoRemove:!1,delay:0,loop:!0,fps:-1};Og.DEFAULTS={flumpAsset:null,animOffset:{x:0,y:0},flumpOffset:{x:0,y:0}};Jc.DEFAULT_OFFET_TIME=1;Jc.DEFAULT_OFFET_EASING=
t.quadInOut;Ba.jumpImpulse=-1600;Ba.runForce=180;Ba.airForce=120;Ba.maxVelocityX=325;Ba.maxVelocityXWithBall=250;Ba.maxVelocityY=650;Ba.gravFactor=1;ue.CHARACTER_CONTACT_TYPE="CHARACTER";Rb.CHARACTER_CONTACT_TYPE="CHARACTER";Qb.minHangTime=0;Qb.defaultSuccessEndDelay=0.5;Qb.defaultDunkData={direction:1,loop:!1,loopPre:!1,loopIn:!1,loopOut:!1,loopHang:!1};Qd.DEFAULTS={data:{x:100,y:0,cooldown:0.1,time:0.2,delay:0.2,anim:"attack"},offset:{x:0,y:0}};Qg.DEFAULTS={data:{x:0,y:0,cooldown:0.1,time:0.2,delay:0.2},
offset:{x:0,y:0}};Ha.TMNT_1="team_tmnt_1";Ha.TMNT_2="team_tmnt_2";Ha.HARVEY_BEAKS="team_hb";Ha.SPONGE_BOB="team_sb";Ha.LOUD="team_loud";Ha.HENRY_DANGER="team_hd";Ha.POWER_RANGERS="team_pr";Ha.all=[Ha.TMNT_1,Ha.TMNT_2,Ha.HARVEY_BEAKS,Ha.SPONGE_BOB,Ha.LOUD,Ha.HENRY_DANGER,Ha.POWER_RANGERS];o.$name="nick_basketball_2_v0.3";o.width=960;o.height=560;o.superMoveTotal=100;o.superMovePerSecond=1;o.superMovePerDunk=10;o.superMovePerAttack=10;o.pointPerGame=21;o.pointPerDunk=2;o.pointPerMegaDunk=3;o.pointPerShortShot=
2;o.pointPerLongShot=3;o.distanceForLongShot=300;o.autoAim=!0;na.WAKE=1;na.PROPS=2;na.ANGDRAG=4;na.ARBITERS=8;Te.gravity=1200;Te.fixedDt=0.025;Te.BallMaterial=new zj(1.5,0,2,1,0.001);ca.leo={name:"leo",team:Ha.TMNT_1,partner:"raph",gender:"male",numDunkAudio:4};ca.raph={name:"raph",team:Ha.TMNT_1,partner:"leo",gender:"male",numDunkAudio:6};ca.mike={name:"mike",team:Ha.TMNT_2,partner:"donnie",gender:"male",numDunkAudio:5};ca.donnie={name:"donnie",team:Ha.TMNT_2,partner:"mike",gender:"male",numDunkAudio:6};
ca.foo={name:"foo",team:Ha.HARVEY_BEAKS,partner:"fee",gender:"male",numDunkAudio:5};ca.fee={name:"fee",team:Ha.HARVEY_BEAKS,partner:"foo",gender:"female",numDunkAudio:6};ca.spongebob={name:"spongebob",team:Ha.SPONGE_BOB,partner:"patrick",gender:"male",numDunkAudio:6};ca.patrick={name:"patrick",team:Ha.SPONGE_BOB,partner:"spongebob",gender:"male",numDunkAudio:6};ca.lincoln={name:"lincoln",team:Ha.LOUD,partner:"lynn",gender:"male",numDunkAudio:3,accessoryFlip:!0};ca.lynn={name:"lynn",team:Ha.LOUD,partner:"lincoln",
gender:"female",numDunkAudio:3};ca.henry={name:"henry",team:Ha.HENRY_DANGER,partner:"captain_danger",gender:"male",numDunkAudio:6};ca.captain_danger={name:"captain_danger",team:Ha.HENRY_DANGER,partner:"henry",gender:"male",numDunkAudio:6};ca.red_ranger={name:"red_ranger",team:Ha.POWER_RANGERS,partner:"pink_ranger",gender:"male",numDunkAudio:6,accessoryFlip:!0};ca.pink_ranger={name:"pink_ranger",team:Ha.POWER_RANGERS,partner:"red_ranger",gender:"female",numDunkAudio:5,accessoryFlip:!0};ca.list=[ca.donnie,
ca.mike,ca.raph,ca.leo,ca.henry,ca.spongebob,ca.patrick,ca.foo,ca.fee,ca.captain_danger,ca.lincoln,ca.lynn,ca.red_ranger,ca.pink_ranger];j.StorageDefaults={};j.player=ca.lynn;j.gameType=Ja.ONE_VERSUS_ONE;j.gameMode=Z.QUICKMATCH;j.gameDifficulty=Jb.EASY;j.nbPlayers=4;j.players=[ca.raph,ca.lincoln,ca.spongebob,ca.fee];j.playerId=0;j.isLeader=!0;j.maxTurn=5;j.turn=0;j.round=1;j.hasWon=!1;j.homeScore=0;j.awayScore=0;j.time=0;j.dunks=0;j.megaDunks=0;j.dunkSuccess=0;j.dunkFail=0;j.attacks=0;j.stuns=0;j.shortShots=
0;j.longShots=0;j.shootSuccess=0;j.shootFail=0;j.jumps=0;j.doubleJumps=0;j.blocks=0;j.steals=0;j.pickupGrabbed=0;j.newCharacterUnlock=!1;j.newPosterUnlock=!1;j.isLongShot=!1;Wf.DefaultLayers=[{name:"bg",parallax:{x:0,y:0}},{name:"cityFar",parallax:{x:0.2,y:0.2}},{name:"city",parallax:{x:0.5,y:0.5}},{name:"back",parallax:{x:1,y:1}},{name:"platform",parallax:{x:1,y:1}},{name:"default",parallax:{x:1,y:1}},{name:"front",parallax:{x:1,y:1}},{name:"overlay",parallax:{x:1.2,y:1}}];za.list="level1,level2,level3,level4,level5,level6".split(",");
za.shootout=["level_shootout1","level_shootout2","level_shootout3"];za.dunk=["level_dunk1","level_dunk2","level_dunk3"];za.horse=["level_horse1","level_horse2","level_horse3"];za.PackName="levels";za._levelCache=new N;Kg.levels=function(){var a=new N;a.set("level1",{playerSuperMoveFactor:1,ai:{aiSuperMoveFactor:0.5,aiSpeedFactor:0.75,aiWeapon:"punch_ai_easy",behaviorTickRate:0.4,minShootSpeed:1,maxShootSpeed:3,shootSuccessRate:1},shoot:{speed:1.5,minPosition:0.3,maxPosition:0.7,indicatorRandomStart:!0},
limits:{minX:-850,maxX:850,minY:-650,maxY:260},time:480,type:Ja.ONE_VERSUS_ONE});a.set("level2",{playerSuperMoveFactor:1,ai:{aiSuperMoveFactor:0.5,aiSpeedFactor:0.8,aiWeapon:"punch_ai_easy",behaviorTickRate:0.4,minShootSpeed:1,maxShootSpeed:3,shootSuccessRate:1},shoot:{speed:1.5,minPosition:0.3,maxPosition:0.7,indicatorRandomStart:!0},limits:{minX:-850,maxX:850,minY:-650,maxY:260},time:480,type:Ja.ONE_VERSUS_ONE});a.set("level3",{playerSuperMoveFactor:0.9,ai:{aiSuperMoveFactor:0.5,aiSpeedFactor:0.85,
aiWeapon:"punch_ai_normal",behaviorTickRate:0.4,minShootSpeed:1,maxShootSpeed:3,shootSuccessRate:1},shoot:{speed:1.5,minPosition:0.3,maxPosition:0.7,indicatorRandomStart:!0},limits:{minX:-850,maxX:850,minY:-650,maxY:260},time:480,type:Ja.TWO_VERSUS_TWO});a.set("level4",{playerSuperMoveFactor:0.7,ai:{aiSuperMoveFactor:0.5,aiSpeedFactor:0.95,aiWeapon:"punch_ai_normal",behaviorTickRate:0.4,minShootSpeed:1,maxShootSpeed:3,shootSuccessRate:1},shoot:{speed:1.5,minPosition:0.3,maxPosition:0.7,indicatorRandomStart:!0},
limits:{minX:-850,maxX:620,minY:-650,maxY:260},time:480,type:Ja.TWO_VERSUS_TWO});a.set("level5",{playerSuperMoveFactor:0.6,ai:{aiSuperMoveFactor:0.5,aiSpeedFactor:1,aiWeapon:"punch_ai_hard",behaviorTickRate:0.35,minShootSpeed:1,maxShootSpeed:3,shootSuccessRate:1},shoot:{speed:1.5,minPosition:0.3,maxPosition:0.7,indicatorRandomStart:!0},limits:{minX:-750,maxX:600,minY:-650,maxY:260},time:480,type:Ja.TWO_VERSUS_TWO});a.set("level6",{playerSuperMoveFactor:0.5,ai:{aiSuperMoveFactor:0.5,aiSpeedFactor:1,
aiWeapon:"punch_ai_hard",behaviorTickRate:0.16,minShootSpeed:1,maxShootSpeed:3,shootSuccessRate:1},shoot:{speed:1.5,minPosition:0.3,maxPosition:0.7,indicatorRandomStart:!0},limits:{minX:-500,maxX:550,minY:-650,maxY:260},time:480,type:Ja.TWO_VERSUS_TWO});a.set("level_dunk1",{playerSuperMoveFactor:0,ai:null,shoot:{speed:1.5,minPosition:0.3,maxPosition:0.7,indicatorRandomStart:!1},limits:{minX:-600,maxX:600,minY:-1150,maxY:260},time:60});a.set("level_dunk2",{playerSuperMoveFactor:0,ai:null,shoot:{speed:1.5,
minPosition:0.3,maxPosition:0.7,indicatorRandomStart:!1},limits:{minX:-800,maxX:800,minY:-1150,maxY:260},time:60});a.set("level_dunk3",{playerSuperMoveFactor:0,ai:null,shoot:{speed:1.5,minPosition:0.3,maxPosition:0.7,indicatorRandomStart:!1},limits:{minX:-650,maxX:650,minY:-1150,maxY:260},time:60});a.set("level_horse1",{playerSuperMoveFactor:0,ai:null,shoot:{speed:1.5,minPosition:0.3,maxPosition:0.7,indicatorRandomStart:!1},limits:{minX:-700,maxX:700,minY:-1150,maxY:260},time:15});a.set("level_horse2",
{playerSuperMoveFactor:0,ai:null,shoot:{speed:1.5,minPosition:0.3,maxPosition:0.7,indicatorRandomStart:!1},limits:{minX:-700,maxX:700,minY:-1150,maxY:260},time:15});a.set("level_horse3",{playerSuperMoveFactor:0,ai:null,shoot:{speed:1.5,minPosition:0.3,maxPosition:0.7,indicatorRandomStart:!1},limits:{minX:-700,maxX:750,minY:-1150,maxY:260},time:15});a.set("level_shootout1",{playerSuperMoveFactor:0,ai:null,shoot:{speed:1.5,minPosition:0.3,maxPosition:0.7,indicatorRandomStart:!1},limits:{minX:-1E3,maxX:1E3,
minY:-1150,maxY:260},time:30});a.set("level_shootout2",{playerSuperMoveFactor:0,ai:null,shoot:{speed:1.5,minPosition:0.3,maxPosition:0.7,indicatorRandomStart:!1},limits:{minX:-550,maxX:550,minY:-1150,maxY:260},time:30});a.set("level_shootout3",{playerSuperMoveFactor:0,ai:null,shoot:{speed:1.5,minPosition:0.3,maxPosition:0.7,indicatorRandomStart:!1},limits:{minX:-550,maxX:500,minY:-1150,maxY:260},time:30});return a}(this);fb._stateId=0;fb.OFF=fb._stateId++;fb.ON=fb._stateId++;lb._stateId=0;lb.NORMAL=
lb._stateId++;lb.BASEBALL=lb._stateId++;lb.SOCCER=lb._stateId++;lb.SLIME=lb._stateId++;Sb._stateId=0;Sb.NORMAL=Sb._stateId++;Sb.HIGH=Sb._stateId++;Sb.LOW=Sb._stateId++;Oa.nightTime=new Dj;Oa.ball=new lb;Oa.jump=new Sb;ve.EDITOR_EXCLUDE=["forceUpdate","initialized","_parentViewMatrixUpdateCount","_viewMatrixUpdateCount"];Yf.EDITOR_EXCLUDE=["key","spawner"];Xc.BALL_CONTACT_TYPE="BALL";Xc.floorY=180;Tg.DEFAULTS=[];$f.DEFAULTS=[];Ug.DEFAULTS={pickup:"speed_pickup",time:20,rangeX:200};Vg.DEFAULTS={effect:{jumpForce:1,
runForce:1,airForce:1,maxVelocityX:1,maxVelocityXWithBall:1,maxVelocityY:1,gravFactor:1,duration:1}};Sm.components=function(){var a=new N;a.set("template",Yf);a.set("cameraFrame",aj);a.set("frameTarget",Se);a.set("display",V);a.set("mixed_anim",Og);a.set("night_image",Sg);a.set("night_pattern",Sg);a.set("character",ue);a.set("contacts",Rb);a.set("state",yj);a.set("weapon",Qg);a.set("ball",Xc);a.set("basket",zf);a.set("scoreboard",Tg);a.set("htpboard",$f);a.set("pickup_spawner",Ug);a.set("pickup",
Vg);a.set("effect",Ej);a.set("crowd",Wg);a.set("flash",ag);a.set("superdunk",z);a.set("leo_special",Cb);a.set("donnie_special",dj);a.set("mike_special",jj);a.set("spongebob_special",oj);a.set("patrick_special",kj);a.set("raph_special",mj);a.set("fee_special",ej);a.set("foo_special",fj);a.set("lincoln_special",hj);a.set("lynn_special",ij);a.set("henry_special",gj);a.set("captain_danger_special",cj);a.set("red_ranger_special",nj);a.set("pink_ranger_special",lj);a.set("anim_overlay",bj);a.set("ai",Oi);
a.set("aiDestination",Mg);a.set("moving",Fj);a.set("horse_token",Gj);a.set("horse_platform",bg);return a}(this);Wl.tutorials=[{titleID:"HTP_1",description:"HTP_1_1",mobileDescription:!0,mobileBG:!0,imagePosition:{x:0,y:0},texts:[]},{titleID:"HTP_2",description:"HTP_2_1",mobileDescription:!0,mobileBG:!0,imagePosition:{x:0,y:0},texts:[]},{titleID:"HTP_3",description:"HTP_3_1",mobileDescription:!0,mobileBG:!0,imagePosition:{x:0,y:0},texts:[]},{titleID:"HTP_4",description:"HTP_4_1",mobileDescription:!0,
mobileBG:!0,imagePosition:{x:0,y:0},texts:[]},{titleID:"HTP_5",description:"HTP_5_1",mobileDescription:!1,mobileBG:!0,imagePosition:{x:0,y:0},texts:[{textID:"HTP_5_2",mobileVariant:!1,x:340,y:400,mobileX:330,mobileY:375,font:"15_black"},{textID:"HTP_5_3",mobileVariant:!1,x:265,y:270,mobileX:330,mobileY:235,font:"15_black"}],inGameTexts:[{textID:"HTP_5_2",mobileVariant:!1,x:255,y:80,font:"17_blue"},{textID:"HTP_5_3",mobileVariant:!1,x:255,y:160,font:"17_blue"}]},{titleID:"HTP_6",description:"HTP_6_1",
mobileDescription:!1,mobileBG:!1,imagePosition:{x:0,y:0},texts:[]},{titleID:"HTP_7",description:"HTP_7_1",mobileDescription:!1,mobileBG:!0,imagePosition:{x:0,y:0},texts:[{textID:"HTP_7_2",mobileVariant:!1,x:593,y:400,font:"17_white"}]},{titleID:"HTP_8",description:"HTP_8_1",mobileDescription:!1,mobileBG:!1,imagePosition:{x:0,y:0},texts:[{textID:"HTP_8_2",mobileVariant:!1,x:250,y:320,width:125,font:"15_black"},{textID:"HTP_8_3",mobileVariant:!1,x:400,y:415,width:125,font:"15_black"},{textID:"HTP_8_5",
mobileVariant:!1,x:552,y:320,width:125,font:"15_black"},{textID:"HTP_8_6",mobileVariant:!1,x:712,y:415,width:125,font:"15_black"}],inGameTexts:[{textID:"HTP_8_2",mobileVariant:!1,x:163,y:160,width:100,font:"17_blue"},{textID:"HTP_8_3",mobileVariant:!1,x:271,y:205,width:100,font:"17_blue"},{textID:"HTP_8_5",mobileVariant:!1,x:367,y:150,width:100,font:"17_blue"},{textID:"HTP_8_6",mobileVariant:!1,x:465,y:205,width:100,font:"17_blue"}]}];se.USE_CACHE=!1;se.USE_ENUM_INDEX=!1;se.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";
qc.DEFAULT_RESOLVER=ja;qc.BASE64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789%:";cg.CHARS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";cg.BYTES=Sd.ofString(cg.CHARS);Bb.count=0;Ke.escapes=function(){var a=new N;a.set("lt","<");a.set("gt",">");a.set("amp","&");a.set("quot",'"');a.set("apos","'");a.set("nbsp",String.fromCharCode(160));return a}(this);pb.SCALE=1;tc.BASE_URL="";kb.SCALE=1;kb.hasInit=!1;kb.enabled=!0;kb._tmp=1;ua.enabled=!1;v.epsilon=1.0E-8;v.fluidAngularDragFriction=
2.5;v.fluidAngularDrag=100;v.fluidVacuumDrag=0.5;v.fluidLinearDrag=0.5;v.collisionSlop=0.2;v.collisionSlopCCD=0.5;v.distanceThresholdCCD=0.05;v.staticCCDLinearThreshold=0.05;v.staticCCDAngularThreshold=0.005;v.bulletCCDLinearThreshold=0.125;v.bulletCCDAngularThreshold=0.0125;v.dynamicSweepLinearThreshold=17;v.dynamicSweepAngularThreshold=0.6;v.angularCCDSlipScale=0.75;v.arbiterExpirationDelay=6;v.staticFrictionThreshold=2;v.elasticThreshold=20;v.sleepDelay=60;v.linearSleepThreshold=0.2;v.angularSleepThreshold=
0.4;v.contactBiasCoef=0.3;v.contactStaticBiasCoef=0.6;v.contactContinuousBiasCoef=0.4;v.contactContinuousStaticBiasCoef=0.5;v.illConditionedThreshold=2E8;oa.staging="localhost,stolo.com,wip.luckyhammers.com,luckyhammers.com,192.168,hudson.mtvi.com,stash.mtvi.com,nick-q".split(",");oa.onMute=new O;oa.onPause=new ka;oa.onResume=new ka;Ga.REDIRECT_URL="";Ga.DOMAIN_LIST=[];Ga.REDIRECT_DELAY=3E4;Ga.GET_DOMAINS_DELAY=3E3;sc.output_event_array=[];qh.DefaultState=Ma.Hidden;Pa.defaultPack="ai";Pa._cache=new N;
u.tweens=new Bb;u.DefaultTime=0.4;u.DefaultEase=t.quintOut;Um.bounceDownTemplate=[{to:{y:"+=10"},time:0.05,ease:t.quintOut},{then:{y:"+=0"},time:0.3,ease:t.backOut}];Zb.DefaultMovePPS=100;Zb.DefaultMoveSpeed=1;Zb.DefaultMoveTime=1;Zb.DefaultMoveEase=t.quadInOut;M.onTemplateAdded=new O;M.onActorData=new O;M._registeredComponents=new N;M._componentMap=new N;M._templateMap=new N;jg.SOUND_CHANNEL="COLLECTABLE";sh.DEFAULTS={value:0.1,knockBackX:0,knockBackY:0,cooldown:0.3,charge:-1,enabled:!0,target:"DAMAGEABLE"};
Ge.DefaultFont="debug_font";Ge.DEFAULTS={center:!0,shape:{},text:""};Fe.EDITOR_EXCLUDE=["direction"];Fe.EDITOR_METHODS=["flip"];uh.DEFAULTS={layer:"default",offset:{x:0,y:0},color:16711680,width:100,height:100,transparency:0};Ud.COMPONENT_NAME="pattern";$b.DEFAULTS={cullTexture:!0,drawTexture:!1};$b.EDITOR_DEFAULTS={pack:"",asset:"",layer:"default",grid:"default",offset:{x:0,y:0},xsize:2,ysize:2,tileWidth:100,tileHeight:100,mapping:[[4],[7],[1],[6],[1],[4],[0],[3],[1],[8],[4],[7],[2],[5],[1],[4]],
cornerMode:!1,cullTexture:!0,cache:!0};$b.tileCache=new N;$b.cache=new N;sd.DEFAULTS=$b.DEFAULTS;sd.EDITOR_DEFAULTS={pack:"",asset:"",layer:"default",offset:{x:0,y:0},width:200,height:200,slices:[],template:[]};sd.cache=new N;Gd.USE_CACHE=!0;Gd.CACHE=new N;td.EDITOR_EXCLUDE="_complexShape,initialized,forceUpdate,setTransform,enabled,velocity,impulse".split(",");td.defaultDamping=0;td.DEFAULT_SHAPE={x:0,y:0,width:0,height:0,padding:{left:0,top:0,right:0,bottom:0},docking:{left:0,top:0,right:0,bottom:0},
sensor:!1,material:null,fluid:null,points:[]};td.DEFAULTS={shape:{},offset:{x:0,y:0},contacts:!0,mass:0,massScale:-1,bullet:!1,velocity:{x:0,y:0},impulse:{x:0,y:0},kinematic:!1,enabled:!0};wh.DEFAULTS={};xh.DEFAULTS={left:!0,right:!0,top:!1,bottom:!0};yh.DEFAULTS={};lg.defaultResistance=2;je.SOUND_CHANNEL="DAMAGE";je.SOUND_CHANNEL_DEATH="DEATH";je.DEFAULTS={maximum:1,knock:1,cooldown:0,invincible:!1,disposeOwner:!1,removePhysics:!0,damageSound:"",invincibleSound:"",deathSound:""};ef.DEFAULTS={projectile:"",
offset:{x:0,y:0},force:100,angle:0,launchSound:"",shotDelay:1};Zf.DEFAULTS={projectile:"",projectiles:5,offset:{x:0,y:0},force:400,angle:-90,angleSpread:50,launchSound:"",shotDelay:0};zh.DEFAULTS={removeAfter:0,stopPhysicOnExplode:!1,velocityRotation:!1,explodeSound:"",hitSound:"",expire:0,ignoreProjectiles:!0,target:"ANY_BODY"};Ah.DEFAULTS={sequence:null,repeat:!1,speed:1};ln.ComponentMap=function(){var a=new N;a.set("debug",Ge);a.set("template",Yf);a.set("transform",Fe);a.set("moveTransform",yk);
a.set("moveSequence",th);a.set("cameraTarget",Ab);a.set("cameraTargetDirection",uk);a.set("editorSelection",kg);a.set("display",V);a.set("image",ve);a.set("fill",uh);a.set("animation",Pb);a.set("flump",zd);a.set("pattern",Ud);a.set("tiler",$b);a.set("slicer",sd);a.set("text",zk);a.set("scroller",Vd);a.set("layerScroller",Ak);a.set("positionLock",Bk);a.set("skew",qk);a.set("line",Gd);a.set("shadow",Ck);a.set("physics",td);a.set("physicsDebug",vh);a.set("passthrough",wh);a.set("passthroughable",xh);
a.set("frictioner",yh);a.set("forceField",Ek);a.set("airFriction",lg);a.set("spawnPoint",Fk);a.set("damage",sh);a.set("health",je);a.set("collector",xk);a.set("collectable",jg);a.set("launcher",ef);a.set("exploder",Zf);a.set("projectile",zh);a.set("checkpoint",vk);a.set("checkpointer",wk);a.set("platform",Ah);a.set("bouncer",tk);a.set("mods",Df);a.set("stats",Bh);a.set("speedAdjuster",Of);a.set("disposer",xb);return a}(this);Uc.DEFAULT_FONT="debug_font";He.SMALL_STEP_MODIFIER=i.Shift;ng.COMPONENT_NAME=
"editor_pattern_resizer";og.COMPONENT_NAME="editor_polygons";Hf.COMPONENT_NAME="editor_remover";Hk.map=function(){var a=new N;a.set(ng.COMPONENT_NAME,ng);a.set(og.COMPONENT_NAME,og);a.set(Hf.COMPONENT_NAME,Hf);return a}(this);Xd.spriteComponents="image,fill,animation,flump,pattern,tiler,slicer,text,scroller,layerScroller,line,spine,tile_pattern".split(",");T.isInEditor=-1;Tc.defaultComponentsRegistered=!1;g.internal=!1;g.id_ImmState_ACCEPT=1;g.id_ImmState_IGNORE=2;g.id_ImmState_ALWAYS=4;g.id_GravMassMode_DEFAULT=
0;g.id_GravMassMode_FIXED=1;g.id_GravMassMode_SCALED=2;g.id_InertiaMode_DEFAULT=0;g.id_MassMode_DEFAULT=0;g.id_MassMode_FIXED=1;g.id_BodyType_STATIC=1;g.id_BodyType_DYNAMIC=2;g.id_BodyType_KINEMATIC=3;g.id_ListenerType_BODY=0;g.id_ListenerType_CONSTRAINT=1;g.id_ListenerType_INTERACTION=2;g.id_PreFlag_ACCEPT=1;g.id_ListenerType_PRE=3;g.id_CbEvent_BEGIN=0;g.id_CbEvent_ONGOING=6;g.id_CbEvent_END=1;g.id_InteractionType_COLLISION=1;g.id_CbEvent_WAKE=2;g.id_InteractionType_SENSOR=2;g.id_CbEvent_SLEEP=3;
g.id_InteractionType_FLUID=4;g.id_CbEvent_BREAK=4;g.id_InteractionType_ANY=7;g.id_CbEvent_PRE=5;g.id_ShapeType_CIRCLE=0;g.id_ShapeType_POLYGON=1;null==g.CbEvent_PRE&&(g.internal=!0,g.CbEvent_PRE=new Vb,g.internal=!1);ea.PRELISTENER=g.CbEvent_PRE;null==g.CbEvent_BEGIN&&(g.internal=!0,g.CbEvent_BEGIN=new Vb,g.internal=!1);ea.BEGIN=g.CbEvent_BEGIN;null==g.CbEvent_END&&(g.internal=!0,g.CbEvent_END=new Vb,g.internal=!1);ea.END=g.CbEvent_END;null==g.CbEvent_ONGOING&&(g.internal=!0,g.CbEvent_ONGOING=new Vb,
g.internal=!1);ea.ONGOING=g.CbEvent_ONGOING;null==g.InteractionType_COLLISION&&(g.internal=!0,g.InteractionType_COLLISION=new Qa,g.internal=!1);wa.COLLISION=g.InteractionType_COLLISION;null==g.InteractionType_SENSOR&&(g.internal=!0,g.InteractionType_SENSOR=new Qa,g.internal=!1);wa.SENSOR=g.InteractionType_SENSOR;null==g.InteractionType_FLUID&&(g.internal=!0,g.InteractionType_FLUID=new Qa,g.internal=!1);wa.FLUID=g.InteractionType_FLUID;null==g.InteractionType_ANY&&(g.internal=!0,g.InteractionType_ANY=
new Qa,g.internal=!1);wa.ANY=g.InteractionType_ANY;Na.ANY_BODY="ANY_BODY";Na.DEFAULT="DEFAULT";Na.PLAYER="PLAYER";Na.FRICTIONER="FRICTIONER";Na.FLUID="FLUID";Na.LAUNCHER="LAUNCHER";Na.PROJECTILE="PROJECTILE";Na.COLLECTABLE="COLLECTABLE";Na.COLLECTOR="COLLECTOR";Na.ACTIVABLE="ACTIVABLE";Na.ACTIVATOR="ACTIVATOR";Na.PASSTHROUGH="PASSTHROUGH";Na.PASSTHROUGHABLE="PASSTHROUGHABLE";Na.CHECKPOINT="CHECKPOINT";Na.CHECKPOINTER="CHECKPOINTER";Na.TELEPORTER="TELEPORTER";Na.TELEPORTABLE="TELEPORTABLE";Na.DAMAGEABLE=
"DAMAGEABLE";Na.DAMAGER="DAMAGER";Na.DAMAGEABLE_MOB="DAMAGEABLE_MOB";Na.MOB="MOB";Na.OBSTACLE="OBSTACLE";Na.GROUND="GROUND";Na.WALL="WALL";Na.BOUNCER="BOUNCER";Bd._materialMap=new N;Wd.maxSize=5184;Ve.addedMethod="onActorAdded";pg.enabled=!1;W._idIncrement=0;W._achievementMapById=new Dc;W._achievementMapByName=new N;W._disposer=new xb;C.onManifestInit=new Nc;C._cachedPacks=new N;C._replacedPacks=new N;C._protectedPacks=new N;C._loadingPacks=new N;C._loadingPacksDict=new Bb;C._jsonCache=new N;C._xmlCache=
new N;Ta.localesMap=new N;Ta.NOT_FOUND_PREFIX="[(";Ta.NOT_FOUND_SUFFIX=")]";I.CaseSensitive=!1;I.SkipChange=!1;I.onChange=new ka;I.onPop=new ka;I.onPush=new ka;I._sceneMap=new N;p.channels=new N;p.soundPollingMap=new N;p.soundPollingSeconds=0.1;p.defaultVolume=1;p.defaultMusicVolume=1;p._volume=p.defaultVolume;p._unmuteVolume=p.defaultVolume;Aa.DefaultFileName="{{name}}/{{name}}.json";Aa.DefaultManifest="sprites";Aa._cachedSpritesheets=new N;Aa._loadingSpritesheets=new N;S.defaultFontName="default";
S.ChangePixelSnapping=!0;S._fontMap=new N;S._fontStylesMap=new N;Ca.verbose=!1;bd.DefaultFPS=12;bd.BaseIndex=1;qg.BaseIndex=bd.BaseIndex;q.galaxyS2=["GT-I9100","SCH-i929","GT-I9105"];q.galaxyS3="GT-I9300,GT-I9300I,GT-I9305,GT-I8190,GT-I8200,SGH-I747".split(",");q.galaxyS4="GT-I9500,GT-I9502,GT-I9505,GT-I9190,GT-I9195,SCH-I545,SPH-L720,SGH-M919,SGH-I337,SM-C101".split(",");q.galaxyTab2=["GT-P5110","GT-P3110","GT-P5100"];q.ie9=["MSIE 9"];q.ie10=["MSIE 10"];q.lowPerformanceDevices=[q.galaxyS2,q.galaxyS3,
q.galaxyS4,q.galaxyTab2,q.ie9,q.ie10];q.lowMemoryDevices=[q.galaxyS2,q.galaxyS3,q.galaxyS4,q.galaxyTab2];q.lowPerformance=!1;q.lowMemory=!1;q.power=80;q.ipadVersion=4;q.scale=1;q.onScaleChange=new ka;E._spritesheets=new Bb;gb.DefaultMovePPS=100;gb.DefaultMoveSpeed=1;gb.DefaultMoveTime=1;gb.DefaultMoveEase=t.quadInOut;db.hasInit=!1;F.sdkVersion="Stolo Haxe v1.1.4";F.platforms={web:{desktop:"NICKWEB_DESKTOP",desktop_flash:"NICKWEB_DESKTOP",mobile:"NICKWEB_MOBILE",tablet:"NICKWEB_TABLET"},app:{android:"ANDROID_MOBILEAPP",
ios:"IOS_MOBILEAPP"}};F.debug=!1;F.allowLiveKey=!0;F.useTimezoneOffset=!1;F.isLive=!1;F.isReady=!1;F.isNewPlayer=!1;F.userIDStorageField="UserId";F.onReady=new ka;Pg.DEFAULT_EASING=t.quadInOut;Lb._Interactor=0;Lb._CbType=0;Lb._CbSet=0;Lb._Listener=0;Eb.ANY_SHAPE=new We;Eb.ANY_BODY=new We;Eb.ANY_COMPOUND=new We;Eb.ANY_CONSTRAINT=new We;Ya.UCbSet=new tg;Ya.VCbSet=new tg;Ya.WCbSet=new tg;Ya.UCbType=new Id;Ya.VCbType=new Id;Ya.WCbType=new Id;qa.internal=!1;qa.COL=1;qa.FLUID=4;qa.SENSOR=2;ac.internal=
!1;$.flowpoly=new Hh;$.flowsegs=new Hh;Mb.internal=!1;var Fn;null==g.BodyType_STATIC&&(g.internal=!0,g.BodyType_STATIC=new La,g.internal=!1);Fn=g.BodyType_STATIC;var Gn;null==g.BodyType_DYNAMIC&&(g.internal=!0,g.BodyType_DYNAMIC=new La,g.internal=!1);Gn=g.BodyType_DYNAMIC;null==g.BodyType_KINEMATIC&&(g.internal=!0,g.BodyType_KINEMATIC=new La,g.internal=!1);Be.types=[null,Fn,Gn,g.BodyType_KINEMATIC];rb.internal=!1;wb.tmpaabb=new $a;Ae.internal=!1;Ce.internal=!1;oh.internal=!1;af.internal=!1;Ye.internal=
!1;be.internal=!1;gg.internal=!1;ih.internal=!1;jh.internal=!1;hh.internal=!1;ph.internal=!1;cf.internal=!1;gh.internal=!1;$e.internal=!1;fh.internal=!1;Gc.main()})();
